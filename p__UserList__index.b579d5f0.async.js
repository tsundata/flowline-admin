"use strict";(self.webpackChunkflowline_admin=self.webpackChunkflowline_admin||[]).push([[978],{5966:function(ne,K,r){var V=r(1413),b=r(44925),N=r(85893),j=r(2123),J=["fieldProps","proFieldProps"],M=["fieldProps","proFieldProps"],I="text",s=function(_){var A=_.fieldProps,k=_.proFieldProps,e=(0,b.Z)(_,J);return(0,N.jsx)(j.Z,(0,V.Z)({valueType:I,fieldProps:A,filedConfig:{valueType:I},proFieldProps:k},e))},E=function(_){var A=_.fieldProps,k=_.proFieldProps,e=(0,b.Z)(_,M);return(0,N.jsx)(j.Z,(0,V.Z)({valueType:"password",fieldProps:A,proFieldProps:k,filedConfig:{valueType:I}},e))},B=s;B.Password=E,B.displayName="ProFormComponent",K.Z=B},65577:function(ne,K,r){r.r(K),r.d(K,{default:function(){return ge}});var V=r(80164),b=r.n(V),N=r(74411),j=r.n(N),J=r(55559),M=r.n(J),I=r(45223),s=r.n(I),E=r(30967),B=r(79508),Q=r(54549),_=r(49101),A=r(1413),k=r(44925),e=r(85893),C=r(67294),le=r(2123),X=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],te=C.forwardRef(function(y,i){var t=y.fieldProps,v=y.unCheckedChildren,w=y.checkedChildren,a=y.proFieldProps,G=(0,k.Z)(y,X);return(0,e.jsx)(le.Z,(0,A.Z)({valueType:"switch",fieldProps:(0,A.Z)({unCheckedChildren:v,checkedChildren:w},t),ref:i,valuePropName:"checked",proFieldProps:a,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},G))}),Y=te,se=r(48705),q=r(51851),ue=r(20761),x=r(5966),ie=r(60415),o=r(95952),F=r(48086),O=r(71577),oe=r(25084),ee=r(65262),l=r(63436),n=r(50146),h=r(86835),u=r(34041),c=function(i){var t=(0,o.useIntl)(),v=C.useState(),w=b()(v,2),a=w[0],G=w[1];return C.useEffect(function(){(0,ee.Uy)().then(function(p){var T=[];p!=null&&p.items!=null&&p.items.forEach(function(W){T.push({label:W.name,value:W.name})}),G(T)})},[]),(0,e.jsx)(n.Z,{width:800,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:t.formatMessage({id:"pages.userList.form.userConfig",defaultMessage:"\u7528\u6237\u7F16\u8F91"}),visible:i.updateModalVisible,onCancel:function(){i.onCancel()},footer:null,children:(0,e.jsxs)(l.A,{initialValues:{name:i.values.name,email:i.values.email,password:i.values.password,active:i.values.active,avatar:i.values.avatar,roles:i.values.roles},title:t.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),onFinish:function(){var p=M()(s().mark(function T(W){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,i.onSubmit(j()(j()({},i.values),W));case 2:return U.abrupt("return",!0);case 3:case"end":return U.stop()}},T)}));return function(T){return p.apply(this,arguments)}}(),submitter:{submitButtonProps:{},render:function(T){return[(0,e.jsx)(O.Z,{type:"primary",onClick:function(){var L,U;return(L=T.form)===null||L===void 0||(U=L.submit)===null||U===void 0?void 0:U.call(L)},children:"\u63D0\u4EA4"},"submit"),(0,e.jsx)(O.Z,{type:"dashed",onClick:function(){var L;return(L=T.form)===null||L===void 0?void 0:L.resetFields()},children:"\u91CD\u7F6E"},"rest"),(0,e.jsx)(O.Z,{type:"dashed",onClick:function(){return i.onCancel()},children:"\u53D6\u6D88"},"cancel")]}},children:[(0,e.jsx)(x.Z,{rules:[{required:!0,message:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.ruleName",defaultMessage:"User name is required"})}],name:"name",placeholder:t.formatMessage({id:"pages.userList.form.name",defaultMessage:"User name"}),label:t.formatMessage({id:"pages.userList.form.name",defaultMessage:"User name"})}),(0,e.jsx)(x.Z,{name:"email",placeholder:t.formatMessage({id:"pages.userList.form.email.placeholder",defaultMessage:"User email"}),label:t.formatMessage({id:"pages.userList.form.email",defaultMessage:"User email"})}),(0,e.jsx)(x.Z.Password,{rules:[{required:!0,message:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.password.rule",defaultMessage:"User password is required"})}],name:"password",placeholder:t.formatMessage({id:"pages.userList.form.password.placeholder",defaultMessage:"User password"}),label:t.formatMessage({id:"pages.userList.form.password",defaultMessage:"User password"})}),(0,e.jsx)(Y,{name:"active",placeholder:t.formatMessage({id:"pages.userList.form.active.placeholder",defaultMessage:"User active"}),label:t.formatMessage({id:"pages.userList.form.active",defaultMessage:"User active"})}),(0,e.jsx)(x.Z,{name:"avatar",placeholder:t.formatMessage({id:"pages.userList.form.avatar.placeholder",defaultMessage:"User avatar"}),label:t.formatMessage({id:"pages.userList.form.avatar",defaultMessage:"User avatar"})}),(0,e.jsx)(h.Z.Item,{name:"roles",label:t.formatMessage({id:"pages.userList.form.roles",defaultMessage:"Roles"}),children:(0,e.jsx)(u.Z,{mode:"multiple",options:a,placeholder:t.formatMessage({id:"pages.userList.form.roles.placeholder",defaultMessage:"Roles"})})})]})})},D=c,f=function(){var y=M()(s().mark(function i(t){var v,w,a;return s().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return v=F.ZP.loading("Adding"),p.prev=1,w="user",a="v1",p.next=6,(0,E.g_)(j()(j()({},t),{},{kind:w,apiVersion:a}));case 6:return v(),F.ZP.success("Added successfully"),p.abrupt("return",!0);case 11:return p.prev=11,p.t0=p.catch(1),v(),F.ZP.error("Adding failed, please try again!"),p.abrupt("return",!1);case 16:case"end":return p.stop()}},i,null,[[1,11]])}));return function(t){return y.apply(this,arguments)}}(),S=function(){var y=M()(s().mark(function i(t){var v;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return v=F.ZP.loading("Updating"),a.prev=1,a.next=4,(0,E.pf)({uid:t.uid},t);case 4:return v(),F.ZP.success("Update is successful"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),v(),F.ZP.error("Update failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},i,null,[[1,9]])}));return function(t){return y.apply(this,arguments)}}(),he=function(){var y=M()(s().mark(function i(t){var v;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(v=F.ZP.loading("deleting"),t){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,(0,E.DZ)({uid:"-"});case 6:return v(),F.ZP.success("Deleted successfully and will refresh soon"),a.abrupt("return",!0);case 11:return a.prev=11,a.t0=a.catch(3),v(),F.ZP.error("Delete failed, please try again"),a.abrupt("return",!1);case 16:case"end":return a.stop()}},i,null,[[3,11]])}));return function(t){return y.apply(this,arguments)}}(),ve=function(){var i=(0,C.useState)(!1),t=b()(i,2),v=t[0],w=t[1],a=(0,C.useState)(!1),G=b()(a,2),p=G[0],T=G[1],W=(0,C.useState)(!1),L=b()(W,2),U=L[0],de=L[1],z=(0,C.useRef)(),Me=(0,C.useState)(),ce=b()(Me,2),Z=ce[0],re=ce[1],Pe=(0,C.useState)([]),pe=b()(Pe,2),ae=pe[0],me=pe[1],$=(0,o.useIntl)(),fe=[{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.common.uid",defaultMessage:"UID"}),dataIndex:"uid",tip:"The uid is the unique key",render:function(d,m){return(0,e.jsx)("a",{onClick:function(){re(m),de(!0)},children:d})}},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.userName.nameLabel",defaultMessage:"User name"}),dataIndex:"name"},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.roles",defaultMessage:"roles"}),dataIndex:"roles",renderText:function(d){return d.join(", ")}},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.email",defaultMessage:"user email"}),dataIndex:"email"},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.active",defaultMessage:"active"}),dataIndex:"active",renderText:function(d){return d?(0,e.jsx)(B.Z,{}):(0,e.jsx)(Q.Z,{})}},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.avatar",defaultMessage:"avatar"}),dataIndex:"avatar",valueType:"image"},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.titleCreatedAt",defaultMessage:"Created time"}),sorter:!0,dataIndex:"creationTimestamp",valueType:"dateTime"},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.common.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(d,m){return[(0,e.jsx)("a",{onClick:function(){T(!0),re(m)},children:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.userConfig",defaultMessage:"Configuration"})},"config")]}}];return(0,e.jsxs)(se._z,{children:[(0,e.jsx)(q.Z,{headerTitle:$.formatMessage({id:"pages.common.tableTitle",defaultMessage:"Enquiry form"}),actionRef:z,rowKey:"uid",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(O.Z,{type:"primary",onClick:function(){w(!0)},children:[(0,e.jsx)(_.Z,{})," ",(0,e.jsx)(o.FormattedMessage,{id:"pages.common.new",defaultMessage:"New"})]},"primary")]},request:M()(s().mark(function g(){var d;return s().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,E.Lh)();case 2:return d=P.sent,P.abrupt("return",{data:d.items,success:!0});case 4:case"end":return P.stop()}},g)})),columns:fe,rowSelection:{onChange:function(d,m){me(m)}}}),ae?.length>0&&(0,e.jsx)(se.Sc,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(o.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,e.jsx)("a",{style:{fontWeight:600},children:ae.length})," ",(0,e.jsx)(o.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,e.jsx)(O.Z,{onClick:M()(s().mark(function g(){var d,m;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,he(ae);case 2:me([]),(d=z.current)===null||d===void 0||(m=d.reloadAndRest)===null||m===void 0||m.call(d);case 4:case"end":return H.stop()}},g)})),children:(0,e.jsx)(o.FormattedMessage,{id:"pages.common.batchDeletion",defaultMessage:"Batch deletion"})})}),(0,e.jsxs)(ue.Y,{title:$.formatMessage({id:"pages.userList.form.newUser",defaultMessage:"New user"}),width:"400px",visible:v,onVisibleChange:w,onFinish:function(){var g=M()(s().mark(function d(m){var P;return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,f(m);case 2:P=R.sent,P&&(w(!1),z.current&&z.current.reload());case 4:case"end":return R.stop()}},d)}));return function(d){return g.apply(this,arguments)}}(),children:[(0,e.jsx)(x.Z,{rules:[{required:!0,message:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.ruleName",defaultMessage:"User name is required"})}],width:"md",name:"name",placeholder:$.formatMessage({id:"pages.userList.form.name",defaultMessage:"User name"})}),(0,e.jsx)(x.Z,{width:"md",name:"email",placeholder:$.formatMessage({id:"pages.userList.form.email.placeholder",defaultMessage:"User email"})}),(0,e.jsx)(x.Z.Password,{rules:[{required:!0,message:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.password.rule",defaultMessage:"User password is required"})}],width:"md",name:"password",placeholder:$.formatMessage({id:"pages.userList.form.password.placeholder",defaultMessage:"User password"})}),(0,e.jsx)(Y,{width:"md",name:"active",placeholder:$.formatMessage({id:"pages.userList.form.active.placeholder",defaultMessage:"User active"}),label:$.formatMessage({id:"pages.userList.form.active",defaultMessage:"Active"})}),(0,e.jsx)(x.Z,{width:"md",name:"avatar",placeholder:$.formatMessage({id:"pages.userList.form.avatar.placeholder",defaultMessage:"User avatar"})})]}),(0,e.jsx)(D,{onSubmit:function(){var g=M()(s().mark(function d(m){var P;return s().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,S(m);case 2:P=R.sent,P&&(T(!1),re(void 0),z.current&&z.current.reload());case 4:case"end":return R.stop()}},d)}));return function(d){return g.apply(this,arguments)}}(),onCancel:function(){T(!1),U||re(void 0)},updateModalVisible:p,values:Z||{}}),(0,e.jsx)(oe.Z,{width:600,visible:U,onClose:function(){re(void 0),de(!1)},closable:!1,children:Z?.uid&&(0,e.jsx)(ie.vY,{column:2,title:Z?.uid,request:M()(s().mark(function g(){return s().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",{data:Z||{}});case 1:case"end":return m.stop()}},g)})),params:{id:Z?.uid},columns:fe})})]})},ge=ve},65262:function(ne,K,r){r.d(K,{Fe:function(){return se},Uy:function(){return F},v9:function(){return e},vh:function(){return te}});var V=r(56307),b=r.n(V),N=r(74411),j=r.n(N),J=r(55559),M=r.n(J),I=r(45223),s=r.n(I),E=r(95952),B=null,Q=["uid"],_=["uid"],A=null,k=null;function e(l,n){return C.apply(this,arguments)}function C(){return C=M()(s().mark(function l(n,h){return s().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,E.request)("/api/apps/v1/role",j()({method:"POST",headers:{"Content-Type":"application/json"},data:n},h||{})));case 1:case"end":return c.stop()}},l)})),C.apply(this,arguments)}function le(l,n){return X.apply(this,arguments)}function X(){return X=_asyncToGenerator(_regeneratorRuntime.mark(function l(n,h){var u,c;return _regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return u=n.uid,c=_objectWithoutProperties(n,B),f.abrupt("return",request("/api/apps/v1/role/".concat(u),_objectSpread({method:"GET",params:_objectSpread({},c)},h||{})));case 2:case"end":return f.stop()}},l)})),X.apply(this,arguments)}function te(l,n,h){return Y.apply(this,arguments)}function Y(){return Y=M()(s().mark(function l(n,h,u){var c,D;return s().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return c=n.uid,D=b()(n,Q),S.abrupt("return",(0,E.request)("/api/apps/v1/role/".concat(c),j()({method:"PUT",headers:{"Content-Type":"application/json"},params:j()({},D),data:h},u||{})));case 2:case"end":return S.stop()}},l)})),Y.apply(this,arguments)}function se(l,n){return q.apply(this,arguments)}function q(){return q=M()(s().mark(function l(n,h){var u,c;return s().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return u=n.uid,c=b()(n,_),f.abrupt("return",(0,E.request)("/api/apps/v1/role/".concat(u),j()({method:"DELETE",params:j()({},c)},h||{})));case 2:case"end":return f.stop()}},l)})),q.apply(this,arguments)}function ue(l,n,h){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime.mark(function l(n,h,u){var c,D;return _regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return c=n.uid,D=_objectWithoutProperties(n,A),S.abrupt("return",request("/api/apps/v1/role/".concat(c),_objectSpread({method:"PATCH",headers:{"Content-Type":"application/merge-patch+json"},params:_objectSpread({},D),data:h},u||{})));case 2:case"end":return S.stop()}},l)})),x.apply(this,arguments)}function ie(l,n){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime.mark(function l(n,h){var u,c;return _regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return u=n.uid,c=_objectWithoutProperties(n,k),f.abrupt("return",request("/api/apps/v1/role/".concat(u,"/watch"),_objectSpread({method:"GET",params:_objectSpread({},c)},h||{})));case 2:case"end":return f.stop()}},l)})),o.apply(this,arguments)}function F(l){return O.apply(this,arguments)}function O(){return O=M()(s().mark(function l(n){return s().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,E.request)("/api/apps/v1/role/list",j()({method:"GET"},n||{})));case 1:case"end":return u.stop()}},l)})),O.apply(this,arguments)}function oe(l){return ee.apply(this,arguments)}function ee(){return ee=_asyncToGenerator(_regeneratorRuntime.mark(function l(n){return _regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/apps/v1/role/watch",_objectSpread({method:"GET"},n||{})));case 1:case"end":return u.stop()}},l)})),ee.apply(this,arguments)}}}]);
