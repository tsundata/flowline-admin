"use strict";(self.webpackChunkflowline_admin=self.webpackChunkflowline_admin||[]).push([[978],{5966:function(X,E,a){var I=a(1413),P=a(44925),O=a(85893),F=a(2123),k=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],S="text",n=function(j){var U=j.fieldProps,D=j.proFieldProps,e=(0,P.Z)(j,k);return(0,O.jsx)(F.Z,(0,I.Z)({valueType:S,fieldProps:U,filedConfig:{valueType:S},proFieldProps:D},e))},y=function(j){var U=j.fieldProps,D=j.proFieldProps,e=(0,P.Z)(j,g);return(0,O.jsx)(F.Z,(0,I.Z)({valueType:"password",fieldProps:U,proFieldProps:D,filedConfig:{valueType:S}},e))},b=n;b.Password=y,b.displayName="ProFormComponent",E.Z=b},65577:function(X,E,a){a.r(E),a.d(E,{default:function(){return me}});var I=a(80164),P=a.n(I),O=a(74411),F=a.n(O),k=a(55559),g=a.n(k),S=a(45223),n=a.n(S),y=a(30967),b=a(79508),V=a(54549),j=a(49101),U=a(1413),D=a(44925),e=a(85893),Z=a(67294),q=a(2123),_=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],ee=Z.forwardRef(function(v,t){var r=v.fieldProps,d=v.unCheckedChildren,c=v.checkedChildren,s=v.proFieldProps,m=(0,D.Z)(v,_);return(0,e.jsx)(q.Z,(0,U.Z)({valueType:"switch",fieldProps:(0,U.Z)({unCheckedChildren:d,checkedChildren:c},r),ref:t,valuePropName:"checked",proFieldProps:s,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},m))}),B=ee,N=a(48705),ae=a(51851),se=a(20761),w=a(5966),re=a(60415),o=a(95952),C=a(48086),R=a(71577),te=a(25084),le=a(63436),ie=a(50146),ne=function(t){var r=(0,o.useIntl)();return(0,e.jsx)(ie.Z,{width:800,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:r.formatMessage({id:"pages.userList.form.userConfig",defaultMessage:"\u7528\u6237\u7F16\u8F91"}),visible:t.updateModalVisible,onCancel:function(){t.onCancel()},footer:null,children:(0,e.jsxs)(le.A,{initialValues:{name:t.values.name,email:t.values.email,password:t.values.password,active:t.values.active,avatar:t.values.avatar},title:r.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),onFinish:function(){var d=g()(n().mark(function c(s){return n().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t.onSubmit(F()(F()({},t.values),s));case 2:return l.abrupt("return",!0);case 3:case"end":return l.stop()}},c)}));return function(c){return d.apply(this,arguments)}}(),submitter:{submitButtonProps:{},render:function(c){return[(0,e.jsx)(R.Z,{type:"primary",onClick:function(){var m,l;return(m=c.form)===null||m===void 0||(l=m.submit)===null||l===void 0?void 0:l.call(m)},children:"\u63D0\u4EA4"},"submit"),(0,e.jsx)(R.Z,{type:"dashed",onClick:function(){var m;return(m=c.form)===null||m===void 0?void 0:m.resetFields()},children:"\u91CD\u7F6E"},"rest"),(0,e.jsx)(R.Z,{type:"dashed",onClick:function(){return t.onCancel()},children:"\u53D6\u6D88"},"cancel")]}},children:[(0,e.jsx)(w.Z,{rules:[{required:!0,message:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.ruleName",defaultMessage:"User name is required"})}],name:"name",placeholder:r.formatMessage({id:"pages.userList.form.name",defaultMessage:"User name"}),label:r.formatMessage({id:"pages.userList.form.name",defaultMessage:"User name"})}),(0,e.jsx)(w.Z,{name:"email",placeholder:r.formatMessage({id:"pages.userList.form.email.placeholder",defaultMessage:"User email"}),label:r.formatMessage({id:"pages.userList.form.email",defaultMessage:"User email"})}),(0,e.jsx)(w.Z.Password,{rules:[{required:!0,message:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.password.rule",defaultMessage:"User password is required"})}],name:"password",placeholder:r.formatMessage({id:"pages.userList.form.password.placeholder",defaultMessage:"User password"}),label:r.formatMessage({id:"pages.userList.form.password",defaultMessage:"User password"})}),(0,e.jsx)(B,{name:"active",placeholder:r.formatMessage({id:"pages.userList.form.active.placeholder",defaultMessage:"User active"}),label:r.formatMessage({id:"pages.userList.form.active",defaultMessage:"User active"})}),(0,e.jsx)(w.Z,{name:"avatar",placeholder:r.formatMessage({id:"pages.userList.form.avatar.placeholder",defaultMessage:"User avatar"}),label:r.formatMessage({id:"pages.userList.form.avatar",defaultMessage:"User avatar"})})]})})},de=ne,ue=function(){var v=g()(n().mark(function t(r){var d,c,s;return n().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return d=C.ZP.loading("Adding"),l.prev=1,c="user",s="v1",l.next=6,(0,y.g_)(F()(F()({},r),{},{kind:c,apiVersion:s}));case 6:return d(),C.ZP.success("Added successfully"),l.abrupt("return",!0);case 11:return l.prev=11,l.t0=l.catch(1),d(),C.ZP.error("Adding failed, please try again!"),l.abrupt("return",!1);case 16:case"end":return l.stop()}},t,null,[[1,11]])}));return function(r){return v.apply(this,arguments)}}(),oe=function(){var v=g()(n().mark(function t(r){var d;return n().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return d=C.ZP.loading("Updating"),s.prev=1,s.next=4,(0,y.pf)({uid:r.uid},r);case 4:return d(),C.ZP.success("Update is successful"),s.abrupt("return",!0);case 9:return s.prev=9,s.t0=s.catch(1),d(),C.ZP.error("Update failed, please try again!"),s.abrupt("return",!1);case 14:case"end":return s.stop()}},t,null,[[1,9]])}));return function(r){return v.apply(this,arguments)}}(),ce=function(){var v=g()(n().mark(function t(r){var d;return n().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(d=C.ZP.loading("deleting"),r){s.next=3;break}return s.abrupt("return",!0);case 3:return s.prev=3,s.next=6,(0,y.DZ)({uid:"-"});case 6:return d(),C.ZP.success("Deleted successfully and will refresh soon"),s.abrupt("return",!0);case 11:return s.prev=11,s.t0=s.catch(3),d(),C.ZP.error("Delete failed, please try again"),s.abrupt("return",!1);case 16:case"end":return s.stop()}},t,null,[[3,11]])}));return function(r){return v.apply(this,arguments)}}(),fe=function(){var t=(0,Z.useState)(!1),r=P()(t,2),d=r[0],c=r[1],s=(0,Z.useState)(!1),m=P()(s,2),l=m[0],W=m[1],pe=(0,Z.useState)(!1),K=P()(pe,2),G=K[0],Y=K[1],L=(0,Z.useRef)(),ve=(0,Z.useState)(),z=P()(ve,2),h=z[0],A=z[1],ge=(0,Z.useState)([]),H=P()(ge,2),$=H[0],J=H[1],x=(0,o.useIntl)(),Q=[{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.common.uid",defaultMessage:"UID"}),dataIndex:"uid",tip:"The uid is the unique key",render:function(i,u){return(0,e.jsx)("a",{onClick:function(){A(u),Y(!0)},children:i})}},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.userName.nameLabel",defaultMessage:"User name"}),dataIndex:"name"},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.email",defaultMessage:"user email"}),dataIndex:"email"},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.active",defaultMessage:"active"}),dataIndex:"active",renderText:function(i){return i?(0,e.jsx)(b.Z,{}):(0,e.jsx)(V.Z,{})}},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.avatar",defaultMessage:"avatar"}),dataIndex:"avatar",valueType:"image"},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.titleCreatedAt",defaultMessage:"Created time"}),sorter:!0,dataIndex:"creationTimestamp",valueType:"dateTime"},{title:(0,e.jsx)(o.FormattedMessage,{id:"pages.common.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(i,u){return[(0,e.jsx)("a",{onClick:function(){W(!0),A(u)},children:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.userConfig",defaultMessage:"Configuration"})},"config")]}}];return(0,e.jsxs)(N._z,{children:[(0,e.jsx)(ae.Z,{headerTitle:x.formatMessage({id:"pages.common.tableTitle",defaultMessage:"Enquiry form"}),actionRef:L,rowKey:"uid",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(R.Z,{type:"primary",onClick:function(){c(!0)},children:[(0,e.jsx)(j.Z,{})," ",(0,e.jsx)(o.FormattedMessage,{id:"pages.common.new",defaultMessage:"New"})]},"primary")]},request:g()(n().mark(function f(){var i;return n().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,y.Lh)();case 2:return i=p.sent,p.abrupt("return",{data:i.items,success:!0});case 4:case"end":return p.stop()}},f)})),columns:Q,rowSelection:{onChange:function(i,u){J(u)}}}),$?.length>0&&(0,e.jsx)(N.Sc,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(o.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,e.jsx)("a",{style:{fontWeight:600},children:$.length})," ",(0,e.jsx)(o.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,e.jsx)(R.Z,{onClick:g()(n().mark(function f(){var i,u;return n().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,ce($);case 2:J([]),(i=L.current)===null||i===void 0||(u=i.reloadAndRest)===null||u===void 0||u.call(i);case 4:case"end":return T.stop()}},f)})),children:(0,e.jsx)(o.FormattedMessage,{id:"pages.common.batchDeletion",defaultMessage:"Batch deletion"})})}),(0,e.jsxs)(se.Y,{title:x.formatMessage({id:"pages.userList.form.newUser",defaultMessage:"New user"}),width:"400px",visible:d,onVisibleChange:c,onFinish:function(){var f=g()(n().mark(function i(u){var p;return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,ue(u);case 2:p=M.sent,p&&(c(!1),L.current&&L.current.reload());case 4:case"end":return M.stop()}},i)}));return function(i){return f.apply(this,arguments)}}(),children:[(0,e.jsx)(w.Z,{rules:[{required:!0,message:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.ruleName",defaultMessage:"User name is required"})}],width:"md",name:"name",placeholder:x.formatMessage({id:"pages.userList.form.name",defaultMessage:"User name"})}),(0,e.jsx)(w.Z,{width:"md",name:"email",placeholder:x.formatMessage({id:"pages.userList.form.email.placeholder",defaultMessage:"User email"})}),(0,e.jsx)(w.Z.Password,{rules:[{required:!0,message:(0,e.jsx)(o.FormattedMessage,{id:"pages.userList.form.password.rule",defaultMessage:"User password is required"})}],width:"md",name:"password",placeholder:x.formatMessage({id:"pages.userList.form.password.placeholder",defaultMessage:"User password"})}),(0,e.jsx)(B,{width:"md",name:"active",placeholder:x.formatMessage({id:"pages.userList.form.active.placeholder",defaultMessage:"User active"}),label:x.formatMessage({id:"pages.userList.form.active",defaultMessage:"Active"})}),(0,e.jsx)(w.Z,{width:"md",name:"avatar",placeholder:x.formatMessage({id:"pages.userList.form.avatar.placeholder",defaultMessage:"User avatar"})})]}),(0,e.jsx)(de,{onSubmit:function(){var f=g()(n().mark(function i(u){var p;return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,oe(u);case 2:p=M.sent,p&&(W(!1),A(void 0),L.current&&L.current.reload());case 4:case"end":return M.stop()}},i)}));return function(i){return f.apply(this,arguments)}}(),onCancel:function(){W(!1),G||A(void 0)},updateModalVisible:l,values:h||{}}),(0,e.jsx)(te.Z,{width:600,visible:G,onClose:function(){A(void 0),Y(!1)},closable:!1,children:h?.uid&&(0,e.jsx)(re.vY,{column:2,title:h?.uid,request:g()(n().mark(function f(){return n().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",{data:h||{}});case 1:case"end":return u.stop()}},f)})),params:{id:h?.uid},columns:Q})})]})},me=fe}}]);
