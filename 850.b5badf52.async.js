(self.webpackChunkflowline_admin=self.webpackChunkflowline_admin||[]).push([[850],{97254:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}},{tag:"path",attrs:{d:"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6 25.4-25.5 60-39.8 96-39.8 36.2 0 70.3 14.1 96 39.8 1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 003 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6-107.4 0-195 85.1-199.4 191.7-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6-1.8 33.5-15.7 64.7-39.5 88.6-25.4 25.5-60 39.8-96 39.8-36.2 0-70.3-14.1-96-39.8-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 00-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6 107.4 0 195-85.1 199.4-191.7.2-4.5-3.4-8.3-8-8.3z"}}]},name:"cloud-sync",theme:"outlined"},z=J,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="CloudSyncOutlined";var Q=R.forwardRef(te)},73888:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},z=J,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="DatabaseOutlined";var Q=R.forwardRef(te)},18094:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 392c8.8 0 16-7.2 16-16V192c0-8.8-7.2-16-16-16H744c-8.8 0-16 7.2-16 16v56H296v-56c0-8.8-7.2-16-16-16H96c-8.8 0-16 7.2-16 16v184c0 8.8 7.2 16 16 16h56v240H96c-8.8 0-16 7.2-16 16v184c0 8.8 7.2 16 16 16h184c8.8 0 16-7.2 16-16v-56h432v56c0 8.8 7.2 16 16 16h184c8.8 0 16-7.2 16-16V648c0-8.8-7.2-16-16-16h-56V392h56zM792 240h88v88h-88v-88zm-648 88v-88h88v88h-88zm88 456h-88v-88h88v88zm648-88v88h-88v-88h88zm-80-64h-56c-8.8 0-16 7.2-16 16v56H296v-56c0-8.8-7.2-16-16-16h-56V392h56c8.8 0 16-7.2 16-16v-56h432v56c0 8.8 7.2 16 16 16h56v240z"}}]},name:"gateway",theme:"outlined"},z=J,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="GatewayOutlined";var Q=R.forwardRef(te)},36371:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M912 820.1V203.9c28-9.9 48-36.6 48-67.9 0-39.8-32.2-72-72-72-31.3 0-58 20-67.9 48H203.9C194 84 167.3 64 136 64c-39.8 0-72 32.2-72 72 0 31.3 20 58 48 67.9v616.2C84 830 64 856.7 64 888c0 39.8 32.2 72 72 72 31.3 0 58-20 67.9-48h616.2c9.9 28 36.6 48 67.9 48 39.8 0 72-32.2 72-72 0-31.3-20-58-48-67.9zM888 112c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 912c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-752c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm704 680H184V184h656v656zm48 72c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}},{tag:"path",attrs:{d:"M288 474h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64zm-56 420h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64z"}}]},name:"group",theme:"outlined"},z=J,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="GroupOutlined";var Q=R.forwardRef(te)},54034:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M442.3 677.6l199.4-156.7a11.3 11.3 0 000-17.7L442.3 346.4c-7.4-5.8-18.3-.6-18.3 8.8v313.5c0 9.4 10.9 14.7 18.3 8.9z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"play-square",theme:"outlined"},z=J,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="PlaySquareOutlined";var Q=R.forwardRef(te)},32779:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},z=J,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="RedoOutlined";var Q=R.forwardRef(te)},92104:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},z=J,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="SaveOutlined";var Q=R.forwardRef(te)},15360:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},z=J,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="StopOutlined";var Q=R.forwardRef(te)},50827:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M736 550H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208 130c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zM736 266H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208-194c39.8 0 72-32.2 72-72s-32.2-72-72-72-72 32.2-72 72 32.2 72 72 72zm0-96c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 64c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0 656c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}}]},name:"ungroup",theme:"outlined"},z=J,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="UngroupOutlined";var Q=R.forwardRef(te)},20499:function(){},64851:function(){},59518:function(){},26199:function(){},14156:function(){},71468:function(){},48871:function(){},9871:function(){},25612:function(){},92777:function(){},20159:function(){},61622:function(){},80703:function(Ne,L,M){"use strict";M.d(L,{e9:function(){return Ae},is:function(){return z},kS:function(){return ss},Iw:function(){return J},kJ:function(){return Qi},Lu:function(){return Xi},NB:function(){return ys},DK:function(){return bc},QK:function(){return j},y$:function(){return Nr},Bz:function(){return Ee},b2:function(){return S2},bn:function(){return pe},kf:function(){return R}});var j={};M.r(j),M.d(j,{applyMixins:function(){return Om},clone:function(){return $p},cloneDeep:function(){return Yo},createClass:function(){return Y0},defaults:function(){return So},defaultsDeep:function(){return Wp},ensure:function(){return Pm},extend:function(){return C1},flatten:function(){return $l},forIn:function(){return He},getBoolean:function(){return ox},getByPath:function(){return q0},getNumber:function(){return Nb},getValue:function(){return K0},has:function(){return Co},inherit:function(){return Db},isEmpty:function(){return pm},isEqual:function(){return gu},isMaliciousProp:function(){return Xp},isObject:function(){return Gn},isPlainObject:function(){return Xc},merge:function(){return wo},pick:function(){return Et},setByPath:function(){return lh},unsetByPath:function(){return Dm}});var R={};M.r(R),M.d(R,{camelCase:function(){return Qb},constantCase:function(){return AP},dotCase:function(){return TP},endsWith:function(){return Tx},escape:function(){return kb},eval:function(){return hE},getSpellingSuggestion:function(){return nM},hashcode:function(){return rC},isString:function(){return _a},kebabCase:function(){return tC},lowerFirst:function(){return LE},pad:function(){return lT},padEnd:function(){return dT},padStart:function(){return fT},pascalCase:function(){return nC},pathCase:function(){return MP},repeat:function(){return Kw},sanitizeHTML:function(){return GE},sentenceCase:function(){return OP},split:function(){return Ww},startsWith:function(){return _x},template:function(){return Vg},titleCase:function(){return PP},toString:function(){return go},truncate:function(){return yT},unescape:function(){return hx},uniqueId:function(){return jx},upperFirst:function(){return Kh},uuid:function(){return iC}});var J={};M.r(J),M.d(J,{apply:function(){return $m},cacher:function(){return hM},call:function(){return er},debounce:function(){return n2},defer:function(){return dC},isAsync:function(){return i2},isAsyncLike:function(){return dS},isFunction:function(){return Ur},noop:function(){return oi},once:function(){return oS},toAsyncBoolean:function(){return Hg},toDeferredBoolean:function(){return hC}});var z={};M.r(z),M.d(z,{CASE_SENSITIVE_ATTR:function(){return fS},KAPPA:function(){return Ic},MouseWheelHandle:function(){return IC},addClass:function(){return co},animate:function(){return MC},animateAlongPath:function(){return C2},animateTransform:function(){return OC},append:function(){return Us},appendTo:function(){return pM},attr:function(){return vo},bbox:function(){return TC},before:function(){return Jh},breakText:function(){return ty},cancelAnimationFrame:function(){return CC},circleToPathData:function(){return DM},clearSelection:function(){return xM},clickable:function(){return El},contains:function(){return Ym},createElement:function(){return vC},createElementNS:function(){return c2},createSVGMatrix:function(){return oc},createSVGPoint:function(){return DS},createSVGTransform:function(){return ny},createSlicePathData:function(){return RM},createSvgDocument:function(){return sv},createSvgElement:function(){return Qc},createVector:function(){return GM},createVectors:function(){return FM},decomposeMatrix:function(){return SC},ellipseToPathData:function(){return NM},empty:function(){return d2},ensureId:function(){return ov},find:function(){return av},findOne:function(){return Zm},findParentByClass:function(){return u2},getAttribute:function(){return gM},getBBox:function(){return Ta},getBBoxByElementAttr:function(){return IS},getBoundingOffsetRect:function(){return NC},getClass:function(){return Kp},getComputedStyle:function(){return wC},getIntersection:function(){return eg},getMatrixByElementAttr:function(){return jo},getPointsFromSvgElement:function(){return b2},getTransformToElement:function(){return Ed},getVendorPrefixedName:function(){return bM},hasClass:function(){return Wg},hasScrollbars:function(){return LP},index:function(){return Xm},isHTMLElement:function(){return h2},isInputElement:function(){return hS},isSVGGraphicsElement:function(){return qf},isVector:function(){return LM},kebablizeAttrs:function(){return Km},lineToPathData:function(){return TM},matrixToRotation:function(){return Qh},matrixToScale:function(){return x2},matrixToTransformString:function(){return Qf},matrixToTranslation:function(){return Jp},mergeAttrs:function(){return yC},ns:function(){return Aa},parseTransformString:function(){return Cd},parseXML:function(){return l2},polygonToPathData:function(){return MM},polylineToPathData:function(){return OM},prepend:function(){return fM},qualifyAttr:function(){return cv},rectToPathData:function(){return MS},rectangleToPathData:function(){return IM},remove:function(){return yd},removeAttribute:function(){return pS},removeClass:function(){return yc},requestAnimationFrame:function(){return p2},rotate:function(){return gh},sample:function(){return TS},scale:function(){return Nn},setAttribute:function(){return f2},setAttributes:function(){return mC},setPrefixedStyle:function(){return kP},styleToObject:function(){return lv},svgVersion:function(){return gC},tagName:function(){return Wm},text:function(){return AS},toGeometryShape:function(){return fh},toLocalPoint:function(){return Qp},toPath:function(){return OS},toPathData:function(){return PS},toggleClass:function(){return a2},transform:function(){return ph},transformLine:function(){return _C},transformPoint:function(){return wd},transformPolyline:function(){return NS},transformRectangle:function(){return tl},transformStringToMatrix:function(){return xd},translate:function(){return w2},translateAndAutoOrient:function(){return ry},uniqueId:function(){return pC}});var Z={};M.r(Z),M.d(Z,{async:function(){return sO},block:function(){return pv},circle:function(){return gv},circlePlus:function(){return np},classic:function(){return r_},cross:function(){return iO},diamond:function(){return o_},ellipse:function(){return oy},path:function(){return s_}});var te={};M.r(te),M.d(te,{annotations:function(){return XS},atConnectionLength:function(){return c_},atConnectionLengthIgnoreGradient:function(){return jC},atConnectionLengthKeepGradient:function(){return VC},atConnectionRatio:function(){return l_},atConnectionRatioIgnoreGradient:function(){return cO},atConnectionRatioKeepGradient:function(){return a_},connection:function(){return aO},displayEmpty:function(){return FC},eol:function(){return ZS},fill:function(){return _2},filter:function(){return t_},html:function(){return e_},lineHeight:function(){return HS},port:function(){return n_},ref:function(){return jM},refCx:function(){return YM},refCy:function(){return KM},refD:function(){return zP},refDKeepOffset:function(){return qM},refDResetOffset:function(){return zS},refDx:function(){return HM},refDy:function(){return $M},refHeight:function(){return FS},refHeight2:function(){return rO},refPoints:function(){return QM},refPointsKeepOffset:function(){return JM},refPointsResetOffset:function(){return US},refR:function(){return Ls},refRCircumscribed:function(){return ZM},refRInscribed:function(){return BS},refRx:function(){return WM},refRy:function(){return XM},refWidth:function(){return GS},refWidth2:function(){return nO},refX:function(){return kS},refX2:function(){return eO},refY:function(){return LS},refY2:function(){return tO},resetOffset:function(){return JS},sourceMarker:function(){return tf},stroke:function(){return VS},style:function(){return QS},targetMarker:function(){return Jg},text:function(){return GC},textPath:function(){return WS},textVerticalAnchor:function(){return $S},textWrap:function(){return jS},title:function(){return YS},vertexMarker:function(){return Rc},xAlign:function(){return KS},yAlign:function(){return qS}});var Q={};M.r(Q),M.d(Q,{dot:function(){return u_},doubleMesh:function(){return mv},fixedDot:function(){return M2},mesh:function(){return lO}});var de={};M.r(de),M.d(de,{blur:function(){return hO},brightness:function(){return bO},contrast:function(){return xO},dropShadow:function(){return fO},grayScale:function(){return pO},highlight:function(){return dO},hueRotate:function(){return mO},invert:function(){return yO},outline:function(){return uO},saturate:function(){return vO},sepia:function(){return gO}});var oe={};M.r(oe),M.d(oe,{flipX:function(){return d_},flipXY:function(){return f_},flipY:function(){return h_},watermark:function(){return CO}});var ie={};M.r(ie),M.d(ie,{className:function(){return wO},opacity:function(){return EO},stroke:function(){return _O}});var re={};M.r(re),M.d(re,{absolute:function(){return AO},bottom:function(){return PO},ellipse:function(){return TO},ellipseSpread:function(){return MO},left:function(){return OO},line:function(){return m_},right:function(){return y_},top:function(){return P2}});var he={};M.r(he),M.d(he,{bottom:function(){return IO},inside:function(){return w_},insideOriented:function(){return RO},left:function(){return b_},manual:function(){return XC},outside:function(){return x_},outsideOriented:function(){return C_},radial:function(){return D2},radialOriented:function(){return kO},right:function(){return bv},top:function(){return NO}});var De={};M.r(De),M.d(De,{noop:function(){return A_},pinAbsolute:function(){return xv},pinRelative:function(){return M_}});var ue={};M.r(ue),M.d(ue,{bottom:function(){return jO},bottomLeft:function(){return B_},bottomRight:function(){return k2},center:function(){return k_},left:function(){return HO},midSide:function(){return XO},nodeCenter:function(){return WO},orth:function(){return $O},right:function(){return L_},top:function(){return VO},topLeft:function(){return G_},topRight:function(){return F_}});var xe={};M.r(xe),M.d(xe,{closest:function(){return U_},length:function(){return z_},orth:function(){return V_},ratio:function(){return ZO}});var ae={};M.r(ae),M.d(ae,{anchor:function(){return qO},bbox:function(){return tw},boundary:function(){return $_},rect:function(){return H_}});var ce={};M.r(ce),M.d(ce,{er:function(){return s3},loop:function(){return a3},manhattan:function(){return lw},metro:function(){return o3},normal:function(){return JO},oneSide:function(){return QO},orth:function(){return nw}});var fe={};M.r(fe),M.d(fe,{jumpover:function(){return l3},loop:function(){return iA},normal:function(){return c3},rounded:function(){return oA},smooth:function(){return sA}});var Ee={};M.r(Ee),M.d(Ee,{Attr:function(){return vh},Background:function(){return yv},ConnectionPoint:function(){return c0},ConnectionStrategy:function(){return i0},Connector:function(){return dg},EdgeAnchor:function(){return cg},EdgeTool:function(){return ag},Filter:function(){return Qg},Grid:function(){return rp},Highlighter:function(){return ip},Marker:function(){return nl},NodeAnchor:function(){return a0},NodeTool:function(){return s0},PortLabelLayout:function(){return e0},PortLayout:function(){return rg},Registry:function(){return js},Router:function(){return ap},create:function(){return u3}});var pe={};M.r(pe),M.d(pe,{kS:function(){return xw}});var Ae={};M.r(Ae),M.d(Ae,{q6:function(){return lp}});var nt=M(19755),G=M.n(nt),Fe=M(50450);let $e=!1,at=!1,Ft=!1,Hn=!1,ye=!1,wt=!1,Mn=!1,jt=!1,En=!1,Yn=!1,pn=!1,lo=!1,ji=!1,Xn=!1,kr=!1,lr=!1;if(typeof navigator=="object"){const l=navigator.userAgent;$e=l.indexOf("Macintosh")>=0,at=!!l.match(/(iPad|iPhone|iPod)/g),Ft=l.indexOf("Windows")>=0,Hn=l.indexOf("MSIE")>=0,ye=!!l.match(/Trident\/7\./),wt=!!l.match(/Edge\//),Mn=l.indexOf("Mozilla/")>=0&&l.indexOf("MSIE")<0&&l.indexOf("Edge/")<0,En=l.indexOf("Chrome/")>=0&&l.indexOf("Edge/")<0,Yn=l.indexOf("Opera/")>=0||l.indexOf("OPR/")>=0,pn=l.indexOf("Firefox/")>=0,lo=l.indexOf("AppleWebKit/")>=0&&l.indexOf("Chrome/")<0&&l.indexOf("Edge/")<0,typeof document=="object"&&(lr=!document.createElementNS||`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`!="[object SVGForeignObjectElement]"||l.indexOf("Opera/")>=0)}if(typeof window=="object"&&(jt=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,Xn=window.PointerEvent!=null&&!$e),typeof document=="object"){ji="ontouchstart"in document.documentElement;try{const l=Object.defineProperty({},"passive",{get(){kr=!0}}),e=document.createElement("div");e.addEventListener&&e.addEventListener("click",()=>{},l)}catch{}}var Qn;if(function(l){l.IS_MAC=$e,l.IS_IOS=at,l.IS_WINDOWS=Ft,l.IS_IE=Hn,l.IS_IE11=ye,l.IS_EDGE=wt,l.IS_NETSCAPE=Mn,l.IS_CHROME_APP=jt,l.IS_CHROME=En,l.IS_OPERA=Yn,l.IS_FIREFOX=pn,l.IS_SAFARI=lo,l.SUPPORT_TOUCH=ji,l.SUPPORT_POINTER=Xn,l.SUPPORT_PASSIVE=kr,l.NO_FOREIGNOBJECT=lr,l.SUPPORT_FOREIGNOBJECT=!l.NO_FOREIGNOBJECT}(Qn||(Qn={})),function(l){function e(){const d=window.module;return d!=null&&d.hot!=null&&d.hot.status!=null?d.hot.status():"unkonwn"}l.getHMRStatus=e;function t(){return e()==="apply"}l.isApplyingHMR=t;const o={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function c(d){const f=document.createElement(o[d]||"div"),v=`on${d}`;let b=v in f;return b||(f.setAttribute(v,"return;"),b=typeof f[v]=="function"),b}l.isEventSupported=c}(Qn||(Qn={})),Qn.SUPPORT_PASSIVE){G().event.special.touchstart={setup(e,t,o){if(!this.addEventListener)return!1;this.addEventListener("touchstart",o,{passive:!0})}};const l=G().event.special.mousewheel;if(l){const e=l.setup;l.setup=function(){const t=this.addEventListener;if(!t)return!1;this.addEventListener=(o,c)=>{t.call(this,o,c,{passive:!0})},e.call(this),this.addEventListener=t}}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(l){l.forEach(e=>{Object.prototype.hasOwnProperty.call(e,"append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value(...t){const o=document.createDocumentFragment();t.forEach(c=>{const d=c instanceof Node;o.appendChild(d?c:document.createTextNode(String(c)))}),this.appendChild(o)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]);var Oi=Array.isArray,zr=Oi,Yr=typeof global=="object"&&global&&global.Object===Object&&global,to=Yr,Ts=typeof self=="object"&&self&&self.Object===Object&&self,oa=to||Ts||Function("return this")(),no=oa,Ko=no.Symbol,Qr=Ko,Bi=Object.prototype,$s=Bi.hasOwnProperty,F=Bi.toString,H=Qr?Qr.toStringTag:void 0;function gf(l){var e=$s.call(l,H),t=l[H];try{l[H]=void 0;var o=!0}catch{}var c=F.call(l);return o&&(e?l[H]=t:delete l[H]),c}var Oe=gf,lc=Object.prototype,gr=lc.toString;function Pa(l){return gr.call(l)}var rl=Pa,qo="[object Null]",Ha="[object Undefined]",Pt=Qr?Qr.toStringTag:void 0;function Jt(l){return l==null?l===void 0?Ha:qo:Pt&&Pt in Object(l)?Oe(l):rl(l)}var xt=Jt;function ln(l){var e=typeof l;return l!=null&&(e=="object"||e=="function")}var Gn=ln,zi="[object AsyncFunction]",Lr="[object Function]",Hr="[object GeneratorFunction]",Ar="[object Proxy]";function gi(l){if(!Gn(l))return!1;var e=xt(l);return e==Lr||e==Hr||e==zi||e==Ar}var Ur=gi,ko=9007199254740991;function Fc(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=ko}var vf=Fc;function mf(l){return l!=null&&vf(l.length)&&!Ur(l)}var Bc=mf,Cc=no["__core-js_shared__"],Jo=Cc,yf=function(){var l=/[^.]+$/.exec(Jo&&Jo.keys&&Jo.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}();function Md(l){return!!yf&&yf in l}var Qo=Md,wh=Function.prototype,vp=wh.toString;function mp(l){if(l!=null){try{return vp.call(l)}catch{}try{return l+""}catch{}}return""}var il=mp,Hi=/[\\^$.*+?()[\]{}|]/g,uo=/^\[object .+?Constructor\]$/,ei=Function.prototype,Do=Object.prototype,Ms=ei.toString,Jl=Do.hasOwnProperty,yp=RegExp("^"+Ms.call(Jl).replace(Hi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bf(l){if(!Gn(l)||Qo(l))return!1;var e=Ur(l)?yp:uo;return e.test(il(l))}var Eh=bf;function bp(l,e){return l?.[e]}var xp=bp;function Od(l,e){var t=xp(l,e);return Eh(t)?t:void 0}var Ml=Od,Ol=Ml(Object,"create"),Ou=Ol;function xf(){this.__data__=Ou?Ou(null):{},this.size=0}var Pu=xf;function Ql(l){var e=this.has(l)&&delete this.__data__[l];return this.size-=e?1:0,e}var Pd=Ql,Dd="__lodash_hash_undefined__",mg=Object.prototype,Cp=mg.hasOwnProperty;function pa(l){var e=this.__data__;if(Ou){var t=e[l];return t===Dd?void 0:t}return Cp.call(e,l)?e[l]:void 0}var Du=pa,xs=Object.prototype,sa=xs.hasOwnProperty;function Nd(l){var e=this.__data__;return Ou?e[l]!==void 0:sa.call(e,l)}var Cf=Nd,S0="__lodash_hash_undefined__";function _0(l,e){var t=this.__data__;return this.size+=this.has(l)?0:1,t[l]=Ou&&e===void 0?S0:e,this}var wf=_0;function zc(l){var e=-1,t=l==null?0:l.length;for(this.clear();++e<t;){var o=l[e];this.set(o[0],o[1])}}zc.prototype.clear=Pu,zc.prototype.delete=Pd,zc.prototype.get=Du,zc.prototype.has=Cf,zc.prototype.set=wf;var Nu=zc;function Ef(){this.__data__=[],this.size=0}var wp=Ef;function Iu(l,e){return l===e||l!==l&&e!==e}var ls=Iu;function Sf(l,e){for(var t=l.length;t--;)if(ls(l[t][0],e))return t;return-1}var $a=Sf,yg=Array.prototype,bg=yg.splice;function Pl(l){var e=this.__data__,t=$a(e,l);if(t<0)return!1;var o=e.length-1;return t==o?e.pop():bg.call(e,t,1),--this.size,!0}var Ru=Pl;function Wa(l){var e=this.__data__,t=$a(e,l);return t<0?void 0:e[t][1]}var Da=Wa;function ku(l){return $a(this.__data__,l)>-1}var Lu=ku;function Gu(l,e){var t=this.__data__,o=$a(t,l);return o<0?(++this.size,t.push([l,e])):t[o][1]=e,this}var Id=Gu;function wc(l){var e=-1,t=l==null?0:l.length;for(this.clear();++e<t;){var o=l[e];this.set(o[0],o[1])}}wc.prototype.clear=wp,wc.prototype.delete=Ru,wc.prototype.get=Da,wc.prototype.has=Lu,wc.prototype.set=Id;var Rd=wc,Fu=Ml(no,"Map"),Xa=Fu;function _f(){this.size=0,this.__data__={hash:new Nu,map:new(Xa||Rd),string:new Nu}}var Af=_f;function xg(l){var e=typeof l;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?l!=="__proto__":l===null}var Ep=xg;function Sp(l,e){var t=l.__data__;return Ep(e)?t[typeof e=="string"?"string":"hash"]:t.map}var kd=Sp;function Cg(l){var e=kd(this,l).delete(l);return this.size-=e?1:0,e}var Tf=Cg;function Ws(l){return kd(this,l).get(l)}var ol=Ws;function Bu(l){return kd(this,l).has(l)}var Dl=Bu;function Sh(l,e){var t=kd(this,l),o=t.size;return t.set(l,e),this.size+=t.size==o?0:1,this}var ga=Sh;function sl(l){var e=-1,t=l==null?0:l.length;for(this.clear();++e<t;){var o=l[e];this.set(o[0],o[1])}}sl.prototype.clear=Af,sl.prototype.delete=Tf,sl.prototype.get=ol,sl.prototype.has=Dl,sl.prototype.set=ga;var oo=sl,ho="__lodash_hash_undefined__";function Ld(l){return this.__data__.set(l,ho),this}var Nl=Ld;function eu(l){return this.__data__.has(l)}var _h=eu;function al(l){var e=-1,t=l==null?0:l.length;for(this.__data__=new oo;++e<t;)this.add(l[e])}al.prototype.add=al.prototype.push=Nl,al.prototype.has=_h;var Ah=al;function _p(l,e,t,o){for(var c=l.length,d=t+(o?1:-1);o?d--:++d<c;)if(e(l[d],d,l))return d;return-1}var zu=_p;function S(l){return l!==l}var I=S;function U(l,e,t){for(var o=t-1,c=l.length;++o<c;)if(l[o]===e)return o;return-1}var W=U;function se(l,e,t){return e===e?W(l,e,t):zu(l,I,t)}var le=se;function Ce(l,e){var t=l==null?0:l.length;return!!t&&le(l,e,0)>-1}var Ze=Ce;function qe(l,e,t){for(var o=-1,c=l==null?0:l.length;++o<c;)if(t(e,l[o]))return!0;return!1}var mt=qe;function zt(l,e){return l.has(e)}var vn=zt,Nt=Ml(no,"Set"),$t=Nt;function rr(){}var oi=rr;function br(l){var e=-1,t=Array(l.size);return l.forEach(function(o){t[++e]=o}),t}var fo=br,Lo=1/0,va=$t&&1/fo(new $t([,-0]))[1]==Lo?function(l){return new $t(l)}:oi,Gr=va,Ir=200;function Ei(l,e,t){var o=-1,c=Ze,d=l.length,f=!0,v=[],b=v;if(t)f=!1,c=mt;else if(d>=Ir){var w=e?null:Gr(l);if(w)return fo(w);f=!1,c=vn,b=new Ah}else b=e?[]:v;e:for(;++o<d;){var _=l[o],A=e?e(_):_;if(_=t||_!==0?_:0,f&&A===A){for(var P=b.length;P--;)if(b[P]===A)continue e;e&&b.push(A),v.push(_)}else c(b,A,t)||(b!==v&&b.push(A),v.push(_))}return v}var Di=Ei;function Go(l){return l&&l.length?Di(l):[]}var ma=Go;function tu(l,e){for(var t=-1,o=e.length,c=l.length;++t<o;)l[c+t]=e[t];return l}var Xs=tu;function Na(l){return l!=null&&typeof l=="object"}var Fo=Na,es="[object Arguments]";function uc(l){return Fo(l)&&xt(l)==es}var Zs=uc,Ec=Object.prototype,Bo=Ec.hasOwnProperty,Fs=Ec.propertyIsEnumerable,Za=Zs(function(){return arguments}())?Zs:function(l){return Fo(l)&&Bo.call(l,"callee")&&!Fs.call(l,"callee")},Ui=Za,Bs=Qr?Qr.isConcatSpreadable:void 0;function Sc(l){return zr(l)||Ui(l)||!!(Bs&&l&&l[Bs])}var dc=Sc;function cl(l,e,t,o,c){var d=-1,f=l.length;for(t||(t=dc),c||(c=[]);++d<f;){var v=l[d];e>0&&t(v)?e>1?cl(v,e-1,t,o,c):Xs(c,v):o||(c[c.length]=v)}return c}var ts=cl;function Uu(l){return l}var Cs=Uu;function nu(l,e,t){switch(t.length){case 0:return l.call(e);case 1:return l.call(e,t[0]);case 2:return l.call(e,t[0],t[1]);case 3:return l.call(e,t[0],t[1],t[2])}return l.apply(e,t)}var zo=nu,Vu=Math.max;function Il(l,e,t){return e=Vu(e===void 0?l.length-1:e,0),function(){for(var o=arguments,c=-1,d=Vu(o.length-e,0),f=Array(d);++c<d;)f[c]=o[e+c];c=-1;for(var v=Array(e+1);++c<e;)v[c]=o[c];return v[e]=t(f),zo(l,this,v)}}var Mf=Il;function Th(l){return function(){return l}}var _c=Th,Ya=function(){try{var l=Ml(Object,"defineProperty");return l({},"",{}),l}catch{}}(),ll=Ya,ju=ll?function(l,e){return ll(l,"toString",{configurable:!0,enumerable:!1,value:_c(e),writable:!0})}:Cs,ya=ju,Ka=800,ba=16,ru=Date.now;function Hu(l){var e=0,t=0;return function(){var o=ru(),c=ba-(o-t);if(t=o,c>0){if(++e>=Ka)return arguments[0]}else e=0;return l.apply(void 0,arguments)}}var Rl=Hu,po=Rl(ya),qa=po;function Wo(l,e){return qa(Mf(l,e,Cs),l+"")}var ns=Wo;function aa(l){return Fo(l)&&Bc(l)}var iu=aa,Gd=ns(function(l){return Di(ts(l,1,iu,!0))}),Mh=Gd,Of="[object Symbol]";function hc(l){return typeof l=="symbol"||Fo(l)&&xt(l)==Of}var dt=hc,Qt=4294967295,Bt=Qt-1,ir=Math.floor,$r=Math.min;function Ki(l,e,t,o){var c=0,d=l==null?0:l.length;if(d===0)return 0;e=t(e);for(var f=e!==e,v=e===null,b=dt(e),w=e===void 0;c<d;){var _=ir((c+d)/2),A=t(l[_]),P=A!==void 0,V=A===null,q=A===A,ee=dt(A);if(f)var ge=o||q;else w?ge=q&&(o||P):v?ge=q&&P&&(o||!V):b?ge=q&&P&&!V&&(o||!ee):V||ee?ge=!1:ge=o?A<=e:A<e;ge?c=_+1:d=_}return $r(d,Bt)}var bo=Ki,ro=4294967295,Fd=ro>>>1;function wg(l,e,t){var o=0,c=l==null?o:l.length;if(typeof e=="number"&&e===e&&c<=Fd){for(;o<c;){var d=o+c>>>1,f=l[d];f!==null&&!dt(f)&&(t?f<=e:f<e)?o=d+1:c=d}return c}return bo(l,e,Cs,t)}var Me=wg;function Ye(l,e){return Me(l,e)}var lt=Ye;function Tt(){this.__data__=new Rd,this.size=0}var yt=Tt;function an(l){var e=this.__data__,t=e.delete(l);return this.size=e.size,t}var Ut=an;function Un(l){return this.__data__.get(l)}var Kn=Un;function Er(l){return this.__data__.has(l)}var xr=Er,Or=200;function vi(l,e){var t=this.__data__;if(t instanceof Rd){var o=t.__data__;if(!Xa||o.length<Or-1)return o.push([l,e]),this.size=++t.size,this;t=this.__data__=new oo(o)}return t.set(l,e),this.size=t.size,this}var ai=vi;function vr(l){var e=this.__data__=new Rd(l);this.size=e.size}vr.prototype.clear=yt,vr.prototype.delete=Ut,vr.prototype.get=Kn,vr.prototype.has=xr,vr.prototype.set=ai;var io=vr;function Vi(l,e){for(var t=-1,o=l==null?0:l.length;++t<o;)if(e(l[t],t,l))return!0;return!1}var ca=Vi,No=1,fc=2;function ul(l,e,t,o,c,d){var f=t&No,v=l.length,b=e.length;if(v!=b&&!(f&&b>v))return!1;var w=d.get(l),_=d.get(e);if(w&&_)return w==e&&_==l;var A=-1,P=!0,V=t&fc?new Ah:void 0;for(d.set(l,e),d.set(e,l);++A<v;){var q=l[A],ee=e[A];if(o)var ge=f?o(ee,q,A,e,l,d):o(q,ee,A,l,e,d);if(ge!==void 0){if(ge)continue;P=!1;break}if(V){if(!ca(e,function(_e,ke){if(!vn(V,ke)&&(q===_e||c(q,_e,t,o,d)))return V.push(ke)})){P=!1;break}}else if(!(q===ee||c(q,ee,t,o,d))){P=!1;break}}return d.delete(l),d.delete(e),P}var xa=ul,Ja=no.Uint8Array,Ia=Ja;function dl(l){var e=-1,t=Array(l.size);return l.forEach(function(o,c){t[++e]=[c,o]}),t}var Bd=dl,ci=1,ui=2,Oh="[object Boolean]",$u="[object Date]",Ph="[object Error]",Eg="[object Map]",Pf="[object Number]",zd="[object RegExp]",pc="[object Set]",us="[object String]",Os="[object Symbol]",A0="[object ArrayBuffer]",T0="[object DataView]",ou=Qr?Qr.prototype:void 0,Ud=ou?ou.valueOf:void 0;function Ap(l,e,t,o,c,d,f){switch(t){case T0:if(l.byteLength!=e.byteLength||l.byteOffset!=e.byteOffset)return!1;l=l.buffer,e=e.buffer;case A0:return!(l.byteLength!=e.byteLength||!d(new Ia(l),new Ia(e)));case Oh:case $u:case Pf:return ls(+l,+e);case Ph:return l.name==e.name&&l.message==e.message;case zd:case us:return l==e+"";case Eg:var v=Bd;case pc:var b=o&ci;if(v||(v=fo),l.size!=e.size&&!b)return!1;var w=f.get(l);if(w)return w==e;o|=ui,f.set(l,e);var _=xa(v(l),v(e),o,c,d,f);return f.delete(l),_;case Os:if(Ud)return Ud.call(l)==Ud.call(e)}return!1}var Ra=Ap;function Dh(l,e,t){var o=e(l);return zr(l)?o:Xs(o,t(l))}var Ys=Dh;function Qa(l,e){for(var t=-1,o=l==null?0:l.length,c=0,d=[];++t<o;){var f=l[t];e(f,t,l)&&(d[c++]=f)}return d}var Vd=Qa;function Nh(){return[]}var Ks=Nh,Ih=Object.prototype,Wu=Ih.propertyIsEnumerable,Xu=Object.getOwnPropertySymbols,em=Xu?function(l){return l==null?[]:(l=Object(l),Vd(Xu(l),function(e){return Wu.call(l,e)}))}:Ks,Df=em;function Tp(l,e){for(var t=-1,o=Array(l);++t<l;)o[t]=e(t);return o}var Rh=Tp;function Sg(){return!1}var Te=Sg,jd=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Zu=jd&&typeof module=="object"&&module&&!module.nodeType&&module,ka=Zu&&Zu.exports===jd,bi=ka?no.Buffer:void 0,tm=bi?bi.isBuffer:void 0,Yu=tm||Te,Hd=Yu,Ku=9007199254740991,M0=/^(?:0|[1-9]\d*)$/;function kl(l,e){var t=typeof l;return e=e??Ku,!!e&&(t=="number"||t!="symbol"&&M0.test(l))&&l>-1&&l%1==0&&l<e}var kh=kl,Mp="[object Arguments]",_g="[object Array]",su="[object Boolean]",O0="[object Date]",nm="[object Error]",Xy="[object Function]",qu="[object Map]",P0="[object Number]",Ll="[object Object]",Ju="[object RegExp]",rm="[object Set]",Ag="[object String]",Qu="[object WeakMap]",D0="[object ArrayBuffer]",Uc="[object DataView]",N0="[object Float32Array]",Uo="[object Float64Array]",qi="[object Int8Array]",Lh="[object Int16Array]",$d="[object Int32Array]",Op="[object Uint8Array]",Pp="[object Uint8ClampedArray]",Dp="[object Uint16Array]",Wd="[object Uint32Array]",Ni={};Ni[N0]=Ni[Uo]=Ni[qi]=Ni[Lh]=Ni[$d]=Ni[Op]=Ni[Pp]=Ni[Dp]=Ni[Wd]=!0,Ni[Mp]=Ni[_g]=Ni[D0]=Ni[su]=Ni[Uc]=Ni[O0]=Ni[nm]=Ni[Xy]=Ni[qu]=Ni[P0]=Ni[Ll]=Ni[Ju]=Ni[rm]=Ni[Ag]=Ni[Qu]=!1;function Nf(l){return Fo(l)&&vf(l.length)&&!!Ni[xt(l)]}var Gl=Nf;function If(l){return function(e){return l(e)}}var la=If,Vc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xd=Vc&&typeof module=="object"&&module&&!module.nodeType&&module,hl=Xd&&Xd.exports===Vc,Fl=hl&&to.process,qs=function(){try{var l=Xd&&Xd.require&&Xd.require("util").types;return l||Fl&&Fl.binding&&Fl.binding("util")}catch{}}(),ec=qs,Ac=ec&&ec.isTypedArray,Ca=Ac?la(Ac):Gl,au=Ca,Zd=Object.prototype,ed=Zd.hasOwnProperty;function td(l,e){var t=zr(l),o=!t&&Ui(l),c=!t&&!o&&Hd(l),d=!t&&!o&&!c&&au(l),f=t||o||c||d,v=f?Rh(l.length,String):[],b=v.length;for(var w in l)(e||ed.call(l,w))&&!(f&&(w=="length"||c&&(w=="offset"||w=="parent")||d&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||kh(w,b)))&&v.push(w);return v}var Tc=td,Tg=Object.prototype;function I0(l){var e=l&&l.constructor,t=typeof e=="function"&&e.prototype||Tg;return l===t}var nd=I0;function Np(l,e){return function(t){return l(e(t))}}var Rf=Np,ua=Rf(Object.keys,Object),Ip=ua,Rp=Object.prototype,fl=Rp.hasOwnProperty;function jc(l){if(!nd(l))return Ip(l);var e=[];for(var t in Object(l))fl.call(l,t)&&t!="constructor"&&e.push(t);return e}var Gh=jc;function rd(l){return Bc(l)?Tc(l):Gh(l)}var id=rd;function wa(l){return Ys(l,id,Df)}var Fh=wa,Bh=1,kf=Object.prototype,Bl=kf.hasOwnProperty;function Lf(l,e,t,o,c,d){var f=t&Bh,v=Fh(l),b=v.length,w=Fh(e),_=w.length;if(b!=_&&!f)return!1;for(var A=b;A--;){var P=v[A];if(!(f?P in e:Bl.call(e,P)))return!1}var V=d.get(l),q=d.get(e);if(V&&q)return V==e&&q==l;var ee=!0;d.set(l,e),d.set(e,l);for(var ge=f;++A<b;){P=v[A];var _e=l[P],ke=e[P];if(o)var Se=f?o(ke,_e,P,e,l,d):o(_e,ke,P,l,e,d);if(!(Se===void 0?_e===ke||c(_e,ke,t,o,d):Se)){ee=!1;break}ge||(ge=P=="constructor")}if(ee&&!ge){var Ue=l.constructor,Qe=e.constructor;Ue!=Qe&&"constructor"in l&&"constructor"in e&&!(typeof Ue=="function"&&Ue instanceof Ue&&typeof Qe=="function"&&Qe instanceof Qe)&&(ee=!1)}return d.delete(l),d.delete(e),ee}var Gf=Lf,zl=Ml(no,"DataView"),pl=zl,Yd=Ml(no,"Promise"),Ul=Yd,zh=Ml(no,"WeakMap"),od=zh,Vl="[object Map]",Kd="[object Object]",Hc="[object Promise]",gc="[object Set]",Uh="[object WeakMap]",sd="[object DataView]",Mc=il(pl),ad=il(Xa),kp=il(Ul),cu=il($t),lu=il(od),Oc=xt;(pl&&Oc(new pl(new ArrayBuffer(1)))!=sd||Xa&&Oc(new Xa)!=Vl||Ul&&Oc(Ul.resolve())!=Hc||$t&&Oc(new $t)!=gc||od&&Oc(new od)!=Uh)&&(Oc=function(l){var e=xt(l),t=e==Kd?l.constructor:void 0,o=t?il(t):"";if(o)switch(o){case Mc:return sd;case ad:return Vl;case kp:return Hc;case cu:return gc;case lu:return Uh}return e});var $c=Oc,Wc=1,gl="[object Arguments]",Vh="[object Array]",cd="[object Object]",R0=Object.prototype,qd=R0.hasOwnProperty;function ld(l,e,t,o,c,d){var f=zr(l),v=zr(e),b=f?Vh:$c(l),w=v?Vh:$c(e);b=b==gl?cd:b,w=w==gl?cd:w;var _=b==cd,A=w==cd,P=b==w;if(P&&Hd(l)){if(!Hd(e))return!1;f=!0,_=!1}if(P&&!_)return d||(d=new io),f||au(l)?xa(l,e,t,o,c,d):Ra(l,e,b,t,o,c,d);if(!(t&Wc)){var V=_&&qd.call(l,"__wrapped__"),q=A&&qd.call(e,"__wrapped__");if(V||q){var ee=V?l.value():l,ge=q?e.value():e;return d||(d=new io),c(ee,ge,t,o,d)}}return P?(d||(d=new io),Gf(l,e,t,o,c,d)):!1}var Jd=ld;function vl(l,e,t,o,c){return l===e?!0:l==null||e==null||!Fo(l)&&!Fo(e)?l!==l&&e!==e:Jd(l,e,t,o,vl,c)}var uu=vl,Lp=1,Qd=2;function hi(l,e,t,o){var c=t.length,d=c,f=!o;if(l==null)return!d;for(l=Object(l);c--;){var v=t[c];if(f&&v[2]?v[1]!==l[v[0]]:!(v[0]in l))return!1}for(;++c<d;){v=t[c];var b=v[0],w=l[b],_=v[1];if(f&&v[2]){if(w===void 0&&!(b in l))return!1}else{var A=new io;if(o)var P=o(w,_,b,l,e,A);if(!(P===void 0?uu(_,w,Lp|Qd,o,A):P))return!1}}return!0}var Ff=hi;function Gp(l){return l===l&&!Gn(l)}var jl=Gp;function Bf(l){for(var e=id(l),t=e.length;t--;){var o=e[t],c=l[o];e[t]=[o,c,jl(c)]}return e}var Fp=Bf;function im(l,e){return function(t){return t==null?!1:t[l]===e&&(e!==void 0||l in Object(t))}}var Pc=im;function Bp(l){var e=Fp(l);return e.length==1&&e[0][2]?Pc(e[0][0],e[0][1]):function(t){return t===l||Ff(t,l,e)}}var ud=Bp,jh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dd=/^\w*$/;function hd(l,e){if(zr(l))return!1;var t=typeof l;return t=="number"||t=="symbol"||t=="boolean"||l==null||dt(l)?!0:dd.test(l)||!jh.test(l)||e!=null&&l in Object(e)}var ws=hd,tc="Expected a function";function eh(l,e){if(typeof l!="function"||e!=null&&typeof e!="function")throw new TypeError(tc);var t=function(){var o=arguments,c=e?e.apply(this,o):o[0],d=t.cache;if(d.has(c))return d.get(c);var f=l.apply(this,o);return t.cache=d.set(c,f)||d,f};return t.cache=new(eh.Cache||oo),t}eh.Cache=oo;var zf=eh,Hh=500;function Ps(l){var e=zf(l,function(o){return t.size===Hh&&t.clear(),o}),t=e.cache;return e}var Wn=Ps,fd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Uf=/\\(\\)?/g,vc=Wn(function(l){var e=[];return l.charCodeAt(0)===46&&e.push(""),l.replace(fd,function(t,o,c,d){e.push(c?d.replace(Uf,"$1"):o||t)}),e}),La=vc;function xi(l,e){for(var t=-1,o=l==null?0:l.length,c=Array(o);++t<o;)c[t]=e(l[t],t,l);return c}var Ds=xi,th=1/0,pd=Qr?Qr.prototype:void 0,Vf=pd?pd.toString:void 0;function nh(l){if(typeof l=="string")return l;if(zr(l))return Ds(l,nh)+"";if(dt(l))return Vf?Vf.call(l):"";var e=l+"";return e=="0"&&1/l==-th?"-0":e}var Ga=nh;function du(l){return l==null?"":Ga(l)}var go=du;function om(l,e){return zr(l)?l:ws(l,e)?[l]:La(go(l))}var Mg=om,sm=1/0;function ds(l){if(typeof l=="string"||dt(l))return l;var e=l+"";return e=="0"&&1/l==-sm?"-0":e}var Js=ds;function Dc(l,e){e=Mg(e,l);for(var t=0,o=e.length;l!=null&&t<o;)l=l[Js(e[t++])];return t&&t==o?l:void 0}var jf=Dc;function am(l,e,t){var o=l==null?void 0:jf(l,e);return o===void 0?t:o}var $h=am;function Wh(l,e){return l!=null&&e in Object(l)}var ml=Wh;function Og(l,e,t){e=Mg(e,l);for(var o=-1,c=e.length,d=!1;++o<c;){var f=Js(e[o]);if(!(d=l!=null&&t(l,f)))break;l=l[f]}return d||++o!=c?d:(c=l==null?0:l.length,!!c&&vf(c)&&kh(f,c)&&(zr(l)||Ui(l)))}var rh=Og;function hs(l,e){return l!=null&&rh(l,e,ml)}var gd=hs,ih=1,zp=2;function Pg(l,e){return ws(l)&&jl(e)?Pc(Js(l),e):function(t){var o=$h(t,l);return o===void 0&&o===e?gd(t,l):uu(e,o,ih|zp)}}var Fa=Pg;function yl(l){return function(e){return e?.[l]}}var rs=yl;function Ea(l){return function(e){return jf(e,l)}}var Up=Ea;function Vp(l){return ws(l)?rs(Js(l)):Up(l)}var cm=Vp;function jp(l){return typeof l=="function"?l:l==null?Cs:typeof l=="object"?zr(l)?Fa(l[0],l[1]):ud(l):cm(l)}var vd=jp;function Hp(l,e,t){return bo(l,e,vd(t,2))}var Sa=Hp;function nc(l){return function(e,t,o){for(var c=-1,d=Object(e),f=o(e),v=f.length;v--;){var b=f[l?v:++c];if(t(d[b],b,d)===!1)break}return e}}var hu=nc,fu=hu(),Hf=fu;function Xh(l,e){return l&&Hf(l,e,id)}var k0=Xh;function Dg(l,e){return function(t,o){if(t==null)return t;if(!Bc(t))return l(t,o);for(var c=t.length,d=e?c:-1,f=Object(t);(e?d--:++d<c)&&o(f[d],d,f)!==!1;);return t}}var L0=Dg,lm=L0(k0),Ba=lm;function oh(l,e){var t=-1,o=Bc(l)?Array(l.length):[];return Ba(l,function(c,d,f){o[++t]=e(c,d,f)}),o}var K=oh;function Pe(l,e){var t=l.length;for(l.sort(e);t--;)l[t]=l[t].value;return l}var ze=Pe;function _t(l,e){if(l!==e){var t=l!==void 0,o=l===null,c=l===l,d=dt(l),f=e!==void 0,v=e===null,b=e===e,w=dt(e);if(!v&&!w&&!d&&l>e||d&&f&&b&&!v&&!w||o&&f&&b||!t&&b||!c)return 1;if(!o&&!d&&!w&&l<e||w&&t&&c&&!o&&!d||v&&t&&c||!f&&c||!b)return-1}return 0}var pt=_t;function Ct(l,e,t){for(var o=-1,c=l.criteria,d=e.criteria,f=c.length,v=t.length;++o<f;){var b=pt(c[o],d[o]);if(b){if(o>=v)return b;var w=t[o];return b*(w=="desc"?-1:1)}}return l.index-e.index}var It=Ct;function en(l,e,t){e.length?e=Ds(e,function(d){return zr(d)?function(f){return jf(f,d.length===1?d[0]:d)}:d}):e=[Cs];var o=-1;e=Ds(e,la(vd));var c=K(l,function(d,f,v){var b=Ds(e,function(w){return w(d)});return{criteria:b,index:++o,value:d}});return ze(c,function(d,f){return It(d,f,t)})}var un=en;function hn(l,e,t){if(!Gn(t))return!1;var o=typeof e;return(o=="number"?Bc(t)&&kh(e,t.length):o=="string"&&e in t)?ls(t[e],l):!1}var rn=hn,on=ns(function(l,e){if(l==null)return[];var t=e.length;return t>1&&rn(l,e[0],e[1])?e=[]:t>2&&rn(e[0],e[1],e[2])&&(e=[e[0]]),un(l,ts(e,1),[])}),On=on;function cn(l,e,t){e=="__proto__"&&ll?ll(l,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):l[e]=t}var wn=cn;function ft(l,e,t,o){for(var c=-1,d=l==null?0:l.length;++c<d;){var f=l[c];e(o,f,t(f),l)}return o}var Rt=ft;function fn(l,e,t,o){return Ba(l,function(c,d,f){e(o,c,t(c),f)}),o}var Vn=fn;function tn(l,e){return function(t,o){var c=zr(t)?Rt:Vn,d=e?e():{};return c(t,l,vd(o,2),d)}}var zn=tn,Wt=Object.prototype,An=Wt.hasOwnProperty,nn=zn(function(l,e,t){An.call(l,t)?l[t].push(e):wn(l,t,[e])}),_n=nn,dr=200;function Pr(l,e,t,o){var c=-1,d=Ze,f=!0,v=l.length,b=[],w=e.length;if(!v)return b;t&&(e=Ds(e,la(t))),o?(d=mt,f=!1):e.length>=dr&&(d=vn,f=!1,e=new Ah(e));e:for(;++c<v;){var _=l[c],A=t==null?_:t(_);if(_=o||_!==0?_:0,f&&A===A){for(var P=w;P--;)if(e[P]===A)continue e;b.push(_)}else d(e,A,o)||b.push(_)}return b}var Tn=Pr,mn=ns(function(l,e){return iu(l)?Tn(l,ts(e,1,iu,!0)):[]}),qt=mn;function Cr(l,e,t){for(var o=-1,c=l.length;++o<c;){var d=l[o],f=e(d);if(f!=null&&(v===void 0?f===f&&!dt(f):t(f,v)))var v=f,b=d}return b}var Fr=Cr;function qn(l,e){return l>e}var si=qn;function Dr(l){return l&&l.length?Fr(l,Cs,si):void 0}var Wr=Dr;function Pi(l,e,t){const o=Xo(l,t),c=Xo(e,t),d=c.free,f=o.keyIndex,v=c.keyIndex,b=[],w=[];let _=0,A,P,V=0;for(;_<l.length;){if(A=l[_],P=A[t],P)if(!v.hasOwnProperty(P))w.push(null);else{const Ue=v[P];w.push(e[Ue])}else{V+=1;const Ue=d[V];w.push(Ue||null)}_+=1}const q=w.slice(0);for(_=0;_<q.length;)q[_]===null?(_e(_),Se(_)):_+=1;let ee=_=0;for(;_<e.length;){A=e[_],P=A[t];const Ue=q[ee];if(Ue){const Qe=Ue[t];if(P===Qe)ee+=1;else if(!f.hasOwnProperty(P))ke(_,A);else{const bt=q[ee+1];bt&&(bt[t]===P?(_e(_),Se(ee),ee+=1):ke(_,A))}}else ke(_,A);_+=1}let ge=q.length-ee;for(;(ee+=1)<q.length;)ge-=1,_e(ge+_);function _e(Ue){const Qe={index:Ue,type:0,item:null};b.push(Qe)}function ke(Ue,Qe){const bt={index:Ue,item:Qe,type:1};b.push(bt)}function Se(Ue){q.splice(Ue,1)}return{moves:b}}function Xo(l,e){const t={},o=[];for(let c=0,d=l.length;c<d;c+=1){const f=l[c],v=f[e];v?t[v]=c:o.push(f)}return{keyIndex:t,free:o}}var fs=Object.prototype,Kr=fs.hasOwnProperty;function ps(l,e){return l!=null&&Kr.call(l,e)}var xo=ps;function gs(l,e){return l!=null&&rh(l,e,xo)}var Co=gs,Es=Object.prototype,Ao=Es.hasOwnProperty;function is(l,e,t){var o=l[e];(!(Ao.call(l,e)&&ls(o,t))||t===void 0&&!(e in l))&&wn(l,e,t)}var Zo=is;function Br(l,e,t,o){if(!Gn(l))return l;e=Mg(e,l);for(var c=-1,d=e.length,f=d-1,v=l;v!=null&&++c<d;){var b=Js(e[c]),w=t;if(b==="__proto__"||b==="constructor"||b==="prototype")return l;if(c!=f){var _=v[b];w=o?o(_,b,v):void 0,w===void 0&&(w=Gn(_)?_:kh(e[c+1])?[]:{})}Zo(v,b,w),v=v[b]}return l}var Vo=Br;function Ii(l,e,t){for(var o=-1,c=e.length,d={};++o<c;){var f=e[o],v=jf(l,f);t(v,f)&&Vo(d,Mg(f,l),v)}return d}var mr=Ii;function li(l,e){return mr(l,e,function(t,o){return gd(l,o)})}var Ci=li;function vs(l){var e=l==null?0:l.length;return e?ts(l,1):[]}var Hl=vs;function sh(l){return qa(Mf(l,void 0,Hl),l+"")}var Be=sh,Dt=Be(function(l,e){return l==null?{}:Ci(l,e)}),Et=Dt;function $n(l){return typeof l=="function"?l:Cs}var ti=$n;function Ge(l){var e=[];if(l!=null)for(var t in Object(l))e.push(t);return e}var we=Ge,We=Object.prototype,ut=We.hasOwnProperty;function ht(l){if(!Gn(l))return we(l);var e=nd(l),t=[];for(var o in l)o=="constructor"&&(e||!ut.call(l,o))||t.push(o);return t}var Je=ht;function Xe(l){return Bc(l)?Tc(l,!0):Je(l)}var tt=Xe;function Le(l,e){return l==null?l:Hf(l,ti(e),tt)}var He=Le;function Ie(l,e,t){(t!==void 0&&!ls(l[e],t)||t===void 0&&!(e in l))&&wn(l,e,t)}var rt=Ie,vt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Vt=vt&&typeof module=="object"&&module&&!module.nodeType&&module,Xt=Vt&&Vt.exports===vt,Lt=Xt?no.Buffer:void 0,dn=Lt?Lt.allocUnsafe:void 0;function or(l,e){if(e)return l.slice();var t=l.length,o=dn?dn(t):new l.constructor(t);return l.copy(o),o}var Vr=or;function Zn(l){var e=new l.constructor(l.byteLength);return new Ia(e).set(new Ia(l)),e}var ur=Zn;function tr(l,e){var t=e?ur(l.buffer):l.buffer;return new l.constructor(t,l.byteOffset,l.length)}var Si=tr;function os(l,e){var t=-1,o=l.length;for(e||(e=Array(o));++t<o;)e[t]=l[t];return e}var rc=os,$f=Object.create,mc=function(){function l(){}return function(e){if(!Gn(e))return{};if($f)return $f(e);l.prototype=e;var t=new l;return l.prototype=void 0,t}}(),Ng=mc,Qs=Rf(Object.getPrototypeOf,Object),Ig=Qs;function Zy(l){return typeof l.constructor=="function"&&!nd(l)?Ng(Ig(l)):{}}var um=Zy,g1="[object Object]",Yy=Function.prototype,v1=Object.prototype,dm=Yy.toString,Ky=v1.hasOwnProperty,Fw=dm.call(Object);function m1(l){if(!Fo(l)||xt(l)!=g1)return!1;var e=Ig(l);if(e===null)return!0;var t=Ky.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&dm.call(t)==Fw}var Xc=m1;function y1(l,e){if(!(e==="constructor"&&typeof l[e]=="function")&&e!="__proto__")return l[e]}var pu=y1;function G0(l,e,t,o){var c=!t;t||(t={});for(var d=-1,f=e.length;++d<f;){var v=e[d],b=o?o(t[v],l[v],v,t,l):void 0;b===void 0&&(b=l[v]),c?wn(t,v,b):Zo(t,v,b)}return t}var Wf=G0;function qy(l){return Wf(l,tt(l))}var hm=qy;function Jy(l,e,t,o,c,d,f){var v=pu(l,t),b=pu(e,t),w=f.get(b);if(w){rt(l,t,w);return}var _=d?d(v,b,t+"",l,e,f):void 0,A=_===void 0;if(A){var P=zr(b),V=!P&&Hd(b),q=!P&&!V&&au(b);_=b,P||V||q?zr(v)?_=v:iu(v)?_=rc(v):V?(A=!1,_=Vr(b,!0)):q?(A=!1,_=Si(b,!0)):_=[]:Xc(b)||Ui(b)?(_=v,Ui(v)?_=hm(v):(!Gn(v)||Ur(v))&&(_=um(b))):A=!1}A&&(f.set(b,_),c(_,b,o,d,f),f.delete(b)),rt(l,t,_)}var Qy=Jy;function fm(l,e,t,o,c){l!==e&&Hf(e,function(d,f){if(c||(c=new io),Gn(d))Qy(l,e,f,t,fm,o,c);else{var v=o?o(pu(l,f),d,f+"",l,e,c):void 0;v===void 0&&(v=d),rt(l,f,v)}},tt)}var F0=fm;function b1(l){return ns(function(e,t){var o=-1,c=t.length,d=c>1?t[c-1]:void 0,f=c>2?t[2]:void 0;for(d=l.length>3&&typeof d=="function"?(c--,d):void 0,f&&rn(t[0],t[1],f)&&(d=c<3?void 0:d,c=1),e=Object(e);++o<c;){var v=t[o];v&&l(e,v,o,d)}return e})}var Rg=b1,eb=Rg(function(l,e,t){F0(l,e,t)}),wo=eb,x1=Rg(function(l,e){Wf(e,tt(e),l)}),C1=x1;function tb(l,e){return uu(l,e)}var gu=tb,w1="[object Map]",E1="[object Set]",S1=Object.prototype,_1=S1.hasOwnProperty;function A1(l){if(l==null)return!0;if(Bc(l)&&(zr(l)||typeof l=="string"||typeof l.splice=="function"||Hd(l)||au(l)||Ui(l)))return!l.length;var e=$c(l);if(e==w1||e==E1)return!l.size;if(nd(l))return!Gh(l).length;for(var t in l)if(_1.call(l,t))return!1;return!0}var pm=A1;function nb(l,e){for(var t=-1,o=l==null?0:l.length;++t<o&&e(l[t],t,l)!==!1;);return l}var T1=nb;function M1(l,e){return l&&Wf(e,id(e),l)}var Bw=M1;function rb(l,e){return l&&Wf(e,tt(e),l)}var O1=rb;function gm(l,e){return Wf(l,Df(l),e)}var ib=gm,P1=Object.getOwnPropertySymbols,D1=P1?function(l){for(var e=[];l;)Xs(e,Df(l)),l=Ig(l);return e}:Ks,vm=D1;function ob(l,e){return Wf(l,vm(l),e)}var B0=ob;function mm(l){return Ys(l,tt,vm)}var N1=mm,ym=Object.prototype,sb=ym.hasOwnProperty;function zw(l){var e=l.length,t=new l.constructor(e);return e&&typeof l[0]=="string"&&sb.call(l,"index")&&(t.index=l.index,t.input=l.input),t}var ab=zw;function I1(l,e){var t=e?ur(l.buffer):l.buffer;return new l.constructor(t,l.byteOffset,l.byteLength)}var Uw=I1,cb=/\w*$/;function R1(l){var e=new l.constructor(l.source,cb.exec(l));return e.lastIndex=l.lastIndex,e}var k1=R1,kg=Qr?Qr.prototype:void 0,lb=kg?kg.valueOf:void 0;function L1(l){return lb?Object(lb.call(l)):{}}var ub=L1,db="[object Boolean]",hb="[object Date]",fb="[object Map]",pb="[object Number]",gb="[object RegExp]",G1="[object Set]",F1="[object String]",vb="[object Symbol]",z0="[object ArrayBuffer]",U0="[object DataView]",mb="[object Float32Array]",B1="[object Float64Array]",bm="[object Int8Array]",yb="[object Int16Array]",z1="[object Int32Array]",U1="[object Uint8Array]",bb="[object Uint8ClampedArray]",xb="[object Uint16Array]",xm="[object Uint32Array]";function V1(l,e,t){var o=l.constructor;switch(e){case z0:return ur(l);case db:case hb:return new o(+l);case U0:return Uw(l,t);case mb:case B1:case bm:case yb:case z1:case U1:case bb:case xb:case xm:return Si(l,t);case fb:return new o;case pb:case F1:return new o(l);case gb:return k1(l);case G1:return new o;case vb:return ub(l)}}var j1=V1,Cm="[object Map]";function wm(l){return Fo(l)&&$c(l)==Cm}var H1=wm,V0=ec&&ec.isMap,Cb=V0?la(V0):H1,bl=Cb,Em="[object Set]";function $1(l){return Fo(l)&&$c(l)==Em}var ah=$1,di=ec&&ec.isSet,Sm=di?la(di):ah,Zc=Sm,ea=1,W1=2,Xf=4,wb="[object Arguments]",X1="[object Array]",Vw="[object Boolean]",Z1="[object Date]",jw="[object Error]",j0="[object Function]",Y1="[object GeneratorFunction]",ch="[object Map]",Eb="[object Number]",Lg="[object Object]",Ns="[object RegExp]",zs="[object Set]",Sb="[object String]",_m="[object Symbol]",K1="[object WeakMap]",_b="[object ArrayBuffer]",q1="[object DataView]",J1="[object Float32Array]",Am="[object Float64Array]",Ab="[object Int8Array]",Gg="[object Int16Array]",Tm="[object Int32Array]",Q1="[object Uint8Array]",Tb="[object Uint8ClampedArray]",H0="[object Uint16Array]",xl="[object Uint32Array]",Eo={};Eo[wb]=Eo[X1]=Eo[_b]=Eo[q1]=Eo[Vw]=Eo[Z1]=Eo[J1]=Eo[Am]=Eo[Ab]=Eo[Gg]=Eo[Tm]=Eo[ch]=Eo[Eb]=Eo[Lg]=Eo[Ns]=Eo[zs]=Eo[Sb]=Eo[_m]=Eo[Q1]=Eo[Tb]=Eo[H0]=Eo[xl]=!0,Eo[jw]=Eo[j0]=Eo[K1]=!1;function $0(l,e,t,o,c,d){var f,v=e&ea,b=e&W1,w=e&Xf;if(t&&(f=c?t(l,o,c,d):t(l)),f!==void 0)return f;if(!Gn(l))return l;var _=zr(l);if(_){if(f=ab(l),!v)return rc(l,f)}else{var A=$c(l),P=A==j0||A==Y1;if(Hd(l))return Vr(l,v);if(A==Lg||A==wb||P&&!c){if(f=b||P?{}:um(l),!v)return b?B0(l,O1(f,l)):ib(l,Bw(f,l))}else{if(!Eo[A])return c?l:{};f=j1(l,A,v)}}d||(d=new io);var V=d.get(l);if(V)return V;d.set(l,f),Zc(l)?l.forEach(function(ge){f.add($0(ge,e,t,ge,l,d))}):bl(l)&&l.forEach(function(ge,_e){f.set(_e,$0(ge,e,t,_e,l,d))});var q=w?b?N1:Fh:b?tt:id,ee=_?void 0:q(l);return T1(ee||l,function(ge,_e){ee&&(_e=ge,ge=l[_e]),Zo(f,_e,$0(ge,e,t,_e,l,d))}),f}var Mb=$0,ex=4;function tx(l){return Mb(l,ex)}var $p=tx,W0=1,vu=4;function _i(l){return Mb(l,W0|vu)}var Yo=_i,Yc=Object.prototype,Fg=Yc.hasOwnProperty,nx=ns(function(l,e){l=Object(l);var t=-1,o=e.length,c=o>2?e[2]:void 0;for(c&&rn(e[0],e[1],c)&&(o=1);++t<o;)for(var d=e[t],f=tt(d),v=-1,b=f.length;++v<b;){var w=f[v],_=l[w];(_===void 0||ls(_,Yc[w])&&!Fg.call(l,w))&&(l[w]=d[w])}return l}),So=nx;function Ob(l,e,t,o,c,d){return Gn(l)&&Gn(e)&&(d.set(e,l),F0(l,e,void 0,Ob,d),d.delete(e)),l}var Mm=Ob,X0=Rg(function(l,e,t,o){F0(l,e,t,o)}),Pb=X0,rx=ns(function(l){return l.push(void 0,Mm),zo(Pb,void 0,l)}),Wp=rx;function Om(l,...e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(o=>{o!=="constructor"&&Object.defineProperty(l.prototype,o,Object.getOwnPropertyDescriptor(t.prototype,o))})})}const Z0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,e){l.__proto__=e}||function(l,e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(l[t]=e[t])};function Db(l,e){Z0(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}class Cl{}const ix=/^\s*class\s+/.test(`${Cl}`)||/^\s*class\s*\{/.test(`${class{}}`);function Y0(l,e){let t;return ix?t=class extends e{}:(t=function(){return e.apply(this,arguments)},Db(t,e)),Object.defineProperty(t,"name",{value:l}),t}function Pm(l,e){return l??e}function K0(l,e,t){const o=l!=null?l[e]:null;return t!==void 0?Pm(o,t):o}function Nb(l,e,t){let o=l!=null?l[e]:null;return o==null||(o=+o,Number.isNaN(o)||!Number.isFinite(o))?t:o}function ox(l,e,t){const o=l!=null?l[e]:null;return o==null?t:!!o}function Xp(l){return l==="__proto__"}function q0(l,e,t="/"){let o;const c=Array.isArray(e)?e:e.split(t);if(c.length)for(o=l;c.length;){const d=c.shift();if(Object(o)===o&&d&&d in o)o=o[d];else return}return o}function lh(l,e,t,o="/"){const c=Array.isArray(e)?e:e.split(o),d=c.pop();if(d&&!Xp(d)){let f=l;c.forEach(v=>{Xp(v)||(f[v]==null&&(f[v]={}),f=f[v])}),f[d]=t}return l}function Dm(l,e,t="/"){const o=Array.isArray(e)?e.slice():e.split(t),c=o.pop();if(c)if(o.length>0){const d=q0(l,o);d&&delete d[c]}else delete l[c];return l}function $l(l,e="/",t){const o={};Object.keys(l).forEach(c=>{const d=l[c];let f=typeof d=="object"||Array.isArray(d);if(f&&t&&t(d)&&(f=!1),f){const v=$l(d,e,t);Object.keys(v).forEach(b=>{o[c+e+b]=v[b]})}else o[c]=d});for(const c in l)Object.prototype.hasOwnProperty.call(l,c);return o}var mu="[object String]";function Is(l){return typeof l=="string"||!zr(l)&&Fo(l)&&xt(l)==mu}var _a=Is;function sx(l){return function(e){return l?.[e]}}var Nm=sx,Ib={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bg=Nm(Ib),J0=Bg,Zf=/[&<>"']/g,ax=RegExp(Zf.source);function Rb(l){return l=go(l),l&&ax.test(l)?l.replace(Zf,J0):l}var kb=Rb,cx={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},lx=Nm(cx),Lb=lx,Im=/&(?:amp|lt|gt|quot|#39);/g,ux=RegExp(Im.source);function dx(l){return l=go(l),l&&ux.test(l)?l.replace(Im,Lb):l}var hx=dx;function fx(l,e,t){return l===l&&(t!==void 0&&(l=l<=t?l:t),e!==void 0&&(l=l>=e?l:e)),l}var uh=fx,px=/\s/;function gx(l){for(var e=l.length;e--&&px.test(l.charAt(e)););return e}var vx=gx,mx=/^\s+/;function yx(l){return l&&l.slice(0,vx(l)+1).replace(mx,"")}var Gb=yx,ta=0/0,Fb=/^[-+]0x[0-9a-f]+$/i,bx=/^0b[01]+$/i,qr=/^0o[0-7]+$/i,xx=parseInt;function Zp(l){if(typeof l=="number")return l;if(dt(l))return ta;if(Gn(l)){var e=typeof l.valueOf=="function"?l.valueOf():l;l=Gn(e)?e+"":e}if(typeof l!="string")return l===0?l:+l;l=Gb(l);var t=bx.test(l);return t||qr.test(l)?xx(l.slice(2),t?2:8):Fb.test(l)?ta:+l}var Zh=Zp,Bb=1/0,Cx=17976931348623157e292;function wx(l){if(!l)return l===0?l:0;if(l=Zh(l),l===Bb||l===-Bb){var e=l<0?-1:1;return e*Cx}return l===l?l:0}var Rm=wx;function Ex(l){var e=Rm(l),t=e%1;return e===e?t?e-t:e:0}var yu=Ex;function Sx(l,e,t){return l=go(l),t=t==null?0:uh(yu(t),0,l.length),e=Ga(e),l.slice(t,t+e.length)==e}var _x=Sx;function Ax(l,e,t){l=go(l),e=Ga(e);var o=l.length;t=t===void 0?o:uh(yu(t),0,o);var c=t;return t-=e.length,t>=0&&l.slice(t,c)==e}var Tx=Ax;function Mx(l,e,t){var o=-1,c=l.length;e<0&&(e=-e>c?0:c+e),t=t>c?c:t,t<0&&(t+=c),c=e>t?0:t-e>>>0,e>>>=0;for(var d=Array(c);++o<c;)d[o]=l[o+e];return d}var Sr=Mx;function hr(l,e,t){var o=l.length;return t=t===void 0?o:t,!e&&t>=o?l:Sr(l,e,t)}var wr=hr,_r="\\ud800-\\udfff",Ox="\\u0300-\\u036f",cr="\\ufe20-\\ufe2f",Ji="\\u20d0-\\u20ff",Px=Ox+cr+Ji,km="\\ufe0e\\ufe0f",bu="\\u200d",Yh=RegExp("["+bu+_r+Px+km+"]");function Yf(l){return Yh.test(l)}var xu=Yf,sn="[object RegExp]";function Lm(l){return Fo(l)&&xt(l)==sn}var Dx=Lm,zb=ec&&ec.isRegExp,za=zb?la(zb):Dx,To=za;function so(l){return l.split("")}var Nx=so,Ub="\\ud800-\\udfff",Ix="\\u0300-\\u036f",Vb="\\ufe20-\\ufe2f",Gm="\\u20d0-\\u20ff",jb=Ix+Vb+Gm,Q0="\\ufe0e\\ufe0f",Hb="["+Ub+"]",zg="["+jb+"]",ev="\\ud83c[\\udffb-\\udfff]",$b="(?:"+zg+"|"+ev+")",Kc="[^"+Ub+"]",Wb="(?:\\ud83c[\\udde6-\\uddff]){2}",Fm="[\\ud800-\\udbff][\\udc00-\\udfff]",Rx="\\u200d",kt=$b+"?",ms="["+Q0+"]?",Ua="(?:"+Rx+"(?:"+[Kc,Wb,Fm].join("|")+")"+ms+kt+")*",Ug=ms+kt+Ua,kx="(?:"+[Kc+zg+"?",zg,Wb,Fm,Hb].join("|")+")",Xb=RegExp(ev+"(?="+ev+")|"+kx+Ug,"g");function Lx(l){return l.match(Xb)||[]}var Gx=Lx;function Fx(l){return xu(l)?Gx(l):Nx(l)}var Bm=Fx,Hw=4294967295;function $w(l,e,t){return t&&typeof t!="number"&&rn(l,e,t)&&(e=t=void 0),t=t===void 0?Hw:t>>>0,t?(l=go(l),l&&(typeof e=="string"||e!=null&&!To(e))&&(e=Ga(e),!e&&xu(l))?wr(Bm(l),0,t):l.split(e,t)):[]}var Ww=$w,Xw=9007199254740991,Zw=Math.floor;function Yw(l,e){var t="";if(!l||e<1||e>Xw)return t;do e%2&&(t+=l),e=Zw(e/2),e&&(l+=l);while(e);return t}var Zb=Yw;function Bx(l,e,t){return(t?rn(l,e,t):e===void 0)?e=1:e=yu(e),Zb(go(l),e)}var Kw=Bx,qw=rs("length"),Jw=qw,Yb="\\ud800-\\udfff",zx="\\u0300-\\u036f",m="\\ufe20-\\ufe2f",C="\\u20d0-\\u20ff",D=zx+m+C,Y="\\ufe0e\\ufe0f",ve="["+Yb+"]",Re="["+D+"]",Ke="\\ud83c[\\udffb-\\udfff]",ot="(?:"+Re+"|"+Ke+")",Mt="[^"+Yb+"]",yn="(?:\\ud83c[\\udde6-\\uddff]){2}",xn="[\\ud800-\\udbff][\\udc00-\\udfff]",Dn="\\u200d",nr=ot+"?",Tr="["+Y+"]?",ni="(?:"+Dn+"(?:"+[Mt,yn,xn].join("|")+")"+Tr+nr+")*",Ri=Tr+nr+ni,ri="(?:"+[Mt+Re+"?",Re,yn,xn,ve].join("|")+")",$i=RegExp(Ke+"(?="+Ke+")|"+ri+Ri,"g");function ao(l){for(var e=$i.lastIndex=0;$i.test(l);)++e;return e}var Wl=ao;function qc(l){return xu(l)?Wl(l):Jw(l)}var Rs=qc,St=Math.ceil;function Va(l,e){e=e===void 0?" ":Ga(e);var t=e.length;if(t<2)return t?Zb(e,l):e;var o=Zb(e,St(l/Rs(e)));return xu(e)?wr(Bm(o),0,l).join(""):o.slice(0,l)}var Xl=Va,Kb=Math.ceil,aT=Math.floor;function cT(l,e,t){l=go(l),e=yu(e);var o=e?Rs(l):0;if(!e||o>=e)return l;var c=(e-o)/2;return Xl(aT(c),t)+l+Xl(Kb(c),t)}var lT=cT;function uT(l,e,t){l=go(l),e=yu(e);var o=e?Rs(l):0;return e&&o<e?l+Xl(e-o,t):l}var dT=uT;function hT(l,e,t){l=go(l),e=yu(e);var o=e?Rs(l):0;return e&&o<e?Xl(e-o,t)+l:l}var fT=hT,pT=30,gT="...",vT=/\w*$/;function mT(l,e){var t=pT,o=gT;if(Gn(e)){var c="separator"in e?e.separator:c;t="length"in e?yu(e.length):t,o="omission"in e?Ga(e.omission):o}l=go(l);var d=l.length;if(xu(l)){var f=Bm(l);d=f.length}if(t>=d)return l;var v=t-Rs(o);if(v<1)return o;var b=f?wr(f,0,v).join(""):l.slice(0,v);if(c===void 0)return b+o;if(f&&(v+=b.length-v),To(c)){if(l.slice(v).search(c)){var w,_=b;for(c.global||(c=RegExp(c.source,go(vT.exec(c))+"g")),c.lastIndex=0;w=c.exec(_);)var A=w.index;b=b.slice(0,A===void 0?v:A)}}else if(l.indexOf(Ga(c),v)!=v){var P=b.lastIndexOf(c);P>-1&&(b=b.slice(0,P))}return b+o}var yT=mT,bT=Rg(function(l,e,t,o){Wf(e,tt(e),l,o)}),Qw=bT,xT="[object DOMException]",CT="[object Error]";function wT(l){if(!Fo(l))return!1;var e=xt(l);return e==CT||e==xT||typeof l.message=="string"&&typeof l.name=="string"&&!Xc(l)}var eE=wT,ET=ns(function(l,e){try{return zo(l,void 0,e)}catch(t){return eE(t)?t:new Error(t)}}),ST=ET;function _T(l,e){return Ds(e,function(t){return l[t]})}var AT=_T,tE=Object.prototype,ks=tE.hasOwnProperty;function aP(l,e,t,o){return l===void 0||ls(l,tE[t])&&!ks.call(o,t)?e:l}var nE=aP,TT={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function MT(l){return"\\"+TT[l]}var OT=MT,PT=/<%=([\s\S]+?)%>/g,Ux=PT,rE=/<%-([\s\S]+?)%>/g,iE=rE,DT=/<%([\s\S]+?)%>/g,NT=DT,IT={escape:iE,evaluate:NT,interpolate:Ux,variable:"",imports:{_:{escape:kb}}},gt=IT,oE="Invalid `variable` option passed into `_.template`",sE=/\b__p \+= '';/g,aE=/\b(__p \+=) '' \+/g,cE=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qb=/[()=,{}\[\]\/\s]/,lE=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zm=/($^)/,uE=/['\n\r\u2028\u2029\\]/g,RT=Object.prototype,Vx=RT.hasOwnProperty;function dE(l,e,t){var o=gt.imports._.templateSettings||gt;t&&rn(l,e,t)&&(e=void 0),l=go(l),e=Qw({},e,o,nE);var c=Qw({},e.imports,o.imports,nE),d=id(c),f=AT(c,d),v,b,w=0,_=e.interpolate||zm,A="__p += '",P=RegExp((e.escape||zm).source+"|"+_.source+"|"+(_===Ux?lE:zm).source+"|"+(e.evaluate||zm).source+"|$","g"),V=Vx.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+`
`:"";l.replace(P,function(ge,_e,ke,Se,Ue,Qe){return ke||(ke=Se),A+=l.slice(w,Qe).replace(uE,OT),_e&&(v=!0,A+=`' +
__e(`+_e+`) +
'`),Ue&&(b=!0,A+=`';
`+Ue+`;
__p += '`),ke&&(A+=`' +
((__t = (`+ke+`)) == null ? '' : __t) +
'`),w=Qe+ge.length,ge}),A+=`';
`;var q=Vx.call(e,"variable")&&e.variable;if(!q)A=`with (obj) {
`+A+`
}
`;else if(qb.test(q))throw new Error(oE);A=(b?A.replace(sE,""):A).replace(aE,"$1").replace(cE,"$1;"),A="function("+(q||"obj")+`) {
`+(q?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(b?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+A+`return __p
}`;var ee=ST(function(){return Function(d,V+"return "+A).apply(void 0,f)});if(ee.source=A,eE(ee))throw ee;return ee}var Vg=dE,kT=0;function LT(l){var e=++kT;return go(l)+e}var jx=LT;function hE(l){let e=null;try{e=window.eval(l)}catch{}return e}function fE(l,e,t,o){var c=-1,d=l==null?0:l.length;for(o&&d&&(t=l[++c]);++c<d;)t=e(t,l[c],c,l);return t}var pE=fE,gE={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Um=Nm(gE),vE=Um,mE=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yE="\\u0300-\\u036f",bE="\\ufe20-\\ufe2f",xE="\\u20d0-\\u20ff",CE=yE+bE+xE,GT="["+CE+"]",FT=RegExp(GT,"g");function BT(l){return l=go(l),l&&l.replace(mE,vE).replace(FT,"")}var Hx=BT,zT=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function $x(l){return l.match(zT)||[]}var UT=$x,VT=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function jT(l){return VT.test(l)}var HT=jT,Kf="\\ud800-\\udfff",$T="\\u0300-\\u036f",cP="\\ufe20-\\ufe2f",lP="\\u20d0-\\u20ff",uP=$T+cP+lP,wE="\\u2700-\\u27bf",EE="a-z\\xdf-\\xf6\\xf8-\\xff",dP="\\xac\\xb1\\xd7\\xf7",SE="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_E="\\u2000-\\u206f",AE=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wx="A-Z\\xc0-\\xd6\\xd8-\\xde",TE="\\ufe0e\\ufe0f",Xx=dP+SE+_E+AE,Zx="['\u2019]",Yp="["+Xx+"]",ME="["+uP+"]",Yx="\\d+",OE="["+wE+"]",Kx="["+EE+"]",qx="[^"+Kf+Xx+Yx+wE+EE+Wx+"]",PE="\\ud83c[\\udffb-\\udfff]",DE="(?:"+ME+"|"+PE+")",WT="[^"+Kf+"]",Jx="(?:\\ud83c[\\udde6-\\uddff]){2}",NE="[\\ud800-\\udbff][\\udc00-\\udfff]",ic="["+Wx+"]",XT="\\u200d",Jb="(?:"+Kx+"|"+qx+")",hP="(?:"+ic+"|"+qx+")",ZT="(?:"+Zx+"(?:d|ll|m|re|s|t|ve))?",Qx="(?:"+Zx+"(?:D|LL|M|RE|S|T|VE))?",YT=DE+"?",Vm="["+TE+"]?",fP="(?:"+XT+"(?:"+[WT,Jx,NE].join("|")+")"+Vm+YT+")*",pP="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",jm=Vm+YT+fP,gP="(?:"+[OE,Jx,NE].join("|")+")"+jm,vP=RegExp([ic+"?"+Kx+"+"+ZT+"(?="+[Yp,ic,"$"].join("|")+")",hP+"+"+Qx+"(?="+[Yp,ic+Jb,"$"].join("|")+")",ic+"?"+Jb+"+"+ZT,ic+"+"+Qx,jg,pP,Yx,gP].join("|"),"g");function KT(l){return l.match(vP)||[]}var qT=KT;function mP(l,e,t){return l=go(l),e=t?void 0:e,e===void 0?HT(l)?qT(l):UT(l):l.match(e)||[]}var yP=mP,bP="['\u2019]",xP=RegExp(bP,"g");function CP(l){return function(e){return pE(yP(Hx(e).replace(xP,"")),l,"")}}var eC=CP;function wP(l){return function(e){e=go(e);var t=xu(e)?Bm(e):void 0,o=t?t[0]:e.charAt(0),c=t?wr(t,1).join(""):e.slice(1);return o[l]()+c}}var IE=wP,EP=IE("toUpperCase"),Kh=EP,tv=eC(function(l,e,t){return l+(t?" ":"")+Kh(e)}),nv=tv;function JT(l){return Kh(go(l).toLowerCase())}var SP=JT,RE=eC(function(l,e,t){return e=e.toLowerCase(),l+(t?SP(e):e)}),Qb=RE,QT=eC(function(l,e,t){return l+(t?" ":"")+e.toUpperCase()}),eM=QT,_P=eC(function(l,e,t){return l+(t?" ":"")+e.toLowerCase()}),kE=_P,tM=IE("toLowerCase"),LE=tM;const rv=l=>{const e=Object.create(null);return t=>e[t]||(e[t]=l(t))},tC=rv(l=>l.replace(/\B([A-Z])/g,"-$1").toLowerCase()),nC=rv(l=>nv(Qb(l)).replace(/ /g,"")),AP=rv(l=>eM(l).replace(/ /g,"_")),TP=rv(l=>kE(l).replace(/ /g,".")),MP=rv(l=>kE(l).replace(/ /g,"/")),OP=rv(l=>Kh(kE(l))),PP=rv(l=>nv(Qb(l)));function rC(l){let e=2166136261,t=!1,o=l;for(let c=0,d=o.length;c<d;c+=1){let f=o.charCodeAt(c);f>127&&!t&&(o=unescape(encodeURIComponent(o)),f=o.charCodeAt(c),t=!0),e^=f,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}return e>>>0}function iC(){let l="";const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let t=0,o=e.length;t<o;t+=1){const c=e[t],d=Math.random()*16|0;l+=(c==="x"?d:c==="y"?d&3|8:c).toString(16)}return l}function GE(l,e={}){const t=G().parseHTML(l,null,!1);return t.forEach(o=>{const c=o;if(c){const d=c.attributes;if(d)for(let f=0,v=d.length;f<v;f+=1){const b=d.item(f);if(b){const w=b.value.toLowerCase(),_=b.name.toLowerCase();(_.startsWith("on")||w.startsWith("javascript:")||w.startsWith("data:")||w.startsWith("vbscript:"))&&c.removeAttribute(_)}}}}),e.raw?t:G()("<div/>").append(t).html()}function nM(l,e,t){const o=Math.min(2,Math.floor(l.length*.34));let c=Math.floor(l.length*.4)+1,d,f=!1;const v=l.toLowerCase();for(const b of e){const w=t(b);if(w!==void 0&&Math.abs(w.length-v.length)<=o){const _=w.toLowerCase();if(_===v){if(w===l)continue;return b}if(f||w.length<3)continue;const A=DP(v,_,c-1);if(A===void 0)continue;A<3?(f=!0,d=b):(c=A,d=b)}}return d}function DP(l,e,t){let o=new Array(e.length+1),c=new Array(e.length+1);const d=t+1;for(let v=0;v<=e.length;v+=1)o[v]=v;for(let v=1;v<=l.length;v+=1){const b=l.charCodeAt(v-1),w=v>t?v-t:1,_=e.length>t+v?t+v:e.length;c[0]=v;let A=v;for(let V=1;V<w;V+=1)c[V]=d;for(let V=w;V<=_;V+=1){const q=b===e.charCodeAt(V-1)?o[V-1]:Math.min(o[V]+1,c[V-1]+1,o[V-1]+2);c[V]=q,A=Math.min(A,q)}for(let V=_+1;V<=e.length;V+=1)c[V]=d;if(A>t)return;const P=o;o=c,c=P}const f=o[e.length];return f>t?void 0:f}var FE="[object Number]";function BE(l){return typeof l=="number"||Fo(l)&&xt(l)==FE}var e2=BE;function zE(l){return e2(l)&&l!=+l}var rM=zE,UE=no.isFinite;function VE(l){return typeof l=="number"&&UE(l)}var iM=VE;function jE(l){return typeof l=="number"&&l==yu(l)}var HE=jE,oC=9007199254740991;function $E(l){return HE(l)&&l>=-oC&&l<=oC}var qh=$E;function WE(l,e,t){return t===void 0&&(t=e,e=void 0),t!==void 0&&(t=Zh(t),t=t===t?t:0),e!==void 0&&(e=Zh(e),e=e===e?e:0),uh(Zh(l),e,t)}var Jc=WE,XE=Math.max,ZE=Math.min;function YE(l,e,t){return l>=ZE(e,t)&&l<XE(e,t)}var KE=YE;function qE(l,e,t){return e=Rm(e),t===void 0?(t=e,e=0):t=Rm(t),l=Zh(l),KE(l,e,t)}var oM=qE,sC=9007199254740991;function JE(l){return l?uh(yu(l),-sC,sC):l===0?l:0}var sM=JE,t2=/^\s+/,aM=no.parseInt;function QE(l,e,t){return t||e==null?e=0:e&&(e=+e),aM(go(l).replace(t2,""),e||0)}var Hm=QE;const cM=l=>l&&l===l.window,eS=l=>!Array.isArray(l)&&l-parseFloat(l)+1>=0;function lM(l,e){return(l%e+e)%e}function uM(l,e){if(e==null)e=l??1,l=0;else if(e<l){const t=l;l=e,e=t}return Math.floor(Math.random()*(e-l+1)+l)}function dh(l){return typeof l=="string"&&l.slice(-1)==="%"}function md(l,e){if(l==null)return 0;let t;if(typeof l=="string"){if(t=parseFloat(l),dh(l)&&(t/=100,Number.isFinite(t)))return t*e}else t=l;return Number.isFinite(t)?t>0&&t<1?t*e:t:0}function iv(l,e){function t(f){const v=new RegExp(`(?:\\d+(?:\\.\\d+)*)(${f})$`).exec(l);return v?v[1]:null}const o=parseFloat(l);if(Number.isNaN(o))return null;let c;if(e==null)c="[A-Za-z]*";else if(Array.isArray(e)){if(e.length===0)return null;c=e.join("|")}else typeof e=="string"&&(c=e);const d=t(c);return d===null?null:{unit:d,value:o}}function wl(l){if(typeof l=="object"){let t=0,o=0,c=0,d=0;return l.vertical!=null&&Number.isFinite(l.vertical)&&(o=d=l.vertical),l.horizontal!=null&&Number.isFinite(l.horizontal)&&(c=t=l.horizontal),l.left!=null&&Number.isFinite(l.left)&&(t=l.left),l.top!=null&&Number.isFinite(l.top)&&(o=l.top),l.right!=null&&Number.isFinite(l.right)&&(c=l.right),l.bottom!=null&&Number.isFinite(l.bottom)&&(d=l.bottom),{top:o,right:c,bottom:d,left:t}}let e=0;return l!=null&&Number.isFinite(l)&&(e=l),{top:e,right:e,bottom:e,left:e}}var tS="Expected a function";function nS(l,e){var t;if(typeof e!="function")throw new TypeError(tS);return l=yu(l),function(){return--l>0&&(t=e.apply(this,arguments)),l<=1&&(e=void 0),t}}var rS=nS;function iS(l){return rS(2,l)}var oS=iS,aC=function(){return no.Date.now()},cC=aC,sS="Expected a function",lC=Math.max,uC=Math.min;function aS(l,e,t){var o,c,d,f,v,b,w=0,_=!1,A=!1,P=!0;if(typeof l!="function")throw new TypeError(sS);e=Zh(e)||0,Gn(t)&&(_=!!t.leading,A="maxWait"in t,d=A?lC(Zh(t.maxWait)||0,e):d,P="trailing"in t?!!t.trailing:P);function V(bt){var Ot=o,Kt=c;return o=c=void 0,w=bt,f=l.apply(Kt,Ot),f}function q(bt){return w=bt,v=setTimeout(_e,e),_?V(bt):f}function ee(bt){var Ot=bt-b,Kt=bt-w,Fn=e-Ot;return A?uC(Fn,d-Kt):Fn}function ge(bt){var Ot=bt-b,Kt=bt-w;return b===void 0||Ot>=e||Ot<0||A&&Kt>=d}function _e(){var bt=cC();if(ge(bt))return ke(bt);v=setTimeout(_e,ee(bt))}function ke(bt){return v=void 0,P&&o?V(bt):(o=c=void 0,f)}function Se(){v!==void 0&&clearTimeout(v),w=0,o=b=c=v=void 0}function Ue(){return v===void 0?f:ke(cC())}function Qe(){var bt=cC(),Ot=ge(bt);if(o=arguments,c=this,b=bt,Ot){if(v===void 0)return q(b);if(A)return clearTimeout(v),v=setTimeout(_e,e),V(b)}return v===void 0&&(v=setTimeout(_e,e)),f}return Qe.cancel=Se,Qe.flush=Ue,Qe}var n2=aS,cS="Expected a function";function lS(l,e,t){if(typeof l!="function")throw new TypeError(cS);return setTimeout(function(){l.apply(void 0,t)},e)}var r2=lS,uS=ns(function(l,e){return r2(l,1,e)}),dC=uS;function $m(l,e,t){if(t)switch(t.length){case 0:return l.call(e);case 1:return l.call(e,t[0]);case 2:return l.call(e,t[0],t[1]);case 3:return l.call(e,t[0],t[1],t[2]);case 4:return l.call(e,t[0],t[1],t[2],t[3]);case 5:return l.call(e,t[0],t[1],t[2],t[3],t[4]);case 6:return l.call(e,t[0],t[1],t[2],t[3],t[4],t[5]);default:return l.apply(e,t)}return l.call(e)}function er(l,e,...t){return $m(l,e,t)}function dM(l,e){for(let t=0,o=l.length;t<o;t+=1)if(l[t]===e)return l.push(l.splice(t,1)[0])}function hM(l,e,t){const o=[],c={};return(...f)=>{let v=!1;const b=f.join("\u2400");return b in c?(v=!0,dM(o,b)):(o.length>=1e3&&delete c[o.shift()],o.push(b),c[b]=$m(l,e||null,f)),t?t(c[b],v):c[b]}}function dS(l){return typeof l=="object"&&l.then&&typeof l.then=="function"}function i2(l){return l!=null&&(l instanceof Promise||dS(l))}function Hg(...l){const e=[];if(l.forEach(o=>{Array.isArray(o)?e.push(...o):e.push(o)}),e.some(o=>i2(o))){const o=e.map(c=>i2(c)?c:Promise.resolve(c!==!1));return Promise.all(o).then(c=>c.reduce((d,f)=>f!==!1&&d,!0))}return e.every(o=>o!==!1)}function hC(...l){const e=Hg(l);return typeof e=="boolean"?Promise.resolve(e):e}const o2=/[\t\r\n\f]/g,s2=/\S+/g,$g=l=>` ${l} `;function Kp(l){return l&&l.getAttribute&&l.getAttribute("class")||""}function Wg(l,e){if(l==null||e==null)return!1;const t=$g(Kp(l)),o=$g(e);return l.nodeType===1?t.replace(o2," ").includes(o):!1}function co(l,e){if(!(l==null||e==null)){if(typeof e=="function")return co(l,e(Kp(l)));if(typeof e=="string"&&l.nodeType===1){const t=e.match(s2)||[],o=$g(Kp(l)).replace(o2," ");let c=t.reduce((d,f)=>d.indexOf($g(f))<0?`${d}${f} `:d,o);c=c.trim(),o!==c&&l.setAttribute("class",c)}}}function yc(l,e){if(l!=null){if(typeof e=="function")return yc(l,e(Kp(l)));if((!e||typeof e=="string")&&l.nodeType===1){const t=(e||"").match(s2)||[],o=$g(Kp(l)).replace(o2," ");let c=t.reduce((d,f)=>{const v=$g(f);return d.indexOf(v)>-1?d.replace(v," "):d},o);c=e?c.trim():"",o!==c&&l.setAttribute("class",c)}}}function a2(l,e,t){if(!(l==null||e==null)){if(t!=null&&typeof e=="string"){t?co(l,e):yc(l,e);return}if(typeof e=="function")return a2(l,e(Kp(l),t),t);typeof e=="string"&&(e.match(s2)||[]).forEach(c=>{Wg(l,c)?yc(l,c):co(l,c)})}}let fC=0;function pC(){return fC+=1,`v${fC}`}function ov(l){return(l.id==null||l.id==="")&&(l.id=pC()),l.id}function qf(l){return l==null?!1:typeof l.getScreenCTM=="function"&&l instanceof SVGElement}const Aa={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},gC="1.1";function vC(l,e=document){return e.createElement(l)}function c2(l,e=Aa.xhtml,t=document){return t.createElementNS(e,l)}function Qc(l,e=document){return c2(l,Aa.svg,e)}function sv(l){if(l){const t=`<svg xmlns="${Aa.svg}" xmlns:xlink="${Aa.xlink}" version="${gC}">${l}</svg>`,{documentElement:o}=l2(t,{async:!1});return o}const e=document.createElementNS(Aa.svg,"svg");return e.setAttributeNS(Aa.xmlns,"xmlns:xlink",Aa.xlink),e.setAttribute("version",gC),e}function l2(l,e={}){let t;try{const o=new DOMParser;if(e.async!=null){const c=o;c.async=e.async}t=o.parseFromString(l,e.mimeType||"text/xml")}catch{t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${l}`);return t}function Wm(l,e=!0){const t=l.nodeName;return e?t.toLowerCase():t.toUpperCase()}function Xm(l){let e=0,t=l.previousSibling;for(;t;)t.nodeType===1&&(e+=1),t=t.previousSibling;return e}function av(l,e){return l.querySelectorAll(e)}function Zm(l,e){return l.querySelector(e)}function u2(l,e,t){const o=l.ownerSVGElement;let c=l.parentNode;for(;c&&c!==t&&c!==o;){if(Wg(c,e))return c;c=c.parentNode}return null}function Ym(l,e){const t=e&&e.parentNode;return l===t||!!(t&&t.nodeType===1&&l.compareDocumentPosition(t)&16)}function yd(l){l.parentNode&&l.parentNode.removeChild(l)}function d2(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function Us(l,e){(Array.isArray(e)?e:[e]).forEach(o=>{o!=null&&l.appendChild(o)})}function fM(l,e){const t=l.firstChild;return t?Jh(t,e):Us(l,e)}function Jh(l,e){const t=l.parentNode;t&&(Array.isArray(e)?e:[e]).forEach(c=>{c!=null&&t.insertBefore(c,l)})}function pM(l,e){e?.appendChild(l)}function h2(l){try{return l instanceof HTMLElement}catch{return typeof l=="object"&&l.nodeType===1&&typeof l.style=="object"&&typeof l.ownerDocument=="object"}}function El(l){return!l||!h2(l)?!1:["a","button"].includes(Wm(l))||l.getAttribute("role")==="button"||l.getAttribute("type")==="button"?!0:El(l.parentNode)}function hS(l){if(Wm(l)==="input"){const t=l.getAttribute("type");if(t==null||["text","password","number","email","search","tel","url"].includes(t))return!0}return!1}const fS=["viewBox","attributeName","attributeType","repeatCount"];function gM(l,e){return l.getAttribute(e)}function pS(l,e){const t=cv(e);t.ns?l.hasAttributeNS(t.ns,t.local)&&l.removeAttributeNS(t.ns,t.local):l.hasAttribute(e)&&l.removeAttribute(e)}function f2(l,e,t){if(t==null)return pS(l,e);const o=cv(e);o.ns&&typeof t=="string"?l.setAttributeNS(o.ns,e,t):e==="id"?l.id=`${t}`:l.setAttribute(e,`${t}`)}function mC(l,e){Object.keys(e).forEach(t=>{f2(l,t,e[t])})}function vo(l,e,t){if(e==null){const o=l.attributes,c={};for(let d=0;d<o.length;d+=1)c[o[d].name]=o[d].value;return c}if(typeof e=="string"&&t===void 0)return l.getAttribute(e);typeof e=="object"?mC(l,e):f2(l,e,t)}function cv(l){if(l.indexOf(":")!==-1){const e=l.split(":");return{ns:Aa[e[0]],local:e[1]}}return{ns:null,local:l}}function Km(l){const e={};return Object.keys(l).forEach(t=>{const o=fS.includes(t)?t:tC(t);e[o]=l[t]}),e}function lv(l){const e={};return l.split(";").forEach(o=>{const c=o.trim();if(c){const d=c.split("=");d.length&&(e[d[0].trim()]=d[1]?d[1].trim():"")}}),e}function yC(l,e){return Object.keys(e).forEach(t=>{if(t==="class")l[t]=l[t]?`${l[t]} ${e[t]}`:e[t];else if(t==="style"){const o=typeof l[t]=="object",c=typeof e[t]=="object";let d,f;o&&c?(d=l[t],f=e[t]):o?(d=l[t],f=lv(e[t])):c?(d=lv(l[t]),f=e[t]):(d=lv(l[t]),f=lv(e[t])),l[t]=yC(d,f)}else l[t]=e[t]}),l}function vM(l,e,t={}){const o=t.offset||0,c=[],d=[];let f,v,b=null;for(let w=0;w<l.length;w+=1){f=d[w]=l[w];for(let _=0,A=e.length;_<A;_+=1){const P=e[_],V=P.start+o,q=P.end+o;w>=V&&w<q&&(typeof f=="string"?f=d[w]={t:l[w],attrs:P.attrs}:f.attrs=yC(yC({},f.attrs),P.attrs),t.includeAnnotationIndices&&(f.annotations==null&&(f.annotations=[]),f.annotations.push(_)))}v=d[w-1],v?Gn(f)&&Gn(v)?(b=b,JSON.stringify(f.attrs)===JSON.stringify(v.attrs)?b.t+=f.t:(c.push(b),b=f)):Gn(f)||Gn(v)?(b=b,c.push(b),b=f):b=(b||"")+f:b=f}return b!=null&&c.push(b),c}function gS(l,e){return l?l.filter(t=>t.start<e&&e<=t.end):[]}function nN(l,e,t){return l?l.filter(o=>e>=o.start&&e<o.end||t>o.start&&t<=o.end||o.start>=e&&o.end<t):[]}function rN(l,e,t){return l&&l.forEach(o=>{o.start<e&&o.end>=e?o.end+=t:o.start>=e&&(o.start+=t,o.end+=t)}),l}function bC(l){return l.replace(/ /g,"\xA0")}var uv;(function(l){l.emptyObject=Object.freeze({}),l.emptyArray=Object.freeze([]);function e(_){return _==null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"}l.isPrimitive=e;function t(_){return Array.isArray(_)}l.isArray=t;function o(_){return!e(_)&&!t(_)}l.isObject=o;function c(_,A){if(_===A)return!0;if(e(_)||e(A))return!1;const P=t(_),V=t(A);return P!==V?!1:P&&V?f(_,A):v(_,A)}l.deepEqual=c;function d(_){return e(_)?_:t(_)?b(_):w(_)}l.deepCopy=d;function f(_,A){if(_===A)return!0;if(_.length!==A.length)return!1;for(let P=0,V=_.length;P<V;P+=1)if(!c(_[P],A[P]))return!1;return!0}function v(_,A){if(_===A)return!0;for(const P in _)if(!(P in A))return!1;for(const P in A)if(!(P in _))return!1;for(const P in _)if(!c(_[P],A[P]))return!1;return!0}function b(_){const A=new Array(_.length);for(let P=0,V=_.length;P<V;P+=1)A[P]=d(_[P]);return A}function w(_){const A={};return Object.keys(_).forEach(P=>{A[P]=d(_[P])}),A}})(uv||(uv={}));var vS;(function(l){function e(w){const _="data:";return w.substr(0,_.length)===_}l.isDataUrl=e;function t(w,_){if(!w||e(w)){setTimeout(()=>_(null,w));return}const A=()=>{_(new Error(`Failed to load image: ${w}`))},P=window.FileReader?q=>{if(q.status===200){const ee=new FileReader;ee.onload=ge=>{const _e=ge.target.result;_(null,_e)},ee.onerror=A,ee.readAsDataURL(q.response)}else A()}:q=>{const ee=ge=>{const ke=[];for(let Se=0;Se<ge.length;Se+=32768)ke.push(String.fromCharCode.apply(null,ge.subarray(Se,Se+32768)));return ke.join("")};if(q.status===200){let ge=w.split(".").pop()||"png";ge==="svg"&&(ge="svg+xml");const _e=`data:image/${ge};base64,`,ke=new Uint8Array(q.response),Se=_e+btoa(ee(ke));_(null,Se)}else A()},V=new XMLHttpRequest;V.responseType=window.FileReader?"blob":"arraybuffer",V.open("GET",w,!0),V.addEventListener("error",A),V.addEventListener("load",()=>P(V)),V.send()}l.imageToDataUri=t;function o(w){let _=w.replace(/\s/g,"");_=decodeURIComponent(_);const A=_.indexOf(","),P=_.slice(0,A),V=P.split(":")[1].split(";")[0],q=_.slice(A+1);let ee;P.indexOf("base64")>=0?ee=atob(q):ee=unescape(encodeURIComponent(q));const ge=new Uint8Array(ee.length);for(let _e=0;_e<ee.length;_e+=1)ge[_e]=ee.charCodeAt(_e);return new Blob([ge],{type:V})}l.dataUriToBlob=o;function c(w,_){const A=window.navigator.msSaveBlob;if(A)A(w,_);else{const P=window.URL.createObjectURL(w),V=document.createElement("a");V.href=P,V.download=_,document.body.appendChild(V),V.click(),document.body.removeChild(V),window.URL.revokeObjectURL(P)}}l.downloadBlob=c;function d(w,_){const A=o(w);c(A,_)}l.downloadDataUri=d;function f(w){const _=w.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return _&&_[2]?_[2].replace(/\s+/," ").split(" "):null}function v(w){const _=parseFloat(w);return Number.isNaN(_)?null:_}function b(w,_={}){let A=null;const P=Se=>(A==null&&(A=f(w)),A!=null?v(A[Se]):null),V=Se=>{const Ue=w.match(Se);return Ue&&Ue[2]?v(Ue[2]):null};let q=_.width;if(q==null&&(q=V(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),q==null&&(q=P(2)),q==null)throw new Error("Can not parse width from svg string");let ee=_.height;if(ee==null&&(ee=V(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),ee==null&&(ee=P(3)),ee==null)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(w).replace(/'/g,"%27").replace(/"/g,"%22")}`}l.svgToDataUrl=b})(vS||(vS={}));let dv;const mM={px(l){return l},mm(l){return dv*l},cm(l){return dv*l*10},in(l){return dv*l*25.4},pt(l){return dv*(25.4*l/72)},pc(l){return dv*(25.4*l/6)}};var xC;(function(l){function e(o,c,d){const f=G()("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:o+(d||""),height:c+(d||"")}).appendTo(document.body),v={width:f.width()||0,height:f.height()||0};return f.remove(),v}l.measure=e;function t(o,c){dv==null&&(dv=e("1","1","mm").width);const d=c?mM[c]:null;return d?d(o):o}l.toPx=t})(xC||(xC={}));const p2=function(){let l;const e=window;if(e!=null&&(l=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame,l!=null&&(l=l.bind(e))),l==null){let t=0;l=o=>{const c=new Date().getTime(),d=Math.max(0,16-(c-t)),f=setTimeout(()=>{o(c+d)},d);return t=c+d,f}}return l}(),CC=function(){let l;const e=window;return e!=null&&(l=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.msCancelAnimationFrame||e.msCancelRequestAnimationFrame||e.oCancelAnimationFrame||e.oCancelRequestAnimationFrame||e.mozCancelAnimationFrame||e.mozCancelRequestAnimationFrame,l&&(l=l.bind(e))),l==null&&(l=clearTimeout),l}(),NP=/-(.)/g;function IP(l){return l.replace(NP,(e,t)=>t.toUpperCase())}const mS={},yM=["Webkit","ms","Moz","O"],Xg=document?document.createElement("div").style:{};function RP(l){for(let e=0;e<yM.length;e+=1){const t=yM[e]+l;if(t in Xg)return t}return null}function bM(l){const e=IP(l);if(mS[e]==null){const t=e.charAt(0).toUpperCase()+e.slice(1);mS[e]=e in Xg?e:RP(t)}return mS[e]}function kP(l,e,t){const o=bM(e);o!=null&&(l[o]=t),l[e]=t}function wC(l,e){const t=l.ownerDocument&&l.ownerDocument.defaultView&&l.ownerDocument.defaultView.opener?l.ownerDocument.defaultView.getComputedStyle(l,null):window.getComputedStyle(l,null);return t&&e?t.getPropertyValue(e)||t[e]:t}function LP(l){const e=wC(l);return e!=null&&(e.overflow==="scroll"||e.overflow==="auto")}const xM=function(){const l=document;return l.selection?function(){l.selection.empty()}:window.getSelection?function(){const e=window.getSelection();e&&(e.empty?e.empty():e.removeAllRanges&&e.removeAllRanges())}:function(){}}();var ki;(function(l){function e(o){return 180*o/Math.PI%360}l.toDeg=e,l.toRad=function(o,c=!1){return(c?o:o%360)*Math.PI/180};function t(o){return o%360+(o<0?360:0)}l.normalize=t})(ki||(ki={}));function qp(l,e=0){return Number.isInteger(l)?l:+l.toFixed(e)}function yS(l,e){let t,o;if(e==null?(o=l??1,t=0):(o=e,t=l??0),o<t){const c=t;t=o,o=c}return Math.floor(Math.random()*(o-t+1)+t)}function Zg(l,e,t){return Number.isNaN(l)?NaN:Number.isNaN(e)||Number.isNaN(t)?0:e<t?l<e?e:l>t?t:l:l<t?t:l>e?e:l}function g2(l,e){return e*Math.round(l/e)}function EC(l,e){return e!=null&&l!=null&&e.x>=l.x&&e.x<=l.x+l.width&&e.y>=l.y&&e.y<=l.y+l.height}function v2(l,e){const t=l.x-e.x,o=l.y-e.y;return t*t+o*o}class Jf{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class Ve extends Jf{constructor(e,t){super(),this.x=e??0,this.y=t??0}get[Symbol.toStringTag](){return Ve.toStringTag}round(e=0){return this.x=qp(this.x,e),this.y=qp(this.y,e),this}add(e,t){const o=Ve.create(e,t);return this.x+=o.x,this.y+=o.y,this}update(e,t){const o=Ve.create(e,t);return this.x=o.x,this.y=o.y,this}translate(e,t){const o=Ve.create(e,t);return this.x+=o.x,this.y+=o.y,this}rotate(e,t){const o=Ve.rotate(this,e,t);return this.x=o.x,this.y=o.y,this}scale(e,t,o=new Ve){const c=Ve.create(o);return this.x=c.x+e*(this.x-c.x),this.y=c.y+t*(this.y-c.y),this}closest(e){if(e.length===1)return Ve.create(e[0]);let t=null,o=1/0;return e.forEach(c=>{const d=this.squaredDistance(c);d<o&&(t=c,o=d)}),t?Ve.create(t):null}distance(e){return Math.sqrt(this.squaredDistance(e))}squaredDistance(e){const t=Ve.create(e),o=this.x-t.x,c=this.y-t.y;return o*o+c*c}manhattanDistance(e){const t=Ve.create(e);return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(e=new Ve){const t=Ve.create(e),o=-(t.y-this.y),c=t.x-this.x;let d=Math.atan2(o,c);return d<0&&(d=2*Math.PI+d),180*d/Math.PI}angleBetween(e,t){if(this.equals(e)||this.equals(t))return NaN;let o=this.theta(t)-this.theta(e);return o<0&&(o+=360),o}vectorAngle(e){return new Ve(0,0).angleBetween(this,e)}toPolar(e){return this.update(Ve.toPolar(this,e)),this}changeInAngle(e,t,o=new Ve){return this.clone().translate(-e,-t).theta(o)-this.theta(o)}adhereToRect(e){return EC(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}bearing(e){const t=Ve.create(e),o=ki.toRad(this.y),c=ki.toRad(t.y),d=this.x,f=t.x,v=ki.toRad(f-d),b=Math.sin(v)*Math.cos(c),w=Math.cos(o)*Math.sin(c)-Math.sin(o)*Math.cos(c)*Math.cos(v),_=ki.toDeg(Math.atan2(b,w)),A=["NE","E","SE","S","SW","W","NW","N"];let P=_-22.5;return P<0&&(P+=360),P=parseInt(P/45,10),A[P]}cross(e,t){if(e!=null&&t!=null){const o=Ve.create(e),c=Ve.create(t);return(c.x-this.x)*(o.y-this.y)-(c.y-this.y)*(o.x-this.x)}return NaN}dot(e){const t=Ve.create(e);return this.x*t.x+this.y*t.y}diff(e,t){if(typeof e=="number")return new Ve(this.x-e,this.y-t);const o=Ve.create(e);return new Ve(this.x-o.x,this.y-o.y)}lerp(e,t){const o=Ve.create(e);return new Ve((1-t)*this.x+t*o.x,(1-t)*this.y+t*o.y)}normalize(e=1){const t=e/this.magnitude();return this.scale(t,t)}move(e,t){const o=Ve.create(e),c=ki.toRad(o.theta(this));return this.translate(Math.cos(c)*t,-Math.sin(c)*t)}reflection(e){return Ve.create(e).move(this,this.distance(e))}snapToGrid(e,t){return this.x=g2(this.x,e),this.y=g2(this.y,t??e),this}equals(e){const t=Ve.create(e);return t!=null&&t.x===this.x&&t.y===this.y}clone(){return Ve.clone(this)}toJSON(){return Ve.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.x=="number"&&typeof c.y=="number"&&typeof c.toPolar=="function"}l.isPoint=e})(Ve||(Ve={})),function(l){function e(o){return o!=null&&typeof o=="object"&&typeof o.x=="number"&&typeof o.y=="number"}l.isPointLike=e;function t(o){return o!=null&&Array.isArray(o)&&o.length===2&&typeof o[0]=="number"&&typeof o[1]=="number"}l.isPointData=t}(Ve||(Ve={})),function(l){function e(A,P){return A==null||typeof A=="number"?new l(A,P):t(A)}l.create=e;function t(A){return l.isPoint(A)?new l(A.x,A.y):Array.isArray(A)?new l(A[0],A[1]):new l(A.x,A.y)}l.clone=t;function o(A){return l.isPoint(A)?{x:A.x,y:A.y}:Array.isArray(A)?{x:A[0],y:A[1]}:{x:A.x,y:A.y}}l.toJSON=o;function c(A,P,V=new l){let q=Math.abs(A*Math.cos(P)),ee=Math.abs(A*Math.sin(P));const ge=t(V),_e=ki.normalize(ki.toDeg(P));return _e<90?ee=-ee:_e<180?(q=-q,ee=-ee):_e<270&&(q=-q),new l(ge.x+q,ge.y+ee)}l.fromPolar=c;function d(A,P=new l){const V=t(A),q=t(P),ee=V.x-q.x,ge=V.y-q.y;return new l(Math.sqrt(ee*ee+ge*ge),ki.toRad(q.theta(V)))}l.toPolar=d;function f(A,P){return A===P?!0:A!=null&&P!=null?A.x===P.x&&A.y===P.y:!1}l.equals=f;function v(A,P){if(A==null&&P!=null||A!=null&&P==null||A!=null&&P!=null&&A.length!==P.length)return!1;if(A!=null&&P!=null){for(let V=0,q=A.length;V<q;V+=1)if(!f(A[V],P[V]))return!1}return!0}l.equalPoints=v;function b(A,P,V,q){return new l(yS(A,P),yS(V,q))}l.random=b;function w(A,P,V){const q=ki.toRad(ki.normalize(-P)),ee=Math.sin(q),ge=Math.cos(q);return _(A,ge,ee,V)}l.rotate=w;function _(A,P,V,q=new l){const ee=t(A),ge=t(q),_e=ee.x-ge.x,ke=ee.y-ge.y,Se=_e*P-ke*V,Ue=ke*P+_e*V;return new l(Se+ge.x,Ue+ge.y)}l.rotateEx=_}(Ve||(Ve={}));class Rn extends Jf{constructor(e,t,o,c){super(),this.x=e??0,this.y=t??0,this.width=o??0,this.height=c??0}get[Symbol.toStringTag](){return Rn.toStringTag}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new Ve(this.x,this.y)}get topLeft(){return new Ve(this.x,this.y)}get topCenter(){return new Ve(this.x+this.width/2,this.y)}get topRight(){return new Ve(this.x+this.width,this.y)}get center(){return new Ve(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new Ve(this.x,this.y+this.height)}get bottomCenter(){return new Ve(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new Ve(this.x+this.width,this.y+this.height)}get corner(){return new Ve(this.x+this.width,this.y+this.height)}get rightMiddle(){return new Ve(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new Ve(this.x,this.y+this.height/2)}get topLine(){return new fr(this.topLeft,this.topRight)}get rightLine(){return new fr(this.topRight,this.bottomRight)}get bottomLine(){return new fr(this.bottomLeft,this.bottomRight)}get leftLine(){return new fr(this.topLeft,this.bottomLeft)}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(e){if(!e)return this.clone();const t=ki.toRad(e),o=Math.abs(Math.sin(t)),c=Math.abs(Math.cos(t)),d=this.width*c+this.height*o,f=this.width*o+this.height*c;return new Rn(this.x+(this.width-d)/2,this.y+(this.height-f)/2,d,f)}round(e=0){return this.x=qp(this.x,e),this.y=qp(this.y,e),this.width=qp(this.width,e),this.height=qp(this.height,e),this}add(e,t,o,c){const d=Rn.create(e,t,o,c),f=Math.min(this.x,d.x),v=Math.min(this.y,d.y),b=Math.max(this.x+this.width,d.x+d.width),w=Math.max(this.y+this.height,d.y+d.height);return this.x=f,this.y=v,this.width=b-f,this.height=w-v,this}update(e,t,o,c){const d=Rn.create(e,t,o,c);return this.x=d.x,this.y=d.y,this.width=d.width,this.height=d.height,this}inflate(e,t){const o=e,c=t??e;return this.x-=o,this.y-=c,this.width+=2*o,this.height+=2*c,this}snapToGrid(e,t){const o=this.origin.snapToGrid(e,t),c=this.corner.snapToGrid(e,t);return this.x=o.x,this.y=o.y,this.width=c.x-o.x,this.height=c.y-o.y,this}translate(e,t){const o=Ve.create(e,t);return this.x+=o.x,this.y+=o.y,this}scale(e,t,o=new Ve){const c=this.origin.scale(e,t,o);return this.x=c.x,this.y=c.y,this.width*=e,this.height*=t,this}rotate(e,t=this.getCenter()){if(e!==0){const o=ki.toRad(e),c=Math.cos(o),d=Math.sin(o);let f=this.getOrigin(),v=this.getTopRight(),b=this.getBottomRight(),w=this.getBottomLeft();f=Ve.rotateEx(f,c,d,t),v=Ve.rotateEx(v,c,d,t),b=Ve.rotateEx(b,c,d,t),w=Ve.rotateEx(w,c,d,t);const _=new Rn(f.x,f.y,0,0);_.add(v.x,v.y,0,0),_.add(b.x,b.y,0,0),_.add(w.x,w.y,0,0),this.update(_)}return this}rotate90(){const e=(this.width-this.height)/2;this.x+=e,this.y-=e;const t=this.width;return this.width=this.height,this.height=t,this}moveAndExpand(e){const t=Rn.clone(e);return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this}getMaxScaleToFit(e,t=this.center){const o=Rn.clone(e),c=t.x,d=t.y;let f=1/0,v=1/0,b=1/0,w=1/0,_=1/0,A=1/0,P=1/0,V=1/0;const q=o.topLeft;q.x<c&&(f=(this.x-c)/(q.x-c)),q.y<d&&(_=(this.y-d)/(q.y-d));const ee=o.bottomRight;ee.x>c&&(v=(this.x+this.width-c)/(ee.x-c)),ee.y>d&&(A=(this.y+this.height-d)/(ee.y-d));const ge=o.topRight;ge.x>c&&(b=(this.x+this.width-c)/(ge.x-c)),ge.y<d&&(P=(this.y-d)/(ge.y-d));const _e=o.bottomLeft;return _e.x<c&&(w=(this.x-c)/(_e.x-c)),_e.y>d&&(V=(this.y+this.height-d)/(_e.y-d)),{sx:Math.min(f,v,b,w),sy:Math.min(_,A,P,V)}}getMaxUniformScaleToFit(e,t=this.center){const o=this.getMaxScaleToFit(e,t);return Math.min(o.sx,o.sy)}containsPoint(e,t){return EC(this,Ve.create(e,t))}containsRect(e,t,o,c){const d=Rn.create(e,t,o,c),f=this.x,v=this.y,b=this.width,w=this.height,_=d.x,A=d.y,P=d.width,V=d.height;return b===0||w===0||P===0||V===0?!1:_>=f&&A>=v&&_+P<=f+b&&A+V<=v+w}intersectsWithLine(e){const t=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],o=[],c=[];return t.forEach(d=>{const f=e.intersectsWithLine(d);f!==null&&c.indexOf(f.toString())<0&&(o.push(f),c.push(f.toString()))}),o.length>0?o:null}intersectsWithLineFromCenterToPoint(e,t){const o=Ve.clone(e),c=this.center;let d=null;t!=null&&t!==0&&o.rotate(t,c);const f=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],v=new fr(c,o);for(let b=f.length-1;b>=0;b-=1){const w=f[b].intersectsWithLine(v);if(w!==null){d=w;break}}return d&&t!=null&&t!==0&&d.rotate(-t,c),d}intersectsWithRect(e,t,o,c){const d=Rn.create(e,t,o,c);if(!this.isIntersectWithRect(d))return null;const f=this.origin,v=this.corner,b=d.origin,w=d.corner,_=Math.max(f.x,b.x),A=Math.max(f.y,b.y);return new Rn(_,A,Math.min(v.x,w.x)-_,Math.min(v.y,w.y)-A)}isIntersectWithRect(e,t,o,c){const d=Rn.create(e,t,o,c),f=this.origin,v=this.corner,b=d.origin,w=d.corner;return!(w.x<=f.x||w.y<=f.y||b.x>=v.x||b.y>=v.y)}normalize(){let e=this.x,t=this.y,o=this.width,c=this.height;return this.width<0&&(e=this.x+this.width,o=-this.width),this.height<0&&(t=this.y+this.height,c=-this.height),this.x=e,this.y=t,this.width=o,this.height=c,this}union(e){const t=Rn.clone(e),o=this.origin,c=this.corner,d=t.origin,f=t.corner,v=Math.min(o.x,d.x),b=Math.min(o.y,d.y),w=Math.max(c.x,f.x),_=Math.max(c.y,f.y);return new Rn(v,b,w-v,_-b)}getNearestSideToPoint(e){const t=Ve.clone(e),o=t.x-this.x,c=this.x+this.width-t.x,d=t.y-this.y,f=this.y+this.height-t.y;let v=o,b="left";return c<v&&(v=c,b="right"),d<v&&(v=d,b="top"),f<v&&(b="bottom"),b}getNearestPointToPoint(e){const t=Ve.clone(e);if(this.containsPoint(t))switch(this.getNearestSideToPoint(t)){case"right":return new Ve(this.x+this.width,t.y);case"left":return new Ve(this.x,t.y);case"bottom":return new Ve(t.x,this.y+this.height);case"top":return new Ve(t.x,this.y);default:break}return t.adhereToRect(this)}equals(e){return e!=null&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}clone(){return new Rn(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.x=="number"&&typeof c.y=="number"&&typeof c.width=="number"&&typeof c.height=="number"&&typeof c.inflate=="function"&&typeof c.moveAndExpand=="function"}l.isRectangle=e})(Rn||(Rn={})),function(l){function e(t){return t!=null&&typeof t=="object"&&typeof t.x=="number"&&typeof t.y=="number"&&typeof t.width=="number"&&typeof t.height=="number"}l.isRectangleLike=e}(Rn||(Rn={})),function(l){function e(f,v,b,w){return f==null||typeof f=="number"?new l(f,v,b,w):t(f)}l.create=e;function t(f){return l.isRectangle(f)?f.clone():Array.isArray(f)?new l(f[0],f[1],f[2],f[3]):new l(f.x,f.y,f.width,f.height)}l.clone=t;function o(f){return new l(0,0,f.width,f.height)}l.fromSize=o;function c(f,v){return new l(f.x,f.y,v.width,v.height)}l.fromPositionAndSize=c;function d(f){return new l(f.x-f.a,f.y-f.b,2*f.a,2*f.b)}l.fromEllipse=d}(Rn||(Rn={}));class fr extends Jf{constructor(e,t,o,c){super(),typeof e=="number"&&typeof t=="number"?(this.start=new Ve(e,t),this.end=new Ve(o,c)):(this.start=Ve.create(e),this.end=Ve.create(t))}get[Symbol.toStringTag](){return fr.toStringTag}get center(){return new Ve((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}getCenter(){return this.center}round(e=0){return this.start.round(e),this.end.round(e),this}translate(e,t){return typeof e=="number"?(this.start.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.end.translate(e)),this}rotate(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this}scale(e,t,o){return this.start.scale(e,t,o),this.end.scale(e,t,o),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const e=this.start.x-this.end.x,t=this.start.y-this.end.y;return e*e+t*t}setLength(e){const t=this.length();if(!t)return this;const o=e/t;return this.scale(o,o,this.start)}parallel(e){const t=this.clone();if(!t.isDifferentiable())return t;const{start:o,end:c}=t,d=o.clone().rotate(270,c),f=c.clone().rotate(90,o);return o.move(f,e),c.move(d,e),t}vector(){return new Ve(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const e=new Ve(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)}bbox(){const e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),o=Math.max(this.start.x,this.end.x),c=Math.max(this.start.y,this.end.y);return new Rn(e,t,o-e,c-t)}bearing(){return this.start.bearing(this.end)}closestPoint(e){return this.pointAt(this.closestPointNormalizedLength(e))}closestPointLength(e){return this.closestPointNormalizedLength(e)*this.length()}closestPointTangent(e){return this.tangentAt(this.closestPointNormalizedLength(e))}closestPointNormalizedLength(e){const t=this.vector().dot(new fr(this.start,e).vector()),o=Math.min(1,Math.max(0,t/this.squaredLength()));return Number.isNaN(o)?0:o}pointAt(e){const t=this.start,o=this.end;return e<=0?t.clone():e>=1?o.clone():t.lerp(o,e)}pointAtLength(e){const t=this.start,o=this.end;let c=!0;e<0&&(c=!1,e=-e);const d=this.length();if(e>=d)return c?o.clone():t.clone();const f=(c?e:d-e)/d;return this.pointAt(f)}divideAt(e){const t=this.pointAt(e);return[new fr(this.start,t),new fr(t,this.end)]}divideAtLength(e){const t=this.pointAtLength(e);return[new fr(this.start,t),new fr(t,this.end)]}containsPoint(e){const t=this.start,o=this.end;if(t.cross(e,o)!==0)return!1;const c=this.length();return!(new fr(t,e).length()>c||new fr(e,o).length()>c)}intersect(e,t){const o=e.intersectsWithLine(this,t);return o?Array.isArray(o)?o:[o]:null}intersectsWithLine(e){const t=new Ve(this.end.x-this.start.x,this.end.y-this.start.y),o=new Ve(e.end.x-e.start.x,e.end.y-e.start.y),c=t.x*o.y-t.y*o.x,d=new Ve(e.start.x-this.start.x,e.start.y-this.start.y),f=d.x*o.y-d.y*o.x,v=d.x*t.y-d.y*t.x;if(c===0||f*c<0||v*c<0)return null;if(c>0){if(f>c||v>c)return null}else if(f<c||v<c)return null;return new Ve(this.start.x+f*t.x/c,this.start.y+f*t.y/c)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(e){const t=Ve.clone(e),o=this.start,c=this.end;return((c.x-o.x)*(t.y-o.y)-(c.y-o.y)*(t.x-o.x))/this.length()}pointSquaredDistance(e,t){const o=Ve.create(e,t);return this.closestPoint(o).squaredDistance(o)}pointDistance(e,t){const o=Ve.create(e,t);return this.closestPoint(o).distance(o)}tangentAt(e){if(!this.isDifferentiable())return null;const t=this.start,o=this.end,c=this.pointAt(e),d=new fr(t,o);return d.translate(c.x-t.x,c.y-t.y),d}tangentAtLength(e){if(!this.isDifferentiable())return null;const t=this.start,o=this.end,c=this.pointAtLength(e),d=new fr(t,o);return d.translate(c.x-t.x,c.y-t.y),d}relativeCcw(e,t){const o=Ve.create(e,t);let c=o.x-this.start.x,d=o.y-this.start.y;const f=this.end.x-this.start.x,v=this.end.y-this.start.y;let b=c*v-d*f;return b===0&&(b=c*f+d*v,b>0&&(c-=f,d-=v,b=c*f+d*v,b<0&&(b=0))),b<0?-1:b>0?1:0}equals(e){return e!=null&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y}clone(){return new fr(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;try{if((o==null||o===l.toStringTag)&&Ve.isPoint(c.start)&&Ve.isPoint(c.end)&&typeof c.vector=="function"&&typeof c.bearing=="function"&&typeof c.parallel=="function"&&typeof c.intersect=="function")return!0}catch{return!1}return!1}l.isLine=e})(fr||(fr={}));class bd extends Jf{constructor(e,t,o,c){super(),this.x=e??0,this.y=t??0,this.a=o??0,this.b=c??0}get[Symbol.toStringTag](){return bd.toStringTag}get center(){return new Ve(this.x,this.y)}bbox(){return Rn.fromEllipse(this)}getCenter(){return this.center}inflate(e,t){const o=e,c=t??e;return this.a+=2*o,this.b+=2*c,this}normalizedDistance(e,t){const o=Ve.create(e,t),c=o.x-this.x,d=o.y-this.y,f=this.a,v=this.b;return c*c/(f*f)+d*d/(v*v)}containsPoint(e,t){return this.normalizedDistance(e,t)<=1}intersectsWithLine(e){const t=[],o=this.a,c=this.b,d=e.start,f=e.end,v=e.vector(),b=d.diff(new Ve(this.x,this.y)),w=new Ve(v.x/(o*o),v.y/(c*c)),_=new Ve(b.x/(o*o),b.y/(c*c)),A=v.dot(w),P=v.dot(_),V=b.dot(_)-1,q=P*P-A*V;if(q<0)return null;if(q>0){const ee=Math.sqrt(q),ge=(-P-ee)/A,_e=(-P+ee)/A;if((ge<0||ge>1)&&(_e<0||_e>1))return null;ge>=0&&ge<=1&&t.push(d.lerp(f,ge)),_e>=0&&_e<=1&&t.push(d.lerp(f,_e))}else{const ee=-P/A;if(ee>=0&&ee<=1)t.push(d.lerp(f,ee));else return null}return t}intersectsWithLineFromCenterToPoint(e,t=0){const o=Ve.clone(e);t&&o.rotate(t,this.getCenter());const c=o.x-this.x,d=o.y-this.y;let f;if(c===0)return f=this.bbox().getNearestPointToPoint(o),t?f.rotate(-t,this.getCenter()):f;const v=d/c,b=v*v,w=this.a*this.a,_=this.b*this.b;let A=Math.sqrt(1/(1/w+b/_));A=c<0?-A:A;const P=v*A;return f=new Ve(this.x+A,this.y+P),t?f.rotate(-t,this.getCenter()):f}tangentTheta(e){const t=Ve.clone(e),o=t.x,c=t.y,d=this.a,f=this.b,v=this.bbox().center,b=v.x,w=v.y,_=30,A=o>v.x+d/2,P=o<v.x-d/2;let V,q;return A||P?(q=o>v.x?c-_:c+_,V=d*d/(o-b)-d*d*(c-w)*(q-w)/(f*f*(o-b))+b):(V=c>v.y?o+_:o-_,q=f*f/(c-w)-f*f*(o-b)*(V-b)/(d*d*(c-w))+w),new Ve(V,q).theta(t)}scale(e,t){return this.a*=e,this.b*=t,this}rotate(e,t){const o=Rn.fromEllipse(this);o.rotate(e,t);const c=bd.fromRect(o);return this.a=c.a,this.b=c.b,this.x=c.x,this.y=c.y,this}translate(e,t){const o=Ve.create(e,t);return this.x+=o.x,this.y+=o.y,this}equals(e){return e!=null&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b}clone(){return new bd(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.x=="number"&&typeof c.y=="number"&&typeof c.a=="number"&&typeof c.b=="number"&&typeof c.inflate=="function"&&typeof c.normalizedDistance=="function"}l.isEllipse=e})(bd||(bd={})),function(l){function e(c,d,f,v){return c==null||typeof c=="number"?new l(c,d,f,v):t(c)}l.create=e;function t(c){return l.isEllipse(c)?c.clone():Array.isArray(c)?new l(c[0],c[1],c[2],c[3]):new l(c.x,c.y,c.a,c.b)}l.parse=t;function o(c){const d=c.center;return new l(d.x,d.y,c.width/2,c.height/2)}l.fromRect=o}(bd||(bd={}));class da extends Jf{constructor(e){if(super(),e!=null){if(typeof e=="string")return da.parse(e);this.points=e.map(t=>Ve.create(t))}else this.points=[]}get[Symbol.toStringTag](){return da.toStringTag}get start(){return this.points.length===0?null:this.points[0]}get end(){return this.points.length===0?null:this.points[this.points.length-1]}scale(e,t,o=new Ve){return this.points.forEach(c=>c.scale(e,t,o)),this}rotate(e,t){return this.points.forEach(o=>o.rotate(e,t)),this}translate(e,t){const o=Ve.create(e,t);return this.points.forEach(c=>c.translate(o.x,o.y)),this}bbox(){if(this.points.length===0)return new Rn;let e=1/0,t=-1/0,o=1/0,c=-1/0;const d=this.points;for(let f=0,v=d.length;f<v;f+=1){const b=d[f],w=b.x,_=b.y;w<e&&(e=w),w>t&&(t=w),_<o&&(o=_),_>c&&(c=_)}return new Rn(e,o,t-e,c-o)}closestPoint(e){const t=this.closestPointLength(e);return this.pointAtLength(t)}closestPointLength(e){const t=this.points,o=t.length;if(o===0||o===1)return 0;let c=0,d=0,f=1/0;for(let v=0,b=o-1;v<b;v+=1){const w=new fr(t[v],t[v+1]),_=w.length(),A=w.closestPointNormalizedLength(e),V=w.pointAt(A).squaredDistance(e);V<f&&(f=V,d=c+A*_),c+=_}return d}closestPointNormalizedLength(e){const t=this.closestPointLength(e);if(t===0)return 0;const o=this.length();return o===0?0:t/o}closestPointTangent(e){const t=this.closestPointLength(e);return this.tangentAtLength(t)}containsPoint(e){if(this.points.length===0)return!1;const t=Ve.clone(e),o=t.x,c=t.y,d=this.points,f=d.length;let v=f-1,b=0;for(let w=0;w<f;w+=1){const _=d[v],A=d[w];if(t.equals(_))return!0;const P=new fr(_,A);if(P.containsPoint(e))return!0;if(c<=_.y&&c>A.y||c>_.y&&c<=A.y){const V=_.x-o>A.x-o?_.x-o:A.x-o;if(V>=0){const q=new Ve(o+V,c),ee=new fr(e,q);P.intersectsWithLine(ee)&&(b+=1)}}v=w}return b%2===1}intersectsWithLine(e){const t=[];for(let o=0,c=this.points.length-1;o<c;o+=1){const d=this.points[o],f=this.points[o+1],v=e.intersectsWithLine(new fr(d,f));v&&t.push(v)}return t.length>0?t:null}isDifferentiable(){for(let e=0,t=this.points.length-1;e<t;e+=1){const o=this.points[e],c=this.points[e+1];if(new fr(o,c).isDifferentiable())return!0}return!1}length(){let e=0;for(let t=0,o=this.points.length-1;t<o;t+=1){const c=this.points[t],d=this.points[t+1];e+=c.distance(d)}return e}pointAt(e){const t=this.points,o=t.length;if(o===0)return null;if(o===1||e<=0)return t[0].clone();if(e>=1)return t[o-1].clone();const d=this.length()*e;return this.pointAtLength(d)}pointAtLength(e){const t=this.points,o=t.length;if(o===0)return null;if(o===1)return t[0].clone();let c=!0;e<0&&(c=!1,e=-e);let d=0;for(let v=0,b=o-1;v<b;v+=1){const w=c?v:b-1-v,_=t[w],A=t[w+1],P=new fr(_,A),V=_.distance(A);if(e<=d+V)return P.pointAtLength((c?1:-1)*(e-d));d+=V}return(c?t[o-1]:t[0]).clone()}tangentAt(e){const o=this.points.length;if(o===0||o===1)return null;e<0&&(e=0),e>1&&(e=1);const d=this.length()*e;return this.tangentAtLength(d)}tangentAtLength(e){const t=this.points,o=t.length;if(o===0||o===1)return null;let c=!0;e<0&&(c=!1,e=-e);let d,f=0;for(let v=0,b=o-1;v<b;v+=1){const w=c?v:b-1-v,_=t[w],A=t[w+1],P=new fr(_,A),V=_.distance(A);if(P.isDifferentiable()){if(e<=f+V)return P.tangentAtLength((c?1:-1)*(e-f));d=P}f+=V}if(d){const v=c?1:0;return d.tangentAt(v)}return null}simplify(e={}){const t=this.points;if(t.length<3)return this;const o=e.threshold||0;let c=0;for(;t[c+2];){const d=c,f=c+1,v=c+2,b=t[d],w=t[f],_=t[v];new fr(b,_).closestPoint(w).distance(w)<=o?t.splice(f,1):c+=1}return this}toHull(){const e=this.points,t=e.length;if(t===0)return new da;let o=e[0];for(let P=1;P<t;P+=1)(e[P].y<o.y||e[P].y===o.y&&e[P].x>o.x)&&(o=e[P]);const c=[];for(let P=0;P<t;P+=1){let V=o.theta(e[P]);V===0&&(V=360),c.push([e[P],P,V])}if(c.sort((P,V)=>{let q=P[2]-V[2];return q===0&&(q=V[1]-P[1]),q}),c.length>2){const P=c[c.length-1];c.unshift(P)}const d={},f=[],v=P=>`${P[0].toString()}@${P[1]}`;for(;c.length!==0;){const P=c.pop(),V=P[0];if(d[v(P)])continue;let q=!1;for(;!q;)if(f.length<2)f.push(P),q=!0;else{const ee=f.pop(),ge=ee[0],_e=f.pop(),ke=_e[0],Se=ke.cross(ge,V);if(Se<0)f.push(_e),f.push(ee),f.push(P),q=!0;else if(Se===0){const Qe=ge.angleBetween(ke,V);Math.abs(Qe-180)<1e-10||ge.equals(V)||ke.equals(ge)?(d[v(ee)]=ge,f.push(_e)):Math.abs((Qe+1)%360-1)<1e-10&&(f.push(_e),c.push(ee))}else d[v(ee)]=ge,f.push(_e)}}f.length>2&&f.pop();let b,w=-1;for(let P=0,V=f.length;P<V;P+=1){const q=f[P][1];(b===void 0||q<b)&&(b=q,w=P)}let _=[];if(w>0){const P=f.slice(w),V=f.slice(0,w);_=P.concat(V)}else _=f;const A=[];for(let P=0,V=_.length;P<V;P+=1)A.push(_[P][0]);return new da(A)}equals(e){return e==null||e.points.length!==this.points.length?!1:e.points.every((t,o)=>t.equals(this.points[o]))}clone(){return new da(this.points.map(e=>e.clone()))}toJSON(){return this.points.map(e=>e.toJSON())}serialize(){return this.points.map(e=>`${e.x}, ${e.y}`).join(" ")}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.toHull=="function"&&typeof c.simplify=="function"}l.isPolyline=e})(da||(da={})),function(l){function e(t){const o=t.trim();if(o==="")return new l;const c=[],d=o.split(/\s*,\s*|\s+/);for(let f=0,v=d.length;f<v;f+=2)c.push({x:+d[f],y:+d[f+1]});return new l(c)}l.parse=e}(da||(da={}));class Vs extends Jf{constructor(e,t,o,c){super(),this.PRECISION=3,this.start=Ve.create(e),this.controlPoint1=Ve.create(t),this.controlPoint2=Ve.create(o),this.end=Ve.create(c)}get[Symbol.toStringTag](){return Vs.toStringTag}bbox(){const e=this.start,t=this.controlPoint1,o=this.controlPoint2,c=this.end,d=e.x,f=e.y,v=t.x,b=t.y,w=o.x,_=o.y,A=c.x,P=c.y,V=[],q=[],ee=[[],[]];let ge,_e,ke,Se,Ue,Qe,bt,Ot;for(let Rr=0;Rr<2;Rr+=1){if(Rr===0?(_e=6*d-12*v+6*w,ge=-3*d+9*v-9*w+3*A,ke=3*v-3*d):(_e=6*f-12*b+6*_,ge=-3*f+9*b-9*_+3*P,ke=3*b-3*f),Math.abs(ge)<1e-12){if(Math.abs(_e)<1e-12)continue;Se=-ke/_e,Se>0&&Se<1&&q.push(Se);continue}bt=_e*_e-4*ke*ge,Ot=Math.sqrt(bt),!(bt<0)&&(Ue=(-_e+Ot)/(2*ge),Ue>0&&Ue<1&&q.push(Ue),Qe=(-_e-Ot)/(2*ge),Qe>0&&Qe<1&&q.push(Qe))}let Kt,Fn,Cn,Sn=q.length;const Ln=Sn;for(;Sn;)Sn-=1,Se=q[Sn],Cn=1-Se,Kt=Cn*Cn*Cn*d+3*Cn*Cn*Se*v+3*Cn*Se*Se*w+Se*Se*Se*A,ee[0][Sn]=Kt,Fn=Cn*Cn*Cn*f+3*Cn*Cn*Se*b+3*Cn*Se*Se*_+Se*Se*Se*P,ee[1][Sn]=Fn,V[Sn]={X:Kt,Y:Fn};q[Ln]=0,q[Ln+1]=1,V[Ln]={X:d,Y:f},V[Ln+1]={X:A,Y:P},ee[0][Ln]=d,ee[1][Ln]=f,ee[0][Ln+1]=A,ee[1][Ln+1]=P,q.length=Ln+2,ee[0].length=Ln+2,ee[1].length=Ln+2,V.length=Ln+2;const Jr=Math.min.apply(null,ee[0]),ii=Math.min.apply(null,ee[1]),Ht=Math.max.apply(null,ee[0]),Pn=Math.max.apply(null,ee[1]);return new Rn(Jr,ii,Ht-Jr,Pn-ii)}closestPoint(e,t={}){return this.pointAtT(this.closestPointT(e,t))}closestPointLength(e,t={}){const o=this.getOptions(t);return this.lengthAtT(this.closestPointT(e,o),o)}closestPointNormalizedLength(e,t={}){const o=this.getOptions(t),c=this.closestPointLength(e,o);if(!c)return 0;const d=this.length(o);return d===0?0:c/d}closestPointT(e,t={}){const o=this.getPrecision(t),c=this.getDivisions(t),d=Math.pow(10,-o);let f=null,v=0,b=0,w=0,_=0,A=0,P=null;const V=c.length;let q=V>0?1/V:0;for(c.forEach((ee,ge)=>{const _e=ee.start.distance(e),ke=ee.end.distance(e),Se=_e+ke;(P==null||Se<P)&&(f=ee,v=ge*q,b=(ge+1)*q,w=_e,_=ke,P=Se,A=ee.endpointDistance())});;){const ee=w?Math.abs(w-_)/w:0,ge=_!=null?Math.abs(w-_)/_:0,_e=ee<d||ge<d,ke=w?w<A*d:!0,Se=_?_<A*d:!0;if(_e||(ke||Se))return w<=_?v:b;const Qe=f.divide(.5);q/=2;const bt=Qe[0].start.distance(e),Ot=Qe[0].end.distance(e),Kt=bt+Ot,Fn=Qe[1].start.distance(e),Cn=Qe[1].end.distance(e),Sn=Fn+Cn;Kt<=Sn?(f=Qe[0],b-=q,w=bt,_=Ot):(f=Qe[1],v+=q,w=Fn,_=Cn)}}closestPointTangent(e,t={}){return this.tangentAtT(this.closestPointT(e,t))}containsPoint(e,t={}){return this.toPolyline(t).containsPoint(e)}divideAt(e,t={}){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);const o=this.tAt(e,t);return this.divideAtT(o)}divideAtLength(e,t={}){const o=this.tAtLength(e,t);return this.divideAtT(o)}divide(e){return this.divideAtT(e)}divideAtT(e){const t=this.start,o=this.controlPoint1,c=this.controlPoint2,d=this.end;if(e<=0)return[new Vs(t,t,t,t),new Vs(t,o,c,d)];if(e>=1)return[new Vs(t,o,c,d),new Vs(d,d,d,d)];const f=this.getSkeletonPoints(e),v=f.startControlPoint1,b=f.startControlPoint2,w=f.divider,_=f.dividerControlPoint1,A=f.dividerControlPoint2;return[new Vs(t,v,b,w),new Vs(w,_,A,d)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(e){const t=this.start,o=this.controlPoint1,c=this.controlPoint2,d=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:c.clone()};if(e>=1)return{startControlPoint1:o.clone(),startControlPoint2:c.clone(),divider:d.clone(),dividerControlPoint1:d.clone(),dividerControlPoint2:d.clone()};const f=new fr(t,o).pointAt(e),v=new fr(o,c).pointAt(e),b=new fr(c,d).pointAt(e),w=new fr(f,v).pointAt(e),_=new fr(v,b).pointAt(e),A=new fr(w,_).pointAt(e);return{startControlPoint1:f,startControlPoint2:w,divider:A,dividerControlPoint1:_,dividerControlPoint2:b}}getSubdivisions(e={}){const t=this.getPrecision(e);let o=[new Vs(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(t===0)return o;let c=this.endpointDistance();const d=Math.pow(10,-t);let f=0;for(;;){f+=1;const v=[];o.forEach(_=>{const A=_.divide(.5);v.push(A[0],A[1])});const b=v.reduce((_,A)=>_+A.endpointDistance(),0),w=b!==0?(b-c)/b:0;if(f>1&&w<d)return v;o=v,c=b}}length(e={}){return this.getDivisions(e).reduce((o,c)=>o+c.endpointDistance(),0)}lengthAtT(e,t={}){if(e<=0)return 0;const o=t.precision===void 0?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:o})}pointAt(e,t={}){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const o=this.tAt(e,t);return this.pointAtT(o)}pointAtLength(e,t={}){const o=this.tAtLength(e,t);return this.pointAtT(o)}pointAtT(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider}isDifferentiable(){const e=this.start,t=this.controlPoint1,o=this.controlPoint2,c=this.end;return!(e.equals(t)&&t.equals(o)&&o.equals(c))}tangentAt(e,t={}){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);const o=this.tAt(e,t);return this.tangentAtT(o)}tangentAtLength(e,t={}){if(!this.isDifferentiable())return null;const o=this.tAtLength(e,t);return this.tangentAtT(o)}tangentAtT(e){if(!this.isDifferentiable())return null;e<0&&(e=0),e>1&&(e=1);const t=this.getSkeletonPoints(e),o=t.startControlPoint2,c=t.dividerControlPoint1,d=t.divider,f=new fr(o,c);return f.translate(d.x-o.x,d.y-o.y),f}getPrecision(e={}){return e.precision==null?this.PRECISION:e.precision}getDivisions(e={}){if(e.subdivisions!=null)return e.subdivisions;const t=this.getPrecision(e);return this.getSubdivisions({precision:t})}getOptions(e={}){const t=this.getPrecision(e),o=this.getDivisions(e);return{precision:t,subdivisions:o}}tAt(e,t={}){if(e<=0)return 0;if(e>=1)return 1;const o=this.getOptions(t),d=this.length(o)*e;return this.tAtLength(d,o)}tAtLength(e,t={}){let o=!0;e<0&&(o=!1,e=-e);const c=this.getPrecision(t),d=this.getDivisions(t),f={precision:c,subdivisions:d};let v=null,b,w,_=0,A=0,P=0;const V=d.length;let q=V>0?1/V:0;for(let _e=0;_e<V;_e+=1){const ke=o?_e:V-1-_e,Se=d[_e],Ue=Se.endpointDistance();if(e<=P+Ue){v=Se,b=ke*q,w=(ke+1)*q,_=o?e-P:Ue+P-e,A=o?Ue+P-e:e-P;break}P+=Ue}if(v==null)return o?1:0;const ee=this.length(f),ge=Math.pow(10,-c);for(;;){let _e;if(_e=ee!==0?_/ee:0,_e<ge)return b;if(_e=ee!==0?A/ee:0,_e<ge)return w;let ke,Se;const Ue=v.divide(.5);q/=2;const Qe=Ue[0].endpointDistance(),bt=Ue[1].endpointDistance();_<=Qe?(v=Ue[0],w-=q,ke=_,Se=Qe-ke):(v=Ue[1],b+=q,ke=_-Qe,Se=bt-ke),_=ke,A=Se}}toPoints(e={}){const t=this.getDivisions(e),o=[t[0].start.clone()];return t.forEach(c=>o.push(c.end.clone())),o}toPolyline(e={}){return new da(this.toPoints(e))}scale(e,t,o){return this.start.scale(e,t,o),this.controlPoint1.scale(e,t,o),this.controlPoint2.scale(e,t,o),this.end.scale(e,t,o),this}rotate(e,t){return this.start.rotate(e,t),this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?(this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return e!=null&&this.start.equals(e.start)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)&&this.end.equals(e.end)}clone(){return new Vs(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;try{if((o==null||o===l.toStringTag)&&Ve.isPoint(c.start)&&Ve.isPoint(c.controlPoint1)&&Ve.isPoint(c.controlPoint2)&&Ve.isPoint(c.end)&&typeof c.toPoints=="function"&&typeof c.toPolyline=="function")return!0}catch{return!1}return!1}l.isCurve=e})(Vs||(Vs={})),function(l){function e(c){const d=c.length,f=[],v=[];let b=2;f[0]=c[0]/b;for(let w=1;w<d;w+=1)v[w]=1/b,b=(w<d-1?4:3.5)-v[w],f[w]=(c[w]-f[w-1])/b;for(let w=1;w<d;w+=1)f[d-w-1]-=v[d-w]*f[d-w];return f}function t(c){const d=c.map(P=>Ve.clone(P)),f=[],v=[],b=d.length-1;if(b===1)return f[0]=new Ve((2*d[0].x+d[1].x)/3,(2*d[0].y+d[1].y)/3),v[0]=new Ve(2*f[0].x-d[0].x,2*f[0].y-d[0].y),[f,v];const w=[];for(let P=1;P<b-1;P+=1)w[P]=4*d[P].x+2*d[P+1].x;w[0]=d[0].x+2*d[1].x,w[b-1]=(8*d[b-1].x+d[b].x)/2;const _=e(w);for(let P=1;P<b-1;P+=1)w[P]=4*d[P].y+2*d[P+1].y;w[0]=d[0].y+2*d[1].y,w[b-1]=(8*d[b-1].y+d[b].y)/2;const A=e(w);for(let P=0;P<b;P+=1)f.push(new Ve(_[P],A[P])),P<b-1?v.push(new Ve(2*d[P+1].x-_[P+1],2*d[P+1].y-A[P+1])):v.push(new Ve((d[b].x+_[b-1])/2,(d[b].y+A[b-1])/2));return[f,v]}function o(c){if(c==null||Array.isArray(c)&&c.length<2)throw new Error("At least 2 points are required");const d=t(c),f=[];for(let v=0,b=d[0].length;v<b;v+=1){const w=new Ve(d[0][v].x,d[0][v].y),_=new Ve(d[1][v].x,d[1][v].y);f.push(new l(c[v],w,_,c[v+1]))}return f}l.throughPoints=o}(Vs||(Vs={}));class qm extends Jf{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(e,t){if(e<=0)return 0;const o=this.length();return e>=1?o:o*e}divideAtT(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class Nc extends qm{constructor(e,t){super(),fr.isLine(e)?this.endPoint=e.end.clone().round(2):this.endPoint=Ve.create(e,t).round(2)}get type(){return"L"}get line(){return new fr(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[new Nc(t[0]),new Nc(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[new Nc(t[0]),new Nc(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return this.previousSegment==null?!1:!this.start.equals(this.end)}clone(){return new Nc(this.end)}scale(e,t,o){return this.end.scale(e,t,o),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}(function(l){function e(...t){const o=t.length,c=t[0];if(fr.isLine(c))return new l(c);if(Ve.isPointLike(c))return o===1?new l(c):t.map(f=>new l(f));if(o===2)return new l(+t[0],+t[1]);const d=[];for(let f=0;f<o;f+=2){const v=+t[f],b=+t[f+1];d.push(new l(v,b))}return d}l.create=e})(Nc||(Nc={}));class hv extends qm{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new fr(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[t[1].isDifferentiable()?new Nc(t[0]):this.clone(),new Nc(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new Nc(t[0]):this.clone(),new Nc(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}scale(){return this}rotate(){return this}translate(){return this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}clone(){return new hv}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}(function(l){function e(){return new l}l.create=e})(hv||(hv={}));class Yg extends qm{constructor(e,t){super(),this.isVisible=!1,this.isSubpathStart=!0,fr.isLine(e)||Vs.isCurve(e)?this.endPoint=e.end.clone().round(2):this.endPoint=Ve.create(e,t).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(e,t,o){return this.end.scale(e,t,o),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}clone(){return new Yg(this.end)}equals(e){return this.type===e.type&&this.end.equals(e.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}(function(l){function e(...t){const o=t.length,c=t[0];if(fr.isLine(c))return new l(c);if(Vs.isCurve(c))return new l(c);if(Ve.isPointLike(c)){if(o===1)return new l(c);const f=[];for(let v=0;v<o;v+=1)v===0?f.push(new l(t[v])):f.push(new Nc(t[v]));return f}if(o===2)return new l(+t[0],+t[1]);const d=[];for(let f=0;f<o;f+=2){const v=+t[f],b=+t[f+1];f===0?d.push(new l(v,b)):d.push(new Nc(v,b))}return d}l.create=e})(Yg||(Yg={}));class Cu extends qm{constructor(e,t,o,c,d,f){super(),Vs.isCurve(e)?(this.controlPoint1=e.controlPoint1.clone().round(2),this.controlPoint2=e.controlPoint2.clone().round(2),this.endPoint=e.end.clone().round(2)):typeof e=="number"?(this.controlPoint1=new Ve(e,t).round(2),this.controlPoint2=new Ve(o,c).round(2),this.endPoint=new Ve(d,f).round(2)):(this.controlPoint1=Ve.create(e).round(2),this.controlPoint2=Ve.create(t).round(2),this.endPoint=Ve.create(o).round(2))}get type(){return"C"}get curve(){return new Vs(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(e){return this.curve.closestPoint(e)}closestPointLength(e){return this.curve.closestPointLength(e)}closestPointNormalizedLength(e){return this.curve.closestPointNormalizedLength(e)}closestPointTangent(e){return this.curve.closestPointTangent(e)}length(){return this.curve.length()}divideAt(e,t={}){const o=this.curve.divideAt(e,t);return[new Cu(o[0]),new Cu(o[1])]}divideAtLength(e,t={}){const o=this.curve.divideAtLength(e,t);return[new Cu(o[0]),new Cu(o[1])]}divideAtT(e){const t=this.curve.divideAtT(e);return[new Cu(t[0]),new Cu(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.curve.pointAt(e)}pointAtLength(e){return this.curve.pointAtLength(e)}tangentAt(e){return this.curve.tangentAt(e)}tangentAtLength(e){return this.curve.tangentAtLength(e)}isDifferentiable(){if(!this.previousSegment)return!1;const e=this.start,t=this.controlPoint1,o=this.controlPoint2,c=this.end;return!(e.equals(t)&&t.equals(o)&&o.equals(c))}scale(e,t,o){return this.controlPoint1.scale(e,t,o),this.controlPoint2.scale(e,t,o),this.end.scale(e,t,o),this}rotate(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}clone(){return new Cu(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.controlPoint1,t=this.controlPoint2,o=this.end;return[this.type,e.x,e.y,t.x,t.y,o.x,o.y].join(" ")}}(function(l){function e(...t){const o=t.length,c=t[0];if(Vs.isCurve(c))return new l(c);if(Ve.isPointLike(c)){if(o===3)return new l(t[0],t[1],t[2]);const f=[];for(let v=0;v<o;v+=3)f.push(new l(t[v],t[v+1],t[v+2]));return f}if(o===6)return new l(t[0],t[1],t[2],t[3],t[4],t[5]);const d=[];for(let f=0;f<o;f+=6)d.push(new l(t[f],t[f+1],t[f+2],t[f+3],t[f+4],t[f+5]));return d}l.create=e})(Cu||(Cu={}));function Jm(l,e,t){return{x:l*Math.cos(t)-e*Math.sin(t),y:l*Math.sin(t)+e*Math.cos(t)}}function bS(l,e,t,o,c,d){const f=.3333333333333333,v=2/3;return[f*l+v*t,f*e+v*o,f*c+v*t,f*d+v*o,c,d]}function xS(l,e,t,o,c,d,f,v,b,w){const _=Math.PI*120/180,A=Math.PI/180*(+c||0);let P=[],V,q,ee,ge,_e;if(w)q=w[0],ee=w[1],ge=w[2],_e=w[3];else{V=Jm(l,e,-A),l=V.x,e=V.y,V=Jm(v,b,-A),v=V.x,b=V.y;const ii=(l-v)/2,Ht=(e-b)/2;let Pn=ii*ii/(t*t)+Ht*Ht/(o*o);Pn>1&&(Pn=Math.sqrt(Pn),t=Pn*t,o=Pn*o);const Rr=t*t,Ro=o*o,as=(d===f?-1:1)*Math.sqrt(Math.abs((Rr*Ro-Rr*Ht*Ht-Ro*ii*ii)/(Rr*Ht*Ht+Ro*ii*ii)));ge=as*t*Ht/o+(l+v)/2,_e=as*-o*ii/t+(e+b)/2,q=Math.asin((e-_e)/o),ee=Math.asin((b-_e)/o),q=l<ge?Math.PI-q:q,ee=v<ge?Math.PI-ee:ee,q<0&&(q=Math.PI*2+q),ee<0&&(ee=Math.PI*2+ee),f&&q>ee&&(q-=Math.PI*2),!f&&ee>q&&(ee-=Math.PI*2)}let ke=ee-q;if(Math.abs(ke)>_){const ii=ee,Ht=v,Pn=b;ee=q+_*(f&&ee>q?1:-1),v=ge+t*Math.cos(ee),b=_e+o*Math.sin(ee),P=xS(v,b,t,o,c,0,f,Ht,Pn,[ee,ii,ge,_e])}ke=ee-q;const Se=Math.cos(q),Ue=Math.sin(q),Qe=Math.cos(ee),bt=Math.sin(ee),Ot=Math.tan(ke/4),Kt=4/3*(t*Ot),Fn=4/3*(o*Ot),Cn=[l,e],Sn=[l+Kt*Ue,e-Fn*Se],Ln=[v+Kt*bt,b-Fn*Qe],Jr=[v,b];if(Sn[0]=2*Cn[0]-Sn[0],Sn[1]=2*Cn[1]-Sn[1],w)return[Sn,Ln,Jr].concat(P);{P=[Sn,Ln,Jr].concat(P).join().split(",");const ii=[],Ht=P.length;for(let Pn=0;Pn<Ht;Pn+=1)ii[Pn]=Pn%2?Jm(+P[Pn-1],+P[Pn],A).y:Jm(+P[Pn],+P[Pn+1],A).x;return ii}}function CM(l){if(!l)return null;const e=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,t=new RegExp(`([a-z])[${e},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${e}]*,?[${e}]*)+)`,"ig"),o=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${e}]*,?[${e}]*`,"ig"),c={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},d=[];return l.replace(t,(f,v,b)=>{const w=[];let _=v.toLowerCase();b.replace(o,(P,V)=>(V&&w.push(+V),P)),_==="m"&&w.length>2&&(d.push([v,...w.splice(0,2)]),_="l",v=v==="m"?"l":"L");const A=c[_];for(;w.length>=A&&(d.push([v,...w.splice(0,A)]),!!A););return f}),d}function CS(l){const e=CM(l);if(!e||!e.length)return[["M",0,0]];let t=0,o=0,c=0,d=0;const f=[];for(let v=0,b=e.length;v<b;v+=1){const w=[];f.push(w);const _=e[v],A=_[0];if(A!==A.toUpperCase())switch(w[0]=A.toUpperCase(),w[0]){case"A":w[1]=_[1],w[2]=_[2],w[3]=_[3],w[4]=_[4],w[5]=_[5],w[6]=+_[6]+t,w[7]=+_[7]+o;break;case"V":w[1]=+_[1]+o;break;case"H":w[1]=+_[1]+t;break;case"M":c=+_[1]+t,d=+_[2]+o;for(let P=1,V=_.length;P<V;P+=1)w[P]=+_[P]+(P%2?t:o);break;default:for(let P=1,V=_.length;P<V;P+=1)w[P]=+_[P]+(P%2?t:o);break}else for(let P=0,V=_.length;P<V;P+=1)w[P]=_[P];switch(w[0]){case"Z":t=+c,o=+d;break;case"H":t=w[1];break;case"V":o=w[1];break;case"M":c=w[w.length-2],d=w[w.length-1],t=w[w.length-2],o=w[w.length-1];break;default:t=w[w.length-2],o=w[w.length-1];break}}return f}function wM(l){const e=CS(l),t={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function o(b,w,_){let A,P;if(!b)return["C",w.x,w.y,w.x,w.y,w.x,w.y];switch(b[0]in{T:1,Q:1}||(w.qx=null,w.qy=null),b[0]){case"M":w.X=b[1],w.Y=b[2];break;case"A":return parseFloat(b[1])===0||parseFloat(b[2])===0?["L",b[6],b[7]]:["C"].concat(xS.apply(0,[w.x,w.y].concat(b.slice(1))));case"S":return _==="C"||_==="S"?(A=w.x*2-w.bx,P=w.y*2-w.by):(A=w.x,P=w.y),["C",A,P].concat(b.slice(1));case"T":return _==="Q"||_==="T"?(w.qx=w.x*2-w.qx,w.qy=w.y*2-w.qy):(w.qx=w.x,w.qy=w.y),["C"].concat(bS(w.x,w.y,w.qx,w.qy,b[1],b[2]));case"Q":return w.qx=b[1],w.qy=b[2],["C"].concat(bS(w.x,w.y,b[1],b[2],b[3],b[4]));case"H":return["L"].concat(b[1],w.y);case"V":return["L"].concat(w.x,b[1]);case"L":break;case"Z":break;default:break}return b}function c(b,w){if(b[w].length>7){b[w].shift();const _=b[w];for(;_.length;)d[w]="A",w+=1,b.splice(w,0,["C"].concat(_.splice(0,6)));b.splice(w,1),v=e.length}}const d=[];let f="",v=e.length;for(let b=0;b<v;b+=1){let w="";e[b]&&(w=e[b][0]),w!=="C"&&(d[b]=w,b>0&&(f=d[b-1])),e[b]=o(e[b],t,f),d[b]!=="A"&&w==="C"&&(d[b]="C"),c(e,b);const _=e[b],A=_.length;t.x=_[A-2],t.y=_[A-1],t.bx=parseFloat(_[A-4])||t.x,t.by=parseFloat(_[A-3])||t.y}return(!e[0][0]||e[0][0]!=="M")&&e.unshift(["M",0,0]),e}function wS(l){return wM(l).map(e=>e.map(t=>typeof t=="string"?t:qp(t,2))).join(",").split(",").join(" ")}const ES=new RegExp("^[\\s\\dLMCZz,.]*$");function SS(l){return typeof l!="string"?!1:ES.test(l)}function m2(l,e){return(l%e+e)%e}function Qm(l,e,t,o,c){const d=[],f=l[l.length-1],v=e!=null&&e>0,b=e||0;if(o&&v){l=l.slice();const A=l[0],P=new Ve(f.x+(A.x-f.x)/2,f.y+(A.y-f.y)/2);l.splice(0,0,P)}let w=l[0],_=1;for(t?d.push("M",w.x,w.y):d.push("L",w.x,w.y);_<(o?l.length:l.length-1);){let A=l[m2(_,l.length)],P=w.x-A.x,V=w.y-A.y;if(v&&(P!==0||V!==0)&&(c==null||c.indexOf(_-1)<0)){let q=Math.sqrt(P*P+V*V);const ee=P*Math.min(b,q/2)/q,ge=V*Math.min(b,q/2)/q,_e=A.x+ee,ke=A.y+ge;d.push("L",_e,ke);let Se=l[m2(_+1,l.length)];for(;_<l.length-2&&Math.round(Se.x-A.x)===0&&Math.round(Se.y-A.y)===0;)Se=l[m2(_+2,l.length)],_+=1;P=Se.x-A.x,V=Se.y-A.y,q=Math.max(1,Math.sqrt(P*P+V*V));const Ue=P*Math.min(b,q/2)/q,Qe=V*Math.min(b,q/2)/q,bt=A.x+Ue,Ot=A.y+Qe;d.push("Q",A.x,A.y,bt,Ot),A=new Ve(bt,Ot)}else d.push("L",A.x,A.y);w=A,_+=1}return o?d.push("Z"):d.push("L",f.x,f.y),d.map(A=>typeof A=="string"?A:+A.toFixed(3)).join(" ")}function _S(l,e={}){const t=[];return l&&l.length&&l.forEach(o=>{Array.isArray(o)?t.push({x:o[0],y:o[1]}):t.push({x:o.x,y:o.y})}),Qm(t,e.round,e.initialMove==null||e.initialMove,e.close,e.exclude)}function y2(l,e,t,o,c=0,d=0,f=0,v,b){if(t===0||o===0)return[];v-=l,b-=e,t=Math.abs(t),o=Math.abs(o);const w=-v/2,_=-b/2,A=Math.cos(c*Math.PI/180),P=Math.sin(c*Math.PI/180),V=A*w+P*_,q=-1*P*w+A*_,ee=V*V,ge=q*q,_e=t*t,ke=o*o,Se=ee/_e+ge/ke;let Ue;if(Se>1)t=Math.sqrt(Se)*t,o=Math.sqrt(Se)*o,Ue=0;else{let dp=1;d===f&&(dp=-1),Ue=dp*Math.sqrt((_e*ke-_e*ge-ke*ee)/(_e*ge+ke*ee))}const Qe=Ue*t*q/o,bt=-1*Ue*o*V/t,Ot=A*Qe-P*bt+v/2,Kt=P*Qe+A*bt+b/2;let Fn=Math.atan2((q-bt)/o,(V-Qe)/t)-Math.atan2(0,1),Cn=Fn>=0?Fn:2*Math.PI+Fn;Fn=Math.atan2((-q-bt)/o,(-V-Qe)/t)-Math.atan2((q-bt)/o,(V-Qe)/t);let Sn=Fn>=0?Fn:2*Math.PI+Fn;f===0&&Sn>0?Sn-=2*Math.PI:f!==0&&Sn<0&&(Sn+=2*Math.PI);const Ln=Sn*2/Math.PI,Jr=Math.ceil(Ln<0?-1*Ln:Ln),ii=Sn/Jr,Ht=8/3*Math.sin(ii/4)*Math.sin(ii/4)/Math.sin(ii/2),Pn=A*t,Rr=A*o,Ro=P*t,as=P*o;let Oa=Math.cos(Cn),_s=Math.sin(Cn),r1=-Ht*(Pn*_s+as*Oa),Tu=-Ht*(Ro*_s-Rr*Oa),b0=0,x0=0;const up=[];for(let dp=0;dp<Jr;dp+=1){Cn+=ii,Oa=Math.cos(Cn),_s=Math.sin(Cn),b0=Pn*Oa-as*_s+Ot,x0=Ro*Oa+Rr*_s+Kt;const OA=-Ht*(Pn*_s+as*Oa),PA=-Ht*(Ro*_s-Rr*Oa),hp=dp*6;up[hp]=Number(r1+l),up[hp+1]=Number(Tu+e),up[hp+2]=Number(b0-OA+l),up[hp+3]=Number(x0-PA+e),up[hp+4]=Number(b0+l),up[hp+5]=Number(x0+e),r1=b0+OA,Tu=x0+PA}return up.map(dp=>+dp.toFixed(2))}function EM(l,e,t,o,c=0,d=0,f=0,v,b){const w=[],_=y2(l,e,t,o,c,d,f,v,b);if(_!=null)for(let A=0,P=_.length;A<P;A+=6)w.push("C",_[A],_[A+1],_[A+2],_[A+3],_[A+4],_[A+5]);return w.join(" ")}class Nr extends Jf{constructor(e){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(e))if(fr.isLine(e[0])||Vs.isCurve(e[0])){let t=null;e.forEach((c,d)=>{d===0&&this.appendSegment(Nr.createSegment("M",c.start)),t!=null&&!t.end.equals(c.start)&&this.appendSegment(Nr.createSegment("M",c.start)),fr.isLine(c)?this.appendSegment(Nr.createSegment("L",c.end)):Vs.isCurve(c)&&this.appendSegment(Nr.createSegment("C",c.controlPoint1,c.controlPoint2,c.end)),t=c})}else e.forEach(o=>{o.isSegment&&this.appendSegment(o)});else e!=null&&(fr.isLine(e)?(this.appendSegment(Nr.createSegment("M",e.start)),this.appendSegment(Nr.createSegment("L",e.end))):Vs.isCurve(e)?(this.appendSegment(Nr.createSegment("M",e.start)),this.appendSegment(Nr.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):da.isPolyline(e)?e.points&&e.points.length&&e.points.forEach((t,o)=>{const c=o===0?Nr.createSegment("M",t):Nr.createSegment("L",t);this.appendSegment(c)}):e.isSegment&&this.appendSegment(e))}get[Symbol.toStringTag](){return Nr.toStringTag}get start(){const e=this.segments,t=e.length;if(t===0)return null;for(let o=0;o<t;o+=1){const c=e[o];if(c.isVisible)return c.start}return e[t-1].end}get end(){const e=this.segments,t=e.length;if(t===0)return null;for(let o=t-1;o>=0;o-=1){const c=e[o];if(c.isVisible)return c.end}return e[t-1].end}moveTo(...e){return this.appendSegment(Yg.create.call(null,...e))}lineTo(...e){return this.appendSegment(Nc.create.call(null,...e))}curveTo(...e){return this.appendSegment(Cu.create.call(null,...e))}arcTo(e,t,o,c,d,f,v){const b=this.end||new Ve,w=typeof f=="number"?y2(b.x,b.y,e,t,o,c,d,f,v):y2(b.x,b.y,e,t,o,c,d,f.x,f.y);if(w!=null)for(let _=0,A=w.length;_<A;_+=6)this.curveTo(w[_],w[_+1],w[_+2],w[_+3],w[_+4],w[_+5]);return this}quadTo(e,t,o,c){const d=this.end||new Ve,f=["M",d.x,d.y];if(typeof e=="number")f.push("Q",e,t,o,c);else{const b=t;f.push("Q",e.x,e.y,b.x,b.y)}const v=Nr.parse(f.join(" "));return this.appendSegment(v.segments.slice(1)),this}close(){return this.appendSegment(hv.create())}drawPoints(e,t={}){const o=_S(e,t),c=Nr.parse(o);c&&c.segments&&this.appendSegment(c.segments)}bbox(){const e=this.segments,t=e.length;if(t===0)return null;let o;for(let d=0;d<t;d+=1){const f=e[d];if(f.isVisible){const v=f.bbox();v!=null&&(o=o?o.union(v):v)}}if(o!=null)return o;const c=e[t-1];return new Rn(c.end.x,c.end.y,0,0)}appendSegment(e){const t=this.segments.length;let o=t!==0?this.segments[t-1]:null,c;const d=null;if(Array.isArray(e))for(let f=0,v=e.length;f<v;f+=1){const b=e[f];c=this.prepareSegment(b,o,d),this.segments.push(c),o=c}else e!=null&&e.isSegment&&(c=this.prepareSegment(e,o,d),this.segments.push(c));return this}insertSegment(e,t){const o=this.segments.length;if(e<0&&(e=o+e+1),e>o||e<0)throw new Error("Index out of range.");let c,d=null,f=null;if(o!==0&&(e>=1?(d=this.segments[e-1],f=d.nextSegment):(d=null,f=this.segments[0])),!Array.isArray(t))c=this.prepareSegment(t,d,f),this.segments.splice(e,0,c);else for(let v=0,b=t.length;v<b;v+=1){const w=t[v];c=this.prepareSegment(w,d,f),this.segments.splice(e+v,0,c),d=c}return this}removeSegment(e){const t=this.fixIndex(e),o=this.segments.splice(t,1)[0],c=o.previousSegment,d=o.nextSegment;return c&&(c.nextSegment=d),d&&(d.previousSegment=c),o.isSubpathStart&&d&&this.updateSubpathStartSegment(d),o}replaceSegment(e,t){const o=this.fixIndex(e);let c;const d=this.segments[o];let f=d.previousSegment;const v=d.nextSegment;let b=d.isSubpathStart;if(!Array.isArray(t))c=this.prepareSegment(t,f,v),this.segments.splice(o,1,c),b&&c.isSubpathStart&&(b=!1);else{this.segments.splice(e,1);for(let w=0,_=t.length;w<_;w+=1){const A=t[w];c=this.prepareSegment(A,f,v),this.segments.splice(e+w,0,c),f=c,b&&c.isSubpathStart&&(b=!1)}}b&&v&&this.updateSubpathStartSegment(v)}getSegment(e){const t=this.fixIndex(e);return this.segments[t]}fixIndex(e){const t=this.segments.length;if(t===0)throw new Error("Path has no segments.");let o=e;for(;o<0;)o=t+o;if(o>=t||o<0)throw new Error("Index out of range.");return o}segmentAt(e,t={}){const o=this.segmentIndexAt(e,t);return o?this.getSegment(o):null}segmentAtLength(e,t={}){const o=this.segmentIndexAtLength(e,t);return o?this.getSegment(o):null}segmentIndexAt(e,t={}){if(this.segments.length===0)return null;const o=Zg(e,0,1),c=this.getOptions(t),f=this.length(c)*o;return this.segmentIndexAtLength(f,c)}segmentIndexAtLength(e,t={}){const o=this.segments.length;if(o===0)return null;let c=!0;e<0&&(c=!1,e=-e);const d=this.getPrecision(t),f=this.getSubdivisions(t);let v=0,b=null;for(let w=0;w<o;w+=1){const _=c?w:o-1-w,A=this.segments[_],P=f[_],V=A.length({precision:d,subdivisions:P});if(A.isVisible){if(e<=v+V)return _;b=_}v+=V}return b}getSegmentSubdivisions(e={}){const t=this.getPrecision(e),o=[];for(let c=0,d=this.segments.length;c<d;c+=1){const v=this.segments[c].getSubdivisions({precision:t});o.push(v)}return o}updateSubpathStartSegment(e){let t=e.previousSegment,o=e;for(;o&&!o.isSubpathStart;)t!=null?o.subpathStartSegment=t.subpathStartSegment:o.subpathStartSegment=null,t=o,o=o.nextSegment}prepareSegment(e,t,o){e.previousSegment=t,e.nextSegment=o,t!=null&&(t.nextSegment=e),o!=null&&(o.previousSegment=e);let c=e;return e.isSubpathStart&&(e.subpathStartSegment=e,c=o),c!=null&&this.updateSubpathStartSegment(c),e}closestPoint(e,t={}){const o=this.closestPointT(e,t);return o?this.pointAtT(o):null}closestPointLength(e,t={}){const o=this.getOptions(t),c=this.closestPointT(e,o);return c?this.lengthAtT(c,o):0}closestPointNormalizedLength(e,t={}){const o=this.getOptions(t),c=this.closestPointLength(e,o);if(c===0)return 0;const d=this.length(o);return d===0?0:c/d}closestPointT(e,t={}){if(this.segments.length===0)return null;const o=this.getPrecision(t),c=this.getSubdivisions(t);let d,f=1/0;for(let v=0,b=this.segments.length;v<b;v+=1){const w=this.segments[v],_=c[v];if(w.isVisible){const A=w.closestPointT(e,{precision:o,subdivisions:_}),P=w.pointAtT(A),V=v2(P,e);V<f&&(d={segmentIndex:v,value:A},f=V)}}return d||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(e,t={}){if(this.segments.length===0)return null;const o=this.getPrecision(t),c=this.getSubdivisions(t);let d,f=1/0;for(let v=0,b=this.segments.length;v<b;v+=1){const w=this.segments[v],_=c[v];if(w.isDifferentiable()){const A=w.closestPointT(e,{precision:o,subdivisions:_}),P=w.pointAtT(A),V=v2(P,e);V<f&&(d=w.tangentAtT(A),f=V)}}return d||null}containsPoint(e,t={}){const o=this.toPolylines(t);if(!o)return!1;let c=0;for(let d=0,f=o.length;d<f;d+=1)o[d].containsPoint(e)&&(c+=1);return c%2===1}pointAt(e,t={}){if(this.segments.length===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const o=this.getOptions(t),d=this.length(o)*e;return this.pointAtLength(d,o)}pointAtLength(e,t={}){if(this.segments.length===0)return null;if(e===0)return this.start.clone();let o=!0;e<0&&(o=!1,e=-e);const c=this.getPrecision(t),d=this.getSubdivisions(t);let f,v=0;for(let w=0,_=this.segments.length;w<_;w+=1){const A=o?w:_-1-w,P=this.segments[A],V=d[A],q=P.length({precision:c,subdivisions:V});if(P.isVisible){if(e<=v+q)return P.pointAtLength((o?1:-1)*(e-v),{precision:c,subdivisions:V});f=P}v+=q}return f?o?f.end:f.start:this.segments[this.segments.length-1].end.clone()}pointAtT(e){const t=this.segments,o=t.length;if(o===0)return null;const c=e.segmentIndex;if(c<0)return t[0].pointAtT(0);if(c>=o)return t[o-1].pointAtT(1);const d=Zg(e.value,0,1);return t[c].pointAtT(d)}divideAt(e,t={}){if(this.segments.length===0)return null;const o=Zg(e,0,1),c=this.getOptions(t),f=this.length(c)*o;return this.divideAtLength(f,c)}divideAtLength(e,t={}){if(this.segments.length===0)return null;let o=!0;e<0&&(o=!1,e=-e);const c=this.getPrecision(t),d=this.getSubdivisions(t);let f=0,v,b,w,_,A;for(let Qe=0,bt=this.segments.length;Qe<bt;Qe+=1){const Ot=o?Qe:bt-1-Qe,Kt=this.getSegment(Ot),Fn=d[Ot],Cn={precision:c,subdivisions:Fn},Sn=Kt.length(Cn);if(Kt.isDifferentiable()&&(w=Kt,_=Ot,e<=f+Sn)){b=Ot,v=Kt.divideAtLength((o?1:-1)*(e-f),Cn);break}f+=Sn}if(!w)return null;v||(b=_,A=o?1:0,v=w.divideAtT(A));const P=this.clone(),V=b;P.replaceSegment(V,v);const q=V;let ee=V+1,ge=V+2;v[0].isDifferentiable()||(P.removeSegment(q),ee-=1,ge-=1);const _e=P.getSegment(ee).start;P.insertSegment(ee,Nr.createSegment("M",_e)),ge+=1,v[1].isDifferentiable()||(P.removeSegment(ge-1),ge-=1);const ke=ge-q-1;for(let Qe=ge,bt=P.segments.length;Qe<bt;Qe+=1){const Ot=this.getSegment(Qe-ke),Kt=P.getSegment(Qe);if(Kt.type==="Z"&&!Ot.subpathStartSegment.end.equals(Kt.subpathStartSegment.end)){const Fn=Nr.createSegment("L",Ot.end);P.replaceSegment(Qe,Fn)}}const Se=new Nr(P.segments.slice(0,ee)),Ue=new Nr(P.segments.slice(ee));return[Se,Ue]}intersectsWithLine(e,t={}){const o=this.toPolylines(t);if(o==null)return null;let c=null;for(let d=0,f=o.length;d<f;d+=1){const v=o[d],b=e.intersect(v);b&&(c==null&&(c=[]),Array.isArray(b)?c.push(...b):c.push(b))}return c}isDifferentiable(){for(let e=0,t=this.segments.length;e<t;e+=1)if(this.segments[e].isDifferentiable())return!0;return!1}isValid(){const e=this.segments;return e.length===0||e[0].type==="M"}length(e={}){if(this.segments.length===0)return 0;const t=this.getSubdivisions(e);let o=0;for(let c=0,d=this.segments.length;c<d;c+=1){const f=this.segments[c],v=t[c];o+=f.length({subdivisions:v})}return o}lengthAtT(e,t={}){const o=this.segments.length;if(o===0)return 0;let c=e.segmentIndex;if(c<0)return 0;let d=Zg(e.value,0,1);c>=o&&(c=o-1,d=1);const f=this.getPrecision(t),v=this.getSubdivisions(t);let b=0;for(let A=0;A<c;A+=1){const P=this.segments[A],V=v[A];b+=P.length({precision:f,subdivisions:V})}const w=this.segments[c],_=v[c];return b+=w.lengthAtT(d,{precision:f,subdivisions:_}),b}tangentAt(e,t={}){if(this.segments.length===0)return null;const o=Zg(e,0,1),c=this.getOptions(t),f=this.length(c)*o;return this.tangentAtLength(f,c)}tangentAtLength(e,t={}){if(this.segments.length===0)return null;let o=!0;e<0&&(o=!1,e=-e);const c=this.getPrecision(t),d=this.getSubdivisions(t);let f,v=0;for(let b=0,w=this.segments.length;b<w;b+=1){const _=o?b:w-1-b,A=this.segments[_],P=d[_],V=A.length({precision:c,subdivisions:P});if(A.isDifferentiable()){if(e<=v+V)return A.tangentAtLength((o?1:-1)*(e-v),{precision:c,subdivisions:P});f=A}v+=V}if(f){const b=o?1:0;return f.tangentAtT(b)}return null}tangentAtT(e){const t=this.segments.length;if(t===0)return null;const o=e.segmentIndex;if(o<0)return this.segments[0].tangentAtT(0);if(o>=t)return this.segments[t-1].tangentAtT(1);const c=Zg(e.value,0,1);return this.segments[o].tangentAtT(c)}getPrecision(e={}){return e.precision==null?this.PRECISION:e.precision}getSubdivisions(e={}){if(e.segmentSubdivisions==null){const t=this.getPrecision(e);return this.getSegmentSubdivisions({precision:t})}return e.segmentSubdivisions}getOptions(e={}){const t=this.getPrecision(e),o=this.getSubdivisions(e);return{precision:t,segmentSubdivisions:o}}toPoints(e={}){const t=this.segments,o=t.length;if(o===0)return null;const c=this.getSubdivisions(e),d=[];let f=[];for(let v=0;v<o;v+=1){const b=t[v];if(b.isVisible){const w=c[v];w.length>0?w.forEach(_=>f.push(_.start)):f.push(b.start)}else f.length>0&&(f.push(t[v-1].end),d.push(f),f=[])}return f.length>0&&(f.push(this.end),d.push(f)),d}toPolylines(e={}){const t=this.toPoints(e);return t?t.map(o=>new da(o)):null}scale(e,t,o){return this.segments.forEach(c=>c.scale(e,t,o)),this}rotate(e,t){return this.segments.forEach(o=>o.rotate(e,t)),this}translate(e,t){return typeof e=="number"?this.segments.forEach(o=>o.translate(e,t)):this.segments.forEach(o=>o.translate(e)),this}clone(){const e=new Nr;return this.segments.forEach(t=>e.appendSegment(t.clone())),e}equals(e){if(e==null)return!1;const t=this.segments,o=e.segments,c=t.length;if(o.length!==c)return!1;for(let d=0;d<c;d+=1){const f=t[d],v=o[d];if(f.type!==v.type||!f.equals(v))return!1}return!0}toJSON(){return this.segments.map(e=>e.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(e=>e.serialize()).join(" ")}toString(){return this.serialize()}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return!!((o==null||o===l.toStringTag)&&Array.isArray(c.segments)&&typeof c.moveTo=="function"&&typeof c.lineTo=="function"&&typeof c.curveTo=="function")}l.isPath=e})(Nr||(Nr={})),function(l){function e(o){if(!o)return new l;const c=new l,d=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,f=l.normalize(o).match(d);if(f!=null)for(let v=0,b=f.length;v<b;v+=1){const w=f[v],_=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,A=w.match(_);if(A!=null){const P=A[0],V=A.slice(1).map(ee=>+ee),q=t.call(null,P,...V);c.appendSegment(q)}}return c}l.parse=e;function t(o,...c){if(o==="M")return Yg.create.call(null,...c);if(o==="L")return Nc.create.call(null,...c);if(o==="C")return Cu.create.call(null,...c);if(o==="z"||o==="Z")return hv.create();throw new Error(`Invalid path segment type "${o}"`)}l.createSegment=t}(Nr||(Nr={})),function(l){l.normalize=wS,l.isValid=SS,l.drawArc=EM,l.drawPoints=_S,l.arcToCurves=y2}(Nr||(Nr={}));class sr{constructor(e,t,o){if(!e)throw new TypeError("Invalid element to create vector");let c;if(sr.isVector(e))c=e.node;else if(typeof e=="string")if(e.toLowerCase()==="svg")c=sv();else if(e[0]==="<"){const d=sv(e);c=document.importNode(d.firstChild,!0)}else c=document.createElementNS(Aa.svg,e);else c=e;this.node=c,t&&this.setAttributes(t),o&&this.append(o)}get[Symbol.toStringTag](){return sr.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(e){this.node.id=e}transform(e,t){return e==null?ph(this.node):(ph(this.node,e,t),this)}translate(e,t=0,o={}){return e==null?w2(this.node):(w2(this.node,e,t,o),this)}rotate(e,t,o,c={}){return e==null?gh(this.node):(gh(this.node,e,t,o,c),this)}scale(e,t){return e==null?Nn(this.node):(Nn(this.node,e,t),this)}getTransformToElement(e){const t=sr.toNode(e);return Ed(this.node,t)}removeAttribute(e){return pS(this.node,e),this}getAttribute(e){return gM(this.node,e)}setAttribute(e,t){return f2(this.node,e,t),this}setAttributes(e){return mC(this.node,e),this}attr(e,t){return e==null?vo(this.node):typeof e=="string"&&t===void 0?vo(this.node,e):(typeof e=="object"?vo(this.node,e):vo(this.node,e,t),this)}svg(){return this.node instanceof SVGSVGElement?this:sr.create(this.node.ownerSVGElement)}defs(){const e=this.svg()||this,t=e.node.getElementsByTagName("defs")[0];return t?sr.create(t):sr.create("defs").appendTo(e)}text(e,t={}){return AS(this.node,e,t),this}tagName(){return Wm(this.node)}clone(){return sr.create(this.node.cloneNode(!0))}remove(){return yd(this.node),this}empty(){return d2(this.node),this}append(e){return Us(this.node,sr.toNodes(e)),this}appendTo(e){return pM(this.node,sr.isVector(e)?e.node:e),this}prepend(e){return fM(this.node,sr.toNodes(e)),this}before(e){return Jh(this.node,sr.toNodes(e)),this}replace(e){return this.node.parentNode&&this.node.parentNode.replaceChild(sr.toNode(e),this.node),sr.create(e)}first(){return this.node.firstChild?sr.create(this.node.firstChild):null}last(){return this.node.lastChild?sr.create(this.node.lastChild):null}get(e){const t=this.node.childNodes[e];return t?sr.create(t):null}indexOf(e){return Array.prototype.slice.call(this.node.childNodes).indexOf(sr.toNode(e))}find(e){const t=[],o=av(this.node,e);if(o)for(let c=0,d=o.length;c<d;c+=1)t.push(sr.create(o[c]));return t}findOne(e){const t=Zm(this.node,e);return t?sr.create(t):null}findParentByClass(e,t){const o=u2(this.node,e,t);return o?sr.create(o):null}matches(e){const t=this.node,o=this.node.matches,c=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return c&&c.call(t,e)}contains(e){return Ym(this.node,sr.isVector(e)?e.node:e)}wrap(e){const t=sr.create(e),o=this.node.parentNode;return o?.insertBefore(t.node,this.node),t.append(this)}parent(e){let t=this;if(t.node.parentNode==null)return null;if(t=sr.create(t.node.parentNode),e==null)return t;do if(typeof e=="string"?t.matches(e):t instanceof e)return t;while(t=sr.create(t.node.parentNode));return t}children(){const e=this.node.childNodes,t=[];for(let o=0;o<e.length;o+=1)e[o].nodeType===1&&t.push(sr.create(e[o]));return t}eachChild(e,t){const o=this.children();for(let c=0,d=o.length;c<d;c+=1)e.call(o[c],o[c],c,o),t&&o[c].eachChild(e,t);return this}index(){return Xm(this.node)}hasClass(e){return Wg(this.node,e)}addClass(e){return co(this.node,e),this}removeClass(e){return yc(this.node,e),this}toggleClass(e,t){return a2(this.node,e,t),this}toLocalPoint(e,t){return Qp(this.node,e,t)}toGeometryShape(){return fh(this.node)}translateCenterToPoint(e){const o=this.getBBox({target:this.svg()}).getCenter();return this.translate(e.x-o.x,e.y-o.y),this}translateAndAutoOrient(e,t,o){return ry(this.node,e,t,o),this}animate(e){return MC(this.node,e)}animateTransform(e){return OC(this.node,e)}animateAlongPath(e,t){return C2(this.node,e,t)}normalizePath(){return this.tagName()==="path"&&this.attr("d",Nr.normalize(this.attr("d"))),this}bbox(e,t){return TC(this.node,e,t)}getBBox(e={}){return Ta(this.node,{recursive:e.recursive,target:e.target?sr.toNode(e.target):null})}sample(e=1){return this.node instanceof SVGPathElement?TS(this.node,e):[]}toPath(){return sr.create(OS(this.node))}toPathData(){return PS(this.node)}}(function(l){l.toStringTag=`X6.${l.name}`;function e(f){if(f==null)return!1;if(f instanceof l)return!0;const v=f[Symbol.toStringTag],b=f;return(v==null||v===l.toStringTag)&&b.node instanceof SVGElement&&typeof b.animate=="function"&&typeof b.sample=="function"&&typeof b.normalizePath=="function"&&typeof b.toPath=="function"}l.isVector=e;function t(f,v,b){return new l(f,v,b)}l.create=t;function o(f){if(f[0]==="<"){const v=sv(f),b=[];for(let w=0,_=v.childNodes.length;w<_;w+=1){const A=v.childNodes[w];b.push(t(document.importNode(A,!0)))}return b}return[t(f)]}l.createVectors=o;function c(f){return e(f)?f.node:f}l.toNode=c;function d(f){return Array.isArray(f)?f.map(v=>c(v)):[c(f)]}l.toNodes=d})(sr||(sr={}));function SM(l,e){const t=sr.create(e),o=sr.create("textPath"),c=l.d;if(c&&l["xlink:href"]===void 0){const d=sr.create("path").attr("d",c).appendTo(t.defs());o.attr("xlink:href",`#${d.id}`)}return typeof l=="object"&&o.attr(l),o.node}function _M(l,e,t){const o=t.eol,c=t.baseSize,d=t.lineHeight;let f=0,v;const b={},w=e.length-1;for(let _=0;_<=w;_+=1){let A=e[_],P=null;if(typeof A=="object"){const V=A.attrs,q=sr.create("tspan",V);v=q.node;let ee=A.t;o&&_===w&&(ee+=o),v.textContent=ee;const ge=V.class;ge&&q.addClass(ge),t.includeAnnotationIndices&&q.attr("annotations",A.annotations.join(",")),P=parseFloat(V["font-size"]),P===void 0&&(P=c),P&&P>f&&(f=P)}else o&&_===w&&(A+=o),v=document.createTextNode(A||" "),c&&c>f&&(f=c);l.appendChild(v)}return f&&(b.maxFontSize=f),d?b.lineHeight=d:f&&(b.lineHeight=f*1.2),b}const hh=/em$/;function ey(l,e){const t=parseFloat(l);return hh.test(l)?t*e:t}function GP(l,e,t,o){if(!Array.isArray(e))return 0;const c=e.length;if(!c)return 0;let d=e[0];const f=ey(d.maxFontSize,t)||t;let v=0;const b=ey(o,t);for(let A=1;A<c;A+=1)d=e[A],v+=ey(d.lineHeight,t)||b;const w=ey(d.maxFontSize,t)||t;let _;switch(l){case"middle":_=f/2-.15*w-v/2;break;case"bottom":_=-(.25*w)-v;break;default:case"top":_=.8*f;break}return _}function AS(l,e,t={}){e=bC(e);const o=t.eol;let c=t.textPath;const d=t.textVerticalAnchor,f=d==="middle"||d==="bottom"||d==="top";let v=t.x;v===void 0&&(v=l.getAttribute("x")||0);const b=t.includeAnnotationIndices;let w=t.annotations;w&&!Array.isArray(w)&&(w=[w]);const _=t.lineHeight,A=_==="auto",P=A?"1.5em":_||"1em";d2(l),vo(l,{"xml:space":"preserve",display:e||t.displayEmpty?null:"none"});const V=vo(l,"font-size");let q=parseFloat(V);q||(q=16,(f||w)&&!V&&vo(l,"font-size",`${q}`));let ee;c?(typeof c=="string"&&(c={d:c}),ee=SM(c,l)):ee=document.createDocumentFragment();let ge,_e=0,ke;const Se=e.split(`
`),Ue=[],Qe=Se.length-1;for(let Ot=0;Ot<=Qe;Ot+=1){ge=P;let Kt="v-line";const Fn=Qc("tspan");let Cn,Sn=Se[Ot];if(Sn)if(w){const Ln=vM(Sn,w,{offset:-_e,includeAnnotationIndices:b});Cn=_M(Fn,Ln,{eol:Ot!==Qe&&o,baseSize:q,lineHeight:A?null:P,includeAnnotationIndices:b});const Jr=Cn.lineHeight;Jr&&A&&Ot!==0&&(ge=Jr),Ot===0&&(ke=Cn.maxFontSize*.8)}else o&&Ot!==Qe&&(Sn+=o),Fn.textContent=Sn;else{Fn.textContent="-",Kt+=" v-empty-line";const Ln=Fn.style;Ln.fillOpacity=0,Ln.strokeOpacity=0,w&&(Cn={})}Cn&&Ue.push(Cn),Ot>0&&Fn.setAttribute("dy",ge),(Ot>0||c)&&Fn.setAttribute("x",v),Fn.className.baseVal=Kt,ee.appendChild(Fn),_e+=Sn.length+1}if(f)if(w)ge=GP(d,Ue,q,P);else if(d==="top")ge="0.8em";else{let Ot;switch(Qe>0?(Ot=parseFloat(P)||1,Ot*=Qe,hh.test(P)||(Ot/=q)):Ot=0,d){case"middle":ge=`${.3-Ot/2}em`;break;case"bottom":ge=`${-Ot-.3}em`;break;default:break}}else d===0?ge="0em":d?ge=d:(ge=0,l.getAttribute("y")==null&&l.setAttribute("y",`${ke||"0.8em"}`));ee.firstChild.setAttribute("dy",ge),l.appendChild(ee)}function AM(l,e,t,o){const c=[],d=[];if(e!=null){const f=l.split(e);if(c.push(...f),typeof e=="string")for(let v=0,b=f.length-1;v<b;v+=1)d.push(e);else{const v=l.match(new RegExp(e,"g"));for(let b=0,w=f.length-1;b<w;b+=1)d.push(v?v[b]:"")}}else{let f="";for(let v=0,b=l.length;v<b;v+=1){const w=l[v];w===" "?(c.push(f),d.push(" "),f=""):w.match(/[^\x00-\xff]/)?(f.length&&(c.push(f),d.push("")),c.push(w),d.push(""),f=""):f+=w}f.length&&c.push(f)}for(let f=0;f<c.length;f+=1){const v=c[f];if(v.indexOf(t)>=0&&v.length>1){const b=v.split(t);for(let A=0,P=b.length-1;A<P;A+=1)b.splice(2*A+1,0,t);const w=b.filter(A=>A!=="");c.splice(f,1,...w);const _=w.map(()=>"");_.pop(),d.splice(f,0,..._)}}for(let f=0;f<c.length;f+=1){const v=c[f],b=v.search(o);b>0&&b<v.length-1&&(c.splice(f,1,v.substring(0,b+1),v.substring(b+1)),d.splice(f,0,""))}return{words:c,separators:d}}function ty(l,e,t={},o={}){const c=e.width,d=e.height,f=o.svgDocument||Qc("svg"),v=Qc("text"),b=Qc("tspan"),w=document.createTextNode("");vo(v,t),v.appendChild(b),v.style.opacity="0",v.style.display="block",b.style.display="block",b.appendChild(w),f.appendChild(v);const _=f.parentNode==null;_&&document.body.appendChild(f);const A=o.eol||`
`,P=o.separator||" ",V=o.hyphen?new RegExp(o.hyphen):/[^\w\d]/,q=o.breakWord!==!1,ee=[],ge={};let _e=[],ke,Se,Ue;const{words:Qe,separators:bt}=AM(l,o.separator,A,V);for(let Ot=0,Kt=0,Fn=Qe.length;Ot<Fn;Ot+=1){const Cn=Qe[Ot];if(!!Cn){if(Cn===A){ee[Kt]=!0,Kt+=1,_e[Kt]="";continue}if(_e[Kt]!=null?(Ue=bt[Ot-1]||"",w.data=`${_e[Kt]}${Ue}${Cn}`):w.data=Cn,b.getComputedTextLength()<=c)_e[Kt]=w.data,ge[Kt]=bt[Ot],ke&&(ee[Kt]=!0,Kt+=1,ke=0);else{if(q){if(!_e[Kt]||ke){const Sn=!!ke,Ln=Cn.length===1;if(ke=Cn.length-1,Sn||Ln){if(Ln){if(!_e[Kt]){_e=[];break}Qe.splice(Ot,2,Cn+Qe[Ot+1]),bt.splice(Ot+1,1),ee[Kt]=!0,Kt+=1,Fn-=1,Ot-=1;continue}Qe[Ot]=Cn.substring(0,ke),Qe[Ot+1]=Cn.substring(ke)+Qe[Ot+1]}else Qe.splice(Ot,1,Cn.substring(0,ke),Cn.substring(ke)),bt.splice(Ot,0,""),Fn+=1,Kt&&!ee[Kt-1]&&(Kt-=1);Ot-=1;continue}}else if(!_e[Kt]){_e[Kt]=Cn,ee[Kt]=!0,Kt+=1;continue}Kt+=1,Ot-=1}if(d!=null){if(Se==null){let Sn;t.lineHeight==="auto"?Sn={value:1.5,unit:"em"}:Sn=iv(t.lineHeight,["em"])||{value:1,unit:"em"},Se=Sn.value,Sn.unit==="em"&&(Qn.IS_FIREFOX?Se*=b.getBBox().height:Se*=v.getBBox().height)}if(Se*_e.length>d){const Sn=Math.floor(d/Se)-1,Ln=_e[Sn],Jr=_e[Sn+1];if(_e.splice(Sn+1),Ln==null)break;let ii=o.ellipsis;if(!ii)break;typeof ii!="string"&&(ii="\u2026");let Ht=Ln;Jr&&q&&(Ht+=Ue+Jr);let Pn=Ht.length,Rr,Ro;do{if(Ro=Ht[Pn],Rr=Ht.substring(0,Pn),Ro?Ro.match(P)&&(Rr+=Ro):Rr+=ge[Sn],Rr+=ii,w.data=Rr,b.getComputedTextLength()<=c){_e[Sn]=Rr;break}Pn-=1}while(Pn>=0);break}}}}return yd(_?f:v),_e.join(A)}const Ic=.551784;function el(l,e,t=NaN){const o=l.getAttribute(e);if(o==null)return t;const c=parseFloat(o);return Number.isNaN(c)?t:c}function TS(l,e=1){const t=l.getTotalLength(),o=[];let c=0,d;for(;c<t;)d=l.getPointAtLength(c),o.push({distance:c,x:d.x,y:d.y}),c+=e;return o}function TM(l){return["M",el(l,"x1"),el(l,"y1"),"L",el(l,"x2"),el(l,"y2")].join(" ")}function MM(l){const e=b2(l);return e.length===0?null:`${PM(e)} Z`}function OM(l){const e=b2(l);return e.length===0?null:PM(e)}function PM(l){return`M ${l.map(t=>`${t.x} ${t.y}`).join(" L")}`}function b2(l){const e=[],t=l.points;if(t)for(let o=0,c=t.numberOfItems;o<c;o+=1)e.push(t.getItem(o));return e}function DM(l){const e=el(l,"cx",0),t=el(l,"cy",0),o=el(l,"r"),c=o*Ic;return["M",e,t-o,"C",e+c,t-o,e+o,t-c,e+o,t,"C",e+o,t+c,e+c,t+o,e,t+o,"C",e-c,t+o,e-o,t+c,e-o,t,"C",e-o,t-c,e-c,t-o,e,t-o,"Z"].join(" ")}function NM(l){const e=el(l,"cx",0),t=el(l,"cy",0),o=el(l,"rx"),c=el(l,"ry")||o,d=o*Ic,f=c*Ic;return["M",e,t-c,"C",e+d,t-c,e+o,t-f,e+o,t,"C",e+o,t+f,e+d,t+c,e,t+c,"C",e-d,t+c,e-o,t+f,e-o,t,"C",e-o,t-f,e-d,t-c,e,t-c,"Z"].join(" ")}function IM(l){return MS({x:el(l,"x",0),y:el(l,"y",0),width:el(l,"width",0),height:el(l,"height",0),rx:el(l,"rx",0),ry:el(l,"ry",0)})}function MS(l){let e;const t=l.x,o=l.y,c=l.width,d=l.height,f=Math.min(l.rx||l["top-rx"]||0,c/2),v=Math.min(l.rx||l["bottom-rx"]||0,c/2),b=Math.min(l.ry||l["top-ry"]||0,d/2),w=Math.min(l.ry||l["bottom-ry"]||0,d/2);return f||v||b||w?e=["M",t,o+b,"v",d-b-w,"a",v,w,0,0,0,v,w,"h",c-2*v,"a",v,w,0,0,0,v,-w,"v",-(d-w-b),"a",f,b,0,0,0,-f,-b,"h",-(c-2*f),"a",f,b,0,0,0,-f,b,"Z"]:e=["M",t,o,"H",t+c,"V",o+d,"H",t,"V",o,"Z"],e.join(" ")}function OS(l){const e=Qc("path");vo(e,vo(l));const t=PS(l);return t&&e.setAttribute("d",t),e}function PS(l){const e=l.tagName.toLowerCase();switch(e){case"path":return l.getAttribute("d");case"line":return TM(l);case"polygon":return MM(l);case"polyline":return OM(l);case"ellipse":return NM(l);case"circle":return DM(l);case"rect":return IM(l);default:break}throw new Error(`"${e}" cannot be converted to svg path element.`)}function RM(l,e,t,o){const c=2*Math.PI-1e-6,d=l,f=e;let v=t,b=o;if(b<v){const ee=v;v=b,b=ee}const w=b-v,_=w<Math.PI?"0":"1",A=Math.cos(v),P=Math.sin(v),V=Math.cos(b),q=Math.sin(b);return w>=c?d?`M0,${f}A${f},${f} 0 1,1 0,${-f}A${f},${f} 0 1,1 0,${f}M0,${d}A${d},${d} 0 1,0 0,${-d}A${d},${d} 0 1,0 0,${d}Z`:`M0,${f}A${f},${f} 0 1,1 0,${-f}A${f},${f} 0 1,1 0,${f}Z`:d?`M${f*A},${f*P}A${f},${f} 0 ${_},1 ${f*V},${f*q}L${d*V},${d*q}A${d},${d} 0 ${_},0 ${d*A},${d*P}Z`:`M${f*A},${f*P}A${f},${f} 0 ${_},1 ${f*V},${f*q}L0,0Z`}const fv=Qc("svg"),FP=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,kM=/[ ,]+/,BP=/^(\w+)\((.*)\)/;function DS(l,e){const t=fv.createSVGPoint();return t.x=l,t.y=e,t}function oc(l){const e=fv.createSVGMatrix();if(l!=null){const t=l,o=e;for(const c in t)o[c]=t[c]}return e}function ny(l){return l!=null?(l instanceof DOMMatrix||(l=oc(l)),fv.createSVGTransformFromMatrix(l)):fv.createSVGTransform()}function xd(l){let e=oc();const t=l!=null&&l.match(FP);if(!t)return e;for(let o=0,c=t.length;o<c;o+=1){const f=t[o].match(BP);if(f){let v,b,w,_,A,P=oc();const V=f[2].split(kM);switch(f[1].toLowerCase()){case"scale":v=parseFloat(V[0]),b=V[1]===void 0?v:parseFloat(V[1]),P=P.scaleNonUniform(v,b);break;case"translate":w=parseFloat(V[0]),_=parseFloat(V[1]),P=P.translate(w,_);break;case"rotate":A=parseFloat(V[0]),w=parseFloat(V[1])||0,_=parseFloat(V[2])||0,w!==0||_!==0?P=P.translate(w,_).rotate(A).translate(-w,-_):P=P.rotate(A);break;case"skewx":A=parseFloat(V[0]),P=P.skewX(A);break;case"skewy":A=parseFloat(V[0]),P=P.skewY(A);break;case"matrix":P.a=parseFloat(V[0]),P.b=parseFloat(V[1]),P.c=parseFloat(V[2]),P.d=parseFloat(V[3]),P.e=parseFloat(V[4]),P.f=parseFloat(V[5]);break;default:continue}e=e.multiply(P)}}return e}function Qf(l){const e=l||{},t=e.a!=null?e.a:1,o=e.b!=null?e.b:0,c=e.c!=null?e.c:0,d=e.d!=null?e.d:1,f=e.e!=null?e.e:0,v=e.f!=null?e.f:0;return`matrix(${t},${o},${c},${d},${f},${v})`}function Cd(l){let e,t,o;if(l){const d=kM;if(l.trim().indexOf("matrix")>=0){const f=xd(l),v=SC(f);e=[v.translateX,v.translateY],t=[v.rotation],o=[v.scaleX,v.scaleY];const b=[];(e[0]!==0||e[1]!==0)&&b.push(`translate(${e.join(",")})`),(o[0]!==1||o[1]!==1)&&b.push(`scale(${o.join(",")})`),t[0]!==0&&b.push(`rotate(${t[0]})`),l=b.join(" ")}else{const f=l.match(/translate\((.*?)\)/);f&&(e=f[1].split(d));const v=l.match(/rotate\((.*?)\)/);v&&(t=v[1].split(d));const b=l.match(/scale\((.*?)\)/);b&&(o=b[1].split(d))}}const c=o&&o[0]?parseFloat(o[0]):1;return{raw:l||"",translation:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotation:{angle:t&&t[0]?parseInt(t[0],10):0,cx:t&&t[1]?parseInt(t[1],10):void 0,cy:t&&t[2]?parseInt(t[2],10):void 0},scale:{sx:c,sy:o&&o[1]?parseFloat(o[1]):c}}}function Kg(l,e){const t=e.x*l.a+e.y*l.c+0,o=e.x*l.b+e.y*l.d+0;return{x:t,y:o}}function SC(l){const e=Kg(l,{x:0,y:1}),t=Kg(l,{x:1,y:0}),o=180/Math.PI*Math.atan2(e.y,e.x)-90,c=180/Math.PI*Math.atan2(t.y,t.x);return{skewX:o,skewY:c,translateX:l.e,translateY:l.f,scaleX:Math.sqrt(l.a*l.a+l.b*l.b),scaleY:Math.sqrt(l.c*l.c+l.d*l.d),rotation:o}}function x2(l){let e,t,o,c;return l?(e=l.a==null?1:l.a,c=l.d==null?1:l.d,t=l.b,o=l.c):e=c=1,{sx:t?Math.sqrt(e*e+t*t):e,sy:o?Math.sqrt(o*o+c*c):c}}function Qh(l){let e={x:0,y:1};return l&&(e=Kg(l,e)),{angle:ki.normalize(ki.toDeg(Math.atan2(e.y,e.x))-90)}}function Jp(l){return{tx:l&&l.e||0,ty:l&&l.f||0}}function wd(l,e){const t=DS(l.x,l.y).matrixTransform(e);return new Ve(t.x,t.y)}function _C(l,e){return new fr(wd(l.start,e),wd(l.end,e))}function NS(l,e){let t=l instanceof da?l.points:l;return Array.isArray(t)||(t=[]),new da(t.map(o=>wd(o,e)))}function tl(l,e){const t=fv.createSVGPoint();t.x=l.x,t.y=l.y;const o=t.matrixTransform(e);t.x=l.x+l.width,t.y=l.y;const c=t.matrixTransform(e);t.x=l.x+l.width,t.y=l.y+l.height;const d=t.matrixTransform(e);t.x=l.x,t.y=l.y+l.height;const f=t.matrixTransform(e),v=Math.min(o.x,c.x,d.x,f.x),b=Math.max(o.x,c.x,d.x,f.x),w=Math.min(o.y,c.y,d.y,f.y),_=Math.max(o.y,c.y,d.y,f.y);return new Rn(v,w,b-v,_-w)}var AC=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};function TC(l,e,t){let o;const c=l.ownerSVGElement;if(!c)return new Rn(0,0,0,0);try{o=l.getBBox()}catch{o={x:l.clientLeft,y:l.clientTop,width:l.clientWidth,height:l.clientHeight}}if(e)return Rn.create(o);const d=Ed(l,t||c);return tl(o,d)}function Ta(l,e={}){let t;if(!l.ownerSVGElement||!qf(l)){if(h2(l)){const{left:f,top:v,width:b,height:w}=NC(l);return new Rn(f,v,b,w)}return new Rn(0,0,0,0)}let c=e.target;if(!e.recursive){try{t=l.getBBox()}catch{t={x:l.clientLeft,y:l.clientTop,width:l.clientWidth,height:l.clientHeight}}if(!c)return Rn.create(t);const f=Ed(l,c);return tl(t,f)}{const f=l.childNodes,v=f.length;if(v===0)return Ta(l,{target:c});c||(c=l);for(let b=0;b<v;b+=1){const w=f[b];let _;w.childNodes.length===0?_=Ta(w,{target:c}):_=Ta(w,{target:c,recursive:!0}),t?t=t.union(_):t=_}return t}}function IS(l){let e=l,t=e?e.tagName.toLowerCase():"";for(;t==="g";)e=e.firstElementChild,t=e?e.tagName.toLowerCase():"";const o=f=>{const v=e.getAttribute(f),b=v?parseFloat(v):0;return Number.isNaN(b)?0:b};let c,d;switch(t){case"rect":d=new Rn(o("x"),o("y"),o("width"),o("height"));break;case"circle":c=o("r"),d=new Rn(o("cx")-c,o("cy")-c,2*c,2*c);break;default:break}return d}function jo(l,e){let t=oc();if(qf(e)&&qf(l)){let o=l;const c=[];for(;o&&o!==e;){const d=o.getAttribute("transform")||null,f=xd(d);c.push(f),o=o.parentNode}c.reverse().forEach(d=>{t=t.multiply(d)})}return t}function Ed(l,e){if(qf(e)&&qf(l)){const t=e.getScreenCTM(),o=l.getScreenCTM();if(t&&o)return t.inverse().multiply(o)}return oc()}function Qp(l,e,t){const o=l instanceof SVGSVGElement?l:l.ownerSVGElement,c=o.createSVGPoint();c.x=e,c.y=t;try{const d=o.getScreenCTM(),f=c.matrixTransform(d.inverse()),v=Ed(l,o).inverse();return f.matrixTransform(v)}catch{return c}}function fh(l){const e=t=>{const o=l.getAttribute(t),c=o?parseFloat(o):0;return Number.isNaN(c)?0:c};switch(l instanceof SVGElement&&l.nodeName.toLowerCase()){case"rect":return new Rn(e("x"),e("y"),e("width"),e("height"));case"circle":return new bd(e("cx"),e("cy"),e("r"),e("r"));case"ellipse":return new bd(e("cx"),e("cy"),e("rx"),e("ry"));case"polyline":{const t=b2(l);return new da(t)}case"polygon":{const t=b2(l);return t.length>1&&t.push(t[0]),new da(t)}case"path":{let t=l.getAttribute("d");return Nr.isValid(t)||(t=Nr.normalize(t)),Nr.parse(t)}case"line":return new fr(e("x1"),e("y1"),e("x2"),e("y2"));default:break}return Ta(l)}function eg(l,e,t){const o=l instanceof SVGSVGElement?l:l.ownerSVGElement;t=t||o;const c=Ta(t),d=c.getCenter();if(!c.intersectsWithLineFromCenterToPoint(e))return null;let f=null;const v=l.tagName.toLowerCase();if(v==="rect"){const b=new Rn(parseFloat(l.getAttribute("x")||"0"),parseFloat(l.getAttribute("y")||"0"),parseFloat(l.getAttribute("width")||"0"),parseFloat(l.getAttribute("height")||"0")),w=Ed(l,t),_=SC(w),A=o.createSVGTransform();A.setRotate(-_.rotation,d.x,d.y);const P=tl(b,A.matrix.multiply(w));f=Rn.create(P).intersectsWithLineFromCenterToPoint(e,_.rotation)}else if(v==="path"||v==="polygon"||v==="polyline"||v==="circle"||v==="ellipse"){const b=v==="path"?l:OS(l),w=TS(b);let _=1/0,A=[];for(let P=0,V=w.length;P<V;P+=1){const q=w[P];let ee=DS(q.x,q.y);ee=ee.matrixTransform(Ed(l,t));const ge=Ve.create(ee),_e=ge.distance(d),ke=ge.distance(e)*1.1,Se=_e+ke;Se<_?(_=Se,A=[{sample:q,refDistance:ke}]):Se<_+1&&A.push({sample:q,refDistance:ke})}A.sort((P,V)=>P.refDistance-V.refDistance),A[0]&&(f=Ve.create(A[0].sample))}return f}function MC(l,e){return PC(l,e,"animate")}function OC(l,e){return PC(l,e,"animateTransform")}function PC(l,e,t){const o=Qc(t);l.appendChild(o);try{return DC(o,e)}catch{}return()=>{}}function DC(l,e){const{start:t,complete:o,repeat:c}=e,d=AC(e,["start","complete","repeat"]);vo(l,d),t&&l.addEventListener("beginEvent",t),o&&l.addEventListener("endEvent",o),c&&l.addEventListener("repeatEvent",c);const f=l;return setTimeout(()=>{f.beginElement()}),()=>f.endElement()}function C2(l,e,t){const o=ov(t),c=Qc("animateMotion"),d=Qc("mpath");vo(d,{"xlink:href":`#${o}`}),c.appendChild(d),l.appendChild(c);try{return DC(c,e)}catch{if(document.documentElement.getAttribute("smiling")==="fake"){const v=c;v.animators=[];const b=window,w=v.getAttribute("id");w&&(b.id2anim[w]=v);const _=b.getTargets(v);for(let A=0,P=_.length;A<P;A+=1){const V=_[A],q=new b.Animator(v,V,A);b.animators.push(q),v.animators[A]=q,q.register()}}}return()=>{}}function NC(l){let e=0,t=0,o=0,c=0;if(l){let d=l;for(;d;)e+=d.offsetLeft,t+=d.offsetTop,d=d.offsetParent,d&&(e+=parseInt(wC(d,"borderLeft"),10),t+=parseInt(wC(d,"borderTop"),10));o=l.offsetWidth,c=l.offsetHeight}return{left:e,top:t,width:o,height:c}}function ph(l,e,t={}){if(e==null)return xd(vo(l,"transform"));if(t.absolute){l.setAttribute("transform",Qf(e));return}const o=l.transform,c=ny(e);o.baseVal.appendItem(c)}function w2(l,e,t=0,o={}){let c=vo(l,"transform");const d=Cd(c);if(e==null)return d.translation;c=d.raw,c=c.replace(/translate\([^)]*\)/g,"").trim();const f=o.absolute?e:d.translation.tx+e,v=o.absolute?t:d.translation.ty+t,b=`translate(${f},${v})`;l.setAttribute("transform",`${b} ${c}`.trim())}function gh(l,e,t,o,c={}){let d=vo(l,"transform");const f=Cd(d);if(e==null)return f.rotation;d=f.raw,d=d.replace(/rotate\([^)]*\)/g,"").trim(),e%=360;const v=c.absolute?e:f.rotation.angle+e,b=t!=null&&o!=null?`,${t},${o}`:"",w=`rotate(${v}${b})`;l.setAttribute("transform",`${d} ${w}`.trim())}function Nn(l,e,t){let o=vo(l,"transform");const c=Cd(o);if(e==null)return c.scale;t=t??e,o=c.raw,o=o.replace(/scale\([^)]*\)/g,"").trim();const d=`scale(${e},${t})`;l.setAttribute("transform",`${o} ${d}`.trim())}function ry(l,e,t,o){const c=Ve.create(e),d=Ve.create(t);o||(o=l instanceof SVGSVGElement?l:l.ownerSVGElement);const f=Nn(l);l.setAttribute("transform","");const v=Ta(l,{target:o}).scale(f.sx,f.sy),b=ny();b.setTranslate(-v.x-v.width/2,-v.y-v.height/2);const w=ny(),_=c.angleBetween(d,c.clone().translate(1,0));_&&w.setRotate(_,0,0);const A=ny(),P=c.clone().move(d,v.width/2);A.setTranslate(2*c.x-P.x,2*c.y-P.y);const V=Ed(l,o),q=ny();q.setMatrix(A.matrix.multiply(w.matrix.multiply(b.matrix.multiply(V.scale(f.sx,f.sy))))),l.setAttribute("transform",Qf(q.matrix))}class IC{constructor(e,t,o){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=Qn.isEventSupported("wheel")?"wheel":"mousewheel",this.target=e,this.onWheelCallback=t,this.onWheelGuard=o,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){Qn.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.onWheel,{passive:!1}):G()(this.target).on("mousewheel",this.onWheel)}disable(){Qn.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.onWheel):G()(this.target).off("mousewheel")}onWheel(e){if(this.onWheelGuard!=null&&!this.onWheelGuard(e))return;this.deltaX+=e.deltaX,this.deltaY+=e.deltaY,e.preventDefault();let t;(this.deltaX!==0||this.deltaY!==0)&&(e.stopPropagation(),t=!0),t===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(e)}))}didWheel(e){this.animationFrameId=0,this.onWheelCallback(e,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}const LM=sr.isVector,GM=sr.create,FM=sr.createVectors;function RS(l,e=60){let t=null;return(...o)=>{t&&clearTimeout(t),t=window.setTimeout(()=>{l.apply(this,o)},e)}}function BM(l){let e=null,t=[];const o=()=>{if(getComputedStyle(l).position==="static"){const w=l.style;w.position="relative"}const b=document.createElement("object");return b.onload=()=>{b.contentDocument.defaultView.addEventListener("resize",c),c()},b.style.display="block",b.style.position="absolute",b.style.top="0",b.style.left="0",b.style.height="100%",b.style.width="100%",b.style.overflow="hidden",b.style.pointerEvents="none",b.style.zIndex="-1",b.style.opacity="0",b.setAttribute("tabindex","-1"),b.type="text/html",l.appendChild(b),b.data="about:blank",b},c=RS(()=>{t.forEach(b=>b(l))}),d=b=>{e||(e=o()),t.indexOf(b)===-1&&t.push(b)},f=()=>{e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",c),e.parentNode.removeChild(e),e=null,t=[])};return{element:l,bind:d,destroy:f,unbind:b=>{const w=t.indexOf(b);w!==-1&&t.splice(w,1),t.length===0&&e&&f()}}}function zM(l){let e=null,t=[];const o=RS(()=>{t.forEach(b=>{b(l)})}),c=()=>{const b=new ResizeObserver(o);return b.observe(l),o(),b},d=b=>{e||(e=c()),t.indexOf(b)===-1&&t.push(b)},f=()=>{e&&(e.disconnect(),t=[],e=null)};return{element:l,bind:d,destroy:f,unbind:b=>{const w=t.indexOf(b);w!==-1&&t.splice(w,1),t.length===0&&e&&f()}}}const UM=typeof ResizeObserver<"u"?zM:BM;var E2;(function(l){const e=new WeakMap;function t(c){let d=e.get(c);return d||(d=UM(c),e.set(c,d),d)}function o(c){c.destroy(),e.delete(c.element)}l.bind=(c,d)=>{const f=t(c);return f.bind(d),()=>f.unbind(d)},l.clear=c=>{const d=t(c);o(d)}})(E2||(E2={}));var S2;(function(l){const e=[],t=16.666666666666668,o=[];let c=0;const d=()=>performance.now(),f=_=>_[0],v=_=>o.push(_)===1&&b(),b=(()=>{const _=()=>{var A,P;return(P=(A=o.splice(0,o.length))[0])===null||P===void 0?void 0:P.call(A)};if(typeof MessageChannel<"u"){const{port1:A,port2:P}=new MessageChannel;return A.onmessage=_,()=>P.postMessage(null)}return()=>setTimeout(_)})(),w=()=>{c=d()+t;let _=f(e);for(;_&&!l.shouldYield();){const{callback:A,data:P}=_;_.callback=null;const V=A&&A(P);V?_.callback=V:e.shift(),_=f(e)}_&&v(w)};l.scheduleTask=(_,A)=>{const P={callback:_,data:A};e.push(P),v(w)},l.shouldYield=()=>{var _,A;return((A=(_=navigator)===null||_===void 0?void 0:_.scheduling)===null||A===void 0?void 0:A.isInputPending())||d()>=c}})(S2||(S2={}));class js{constructor(e){this.options=Object.assign({},e),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(e,t,o=!1){if(typeof e=="object"){Object.keys(e).forEach(f=>{this.register(f,e[f],t)});return}this.exist(e)&&!o&&!Qn.isApplyingHMR()&&this.onDuplicated(e);const c=this.options.process,d=c?er(c,this,e,t):t;return this.data[e]=d,d}unregister(e){const t=e?this.data[e]:null;return delete this.data[e],t}get(e){return e?this.data[e]:null}exist(e){return e?this.data[e]!=null:!1}onDuplicated(e){try{throw this.options.onConflict&&er(this.options.onConflict,this,e),new Error(`${Kh(this.options.type)} with name '${e}' already registered.`)}catch(t){throw t}}onNotFound(e,t){throw new Error(this.getSpellingSuggestion(e,t))}getSpellingSuggestion(e,t){const o=this.getSpellingSuggestionForName(e),c=t?`${t} ${LE(this.options.type)}`:this.options.type;return`${Kh(c)} with name '${e}' does not exist.${o?` Did you mean '${o}'?`:""}`}getSpellingSuggestionForName(e){return nM(e,Object.keys(this.data),t=>t)}}(function(l){function e(t){return new l(t)}l.create=e})(js||(js={}));const VM={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},jM={},kS={position:iy("x","width","origin")},LS={position:iy("y","height","origin")},HM={position:iy("x","width","corner")},$M={position:iy("y","height","corner")},GS={set:ep("width","width")},FS={set:ep("height","height")},WM={set:ep("rx","width")},XM={set:ep("ry","height")},BS={set:(l=>{const e=ep(l,"width"),t=ep(l,"height");return function(o,c){const d=c.refBBox,f=d.height>d.width?e:t;return er(f,this,o,c)}})("r")},ZM={set(l,{refBBox:e}){let t=parseFloat(l);const o=dh(l);o&&(t/=100);const c=Math.sqrt(e.height*e.height+e.width*e.width);let d;return Number.isFinite(t)&&(o||t>=0&&t<=1?d=t*c:d=Math.max(t+c,0)),{r:d}}},YM={set:ep("cx","width")},KM={set:ep("cy","height")},zS={set:kC({resetOffset:!0})},qM={set:kC({resetOffset:!1})},US={set:LC({resetOffset:!0})},JM={set:LC({resetOffset:!1})},Ls=BS,zP=zS,QM=US,eO=kS,tO=LS,nO=GS,rO=FS;function iy(l,e,t){return(o,{refBBox:c})=>{if(o==null)return null;let d=parseFloat(o);const f=dh(o);f&&(d/=100);let v;if(Number.isFinite(d)){const w=c[t];f||d>0&&d<1?v=w[l]+c[e]*d:v=w[l]+d}const b=new Ve;return b[l]=v||0,b}}function ep(l,e){return function(t,{refBBox:o}){let c=parseFloat(t);const d=dh(t);d&&(c/=100);const f={};if(Number.isFinite(c)){const v=d||c>=0&&c<=1?c*o[e]:Math.max(c+o[e],0);f[l]=v}return f}}function RC(l,e){const t="x6-shape",o=e&&e.resetOffset;return function(c,{view:d,elem:f,refBBox:v}){const b=d.$(f);let w=b.data(t);if(!w||w.value!==c){const _e=l(c);w={value:c,shape:_e,shapeBBox:_e.bbox()},b.data(t,w)}const _=w.shape.clone(),A=w.shapeBBox.clone(),P=A.getOrigin(),V=v.getOrigin();A.x=V.x,A.y=V.y;const q=v.getMaxScaleToFit(A,V),ee=A.width===0||v.width===0?1:q.sx,ge=A.height===0||v.height===0?1:q.sy;return _.scale(ee,ge,P),o&&_.translate(-P.x,-P.y),_}}function kC(l){function e(o){return Nr.parse(o)}const t=RC(e,l);return(o,c)=>({d:t(o,c).serialize()})}function LC(l){const e=RC(t=>new da(t),l);return(t,o)=>({points:e(t,o).serialize()})}const _2={qualify:Xc,set(l,{view:e}){return`url(#${e.graph.defineGradient(l)})`}},VS={qualify:Xc,set(l,{view:e}){const t=e.cell,o=Object.assign({},l);if(t.isEdge()&&o.type==="linearGradient"){const c=e,d=c.sourcePoint,f=c.targetPoint;o.id=`gradient-${o.type}-${t.id}`,o.attrs=Object.assign(Object.assign({},o.attrs),{x1:d.x,y1:d.y,x2:f.x,y2:f.y,gradientUnits:"userSpaceOnUse"}),e.graph.defs.remove(o.id)}return`url(#${e.graph.defineGradient(o)})`}},GC={qualify(l,{attrs:e}){return e.textWrap==null||!Xc(e.textWrap)},set(l,{view:e,elem:t,attrs:o}){const c="x6-text",d=e.$(t),f=d.data(c),v=A=>{try{return JSON.parse(A)}catch{return A}},b={x:o.x,eol:o.eol,annotations:v(o.annotations),textPath:v(o["text-path"]||o.textPath),textVerticalAnchor:o["text-vertical-anchor"]||o.textVerticalAnchor,displayEmpty:(o["display-empty"]||o.displayEmpty)==="true",lineHeight:o["line-height"]||o.lineHeight},w=o["font-size"]||o.fontSize,_=JSON.stringify([l,b]);if(w&&t.setAttribute("font-size",w),f==null||f!==_){const A=b.textPath;if(A!=null&&typeof A=="object"){const P=A.selector;if(typeof P=="string"){const V=e.find(P)[0];V instanceof SVGPathElement&&(ov(V),b.textPath=Object.assign({"xlink:href":`#${V.id}`},A))}}AS(t,`${l}`,b),d.data(c,_)}}},jS={qualify:Xc,set(l,{view:e,elem:t,attrs:o,refBBox:c}){const d=l,f=d.width||0;dh(f)?c.width*=parseFloat(f)/100:f<=0?c.width+=f:c.width=f;const v=d.height||0;dh(v)?c.height*=parseFloat(v)/100:v<=0?c.height+=v:c.height=v;let b,w=d.text;w==null&&(w=o.text),w!=null?b=ty(`${w}`,c,{"font-weight":o["font-weight"]||o.fontWeight,"font-size":o["font-size"]||o.fontSize,"font-family":o["font-family"]||o.fontFamily,lineHeight:o.lineHeight},{svgDocument:e.graph.view.svg,ellipsis:d.ellipsis,hyphen:d.hyphen,breakWord:d.breakWord}):b="",er(GC.set,this,b,{view:e,elem:t,attrs:o,refBBox:c,cell:e.cell})}},qg=(l,{attrs:e})=>e.text!==void 0,HS={qualify:qg},$S={qualify:qg},WS={qualify:qg},XS={qualify:qg},ZS={qualify:qg},FC={qualify:qg},YS={qualify(l,{elem:e}){return e instanceof SVGElement},set(l,{view:e,elem:t}){const o="x6-title",c=`${l}`,d=e.$(t),f=d.data(o);if(f==null||f!==c){d.data(o,c);const v=t.firstChild;if(v&&v.tagName.toUpperCase()==="TITLE"){const b=v;b.textContent=c}else{const b=document.createElementNS(t.namespaceURI,"title");b.textContent=c,t.insertBefore(b,v)}}}},KS={offset:BC("x","width","right")},qS={offset:BC("y","height","bottom")},JS={offset(l,{refBBox:e}){return l?{x:-e.x,y:-e.y}:{x:0,y:0}}};function BC(l,e,t){return(o,{refBBox:c})=>{const d=new Ve;let f;return o==="middle"?f=c[e]/2:o===t?f=c[e]:typeof o=="number"&&Number.isFinite(o)?f=o>-1&&o<1?-c[e]*o:-o:dh(o)?f=c[e]*parseFloat(o)/100:f=0,d[l]=-(c[l]+f),d}}const QS={qualify:Xc,set(l,{view:e,elem:t}){e.$(t).css(l)}},e_={set(l,{view:e,elem:t}){e.$(t).html(`${l}`)}},t_={qualify:Xc,set(l,{view:e}){return`url(#${e.graph.defineFilter(l)})`}},n_={set(l){return l!=null&&typeof l=="object"&&l.id?l.id:l}};function tp(l,e,t){let o,c;typeof e=="object"?(o=e.x,c=e.y):(o=e,c=t);const d=Nr.parse(l),f=d.bbox();if(f){let v=-f.height/2-f.y,b=-f.width/2-f.x;typeof o=="number"&&(b-=o),typeof c=="number"&&(v-=c),d.translate(b,v)}return d.serialize()}var zC=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const pv=l=>{var{size:e,width:t,height:o,offset:c,open:d}=l,f=zC(l,["size","width","height","offset","open"]);return UC({size:e,width:t,height:o,offset:c},d===!0,!0,void 0,f)},r_=l=>{var{size:e,width:t,height:o,offset:c,factor:d}=l,f=zC(l,["size","width","height","offset","factor"]);return UC({size:e,width:t,height:o,offset:c},!1,!1,d,f)};function UC(l,e,t,o=3/4,c={}){const d=l.size||10,f=l.width||d,v=l.height||d,b=new Nr,w={};if(e)b.moveTo(f,0).lineTo(0,v/2).lineTo(f,v),w.fill="none";else{if(b.moveTo(0,v/2),b.lineTo(f,0),!t){const _=Jc(o,0,1);b.lineTo(f*_,v/2)}b.lineTo(f,v),b.close()}return Object.assign(Object.assign(Object.assign({},w),c),{tagName:"path",d:tp(b.serialize(),{x:l.offset!=null?l.offset:-f/2})})}var i_=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const o_=l=>{var{size:e,width:t,height:o,offset:c}=l,d=i_(l,["size","width","height","offset"]);const f=e||10,v=t||f,b=o||f,w=new Nr;return w.moveTo(0,b/2).lineTo(v/2,0).lineTo(v,b/2).lineTo(v/2,b).close(),Object.assign(Object.assign({},d),{tagName:"path",d:tp(w.serialize(),c??-v/2)})};var A2=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const s_=l=>{var{d:e,offsetX:t,offsetY:o}=l,c=A2(l,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},c),{tagName:"path",d:tp(e,t,o)})};var tg=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const iO=l=>{var{size:e,width:t,height:o,offset:c}=l,d=tg(l,["size","width","height","offset"]);const f=e||10,v=t||f,b=o||f,w=new Nr;return w.moveTo(0,0).lineTo(v,b).moveTo(0,b).lineTo(v,0),Object.assign(Object.assign({},d),{tagName:"path",fill:"none",d:tp(w.serialize(),c||-v/2)})};var oO=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const sO=l=>{var{width:e,height:t,offset:o,open:c,flip:d}=l,f=oO(l,["width","height","offset","open","flip"]);let v=t||6;const b=e||10,w=c===!0,_=d===!0,A=Object.assign(Object.assign({},f),{tagName:"path"});_&&(v=-v);const P=new Nr;return P.moveTo(0,v).lineTo(b,0),w?A.fill="none":(P.lineTo(b,v),P.close()),A.d=tp(P.serialize(),{x:o||-b/2,y:v/2}),A};var ef=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const gv=l=>{var{r:e}=l,t=ef(l,["r"]);const o=e||5;return Object.assign(Object.assign({cx:o},t),{tagName:"circle",r:o})},np=l=>{var{r:e}=l,t=ef(l,["r"]);const o=e||5,c=new Nr;return c.moveTo(o,0).lineTo(o,o*2),c.moveTo(0,o).lineTo(o*2,o),{children:[Object.assign(Object.assign({},gv({r:o})),{fill:"none"}),Object.assign(Object.assign({},t),{tagName:"path",d:tp(c.serialize(),-o)})]}};var Sd=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const oy=l=>{var{rx:e,ry:t}=l,o=Sd(l,["rx","ry"]);const c=e||5,d=t||5;return Object.assign(Object.assign({cx:c},o),{tagName:"ellipse",rx:c,ry:d})};var nl;(function(l){l.presets=Z,l.registry=js.create({type:"marker"}),l.registry.register(l.presets,!0)})(nl||(nl={})),function(l){l.normalize=tp}(nl||(nl={}));var sy=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};function vv(l){return typeof l=="string"||Xc(l)}const tf={qualify:vv,set(l,{view:e,attrs:t}){return _d("marker-start",l,e,t)}},Jg={qualify:vv,set(l,{view:e,attrs:t}){return _d("marker-end",l,e,t,{transform:"rotate(180)"})}},Rc={qualify:vv,set(l,{view:e,attrs:t}){return _d("marker-mid",l,e,t)}};function _d(l,e,t,o,c={}){const d=typeof e=="string"?{name:e}:e,{name:f,args:v}=d,b=sy(d,["name","args"]);let w=b;if(f&&typeof f=="string"){const A=nl.registry.get(f);if(A)w=A(Object.assign(Object.assign({},b),v));else return nl.registry.onNotFound(f)}const _=Object.assign(Object.assign(Object.assign({},nf(o,l)),c),w);return{[l]:`url(#${t.graph.defineMarker(_)})`}}function nf(l,e){const t={},o=l.stroke;typeof o=="string"&&(t.stroke=o,t.fill=o);let c=l.strokeOpacity;if(c==null&&(c=l["stroke-opacity"]),c==null&&(c=l.opacity),c!=null&&(t["stroke-opacity"]=c,t["fill-opacity"]=c),e!=="marker-mid"){const d=parseFloat(l.strokeWidth||l["stroke-width"]);if(Number.isFinite(d)&&d>1){const f=Math.ceil(d/2);t.refX=e==="marker-start"?f:-f}}return t}const ng=(l,{view:e})=>e.cell.isEdge(),aO={qualify:ng,set(l,e){var t,o,c,d;const f=e.view,v=l.reverse||!1,b=l.stubs||0;let w;if(Number.isFinite(b)&&b!==0)if(v){let _,A;const P=f.getConnectionLength()||0;b<0?(_=(P+b)/2,A=-b):(_=b,A=P-b*2);const V=f.getConnection();w=(d=(c=(o=(t=V?.divideAtLength(_))===null||t===void 0?void 0:t[1])===null||o===void 0?void 0:o.divideAtLength(A))===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.serialize()}else{let _;b<0?_=((f.getConnectionLength()||0)+b)/2:_=b;const A=f.getConnection();if(A){const P=A.divideAtLength(_),V=A.divideAtLength(-_);P&&V&&(w=`${P[0].serialize()} ${V[1].serialize()}`)}}return{d:w||f.getConnectionPathData()}}},VC={qualify:ng,set:T2("getTangentAtLength",{rotate:!0})},jC={qualify:ng,set:T2("getTangentAtLength",{rotate:!1})},a_={qualify:ng,set:T2("getTangentAtRatio",{rotate:!0})},cO={qualify:ng,set:T2("getTangentAtRatio",{rotate:!1})},c_=VC,l_=a_;function T2(l,e){const t={x:1,y:0};return(o,c)=>{let d,f;const v=c.view,b=v[l](Number(o));return b?(f=e.rotate?b.vector().vectorAngle(t):0,d=b.start):(d=v.path.start,f=0),f===0?{transform:`translate(${d.x},${d.y}')`}:{transform:`translate(${d.x},${d.y}') rotate(${f})`}}}var vh;(function(l){function e(t,o,c){return!!(t!=null&&(typeof t=="string"||typeof t.qualify!="function"||er(t.qualify,this,o,c)))}l.isValidDefinition=e})(vh||(vh={})),function(l){l.presets=Object.assign(Object.assign({},VM),te),l.registry=js.create({type:"attribute definition"}),l.registry.register(l.presets,!0)}(vh||(vh={}));const u_={color:"#aaaaaa",thickness:1,markup:"rect",update(l,e){const t=e.thickness*e.sx,o=e.thickness*e.sy;vo(l,{width:t,height:o,rx:t,ry:o,fill:e.color})}},M2={color:"#aaaaaa",thickness:1,markup:"rect",update(l,e){const t=e.sx<=1?e.thickness*e.sx:e.thickness;vo(l,{width:t,height:t,rx:t,ry:t,fill:e.color})}},lO={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(l,e){let t;const o=e.width,c=e.height,d=e.thickness;o-d>=0&&c-d>=0?t=["M",o,0,"H0 M0 0 V0",c].join(" "):t="M 0 0 0 0",vo(l,{d:t,stroke:e.color,"stroke-width":e.thickness})}},mv=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(l,e){let t;const o=e.width,c=e.height,d=e.thickness;o-d>=0&&c-d>=0?t=["M",o,0,"H0 M0 0 V0",c].join(" "):t="M 0 0 0 0",vo(l,{d:t,stroke:e.color,"stroke-width":e.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(l,e){let t;const o=e.factor||1,c=e.width*o,d=e.height*o,f=e.thickness;c-f>=0&&d-f>=0?t=["M",c,0,"H0 M0 0 V0",d].join(" "):t="M 0 0 0 0",e.width=c,e.height=d,vo(l,{d:t,stroke:e.color,"stroke-width":e.thickness})}}];class rp{constructor(){this.patterns={},this.root=sr.create(sv(),{width:"100%",height:"100%"},[Qc("defs")]).node}add(e,t){const o=this.root.childNodes[0];o&&o.appendChild(t),this.patterns[e]=t,sr.create("rect",{width:"100%",height:"100%",fill:`url(#${e})`}).appendTo(this.root)}get(e){return this.patterns[e]}has(e){return this.patterns[e]!=null}}(function(l){l.presets=Q,l.registry=js.create({type:"grid"}),l.registry.register(l.presets,!0)})(rp||(rp={}));function HC(l,e){return l??e}function Wi(l,e){return l!=null&&Number.isFinite(l)?l:e}function uO(l={}){const e=HC(l.color,"blue"),t=Wi(l.width,1),o=Wi(l.margin,2),c=Wi(l.opacity,1),d=o,f=o+t;return`
    <filter>
      <feFlood flood-color="${e}" flood-opacity="${c}" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${f}" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${d}" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `.trim()}function dO(l={}){const e=HC(l.color,"red"),t=Wi(l.blur,0),o=Wi(l.width,1),c=Wi(l.opacity,1);return`
      <filter>
        <feFlood flood-color="${e}" flood-opacity="${c}" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${o}"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="${t}"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `.trim()}function hO(l={}){const e=Wi(l.x,2);return`
    <filter>
      <feGaussianBlur stdDeviation="${l.y!=null&&Number.isFinite(l.y)?[e,l.y]:e}"/>
    </filter>
  `.trim()}function fO(l={}){const e=Wi(l.dx,0),t=Wi(l.dy,0),o=HC(l.color,"black"),c=Wi(l.blur,4),d=Wi(l.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="${c}" dx="${e}" dy="${t}" flood-color="${o}" flood-opacity="${d}" />
       </filter>`.trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="${c}" />
         <feOffset dx="${e}" dy="${t}" result="offsetblur" />
         <feFlood flood-color="${o}" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="${d}" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`.trim()}function pO(l={}){const e=Wi(l.amount,1),t=.2126+.7874*(1-e),o=.7152-.7152*(1-e),c=.0722-.0722*(1-e),d=.2126-.2126*(1-e),f=.7152+.2848*(1-e),v=.0722-.0722*(1-e),b=.2126-.2126*(1-e),w=.0722+.9278*(1-e);return`
    <filter>
      <feColorMatrix type="matrix" values="${t} ${o} ${c} 0 0 ${d} ${f} ${v} 0 0 ${b} ${o} ${w} 0 0 0 0 0 1 0"/>
    </filter>
  `.trim()}function gO(l={}){const e=Wi(l.amount,1),t=.393+.607*(1-e),o=.769-.769*(1-e),c=.189-.189*(1-e),d=.349-.349*(1-e),f=.686+.314*(1-e),v=.168-.168*(1-e),b=.272-.272*(1-e),w=.534-.534*(1-e),_=.131+.869*(1-e);return`
      <filter>
        <feColorMatrix type="matrix" values="${t} ${o} ${c} 0 0 ${d} ${f} ${v} 0 0 ${b} ${w} ${_} 0 0 0 0 0 1 0"/>
      </filter>
    `.trim()}function vO(l={}){const e=Wi(l.amount,1);return`
      <filter>
        <feColorMatrix type="saturate" values="${1-e}"/>
      </filter>
    `.trim()}function mO(l={}){return`
      <filter>
        <feColorMatrix type="hueRotate" values="${Wi(l.angle,0)}"/>
      </filter>
    `.trim()}function yO(l={}){const e=Wi(l.amount,1),t=1-e;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="${e} ${t}"/>
          <feFuncG type="table" tableValues="${e} ${t}"/>
          <feFuncB type="table" tableValues="${e} ${t}"/>
        </feComponentTransfer>
      </filter>
    `.trim()}function bO(l={}){const e=Wi(l.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="${e}"/>
        <feFuncG type="linear" slope="${e}"/>
        <feFuncB type="linear" slope="${e}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}function xO(l={}){const e=Wi(l.amount,1),t=.5-e/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="${e}" intercept="${t}"/>
        <feFuncG type="linear" slope="${e}" intercept="${t}"/>
        <feFuncB type="linear" slope="${e}" intercept="${t}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}var Qg;(function(l){l.presets=de,l.registry=js.create({type:"filter"}),l.registry.register(l.presets,!0)})(Qg||(Qg={}));const d_=function(l){const e=document.createElement("canvas"),t=l.width,o=l.height;e.width=t*2,e.height=o;const c=e.getContext("2d");return c.drawImage(l,0,0,t,o),c.translate(2*t,0),c.scale(-1,1),c.drawImage(l,0,0,t,o),e},h_=function(l){const e=document.createElement("canvas"),t=l.width,o=l.height;e.width=t,e.height=o*2;const c=e.getContext("2d");return c.drawImage(l,0,0,t,o),c.translate(0,2*o),c.scale(1,-1),c.drawImage(l,0,0,t,o),e},f_=function(l){const e=document.createElement("canvas"),t=l.width,o=l.height;e.width=2*t,e.height=2*o;const c=e.getContext("2d");return c.drawImage(l,0,0,t,o),c.setTransform(-1,0,0,-1,e.width,e.height),c.drawImage(l,0,0,t,o),c.setTransform(-1,0,0,1,e.width,0),c.drawImage(l,0,0,t,o),c.setTransform(1,0,0,-1,0,e.height),c.drawImage(l,0,0,t,o),e},CO=function(l,e){const t=l.width,o=l.height,c=document.createElement("canvas");c.width=t*3,c.height=o*3;const d=c.getContext("2d"),f=e.angle!=null?-e.angle:-20,v=ki.toRad(f),b=c.width/4,w=c.height/4;for(let _=0;_<4;_+=1)for(let A=0;A<4;A+=1)(_+A)%2>0&&(d.setTransform(1,0,0,1,(2*_-1)*b,(2*A-1)*w),d.rotate(v),d.drawImage(l,-t/2,-o/2,t,o));return c};var yv;(function(l){l.presets=Object.assign({},oe),l.presets["flip-x"]=d_,l.presets["flip-y"]=h_,l.presets["flip-xy"]=f_,l.registry=js.create({type:"background pattern"}),l.registry.register(l.presets,!0)})(yv||(yv={}));const wu={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!1,trackInfo:{},track(l){wu.trackable=l}};var ha;(function(l){l.snapToGrid=g2,l.normalizeMarker=tp;function e(t){return`${wu.prefixCls}-${t}`}l.prefix=e})(ha||(ha={})),function(l){function e(t,o,c,d=[]){const f=typeof o.children=="function"?o.children(t):t[o.children||"children"];return c||(c=o.createNode(t),d.push(c)),Array.isArray(f)&&f.forEach(v=>{const b=o.createNode(v),w=o.createEdge(c,b);d.push(b,w),this.makeTree(v,o,b,d)}),d}l.makeTree=e}(ha||(ha={}));const p_=ha.prefix("highlighted"),wO={highlight(l,e,t){const o=t&&t.className||p_;co(e,o)},unhighlight(l,e,t){const o=t&&t.className||p_;yc(e,o)}},g_=ha.prefix("highlight-opacity"),EO={highlight(l,e){co(e,g_)},unhighlight(l,e){yc(e,g_)}},SO={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},_O={highlight(l,e,t){const o=Mo.getHighlighterId(e,t);if(Mo.hasCache(o))return;t=Wp({},t,SO);const c=sr.create(e);let d,f;try{d=c.toPathData()}catch{f=c.bbox(!0),d=MS(Object.assign(Object.assign({},t),f))}const v=Qc("path");if(vo(v,Object.assign({d,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},t.attrs?Km(t.attrs):null)),l.isEdgeElement(e))vo(v,"d",l.getConnectionPathData());else{let _=c.getTransformToElement(l.container);const A=t.padding;if(A){f==null&&(f=c.bbox(!0));const P=f.x+f.width/2,V=f.y+f.height/2;f=tl(f,_);const q=Math.max(f.width,1),ee=Math.max(f.height,1),ge=(q+A)/q,_e=(ee+A)/ee,ke=oc({a:ge,b:0,c:0,d:_e,e:P-ge*P,f:V-_e*V});_=_.multiply(ke)}ph(v,_)}co(v,ha.prefix("highlight-stroke"));const b=l.cell,w=()=>Mo.removeHighlighter(o);b.on("removed",w),b.model&&b.model.on("reseted",w),l.container.appendChild(v),Mo.setCache(o,v)},unhighlight(l,e,t){Mo.removeHighlighter(Mo.getHighlighterId(e,t))}};var Mo;(function(l){function e(f,v){return ov(f),f.id+JSON.stringify(v)}l.getHighlighterId=e;const t={};function o(f,v){t[f]=v}l.setCache=o;function c(f){return t[f]!=null}l.hasCache=c;function d(f){const v=t[f];v&&(yd(v),delete t[f])}l.removeHighlighter=d})(Mo||(Mo={}));var ip;(function(l){function e(t,o){if(typeof o.highlight!="function")throw new Error(`Highlighter '${t}' is missing required \`highlight()\` method`);if(typeof o.unhighlight!="function")throw new Error(`Highlighter '${t}' is missing required \`unhighlight()\` method`)}l.check=e})(ip||(ip={})),function(l){l.presets=ie,l.registry=js.create({type:"highlighter"}),l.registry.register(l.presets,!0)}(ip||(ip={}));function $C(l,e={}){return new Ve(md(e.x,l.width),md(e.y,l.height))}function WC(l,e,t){return Object.assign({angle:e,position:l.toJSON()},t)}const AO=(l,e)=>l.map(({x:t,y:o,angle:c})=>WC($C(e,{x:t,y:o}),c||0)),TO=(l,e,t)=>{const o=t.start||0,c=t.step||20;return O2(l,e,o,(d,f)=>(d+.5-f/2)*c)},MO=(l,e,t)=>{const o=t.start||0,c=t.step||360/l.length;return O2(l,e,o,d=>d*c)};function O2(l,e,t,o){const c=e.getCenter(),d=e.getTopCenter(),f=e.width/e.height,v=bd.fromRect(e),b=l.length;return l.map((w,_)=>{const A=t+o(_,b),P=d.clone().rotate(-A,c).scale(f,1,c),V=w.compensateRotate?-v.tangentTheta(P):0;return(w.dx||w.dy)&&P.translate(w.dx||0,w.dy||0),w.dr&&P.move(c,w.dr),WC(P.round(),V,w)})}var v_=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const m_=(l,e,t)=>{const o=$C(e,t.start||e.getOrigin()),c=$C(e,t.end||e.getCorner());return ay(l,o,c,t)},OO=(l,e,t)=>ay(l,e.getTopLeft(),e.getBottomLeft(),t),y_=(l,e,t)=>ay(l,e.getTopRight(),e.getBottomRight(),t),P2=(l,e,t)=>ay(l,e.getTopLeft(),e.getTopRight(),t),PO=(l,e,t)=>ay(l,e.getBottomLeft(),e.getBottomRight(),t);function ay(l,e,t,o){const c=new fr(e,t),d=l.length;return l.map((f,v)=>{var{strict:b}=f,w=v_(f,["strict"]);const _=b||o.strict?(v+1)/(d+1):(v+.5)/d,A=c.pointAt(_);return(w.dx||w.dy)&&A.translate(w.dx||0,w.dy||0),WC(A.round(),0,w)})}var rg;(function(l){l.presets=re,l.registry=js.create({type:"port layout"}),l.registry.register(l.presets,!0)})(rg||(rg={}));const DO={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function Ad(l,e){const{x:t,y:o,angle:c,attrs:d}=e||{};return Wp({},{angle:c,attrs:d,position:{x:t,y:o}},l,DO)}const XC=(l,e,t)=>Ad({position:e.getTopLeft()},t),b_=(l,e,t)=>Ad({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},t),bv=(l,e,t)=>Ad({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},t),NO=(l,e,t)=>Ad({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},t),IO=(l,e,t)=>Ad({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},t),x_=(l,e,t)=>E_(l,e,!1,t),C_=(l,e,t)=>E_(l,e,!0,t),w_=(l,e,t)=>S_(l,e,!1,t),RO=(l,e,t)=>S_(l,e,!0,t);function E_(l,e,t,o){const c=o.offset!=null?o.offset:15,d=e.getCenter().theta(l),f=__(e);let v,b,w,_,A=0;return d<f[1]||d>f[2]?(v=".3em",b=c,w=0,_="start"):d<f[0]?(v="0",b=0,w=-c,t?(A=-90,_="start"):_="middle"):d<f[3]?(v=".3em",b=-c,w=0,_="end"):(v=".6em",b=0,w=c,t?(A=90,_="start"):_="middle"),Ad({position:{x:Math.round(b),y:Math.round(w)},angle:A,attrs:{".":{y:v,"text-anchor":_}}},o)}function S_(l,e,t,o){const c=o.offset!=null?o.offset:15,d=e.getCenter().theta(l),f=__(e);let v,b,w,_,A=0;return d<f[1]||d>f[2]?(v=".3em",b=-c,w=0,_="end"):d<f[0]?(v=".6em",b=0,w=c,t?(A=90,_="start"):_="middle"):d<f[3]?(v=".3em",b=c,w=0,_="start"):(v="0em",b=0,w=-c,t?(A=-90,_="start"):_="middle"),Ad({position:{x:Math.round(b),y:Math.round(w)},angle:A,attrs:{".":{y:v,"text-anchor":_}}},o)}function __(l){const e=l.getCenter(),t=e.theta(l.getTopLeft()),o=e.theta(l.getBottomLeft()),c=e.theta(l.getBottomRight()),d=e.theta(l.getTopRight());return[t,d,c,o]}const D2=(l,e,t)=>N2(l.diff(e.getCenter()),!1,t),kO=(l,e,t)=>N2(l.diff(e.getCenter()),!0,t);function N2(l,e,t){const o=t.offset!=null?t.offset:20,c=new Ve(0,0),d=-l.theta(c),f=l.clone().move(c,o).diff(l).round();let v=".3em",b,w=d;return(d+90)%180===0?(b=e?"end":"middle",!e&&d===-270&&(v="0em")):d>-270&&d<-90?(b="start",w=d-180):b="end",Ad({position:f.round().toJSON(),angle:e?w:0,attrs:{".":{y:v,"text-anchor":b}}},t)}var e0;(function(l){l.presets=he,l.registry=js.create({type:"port label layout"}),l.registry.register(l.presets,!0)})(e0||(e0={}));class Zl{constructor(e,t,o,c){if(e==null)return this.set(255,255,255,1);if(typeof e=="number")return this.set(e,t,o,c);if(typeof e=="string")return Zl.fromString(e)||this;if(Array.isArray(e))return this.set(e);this.set(e.r,e.g,e.b,e.a==null?1:e.a)}blend(e,t,o){this.set(e.r+(t.r-e.r)*o,e.g+(t.g-e.g)*o,e.b+(t.b-e.b)*o,e.a+(t.a-e.a)*o)}lighten(e){const t=Zl.lighten(this.toArray(),e);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}darken(e){this.lighten(-e)}set(e,t,o,c){const d=Array.isArray(e)?e[0]:e,f=Array.isArray(e)?e[1]:t,v=Array.isArray(e)?e[2]:o,b=Array.isArray(e)?e[3]:c;return this.r=Math.round(Jc(d,0,255)),this.g=Math.round(Jc(f,0,255)),this.b=Math.round(Jc(v,0,255)),this.a=b==null?1:Jc(b,0,1),this}toHex(){return`#${["r","g","b"].map(t=>{const o=this[t].toString(16);return o.length<2?`0${o}`:o}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return Zl.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(e){const t=`${this.r},${this.g},${this.b},`;return e?`rgb(${t})`:`rgba(${t},${this.a})`}toGrey(){return Zl.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(l){function e(Se){return new l(Se)}l.fromArray=e;function t(Se){return new l([...q(Se),1])}l.fromHex=t;function o(Se){const Ue=Se.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(Ue){const Qe=Ue[1].split(/\s*,\s*/).map(bt=>parseInt(bt,10));return new l(Qe)}return null}l.fromRGBA=o;function c(Se,Ue,Qe){Qe<0&&++Qe,Qe>1&&--Qe;const bt=6*Qe;return bt<1?Se+(Ue-Se)*bt:2*Qe<1?Ue:3*Qe<2?Se+(Ue-Se)*(2/3-Qe)*6:Se}function d(Se){const Ue=Se.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(Ue){const Qe=Ue[2].split(/\s*,\s*/),bt=(parseFloat(Qe[0])%360+360)%360/360,Ot=parseFloat(Qe[1])/100,Kt=parseFloat(Qe[2])/100,Fn=Qe[3]==null?1:parseInt(Qe[3],10);return new l(w(bt,Ot,Kt,Fn))}return null}l.fromHSLA=d;function f(Se){if(Se.startsWith("#"))return t(Se);if(Se.startsWith("rgb"))return o(Se);const Ue=l.named[Se];return Ue?t(Ue):d(Se)}l.fromString=f;function v(Se,Ue){return l.fromArray([Se,Se,Se,Ue])}l.makeGrey=v;function b(Se,Ue,Qe,bt){const Ot=Array.isArray(Se)?Se[0]:Se,Kt=Array.isArray(Se)?Se[1]:Ue,Fn=Array.isArray(Se)?Se[2]:Qe,Cn=Array.isArray(Se)?Se[3]:bt,Sn=Math.max(Ot,Kt,Fn),Ln=Math.min(Ot,Kt,Fn),Jr=(Sn+Ln)/2;let ii=0,Ht=0;if(Ln!==Sn){const Pn=Sn-Ln;switch(Ht=Jr>.5?Pn/(2-Sn-Ln):Pn/(Sn+Ln),Sn){case Ot:ii=(Kt-Fn)/Pn+(Kt<Fn?6:0);break;case Kt:ii=(Fn-Ot)/Pn+2;break;case Fn:ii=(Ot-Kt)/Pn+4;break;default:break}ii/=6}return[ii,Ht,Jr,Cn??1]}l.rgba2hsla=b;function w(Se,Ue,Qe,bt){const Ot=Array.isArray(Se)?Se[0]:Se,Kt=Array.isArray(Se)?Se[1]:Ue,Fn=Array.isArray(Se)?Se[2]:Qe,Cn=Array.isArray(Se)?Se[3]:bt,Sn=Fn<=.5?Fn*(Kt+1):Fn+Kt-Fn*Kt,Ln=2*Fn-Sn;return[c(Ln,Sn,Ot+1/3)*256,c(Ln,Sn,Ot)*256,c(Ln,Sn,Ot-1/3)*256,Cn??1]}l.hsla2rgba=w;function _(Se){return new l(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),Se?void 0:parseFloat(Math.random().toFixed(2)))}l.random=_;function A(){const Se="0123456789ABCDEF";let Ue="#";for(let Qe=0;Qe<6;Qe+=1)Ue+=Se[Math.floor(Math.random()*16)];return Ue}l.randomHex=A;function P(Se){return _(Se).toString()}l.randomRGBA=P;function V(Se,Ue){if(typeof Se=="string"){const Fn=Se[0]==="#",[Cn,Sn,Ln]=q(Se);return Ue?Cn*.299+Sn*.587+Ln*.114>186?"#000000":"#ffffff":`${Fn?"#":""}${ee(255-Cn,255-Sn,255-Ln)}`}const Qe=Se[0],bt=Se[1],Ot=Se[2],Kt=Se[3];return Ue?Qe*.299+bt*.587+Ot*.114>186?[0,0,0,Kt]:[255,255,255,Kt]:[255-Qe,255-bt,255-Ot,Kt]}l.invert=V;function q(Se){const Ue=Se.indexOf("#")===0?Se:`#${Se}`;let Qe=Number(`0x${Ue.substr(1)}`);if(!(Ue.length===4||Ue.length===7)||Number.isNaN(Qe))throw new Error("Invalid hex color.");const bt=Ue.length===4?4:8,Ot=(1<<bt)-1,Kt=["b","g","r"].map(()=>{const Fn=Qe&Ot;return Qe>>=bt,bt===4?17*Fn:Fn});return[Kt[2],Kt[1],Kt[0]]}function ee(Se,Ue,Qe){const bt=Ot=>Ot.length<2?`0${Ot}`:Ot;return`${bt(Se.toString(16))}${bt(Ue.toString(16))}${bt(Qe.toString(16))}`}function ge(Se,Ue){return ke(Se,Ue)}l.lighten=ge;function _e(Se,Ue){return ke(Se,-Ue)}l.darken=_e;function ke(Se,Ue){if(typeof Se=="string"){const Ot=Se[0]==="#",Kt=parseInt(Ot?Se.substr(1):Se,16),Fn=Jc((Kt>>16)+Ue,0,255),Cn=Jc((Kt>>8&255)+Ue,0,255),Sn=Jc((Kt&255)+Ue,0,255);return`${Ot?"#":""}${(Sn|Cn<<8|Fn<<16).toString(16)}`}const Qe=ee(Se[0],Se[1],Se[2]),bt=q(ke(Qe,Ue));return[bt[0],bt[1],bt[2],Se[3]]}})(Zl||(Zl={})),function(l){l.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(Zl||(Zl={}));class LO{constructor(){this.listeners={}}on(e,t,o){return t==null?this:(this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t,o),this)}once(e,t,o){const c=(...d)=>(this.off(e,c),cy.call([t,o],d));return this.on(e,c,this)}off(e,t,o){if(!(e||t||o))return this.listeners={},this;const c=this.listeners;return(e?[e]:Object.keys(c)).forEach(f=>{const v=c[f];if(!!v){if(!(t||o)){delete c[f];return}for(let b=v.length-2;b>=0;b-=2)t&&v[b]!==t||o&&v[b+1]!==o||v.splice(b,2)}}),this}trigger(e,...t){let o=!0;if(e!=="*"){const d=this.listeners[e];d!=null&&(o=cy.call([...d],t))}const c=this.listeners["*"];return c!=null?Hg([o,cy.call([...c],[e,...t])]):o}emit(e,...t){return this.trigger(e,...t)}}var cy;(function(l){function e(t,o){const c=[];for(let d=0;d<t.length;d+=2){const f=t[d],v=t[d+1],b=Array.isArray(o)?o:[o],w=$m(f,v,b);c.push(w)}return Hg(c)}l.call=e})(cy||(cy={}));class mh{get disposed(){return this._disposed===!0}dispose(){this._disposed=!0}}(function(l){function e(){return(t,o,c)=>{const d=c.value,f=t.__proto__;c.value=function(){this.disposed||(d.call(this),f.dispose.call(this))}}}l.dispose=e})(mh||(mh={}));class UP{constructor(e){this.callback=e}get disposed(){return!this.callback}dispose(){if(!this.callback)return;const e=this.callback;this.callback=null,e()}}class rf{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(e=>{e.dispose()}),this.items.clear())}contains(e){return this.items.has(e)}add(e){this.items.add(e)}remove(e){this.items.delete(e)}clear(){this.items.clear()}}(function(l){function e(t){const o=new l;return t.forEach(c=>{o.add(c)}),o}l.from=e})(rf||(rf={}));class Ss extends LO{}(function(l){l.dispose=mh.dispose})(Ss||(Ss={})),Om(Ss,mh);class ig extends Ss{get disabled(){return this._disabled===!0}enable(){delete this._disabled}disable(){this._disabled=!0}}var Sl=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class op extends mh{constructor(){super(),this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(e){return this.map.has(e)}get(e){return this.map.get(e)}set(e,t){this.map.set(e,t),this.arr.push(e)}delete(e){const t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);const o=this.map.get(e);return this.map.delete(e),o}each(e){this.arr.forEach(t=>{const o=this.map.get(t);e(o,t)})}dispose(){this.clear()}}Sl([mh.dispose()],op.prototype,"dispose",null);class og{constructor(e={}){this.comparator=e.comparator||og.defaultComparator,this.index={},this.data=e.data||[],this.heapify()}isEmpty(){return this.data.length===0}insert(e,t,o){const c={priority:e,value:t},d=this.data.length;return o&&(c.id=o,this.index[o]=d),this.data.push(c),this.bubbleUp(d),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(e,t){const o=this.index[e];if(typeof o>"u")throw new Error(`Node with id '${e}' was not found in the heap.`);const c=this.data,d=c[o].priority,f=this.comparator(t,d);f<0?(c[o].priority=t,this.bubbleUp(o)):f>0&&(c[o].priority=t,this.bubbleDown(o))}remove(){const e=this.data,t=e[0],o=e.pop();return t.id&&delete this.index[t.id],e.length>0&&(e[0]=o,o.id&&(this.index[o.id]=0),this.bubbleDown(0)),t?t.value:null}heapify(){for(let e=0;e<this.data.length;e+=1)this.bubbleUp(e)}bubbleUp(e){const t=this.data;let o,c,d=e;for(;d>0&&(c=d-1>>>1,this.comparator(t[d].priority,t[c].priority)<0);){o=t[c],t[c]=t[d];let f=t[d].id;f!=null&&(this.index[f]=c),t[d]=o,f=t[d].id,f!=null&&(this.index[f]=d),d=c}}bubbleDown(e){const t=this.data,o=t.length-1;let c=e;for(;;){const d=(c<<1)+1,f=d+1;let v=c;if(d<=o&&this.comparator(t[d].priority,t[v].priority)<0&&(v=d),f<=o&&this.comparator(t[f].priority,t[v].priority)<0&&(v=f),v!==c){const b=t[v];t[v]=t[c];let w=t[c].id;w!=null&&(this.index[w]=v),t[c]=b,w=t[c].id,w!=null&&(this.index[w]=c),c=v}else break}}}(function(l){l.defaultComparator=(e,t)=>e-t})(og||(og={}));var t0;(function(l){function e(t,o,c=(d,f)=>1){const d={},f={},v={},b=new og;for(d[o]=0,Object.keys(t).forEach(w=>{w!==o&&(d[w]=1/0),b.insert(d[w],w,w)});!b.isEmpty();){const w=b.remove();v[w]=!0;const _=t[w]||[];for(let A=0;A<_.length;A+=1){const P=_[A];if(!v[P]){const V=d[w]+c(w,P);V<d[P]&&(d[P]=V,f[P]=w,b.updatePriority(P,V))}}}return f}l.run=e})(t0||(t0={}));var n0;(function(l){l.linear=e=>e,l.quad=e=>e*e,l.cubic=e=>e*e*e,l.inout=e=>{if(e<=0)return 0;if(e>=1)return 1;const t=e*e,o=t*e;return 4*(e<.5?o:3*(e-t)+o-.75)},l.exponential=e=>Math.pow(2,10*(e-1)),l.bounce=e=>{for(let t=0,o=1;;t+=o,o/=2)if(e>=(7-4*t)/11){const c=(11-6*t-11*e)/4;return-c*c+o*o}}})(n0||(n0={})),function(l){l.decorators={reverse(e){return t=>1-e(1-t)},reflect(e){return t=>.5*(t<.5?e(2*t):2-e(2-2*t))},clamp(e,t=0,o=1){return c=>{const d=e(c);return d<t?t:d>o?o:d}},back(e=1.70158){return t=>t*t*((e+1)*t-e)},elastic(e=1.5){return t=>Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}}(n0||(n0={})),function(l){function e(Ht){return-1*Math.cos(Ht*(Math.PI/2))+1}l.easeInSine=e;function t(Ht){return Math.sin(Ht*(Math.PI/2))}l.easeOutSine=t;function o(Ht){return-.5*(Math.cos(Math.PI*Ht)-1)}l.easeInOutSine=o;function c(Ht){return Ht*Ht}l.easeInQuad=c;function d(Ht){return Ht*(2-Ht)}l.easeOutQuad=d;function f(Ht){return Ht<.5?2*Ht*Ht:-1+(4-2*Ht)*Ht}l.easeInOutQuad=f;function v(Ht){return Ht*Ht*Ht}l.easeInCubic=v;function b(Ht){const Pn=Ht-1;return Pn*Pn*Pn+1}l.easeOutCubic=b;function w(Ht){return Ht<.5?4*Ht*Ht*Ht:(Ht-1)*(2*Ht-2)*(2*Ht-2)+1}l.easeInOutCubic=w;function _(Ht){return Ht*Ht*Ht*Ht}l.easeInQuart=_;function A(Ht){const Pn=Ht-1;return 1-Pn*Pn*Pn*Pn}l.easeOutQuart=A;function P(Ht){const Pn=Ht-1;return Ht<.5?8*Ht*Ht*Ht*Ht:1-8*Pn*Pn*Pn*Pn}l.easeInOutQuart=P;function V(Ht){return Ht*Ht*Ht*Ht*Ht}l.easeInQuint=V;function q(Ht){const Pn=Ht-1;return 1+Pn*Pn*Pn*Pn*Pn}l.easeOutQuint=q;function ee(Ht){const Pn=Ht-1;return Ht<.5?16*Ht*Ht*Ht*Ht*Ht:1+16*Pn*Pn*Pn*Pn*Pn}l.easeInOutQuint=ee;function ge(Ht){return Ht===0?0:Math.pow(2,10*(Ht-1))}l.easeInExpo=ge;function _e(Ht){return Ht===1?1:-Math.pow(2,-10*Ht)+1}l.easeOutExpo=_e;function ke(Ht){if(Ht===0||Ht===1)return Ht;const Pn=Ht*2,Rr=Pn-1;return Pn<1?.5*Math.pow(2,10*Rr):.5*(-Math.pow(2,-10*Rr)+2)}l.easeInOutExpo=ke;function Se(Ht){const Pn=Ht/1;return-1*(Math.sqrt(1-Pn*Ht)-1)}l.easeInCirc=Se;function Ue(Ht){const Pn=Ht-1;return Math.sqrt(1-Pn*Pn)}l.easeOutCirc=Ue;function Qe(Ht){const Pn=Ht*2,Rr=Pn-2;return Pn<1?-.5*(Math.sqrt(1-Pn*Pn)-1):.5*(Math.sqrt(1-Rr*Rr)+1)}l.easeInOutCirc=Qe;function bt(Ht,Pn=1.70158){return Ht*Ht*((Pn+1)*Ht-Pn)}l.easeInBack=bt;function Ot(Ht,Pn=1.70158){const Rr=Ht/1-1;return Rr*Rr*((Pn+1)*Rr+Pn)+1}l.easeOutBack=Ot;function Kt(Ht,Pn=1.70158){const Rr=Ht*2,Ro=Rr-2,as=Pn*1.525;return Rr<1?.5*Rr*Rr*((as+1)*Rr-as):.5*(Ro*Ro*((as+1)*Ro+as)+2)}l.easeInOutBack=Kt;function Fn(Ht,Pn=.7){if(Ht===0||Ht===1)return Ht;const Ro=Ht/1-1,as=1-Pn,Oa=as/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*Ro)*Math.sin((Ro-Oa)*(2*Math.PI)/as))}l.easeInElastic=Fn;function Cn(Ht,Pn=.7){const Rr=1-Pn,Ro=Ht*2;if(Ht===0||Ht===1)return Ht;const as=Rr/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*Ro)*Math.sin((Ro-as)*(2*Math.PI)/Rr)+1}l.easeOutElastic=Cn;function Sn(Ht,Pn=.65){const Rr=1-Pn;if(Ht===0||Ht===1)return Ht;const Ro=Ht*2,as=Ro-1,Oa=Rr/(2*Math.PI)*Math.asin(1);return Ro<1?-.5*(Math.pow(2,10*as)*Math.sin((as-Oa)*(2*Math.PI)/Rr)):Math.pow(2,-10*as)*Math.sin((as-Oa)*(2*Math.PI)/Rr)*.5+1}l.easeInOutElastic=Sn;function Ln(Ht){const Pn=Ht/1;if(Pn<1/2.75)return 7.5625*Pn*Pn;if(Pn<2/2.75){const Rr=Pn-.5454545454545454;return 7.5625*Rr*Rr+.75}if(Pn<2.5/2.75){const Rr=Pn-.8181818181818182;return 7.5625*Rr*Rr+.9375}{const Rr=Pn-.9545454545454546;return 7.5625*Rr*Rr+.984375}}l.easeOutBounce=Ln;function Jr(Ht){return 1-Ln(1-Ht)}l.easeInBounce=Jr;function ii(Ht){return Ht<.5?Jr(Ht*2)*.5:Ln(Ht*2-1)*.5+.5}l.easeInOutBounce=ii}(n0||(n0={}));var r0;(function(l){l.number=(e,t)=>{const o=t-e;return c=>e+o*c},l.object=(e,t)=>{const o=Object.keys(e);return c=>{const d={};for(let f=o.length-1;f!==-1;f-=1){const v=o[f];d[v]=e[v]+(t[v]-e[v])*c}return d}},l.unit=(e,t)=>{const o=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,c=o.exec(e),d=o.exec(t),f=d?d[1]:"",v=c?+c[1]:0,b=d?+d[1]:0,w=f.indexOf("."),_=w>0?f[1].length-w-1:0,A=b-v,P=c?c[2]:"";return V=>(v+A*V).toFixed(_)+P},l.color=(e,t)=>{const o=parseInt(e.slice(1),16),c=parseInt(t.slice(1),16),d=o&255,f=(c&255)-d,v=o&65280,b=(c&65280)-v,w=o&16711680,_=(c&16711680)-w;return A=>{const P=d+f*A&255,V=v+b*A&65280,q=w+_*A&16711680;return`#${(1<<24|P|V|q).toString(16).slice(1)}`}}})(r0||(r0={}));var ZC;(function(l){const e=`${wu.prefixCls}.storage`;function t(A,P,V){const q=P.id||jx("doc-"),ee=b(A);ee.keys.push(q),f(w(A,q),P),f(_(A),ee),d(V,null,Object.assign(Object.assign({},P),{id:q}))}l.insert=t;function o(A,P,V){const q=b(A),ee=[];if(P==null)q.keys.forEach(ge=>{const _e=v(w(A,ge));_e?ee.push(_e):d(V,new Error(`No document found for an ID '${ge}' from index.`))}),d(V,null,ee);else if(P.id){const ge=v(w(A,P.id));d(V,null,ge?[ge]:[])}else d(V,null,[])}l.find=o;function c(A,P,V){const q=b(A);if(P==null)q.keys.forEach(ee=>{localStorage.removeItem(w(A,ee))}),localStorage.removeItem(_(A)),d(V,null);else if(P.id){const ee=q.keys.indexOf(P.id);ee>=0&&q.keys.splice(ee,1),localStorage.removeItem(w(A,P.id)),f(_(A),q),d(V,null)}}l.remove=c;function d(A,P,V){A&&dC(()=>{A(P,V)})}function f(A,P){localStorage.setItem(A,JSON.stringify(P))}function v(A){const P=localStorage.getItem(A);return P?JSON.parse(P):null}function b(A){const P=v(_(A));return P?(P.keys==null&&(P.keys=[]),P):{keys:[]}}function w(A,P){return`${e}.${A}.docs.${P}`}function _(A){return`${e}.${A}.index`}})(ZC||(ZC={}));class Ai extends Ss{constructor(){super(),this.cid=YC.uniqueId(),Ai.views[this.cid]=this}get priority(){return 2}confirmUpdate(e,t){return 0}$(e){return Ai.$(e)}empty(e=this.container){return this.$(e).empty(),this}unmount(e=this.container){return this.$(e).remove(),this}remove(e=this.container){return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete Ai.views[this.cid]),this.unmount(e),this}onRemove(){}setClass(e,t=this.container){t.classList.value=Array.isArray(e)?e.join(" "):e}addClass(e,t=this.container){return this.$(t).addClass(Array.isArray(e)?e.join(" "):e),this}removeClass(e,t=this.container){return this.$(t).removeClass(Array.isArray(e)?e.join(" "):e),this}setStyle(e,t=this.container){return this.$(t).css(e),this}setAttrs(e,t=this.container){return e!=null&&t!=null&&(t instanceof SVGElement?vo(t,e):this.$(t).attr(e)),this}findAttr(e,t=this.container){let o=t;for(;o&&o.nodeType===1;){const c=o.getAttribute(e);if(c!=null)return c;if(o===this.container)return null;o=o.parentNode}return null}find(e,t=this.container,o=this.selectors){return Ai.find(e,t,o).elems}findOne(e,t=this.container,o=this.selectors){const c=this.find(e,t,o);return c.length>0?c[0]:null}findByAttr(e,t=this.container){let o=t;for(;o&&o.getAttribute;){const c=o.getAttribute(e);if((c!=null||o===this.container)&&c!=="false")return o;o=o.parentNode}return null}getSelector(e,t){let o;if(e===this.container)return typeof t=="string"&&(o=`> ${t}`),o;if(e){const c=Xm(e)+1;o=`${e.tagName.toLowerCase()}:nth-child(${c})`,t&&(o+=` > ${t}`),o=this.getSelector(e.parentNode,o)}return o}prefixClassName(e){return ha.prefix(e)}delegateEvents(e,t){if(e==null)return this;t||this.undelegateEvents();const o=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(c=>{const d=c.match(o);if(d==null)return;const f=this.getEventHandler(e[c]);typeof f=="function"&&this.delegateEvent(d[1],d[2],f)}),this}undelegateEvents(){return this.$(this.container).off(this.getEventNamespace()),this}delegateDocumentEvents(e,t){return this.addEventListeners(document,e,t),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(e,t,o){return this.$(this.container).on(e+this.getEventNamespace(),t,o),this}undelegateEvent(e,t,o){const c=e+this.getEventNamespace();return t==null?this.$(this.container).off(c):typeof t=="string"?this.$(this.container).off(c,t,o):this.$(this.container).off(c,t),this}addEventListeners(e,t,o){if(t==null)return this;const c=this.getEventNamespace(),d=this.$(e);return Object.keys(t).forEach(f=>{const v=this.getEventHandler(t[f]);typeof v=="function"&&d.on(f+c,o,v)}),this}removeEventListeners(e){return e!=null&&this.$(e).off(this.getEventNamespace()),this}getEventNamespace(){return`.${wu.prefixCls}-event-${this.cid}`}getEventHandler(e){let t;if(typeof e=="string"){const o=this[e];typeof o=="function"&&(t=(...c)=>o.call(this,...c))}else t=(...o)=>e.call(this,...o);return t}getEventTarget(e,t={}){const{target:o,type:c,clientX:d=0,clientY:f=0}=e;return t.fromPoint||c==="touchmove"||c==="touchend"?document.elementFromPoint(d,f):o}stopPropagation(e){return this.setEventData(e,{propagationStopped:!0}),this}isPropagationStopped(e){return this.getEventData(e).propagationStopped===!0}getEventData(e){return this.eventData(e)}setEventData(e,t){return this.eventData(e,t)}eventData(e,t){if(e==null)throw new TypeError("Event object required");let o=e.data;const c=`__${this.cid}__`;return t==null?o==null?{}:o[c]||{}:(o==null&&(o=e.data={}),o[c]==null?o[c]=Object.assign({},t):o[c]=Object.assign(Object.assign({},o[c]),t),o[c])}normalizeEvent(e){return Ai.normalizeEvent(e)}}(function(l){function e(d){return G()(d)}l.$=e;function t(d,f){return f?Qc(d||"g"):c2(d||"div")}l.createElement=t;function o(d,f,v){if(!d||d===".")return{elems:[f]};if(v){const b=v[d];if(b)return{elems:Array.isArray(b)?b:[b]}}return wu.useCSSSelector?{isCSSSelector:!0,elems:e(f).find(d).toArray()}:{elems:[]}}l.find=o;function c(d){let f=d;const v=d.originalEvent,b=v&&v.changedTouches&&v.changedTouches[0];if(b){for(const _ in d)b[_]===void 0&&(b[_]=d[_]);f=b}const w=f.target;if(w){const _=w.correspondingUseElement;_&&(f.target=_)}return f}l.normalizeEvent=c})(Ai||(Ai={})),function(l){l.views={};function e(t){return l.views[t]||null}l.getView=e}(Ai||(Ai={}));var YC;(function(l){let e=0;function t(){const o=`v${e}`;return e+=1,o}l.uniqueId=t})(YC||(YC={}));const A_=l=>l;function I2(l,e){return e===0?"0%":`${Math.round(l/e*100)}%`}function T_(l){return(t,o,c,d)=>o.isEdgeElement(c)?FO(l,t,o,c,d):GO(l,t,o,c,d)}function GO(l,e,t,o,c){const d=t.cell,f=d.getAngle(),v=t.getUnrotatedBBoxOfElement(o),b=d.getBBox().getCenter(),w=Ve.create(c).rotate(f,b);let _=w.x-v.x,A=w.y-v.y;return l&&(_=I2(_,v.width),A=I2(A,v.height)),e.anchor={name:"topLeft",args:{dx:_,dy:A,rotate:!0}},e}function FO(l,e,t,o,c){const d=t.getConnection();if(!d)return e;const f=d.closestPointLength(c);if(l){const v=d.length();e.anchor={name:"ratio",args:{ratio:f/v}}}else e.anchor={name:"length",args:{length:f}};return e}const M_=T_(!0),xv=T_(!1);var i0;(function(l){l.presets=De,l.registry=js.create({type:"connection strategy"}),l.registry.register(l.presets,!0)})(i0||(i0={}));class BO{constructor(e){this.view=e,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new op,this.pathCache={}}get(e){return this.elemCache.has(e)||this.elemCache.set(e,{}),this.elemCache.get(e)}getData(e){const t=this.get(e);return t.data||(t.data={}),t.data}getMatrix(e){const t=this.get(e);if(t.matrix==null){const o=this.view.rotatableNode||this.view.container;t.matrix=Ed(e,o)}return oc(t.matrix)}getShape(e){const t=this.get(e);return t.shape==null&&(t.shape=fh(e)),t.shape.clone()}getBoundingRect(e){const t=this.get(e);return t.boundingRect==null&&(t.boundingRect=Ta(e)),t.boundingRect.clone()}}var Xi;(function(l){function e(_){return _!=null&&!t(_)}l.isJSONMarkup=e;function t(_){return _!=null&&typeof _=="string"}l.isStringMarkup=t;function o(_){return _==null||t(_)?_:Yo(_)}l.clone=o;function c(_){return`${_}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}l.sanitize=c;function d(_){const A=document.createDocumentFragment(),P={},V={},q=c(_);return GE(q,{raw:!0}).forEach(ge=>{A.appendChild(ge)}),{fragment:A,selectors:V,groups:P}}l.parseStringMarkup=d;function f(_,A={ns:Aa.svg}){const P=document.createDocumentFragment(),V={},q={},ee=[{markup:Array.isArray(_)?_:[_],parent:P,ns:A.ns}];for(;ee.length>0;){const ge=ee.pop();let _e=ge.ns||Aa.svg;const ke=ge.markup,Se=ge.parent;ke.forEach(Ue=>{const Qe=Ue.tagName;if(!Qe)throw new TypeError("Invalid tagName");Ue.ns&&(_e=Ue.ns);const bt=_e===Aa.svg,Ot=_e?c2(Qe,_e):vC(Qe),Kt=Ue.attrs;Kt&&(bt?vo(Ot,Km(Kt)):G()(Ot).attr(Kt));const Fn=Ue.style;Fn&&G()(Ot).css(Fn);const Cn=Ue.className;Cn!=null&&Ot.setAttribute("class",Array.isArray(Cn)?Cn.join(" "):Cn),Ue.textContent&&(Ot.textContent=Ue.textContent);const Sn=Ue.selector;if(Sn!=null){if(q[Sn])throw new TypeError("Selector must be unique");q[Sn]=Ot}if(Ue.groupSelector){let Jr=Ue.groupSelector;Array.isArray(Jr)||(Jr=[Jr]),Jr.forEach(ii=>{V[ii]||(V[ii]=[]),V[ii].push(Ot)})}Se.appendChild(Ot);const Ln=Ue.children;Array.isArray(Ln)&&ee.push({ns:_e,markup:Ln,parent:Ot})})}return Object.keys(V).forEach(ge=>{if(q[ge])throw new Error("Ambiguous group selector");q[ge]=V[ge]}),{fragment:P,selectors:q,groups:V}}l.parseJSONMarkup=f;function v(_){return _ instanceof SVGElement?Qc("g"):vC("div")}function b(_){if(t(_)){const q=sr.createVectors(_),ee=q.length;if(ee===1)return{elem:q[0].node};if(ee>1){const ge=v(q[0].node);return q.forEach(_e=>{ge.appendChild(_e.node)}),{elem:ge}}return{}}const A=f(_),P=A.fragment;let V=null;return P.childNodes.length>1?(V=v(P.firstChild),V.appendChild(P)):V=P.firstChild,{elem:V,selectors:A.selectors}}l.renderMarkup=b;function w(_){const A=sr.createVectors(_),P=document.createDocumentFragment();for(let V=0,q=A.length;V<q;V+=1){const ee=A[V].node;P.appendChild(ee)}return{fragment:P,selectors:{}}}l.parseLabelStringMarkup=w})(Xi||(Xi={})),function(l){function e(c,d,f){if(c!=null){let v;const b=c.tagName.toLowerCase();if(c===d)return typeof f=="string"?v=`> ${b} > ${f}`:v=`> ${b}`,v;const w=c.parentNode;if(w&&w.childNodes.length>1){const _=Xm(c)+1;v=`${b}:nth-child(${_})`}else v=b;return f&&(v+=` > ${f}`),e(c.parentNode,d,v)}return f}l.getSelector=e;function t(c,d,f){if(c.nodeName==="#text")return null;let v=null,b=null,w=null,_=!1;const A={tagName:c.tagName};if(c.attributes){w={};for(let P=0,V=c.attributes.length;P<V;P+=1){const q=c.attributes[P],ee=q.nodeName,ge=q.nodeValue;ee==="selector"?v=ge:ee==="groupSelector"?b=ge:ee==="class"?A.attrs={class:ge}:w[ee]=ge}}return v==null&&(_=!0,v=e(c,d)),c.namespaceURI&&(A.ns=c.namespaceURI),A.ns==null&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(c.tagName)?A.ns=Aa.xhtml:f&&(A.ns=f)),v&&(A.selector=v),b!=null&&(A.groupSelector=b),{markup:A,attrs:w,isCSSSelector:_}}function o(c){const d=l.sanitize(c),f=l2(d,{mimeType:"image/svg+xml"}),v=Array.prototype.slice.call(f.childNodes),b={},w=new WeakMap,_=(P,V,q)=>{const ee=t(P,V,q);if(ee==null){const ge=w.get(P.parentNode);ge&&P.textContent&&(ge.textContent=P.textContent)}else{const{markup:ge,attrs:_e,isCSSSelector:ke}=ee;if(w.set(P,ge),ge.selector&&_e!=null&&(Object.keys(_e).length&&(b[ge.selector]=_e),ke&&delete ge.selector),P.childNodes&&P.childNodes.length>0)for(let Se=0,Ue=P.childNodes.length;Se<Ue;Se+=1){const Qe=P.childNodes[Se],bt=_(Qe,V,ge.ns);bt&&(ge.children==null&&(ge.children=[]),ge.children.push(bt))}return ge}};return{markup:v.map(P=>_(P,P)).filter(P=>P!=null),attrs:b}}l.xml2json=o}(Xi||(Xi={})),function(l){function e(){return"g"}l.getPortContainerMarkup=e;function t(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}l.getPortMarkup=t;function o(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}l.getPortLabelMarkup=o}(Xi||(Xi={})),function(l){function e(){return l.sanitize(`
    <path class="connection" stroke="black" d="M 0 0 0 0"/>
    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="connection-wrap" d="M 0 0 0 0"/>
    <g class="labels"/>
    <g class="vertices"/>
    <g class="arrowheads"/>
    <g class="tools"/>
  `)}l.getEdgeMarkup=e;function t(){return l.sanitize(`
    <g class="edge-tool">
      <g class="tool-remove" event="edge:remove">
        <circle r="11" />
        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />
        <title>Remove edge.</title>
      </g>
      <g class="tool-options" event="edge:options">
        <circle r="11" transform="translate(25)"/>
        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>
        <title>Edge options.</title>
      </g>
    </g>
  `)}l.getEdgeToolMarkup=t;function o(){return l.sanitize(`
    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">
      <circle class="vertex" data-index="<%= index %>" r="10" />
      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>
      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">
      <title>Remove vertex.</title>
      </path>
    </g>
  `)}l.getEdgeVertexMarkup=o;function c(){return l.sanitize(`
    <g class="arrowhead-group arrowhead-group-<%= end %>">
      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />
    </g>
  `)}l.getEdgeArrowheadMarkup=c}(Xi||(Xi={})),function(l){function e(t=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:Aa.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:Aa.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:t?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}l.getForeignObjectMarkup=e}(Xi||(Xi={}));class o0{constructor(e){this.view=e}get cell(){return this.view.cell}getDefinition(e){return this.cell.getAttrDefinition(e)}processAttrs(e,t){let o,c,d,f,v;const b=[];return Object.keys(t).forEach(w=>{const _=t[w],A=this.getDefinition(w),P=er(vh.isValidDefinition,this.view,A,_,{elem:e,attrs:t,cell:this.cell,view:this.view});if(A&&P)typeof A=="string"?(o==null&&(o={}),o[A]=_):_!==null&&b.push({name:w,definition:A});else{o==null&&(o={});const V=fS.includes(w)?w:tC(w);o[V]=_}}),b.forEach(({name:w,definition:_})=>{const A=t[w];typeof _.set=="function"&&(!h2(e)&&o0.DELAY_ATTRS.includes(w)?(v==null&&(v={}),v[w]=A):(c==null&&(c={}),c[w]=A)),typeof _.offset=="function"&&(d==null&&(d={}),d[w]=A),typeof _.position=="function"&&(f==null&&(f={}),f[w]=A)}),{raw:t,normal:o,set:c,offset:d,position:f,delay:v}}mergeProcessedAttrs(e,t){e.set=Object.assign(Object.assign({},e.set),t.set),e.position=Object.assign(Object.assign({},e.position),t.position),e.offset=Object.assign(Object.assign({},e.offset),t.offset);const o=e.normal&&e.normal.transform;o!=null&&t.normal&&(t.normal.transform=o),e.normal=t.normal}findAttrs(e,t,o,c){const d=[],f=new op;return Object.keys(e).forEach(v=>{const b=e[v];if(!Xc(b))return;const{isCSSSelector:w,elems:_}=Ai.find(v,t,c);o[v]=_;for(let A=0,P=_.length;A<P;A+=1){const V=_[A],q=c&&c[v]===V,ee=f.get(V);if(ee){ee.array||(d.push(V),ee.array=!0,ee.attrs=[ee.attrs],ee.priority=[ee.priority]);const ge=ee.attrs,_e=ee.priority;if(q)ge.unshift(b),_e.unshift(-1);else{const ke=lt(_e,w?-1:P);ge.splice(ke,0,b),_e.splice(ke,0,P)}}else f.set(V,{elem:V,attrs:b,priority:q?-1:P,array:!1})}}),d.forEach(v=>{const b=f.get(v),w=b.attrs;b.attrs=w.reduceRight((_,A)=>wo(_,A),{})}),f}updateRelativeAttrs(e,t,o,c){const d=t.raw||{};let f=t.normal||{};const v=t.set,b=t.position,w=t.offset,_=t.delay,A=()=>({elem:e,cell:this.cell,view:this.view,attrs:d,refBBox:o.clone()});if(v!=null&&Object.keys(v).forEach(Qe=>{const bt=v[Qe],Ot=this.getDefinition(Qe);if(Ot!=null){const Kt=er(Ot.set,this.view,bt,A());typeof Kt=="object"?f=Object.assign(Object.assign({},f),Kt):Kt!=null&&(f[Qe]=Kt)}}),h2(e)){this.view.setAttrs(f,e);return}const P=f.transform,V=P?`${P}`:null,q=xd(V),ee=new Ve(q.e,q.f);P&&(delete f.transform,q.e=0,q.f=0);let ge=1,_e=1;if(b||w){const Qe=this.view.getScaleOfElement(e,c.scalableNode);ge=Qe.sx,_e=Qe.sy}let ke=!1;b!=null&&Object.keys(b).forEach(Qe=>{const bt=b[Qe],Ot=this.getDefinition(Qe);if(Ot!=null){const Kt=er(Ot.position,this.view,bt,A());Kt!=null&&(ke=!0,ee.translate(Ve.create(Kt).scale(ge,_e)))}}),this.view.setAttrs(f,e);let Se=!1;if(w!=null){const Qe=this.view.getBoundingRectOfElement(e);if(Qe.width>0&&Qe.height>0){const bt=tl(Qe,q).scale(1/ge,1/_e);Object.keys(w).forEach(Ot=>{const Kt=w[Ot],Fn=this.getDefinition(Ot);if(Fn!=null){const Cn=er(Fn.offset,this.view,Kt,{elem:e,cell:this.cell,view:this.view,attrs:d,refBBox:bt});Cn!=null&&(Se=!0,ee.translate(Ve.create(Cn).scale(ge,_e)))}})}}(P!=null||ke||Se)&&(ee.round(1),q.e=ee.x,q.f=ee.y,e.setAttribute("transform",Qf(q)));const Ue=()=>{_!=null&&Object.keys(_).forEach(Qe=>{const bt=_[Qe],Ot=this.getDefinition(Qe);if(Ot!=null){const Kt=er(Ot.set,this.view,bt,A());typeof Kt=="object"?this.view.setAttrs(Kt,e):Kt!=null&&this.view.setAttrs({[Qe]:Kt},e)}})};c.forceSync?Ue():S2.scheduleTask(Ue)}update(e,t,o){const c={},d=this.findAttrs(o.attrs||t,e,c,o.selectors),f=o.attrs?this.findAttrs(t,e,c,o.selectors):d,v=[];d.each(_=>{const A=_.elem,P=_.attrs,V=this.processAttrs(A,P);if(V.set==null&&V.position==null&&V.offset==null&&V.delay==null)this.view.setAttrs(V.normal,A);else{const q=f.get(A),ee=q?q.attrs:null,ge=ee&&P.ref==null?ee.ref:P.ref;let _e;if(ge){if(_e=(c[ge]||this.view.find(ge,e,o.selectors))[0],!_e)throw new Error(`"${ge}" reference does not exist.`)}else _e=null;const ke={node:A,refNode:_e,attributes:ee,processedAttributes:V},Se=v.findIndex(Ue=>Ue.refNode===A);Se>-1?v.splice(Se,0,ke):v.push(ke)}});const b=new op;let w;v.forEach(_=>{const A=_.node,P=_.refNode;let V;const q=P!=null&&o.rotatableNode!=null&&Ym(o.rotatableNode,P);if(P&&(V=b.get(P)),!V){const ke=q?o.rotatableNode:e;V=P?Ta(P,{target:ke}):o.rootBBox,P&&b.set(P,V)}let ee;o.attrs&&_.attributes?(ee=this.processAttrs(A,_.attributes),this.mergeProcessedAttrs(ee,_.processedAttributes)):ee=_.processedAttributes;let ge=V;q&&o.rotatableNode!=null&&!o.rotatableNode.contains(A)&&(w||(w=xd(vo(o.rotatableNode,"transform"))),ge=tl(V,w)),v.find(ke=>ke.refNode===A)&&(o.forceSync=!0),this.updateRelativeAttrs(A,ee,ge,o)})}}(function(l){l.DELAY_ATTRS=["text","textWrap","sourceMarker","targetMarker"]})(o0||(o0={}));class KC{constructor(e,t,o=[]){this.view=e;const c={},d={};let f=0;Object.keys(t).forEach(b=>{let w=t[b];Array.isArray(w)||(w=[w]),w.forEach(_=>{let A=c[_];A||(f+=1,A=c[_]=1<<f),d[b]|=A})});let v=o;if(Array.isArray(v)||(v=[v]),v.forEach(b=>{c[b]||(f+=1,c[b]=1<<f)}),f>25)throw new Error("Maximum number of flags exceeded.");this.flags=c,this.attrs=d,this.bootstrap=o}get cell(){return this.view.cell}getFlag(e){const t=this.flags;return t==null?0:Array.isArray(e)?e.reduce((o,c)=>o|t[c],0):t[e]|0}hasAction(e,t){return e&this.getFlag(t)}removeAction(e,t){return e^e&this.getFlag(t)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let e=0;return this.attrs&&Object.keys(this.attrs).forEach(t=>{this.cell.hasChanged(t)&&(e|=this.attrs[t])}),e}}var O_=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class Gs extends Ai{constructor(e,t={}){super(),this.cell=e,this.options=this.ensureOptions(t),this.graph=this.options.graph,this.attr=new o0(this),this.flag=new KC(this,this.options.actions,this.options.bootstrap),this.cache=new BO(this),this.setContainer(this.ensureContainer()),this.setup(),this.$(this.container).data("view",this),this.init()}static getDefaults(){return this.defaults}static config(e){this.defaults=this.getOptions(e)}static getOptions(e){const t=(w,_)=>_!=null?ma([...Array.isArray(w)?w:[w],...Array.isArray(_)?_:[_]]):Array.isArray(w)?[...w]:[w],o=Yo(this.getDefaults()),{bootstrap:c,actions:d,events:f,documentEvents:v}=e,b=O_(e,["bootstrap","actions","events","documentEvents"]);return c&&(o.bootstrap=t(o.bootstrap,c)),d&&Object.keys(d).forEach(w=>{const _=d[w],A=o.actions[w];_&&A?o.actions[w]=t(A,_):_&&(o.actions[w]=t(_))}),f&&(o.events=Object.assign(Object.assign({},o.events),f)),e.documentEvents&&(o.documentEvents=Object.assign(Object.assign({},o.documentEvents),v)),wo(o,b)}get[Symbol.toStringTag](){return Gs.toStringTag}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(e){return this.getConstructor().getOptions(e)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return Ai.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(e){if(this.container!==e){this.undelegateEvents(),this.container=e,this.options.events!=null&&this.delegateEvents(this.options.events);const t=this.getContainerAttrs();t!=null&&this.setAttrs(t,e);const o=this.getContainerStyle();o!=null&&this.setStyle(o,e);const c=this.getContainerClassName();c!=null&&this.addClass(c,e)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(e,t={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(e){return this.flag.getFlag(e)}hasAction(e,t){return this.flag.hasAction(e,t)}removeAction(e,t){return this.flag.removeAction(e,t)}handleAction(e,t,o,c){if(this.hasAction(e,t)){o();const d=[t];return c&&(typeof c=="string"?d.push(c):d.push(...c)),this.removeAction(e,d)}return e}setup(){this.cell.on("changed",({options:e})=>this.onAttrsChange(e))}onAttrsChange(e){let t=this.flag.getChangedFlag();e.updated||!t||(e.dirty&&this.hasAction(t,"update")&&(t|=this.getFlag("render")),e.toolId&&(e.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,t,this.priority,e))}parseJSONMarkup(e,t){const o=Xi.parseJSONMarkup(e),c=o.selectors,d=this.rootSelector;if(t&&d){if(c[d])throw new Error("Invalid root selector");c[d]=t}return o}can(e){let t=this.graph.options.interacting;if(typeof t=="function"&&(t=er(t,this.graph,this)),typeof t=="object"){let o=t[e];return typeof o=="function"&&(o=er(o,this.graph,this)),o!==!1}return typeof t=="boolean"?t:!1}cleanCache(){return this.cache.clean(),this}getCache(e){return this.cache.get(e)}getDataOfElement(e){return this.cache.getData(e)}getMatrixOfElement(e){return this.cache.getMatrix(e)}getShapeOfElement(e){return this.cache.getShape(e)}getScaleOfElement(e,t){let o,c;if(t&&t.contains(e)){const d=Nn(t);o=1/d.sx,c=1/d.sy}else o=1,c=1;return{sx:o,sy:c}}getBoundingRectOfElement(e){return this.cache.getBoundingRect(e)}getBBoxOfElement(e){const t=this.getBoundingRectOfElement(e),o=this.getMatrixOfElement(e),c=this.getRootRotatedMatrix(),d=this.getRootTranslatedMatrix();return tl(t,d.multiply(c).multiply(o))}getUnrotatedBBoxOfElement(e){const t=this.getBoundingRectOfElement(e),o=this.getMatrixOfElement(e),c=this.getRootTranslatedMatrix();return tl(t,c.multiply(o))}getBBox(e={}){let t;if(e.useCellGeometry){const o=this.cell,c=o.isNode()?o.getAngle():0;t=o.getBBox().bbox(c)}else t=this.getBBoxOfElement(this.container);return this.graph.localToGraph(t)}getRootTranslatedMatrix(){const e=this.cell,t=e.isNode()?e.getPosition():{x:0,y:0};return oc().translate(t.x,t.y)}getRootRotatedMatrix(){let e=oc();const t=this.cell,o=t.isNode()?t.getAngle():0;if(o){const c=t.getBBox(),d=c.width/2,f=c.height/2;e=e.translate(d,f).rotate(o).translate(-d,-f)}return e}findMagnet(e=this.container){return this.findByAttr("magnet",e)}updateAttrs(e,t,o={}){o.rootBBox==null&&(o.rootBBox=new Rn),o.selectors==null&&(o.selectors=this.selectors),this.attr.update(e,t,o)}isEdgeElement(e){return this.cell.isEdge()&&(e==null||e===this.container)}prepareHighlight(e,t={}){const o=e&&this.$(e)[0]||this.container;return t.partial=o===this.container,o}highlight(e,t={}){const o=this.prepareHighlight(e,t);return this.notify("cell:highlight",{magnet:o,options:t,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:o,options:t,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:o,options:t,view:this,node:this.cell,cell:this.cell}),this}unhighlight(e,t={}){const o=this.prepareHighlight(e,t);return this.notify("cell:unhighlight",{magnet:o,options:t,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:o,options:t,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:o,options:t,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(e,t){}getEdgeTerminal(e,t,o,c,d){const f=this.cell,v=this.findAttr("port",e),b=e.getAttribute("data-selector"),w={cell:f.id};return b!=null&&(w.magnet=b),v!=null?(w.port=v,f.isNode()&&!f.hasPort(v)&&b==null&&(w.selector=this.getSelector(e))):b==null&&this.container!==e&&(w.selector=this.getSelector(e)),this.customizeEdgeTerminal(w,e,t,o,c,d)}customizeEdgeTerminal(e,t,o,c,d,f){const v=d.getStrategy()||this.graph.options.connecting.strategy;if(v){const b=typeof v=="string"?v:v.name,w=typeof v=="string"?{}:v.args||{},_=i0.registry;if(b){const A=_.get(b);if(A==null)return _.onNotFound(b);const P=er(A,this.graph,e,this,t,new Ve(o,c),d,f,w);if(P)return P}}return e}getMagnetFromEdgeTerminal(e){const t=this.cell,o=this.container,c=e.port;let d=e.magnet,f;return c!=null&&t.isNode()&&t.hasPort(c)?f=this.findPortElem(c,d)||o:(d||(d=e.selector),!d&&c!=null&&(d=`[port="${c}"]`),f=this.findOne(d,o,this.selectors)),f}animate(e,t){const o=typeof e=="string"?this.findOne(e):e;if(o==null)throw new Error("Invalid animation element.");const c=o.parentNode,d=()=>{c||yd(o)},f=sr.create(o);c||f.appendTo(this.graph.view.stage);const v=t.complete;return t.complete=b=>{d(),v&&v(b)},f.animate(t)}animateTransform(e,t){const o=typeof e=="string"?this.findOne(e):e;if(o==null)throw new Error("Invalid animation element.");const c=o.parentNode,d=()=>{c||yd(o)},f=sr.create(o);c||f.appendTo(this.graph.view.stage);const v=t.complete;return t.complete=b=>{d(),v&&v(b)},f.animateTransform(t)}hasTools(e){const t=this.tools;return t==null?!1:e==null?!0:t.name===e}addTools(e){if(!this.can("toolsAddable"))return this;if(this.removeTools(),e){const t=Ma.isToolsView(e)?e:new Ma(e);this.tools=t,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),t.config({view:this}),t.mount()}return this}updateTools(e={}){return this.tools&&this.tools.update(e),this}removeTools(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const e=this.cell.getTools();return this.addTools(e),this}notify(e,t){return this.trigger(e,t),this.graph.trigger(e,t),this}getEventArgs(e,t,o){const c=this,d=c.cell;return t==null||o==null?{e,view:c,cell:d}:{e,x:t,y:o,view:c,cell:d}}onClick(e,t,o){this.notify("cell:click",this.getEventArgs(e,t,o))}onDblClick(e,t,o){this.notify("cell:dblclick",this.getEventArgs(e,t,o))}onContextMenu(e,t,o){this.notify("cell:contextmenu",this.getEventArgs(e,t,o))}onMouseDown(e,t,o){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(e,t,o))}onMouseUp(e,t,o){this.notify("cell:mouseup",this.getEventArgs(e,t,o)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(e,t,o){this.notify("cell:mousemove",this.getEventArgs(e,t,o))}onMouseOver(e){this.notify("cell:mouseover",this.getEventArgs(e))}onMouseOut(e){this.notify("cell:mouseout",this.getEventArgs(e))}onMouseEnter(e){this.notify("cell:mouseenter",this.getEventArgs(e))}onMouseLeave(e){this.notify("cell:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,o,c){this.notify("cell:mousewheel",Object.assign({delta:c},this.getEventArgs(e,t,o)))}onCustomEvent(e,t,o,c){this.notify("cell:customevent",Object.assign({name:t},this.getEventArgs(e,o,c))),this.notify(t,Object.assign({},this.getEventArgs(e,o,c)))}onMagnetMouseDown(e,t,o,c){}onMagnetDblClick(e,t,o,c){}onMagnetContextMenu(e,t,o,c){}onLabelMouseDown(e,t,o){}checkMouseleave(e){const t=this.graph;t.renderer.isAsync()&&t.renderer.dumpView(this);const o=this.getEventTarget(e,{fromPoint:!0}),c=t.renderer.findViewByElem(o);c!==this&&(this.onMouseLeave(e),c&&c.onMouseEnter(e))}}Gs.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},function(l){l.Flag=KC,l.Attr=o0}(Gs||(Gs={})),function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.isNodeView=="function"&&typeof c.isEdgeView=="function"&&typeof c.confirmUpdate=="function"}l.isCellView=e}(Gs||(Gs={})),function(l){function e(o){return function(c){c.config({priority:o})}}l.priority=e;function t(o){return function(c){c.config({bootstrap:o})}}l.bootstrap=t}(Gs||(Gs={})),function(l){l.registry=js.create({type:"view"})}(Gs||(Gs={}));class Ma extends Ai{constructor(e={}){super(),this.svgContainer=this.createContainer(!0,e),this.htmlContainer=this.createContainer(!1,e),this.config(e)}get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return Ma.toStringTag}createContainer(e,t){const o=e?Ai.createElement("g",!0):Ai.createElement("div",!1);return co(o,this.prefixClassName("cell-tools")),t.className&&co(o,t.className),o}config(e){if(this.options=Object.assign(Object.assign({},this.options),e),!Gs.isCellView(e.view)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?(co(this.svgContainer,this.prefixClassName("edge-tools")),co(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(co(this.svgContainer,this.prefixClassName("node-tools")),co(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const t=this.options.items;if(!Array.isArray(t))return this;this.tools=[];const o=[];t.forEach(c=>{Ma.ToolItem.isToolItem(c)?c.name==="vertices"?o.unshift(c):o.push(c):(typeof c=="object"?c.name:c)==="vertices"?o.unshift(c):o.push(c)});for(let c=0;c<o.length;c+=1){const d=o[c];let f;if(Ma.ToolItem.isToolItem(d))f=d;else{const v=typeof d=="object"?d.name:d,b=typeof d=="object"?d.args||{}:{};if(v){if(this.cell.isNode()){const w=s0.registry.get(v);if(w)f=new w(b);else return s0.registry.onNotFound(v)}else if(this.cell.isEdge()){const w=ag.registry.get(v);if(w)f=new w(b);else return ag.registry.onNotFound(v)}}}f&&(f.config(this.cellView,this),f.render(),(f.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer).appendChild(f.container),this.tools.push(f))}return this}update(e={}){const t=this.tools;return t&&t.forEach(o=>{e.toolId!==o.cid&&o.isVisible()&&o.update()}),this}focus(e){const t=this.tools;return t&&t.forEach(o=>{e===o?o.show():o.hide()}),this}blur(e){const t=this.tools;return t&&t.forEach(o=>{o!==e&&!o.isVisible()&&(o.show(),o.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const e=this.tools;return e&&(e.forEach(t=>t.remove()),this.tools=null),yd(this.svgContainer),yd(this.htmlContainer),super.remove()}mount(){const e=this.tools,t=this.cellView;if(t&&e){const o=e.some(d=>d.options.isSVGElement!==!1),c=e.some(d=>d.options.isSVGElement===!1);o&&(this.options.local?t.container:t.graph.view.decorator).appendChild(this.svgContainer),c&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&c.graph!=null&&c.cell!=null&&typeof c.config=="function"&&typeof c.update=="function"&&typeof c.focus=="function"&&typeof c.blur=="function"&&typeof c.show=="function"&&typeof c.hide=="function"}l.isToolsView=e})(Ma||(Ma={})),function(l){class e extends Ai{constructor(o={}){super(),this.visible=!0,this.options=this.getOptions(o),this.container=Ai.createElement(this.options.tagName||"g",this.options.isSVGElement!==!1),co(this.container,this.prefixClassName("cell-tool")),typeof this.options.className=="string"&&co(this.container,this.options.className),this.init()}static getDefaults(){return this.defaults}static config(o){this.defaults=this.getOptions(o)}static getOptions(o){return wo(Yo(this.getDefaults()),o)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return e.toStringTag}init(){}getOptions(o){return this.constructor.getOptions(o)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(o,c){return this.cellView=o,this.parent=c,this.stamp(this.container),this.cell.isEdge()?co(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&co(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const o=this.options.markup;if(o){const c=Xi.isStringMarkup(o)?Xi.parseStringMarkup(o):Xi.parseJSONMarkup(o);this.container.appendChild(c.fragment),this.childNodes=c.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(o){o&&o.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return!!this.visible}focus(){const o=this.options.focusOpacity;return o!=null&&Number.isFinite(o)&&(this.container.style.opacity=`${o}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(o){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(o,this.cellView)}}e.defaults={isSVGElement:!0,tagName:"g"},l.ToolItem=e,function(t){let o=0;function c(f){return f?nC(f):(o+=1,`CustomTool${o}`)}function d(f){const v=Y0(c(f.name),this);return v.config(f),v}t.define=d}(e=l.ToolItem||(l.ToolItem={})),function(t){t.toStringTag=`X6.${t.name}`;function o(c){if(c==null)return!1;if(c instanceof t)return!0;const d=c[Symbol.toStringTag],f=c;return(d==null||d===t.toStringTag)&&f.graph!=null&&f.cell!=null&&typeof f.config=="function"&&typeof f.update=="function"&&typeof f.focus=="function"&&typeof f.blur=="function"&&typeof f.show=="function"&&typeof f.hide=="function"&&typeof f.isVisible=="function"}t.isToolItem=o}(e=l.ToolItem||(l.ToolItem={}))}(Ma||(Ma={}));function qC(l,e,t,o){return er(i0.presets.pinRelative,this.graph,{},e,t,l,this.cell,o,{}).anchor}function P_(l,e){return e?l.cell.getBBox():l.cell.isEdge()?l.getConnection().bbox():l.getUnrotatedBBoxOfElement(l.container)}class sg extends Ma.ToolItem{onRender(){co(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();ph(this.container,t,{absolute:!0})}getNodeMatrix(){const e=this.cellView,t=this.options;let{x:o=0,y:c=0}=t;const{offset:d,useCellGeometry:f,rotate:v}=t;let b=P_(e,f);const w=e.cell.getAngle();v||(b=b.bbox(w));let _=0,A=0;typeof d=="number"?(_=d,A=d):typeof d=="object"&&(_=d.x,A=d.y),o=md(o,b.width),c=md(c,b.height);let P=oc().translate(b.x+b.width/2,b.y+b.height/2);return v&&(P=P.rotate(w)),P=P.translate(o+_-b.width/2,c+A-b.height/2),P}getEdgeMatrix(){const e=this.cellView,t=this.options,{offset:o=0,distance:c=0,rotate:d}=t;let f,v,b;const w=md(c,1);w>=0&&w<=1?f=e.getTangentAtRatio(w):f=e.getTangentAtLength(w),f?(v=f.start,b=f.vector().vectorAngle(new Ve(1,0))||0):(v=e.getConnection().start,b=0);let _=oc().translate(v.x,v.y).rotate(b);return typeof o=="object"?_=_.translate(o.x||0,o.y||0):_=_.translate(0,o),d||(_=_.rotate(-b)),_}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.options.onClick;typeof t=="function"&&er(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(l){l.config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(sg||(sg={})),function(l){l.Remove=l.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick({view:e,btn:t}){t.parent.remove(),e.cell.remove({ui:!0,toolId:t.cid})}})}(sg||(sg={}));var JC=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class ly extends Ma.ToolItem{onRender(){if(co(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const e=this.options.attrs,{class:t}=e,o=JC(e,["class"]);vo(this.container,Km(o)),t&&co(this.container,t)}this.update()}update(){const e=this.cellView,t=this.options,{useCellGeometry:o,rotate:c}=t,d=wl(t.padding);let f=P_(e,o).moveAndExpand({x:-d.left,y:-d.top,width:d.left+d.right,height:d.top+d.bottom});const v=e.cell;if(v.isNode()){const b=v.getAngle();if(b)if(c){const w=v.getBBox().getCenter();gh(this.container,b,w.x,w.y,{absolute:!0})}else f=f.bbox(b)}return vo(this.container,f.toJSON()),this}}(function(l){l.config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(ly||(ly={}));class uy extends Ma.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}renderHandles(){const e=this.vertices;for(let t=0,o=e.length;t<o;t+=1){const c=e[t],d=this.options.createHandle,f=this.options.processHandle,v=d({index:t,graph:this.graph,guard:b=>this.guard(b),attrs:this.options.attrs||{}});f&&f(v),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:v}),v.updatePosition(c.x,c.y),this.stamp(v.container),this.container.appendChild(v.container),this.handles.push(v),this.startHandleListening(v)}}updateHandles(){const e=this.vertices;for(let t=0,o=e.length;t<o;t+=1){const c=e[t],d=this.handles[t];d&&d.updatePosition(c.x,c.y)}}updatePath(){const e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}stopHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}getNeighborPoints(e){const t=this.cellView,o=this.vertices,c=e>0?o[e-1]:t.sourceAnchor,d=e<o.length-1?o[e+1]:t.targetAnchor;return{prev:Ve.create(c),next:Ve.create(d)}}getMouseEventArgs(e){const t=this.normalizeEvent(e),{x:o,y:c}=this.graph.snapToGrid(t.clientX,t.clientY);return{e:t,x:o,y:c}}onHandleChange({e}){this.focus();const t=this.cellView;if(t.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:o,x:c,y:d}=this.getMouseEventArgs(e);t.notifyMouseDown(o,c,d)}}onHandleChanging({handle:e,e:t}){const o=this.cellView,c=e.options.index,{e:d,x:f,y:v}=this.getMouseEventArgs(t),b={x:f,y:v};this.snapVertex(b,c),o.cell.setVertexAt(c,b,{ui:!0,toolId:this.cid}),e.updatePosition(b.x,b.y),this.options.stopPropagation||o.notifyMouseMove(d,f,v)}onHandleChanged({e}){const t=this.options,o=this.cellView;if(t.addable&&this.updatePath(),!t.removeRedundancies)return;o.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),o.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(e).vertexAdded&&o.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});const{e:d,x:f,y:v}=this.getMouseEventArgs(e);this.options.stopPropagation||o.notifyMouseUp(d,f,v),o.checkMouseleave(d),t.onChanged&&t.onChanged({edge:o.cell,edgeView:o})}snapVertex(e,t){const o=this.options.snapRadius||0;if(o>0){const c=this.getNeighborPoints(t),d=c.prev,f=c.next;Math.abs(e.x-d.x)<o?e.x=d.x:Math.abs(e.x-f.x)<o&&(e.x=f.x),Math.abs(e.y-d.y)<o?e.y=c.prev.y:Math.abs(e.y-f.y)<o&&(e.y=f.y)}}onHandleRemove({handle:e,e:t}){if(this.options.removable){const o=e.options.index,c=this.cellView;c.cell.removeVertexAt(o,{ui:!0}),this.options.addable&&this.updatePath(),c.checkMouseleave(this.normalizeEvent(t))}}onPathMouseDown(e){const t=this.cellView;if(this.guard(e)||!this.options.addable||!t.can("vertexAddable"))return;e.stopPropagation(),e.preventDefault();const o=this.normalizeEvent(e),c=this.graph.snapToGrid(o.clientX,o.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const d=t.getVertexIndex(c.x,c.y);this.snapVertex(c,d),t.cell.insertVertex(c,d,{ui:!0,toolId:this.cid}),this.render();const f=this.handles[d];this.eventData(o,{vertexAdded:!0}),f.onMouseDown(o)}onRemove(){this.resetHandles()}}(function(l){class e extends Ai{constructor(o){super(),this.options=o,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}get graph(){return this.options.graph}render(){this.container=Ai.createElement("circle",!0);const o=this.options.attrs;if(typeof o=="function"){const c=l.getDefaults();this.setAttrs(Object.assign(Object.assign({},c.attrs),o(this)))}else this.setAttrs(o);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(o,c){this.setAttrs({cx:o,cy:c})}onMouseDown(o){this.options.guard(o)||(o.stopPropagation(),o.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},o.data),this.emit("change",{e:o,handle:this}))}onMouseMove(o){this.emit("changing",{e:o,handle:this})}onMouseUp(o){this.emit("changed",{e:o,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(o){this.emit("remove",{e:o,handle:this})}}l.Handle=e})(uy||(uy={})),function(l){const e=ha.prefix("edge-tool-vertex-path");l.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:t=>new l.Handle(t),markup:[{tagName:"path",selector:"connection",className:e,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${e}`]:"onPathMouseDown",[`touchstart .${e}`]:"onPathMouseDown"}})}(uy||(uy={}));class dy extends Ma.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){co(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const e=this.cellView,t=[...this.vertices];t.unshift(e.sourcePoint),t.push(e.targetPoint);for(let o=0,c=t.length;o<c-1;o+=1){const d=t[o],f=t[o+1],v=this.renderHandle(d,f,o);this.stamp(v.container),this.handles.push(v)}return this}renderHandle(e,t,o){const c=this.options.createHandle({index:o,graph:this.graph,guard:d=>this.guard(d),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(c),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:c}),this.updateHandle(c,e,t),this.container.appendChild(c.container),this.startHandleListening(c),c}startHandleListening(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}stopHandleListening(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}shiftHandleIndexes(e){const t=this.handles;for(let o=0,c=t.length;o<c;o+=1)t[o].options.index+=e}resetAnchor(e,t){const o=this.cellView.cell,c={ui:!0,toolId:this.cid};t?o.prop([e,"anchor"],t,c):o.removeProp([e,"anchor"],c)}snapHandle(e,t,o){const c=e.options.axis,d=e.options.index,b=this.cellView.cell.getVertices(),w=b[d-2]||o.sourceAnchor,_=b[d+1]||o.targetAnchor,A=this.options.snapRadius;return Math.abs(t[c]-w[c])<A?t[c]=w[c]:Math.abs(t[c]-_[c])<A&&(t[c]=_[c]),t}onHandleChanging({handle:e,e:t}){const o=this.graph,c=this.options,d=this.cellView,f=c.anchor,v=e.options.axis,b=e.options.index-1,w=this.getEventData(t),_=this.normalizeEvent(t),A=o.snapToGrid(_.clientX,_.clientY),P=this.snapHandle(e,A.clone(),w),V=Yo(this.vertices);let q=V[b],ee=V[b+1];const ge=d.sourceView,_e=d.sourceBBox;let ke=!1,Se=!1;if(q?b===0?_e.containsPoint(q)?(V.shift(),this.shiftHandleIndexes(-1),ke=!0):(q[v]=P[v],Se=!0):q[v]=P[v]:(q=d.sourceAnchor.toJSON(),q[v]=P[v],_e.containsPoint(q)?ke=!0:(V.unshift(q),this.shiftHandleIndexes(1),Se=!0)),typeof f=="function"&&ge){if(ke){const Kt=w.sourceAnchor.clone();Kt[v]=P[v];const Fn=er(f,d,Kt,ge,d.sourceMagnet||ge.container,"source",d,this);this.resetAnchor("source",Fn)}Se&&this.resetAnchor("source",w.sourceAnchorDef)}const Ue=d.targetView,Qe=d.targetBBox;let bt=!1,Ot=!1;if(ee?b===V.length-2?Qe.containsPoint(ee)?(V.pop(),bt=!0):(ee[v]=P[v],Ot=!0):ee[v]=P[v]:(ee=d.targetAnchor.toJSON(),ee[v]=P[v],Qe.containsPoint(ee)?bt=!0:(V.push(ee),Ot=!0)),typeof f=="function"&&Ue){if(bt){const Kt=w.targetAnchor.clone();Kt[v]=P[v];const Fn=er(f,d,Kt,Ue,d.targetMagnet||Ue.container,"target",d,this);this.resetAnchor("target",Fn)}Ot&&this.resetAnchor("target",w.targetAnchorDef)}Ve.equalPoints(V,this.vertices)||this.cellView.cell.setVertices(V,{ui:!0,toolId:this.cid}),this.updateHandle(e,q,ee,0),c.stopPropagation||d.notifyMouseMove(_,A.x,A.y)}onHandleChange({handle:e,e:t}){const o=this.options,c=this.handles,d=this.cellView,f=e.options.index;if(!!Array.isArray(c)){for(let v=0,b=c.length;v<b;v+=1)v!==f&&c[v].hide();if(this.focus(),this.setEventData(t,{sourceAnchor:d.sourceAnchor.clone(),targetAnchor:d.targetAnchor.clone(),sourceAnchorDef:Yo(this.cell.prop(["source","anchor"])),targetAnchorDef:Yo(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!o.stopPropagation){const v=this.normalizeEvent(t),b=this.graph.snapToGrid(v.clientX,v.clientY);d.notifyMouseDown(v,b.x,b.y)}}}onHandleChanged({e}){const t=this.options,o=this.cellView;t.removeRedundancies&&o.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const c=this.normalizeEvent(e),d=this.graph.snapToGrid(c.clientX,c.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),t.stopPropagation||o.notifyMouseUp(c,d.x,d.y),o.checkMouseleave(c),t.onChanged&&t.onChanged({edge:o.cell,edgeView:o})}updateHandle(e,t,o,c=0){const d=this.options.precision||0,f=Math.abs(t.x-o.x)<d,v=Math.abs(t.y-o.y)<d;if(f||v){const b=new fr(t,o);if(b.length()<this.options.threshold)e.hide();else{const _=b.getCenter(),A=f?"x":"y";_[A]+=c||0;const P=b.vector().vectorAngle(new Ve(1,0));e.updatePosition(_.x,_.y,P,this.cellView),e.show(),e.options.axis=A}}else e.hide()}onRemove(){this.resetHandles()}}(function(l){class e extends Ai{constructor(o){super(),this.options=o,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=Ai.createElement("rect",!0);const o=this.options.attrs;if(typeof o=="function"){const c=l.getDefaults();this.setAttrs(Object.assign(Object.assign({},c.attrs),o(this)))}else this.setAttrs(o);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(o,c,d,f){const v=f.getClosestPoint(new Ve(o,c))||new Ve(o,c);let b=oc().translate(v.x,v.y);if(v.equals({x:o,y:c}))b=b.rotate(d);else{let _=new fr(o,c,v.x,v.y).vector().vectorAngle(new Ve(1,0));_!==0&&(_+=90),b=b.rotate(_)}this.setAttrs({transform:Qf(b),cursor:d%180===0?"row-resize":"col-resize"})}onMouseDown(o){this.options.guard(o)||(this.trigger("change",{e:o,handle:this}),o.stopPropagation(),o.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},o.data))}onMouseMove(o){this.emit("changing",{e:o,handle:this})}onMouseUp(o){this.emit("changed",{e:o,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}l.Handle=e})(dy||(dy={})),function(l){l.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:e=>new l.Handle(e),anchor:qC})}(dy||(dy={}));class hy extends Ma.ToolItem{get type(){return this.options.type}onRender(){co(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){const e=this.type;return this.cellView.getTerminalView(e)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const e=this.childNodes;if(!e)return;const t=e.anchor;if(!t)return;const o=this.type,c=this.cellView,d=this.options,f=c.getTerminalAnchor(o),v=c.cell.prop([o,"anchor"]);t.setAttribute("transform",`translate(${f.x}, ${f.y})`);const b=v?d.customAnchorAttrs:d.defaultAnchorAttrs;b&&Object.keys(b).forEach(w=>{t.setAttribute(w,b[w])})}updateArea(){const e=this.childNodes;if(!e)return;const t=e.area;if(!t)return;const o=this.type,c=this.cellView,d=c.getTerminalView(o);if(d){const f=d.cell,v=c.getTerminalMagnet(o);let b=this.options.areaPadding||0;Number.isFinite(b)||(b=0);let w,_,A;d.isEdgeElement(v)?(w=d.getBBox(),_=0,A=w.getCenter()):(w=d.getUnrotatedBBoxOfElement(v),_=f.getAngle(),A=w.getCenter(),_&&A.rotate(-_,f.getBBox().getCenter())),w.inflate(b),vo(t,{x:-w.width/2,y:-w.height/2,width:w.width,height:w.height,transform:`translate(${A.x}, ${A.y}) rotate(${_})`})}}toggleArea(e){if(this.childNodes){const t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}onMouseDown(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(e){const t=this.type,o=this.cell;e?o.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):o.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(e){const t=this.type,o=this.cellView,c=o.getTerminalView(t);if(c==null)return;const d=this.normalizeEvent(e),f=c.cell,v=o.getTerminalMagnet(t);let b=this.graph.clientToLocal(d.clientX,d.clientY);const w=this.options.snap;if(typeof w=="function"){const P=er(w,o,b,c,v,t,o,this);b=Ve.create(P)}if(this.options.restrictArea)if(c.isEdgeElement(v)){const P=c.getClosestPoint(b);P&&(b=P)}else{const P=c.getUnrotatedBBoxOfElement(v),V=f.getAngle(),q=f.getBBox().getCenter(),ee=b.clone().rotate(V,q);P.containsPoint(ee)||(b=P.getNearestPointToPoint(ee).rotate(-V,q))}let _;const A=this.options.anchor;typeof A=="function"&&(_=er(A,o,b,c,v,t,o,this)),this.resetAnchor(_),this.update()}onMouseUp(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);const t=this.cellView;this.options.removeRedundancies&&t.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const e=this.options.resetAnchor;e&&this.resetAnchor(e===!0?void 0:e),this.update()}}(function(l){l.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:qC,snap(e,t,o,c,d,f){const v=f.options.snapRadius||0,b=c==="source",w=b?0:-1,_=this.cell.getVertexAt(w)||this.getTerminalAnchor(b?"target":"source");return _&&(Math.abs(_.x-e.x)<v&&(e.x=_.x),Math.abs(_.y-e.y)<v&&(e.y=_.y)),e}})})(hy||(hy={}));const D_=hy.define({name:"source-anchor",type:"source"}),zO=hy.define({name:"target-anchor",type:"target"});var UO=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class R2 extends Ma.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const e=this.options.attrs,{class:t}=e,o=UO(e,["class"]);this.setAttrs(o,this.container),t&&co(this.container,t)}}onRender(){co(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const e=this.ratio,t=this.cellView,o=t.getTangentAtRatio(e),c=o?o.start:t.getPointAtRatio(e),d=o&&o.vector().vectorAngle(new Ve(1,0))||0;if(!c)return this;const f=oc().translate(c.x,c.y).rotate(d);return ph(this.container,f,{absolute:!0}),this}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const o=this.graph.snapToGrid(e.clientX,e.clientY),c=t.prepareArrowheadDragging(this.type,{x:o.x,y:o.y,options:{toolId:this.cid}});this.cellView.setEventData(e,c),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(e){const t=this.normalizeEvent(e),o=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,o.x,o.y),this.update()}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),o=this.cellView,c=this.graph.snapToGrid(t.clientX,t.clientY);o.onMouseUp(t,c.x,c.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",o.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}(function(l){l.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(R2||(R2={}));const N_=R2.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),I_=R2.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class Cv extends Ma.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5}render(){return this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this}createElement(){const{cell:e}=this,t=[this.prefixClassName(`${e.isEdge()?"edge":"node"}-tool-editor`),this.prefixClassName("cell-tool-editor")];this.editor=Ma.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}updateEditor(){const{graph:e,cell:t,editor:o}=this,c=o.style;let d=new Ve,f=20;if(t.isNode())d=t.getBBox().center,f=t.size().width-4;else if(t.isEdge()){const A=this.options.event,P=A.target,V=P.parentElement;if(V&&Wg(V,this.prefixClassName("edge-label"))){const ee=V.getAttribute("data-index")||"0";this.labelIndex=parseInt(ee,10);const ge=V.getAttribute("transform"),{translation:_e}=Cd(ge);d=new Ve(_e.tx,_e.ty),f=Ta(P).width}else{if(!this.options.labelAddable)return this;d=e.clientToLocal(Ve.create(A.clientX,A.clientY));const ge=this.cellView.path.closestPointLength(d);this.distance=ge}}d=e.localToGraph(d),c.left=`${d.x}px`,c.top=`${d.y}px`,c.minWidth=`${f}px`;const v=e.scale();c.transform=`scale(${v.sx}, ${v.sy}) translate(-50%, -50%)`;const b=this.options.attrs;c.fontSize=`${b.fontSize}px`,c.fontFamily=b.fontFamily,c.color=b.color,c.backgroundColor=b.backgroundColor;const w=this.options.getText;let _;return typeof w=="function"&&(_=er(w,this.cellView,{cell:this.cell,index:this.labelIndex})),o.innerText=_||"",this}onDocumentMouseDown(e){if(e.target!==this.editor){const t=this.cell,o=this.editor.innerText.replace(/\n$/,"")||"",c=this.options.setText;typeof c=="function"&&er(c,this.cellView,{cell:this.cell,value:o,index:this.labelIndex,distance:this.distance}),t.removeTool(t.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}}onDblClick(e){e.stopPropagation()}onMouseDown(e){e.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor.focus(),this.selectText()})}selectText(){if(window.getSelection){const e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}}(function(l){l.config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(Cv||(Cv={})),function(l){l.NodeEditor=l.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText({cell:e}){return e.attr("text/text")},setText({cell:e,value:t}){e.attr("text/text",t)}}),l.EdgeEditor=l.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText({cell:e,index:t}){return t===-1?"":e.prop(`labels/${t}/attrs/label/text`)},setText({cell:e,value:t,index:o,distance:c}){const d=e;o===-1?d.appendLabel({position:{distance:c},attrs:{label:{text:t}}}):t?d.prop(`labels/${o}/attrs/label/text`,t):typeof o=="number"&&d.removeLabelAt(o)}})}(Cv||(Cv={}));var R_=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t},s0;(function(l){l.presets={boundary:ly,button:sg,"button-remove":sg.Remove,"node-editor":Cv.NodeEditor},l.registry=js.create({type:"node tool",process(e,t){if(typeof t=="function")return t;let o=Ma.ToolItem;const{inherit:c}=t,d=R_(t,["inherit"]);if(c){const f=this.get(c);f==null?this.onNotFound(c,"inherited"):o=f}return d.name==null&&(d.name=e),o.define.call(o,d)}}),l.registry.register(l.presets,!0)})(s0||(s0={}));var ag;(function(l){l.presets={boundary:ly,vertices:uy,segments:dy,button:sg,"button-remove":sg.Remove,"source-anchor":D_,"target-anchor":zO,"source-arrowhead":N_,"target-arrowhead":I_,"edge-editor":Cv.EdgeEditor},l.registry=js.create({type:"edge tool",process(e,t){if(typeof t=="function")return t;let o=Ma.ToolItem;const{inherit:c}=t,d=R_(t,["inherit"]);if(c){const f=this.get(c);f==null?this.onNotFound(c,"inherited"):o=f}return d.name==null&&(d.name=e),o.define.call(o,d)}}),l.registry.register(l.presets,!0)})(ag||(ag={}));const k_=of("center"),VO=of("topCenter"),jO=of("bottomCenter"),HO=of("leftMiddle"),L_=of("rightMiddle"),G_=of("topLeft"),F_=of("topRight"),B_=of("bottomLeft"),k2=of("bottomRight");function of(l){return function(e,t,o,c={}){const d=c.rotate?e.getUnrotatedBBoxOfElement(t):e.getBBoxOfElement(t),f=d[l];f.x+=md(c.dx,d.width),f.y+=md(c.dy,d.height);const v=e.cell;return c.rotate?f.rotate(-v.getAngle(),v.getBBox().getCenter()):f}}function fy(l){return function(e,t,o,c){if(o instanceof Element){const d=this.graph.renderer.findViewByElem(o);let f;if(d)if(d.isEdgeElement(o)){const v=c.fixedAt!=null?c.fixedAt:"50%";f=QC(d,v)}else f=d.getBBoxOfElement(o).getCenter();else f=new Ve;return l.call(this,e,t,f,c)}return l.apply(this,arguments)}}function QC(l,e){const t=dh(e),o=typeof e=="string"?parseFloat(e):e;return t?l.getPointAtRatio(o/100):l.getPointAtLength(o)}const $O=fy(function(l,e,t,o){const c=l.cell.getAngle(),d=l.getBBoxOfElement(e),f=d.getCenter(),v=d.getTopLeft(),b=d.getBottomRight();let w=o.padding;if(Number.isFinite(w)||(w=0),v.y+w<=t.y&&t.y<=b.y-w){const _=t.y-f.y;f.x+=c===0||c===180?0:_*1/Math.tan(ki.toRad(c)),f.y+=_}else if(v.x+w<=t.x&&t.x<=b.x-w){const _=t.x-f.x;f.y+=c===90||c===270?0:_*Math.tan(ki.toRad(c)),f.x+=_}return f}),WO=function(l,e,t,o,c){const d=l.cell.getConnectionPoint(this.cell,c);return(o.dx||o.dy)&&d.translate(o.dx||0,o.dy||0),d},XO=fy(function(l,e,t,o){let c,d=0,f;const v=l.cell;o.rotate?(c=l.getUnrotatedBBoxOfElement(e),f=v.getBBox().getCenter(),d=v.getAngle()):c=l.getBBoxOfElement(e);const b=o.padding;b!=null&&Number.isFinite(b)&&c.inflate(b),o.rotate&&t.rotate(d,f);const w=c.getNearestSideToPoint(t);let _;switch(w){case"left":_=c.getLeftMiddle();break;case"right":_=c.getRightMiddle();break;case"top":_=c.getTopCenter();break;case"bottom":_=c.getBottomCenter();break;default:break}const A=o.direction;return A==="H"?(w==="top"||w==="bottom")&&(t.x<=c.x+c.width?_=c.getLeftMiddle():_=c.getRightMiddle()):A==="V"&&(t.y<=c.y+c.height?_=c.getTopCenter():_=c.getBottomCenter()),o.rotate?_.rotate(-d,f):_});var a0;(function(l){l.presets=ue,l.registry=js.create({type:"node endpoint"}),l.registry.register(l.presets,!0)})(a0||(a0={}));const ZO=function(l,e,t,o){let c=o.ratio!=null?o.ratio:.5;return c>1&&(c/=100),l.getPointAtRatio(c)},z_=function(l,e,t,o){const c=o.length!=null?o.length:20;return l.getPointAtLength(c)},ew=function(l,e,t,o){const c=l.getClosestPoint(t);return c??new Ve},U_=fy(ew),V_=fy(function(l,e,t,o){const d=l.getConnection(),f=l.getConnectionSubdivisions(),v=new fr(t.clone().translate(0,1e6),t.clone().translate(0,-1e6)),b=new fr(t.clone().translate(1e6,0),t.clone().translate(-1e6,0)),w=v.intersect(d,{segmentSubdivisions:f}),_=b.intersect(d,{segmentSubdivisions:f}),A=[];return w&&A.push(...w),_&&A.push(..._),A.length>0?t.closest(A):o.fallbackAt!=null?QC(l,o.fallbackAt):er(ew,this,l,e,t,o)});var cg;(function(l){l.presets=xe,l.registry=js.create({type:"edge endpoint"}),l.registry.register(l.presets,!0)})(cg||(cg={}));function py(l,e,t){let o;if(typeof t=="object"){if(Number.isFinite(t.y)){const d=new fr(e,l),{start:f,end:v}=d.parallel(t.y);e=f,l=v}o=t.x}else o=t;if(o==null||!Number.isFinite(o))return l;const c=l.distance(e);return o===0&&c>0?l:l.move(e,-Math.min(o,c-1))}function lg(l){const e=l.getAttribute("stroke-width");return e===null?0:parseFloat(e)||0}function j_(l){if(l==null)return null;let e=l;do{let t=e.tagName;if(typeof t!="string")return null;if(t=t.toUpperCase(),t==="G")e=e.firstElementChild;else if(t==="TITLE")e=e.nextElementSibling;else break}while(e);return e}const tw=function(l,e,t,o){const c=e.getBBoxOfElement(t);o.stroked&&c.inflate(lg(t)/2);const d=l.intersect(c),f=d&&d.length?l.start.closest(d):l.end;return py(f,l.start,o.offset)},H_=function(l,e,t,o,c){const d=e.cell,f=d.isNode()?d.getAngle():0;if(f===0)return er(tw,this,l,e,t,o,c);const v=e.getUnrotatedBBoxOfElement(t);o.stroked&&v.inflate(lg(t)/2);const b=v.getCenter(),w=l.clone().rotate(f,b),_=w.setLength(1e6).intersect(v),A=_&&_.length?w.start.closest(_).rotate(-f,b):l.end;return py(A,l.start,o.offset)},$_=function(l,e,t,o){let c,d;const f=l.end,v=o.selector;if(typeof v=="string"?c=e.findOne(v):Array.isArray(v)?c=q0(t,v):c=j_(t),!qf(c)){if(c===t||!qf(t))return f;c=t}const b=e.getShapeOfElement(c),w=e.getMatrixOfElement(c),_=e.getRootTranslatedMatrix(),A=e.getRootRotatedMatrix(),P=_.multiply(A).multiply(w),V=P.inverse(),q=_C(l,V),ee=q.start.clone(),ge=e.getDataOfElement(c);if(o.insideout===!1){ge.shapeBBox==null&&(ge.shapeBBox=b.bbox());const Ue=ge.shapeBBox;if(Ue!=null&&Ue.containsPoint(ee))return f}o.extrapolate===!0&&q.setLength(1e6);let _e;if(Nr.isPath(b)){const Ue=o.precision||2;ge.segmentSubdivisions==null&&(ge.segmentSubdivisions=b.getSegmentSubdivisions({precision:Ue})),_e={precision:Ue,segmentSubdivisions:ge.segmentSubdivisions},d=q.intersect(b,_e)}else d=q.intersect(b);d?Array.isArray(d)&&(d=ee.closest(d)):o.sticky===!0&&(Rn.isRectangle(b)?d=b.getNearestPointToPoint(ee):bd.isEllipse(b)?d=b.intersectsWithLineFromCenterToPoint(ee):d=b.closestPoint(ee,_e));const ke=d?wd(d,P):f;let Se=o.offset||0;return o.stroked!==!1&&(typeof Se=="object"?(Se=Object.assign({},Se),Se.x==null&&(Se.x=0),Se.x+=lg(c)/2):Se+=lg(c)/2),py(ke,l.start,Se)};function KO(l,e,t=0){const{start:o,end:c}=l;let d,f,v,b;switch(e){case"left":b="x",d=c,f=o,v=-1;break;case"right":b="x",d=o,f=c,v=1;break;case"top":b="y",d=c,f=o,v=-1;break;case"bottom":b="y",d=o,f=c,v=1;break;default:return}o[b]<c[b]?d[b]=f[b]:f[b]=d[b],Number.isFinite(t)&&(d[b]+=v*t,f[b]+=v*t)}const qO=function(l,e,t,o){const{alignOffset:c,align:d}=o;return d&&KO(l,d,c),py(l.end,l.start,o.offset)};var c0;(function(l){l.presets=ae,l.registry=js.create({type:"connection point"}),l.registry.register(l.presets,!0)})(c0||(c0={}));const JO=function(l){return[...l]},QO=function(l,e,t){const o=e.side||"bottom",c=wl(e.padding||40),d=t.sourceBBox,f=t.targetBBox,v=d.getCenter(),b=f.getCenter();let w,_,A;switch(o){case"top":A=-1,w="y",_="height";break;case"left":A=-1,w="x",_="width";break;case"right":A=1,w="x",_="width";break;case"bottom":default:A=1,w="y",_="height";break}return v[w]+=A*(d[_]/2+c[o]),b[w]+=A*(f[_]/2+c[o]),A*(v[w]-b[w])>0?b[w]=v[w]:v[w]=b[w],[v.toJSON(),...l,b.toJSON()]};function l0(l){return new Rn(l.x,l.y,0,0)}function sf(l={}){const e=wl(l.padding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function gy(l,e={}){return l.sourceBBox.clone().moveAndExpand(sf(e))}function wv(l,e={}){return l.targetBBox.clone().moveAndExpand(sf(e))}function e3(l,e={}){return l.sourceAnchor?l.sourceAnchor:gy(l,e).getCenter()}function W_(l,e={}){return l.targetAnchor?l.targetAnchor:wv(l,e).getCenter()}const nw=function(l,e,t){let o=gy(t,e),c=wv(t,e);const d=e3(t,e),f=W_(t,e);o=o.union(l0(d)),c=c.union(l0(f));const v=l.map(_=>Ve.create(_));v.unshift(d),v.push(f);let b=null;const w=[];for(let _=0,A=v.length-1;_<A;_+=1){let P=null;const V=v[_],q=v[_+1],ee=Eu.getBearing(V,q)!=null;if(_===0)_+1===A?o.intersectsWithRect(c.clone().inflate(1))?P=Eu.insideNode(V,q,o,c):ee||(P=Eu.nodeToNode(V,q,o,c)):o.containsPoint(q)?P=Eu.insideNode(V,q,o,l0(q).moveAndExpand(sf(e))):ee||(P=Eu.nodeToVertex(V,q,o));else if(_+1===A){const ge=ee&&Eu.getBearing(q,V)===b;c.containsPoint(V)||ge?P=Eu.insideNode(V,q,l0(V).moveAndExpand(sf(e)),c,b):ee||(P=Eu.vertexToNode(V,q,c,b))}else ee||(P=Eu.vertexToVertex(V,q,b));P?(w.push(...P.points),b=P.direction):b=Eu.getBearing(V,q),_+1<A&&w.push(q)}return w};var Eu;(function(l){const e={N:"S",S:"N",E:"W",W:"E"},t={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function o(A,P,V){let q=new Ve(A.x,P.y);return V.containsPoint(q)&&(q=new Ve(P.x,A.y)),q}function c(A,P){return A[P==="W"||P==="E"?"width":"height"]}l.getBBoxSize=c;function d(A,P){return A.x===P.x?A.y>P.y?"N":"S":A.y===P.y?A.x>P.x?"W":"E":null}l.getBearing=d;function f(A,P,V){const q=new Ve(A.x,P.y),ee=new Ve(P.x,A.y),ge=d(A,q),_e=d(A,ee),ke=V?e[V]:null,Se=ge===V||ge!==ke&&(_e===ke||_e!==V)?q:ee;return{points:[Se],direction:d(Se,P)}}l.vertexToVertex=f;function v(A,P,V){const q=o(A,P,V);return{points:[q],direction:d(q,P)}}l.nodeToVertex=v;function b(A,P,V,q){const ee=[new Ve(A.x,P.y),new Ve(P.x,A.y)],ge=ee.filter(Se=>!V.containsPoint(Se)),_e=ge.filter(Se=>d(Se,A)!==q);let ke;if(_e.length>0)return ke=_e.filter(Se=>d(A,Se)===q).pop(),ke=ke||_e[0],{points:[ke],direction:d(ke,P)};{ke=qt(ee,ge)[0];const Se=Ve.create(P).move(ke,-c(V,q)/2);return{points:[o(Se,A,V),Se],direction:d(Se,P)}}}l.vertexToNode=b;function w(A,P,V,q){let ee=v(P,A,q);const ge=ee.points[0];if(V.containsPoint(ge)){ee=v(A,P,V);const _e=ee.points[0];if(q.containsPoint(_e)){const ke=Ve.create(A).move(_e,-c(V,d(A,_e))/2),Se=Ve.create(P).move(ge,-c(q,d(P,ge))/2),Ue=new fr(ke,Se).getCenter(),Qe=v(A,Ue,V),bt=f(Ue,P,Qe.direction);ee.points=[Qe.points[0],bt.points[0]],ee.direction=bt.direction}}return ee}l.nodeToNode=w;function _(A,P,V,q,ee){const ge=V.union(q).inflate(1),_e=ge.getCenter(),ke=_e.distance(P)>_e.distance(A),Se=ke?P:A,Ue=ke?A:P;let Qe,bt,Ot;ee?(Qe=Ve.fromPolar(ge.width+ge.height,t[ee],Se),Qe=ge.getNearestPointToPoint(Qe).move(Qe,-1)):Qe=ge.getNearestPointToPoint(Se).move(Se,1),bt=o(Qe,Ue,ge);let Kt;Qe.round().equals(bt.round())?(bt=Ve.fromPolar(ge.width+ge.height,ki.toRad(Qe.theta(Se))+Math.PI/2,Ue),bt=ge.getNearestPointToPoint(bt).move(Ue,1).round(),Ot=o(Qe,bt,ge),Kt=ke?[bt,Ot,Qe]:[Qe,Ot,bt]):Kt=ke?[bt,Qe]:[Qe,bt];const Fn=d(ke?Qe:bt,P);return{points:Kt,direction:Fn}}l.insideNode=_})(Eu||(Eu={}));const X_={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],excludeNodes:[],excludeHiddenNodes:!1,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return sp(this.step,this)},directions(){const l=sp(this.step,this),e=sp(this.cost,this);return[{cost:e,offsetX:l,offsetY:0},{cost:e,offsetX:-l,offsetY:0},{cost:e,offsetX:0,offsetY:l},{cost:e,offsetX:0,offsetY:-l}]},penalties(){const l=sp(this.step,this);return{0:0,45:l/2,90:l/2}},paddingBox(){const l=sp(this.step,this);return{x:-l,y:-l,width:2*l,height:2*l}},fallbackRouter:nw,draggingRouter:null};function sp(l,e){return typeof l=="function"?l.call(e):l}function Z_(l){const e=Object.keys(l).reduce((t,o)=>{const c=t;return o==="fallbackRouter"||o==="draggingRouter"||o==="fallbackRoute"?c[o]=l[o]:c[o]=sp(l[o],l),t},{});if(e.padding){const t=wl(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}return e.directions.forEach(t=>{const o=new Ve(0,0),c=new Ve(t.offsetX,t.offsetY);t.angle=ki.normalize(o.theta(c))}),e}const rw=1,Ev=2;class Y_{constructor(){this.items=[],this.hash={},this.values={}}add(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=rw,this.values[e]=t;const o=Sa(this.items,e,c=>this.values[c]);this.items.splice(o,0,e)}pop(){const e=this.items.shift();return e&&(this.hash[e]=Ev),e}isOpen(e){return this.hash[e]===rw}isClose(e){return this.hash[e]===Ev}isEmpty(){return this.items.length===0}}class K_{constructor(e){this.options=e,this.mapGridSize=100,this.map={}}build(e,t){const o=this.options,c=o.excludeTerminals.reduce((w,_)=>{const A=t[_];if(A){const P=e.getCell(A.cell);P&&w.push(P)}return w},[]);let d=[];const f=e.getCell(t.getSourceCellId());f&&(d=Mh(d,f.getAncestors().map(w=>w.id)));const v=e.getCell(t.getTargetCellId());v&&(d=Mh(d,v.getAncestors().map(w=>w.id)));const b=this.mapGridSize;return e.getNodes().reduce((w,_)=>{const A=_.shape,P=o.excludeShapes,V=A?P.includes(A):!1,q=c.some(Se=>Se.id===_.id),ee=o.excludeNodes.some(Se=>typeof Se=="string"?_.id===Se:Se===_),ge=d.includes(_.id),_e=o.excludeHiddenNodes&&!_.isVisible();if(!(V||q||ee||ge||_e)){const Se=_.getBBox().moveAndExpand(o.paddingBox),Ue=Se.getOrigin().snapToGrid(b),Qe=Se.getCorner().snapToGrid(b);for(let bt=Ue.x;bt<=Qe.x;bt+=b)for(let Ot=Ue.y;Ot<=Qe.y;Ot+=b){const Kt=new Ve(bt,Ot).toString();w[Kt]==null&&(w[Kt]=[]),w[Kt].push(Se)}}return w},this.map),this}isAccessible(e){const t=e.clone().snapToGrid(this.mapGridSize).toString(),o=this.map[t];return o?o.every(c=>!c.containsPoint(e)):!0}}function iw(l,e){const t=l.sourceBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function ow(l,e){const t=l.targetBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function q_(l,e){return l.sourceAnchor?l.sourceAnchor:iw(l,e).getCenter()}function t3(l,e){return l.targetAnchor?l.targetAnchor:ow(l,e).getCenter()}function sw(l,e,t,o,c){const d=360/t,f=l.theta(n3(l,e,o,c)),v=ki.normalize(f+d/2);return d*Math.floor(v/d)}function n3(l,e,t,o){const c=o.step,d=e.x-l.x,f=e.y-l.y,v=d/t.x,b=f/t.y,w=v*c,_=b*c;return new Ve(l.x+w,l.y+_)}function J_(l,e){const t=Math.abs(l-e);return t>180?360-t:t}function r3(l,e){const t=e.step;return e.directions.forEach(o=>{o.gridOffsetX=o.offsetX/t*l.x,o.gridOffsetY=o.offsetY/t*l.y}),e.directions}function Q_(l,e,t){return{source:e.clone(),x:aw(t.x-e.x,l),y:aw(t.y-e.y,l)}}function aw(l,e){if(!l)return e;const t=Math.abs(l),o=Math.round(t/e);if(!o)return t;const c=o*e,f=(t-c)/o;return e+f}function eA(l,e){const t=e.source,o=ha.snapToGrid(l.x-t.x,e.x)+t.x,c=ha.snapToGrid(l.y-t.y,e.y)+t.y;return new Ve(o,c)}function Sv(l,e){return l.round(e)}function vy(l,e,t){return Sv(eA(l.clone(),e),t)}function _v(l){return l.toString()}function L2(l){return new Ve(l.x===0?0:Math.abs(l.x)/l.x,l.y===0?0:Math.abs(l.y)/l.y)}function Av(l,e){let t=1/0;for(let o=0,c=e.length;o<c;o+=1){const d=l.manhattanDistance(e[o]);d<t&&(t=d)}return t}function cw(l,e,t,o,c){const d=c.precision,f=c.directionMap,v=l.diff(e.getCenter()),b=Object.keys(f).reduce((w,_)=>{if(t.includes(_)){const A=f[_],P=new Ve(l.x+A.x*(Math.abs(v.x)+e.width),l.y+A.y*(Math.abs(v.y)+e.height)),q=new fr(l,P).intersect(e)||[];let ee,ge=null;for(let _e=0;_e<q.length;_e+=1){const ke=q[_e],Se=l.squaredDistance(ke);(ee==null||Se>ee)&&(ee=Se,ge=ke)}if(ge){let _e=vy(ge,o,d);e.containsPoint(_e)&&(_e=vy(_e.translate(A.x*o.x,A.y*o.y),o,d)),w.push(_e)}}return w},[]);return e.containsPoint(l)||b.push(vy(l,o,d)),b}function tA(l,e,t,o,c){const d=[];let f=L2(c.diff(t)),v=_v(t),b=l[v],w;for(;b;){w=e[v];const P=L2(w.diff(b));P.equals(f)||(d.unshift(w),f=P),v=_v(b),b=l[v]}const _=e[v];return L2(_.diff(o)).equals(f)||d.unshift(_),d}function nA(l,e,t,o,c){const d=c.precision;let f,v;Rn.isRectangle(e)?f=Sv(q_(l,c).clone(),d):f=Sv(e.clone(),d),Rn.isRectangle(t)?v=Sv(t3(l,c).clone(),d):v=Sv(t.clone(),d);const b=Q_(c.step,f,v),w=f,_=v;let A,P;if(Rn.isRectangle(e)?A=cw(w,e,c.startDirections,b,c):A=[w],Rn.isRectangle(t)?P=cw(v,t,c.endDirections,b,c):P=[_],A=A.filter(V=>o.isAccessible(V)),P=P.filter(V=>o.isAccessible(V)),A.length>0&&P.length>0){const V=new Y_,q={},ee={},ge={};for(let Cn=0,Sn=A.length;Cn<Sn;Cn+=1){const Ln=A[Cn],Jr=_v(Ln);V.add(Jr,Av(Ln,P)),q[Jr]=Ln,ge[Jr]=0}const _e=c.previousDirectionAngle,ke=_e===void 0;let Se,Ue;const Qe=r3(b,c),bt=Qe.length,Ot=P.reduce((Cn,Sn)=>{const Ln=_v(Sn);return Cn.push(Ln),Cn},[]),Kt=Ve.equalPoints(A,P);let Fn=c.maxLoopCount;for(;!V.isEmpty()&&Fn>0;){const Cn=V.pop(),Sn=q[Cn],Ln=ee[Cn],Jr=ge[Cn],ii=Sn.equals(w),Ht=Ln==null;let Pn;if(Ht?ke?ii?Pn=null:Pn=sw(w,Sn,bt,b,c):Pn=_e:Pn=sw(Ln,Sn,bt,b,c),!(Ht&&Kt)&&Ot.indexOf(Cn)>=0)return c.previousDirectionAngle=Pn,tA(ee,q,Sn,w,_);for(let Ro=0;Ro<bt;Ro+=1){Se=Qe[Ro];const as=Se.angle;if(Ue=J_(Pn,as),!(ke&&ii)&&Ue>c.maxDirectionChange)continue;const Oa=vy(Sn.clone().translate(Se.gridOffsetX||0,Se.gridOffsetY||0),b,d),_s=_v(Oa);if(V.isClose(_s)||!o.isAccessible(Oa))continue;if(Ot.indexOf(_s)>=0&&!Oa.equals(_)){const up=sw(Oa,_,bt,b,c);if(J_(as,up)>c.maxDirectionChange)continue}const r1=Se.cost,Tu=ii?0:c.penalties[Ue],b0=Jr+r1+Tu;(!V.isOpen(_s)||b0<ge[_s])&&(q[_s]=Oa,ee[_s]=Sn,ge[_s]=b0,V.add(_s,b0+Av(Oa,P)))}Fn-=1}}return c.fallbackRoute?er(c.fallbackRoute,this,w,_,c):null}const rA=function(l,e,t){const o=Z_(e),c=iw(t,o),d=ow(t,o),f=q_(t,o),v=new K_(o).build(t.graph.model,t.cell),b=l.map(V=>Ve.create(V)),w=[];let _=f,A,P;for(let V=0,q=b.length;V<=q;V+=1){let ee=null;if(A=P||c,P=b[V],P==null){P=d;const _e=t.cell;if((_e.getSourceCellId()==null||_e.getTargetCellId()==null)&&typeof o.draggingRouter=="function"){const Se=A===c?f:A,Ue=P.getOrigin();ee=er(o.draggingRouter,t,Se,Ue,o)}}if(ee==null&&(ee=nA(t,A,P,v,o)),ee===null)return console.warn("Unable to execute manhattan algorithm, use orth instead"),er(o.fallbackRouter,this,l,o,t);const ge=ee[0];ge&&ge.equals(_)&&ee.shift(),_=ee[ee.length-1]||_,w.push(...ee)}return w},lw=function(l,e,t){return er(rA,this,l,Object.assign(Object.assign({},X_),e),t)},i3={maxDirectionChange:45,directions(){const l=sp(this.step,this),e=sp(this.cost,this),t=Math.ceil(Math.sqrt(l*l<<1));return[{cost:e,offsetX:l,offsetY:0},{cost:t,offsetX:l,offsetY:l},{cost:e,offsetX:0,offsetY:l},{cost:t,offsetX:-l,offsetY:l},{cost:e,offsetX:-l,offsetY:0},{cost:t,offsetX:-l,offsetY:-l},{cost:e,offsetX:0,offsetY:-l},{cost:t,offsetX:l,offsetY:-l}]},fallbackRoute(l,e,t){const o=l.theta(e),c=[];let d={x:e.x,y:l.y},f={x:l.x,y:e.y};if(o%180>90){const Se=d;d=f,f=Se}const v=o%90<45?d:f,b=new fr(l,v),w=90*Math.ceil(o/90),_=Ve.fromPolar(b.squaredLength(),ki.toRad(w+135),v),A=new fr(e,_),P=b.intersectsWithLine(A),V=P||e,q=P?V:l,ee=360/t.directions.length,ge=q.theta(e),_e=ki.normalize(ge+ee/2),ke=ee*Math.floor(_e/ee);return t.previousDirectionAngle=ke,V&&c.push(V.round()),c.push(e),c}},o3=function(l,e,t){return er(lw,this,l,Object.assign(Object.assign({},i3),e),t)},s3=function(l,e,t){const o=e.offset||32,c=e.min==null?16:e.min;let d=0,f=e.direction;const v=t.sourceBBox,b=t.targetBBox,w=v.getCenter(),_=b.getCenter();if(typeof o=="number"&&(d=o),f==null){let _e=b.left-v.right,ke=b.top-v.bottom;_e>=0&&ke>=0?f=_e>=ke?"L":"T":_e<=0&&ke>=0?(_e=v.left-b.right,_e>=0?f=_e>=ke?"R":"T":f="T"):_e>=0&&ke<=0?(ke=v.top-b.bottom,ke>=0?f=_e>=ke?"L":"B":f="L"):(_e=v.left-b.right,ke=v.top-b.bottom,_e>=0&&ke>=0?f=_e>=ke?"R":"B":_e<=0&&ke>=0?f="B":_e>=0&&ke<=0?f="R":f=Math.abs(_e)>Math.abs(ke)?"R":"B")}f==="H"?f=_.x-w.x>=0?"L":"R":f==="V"&&(f=_.y-w.y>=0?"T":"B"),o==="center"&&(f==="L"?d=(b.left-v.right)/2:f==="R"?d=(v.left-b.right)/2:f==="T"?d=(b.top-v.bottom)/2:f==="B"&&(d=(v.top-b.bottom)/2));let A,P,V;const q=f==="L"||f==="R";if(q){if(_.y===w.y)return[...l];V=f==="L"?1:-1,A="x",P="width"}else{if(_.x===w.x)return[...l];V=f==="T"?1:-1,A="y",P="height"}const ee=w.clone(),ge=_.clone();if(ee[A]+=V*(v[P]/2+d),ge[A]-=V*(b[P]/2+d),q){const _e=ee.x,ke=ge.x,Se=v.width/2+c,Ue=b.width/2+c;_.x>w.x?ke<=_e&&(ee.x=Math.max(ke,w.x+Se),ge.x=Math.min(_e,_.x-Ue)):ke>=_e&&(ee.x=Math.min(ke,w.x-Se),ge.x=Math.max(_e,_.x+Ue))}else{const _e=ee.y,ke=ge.y,Se=v.height/2+c,Ue=b.height/2+c;_.y>w.y?ke<=_e&&(ee.y=Math.max(ke,w.y+Se),ge.y=Math.min(_e,_.y-Ue)):ke>=_e&&(ee.y=Math.min(ke,w.y-Se),ge.y=Math.max(_e,_.y+Ue))}return[ee.toJSON(),...l,ge.toJSON()]};function Tv(l,e){if(e!=null&&e!==!1){const t=typeof e=="boolean"?0:e;if(t>0){const o=Ve.create(l[1]).move(l[2],t),c=Ve.create(l[1]).move(l[0],t);return[o.toJSON(),...l,c.toJSON()]}{const o=l[1];return[Object.assign({},o),...l,Object.assign({},o)]}}return l}const a3=function(l,e,t){const o=e.width||50,d=(e.height||80)/2,f=e.angle||"auto",v=t.sourceAnchor,b=t.targetAnchor,w=t.sourceBBox,_=t.targetBBox;if(v.equals(b)){const A=_e=>{const ke=ki.toRad(_e),Se=Math.sin(ke),Ue=Math.cos(ke),Qe=new Ve(v.x+Ue*o,v.y+Se*o),bt=new Ve(Qe.x-Ue*d,Qe.y-Se*d),Ot=bt.clone().rotate(-90,Qe),Kt=bt.clone().rotate(90,Qe);return[Ot.toJSON(),Qe.toJSON(),Kt.toJSON()]},P=_e=>{const ke=v.clone().move(_e,-1),Se=new fr(ke,_e);return!w.containsPoint(_e)&&!w.intersectsWithLine(Se)},V=[0,90,180,270,45,135,225,315];if(typeof f=="number")return Tv(A(f),e.merge);const q=w.getCenter();if(q.equals(v))return Tv(A(0),e.merge);const ee=q.angleBetween(v,q.clone().translate(1,0));let ge=A(ee);if(P(ge[1]))return Tv(ge,e.merge);for(let _e=1,ke=V.length;_e<ke;_e+=1)if(ge=A(ee+V[_e]),P(ge[1]))return Tv(ge,e.merge);return Tv(ge,e.merge)}{const A=new fr(v,b);let P=A.parallel(-o),V=P.getCenter(),q=P.start.clone().move(P.end,d),ee=P.end.clone().move(P.start,d);const ge=A.parallel(-1),_e=new fr(ge.start,V),ke=new fr(ge.end,V);if((w.containsPoint(V)||_.containsPoint(V)||w.intersectsWithLine(_e)||w.intersectsWithLine(ke)||_.intersectsWithLine(_e)||_.intersectsWithLine(ke))&&(P=A.parallel(o),V=P.getCenter(),q=P.start.clone().move(P.end,d),ee=P.end.clone().move(P.start,d)),e.merge){const Se=new fr(v,b),Ue=new fr(V,Se.center).setLength(Number.MAX_SAFE_INTEGER),Qe=w.intersectsWithLine(Ue),bt=_.intersectsWithLine(Ue),Ot=Qe?Array.isArray(Qe)?Qe:[Qe]:[];bt&&(Array.isArray(bt)?Ot.push(...bt):Ot.push(bt));const Kt=Se.center.closest(Ot);Kt?(t.sourceAnchor=Kt.clone(),t.targetAnchor=Kt.clone()):(t.sourceAnchor=Se.center.clone(),t.targetAnchor=Se.center.clone())}return Tv([q.toJSON(),V.toJSON(),ee.toJSON()],e.merge)}};var ap;(function(l){l.presets=ce,l.registry=js.create({type:"router"}),l.registry.register(l.presets,!0)})(ap||(ap={}));const c3=function(l,e,t,o={}){const c=[l,...t,e],d=new da(c),f=new Nr(d);return o.raw?f:f.serialize()},iA=function(l,e,t,o={}){const c=t.length===3?0:1,d=Ve.create(t[0+c]),f=Ve.create(t[2+c]),v=Ve.create(t[1+c]);if(!Ve.equals(l,e)){const w=new Ve((l.x+e.x)/2,(l.y+e.y)/2),_=w.angleBetween(Ve.create(l).rotate(90,w),v);_>1&&(d.rotate(180-_,w),f.rotate(180-_,w),v.rotate(180-_,w))}const b=`
     M ${l.x} ${l.y}
     Q ${d.x} ${d.y} ${v.x} ${v.y}
     Q ${f.x} ${f.y} ${e.x} ${e.y}
  `;return o.raw?Nr.parse(b):b},oA=function(l,e,t,o={}){const c=new Nr;c.appendSegment(Nr.createSegment("M",l));const d=1/3,f=2/3,v=o.radius||10;let b,w;for(let _=0,A=t.length;_<A;_+=1){const P=Ve.create(t[_]),V=t[_-1]||l,q=t[_+1]||e;b=w||P.distance(V)/2,w=P.distance(q)/2;const ee=-Math.min(v,b),ge=-Math.min(v,w),_e=P.clone().move(V,ee).round(),ke=P.clone().move(q,ge).round(),Se=new Ve(d*_e.x+f*P.x,f*P.y+d*_e.y),Ue=new Ve(d*ke.x+f*P.x,f*P.y+d*ke.y);c.appendSegment(Nr.createSegment("L",_e)),c.appendSegment(Nr.createSegment("C",Se,Ue,ke))}return c.appendSegment(Nr.createSegment("L",e)),o.raw?c:c.serialize()},sA=function(l,e,t,o={}){let c,d=o.direction;if(t&&t.length!==0){const f=[l,...t,e],v=Vs.throughPoints(f);c=new Nr(v)}else if(c=new Nr,c.appendSegment(Nr.createSegment("M",l)),d||(d=Math.abs(l.x-e.x)>=Math.abs(l.y-e.y)?"H":"V"),d==="H"){const f=(l.x+e.x)/2;c.appendSegment(Nr.createSegment("C",f,l.y,f,e.y,e.x,e.y))}else{const f=(l.y+e.y)/2;c.appendSegment(Nr.createSegment("C",l.x,f,e.x,f,e.x,e.y))}return o.raw?c:c.serialize()},uw=1,my=1/3,ug=2/3;function aA(l){let e=l.graph._jumpOverUpdateList;if(e==null&&(e=l.graph._jumpOverUpdateList=[],l.graph.on("cell:mouseup",()=>{const t=l.graph._jumpOverUpdateList;for(let o=0;o<t.length;o+=1)t[o].update()}),l.graph.on("model:reseted",()=>{e=l.graph._jumpOverUpdateList=[]})),e.indexOf(l)<0){e.push(l);const t=()=>e.splice(e.indexOf(l),1);l.cell.once("change:connector",t),l.cell.once("removed",t)}}function G2(l,e,t=[]){const o=[l,...t,e],c=[];return o.forEach((d,f)=>{const v=o[f+1];v!=null&&c.push(new fr(d,v))}),c}function cA(l,e){const t=[];return e.forEach(o=>{const c=l.intersectsWithLine(o);c&&t.push(c)}),t}function dw(l,e){return new fr(l,e).squaredLength()}function lA(l,e,t){return e.reduce((o,c,d)=>{if(F2.includes(c))return o;const f=o.pop()||l,v=Ve.create(c).move(f.start,-t);let b=Ve.create(c).move(f.start,+t);const w=e[d+1];if(w!=null){const P=b.distance(w);P<=t&&(b=w.move(f.start,P),F2.push(w))}else if(v.distance(f.end)<t*2+uw)return o.push(f),o;if(b.distance(f.start)<t*2+uw)return o.push(f),o;const A=new fr(v,b);return yy.push(A),o.push(new fr(f.start,v),A,new fr(b,f.end)),o},[])}function uA(l,e,t,o){const c=new Nr;let d;return d=Nr.createSegment("M",l[0].start),c.appendSegment(d),l.forEach((f,v)=>{if(yy.includes(f)){let b,w,_,A;if(t==="arc"){b=-90,w=f.start.diff(f.end),(w.x<0||w.x===0&&w.y<0)&&(b+=180);const V=f.getCenter(),q=new fr(V,f.end).rotate(b,V);let ee;ee=new fr(f.start,V),_=ee.pointAt(2/3).rotate(b,f.start),A=q.pointAt(1/3).rotate(-b,q.end),d=Nr.createSegment("C",_,A,q.end),c.appendSegment(d),ee=new fr(V,f.end),_=q.pointAt(1/3).rotate(b,q.end),A=ee.pointAt(1/3).rotate(-b,f.end),d=Nr.createSegment("C",_,A,f.end),c.appendSegment(d)}else if(t==="gap")d=Nr.createSegment("M",f.end),c.appendSegment(d);else if(t==="cubic"){b=f.start.theta(f.end);const P=e*.6;let V=e*1.35;w=f.start.diff(f.end),(w.x<0||w.x===0&&w.y<0)&&(V*=-1),_=new Ve(f.start.x+P,f.start.y+V).rotate(b,f.start),A=new Ve(f.end.x-P,f.end.y+V).rotate(b,f.end),d=Nr.createSegment("C",_,A,f.end),c.appendSegment(d)}}else{const b=l[v+1];o===0||!b||yy.includes(b)?(d=Nr.createSegment("L",f.end),c.appendSegment(d)):dA(o,c,f.end,f.start,b.end)}}),c}function dA(l,e,t,o,c){const d=t.distance(o)/2,f=t.distance(c)/2,v=-Math.min(l,d),b=-Math.min(l,f),w=t.clone().move(o,v).round(),_=t.clone().move(c,b).round(),A=new Ve(my*w.x+ug*t.x,ug*t.y+my*w.y),P=new Ve(my*_.x+ug*t.x,ug*t.y+my*_.y);let V;V=Nr.createSegment("L",w),e.appendSegment(V),V=Nr.createSegment("C",A,P,_),e.appendSegment(V)}let yy,F2;const l3=function(l,e,t,o={}){yy=[],F2=[],aA(this);const c=o.size||5,d=o.type||"arc",f=o.radius||0,v=o.ignoreConnectors||["smooth"],b=this.graph,_=b.model.getEdges();if(_.length===1)return uA(G2(l,e,t),c,d,f);const A=this.cell,P=_.indexOf(A),V=b.options.connecting.connector||{},q=_.filter((Ue,Qe)=>{const bt=Ue.getConnector()||V;return v.includes(bt.name)?!1:Qe>P?bt.name!=="jumpover":!0}),ee=q.map(Ue=>b.renderer.findViewByCell(Ue)),ge=G2(l,e,t),_e=ee.map(Ue=>Ue==null?[]:Ue===this?ge:G2(Ue.sourcePoint,Ue.targetPoint,Ue.routePoints)),ke=[];ge.forEach(Ue=>{const Qe=q.reduce((bt,Ot,Kt)=>{if(Ot!==A){const Fn=cA(Ue,_e[Kt]);bt.push(...Fn)}return bt},[]).sort((bt,Ot)=>dw(Ue.start,bt)-dw(Ue.start,Ot));Qe.length>0?ke.push(...lA(Ue,Qe,c)):ke.push(Ue)});const Se=uA(ke,c,d,f);return yy=[],F2=[],o.raw?Se:Se.serialize()};var dg;(function(l){l.presets=fe,l.registry=js.create({type:"connector"}),l.registry.register(l.presets,!0)})(dg||(dg={}));const u3=js.create;class Mv{constructor(e){this.cell=e,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(e,t,o={},c="/"){const d=this.cell.getPropByPath(e),f=So(o,Mv.defaultOptions),v=this.getTiming(f.timing),b=this.getInterp(f.interp,d,t);let w=0;const _=Array.isArray(e)?e.join(c):e,A=Array.isArray(e)?e:e.split(c),P=()=>{const V=new Date().getTime();w===0&&(w=V);let ee=(V-w)/f.duration;ee<1?this.ids[_]=p2(P):ee=1;const ge=b(v(ee));this.cell.setPropByPath(A,ge),o.progress&&o.progress(Object.assign({progress:ee,currentValue:ge},this.getArgs(_))),ee===1&&(this.cell.notify("transition:end",this.getArgs(_)),this.cell.notify("transition:complete",this.getArgs(_)),o.complete&&o.complete(this.getArgs(_)),this.cell.notify("transition:finish",this.getArgs(_)),o.finish&&o.finish(this.getArgs(_)),this.clean(_))};return setTimeout(()=>{this.stop(e,void 0,c),this.cache[_]={startValue:d,targetValue:t,options:f},this.ids[_]=p2(P),this.cell.notify("transition:begin",this.getArgs(_)),this.cell.notify("transition:start",this.getArgs(_)),o.start&&o.start(this.getArgs(_))},o.delay),this.stop.bind(this,e,c,o)}stop(e,t={},o="/"){const c=Array.isArray(e)?e:e.split(o);return Object.keys(this.ids).filter(d=>gu(c,d.split(o).slice(0,c.length))).forEach(d=>{CC(this.ids[d]);const f=this.cache[d],v=this.getArgs(d),b=Object.assign(Object.assign({},f.options),t),w=b.jumpedToEnd;w&&f.targetValue!=null&&(this.cell.setPropByPath(d,f.targetValue),this.cell.notify("transition:end",Object.assign({},v)),this.cell.notify("transition:complete",Object.assign({},v)),b.complete&&b.complete(Object.assign({},v)));const _=Object.assign({jumpedToEnd:w},v);this.cell.notify("transition:stop",Object.assign({},_)),b.stop&&b.stop(Object.assign({},_)),this.cell.notify("transition:finish",Object.assign({},v)),b.finish&&b.finish(Object.assign({},v)),this.clean(d)}),this}clean(e){delete this.ids[e],delete this.cache[e]}getTiming(e){return typeof e=="string"?n0[e]:e}getInterp(e,t,o){return e?e(t,o):typeof o=="number"?r0.number(t,o):typeof o=="string"?o[0]==="#"?r0.color(t,o):r0.unit(t,o):r0.object(t,o)}getArgs(e){const t=this.cache[e];return{path:e,startValue:t.startValue,targetValue:t.targetValue,cell:this.cell}}}(function(l){l.defaultOptions={delay:10,duration:100,timing:"linear"}})(Mv||(Mv={}));var hA=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class hw extends Ss{constructor(e={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(Yo(e)),this.changed={}}mutate(e,t={}){const o=t.unset===!0,c=t.silent===!0,d=[],f=this.changing;this.changing=!0,f||(this.previous=Yo(this.data),this.changed={});const v=this.data,b=this.previous,w=this.changed;if(Object.keys(e).forEach(_=>{const A=_,P=e[A];gu(v[A],P)||d.push(A),gu(b[A],P)?delete w[A]:w[A]=P,o?delete v[A]:v[A]=P}),!c&&d.length>0&&(this.pending=!0,this.pendingOptions=t,d.forEach(_=>{this.emit("change:*",{key:_,options:t,store:this,current:v[_],previous:b[_]})})),f)return this;if(!c)for(;this.pending;)this.pending=!1,this.emit("changed",{current:v,previous:b,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(e,t){if(e==null)return this.data;const o=this.data[e];return o??t}getPrevious(e){if(this.previous){const t=this.previous[e];return t??void 0}}set(e,t,o){return e!=null&&(typeof e=="object"?this.mutate(e,t):this.mutate({[e]:t},o)),this}remove(e,t){const c={};let d;if(typeof e=="string")c[e]=void 0,d=t;else if(Array.isArray(e))e.forEach(f=>c[f]=void 0),d=t;else{for(const f in this.data)c[f]=void 0;d=e}return this.mutate(c,Object.assign(Object.assign({},d),{unset:!0})),this}getByPath(e){return q0(this.data,e,"/")}setByPath(e,t,o={}){const c="/",d=Array.isArray(e)?[...e]:e.split(c),f=Array.isArray(e)?e.join(c):e,v=d[0],b=d.length;if(o.propertyPath=f,o.propertyValue=t,o.propertyPathArray=d,b===1)this.set(v,t,o);else{const w={};let _=w,A=v;for(let q=1;q<b;q+=1){const ee=d[q],ge=Number.isFinite(Number(ee));_=_[A]=ge?[]:{},A=ee}lh(w,d,t,c);const P=Yo(this.data);o.rewrite&&Dm(P,e,c);const V=wo(P,w);this.set(v,V[v],o)}return this}removeByPath(e,t){const o=Array.isArray(e)?e:e.split("/"),c=o[0];if(o.length===1)this.remove(c,t);else{const d=o.slice(1),f=Yo(this.get(c));f&&Dm(f,d),this.set(c,f,t)}return this}hasChanged(e){return e==null?Object.keys(this.changed).length>0:e in this.changed}getChanges(e){if(e==null)return this.hasChanged()?Yo(this.changed):null;const t=this.changing?this.previous:this.data,o={};let c;for(const d in e){const f=e[d];gu(t[d],f)||(o[d]=f,c=!0)}return c?Yo(o):null}toJSON(){return Yo(this.data)}clone(){const e=this.constructor;return new e(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}hA([Ss.dispose()],hw.prototype,"dispose",null);var fA=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},fw=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class Ti extends Ss{constructor(e={}){super();const o=this.constructor.getDefaults(!0),c=wo({},this.preprocess(o),this.preprocess(e));this.id=c.id||iC(),this.store=new hw(c),this.animation=new Mv(this),this.setup(),this.init(),this.postprocess(e)}static config(e){const{markup:t,propHooks:o,attrHooks:c}=e,d=fw(e,["markup","propHooks","attrHooks"]);t!=null&&(this.markup=t),o&&(this.propHooks=this.propHooks.slice(),Array.isArray(o)?this.propHooks.push(...o):typeof o=="function"?this.propHooks.push(o):Object.keys(o).forEach(f=>{const v=o[f];typeof v=="function"&&this.propHooks.push(v)})),c&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),c)),this.defaults=wo({},this.defaults,d)}static getMarkup(){return this.markup}static getDefaults(e){return e?this.defaults:Yo(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(e,t){return this.propHooks.reduce((o,c)=>c?er(c,e,o):o,t)}get[Symbol.toStringTag](){return Ti.toStringTag}init(){}get model(){return this._model}set model(e){this._model!==e&&(this._model=e)}preprocess(e,t){const o=e.id,d=this.constructor.applyPropHooks(this,e);return o==null&&t!==!0&&(d.id=iC()),d}postprocess(e){}setup(){this.store.on("change:*",e=>{const{key:t,current:o,previous:c,options:d}=e;this.notify("change:*",{key:t,options:d,current:o,previous:c,cell:this}),this.notify(`change:${t}`,{options:d,current:o,previous:c,cell:this});const f=t;(f==="source"||f==="target")&&this.notify("change:terminal",{type:f,current:o,previous:c,options:d,cell:this})}),this.store.on("changed",({options:e})=>this.notify("changed",{options:e,cell:this}))}notify(e,t){this.trigger(e,t);const o=this.model;return o&&(o.notify(`cell:${e}`,t),this.isNode()?o.notify(`node:${e}`,Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&o.notify(`edge:${e}`,Object.assign(Object.assign({},t),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(e){return this.store===e.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(e,t){return e==null?this.store.get():this.store.get(e,t)}setProp(e,t,o){if(typeof e=="string")this.store.set(e,t,o);else{const c=this.preprocess(e,!0);this.store.set(wo({},this.getProp(),c),t),this.postprocess(e)}return this}removeProp(e,t){return typeof e=="string"||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}hasChanged(e){return e==null?this.store.hasChanged():this.store.hasChanged(e)}getPropByPath(e){return this.store.getByPath(e)}setPropByPath(e,t,o={}){return this.model&&(e==="children"?this._children=t?t.map(c=>this.model.getCell(c)).filter(c=>c!=null):null:e==="parent"&&(this._parent=t?this.model.getCell(t):null)),this.store.setByPath(e,t,o),this}removePropByPath(e,t={}){const o=Array.isArray(e)?e:e.split("/");return o[0]==="attrs"&&(t.dirty=!0),this.store.removeByPath(o,t),this}prop(e,t,o){return e==null?this.getProp():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getPropByPath(e):t==null?this.removePropByPath(e,o||{}):this.setPropByPath(e,t,o||{}):this.setProp(e,t||{})}previous(e){return this.store.getPrevious(e)}get zIndex(){return this.getZIndex()}set zIndex(e){e==null?this.removeZIndex():this.setZIndex(e)}getZIndex(){return this.store.get("zIndex")}setZIndex(e,t={}){return this.store.set("zIndex",e,t),this}removeZIndex(e={}){return this.store.remove("zIndex",e),this}toFront(e={}){const t=this.model;if(t){let o=t.getMaxZIndex(),c;e.deep?(c=this.getDescendants({deep:!0,breadthFirst:!0}),c.unshift(this)):c=[this],o=o-c.length+1;const d=t.total();let f=t.indexOf(this)!==d-c.length;f||(f=c.some((v,b)=>v.getZIndex()!==o+b)),f&&this.batchUpdate("to-front",()=>{o+=c.length,c.forEach((v,b)=>{v.setZIndex(o+b,e)})})}return this}toBack(e={}){const t=this.model;if(t){let o=t.getMinZIndex(),c;e.deep?(c=this.getDescendants({deep:!0,breadthFirst:!0}),c.unshift(this)):c=[this];let d=t.indexOf(this)!==0;d||(d=c.some((f,v)=>f.getZIndex()!==o+v)),d&&this.batchUpdate("to-back",()=>{o-=c.length,c.forEach((f,v)=>{f.setZIndex(o+v,e)})})}return this}get markup(){return this.getMarkup()}set markup(e){e==null?this.removeMarkup():this.setMarkup(e)}getMarkup(){let e=this.store.get("markup");return e==null&&(e=this.constructor.getMarkup()),e}setMarkup(e,t={}){return this.store.set("markup",e,t),this}removeMarkup(e={}){return this.store.remove("markup",e),this}get attrs(){return this.getAttrs()}set attrs(e){e==null?this.removeAttrs():this.setAttrs(e)}getAttrs(){const e=this.store.get("attrs");return e?Object.assign({},e):{}}setAttrs(e,t={}){if(e==null)this.removeAttrs(t);else{const o=c=>this.store.set("attrs",c,t);if(t.overwrite===!0)o(e);else{const c=this.getAttrs();t.deep===!1?o(Object.assign(Object.assign({},c),e)):o(wo({},c,e))}}return this}replaceAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}removeAttrs(e={}){return this.store.remove("attrs",e),this}getAttrDefinition(e){if(!e)return null;const o=this.constructor.getAttrHooks()||{};let c=o[e]||vh.registry.get(e);if(!c){const d=Qb(e);c=o[d]||vh.registry.get(d)}return c||null}getAttrByPath(e){return e==null||e===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}setAttrByPath(e,t,o={}){return this.setPropByPath(this.prefixAttrPath(e),t,o),this}removeAttrByPath(e,t={}){return this.removePropByPath(this.prefixAttrPath(e),t),this}prefixAttrPath(e){return Array.isArray(e)?["attrs"].concat(e):`attrs/${e}`}attr(e,t,o){return e==null?this.getAttrByPath():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getAttrByPath(e):t==null?this.removeAttrByPath(e,o||{}):this.setAttrByPath(e,t,o||{}):this.setAttrs(e,t||{})}get visible(){return this.isVisible()}set visible(e){this.setVisible(e)}setVisible(e,t={}){return this.store.set("visible",e,t),this}isVisible(){return this.store.get("visible")!==!1}show(e={}){return this.isVisible()||this.setVisible(!0,e),this}hide(e={}){return this.isVisible()&&this.setVisible(!1,e),this}toggleVisible(e,t={}){const o=typeof e=="boolean"?e:!this.isVisible(),c=typeof e=="boolean"?t:e;return o?this.show(c):this.hide(c),this}get data(){return this.getData()}set data(e){this.setData(e)}getData(){return this.store.get("data")}setData(e,t={}){if(e==null)this.removeData(t);else{const o=c=>this.store.set("data",c,t);if(t.overwrite===!0)o(e);else{const c=this.getData();t.deep===!1?o(typeof e=="object"?Object.assign(Object.assign({},c),e):e):o(wo({},c,e))}}return this}replaceData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}removeData(e={}){return this.store.remove("data",e),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const e=this.getParentId();if(e&&this.model){const t=this.model.getCell(e);return this._parent=t,t}return null}getChildren(){const e=this.store.get("children");if(e&&e.length&&this.model){const t=e.map(o=>{var c;return(c=this.model)===null||c===void 0?void 0:c.getCell(o)}).filter(o=>o!=null);return this._children=t,[...t]}return null}hasParent(){return this.parent!=null}isParentOf(e){return e!=null&&e.getParent()===this}isChildOf(e){return e!=null&&this.getParent()===e}eachChild(e,t){return this.children&&this.children.forEach(e,t),this}filterChild(e,t){return this.children?this.children.filter(e,t):[]}getChildCount(){return this.children==null?0:this.children.length}getChildIndex(e){return this.children==null?-1:this.children.indexOf(e)}getChildAt(e){return this.children!=null&&e>=0?this.children[e]:null}getAncestors(e={}){const t=[];let o=this.getParent();for(;o;)t.push(o),o=e.deep!==!1?o.getParent():null;return t}getDescendants(e={}){if(e.deep!==!1){if(e.breadthFirst){const t=[],o=this.getChildren()||[];for(;o.length>0;){const c=o.shift(),d=c.getChildren();t.push(c),d&&o.push(...d)}return t}{const t=this.getChildren()||[];return t.forEach(o=>{t.push(...o.getDescendants(e))}),t}}return this.getChildren()||[]}isDescendantOf(e,t={}){if(e==null)return!1;if(t.deep!==!1){let o=this.getParent();for(;o;){if(o===e)return!0;o=o.getParent()}return!1}return this.isChildOf(e)}isAncestorOf(e,t={}){return e==null?!1:e.isDescendantOf(this,t)}contains(e){return this.isAncestorOf(e)}getCommonAncestor(...e){return Ti.getCommonAncestor(this,...e)}setParent(e,t={}){return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}setChildren(e,t={}){return this._children=e,e!=null?this.store.set("children",e.map(o=>o.id),t):this.store.remove("children",t),this}unembed(e,t={}){const o=this.children;if(o!=null&&e!=null){const c=this.getChildIndex(e);c!==-1&&(o.splice(c,1),e.setParent(null,t),this.setChildren(o,t))}return this}embed(e,t={}){return e.addTo(this,t),this}addTo(e,t={}){return Ti.isCell(e)?e.addChild(this,t):e.addCell(this,t),this}insertTo(e,t,o={}){return e.insertChild(this,t,o),this}addChild(e,t={}){return this.insertChild(e,void 0,t)}insertChild(e,t,o={}){if(e!=null&&e!==this){const c=e.getParent(),d=this!==c;let f=t;if(f==null&&(f=this.getChildCount(),d||(f-=1)),c){const b=c.getChildren();if(b){const w=b.indexOf(e);w>=0&&(e.setParent(null,o),b.splice(w,1),c.setChildren(b,o))}}let v=this.children;if(v==null?(v=[],v.push(e)):v.splice(f,0,e),e.setParent(this,o),this.setChildren(v,o),d&&this.model){const b=this.model.getIncomingEdges(this),w=this.model.getOutgoingEdges(this);b&&b.forEach(_=>_.updateParent(o)),w&&w.forEach(_=>_.updateParent(o))}this.model&&this.model.addCell(e,o)}return this}removeFromParent(e={}){const t=this.getParent();if(t!=null){const o=t.getChildIndex(this);t.removeChildAt(o,e)}return this}removeChild(e,t={}){const o=this.getChildIndex(e);return this.removeChildAt(o,t)}removeChildAt(e,t={}){const o=this.getChildAt(e);return this.children!=null&&o!=null&&(this.unembed(o,t),o.remove(t)),o}remove(e={}){return this.batchUpdate("remove",()=>{const t=this.getParent();t&&t.removeChild(this,e),e.deep!==!1&&this.eachChild(o=>o.remove(e)),this.model&&this.model.removeCell(this,e)}),this}transition(e,t,o={},c="/"){return this.animation.start(e,t,o,c)}stopTransition(e,t,o="/"){return this.animation.stop(e,t,o),this}getTransitions(){return this.animation.get()}translate(e,t,o){return this}scale(e,t,o,c){return this}addTools(e,t,o){const c=Array.isArray(e)?e:[e],d=typeof t=="string"?t:null,f=typeof t=="object"?t:typeof o=="object"?o:{};if(f.reset)return this.setTools({name:d,items:c,local:f.local},f);let v=Yo(this.getTools());if(v==null||d==null||v.name===d)return v==null&&(v={}),v.items||(v.items=[]),v.name=d,v.items=[...v.items,...c],this.setTools(Object.assign({},v),f)}setTools(e,t={}){return e==null?this.removeTools():this.store.set("tools",Ti.normalizeTools(e),t),this}getTools(){return this.store.get("tools")}removeTools(e={}){return this.store.remove("tools",e),this}hasTools(e){const t=this.getTools();return t==null?!1:e==null?!0:t.name===e}hasTool(e){const t=this.getTools();return t==null?!1:t.items.some(o=>typeof o=="string"?o===e:o.name===e)}removeTool(e,t={}){const o=Yo(this.getTools());if(o){let c=!1;const d=o.items.slice(),f=v=>{d.splice(v,1),c=!0};if(typeof e=="number")f(e);else for(let v=d.length-1;v>=0;v-=1){const b=d[v];(typeof b=="string"?b===e:b.name===e)&&f(v)}c&&(o.items=d,this.setTools(o,t))}return this}getBBox(e){return new Rn}getConnectionPoint(e,t){return new Ve}toJSON(e={}){const t=Object.assign({},this.store.get()),o=Object.prototype.toString,c=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!t.shape){const q=this.constructor;throw new Error(`Unable to serialize ${c} missing "shape" prop, check the ${c} "${q.name||o.call(q)}"`)}const d=this.constructor,f=e.diff===!0,v=t.attrs||{},b=d.getDefaults(!0),w=f?this.preprocess(b,!0):b,_=w.attrs||{},A={};Object.keys(t).forEach(q=>{const ee=t[q];if(ee!=null&&!Array.isArray(ee)&&typeof ee=="object"&&!Xc(ee))throw new Error(`Can only serialize ${c} with plain-object props, but got a "${o.call(ee)}" type of key "${q}" on ${c} "${this.id}"`);if(q!=="attrs"&&q!=="shape"&&f){const ge=w[q];gu(ee,ge)&&delete t[q]}}),Object.keys(v).forEach(q=>{const ee=v[q],ge=_[q];Object.keys(ee).forEach(_e=>{const ke=ee[_e],Se=ge?ge[_e]:null;ke!=null&&typeof ke=="object"&&!Array.isArray(ke)?Object.keys(ke).forEach(Ue=>{const Qe=ke[Ue];if(ge==null||Se==null||!Gn(Se)||!gu(Se[Ue],Qe)){A[q]==null&&(A[q]={}),A[q][_e]==null&&(A[q][_e]={});const bt=A[q][_e];bt[Ue]=Qe}}):(ge==null||!gu(Se,ke))&&(A[q]==null&&(A[q]={}),A[q][_e]=ke)})});const P=Object.assign(Object.assign({},t),{attrs:pm(A)?void 0:A});P.attrs==null&&delete P.attrs;const V=P;return V.angle===0&&delete V.angle,Yo(V)}clone(e={}){if(!e.deep){const o=Object.assign({},this.store.get());e.keepId||delete o.id,delete o.parent,delete o.children;const c=this.constructor;return new c(o)}return Ti.deepClone(this)[this.id]}findView(e){return e.renderer.findViewByCell(this)}startBatch(e,t={},o=this.model){return this.notify("batch:start",{name:e,data:t,cell:this}),o&&o.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}stopBatch(e,t={},o=this.model){return o&&o.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this.notify("batch:stop",{name:e,data:t,cell:this}),this}batchUpdate(e,t,o){const c=this.model;this.startBatch(e,o,c);const d=t();return this.stopBatch(e,o,c),d}dispose(){this.removeFromParent(),this.store.dispose()}}Ti.defaults={},Ti.attrHooks={},Ti.propHooks=[],fA([Ss.dispose()],Ti.prototype,"dispose",null),function(l){function e(t){return typeof t=="string"?{items:[t]}:Array.isArray(t)?{items:t}:t.items?t:{items:[t]}}l.normalizeTools=e}(Ti||(Ti={})),function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.isNode=="function"&&typeof c.isEdge=="function"&&typeof c.prop=="function"&&typeof c.attr=="function"}l.isCell=e}(Ti||(Ti={})),function(l){function e(...d){const f=d.filter(b=>b!=null).map(b=>b.getAncestors()).sort((b,w)=>b.length-w.length);return f.shift().find(b=>f.every(w=>w.includes(b)))||null}l.getCommonAncestor=e;function t(d,f={}){let v=null;for(let b=0,w=d.length;b<w;b+=1){const _=d[b];let A=_.getBBox(f);if(A){if(_.isNode()){const P=_.getAngle();P!=null&&P!==0&&(A=A.bbox(P))}v=v==null?A:v.union(A)}}return v}l.getCellsBBox=t;function o(d){const f=[d,...d.getDescendants({deep:!0})];return l.cloneCells(f)}l.deepClone=o;function c(d){const f=ma(d),v=f.reduce((b,w)=>(b[w.id]=w.clone(),b),{});return f.forEach(b=>{const w=v[b.id];if(w.isEdge()){const P=w.getSourceCellId(),V=w.getTargetCellId();P&&v[P]&&w.setSource(Object.assign(Object.assign({},w.getSource()),{cell:v[P].id})),V&&v[V]&&w.setTarget(Object.assign(Object.assign({},w.getTarget()),{cell:v[V].id}))}const _=b.getParent();_&&v[_.id]&&w.setParent(v[_.id]);const A=b.getChildren();if(A&&A.length){const P=A.reduce((V,q)=>(v[q.id]&&V.push(v[q.id]),V),[]);P.length>0&&w.setChildren(P)}}),v}l.cloneCells=c}(Ti||(Ti={})),function(l){l.config({propHooks(e){var{tools:t}=e,o=fw(e,["tools"]);return t&&(o.tools=l.normalizeTools(t)),o}})}(Ti||(Ti={}));var u0;(function(l){let e,t;function o(f,v){return v?e!=null&&e.exist(f):t!=null&&t.exist(f)}l.exist=o;function c(f){e=f}l.setEdgeRegistry=c;function d(f){t=f}l.setNodeRegistry=d})(u0||(u0={}));class pA{constructor(e){this.ports=[],this.groups={},this.init(Yo(e))}getPorts(){return this.ports}getGroup(e){return e!=null?this.groups[e]:null}getPortsByGroup(e){return this.ports.filter(t=>t.group===e||t.group==null&&e==null)}getPortsLayoutByGroup(e,t){const o=this.getPortsByGroup(e),c=e?this.getGroup(e):null,d=c?c.position:null,f=d?d.name:null;let v;if(f!=null){const A=rg.registry.get(f);if(A==null)return rg.registry.onNotFound(f);v=A}else v=rg.presets.left;const b=o.map(A=>A&&A.position&&A.position.args||{}),w=d&&d.args||{};return v(b,t,w).map((A,P)=>{const V=o[P];return{portLayout:A,portId:V.id,portSize:V.size,portAttrs:V.attrs,labelSize:V.label.size,labelLayout:this.getPortLabelLayout(V,Ve.create(A.position),t)}})}init(e){const{groups:t,items:o}=e;t!=null&&Object.keys(t).forEach(c=>{this.groups[c]=this.parseGroup(t[c])}),Array.isArray(o)&&o.forEach(c=>{this.ports.push(this.parsePort(c))})}parseGroup(e){return Object.assign(Object.assign({},e),{label:this.getLabel(e,!0),position:this.getPortPosition(e.position,!0)})}parsePort(e){const t=Object.assign({},e),o=this.getGroup(e.group)||{};return t.markup=t.markup||o.markup,t.attrs=wo({},o.attrs,t.attrs),t.position=this.createPosition(o,t),t.label=wo({},o.label,this.getLabel(t)),t.zIndex=this.getZIndex(o,t),t.size=Object.assign(Object.assign({},o.size),t.size),t}getZIndex(e,t){return typeof t.zIndex=="number"?t.zIndex:typeof e.zIndex=="number"||e.zIndex==="auto"?e.zIndex:"auto"}createPosition(e,t){return wo({name:"left",args:{}},e.position,{args:t.args})}getPortPosition(e,t=!1){if(e==null){if(t)return{name:"left",args:{}}}else{if(typeof e=="string")return{name:e,args:{}};if(Array.isArray(e))return{name:"absolute",args:{x:e[0],y:e[1]}};if(typeof e=="object")return e}return{args:{}}}getPortLabelPosition(e,t=!1){if(e==null){if(t)return{name:"left",args:{}}}else{if(typeof e=="string")return{name:e,args:{}};if(typeof e=="object")return e}return{args:{}}}getLabel(e,t=!1){const o=e.label||{};return o.position=this.getPortLabelPosition(o.position,t),o}getPortLabelLayout(e,t,o){const c=e.label.position.name||"left",d=e.label.position.args||{},f=e0.registry.get(c)||e0.presets.left;return f?f(t,o,d):null}}var by=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class ys extends Ti{constructor(e={}){super(e),this.initPorts()}get[Symbol.toStringTag](){return ys.toStringTag}preprocess(e,t){const{x:o,y:c,width:d,height:f}=e,v=by(e,["x","y","width","height"]);if(o!=null||c!=null){const b=v.position;v.position=Object.assign(Object.assign({},b),{x:o??(b?b.x:0),y:c??(b?b.y:0)})}if(d!=null||f!=null){const b=v.size;v.size=Object.assign(Object.assign({},b),{width:d??(b?b.width:0),height:f??(b?b.height:0)})}return super.preprocess(v,t)}isNode(){return!0}size(e,t,o){return e===void 0?this.getSize():typeof e=="number"?this.setSize(e,t,o):this.setSize(e,t)}getSize(){const e=this.store.get("size");return e?Object.assign({},e):{width:1,height:1}}setSize(e,t,o){return typeof e=="object"?this.resize(e.width,e.height,t):this.resize(e,t,o),this}resize(e,t,o={}){this.startBatch("resize",o);const c=o.direction;if(c){const d=this.getSize();switch(c){case"left":case"right":t=d.height;break;case"top":case"bottom":e=d.width;break;default:break}let v={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[c];const b=ki.normalize(this.getAngle()||0);o.absolute&&(v+=Math.floor((b+45)/90),v%=4);const w=this.getBBox();let _;v===0?_=w.getBottomLeft():v===1?_=w.getCorner():v===2?_=w.getTopRight():_=w.getOrigin();const A=_.clone().rotate(-b,w.getCenter()),P=Math.sqrt(e*e+t*t)/2;let V=v*Math.PI/2;V+=Math.atan(v%2===0?t/e:e/t),V-=ki.toRad(b);const ee=Ve.fromPolar(P,V,A).clone().translate(e/-2,t/-2);this.store.set("size",{width:e,height:t},o),this.setPosition(ee.x,ee.y,o)}else this.store.set("size",{width:e,height:t},o);return this.stopBatch("resize",o),this}scale(e,t,o,c={}){const d=this.getBBox().scale(e,t,o??void 0);return this.startBatch("scale",c),this.setPosition(d.x,d.y,c),this.resize(d.width,d.height,c),this.stopBatch("scale"),this}position(e,t,o){return typeof e=="number"?this.setPosition(e,t,o):this.getPosition(e)}getPosition(e={}){if(e.relative){const o=this.getParent();if(o!=null&&o.isNode()){const c=this.getPosition(),d=o.getPosition();return{x:c.x-d.x,y:c.y-d.y}}}const t=this.store.get("position");return t?Object.assign({},t):{x:0,y:0}}setPosition(e,t,o={}){let c,d,f;if(typeof e=="object"?(c=e.x,d=e.y,f=t||{}):(c=e,d=t,f=o||{}),f.relative){const v=this.getParent();if(v!=null&&v.isNode()){const b=v.getPosition();c+=b.x,d+=b.y}}if(f.deep){const v=this.getPosition();this.translate(c-v.x,d-v.y,f)}else this.store.set("position",{x:c,y:d},f);return this}translate(e=0,t=0,o={}){if(e===0&&t===0)return this;o.translateBy=o.translateBy||this.id;const c=this.getPosition();if(o.restrict!=null&&o.translateBy===this.id){const f=this.getBBox({deep:!0}),v=o.restrict,b=c.x-f.x,w=c.y-f.y,_=Math.max(v.x+b,Math.min(v.x+v.width+b-f.width,c.x+e)),A=Math.max(v.y+w,Math.min(v.y+v.height+w-f.height,c.y+t));e=_-c.x,t=A-c.y}const d={x:c.x+e,y:c.y+t};return o.tx=e,o.ty=t,o.transition?(typeof o.transition!="object"&&(o.transition={}),this.transition("position",d,Object.assign(Object.assign({},o.transition),{interp:r0.object})),this.eachChild(f=>{var v;((v=o.exclude)===null||v===void 0?void 0:v.includes(f))||f.translate(e,t,o)})):(this.startBatch("translate",o),this.store.set("position",d,o),this.eachChild(f=>{var v;((v=o.exclude)===null||v===void 0?void 0:v.includes(f))||f.translate(e,t,o)}),this.stopBatch("translate",o)),this}angle(e,t){return e==null?this.getAngle():this.rotate(e,t)}getAngle(){return this.store.get("angle",0)}rotate(e,t={}){const o=this.getAngle();if(t.center){const c=this.getSize(),d=this.getPosition(),f=this.getBBox().getCenter();f.rotate(o-e,t.center);const v=f.x-c.width/2-d.x,b=f.y-c.height/2-d.y;this.startBatch("rotate",{angle:e,options:t}),this.setPosition(d.x+v,d.y+b,t),this.rotate(e,Object.assign(Object.assign({},t),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",t.absolute?e:(o+e)%360,t);return this}getBBox(e={}){if(e.deep){const t=this.getDescendants({deep:!0,breadthFirst:!0});return t.push(this),Ti.getCellsBBox(t)}return Rn.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(e,t){const o=this.getBBox(),c=o.getCenter(),d=e.getTerminal(t);if(d==null)return c;const f=d.port;if(!f||!this.hasPort(f))return c;const v=this.getPort(f);if(!v||!v.group)return c;const w=this.getPortsPosition(v.group)[f].position,_=Ve.create(w).translate(o.getOrigin()),A=this.getAngle();return A&&_.rotate(-A,c),_}fit(e={}){const o=(this.getChildren()||[]).filter(w=>w.isNode());if(o.length===0)return this;this.startBatch("fit-embeds",e),e.deep&&o.forEach(w=>w.fit(e));let{x:c,y:d,width:f,height:v}=Ti.getCellsBBox(o);const b=wl(e.padding);return c-=b.left,d-=b.top,f+=b.left+b.right,v+=b.bottom+b.top,this.store.set({position:{x:c,y:d},size:{width:f,height:v}},e),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(e){this.setPortContainerMarkup(e)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||Xi.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(e,t={}){return this.store.set("portContainerMarkup",Xi.clone(e),t),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(e){this.setPortMarkup(e)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||Xi.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(e,t={}){return this.store.set("portMarkup",Xi.clone(e),t),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(e){this.setPortLabelMarkup(e)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||Xi.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(e,t={}){return this.store.set("portLabelMarkup",Xi.clone(e),t),this}get ports(){const e=this.store.get("ports",{items:[]});return e.items==null&&(e.items=[]),e}getPorts(){return Yo(this.ports.items)}getPortsByGroup(e){return this.getPorts().filter(t=>t.group===e)}getPort(e){return Yo(this.ports.items.find(t=>t.id&&t.id===e))}getPortAt(e){return this.ports.items[e]||null}hasPorts(){return this.ports.items.length>0}hasPort(e){return this.getPortIndex(e)!==-1}getPortIndex(e){const t=typeof e=="string"?e:e.id;return t!=null?this.ports.items.findIndex(o=>o.id===t):-1}getPortsPosition(e){const t=this.getSize();return this.port.getPortsLayoutByGroup(e,new Rn(0,0,t.width,t.height)).reduce((c,d)=>{const f=d.portLayout;return c[d.portId]={position:Object.assign({},f.position),angle:f.angle||0},c},{})}getPortProp(e,t){return this.getPropByPath(this.prefixPortPath(e,t))}setPortProp(e,t,o,c){if(typeof t=="string"||Array.isArray(t)){const v=this.prefixPortPath(e,t),b=o;return this.setPropByPath(v,b,c)}const d=this.prefixPortPath(e),f=t;return this.setPropByPath(d,f,o)}removePortProp(e,t,o){return typeof t=="string"||Array.isArray(t)?this.removePropByPath(this.prefixPortPath(e,t),o):this.removePropByPath(this.prefixPortPath(e),t)}portProp(e,t,o,c){return t==null?this.getPortProp(e):typeof t=="string"||Array.isArray(t)?arguments.length===2?this.getPortProp(e,t):o==null?this.removePortProp(e,t,c):this.setPortProp(e,t,o,c):this.setPortProp(e,t,o)}prefixPortPath(e,t){const o=this.getPortIndex(e);if(o===-1)throw new Error(`Unable to find port with id: "${e}"`);return t==null||t===""?["ports","items",`${o}`]:Array.isArray(t)?["ports","items",`${o}`,...t]:`ports/items/${o}/${t}`}addPort(e,t){const o=[...this.ports.items];return o.push(e),this.setPropByPath("ports/items",o,t),this}addPorts(e,t){return this.setPropByPath("ports/items",[...this.ports.items,...e],t),this}insertPort(e,t,o){const c=[...this.ports.items];return c.splice(e,0,t),this.setPropByPath("ports/items",c,o),this}removePort(e,t={}){return this.removePortAt(this.getPortIndex(e),t)}removePortAt(e,t={}){if(e>=0){const o=[...this.ports.items];o.splice(e,1),t.rewrite=!0,this.setPropByPath("ports/items",o,t)}return this}removePorts(e,t){let o;if(Array.isArray(e)){if(o=t||{},e.length){o.rewrite=!0;const d=[...this.ports.items].filter(f=>!e.some(v=>{const b=typeof v=="string"?v:v.id;return f.id===b}));this.setPropByPath("ports/items",d,o)}}else o=e||{},o.rewrite=!0,this.setPropByPath("ports/items",[],o);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(e,t){return this.port.getPortsLayoutByGroup(e,t)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const e=this.ports,t={};e.items.forEach(f=>{f.id&&(t[f.id]=!0)});const o={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(f=>{f.id&&!t[f.id]&&(o[f.id]=!0)});const d=this.model;d&&!pm(o)&&(d.getConnectedEdges(this,{incoming:!0}).forEach(b=>{const w=b.getTargetPortId();w&&o[w]&&b.remove()}),d.getConnectedEdges(this,{outgoing:!0}).forEach(b=>{const w=b.getSourcePortId();w&&o[w]&&b.remove()}))}validatePorts(){const e={},t=[];return this.ports.items.forEach(o=>{typeof o!="object"&&t.push(`Invalid port ${o}.`),o.id==null&&(o.id=this.generatePortId()),e[o.id]&&t.push("Duplicitied port id."),e[o.id]=!0}),t}generatePortId(){return iC()}updatePortData(){const e=this.validatePorts();if(e.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(e.join(" "));const t=this.port?this.port.getPorts():null;this.port=new pA(this.ports);const o=this.port.getPorts(),c=t?o.filter(f=>t.find(v=>v.id===f.id)?null:f):[...o],d=t?t.filter(f=>o.find(v=>v.id===f.id)?null:f):[];c.length>0&&this.notify("ports:added",{added:c,cell:this,node:this}),d.length>0&&this.notify("ports:removed",{removed:d,cell:this,node:this})}}ys.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.isNode=="function"&&typeof c.isEdge=="function"&&typeof c.prop=="function"&&typeof c.attr=="function"&&typeof c.size=="function"&&typeof c.position=="function"}l.isNode=e}(ys||(ys={})),function(l){l.config({propHooks(e){var{ports:t}=e,o=by(e,["ports"]);return t&&(o.ports=Array.isArray(t)?{items:t}:t),o}})}(ys||(ys={})),function(l){l.registry=js.create({type:"node",process(e,t){if(u0.exist(e,!0))throw new Error(`Node with name '${e}' was registered by anthor Edge`);if(typeof t=="function")return t.config({shape:e}),t;let o=l;const{inherit:c}=t,d=by(t,["inherit"]);if(c)if(typeof c=="string"){const v=this.get(c);v==null?this.onNotFound(c,"inherited"):o=v}else o=c;d.constructorName==null&&(d.constructorName=e);const f=o.define.call(o,d);return f.config({shape:e}),f}}),u0.setNodeRegistry(l.registry)}(ys||(ys={})),function(l){let e=0;function t(d){return d?nC(d):(e+=1,`CustomNode${e}`)}function o(d){const{constructorName:f,overwrite:v}=d,b=by(d,["constructorName","overwrite"]),w=Y0(t(f||b.shape),this);return w.config(b),b.shape&&l.registry.register(b.shape,w,v),w}l.define=o;function c(d){const f=d.shape||"rect",v=l.registry.get(f);return v?new v(d):l.registry.onNotFound(f)}l.create=c}(ys||(ys={}));var gA=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class sc extends ys{get label(){return this.getLabel()}set label(e){this.setLabel(e)}getLabel(){return this.getAttrByPath("text/text")}setLabel(e,t){return e==null?this.removeLabel():this.setAttrByPath("text/text",e,t),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}(function(l){l.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},l.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},l.config({attrs:{text:Object.assign({},l.labelAttr)},propHooks(e){const{label:t}=e,o=gA(e,["label"]);return t&&lh(o,"attrs/text/text",t),o},visible:!0})})(sc||(sc={}));var vA=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};function B2(l,e=!1){return`<g class="rotatable"><g class="scalable"><${l}/></g>${e?"":"<text/>"}</g>`}function z2(l){return`basic.${l}`}function Ov(l="xlink:href"){return t=>{const{imageUrl:o,imageWidth:c,imageHeight:d}=t,f=vA(t,["imageUrl","imageWidth","imageHeight"]);if(o!=null||c!=null||d!=null){const v=()=>{if(f.attrs){const b=f.attrs.image;o!=null&&(b[l]=o),c!=null&&(b.width=c),d!=null&&(b.height=d),f.attrs.image=b}};f.attrs?(f.attrs.image==null&&(f.attrs.image={}),v()):(f.attrs={image:{}},v())}return f}}function yh(l,e,t={}){const o=z2(l),c={constructorName:o,attrs:{".":{fill:"#ffffff",stroke:"none"},[l]:{fill:"#ffffff",stroke:"#000000"}}};return t.ignoreMarkup||(c.markup=B2(l,t.noText===!0)),(t.parent||sc).define(wo(c,e,{shape:o}))}const d3=yh("rect",{attrs:{rect:{width:100,height:60}}}),h3=yh("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),f3=yh("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),p3=yh("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),g3=yh("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),v3=yh("image",{attrs:{text:{refY:null,refDy:16}},propHooks:Ov()});var mA=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const U2=yh("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks(l){const{d:e}=l,t=mA(l,["d"]);return e!=null&&lh(t,"attrs/path/d",e),t}}),m3=yh("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:U2,ignoreMarkup:!0}),y3=yh("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:U2,ignoreMarkup:!0});var xy=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class ss extends Ti{constructor(e={}){super(e)}get[Symbol.toStringTag](){return ss.toStringTag}preprocess(e,t){const{source:o,sourceCell:c,sourcePort:d,sourcePoint:f,target:v,targetCell:b,targetPort:w,targetPoint:_}=e,P=xy(e,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),V=q=>typeof q=="string"||typeof q=="number";if(o!=null)if(Ti.isCell(o))P.source={cell:o.id};else if(V(o))P.source={cell:o};else if(Ve.isPoint(o))P.source=o.toJSON();else if(Array.isArray(o))P.source={x:o[0],y:o[1]};else{const q=o.cell;Ti.isCell(q)?P.source=Object.assign(Object.assign({},o),{cell:q.id}):P.source=o}if(c!=null||d!=null){let q=P.source;if(c!=null){const ee=V(c)?c:c.id;q?q.cell=ee:q=P.source={cell:ee}}d!=null&&q&&(q.port=d)}else f!=null&&(P.source=Ve.create(f).toJSON());if(v!=null)if(Ti.isCell(v))P.target={cell:v.id};else if(V(v))P.target={cell:v};else if(Ve.isPoint(v))P.target=v.toJSON();else if(Array.isArray(v))P.target={x:v[0],y:v[1]};else{const q=v.cell;Ti.isCell(q)?P.target=Object.assign(Object.assign({},v),{cell:q.id}):P.target=v}if(b!=null||w!=null){let q=P.target;if(b!=null){const ee=V(b)?b:b.id;q?q.cell=ee:q=P.target={cell:ee}}w!=null&&q&&(q.port=w)}else _!=null&&(P.target=Ve.create(_).toJSON());return super.preprocess(P,t)}setup(){super.setup(),this.on("change:labels",e=>this.onLabelsChanged(e)),this.on("change:vertices",e=>this.onVertexsChanged(e))}isEdge(){return!0}disconnect(e={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},e),this}get source(){return this.getSource()}set source(e){this.setSource(e)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(e,t,o={}){return this.setTerminal("source",e,t,o)}get target(){return this.getTarget()}set target(e){this.setTarget(e)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(e,t,o={}){return this.setTerminal("target",e,t,o)}getTerminal(e){return Object.assign({},this.store.get(e))}setTerminal(e,t,o,c={}){if(Ti.isCell(t))return this.store.set(e,wo({},o,{cell:t.id}),c),this;const d=t;return Ve.isPoint(t)||d.x!=null&&d.y!=null?(this.store.set(e,wo({},o,{x:d.x,y:d.y}),c),this):(this.store.set(e,Yo(t),c),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(e){const t=this[e];if(Ve.isPointLike(t))return Ve.create(t);const o=this.getTerminalCell(e);return o?o.getConnectionPoint(this,e):new Ve}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(e){if(this.model){const t=e==="source"?this.getSourceCellId():this.getTargetCellId();if(t)return this.model.getCell(t)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(e){let t=this;const o={};for(;t&&t.isEdge();){if(o[t.id])return null;o[t.id]=!0,t=t.getTerminalCell(e)}return t&&t.isNode()?t:null}get router(){return this.getRouter()}set router(e){e==null?this.removeRouter():this.setRouter(e)}getRouter(){return this.store.get("router")}setRouter(e,t,o){return typeof e=="object"?this.store.set("router",e,t):this.store.set("router",{name:e,args:t},o),this}removeRouter(e={}){return this.store.remove("router",e),this}get connector(){return this.getConnector()}set connector(e){e==null?this.removeConnector():this.setConnector(e)}getConnector(){return this.store.get("connector")}setConnector(e,t,o){return typeof e=="object"?this.store.set("connector",e,t):this.store.set("connector",{name:e,args:t},o),this}removeConnector(e={}){return this.store.remove("connector",e)}get strategy(){return this.getStrategy()}set strategy(e){e==null?this.removeStrategy():this.setStrategy(e)}getStrategy(){return this.store.get("strategy")}setStrategy(e,t,o){return typeof e=="object"?this.store.set("strategy",e,t):this.store.set("strategy",{name:e,args:t},o),this}removeStrategy(e={}){return this.store.remove("strategy",e)}getDefaultLabel(){const e=this.constructor,t=this.store.get("defaultLabel")||e.defaultLabel||{};return Yo(t)}get labels(){return this.getLabels()}set labels(e){this.setLabels(e)}getLabels(){return[...this.store.get("labels",[])].map(e=>this.parseLabel(e))}setLabels(e,t={}){return this.store.set("labels",Array.isArray(e)?e:[e],t),this}insertLabel(e,t,o={}){const c=this.getLabels(),d=c.length;let f=t!=null&&Number.isFinite(t)?t:d;return f<0&&(f=d+f+1),c.splice(f,0,this.parseLabel(e)),this.setLabels(c,o)}appendLabel(e,t={}){return this.insertLabel(e,-1,t)}getLabelAt(e){const t=this.getLabels();return e!=null&&Number.isFinite(e)?this.parseLabel(t[e]):null}setLabelAt(e,t,o={}){if(e!=null&&Number.isFinite(e)){const c=this.getLabels();c[e]=this.parseLabel(t),this.setLabels(c,o)}return this}removeLabelAt(e,t={}){const o=this.getLabels(),c=e!=null&&Number.isFinite(e)?e:-1,d=o.splice(c,1);return this.setLabels(o,t),d.length?d[0]:null}parseLabel(e){return typeof e=="string"?this.constructor.parseStringLabel(e):e}onLabelsChanged({previous:e,current:t}){const o=e&&t?t.filter(d=>e.find(f=>d===f||gu(d,f))?null:d):t?[...t]:[],c=e&&t?e.filter(d=>t.find(f=>d===f||gu(d,f))?null:d):e?[...e]:[];o.length>0&&this.notify("labels:added",{added:o,cell:this,edge:this}),c.length>0&&this.notify("labels:removed",{removed:c,cell:this,edge:this})}get vertexMarkup(){return this.getVertexMarkup()}set vertexMarkup(e){this.setVertexMarkup(e)}getDefaultVertexMarkup(){return this.store.get("defaultVertexMarkup")||Xi.getEdgeVertexMarkup()}getVertexMarkup(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()}setVertexMarkup(e,t={}){return this.store.set("vertexMarkup",Xi.clone(e),t),this}get vertices(){return this.getVertices()}set vertices(e){this.setVertices(e)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(e,t={}){const o=Array.isArray(e)?e:[e];return this.store.set("vertices",o.map(c=>Ve.toJSON(c)),t),this}insertVertex(e,t,o={}){const c=this.getVertices(),d=c.length;let f=t!=null&&Number.isFinite(t)?t:d;return f<0&&(f=d+f+1),c.splice(f,0,Ve.toJSON(e)),this.setVertices(c,o)}appendVertex(e,t={}){return this.insertVertex(e,-1,t)}getVertexAt(e){return e!=null&&Number.isFinite(e)?this.getVertices()[e]:null}setVertexAt(e,t,o={}){if(e!=null&&Number.isFinite(e)){const c=this.getVertices();c[e]=t,this.setVertices(c,o)}return this}removeVertexAt(e,t={}){const o=this.getVertices(),c=e!=null&&Number.isFinite(e)?e:-1;return o.splice(c,1),this.setVertices(o,t)}onVertexsChanged({previous:e,current:t}){const o=e&&t?t.filter(d=>e.find(f=>Ve.equals(d,f))?null:d):t?[...t]:[],c=e&&t?e.filter(d=>t.find(f=>Ve.equals(d,f))?null:d):e?[...e]:[];o.length>0&&this.notify("vertexs:added",{added:o,cell:this,edge:this}),c.length>0&&this.notify("vertexs:removed",{removed:c,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||Xi.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}get toolMarkup(){return this.getToolMarkup()}set toolMarkup(e){this.setToolMarkup(e)}getDefaultToolMarkup(){return this.store.get("defaultToolMarkup")||Xi.getEdgeToolMarkup()}getToolMarkup(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()}setToolMarkup(e,t={}){return this.store.set("toolMarkup",e,t),this}get doubleToolMarkup(){return this.getDoubleToolMarkup()}set doubleToolMarkup(e){this.setDoubleToolMarkup(e)}getDefaultDoubleToolMarkup(){return this.store.get("defaultDoubleToolMarkup")}getDoubleToolMarkup(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()}setDoubleToolMarkup(e,t={}){return this.store.set("doubleToolMarkup",e,t),this}get arrowheadMarkup(){return this.getArrowheadMarkup()}set arrowheadMarkup(e){this.setArrowheadMarkup(e)}getDefaultArrowheadMarkup(){return this.store.get("defaultArrowheadMarkup")||Xi.getEdgeArrowheadMarkup()}getArrowheadMarkup(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()}setArrowheadMarkup(e,t={}){return this.store.set("arrowheadMarkup",e,t),this}translate(e,t,o={}){return o.translateBy=o.translateBy||this.id,o.tx=e,o.ty=t,this.applyToPoints(c=>({x:(c.x||0)+e,y:(c.y||0)+t}),o)}scale(e,t,o,c={}){return this.applyToPoints(d=>Ve.create(d).scale(e,t,o).toJSON(),c)}applyToPoints(e,t={}){const o={},c=this.getSource(),d=this.getTarget();Ve.isPointLike(c)&&(o.source=e(c)),Ve.isPointLike(d)&&(o.target=e(d));const f=this.getVertices();return f.length>0&&(o.vertices=f.map(e)),this.store.set(o,t),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const e=[this.getSourcePoint(),...this.getVertices().map(t=>Ve.create(t)),this.getTargetPoint()];return new da(e)}updateParent(e){let t=null;const o=this.getSourceCell(),c=this.getTargetCell(),d=this.getParent();return o&&c&&(o===c||o.isDescendantOf(c)?t=c:c.isDescendantOf(o)?t=o:t=Ti.getCommonAncestor(o,c)),d&&(!t||t.id!==d.id)&&d.unembed(this,e),t&&t.embed(this,e),t}hasLoop(e={}){const t=this.getSource(),o=this.getTarget(),c=t.cell,d=o.cell;if(!c||!d)return!1;let f=c===d;if(!f&&e.deep&&this._model){const v=this.getSourceCell(),b=this.getTargetCell();v&&b&&(f=v.isAncestorOf(b,e)||b.isAncestorOf(v,e))}return f}getFragmentAncestor(){const e=[this,this.getSourceNode(),this.getTargetNode()].filter(t=>t!=null);return this.getCommonAncestor(...e)}isFragmentDescendantOf(e){const t=this.getFragmentAncestor();return!!t&&(t.id===e.id||t.isDescendantOf(e))}}ss.defaults={},function(l){function e(t,o){const c=t,d=o;return c.cell===d.cell?c.port===d.port||c.port==null&&d.port==null:!1}l.equalTerminals=e}(ss||(ss={})),function(l){l.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function e(t){return{attrs:{label:{text:t}}}}l.parseStringLabel=e}(ss||(ss={})),function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.isNode=="function"&&typeof c.isEdge=="function"&&typeof c.prop=="function"&&typeof c.attr=="function"&&typeof c.disconnect=="function"&&typeof c.getSource=="function"&&typeof c.getTarget=="function"}l.isEdge=e}(ss||(ss={})),function(l){l.registry=js.create({type:"edge",process(e,t){if(u0.exist(e,!1))throw new Error(`Edge with name '${e}' was registered by anthor Node`);if(typeof t=="function")return t.config({shape:e}),t;let o=l;const{inherit:c="edge"}=t,d=xy(t,["inherit"]);if(typeof c=="string"){const v=this.get(c||"edge");v==null&&c?this.onNotFound(c,"inherited"):o=v}else o=c;d.constructorName==null&&(d.constructorName=e);const f=o.define.call(o,d);return f.config({shape:e}),f}}),u0.setEdgeRegistry(l.registry)}(ss||(ss={})),function(l){let e=0;function t(d){return d?nC(d):(e+=1,`CustomEdge${e}`)}function o(d){const{constructorName:f,overwrite:v}=d,b=xy(d,["constructorName","overwrite"]),w=Y0(t(f||b.shape),this);return w.config(b),b.shape&&l.registry.register(b.shape,w,v),w}l.define=o;function c(d){const f=d.shape||"edge",v=l.registry.get(f);return v?new v(d):l.registry.onNotFound(f)}l.create=c}(ss||(ss={})),function(l){const e="basic.edge";l.config({shape:e,propHooks(t){const{label:o,vertices:c}=t,d=xy(t,["label","vertices"]);if(o){d.labels==null&&(d.labels=[]);const f=typeof o=="string"?l.parseStringLabel(o):o;d.labels.push(f)}return c&&Array.isArray(c)&&(d.vertices=c.map(f=>Ve.create(f).toJSON())),d}}),l.registry.register(e,l)}(ss||(ss={}));var yA=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class af extends Gs{constructor(){super(...arguments),this.POINT_ROUNDING=2,this.markerCache={}}get[Symbol.toStringTag](){return af.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const e=this.sourceView;if(!e){const o=this.cell.getSource();return new Rn(o.x,o.y)}const t=this.sourceMagnet;return e.isEdgeElement(t)?new Rn(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(t||e.container)}get targetBBox(){const e=this.targetView;if(!e){const o=this.cell.getTarget();return new Rn(o.x,o.y)}const t=this.targetMagnet;return e.isEdgeElement(t)?new Rn(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(t||e.container)}isEdgeView(){return!0}confirmUpdate(e,t={}){let o=e;if(this.hasAction(o,"source")){if(!this.updateTerminalProperties("source"))return o;o=this.removeAction(o,"source")}if(this.hasAction(o,"target")){if(!this.updateTerminalProperties("target"))return o;o=this.removeAction(o,"target")}const c=this.graph,d=this.sourceView,f=this.targetView;return c&&(d&&!c.renderer.isViewMounted(d)||f&&!c.renderer.isViewMounted(f))?o:this.hasAction(o,"render")?(this.render(),o=this.removeAction(o,["render","update","vertices","labels","tools","widget"]),o):(o=this.handleAction(o,"vertices",()=>this.renderVertexMarkers()),o=this.handleAction(o,"update",()=>this.update(null,t)),o=this.handleAction(o,"labels",()=>this.onLabelsChange(t)),o=this.handleAction(o,"tools",()=>{this.renderTools(),this.updateToolsPosition()}),o=this.handleAction(o,"widget",()=>this.renderExternalTools()),o)}onLabelsChange(e={}){this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(e={}){const t=this.cell.previous("labels");if(t==null)return!0;if("propertyPathArray"in e&&"propertyValue"in e){const o=e.propertyPathArray||[],c=o.length;if(c>1){const d=o[1];if(t[d]){if(c===2)return typeof e.propertyValue=="object"&&Co(e.propertyValue,"markup");if(o[2]!=="markup")return!1}}}return!0}render(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this.renderExternalTools(),this}renderMarkup(){const e=this.cell.markup;if(e)return typeof e=="string"?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid edge markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}renderStringMarkup(e){const t=this.containers,o=sr.createVectors(e);o.forEach(c=>{const d=c.attr("class");d&&(t[Qb(d)]=c.node)}),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),Us(this.container,o.map(c=>c.node))}renderLabels(){const e=this.cell,t=e.getLabels(),o=t.length;let c=this.containers.labels;if(this.labelCache={},this.labelSelectors={},o<=0)return c&&c.parentNode&&c.parentNode.removeChild(c),this;c?this.empty(c):(c=Qc("g"),this.addClass(this.prefixClassName("edge-labels"),c),this.containers.labels=c);for(let d=0,f=t.length;d<f;d+=1){const v=t[d],b=this.normalizeLabelMarkup(this.parseLabelMarkup(v.markup));let w,_;if(b)w=b.node,_=b.selectors;else{const P=e.getDefaultLabel(),V=this.normalizeLabelMarkup(this.parseLabelMarkup(P.markup));w=V.node,_=V.selectors}w.setAttribute("data-index",`${d}`),c.appendChild(w);const A=this.rootSelector;if(_[A])throw new Error("Ambiguous label root selector.");_[A]=w,this.labelCache[d]=w,this.labelSelectors[d]=_}return c.parentNode==null&&this.container.appendChild(c),this.updateLabels(),this.customizeLabels(),this}parseLabelMarkup(e){return e?typeof e=="string"?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}parseLabelStringMarkup(e){const t=sr.createVectors(e),o=document.createDocumentFragment();for(let c=0,d=t.length;c<d;c+=1){const f=t[c].node;o.appendChild(f)}return{fragment:o,selectors:{}}}normalizeLabelMarkup(e){if(e==null)return;const t=e.fragment;if(!(t instanceof DocumentFragment)||!t.hasChildNodes())throw new Error("Invalid label markup.");let o;const c=t.childNodes;return c.length>1||c[0].nodeName.toUpperCase()!=="G"?o=sr.create("g").append(t):o=sr.create(c[0]),o.addClass(this.prefixClassName("edge-label")),{node:o.node,selectors:e.selectors}}updateLabels(){if(this.containers.labels){const e=this.cell,t=e.labels,o=this.can("edgeLabelMovable"),c=e.getDefaultLabel();for(let d=0,f=t.length;d<f;d+=1){const v=this.labelCache[d],b=this.labelSelectors[d];v.setAttribute("cursor",o?"move":"default");const w=t[d],_=wo({},c.attrs,w.attrs);this.updateAttrs(v,_,{selectors:b,rootBBox:w.size?Rn.fromSize(w.size):void 0})}}}mergeLabelAttrs(e,t,o){if(t===null)return null;if(t===void 0)return o===null?null:o===void 0?void 0:e?o:wo({},o);if(e)return wo({},o,t)}customizeLabels(){if(this.containers.labels){const e=this.cell,t=e.labels;for(let o=0,c=t.length;o<c;o+=1){const d=t[o],f=this.labelCache[o],v=this.labelSelectors[o];this.graph.hook.onEdgeLabelRendered({edge:e,label:d,container:f,selectors:v})}}}renderTools(){const e=this.containers.tools;if(e==null)return this;const t=this.cell.toolMarkup,o=this.$(e).empty();if(Xi.isStringMarkup(t)){let c=Vg(t);const d=sr.create(c());if(o.append(d.node),this.toolCache=d.node,this.options.doubleTools){let f;const v=this.cell.doubleToolMarkup;Xi.isStringMarkup(v)?(c=Vg(v),f=sr.create(c())):f=d.clone(),o.append(f.node),this.tool2Cache=f.node}}return this}renderExternalTools(){const e=this.cell.getTools();return this.addTools(e),this}renderVertexMarkers(){const e=this.containers.vertices;if(e==null)return this;const t=this.cell.vertexMarkup,o=this.$(e).empty();if(Xi.isStringMarkup(t)){const c=Vg(t);this.cell.getVertices().forEach((d,f)=>{o.append(sr.create(c(Object.assign({index:f},d))).node)})}return this}renderArrowheadMarkers(){const e=this.containers.arrowheads;if(e==null)return this;const t=this.cell.arrowheadMarkup,o=this.$(e).empty();if(Xi.isStringMarkup(t)){const c=Vg(t),d=sr.create(c({end:"source"})).node,f=sr.create(c({end:"target"})).node;this.containers.sourceArrowhead=d,this.containers.targetArrowhead=f,o.append(d,f)}return this}update(e,t={}){this.cleanCache(),this.updateConnection(t);const o=this.cell.getAttrs();return o!=null&&this.updateAttrs(this.container,o,{attrs:e===o?null:e,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(t),this}removeRedundantLinearVertices(e={}){const t=this.cell,o=t.getVertices(),c=[this.sourceAnchor,...o,this.targetAnchor],d=c.length,f=new da(c);f.simplify({threshold:.01});const v=f.points.map(w=>w.toJSON()),b=v.length;return d===b?0:(t.setVertices(v.slice(1,b-1),e),d-b)}updateConnectionPath(){const e=this.containers;if(e.connection){const t=this.getConnectionPathData();e.connection.setAttribute("d",t)}if(e.connectionWrap){const t=this.getConnectionPathData();e.connectionWrap.setAttribute("d",t)}e.sourceMarker&&e.targetMarker&&this.translateAndAutoOrientArrows(e.sourceMarker,e.targetMarker)}getTerminalView(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalAnchor(e){switch(e){case"source":return Ve.create(this.sourceAnchor);case"target":return Ve.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalConnectionPoint(e){switch(e){case"source":return Ve.create(this.sourcePoint);case"target":return Ve.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalMagnet(e,t={}){switch(e){case"source":{if(t.raw)return this.sourceMagnet;const o=this.sourceView;return o?this.sourceMagnet||o.container:null}case"target":{if(t.raw)return this.targetMagnet;const o=this.targetView;return o?this.targetMagnet||o.container:null}default:throw new Error(`Unknown terminal type '${e}'`)}}updateConnection(e={}){const t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){const o=e.tx||0,c=e.ty||0;this.routePoints=new da(this.routePoints).translate(o,c).points,this.translateConnectionPoints(o,c),this.path.translate(o,c)}else{const o=t.getVertices(),c=this.findAnchors(o);this.sourceAnchor=c.source,this.targetAnchor=c.target,this.routePoints=this.findRoutePoints(o);const d=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=d.source,this.targetPoint=d.target;const f=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,f.source||this.sourcePoint,f.target||this.targetPoint)}this.cleanCache()}findAnchors(e){const t=this.cell,o=t.source,c=t.target,d=e[0],f=e[e.length-1];return c.priority&&!o.priority?this.findAnchorsOrdered("target",f,"source",d):this.findAnchorsOrdered("source",d,"target",f)}findAnchorsOrdered(e,t,o,c){let d,f;const v=this.cell,b=v[e],w=v[o],_=this.getTerminalView(e),A=this.getTerminalView(o),P=this.getTerminalMagnet(e),V=this.getTerminalMagnet(o);if(_){let q;t?q=Ve.create(t):A?q=V:q=Ve.create(w),d=this.getAnchor(b.anchor,_,P,q,e)}else d=Ve.create(b);if(A){const q=Ve.create(c||d);f=this.getAnchor(w.anchor,A,V,q,o)}else f=Ve.isPointLike(w)?Ve.create(w):new Ve;return{[e]:d,[o]:f}}getAnchor(e,t,o,c,d){const f=t.isEdgeElement(o),v=this.graph.options.connecting;let b=typeof e=="string"?{name:e}:e;if(!b){const A=f?(d==="source"?v.sourceEdgeAnchor:v.targetEdgeAnchor)||v.edgeAnchor:(d==="source"?v.sourceAnchor:v.targetAnchor)||v.anchor;b=typeof A=="string"?{name:A}:A}if(!b)throw new Error("Anchor should be specified.");let w;const _=b.name;if(f){const A=cg.registry.get(_);if(typeof A!="function")return cg.registry.onNotFound(_);w=er(A,this,t,o,c,b.args||{},d)}else{const A=a0.registry.get(_);if(typeof A!="function")return a0.registry.onNotFound(_);w=er(A,this,t,o,c,b.args||{},d)}return w?w.round(this.POINT_ROUNDING):new Ve}findRoutePoints(e=[]){const t=this.graph.options.connecting.router||ap.presets.normal,o=this.cell.getRouter()||t;let c;if(typeof o=="function")c=er(o,this,e,{},this);else{const d=typeof o=="string"?o:o.name,f=typeof o=="string"?{}:o.args||{},v=d?ap.registry.get(d):ap.presets.normal;if(typeof v!="function")return ap.registry.onNotFound(d);c=er(v,this,e,f,this)}return c==null?e.map(d=>Ve.create(d)):c.map(d=>Ve.create(d))}findConnectionPoints(e,t,o){const c=this.cell,d=this.graph.options.connecting,f=c.getSource(),v=c.getTarget(),b=this.sourceView,w=this.targetView,_=e[0],A=e[e.length-1];let P;if(b&&!b.isEdgeElement(this.sourceMagnet)){const q=this.sourceMagnet||b.container,ee=_||o,ge=new fr(ee,t),_e=f.connectionPoint||d.sourceConnectionPoint||d.connectionPoint;P=this.getConnectionPoint(_e,b,q,ge,"source")}else P=t;let V;if(w&&!w.isEdgeElement(this.targetMagnet)){const q=this.targetMagnet||w.container,ee=v.connectionPoint||d.targetConnectionPoint||d.connectionPoint,ge=A||t,_e=new fr(ge,o);V=this.getConnectionPoint(ee,w,q,_e,"target")}else V=o;return{source:P,target:V}}getConnectionPoint(e,t,o,c,d){const f=c.end;if(e==null)return f;const v=typeof e=="string"?e:e.name,b=typeof e=="string"?{}:e.args,w=c0.registry.get(v);if(typeof w!="function")return c0.registry.onNotFound(v);const _=er(w,this,c,t,o,b||{},d);return _?_.round(this.POINT_ROUNDING):f}updateMarkerAttr(e){const t=this.cell.getAttrs(),o=`.${e}-marker`,c=t&&t[o];c&&this.updateAttrs(this.container,{},{attrs:{[o]:c},selectors:this.selectors})}findMarkerPoints(e,t,o){const c=P=>{const V=this.cell.getAttrs(),q=Object.keys(V);for(let ee=0,ge=q.length;ee<ge;ee+=1){const _e=V[q[ee]];if(_e[`${P}Marker`]||_e[`${P}-marker`]){const ke=_e.strokeWidth||_e["stroke-width"];if(ke)return parseFloat(ke);break}}return null},d=e[0],f=e[e.length-1],v=this.containers.sourceMarker,b=this.containers.targetMarker,w=this.markerCache;let _,A;if(v){if(this.updateMarkerAttr("source"),w.sourceBBox=w.sourceBBox||Ta(v),w.sourceBBox.width>0){const P=Nn(v);_=t.clone().move(d||o,w.sourceBBox.width*P.sx*-1)}}else{const P=c("source");P&&(_=t.clone().move(d||o,-P))}if(b){if(this.updateMarkerAttr("target"),w.targetBBox=w.targetBBox||Ta(b),w.targetBBox.width>0){const P=Nn(b);A=o.clone().move(f||t,w.targetBBox.width*P.sx*-1)}}else{const P=c("target");P&&(A=o.clone().move(f||t,-P))}return w.sourcePoint=_||t.clone(),w.targetPoint=A||o.clone(),{source:_,target:A}}findPath(e,t,o){const c=this.cell.getConnector()||this.graph.options.connecting.connector;let d,f,v;if(typeof c=="string"?d=c:(d=c.name,f=c.args),d){const w=dg.registry.get(d);if(typeof w!="function")return dg.registry.onNotFound(d);v=w}else v=dg.presets.normal;const b=er(v,this,t,o,e,Object.assign(Object.assign({},f),{raw:!0}),this);return typeof b=="string"?Nr.parse(b):b}translateConnectionPoints(e,t){const o=this.markerCache;o.sourcePoint&&o.sourcePoint.translate(e,t),o.targetPoint&&o.targetPoint.translate(e,t),this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t)}updateLabelPositions(){if(this.containers.labels==null)return this;if(!this.path)return this;const t=this.cell,o=t.getLabels();if(o.length===0)return this;const c=t.getDefaultLabel(),d=this.normalizeLabelPosition(c.position);for(let f=0,v=o.length;f<v;f+=1){const b=o[f],w=this.normalizeLabelPosition(b.position),_=wo({},d,w),A=this.getLabelTransformationMatrix(_);this.labelCache[f].setAttribute("transform",Qf(A))}return this}updateToolsPosition(){if(this.containers.tools==null)return this;let e="",t=this.options.toolsOffset;const o=this.getConnectionLength();if(o!=null){o<this.options.shortLength&&(e="scale(.5)",t/=2);let c=this.getPointAtLength(t);if(c!=null&&vo(this.toolCache,"transform",`translate(${c.x},${c.y}) ${e}`),this.options.doubleTools&&o>=this.options.longLength){const d=this.options.doubleToolsOffset||t;c=this.getPointAtLength(o-d),c!=null&&vo(this.tool2Cache,"transform",`translate(${c.x},${c.y}) ${e}`),vo(this.tool2Cache,"visibility","visible")}else this.options.doubleTools&&vo(this.tool2Cache,"visibility","hidden")}return this}updateArrowheadMarkers(){const e=this.containers.arrowheads;if(e==null)return this;if(e.style.display==="none")return this;const t=this.containers.sourceArrowhead,o=this.containers.targetArrowhead;if(t&&o){const d=(this.getConnectionLength()||0)<this.options.shortLength?.5:1;Nn(t,d),Nn(o,d),this.translateAndAutoOrientArrows(t,o)}return this}updateTerminalProperties(e){const t=this.cell,o=this.graph,c=t[e],d=c&&c.cell,f=`${e}View`;if(!d)return this[f]=null,this.updateTerminalMagnet(e),!0;const v=o.getCellById(d);if(!v)throw new Error(`Edge's ${e} node with id "${d}" not exists`);const b=v.findView(o);return b?(this[f]=b,this.updateTerminalMagnet(e),!0):!1}updateTerminalMagnet(e){const t=`${e}Magnet`,o=this.getTerminalView(e);if(o){let c=o.getMagnetFromEdgeTerminal(this.cell[e]);c===o.container&&(c=null),this[t]=c}else this[t]=null}translateAndAutoOrientArrows(e,t){const o=this.routePoints;e&&ry(e,this.sourcePoint,o[0]||this.targetPoint,this.graph.view.stage),t&&ry(t,this.targetPoint,o[o.length-1]||this.sourcePoint,this.graph.view.stage)}getLabelPositionAngle(e){const t=this.cell.getLabelAt(e);return t&&t.position&&typeof t.position=="object"&&t.position.angle||0}getLabelPositionArgs(e){const t=this.cell.getLabelAt(e);if(t&&t.position&&typeof t.position=="object")return t.position.options}getDefaultLabelPositionArgs(){const e=this.cell.getDefaultLabel();if(e&&e.position&&typeof e.position=="object")return e.position.options}mergeLabelPositionArgs(e,t){return e===null?null:e===void 0?t===null?null:t:wo({},t,e)}addLabel(e,t,o,c){let d,f,v=0,b;typeof e!="number"?(d=e.x,f=e.y,typeof t=="number"?(v=t,b=o):b=t):(d=e,f=t,typeof o=="number"?(v=o,b=c):b=o);const w=this.getDefaultLabelPositionArgs(),_=b,A=this.mergeLabelPositionArgs(_,w),P={position:this.getLabelPosition(d,f,v,A)},V=-1;return this.cell.insertLabel(P,V,b),V}addVertex(e,t,o){const c=typeof e!="number",d=c?e.x:e,f=c?e.y:t,v=c?t:o,b={x:d,y:f},w=this.getVertexIndex(d,f);return this.cell.insertVertex(b,w,v),w}sendToken(e,t,o){let c,d,f,v,b="linear";typeof t=="object"?(c=t.duration,d=t.reversed===!0,f=t.selector,t.rotate===!1?v="":t.rotate===!0?v="auto":t.rotate!=null&&(v=`${t.rotate}`),t.timing&&(b=t.timing)):(c=t,d=!1,f=null),c=c||1e3;const w={dur:`${c}ms`,repeatCount:"1",calcMode:b,fill:"freeze"};if(v&&(w.rotate=v),d&&(w.keyPoints="1;0",w.keyTimes="0;1"),typeof t=="object"){const{duration:_e,reversed:ke,selector:Se,rotate:Ue,timing:Qe}=t,bt=yA(t,["duration","reversed","selector","rotate","timing"]);Object.keys(bt).forEach(Ot=>{w[Ot]=bt[Ot]})}let _;if(typeof f=="string"?_=this.findOne(f,this.container,this.selectors):_=this.containers.connection?this.containers.connection:this.container.querySelector("path"),!(_ instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");const A=typeof e=="string"?this.findOne(e):e;if(A==null)throw new Error("Token animation requires a valid token element.");const P=A.parentNode,V=()=>{P||yd(A)},q=sr.create(A);P||q.appendTo(this.graph.view.stage);const ee=w.complete;w.complete=_e=>{V(),o&&o(),ee&&ee(_e)};const ge=q.animateAlongPath(w,_);return()=>{V(),ge()}}getConnection(){return this.path!=null?this.path.clone():null}getConnectionPathData(){if(this.path==null)return"";const e=this.cache.pathCache;return Co(e,"data")||(e.data=this.path.serialize()),e.data||""}getConnectionSubdivisions(){if(this.path==null)return null;const e=this.cache.pathCache;return Co(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}getConnectionLength(){if(this.path==null)return 0;const e=this.cache.pathCache;return Co(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}getPointAtLength(e){return this.path==null?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(e){return this.path==null?null:(dh(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(e){return this.path==null?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(e){return this.path==null?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(e){return this.path==null?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(e){return this.path==null?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(e){return this.path==null?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(e,t,o,c){const d={distance:0};let f=0,v;typeof o=="number"?(f=o,v=c):v=o,v!=null&&(d.options=v);const b=v&&v.absoluteOffset,w=!(v&&v.absoluteDistance),_=v&&v.absoluteDistance&&v.reverseDistance,A=this.path,P={segmentSubdivisions:this.getConnectionSubdivisions()},V=new Ve(e,t),q=A.closestPointT(V,P),ee=this.getConnectionLength()||0;let ge=A.lengthAtT(q,P);w&&(ge=ee>0?ge/ee:0),_&&(ge=-1*(ee-ge)||1),d.distance=ge;let _e;b||(_e=A.tangentAtT(q));let ke;if(_e)ke=_e.pointOffset(V);else{const Se=A.pointAtT(q),Ue=V.diff(Se);ke={x:Ue.x,y:Ue.y}}return d.offset=ke,d.angle=f,d}normalizeLabelPosition(e){return typeof e=="number"?{distance:e}:e}getLabelTransformationMatrix(e){const t=this.normalizeLabelPosition(e),o=t.options||{},c=t.angle||0,d=t.distance,f=d>0&&d<=1;let v=0;const b={x:0,y:0},w=t.offset;w&&(typeof w=="number"?v=w:(w.x!=null&&(b.x=w.x),w.y!=null&&(b.y=w.y)));const _=b.x!==0||b.y!==0||v===0,A=o.keepGradient,P=o.ensureLegibility,V=this.path,q={segmentSubdivisions:this.getConnectionSubdivisions()},ee=f?d*this.getConnectionLength():d,ge=V.tangentAtLength(ee,q);let _e,ke=c;if(ge){if(_)_e=ge.start,_e.translate(b);else{const Se=ge.clone();Se.rotate(-90,ge.start),Se.setLength(v),_e=Se.end}A&&(ke=ge.angle()+c,P&&(ke=ki.normalize((ke+90)%180-90)))}else _e=V.start,_&&_e.translate(b);return oc().translate(_e.x,_e.y).rotate(ke)}getLabelCoordinates(e){const t=this.getLabelTransformationMatrix(e);return new Ve(t.e,t.f)}getVertexIndex(e,t){const c=this.cell.getVertices(),d=this.getClosestPointLength(new Ve(e,t));let f=0;if(d!=null)for(const v=c.length;f<v;f+=1){const b=c[f],w=this.getClosestPointLength(b);if(w!=null&&d<w)break}return f}getEventArgs(e,t,o){const c=this,d=c.cell,f=d;return t==null||o==null?{e,view:c,edge:d,cell:f}:{e,x:t,y:o,view:c,edge:d,cell:f}}notifyUnhandledMouseDown(e,t,o){this.notify("edge:unhandled:mousedown",{e,x:t,y:o,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(e,t,o){super.onMouseDown(e,t,o),this.notify("edge:mousedown",this.getEventArgs(e,t,o))}notifyMouseMove(e,t,o){super.onMouseMove(e,t,o),this.notify("edge:mousemove",this.getEventArgs(e,t,o))}notifyMouseUp(e,t,o){super.onMouseUp(e,t,o),this.notify("edge:mouseup",this.getEventArgs(e,t,o))}onClick(e,t,o){super.onClick(e,t,o),this.notify("edge:click",this.getEventArgs(e,t,o))}onDblClick(e,t,o){super.onDblClick(e,t,o),this.notify("edge:dblclick",this.getEventArgs(e,t,o))}onContextMenu(e,t,o){super.onContextMenu(e,t,o),this.notify("edge:contextmenu",this.getEventArgs(e,t,o))}onMouseDown(e,t,o){switch(this.notifyMouseDown(e,t,o),e.target.getAttribute("class")){case"vertex":{this.startVertexDragging(e,t,o);return}case"vertex-remove":case"vertex-remove-area":{this.handleVertexRemoving(e,t,o);return}case"connection":case"connection-wrap":{this.handleVertexAdding(e,t,o);return}case"arrowhead":{this.startArrowheadDragging(e,t,o);return}case"source-marker":case"target-marker":{this.notifyUnhandledMouseDown(e,t,o);return}default:break}this.startEdgeDragging(e,t,o)}onMouseMove(e,t,o){const c=this.getEventData(e);switch(c.action){case"drag-vertex":{this.dragVertex(e,t,o);break}case"drag-label":{this.dragLabel(e,t,o);break}case"drag-arrowhead":{this.dragArrowhead(e,t,o);break}case"drag-edge":{this.dragEdge(e,t,o);break}default:break}return this.notifyMouseMove(e,t,o),c}onMouseUp(e,t,o){const c=this.getEventData(e);switch(c.action){case"drag-vertex":{this.stopVertexDragging(e,t,o);break}case"drag-label":{this.stopLabelDragging(e,t,o);break}case"drag-arrowhead":{this.stopArrowheadDragging(e,t,o);break}case"drag-edge":{this.stopEdgeDragging(e,t,o);break}default:break}return this.notifyMouseUp(e,t,o),this.checkMouseleave(e),c}onMouseOver(e){super.onMouseOver(e),this.notify("edge:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("edge:mouseout",this.getEventArgs(e))}onMouseEnter(e){super.onMouseEnter(e),this.notify("edge:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("edge:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,o,c){super.onMouseWheel(e,t,o,c),this.notify("edge:mousewheel",Object.assign({delta:c},this.getEventArgs(e,t,o)))}onCustomEvent(e,t,o,c){if(u2(e.target,"edge-tool",this.container)){if(e.stopPropagation(),this.can("useEdgeTools")){if(t==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,o,c)))}this.notifyMouseDown(e,o,c)}else this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,o,c))),super.onCustomEvent(e,t,o,c)}onLabelMouseDown(e,t,o){this.notifyMouseDown(e,t,o),this.startLabelDragging(e,t,o),this.getEventData(e).stopPropagation&&e.stopPropagation()}startEdgeDragging(e,t,o){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(e,t,o);return}this.setEventData(e,{x:t,y:o,moving:!1,action:"drag-edge"})}dragEdge(e,t,o){const c=this.getEventData(e);c.moving||(c.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e,x:t,y:o,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-c.x,o-c.y,{ui:!0}),this.setEventData(e,{x:t,y:o}),this.notify("edge:moving",{e,x:t,y:o,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(e,t,o){const c=this.getEventData(e);c.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e,x:t,y:o,view:this,cell:this.cell,edge:this.cell})),c.moving=!1}prepareArrowheadDragging(e,t){const o=this.getTerminalMagnet(e),c={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:t.isNewEdge===!0,terminalType:e,initialMagnet:o,initialTerminal:$p(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(c),c}createValidateConnectionArgs(e){const t=[];t[4]=e,t[5]=this;let o,c=0,d=0;e==="source"?(c=2,o="target"):(d=2,o="source");const f=this.cell[o],v=f.cell;if(v){let b;const w=t[c]=this.graph.renderer.findViewByCell(v);w&&(b=w.getMagnetFromEdgeTerminal(f),b===w.container&&(b=void 0)),t[c+1]=b}return(b,w)=>(t[d]=b,t[d+1]=b.container===w?void 0:w,t)}beforeArrowheadDragging(e){e.zIndex=this.cell.zIndex,this.cell.toFront();const t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}afterArrowheadDragging(e){e.zIndex!=null&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null);const t=this.container;t.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}arrowheadDragging(e,t,o,c){c.x=t,c.y=o,c.currentTarget!==e&&(c.currentMagnet&&c.currentView&&c.currentView.unhighlight(c.currentMagnet,{type:"magnetAdsorbed"}),c.currentView=this.graph.renderer.findViewByElem(e),c.currentView?(c.currentMagnet=c.currentView.findMagnet(e),c.currentMagnet&&this.graph.hook.validateConnection(...c.getValidateConnectionArgs(c.currentView,c.currentMagnet),c.currentView.getEdgeTerminal(c.currentMagnet,t,o,this.cell,c.terminalType))?c.currentView.highlight(c.currentMagnet,{type:"magnetAdsorbed"}):c.currentMagnet=null):c.currentMagnet=null),c.currentTarget=e,this.cell.prop(c.terminalType,{x:t,y:o},Object.assign(Object.assign({},c.options),{ui:!0}))}arrowheadDragged(e,t,o){const c=e.currentView,d=e.currentMagnet;if(!d||!c)return;c.unhighlight(d,{type:"magnetAdsorbed"});const f=e.terminalType,v=c.getEdgeTerminal(d,t,o,this.cell,f);this.cell.setTerminal(f,v,{ui:!0})}snapArrowhead(e,t,o){const c=this.graph,{snap:d,allowEdge:f}=c.options.connecting,v=typeof d=="object"&&d.radius||50,b={x:e-v,y:t-v,width:2*v,height:2*v},w=c.renderer.findViewsInArea(b);if(f){const Ue=c.renderer.findEdgeViewsInArea(b).filter(Qe=>Qe!==this);w.push(...Ue)}const _=o.closestView||null,A=o.closestMagnet||null;o.closestView=null,o.closestMagnet=null;let P,V=Number.MAX_SAFE_INTEGER;const q=new Ve(e,t);w.forEach(Ue=>{Ue.container.getAttribute("magnet")!=="false"&&(P=Ue.cell.getBBox().getCenter().distance(q),P<v&&P<V&&(A===Ue.container||c.hook.validateConnection(...o.getValidateConnectionArgs(Ue,null),Ue.getEdgeTerminal(Ue.container,e,t,this.cell,o.terminalType)))&&(V=P,o.closestView=Ue,o.closestMagnet=Ue.container)),Ue.container.querySelectorAll("[magnet]").forEach(Qe=>{if(Qe.getAttribute("magnet")!=="false"){const bt=Ue.getBBoxOfElement(Qe);P=q.distance(bt.getCenter()),P<v&&P<V&&(A===Qe||c.hook.validateConnection(...o.getValidateConnectionArgs(Ue,Qe),Ue.getEdgeTerminal(Qe,e,t,this.cell,o.terminalType)))&&(V=P,o.closestView=Ue,o.closestMagnet=Qe)}})});let ee;const ge=o.terminalType,_e=o.closestView,ke=o.closestMagnet,Se=A!==ke;if(_&&Se&&_.unhighlight(A,{type:"magnetAdsorbed"}),_e){if(!Se)return;_e.highlight(ke,{type:"magnetAdsorbed"}),ee=_e.getEdgeTerminal(ke,e,t,this.cell,ge)}else ee={x:e,y:t};this.cell.setTerminal(ge,ee,{},Object.assign(Object.assign({},o.options),{ui:!0}))}snapArrowheadEnd(e){const t=e.closestView,o=e.closestMagnet;t&&o&&(t.unhighlight(o,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(o)),e.closestView=null,e.closestMagnet=null}finishEmbedding(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}fallbackConnection(e){switch(e.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0});break}}notifyConnectionEvent(e,t){const o=e.terminalType,c=e.initialTerminal,d=this.cell[o];if(d&&!ss.equalTerminals(c,d)){const v=this.graph,b=c,w=b.cell?v.getCellById(b.cell):null,_=b.port,A=w?v.findViewByCell(w):null,P=w||e.isNewEdge?null:Ve.create(c).toJSON(),V=d,q=V.cell?v.getCellById(V.cell):null,ee=V.port,ge=q?v.findViewByCell(q):null,_e=q?null:Ve.create(d).toJSON();this.notify("edge:connected",{e:t,previousCell:w,previousPort:_,previousView:A,previousPoint:P,currentCell:q,currentView:ge,currentPort:ee,currentPoint:_e,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:o,isNew:e.isNewEdge})}}highlightAvailableMagnets(e){const t=this.graph,o=t.model.getCells();e.marked={};for(let c=0,d=o.length;c<d;c+=1){const f=t.renderer.findViewByCell(o[c]);if(!f)continue;const v=Array.prototype.slice.call(f.container.querySelectorAll("[magnet]"));f.container.getAttribute("magnet")!=="false"&&v.push(f.container);const b=v.filter(w=>t.hook.validateConnection(...e.getValidateConnectionArgs(f,w),f.getEdgeTerminal(w,e.x,e.y,this.cell,e.terminalType)));if(b.length>0){for(let w=0,_=b.length;w<_;w+=1)f.highlight(b[w],{type:"magnetAvailable"});f.highlight(null,{type:"nodeAvailable"}),e.marked[f.cell.id]=b}}}unhighlightAvailableMagnets(e){const t=e.marked||{};Object.keys(t).forEach(o=>{const c=this.graph.renderer.findViewByCell(o);c&&(t[o].forEach(f=>{c.unhighlight(f,{type:"magnetAvailable"})}),c.unhighlight(null,{type:"nodeAvailable"}))}),e.marked=null}startArrowheadDragging(e,t,o){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(e,t,o);return}const d=e.target.getAttribute("data-terminal"),f=this.prepareArrowheadDragging(d,{x:t,y:o});this.setEventData(e,f)}dragArrowhead(e,t,o){const c=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,o,c):this.arrowheadDragging(this.getEventTarget(e),t,o,c)}stopArrowheadDragging(e,t,o){const c=this.graph,d=this.getEventData(e);c.options.connecting.snap?this.snapArrowheadEnd(d):this.arrowheadDragged(d,t,o),c.hook.validateEdge(this.cell,d.terminalType,d.initialTerminal)?(this.finishEmbedding(d),this.notifyConnectionEvent(d,e)):this.fallbackConnection(d),this.afterArrowheadDragging(d)}startLabelDragging(e,t,o){if(this.can("edgeLabelMovable")){const c=e.currentTarget,d=parseInt(c.getAttribute("data-index"),10),f=this.getLabelPositionAngle(d),v=this.getLabelPositionArgs(d),b=this.getDefaultLabelPositionArgs(),w=this.mergeLabelPositionArgs(v,b);this.setEventData(e,{index:d,positionAngle:f,positionArgs:w,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}dragLabel(e,t,o){const c=this.getEventData(e),d=this.cell.getLabelAt(c.index),f=wo({},d,{position:this.getLabelPosition(t,o,c.positionAngle,c.positionArgs)});this.cell.setLabelAt(c.index,f)}stopLabelDragging(e,t,o){}handleVertexAdding(e,t,o){if(!this.can("vertexAddable")){this.notifyUnhandledMouseDown(e,t,o);return}const c=this.addVertex({x:t,y:o},{ui:!0});this.setEventData(e,{index:c,action:"drag-vertex"})}handleVertexRemoving(e,t,o){if(!this.can("vertexDeletable")){this.notifyUnhandledMouseDown(e,t,o);return}const c=e.target,d=parseInt(c.getAttribute("idx"),10);this.cell.removeVertexAt(d)}startVertexDragging(e,t,o){if(!this.can("vertexMovable")){this.notifyUnhandledMouseDown(e,t,o);return}const c=e.target,d=parseInt(c.getAttribute("idx"),10);this.setEventData(e,{index:d,action:"drag-vertex"})}dragVertex(e,t,o){const c=this.getEventData(e);this.cell.setVertexAt(c.index,{x:t,y:o},{ui:!0})}stopVertexDragging(e,t,o){}}(function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.isNodeView=="function"&&typeof c.isEdgeView=="function"&&typeof c.confirmUpdate=="function"&&typeof c.update=="function"&&typeof c.getConnection=="function"}l.isEdgeView=e})(af||(af={})),af.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),af.registry.register("edge",af,!0);class bc extends Gs{constructor(){super(...arguments),this.scalableNode=null,this.rotatableNode=null,this.scalableSelector="scalable",this.rotatableSelector="rotatable",this.defaultPortMarkup=Xi.getPortMarkup(),this.defaultPortLabelMarkup=Xi.getPortLabelMarkup(),this.defaultPortContainerMarkup=Xi.getPortContainerMarkup(),this.portsCache={}}get[Symbol.toStringTag](){return bc.toStringTag}getContainerClassName(){const e=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||e.push(this.prefixClassName("node-immovable")),e.join(" ")}updateClassName(e){const t=e.target;if(t.hasAttribute("magnet")){const o=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?yc(t,o):co(t,o)}else{const o=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(o):this.addClass(o)}}isNodeView(){return!0}confirmUpdate(e,t={}){let o=e;return this.hasAction(o,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(o,"render")?(this.render(),o=this.removeAction(o,["render","update","resize","translate","rotate","ports","tools"])):(o=this.handleAction(o,"resize",()=>this.resize(t),"update"),o=this.handleAction(o,"update",()=>this.update(),wu.useCSSSelector?"ports":null),o=this.handleAction(o,"translate",()=>this.translate()),o=this.handleAction(o,"rotate",()=>this.rotate()),o=this.handleAction(o,"ports",()=>this.renderPorts()),o=this.handleAction(o,"tools",()=>this.renderTools())),o}update(e){this.cleanCache(),wu.useCSSSelector&&this.removePorts();const t=this.cell,o=t.getSize(),c=t.getAttrs();this.updateAttrs(this.container,c,{attrs:e===c?null:e,rootBBox:new Rn(0,0,o.width,o.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),wu.useCSSSelector&&this.renderPorts()}renderMarkup(){const e=this.cell.markup;if(e)return typeof e=="string"?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid node markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container),o=c=>Array.isArray(c)?c[0]:c;this.selectors=t.selectors,this.rotatableNode=o(this.selectors[this.rotatableSelector]),this.scalableNode=o(this.selectors[this.scalableSelector]),this.container.appendChild(t.fragment)}renderStringMarkup(e){Us(this.container,sr.toNodes(sr.createVectors(e))),this.rotatableNode=Zm(this.container,`.${this.rotatableSelector}`),this.scalableNode=Zm(this.container,`.${this.scalableSelector}`),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)}render(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),wu.useCSSSelector||this.renderPorts(),this.renderTools(),this}resize(e={}){if(this.scalableNode)return this.updateSize(e);this.cell.getAngle()&&this.rotate(),this.update()}translate(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()}rotate(){if(this.rotatableNode){this.updateRotation(),this.update();return}this.updateTransform()}getTranslationString(){const e=this.cell.getPosition();return`translate(${e.x},${e.y})`}getRotationString(){const e=this.cell.getAngle();if(e){const t=this.cell.getSize();return`rotate(${e},${t.width/2},${t.height/2})`}}updateTransform(){let e=this.getTranslationString();const t=this.getRotationString();t&&(e+=` ${t}`),this.container.setAttribute("transform",e)}updateRotation(){if(this.rotatableNode!=null){const e=this.getRotationString();e!=null?this.rotatableNode.setAttribute("transform",e):this.rotatableNode.removeAttribute("transform")}}updateTranslation(){this.container.setAttribute("transform",this.getTranslationString())}updateSize(e={}){const t=this.cell,o=t.getSize(),c=t.getAngle(),d=this.scalableNode;let f=!1;d.getElementsByTagName("path").length>0&&(f=!0);const v=Ta(d,{recursive:f}),b=o.width/(v.width||1),w=o.height/(v.height||1);d.setAttribute("transform",`scale(${b},${w})`);const _=this.rotatableNode;if(_!=null){const A=_.getAttribute("transform");if(A){_.setAttribute("transform",`${A} rotate(${-c},${o.width/2},${o.height/2})`);const P=Ta(d,{target:this.graph.view.stage});t.prop("position",{x:P.x,y:P.y},Object.assign({updated:!0},e)),this.translate(),this.rotate()}}this.update()}findPortElem(e,t){const o=e?this.portsCache[e]:null;if(!o)return null;const c=o.portContentElement,d=o.portContentSelectors||{};return this.findOne(t,c,d)}initializePorts(){this.cleanPortsCache()}refreshPorts(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()}cleanPortsCache(){this.portsCache={}}removePorts(){Object.keys(this.portsCache).forEach(e=>{const t=this.portsCache[e];yd(t.portElement)})}renderPorts(){const e=this.getPortsContainer(),t=[];e.childNodes.forEach(d=>{t.push(d)});const o=_n(this.cell.getParsedPorts(),"zIndex"),c="auto";o[c]&&o[c].forEach(d=>{const f=this.getPortElement(d);e.append(f),t.push(f)}),Object.keys(o).forEach(d=>{if(d!==c){const f=parseInt(d,10);this.appendPorts(o[d],f,t)}}),this.updatePorts()}getPortsContainer(){return this.rotatableNode||this.container}appendPorts(e,t,o){const c=e.map(d=>this.getPortElement(d));o[t]||t<0?Jh(o[Math.max(t,0)],c):Us(this.getPortsContainer(),c)}getPortElement(e){const t=this.portsCache[e.id];return t?t.portElement:this.createPortElement(e)}createPortElement(e){let t=Xi.renderMarkup(this.getPortContainerMarkup());const o=t.elem;if(o==null)throw new Error("Invalid port container markup.");t=Xi.renderMarkup(this.getPortMarkup(e));const c=t.elem,d=t.selectors;if(c==null)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},c),t=Xi.renderMarkup(this.getPortLabelMarkup(e.label));const f=t.elem,v=t.selectors;if(f==null)throw new Error("Invalid port label markup.");let b;if(d&&v){for(const _ in v)if(d[_]&&_!==this.rootSelector)throw new Error("Selectors within port must be unique.");b=Object.assign(Object.assign({},d),v)}else b=d||v;let w="x6-port";return e.group&&(w+=` x6-port-${e.group}`),co(o,w),co(c,"x6-port-body"),co(f,"x6-port-label"),o.appendChild(c),o.appendChild(f),this.portsCache[e.id]={portElement:o,portSelectors:b,portLabelElement:f,portLabelSelectors:v,portContentElement:c,portContentSelectors:d},this.graph.hook.onPortRendered({port:e,node:this.cell,container:o,selectors:b,labelContainer:f,labelSelectors:v,contentContainer:c,contentSelectors:d}),o}updatePorts(){this.updatePortGroup();const e=this.cell.getParsedGroups();Object.keys(e).forEach(t=>this.updatePortGroup(t))}updatePortGroup(e){const t=Rn.fromSize(this.cell.getSize()),o=this.cell.getPortsLayoutByGroup(e,t);for(let c=0,d=o.length;c<d;c+=1){const f=o[c],v=f.portId,b=this.portsCache[v]||{},w=f.portLayout;if(this.applyPortTransform(b.portElement,w),f.portAttrs!=null){const A={selectors:b.portSelectors||{}};f.portSize&&(A.rootBBox=Rn.fromSize(f.portSize)),this.updateAttrs(b.portElement,f.portAttrs,A)}const _=f.labelLayout;if(_&&(this.applyPortTransform(b.portLabelElement,_,-(w.angle||0)),_.attrs)){const A={selectors:b.portLabelSelectors||{}};f.labelSize&&(A.rootBBox=Rn.fromSize(f.labelSize)),this.updateAttrs(b.portLabelElement,_.attrs,A)}}}applyPortTransform(e,t,o=0){const c=t.angle,d=t.position,f=oc().rotate(o).translate(d.x||0,d.y||0).rotate(c||0);ph(e,f,{absolute:!0})}getPortContainerMarkup(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup}getPortMarkup(e){return e.markup||this.cell.portMarkup||this.defaultPortMarkup}getPortLabelMarkup(e){return e.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup}getEventArgs(e,t,o){const c=this,d=c.cell,f=d;return t==null||o==null?{e,view:c,node:d,cell:f}:{e,x:t,y:o,view:c,node:d,cell:f}}notifyMouseDown(e,t,o){super.onMouseDown(e,t,o),this.notify("node:mousedown",this.getEventArgs(e,t,o))}notifyMouseMove(e,t,o){super.onMouseMove(e,t,o),this.notify("node:mousemove",this.getEventArgs(e,t,o))}notifyMouseUp(e,t,o){super.onMouseUp(e,t,o),this.notify("node:mouseup",this.getEventArgs(e,t,o))}onClick(e,t,o){super.onClick(e,t,o),this.notify("node:click",this.getEventArgs(e,t,o))}onDblClick(e,t,o){super.onDblClick(e,t,o),this.notify("node:dblclick",this.getEventArgs(e,t,o))}onContextMenu(e,t,o){super.onContextMenu(e,t,o),this.notify("node:contextmenu",this.getEventArgs(e,t,o))}onMouseDown(e,t,o){if(this.isPropagationStopped(e))return;const c=e.target;El(c)||hS(c)||(this.notifyMouseDown(e,t,o),this.startNodeDragging(e,t,o))}onMouseMove(e,t,o){const c=this.getEventData(e),d=c.action;if(d==="magnet")this.dragMagnet(e,t,o);else{if(d==="move"){const v=c.targetView||this;v.dragNode(e,t,o),v.notify("node:moving",{e,x:t,y:o,view:v,cell:v.cell,node:v.cell})}this.notifyMouseMove(e,t,o)}this.setEventData(e,c)}onMouseUp(e,t,o){const c=this.getEventData(e),d=c.action;if(d==="magnet")this.stopMagnetDragging(e,t,o);else{const v=e.target;if(El(v)||hS(v))return;this.notifyMouseUp(e,t,o),d==="move"&&(c.targetView||this).stopNodeDragging(e,t,o)}const f=c.targetMagnet;f&&this.onMagnetClick(e,f,t,o),this.checkMouseleave(e)}onMouseOver(e){super.onMouseOver(e),this.notify("node:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("node:mouseout",this.getEventArgs(e))}onMouseEnter(e){this.updateClassName(e),super.onMouseEnter(e),this.notify("node:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("node:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,o,c){super.onMouseWheel(e,t,o,c),this.notify("node:mousewheel",Object.assign({delta:c},this.getEventArgs(e,t,o)))}onMagnetClick(e,t,o,c){this.graph.view.getMouseMovedCount(e)>this.graph.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:t},this.getEventArgs(e,o,c)))}onMagnetDblClick(e,t,o,c){this.notify("node:magnet:dblclick",Object.assign({magnet:t},this.getEventArgs(e,o,c)))}onMagnetContextMenu(e,t,o,c){this.notify("node:magnet:contextmenu",Object.assign({magnet:t},this.getEventArgs(e,o,c)))}onMagnetMouseDown(e,t,o,c){this.startMagnetDragging(e,o,c)}onCustomEvent(e,t,o,c){this.notify("node:customevent",Object.assign({name:t},this.getEventArgs(e,o,c))),super.onCustomEvent(e,t,o,c)}prepareEmbedding(e){const o=this.getEventData(e).cell||this.cell,c=this.graph.findViewByCell(o),d=this.graph.snapToGrid(e.clientX,e.clientY);this.notify("node:embed",{e,node:o,view:c,cell:o,x:d.x,y:d.y,currentParent:o.getParent()})}processEmbedding(e,t){const o=t.cell||this.cell,c=t.graph||this.graph,d=c.options.embedding,f=d.findParent;let v=typeof f=="function"?er(f,c,{view:this,node:this.cell}).filter(P=>Ti.isCell(P)&&this.cell.id!==P.id&&!P.isDescendantOf(this.cell)):c.model.getNodesUnderNode(o,{by:f});if(d.frontOnly&&v.length>0){const P=_n(v,"zIndex"),V=Wr(Object.keys(P).map(q=>parseInt(q,10)));V&&(v=P[V])}v=v.filter(P=>P.visible);let b=null;const w=t.candidateEmbedView,_=d.validate;for(let P=v.length-1;P>=0;P-=1){const V=v[P];if(w&&w.cell.id===V.id){b=w;break}else{const q=V.findView(c);if(er(_,c,{child:this.cell,parent:q.cell,childView:this,parentView:q})){b=q;break}}}this.clearEmbedding(t),b&&b.highlight(null,{type:"embedding"}),t.candidateEmbedView=b;const A=c.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e,cell:o,node:o,view:c.findViewByCell(o),x:A.x,y:A.y,currentParent:o.getParent(),candidateParent:b?b.cell:null})}clearEmbedding(e){const t=e.candidateEmbedView;t&&(t.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null)}finalizeEmbedding(e,t){this.graph.startBatch("embedding");const o=t.cell||this.cell,c=t.graph||this.graph,d=c.findViewByCell(o),f=o.getParent(),v=t.candidateEmbedView;if(v?(v.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null,(f==null||f.id!==v.cell.id)&&v.cell.insertChild(o,void 0,{ui:!0})):f&&f.unembed(o,{ui:!0}),c.model.getConnectedEdges(o,{deep:!0}).forEach(b=>{b.updateParent({ui:!0})}),d&&v){const b=c.snapToGrid(e.clientX,e.clientY);d.notify("node:embedded",{e,cell:o,x:b.x,y:b.y,node:o,view:c.findViewByCell(o),previousParent:f,currentParent:o.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let e=this.cell,t=this;for(;t&&!e.isEdge();){if(!e.hasParent()||t.can("stopDelegateOnDragging"))return t;e=e.getParent(),t=this.graph.renderer.findViewByCell(e)}return null}startMagnetDragging(e,t,o){if(!this.can("magnetConnectable"))return;e.stopPropagation();const c=e.currentTarget,d=this.graph;this.setEventData(e,{targetMagnet:c}),d.hook.validateMagnet(this,c,e)?(d.options.magnetThreshold<=0&&this.startConnectting(e,c,t,o),this.setEventData(e,{action:"magnet"}),this.stopPropagation(e)):((Wg(c,"x6-port-body")||G()(c).closest(".x6-port-body").length>0)&&this.stopPropagation(e),this.onMouseDown(e,t,o)),d.view.delegateDragEvents(e,this)}startConnectting(e,t,o,c){this.graph.model.startBatch("add-edge");const d=this.createEdgeFromMagnet(t,o,c);d.notifyMouseDown(e,o,c),d.setEventData(e,d.prepareArrowheadDragging("target",{x:o,y:c,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(e,{edgeView:d})}createEdgeFromMagnet(e,t,o){const c=this.graph,d=c.model,f=c.hook.getDefaultEdge(this,e);return f.setSource(Object.assign(Object.assign({},f.getSource()),this.getEdgeTerminal(e,t,o,f,"source"))),f.setTarget(Object.assign(Object.assign({},f.getTarget()),{x:t,y:o})),f.addTo(d,{async:!1,ui:!0}),f.findView(c)}dragMagnet(e,t,o){const c=this.getEventData(e),d=c.edgeView;if(d)d.onMouseMove(e,t,o),this.autoScrollGraph(e.clientX,e.clientY);else{const f=this.graph,v=f.options.magnetThreshold,b=this.getEventTarget(e),w=c.targetMagnet;if(v==="onleave"){if(w===b||w.contains(b))return}else if(f.view.getMouseMovedCount(e)<=v)return;this.startConnectting(e,w,t,o)}}stopMagnetDragging(e,t,o){const d=this.eventData(e).edgeView;d&&(d.onMouseUp(e,t,o),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(e,t,o){this.notify("node:unhandled:mousedown",{e,x:t,y:o,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(e,t,o,c,d){let f=[d];const v=this.graph.selection.widget;if(v&&v.options.movable){const b=this.graph.getSelectedCells();b.includes(d)&&(f=b.filter(w=>w.isNode()))}f.forEach(b=>{this.notify(e,{e:t,x:o,y:c,cell:b,node:b,view:b.findView(this.graph)})})}startNodeDragging(e,t,o){const c=this.getDelegatedView();if(c==null||!c.can("nodeMovable"))return this.notifyUnhandledMouseDown(e,t,o);this.setEventData(e,{targetView:c,action:"move"});const d=Ve.create(c.cell.getPosition());c.setEventData(e,{moving:!1,offset:d.diff(t,o),restrict:this.graph.hook.getRestrictArea(c)})}dragNode(e,t,o){const c=this.cell,d=this.graph,f=d.getGridSize(),v=this.getEventData(e),b=v.offset,w=v.restrict;v.moving||(v.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",e,t,o,this.cell)),this.autoScrollGraph(e.clientX,e.clientY);const _=ha.snapToGrid(t+b.x,f),A=ha.snapToGrid(o+b.y,f);c.setPosition(_,A,{restrict:w,deep:!0,ui:!0}),d.options.embedding.enabled&&(v.embedding||(this.prepareEmbedding(e),v.embedding=!0),this.processEmbedding(e,v))}stopNodeDragging(e,t,o){const c=this.getEventData(e);c.embedding&&this.finalizeEmbedding(e,c),c.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",e,t,o,this.cell)),c.moving=!1,c.embedding=!1}autoScrollGraph(e,t){const o=this.graph.scroller.widget;o&&o.autoScroll(e,t)}}(function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.isNodeView=="function"&&typeof c.isEdgeView=="function"&&typeof c.confirmUpdate=="function"&&typeof c.update=="function"&&typeof c.findPortElem=="function"&&typeof c.resize=="function"&&typeof c.rotate=="function"&&typeof c.translate=="function"}l.isNodeView=e})(bc||(bc={})),bc.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),bc.registry.register("node",bc,!0);const pw=z2("text");class gw extends yh("text",{view:pw,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0}){}(function(l){class e extends bc{confirmUpdate(o,c={}){let d=super.confirmUpdate(o,c);return this.hasAction(d,"scale")&&(this.resize(),d=this.removeAction(d,"scale")),d}}l.View=e,e.config({actions:{attrs:["scale"]}}),bc.registry.register(pw,e)})(gw||(gw={}));class vw extends Ss{constructor(e,t={}){super(),this.length=0,this.comparator=t.comparator||"zIndex",this.clean(),e&&this.reset(e,{silent:!0})}toJSON(){return this.cells.map(e=>e.toJSON())}add(e,t,o){let c,d;typeof t=="number"?(c=t,d=Object.assign({merge:!1},o)):(c=this.length,d=Object.assign({merge:!1},t)),c>this.length&&(c=this.length),c<0&&(c+=this.length+1);const f=Array.isArray(e)?e:[e],v=this.comparator&&typeof t!="number"&&d.sort!==!1,b=this.comparator||null;let w=!1;const _=[],A=[];return f.forEach(P=>{const V=this.get(P);V?d.merge&&!P.isSameStore(V)&&(V.setProp(P.getProp(),o),A.push(V),v&&!w&&(b==null||typeof b=="function"?w=V.hasChanged():typeof b=="string"?w=V.hasChanged(b):w=b.some(q=>V.hasChanged(q)))):(_.push(P),this.reference(P))}),_.length&&(v&&(w=!0),this.cells.splice(c,0,..._),this.length=this.cells.length),w&&this.sort({silent:!0}),d.silent||(_.forEach((P,V)=>{const q={cell:P,index:c+V,options:d};this.trigger("added",q),d.dryrun||P.notify("added",Object.assign({},q))}),w&&this.trigger("sorted"),(_.length||A.length)&&this.trigger("updated",{added:_,merged:A,removed:[],options:d})),this}remove(e,t={}){const o=Array.isArray(e)?e:[e],c=this.removeCells(o,t);return!t.silent&&c.length>0&&this.trigger("updated",{options:t,removed:c,added:[],merged:[]}),Array.isArray(e)?c:c[0]}removeCells(e,t){const o=[];for(let c=0;c<e.length;c+=1){const d=this.get(e[c]);if(d==null)continue;const f=this.cells.indexOf(d);this.cells.splice(f,1),this.length-=1,delete this.map[d.id],o.push(d),this.unreference(d),t.dryrun||d.remove(),t.silent||(this.trigger("removed",{cell:d,index:f,options:t}),t.dryrun||d.notify("removed",{cell:d,index:f,options:t}))}return o}reset(e,t={}){const o=this.cells.slice();if(o.forEach(c=>this.unreference(c)),this.clean(),this.add(e,Object.assign({silent:!0},t)),!t.silent){const c=this.cells.slice();this.trigger("reseted",{options:t,previous:o,current:c});const d=[],f=[];c.forEach(v=>{o.some(w=>w.id===v.id)||d.push(v)}),o.forEach(v=>{c.some(w=>w.id===v.id)||f.push(v)}),this.trigger("updated",{options:t,added:d,removed:f,merged:[]})}return this}push(e,t){return this.add(e,this.length,t)}pop(e){const t=this.at(this.length-1);return this.remove(t,e)}unshift(e,t){return this.add(e,0,t)}shift(e){const t=this.at(0);return this.remove(t,e)}get(e){if(e==null)return null;const t=typeof e=="string"||typeof e=="number"?e:e.id;return this.map[t]||null}has(e){return this.get(e)!=null}at(e){return e<0&&(e+=this.length),this.cells[e]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(e){return this.cells.indexOf(e)}toArray(){return this.cells.slice()}sort(e={}){return this.comparator!=null&&(this.cells=On(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}clone(){const e=this.constructor;return new e(this.cells.slice(),{comparator:this.comparator})}reference(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}unreference(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}notifyCellEvent(e,t){const o=t.cell;this.trigger(`cell:${e}`,t),o&&(o.isNode()?this.trigger(`node:${e}`,Object.assign(Object.assign({},t),{node:o})):o.isEdge()&&this.trigger(`edge:${e}`,Object.assign(Object.assign({},t),{edge:o})))}clean(){this.length=0,this.cells=[],this.map={}}}class kc extends Ss{constructor(e=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new vw(e),this.setup()}get[Symbol.toStringTag](){return kc.toStringTag}notify(e,t){this.trigger(e,t);const o=this.graph;return o&&(e==="sorted"||e==="reseted"||e==="updated"?o.trigger(`model:${e}`,t):o.trigger(e,t)),this}setup(){const e=this.collection;e.on("sorted",()=>this.notify("sorted",null)),e.on("updated",t=>this.notify("updated",t)),e.on("cell:change:zIndex",()=>this.sortOnChangeZ()),e.on("added",({cell:t})=>{this.onCellAdded(t)}),e.on("removed",t=>{const o=t.cell;this.onCellRemoved(o,t.options),this.notify("cell:removed",t),o.isNode()?this.notify("node:removed",Object.assign(Object.assign({},t),{node:o})):o.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},t),{edge:o}))}),e.on("reseted",t=>{this.onReset(t.current),this.notify("reseted",t)}),e.on("edge:change:source",({edge:t})=>this.onEdgeTerminalChanged(t,"source")),e.on("edge:change:target",({edge:t})=>{this.onEdgeTerminalChanged(t,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(e){const t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}onCellRemoved(e,t){const o=e.id;if(e.isEdge()){delete this.edges[o];const c=e.getSource(),d=e.getTarget();if(c&&c.cell){const f=this.outgoings[c.cell],v=f?f.indexOf(o):-1;v>=0&&(f.splice(v,1),f.length===0&&delete this.outgoings[c.cell])}if(d&&d.cell){const f=this.incomings[d.cell],v=f?f.indexOf(o):-1;v>=0&&(f.splice(v,1),f.length===0&&delete this.incomings[d.cell])}}else delete this.nodes[o];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}onReset(e){this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach(t=>this.onCellAdded(t))}onEdgeTerminalChanged(e,t){const o=t==="source"?this.outgoings:this.incomings,c=e.previous(t);if(c&&c.cell){const f=Ti.isCell(c.cell)?c.cell.id:c.cell,v=o[f],b=v?v.indexOf(e.id):-1;b>=0&&(v.splice(b,1),v.length===0&&delete o[f])}const d=e.getTerminal(t);if(d&&d.cell){const f=Ti.isCell(d.cell)?d.cell.id:d.cell,v=o[f]||[];v.indexOf(e.id)===-1&&v.push(e.id),o[f]=v}}prepareCell(e,t){return!e.model&&(!t||!t.dryrun)&&(e.model=this),e.zIndex==null&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}resetCells(e,t={}){return e.map(o=>this.prepareCell(o,Object.assign(Object.assign({},t),{dryrun:!0}))),this.collection.reset(e,t),e.map(o=>this.prepareCell(o,{options:t})),this}clear(e={}){const t=this.getCells();if(t.length===0)return this;const o=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",()=>{const c=t.sort((d,f)=>{const v=d.isEdge()?1:2,b=f.isEdge()?1:2;return v-b});for(;c.length>0;){const d=c.shift();d&&d.remove(o)}},o),this}addNode(e,t={}){const o=ys.isNode(e)?e:this.createNode(e);return this.addCell(o,t),o}createNode(e){return ys.create(e)}addEdge(e,t={}){const o=ss.isEdge(e)?e:this.createEdge(e);return this.addCell(o,t),o}createEdge(e){return ss.create(e)}addCell(e,t={}){return Array.isArray(e)?this.addCells(e,t):(!this.collection.has(e)&&!this.addings.has(e)&&(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,t),t),e.eachChild(o=>this.addCell(o,t)),this.addings.delete(e)),this)}addCells(e,t={}){const o=e.length;if(o===0)return this;const c=Object.assign(Object.assign({},t),{position:o-1,maxPosition:o-1});return this.startBatch("add",Object.assign(Object.assign({},c),{cells:e})),e.forEach(d=>{this.addCell(d,c),c.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},c),{cells:e})),this}removeCell(e,t={}){const o=typeof e=="string"?this.getCell(e):e;return o&&this.has(o)?this.collection.remove(o,t):null}updateCellId(e,t){this.startBatch("update",{id:t}),e.prop("id",t);const o=e.clone({keepId:!0});return this.addCell(o),this.getConnectedEdges(e).forEach(d=>{const f=d.getSourceCell(),v=d.getTargetCell();f===e&&d.setSource(Object.assign(Object.assign({},d.getSource()),{cell:t})),v===e&&d.setTarget(Object.assign(Object.assign({},d.getTarget()),{cell:t}))}),this.removeCell(e),this.stopBatch("update",{id:t}),o}removeCells(e,t={}){return e.length?this.batchUpdate("remove",()=>e.map(o=>this.removeCell(o,t))):[]}removeConnectedEdges(e,t={}){const o=this.getConnectedEdges(e);return o.forEach(c=>{c.remove(t)}),o}disconnectConnectedEdges(e,t={}){const o=typeof e=="string"?e:e.id;this.getConnectedEdges(e).forEach(c=>{const d=c.getSourceCell(),f=c.getTargetCell();d&&d.id===o&&c.setSource({x:0,y:0},t),f&&f.id===o&&c.setTarget({x:0,y:0},t)})}has(e){return this.collection.has(e)}total(){return this.collection.length}indexOf(e){return this.collection.indexOf(e)}getCell(e){return this.collection.get(e)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const e=this.collection.first();return e&&e.getZIndex()||0}getMaxZIndex(){const e=this.collection.last();return e&&e.getZIndex()||0}getCellsFromCache(e){return e?Object.keys(e).map(t=>this.getCell(t)).filter(t=>t!=null):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(e){const t=typeof e=="string"?e:e.id,o=this.outgoings[t];return o?o.map(c=>this.getCell(c)).filter(c=>c&&c.isEdge()):null}getIncomingEdges(e){const t=typeof e=="string"?e:e.id,o=this.incomings[t];return o?o.map(c=>this.getCell(c)).filter(c=>c&&c.isEdge()):null}getConnectedEdges(e,t={}){const o=[],c=typeof e=="string"?this.getCell(e):e;if(c==null)return o;const d={},f=t.indirect;let v=t.incoming,b=t.outgoing;v==null&&b==null&&(v=b=!0);const w=(_,A)=>{const P=A?this.getOutgoingEdges(_):this.getIncomingEdges(_);if(P?.forEach(V=>{d[V.id]||(o.push(V),d[V.id]=!0,f&&(v&&w(V,!1),b&&w(V,!0)))}),f&&_.isEdge()){const V=A?_.getTargetCell():_.getSourceCell();V&&V.isEdge()&&(d[V.id]||(o.push(V),w(V,A)))}};if(b&&w(c,!0),v&&w(c,!1),t.deep){const _=c.getDescendants({deep:!0}),A={};_.forEach(V=>{V.isNode()&&(A[V.id]=!0)});const P=(V,q)=>{const ee=q?this.getOutgoingEdges(V.id):this.getIncomingEdges(V.id);ee?.forEach(ge=>{if(!d[ge.id]){const _e=ge.getSourceCell(),ke=ge.getTargetCell();if(!t.enclosed&&_e&&A[_e.id]&&ke&&A[ke.id])return;o.push(ge),d[ge.id]=!0}})};_.forEach(V=>{V.isEdge()||(b&&P(V,!0),v&&P(V,!1))})}return o}isBoundary(e,t){const o=typeof e=="string"?this.getCell(e):e,c=t?this.getIncomingEdges(o):this.getOutgoingEdges(o);return c==null||c.length===0}getBoundaryNodes(e){const t=[];return Object.keys(this.nodes).forEach(o=>{if(this.isBoundary(o,e)){const c=this.getCell(o);c&&t.push(c)}}),t}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(e){return this.isBoundary(e,!0)}isLeaf(e){return this.isBoundary(e,!1)}getNeighbors(e,t={}){let o=t.incoming,c=t.outgoing;o==null&&c==null&&(o=c=!0);const f=this.getConnectedEdges(e,t).reduce((v,b)=>{const w=b.hasLoop(t),_=b.getSourceCell(),A=b.getTargetCell();return o&&_&&_.isNode()&&!v[_.id]&&(w||_!==e&&(!t.deep||!_.isDescendantOf(e)))&&(v[_.id]=_),c&&A&&A.isNode()&&!v[A.id]&&(w||A!==e&&(!t.deep||!A.isDescendantOf(e)))&&(v[A.id]=A),v},{});if(e.isEdge()){if(o){const v=e.getSourceCell();v&&v.isNode()&&!f[v.id]&&(f[v.id]=v)}if(c){const v=e.getTargetCell();v&&v.isNode()&&!f[v.id]&&(f[v.id]=v)}}return Object.keys(f).map(v=>f[v])}isNeighbor(e,t,o={}){let c=o.incoming,d=o.outgoing;return c==null&&d==null&&(c=d=!0),this.getConnectedEdges(e,o).some(f=>{const v=f.getSourceCell(),b=f.getTargetCell();return!!(c&&v&&v.id===t.id||d&&b&&b.id===t.id)})}getSuccessors(e,t={}){const o=[];return this.search(e,(c,d)=>{c!==e&&this.matchDistance(d,t.distance)&&o.push(c)},Object.assign(Object.assign({},t),{outgoing:!0})),o}isSuccessor(e,t,o={}){let c=!1;return this.search(e,(d,f)=>{if(d===t&&d!==e&&this.matchDistance(f,o.distance))return c=!0,!1},Object.assign(Object.assign({},o),{outgoing:!0})),c}getPredecessors(e,t={}){const o=[];return this.search(e,(c,d)=>{c!==e&&this.matchDistance(d,t.distance)&&o.push(c)},Object.assign(Object.assign({},t),{incoming:!0})),o}isPredecessor(e,t,o={}){let c=!1;return this.search(e,(d,f)=>{if(d===t&&d!==e&&this.matchDistance(f,o.distance))return c=!0,!1},Object.assign(Object.assign({},o),{incoming:!0})),c}matchDistance(e,t){return t==null?!0:typeof t=="function"?t(e):Array.isArray(t)&&t.includes(e)?!0:e===t}getCommonAncestor(...e){const t=[];return e.forEach(o=>{o&&(Array.isArray(o)?t.push(...o):t.push(o))}),Ti.getCommonAncestor(...t)}getSubGraph(e,t={}){const o=[],c={},d=[],f=[],v=b=>{c[b.id]||(o.push(b),c[b.id]=b,b.isEdge()&&f.push(b),b.isNode()&&d.push(b))};return e.forEach(b=>{v(b),t.deep&&b.getDescendants({deep:!0}).forEach(_=>v(_))}),f.forEach(b=>{const w=b.getSourceCell(),_=b.getTargetCell();w&&!c[w.id]&&(o.push(w),c[w.id]=w,w.isNode()&&d.push(w)),_&&!c[_.id]&&(o.push(_),c[_.id]=_,_.isNode()&&d.push(_))}),d.forEach(b=>{this.getConnectedEdges(b,t).forEach(_=>{const A=_.getSourceCell(),P=_.getTargetCell();!c[_.id]&&A&&c[A.id]&&P&&c[P.id]&&(o.push(_),c[_.id]=_)})}),o}cloneSubGraph(e,t={}){const o=this.getSubGraph(e,t);return this.cloneCells(o)}cloneCells(e){return Ti.cloneCells(e)}getNodesFromPoint(e,t){const o=typeof e=="number"?{x:e,y:t||0}:e;return this.getNodes().filter(c=>c.getBBox().containsPoint(o))}getNodesInArea(e,t,o,c,d){const f=typeof e=="number"?new Rn(e,t,o,c):Rn.create(e),v=typeof e=="number"?d:t,b=v&&v.strict;return this.getNodes().filter(w=>{const _=w.getBBox();return b?f.containsRect(_):f.isIntersectWithRect(_)})}getEdgesInArea(e,t,o,c,d){const f=typeof e=="number"?new Rn(e,t,o,c):Rn.create(e),v=typeof e=="number"?d:t,b=v&&v.strict;return this.getEdges().filter(w=>{const _=w.getBBox();return _.width===0?_.inflate(1,0):_.height===0&&_.inflate(0,1),b?f.containsRect(_):f.isIntersectWithRect(_)})}getNodesUnderNode(e,t={}){const o=e.getBBox();return(t.by==null||t.by==="bbox"?this.getNodesInArea(o):this.getNodesFromPoint(o[t.by])).filter(d=>e.id!==d.id&&!d.isDescendantOf(e))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(e,t={}){return Ti.getCellsBBox(e,t)}search(e,t,o={}){o.breadthFirst?this.breadthFirstSearch(e,t,o):this.depthFirstSearch(e,t,o)}breadthFirstSearch(e,t,o={}){const c=[],d={},f={};for(c.push(e),f[e.id]=0;c.length>0;){const v=c.shift();if(v==null||d[v.id]||(d[v.id]=!0,er(t,this,v,f[v.id])===!1))continue;this.getNeighbors(v,o).forEach(w=>{f[w.id]=f[v.id]+1,c.push(w)})}}depthFirstSearch(e,t,o={}){const c=[],d={},f={};for(c.push(e),f[e.id]=0;c.length>0;){const v=c.pop();if(v==null||d[v.id]||(d[v.id]=!0,er(t,this,v,f[v.id])===!1))continue;const b=this.getNeighbors(v,o),w=c.length;b.forEach(_=>{f[_.id]=f[v.id]+1,c.splice(w,0,_)})}}getShortestPath(e,t,o={}){const c={};this.getEdges().forEach(w=>{const _=w.getSourceCellId(),A=w.getTargetCellId();_&&A&&(c[_]||(c[_]=[]),c[A]||(c[A]=[]),c[_].push(A),o.directed||c[A].push(_))});const d=typeof e=="string"?e:e.id,f=t0.run(c,d,o.weight),v=[];let b=typeof t=="string"?t:t.id;for(f[b]&&v.push(b);b=f[b];)v.unshift(b);return v}translate(e,t,o){return this.getCells().filter(c=>!c.hasParent()).forEach(c=>c.translate(e,t,o)),this}resize(e,t,o){return this.resizeCells(e,t,this.getCells(),o)}resizeCells(e,t,o,c={}){const d=this.getCellsBBox(o);if(d){const f=Math.max(e/d.width,0),v=Math.max(t/d.height,0),b=d.getOrigin();o.forEach(w=>w.scale(f,v,b,c))}return this}toJSON(e={}){return kc.toJSON(this.getCells(),e)}parseJSON(e){return kc.fromJSON(e)}fromJSON(e,t={}){const o=this.parseJSON(e);return this.resetCells(o,t),this}startBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}stopBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}batchUpdate(e,t,o={}){this.startBatch(e,o);const c=t();return this.stopBatch(e,o),c}hasActiveBatch(e=Object.keys(this.batches)){return(Array.isArray(e)?e:[e]).some(o=>this.batches[o]>0)}}(function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.addNode=="function"&&typeof c.addEdge=="function"&&c.collection!=null}l.isModel=e})(kc||(kc={})),function(l){function e(o,c={}){return{cells:o.map(d=>d.toJSON(c))}}l.toJSON=e;function t(o){const c=[];return Array.isArray(o)?c.push(...o):(o.cells&&c.push(...o.cells),o.nodes&&o.nodes.forEach(d=>{d.shape==null&&(d.shape="rect"),c.push(d)}),o.edges&&o.edges.forEach(d=>{d.shape==null&&(d.shape="edge"),c.push(d)})),c.map(d=>{const f=d.shape;if(f){if(ys.registry.exist(f))return ys.create(d);if(ss.registry.exist(f))return ss.create(d)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}l.fromJSON=t}(kc||(kc={}));const Su=".text-block-content",cp=z2("text-block");class V2 extends ys{get content(){return this.getContent()}set content(e){this.setContent(e)}getContent(){return this.store.get("content","")}setContent(e,t={}){this.store.set("content",e,t)}setup(){super.setup(),this.store.on("change:*",e=>{const t=e.key;t==="content"?this.updateContent(this.getContent()):t==="size"&&this.updateSize(this.getSize())}),this.updateSize(this.getSize()),this.updateContent(this.getContent())}updateSize(e){Qn.SUPPORT_FOREIGNOBJECT&&this.setAttrs({foreignObject:Object.assign({},e),[Su]:{style:Object.assign({},e)}})}updateContent(e){Qn.SUPPORT_FOREIGNOBJECT?this.setAttrs({[Su]:{html:e?GE(e):""}}):this.setAttrs({[Su]:{text:e}})}}(function(l){l.config({type:cp,view:cp,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Qn.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">',`<div class="${Su.substr(1)}" />`,"</body>","</foreignObject>"].join(""):`<text class="${Su.substr(1)}"/>`,"</g>"].join(""),attrs:{".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}},[Su]:{refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}}}}),ys.registry.register(cp,l)})(V2||(V2={})),function(l){const e="content";class t extends bc{confirmUpdate(c,d={}){let f=super.confirmUpdate(c,d);return this.hasAction(f,e)&&(this.updateContent(),f=this.removeAction(f,e)),f}update(c){if(Qn.SUPPORT_FOREIGNOBJECT)super.update(c);else{const d=this.cell,f=Object.assign({},c||d.getAttrs());delete f[Su],super.update(f),(!c||Co(c,Su))&&this.updateContent(c)}}updateContent(c){if(Qn.SUPPORT_FOREIGNOBJECT)super.update(c);else{const d=this.cell,f=(c||d.getAttrs())[Su],v=ty(d.getContent(),d.getSize(),f,{svgDocument:this.graph.view.svg}),b={[Su]:wo({},f,{text:v})};super.update(b)}}}l.View=t,function(o){o.config({bootstrap:["render",e],actions:Qn.SUPPORT_FOREIGNOBJECT?{}:{size:e,content:e}}),bc.registry.register(cp,o)}(t=l.View||(l.View={}))}(V2||(V2={}));const HP=sc.define({shape:"empty"});function b3(l,e="body"){return[{tagName:l,selector:e},{tagName:"text",selector:"label"}]}function cf(l,e,t={}){const o={constructorName:l,markup:b3(l,t.selector),attrs:{[l]:Object.assign({},sc.bodyAttr)}};return(t.parent||sc).define(wo(o,e,{shape:l}))}const iN=cf("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),$P=ys.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:Object.assign(Object.assign({},sc.bodyAttr),{refWidth:"100%",refHeight:"100%"}),header:Object.assign(Object.assign({},sc.bodyAttr),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:Object.assign(Object.assign({},sc.labelAttr),{refX:"50%",refY:15,fontSize:16}),bodyText:Object.assign(Object.assign({},sc.labelAttr),{refY2:15})}}),oN=cf("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),mw=10,yw=sc.define({shape:"cylinder",overwrite:!0,markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:Object.assign(Object.assign({},sc.bodyAttr),{lateral:mw}),top:Object.assign(Object.assign({},sc.bodyAttr),{refCx:"50%",refRx:"50%",cy:mw,ry:mw})},attrHooks:{lateral:{set(l,{refBBox:e}){const t=dh(l);t&&(l=parseFloat(l)/100);const o=e.x,c=e.y,d=e.width,f=e.height,v=d/2,b=t?f*l:l,w=.551784,_=w*v,A=w*b,P=o,V=o+d/2,q=o+d,ee=c+b,ge=ee-b,_e=c+f-b,ke=c+f;return{d:["M",P,ee,"L",P,_e,"C",o,_e+A,V-_,ke,V,ke,"C",V+_,ke,q,_e+A,q,_e,"L",q,ee,"C",q,ee-A,V+_,ge,V,ge,"C",V-_,ge,P,ee-A,P,ee,"Z"].join(" ")}}}},knob:{enabled:!0,position({node:l}){const e=l.attr("body/lateral");return{x:0,y:e}},onMouseMove({node:l,data:e,deltaY:t}){if(t!==0){const o=l.getBBox(),c=l.attr("body/lateral");e.round==null&&(e.round=c);const d=0,f=o.height/2,v=Jc(e.round+t,d,f);v!==c&&l.attr({body:{lateral:v},top:{cy:v,ry:v}})}}}}),WP=cf("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});var XP=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class Pv extends sc{get points(){return this.getPoints()}set points(e){this.setPoints(e)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(e,t){return e==null?this.removePoints():this.setAttrByPath("body/refPoints",Pv.pointsToString(e),t),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}(function(l){function e(t){return typeof t=="string"?t:t.map(o=>Array.isArray(o)?o.join(","):Ve.isPointLike(o)?`${o.x}, ${o.y}`:"").join(" ")}l.pointsToString=e,l.config({propHooks(t){const{points:o}=t,c=XP(t,["points"]);if(o){const d=e(o);d&&lh(c,"attrs/body/refPoints",d)}return c}})})(Pv||(Pv={}));const sN=cf("polygon",{},{parent:Pv}),ZP=cf("polyline",{},{parent:Pv});var bw=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const YP=sc.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(l){const{path:e}=l,t=bw(l,["path"]);return e&&lh(t,"attrs/body/refD",e),t}});var x3=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const bA=sc.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},Qn.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:Aa.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},sc.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(l){const{text:e}=l,t=x3(l,["text"]);return e&&lh(t,"attrs/label/text",e),t},attrHooks:{text:{set(l,{cell:e,view:t,refBBox:o,elem:c,attrs:d}){if(c instanceof HTMLElement)c.textContent=l;else{const f=d.style||{},v={text:l,width:-5,height:"100%"},b=Object.assign({textVerticalAnchor:"middle"},f),w=vh.presets.textWrap;return er(w.set,this,v,{cell:e,view:t,elem:c,refBBox:o,attrs:b}),{fill:f.color||null}}},position(l,{refBBox:e,elem:t}){if(t instanceof SVGElement)return e.getCenter()}}}}),Cy=cf("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:Ov()},{selector:"image"}),wy=cf("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:Ov()}),KP=cf("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:Ov()}),hg=cf("image-inscribed",{propHooks:Ov(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}}),xw=ss.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),C3=ss.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),w3=ss.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}});class _u extends sc{get html(){return this.getHTML()}set html(e){this.setHTML(e)}getHTML(){return this.store.get("html")}setHTML(e,t={}){return e==null?this.removeHTML(t):this.store.set("html",e,t),this}removeHTML(e={}){return this.store.remove("html",e)}}(function(l){class e extends bc{init(){super.init(),this.cell.on("change:*",()=>{this.graph.hook.shouldUpdateHTMLComponent(this.cell)&&this.renderHTMLComponent()})}confirmUpdate(o){const c=super.confirmUpdate(o);return this.handleAction(c,e.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const o=this.selectors.foContent;if(o){const c=this.$(o).empty(),d=this.graph.hook.getHTMLComponent(this.cell);d&&(typeof d=="string"?c.html(d):c.append(d))}}}l.View=e,function(t){t.action="html",t.config({bootstrap:[t.action],actions:{html:t.action}}),bc.registry.register("html-view",t)}(e=l.View||(l.View={}))})(_u||(_u={})),function(l){l.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Xi.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),ys.registry.register("html",l)}(_u||(_u={})),function(l){l.componentRegistry=js.create({type:"html componnet"})}(_u||(_u={}));var Ey=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Dv extends ig{constructor(e){super(),this.delay=10,this.throttle=2,this.threshold=5,this.changeCount=0,this.timestamp=0,this.options=Object.assign(Object.assign({},Dv.defaultOptions),e),this.graph.model.on("cell:change:*",this.onModelChanged,this)}get graph(){return this.options.graph}onModelChanged(){if(this.disabled)return;const t=(new Date().getTime()-this.timestamp)/1e3;t>this.delay||this.changeCount>=this.threshold&&t>this.throttle?(this.save(),this.reset()):this.changeCount+=1}save(){this.trigger("save")}reset(){this.changeCount=0,this.timestamp=new Date().getTime()}dispose(){this.graph.model.off("cell:change:*",this.onModelChanged,this)}}Ey([ig.dispose()],Dv.prototype,"dispose",null),function(l){l.defaultOptions={delay:10,throttle:2,threshold:5}}(Dv||(Dv={}));class _o extends mh{constructor(e){super(),this.graph=e,this.init()}get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}init(){}}var E3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class bh extends Ai{constructor(e){super(),this.graph=e;const{selectors:t,fragment:o}=Xi.parseJSONMarkup(bh.markup);this.background=t.background,this.grid=t.grid,this.svg=t.svg,this.defs=t.defs,this.viewport=t.viewport,this.primer=t.primer,this.stage=t.stage,this.decorator=t.decorator,this.overlay=t.overlay,this.container=this.options.container,this.restore=bh.snapshoot(this.container),this.$(this.container).addClass(this.prefixClassName("graph")).append(o),this.delegateEvents()}get model(){return this.graph.model}get options(){return this.graph.options}delegateEvents(){const e=this.constructor;return super.delegateEvents(e.events),this}guard(e,t){return e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t)?!0:e.data&&e.data.guarded!==void 0?e.data.guarded:!(t&&t.cell&&Ti.isCell(t.cell)||this.svg===e.target||this.container===e.target||G().contains(this.svg,e.target))}findView(e){return this.graph.renderer.findViewByElem(e)}onDblClick(e){this.options.preventDefaultDblClick&&e.preventDefault();const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const c=this.graph.snapToGrid(t.clientX,t.clientY);o?o.onDblClick(t,c.x,c.y):this.graph.trigger("blank:dblclick",{e:t,x:c.x,y:c.y})}onClick(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const c=this.graph.snapToGrid(t.clientX,t.clientY);o?o.onClick(t,c.x,c.y):this.graph.trigger("blank:click",{e:t,x:c.x,y:c.y})}}isPreventDefaultContextMenu(e,t){let o=this.options.preventDefaultContextMenu;return typeof o=="function"&&(o=er(o,this.graph,{view:t})),o}onContextMenu(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.isPreventDefaultContextMenu(t,o)&&e.preventDefault(),this.guard(t,o))return;const c=this.graph.snapToGrid(t.clientX,t.clientY);o?o.onContextMenu(t,c.x,c.y):this.graph.trigger("blank:contextmenu",{e:t,x:c.x,y:c.y})}delegateDragEvents(e,t){e.data==null&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}});const o=this.constructor;this.delegateDocumentEvents(o.documentEvents,e.data),this.undelegateEvents()}getMouseMovedCount(e){return this.getEventData(e).mouseMovedCount||0}onMouseDown(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;this.options.preventDefaultMouseDown&&t.preventDefault();const c=this.graph.snapToGrid(t.clientX,t.clientY);o?o.onMouseDown(t,c.x,c.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(t.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:c.x,y:c.y})),this.delegateDragEvents(t,o)}onMouseMove(e){const t=this.getEventData(e),o=t.startPosition;if(o&&o.x===e.clientX&&o.y===e.clientY||(t.mouseMovedCount==null&&(t.mouseMovedCount=0),t.mouseMovedCount+=1,t.mouseMovedCount<=this.options.moveThreshold))return;const d=this.normalizeEvent(e),f=this.graph.snapToGrid(d.clientX,d.clientY),v=t.currentView;v?v.onMouseMove(d,f.x,f.y):this.graph.trigger("blank:mousemove",{e:d,x:f.x,y:f.y}),this.setEventData(d,t)}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),o=this.graph.snapToGrid(t.clientX,t.clientY),d=this.getEventData(e).currentView;d?d.onMouseUp(t,o.x,o.y):this.graph.trigger("blank:mouseup",{e:t,x:o.x,y:o.y}),e.isPropagationStopped()||this.onClick(G().Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(!this.guard(t,o))if(o)o.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}onMouseOut(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(!this.guard(t,o))if(o)o.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}onMouseEnter(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const c=this.graph.renderer.findViewByElem(t.relatedTarget);if(o){if(c===o)return;o.onMouseEnter(t)}else{if(c)return;this.graph.trigger("graph:mouseenter",{e:t})}}onMouseLeave(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const c=this.graph.renderer.findViewByElem(t.relatedTarget);if(o){if(c===o)return;o.onMouseLeave(t)}else{if(c)return;this.graph.trigger("graph:mouseleave",{e:t})}}onMouseWheel(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const c=t.originalEvent,d=this.graph.snapToGrid(c.clientX,c.clientY),f=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail));o?o.onMouseWheel(t,d.x,d.y,f):this.graph.trigger("blank:mousewheel",{e:t,delta:f,x:d.x,y:d.y})}onCustomEvent(e){const t=e.currentTarget,o=t.getAttribute("event")||t.getAttribute("data-event");if(o){const c=this.findView(t);if(c){const d=this.normalizeEvent(e);if(this.guard(d,c))return;const f=this.graph.snapToGrid(d.clientX,d.clientY);c.onCustomEvent(d,o,f.x,f.y)}}}handleMagnetEvent(e,t){const o=e.currentTarget,c=o.getAttribute("magnet");if(c&&c.toLowerCase()!=="false"){const d=this.findView(o);if(d){const f=this.normalizeEvent(e);if(this.guard(f,d))return;const v=this.graph.snapToGrid(f.clientX,f.clientY);er(t,this.graph,d,f,o,v.x,v.y)}}}onMagnetMouseDown(e){this.handleMagnetEvent(e,(t,o,c,d,f)=>{t.onMagnetMouseDown(o,c,d,f)})}onMagnetDblClick(e){this.handleMagnetEvent(e,(t,o,c,d,f)=>{t.onMagnetDblClick(o,c,d,f)})}onMagnetContextMenu(e){const t=this.normalizeEvent(e),o=this.findView(t.target);this.isPreventDefaultContextMenu(t,o)&&t.preventDefault(),this.handleMagnetEvent(t,(c,d,f,v,b)=>{c.onMagnetContextMenu(d,f,v,b)})}onLabelMouseDown(e){const t=e.currentTarget,o=this.findView(t);if(o){const c=this.normalizeEvent(e);if(this.guard(c,o))return;const d=this.graph.snapToGrid(c.clientX,c.clientY);o.onLabelMouseDown(c,d.x,d.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}E3([Ai.dispose()],bh.prototype,"dispose",null),function(l){const e=`${wu.prefixCls}-graph`;l.markup=[{ns:Aa.xhtml,tagName:"div",selector:"background",className:`${e}-background`},{ns:Aa.xhtml,tagName:"div",selector:"grid",className:`${e}-grid`},{ns:Aa.svg,tagName:"svg",selector:"svg",className:`${e}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":Aa.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${e}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${e}-svg-primer`},{tagName:"g",selector:"stage",className:`${e}-svg-stage`},{tagName:"g",selector:"decorator",className:`${e}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${e}-svg-overlay`}]}]}];function t(o){const c=o.cloneNode();return o.childNodes.forEach(d=>c.appendChild(d)),()=>{for(d2(o);o.attributes.length>0;)o.removeAttribute(o.attributes[0].name);for(let d=0,f=c.attributes.length;d<f;d+=1){const v=c.attributes[d];o.setAttribute(v.name,v.value)}c.childNodes.forEach(d=>o.appendChild(d))}}l.snapshoot=t}(bh||(bh={})),function(l){const e=wu.prefixCls;l.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${e}-cell`]:"onMouseEnter",[`mouseleave  .${e}-cell`]:"onMouseLeave",[`mouseenter  .${e}-cell-tools`]:"onMouseEnter",[`mouseleave  .${e}-cell-tools`]:"onMouseLeave",[`mousedown   .${e}-cell [event]`]:"onCustomEvent",[`touchstart  .${e}-cell [event]`]:"onCustomEvent",[`mousedown   .${e}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${e}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${e}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${e}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${e}-cell image`]:"onImageDragStart",[`mousedown   .${e}-edge .${e}-edge-label`]:"onLabelMouseDown",[`touchstart  .${e}-edge .${e}-edge-label`]:"onLabelMouseDown"},l.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(bh||(bh={}));var _l;(function(l){function e(t,o){return(c,d,f)=>{const v=f.value;f.value=function(...b){if(this.scroller.widget==null){const _=`Shoule enable scroller to use method '${d}'`;if(t!==!1)throw console.error(_),new Error(_);return o!==!1&&console.warn(_),this}return v.call(this,...b)}}}l.checkScroller=e})(_l||(_l={}));const S3=`.x6-graph {
  position: relative;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
@keyframes halo-pie-visibility {
  0% {
    visibility: hidden;
  }
  100% {
    visibility: visible;
  }
}
@keyframes halo-pie-opening {
  0% {
    transform: scale(0.4) rotate(-20deg);
  }
  100% {
    transform: scale(1) rotate(0);
  }
}
.x6-widget-handle {
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  background-size: 20px 20px;
  cursor: pointer;
  user-select: none;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle.hidden {
  display: none;
}
.x6-widget-handle-selected {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}
.x6-widget-handle-remove {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: pointer;
}
.x6-widget-handle-remove:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-rotate {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-rotate:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-resize {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
  cursor: se-resize;
}
.x6-widget-handle-resize:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-clone {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-clone:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-link {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
.x6-widget-handle-link:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-fork {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-fork:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-direction {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-direction:hover {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {
  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;
}
.x6-widget-handle-surround .x6-widget-handle-pos-se {
  right: -25px;
  bottom: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-nw {
  top: -21px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-n {
  top: -22px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-e {
  top: -webkit-calc(40%);
  top: calc(50% - 10px);
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-ne {
  top: -21px;
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-w {
  top: 50%;
  left: -25px;
  margin-top: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-sw {
  bottom: -25px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-s {
  bottom: -24px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {
  width: 15px;
  height: 15px;
  font-size: 15px;
  background-size: 15px 15px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {
  right: -19px;
  bottom: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {
  top: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {
  top: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {
  top: -webkit-calc(42%);
  top: calc(50% - 8px);
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {
  top: -19px;
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {
  left: -19px;
  margin-top: -8px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {
  bottom: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {
  bottom: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {
  width: 10px;
  height: 10px;
  font-size: 10px;
  background-size: 10px 10px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {
  right: -15px;
  bottom: -13px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {
  top: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {
  top: -13px;
  margin-left: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {
  top: -webkit-calc(45%);
  top: calc(50% - 5px);
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {
  top: -13px;
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {
  left: -15px;
  margin-top: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {
  bottom: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {
  bottom: -13px;
  margin-left: -5px;
}
.x6-widget-handle-toolbar {
  position: absolute;
  top: -50px;
  display: table-row;
  padding: 7px 5px;
}
.x6-widget-handle-toolbar::after {
  position: absolute;
  top: 100%;
  left: 10px;
  width: 0;
  height: 0;
  margin-top: 4px;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  content: '';
}
.x6-widget-handle-toolbar .x6-widget-handle {
  position: relative;
  display: table-cell;
  min-width: 20px;
  margin: 0 2px;
  background-position: 3px 3px;
  background-size: 16px 16px;
}
.x6-widget-handle-toolbar .x6-widget-handle::after {
  position: absolute;
  bottom: -11px;
  width: 100%;
  content: '';
}
.x6-widget-handle-pie {
  position: absolute;
  top: -webkit-calc(0%);
  top: calc(50% - 50px);
  right: -50px;
  z-index: 1;
  display: none;
  width: 100px;
  height: 100px;
  margin: -2px -2px 0 0;
  border-radius: 50%;
  cursor: default;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie .x6-widget-handle {
  width: 1px;
  height: auto;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie-slice-svg {
  width: 100%;
  height: 100%;
  overflow: visible !important;
}
.x6-widget-handle-pie-slice-img,
.x6-widget-handle-pie-slice-txt {
  display: none;
  pointer-events: none;
}
.x6-widget-handle-pie[data-pie-toggle-position='e'] {
  top: calc(50% - 50px);
  right: -50px;
  left: auto;
}
.x6-widget-handle-pie[data-pie-toggle-position='w'] {
  top: calc(50% - 50px);
  right: auto;
  left: -52px;
}
.x6-widget-handle-pie[data-pie-toggle-position='n'] {
  top: -50px;
  right: auto;
  bottom: auto;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie[data-pie-toggle-position='s'] {
  top: auto;
  right: auto;
  bottom: -52px;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie-opened {
  display: block;
  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;
  animation-timing-function: step-end, ease;
  animation-delay: 0s, 0.1s;
}
.x6-widget-handle-pie-toggle {
  position: absolute;
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  z-index: 2;
  display: block;
  box-sizing: border-box;
  width: 30px;
  height: 30px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 20px 20px;
  border-radius: 50%;
  cursor: pointer;
  user-select: none;
  pointer-events: visiblePainted;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle-pie-toggle-pos-e {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  bottom: auto;
  left: auto;
}
.x6-widget-handle-pie-toggle-pos-w {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: auto;
  bottom: auto;
  left: -15px;
}
.x6-widget-handle-pie-toggle-pos-n {
  top: -15px;
  right: auto;
  bottom: auto;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-pos-s {
  top: auto;
  right: auto;
  bottom: -15px;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-opened {
  transition: 0.1s background-image;
}
.x6-widget-handle-toolbar {
  position: static;
  display: inline-block;
  margin-top: -50px;
  margin-left: 45px;
  white-space: nowrap;
  vertical-align: top;
  background-color: #f5f5f5;
  border-bottom: 3px solid #333;
  border-radius: 5px;
  box-shadow: 0 1px 2px #222;
}
.x6-widget-handle-toolbar::after {
  top: -12px;
  left: 55px;
  margin-top: 0;
  border-top: 6px solid #333;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
}
.x6-widget-handle-toolbar .x6-widget-handle {
  display: inline-block;
  vertical-align: top;
}
.x6-widget-handle-toolbar .x6-widget-handle:hover::after {
  border-bottom: 4px solid #fc6cb8;
}
.x6-widget-handle-toolbar .x6-widget-handle-rotate {
  position: absolute;
  top: 100%;
  right: 100%;
  margin-top: 3px;
  margin-right: 6px;
}
.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,
.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {
  border-bottom: none;
}
.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {
  margin-left: 4px;
}
.x6-widget-handle-pie {
  box-sizing: content-box;
  background-color: #f5f5f5;
  border: 2px solid #404040;
}
.x6-widget-handle-pie-slice {
  fill: transparent;
  stroke: #e9e9e9;
  stroke-width: 1;
}
.x6-widget-handle-pie-slice:hover {
  fill: #fff;
}
.x6-widget-handle-pie-slice-img {
  display: block;
}
.x6-widget-handle-selected .x6-widget-handle-pie-slice {
  fill: #fff;
}
.x6-widget-handle-pie-toggle {
  background-color: #f6f6f6;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  background-size: 16px 16px;
  border: 2px solid #3b425f;
}
.x6-widget-handle-pie-toggle:hover {
  background-color: #fff;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  border-color: #fd6eb6;
}
.x6-widget-handle-pie-toggle-opened {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-pie-toggle-opened:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 999999;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-halo {
  position: absolute;
  pointer-events: none;
}
.x6-widget-halo-content {
  position: absolute;
  top: 100%;
  padding: 6px;
  font-size: 10px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-halo-handles + .x6-widget-halo-content {
  right: -20px;
  left: -20px;
  margin-top: 30px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 25px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 20px;
}
.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {
  right: 0;
  left: 0;
  margin-top: 10px;
}
.x6-widget-halo-content {
  color: #fff;
  background-color: #6a6b8a;
}
.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {
  position: absolute;
  right: 100%;
  bottom: 100%;
  margin-right: 6px;
  margin-bottom: 3px;
}
.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {
  background-color: #fff;
  border-radius: 50%;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar {
  margin-top: -60px;
  margin-left: -18px;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {
  top: -22px;
  left: -9px;
}
.x6-widget-minimap {
  position: relative;
  display: table-cell;
  box-sizing: border-box;
  overflow: hidden;
  text-align: center;
  vertical-align: middle;
  background-color: #fff;
  user-select: none;
}
.x6-widget-minimap .x6-graph {
  display: inline-block;
  box-shadow: 0 0 4px 0 #eee;
  cursor: pointer;
}
.x6-widget-minimap .x6-graph > svg {
  pointer-events: none;
  shape-rendering: optimizeSpeed;
}
.x6-widget-minimap .x6-graph .x6-node * {
  /* stylelint-disable-next-line */
  vector-effect: initial;
}
.x6-widget-minimap-viewport {
  position: absolute;
  box-sizing: content-box !important;
  margin: -2px 0 0 -2px;
  border: 2px solid #31d0c6;
  cursor: move;
}
.x6-widget-minimap-viewport-zoom {
  position: absolute;
  right: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 12px;
  height: 12px;
  margin: 0 -6px -6px 0;
  background-color: #fff;
  border: 2px solid #31d0c6;
  border-radius: 50%;
  cursor: nwse-resize;
}
.x6-graph-scroller {
  position: relative;
  box-sizing: border-box;
  overflow: scroll;
  outline: none;
}
.x6-graph-scroller-content {
  position: relative;
}
.x6-graph-scroller-background {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-scroller .x6-graph {
  position: absolute;
  display: inline-block;
  margin: 0;
  box-shadow: none;
}
.x6-graph-scroller .x6-graph > svg {
  display: block;
}
.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {
  box-shadow: 0 0 4px 0 #eee;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-graph-pagebreak {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-pagebreak-vertical {
  position: absolute;
  top: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 1px;
  border-left: 1px dashed #bdbdbd;
}
.x6-graph-pagebreak-horizontal {
  position: absolute;
  right: 0;
  left: 0;
  box-sizing: border-box;
  height: 1px;
  border-top: 1px dashed #bdbdbd;
}
.x6-widget-selection {
  position: absolute;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
.x6-widget-snapline {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  pointer-events: none;
}
.x6-widget-snapline-vertical,
.x6-widget-snapline-horizontal {
  stroke: #2ecc71;
  stroke-width: 1px;
}
.x6-widget-stencil {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-widget-stencil::after {
  position: absolute;
  top: 0;
  display: block;
  width: 100%;
  height: 20px;
  padding: 8px 0;
  line-height: 20px;
  text-align: center;
  opacity: 0;
  transition: top 0.1s linear, opacity 0.1s linear;
  content: ' ';
  pointer-events: none;
}
.x6-widget-stencil-content {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  height: auto;
  overflow-x: hidden;
  overflow-y: auto;
}
.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {
  pointer-events: none;
}
.x6-widget-stencil-group {
  padding: 0;
  padding-bottom: 8px;
  overflow: hidden;
  user-select: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  padding-bottom: 0;
}
.x6-widget-stencil-group-title {
  position: relative;
  margin-top: 0;
  margin-bottom: 0;
  padding: 4px;
  cursor: pointer;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  user-select: none;
}
.x6-widget-stencil .unmatched {
  opacity: 0.3;
}
.x6-widget-stencil .x6-node.unmatched {
  display: none;
}
.x6-widget-stencil-group.unmatched {
  display: none;
}
.x6-widget-stencil-search-text {
  position: relative;
  z-index: 1;
  box-sizing: border-box;
  width: 100%;
  height: 30px;
  max-height: 30px;
  line-height: 30px;
  outline: 0;
}
.x6-widget-stencil.not-found::after {
  opacity: 1;
  content: attr(data-not-found-text);
}
.x6-widget-stencil.not-found.searchable::after {
  top: 30px;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 50px;
}
.x6-widget-stencil {
  color: #333;
  background: #f5f5f5;
}
.x6-widget-stencil-content {
  position: absolute;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-content {
  top: 32px;
}
.x6-widget-stencil.searchable > .x6-widget-stencil-content {
  top: 80px;
}
.x6-widget-stencil.not-found::after {
  position: absolute;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 80px;
}
.x6-widget-stencil.not-found.searchable::after {
  top: 60px;
}
.x6-widget-stencil-group {
  height: auto;
  margin-bottom: 1px;
  padding: 0;
  transition: none;
}
.x6-widget-stencil-group .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  max-height: 31px;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  position: relative;
  left: 0;
  box-sizing: border-box;
  width: 100%;
  height: 32px;
  padding: 0 5px 0 8px;
  color: #666;
  font-weight: 700;
  font-size: 12px;
  line-height: 32px;
  cursor: default;
  transition: all 0.3;
}
.x6-widget-stencil-title:hover,
.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {
  color: #444;
}
.x6-widget-stencil-title {
  background: #e9e9e9;
}
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  background: #ededed;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {
  padding-left: 32px;
  cursor: pointer;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  position: absolute;
  top: 6px;
  left: 8px;
  display: block;
  width: 18px;
  height: 18px;
  margin: 0;
  padding: 0;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  border: none;
  content: ' ';
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');
  opacity: 0.4;
  transition: all 0.3s;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');
  opacity: 0.4;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil input[type='search'] {
  -webkit-appearance: textfield;
}
.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,
.x6-widget-stencil input[type='search']::-webkit-search-decoration {
  -webkit-appearance: none;
}
.x6-widget-stencil-search-text {
  display: block;
  width: 90%;
  margin: 8px 5%;
  padding-left: 8px;
  color: #333;
  background: #fff;
  border: 1px solid #e9e9e9;
  border-radius: 12px;
  outline: 0;
}
.x6-widget-stencil-search-text:focus {
  outline: 0;
}
.x6-widget-stencil::after {
  color: #808080;
  font-weight: 600;
  font-size: 12px;
  background: 0 0;
}
.x6-widget-transform {
  position: absolute;
  box-sizing: content-box !important;
  margin: -5px 0 0 -5px;
  padding: 4px;
  border: 1px dashed #000;
  border-radius: 5px;
  user-select: none;
  pointer-events: none;
}
.x6-widget-transform > div {
  position: absolute;
  box-sizing: border-box;
  background-color: #fff;
  border: 1px solid #000;
  transition: background-color 0.2s;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-transform > div:hover {
  background-color: #d3d3d3;
}
.x6-widget-transform-cursor-n {
  cursor: n-resize;
}
.x6-widget-transform-cursor-s {
  cursor: s-resize;
}
.x6-widget-transform-cursor-e {
  cursor: e-resize;
}
.x6-widget-transform-cursor-w {
  cursor: w-resize;
}
.x6-widget-transform-cursor-ne {
  cursor: ne-resize;
}
.x6-widget-transform-cursor-nw {
  cursor: nw-resize;
}
.x6-widget-transform-cursor-se {
  cursor: se-resize;
}
.x6-widget-transform-cursor-sw {
  cursor: sw-resize;
}
.x6-widget-transform-resize {
  width: 10px;
  height: 10px;
  border-radius: 6px;
}
.x6-widget-transform-resize[data-position='top-left'] {
  top: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='top-right'] {
  top: -5px;
  right: -5px;
}
.x6-widget-transform-resize[data-position='bottom-left'] {
  bottom: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='bottom-right'] {
  right: -5px;
  bottom: -5px;
}
.x6-widget-transform-resize[data-position='top'] {
  top: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='bottom'] {
  bottom: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='left'] {
  top: 50%;
  left: -5px;
  margin-top: -5px;
}
.x6-widget-transform-resize[data-position='right'] {
  top: 50%;
  right: -5px;
  margin-top: -5px;
}
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {
  display: none;
}
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {
  display: none;
}
.x6-widget-transform.no-resize .x6-widget-transform-resize {
  display: none;
}
.x6-widget-transform-rotate {
  top: -20px;
  left: -20px;
  width: 12px;
  height: 12px;
  border-radius: 6px;
  cursor: crosshair;
}
.x6-widget-transform.no-rotate .x6-widget-transform-rotate {
  display: none;
}
.x6-widget-transform-active {
  border-color: transparent;
  pointer-events: all;
}
.x6-widget-transform-active > div {
  display: none;
}
.x6-widget-transform-active > .x6-widget-transform-active-handle {
  display: block;
  background-color: #808080;
}
.x6-widget-knob {
  position: absolute;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  margin-top: -8px;
  margin-left: -8px;
  cursor: pointer;
  user-select: none;
}
.x6-widget-knob::before,
.x6-widget-knob::after {
  position: absolute;
  transform: rotate(45deg);
  content: '';
}
.x6-widget-knob::before {
  top: 4px;
  left: 4px;
  box-sizing: border-box;
  width: 8px;
  height: 8px;
  background-color: #fff;
}
.x6-widget-knob::after {
  top: 5px;
  left: 5px;
  box-sizing: border-box;
  width: 6px;
  height: 6px;
  background-color: #fca000;
}
.x6-graph-print {
  position: relative;
}
.x6-graph-print .x6-graph-print-ready {
  display: none;
}
.x6-graph-print .x6-graph-print-preview {
  overflow: hidden !important;
  background: #fff !important;
}
@media print {
  html,
  html > body.x6-graph-printing {
    position: relative !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  html > body.x6-graph-printing > * {
    display: none !important;
  }
  html > body.x6-graph-printing > .x6-graph-print {
    display: block !important;
  }
  .x6-graph-print {
    top: 0 !important;
    left: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    page-break-after: always;
    background: #fff !important;
  }
  .x6-graph-print .x6-graph-print-ready {
    display: none;
  }
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`;var _3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class lf extends _o{init(){wu.autoInsertCSS&&lf.ensure()}dispose(){lf.clean()}}_3([lf.dispose()],lf.prototype,"dispose",null),function(l){let e,t=0;function o(){if(t+=1,!(t>1)&&!Qn.isApplyingHMR()){e=document.createElement("style"),e.setAttribute("type","text/css"),e.textContent=S3;const d=document.querySelector("head");d&&d.insertBefore(e,d.firstChild)}}l.ensure=o;function c(){t-=1,!(t>0)&&(e&&e.parentNode&&e.parentNode.removeChild(e),e=null)}l.clean=c}(lf||(lf={}));var xA=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class d0{get handleClassName(){return Io.handle}get pie(){return Object.assign(Object.assign({},d0.defaultPieOptions),this.handleOptions.pie)}initHandles(){if(this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach(e=>this.addHandle(e)),this.handleOptions.type==="pie"){if(this.pie.toggles){const e=Io.pieToggle;this.$pieToggles={},this.pie.toggles.forEach(t=>{const o=this.$("<div/>");this.applyAttrs(o,t.attrs),o.addClass(e).addClass(`${e}-pos-${t.position||"e"}`).attr("data-name",t.name).appendTo(this.container),this.$pieToggles[t.name]=o})}this.setPieIcons()}if(this.$handleContainer){const e=this.handleOptions.type||"surround";this.$handleContainer.addClass(Io.wrap).addClass(Io.animate).addClass(`${Io.handle}-${e}`)}this.delegateEvents({[`mousedown .${Io.handle}`]:"onHandleMouseDown",[`touchstart .${Io.handle}`]:"onHandleMouseDown",[`mousedown .${Io.pieToggle}`]:"onPieToggleMouseDown",[`touchstart .${Io.pieToggle}`]:"onPieToggleMouseDown"})}onHandleMouseDown(e){const t=this.$(e.currentTarget).closest(`.${Io.handle}`).attr("data-action");t&&(e.preventDefault(),e.stopPropagation(),this.setEventData(e,{action:t,clientX:e.clientX,clientY:e.clientY,startX:e.clientX,startY:e.clientY}),e.type==="mousedown"&&e.button===2?this.triggerHandleAction(t,"contextmenu",e):(this.triggerHandleAction(t,"mousedown",e),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},e.data)))}onHandleMouseMove(e){const o=this.getEventData(e).action;o&&this.triggerHandleAction(o,"mousemove",e)}onHandleMouseUp(e){const o=this.getEventData(e).action;o&&(this.triggerHandleAction(o,"mouseup",e),this.undelegateDocumentEvents())}triggerHandleAction(e,t,o,c){o.preventDefault(),o.stopPropagation();const d=this.normalizeEvent(o),f=this.getEventData(d),v=this.graph.snapToGrid(d.clientX,d.clientY),b=this.graph.snapToGrid(f.clientX,f.clientY),w=v.x-b.x,_=v.y-b.y;this.trigger(`action:${e}:${t}`,Object.assign({e:d,dx:w,dy:_,x:v.x,y:v.y,offsetX:o.clientX-f.startX,offsetY:o.clientY-f.startY},c)),f.clientX=o.clientX,f.clientY=o.clientY}onPieToggleMouseDown(e){e.stopPropagation();const t=this.$(e.target).closest(`.${Io.pieToggle}`).attr("data-name");this.isOpen(t)||this.isOpen()&&this.toggleState(),this.toggleState(t)}setPieIcons(){this.handleOptions.type==="pie"&&this.$handleContainer.find(`.${Io.handle}`).each((e,t)=>{const o=this.$(t),c=o.attr("data-action"),d=Io.pieSlice,f=this.getHandle(c);if(!f||!f.icon){const v=window.getComputedStyle(t,":before").getPropertyValue("content");if(v&&v!=="none"){const w=o.find(`.${d}-txt`);w.length&&sr.create(w[0]).text(v.replace(/['"]/g,""))}const b=o.css("background-image");if(b){const w=b.match(/url\(['"]?([^'"]+)['"]?\)/);if(w){const _=w[1],A=o.find(`.${d}-img`);A.length>0&&sr.create(A[0]).attr("xlink:href",_)}}}})}getHandleIdx(e){return this.handles.findIndex(t=>t.name===e)}hasHandle(e){return this.getHandleIdx(e)>=0}getHandle(e){return this.handles.find(t=>t.name===e)}renderHandle(e){const t=this.$("<div/>").addClass(`${Io.handle} ${Io.handle}-${e.name}`).attr("data-action",e.name).prop("draggable",!1);if(this.handleOptions.type==="pie"){const o=this.getHandleIdx(e.name),c=this.pie,d=c.outerRadius,f=c.innerRadius,v=(d+f)/2,b=new Ve(d,d),w=ki.toRad(c.sliceAngle),_=o*w+ki.toRad(c.startAngle),A=_+w,P=RM(f,d,_,A),V=sr.create("svg").addClass(`${Io.pieSlice}-svg`),q=sr.create("path").addClass(Io.pieSlice).attr("d",P).translate(d,d),ee=Ve.fromPolar(v,-_-w/2,b).toJSON(),ge=c.iconSize,_e=sr.create("image").attr(ee).addClass(`${Io.pieSlice}-img`);ee.y=ee.y+ge-2;const ke=sr.create("text",{"font-size":ge}).attr(ee).addClass(`${Io.pieSlice}-txt`);_e.attr({width:ge,height:ge}),_e.translate(-ge/2,-ge/2),ke.translate(-ge/2,-ge/2),V.append([q,_e,ke]),t.append(V.node)}else t.addClass(`${Io.handle}-pos-${e.position}`),e.content&&(typeof e.content=="string"?t.html(e.content):t.append(e.content));return this.updateHandleIcon(t,e.icon),this.applyAttrs(t,e.attrs),t}addHandle(e){if(!this.hasHandle(e.name)){this.handles.push(e);const t=e.events;t&&Object.keys(t).forEach(o=>{const c=t[o],d=`action:${e.name}:${o}`;typeof c=="string"?this.on(d,this[c],this):this.on(d,c)}),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(e))}return this}addHandles(e){return e.forEach(t=>this.addHandle(t)),this}removeHandles(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this}removeHandle(e){const t=this.getHandleIdx(e),o=this.handles[t];return o&&(o.events&&Object.keys(o.events).forEach(c=>{this.off(`action:${e}:${c}`)}),this.getHandleElem(e).remove(),this.handles.splice(t,1)),this}changeHandle(e,t){const o=this.getHandle(e);return o&&(this.removeHandle(e),this.addHandle(Object.assign(Object.assign({},o),t))),this}toggleHandle(e,t){const o=this.getHandle(e);if(o){const c=this.getHandleElem(e),d=`${Io.handle}-selected`;t===void 0&&(t=!c.hasClass(d)),c.toggleClass(d,t);const f=t?o.iconSelected:o.icon;f&&this.updateHandleIcon(c,f)}return this}selectHandle(e){return this.toggleHandle(e,!0)}deselectHandle(e){return this.toggleHandle(e,!1)}deselectAllHandles(){return this.handles.forEach(e=>this.deselectHandle(e.name)),this}getHandleElem(e){return this.$handleContainer.find(`.${Io.handle}-${e}`)}updateHandleIcon(e,t){if(this.handleOptions.type==="pie"){const o=e.find(`.${Io.pieSliceImg}`);this.$(o[0]).attr("xlink:href",t||"")}else e.css("background-image",t?`url(${t})`:"")}isRendered(){return this.$handleContainer!=null}isOpen(e){return this.isRendered()?e?this.$pieToggles[e].hasClass(Io.pieToggleOpened):this.$handleContainer.hasClass(`${Io.pieOpended}`):!1}toggleState(e){if(this.isRendered()){const t=this.$handleContainer;if(Object.keys(this.$pieToggles).forEach(o=>{this.$pieToggles[o].removeClass(Io.pieToggleOpened)}),this.isOpen())this.trigger("pie:close",{name:e}),t.removeClass(Io.pieOpended);else{if(this.trigger("pie:open",{name:e}),e){const o=this.pie.toggles,c=o&&o.find(d=>d.name===e);c&&t.attr({"data-pie-toggle-name":c.name,"data-pie-toggle-position":c.position}),this.$pieToggles[e].addClass(Io.pieToggleOpened)}t.addClass(Io.pieOpended)}}}applyAttrs(e,t){if(t){const o=Ai.$(e);Object.keys(t).forEach(c=>{const d=o.find(c).addBack().filter(c),f=t[c],{class:v}=f,b=xA(f,["class"]);v&&d.addClass(v),d.attr(b)})}}}(function(l){l.defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]}})(d0||(d0={}));var Io;(function(l){l.handle=Ai.prototype.prefixClassName("widget-handle"),l.wrap=`${l.handle}-wrap`,l.animate=`${l.handle}-animate`,l.pieOpended=`${l.handle}-pie-opened`,l.pieToggle=`${l.handle}-pie-toggle`,l.pieToggleOpened=`${l.handle}-pie-toggle-opened`,l.pieSlice=`${l.handle}-pie-slice`,l.pieSliceImg=`${l.handle}-pie-slice-img`})(Io||(Io={}));var CA=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},wA=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class Sy extends Ai{constructor(e){super();const t=e,{view:o,cell:c,node:d,edge:f,graph:v}=t,b=wA(t,["view","cell","node","edge","graph"]);o?(this.view=o,this.cell=o.cell,this.graph=o.graph,this.model=this.graph.model):(c||f||d)&&v&&(this.cell=d||f||c,this.view=v.renderer.findViewByCell(this.cell),this.graph=v,this.model=this.graph.model);const w=this.constructor;e.clearAll!==!1&&w.removeInstances(this.graph),w.register(this),this.init(b)}static ensureCache(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)}static register(e,t){t==null&&(t=e.graph);const o=this.ensureCache();let c=o[t.view.cid];c==null&&(c=o[t.view.cid]={}),c[e.cid]=e}static unregister(e,t){t==null&&(t=e.graph);const o=this.ensureCache();o[t.view.cid]&&delete o[t.view.cid][e.cid]}static removeInstances(e){const o=this.ensureCache()[e.view.cid];o&&Object.keys(o).forEach(c=>{const d=o[c];d&&d.remove()})}static getInstances(e){return this.ensureCache()[e.view.cid]||{}}init(e){}render(){return this}startListening(){this.options.clearOnBlankMouseDown!==!1&&this.graph.on("blank:mousedown",this.remove,this)}stopListening(){this.options.clearOnBlankMouseDown!==!1&&this.graph.off("blank:mousedown",this.remove,this)}remove(){return this.stopListening(),this.constructor.unregister(this),super.remove()}dispose(){this.remove()}}Sy.instanceCache=new WeakMap,CA([Ai.dispose()],Sy.prototype,"dispose",null);class EA extends Sy{get node(){return this.cell}get metadata(){const e=this.cell.prop("knob");return Array.isArray(e)?this.options.index!=null?e[this.options.index]:null:e}init(e){this.options=Object.assign({},e),this.render(),this.startListening()}startListening(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.view.on("node:resize:mousedown",this.onTransform,this),this.view.on("node:rotate:mousedown",this.onTransform,this),this.view.on("node:resize:mouseup",this.onTransformed,this),this.view.on("node:rotate:mouseup",this.onTransformed,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),super.startListening()}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.view.off("node:resize:mousedown",this.onTransform,this),this.view.off("node:rotate:mousedown",this.onTransform,this),this.view.off("node:resize:mouseup",this.onTransformed,this),this.view.off("node:rotate:mouseup",this.onTransformed,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),super.stopListening()}render(){return this.container=document.createElement("div"),co(this.container,this.prefixClassName("widget-knob")),this.options.className&&co(this.container,this.options.className),this.view.addClass(fg.KNOB),this.graph.container.appendChild(this.container),this.update(),this}remove(){return this.view.removeClass(fg.KNOB),super.remove()}update(){if(this.metadata){const{update:e,position:t}=this.metadata,o={knob:this,cell:this.cell,node:this.node};if(t){const c=t.call(this.graph,Object.assign({},o));if(c){const d=this.graph.matrix(),f=this.node.getBBox(),v=ki.normalize(this.node.getAngle()),b=Ve.create(c);v!==0&&b.rotate(-v,{x:f.width/2,y:f.height/2}),b.translate(f).scale(d.a,d.d).translate(d.e,d.f),this.container.style.left=`${b.x}px`,this.container.style.top=`${b.y}px`}}e&&e.call(this.graph,Object.assign({},o))}}hide(){this.container.style.display="none"}show(){this.container.style.display=""}onTransform(){this.hide()}onTransformed(){this.show()}onKnobMouseDown({knob:e}){this.cid!==e.cid&&this.hide()}onKnobMouseUp(){this.show()}notify(e,t){if(this.view){const o=this.view.normalizeEvent(t),c=this.graph.snapToGrid(o.clientX,o.clientY);this.view.notify(`cell:${e}`,{e:o,view:this.view,node:this.node,cell:this.cell,x:c.x,y:c.y,knob:this}),this.cell.isNode()?this.view.notify(`node:${e}`,{e:o,view:this.view,node:this.node,cell:this.cell,x:c.x,y:c.y,knob:this}):this.cell.isEdge()&&this.view.notify(`edge:${e}`,{e:o,view:this.view,edge:this.cell,cell:this.cell,x:c.x,y:c.y,knob:this})}}onMouseDown(e){e.stopPropagation(),this.setEventData(e,{knobbing:!1,originX:e.clientX,originY:e.clientY,clientX:e.clientX,clientY:e.clientY}),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(fg.documentEvents,e.data),this.metadata&&this.metadata.onMouseDown&&this.metadata.onMouseDown.call(this.graph,{e,data:this.getEventData(e),knob:this,cell:this.cell,node:this.node}),this.notify("knob:mousedown",e)}onMouseMove(e){const t=this.getEventData(e),o=this.graph.findViewByCell(this.node);if(t.knobbing||(t.knobbing=!0,o&&(o.addClass(fg.KNOBBING),this.notify("knob",e)),this.model.startBatch("knob",{cid:this.cid})),t.clientX=e.clientX,t.clientY=e.clientY,this.metadata&&this.metadata.onMouseMove){const c=this.graph.matrix(),d=(e.clientX-t.originX)/c.a,f=(e.clientY-t.originY)/c.d,v=this.node.getAngle(),b=new Ve(d,f).rotate(v);this.metadata.onMouseMove.call(this.graph,{e,data:t,deltaX:b.x,deltaY:b.y,knob:this,cell:this.cell,node:this.node})}this.notify("knobbing",e),this.notify("knob:mousemove",e)}onMouseUp(e){this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const t=this.getEventData(e),o=this.graph.findViewByCell(this.node);t.knobbing&&(o&&o.removeClass(fg.KNOBBING),this.metadata&&this.metadata.onMouseUp&&this.metadata.onMouseUp.call(this.graph,{e,data:t,knob:this,cell:this.cell,node:this.node}),this.model.stopBatch("knob",{cid:this.cid}),this.notify("knobbed",e)),this.notify("knob:mouseup",e)}}var fg;(function(l){l.KNOB="has-widget-knob",l.KNOBBING="node-knobbing",l.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"}})(fg||(fg={}));var A3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},_y;(function(l){l.root="widget-minimap",l.viewport=`${l.root}-viewport`,l.zoom=`${l.viewport}-zoom`})(_y||(_y={}));class SA extends Ai{constructor(e){super(),this.options=Object.assign(Object.assign({},j2.defaultOptions),e),this.updateViewport=n2(this.updateViewport.bind(this),0),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(_y.root));const t=document.createElement("div");this.container.appendChild(t),this.$viewport=this.$("<div>").addClass(this.prefixClassName(_y.viewport)),this.options.scalable&&(this.zoomHandle=this.$("<div>").addClass(this.prefixClassName(_y.zoom)).appendTo(this.$viewport).get(0)),this.$container.append(this.$viewport).css({width:this.options.width,height:this.options.height,padding:this.options.padding}),this.options.container&&this.options.container.appendChild(this.container),this.sourceGraph=this.graph;const o=Object.assign(Object.assign({},this.options.graphOptions),{container:t,model:this.sourceGraph.model,frozen:!0,async:this.sourceGraph.isAsync(),interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});this.targetGraph=this.options.createGraph?this.options.createGraph(o):new Qi(o),this.targetGraph.renderer.unfreeze(),this.updatePaper(this.sourceGraph.options.width,this.sourceGraph.options.height),this.startListening()}get graph(){return this.options.graph}get scroller(){return this.graph.scroller.widget}get graphContainer(){return this.scroller?this.scroller.container:this.graph.container}get $graphContainer(){return this.scroller?this.scroller.$container:this.$(this.graph.container)}startListening(){this.scroller?this.$graphContainer.on(`scroll${this.getEventNamespace()}`,this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents({mousedown:"startAction",touchstart:"startAction",[`mousedown .${this.prefixClassName("graph")}`]:"scrollTo",[`touchstart .${this.prefixClassName("graph")}`]:"scrollTo"})}stopListening(){this.scroller?this.$graphContainer.off(this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}onRemove(){this.targetGraph.view.remove(),this.stopListening(),this.targetGraph.dispose()}onTransform(e){(e.ui||this.targetGraphTransforming)&&this.updateViewport()}onModelUpdated(){this.targetGraph.zoomToFit()}updatePaper(e,t){let o,c;typeof e=="object"?(o=e.width,c=e.height):(o=e,c=t);const d=this.sourceGraph.options,f=this.sourceGraph.transform.getScale(),v=this.options.width-2*this.options.padding,b=this.options.height-2*this.options.padding;o/=f.sx,c/=f.sy,this.ratio=Math.min(v/o,b/c);const w=this.ratio,_=d.x*w/f.sx,A=d.y*w/f.sy;return o*=w,c*=w,this.targetGraph.resizeGraph(o,c),this.targetGraph.translate(_,A),this.scroller?this.targetGraph.scale(w,w):this.targetGraph.zoomToFit(),this.updateViewport(),this}updateViewport(){const e=this.sourceGraph.transform.getScale(),t=this.targetGraph.transform.getScale();let o=null;this.scroller?o=this.scroller.clientToLocalPoint(0,0):o=this.graph.graphToLocal(0,0);const c=this.$(this.targetGraph.container).position(),d=this.targetGraph.translate();d.ty=d.ty||0,this.geometry={top:c.top+o.y*t.sy+d.ty,left:c.left+o.x*t.sx+d.tx,width:this.$graphContainer.innerWidth()*t.sx/e.sx,height:this.$graphContainer.innerHeight()*t.sy/e.sy},this.$viewport.css(this.geometry)}startAction(e){const t=this.normalizeEvent(e),o=t.target===this.zoomHandle?"zooming":"panning",{tx:c,ty:d}=this.sourceGraph.translate(),f={action:o,clientX:t.clientX,clientY:t.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:c,translateY:d};this.targetGraphTransforming=!0,this.delegateDocumentEvents(j2.documentEvents,f)}doAction(e){const t=this.normalizeEvent(e),o=t.clientX,c=t.clientY,d=t.data;switch(d.action){case"panning":{const f=this.sourceGraph.transform.getScale(),v=(o-d.clientX)*f.sx,b=(c-d.clientY)*f.sy;this.scroller?(this.graphContainer.scrollLeft=d.scrollLeft+v/this.ratio,this.graphContainer.scrollTop=d.scrollTop+b/this.ratio):this.sourceGraph.translate(d.translateX-v/this.ratio,d.translateY-b/this.ratio);break}case"zooming":{const f=d.scale,v=d.geometry,b=1+(d.clientX-o)/v.width/f.sx;d.frameId&&cancelAnimationFrame(d.frameId),d.frameId=requestAnimationFrame(()=>{this.sourceGraph.zoom(b*d.zoom,{absolute:!0,minScale:this.options.minScale,maxScale:this.options.maxScale})});break}default:break}}stopAction(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1}scrollTo(e){const t=this.normalizeEvent(e);let o,c;const d=this.targetGraph.translate();if(d.ty=d.ty||0,t.offsetX==null){const b=this.$(this.targetGraph.container).offset();o=t.pageX-b.left,c=t.pageY-b.top}else o=t.offsetX,c=t.offsetY;const f=(o-d.tx)/this.ratio,v=(c-d.ty)/this.ratio;this.sourceGraph.centerPoint(f,v)}dispose(){this.remove()}}A3([Ai.dispose()],SA.prototype,"dispose",null);var j2;(function(l){l.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:e=>new Qi(e)},l.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}})(j2||(j2={}));var T3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},qP=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class _A extends Ai{constructor(e){super();const{graph:t}=e,o=qP(e,["graph"]);this.graph=t,this.options=Object.assign({tolerance:10},o),this.offset={x:0,y:0},this.render(),this.parseFilter(),this.disabled||this.startListening()}get model(){return this.graph.model}get containerClassName(){return this.prefixClassName("widget-snapline")}get verticalClassName(){return`${this.containerClassName}-vertical`}get horizontalClassName(){return`${this.containerClassName}-horizontal`}get disabled(){return this.options.enabled!==!0||this.graph.options.snapline.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())}setFilter(e){this.options.filter=e,this.parseFilter()}render(){const e=this.containerWrapper=new sr("svg"),t=this.horizontal=new sr("line"),o=this.vertical=new sr("line");e.addClass(this.containerClassName),t.addClass(this.horizontalClassName),o.addClass(this.verticalClassName),e.setAttribute("width","100%"),e.setAttribute("height","100%"),t.setAttribute("display","none"),o.setAttribute("display","none"),e.append([t,o]),this.options.className&&e.addClass(this.options.className),this.container=this.containerWrapper.node}startListening(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}stopListening(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}parseFilter(){this.filterShapes={},this.filterCells={},this.filterFunction=null;const e=this.options.filter;Array.isArray(e)?e.forEach(t=>{typeof t=="string"?this.filterShapes[t]=!0:this.filterCells[t.id]=!0}):typeof e=="function"&&(this.filterFunction=e)}onBatchStop({name:e,data:t}){e==="resize"&&this.snapOnResizing(t.cell,t)}captureCursorOffset({view:e,x:t,y:o}){const c=e.getDelegatedView();if(c&&this.isNodeMovable(c)){const d=e.cell.getPosition();this.offset={x:t-d.x,y:o-d.y}}}isNodeMovable(e){return e&&e.cell.isNode()&&e.can("nodeMovable")}snapOnResizing(e,t){if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){const o=this.graph.renderer.findViewByCell(e);if(o&&o.cell.isNode()){const c=e.getBBox(),d=c.bbox(e.getAngle()),f=d.getTopLeft(),v=d.getBottomRight(),b=ki.normalize(e.getAngle()),w=this.options.tolerance||0;let _,A,P,V,q,ee;const ge={vertical:0,horizontal:0},_e=t.direction,ke=t.trueDirection,Se=t.relativeDirection;ke.indexOf("right")!==-1?ge.vertical=v.x:ge.vertical=f.x,ke.indexOf("bottom")!==-1?ge.horizontal=v.y:ge.horizontal=f.y,this.model.getNodes().some(Ln=>{if(this.isIgnored(e,Ln))return!1;const Jr=Ln.getBBox().bbox(Ln.getAngle()),ii=Jr.getTopLeft(),Ht=Jr.getBottomRight(),Pn={vertical:[ii.x,Ht.x],horizontal:[ii.y,Ht.y]},Rr={};return Object.keys(Pn).forEach(Ro=>{const as=Ro,Oa=Pn[as].map(_s=>({position:_s,distance:Math.abs(_s-ge[as])})).filter(_s=>_s.distance<=w);Rr[as]=On(Oa,_s=>_s.distance)}),_==null&&Rr.vertical.length>0&&(_=Rr.vertical[0].position,A=Math.min(d.y,Jr.y),P=Math.max(v.y,Ht.y)-A),V==null&&Rr.horizontal.length>0&&(V=Rr.horizontal[0].position,q=Math.min(d.x,Jr.x),ee=Math.max(v.x,Ht.x)-q),_!=null&&V!=null}),this.hide();let Ue=0,Qe=0;(V!=null||_!=null)&&(_!=null&&(Ue=ke.indexOf("right")!==-1?_-v.x:f.x-_),V!=null&&(Qe=ke.indexOf("bottom")!==-1?V-v.y:f.y-V));let bt=0,Ot=0;if(b%90===0)b===90||b===270?(bt=Qe,Ot=Ue):(bt=Ue,Ot=Qe);else{const Ln=b>=0&&b<90?1:b>=90&&b<180?4:b>=180&&b<270?3:2;V!=null&&_!=null&&(Ue<Qe?(Qe=0,V=void 0):(Ue=0,_=void 0));const Jr=ki.toRad(b%90);Ue&&(bt=Ln===3?Ue/Math.cos(Jr):Ue/Math.sin(Jr)),Qe&&(Ot=Ln===3?Qe/Math.cos(Jr):Qe/Math.sin(Jr));const ii=Ln===1||Ln===3;switch(Se){case"top":case"bottom":Ot=Qe?Qe/(ii?Math.cos(Jr):Math.sin(Jr)):Ue/(ii?Math.sin(Jr):Math.cos(Jr));break;case"left":case"right":bt=Ue?Ue/(ii?Math.cos(Jr):Math.sin(Jr)):Qe/(ii?Math.sin(Jr):Math.cos(Jr));break;default:break}}switch(Se){case"top":case"bottom":bt=0;break;case"left":case"right":Ot=0;break;default:break}const Kt=this.graph.getGridSize();let Fn=Math.max(c.width+bt,Kt),Cn=Math.max(c.height+Ot,Kt);t.minWidth&&t.minWidth>Kt&&(Fn=Math.max(Fn,t.minWidth)),t.minHeight&&t.minHeight>Kt&&(Cn=Math.max(Cn,t.minHeight)),t.maxWidth&&(Fn=Math.min(Fn,t.maxWidth)),t.maxHeight&&(Cn=Math.min(Cn,t.maxHeight)),t.preserveAspectRatio&&(Ot<bt?Cn=Fn*(c.height/c.width):Fn=Cn*(c.width/c.height)),(Fn!==c.width||Cn!==c.height)&&(e.resize(Fn,Cn,{direction:_e,relativeDirection:Se,trueDirection:ke,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(o)}),P&&(P+=Cn-c.height),ee&&(ee+=Fn-c.width));const Sn=e.getBBox().bbox(b);_&&Math.abs(Sn.x-_)>1&&Math.abs(Sn.width+Sn.x-_)>1&&(_=void 0),V&&Math.abs(Sn.y-V)>1&&Math.abs(Sn.height+Sn.y-V)>1&&(V=void 0),this.update({verticalLeft:_,verticalTop:A,verticalHeight:P,horizontalTop:V,horizontalLeft:q,horizontalWidth:ee})}}}snapOnMoving({view:e,e:t,x:o,y:c}){const d=e.getEventData(t).delegatedView||e;if(!this.isNodeMovable(d))return;const f=d.cell,v=f.getSize(),b=f.getPosition(),w=new Rn(o-this.offset.x,c-this.offset.y,v.width,v.height),_=f.getAngle(),A=w.getCenter(),P=w.bbox(_),V=P.getTopLeft(),q=P.getBottomRight(),ee=this.options.tolerance||0;let ge,_e,ke,Se,Ue,Qe,bt=0,Ot=0;if(this.model.getNodes().some(Kt=>{if(this.isIgnored(f,Kt))return!1;const Fn=Kt.getBBox().bbox(Kt.getAngle()),Cn=Fn.getCenter(),Sn=Fn.getTopLeft(),Ln=Fn.getBottomRight();return ge==null&&(Math.abs(Cn.x-A.x)<ee?(ge=Cn.x,bt=.5):Math.abs(Sn.x-V.x)<ee?(ge=Sn.x,bt=0):Math.abs(Sn.x-q.x)<ee?(ge=Sn.x,bt=1):Math.abs(Ln.x-q.x)<ee?(ge=Ln.x,bt=1):Math.abs(Ln.x-V.x)<ee&&(ge=Ln.x),ge!=null&&(_e=Math.min(P.y,Fn.y),ke=Math.max(q.y,Ln.y)-_e)),Se==null&&(Math.abs(Cn.y-A.y)<ee?(Se=Cn.y,Ot=.5):Math.abs(Sn.y-V.y)<ee?Se=Sn.y:Math.abs(Sn.y-q.y)<ee?(Se=Sn.y,Ot=1):Math.abs(Ln.y-q.y)<ee?(Se=Ln.y,Ot=1):Math.abs(Ln.y-V.y)<ee&&(Se=Ln.y),Se!=null&&(Ue=Math.min(P.x,Fn.x),Qe=Math.max(q.x,Ln.x)-Ue)),ge!=null&&Se!=null}),this.hide(),Se!=null||ge!=null){Se!=null&&(P.y=Se-Ot*P.height),ge!=null&&(P.x=ge-bt*P.width);const Kt=P.getCenter(),Fn=Kt.x-w.width/2,Cn=Kt.y-w.height/2,Sn=Fn-b.x,Ln=Cn-b.y;(Sn!==0||Ln!==0)&&(f.translate(Sn,Ln,{snapped:!0,restrict:this.graph.hook.getRestrictArea(d)}),Qe&&(Qe+=Sn),ke&&(ke+=Ln)),this.update({verticalLeft:ge,verticalTop:_e,verticalHeight:ke,horizontalTop:Se,horizontalLeft:Ue,horizontalWidth:Qe})}}isIgnored(e,t){return t.id===e.id||t.isDescendantOf(e)||this.filterShapes[t.shape]||this.filterCells[t.id]||this.filterFunction&&er(this.filterFunction,this.graph,t)}update(e){if(e.horizontalTop){const t=this.graph.localToGraph(new Ve(e.horizontalLeft,e.horizontalTop)),o=this.graph.localToGraph(new Ve(e.horizontalLeft+e.horizontalWidth,e.horizontalTop));this.horizontal.setAttributes({x1:this.options.sharp?`${t.x}`:"0",y1:`${t.y}`,x2:this.options.sharp?`${o.x}`:"100%",y2:`${o.y}`,display:"inherit"})}else this.horizontal.setAttribute("display","none");if(e.verticalLeft){const t=this.graph.localToGraph(new Ve(e.verticalLeft,e.verticalTop)),o=this.graph.localToGraph(new Ve(e.verticalLeft,e.verticalTop+e.verticalHeight));this.vertical.setAttributes({x1:`${t.x}`,y1:this.options.sharp?`${t.y}`:"0",x2:`${o.x}`,y2:this.options.sharp?`${o.y}`:"100%",display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}resetTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}show(){return this.resetTimer(),this.container.parentNode==null&&this.graph.container.appendChild(this.container),this}hide(){this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");const e=this.options.clean,t=typeof e=="number"?e:e!==!1?3e3:0;return t>0&&(this.timer=window.setTimeout(()=>{this.container.parentNode!==null&&this.unmount()},t)),this}onRemove(){this.stopListening(),this.hide()}dispose(){this.remove()}}T3([Ai.dispose()],_A.prototype,"dispose",null);var H2=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Zi extends _o{init(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()}startListening(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}resetUpdates(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}}onSortModel(){this.model.hasActiveBatch(Zi.SORT_DELAYING_BATCHES)||this.sortViews()}onModelReseted({options:e}){this.removeZPivots(),this.resetViews(this.model.getCells(),e)}onBatchStop({name:e,data:t}){if(this.isFrozen())return;const o=this.model;if(!this.isAsync()){const d=Zi.UPDATE_DELAYING_BATCHES;d.includes(e)&&!o.hasActiveBatch(d)&&this.updateViews(t)}const c=Zi.SORT_DELAYING_BATCHES;c.includes(e)&&!o.hasActiveBatch(c)&&this.sortViews()}onCellAdded({cell:e,options:t}){const o=t.position;this.isAsync()||typeof o!="number"?this.renderView(e,t):(t.maxPosition===o&&this.freeze({key:"addCells"}),this.renderView(e,t),o===0&&this.unfreeze({key:"addCells"}))}onCellRemoved({cell:e,options:t}){const o=this.findViewByCell(e);o&&this.requestViewUpdate(o,Zi.FLAG_REMOVE,o.priority,t)}onCellZIndexChanged({cell:e,options:t}){if(this.options.sorting==="approx"){const o=this.findViewByCell(e);o&&this.requestViewUpdate(o,Zi.FLAG_INSERT,o.priority,t)}}onCellVisibleChanged({cell:e,current:t,options:o}){t||this.processEdgeOnTerminalVisibleChanged(e,!1);const c=this.findViewByCell(e);!t&&c?this.removeView(e):t&&c==null&&this.renderView(e,o),t&&this.processEdgeOnTerminalVisibleChanged(e,!0)}processEdgeOnTerminalVisibleChanged(e,t){const o=(c,d)=>c.getSourceCellId()!==d.id?c.getSourceCell():c.getTargetCellId()!==d.id?c.getTargetCell():null;this.model.getConnectedEdges(e).forEach(c=>{const d=o(c,e);(d==null||d.isVisible())&&(t?c.show():c.hide())})}isEdgeTerminalVisible(e,t){const o=t==="source"?e.getSourceCellId():e.getTargetCellId(),c=o?this.model.getCell(o):null;return!(c&&!c.isVisible())}requestConnectedEdgesUpdate(e,t={}){if(Gs.isCellView(e)){const o=e.cell,c=this.model.getConnectedEdges(o);for(let d=0,f=c.length;d<f;d+=1){const v=c[d],b=this.findViewByCell(v);if(!b)continue;const w=["update"];v.getTargetCell()===o&&w.push("target"),v.getSourceCell()===o&&w.push("source"),this.scheduleViewUpdate(b,b.getFlag(w),b.priority,t)}}}forcePostponedViewUpdate(e,t){if(!e||!Gs.isCellView(e))return!1;const o=e.cell;if(o.isNode())return!1;const c=e;if(o.isEdge()&&(t&e.getFlag(["source","target"]))===0){let d=0;const f=this.findViewByCell(o.getSourceCell());f&&!this.isViewMounted(f)&&(d=this.dumpView(f),c.updateTerminalMagnet("source"));let v=0;const b=this.findViewByCell(o.getTargetCell());if(b&&!this.isViewMounted(b)&&(v=this.dumpView(b),c.updateTerminalMagnet("target")),d===0&&v===0)return!this.dumpView(c)}return!1}scheduleViewUpdate(e,t,o,c={}){const d=e.cid,f=this.updates;let v=f.priorities[o];v||(v=f.priorities[o]={});const b=v[d]||0;(b&t)!==t&&(b||(f.count+=1),t&Zi.FLAG_REMOVE&&b&Zi.FLAG_INSERT?v[d]^=Zi.FLAG_INSERT:t&Zi.FLAG_INSERT&&b&Zi.FLAG_REMOVE&&(v[d]^=Zi.FLAG_REMOVE),v[d]|=t,this.graph.hook.onViewUpdated(e,t,c))}requestViewUpdate(e,t,o,c={}){this.scheduleViewUpdate(e,t,o,c);const d=this.isAsync();if(this.isFrozen()||d&&c.async!==!1||this.model.hasActiveBatch(Zi.UPDATE_DELAYING_BATCHES))return;const f=this.updateViews(c);d&&this.graph.trigger("render:done",{stats:f,options:c})}dumpView(e,t={}){if(e==null)return 0;const o=e.cid,d=this.updates.priorities[e.priority],f=this.registerMountedView(e)|d[o];return delete d[o],f?this.updateView(e,f,t):0}dumpViews(e={}){this.checkView(e),this.updateViews(e)}requireView(e,t={}){const o=this.findViewByCell(e);return o==null?null:(this.dumpView(o,t),o)}updateView(e,t,o={}){if(e==null)return 0;if(Gs.isCellView(e)){if(t&Zi.FLAG_REMOVE)return this.removeView(e.cell),0;t&Zi.FLAG_INSERT&&(this.insertView(e),t^=Zi.FLAG_INSERT)}return t?e.confirmUpdate(t,o):0}updateViews(e={}){let t,o=0,c=0,d=Zi.MIN_PRIORITY;do t=this.updateViewsBatch(e),o+=1,c+=t.updatedCount,d=Math.min(t.priority,d);while(!t.empty);return{priority:d,batchCount:o,updatedCount:c}}updateViewsBatch(e={}){const t=this.updates,o=t.priorities,c=e.batchSize||Zi.UPDATE_BATCH_SIZE;let d=!0,f=Zi.MIN_PRIORITY,v=0,b=0,w=0,_=0,A=e.checkView||this.options.checkView;typeof A!="function"&&(A=null);e:for(let P=0,V=o.length;P<V;P+=1){const q=o[P];for(const ee in q){if(w>=c){d=!1;break e}const ge=Ai.views[ee];if(!ge){delete q[ee];continue}let _e=q[ee];if((_e&Zi.FLAG_REMOVE)===0){const Ue=ee in t.unmounted;if(A&&!er(A,this.graph,{view:ge,unmounted:Ue})){Ue||(this.registerUnmountedView(ge),ge.unmount()),t.unmounted[ee]|=_e,delete q[ee],b+=1;continue}Ue&&(_e|=Zi.FLAG_INSERT,v+=1),_e|=this.registerMountedView(ge)}const ke=ge;let Se=this.updateView(ge,_e,e);if(Se>0){const Ue=ke.cell;Ue&&Ue.isEdge()&&(ke.hasAction(Se,"source")&&!this.isEdgeTerminalVisible(Ue,"source")&&(Se=ke.removeAction(Se,"source"),Se|=Zi.FLAG_REMOVE),ke.hasAction(Se,"target")&&!this.isEdgeTerminalVisible(Ue,"target")&&(Se=ke.removeAction(Se,"target"),Se|=Zi.FLAG_REMOVE))}if(Se>0&&(q[ee]=Se,!this.graph.hook.onViewPostponed(ke,Se,e)||q[ee])){_+=1,d=!1;continue}f>P&&(f=P),w+=1,delete q[ee]}}return{empty:d,priority:f,mountedCount:v,unmountedCount:b,updatedCount:w,postponedCount:_}}updateViewsAsync(e={},t={processed:0,priority:Zi.MIN_PRIORITY}){const o=this.updates,c=o.animationId;if(c){if(CC(c),t.processed===0){const P=e.before;typeof P=="function"&&er(P,this.graph,this.graph)}const d=this.updateViewsBatch(e),f=this.checkViewImpl({checkView:e.checkView,mountedBatchSize:Zi.MOUNT_BATCH_SIZE-d.mountedCount,unmountedBatchSize:Zi.MOUNT_BATCH_SIZE-d.unmountedCount});let v=t.processed;const b=o.count,w=f.mountedCount,_=f.unmountedCount;d.updatedCount>0&&(v+=d.updatedCount+d.unmountedCount,t.priority=Math.min(d.priority,t.priority),d.empty&&w===0?(d.priority=t.priority,d.mountedCount+=w,d.unmountedCount+=_,this.graph.trigger("render:done",{stats:d,options:e}),t.processed=0,o.count=0):t.processed=v);const A=e.progress;if(b&&typeof A=="function"&&er(A,this.graph,{total:b,done:d.empty,current:v}),o.animationId!==c)return}o.animationId=p2(()=>{this.updateViewsAsync(e,t)})}registerMountedView(e){const t=e.cid,o=this.updates;if(t in o.mounted)return 0;o.mounted[t]=!0,o.mountedCids.push(t);const c=o.unmounted[t]||0;return delete o.unmounted[t],c}registerUnmountedView(e){const t=e.cid,o=this.updates;if(t in o.unmounted)return 0;o.unmounted[t]|=Zi.FLAG_INSERT;const c=o.unmounted[t];return o.unmountedCids.push(t),delete o.mounted[t],c}isViewMounted(e){return e==null?!1:e.cid in this.updates.mounted}getMountedViews(){return Object.keys(this.updates.mounted).map(e=>Gs.views[e])}getUnmountedViews(){return Object.keys(this.updates.unmounted).map(e=>Gs.views[e])}checkMountedViews(e,t){let o=0;if(typeof e!="function")return o;const c=this.updates,d=c.mounted,f=c.mountedCids,v=t==null?f.length:Math.min(f.length,t);for(let b=0;b<v;b+=1){const w=f[b];if(!(w in d))continue;const _=Gs.views[w];if(_==null)continue;if(er(e,this.graph,{view:_,unmounted:!0})){f.push(w);continue}o+=1,this.registerUnmountedView(_)&&_.unmount()}return f.splice(0,v),o}checkUnmountedViews(e,t){let o=0;typeof e!="function"&&(e=null);const c=this.updates,d=c.unmounted,f=c.unmountedCids,v=t==null?f.length:Math.min(f.length,t);for(let b=0;b<v;b+=1){const w=f[b];if(!(w in d))continue;const _=Gs.views[w];if(_==null)continue;if(e&&!er(e,this.graph,{view:_,unmounted:!1})){f.push(w);continue}o+=1;const A=this.registerMountedView(_);A&&this.scheduleViewUpdate(_,A,_.priority,{mounting:!0})}return f.splice(0,v),o}checkViewImpl(e={mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER}){const t=e.checkView||this.options.checkView,o=this.checkMountedViews(t,e.unmountedBatchSize);return{mountedCount:this.checkUnmountedViews(t,o>0?Math.min(this.updates.unmountedCids.length-o,e.mountedBatchSize):e.mountedBatchSize),unmountedCount:o}}checkView(e={}){return this.checkViewImpl(e)}isFrozen(){return!!this.options.frozen}freeze(e={}){const t=e.key,o=this.updates,c=this.options.frozen,d=o.freezeKey;if(t&&t!==d){if(c&&d)return;o.frozen=c,o.freezeKey=t}this.options.frozen=!0;const f=o.animationId;o.animationId=null,this.isAsync()&&f!=null&&CC(f),this.graph.trigger("freeze",{key:t})}unfreeze(e={}){const t=e.key,o=this.updates,c=o.freezeKey;if(t&&c&&t!==c||(o.freezeKey=null,t&&t===c&&o.frozen))return;const d=()=>{this.options.frozen=o.frozen=!1,o.sort&&(this.sortViews(),o.sort=!1);const f=e.after;f&&er(f,this.graph,this.graph),this.graph.trigger("unfreeze",{key:t})};if(this.isAsync()){this.freeze();const f=e.progress;this.updateViewsAsync(Object.assign(Object.assign({},e),{progress:({done:v,current:b,total:w})=>{f&&er(f,this.graph,{done:v,current:b,total:w}),v&&d()}}))}else this.updateViews(e),d()}isAsync(){return!!this.options.async}setAsync(e){this.options.async=e}onRemove(){this.freeze(),this.removeViews()}resetViews(e=[],t={}){this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(let o=0,c=e.length;o<c;o+=1)this.renderView(e[o],t);this.unfreeze({key:"reset"}),this.sortViews()}removeView(e){const t=this.views[e.id];if(t){const o=t.cid,c=this.updates,d=c.mounted,f=c.unmounted;t.remove(),delete this.views[e.id],delete d[o],delete f[o]}return t}removeViews(){this.views&&Object.keys(this.views).forEach(e=>{const t=this.views[e];t&&this.removeView(t.cell)}),this.views={}}renderView(e,t={}){const o=e.id,c=this.views;let d=0,f=c[o];if(!!e.isVisible()&&!(e.isEdge()&&(!this.isEdgeTerminalVisible(e,"source")||!this.isEdgeTerminalVisible(e,"target")))){if(f)d=Zi.FLAG_INSERT;else{const v=this.graph.hook.createCellView(e);v&&(f=c[e.id]=v,f.graph=this.graph,d=this.registerUnmountedView(f)|f.getBootstrapFlag())}f&&this.requestViewUpdate(f,d,f.priority,t)}}isExactSorting(){return this.options.sorting==="exact"}sortViews(){if(!!this.isExactSorting()){if(this.isFrozen()){this.updates.sort=!0;return}this.sortViewsExact()}}sortElements(e,t){const o=e.map(c=>{const d=c.parentNode,f=d.insertBefore(document.createTextNode(""),c.nextSibling);return v=>{if(d===v)throw new Error("You can't sort elements if any one is a descendant of another.");d.insertBefore(v,f),d.removeChild(f)}});e.sort(t).forEach((c,d)=>o[d](c))}sortViewsExact(){const e=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),t=this.model;this.sortElements(e,(o,c)=>{const d=t.getCell(o.getAttribute("data-cell-id")||""),f=t.getCell(c.getAttribute("data-cell-id")||""),v=d.getZIndex()||0,b=f.getZIndex()||0;return v===b?0:v<b?-1:1})}addZPivot(e=0){this.zPivots==null&&(this.zPivots={});const t=this.zPivots;let o=t[e];if(o)return o;o=t[e]=document.createComment(`z-index:${e+1}`);let c=-1/0;for(const f in t){const v=+f;v<e&&v>c&&(c=v,e-1)}const d=this.view.stage;if(c!==-1/0){const f=t[c];d.insertBefore(o,f.nextSibling)}else d.insertBefore(o,d.firstChild);return o}removeZPivots(){this.zPivots&&Object.keys(this.zPivots).forEach(e=>{const t=this.zPivots[e];t&&t.parentNode&&t.parentNode.removeChild(t)}),this.zPivots={}}insertView(e){const t=this.view.stage;switch(this.options.sorting){case"approx":{const o=e.cell.getZIndex(),c=this.addZPivot(o);t.insertBefore(e.container,c);break}case"exact":default:t.appendChild(e.container);break}}findViewByCell(e){if(e==null)return null;const t=Ti.isCell(e)?e.id:e;return this.views[t]}findViewByElem(e){if(e==null)return null;const t=typeof e=="string"?this.view.stage.querySelector(e):e instanceof Element?e:e[0];if(t){const o=this.view.findAttr("data-cell-id",t);if(o)return this.views[o]}return null}findViewsFromPoint(e){const t={x:e.x,y:e.y};return this.model.getCells().map(o=>this.findViewByCell(o)).filter(o=>o!=null?Ta(o.container,{target:this.view.stage}).containsPoint(t):!1)}findEdgeViewsInArea(e,t={}){const o=Rn.create(e);return this.model.getEdges().map(c=>this.findViewByCell(c)).filter(c=>{if(c){const d=Ta(c.container,{target:this.view.stage});return d.width===0?d.inflate(1,0):d.height===0&&d.inflate(0,1),t.strict?o.containsRect(d):o.isIntersectWithRect(d)}return!1})}findViewsInArea(e,t={}){const o=Rn.create(e);return this.model.getNodes().map(c=>this.findViewByCell(c)).filter(c=>{if(c){const d=Ta(c.container,{target:this.view.stage});return t.strict?o.containsRect(d):o.isIntersectWithRect(d)}return!1})}dispose(){this.resetUpdates(),this.stopListening()}}H2([_o.dispose()],Zi.prototype,"dispose",null),function(l){l.FLAG_INSERT=1<<30,l.FLAG_REMOVE=1<<29,l.MOUNT_BATCH_SIZE=1e3,l.UPDATE_BATCH_SIZE=1e3,l.MIN_PRIORITY=2,l.SORT_DELAYING_BATCHES=["add","to-front","to-back"],l.UPDATE_DELAYING_BATCHES=["translate"]}(Zi||(Zi={}));var $2=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class h0 extends _o{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(e={}){let t=e.size||"auto auto",o=e.position||"center";const c=this.graph.transform.getScale(),d=this.graph.translate();if(typeof o=="object"){const f=d.tx+c.sx*(o.x||0),v=d.ty+c.sy*(o.y||0);o=`${f}px ${v}px`}typeof t=="object"&&(t=Rn.fromSize(t).scale(c.sx,c.sy),t=`${t.width}px ${t.height}px`),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=o}drawBackgroundImage(e,t={}){if(!(e instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}const o=this.optionsCache;if(o&&o.image!==t.image)return;let c;const d=t.opacity,f=t.size;let v=t.repeat||"no-repeat";const b=yv.registry.get(v);if(typeof b=="function"){const _=t.quality||1;e.width*=_,e.height*=_;const A=b(e,t);if(!(A instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");c=A.toDataURL("image/png"),t.repeat&&v!==t.repeat?v=t.repeat:v="repeat",typeof f=="object"?(f.width*=A.width/e.width,f.height*=A.height/e.height):f===void 0&&(t.size={width:A.width/_,height:A.height/_})}else c=e.src,f===void 0&&(t.size={width:e.width,height:e.height});o!=null&&typeof t.size=="object"&&t.image===o.image&&t.repeat===o.repeat&&t.quality===o.quality&&(o.size=$p(t.size));const w=this.elem.style;w.backgroundImage=`url(${c})`,w.backgroundRepeat=v,w.opacity=d==null||d>=1?"":`${d}`,this.updateBackgroundImage(t)}updateBackgroundColor(e){this.elem.style.backgroundColor=e||""}updateBackgroundOptions(e){this.graph.options.background=e}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(e){const t=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(t.color),t.image){this.optionsCache=$p(t);const o=document.createElement("img");o.onload=()=>this.drawBackgroundImage(o,e),o.setAttribute("crossorigin","anonymous"),o.src=t.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}$2([_o.dispose()],h0.prototype,"dispose",null);var Ay=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},W2=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class uf extends Ai{constructor(e){super(),this.padding={left:0,top:0,right:0,bottom:0},this.options=Al.getOptions(e);const t=this.graph.transform.getScale();this.sx=t.sx,this.sy=t.sy;const o=this.options.width||this.graph.options.width,c=this.options.height||this.graph.options.height;this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(Al.containerClass)).css({width:o,height:c}),this.options.pageVisible&&this.$container.addClass(this.prefixClassName(Al.pagedClass)),this.options.className&&this.$container.addClass(this.options.className);const d=this.graph.container;d.parentNode&&this.$container.insertBefore(d);const f=d.getAttribute("style");if(f){const v={};f.split(";").forEach(w=>{const _=w.trim();if(_){const A=_.split(":");A.length&&(v[A[0].trim()]=A[1]?A[1].trim():"")}}),Object.keys(v).forEach(w=>{w==="width"||w==="height"||(d.style[w]="",this.container.style[w]=v[w])})}this.content=document.createElement("div"),this.$content=this.$(this.content).addClass(this.prefixClassName(Al.contentClass)).css({width:this.graph.options.width,height:this.graph.options.height}),this.background=document.createElement("div"),this.$background=this.$(this.background).addClass(this.prefixClassName(Al.backgroundClass)),this.$content.append(this.background),this.options.pageVisible||this.$content.append(this.graph.view.grid),this.$content.append(d),this.$content.appendTo(this.container),this.startListening(),this.options.pageVisible||this.graph.grid.update(),this.backgroundManager=new uf.Background(this),this.options.autoResize||this.update()}get graph(){return this.options.graph}get model(){return this.graph.model}startListening(){const e=this.graph,t=this.model;e.on("scale",this.onScale,this),e.on("resize",this.onResize,this),e.on("before:print",this.storeScrollPosition,this),e.on("before:export",this.storeScrollPosition,this),e.on("after:print",this.restoreScrollPosition,this),e.on("after:export",this.restoreScrollPosition,this),e.on("render:done",this.onRenderDone,this),e.on("unfreeze",this.onUpdate,this),t.on("reseted",this.onUpdate,this),t.on("cell:added",this.onUpdate,this),t.on("cell:removed",this.onUpdate,this),t.on("cell:changed",this.onUpdate,this),t.on("batch:stop",this.onBatchStop,this),this.delegateBackgroundEvents()}stopListening(){const e=this.graph,t=this.model;e.off("scale",this.onScale,this),e.off("resize",this.onResize,this),e.off("beforeprint",this.storeScrollPosition,this),e.off("beforeexport",this.storeScrollPosition,this),e.off("afterprint",this.restoreScrollPosition,this),e.off("afterexport",this.restoreScrollPosition,this),e.off("render:done",this.onRenderDone,this),e.off("unfreeze",this.onUpdate,this),t.off("reseted",this.onUpdate,this),t.off("cell:added",this.onUpdate,this),t.off("cell:removed",this.onUpdate,this),t.off("cell:changed",this.onUpdate,this),t.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()}enableAutoResize(){this.options.autoResize=!0}disableAutoResize(){this.options.autoResize=!1}onUpdate(){this.graph.isAsync()||!this.options.autoResize||this.update()}onBatchStop(e){this.graph.isAsync()||!this.options.autoResize||Zi.UPDATE_DELAYING_BATCHES.includes(e.name)&&this.update()}delegateBackgroundEvents(e){const t=e||bh.events;this.delegatedHandlers=Object.keys(t).reduce((o,c)=>{const d=t[c];if(c.indexOf(" ")===-1)if(typeof d=="function")o[c]=d;else{let f=this.graph.view[d];typeof f=="function"&&(f=f.bind(this.graph.view),o[c]=f)}return o},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(o=>{this.delegateEvent(o,{guarded:!1},this.onBackgroundEvent)})}undelegateBackgroundEvents(){Object.keys(this.delegatedHandlers).forEach(e=>{this.undelegateEvent(e,this.onBackgroundEvent)})}onBackgroundEvent(e){let t=!1;const o=e.target;if(this.options.pageVisible)this.options.background?t=this.background===o:t=this.content===o;else{const c=this.graph.view;t=c.background===o||c.grid===o}if(t){const c=this.delegatedHandlers[e.type];typeof c=="function"&&c.apply(this.graph,arguments)}}onRenderDone({stats:e}){this.options.autoResize&&e.priority<2&&this.update()}onResize(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}onScale({sx:e,sy:t,ox:o,oy:c}){this.updateScale(e,t),(o||c)&&(this.centerPoint(o,c),this.updatePageBreak()),typeof(this.options.autoResizeOptions||this.options.fitTocontentOptions)=="function"&&this.update()}storeScrollPosition(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}restoreScrollPosition(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}storeClientSize(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}}restoreClientSize(){this.cachedClientSize=null}beforeManipulation(){(Qn.IS_IE||Qn.IS_EDGE)&&this.$container.css("visibility","hidden")}afterManipulation(){(Qn.IS_IE||Qn.IS_EDGE)&&this.$container.css("visibility","visible")}updatePageSize(e,t){e!=null&&(this.options.pageWidth=e),t!=null&&(this.options.pageHeight=t),this.updatePageBreak()}updatePageBreak(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){const e=this.graph.options.width,t=this.graph.options.height,o=this.options.pageWidth*this.sx,c=this.options.pageHeight*this.sy;if(o===0||c===0)return;if(e>o||t>c){let d=!1;const f=document.createElement("div");for(let v=1,b=Math.floor(e/o);v<b;v+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:v*o}).appendTo(f),d=!0;for(let v=1,b=Math.floor(t/c);v<b;v+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:v*c}).appendTo(f),d=!0;d&&(co(f,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(f),this.pageBreak=f)}}}update(){const e=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(e.width/2,e.height/2);let t=this.options.autoResizeOptions||this.options.fitTocontentOptions;typeof t=="function"&&(t=er(t,this,this));const o=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative",contentArea:this.calcContextArea(t)},t);this.graph.fitToContent(this.getFitToContentOptions(o))}calcContextArea(e){const t=e?.direction;if(!t)return this.graph.transform.getContentArea(e);function o(v){let b=v.getBBox();if(b&&v.isNode()){const w=v.getAngle();w!=null&&w!==0&&(b=b.bbox(w))}return b}const c=this.options.pageWidth||1,d=this.options.pageHeight||1;let f=this.graph.getCells();return t.includes("top")||(f=f.filter(v=>o(v).y>=0)),t.includes("left")||(f=f.filter(v=>o(v).x>=0)),t.includes("right")||(f=f.filter(v=>{const b=o(v);return b.x+b.width<=c})),t.includes("bottom")||(f=f.filter(v=>{const b=o(v);return b.y+b.height<=d})),this.model.getCellsBBox(f)||new Rn}getFitToContentOptions(e){const t=this.sx,o=this.sy;return e.gridWidth&&(e.gridWidth*=t),e.gridHeight&&(e.gridHeight*=o),e.minWidth&&(e.minWidth*=t),e.minHeight&&(e.minHeight*=o),typeof e.padding=="object"?e.padding={left:(e.padding.left||0)*t,right:(e.padding.right||0)*t,top:(e.padding.top||0)*o,bottom:(e.padding.bottom||0)*o}:typeof e.padding=="number"&&(e.padding*=t),this.options.autoResize||(e.contentArea=Rn.create()),e}updateScale(e,t){const o=this.graph.options,c=e/this.sx,d=t/this.sy;this.sx=e,this.sy=t,this.graph.translate(o.x*c,o.y*d),this.graph.resizeGraph(o.width*c,o.height*d)}scrollbarPosition(e,t,o){if(e==null&&t==null)return{left:this.container.scrollLeft,top:this.container.scrollTop};const c={};return typeof e=="number"&&(c.scrollLeft=e),typeof t=="number"&&(c.scrollTop=t),o&&o.animation?this.$container.animate(c,o.animation):this.$container.prop(c),this}scrollToPoint(e,t,o){const c=this.getClientSize(),d=this.graph.matrix(),f={};return typeof e=="number"&&(f.scrollLeft=e-c.width/2+d.e+(this.padding.left||0)),typeof t=="number"&&(f.scrollTop=t-c.height/2+d.f+(this.padding.top||0)),o&&o.animation?this.$container.animate(f,o.animation):this.$container.prop(f),this}scrollToContent(e){const t=this.sx,o=this.sy,c=this.graph.getContentArea().getCenter();return this.scrollToPoint(c.x*t,c.y*o,e)}scrollToCell(e,t){const o=this.sx,c=this.sy,d=e.getBBox().getCenter();return this.scrollToPoint(d.x*o,d.y*c,t)}center(e){return this.centerPoint(e)}centerPoint(e,t,o){const c=this.graph.matrix(),d=c.a,f=c.d,v=-c.e,b=-c.f,w=v+this.graph.options.width,_=b+this.graph.options.height;let A;if(this.storeClientSize(),typeof e=="number"||typeof t=="number"){A=o;const Qe=this.getVisibleArea().getCenter();typeof e=="number"?e*=d:e=Qe.x,typeof t=="number"?t*=f:t=Qe.y}else A=e,e=(v+w)/2,t=(b+_)/2;if(A&&A.padding)return this.positionPoint({x:e,y:t},"50%","50%",A);const P=this.getPadding(),V=this.getClientSize(),q=V.width/2,ee=V.height/2,ge=q-P.left-e+v,_e=q-P.right+e-w,ke=ee-P.top-t+b,Se=ee-P.bottom+t-_;this.addPadding(Math.max(ge,0),Math.max(_e,0),Math.max(ke,0),Math.max(Se,0));const Ue=this.scrollToPoint(e,t,A||void 0);return this.restoreClientSize(),Ue}centerContent(e){return this.positionContent("center",e)}centerCell(e,t){return this.positionCell(e,"center",t)}positionContent(e,t){const o=this.graph.getContentArea(t);return this.positionRect(o,e,t)}positionCell(e,t,o){const c=e.getBBox();return this.positionRect(c,t,o)}positionRect(e,t,o){const c=Rn.create(e);switch(t){case"center":return this.positionPoint(c.getCenter(),"50%","50%",o);case"top":return this.positionPoint(c.getTopCenter(),"50%",0,o);case"top-right":return this.positionPoint(c.getTopRight(),"100%",0,o);case"right":return this.positionPoint(c.getRightMiddle(),"100%","50%",o);case"bottom-right":return this.positionPoint(c.getBottomRight(),"100%","100%",o);case"bottom":return this.positionPoint(c.getBottomCenter(),"50%","100%",o);case"bottom-left":return this.positionPoint(c.getBottomLeft(),0,"100%",o);case"left":return this.positionPoint(c.getLeftMiddle(),0,"50%",o);case"top-left":return this.positionPoint(c.getTopLeft(),0,0,o);default:return this}}positionPoint(e,t,o,c={}){const{padding:d}=c,f=W2(c,["padding"]),v=wl(d),b=Rn.fromSize(this.getClientSize()),w=b.clone().moveAndExpand({x:v.left,y:v.top,width:-v.right-v.left,height:-v.top-v.bottom});t=md(t,Math.max(0,w.width)),t<0&&(t=w.width+t),o=md(o,Math.max(0,w.height)),o<0&&(o=w.height+o);const _=w.getTopLeft().translate(t,o),A=b.getCenter().diff(_),P=this.zoom(),V=A.scale(1/P,1/P),q=Ve.create(e).translate(V);return this.centerPoint(q.x,q.y,f)}zoom(e,t){if(e==null)return this.sx;t=t||{};let o,c;const d=this.getClientSize(),f=this.clientToLocalPoint(d.width/2,d.height/2);let v=e,b=e;if(t.absolute||(v+=this.sx,b+=this.sy),t.scaleGrid&&(v=Math.round(v/t.scaleGrid)*t.scaleGrid,b=Math.round(b/t.scaleGrid)*t.scaleGrid),t.maxScale&&(v=Math.min(t.maxScale,v),b=Math.min(t.maxScale,b)),t.minScale&&(v=Math.max(t.minScale,v),b=Math.max(t.minScale,b)),v=this.graph.transform.clampScale(v),b=this.graph.transform.clampScale(b),t.center){const w=v/this.sx,_=b/this.sy;o=t.center.x-(t.center.x-f.x)/w,c=t.center.y-(t.center.y-f.y)/_}else o=f.x,c=f.y;return this.beforeManipulation(),this.graph.transform.scale(v,b),this.centerPoint(o,c),this.afterManipulation(),this}zoomToRect(e,t={}){const o=Rn.create(e),c=this.graph;t.contentArea=o,t.viewportArea==null&&(t.viewportArea={x:c.options.x,y:c.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),c.transform.scaleContentToFitImpl(t,!1);const d=o.getCenter();return this.centerPoint(d.x,d.y),this.afterManipulation(),this}zoomToFit(e={}){return this.zoomToRect(this.graph.getContentArea(e),e)}transitionToPoint(e,t,o){typeof e=="object"?(o=t,t=e.y,e=e.x):t=t,o==null&&(o={});let c,d;const f=this.sx,v=Math.max(o.scale||f,1e-6),b=this.getClientSize(),w=new Ve(e,t),_=this.clientToLocalPoint(b.width/2,b.height/2);if(f===v){const P=_.diff(w).scale(f,f).round();c=`translate(${P.x}px,${P.y}px)`}else{const P=v/(f-v)*w.distance(_),V=_.clone().move(w,P),q=this.localToBackgroundPoint(V).round();c=`scale(${v/f})`,d=`${q.x}px ${q.y}px`}const A=o.onTransitionEnd;return this.$container.addClass(Al.transitionClassName),this.$content.off(Al.transitionEventName).on(Al.transitionEventName,P=>{this.syncTransition(v,{x:e,y:t}),typeof A=="function"&&er(A,this,P.originalEvent)}).css({transform:c,transformOrigin:d,transition:"transform",transitionDuration:o.duration||"1s",transitionDelay:o.delay,transitionTimingFunction:o.timing}),this}syncTransition(e,t){return this.beforeManipulation(),this.graph.scale(e),this.removeTransition(),this.centerPoint(t.x,t.y),this.afterManipulation(),this}removeTransition(){return this.$container.removeClass(Al.transitionClassName),this.$content.off(Al.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}transitionToRect(e,t={}){const o=Rn.create(e),c=t.maxScale||1/0,d=t.minScale||Number.MIN_VALUE,f=t.scaleGrid||null,v=t.visibility||1,b=t.center?Ve.create(t.center):o.getCenter(),w=this.getClientSize(),_=w.width*v,A=w.height*v;let P=new Rn(b.x-_/2,b.y-A/2,_,A).getMaxUniformScaleToFit(o,b);return P=Math.min(P,c),f&&(P=Math.floor(P/f)*f),P=Math.max(d,P),this.transitionToPoint(b,Object.assign({scale:P},t))}startPanning(e){const t=this.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.normalizeEvent(e),o=t.clientX-this.clientX,c=t.clientY-this.clientY;this.container.scrollTop-=c,this.container.scrollLeft-=o,this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("panning",{e:t})}stopPanning(e){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e})}clientToLocalPoint(e,t){let o=typeof e=="object"?e.x:e,c=typeof e=="object"?e.y:t;const d=this.graph.matrix();return o+=this.container.scrollLeft-this.padding.left-d.e,c+=this.container.scrollTop-this.padding.top-d.f,new Ve(o/d.a,c/d.d)}localToBackgroundPoint(e,t){const o=typeof e=="object"?Ve.create(e):new Ve(e,t),c=this.graph.matrix(),d=this.padding;return wd(o,c).translate(d.left,d.top)}resize(e,t){let o=e??this.container.offsetWidth,c=t??this.container.offsetHeight;typeof o=="number"&&(o=Math.round(o)),typeof c=="number"&&(c=Math.round(c)),this.options.width=o,this.options.height=c,this.$container.css({width:o,height:c}),this.update()}getClientSize(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}}autoScroll(e,t){const c=this.container,d=c.getBoundingClientRect();let f=0,v=0;return e<=d.left+10&&(f=-10),t<=d.top+10&&(v=-10),e>=d.right-10&&(f=10),t>=d.bottom-10&&(v=10),f!==0&&(c.scrollLeft+=f),v!==0&&(c.scrollTop+=v),{scrollerX:f,scrollerY:v}}addPadding(e,t,o,c){let d=this.getPadding();this.padding={left:Math.round(d.left+(e||0)),top:Math.round(d.top+(o||0)),bottom:Math.round(d.bottom+(c||0)),right:Math.round(d.right+(t||0))},d=this.padding,this.$content.css({width:d.left+this.graph.options.width+d.right,height:d.top+this.graph.options.height+d.bottom});const f=this.graph.container;return f.style.left=`${this.padding.left}px`,f.style.top=`${this.padding.top}px`,this}getPadding(){const e=this.options.padding;return wl(typeof e=="function"?er(e,this,this):e)}getVisibleArea(){const e=this.graph.matrix(),t=this.getClientSize(),o={x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:t.width,height:t.height},c=tl(o,e.inverse());return c.x-=(this.padding.left||0)/this.sx,c.y-=(this.padding.top||0)/this.sy,c}isCellVisible(e,t={}){const o=e.getBBox(),c=this.getVisibleArea();return t.strict?c.containsRect(o):c.isIntersectWithRect(o)}isPointVisible(e){return this.getVisibleArea().containsPoint(e)}lock(){return this.$container.css("overflow","hidden"),this}unlock(){return this.$container.css("overflow","scroll"),this}onRemove(){this.stopListening()}dispose(){this.$(this.graph.container).insertBefore(this.$container),this.remove()}}Ay([Ai.dispose()],uf.prototype,"dispose",null),function(l){class e extends h0{constructor(o){super(o.graph),this.scroller=o,o.options.background&&this.draw(o.options.background)}get elem(){return this.scroller.background}init(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}updateBackgroundOptions(o){this.scroller.options.background=o}}l.Background=e}(uf||(uf={}));var Al;(function(l){l.containerClass="graph-scroller",l.panningClass=`${l.containerClass}-panning`,l.pannableClass=`${l.containerClass}-pannable`,l.pagedClass=`${l.containerClass}-paged`,l.contentClass=`${l.containerClass}-content`,l.backgroundClass=`${l.containerClass}-background`,l.transitionClassName="transition-in-progress",l.transitionEventName="transitionend.graph-scroller-transition",l.defaultOptions={padding(){const t=this.getClientSize(),o=Math.max(this.options.minVisibleWidth||0,1)||1,c=Math.max(this.options.minVisibleHeight||0,1)||1,d=Math.max(t.width-o,0),f=Math.max(t.height-c,0);return{left:d,top:f,right:d,bottom:f}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0};function e(t){const o=wo({},l.defaultOptions,t);return o.pageWidth==null&&(o.pageWidth=t.graph.options.width),o.pageHeight==null&&(o.pageHeight=t.graph.options.height),o}l.getOptions=e})(Al||(Al={}));function Hs(l,e,t,o={}){if(t){const c=t.graph,d=c.view.normalizeEvent(e),f=c.snapToGrid(d.clientX,d.clientY);t.notify(l,Object.assign({e:d,view:t,node:t.cell,cell:t.cell,x:f.x,y:f.y},o))}}var Ty=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class f0 extends Ai{constructor(e){super(),this.options=wo({},xc.defaultOptions,e),this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new vw([],{comparator:xc.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.initHandles(),this.startListening()}get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName(xc.classNames.box)}get $boxes(){return this.$container.children(`.${this.boxClassName}`)}get handleOptions(){return this.options}startListening(){const e=this.graph,t=this.collection;this.delegateEvents({[`mousedown .${this.boxClassName}`]:"onSelectionBoxMouseDown",[`touchstart .${this.boxClassName}`]:"onSelectionBoxMouseDown"},!0),e.on("scale",this.onGraphTransformed,this),e.on("translate",this.onGraphTransformed,this),e.model.on("updated",this.onModelUpdated,this),t.on("added",this.onCellAdded,this),t.on("removed",this.onCellRemoved,this),t.on("reseted",this.onReseted,this),t.on("updated",this.onCollectionUpdated,this),t.on("node:change:position",this.onNodePositionChanged,this),t.on("cell:changed",this.onCellChanged,this)}stopListening(){const e=this.graph,t=this.collection;this.undelegateEvents(),e.off("scale",this.onGraphTransformed,this),e.off("translate",this.onGraphTransformed,this),e.model.off("updated",this.onModelUpdated,this),t.off("added",this.onCellAdded,this),t.off("removed",this.onCellRemoved,this),t.off("reseted",this.onReseted,this),t.off("updated",this.onCollectionUpdated,this),t.off("node:change:position",this.onNodePositionChanged,this),t.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes({async:!1})}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged({node:e,options:t}){const{showNodeSelectionBox:o,pointerEvents:c}=this.options,{ui:d,selection:f,translateBy:v,snapped:b}=t,w=(o!==!0||c==="none")&&!this.translating&&!f,_=d&&v&&e.id===v;if(w&&(_||b)){this.translating=!0;const A=e.position(),P=e.previous("position"),V=A.x-P.x,q=A.y-P.y;(V!==0||q!==0)&&this.translateSelectedNodes(V,q,e,t),this.translating=!1}}onModelUpdated({removed:e}){e&&e.length&&this.unselect(e)}isEmpty(){return this.length<=0}isSelected(e){return this.collection.has(e)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(e,t={}){t.dryrun=!0;const o=this.filter(Array.isArray(e)?e:[e]);return this.collection.add(o,t),this}unselect(e,t={}){return t.dryrun=!0,this.collection.remove(Array.isArray(e)?e:[e],t),this}reset(e,t={}){if(e){if(t.batch){const w=this.filter(Array.isArray(e)?e:[e]);return this.collection.reset(w,Object.assign(Object.assign({},t),{ui:!0})),this}const o=this.cells,c=this.filter(Array.isArray(e)?e:[e]),d={},f={};o.forEach(w=>d[w.id]=w),c.forEach(w=>f[w.id]=w);const v=[],b=[];return c.forEach(w=>{d[w.id]||v.push(w)}),o.forEach(w=>{f[w.id]||b.push(w)}),b.length&&this.unselect(b,Object.assign(Object.assign({},t),{ui:!0})),v.length&&this.select(v,Object.assign(Object.assign({},t),{ui:!0})),b.length===0&&v.length===0&&this.updateContainer(),this}return this.clean(t)}clean(e={}){return this.length&&(e.batch===!1?this.unselect(this.cells,e):this.collection.reset([],Object.assign(Object.assign({},e),{ui:!0}))),this}setFilter(e){this.options.filter=e}setContent(e){this.options.content=e}startSelecting(e){e=this.normalizeEvent(e),this.clean();let t,o;const c=this.graph.container;if(e.offsetX!=null&&e.offsetY!=null&&c.contains(e.target))t=e.offsetX,o=e.offsetY;else{const d=this.$(c).offset(),f=c.scrollLeft,v=c.scrollTop;t=e.clientX-d.left+window.pageXOffset+f,o=e.clientY-d.top+window.pageYOffset+v}this.$container.css({top:o,left:t,width:1,height:1}),this.setEventData(e,{action:"selecting",clientX:e.clientX,clientY:e.clientY,offsetX:t,offsetY:o,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(xc.documentEvents,e.data)}filter(e){const t=this.options.filter;return Array.isArray(t)?e.filter(o=>!t.includes(o)&&!t.includes(o.shape)):typeof t=="function"?e.filter(o=>er(t,this.graph,o)):e}stopSelecting(e){const t=this.graph,o=this.getEventData(e);switch(o.action){case"selecting":{let d=this.$container.width(),f=this.$container.height();const v=this.$container.offset(),b=t.pageToLocal(v.left,v.top),w=t.transform.getScale();d/=w.sx,f/=w.sy;const _=new Rn(b.x,b.y,d,f),A=this.getCellViewsInArea(_).map(P=>P.cell);this.reset(A,{batch:!0}),this.hideRubberband();break}case"translating":{const d=t.snapToGrid(e.clientX,e.clientY);if(!this.options.following){const f=o;this.updateSelectedNodesPosition({dx:f.clientX-f.originX,dy:f.clientY-f.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",e,d.x,d.y);break}default:{this.clean();break}}}onMouseUp(e){this.getEventData(e).action&&(this.stopSelecting(e),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(e){this.options.following||e.stopPropagation();const t=this.normalizeEvent(e);this.options.movable&&this.startTranslating(t);const o=this.getCellViewFromElem(t.target);this.setEventData(t,{activeView:o});const c=this.graph.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mousedown",t,c.x,c.y),this.delegateDocumentEvents(xc.documentEvents,t.data)}startTranslating(e){this.graph.model.startBatch("move-selection");const t=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{action:"translating",clientX:t.x,clientY:t.y,originX:t.x,originY:t.y})}getSelectionOffset(e,t){let o=e.x-t.clientX,c=e.y-t.clientY;const d=this.graph.hook.getRestrictArea();if(d){const f=this.collection.toArray(),v=Ti.getCellsBBox(f,{deep:!0})||Rn.create(),b=d.x-v.x,w=d.y-v.y,_=d.x+d.width-(v.x+v.width),A=d.y+d.height-(v.y+v.height);if(o<b&&(o=b),c<w&&(c=w),_<o&&(o=_),A<c&&(c=A),!this.options.following){const P=e.x-t.originX,V=e.y-t.originY;o=P<=b||P>=_?0:o,c=V<=w||V>=A?0:c}}return{dx:o,dy:c}}updateSelectedNodesPosition(e){const{dx:t,dy:o}=e;if(t||o)if(this.translateSelectedNodes(t,o),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const c=this.graph.transform.getScale();this.$boxes.add(this.$selectionContainer).css({left:`+=${t*c.sx}`,top:`+=${o*c.sy}`})}}autoScrollGraph(e,t){const o=this.graph.scroller.widget;return o?o.autoScroll(e,t):{scrollerX:0,scrollerY:0}}adjustSelection(e){const t=this.normalizeEvent(e),o=this.getEventData(t);switch(o.action){case"selecting":{const d=o;d.moving!==!0&&(this.$container.appendTo(this.graph.container),this.showRubberband(),d.moving=!0);const{scrollerX:f,scrollerY:v}=this.autoScrollGraph(t.clientX,t.clientY);d.scrollerX+=f,d.scrollerY+=v;const b=t.clientX-d.clientX+d.scrollerX,w=t.clientY-d.clientY+d.scrollerY,_=parseInt(this.$container.css("left"),10),A=parseInt(this.$container.css("top"),10);this.$container.css({left:b<0?d.offsetX+b:_,top:w<0?d.offsetY+w:A,width:Math.abs(b),height:Math.abs(w)});break}case"translating":{const d=this.graph.snapToGrid(t.clientX,t.clientY),f=o,v=this.getSelectionOffset(d,f);this.options.following?this.updateSelectedNodesPosition(v):this.updateContainerPosition(v),v.dx&&(f.clientX=d.x),v.dy&&(f.clientY=d.y),this.notifyBoxEvent("box:mousemove",e,d.x,d.y);break}default:break}this.boxesUpdated=!1}translateSelectedNodes(e,t,o,c){const d={},f=[];if(o&&(d[o.id]=!0),this.collection.toArray().forEach(v=>{v.getDescendants({deep:!0}).forEach(b=>{d[b.id]=!0})}),c&&c.translateBy){const v=this.graph.getCellById(c.translateBy);v&&(d[v.id]=!0,v.getDescendants({deep:!0}).forEach(b=>{d[b.id]=!0}),f.push(v))}this.collection.toArray().forEach(v=>{if(!d[v.id]){const b=Object.assign(Object.assign({},c),{selection:this.cid,exclude:f});v.translate(e,t,b),this.graph.model.getConnectedEdges(v).forEach(w=>{d[w.id]||(w.translate(e,t,b),d[w.id]=!0)})}})}getCellViewsInArea(e){const t=this.graph,o={strict:this.options.strict};let c=[];return this.options.rubberNode&&(this.options.useCellGeometry?c=c.concat(t.model.getNodesInArea(e,o).map(d=>t.renderer.findViewByCell(d)).filter(d=>d!=null)):c=c.concat(t.renderer.findViewsInArea(e,o))),this.options.rubberEdge&&(this.options.useCellGeometry?c=c.concat(t.model.getEdgesInArea(e,o).map(d=>t.renderer.findViewByCell(d)).filter(d=>d!=null)):c=c.concat(t.renderer.findEdgeViewsInArea(e,o))),c}notifyBoxEvent(e,t,o,c){const f=this.getEventData(t).activeView;this.trigger(e,{e:t,view:f,x:o,y:c,cell:f.cell})}getSelectedClassName(e){return this.prefixClassName(`${e.isNode()?"node":"edge"}-selected`)}addCellSelectedClassName(e){const t=this.graph.renderer.findViewByCell(e);t&&t.addClass(this.getSelectedClassName(e))}removeCellUnSelectedClassName(e){const t=this.graph.renderer.findViewByCell(e);t&&t.removeClass(this.getSelectedClassName(e))}destroySelectionBox(e){this.removeCellUnSelectedClassName(e),this.canShowSelectionBox(e)&&(this.$container.find(`[data-cell-id="${e.id}"]`).remove(),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(e){e.forEach(t=>this.removeCellUnSelectedClassName(t)),this.hide(),this.$boxes.remove(),this.boxCount=0}hide(){this.$container.removeClass(this.prefixClassName(xc.classNames.rubberband)).removeClass(this.prefixClassName(xc.classNames.selected))}showRubberband(){this.$container.addClass(this.prefixClassName(xc.classNames.rubberband))}hideRubberband(){this.$container.removeClass(this.prefixClassName(xc.classNames.rubberband))}showSelected(){this.$container.removeAttr("style").addClass(this.prefixClassName(xc.classNames.selected))}createContainer(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(xc.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(xc.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(xc.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer}updateContainerPosition(e){(e.dx||e.dy)&&this.$selectionContainer.css({left:`+=${e.dx}`,top:`+=${e.dy}`})}updateContainer(){const e={x:1/0,y:1/0},t={x:0,y:0};this.collection.toArray().filter(d=>this.canShowSelectionBox(d)).forEach(d=>{const f=this.graph.renderer.findViewByCell(d);if(f){const v=f.getBBox({useCellGeometry:this.options.useCellGeometry});e.x=Math.min(e.x,v.x),e.y=Math.min(e.y,v.y),t.x=Math.max(t.x,v.x+v.width),t.y=Math.max(t.y,v.y+v.height)}}),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:e.x,top:e.y,width:t.x-e.x,height:t.y-e.y}).attr("data-selection-length",this.collection.length);const c=this.options.content;if(c)if(typeof c=="function"){const d=er(c,this.graph,this,this.$selectionContent[0]);d&&this.$selectionContent.html(d)}else this.$selectionContent.html(c);this.collection.length>0&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(e){return e.isNode()&&this.options.showNodeSelectionBox===!0||e.isEdge()&&this.options.showEdgeSelectionBox===!0}createSelectionBox(e){if(this.addCellSelectedClassName(e),this.canShowSelectionBox(e)){const t=this.graph.renderer.findViewByCell(e);if(t){const o=t.getBBox({useCellGeometry:this.options.useCellGeometry}),c=this.boxClassName;this.$("<div/>").addClass(c).addClass(`${c}-${e.isNode()?"node":"edge"}`).attr("data-cell-id",e.id).css({position:"absolute",left:o.x,top:o.y,width:o.width,height:o.height,pointerEvents:this.options.pointerEvents||"auto"}).appendTo(this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(e={}){this.collection.length>0&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,e))}confirmUpdate(){return this.boxCount&&(this.hide(),this.$boxes.each((e,t)=>{const o=this.$(t).remove().attr("data-cell-id"),c=this.collection.get(o);c&&this.createSelectionBox(c)}),this.updateContainer()),0}getCellViewFromElem(e){const t=e.getAttribute("data-cell-id");if(t){const o=this.collection.get(t);if(o)return this.graph.renderer.findViewByCell(o)}return null}onCellRemoved({cell:e}){this.destroySelectionBox(e),this.updateContainer()}onReseted({previous:e,current:t}){this.destroyAllSelectionBoxes(e),t.forEach(o=>{this.listenCellRemoveEvent(o),this.createSelectionBox(o)}),this.updateContainer()}onCellAdded({cell:e}){this.listenCellRemoveEvent(e),this.createSelectionBox(e),this.updateContainer()}listenCellRemoveEvent(e){e.off("removed",this.onCellRemoved,this),e.on("removed",this.onCellRemoved,this)}onCollectionUpdated({added:e,removed:t,options:o}){e.forEach(d=>{this.trigger("cell:selected",{cell:d,options:o}),this.graph.trigger("cell:selected",{cell:d,options:o}),d.isNode()?(this.trigger("node:selected",{cell:d,options:o,node:d}),this.graph.trigger("node:selected",{cell:d,options:o,node:d})):d.isEdge()&&(this.trigger("edge:selected",{cell:d,options:o,edge:d}),this.graph.trigger("edge:selected",{cell:d,options:o,edge:d}))}),t.forEach(d=>{this.trigger("cell:unselected",{cell:d,options:o}),this.graph.trigger("cell:unselected",{cell:d,options:o}),d.isNode()?(this.trigger("node:unselected",{cell:d,options:o,node:d}),this.graph.trigger("node:unselected",{cell:d,options:o,node:d})):d.isEdge()&&(this.trigger("edge:unselected",{cell:d,options:o,edge:d}),this.graph.trigger("edge:unselected",{cell:d,options:o,edge:d}))});const c={added:e,removed:t,options:o,selected:this.cells.filter(d=>!!this.graph.getCellById(d.id))};this.trigger("selection:changed",c),this.graph.trigger("selection:changed",c)}deleteSelectedCells(){const e=this.collection.toArray();this.clean(),this.graph.model.removeCells(e,{selection:this.cid})}startRotate({e}){const t=this.collection.toArray(),o=Ti.getCellsBBox(t).getCenter(),c=this.graph.snapToGrid(e.clientX,e.clientY),d=t.reduce((f,v)=>(f[v.id]=ki.normalize(v.getAngle()),f),{});this.setEventData(e,{center:o,angles:d,start:c.theta(o)})}doRotate({e}){const t=this.getEventData(e),o=this.graph.options.rotating.grid,c=typeof o=="function"?er(o,this.graph,null):o,d=this.graph.snapToGrid(e.clientX,e.clientY),f=t.start-d.theta(t.center);t.rotated||(t.rotated=!0),Math.abs(f)>.001&&(this.collection.toArray().forEach(v=>{const b=ha.snapToGrid(t.angles[v.id]+f,c||15);v.rotate(b,{absolute:!0,center:t.center,selection:this.cid})}),this.updateSelectionBoxes())}stopRotate({e}){const t=this.getEventData(e);t.rotated&&(t.rotated=!1,this.collection.toArray().forEach(o=>{Hs("node:rotated",e,this.graph.findViewByCell(o))}))}startResize({e}){const t=this.graph.getGridSize(),o=this.collection.toArray(),c=Ti.getCellsBBox(o),d=o.map(b=>b.getBBox()),f=d.reduce((b,w)=>w.width<b?w.width:b,1/0),v=d.reduce((b,w)=>w.height<b?w.height:b,1/0);this.setEventData(e,{bbox:c,cells:this.graph.model.getSubGraph(o),minWidth:t*c.width/f,minHeight:t*c.height/v})}doResize({e,dx:t,dy:o}){const c=this.eventData(e),d=c.bbox,f=d.width,v=d.height,b=Math.max(f+t,c.minWidth),w=Math.max(v+o,c.minHeight);c.resized||(c.resized=!0),(Math.abs(f-b)>.001||Math.abs(v-w)>.001)&&(this.graph.model.resizeCells(b,w,c.cells,{selection:this.cid}),d.width=b,d.height=w,this.updateSelectionBoxes())}stopResize({e}){const t=this.eventData(e);t.resized&&(t.resized=!1,this.collection.toArray().forEach(o=>{Hs("node:resized",e,this.graph.findViewByCell(o))}))}dispose(){this.clean(),this.remove()}}Ty([Ai.dispose()],f0.prototype,"dispose",null),Om(f0,d0);var xc;(function(l){const e="widget-selection";l.classNames={root:e,inner:`${e}-inner`,box:`${e}-box`,content:`${e}-content`,rubberband:`${e}-rubberband`,selected:`${e}-selected`},l.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},l.defaultOptions={movable:!0,following:!0,strict:!1,useCellGeometry:!1,content(o){return Vg('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:o.length})},handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]};function t(o){return o.getAncestors().length}l.depthComparator=t})(xc||(xc={}));class My extends Sy{get node(){return this.cell}get containerClassName(){return this.prefixClassName("widget-transform")}get resizeClassName(){return`${this.containerClassName}-resize`}get rotateClassName(){return`${this.containerClassName}-rotate`}init(e){this.options=Object.assign(Object.assign({},ac.defaultOptions),e),this.render(),this.startListening()}startListening(){this.delegateEvents({[`mousedown .${this.resizeClassName}`]:"startResizing",[`touchstart .${this.resizeClassName}`]:"startResizing",[`mousedown .${this.rotateClassName}`]:"startRotating",[`touchstart .${this.rotateClassName}`]:"startRotating"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),super.startListening()}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),super.stopListening()}renderHandles(){this.container=document.createElement("div"),this.$container=this.$(this.container);const e=this.$("<div/>").prop("draggable",!1),t=e.clone().addClass(this.rotateClassName),o=ac.POSITIONS.map(c=>e.clone().addClass(this.resizeClassName).attr("data-position",c));this.empty(),this.$container.append(o,t)}render(){return this.renderHandles(),this.view.addClass(ac.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()}update(){const e=this.graph.matrix(),t=this.node.getBBox();t.x*=e.a,t.x+=e.e,t.y*=e.d,t.y+=e.f,t.width*=e.a,t.height*=e.d;const o=ki.normalize(this.node.getAngle()),c=o!==0?`rotate(${o}deg)`:"";return this.$container.css({transform:c,width:t.width,height:t.height,left:t.x,top:t.y}),this.updateResizerDirections(),this}remove(){return this.view.removeClass(ac.NODE_CLS),super.remove()}onKnobMouseDown(){this.startHandle()}onKnobMouseUp(){this.stopHandle()}updateResizerDirections(){const e=ki.normalize(this.node.getAngle()),t=Math.floor(e*(ac.DIRECTIONS.length/360));if(t!==this.prevShift){const o=ac.DIRECTIONS.slice(t).concat(ac.DIRECTIONS.slice(0,t)),c=d=>`${this.containerClassName}-cursor-${d}`;this.$container.find(`.${this.resizeClassName}`).removeClass(ac.DIRECTIONS.map(d=>c(d)).join(" ")).each((d,f)=>{this.$(f).addClass(c(o[d]))}),this.prevShift=t}}getTrueDirection(e){const t=ki.normalize(this.node.getAngle());let o=ac.POSITIONS.indexOf(e);return o+=Math.floor(t*(ac.POSITIONS.length/360)),o%=ac.POSITIONS.length,ac.POSITIONS[o]}toValidResizeDirection(e){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[e]||e}startResizing(e){e.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});const t=this.$(e.target).attr("data-position"),o=this.graph.findViewByCell(this.node);this.prepareResizing(e,t),this.startAction(e),Hs("node:resize:mousedown",e,o)}prepareResizing(e,t){const o=this.getTrueDirection(t);let c=0,d=0;t.split("-").forEach(w=>{c={left:-1,right:1}[w]||c,d={top:-1,bottom:1}[w]||d});const f=this.toValidResizeDirection(t),v={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[f],b=ki.normalize(this.node.getAngle());this.setEventData(e,{selector:v,direction:f,trueDirection:o,relativeDirection:t,angle:b,resizeX:c,resizeY:d,action:"resizing"})}startRotating(e){e.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});const t=this.graph.findViewByCell(this.node),o=this.node.getBBox().getCenter(),c=this.normalizeEvent(e),d=this.graph.snapToGrid(c.clientX,c.clientY);this.setEventData(e,{center:o,action:"rotating",angle:ki.normalize(this.node.getAngle()),start:Ve.create(d).theta(o)}),this.startAction(e),Hs("node:rotate:mousedown",e,t)}onMouseMove(e){const t=this.graph.findViewByCell(this.node);let o=this.getEventData(e);if(o.action){const c=this.normalizeEvent(e);let d=c.clientX,f=c.clientY;const v=this.graph.scroller.widget,b=this.options.restrictedResizing;if(b===!0||typeof b=="number"){const V=b===!0?0:b,q=v?Math.max(V,8):V,ee=this.graph.container.getBoundingClientRect();d=Jc(d,ee.left+q,ee.right-q),f=Jc(f,ee.top+q,ee.bottom-q)}else this.options.autoScrollOnResizing&&v&&v.autoScroll(d,f);const w=this.graph.snapToGrid(d,f),_=this.graph.getGridSize(),A=this.node,P=this.options;if(o.action==="resizing"){o=o,o.resized||(t&&(t.addClass("node-resizing"),Hs("node:resize",e,t)),o.resized=!0);const V=A.getBBox(),q=Ve.create(w).rotate(o.angle,V.getCenter()).diff(V[o.selector]);let ee=o.resizeX?q.x*o.resizeX:V.width,ge=o.resizeY?q.y*o.resizeY:V.height;const _e=ee,ke=ge;if(ee=ha.snapToGrid(ee,_),ge=ha.snapToGrid(ge,_),ee=Math.max(ee,P.minWidth||_),ge=Math.max(ge,P.minHeight||_),ee=Math.min(ee,P.maxWidth||1/0),ge=Math.min(ge,P.maxHeight||1/0),P.preserveAspectRatio){const Ue=V.width*ge/V.height,Qe=V.height*ee/V.width;ee<Ue?ge=Qe:ee=Ue}const Se=o.relativeDirection;if(P.allowReverse&&(_e<=-ee||ke<=-ge)){let Ue;Se==="left"?_e<=-ee&&(Ue="right"):Se==="right"?_e<=-ee&&(Ue="left"):Se==="top"?ke<=-ge&&(Ue="bottom"):Se==="bottom"?ke<=-ge&&(Ue="top"):Se==="top-left"?_e<=-ee&&ke<=-ge?Ue="bottom-right":_e<=-ee?Ue="top-right":ke<=-ge&&(Ue="bottom-left"):Se==="top-right"?_e<=-ee&&ke<=-ge?Ue="bottom-left":_e<=-ee?Ue="top-left":ke<=-ge&&(Ue="bottom-right"):Se==="bottom-left"?_e<=-ee&&ke<=-ge?Ue="top-right":_e<=-ee?Ue="bottom-right":ke<=-ge&&(Ue="top-left"):Se==="bottom-right"&&(_e<=-ee&&ke<=-ge?Ue="top-left":_e<=-ee?Ue="bottom-left":ke<=-ge&&(Ue="top-right"));const Qe=Ue;this.stopHandle();const bt=this.$container.find(`.${this.resizeClassName}[data-position="${Qe}"]`);this.startHandle(bt[0]),this.prepareResizing(e,Qe),this.onMouseMove(e)}if(V.width!==ee||V.height!==ge){const Ue={ui:!0,direction:o.direction,relativeDirection:o.relativeDirection,trueDirection:o.trueDirection,minWidth:P.minWidth,minHeight:P.minHeight,maxWidth:P.maxWidth,maxHeight:P.maxHeight,preserveAspectRatio:P.preserveAspectRatio===!0};A.resize(ee,ge,Ue),Hs("node:resizing",e,t)}Hs("node:resize:mousemove",e,t)}else if(o.action==="rotating"){o=o,o.rotated||(t&&(t.addClass("node-rotating"),Hs("node:rotate",e,t)),o.rotated=!0);const V=A.getAngle(),q=o.start-Ve.create(w).theta(o.center);let ee=o.angle+q;P.rotateGrid&&(ee=ha.snapToGrid(ee,P.rotateGrid)),ee=ki.normalize(ee),V!==ee&&(A.rotate(ee,{absolute:!0}),Hs("node:rotating",e,t)),Hs("node:rotate:mousemove",e,t)}}}onMouseUp(e){const t=this.graph.findViewByCell(this.node),o=this.getEventData(e);o.action&&(this.stopAction(e),this.model.stopBatch(o.action==="resizing"?"resize":"rotate",{cid:this.cid}),o.action==="resizing"?Hs("node:resize:mouseup",e,t):o.action==="rotating"&&Hs("node:rotate:mouseup",e,t))}startHandle(e){if(this.handle=e||null,this.$container.addClass(`${this.containerClassName}-active`),e){this.$(e).addClass(`${this.containerClassName}-active-handle`);const t=e.getAttribute("data-position");if(t){const o=ac.DIRECTIONS[ac.POSITIONS.indexOf(t)];this.$container.addClass(`${this.containerClassName}-cursor-${o}`)}}}stopHandle(){if(this.$container.removeClass(`${this.containerClassName}-active`),this.handle){this.$(this.handle).removeClass(`${this.containerClassName}-active-handle`);const e=this.handle.getAttribute("data-position");if(e){const t=ac.DIRECTIONS[ac.POSITIONS.indexOf(e)];this.$container.removeClass(`${this.containerClassName}-cursor-${t}`)}this.handle=null}}startAction(e){this.startHandle(e.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(ac.documentEvents,e.data)}stopAction(e){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const t=this.graph.findViewByCell(this.node),o=this.getEventData(e);t&&(t.removeClass(`node-${o.action}`),o.action==="resizing"&&o.resized?Hs("node:resized",e,t):o.action==="rotating"&&o.rotated&&Hs("node:rotated",e,t))}}var ac;(function(l){l.NODE_CLS="has-widget-transform",l.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],l.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],l.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},l.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}})(ac||(ac={}));var Oy=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t},Tl;(function(l){function e(t,o,c){const d={};return Object.keys(c||{}).forEach(f=>{const v=c[f];d[f]=typeof v=="function"?v.call(t,o):v}),d}l.parseOptionGroup=e})(Tl||(Tl={})),function(l){function e(t){const{grid:o,panning:c,selecting:d,embedding:f,snapline:v,resizing:b,rotating:w,knob:_,clipboard:A,history:P,scroller:V,minimap:q,keyboard:ee,mousewheel:ge}=t,_e=Oy(t,["grid","panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"]),ke=t.container;if(ke!=null)_e.width==null&&(_e.width=ke.clientWidth),_e.height==null&&(_e.height=ke.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");const Se=wo({},l.defaults,_e),Ue={size:10,visible:!1};return typeof o=="number"?Se.grid={size:o,visible:!1}:typeof o=="boolean"?Se.grid=Object.assign(Object.assign({},Ue),{visible:o}):Se.grid=Object.assign(Object.assign({},Ue),o),["panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"].forEach(bt=>{const Ot=t[bt];typeof Ot=="boolean"?Se[bt].enabled=Ot:Se[bt]=Object.assign(Object.assign({},Se[bt]),Ot)}),Se.background&&Se.scroller.enabled&&Se.scroller.background==null&&(Se.scroller.background=Se.background,delete Se.background),Se}l.get=e}(Tl||(Tl={})),function(l){l.defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:ha.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:ha.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection({type:e,sourceView:t,targetView:o}){return(e==="target"?o:t)!=null},createEdge(){return new xw}},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1,allowReverse:!0},rotating:{enabled:!1,grid:15},translating:{restrict:!1},knob:{enabled:!1,clearAll:!0,clearOnBlankMouseDown:!0},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},selecting:{enabled:!1,rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1,eventTypes:["leftMouseDown"]},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:()=>!1}}(Tl||(Tl={}));var Py=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class Dy extends _o{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(e){return this.svg.getElementById(e)!=null}filter(e){let t=e.id;const o=e.name;if(t||(t=`filter-${o}-${this.cid}-${rC(JSON.stringify(e))}`),!this.isDefined(t)){const c=Qg.registry.get(o);if(c==null)return Qg.registry.onNotFound(o);const d=c(e.args||{}),f=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});sr.create(Xi.sanitize(d),f).appendTo(this.defs)}return t}gradient(e){let t=e.id;const o=e.type;if(t||(t=`gradient-${o}-${this.cid}-${rC(JSON.stringify(e))}`),!this.isDefined(t)){const d=e.stops.map(b=>{const w=b.opacity!=null&&Number.isFinite(b.opacity)?b.opacity:1;return`<stop offset="${b.offset}" stop-color="${b.color}" stop-opacity="${w}"/>`}),f=`<${o}>${d.join("")}</${o}>`,v=Object.assign({id:t},e.attrs);sr.create(f,v).appendTo(this.defs)}return t}marker(e){const{id:t,refX:o,refY:c,markerUnits:d,markerOrient:f,tagName:v,children:b}=e,w=Py(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let _=t;if(_||(_=`marker-${this.cid}-${rC(JSON.stringify(e))}`),!this.isDefined(_)){v!=="path"&&delete w.d;const A=sr.create("marker",{refX:o,refY:c,id:_,overflow:"visible",orient:f??"auto",markerUnits:d||"userSpaceOnUse"},b?b.map(P=>{var{tagName:V}=P,q=Py(P,["tagName"]);return sr.create(`${V}`||"path",Km(Object.assign(Object.assign({},w),q)))}):[sr.create(v||"path",Km(w))]);this.defs.appendChild(A.node)}return _}remove(e){const t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}var Nv=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},X2=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class p0 extends _o{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}getGridSize(){return this.grid.size}setGridSize(e){this.grid.size=Math.max(e,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}update(e={}){const t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();const o=this.graph.matrix(),c=this.getInstance(),d=Array.isArray(e)?e:[e];this.patterns.forEach((b,w)=>{const _=`pattern_${w}`,A=o.a||1,P=o.d||1,{update:V,markup:q}=b,ee=X2(b,["update","markup"]),ge=Object.assign(Object.assign(Object.assign({},ee),d[w]),{sx:A,sy:P,ox:o.e||0,oy:o.f||0,width:t*A,height:t*P});c.has(_)||c.add(_,sr.create("pattern",{id:_,patternUnits:"userSpaceOnUse"},sr.createVectors(q)).node);const _e=c.get(_);typeof V=="function"&&V(_e.childNodes[0],ge);let ke=ge.ox%ge.width;ke<0&&(ke+=ge.width);let Se=ge.oy%ge.height;Se<0&&(Se+=ge.height),vo(_e,{x:ke,y:Se,width:ge.width,height:ge.height})});const f=new XMLSerializer().serializeToString(c.root),v=`url(data:image/svg+xml;base64,${btoa(f)})`;this.elem.style.backgroundImage=v}getInstance(){return this.instance||(this.instance=new rp),this.instance}resolveGrid(e){if(!e)return[];const t=e.type;if(t==null)return[Object.assign(Object.assign({},rp.presets.dot),e.args)];const o=rp.registry.get(t);if(o){let c=e.args||[];return Array.isArray(c)||(c=[c]),Array.isArray(o)?o.map((d,f)=>Object.assign(Object.assign({},d),c[f])):[Object.assign(Object.assign({},o),c[0])]}return rp.registry.onNotFound(t)}dispose(){this.stopListening(),this.clear()}}Nv([_o.dispose()],p0.prototype,"dispose",null);class Ny extends _o{getClientMatrix(){return oc(this.view.stage.getScreenCTM())}getClientOffset(){const e=this.view.svg.getBoundingClientRect();return new Ve(e.left,e.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(e,t){return(typeof e=="number"?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(e,t){const o=Ve.create(e,t);return wd(o,this.graph.matrix())}localToClientPoint(e,t){const o=Ve.create(e,t);return wd(o,this.getClientMatrix())}localToPagePoint(e,t){return(typeof e=="number"?this.localToGraphPoint(e,t):this.localToGraphPoint(e)).translate(this.getPageOffset())}localToGraphRect(e,t,o,c){const d=Rn.create(e,t,o,c);return tl(d,this.graph.matrix())}localToClientRect(e,t,o,c){const d=Rn.create(e,t,o,c);return tl(d,this.getClientMatrix())}localToPageRect(e,t,o,c){return(typeof e=="number"?this.localToGraphRect(e,t,o,c):this.localToGraphRect(e)).translate(this.getPageOffset())}graphToLocalPoint(e,t){const o=Ve.create(e,t);return wd(o,this.graph.matrix().inverse())}clientToLocalPoint(e,t){const o=Ve.create(e,t);return wd(o,this.getClientMatrix().inverse())}clientToGraphPoint(e,t){const o=Ve.create(e,t);return wd(o,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(e,t){const c=Ve.create(e,t).diff(this.getPageOffset());return this.graphToLocalPoint(c)}graphToLocalRect(e,t,o,c){const d=Rn.create(e,t,o,c);return tl(d,this.graph.matrix().inverse())}clientToLocalRect(e,t,o,c){const d=Rn.create(e,t,o,c);return tl(d,this.getClientMatrix().inverse())}clientToGraphRect(e,t,o,c){const d=Rn.create(e,t,o,c);return tl(d,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(e,t,o,c){const d=Rn.create(e,t,o,c),f=this.getPageOffset();return d.x-=f.x,d.y-=f.y,this.graphToLocalRect(d)}}var Z2=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Iv extends _o{constructor(){super(...arguments),this.widget=this.graph.hook.createSnapline()}dispose(){this.widget.dispose()}}Z2([_o.dispose()],Iv.prototype,"dispose",null);var xh;(function(l){function e(c){const d=[],f=[];return Array.isArray(c)?d.push(...c):c.split("|").forEach(v=>{v.indexOf("&")===-1?d.push(v):f.push(...v.split("&"))}),{or:d,and:f}}l.parse=e;function t(c,d){if(c!=null&&d!=null){const f=e(c),v=e(d),b=f.or.sort(),w=v.or.sort(),_=f.and.sort(),A=v.and.sort(),P=(V,q)=>V.length===q.length&&(V.length===0||V.every((ee,ge)=>ee===q[ge]));return P(b,w)&&P(_,A)}return c==null&&d==null}l.equals=t;function o(c,d,f){if(d==null||Array.isArray(d)&&d.length===0)return f?c.altKey!==!0&&c.ctrlKey!==!0&&c.metaKey!==!0&&c.shiftKey!==!0:!0;const{or:v,and:b}=e(d),w=_=>{const A=`${_.toLowerCase()}Key`;return c[A]===!0};return v.some(_=>w(_))&&b.every(_=>w(_))}l.isMatch=o})(xh||(xh={}));var Y2=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Rv extends _o{get widgetOptions(){return this.options.scroller}get pannable(){return this.widgetOptions?typeof this.widgetOptions.pannable=="object"?this.widgetOptions.pannable.enabled:!!this.widgetOptions.pannable:!1}init(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()}startListening(){let e=[];const t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.widget.container).on("mousedown",this.onRightMouseDown))}stopListening(){let e=[];const t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.widget.container).off("mousedown",this.onRightMouseDown)}onRightMouseDown(e){e.button===2&&this.allowPanning(e,!0)&&this.widget&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",()=>this.updateClassName(!1)))}preparePanning({e}){this.widget&&(this.allowPanning(e,!0)||this.allowPanning(e)&&!this.graph.selection.allowRubberband(e,!0))&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",()=>this.updateClassName(!1)))}allowPanning(e,t){return this.widget&&this.pannable&&xh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}updateClassName(e){if(this.widget==null)return;const t=this.widget.container,o=this.view.prefixClassName("graph-scroller-pannable");this.pannable?(co(t,o),t.dataset.panning=(!!e).toString()):yc(t,o)}enablePanning(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())}lock(){this.widget&&this.widget.lock()}unlock(){this.widget&&this.widget.unlock()}update(){this.widget&&this.widget.update()}enableAutoResize(){this.widget&&this.widget.enableAutoResize()}disableAutoResize(){this.widget&&this.widget.disableAutoResize()}resize(e,t){this.widget&&this.widget.resize(e,t)}dispose(){this.widget&&this.widget.dispose(),this.stopListening()}}Y2([_o.dispose()],Rv.prototype,"dispose",null);var K2=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},q2=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class kv extends _o{get commonOptions(){const e=this.instanceOptions,{enabled:t}=e;return q2(e,["enabled"])}get instanceOptions(){return this.options.clipboard}get cells(){return this.widget.cells}get disabled(){return this.instanceOptions.enabled!==!0}init(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)}enable(){this.disabled&&(this.instanceOptions.enabled=!0)}disable(){this.disabled||(this.instanceOptions.enabled=!1)}copy(e,t={}){this.disabled||(this.widget.copy(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}cut(e,t={}){this.disabled||(this.widget.cut(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}paste(e={},t=this.graph){return this.disabled?[]:this.widget.paste(t,Object.assign(Object.assign({},this.commonOptions),e))}clean(e){(!this.disabled||e)&&(this.widget.clean(),this.graph.trigger("clipboard:changed",{cells:[]}))}isEmpty(){return this.widget.isEmpty()}dispose(){this.clean(!0)}}K2([_o.dispose()],kv.prototype,"dispose",null);var J2=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class g0 extends _o{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:e,magnet:t,options:o={}}){const c=this.resolveHighlighter(o);if(!c)return;const d=this.getHighlighterId(t,c);if(!this.highlights[d]){const f=c.highlighter;f.highlight(e,t,Object.assign({},c.args)),this.highlights[d]={cellView:e,magnet:t,highlighter:f,args:c.args}}}onCellUnhighlight({magnet:e,options:t={}}){const o=this.resolveHighlighter(t);if(!o)return;const c=this.getHighlighterId(e,o);this.unhighlight(c)}resolveHighlighter(e){const t=this.options;let o=e.highlighter;if(o==null){const v=e.type;o=v&&t.highlighting[v]||t.highlighting.default}if(o==null)return null;const c=typeof o=="string"?{name:o}:o,d=c.name,f=ip.registry.get(d);return f==null?ip.registry.onNotFound(d):(ip.check(d,f),{name:d,highlighter:f,args:c.args||{}})}getHighlighterId(e,t){return ov(e),t.name+e.id+JSON.stringify(t.args)}unhighlight(e){const t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}dispose(){Object.keys(this.highlights).forEach(e=>this.unhighlight(e)),this.stopListening()}}J2([g0.dispose()],g0.prototype,"dispose",null);var Q2=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class v0 extends _o{constructor(){super(...arguments),this.widgets=new Map}get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get isSelectionEnabled(){return this.options.selecting.enabled===!0}init(){this.startListening(),this.resize()}startListening(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}stopListening(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}onNodeMouseUp({node:e}){if(!this.isSelectionEnabled){const t=this.graph.hook.createTransform(e,{clearAll:!0});t&&this.widgets.set(e,t)}}onNodeSelected({node:e}){if(this.isSelectionEnabled){const t=this.graph.hook.createTransform(e,{clearAll:!1});t&&this.widgets.set(e,t)}}onNodeUnSelected({node:e}){if(this.isSelectionEnabled){const t=this.widgets.get(e);t&&t.dispose(),this.widgets.delete(e)}}getMatrix(){const e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),oc(this.viewportMatrix)}setMatrix(e){const t=oc(e),o=Qf(t);this.viewport.setAttribute("transform",o),this.viewportMatrix=t,this.viewportTransformString=o}resize(e,t){let o=e===void 0?this.options.width:e,c=t===void 0?this.options.height:t;this.options.width=o,this.options.height=c,typeof o=="number"&&(o=Math.round(o)),typeof c=="number"&&(c=Math.round(c)),this.container.style.width=o==null?"":`${o}px`,this.container.style.height=c==null?"":`${c}px`;const d=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},d)),this}getComputedSize(){let e=this.options.width,t=this.options.height;return e2(e)||(e=this.container.clientWidth),e2(t)||(t=this.container.clientHeight),{width:e,height:t}}getScale(){return x2(this.getMatrix())}scale(e,t=e,o=0,c=0,d={}){if(e=this.clampScale(e),t=this.clampScale(t),o||c){const v=this.getTranslation(),b=v.tx-o*(e-1),w=v.ty-c*(t-1);(b!==v.tx||w!==v.ty)&&this.translate(b,w)}const f=this.getMatrix();return f.a=e,f.d=t,this.setMatrix(f),this.graph.trigger("scale",Object.assign({sx:e,sy:t,ox:o,oy:c},d)),this}clampScale(e){const t=this.graph.options.scaling;return Jc(e,t.min||.01,t.max||16)}getZoom(){return this.getScale().sx}zoom(e,t){t=t||{};let o=e,c=e;const d=this.getScale(),f=this.getComputedSize();let v=f.width/2,b=f.height/2;if(t.absolute||(o+=d.sx,c+=d.sy),t.scaleGrid&&(o=Math.round(o/t.scaleGrid)*t.scaleGrid,c=Math.round(c/t.scaleGrid)*t.scaleGrid),t.maxScale&&(o=Math.min(t.maxScale,o),c=Math.min(t.maxScale,c)),t.minScale&&(o=Math.max(t.minScale,o),c=Math.max(t.minScale,c)),t.center&&(v=t.center.x,b=t.center.y),o=this.clampScale(o),c=this.clampScale(c),v||b){const w=this.getTranslation(),_=v-(v-w.tx)*(o/d.sx),A=b-(b-w.ty)*(c/d.sy);(_!==w.tx||A!==w.ty)&&this.translate(_,A,{ui:t.ui})}return this.scale(o,c,0,0,{ui:t.ui}),this}getRotation(){return Qh(this.getMatrix())}rotate(e,t,o){if(t==null||o==null){const d=Ta(this.graph.view.stage);t=d.width/2,o=d.height/2}const c=this.getMatrix().translate(t,o).rotate(e).translate(-t,-o);return this.setMatrix(c),this}getTranslation(){return Jp(this.getMatrix())}translate(e,t,o={}){const c=this.getMatrix();c.e=e||0,c.f=t||0,this.setMatrix(c);const d=this.getTranslation();return this.options.x=d.tx,this.options.y=d.ty,this.graph.trigger("translate",Object.assign(Object.assign({},d),o)),this}setOrigin(e,t){return this.translate(e||0,t||0)}fitToContent(e,t,o,c){if(typeof e=="object"){const Se=e;e=Se.gridWidth||1,t=Se.gridHeight||1,o=Se.padding||0,c=Se}else e=e||1,t=t||1,o=o||0,c==null&&(c={});const d=wl(o),f=c.border||0,v=c.contentArea?Rn.create(c.contentArea):this.getContentArea(c);f>0&&v.inflate(f);const b=this.getScale(),w=this.getTranslation(),_=b.sx,A=b.sy;v.x*=_,v.y*=A,v.width*=_,v.height*=A;let P=Math.max(Math.ceil((v.width+v.x)/e),1)*e,V=Math.max(Math.ceil((v.height+v.y)/t),1)*t,q=0,ee=0;(c.allowNewOrigin==="negative"&&v.x<0||c.allowNewOrigin==="positive"&&v.x>=0||c.allowNewOrigin==="any")&&(q=Math.ceil(-v.x/e)*e,q+=d.left,P+=q),(c.allowNewOrigin==="negative"&&v.y<0||c.allowNewOrigin==="positive"&&v.y>=0||c.allowNewOrigin==="any")&&(ee=Math.ceil(-v.y/t)*t,ee+=d.top,V+=ee),P+=d.right,V+=d.bottom,P=Math.max(P,c.minWidth||0),V=Math.max(V,c.minHeight||0),P=Math.min(P,c.maxWidth||Number.MAX_SAFE_INTEGER),V=Math.min(V,c.maxHeight||Number.MAX_SAFE_INTEGER);const ge=this.getComputedSize(),_e=P!==ge.width||V!==ge.height;return(q!==w.tx||ee!==w.ty)&&this.translate(q,ee),_e&&this.resize(P,V),new Rn(-q/_,-ee/A,P/_,V/A)}scaleContentToFit(e={}){this.scaleContentToFitImpl(e)}scaleContentToFitImpl(e={},t=!0){let o,c;if(e.contentArea){const _e=e.contentArea;o=this.graph.localToGraph(_e),c=Ve.create(_e)}else o=this.getContentBBox(e),c=this.graph.graphToLocal(o);if(!o.width||!o.height)return;const d=wl(e.padding),f=e.minScale||0,v=e.maxScale||Number.MAX_SAFE_INTEGER,b=e.minScaleX||f,w=e.maxScaleX||v,_=e.minScaleY||f,A=e.maxScaleY||v;let P;if(e.viewportArea)P=e.viewportArea;else{const _e=this.getComputedSize(),ke=this.getTranslation();P={x:ke.tx,y:ke.ty,width:_e.width,height:_e.height}}P=Rn.create(P).moveAndExpand({x:d.left,y:d.top,width:-d.left-d.right,height:-d.top-d.bottom});const V=this.getScale();let q=P.width/o.width*V.sx,ee=P.height/o.height*V.sy;e.preserveAspectRatio!==!1&&(q=ee=Math.min(q,ee));const ge=e.scaleGrid;if(ge&&(q=ge*Math.floor(q/ge),ee=ge*Math.floor(ee/ge)),q=Jc(q,b,w),ee=Jc(ee,_,A),this.scale(q,ee),t){const _e=this.options,ke=P.x-c.x*q-_e.x,Se=P.y-c.y*ee-_e.y;this.translate(ke,Se)}}getContentArea(e={}){return e.useCellGeometry?this.model.getAllCellsBBox()||new Rn:Ta(this.graph.view.stage)}getContentBBox(e={}){return this.graph.localToGraph(this.getContentArea(e))}getGraphArea(){const e=Rn.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}zoomToRect(e,t={}){const o=Rn.create(e),c=this.graph;t.contentArea=o,t.viewportArea==null&&(t.viewportArea={x:c.options.x,y:c.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);const d=o.getCenter();return this.centerPoint(d.x,d.y),this}zoomToFit(e={}){return this.zoomToRect(this.getContentArea(e),e)}centerPoint(e,t){const o=this.getComputedSize(),c=this.getScale(),d=this.getTranslation(),f=o.width/2,v=o.height/2;e=typeof e=="number"?e:f,t=typeof t=="number"?t:v,e=f-e*c.sx,t=v-t*c.sy,(d.tx!==e||d.ty!==t)&&this.translate(e,t)}centerContent(e){const o=this.graph.getContentArea(e).getCenter();this.centerPoint(o.x,o.y)}centerCell(e){return this.positionCell(e,"center")}positionPoint(e,t,o){const c=this.getComputedSize();t=md(t,Math.max(0,c.width)),t<0&&(t=c.width+t),o=md(o,Math.max(0,c.height)),o<0&&(o=c.height+o);const d=this.getTranslation(),f=this.getScale(),v=t-e.x*f.sx,b=o-e.y*f.sy;(d.tx!==v||d.ty!==b)&&this.translate(v,b)}positionRect(e,t){const o=Rn.create(e);switch(t){case"center":return this.positionPoint(o.getCenter(),"50%","50%");case"top":return this.positionPoint(o.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(o.getTopRight(),"100%",0);case"right":return this.positionPoint(o.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(o.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(o.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(o.getBottomLeft(),0,"100%");case"left":return this.positionPoint(o.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(o.getTopLeft(),0,0);default:return this}}positionCell(e,t){const o=e.getBBox();return this.positionRect(o,t)}positionContent(e,t){const o=this.graph.getContentArea(t);return this.positionRect(o,e)}dispose(){this.widgets.forEach(e=>e.dispose()),this.widgets.clear(),this.stopListening()}}Q2([v0.dispose()],v0.prototype,"dispose",null);var Iy=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Lv extends _o{constructor(){super(...arguments),this.movedMap=new WeakMap,this.unselectMap=new WeakMap}get widgetOptions(){return this.options.selecting}get rubberbandDisabled(){return this.widgetOptions.enabled!==!0||this.widgetOptions.rubberband!==!0}get disabled(){return this.widgetOptions.enabled!==!0}get length(){return this.widget.length}get cells(){return this.widget.cells}init(){this.widget=this.graph.hook.createSelection(),this.startListening()}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown({e}){(this.allowRubberband(e,!0)||this.allowRubberband(e)&&!this.graph.scroller.allowPanning(e,!0)&&!this.graph.panning.allowPanning(e,!0))&&this.startRubberband(e)}onBlankClick(){this.clean()}allowRubberband(e,t){return!this.rubberbandDisabled&&xh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowRubberband(e)}allowMultipleSelection(e){return this.isMultiple()&&xh.isMatch(e,this.widgetOptions.multipleSelectionModifiers)}onCellMouseMove({cell:e}){this.movedMap.set(e,!0)}onCellMouseUp({e,cell:t}){const o=this.widgetOptions;let c=this.disabled;!c&&this.movedMap.has(t)&&(c=o.selectCellOnMoved===!1,c||(c=o.selectNodeOnMoved===!1&&t.isNode()),c||(c=o.selectEdgeOnMoved===!1&&t.isEdge())),c||(this.allowMultipleSelection(e)?this.unselectMap.has(t)?this.unselectMap.delete(t):this.isSelected(t)?this.unselect(t):this.select(t):this.reset(t)),this.movedMap.delete(t)}onBoxMouseDown({e,cell:t}){this.disabled||this.allowMultipleSelection(e)&&(this.unselect(t),this.unselectMap.set(t,!0))}isEmpty(){return this.length<=0}isSelected(e){return this.widget.isSelected(e)}getCells(e){return(Array.isArray(e)?e:[e]).map(t=>typeof t=="string"?this.graph.getCellById(t):t).filter(t=>t!=null)}select(e,t={}){const o=this.getCells(e);return o.length&&(this.isMultiple()?this.widget.select(o,t):this.reset(o.slice(0,1),t)),this}unselect(e,t={}){return this.widget.unselect(this.getCells(e),t),this}reset(e,t={}){return this.widget.reset(e?this.getCells(e):[],t),this}clean(e={}){return this.widget.clean(e),this}enable(){return this.disabled&&(this.widgetOptions.enabled=!0),this}disable(){return this.disabled||(this.widgetOptions.enabled=!1),this}startRubberband(e){return this.rubberbandDisabled||this.widget.startSelecting(e),this}enableRubberband(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this}isMultiple(){return this.widgetOptions.multiple!==!1}enableMultiple(){return this.widgetOptions.multiple=!0,this}disableMultiple(){return this.widgetOptions.multiple=!1,this}setModifiers(e){return this.widgetOptions.modifiers=e,this}setContent(e){return this.widget.setContent(e),this}setFilter(e){return this.widget.setFilter(e),this}dispose(){this.stopListening(),this.widget.dispose()}}Iy([_o.dispose()],Lv.prototype,"dispose",null);var Gv=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},M3=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class m0 extends Ss{constructor(e){super(),this.batchCommands=null,this.batchLevel=0,this.lastBatchIndex=-1,this.freezed=!1,this.handlers=[],this.graph=e.graph,this.model=e.graph.model,this.options=bs.getOptions(e),this.validator=new m0.Validator({history:this,cancelInvalid:this.options.cancelInvalid}),this.clean(),this.startListening()}get disabled(){return this.options.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}undo(e={}){if(!this.disabled){const t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack.push(t),this.notify("undo",t,e))}return this}redo(e={}){if(!this.disabled){const t=this.redoStack.pop();t&&(this.applyCommand(t,e),this.undoStack.push(t),this.notify("redo",t,e))}return this}cancel(e={}){if(!this.disabled){const t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack=[],this.notify("cancel",t,e))}return this}clean(e={}){return this.undoStack=[],this.redoStack=[],this.notify("clean",null,e),this}canUndo(){return!this.disabled&&this.undoStack.length>0}canRedo(){return!this.disabled&&this.redoStack.length>0}validate(e,...t){return this.validator.validate(e,...t),this}dispose(){this.validator.dispose(),this.clean(),this.stopListening()}startListening(){this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach((e,t)=>{this.handlers[t]=this.addCommand.bind(this,e),this.model.on(e,this.handlers[t])}),this.validator.on("invalid",e=>this.trigger("invalid",e))}stopListening(){this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach((e,t)=>{this.model.off(e,this.handlers[t])}),this.handlers.length=0),this.validator.off("invalid")}createCommand(e){return{batch:e?e.batch:!1,data:{}}}revertCommand(e,t){this.freezed=!0;const o=Array.isArray(e)?bs.sortBatchCommands(e):[e];for(let c=o.length-1;c>=0;c-=1){const d=o[c],f=Object.assign(Object.assign({},t),Et(d.options,this.options.revertOptionsList||[]));this.executeCommand(d,!0,f)}this.freezed=!1}applyCommand(e,t){this.freezed=!0;const o=Array.isArray(e)?bs.sortBatchCommands(e):[e];for(let c=0;c<o.length;c+=1){const d=o[c],f=Object.assign(Object.assign({},t),Et(d.options,this.options.applyOptionsList||[]));this.executeCommand(d,!1,f)}this.freezed=!1}executeCommand(e,t,o){const c=this.model,d=c.getCell(e.data.id),f=e.event;if(bs.isAddEvent(f)&&t||bs.isRemoveEvent(f)&&!t)d&&d.remove(o);else if(bs.isAddEvent(f)&&!t||bs.isRemoveEvent(f)&&t){const v=e.data;v.node?c.addNode(v.props,o):v.edge&&c.addEdge(v.props,o)}else if(bs.isChangeEvent(f)){const v=e.data,b=v.key;if(b&&d){const w=t?v.prev[b]:v.next[b];d.prop(b,w,o)}}else{const v=this.options.executeCommand;v&&er(v,this,e,t,o)}}addCommand(e,t){if(this.freezed||this.disabled)return;const o=t,c=o.options||{};if(c.dryrun||bs.isAddEvent(e)&&this.options.ignoreAdd||bs.isRemoveEvent(e)&&this.options.ignoreRemove||bs.isChangeEvent(e)&&this.options.ignoreChange)return;const d=this.options.beforeAddCommand;if(d!=null&&er(d,this,e,t)===!1)return;e==="cell:change:*"&&(e=`cell:change:${o.key}`);const f=o.cell,v=kc.isModel(f);let b;if(this.batchCommands){b=this.batchCommands[Math.max(this.lastBatchIndex,0)];const _=v&&!b.modelChange||b.data.id!==f.id,A=b.event!==e;if(this.lastBatchIndex>=0&&(_||A)){const P=this.batchCommands.findIndex(V=>(v&&V.modelChange||V.data.id===f.id)&&V.event===e);P<0||bs.isAddEvent(e)||bs.isRemoveEvent(e)?b=this.createCommand({batch:!0}):(b=this.batchCommands[P],this.batchCommands.splice(P,1)),this.batchCommands.push(b),this.lastBatchIndex=this.batchCommands.length-1}}else b=this.createCommand({batch:!1});if(bs.isAddEvent(e)||bs.isRemoveEvent(e)){const _=b.data;return b.event=e,b.options=c,_.id=f.id,_.props=Yo(f.toJSON()),f.isEdge()?_.edge=!0:f.isNode()&&(_.node=!0),this.push(b,c)}if(bs.isChangeEvent(e)){const _=t.key,A=b.data;return(!b.batch||!b.event)&&(b.event=e,b.options=c,A.key=_,A.prev==null&&(A.prev={}),A.prev[_]=$p(f.previous(_)),v?b.modelChange=!0:A.id=f.id),A.next==null&&(A.next={}),A.next[_]=$p(f.prop(_)),this.push(b,c)}const w=this.options.afterAddCommand;w&&er(w,this,e,t,b),this.push(b,c)}initBatchCommand(e){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}storeBatchCommand(e){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){const t=this.filterBatchCommand(this.batchCommands);t.length>0&&(this.redoStack=[],this.undoStack.push(t),this.consolidateCommands(),this.notify("add",t,e)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}filterBatchCommand(e){let t=e.slice();const o=[];for(;t.length>0;){const c=t.shift(),d=c.event,f=c.data.id;if(d!=null&&(f!=null||c.modelChange)){if(bs.isAddEvent(d)){const v=t.findIndex(b=>bs.isRemoveEvent(b.event)&&b.data.id===f);if(v>=0){t=t.filter((b,w)=>v<w||b.data.id!==f);continue}}else if(bs.isRemoveEvent(d)){const v=t.findIndex(b=>bs.isAddEvent(b.event)&&b.data.id===f);if(v>=0){t.splice(v,1);continue}}else if(bs.isChangeEvent(d)){const v=c.data;if(gu(v.prev,v.next))continue}o.push(c)}}return o}notify(e,t,o){const c=t==null?null:Array.isArray(t)?t:[t];this.emit(e,{cmds:c,options:o}),this.emit("change",{cmds:c,options:o})}push(e,t){this.redoStack=[],e.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:e,options:t})):(this.undoStack.push(e),this.consolidateCommands(),this.notify("add",e,t))}consolidateCommands(){var e;const t=this.undoStack[this.undoStack.length-1],o=this.undoStack[this.undoStack.length-2];if(!Array.isArray(t))return;const c=new Set(t.map(f=>f.event));if(c.size!==2||!c.has("cell:change:parent")||!c.has("cell:change:children")||!t.every(f=>{var v;return f.batch&&((v=f.options)===null||v===void 0?void 0:v.ui)})||!Array.isArray(o)||o.length!==1)return;const d=o[0];d.event!=="cell:change:position"||!(!((e=d.options)===null||e===void 0)&&e.ui)||(o.push(...t),this.undoStack.pop())}}Gv([Ss.dispose()],m0.prototype,"dispose",null),function(l){class e extends Ss{constructor(o){super(),this.map={},this.command=o.history,this.cancelInvalid=o.cancelInvalid!==!1,this.command.on("add",this.onCommandAdded,this)}onCommandAdded({cmds:o}){return Array.isArray(o)?o.every(c=>this.isValidCommand(c)):this.isValidCommand(o)}isValidCommand(o){if(o.options&&o.options.validation===!1)return!0;const c=o.event&&this.map[o.event]||[];let d=null;return c.forEach(f=>{let v=0;const b=w=>{const _=f[v];v+=1;try{if(_)_(w,o,b);else{d=w;return}}catch(A){b(A)}};b(d)}),d?(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:d}),!1):!0}validate(o,...c){const d=Array.isArray(o)?o:o.split(/\s+/);return c.forEach(f=>{if(typeof f!="function")throw new Error(`${d.join(" ")} requires callback functions.`)}),d.forEach(f=>{this.map[f]==null&&(this.map[f]=[]),this.map[f].push(c)}),this}dispose(){this.command.off("add",this.onCommandAdded,this)}}Gv([Ss.dispose()],e.prototype,"dispose",null),l.Validator=e}(m0||(m0={}));var bs;(function(l){function e(f){return f==="cell:added"}l.isAddEvent=e;function t(f){return f==="cell:removed"}l.isRemoveEvent=t;function o(f){return f!=null&&f.startsWith("cell:change:")}l.isChangeEvent=o;function c(f){const{graph:v}=f,b=M3(f,["graph"]),w=["cell:added","cell:removed","cell:change:*"],_=["batch:start","batch:stop"],A=f.eventNames?f.eventNames.filter(P=>!(l.isChangeEvent(P)||w.includes(P)||_.includes(P))):w;return Object.assign(Object.assign({},b),{eventNames:A,applyOptionsList:f.applyOptionsList||["propertyPath"],revertOptionsList:f.revertOptionsList||["propertyPath"]})}l.getOptions=c;function d(f){const v=[];for(let b=0,w=f.length;b<w;b+=1){const _=f[b];let A=null;if(l.isAddEvent(_.event)){const P=_.data.id;for(let V=0;V<b;V+=1)if(f[V].data.id===P){A=V;break}}A!==null?v.splice(A,0,_):v.push(_)}return v}l.sortBatchCommands=d})(bs||(bs={}));var Ry=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Au extends _o{get widgetOptions(){return this.options.minimap}init(){this.widget=this.graph.hook.createMiniMap()}dispose(){this.widget&&this.widget.dispose()}}Ry([_o.dispose()],Au.prototype,"dispose",null);var ky=M(42441),O3=M.n(ky),AA=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Td extends mh{constructor(e){super(),this.options=e;const t=this.graph.scroller.widget;this.container=t?t.container:this.graph.container,e.global?this.target=document:(this.target=this.container,this.disabled||this.target.setAttribute("tabindex","-1"),this.graph.on("cell:mouseup",this.focus,this),this.graph.on("blank:mouseup",this.focus,this)),this.mousetrap=Td.createMousetrap(this)}get graph(){return this.options.graph}get disabled(){return this.options.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}on(e,t,o){this.mousetrap.bind(this.getKeys(e),t,o)}off(e,t){this.mousetrap.unbind(this.getKeys(e),t)}focus(e){if(this.isInputEvent(e.e))return;this.target.focus({preventScroll:!0})}getKeys(e){return(Array.isArray(e)?e:[e]).map(t=>this.formatkey(t))}formatkey(e){const t=e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),o=this.options.format;return o?er(o,this.graph,t):t}isGraphEvent(e){const t=e.srcElement||e.target,o=e.currentTarget;return t?t===this.target||o===this.target||t===document.body?!0:Ym(this.container,t):!1}isInputEvent(e){var t;const o=e.target,c=(t=o?.tagName)===null||t===void 0?void 0:t.toLowerCase();return["input","textarea"].includes(c)}isEnabledForEvent(e){const t=!this.disabled&&this.isGraphEvent(e),o=this.isInputEvent(e);if(t){const c=e.keyCode||e.which;if(o&&(c===8||c===46))return!1;if(this.options.guard)return er(this.options.guard,this.graph,e)}return t}dispose(){this.mousetrap.reset()}}AA([mh.dispose()],Td.prototype,"dispose",null),function(l){function e(t){const o=new(O3())(t.target),c=o.stopCallback;return o.stopCallback=(d,f,v)=>t.isEnabledForEvent(d)?c?c.call(o,d,f,v):!1:!0,o}l.createMousetrap=e}(Td||(Td={}));var Ly=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Fv extends mh{constructor(e){super(),this.options=e,this.cumulatedFactor=1;const t=this.graph.scroller.widget;this.container=t?t.container:this.graph.container,this.target=this.options.global?document:this.container,this.mousewheelHandle=new IC(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.options.enabled&&this.enable(!0)}get graph(){return this.options.graph}get disabled(){return this.options.enabled!==!0}enable(e){(this.disabled||e)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(e){const t=e.originalEvent||e,o=this.options.guard;return(o==null||o.call(this.graph,t))&&xh.isMatch(t,this.options.modifiers)}onMouseWheel(e){const t=e.originalEvent||e,o=this.options.guard;if((o==null||o.call(this.graph,t))&&xh.isMatch(t,this.options.modifiers)){const c=this.options.factor||1.2;this.currentScale==null&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx),e.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*c*20)/20/this.currentScale:this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*(1/c)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const f=this.graph.scroller.widget,v=this.currentScale;let b=this.graph.transform.clampScale(v*this.cumulatedFactor);const w=this.options.minScale||Number.MIN_SAFE_INTEGER,_=this.options.maxScale||Number.MAX_SAFE_INTEGER;if(b=Jc(b,w,_),b!==v)if(f)if(this.options.zoomAtMousePosition){const A=this.graph.coord.clientToLocalPoint(this.startPos);f.zoom(b,{absolute:!0,center:A.clone()})}else f.zoom(b,{absolute:!0});else if(this.options.zoomAtMousePosition){const A=this.graph.coord.clientToGraphPoint(this.startPos);this.graph.transform.zoom(b,{absolute:!0,center:A.clone(),ui:!0})}else this.graph.transform.zoom(b,{absolute:!0,ui:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}Ly([mh.dispose()],Fv.prototype,"dispose",null);var Gy=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class df extends _o{show(e={}){const t=Object.assign(Object.assign({},df.defaultOptions),e),o=this.createPrintPages(t);t.ready(o,c=>this.showPrintWindow(c,t),{sheetSize:this.getSheetSize(t)})}get className(){return this.view.prefixClassName("graph-print")}showPrintWindow(e,t){if(e){const o=G()(document.body),c=G()(this.view.container),d=this.view.prefixClassName("graph-printing");o.addClass(d);const f=c.children().detach();e.forEach(w=>{w.removeClass(`${this.className}-preview`).addClass(`${this.className}-ready`).appendTo(o)});let v=!1;const b=()=>{v||(v=!0,o.removeClass(d),e.forEach(w=>w.remove()),c.append(f),G()(`#${this.styleSheetId}`).remove(),this.graph.trigger("after:print",t),G()(window).off("afterprint",b))};G()(window).one("afterprint",b),setTimeout(b,200),window.print()}}createPrintPage(e,t){this.graph.trigger("before:print",t);const o=G()("<div/>").addClass(this.className),c=G()("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");t.size&&o.addClass(`${this.className}-size-${t.size}`);const d=sr.create(this.view.svg).clone(),f=d.findOne(`.${this.view.prefixClassName("graph-svg-stage")}`);c.append(d.node);const v=this.getSheetSize(t),b=this.graph.transform.getGraphArea(),w=this.graph.transform.getScale(),_=this.graph.translate(),A=oc().translate(_.tx/w.sx,_.ty/w.sy),P=this.getPageInfo(b,e,v),V=P.scale,q=P.bbox;return c.css({left:0,top:0}),d.attr({width:q.width*V,height:q.height*V,style:"position:relative",viewBox:[q.x,q.y,q.width,q.height].join(" ")}),f.attr("transform",Qf(A)),o.append(c),o.addClass(`${this.className}-preview`),{$page:o,sheetSize:v}}createPrintPages(e){let t;const o=this.getPrintArea(e),c=[];if(e.page){const d=this.getPageSize(o,e.page);this.getPageAreas(o,d).forEach(v=>{t=this.createPrintPage(v,e),c.push(t.$page)})}else t=this.createPrintPage(o,e),c.push(t.$page);if(t){const d={width:t.sheetSize.cssWidth,height:t.sheetSize.cssHeight};this.updatePrintStyle(d,e)}return c}get styleSheetId(){return this.view.prefixClassName("graph-print-style")}updatePrintStyle(e,t){const o=Object.keys(e).reduce((_,A)=>`${_} ${A}:${e[A]};`,""),c=wl(t.margin),d=t.marginUnit||"",f=t.sheetUnit||"",v=`
      @media print {
        .${this.className}.${this.className}-ready {
          ${o}
        }

        @page {
          margin:
          ${[c.top+d,c.right+d,c.bottom+d,c.left+d].join(" ")};
          size: ${t.sheet.width+f} ${t.sheet.height+f};

        .${this.className}.${this.className}-preview {
          ${o}
        }
      }`,b=this.styleSheetId,w=G()(`#${b}`);w.length?w.html(v):G()("head").append(`'<style type="text/css" id="${b}">${v}</style>'`)}getPrintArea(e){let t=e.area;if(!t){const o=wl(e.padding);t=this.graph.getContentArea().moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom})}return t}getPageSize(e,t){if(typeof t=="object"){const o=t,c={width:o.width,height:o.height};return c.width==null&&(c.width=Math.ceil(e.width/(o.columns||1))),c.height==null&&(c.height=Math.ceil(e.height/(o.rows||1))),c}return{width:e.width,height:e.height}}getPageAreas(e,t){const o=[],c=t.width,d=t.height;for(let f=0,v=0;f<e.height&&v<200;f+=d,v+=1)for(let b=0,w=0;b<e.width&&w<200;b+=c,w+=1)o.push(new Rn(e.x+b,e.y+f,c,d));return o}getSheetSize(e){const t=e.sheet,o=wl(e.margin),c=e.marginUnit||"",d=e.sheetUnit||"",f=`calc(${t.width}${d} - ${o.left+o.right}${c})`,v=`calc(${t.height}${d} - ${o.top+o.bottom}${c})`,b=xC.measure(f,v);return{cssWidth:f,cssHeight:v,width:b.width,height:b.height}}getPageInfo(e,t,o){const c=new Rn(t.x-e.x,t.y-e.y,t.width,t.height),d=c.width/c.height,f=o.width/o.height;return{bbox:c,scale:f<d?o.width/c.width:o.height/c.height,fitHorizontal:f<d}}dispose(){}}Gy([_o.dispose()],df.prototype,"dispose",null),function(l){l.defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:(e,t)=>t(e)}}(df||(df={}));class Bv extends _o{toSVG(e,t={}){this.graph.trigger("before:export",t);const o=this.view.svg,c=sr.create(o).clone();let d=c.node;const f=c.findOne(`.${this.view.prefixClassName("graph-svg-stage")}`),v=t.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),b=t.preserveDimensions;if(b){const A=typeof b=="boolean"?v:b;c.attr({width:A.width,height:A.height})}if(c.removeAttribute("style").attr("viewBox",[v.x,v.y,v.width,v.height].join(" ")),f.removeAttribute("transform"),t.copyStyles!==!1){const A=o.ownerDocument,P=Array.from(o.querySelectorAll("*")),V=Array.from(d.querySelectorAll("*")),q=A.styleSheets.length,ee=[];for(let ke=q-1;ke>=0;ke-=1)ee[ke]=A.styleSheets[ke],A.styleSheets[ke].disabled=!0;const ge={};P.forEach((ke,Se)=>{const Ue=window.getComputedStyle(ke,null),Qe={};Object.keys(Ue).forEach(bt=>{Qe[bt]=Ue.getPropertyValue(bt)}),ge[Se]=Qe}),q!==A.styleSheets.length&&ee.forEach((ke,Se)=>{A.styleSheets[Se]=ke});for(let ke=0;ke<q;ke+=1)A.styleSheets[ke].disabled=!1;const _e={};P.forEach((ke,Se)=>{const Ue=window.getComputedStyle(ke,null),Qe=ge[Se],bt={};Object.keys(Ue).forEach(Ot=>{!eS(Ot)&&Ue.getPropertyValue(Ot)!==Qe[Ot]&&(bt[Ot]=Ue.getPropertyValue(Ot))}),_e[Se]=bt}),V.forEach((ke,Se)=>{G()(ke).css(_e[Se])})}const w=t.stylesheet;if(typeof w=="string"){const A=o.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(w);c.prepend(sr.create("style",{type:"text/css"},[A]))}const _=()=>{const A=t.beforeSerialize;if(typeof A=="function"){const V=er(A,this.graph,d);V instanceof SVGSVGElement&&(d=V)}const P=new XMLSerializer().serializeToString(d).replace(/&nbsp;/g,"\xA0");this.graph.trigger("after:export",t),e(P)};if(t.serializeImages){const A=c.find("image").map(P=>new Promise(V=>{const q=P.attr("xlink:href")||P.attr("href");vS.imageToDataUri(q,(ee,ge)=>{!ee&&ge&&P.attr("xlink:href",ge),V()})}));Promise.all(A).then(_)}else _()}toDataURL(e,t){let o=t.viewBox||this.graph.getContentBBox();const c=wl(t.padding);t.width&&t.height&&(c.left+c.right>=t.width&&(c.left=c.right=0),c.top+c.bottom>=t.height&&(c.top=c.bottom=0));const d=new Rn(-c.left,-c.top,c.left+c.right,c.top+c.bottom);if(t.width&&t.height){const _=o.width+c.left+c.right,A=o.height+c.top+c.bottom;d.scale(_/t.width,A/t.height)}o=Rn.create(o).moveAndExpand(d);const f=typeof t.width=="number"&&typeof t.height=="number"?{width:t.width,height:t.height}:o;let v=t.ratio?parseFloat(t.ratio):1;(!Number.isFinite(v)||v===0)&&(v=1);const b={width:Math.max(Math.round(f.width*v),1),height:Math.max(Math.round(f.height*v),1)};{const _=document.createElement("canvas"),A=_.getContext("2d");_.width=b.width,_.height=b.height;const P=b.width-1,V=b.height-1;A.fillStyle="rgb(1,1,1)",A.fillRect(P,V,1,1);const q=A.getImageData(P,V,1,1).data;if(q[0]!==1||q[1]!==1||q[2]!==1)throw new Error("size exceeded")}const w=new Image;w.onload=()=>{const _=document.createElement("canvas");_.width=b.width,_.height=b.height;const A=_.getContext("2d");A.fillStyle=t.backgroundColor||"white",A.fillRect(0,0,b.width,b.height);try{A.drawImage(w,0,0,b.width,b.height);const P=_.toDataURL(t.type,t.quality);e(P)}catch{}},this.toSVG(_=>{w.src=`data:image/svg+xml,${encodeURIComponent(_)}`},Object.assign(Object.assign({},t),{viewBox:o,serializeImages:!0,preserveDimensions:Object.assign({},b)}))}toPNG(e,t={}){this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/png"}))}toJPEG(e,t={}){this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/jpeg"}))}}class e1 extends _o{constructor(){super(...arguments),this.widgets=new Map}get isSelectionEnabled(){return this.options.selecting.enabled===!0}init(){this.startListening()}startListening(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}stopListening(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}onNodeMouseUp({node:e}){if(!this.isSelectionEnabled){const t=this.graph.hook.createKnob(e,{clearAll:!0});t&&this.widgets.set(e,t)}}onNodeSelected({node:e}){if(this.isSelectionEnabled){const t=this.graph.hook.createKnob(e,{clearAll:!1});t&&this.widgets.set(e,t)}}onNodeUnSelected({node:e}){if(this.isSelectionEnabled){const t=this.widgets.get(e);t&&t.forEach(o=>o.dispose()),this.widgets.delete(e)}}}var Fy=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class TA extends _o{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&this.widgetOptions.enabled===!0}init(){this.startListening(),this.updateClassName()}startListening(){const e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.graph.container).on("mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new IC(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}stopListening(){const e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.graph.container).off("mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}preparePanning({e}){(this.allowPanning(e,!0)||this.allowPanning(e)&&!this.graph.selection.allowRubberband(e,!0))&&this.startPanning(e)}allowPanning(e,t){return this.pannable&&xh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}startPanning(e){const t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.view.normalizeEvent(e),o=t.clientX-this.clientX,c=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY;const d=this.graph.transform.getTranslation(),f=d.tx+o,v=d.ty+c;this.graph.transform.translate(f,v,{ui:!0})}stopPanning(e){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")}updateClassName(){const e=this.view.container,t=this.view.prefixClassName("graph-panning"),o=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(co(e,t),yc(e,o)):(yc(e,t),co(e,o)):(yc(e,t),yc(e,o))}onRightMouseDown(e){e.button===2&&this.allowPanning(e,!0)&&this.startPanning(e)}allowMouseWheel(e){return this.pannable&&!e.ctrlKey}onMouseWheel(e,t,o){e.ctrlKey||this.graph.translateBy(-t,-o)}autoPanning(e,t){const c=this.graph.getGraphArea();let d=0,f=0;e<=c.left+10&&(d=-10),t<=c.top+10&&(f=-10),e>=c.right-10&&(d=10),t>=c.bottom-10&&(f=10),(d!==0||f!==0)&&this.graph.translateBy(-d,-f)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}Fy([_o.dispose()],TA.prototype,"dispose",null);var P3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class y0 extends _o{hasScroller(){return this.graph.scroller.widget!=null}getContainer(){return this.hasScroller()?this.graph.scroller.widget.container:this.graph.container}init(){const e=this.options.autoResize;if(e){const t=typeof e=="boolean"?this.getContainer():e;E2.bind(t,()=>{const o=this.getContainer(),c=o.offsetWidth,d=o.offsetHeight;this.resize(c,d)})}}resize(e,t){this.hasScroller()?this.resizeScroller(e,t):this.resizeGraph(e,t)}resizeGraph(e,t){this.graph.transform.resize(e,t)}resizeScroller(e,t){this.graph.scroller.resize(e,t)}resizePage(e,t){const o=this.graph.scroller.widget;o&&o.updatePageSize(e,t)}dispose(){E2.clear(this.getContainer())}}P3([_o.dispose()],y0.prototype,"dispose",null);var Mi=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},t1=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t},mi;(function(l){function e(o,c){return(d,f,v)=>{const b=v.value,w=c||f;v.value=function(..._){const A=this.options[w];if(A!=null){this.getNativeValue=b.bind(this,..._);const P=er(A,this.graph,..._);if(this.getNativeValue=null,P!=null||o===!0&&P===null)return P}return b.call(this,..._)}}}l.hook=e;function t(o){return(c,d,f)=>{const v=f.value,b=o||d;f.value=function(...w){let _=v.call(this,...w);const A=this.options[b];return A!=null&&(_=er(A,this.graph,...w)&&_),_}}}l.after=t})(mi||(mi={}));class yi extends _o{createModel(){if(this.options.model)return this.options.model;const e=new kc;return e.graph=this.graph,e}createView(){return new bh(this.graph)}createRenderer(){return new Zi(this.graph)}createDefsManager(){return new Dy(this.graph)}createGridManager(){return new p0(this.graph)}createCoordManager(){return new Ny(this.graph)}createKnobManager(){return new e1(this.graph)}createTransform(e,t){const o=this.getTransformOptions(e);return o.resizable||o.rotatable?new My(Object.assign(Object.assign({node:e,graph:this.graph},o),t)):(o.clearAll&&My.removeInstances(this.graph),null)}createKnob(e,t){const o=Tl.parseOptionGroup(this.graph,e,this.options.knob),c=Object.assign(Object.assign({},o),t);c.clearAll&&EA.removeInstances(this.graph),c.clearAll=!1;const d=e.prop("knob"),f=[];return(Array.isArray(d)?d:[d]).forEach((b,w)=>{if(b){if(b.enabled===!1||typeof b.enabled=="function"&&b.enabled.call(this.graph,e)===!1)return}else return;o.enabled&&f.push(new EA(Object.assign({node:e,index:w,graph:this.graph},c)))}),f}getTransformOptions(e){const t=Tl.parseOptionGroup(this.graph,e,this.options.resizing),o=Tl.parseOptionGroup(this.graph,e,this.options.rotating),c=Tl.parseOptionGroup(this.graph,e,this.options.transforming);return Object.assign(Object.assign({},c),{resizable:t.enabled,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,orthogonalResizing:t.orthogonal,restrictedResizing:t.restrict!=null?t.restrict:t.restricted,autoScrollOnResizing:t.autoScroll,preserveAspectRatio:t.preserveAspectRatio,allowReverse:t.allowReverse,rotatable:o.enabled,rotateGrid:o.grid})}createTransformManager(){return new v0(this.graph)}createHighlightManager(){return new g0(this.graph)}createBackgroundManager(){return new h0(this.graph)}createClipboard(){return new By}createClipboardManager(){return new kv(this.graph)}createSnapline(){return new _A(Object.assign({graph:this.graph},this.options.snapline))}createSnaplineManager(){return new Iv(this.graph)}createSelection(){return new f0(Object.assign({graph:this.graph},this.options.selecting))}createSelectionManager(){return new Lv(this.graph)}allowRubberband(e){return!0}createHistoryManager(){return new m0(Object.assign({graph:this.graph},this.options.history))}createScroller(){return this.options.scroller.enabled?new uf(Object.assign({graph:this.graph},this.options.scroller)):null}createScrollerManager(){return new Rv(this.graph)}allowPanning(e){return!0}createMiniMap(){const e=this.options.minimap,{enabled:t}=e,o=t1(e,["enabled"]);return t?new SA(Object.assign({graph:this.graph},o)):null}createMiniMapManager(){return new Au(this.graph)}createKeyboard(){return new Td(Object.assign({graph:this.graph},this.options.keyboard))}createMouseWheel(){return new Fv(Object.assign({graph:this.graph},this.options.mousewheel))}createPrintManager(){return new df(this.graph)}createFormatManager(){return new Bv(this.graph)}createPanningManager(){return new TA(this.graph)}createSizeManager(){return new y0(this.graph)}allowConnectToBlank(e){const t=this.options.connecting,o=t.allowBlank!=null?t.allowBlank:t.dangling;if(typeof o!="function")return!!o;const c=this.graph.findViewByCell(e),d=e.getSourceCell(),f=e.getTargetCell(),v=this.graph.findViewByCell(d),b=this.graph.findViewByCell(f);return er(o,this.graph,{edge:e,edgeView:c,sourceCell:d,targetCell:f,sourceView:v,targetView:b,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:c.sourceMagnet,targetMagnet:c.targetMagnet})}validateEdge(e,t,o){if(!this.allowConnectToBlank(e)){const d=e.getSourceCellId(),f=e.getTargetCellId();if(!(d&&f))return!1}const c=this.options.connecting.validateEdge;return c?er(c,this.graph,{edge:e,type:t,previous:o}):!0}validateMagnet(e,t,o){if(t.getAttribute("magnet")!=="passive"){const c=this.options.connecting.validateMagnet;return c?er(c,this.graph,{e:o,magnet:t,view:e,cell:e.cell}):!0}return!1}getDefaultEdge(e,t){let o;const c=this.options.connecting.createEdge;return c&&(o=er(c,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),o==null&&(o=new xw),o}validateConnection(e,t,o,c,d,f,v){const b=this.options.connecting,w=b.allowLoop,_=b.allowNode,A=b.allowEdge,P=b.allowPort,V=b.allowMulti!=null?b.allowMulti:b.multi,q=b.validateConnection,ee=f?f.cell:null,ge=d==="target"?o:e,_e=d==="target"?c:t;let ke=!0;const Se=Ue=>{const Qe=d==="source"?v?v.port:null:ee?ee.getSourcePortId():null,bt=d==="target"?v?v.port:null:ee?ee.getTargetPortId():null;return er(Ue,this.graph,{edge:ee,edgeView:f,sourceView:e,targetView:o,sourcePort:Qe,targetPort:bt,sourceMagnet:t,targetMagnet:c,sourceCell:e?e.cell:null,targetCell:o?o.cell:null,type:d})};if(w!=null&&(typeof w=="boolean"?!w&&e===o&&(ke=!1):ke=Se(w)),ke&&P!=null&&(typeof P=="boolean"?!P&&_e&&(ke=!1):ke=Se(P)),ke&&A!=null&&(typeof A=="boolean"?!A&&af.isEdgeView(ge)&&(ke=!1):ke=Se(A)),ke&&_!=null&&_e==null&&(typeof _=="boolean"?!_&&bc.isNodeView(ge)&&(ke=!1):ke=Se(_)),ke&&V!=null&&f){const Ue=f.cell,Qe=d==="source"?v:Ue.getSource(),bt=d==="target"?v:Ue.getTarget(),Ot=v?this.graph.getCellById(v.cell):null;if(Qe&&bt&&Qe.cell&&bt.cell&&Ot)if(typeof V=="function")ke=Se(V);else{const Kt=this.model.getConnectedEdges(Ot,{outgoing:d==="source",incoming:d==="target"});Kt.length&&(V==="withPort"?Kt.some(Cn=>{const Sn=Cn.getSource(),Ln=Cn.getTarget();return Sn&&Ln&&Sn.cell===Qe.cell&&Ln.cell===bt.cell&&Sn.port!=null&&Sn.port===Qe.port&&Ln.port!=null&&Ln.port===bt.port})&&(ke=!1):V||Kt.some(Cn=>{const Sn=Cn.getSource(),Ln=Cn.getTarget();return Sn&&Ln&&Sn.cell===Qe.cell&&Ln.cell===bt.cell})&&(ke=!1))}}return ke&&q!=null&&(ke=Se(q)),ke}getRestrictArea(e){const t=this.options.translating.restrict,o=typeof t=="function"?er(t,this.graph,e):t;return typeof o=="number"?this.graph.transform.getGraphArea().inflate(o):o===!0?this.graph.transform.getGraphArea():o||null}onViewUpdated(e,t,o){t&Zi.FLAG_INSERT||o.mounting||this.graph.renderer.requestConnectedEdgesUpdate(e,o)}onViewPostponed(e,t,o){return this.graph.renderer.forcePostponedViewUpdate(e,t)}getCellView(e){return null}createCellView(e){const t={graph:this.graph},o=this.getCellView(e);if(o)return new o(e,t);const c=e.view;if(c!=null&&typeof c=="string"){const d=Gs.registry.get(c);return d?new d(e,t):Gs.registry.onNotFound(c)}return e.isNode()?new bc(e,t):e.isEdge()?new af(e,t):null}getHTMLComponent(e){let t=e.getHTML();return typeof t=="string"&&(t=_u.componentRegistry.get(t)||t),Xc(t)&&(t=t.render),typeof t=="function"?er(t,this.graph,e):t}shouldUpdateHTMLComponent(e){let t=e.getHTML();if(typeof t=="string"&&(t=_u.componentRegistry.get(t)||t),Xc(t)){const o=t.shouldComponentUpdate;return typeof o=="function"?er(o,this.graph,e):!!o}return!1}onEdgeLabelRendered(e){}onPortRendered(e){}onToolItemCreated(e){}}Mi([mi.hook()],yi.prototype,"createModel",null),Mi([mi.hook()],yi.prototype,"createView",null),Mi([mi.hook()],yi.prototype,"createRenderer",null),Mi([mi.hook()],yi.prototype,"createDefsManager",null),Mi([mi.hook()],yi.prototype,"createGridManager",null),Mi([mi.hook()],yi.prototype,"createCoordManager",null),Mi([mi.hook()],yi.prototype,"createKnobManager",null),Mi([mi.hook()],yi.prototype,"createTransform",null),Mi([mi.hook()],yi.prototype,"createKnob",null),Mi([mi.hook()],yi.prototype,"createTransformManager",null),Mi([mi.hook()],yi.prototype,"createHighlightManager",null),Mi([mi.hook()],yi.prototype,"createBackgroundManager",null),Mi([mi.hook()],yi.prototype,"createClipboard",null),Mi([mi.hook()],yi.prototype,"createClipboardManager",null),Mi([mi.hook()],yi.prototype,"createSnapline",null),Mi([mi.hook()],yi.prototype,"createSnaplineManager",null),Mi([mi.hook()],yi.prototype,"createSelection",null),Mi([mi.hook()],yi.prototype,"createSelectionManager",null),Mi([mi.hook()],yi.prototype,"allowRubberband",null),Mi([mi.hook()],yi.prototype,"createHistoryManager",null),Mi([mi.hook()],yi.prototype,"createScroller",null),Mi([mi.hook()],yi.prototype,"createScrollerManager",null),Mi([mi.hook()],yi.prototype,"allowPanning",null),Mi([mi.hook()],yi.prototype,"createMiniMap",null),Mi([mi.hook()],yi.prototype,"createMiniMapManager",null),Mi([mi.hook()],yi.prototype,"createKeyboard",null),Mi([mi.hook()],yi.prototype,"createMouseWheel",null),Mi([mi.hook()],yi.prototype,"createPrintManager",null),Mi([mi.hook()],yi.prototype,"createFormatManager",null),Mi([mi.hook()],yi.prototype,"createPanningManager",null),Mi([mi.hook()],yi.prototype,"createSizeManager",null),Mi([mi.after()],yi.prototype,"onViewUpdated",null),Mi([mi.after()],yi.prototype,"onViewPostponed",null),Mi([mi.hook()],yi.prototype,"getCellView",null),Mi([mi.hook(!0)],yi.prototype,"createCellView",null),Mi([mi.hook()],yi.prototype,"getHTMLComponent",null),Mi([mi.hook()],yi.prototype,"shouldUpdateHTMLComponent",null),Mi([mi.hook()],yi.prototype,"onEdgeLabelRendered",null),Mi([mi.hook()],yi.prototype,"onPortRendered",null),Mi([mi.hook()],yi.prototype,"onToolItemCreated",null);var Yl=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Qi extends Ss{constructor(e){super(),this.options=Tl.get(e),this.css=new lf(this),this.hook=new yi(this),this.view=this.hook.createView(),this.defs=this.hook.createDefsManager(),this.coord=this.hook.createCoordManager(),this.transform=this.hook.createTransformManager(),this.knob=this.hook.createKnobManager(),this.highlight=this.hook.createHighlightManager(),this.grid=this.hook.createGridManager(),this.background=this.hook.createBackgroundManager(),this.model=this.hook.createModel(),this.renderer=this.hook.createRenderer(),this.clipboard=this.hook.createClipboardManager(),this.snapline=this.hook.createSnaplineManager(),this.selection=this.hook.createSelectionManager(),this.history=this.hook.createHistoryManager(),this.scroller=this.hook.createScrollerManager(),this.minimap=this.hook.createMiniMapManager(),this.keyboard=this.hook.createKeyboard(),this.mousewheel=this.hook.createMouseWheel(),this.print=this.hook.createPrintManager(),this.format=this.hook.createFormatManager(),this.panning=this.hook.createPanningManager(),this.size=this.hook.createSizeManager()}get container(){return this.view.container}get[Symbol.toStringTag](){return Qi.toStringTag}isNode(e){return e.isNode()}isEdge(e){return e.isEdge()}resetCells(e,t={}){return this.model.resetCells(e,t),this}clearCells(e={}){return this.model.clear(e),this}toJSON(e={}){return this.model.toJSON(e)}parseJSON(e){return this.model.parseJSON(e)}fromJSON(e,t={}){return this.model.fromJSON(e,t),this}getCellById(e){return this.model.getCell(e)}addNode(e,t={}){return this.model.addNode(e,t)}addNodes(e,t={}){return this.addCell(e.map(o=>ys.isNode(o)?o:this.createNode(o)),t)}createNode(e){return this.model.createNode(e)}removeNode(e,t={}){return this.model.removeCell(e,t)}addEdge(e,t={}){return this.model.addEdge(e,t)}addEdges(e,t={}){return this.addCell(e.map(o=>ss.isEdge(o)?o:this.createEdge(o)),t)}removeEdge(e,t={}){return this.model.removeCell(e,t)}createEdge(e){return this.model.createEdge(e)}addCell(e,t={}){return this.model.addCell(e,t),this}removeCell(e,t={}){return this.model.removeCell(e,t)}removeCells(e,t={}){return this.model.removeCells(e,t)}removeConnectedEdges(e,t={}){return this.model.removeConnectedEdges(e,t)}disconnectConnectedEdges(e,t={}){return this.model.disconnectConnectedEdges(e,t),this}hasCell(e){return this.model.has(e)}getCell(e){return this.model.getCell(e)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(e){return this.model.getOutgoingEdges(e)}getIncomingEdges(e){return this.model.getIncomingEdges(e)}getConnectedEdges(e,t={}){return this.model.getConnectedEdges(e,t)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(e){return this.model.isRoot(e)}isLeafNode(e){return this.model.isLeaf(e)}getNeighbors(e,t={}){return this.model.getNeighbors(e,t)}isNeighbor(e,t,o={}){return this.model.isNeighbor(e,t,o)}getSuccessors(e,t={}){return this.model.getSuccessors(e,t)}isSuccessor(e,t,o={}){return this.model.isSuccessor(e,t,o)}getPredecessors(e,t={}){return this.model.getPredecessors(e,t)}isPredecessor(e,t,o={}){return this.model.isPredecessor(e,t,o)}getCommonAncestor(...e){return this.model.getCommonAncestor(...e)}getSubGraph(e,t={}){return this.model.getSubGraph(e,t)}cloneSubGraph(e,t={}){return this.model.cloneSubGraph(e,t)}cloneCells(e){return this.model.cloneCells(e)}getNodesFromPoint(e,t){return this.model.getNodesFromPoint(e,t)}getNodesInArea(e,t,o,c,d){return this.model.getNodesInArea(e,t,o,c,d)}getNodesUnderNode(e,t={}){return this.model.getNodesUnderNode(e,t)}searchCell(e,t,o={}){return this.model.search(e,t,o),this}getShortestPath(e,t,o={}){return this.model.getShortestPath(e,t,o)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(e,t={}){return this.model.getCellsBBox(e,t)}startBatch(e,t={}){this.model.startBatch(e,t)}stopBatch(e,t={}){this.model.stopBatch(e,t)}batchUpdate(e,t,o){const c=typeof e=="string"?e:"update",d=typeof e=="string"?t:e,f=typeof t=="function"?o:t;this.startBatch(c,f);const v=d();return this.stopBatch(c,f),v}updateCellId(e,t){return this.model.updateCellId(e,t)}isFrozen(){return this.renderer.isFrozen()}freeze(e={}){return this.renderer.freeze(e),this}unfreeze(e={}){return this.renderer.unfreeze(e),this}isAsync(){return this.renderer.isAsync()}setAsync(e){return this.renderer.setAsync(e),this}findView(e){return Ti.isCell(e)?this.findViewByCell(e):this.findViewByElem(e)}findViews(e){return Rn.isRectangleLike(e)?this.findViewsInArea(e):Ve.isPointLike(e)?this.findViewsFromPoint(e):[]}findViewByCell(e){return this.renderer.findViewByCell(e)}findViewByElem(e){return this.renderer.findViewByElem(e)}findViewsFromPoint(e,t){const o=typeof e=="number"?{x:e,y:t}:e;return this.renderer.findViewsFromPoint(o)}findViewsInArea(e,t,o,c,d){const f=typeof e=="number"?{x:e,y:t,width:o,height:c}:e,v=typeof e=="number"?d:t;return this.renderer.findViewsInArea(f,v)}isViewMounted(e){return this.renderer.isViewMounted(e)}getMountedViews(){return this.renderer.getMountedViews()}getUnmountedViews(){return this.renderer.getUnmountedViews()}matrix(e){return typeof e>"u"?this.transform.getMatrix():(this.transform.setMatrix(e),this)}resize(e,t){return this.size.resize(e,t),this}resizeGraph(e,t){return this.size.resizeGraph(e,t),this}resizeScroller(e,t){return this.size.resizeScroller(e,t),this}resizePage(e,t){return this.size.resizePage(e,t),this}scale(e,t=e,o=0,c=0){return typeof e>"u"?this.transform.getScale():(this.transform.scale(e,t,o,c),this)}zoom(e,t){const o=this.scroller.widget;if(o){if(typeof e>"u")return o.zoom();o.zoom(e,t)}else{if(typeof e>"u")return this.transform.getZoom();this.transform.zoom(e,t)}return this}zoomTo(e,t={}){const o=this.scroller.widget;return o?o.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})):this.transform.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})),this}zoomToRect(e,t={}){const o=this.scroller.widget;return o?o.zoomToRect(e,t):this.transform.zoomToRect(e,t),this}zoomToFit(e={}){const t=this.scroller.widget;return t?t.zoomToFit(e):this.transform.zoomToFit(e),this}rotate(e,t,o){return typeof e>"u"?this.transform.getRotation():(this.transform.rotate(e,t,o),this)}translate(e,t){return typeof e>"u"?this.transform.getTranslation():(this.transform.translate(e,t),this)}translateBy(e,t){const o=this.translate(),c=o.tx+e,d=o.ty+t;return this.translate(c,d)}getArea(){return this.transform.getGraphArea()}getGraphArea(){return this.transform.getGraphArea()}getContentArea(e={}){return this.transform.getContentArea(e)}getContentBBox(e={}){return this.transform.getContentBBox(e)}fitToContent(e,t,o,c){return this.transform.fitToContent(e,t,o,c)}scaleContentToFit(e={}){return this.transform.scaleContentToFit(e),this}center(e){return this.centerPoint(e)}centerPoint(e,t,o){const c=this.scroller.widget;return c?c.centerPoint(e,t,o):this.transform.centerPoint(e,t),this}centerContent(e){const t=this.scroller.widget;return t?t.centerContent(e):this.transform.centerContent(e),this}centerCell(e,t){const o=this.scroller.widget;return o?o.centerCell(e,t):this.transform.centerCell(e),this}positionPoint(e,t,o,c={}){const d=this.scroller.widget;return d?d.positionPoint(e,t,o,c):this.transform.positionPoint(e,t,o),this}positionRect(e,t,o){const c=this.scroller.widget;return c?c.positionRect(e,t,o):this.transform.positionRect(e,t),this}positionCell(e,t,o){const c=this.scroller.widget;return c?c.positionCell(e,t,o):this.transform.positionCell(e,t),this}positionContent(e,t){const o=this.scroller.widget;return o?o.positionContent(e,t):this.transform.positionContent(e,t),this}getClientMatrix(){return this.coord.getClientMatrix()}getClientOffset(){return this.coord.getClientOffset()}getPageOffset(){return this.coord.getPageOffset()}snapToGrid(e,t){return this.coord.snapToGrid(e,t)}pageToLocal(e,t,o,c){return Rn.isRectangleLike(e)?this.coord.pageToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.pageToLocalRect(e,t,o,c):this.coord.pageToLocalPoint(e,t)}localToPage(e,t,o,c){return Rn.isRectangleLike(e)?this.coord.localToPageRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.localToPageRect(e,t,o,c):this.coord.localToPagePoint(e,t)}clientToLocal(e,t,o,c){return Rn.isRectangleLike(e)?this.coord.clientToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.clientToLocalRect(e,t,o,c):this.coord.clientToLocalPoint(e,t)}localToClient(e,t,o,c){return Rn.isRectangleLike(e)?this.coord.localToClientRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.localToClientRect(e,t,o,c):this.coord.localToClientPoint(e,t)}localToGraph(e,t,o,c){return Rn.isRectangleLike(e)?this.coord.localToGraphRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.localToGraphRect(e,t,o,c):this.coord.localToGraphPoint(e,t)}graphToLocal(e,t,o,c){return Rn.isRectangleLike(e)?this.coord.graphToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.graphToLocalRect(e,t,o,c):this.coord.graphToLocalPoint(e,t)}clientToGraph(e,t,o,c){return Rn.isRectangleLike(e)?this.coord.clientToGraphRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.clientToGraphRect(e,t,o,c):this.coord.clientToGraphPoint(e,t)}defineFilter(e){return this.defs.filter(e)}defineGradient(e){return this.defs.gradient(e)}defineMarker(e){return this.defs.marker(e)}getGridSize(){return this.grid.getGridSize()}setGridSize(e){return this.grid.setGridSize(e),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(e){return this.grid.draw(e),this}updateBackground(){return this.background.update(),this}drawBackground(e,t){const o=this.scroller.widget;return o!=null&&(this.options.background==null||!t)?o.backgroundManager.draw(e):this.background.draw(e),this}clearBackground(e){const t=this.scroller.widget;return t!=null&&(this.options.background==null||!e)?t.backgroundManager.clear():this.background.clear(),this}isClipboardEnabled(){return!this.clipboard.disabled}enableClipboard(){return this.clipboard.enable(),this}disableClipboard(){return this.clipboard.disable(),this}toggleClipboard(e){return e!=null?e!==this.isClipboardEnabled()&&(e?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this}isClipboardEmpty(){return this.clipboard.isEmpty()}getCellsInClipboard(){return this.clipboard.cells}cleanClipboard(){return this.clipboard.clean(),this}copy(e,t={}){return this.clipboard.copy(e,t),this}cut(e,t={}){return this.clipboard.cut(e,t),this}paste(e={},t=this){return this.clipboard.paste(e,t)}isHistoryEnabled(){return!this.history.disabled}enableHistory(){return this.history.enable(),this}disableHistory(){return this.history.disable(),this}toggleHistory(e){return e!=null?e!==this.isHistoryEnabled()&&(e?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this}undo(e={}){return this.history.undo(e),this}undoAndCancel(e={}){return this.history.cancel(e),this}redo(e={}){return this.history.redo(e),this}canUndo(){return this.history.canUndo()}canRedo(){return this.history.canRedo()}cleanHistory(e={}){this.history.clean(e)}isKeyboardEnabled(){return!this.keyboard.disabled}enableKeyboard(){return this.keyboard.enable(),this}disableKeyboard(){return this.keyboard.disable(),this}toggleKeyboard(e){return e!=null?e!==this.isKeyboardEnabled()&&(e?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this}bindKey(e,t,o){return this.keyboard.on(e,t,o),this}unbindKey(e,t){return this.keyboard.off(e,t),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(e){return e==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():e?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){return this.scroller.widget?this.scroller.pannable:this.panning.pannable}enablePanning(){return this.scroller.widget?this.scroller.enablePanning():this.panning.enablePanning(),this}disablePanning(){return this.scroller.widget?this.scroller.disablePanning():this.panning.disablePanning(),this}togglePanning(e){return e==null?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}lockScroller(){var e;(e=this.scroller.widget)===null||e===void 0||e.lock()}unlockScroller(){var e;(e=this.scroller.widget)===null||e===void 0||e.unlock()}updateScroller(){var e;(e=this.scroller.widget)===null||e===void 0||e.update()}getScrollbarPosition(){return this.scroller.widget.scrollbarPosition()}setScrollbarPosition(e,t,o){return this.scroller.widget.scrollbarPosition(e,t,o),this}scrollToPoint(e,t,o){return this.scroller.widget.scrollToPoint(e,t,o),this}scrollToContent(e){return this.scroller.widget.scrollToContent(e),this}scrollToCell(e,t){return this.scroller.widget.scrollToCell(e,t),this}transitionToPoint(e,t,o){return this.scroller.widget.transitionToPoint(e,t,o),this}transitionToRect(e,t={}){return this.scroller.widget.transitionToRect(e,t),this}isSelectionEnabled(){return!this.selection.disabled}enableSelection(){return this.selection.enable(),this}disableSelection(){return this.selection.disable(),this}toggleSelection(e){return e!=null?e!==this.isSelectionEnabled()&&(e?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this}isMultipleSelection(){return this.selection.isMultiple()}enableMultipleSelection(){return this.selection.enableMultiple(),this}disableMultipleSelection(){return this.selection.disableMultiple(),this}toggleMultipleSelection(e){return e!=null?e!==this.isMultipleSelection()&&(e?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return this.selection.widget.options.movable!==!1}enableSelectionMovable(){return this.selection.widget.options.movable=!0,this}disableSelectionMovable(){return this.selection.widget.options.movable=!1,this}toggleSelectionMovable(e){return e!=null?e!==this.isSelectionMovable()&&(e?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.selection.rubberbandDisabled}enableRubberband(){return this.selection.enableRubberband(),this}disableRubberband(){return this.selection.disableRubberband(),this}toggleRubberband(e){return e!=null?e!==this.isRubberbandEnabled()&&(e?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return this.selection.widget.options.strict===!0}enableStrictRubberband(){return this.selection.widget.options.strict=!0,this}disableStrictRubberband(){return this.selection.widget.options.strict=!1,this}toggleStrictRubberband(e){return e!=null?e!==this.isStrictRubberband()&&(e?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(e){this.selection.setModifiers(e)}setSelectionFilter(e){return this.selection.setFilter(e),this}setSelectionDisplayContent(e){return this.selection.setContent(e),this}isSelectionEmpty(){return this.selection.isEmpty()}cleanSelection(e){return this.selection.clean(e),this}resetSelection(e,t){return this.selection.reset(e,t),this}getSelectedCells(){return this.selection.cells}getSelectedCellCount(){return this.selection.length}isSelected(e){return this.selection.isSelected(e)}select(e,t){return this.selection.select(e,t),this}unselect(e,t){return this.selection.unselect(e,t),this}isSnaplineEnabled(){return!this.snapline.widget.disabled}enableSnapline(){return this.snapline.widget.enable(),this}disableSnapline(){return this.snapline.widget.disable(),this}toggleSnapline(e){if(e!=null)e!==this.isSnaplineEnabled()&&(e?this.enableSnapline():this.disableSnapline());else return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this}hideSnapline(){return this.snapline.widget.hide(),this}setSnaplineFilter(e){return this.snapline.widget.setFilter(e),this}isSnaplineOnResizingEnabled(){return this.snapline.widget.options.resizing===!0}enableSnaplineOnResizing(){return this.snapline.widget.options.resizing=!0,this}disableSnaplineOnResizing(){return this.snapline.widget.options.resizing=!1,this}toggleSnaplineOnResizing(e){return e!=null?e!==this.isSnaplineOnResizingEnabled()&&(e?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this}isSharpSnapline(){return this.snapline.widget.options.sharp===!0}enableSharpSnapline(){return this.snapline.widget.options.sharp=!0,this}disableSharpSnapline(){return this.snapline.widget.options.sharp=!1,this}toggleSharpSnapline(e){return e!=null?e!==this.isSharpSnapline()&&(e?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this}getSnaplineTolerance(){return this.snapline.widget.options.tolerance}setSnaplineTolerance(e){return this.snapline.widget.options.tolerance=e,this}removeTools(){return this.emit("tools:remove"),this}hideTools(){return this.emit("tools:hide"),this}showTools(){return this.emit("tools:show"),this}toSVG(e,t={}){this.format.toSVG(e,t)}toDataURL(e,t){this.format.toDataURL(e,t)}toPNG(e,t={}){this.format.toPNG(e,t)}toJPEG(e,t={}){this.format.toJPEG(e,t)}printPreview(e){this.print.show(e)}dispose(){this.clearCells(),this.off(),this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.knob.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose(),this.size.dispose()}}Yl([_l.checkScroller()],Qi.prototype,"lockScroller",null),Yl([_l.checkScroller()],Qi.prototype,"unlockScroller",null),Yl([_l.checkScroller()],Qi.prototype,"updateScroller",null),Yl([_l.checkScroller()],Qi.prototype,"getScrollbarPosition",null),Yl([_l.checkScroller()],Qi.prototype,"setScrollbarPosition",null),Yl([_l.checkScroller()],Qi.prototype,"scrollToPoint",null),Yl([_l.checkScroller()],Qi.prototype,"scrollToContent",null),Yl([_l.checkScroller()],Qi.prototype,"scrollToCell",null),Yl([_l.checkScroller()],Qi.prototype,"transitionToPoint",null),Yl([_l.checkScroller()],Qi.prototype,"transitionToRect",null),Yl([Ss.dispose()],Qi.prototype,"dispose",null),function(l){l.View=bh,l.Hook=yi,l.Renderer=Zi,l.Keyboard=Td,l.MouseWheel=Fv,l.BaseManager=_o,l.DefsManager=Dy,l.GridManager=p0,l.CoordManager=Ny,l.PrintManager=df,l.FormatManager=Bv,l.MiniMapManager=Au,l.HistoryManager=m0,l.SnaplineManager=Iv,l.ScrollerManager=Rv,l.ClipboardManager=kv,l.TransformManager=v0,l.HighlightManager=g0,l.BackgroundManager=h0,l.SelectionManager=Lv}(Qi||(Qi={})),function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&c.hook!=null&&c.view!=null&&c.model!=null}l.isGraph=e}(Qi||(Qi={})),function(l){function e(t,o){const c=t instanceof HTMLElement?new l({container:t}):new l(t);return o!=null&&c.fromJSON(o),c}l.render=e}(Qi||(Qi={})),function(l){l.registerNode=ys.registry.register,l.registerEdge=ss.registry.register,l.registerView=Gs.registry.register,l.registerAttr=vh.registry.register,l.registerGrid=rp.registry.register,l.registerFilter=Qg.registry.register,l.registerNodeTool=s0.registry.register,l.registerEdgeTool=ag.registry.register,l.registerBackground=yv.registry.register,l.registerHighlighter=ip.registry.register,l.registerPortLayout=rg.registry.register,l.registerPortLabelLayout=e0.registry.register,l.registerMarker=nl.registry.register,l.registerRouter=ap.registry.register,l.registerConnector=dg.registry.register,l.registerAnchor=a0.registry.register,l.registerEdgeAnchor=cg.registry.register,l.registerConnectionPoint=c0.registry.register,l.registerConnectionStrategy=i0.registry.register,l.registerHTMLComponent=_u.componentRegistry.register}(Qi||(Qi={})),function(l){l.unregisterNode=ys.registry.unregister,l.unregisterEdge=ss.registry.unregister,l.unregisterView=Gs.registry.unregister,l.unregisterAttr=vh.registry.unregister,l.unregisterGrid=rp.registry.unregister,l.unregisterFilter=Qg.registry.unregister,l.unregisterNodeTool=s0.registry.unregister,l.unregisterEdgeTool=ag.registry.unregister,l.unregisterBackground=yv.registry.unregister,l.unregisterHighlighter=ip.registry.unregister,l.unregisterPortLayout=rg.registry.unregister,l.unregisterPortLabelLayout=e0.registry.unregister,l.unregisterMarker=nl.registry.unregister,l.unregisterRouter=ap.registry.unregister,l.unregisterConnector=dg.registry.unregister,l.unregisterAnchor=a0.registry.unregister,l.unregisterEdgeAnchor=cg.registry.unregister,l.unregisterConnectionPoint=c0.registry.unregister,l.unregisterConnectionStrategy=i0.registry.unregister,l.unregisterHTMLComponent=_u.componentRegistry.unregister}(Qi||(Qi={}));class By{constructor(){this.cells=[]}copy(e,t,o={}){this.options=Object.assign({},o);const d=(kc.isModel(t)?t:t.model).cloneSubGraph(e,o);this.cells=On(Object.keys(d).map(f=>d[f]),f=>f.isEdge()?2:1),this.serialize(o)}cut(e,t,o={}){this.copy(e,t,o),(Qi.isGraph(t)?t.model:t).batchUpdate("cut",()=>{e.forEach(d=>d.remove())})}paste(e,t={}){const o=Object.assign(Object.assign({},this.options),t),{offset:c,edgeProps:d,nodeProps:f}=o;let v=20,b=20;c&&(v=typeof c=="number"?c:c.dx,b=typeof c=="number"?c:c.dy),this.deserialize(o);const w=this.cells;w.forEach(A=>{A.model=null,A.removeProp("zIndex"),(v||b)&&A.translate(v,b),f&&A.isNode()&&A.prop(f),d&&A.isEdge()&&A.prop(d)});const _=Qi.isGraph(e)?e.model:e;return _.batchUpdate("paste",()=>{_.addCells(this.cells)}),this.copy(w,e,t),w}serialize(e){e.useLocalStorage!==!1&&zy.save(this.cells)}deserialize(e){if(e.useLocalStorage){const t=zy.fetch();t&&(this.cells=t)}}isEmpty(){return this.cells.length<=0}clean(){this.options={},this.cells=[],zy.clean()}}var zy;(function(l){const e=`${wu.prefixCls}.clipboard.cells`;function t(d){if(window.localStorage){const f=d.map(v=>v.toJSON());localStorage.setItem(e,JSON.stringify(f))}}l.save=t;function o(){if(window.localStorage){const d=localStorage.getItem(e),f=d?JSON.parse(d):[];if(f)return kc.fromJSON(f)}}l.fetch=o;function c(){window.localStorage&&localStorage.removeItem(e)}l.clean=c})(zy||(zy={}));class D3{constructor(e){this.halo=e}get options(){return this.halo.options}get graph(){return this.halo.graph}get model(){return this.halo.model}get view(){return this.halo.view}get cell(){return this.halo.cell}get node(){return this.cell}getPresets(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox(e){return this.options.useCellGeometry?e.cell.getBBox():e.getBBox()},content(e){const t=Vg("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),o=e.cell,c=o.getBBox();return t({x:Math.floor(c.x),y:Math.floor(c.y),width:Math.floor(c.width),height:Math.floor(c.height),angle:Math.floor(o.getAngle())})},magnet(e){return e.container},tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}}removeCell(){this.model.removeConnectedEdges(this.cell),this.cell.remove()}startLink({x:e,y:t}){this.halo.startBatch();const o=this.graph,c=this.createEdgeConnectedToSource();c.setTarget({x:e,y:t}),this.model.addEdge(c,{validation:!1,halo:this.halo.cid,async:!1}),o.view.undelegateEvents(),this.edgeView=o.renderer.findViewByCell(c),this.edgeView.prepareArrowheadDragging("target",{x:e,y:t,fallbackAction:"remove"})}createEdgeConnectedToSource(){const e=this.getMagnet(this.view,"source"),t=this.getEdgeTerminal(this.view,e),o=this.graph.hook.getDefaultEdge(this.view,e);return o.setSource(t),o}getMagnet(e,t){const o=this.options.magnet;if(typeof o=="function"){const c=er(o,this.halo,e,t);if(c instanceof SVGElement)return c}throw new Error("`magnet()` has to return an SVGElement")}getEdgeTerminal(e,t){const o={cell:e.cell.id};if(t!==e.container){const c=t.getAttribute("port");c?o.port=c:o.selector=e.getSelector(t)}return o}doLink({e,x:t,y:o}){this.edgeView&&this.edgeView.onMouseMove(e,t,o)}stopLink({e,x:t,y:o}){const c=this.edgeView;if(c){c.onMouseUp(e,t,o);const d=c.cell;d.hasLoop()&&this.makeLoopEdge(d),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:d}),this.edgeView=null}this.graph.view.delegateEvents()}makeLoopEdge(e){let t=null,o=null;const c=this.options.loopEdgeWidth,d=this.graph.options,f=new Rn(0,0,d.width,d.height),v=this.graph.graphToLocal(this.view.getBBox());[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some(w=>{let _=null,A=0,P=0;switch(w){case"top":_=new Ve(v.x+v.width/2,v.y-c),A=c/2;break;case"bottom":_=new Ve(v.x+v.width/2,v.y+v.height+c),A=c/2;break;case"left":_=new Ve(v.x-c,v.y+v.height/2),P=c/2;break;case"right":_=new Ve(v.x+v.width+c,v.y+v.height/2),P=c/2;break;default:break}return _?(t=_.translate(-A,-P),o=_.translate(A,P),f.containsPoint(t)&&f.containsPoint(o)):!1})&&t&&o&&e.setVertices([t,o])}startResize({e}){this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(ki.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),Hs("node:resize",e,this.view)}doResize({e,dx:t,dy:o}){const c=this.node.getSize(),d=Math.max(c.width+(this.flip?t:o),1),f=Math.max(c.height+(this.flip?o:t),1);this.node.resize(d,f,{absolute:!0}),Hs("node:resizing",e,this.view)}stopResize({e}){this.view.removeClass("node-resizing"),Hs("node:resized",e,this.view),this.halo.stopBatch()}startClone({e,x:t,y:o}){this.halo.startBatch();const d=this.options.clone(this.cell,{clone:!0});if(!Ti.isCell(d))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(d,t,o),this.model.addCell(d,{halo:this.halo.cid,async:!1});const f=this.graph.renderer.findViewByCell(d);f.onMouseDown(e,t,o),this.halo.setEventData(e,{cloneView:f})}centerNodeAtCursor(e,t,o){const c=e.getBBox().getCenter(),d=t-c.x,f=o-c.y;e.translate(d,f)}doClone({e,x:t,y:o}){const c=this.halo.getEventData(e).cloneView;c&&c.onMouseMove(e,t,o)}stopClone({e,x:t,y:o}){const c=this.halo.getEventData(e).cloneView;c&&c.onMouseUp(e,t,o),this.halo.stopBatch()}startFork({e,x:t,y:o}){this.halo.startBatch();const c=this.options.clone(this.cell,{fork:!0});if(!Ti.isCell(c))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(c,t,o),this.model.addCell(c,{halo:this.halo.cid,async:!1});const d=this.createEdgeConnectedToSource(),f=this.graph.renderer.findViewByCell(c),v=this.getMagnet(f,"target"),b=this.getEdgeTerminal(f,v);d.setTarget(b),this.model.addEdge(d,{halo:this.halo.cid,async:!1}),f.onMouseDown(e,t,o),this.halo.setEventData(e,{cloneView:f})}doFork({e,x:t,y:o}){const c=this.halo.getEventData(e).cloneView;c&&c.onMouseMove(e,t,o)}stopFork({e,x:t,y:o}){const c=this.halo.getEventData(e).cloneView;c&&c.onMouseUp(e,t,o),this.halo.stopBatch()}startRotate({e,x:t,y:o}){this.halo.startBatch();const c=this.node.getBBox().getCenter(),d=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce((f,v)=>(v.isNode()&&f.push(v),f),d),this.halo.setEventData(e,{center:c,nodes:d,rotateStartAngles:d.map(f=>f.getAngle()),clientStartAngle:new Ve(t,o).theta(c)}),d.forEach(f=>{const v=this.graph.findViewByCell(f);v&&(v.addClass("node-rotating"),Hs("node:rotate",e,v))})}doRotate({e,x:t,y:o}){const c=this.halo.getEventData(e),d=c.clientStartAngle-new Ve(t,o).theta(c.center);c.nodes.forEach((f,v)=>{const b=c.rotateStartAngles[v],w=ha.snapToGrid(b+d,this.options.rotateGrid);f.rotate(w,{absolute:!0,center:c.center,halo:this.halo.cid}),Hs("node:rotating",e,this.graph.findViewByCell(f))})}stopRotate({e}){this.halo.getEventData(e).nodes.forEach(o=>{const c=this.graph.findViewByCell(o);c.removeClass("node-rotating"),Hs("node:rotated",e,c)}),this.halo.stopBatch()}unlink(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()}}class n1{constructor(e){this.halo=e}get options(){return this.halo.options}get graph(){return this.halo.graph}get model(){return this.halo.model}get view(){return this.halo.view}get cell(){return this.halo.cell}get edge(){return this.cell}getPresets(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox(e){return e.graph.localToGraph(e.getPointAtRatio(.5))},tinyThreshold:-1,smallThreshold:-1}}removeEdge(){this.cell.remove()}directionSwap(){const e=this.edge.getSource(),t=this.edge.getTarget();this.edge.prop({source:t,target:e})}}class pg extends Sy{get type(){return this.options.type||"surround"}get handleOptions(){return this.options}init(e){this.options=wo(pg.defaultOptions,this.cell.isNode()?new D3(this).getPresets():this.cell.isEdge()?new n1(this).getPresets():null,e),this.render(),this.initHandles(),this.update(),this.startListening()}startListening(){const e=this.model,t=this.graph;this.view.cell.on("removed",this.remove,this),e.on("reseted",this.remove,this),t.on("halo:destroy",this.remove,this),e.on("*",this.update,this),t.on("scale",this.update,this),t.on("translate",this.update,this),super.startListening()}stopListening(){const e=this.model,t=this.graph,o=this.view.cell;this.undelegateEvents(),o.off("removed",this.remove,this),e.off("reseted",this.remove,this),t.off("halo:destroy",this.remove,this),e.off("*",this.update,this),t.off("scale",this.update,this),t.off("translate",this.update,this),super.stopListening()}render(){const e=this.options,t=this.prefixClassName("widget-halo");return this.view.addClass(Cw.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(t).attr("data-shape",this.view.cell.shape),e.className&&this.$container.addClass(e.className),this.$handleContainer=this.$("<div/>").addClass(`${t}-handles`).appendTo(this.container),this.$content=this.$("<div/>").addClass(`${t}-content`).appendTo(this.container),this.$container.appendTo(this.graph.container),this}remove(){return this.stopBatch(),this.view.removeClass(Cw.NODE_CLS),super.remove()}update(){if(this.isRendered()){this.updateContent();const e=this.getBBox(),t=this.options.tinyThreshold||0,o=this.options.smallThreshold||0;this.$handleContainer.toggleClass(`${this.handleClassName}-tiny`,e.width<t&&e.height<t);const c=`${this.handleClassName}-small`;this.$handleContainer.toggleClass(c,!this.$handleContainer.hasClass(c)&&e.width<o&&e.height<o),this.$container.css({width:e.width,height:e.height,left:e.x,top:e.y}),this.hasHandle("unlink")&&this.toggleUnlink(),(this.type==="surround"||this.type==="toolbar")&&this.hasHandle("fork")&&this.toggleFork()}}updateContent(){const e=this.options.content;if(typeof e=="function"){const t=er(e,this,this.view,this.$content[0]);t&&this.$content.html(t)}else e?this.$content.html(e):this.$content.remove()}getBBox(){const e=this.view,t=this.options.bbox,o=typeof t=="function"?er(t,this,e):t;return Rn.create(Object.assign({x:0,y:0,width:1,height:1},o))}removeCell(){this.cell.remove()}toggleFork(){const e=this.view.cell.clone(),t=this.graph.hook.createCellView(e),o=this.graph.hook.validateConnection(this.view,null,t,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!o),t.remove()}toggleUnlink(){const e=this.model.getConnectedEdges(this.view.cell).length>0;this.$handleContainer.children(".unlink").toggleClass("hidden",!e)}startBatch(){this.model.startBatch("halo",{halo:this.cid})}stopBatch(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})}}(function(l){l.defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:e=>e.clone().removeZIndex()}})(pg||(pg={})),Object.getOwnPropertyNames(d0.prototype).forEach(l=>{l!=="constructor"&&Object.defineProperty(pg.prototype,l,Object.getOwnPropertyDescriptor(d0.prototype,l))});var Cw;(function(l){l.NODE_CLS="has-widget-halo"})(Cw||(Cw={}));var N3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class lp extends Ai{constructor(e){super(),this.options=Object.assign(Object.assign({},lp.defaults),e),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName("widget-dnd")),this.draggingGraph=new Qi(Object.assign(Object.assign({},this.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),this.$container.append(this.draggingGraph.container)}get targetScroller(){const e=this.options.target;return Qi.isGraph(e)?e.scroller.widget:e}get targetGraph(){const e=this.options.target;return Qi.isGraph(e)?e:e.graph}get targetModel(){return this.targetGraph.model}get snapline(){return this.targetGraph.snapline.widget}start(e,t){const o=t;o.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(this.options.draggingContainer||document.body),this.sourceNode=e,this.prepareDragging(e,o.clientX,o.clientY);const c=this.updateNodePosition(o.clientX,o.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:o,node:e,cell:e,view:this.draggingView,x:c.x,y:c.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(lp.documentEvents,o.data)}isSnaplineEnabled(){return this.snapline&&!this.snapline.disabled}prepareDragging(e,t,o){const c=this.draggingGraph,d=c.model,f=this.options.getDragNode(e,{sourceNode:e,draggingGraph:c,targetGraph:this.targetGraph});f.position(0,0);let v=5;if(this.isSnaplineEnabled()&&(v+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){const _=this.targetGraph.transform.getScale();c.scale(_.sx,_.sy),v*=Math.max(_.sx,_.sy)}else c.scale(1,1);this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),d.resetCells([f]);const b=c.findViewByCell(f);b.undelegateEvents(),b.cell.off("changed"),c.fitToContent({padding:v,allowNewOrigin:"any"});const w=b.getBBox();this.geometryBBox=b.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(w.getTopLeft()),this.draggingNode=f,this.draggingView=b,this.draggingBBox=f.getBBox(),this.padding=v,this.originOffset=this.updateGraphPosition(t,o)}updateGraphPosition(e,t){const o=document.body.scrollTop||document.documentElement.scrollTop,c=this.delta,d=this.geometryBBox,f=this.padding||5,v={left:e-c.x-d.width/2-f,top:t-c.y-d.height/2-f+o};return this.draggingGraph&&this.$container.offset(v),v}updateNodePosition(e,t){const o=this.targetGraph.clientToLocal(e,t),c=this.draggingBBox;return o.x-=c.width/2,o.y-=c.height/2,this.draggingNode.position(o.x,o.y),o}snap({cell:e,current:t,options:o}){const c=e;if(o.snapped){const d=this.draggingBBox;c.position(d.x+o.tx,d.y+o.ty,{silent:!0}),this.draggingView.translate(),c.position(t.x,t.y,{silent:!0}),this.snapOffset={x:o.tx,y:o.ty}}else this.snapOffset=null}onDragging(e){const t=this.draggingView;if(t){e.preventDefault();const o=this.normalizeEvent(e),c=o.clientX,d=o.clientY;this.updateGraphPosition(c,d);const f=this.updateNodePosition(c,d),v=this.targetGraph.options.embedding.enabled,b=(v||this.isSnaplineEnabled())&&this.isInsideValidArea({x:c,y:d});if(v){t.setEventData(o,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});const w=t.getEventData(o);b?t.processEmbedding(o,w):t.clearEmbedding(w),this.candidateEmbedView=w.candidateEmbedView}this.isSnaplineEnabled()&&(b?this.snapline.snapOnMoving({e:o,view:t,x:f.x,y:f.y}):this.snapline.hide())}}onDragEnd(e){const t=this.draggingNode;if(t){const o=this.normalizeEvent(e),c=this.draggingView,d=this.draggingBBox,f=this.snapOffset;let v=d.x,b=d.y;f&&(v+=f.x,b+=f.y),t.position(v,b,{silent:!0});const w=this.drop(t,{x:o.clientX,y:o.clientY}),_=A=>{A?(this.onDropped(t),this.targetGraph.options.embedding.enabled&&c&&(c.setEventData(o,{cell:A,graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView}),c.finalizeEmbedding(o,c.getEventData(o)))):this.onDropInvalid(),this.candidateEmbedView=null,this.targetModel.stopBatch("dnd")};i2(w)?(this.undelegateDocumentEvents(),w.then(_)):_(w)}}clearDragging(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}onDropped(e){this.draggingNode===e&&(this.clearDragging(),this.$container.removeClass("dragging").remove())}onDropInvalid(){const e=this.draggingNode;if(e){const t=this.options.animation;if(t){const o=typeof t=="object"&&t.duration||150,c=typeof t=="object"&&t.easing||"swing";this.draggingView=null,this.$container.animate(this.originOffset,o,c,()=>this.onDropped(e))}else this.onDropped(e)}}isInsideValidArea(e){let t,o=null;const c=this.targetGraph,d=this.targetScroller;this.options.dndContainer&&(o=this.getDropArea(this.options.dndContainer));const f=o&&o.containsPoint(e);if(d)if(d.options.autoResize)t=this.getDropArea(d.container);else{const v=this.getDropArea(d.container);t=this.getDropArea(c.container).intersectsWithRect(v)}else t=this.getDropArea(c.container);return!f&&t&&t.containsPoint(e)}getDropArea(e){const t=this.$(e),o=t.offset(),c=document.body.scrollTop||document.documentElement.scrollTop,d=document.body.scrollLeft||document.documentElement.scrollLeft;return Rn.create({x:o.left+parseInt(t.css("border-left-width"),10)-d,y:o.top+parseInt(t.css("border-top-width"),10)-c,width:t.innerWidth(),height:t.innerHeight()})}drop(e,t){if(this.isInsideValidArea(t)){const o=this.targetGraph,c=o.model,d=o.clientToLocal(t),f=this.sourceNode,v=this.options.getDropNode(e,{sourceNode:f,draggingNode:e,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),b=v.getBBox();d.x+=b.x-b.width/2,d.y+=b.y-b.height/2;const w=this.snapOffset?1:o.getGridSize();v.position(ha.snapToGrid(d.x,w),ha.snapToGrid(d.y,w)),v.removeZIndex();const _=this.options.validateNode,A=_?_(v,{sourceNode:f,draggingNode:e,droppingNode:v,targetGraph:o,draggingGraph:this.draggingGraph}):!0;return typeof A=="boolean"?A?(c.addCell(v,{stencil:this.cid}),v):null:hC(A).then(P=>P?(c.addCell(v,{stencil:this.cid}),v):null)}return null}onRemove(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}dispose(){this.remove()}}N3([Ai.dispose()],lp.prototype,"dispose",null),function(l){l.defaults={animation:!1,getDragNode:e=>e.clone(),getDropNode:e=>e.clone()},l.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(lp||(lp={}));function MA(l,e={}){const t=kc.isModel(l)?l:new kc().resetCells(l,{sort:!1,dryrun:!0}),o=t.getNodes(),c=e.columns||1,d=Math.ceil(o.length/c),f=e.dx||0,v=e.dy||0,b=e.center!==!1,w=e.resizeToFit===!0,_=e.marginX||0,A=e.marginY||0,P=[];let V=e.columnWidth;if(V==="compact")for(let ke=0;ke<c;ke+=1){const Se=Ch.getNodesInColumn(o,ke,c);P.push(Ch.getMaxDim(Se,"width")+f)}else{(V==null||V==="auto")&&(V=Ch.getMaxDim(o,"width")+f);for(let ke=0;ke<c;ke+=1)P.push(V)}const q=Ch.accumulate(P,_),ee=[];let ge=e.rowHeight;if(ge==="compact")for(let ke=0;ke<d;ke+=1){const Se=Ch.getNodesInRow(o,ke,c);ee.push(Ch.getMaxDim(Se,"height")+v)}else{(ge==null||ge==="auto")&&(ge=Ch.getMaxDim(o,"height")+v);for(let ke=0;ke<d;ke+=1)ee.push(ge)}const _e=Ch.accumulate(ee,A);t.startBatch("layout"),o.forEach((ke,Se)=>{const Ue=Se%c,Qe=Math.floor(Se/c),bt=P[Ue],Ot=ee[Qe];let Kt=0,Fn=0,Cn=ke.getSize();if(w){let Sn=bt-2*f,Ln=Ot-2*v;const Jr=Cn.height*(Cn.width?Sn/Cn.width:1),ii=Cn.width*(Cn.height?Ln/Cn.height:1);Ot<Jr?Sn=ii:Ln=Jr,Cn={width:Sn,height:Ln},ke.setSize(Cn,e)}b&&(Kt=(bt-Cn.width)/2,Fn=(Ot-Cn.height)/2),ke.position(q[Ue]+f+Kt,_e[Qe]+v+Fn,e)}),t.stopBatch("layout")}var Ch;(function(l){function e(d,f){return d.reduce((v,b)=>Math.max(b.getSize()[f],v),0)}l.getMaxDim=e;function t(d,f,v){const b=[];for(let w=v*f,_=w+v;w<_;w+=1)b.push(d[w]);return b}l.getNodesInRow=t;function o(d,f,v){const b=[];for(let w=f,_=d.length;w<_;w+=v)b.push(d[w]);return b}l.getNodesInColumn=o;function c(d,f){return d.reduce((v,b,w)=>(v.push(v[w]+b),v),[f||0])}l.accumulate=c})(Ch||(Ch={}));class gg extends Ai{constructor(e){super(),this.graphs={},this.$groups={},this.options=Object.assign(Object.assign({},gg.defaultOptions),e),this.dnd=new lp(this.options),this.onSearch=n2(this.onSearch,200),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(Kl.base)).attr("data-not-found-text",this.options.notFoundText||"No matches found"),this.options.collapsable=e.collapsable&&e.groups&&e.groups.some(o=>o.collapsable!==!1),this.options.collapsable&&(this.$container.addClass("collapsable"),e.groups&&e.groups.every(c=>c.collapsed||c.collapsable===!1)&&this.$container.addClass("collapsed")),this.$("<div/>").addClass(this.prefixClassName(Kl.title)).html(this.options.title).appendTo(this.$container),e.search&&this.$container.addClass("searchable").append(this.renderSearch()),this.$content=this.$("<div/>").addClass(this.prefixClassName(Kl.content)).appendTo(this.$container);const t=e.stencilGraphOptions||{};if(e.groups&&e.groups.length)e.groups.forEach(o=>{const c=this.$("<div/>").addClass(this.prefixClassName(Kl.group)).attr("data-name",o.name);(o.collapsable==null&&e.collapsable||o.collapsable!==!1)&&c.addClass("collapsable"),c.toggleClass("collapsed",o.collapsed===!0);const d=this.$("<h3/>").addClass(this.prefixClassName(Kl.groupTitle)).html(o.title||o.name),f=this.$("<div/>").addClass(this.prefixClassName(Kl.groupContent)),v=o.graphOptions,b=new Qi(Object.assign(Object.assign(Object.assign({},t),v),{container:document.createElement("div"),model:t.model||new kc,width:o.graphWidth||e.stencilGraphWidth,height:o.graphHeight||e.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));f.append(b.container),c.append(d,f).appendTo(this.$content),this.$groups[o.name]=c,this.graphs[o.name]=b});else{const o=new Qi(Object.assign(Object.assign({},t),{container:document.createElement("div"),model:t.model||new kc,width:e.stencilGraphWidth,height:e.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));this.$content.append(o.container),this.graphs[Uy.defaultGroupName]=o}return this.startListening(),this}get targetScroller(){const e=this.options.target;return Qi.isGraph(e)?e.scroller.widget:e}get targetGraph(){const e=this.options.target;return Qi.isGraph(e)?e:e.graph}get targetModel(){return this.targetGraph.model}renderSearch(){return this.$("<div/>").addClass(this.prefixClassName(Kl.search)).append(this.$("<input/>").attr({type:"search",placeholder:this.options.placeholder||"Search"}).addClass(this.prefixClassName(Kl.searchText)))}startListening(){const e=this.prefixClassName(Kl.title),t=this.prefixClassName(Kl.searchText),o=this.prefixClassName(Kl.groupTitle);this.delegateEvents({[`click .${e}`]:"onTitleClick",[`touchstart .${e}`]:"onTitleClick",[`click .${o}`]:"onGroupTitleClick",[`touchstart .${o}`]:"onGroupTitleClick",[`input .${t}`]:"onSearch",[`focusin .${t}`]:"onSearchFocusIn",[`focusout .${t}`]:"onSearchFocusOut"}),Object.keys(this.graphs).forEach(c=>{this.graphs[c].on("cell:mousedown",this.onDragStart,this)})}stopListening(){this.undelegateEvents(),Object.keys(this.graphs).forEach(e=>{this.graphs[e].off("cell:mousedown",this.onDragStart,this)})}load(e,t){return Array.isArray(e)?this.loadGroup(e,t):this.options.groups&&Object.keys(this.options.groups).forEach(o=>{e[o]&&this.loadGroup(e[o],o)}),this}loadGroup(e,t){const o=this.getModel(t);if(o){const v=e.map(b=>ys.isNode(b)?b:ys.create(b));o.resetCells(v)}const c=this.getGroup(t);let d=this.options.stencilGraphHeight;c&&c.graphHeight!=null&&(d=c.graphHeight);const f=c&&c.layout||this.options.layout;if(f&&o&&er(f,this,o,c),!d){const v=this.getGraph(t);v.fitToContent({minWidth:v.options.width,gridHeight:1,padding:c&&c.graphPadding||this.options.stencilGraphPadding||10})}return this}onDragStart(e){const{e:t,node:o}=e;this.dnd.start(o,t)}filter(e,t){const o=Object.keys(this.graphs).reduce((c,d)=>{const f=this.graphs[d],v=d===Uy.defaultGroupName?null:d,b=f.model.getNodes().filter(P=>{let V=!1;typeof t=="function"?V=er(t,this,P,e,v,this):typeof t=="boolean"?V=t:V=this.isCellMatched(P,e,t,e.toLowerCase()!==e);const q=f.renderer.findViewByCell(P);return q&&q.$(q.container).toggleClass("unmatched",!V),V}),w=b.length>0,_=this.options,A=new kc;return A.resetCells(b),_.layout&&er(_.layout,this,A,this.getGroup(d)),this.$groups[d]&&this.$groups[d].toggleClass("unmatched",!w),f.fitToContent({gridWidth:1,gridHeight:1,padding:_.stencilGraphPadding||10}),c||w},!1);this.$container.toggleClass("not-found",!o)}isCellMatched(e,t,o,c){return t&&o?Object.keys(o).some(d=>{if(d==="*"||e.shape===d){const f=o[d];return typeof f=="boolean"?f:(Array.isArray(f)?f:[f]).some(b=>{let w=e.getPropByPath(b);return w!=null?(w=`${w}`,c||(w=w.toLowerCase()),w.indexOf(t)>=0):!1})}return!1}):!0}onSearch(e){this.filter(e.target.value,this.options.search)}onSearchFocusIn(){this.$container.addClass("is-focused")}onSearchFocusOut(){this.$container.removeClass("is-focused")}onTitleClick(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())}onGroupTitleClick(e){const t=this.$(e.target).closest(`.${this.prefixClassName(Kl.group)}`);this.toggleGroup(t.attr("data-name")||"");const o=Object.keys(this.$groups).every(c=>{const d=this.getGroup(c),f=this.$groups[c];return d&&d.collapsable===!1||f.hasClass("collapsed")});this.$container.toggleClass("collapsed",o)}getModel(e){const t=this.getGraph(e);return t?t.model:null}getGraph(e){return this.graphs[e||Uy.defaultGroupName]}getGroup(e){const t=this.options.groups;return e!=null&&t&&t.length?t.find(o=>o.name===e):null}toggleGroup(e){return this.isGroupCollapsed(e)?this.expandGroup(e):this.collapseGroup(e),this}collapseGroup(e){if(this.isGroupCollapsable(e)){const t=this.$groups[e];t&&!this.isGroupCollapsed(e)&&(this.trigger("group:collapse",{name:e}),t.addClass("collapsed"))}return this}expandGroup(e){if(this.isGroupCollapsable(e)){const t=this.$groups[e];t&&this.isGroupCollapsed(e)&&(this.trigger("group:expand",{name:e}),t.removeClass("collapsed"))}return this}isGroupCollapsable(e){return this.$groups[e].hasClass("collapsable")}isGroupCollapsed(e){const t=this.$groups[e];return t&&t.hasClass("collapsed")}collapseGroups(){return Object.keys(this.$groups).forEach(e=>this.collapseGroup(e)),this}expandGroups(){return Object.keys(this.$groups).forEach(e=>this.expandGroup(e)),this}resizeGroup(e,t){const o=this.graphs[e];return o&&o.resize(t.width,t.height),this}onRemove(){Object.keys(this.graphs).forEach(e=>{this.graphs[e].view.remove(),delete this.graphs[e]}),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}}(function(l){l.defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout(e,t){const o={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};MA(e,Object.assign(Object.assign(Object.assign({},o),this.options.layoutOptions),t?t.layoutOptions:{}))}},lp.defaults)})(gg||(gg={}));var Kl;(function(l){l.base="widget-stencil",l.title=`${l.base}-title`,l.search=`${l.base}-search`,l.searchText=`${l.search}-text`,l.content=`${l.base}-content`,l.group=`${l.base}-group`,l.groupTitle=`${l.group}-title`,l.groupContent=`${l.group}-content`})(Kl||(Kl={}));var Uy;(function(l){l.defaultGroupName="__default__"})(Uy||(Uy={}))},59070:function(Ne,L,M){"use strict";M.d(L,{g8:function(){return RN},w5:function(){return uN},It:function(){return eI},XS:function(){return PA},xZ:function(){return uD},ce:function(){return lR},BH:function(){return Gn},K4:function(){return ln},Gn:function(){return jv},KV:function(){return ui},ko:function(){return Tu},Ip:function(){return sR},G7:function(){return Ro},dX:function(){return R},Nf:function(){return j},UI:function(){return q},zl:function(){return II},Ak:function(){return $s},yc:function(){return hf},g:function(){return ke},n1:function(){return Hc},ho:function(){return FA},$b:function(){return uo},Gv:function(){return ei},dV:function(){return Ms},cE:function(){return Hi},s4:function(){return e},Kd:function(){return kN},vD:function(){return Mp},zg:function(){return as},HJ:function(){return Rf},iR:function(){return dD},XZ:function(){return Qo},k$:function(){return Cc}});var j={};M.r(j),M.d(j,{Container:function(){return Qn},Contribution:function(){return Bi},DefaultContributionProvider:function(){return to},GlobalContainer:function(){return Oi},Module:function(){return Ko},OptionSymbol:function(){return ji},Provider:function(){return Yr},Syringe:function(){return pe},SyringeModule:function(){return no},Utils:function(){return Ae},contrib:function(){return Qr},decorate:function(){return z.GW},inject:function(){return pn},injectable:function(){return jt},named:function(){return lo},optional:function(){return z.jt},postConstruct:function(){return z.zY},register:function(){return zr},registerSideOption:function(){return Xn},singleton:function(){return En},transient:function(){return Yn},unmanaged:function(){return z.NT}});var R={};M.r(R),M.d(R,{COMMAND_GLOBALS:function(){return Ca},COMMAND_REDOABLE:function(){return ec},COMMAND_UNDOABLE:function(){return Ac},CONTEXTMENU_EDGE:function(){return Xd},CONTEXTMENU_NODE:function(){return Vc},CONTEXTMENU_TARGET:function(){return hl},GRAPH_ENABLE_MULTI_SELECT:function(){return Lh},GRAPH_FULLSCREEN:function(){return $d},GRAPH_META:function(){return Fl},GRAPH_SCALE:function(){return qs},HISTORY_REDOABLE:function(){return Zd},HISTORY_UNDOABLE:function(){return au},IS_GROUP_SELECTED:function(){return Pp},IS_NODE_SELECTED:function(){return Op},IS_NORMAL_NODES_SELECTED:function(){return Dp},SELECTED_CELL:function(){return Wd},SELECTED_CELLS:function(){return Ni},SELECTED_EDGES:function(){return If},SELECTED_GROUPS:function(){return la},SELECTED_NODE:function(){return Nf},SELECTED_NODES:function(){return Gl},getModelUtil:function(){return Uo},isModelExistUtil:function(){return N0},useModelValueUtil:function(){return qi}});var J={};M.r(J),M.d(J,{ConnectorNode:function(){return DR},DataIONode:function(){return NR},DatabaseNode:function(){return RR},DecisionNode:function(){return PR},DelayNode:function(){return $R},DisplayNode:function(){return XR},DocumentNode:function(){return GR},ExtractNode:function(){return zR},HardDiskNode:function(){return kR},InternalStorageNode:function(){return qR},ManualInputNode:function(){return jR},ManualOperationNode:function(){return WR},MergeNode:function(){return UR},MultiDocumentNode:function(){return FR},NoteLeftNode:function(){return YR},NoteRightNode:function(){return KR},OffPageLinkNode:function(){return ZR},OrNode:function(){return VR},PredefinedProcessNode:function(){return BR},PreparationNode:function(){return HR},ProcessNode:function(){return OR},StroedDataNode:function(){return LR},TerminalNode:function(){return IR},TextNode:function(){return JR}});var z=M(86700),Z=M(34155);function te(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function Q(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?te(Object(i),!0).forEach(function(s){he(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):te(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function de(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?de=function(r){return typeof r}:de=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},de(n)}function oe(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ie(n,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}function re(n,r,i){return r&&ie(n.prototype,r),i&&ie(n,i),n}function he(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function De(n){return ue(n)||xe(n)||ae(n)||fe()}function ue(n){if(Array.isArray(n))return ce(n)}function xe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ae(n,r){if(!!n){if(typeof n=="string")return ce(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ce(n,r)}}function ce(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}function fe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ee;(function(n){(function(r){var i=typeof M.g=="object"?M.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),s=a(n);typeof i.Reflect>"u"?i.Reflect=n:s=a(i.Reflect,s),r(s);function a(u,h){return function(p,g){typeof u[p]!="function"&&Object.defineProperty(u,p,{configurable:!0,writable:!0,value:g}),h&&h(p,g)}}})(function(r){var i=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",a=s&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",u=s&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",h=typeof Object.create=="function",p={__proto__:[]}instanceof Array,g=!h&&!p,y={create:h?function(){return Zv(Object.create(null))}:p?function(){return Zv({__proto__:null})}:function(){return Zv({})},has:g?function(Gt,bn){return i.call(Gt,bn)}:function(Gt,bn){return bn in Gt},get:g?function(Gt,bn){return i.call(Gt,bn)?Gt[bn]:void 0}:function(Gt,bn){return Gt[bn]}},x=Object.getPrototypeOf(Function),E=typeof Z=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",T=!E&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ql(),O=!E&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Hy(),N=!E&&typeof WeakMap=="function"?WeakMap:u1(),k=new N;function B(Gt,bn,jn,ar){if(pi(jn)){if(!ia(Gt))throw new TypeError;if(!$o(bn))throw new TypeError;return At(Gt,bn)}else{if(!ia(Gt))throw new TypeError;if(!In(bn))throw new TypeError;if(!In(ar)&&!pi(ar)&&!ra(ar))throw new TypeError;return ra(ar)&&(ar=void 0),jn=Zr(jn),Yt(Gt,bn,jn,ar)}}r("decorate",B);function $(Gt,bn){function jn(ar,jr){if(!In(ar))throw new TypeError;if(!pi(jr)&&!ff(jr))throw new TypeError;Gi(Gt,bn,ar,jr)}return jn}r("metadata",$);function X(Gt,bn,jn,ar){if(!In(jn))throw new TypeError;return pi(ar)||(ar=Zr(ar)),Gi(Gt,bn,jn,ar)}r("defineMetadata",X);function ne(Gt,bn,jn){if(!In(bn))throw new TypeError;return pi(jn)||(jn=Zr(jn)),Bn(Gt,bn,jn)}r("hasMetadata",ne);function be(Gt,bn,jn){if(!In(bn))throw new TypeError;return pi(jn)||(jn=Zr(jn)),kn(Gt,bn,jn)}r("hasOwnMetadata",be);function me(Gt,bn,jn){if(!In(bn))throw new TypeError;return pi(jn)||(jn=Zr(jn)),Jn(Gt,bn,jn)}r("getMetadata",me);function je(Gt,bn,jn){if(!In(bn))throw new TypeError;return pi(jn)||(jn=Zr(jn)),Li(Gt,bn,jn)}r("getOwnMetadata",je);function it(Gt,bn){if(!In(Gt))throw new TypeError;return pi(bn)||(bn=Zr(bn)),Xr(Gt,bn)}r("getMetadataKeys",it);function ct(Gt,bn){if(!In(Gt))throw new TypeError;return pi(bn)||(bn=Zr(bn)),Ho(Gt,bn)}r("getOwnMetadataKeys",ct);function Zt(Gt,bn,jn){if(!In(bn))throw new TypeError;pi(jn)||(jn=Zr(jn));var ar=st(bn,jn,!1);if(pi(ar)||!ar.delete(Gt))return!1;if(ar.size>0)return!0;var jr=k.get(bn);return jr.delete(jn),jr.size>0||k.delete(bn),!0}r("deleteMetadata",Zt);function At(Gt,bn){for(var jn=Gt.length-1;jn>=0;--jn){var ar=Gt[jn],jr=ar(bn);if(!pi(jr)&&!ra(jr)){if(!$o(jr))throw new TypeError;bn=jr}}return bn}function Yt(Gt,bn,jn,ar){for(var jr=Gt.length-1;jr>=0;--jr){var pr=Gt[jr],wi=pr(bn,jn,ar);if(!pi(wi)&&!ra(wi)){if(!In(wi))throw new TypeError;ar=wi}}return ar}function st(Gt,bn,jn){var ar=k.get(Gt);if(pi(ar)){if(!jn)return;ar=new T,k.set(Gt,ar)}var jr=ar.get(bn);if(pi(jr)){if(!jn)return;jr=new T,ar.set(bn,jr)}return jr}function Bn(Gt,bn,jn){var ar=kn(Gt,bn,jn);if(ar)return!0;var jr=jy(bn);return ra(jr)?!1:Bn(Gt,jr,jn)}function kn(Gt,bn,jn){var ar=st(bn,jn,!1);return pi(ar)?!1:Yi(ar.has(Gt))}function Jn(Gt,bn,jn){var ar=kn(Gt,bn,jn);if(ar)return Li(Gt,bn,jn);var jr=jy(bn);if(!ra(jr))return Jn(Gt,jr,jn)}function Li(Gt,bn,jn){var ar=st(bn,jn,!1);if(!pi(ar))return ar.get(Gt)}function Gi(Gt,bn,jn,ar){var jr=st(jn,ar,!0);jr.set(Gt,bn)}function Xr(Gt,bn){var jn=Ho(Gt,bn),ar=jy(Gt);if(ar===null)return jn;var jr=Xr(ar,bn);if(jr.length<=0)return jn;if(jn.length<=0)return jr;for(var pr=new O,wi=[],eo=0,Mr=jn;eo<Mr.length;eo++){var Oo=Mr[eo],yo=pr.has(Oo);yo||(pr.add(Oo),wi.push(Oo))}for(var cc=0,Yv=jr;cc<Yv.length;cc++){var Oo=Yv[cc],yo=pr.has(Oo);yo||(pr.add(Oo),wi.push(Oo))}return wi}function Ho(Gt,bn){var jn=[],ar=st(Gt,bn,!1);if(pi(ar))return jn;for(var jr=ar.keys(),pr=Wv(jr),wi=0;;){var eo=Xv(pr);if(!eo)return jn.length=wi,jn;var Mr=E0(eo);try{jn[wi]=Mr}catch(Oo){try{Iw(pr)}finally{throw Oo}}wi++}}function na(Gt){if(Gt===null)return 1;switch(typeof Gt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Gt===null?1:6;default:return 6}}function pi(Gt){return Gt===void 0}function ra(Gt){return Gt===null}function ja(Gt){return typeof Gt=="symbol"}function In(Gt){return typeof Gt=="object"?Gt!==null:typeof Gt=="function"}function yr(Gt,bn){switch(na(Gt)){case 0:return Gt;case 1:return Gt;case 2:return Gt;case 3:return Gt;case 4:return Gt;case 5:return Gt}var jn=bn===3?"string":bn===5?"number":"default",ar=pf(Gt,a);if(ar!==void 0){var jr=ar.call(Gt,jn);if(In(jr))throw new TypeError;return jr}return Fi(Gt,jn==="default"?"number":jn)}function Fi(Gt,bn){if(bn==="string"){var jn=Gt.toString;if(Gc(jn)){var ar=jn.call(Gt);if(!In(ar))return ar}var jr=Gt.valueOf;if(Gc(jr)){var ar=jr.call(Gt);if(!In(ar))return ar}}else{var jr=Gt.valueOf;if(Gc(jr)){var ar=jr.call(Gt);if(!In(ar))return ar}var pr=Gt.toString;if(Gc(pr)){var ar=pr.call(Gt);if(!In(ar))return ar}}throw new TypeError}function Yi(Gt){return!!Gt}function mo(Gt){return""+Gt}function Zr(Gt){var bn=yr(Gt,3);return ja(bn)?bn:mo(bn)}function ia(Gt){return Array.isArray?Array.isArray(Gt):Gt instanceof Object?Gt instanceof Array:Object.prototype.toString.call(Gt)==="[object Array]"}function Gc(Gt){return typeof Gt=="function"}function $o(Gt){return typeof Gt=="function"}function ff(Gt){switch(na(Gt)){case 3:return!0;case 4:return!0;default:return!1}}function pf(Gt,bn){var jn=Gt[bn];if(jn!=null){if(!Gc(jn))throw new TypeError;return jn}}function Wv(Gt){var bn=pf(Gt,u);if(!Gc(bn))throw new TypeError;var jn=bn.call(Gt);if(!In(jn))throw new TypeError;return jn}function E0(Gt){return Gt.value}function Xv(Gt){var bn=Gt.next();return bn.done?!1:bn}function Iw(Gt){var bn=Gt.return;bn&&bn.call(Gt)}function jy(Gt){var bn=Object.getPrototypeOf(Gt);if(typeof Gt!="function"||Gt===x||bn!==x)return bn;var jn=Gt.prototype,ar=jn&&Object.getPrototypeOf(jn);if(ar==null||ar===Object.prototype)return bn;var jr=ar.constructor;return typeof jr!="function"||jr===Gt?bn:jr}function ql(){var Gt={},bn=[],jn=function(){function wi(eo,Mr,Oo){this._index=0,this._keys=eo,this._values=Mr,this._selector=Oo}return wi.prototype["@@iterator"]=function(){return this},wi.prototype[u]=function(){return this},wi.prototype.next=function(){var eo=this._index;if(eo>=0&&eo<this._keys.length){var Mr=this._selector(this._keys[eo],this._values[eo]);return eo+1>=this._keys.length?(this._index=-1,this._keys=bn,this._values=bn):this._index++,{value:Mr,done:!1}}return{value:void 0,done:!0}},wi.prototype.throw=function(eo){throw this._index>=0&&(this._index=-1,this._keys=bn,this._values=bn),eo},wi.prototype.return=function(eo){return this._index>=0&&(this._index=-1,this._keys=bn,this._values=bn),{value:eo,done:!0}},wi}();return function(){function wi(){this._keys=[],this._values=[],this._cacheKey=Gt,this._cacheIndex=-2}return Object.defineProperty(wi.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),wi.prototype.has=function(eo){return this._find(eo,!1)>=0},wi.prototype.get=function(eo){var Mr=this._find(eo,!1);return Mr>=0?this._values[Mr]:void 0},wi.prototype.set=function(eo,Mr){var Oo=this._find(eo,!0);return this._values[Oo]=Mr,this},wi.prototype.delete=function(eo){var Mr=this._find(eo,!1);if(Mr>=0){for(var Oo=this._keys.length,yo=Mr+1;yo<Oo;yo++)this._keys[yo-1]=this._keys[yo],this._values[yo-1]=this._values[yo];return this._keys.length--,this._values.length--,eo===this._cacheKey&&(this._cacheKey=Gt,this._cacheIndex=-2),!0}return!1},wi.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Gt,this._cacheIndex=-2},wi.prototype.keys=function(){return new jn(this._keys,this._values,ar)},wi.prototype.values=function(){return new jn(this._keys,this._values,jr)},wi.prototype.entries=function(){return new jn(this._keys,this._values,pr)},wi.prototype["@@iterator"]=function(){return this.entries()},wi.prototype[u]=function(){return this.entries()},wi.prototype._find=function(eo,Mr){return this._cacheKey!==eo&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=eo)),this._cacheIndex<0&&Mr&&(this._cacheIndex=this._keys.length,this._keys.push(eo),this._values.push(void 0)),this._cacheIndex},wi}();function ar(wi,eo){return wi}function jr(wi,eo){return eo}function pr(wi,eo){return[wi,eo]}}function Hy(){return function(){function Gt(){this._map=new T}return Object.defineProperty(Gt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Gt.prototype.has=function(bn){return this._map.has(bn)},Gt.prototype.add=function(bn){return this._map.set(bn,bn),this},Gt.prototype.delete=function(bn){return this._map.delete(bn)},Gt.prototype.clear=function(){this._map.clear()},Gt.prototype.keys=function(){return this._map.keys()},Gt.prototype.values=function(){return this._map.values()},Gt.prototype.entries=function(){return this._map.entries()},Gt.prototype["@@iterator"]=function(){return this.keys()},Gt.prototype[u]=function(){return this.keys()},Gt}()}function u1(){var Gt=16,bn=y.create(),jn=ar();return function(){function Mr(){this._key=ar()}return Mr.prototype.has=function(Oo){var yo=jr(Oo,!1);return yo!==void 0?y.has(yo,this._key):!1},Mr.prototype.get=function(Oo){var yo=jr(Oo,!1);return yo!==void 0?y.get(yo,this._key):void 0},Mr.prototype.set=function(Oo,yo){var cc=jr(Oo,!0);return cc[this._key]=yo,this},Mr.prototype.delete=function(Oo){var yo=jr(Oo,!1);return yo!==void 0?delete yo[this._key]:!1},Mr.prototype.clear=function(){this._key=ar()},Mr}();function ar(){var Mr;do Mr="@@WeakMap@@"+eo();while(y.has(bn,Mr));return bn[Mr]=!0,Mr}function jr(Mr,Oo){if(!i.call(Mr,jn)){if(!Oo)return;Object.defineProperty(Mr,jn,{value:y.create()})}return Mr[jn]}function pr(Mr,Oo){for(var yo=0;yo<Oo;++yo)Mr[yo]=Math.random()*255|0;return Mr}function wi(Mr){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(Mr)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(Mr)):pr(new Uint8Array(Mr),Mr):pr(new Array(Mr),Mr)}function eo(){var Mr=wi(Gt);Mr[6]=Mr[6]&79|64,Mr[8]=Mr[8]&191|128;for(var Oo="",yo=0;yo<Gt;++yo){var cc=Mr[yo];(yo===4||yo===6||yo===8)&&(Oo+="-"),cc<16&&(Oo+="0"),Oo+=cc.toString(16).toLowerCase()}return Oo}}function Zv(Gt){return Gt.__=void 0,delete Gt.__,Gt}})})(Ee||(Ee={}));var pe;(function(n){n.defineToken=function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{multiple:!0};return new n.DefinedToken(a,u)};var r=function a(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};oe(this,a),this.prototype={},this.name=void 0,this.multiple=void 0,this.symbol=void 0;var p=h.multiple,g=p===void 0?!1:p;this.name=u,this.symbol=Symbol(this.name),this.multiple=g};n.DefinedToken=r;function i(a){return!!a&&de(a)==="object"&&"id"in a&&"registry"in a}n.isModule=i;var s;(function(a){a.singleton="singleton",a.transient="transient"})(s=n.Lifecycle||(n.Lifecycle={})),n.ClassOptionSymbol=Symbol("SyringeClassOptionSymbol"),n.DefaultOption={lifecycle:s.transient}})(pe||(pe={}));var Ae;(function(n){function r(p){return p instanceof Array?p:p!==void 0?[p]:[]}n.maybeArrayToArray=r;function i(p){return!!(p&&typeof p=="function"&&"prototype"in p)}n.isClass=i;function s(p){return!!(p&&de(p)==="object"&&"symbol"in p&&"multiple"in p)}n.isDefinedToken=s;function a(p){return!!(p&&de(p)==="object"&&"token"in p)}n.isInjectOption=a;function u(p){return!!(p&&de(p)==="object"&&"token"in p&&"named"in p)}n.isNamedToken=u;function h(p){return n.isDefinedToken(p)&&p.multiple}n.isMultipleEnabled=h})(Ae||(Ae={}));function nt(n){return n.inSingletonScope()}function G(n){return n.inTransientScope()}function Fe(n,r){return r.lifecycle===pe.Lifecycle.singleton?nt(n):G(n)}function $e(n,r){n.whenTargetNamed(ye(r))}function at(n,r){return r.container.bind(wt(n))}function Ft(n,r){var i=r.container.parent,s=i&&i.isBound(wt(n));return r.container.isBound(wt(n))&&!s?r.container.rebind(wt(n)):r.container.bind(wt(n))}function Hn(n){return n&&de(n)==="object"&&"container"in n&&"inversify"in n}function ye(n){return Ae.isDefinedToken(n)?n.symbol:n}function wt(n){return Ae.isDefinedToken(n)?n.symbol:n}var Mn=new z.W2;function jt(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=(0,z.b2)();return function(i){Reflect.defineMetadata(pe.ClassOptionSymbol,Q(Q({},n),{},{target:i}),i),r(i)}}function En(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return jt(Q(Q({},n),{},{lifecycle:pe.Lifecycle.singleton}))}function Yn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return jt(Q(Q({},n),{},{lifecycle:pe.Lifecycle.transient}))}function pn(n){return(0,z.f3)(wt(n))}function lo(n){return(0,z.t6)(ye(n))}var ji=Symbol("SyringeOptionSymbol"),Xn=function(r,i){Reflect.defineMetadata(ji,r,i)};function kr(n){var r=Ae.maybeArrayToArray(n.token),i=Ae.maybeArrayToArray(n.useClass),s=Ae.maybeArrayToArray(n.useDynamic),a=Ae.maybeArrayToArray(n.useFactory),u=Ae.maybeArrayToArray(n.contrib),h=n.lifecycle||pe.Lifecycle.transient,p={token:r,useClass:i,lifecycle:u.length>0?pe.Lifecycle.singleton:h,contrib:u,useDynamic:s,useFactory:a};return"useValue"in n&&(p.useValue=n.useValue),p}var lr=function(){function n(r,i,s){oe(this,n),this.token=void 0,this.rawToken=void 0,this.named=void 0,this.generalToken=void 0,this.option=void 0,this.context=void 0,this.mutiple=void 0,this.context=r,this.token=i,this.option=s,this.rawToken=Ae.isNamedToken(i)?i.token:i,this.named=Ae.isNamedToken(i)?i.named:void 0,this.mutiple=!!this.named||Ae.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}return re(n,[{key:"resolve",value:function(){var i=this,s=this.context;!Hn(s)||(this.mutiple?this.resolveMutilple(s):(this.resolveMono(s),!this.named&&this.option.contrib.length>0&&this.option.contrib.forEach(function(a){Ae.isMultipleEnabled(a)?at(a,s).toService(i.generalToken):Ft(a,s).toService(i.generalToken)})))}},{key:"resolveMono",value:function(i){var s=this;if("useValue"in this.option)return Ft(this.generalToken,i).toConstantValue(this.option.useValue);if(this.option.useDynamic.length>0){var a=this.option.useDynamic[this.option.useDynamic.length-1];return Fe(Ft(this.generalToken,i).toDynamicValue(function(){return a({container:s.context})}),this.option)}if(this.option.useFactory.length>0){var u=this.option.useFactory[this.option.useFactory.length-1];return Ft(this.generalToken,i).toFactory(function(){return u({container:s.context})})}if(this.option.useClass.length>0){var h=this.option.useClass[this.option.useClass.length-1];return Fe(Ft(this.generalToken,i).to(h),this.option)}}},{key:"resolveMutilple",value:function(i){var s=this,a=this.option.useClass.map(function(g){return Fe(at(s.generalToken,i).to(g),s.option)}),u=this.option.useDynamic.map(function(g){return Fe(at(s.generalToken,i).toDynamicValue(function(){return g({container:s.context})}),s.option)}),h=this.option.useFactory.map(function(g){return at(s.generalToken,i).toFactory(function(){return g({container:s.context})})}),p="useValue"in this.option?at(this.generalToken,i).toConstantValue(this.option.useValue):void 0;this.named&&(a.forEach(function(g){return s.named&&$e(g,s.named)}),u.forEach(function(g){return s.named&&$e(g,s.named)}),h.forEach(function(g){return s.named&&$e(g,s.named)}),p&&$e(p,this.named))}}],[{key:"resolveTarget",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{try{var u=Reflect.getMetadata(ji,s);u&&n.resolveOption(i,u)}catch{}if(Ae.isClass(s))if(!a.useClass)a.useClass=[s];else{var h=Ae.maybeArrayToArray(a.useClass);h.unshift(s),a.useClass=h}var p;try{p=Reflect.getMetadata(pe.ClassOptionSymbol,s)}catch{}if(p=Q(Q({},p||{}),a),!p.token)p.token=[s];else{var g=Ae.maybeArrayToArray(p.token);g.unshift(s),p.token=g}n.resolveOption(i,p)}catch{}}},{key:"resolveOption",value:function(i,s){var a=kr(Q(Q({},n.globalConfig),s));a.useClass.length===0&&a.useDynamic.length===0&&a.useFactory.length===0&&!("useValue"in a)||a.token.forEach(function(u){var h=new n(i,u,Q({},a));h.resolve()})}}]),n}();lr.globalConfig=pe.DefaultOption;var Qn=function(){function n(r){oe(this,n),this.loadedModules=[],this.container=void 0,this.inversify=!0,this.parent=void 0,r?this.container=r:this.container=new z.W2}return re(n,[{key:"load",value:function(i,s){(s||!this.loadedModules.includes(i.id))&&(i.registry(this.register.bind(this),this.resolveContext()),this.loadedModules.push(i.id))}},{key:"remove",value:function(i){return this.container.unbind(wt(i))}},{key:"get",value:function(i){return this.container.get(wt(i))}},{key:"getNamed",value:function(i,s){return this.container.getNamed(wt(i),ye(s))}},{key:"getAll",value:function(i){return this.container.getAll(wt(i))}},{key:"getAllNamed",value:function(i,s){return this.container.getAllNamed(wt(i),ye(s))}},{key:"isBound",value:function(i){return this.container.isBound(wt(i))}},{key:"isBoundNamed",value:function(i,s){return this.container.isBoundNamed(wt(i),ye(s))}},{key:"createChild",value:function(){var i=this.container.createChild(),s=new n(i);return s.parent=this,s}},{key:"register",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ae.isInjectOption(i)?lr.resolveOption(this,i):lr.resolveTarget(this,i,s)}},{key:"resolveContext",value:function(){return{container:this}}}],[{key:"config",value:function(i){lr.globalConfig=i}}]),n}(),Oi=new Qn(Mn),zr=Oi.register.bind(Oi),Yr=pe.defineToken("ContributionProvider"),to=function(){function n(r,i,s){oe(this,n),this.option={recursive:!1,cache:!0},this.services=void 0,this.serviceIdentifier=void 0,this.container=void 0,this.container=i,this.serviceIdentifier=r,s&&(this.option=Q(Q({},this.option),s))}return re(n,[{key:"setServices",value:function(i){for(var s=[],a=this.container;a;){if(a.isBound(this.serviceIdentifier)){var u=a.getAll(this.serviceIdentifier);s.push.apply(s,De(u))}a=i?a.parent:void 0}return s}},{key:"getContributions",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Q(Q({},this.option),i),a=s.cache,u=s.recursive;return(!a||this.services===void 0)&&(this.services=this.setServices(!!u)),this.services}}]),n}();function Ts(n,r){return{token:{token:Yr,named:n},useDynamic:function(s){return new to(n,s.container,r)},lifecycle:pe.Lifecycle.singleton}}function oa(n,r,i){n({token:{token:Yr,named:r},useDynamic:function(a){return new to(r,a.container,i)},lifecycle:pe.Lifecycle.singleton})}var no=function(){function n(r){oe(this,n),this.id=void 0,this.baseRegistry=void 0,this.optionCollection=void 0,n.moduleId+=1,this.id=n.moduleId,this.baseRegistry=r}return re(n,[{key:"registry",get:function(){var i=this;return function(s,a){i.baseRegistry&&i.baseRegistry(s,a),i.optionCollection&&i.optionCollection.forEach(function(u){return s(u)})}}},{key:"options",get:function(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}},{key:"register",value:function(){for(var i=this,s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return a.forEach(function(h){return i.options.push(h)}),this}},{key:"contribution",value:function(){for(var i=this,s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return a.forEach(function(h){return i.options.push(Ts(h))}),this}}]),n}();no.moduleId=0;function Ko(n){return new no(n)}var Qr=function(r){return function(i,s,a){lo(r)(i,s,a),pn(Yr)(i,s,a)}},Bi;(function(n){n.Provider=Yr,n.register=oa})(Bi||(Bi={}));var $s;(function(n){let r;(function(s){s.TOP="top",s.BOTTOM="bottom",s.RIGHT="right",s.LEFT="left"})(r=n.AnchorGroup||(n.AnchorGroup={}));let i;(function(s){s.INPUT="input",s.OUTPUT="output"})(i=n.AnchorType||(n.AnchorType={}))})($s||($s={}));var F=M(70655),H=M(67294),gf=M(94184),Oe=M.n(gf),lc=M(28660),gr=M(80703),Pa=M(73935),rl;(function(n){function r(s){return!!s&&typeof s=="object"&&"dispose"in s&&typeof s.dispose=="function"}n.is=r;function i(s){return{dispose:s}}n.create=i,n.NONE=i(()=>{})})(rl||(rl={}));let qo;var Ha;(function(n){n.None=()=>rl.NONE;function r(i,s){return(a,u)=>i(h=>a.call(u,s(h)),void 0)}n.map=r})(Ha||(Ha={})),qo=Symbol.iterator;class Pt{constructor(r=!1){this.mono=void 0,this._callbacks=void 0,this.mono=r}get callbacks(){return this._callbacks||(this._callbacks=[]),this._callbacks}get length(){return this.callbacks.length}add(r,i=void 0){this.callbacks.push([r,i])}remove(r,i=void 0){if(this.isEmpty())return;let s=!1;for(let a=0;a<this.length;a+=1)if(this.callbacks[a][0]===r){if(this.callbacks[a][1]===i){this.callbacks.splice(a,1);return}s=!0}if(s)throw new Error("You should remove it with the same context you add it")}[qo](){return this.isEmpty()?[][Symbol.iterator]():this.callbacks.slice(0).map(i=>(...s)=>i[0].apply(i[1],s))[Symbol.iterator]()}invoke(...r){const i=[];for(const s of this)try{i.push(s(...r))}catch(a){console.error(a)}return i}isEmpty(){return this.callbacks.length===0}dispose(){this._callbacks=void 0}}class Jt{constructor(r={}){this.options=void 0,this._event=void 0,this._callbacks=void 0,this.disposed=!1,this.options=r}get callbacks(){return this._callbacks||(this._callbacks=new Pt),this._callbacks}get event(){return this._event||(this._event=(r,i)=>{this.options.onFirstListenerAdd&&this.callbacks.isEmpty()&&this.options.onFirstListenerAdd(this),this.callbacks.add(r,i);const s={dispose:()=>{s.dispose=Jt.noop,this.disposed||(this.callbacks.remove(r,i),s.dispose=Jt.noop,this.options.onLastListenerRemove&&this.callbacks.isEmpty()&&this.options.onLastListenerRemove(this))}};return s}),this._event}fire(r){!this._callbacks||this.callbacks.invoke(r)}async sequence(r){for(const i of this.callbacks)if(!await r(i))break}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0),this.disposed=!0}}Jt.noop=()=>{};var xt;(function(n){function r(s){return!!s&&typeof s=="object"&&"dispose"in s&&typeof s.dispose=="function"}n.is=r;function i(s){return{dispose:s}}n.create=i,n.NULL=i(()=>{})})(xt||(xt={}));class ln{constructor(...r){this.disposables=[],this.onDisposeEmitter=new Jt,this.disposingElements=!1,r.forEach(i=>this.push(i))}get onDispose(){return this.onDisposeEmitter.event}checkDisposed(){this.disposed&&!this.disposingElements&&(this.onDisposeEmitter.fire(void 0),this.onDisposeEmitter.dispose())}get disposed(){return this.disposables.length===0}dispose(){return(0,F.mG)(this,void 0,void 0,function*(){if(!(this.disposed||this.disposingElements)){for(this.disposingElements=!0;!this.disposed;)try{yield this.disposables.pop().dispose()}catch(r){console.error(r)}this.disposingElements=!1,this.checkDisposed()}})}push(r){const{disposables:i}=this;i.push(r);const s=r.dispose.bind(r),a=xt.create(()=>{const u=i.indexOf(r);u!==-1&&i.splice(u,1),this.checkDisposed()});return r.dispose=()=>{a.dispose(),s()},a}pushAll(r){return r.map(i=>this.push(i))}}class Gn{constructor(){this.isResolved=!1,this.isRejected=!1,this.promise=new Promise((r,i)=>{this.resolve=(...s)=>{this.isResolved=!0,r(...s)},this.reject=(...s)=>{this.isRejected=!0,i(...s)}})}}const zi="X6_NODE_PORTAL_NODE_VIEW",Lr="xflow",Hr=.01,Ar=1.5,gi="XFLOW_DEFAULT_NODE",Ur="XFLOW_DEFAULT_GROUP_NODE",ko="XFLOW_DEFAULT_EDGE",Fc="XFLOW_COPY_ITEMS",Bc={width:180,height:36};function Cc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const r=Math.random()*16|0;return(n=="x"?r:r&3|8).toString(16)})}var Jo=M(18267),yf=M(18095);const Md=H.createContext(null);Md.displayName="XFlowAppContext";const Qo=()=>{const n=H.useContext(Md);return n&&n.getApp?n.getApp():null},wh=()=>H.useContext(Md);class vp{constructor(r=!1){this.cache=null,this.setApp=i=>{this.cache=i,this.onAppChangeCallback&&this.onAppChangeCallback(i)},this.isUserDefined=()=>this.isUserDefinedFlag,this.getApp=()=>this.cache,this.onAppChange=i=>{this.onAppChangeCallback=i},this.dispose=()=>{this.cache=null},this.isUserDefinedFlag=r}}const mp=n=>{const r=wh(),[,i]=H.useState(null),s=H.useMemo(()=>r&&r.isUserDefined()?r:new vp(!1),[]);return s.isUserDefined()||s.onAppChange(()=>i(0)),H.useEffect(()=>{n.app&&s.setApp(n.app)},[n.app]),s.isUserDefined()?H.createElement(H.Fragment,null,n.children):H.createElement(Md.Provider,{value:Object.assign({},s)},n.children)};mp.displayName="XFlowAppInternalProvider";const il=({children:n})=>{const[,r]=H.useState(null),i=H.useMemo(()=>new vp(!0),[]);return i.onAppChange(()=>r(0)),H.createElement(Md.Provider,{value:Object.assign({},i)},n)};il.displayName="XFlowAppProvider";var Hi;(function(n){const r="\u8282\u70B9\u64CD\u4F5C";n.ADD_NODE={id:"xflow:add-node",label:"\u6DFB\u52A0\u8282\u70B9",category:r},n.DEL_NODE={id:"xflow:del-node",label:"\u5220\u9664\u8282\u70B9",category:r},n.UPDATE_NODE_PORT={id:"xflow:update-node-port",label:"\u5220\u9664\u8FDE\u63A5\u6869",category:r},n.UPDATE_NODE={id:"xflow:update-node",label:"\u66F4\u65B0\u8282\u70B9",category:r},n.HIGHLIGHT_NODE={id:"xflow:highlight-node",label:"\u9AD8\u4EAE\u8282\u70B9",category:r},n.SELECT_NODE={id:"xflow:select-node",label:"\u9009\u4E2D\u8282\u70B9",category:r},n.MOVE_NODE={id:"xflow:move-node",label:"Move Node",category:r},n.CENTER_NODE={id:"xflow:center-node",label:"\u5C45\u4E2D\u8282\u70B9",category:r},n.FRONT_NODE={id:"xflow:front-node",label:"\u524D\u7F6E\u8282\u70B9",category:r},n.BACK_NODE={id:"xflow:back-node",label:"\u540E\u7F6E\u8282\u70B9",category:r}})(Hi||(Hi={}));var uo;(function(n){const r="\u8FB9\u64CD\u4F5C";n.ADD_EDGE={id:"xflow:add-edge",label:"\u6DFB\u52A0\u8FB9",category:r},n.DEL_EDGE={id:"xflow:del-edge",label:"\u5220\u9664\u8FB9",category:r},n.UPDATE_EDGE={id:"xflow:update-edge",label:"\u66F4\u65B0\u8FB9",category:r},n.HIGHLIGHT_EDGE={id:"xflow:highlight-edge",label:"\u9AD8\u4EAE\u8FB9",category:r},n.FRONT_EDGE={id:"xflow:front-edge",label:"\u524D\u7F6E\u53D8",category:r},n.BACK_EDGE={id:"xflow:back-edge",label:"\u540E\u7F6E\u8FB9",category:r}})(uo||(uo={}));var ei;(function(n){const r="\u753B\u5E03\u64CD\u4F5C";n.LOAD_META={id:"xflow:load-meta",label:"\u83B7\u53D6\u5143\u6570\u636E",category:r},n.LOAD_DATA={id:"xflow:load-data",label:"\u83B7\u53D6\u56FE\u6570\u636E",category:r},n.SAVE_GRAPH_DATA={id:"xflow:save-graph-data",label:"\u4FDD\u5B58",category:r},n.GRAPH_LAYOUT={id:"xflow:layout",label:"\u8BA1\u7B97\u5E03\u5C40",category:r},n.GRAPH_RENDER={id:"xflow:graph-render",label:"\u6E32\u67D3\u753B\u5E03",category:r},n.UNDO_CMD={id:"xflow:undo-cmd",label:"\u64A4\u9500",category:r},n.REDO_CMD={id:"xflow:redo-cmd",label:"\u91CD\u505A",category:r},n.GRAPH_INSTANCE_COMMAND={id:"xflow:graph-instacne-cmd",label:"Graph\u901A\u7528Command",category:r},n.GRAPH_ZOOM={id:"xflow:graph-zoom",label:"\u7F29\u653E\u753B\u5E03",category:r},n.GRAPH_FULLSCREEN={id:"xflow:graph-fullscreen",label:"\u5168\u5C4F",category:r},n.GRAPH_RESIZE={id:"xflow:graph-resize",label:"\u8C03\u6574\u7A97\u53E3\u5927\u5C0F",category:r},n.GRAPH_COPY={id:"xflow:graph-copy-selection",label:"\u590D\u5236",category:r},n.GRAPH_PASTE={id:"xflow:graph-paste-selection",label:"\u7C98\u8D34",category:r},n.GRAPH_TOGGLE_MULTI_SELECT={id:"xflow:graph-toggle-multi-select",label:"\u542F\u7528\u6846\u9009",category:r},n.GRAPH_ADD_TOOL={id:"xflow:add-tool",label:"\u6DFB\u52A0\u5DE5\u5177",category:r},n.GRAPH_DEL_TOOL={id:"xflow:del-tool",label:"\u5220\u9664\u5DE5\u5177",category:r},n.GRAPH_HISTORY_UNDO={id:"xflow:history-undo",label:"history undo",category:r},n.GRAPH_HISTORY_REDO={id:"xflow:history-redo",label:"history redo",category:r},n.GRAPH_HISTORY_RESET={id:"xflow:history-reset",label:"history reset",category:r},n.GRAPH_HISTORY_TOGGLE={id:"xflow:history-toggle",label:"history toggle",category:r}})(ei||(ei={}));var Do;(function(n){const r="\u72B6\u6001\u64CD\u4F5C";n.UPDATE_MODEL={id:"xflow:update-model",label:"\u8BBE\u7F6E\u72B6\u6001\u503C",category:r}})(Do||(Do={}));var Ms;(function(n){const r="\u7FA4\u7EC4\u64CD\u4F5C";n.INIT_GROUP={id:"xflow:init-group",label:"\u521D\u59CB\u5316\u7FA4\u7EC4",category:r},n.ADD_GROUP={id:"xflow:add-group",label:"\u65B0\u5EFA\u7FA4\u7EC4",category:r},n.DEL_GROUP={id:"xflow:del-group",label:"\u89E3\u6563\u7FA4\u7EC4",category:r},n.COLLAPSE_GROUP={id:"xflow:collapse-group",label:"\u6298\u53E0\u7FA4\u7EC4",category:r}})(Ms||(Ms={}));const Jl=n=>{const{cell:r}=n,i=Qo(),s=n.data.isCollapsed||!1,a=h=>{h.preventDefault(),i.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!1})},u=h=>{h.preventDefault(),i.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!0,gap:3})};return H.createElement("div",{className:"xflow-default-group-node"},H.createElement("div",{className:"xflow-group-header"},H.createElement("div",{className:"header-left"},n.data.label),H.createElement("div",{className:"header-right"},s&&H.createElement(Jo.Z,{onClick:a}),!s&&H.createElement(yf.Z,{onClick:u}))))};Jl.displayName="XFlowDefaultGroupNode";var yp=M(32779),bf=M(73218),Eh=M(15873),bp=M(57119),xp=M(68628),Od=M(73888);const Ml={fontSize:"16px",color:"#3057e3"};var Ol;(function(n){n.SUCCESS="success",n.PROCESSING="processing",n.ERROR="error",n.DEFAULT="default",n.WARNING="warning"})(Ol||(Ol={}));const Ou=n=>{if(n.hide)return null;switch(n.status){case Ol.PROCESSING:return H.createElement(yp.Z,{spin:!0,style:{color:"#c1cdf7",fontSize:"16px"}});case Ol.ERROR:return H.createElement(bf.Z,{style:{color:"#ff4d4f",fontSize:"16px"}});case Ol.SUCCESS:return H.createElement(Eh.Z,{style:{color:"#39ca74cc",fontSize:"16px"}});case Ol.WARNING:return H.createElement(bp.Z,{style:{color:"#faad14",fontSize:"16px"}});case Ol.DEFAULT:return H.createElement(xp.Z,{style:{color:"#d9d9d9",fontSize:"16px"}});default:return null}},xf=n=>{const r=H.isValidElement(n.data.icon)?n.data.icon:H.createElement(Od.Z,{style:Ml});return H.createElement("div",{className:`xflow-default-node ${n.isNodeTreePanel?"panel-node":""}`},H.createElement("span",{className:"icon"},r),H.createElement("span",{className:"label"},n.data.label),H.createElement("span",{className:"status"},H.createElement(Ou,{status:n.data&&n.data.status,hide:n.isNodeTreePanel})))};xf.displayName="XFlowDefaultNode";var Pu;(function(n){n.CONFIG_TYPE="GraphConfig",n.defaultNodeTypeParser=r=>r.renderKey,n.defaultEdgeTypeParser=r=>r.renderKey,n.defaultNodeMapValue=[[gi,xf],[Ur,Jl]]})(Pu||(Pu={}));class Ql{constructor(){this.CONFIG_TYPE=Pu.CONFIG_TYPE,this.x6Options=new Gn,this.rootContainer=new Gn,this.graphContainer=new Gn,this.nodeRender=new Map(Pu.defaultNodeMapValue),this.edgeRender=new Map,this.nodeTypeParser=Pu.defaultNodeTypeParser,this.edgeTypeParser=Pu.defaultEdgeTypeParser,this.events=[],this.mergeX6Config=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=yield this.getX6Config();return Object.assign(i,r)}),this.getX6Config=()=>(0,F.mG)(this,void 0,void 0,function*(){return yield this.x6Options.promise}),this.setX6Config=r=>{var i;const s=this.getDefaultGraphOptions();(i=this.x6Options)===null||i===void 0||i.resolve(Object.assign(Object.assign({},s),r))},this.setAppContainer=r=>{this.appContainer=r},this.setRootContainer=r=>{r&&(this===null||this===void 0||this.rootContainer.resolve(r))},this.setGraphContainer=r=>{var i;r&&((i=this.graphContainer)===null||i===void 0||i.resolve(r))},this.setEvents=r=>{this.events=r},this.setDefaultNodeRender=r=>{this.nodeRender.set(gi,r)},this.setDefaultEdgeRender=r=>{this.edgeRender.set(ko,r)},this.setNodeRender=(r,i)=>{this.nodeRender.set(r,i)},this.setEdgeRender=(r,i)=>{this.edgeRender.set(r,i)},this.setNodeTypeParser=r=>{this.nodeTypeParser=r},this.setEdgeTypeParser=r=>{this.edgeTypeParser=r},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){const[r,i,s]=yield Promise.all([this.rootContainer.promise,this.graphContainer.promise,this.x6Options.promise]);return{xflowInstanceId:this.xflowInstanceId,graphId:this.graphId,nodeViewId:this.graphId,appContainer:this.appContainer,rootContainer:r,graphContainer:i,x6Options:s,events:this.events,nodeRender:this.nodeRender,edgeRender:this.edgeRender,nodeTypeParser:this.nodeTypeParser,edgeTypeParser:this.edgeTypeParser}}),this.getDefaultGraphOptions=()=>({rotating:!1,resizing:!1,connecting:{snap:!0,dangling:!1,highlight:!1,connectionPoint:"rect",router:{name:"er"},connector:{name:"rounded",args:{radius:15}}},background:{},grid:{visible:!0},selecting:{strict:!0,enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},snapline:{enabled:!1},history:{enabled:!1},clipboard:{enabled:!0,useLocalStorage:!0},scroller:{enabled:!1},mousewheel:{enabled:!0,minScale:Hr,maxScale:Ar,factor:1.1,modifiers:["ctrl","meta"]},panning:{enabled:!0},scaling:{min:Hr,max:Ar},keyboard:{enabled:!0},interacting:{nodeMovable:!0,edgeLabelMovable:!1},async:!1}),this.dispose=()=>{this.rootContainer=new Gn,this.graphContainer=new Gn,this.x6Options=new Gn},this.graphId=Cc()}}const Pd=Symbol("IGraphOptionProvider"),Dd=(n,r)=>{n(Pd,{lifecycle:pe.Lifecycle.singleton,useDynamic:()=>({getOptions:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.getConfig()})})})},mg=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new Ql;return n(a,i),a},[i])};var Cp=M(41017),pa=M.n(Cp);var Du=function(r,i){return Du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var u in a)a.hasOwnProperty(u)&&(s[u]=a[u])},Du(r,i)};function xs(n,r){Du(n,r);function i(){this.constructor=n}n.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var sa=function(){return sa=Object.assign||function(i){for(var s,a=1,u=arguments.length;a<u;a++){s=arguments[a];for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(i[h]=s[h])}return i},sa.apply(this,arguments)};function Nd(n,r){var i={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&r.indexOf(s)<0&&(i[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)r.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(i[s[a]]=n[s[a]]);return i}function Cf(n,r,i,s){var a=arguments.length,u=a<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,i):s,h;if((typeof Reflect>"u"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,r,i,s);else for(var p=n.length-1;p>=0;p--)(h=n[p])&&(u=(a<3?h(u):a>3?h(r,i,u):h(r,i))||u);return a>3&&u&&Object.defineProperty(r,i,u),u}function S0(n,r){return function(i,s){r(i,s,n)}}function _0(n,r){if((typeof Reflect>"u"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,r)}function wf(n,r,i,s){function a(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(x){try{y(s.next(x))}catch(E){h(E)}}function g(x){try{y(s.throw(x))}catch(E){h(E)}}function y(x){x.done?u(x.value):a(x.value).then(p,g)}y((s=s.apply(n,r||[])).next())})}function zc(n,r){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,a,u,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(y){return function(x){return g([y,x])}}function g(y){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,a&&(u=y[0]&2?a.return:y[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,y[1])).done)return u;switch(a=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return i.label++,{value:y[1],done:!1};case 5:i.label++,a=y[1],y=[0];continue;case 7:y=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){i=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){i.label=y[1];break}if(y[0]===6&&i.label<u[1]){i.label=u[1],u=y;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(y);break}u[2]&&i.ops.pop(),i.trys.pop();continue}y=r.call(n,i)}catch(x){y=[6,x],a=0}finally{s=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function Nu(n,r,i,s){s===void 0&&(s=i),n[s]=r[i]}function Ef(n,r){for(var i in n)i!=="default"&&!r.hasOwnProperty(i)&&(r[i]=n[i])}function wp(n){var r=typeof Symbol=="function"&&Symbol.iterator,i=r&&n[r],s=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Iu(n,r){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var s=i.call(n),a,u=[],h;try{for(;(r===void 0||r-- >0)&&!(a=s.next()).done;)u.push(a.value)}catch(p){h={error:p}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(h)throw h.error}}return u}function ls(){for(var n=[],r=0;r<arguments.length;r++)n=n.concat(Iu(arguments[r]));return n}function Sf(){for(var n=0,r=0,i=arguments.length;r<i;r++)n+=arguments[r].length;for(var s=Array(n),a=0,r=0;r<i;r++)for(var u=arguments[r],h=0,p=u.length;h<p;h++,a++)s[a]=u[h];return s}function $a(n){return this instanceof $a?(this.v=n,this):new $a(n)}function yg(n,r,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(n,r||[]),a,u=[];return a={},h("next"),h("throw"),h("return"),a[Symbol.asyncIterator]=function(){return this},a;function h(T){s[T]&&(a[T]=function(O){return new Promise(function(N,k){u.push([T,O,N,k])>1||p(T,O)})})}function p(T,O){try{g(s[T](O))}catch(N){E(u[0][3],N)}}function g(T){T.value instanceof $a?Promise.resolve(T.value.v).then(y,x):E(u[0][2],T)}function y(T){p("next",T)}function x(T){p("throw",T)}function E(T,O){T(O),u.shift(),u.length&&p(u[0][0],u[0][1])}}function bg(n){var r,i;return r={},s("next"),s("throw",function(a){throw a}),s("return"),r[Symbol.iterator]=function(){return this},r;function s(a,u){r[a]=n[a]?function(h){return(i=!i)?{value:$a(n[a](h)),done:a==="return"}:u?u(h):h}:u}}function Pl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n[Symbol.asyncIterator],i;return r?r.call(n):(n=typeof wp=="function"?wp(n):n[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(u){i[u]=n[u]&&function(h){return new Promise(function(p,g){h=n[u](h),a(p,g,h.done,h.value)})}}function a(u,h,p,g){Promise.resolve(g).then(function(y){u({value:y,done:p})},h)}}function Ru(n,r){return Object.defineProperty?Object.defineProperty(n,"raw",{value:r}):n.raw=r,n}function Wa(n){if(n&&n.__esModule)return n;var r={};if(n!=null)for(var i in n)Object.hasOwnProperty.call(n,i)&&(r[i]=n[i]);return r.default=n,r}function Da(n){return n&&n.__esModule?n:{default:n}}function ku(n,r){if(!r.has(n))throw new TypeError("attempted to get private field on non-instance");return r.get(n)}function Lu(n,r,i){if(!r.has(n))throw new TypeError("attempted to set private field on non-instance");return r.set(n,i),i}var Gu=function(){return Array.isArray||function(n){return n&&typeof n.length=="number"}}();function Id(n){return n!==null&&typeof n=="object"}function wc(n){return typeof n=="function"}var Rd=function(){function n(r){return Error.call(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(i,s){return s+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r,this}return n.prototype=Object.create(Error.prototype),n}(),Fu=Rd,Xa=function(){function n(r){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,r&&(this._ctorUnsubscribe=!0,this._unsubscribe=r)}return n.prototype.unsubscribe=function(){var r;if(!this.closed){var i=this,s=i._parentOrParents,a=i._ctorUnsubscribe,u=i._unsubscribe,h=i._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,s instanceof n)s.remove(this);else if(s!==null)for(var p=0;p<s.length;++p){var g=s[p];g.remove(this)}if(wc(u)){a&&(this._unsubscribe=void 0);try{u.call(this)}catch(E){r=E instanceof Fu?_f(E.errors):[E]}}if(Gu(h))for(var p=-1,y=h.length;++p<y;){var x=h[p];if(Id(x))try{x.unsubscribe()}catch(T){r=r||[],T instanceof Fu?r=r.concat(_f(T.errors)):r.push(T)}}if(r)throw new Fu(r)}},n.prototype.add=function(r){var i=r;if(!r)return n.EMPTY;switch(typeof r){case"function":i=new n(r);case"object":if(i===this||i.closed||typeof i.unsubscribe!="function")return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof n)){var s=i;i=new n,i._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}var a=i._parentOrParents;if(a===null)i._parentOrParents=this;else if(a instanceof n){if(a===this)return i;i._parentOrParents=[a,this]}else if(a.indexOf(this)===-1)a.push(this);else return i;var u=this._subscriptions;return u===null?this._subscriptions=[i]:u.push(i),i},n.prototype.remove=function(r){var i=this._subscriptions;if(i){var s=i.indexOf(r);s!==-1&&i.splice(s,1)}},n.EMPTY=function(r){return r.closed=!0,r}(new n),n}();function _f(n){return n.reduce(function(r,i){return r.concat(i instanceof Fu?i.errors:i)},[])}var Af=function(n){xs(r,n);function r(i,s){return n.call(this)||this}return r.prototype.schedule=function(i,s){return s===void 0&&(s=0),this},r}(Xa),xg=function(n){xs(r,n);function r(i,s){var a=n.call(this,i,s)||this;return a.scheduler=i,a.work=s,a.pending=!1,a}return r.prototype.schedule=function(i,s){if(s===void 0&&(s=0),this.closed)return this;this.state=i;var a=this.id,u=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(u,a,s)),this.pending=!0,this.delay=s,this.id=this.id||this.requestAsyncId(u,this.id,s),this},r.prototype.requestAsyncId=function(i,s,a){return a===void 0&&(a=0),setInterval(i.flush.bind(i,this),a)},r.prototype.recycleAsyncId=function(i,s,a){if(a===void 0&&(a=0),a!==null&&this.delay===a&&this.pending===!1)return s;clearInterval(s)},r.prototype.execute=function(i,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(i,s);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(i,s){var a=!1,u=void 0;try{this.work(i)}catch(h){a=!0,u=!!h&&h||new Error(h)}if(a)return this.unsubscribe(),u},r.prototype._unsubscribe=function(){var i=this.id,s=this.scheduler,a=s.actions,u=a.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,u!==-1&&a.splice(u,1),i!=null&&(this.id=this.recycleAsyncId(s,i,null)),this.delay=null},r}(Af),Ep=function(){function n(r,i){i===void 0&&(i=n.now),this.SchedulerAction=r,this.now=i}return n.prototype.schedule=function(r,i,s){return i===void 0&&(i=0),new this.SchedulerAction(this,r).schedule(s,i)},n.now=function(){return Date.now()},n}(),Sp=function(n){xs(r,n);function r(i,s){s===void 0&&(s=Ep.now);var a=n.call(this,i,function(){return r.delegate&&r.delegate!==a?r.delegate.now():s()})||this;return a.actions=[],a.active=!1,a.scheduled=void 0,a}return r.prototype.schedule=function(i,s,a){return s===void 0&&(s=0),r.delegate&&r.delegate!==this?r.delegate.schedule(i,s,a):n.prototype.schedule.call(this,i,s,a)},r.prototype.flush=function(i){var s=this.actions;if(this.active){s.push(i);return}var a;this.active=!0;do if(a=i.execute(i.state,i.delay))break;while(i=s.shift());if(this.active=!1,a){for(;i=s.shift();)i.unsubscribe();throw a}},r}(Ep),kd=new Sp(xg),Cg=kd,Tf=!1,Ws={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){var r=new Error;""+r.stack}Tf=n},get useDeprecatedSynchronousErrorHandling(){return Tf}};function ol(n){setTimeout(function(){throw n},0)}var Bu={closed:!0,next:function(n){},error:function(n){if(Ws.useDeprecatedSynchronousErrorHandling)throw n;ol(n)},complete:function(){}},Dl=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Sh=null,ga=function(n){xs(r,n);function r(i,s,a){var u=n.call(this)||this;switch(u.syncErrorValue=null,u.syncErrorThrown=!1,u.syncErrorThrowable=!1,u.isStopped=!1,arguments.length){case 0:u.destination=Bu;break;case 1:if(!i){u.destination=Bu;break}if(typeof i=="object"){i instanceof r?(u.syncErrorThrowable=i.syncErrorThrowable,u.destination=i,i.add(u)):(u.syncErrorThrowable=!0,u.destination=new sl(u,i));break}default:u.syncErrorThrowable=!0,u.destination=new sl(u,i,s,a);break}return u}return r.prototype[Dl]=function(){return this},r.create=function(i,s,a){var u=new r(i,s,a);return u.syncErrorThrowable=!1,u},r.prototype.next=function(i){this.isStopped||this._next(i)},r.prototype.error=function(i){this.isStopped||(this.isStopped=!0,this._error(i))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this))},r.prototype._next=function(i){this.destination.next(i)},r.prototype._error=function(i){this.destination.error(i),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var i=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=i,this},r}(Xa),sl=function(n){xs(r,n);function r(i,s,a,u){var h=n.call(this)||this;h._parentSubscriber=i;var p,g=h;return wc(s)?p=s:s&&(p=s.next,a=s.error,u=s.complete,s!==Bu&&(g=Object.create(s),wc(g.unsubscribe)&&h.add(g.unsubscribe.bind(g)),g.unsubscribe=h.unsubscribe.bind(h))),h._context=g,h._next=p,h._error=a,h._complete=u,h}return r.prototype.next=function(i){if(!this.isStopped&&this._next){var s=this._parentSubscriber;!Ws.useDeprecatedSynchronousErrorHandling||!s.syncErrorThrowable?this.__tryOrUnsub(this._next,i):this.__tryOrSetError(s,this._next,i)&&this.unsubscribe()}},r.prototype.error=function(i){if(!this.isStopped){var s=this._parentSubscriber,a=Ws.useDeprecatedSynchronousErrorHandling;if(this._error)!a||!s.syncErrorThrowable?(this.__tryOrUnsub(this._error,i),this.unsubscribe()):(this.__tryOrSetError(s,this._error,i),this.unsubscribe());else if(s.syncErrorThrowable)a?(s.syncErrorValue=i,s.syncErrorThrown=!0):ol(i),this.unsubscribe();else{if(this.unsubscribe(),a)throw i;ol(i)}}},r.prototype.complete=function(){var i=this;if(!this.isStopped){var s=this._parentSubscriber;if(this._complete){var a=function(){return i._complete.call(i._context)};!Ws.useDeprecatedSynchronousErrorHandling||!s.syncErrorThrowable?(this.__tryOrUnsub(a),this.unsubscribe()):(this.__tryOrSetError(s,a),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(i,s){try{i.call(this._context,s)}catch(a){if(this.unsubscribe(),Ws.useDeprecatedSynchronousErrorHandling)throw a;ol(a)}},r.prototype.__tryOrSetError=function(i,s,a){if(!Ws.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{s.call(this._context,a)}catch(u){return Ws.useDeprecatedSynchronousErrorHandling?(i.syncErrorValue=u,i.syncErrorThrown=!0,!0):(ol(u),!0)}return!1},r.prototype._unsubscribe=function(){var i=this._parentSubscriber;this._context=null,this._parentSubscriber=null,i.unsubscribe()},r}(ga);function oo(n){for(;n;){var r=n,i=r.closed,s=r.destination,a=r.isStopped;if(i||a)return!1;s&&s instanceof ga?n=s:n=null}return!0}function ho(n,r,i){if(n){if(n instanceof ga)return n;if(n[Dl])return n[Dl]()}return!n&&!r&&!i?new ga(Bu):new ga(n,r,i)}var Ld=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Nl(n){return n}function eu(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return _h(n)}function _h(n){return n.length===0?Nl:n.length===1?n[0]:function(i){return n.reduce(function(s,a){return a(s)},i)}}var al=function(){function n(r){this._isScalar=!1,r&&(this._subscribe=r)}return n.prototype.lift=function(r){var i=new n;return i.source=this,i.operator=r,i},n.prototype.subscribe=function(r,i,s){var a=this.operator,u=ho(r,i,s);if(a?u.add(a.call(u,this.source)):u.add(this.source||Ws.useDeprecatedSynchronousErrorHandling&&!u.syncErrorThrowable?this._subscribe(u):this._trySubscribe(u)),Ws.useDeprecatedSynchronousErrorHandling&&u.syncErrorThrowable&&(u.syncErrorThrowable=!1,u.syncErrorThrown))throw u.syncErrorValue;return u},n.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(i){Ws.useDeprecatedSynchronousErrorHandling&&(r.syncErrorThrown=!0,r.syncErrorValue=i),oo(r)?r.error(i):console.warn(i)}},n.prototype.forEach=function(r,i){var s=this;return i=Ah(i),new i(function(a,u){var h;h=s.subscribe(function(p){try{r(p)}catch(g){u(g),h&&h.unsubscribe()}},u,a)})},n.prototype._subscribe=function(r){var i=this.source;return i&&i.subscribe(r)},n.prototype[Ld]=function(){return this},n.prototype.pipe=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return r.length===0?this:_h(r)(this)},n.prototype.toPromise=function(r){var i=this;return r=Ah(r),new r(function(s,a){var u;i.subscribe(function(h){return u=h},function(h){return a(h)},function(){return s(u)})})},n.create=function(r){return new n(r)},n}();function Ah(n){if(n||(n=Ws.Promise||Promise),!n)throw new Error("no Promise impl found");return n}var _p=function(){function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n}(),zu=_p,S=function(n){xs(r,n);function r(i,s){var a=n.call(this)||this;return a.subject=i,a.subscriber=s,a.closed=!1,a}return r.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var i=this.subject,s=i.observers;if(this.subject=null,!(!s||s.length===0||i.isStopped||i.closed)){var a=s.indexOf(this.subscriber);a!==-1&&s.splice(a,1)}}},r}(Xa),I=function(n){xs(r,n);function r(i){var s=n.call(this,i)||this;return s.destination=i,s}return r}(ga),U=function(n){xs(r,n);function r(){var i=n.call(this)||this;return i.observers=[],i.closed=!1,i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return r.prototype[Dl]=function(){return new I(this)},r.prototype.lift=function(i){var s=new W(this,this);return s.operator=i,s},r.prototype.next=function(i){if(this.closed)throw new zu;if(!this.isStopped)for(var s=this.observers,a=s.length,u=s.slice(),h=0;h<a;h++)u[h].next(i)},r.prototype.error=function(i){if(this.closed)throw new zu;this.hasError=!0,this.thrownError=i,this.isStopped=!0;for(var s=this.observers,a=s.length,u=s.slice(),h=0;h<a;h++)u[h].error(i);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new zu;this.isStopped=!0;for(var i=this.observers,s=i.length,a=i.slice(),u=0;u<s;u++)a[u].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(i){if(this.closed)throw new zu;return n.prototype._trySubscribe.call(this,i)},r.prototype._subscribe=function(i){if(this.closed)throw new zu;return this.hasError?(i.error(this.thrownError),Xa.EMPTY):this.isStopped?(i.complete(),Xa.EMPTY):(this.observers.push(i),new S(this,i))},r.prototype.asObservable=function(){var i=new al;return i.source=this,i},r.create=function(i,s){return new W(i,s)},r}(al),W=function(n){xs(r,n);function r(i,s){var a=n.call(this)||this;return a.destination=i,a.source=s,a}return r.prototype.next=function(i){var s=this.destination;s&&s.next&&s.next(i)},r.prototype.error=function(i){var s=this.destination;s&&s.error&&this.destination.error(i)},r.prototype.complete=function(){var i=this.destination;i&&i.complete&&this.destination.complete()},r.prototype._subscribe=function(i){var s=this.source;return s?this.source.subscribe(i):Xa.EMPTY},r}(U),se=function(n){xs(r,n);function r(i){var s=n.call(this)||this;return s._value=i,s}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(i){var s=n.prototype._subscribe.call(this,i);return s&&!s.closed&&i.next(this._value),s},r.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new zu;return this._value},r.prototype.next=function(i){n.prototype.next.call(this,this._value=i)},r}(U);function le(n,r){return function(i){return i.lift(new Ce(n,r))}}var Ce=function(){function n(r,i){this.compare=r,this.keySelector=i}return n.prototype.call=function(r,i){return i.subscribe(new Ze(r,this.compare,this.keySelector))},n}(),Ze=function(n){xs(r,n);function r(i,s,a){var u=n.call(this,i)||this;return u.keySelector=a,u.hasKey=!1,typeof s=="function"&&(u.compare=s),u}return r.prototype.compare=function(i,s){return i===s},r.prototype._next=function(i){var s;try{var a=this.keySelector;s=a?a(i):i}catch(p){return this.destination.error(p)}var u=!1;if(this.hasKey)try{var h=this.compare;u=h(this.key,s)}catch(p){return this.destination.error(p)}else this.hasKey=!0;u||(this.key=s,this.destination.next(i))},r}(ga);function qe(n,r){return function(s){return s.lift(new mt(n,r))}}var mt=function(){function n(r,i){this.predicate=r,this.thisArg=i}return n.prototype.call=function(r,i){return i.subscribe(new zt(r,this.predicate,this.thisArg))},n}(),zt=function(n){xs(r,n);function r(i,s,a){var u=n.call(this,i)||this;return u.predicate=s,u.thisArg=a,u.count=0,u}return r.prototype._next=function(i){var s;try{s=this.predicate.call(this.thisArg,i,this.count++)}catch(a){this.destination.error(a);return}s&&this.destination.next(i)},r}(ga),vn=function(n){return function(r){for(var i=0,s=n.length;i<s&&!r.closed;i++)r.next(n[i]);r.complete()}},Nt=function(n){return function(r){return n.then(function(i){r.closed||(r.next(i),r.complete())},function(i){return r.error(i)}).then(null,ol),r}};function $t(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rr=$t(),oi=null,br=function(n){return function(r){var i=n[rr]();do{var s=void 0;try{s=i.next()}catch(a){return r.error(a),r}if(s.done){r.complete();break}if(r.next(s.value),r.closed)break}while(!0);return typeof i.return=="function"&&r.add(function(){i.return&&i.return()}),r}},fo=function(n){return function(r){var i=n[Ld]();if(typeof i.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return i.subscribe(r)}},Lo=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function va(n){return!!n&&typeof n.subscribe!="function"&&typeof n.then=="function"}var Gr=function(n){if(!!n&&typeof n[Ld]=="function")return fo(n);if(Lo(n))return vn(n);if(va(n))return Nt(n);if(!!n&&typeof n[rr]=="function")return br(n);var r=Id(n)?"an invalid object":"'"+n+"'",i="You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(i)},Ir=function(n){xs(r,n);function r(i){var s=n.call(this)||this;return s.parent=i,s}return r.prototype._next=function(i){this.parent.notifyNext(i)},r.prototype._error=function(i){this.parent.notifyError(i),this.unsubscribe()},r.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},r}(ga),Ei=function(n){xs(r,n);function r(i,s,a){var u=n.call(this)||this;return u.parent=i,u.outerValue=s,u.outerIndex=a,u}return r.prototype._next=function(i){this.parent.notifyNext(this.outerValue,i,this.outerIndex,this)},r.prototype._error=function(i){this.parent.notifyError(i),this.unsubscribe()},r.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},r}(ga),Di=function(n){xs(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.notifyNext=function(i){this.destination.next(i)},r.prototype.notifyError=function(i){this.destination.error(i)},r.prototype.notifyComplete=function(){this.destination.complete()},r}(ga),Go=function(n){xs(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.notifyNext=function(i,s,a,u){this.destination.next(s)},r.prototype.notifyError=function(i){this.destination.error(i)},r.prototype.notifyComplete=function(i){this.destination.complete()},r}(ga);function ma(n,r){if(!r.closed){if(n instanceof al)return n.subscribe(r);var i;try{i=Gr(n)(r)}catch(s){r.error(s)}return i}}var tu={leading:!0,trailing:!1};function Xs(n,r){return r===void 0&&(r=tu),function(i){return i.lift(new Na(n,!!r.leading,!!r.trailing))}}var Na=null,Fo=function(n){xs(r,n);function r(i,s,a,u){var h=n.call(this,i)||this;return h.destination=i,h.durationSelector=s,h._leading=a,h._trailing=u,h._hasValue=!1,h}return r.prototype._next=function(i){this._hasValue=!0,this._sendValue=i,this._throttled||(this._leading?this.send():this.throttle(i))},r.prototype.send=function(){var i=this,s=i._hasValue,a=i._sendValue;s&&(this.destination.next(a),this.throttle(a)),this._hasValue=!1,this._sendValue=void 0},r.prototype.throttle=function(i){var s=this.tryDurationSelector(i);s&&this.add(this._throttled=ma(s,new Ir(this)))},r.prototype.tryDurationSelector=function(i){try{return this.durationSelector(i)}catch(s){return this.destination.error(s),null}},r.prototype.throttlingDone=function(){var i=this,s=i._throttled,a=i._trailing;s&&s.unsubscribe(),this._throttled=void 0,a&&this.send()},r.prototype.notifyNext=function(){this.throttlingDone()},r.prototype.notifyComplete=function(){this.throttlingDone()},r}(Di);function es(n,r,i){return r===void 0&&(r=Cg),i===void 0&&(i=tu),function(s){return s.lift(new uc(n,r,i.leading,i.trailing))}}var uc=function(){function n(r,i,s,a){this.duration=r,this.scheduler=i,this.leading=s,this.trailing=a}return n.prototype.call=function(r,i){return i.subscribe(new Zs(r,this.duration,this.scheduler,this.leading,this.trailing))},n}(),Zs=function(n){xs(r,n);function r(i,s,a,u,h){var p=n.call(this,i)||this;return p.duration=s,p.scheduler=a,p.leading=u,p.trailing=h,p._hasTrailingValue=!1,p._trailingValue=null,p}return r.prototype._next=function(i){this.throttled?this.trailing&&(this._trailingValue=i,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Ec,this.duration,{subscriber:this})),this.leading?this.destination.next(i):this.trailing&&(this._trailingValue=i,this._hasTrailingValue=!0))},r.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},r.prototype.clearThrottle=function(){var i=this.throttled;i&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),i.unsubscribe(),this.remove(i),this.throttled=null)},r}(ga);function Ec(n){var r=n.subscriber;r.clearThrottle()}function Bo(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(!1)var a,u;throw Error("[Immer] minified error nr: "+n+(i.length?" "+i.map(function(h){return"'"+h+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Fs(n){return!!n&&!!n[Tt]}function Za(n){return!!n&&(function(r){if(!r||typeof r!="object")return!1;var i=Object.getPrototypeOf(r);if(i===null)return!0;var s=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===Ut}(n)||Array.isArray(n)||!!n[lt]||!!n.constructor[lt]||Cs(n)||nu(n))}function Ui(n){return Fs(n)||Bo(23,n),n[Tt].t}function Bs(n,r,i){i===void 0&&(i=!1),Sc(n)===0?(i?Object.keys:Un)(n).forEach(function(s){i&&typeof s=="symbol"||r(s,n[s],n)}):n.forEach(function(s,a){return r(a,s,n)})}function Sc(n){var r=n[Tt];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:Cs(n)?2:nu(n)?3:0}function dc(n,r){return Sc(n)===2?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function cl(n,r){return Sc(n)===2?n.get(r):n[r]}function ts(n,r,i){var s=Sc(n);s===2?n.set(r,i):s===3?(n.delete(r),n.add(i)):n[r]=i}function Uu(n,r){return n===r?n!==0||1/n==1/r:n!=n&&r!=r}function Cs(n){return Fd&&n instanceof Map}function nu(n){return wg&&n instanceof Set}function zo(n){return n.o||n.t}function Vu(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=Kn(n);delete r[Tt];for(var i=Un(r),s=0;s<i.length;s++){var a=i[s],u=r[a];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[a]={configurable:!0,writable:!0,enumerable:u.enumerable,value:n[a]})}return Object.create(Object.getPrototypeOf(n),r)}function Il(n,r){return r===void 0&&(r=!1),Th(n)||Fs(n)||!Za(n)||(Sc(n)>1&&(n.set=n.add=n.clear=n.delete=Mf),Object.freeze(n),r&&Bs(n,function(i,s){return Il(s,!0)},!0)),n}function Mf(){Bo(2)}function Th(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function _c(n){var r=Er[n];return r||Bo(18,n),r}function Ya(n,r){Er[n]||(Er[n]=r)}function ll(){return bo}function ju(n,r){r&&(_c("Patches"),n.u=[],n.s=[],n.v=r)}function ya(n){Ka(n),n.p.forEach(ru),n.p=null}function Ka(n){n===bo&&(bo=n.l)}function ba(n){return bo={p:[],l:bo,h:n,m:!0,_:0}}function ru(n){var r=n[Tt];r.i===0||r.i===1?r.j():r.O=!0}function Hu(n,r){r._=r.p.length;var i=r.p[0],s=n!==void 0&&n!==i;return r.h.g||_c("ES5").S(r,n,s),s?(i[Tt].P&&(ya(r),Bo(4)),Za(n)&&(n=Rl(r,n),r.l||qa(r,n)),r.u&&_c("Patches").M(i[Tt].t,n,r.u,r.s)):n=Rl(r,i,[]),ya(r),r.u&&r.v(r.u,r.s),n!==Ye?n:void 0}function Rl(n,r,i){if(Th(r))return r;var s=r[Tt];if(!s)return Bs(r,function(u,h){return po(n,s,r,u,h,i)},!0),r;if(s.A!==n)return r;if(!s.P)return qa(n,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var a=s.i===4||s.i===5?s.o=Vu(s.k):s.o;Bs(s.i===3?new Set(a):a,function(u,h){return po(n,s,a,u,h,i)}),qa(n,a,!1),i&&n.u&&_c("Patches").R(s,i,n.u,n.s)}return s.o}function po(n,r,i,s,a,u){if(Fs(a)){var h=Rl(n,a,u&&r&&r.i!==3&&!dc(r.D,s)?u.concat(s):void 0);if(ts(i,s,h),!Fs(h))return;n.m=!1}if(Za(a)&&!Th(a)){if(!n.h.F&&n._<1)return;Rl(n,a),r&&r.A.l||qa(n,a)}}function qa(n,r,i){i===void 0&&(i=!1),n.h.F&&n.m&&Il(r,i)}function Wo(n,r){var i=n[Tt];return(i?zo(i):n)[r]}function ns(n,r){if(r in n)for(var i=Object.getPrototypeOf(n);i;){var s=Object.getOwnPropertyDescriptor(i,r);if(s)return s;i=Object.getPrototypeOf(i)}}function aa(n){n.P||(n.P=!0,n.l&&aa(n.l))}function iu(n){n.o||(n.o=Vu(n.t))}function Gd(n,r,i){var s=Cs(r)?_c("MapSet").N(r,i):nu(r)?_c("MapSet").T(r,i):n.g?function(a,u){var h=Array.isArray(a),p={i:h?1:0,A:u?u.A:ll(),P:!1,I:!1,D:{},l:u,t:a,k:null,o:null,j:null,C:!1},g=p,y=xr;h&&(g=[p],y=Or);var x=Proxy.revocable(g,y),E=x.revoke,T=x.proxy;return p.k=T,p.j=E,T}(r,i):_c("ES5").J(r,i);return(i?i.A:ll()).p.push(s),s}function Mh(n){return Fs(n)||Bo(22,n),function r(i){if(!Za(i))return i;var s,a=i[Tt],u=Sc(i);if(a){if(!a.P&&(a.i<4||!_c("ES5").K(a)))return a.t;a.I=!0,s=Of(i,u),a.I=!1}else s=Of(i,u);return Bs(s,function(h,p){a&&cl(a.t,h)===p||ts(s,h,r(p))}),u===3?new Set(s):s}(n)}function Of(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return Vu(n)}function hc(){function n(h,p){var g=u[h];return g?g.enumerable=p:u[h]=g={configurable:!0,enumerable:p,get:function(){var y=this[Tt];return xr.get(y,h)},set:function(y){var x=this[Tt];xr.set(x,h,y)}},g}function r(h){for(var p=h.length-1;p>=0;p--){var g=h[p][Tt];if(!g.P)switch(g.i){case 5:s(g)&&aa(g);break;case 4:i(g)&&aa(g)}}}function i(h){for(var p=h.t,g=h.k,y=Un(g),x=y.length-1;x>=0;x--){var E=y[x];if(E!==Tt){var T=p[E];if(T===void 0&&!dc(p,E))return!0;var O=g[E],N=O&&O[Tt];if(N?N.t!==T:!Uu(O,T))return!0}}var k=!!p[Tt];return y.length!==Un(p).length+(k?0:1)}function s(h){var p=h.k;if(p.length!==h.t.length)return!0;var g=Object.getOwnPropertyDescriptor(p,p.length-1);if(g&&!g.get)return!0;for(var y=0;y<p.length;y++)if(!p.hasOwnProperty(y))return!0;return!1}function a(h){h.O&&Bo(3,JSON.stringify(zo(h)))}var u={};Ya("ES5",{J:function(h,p){var g=Array.isArray(h),y=function(E,T){if(E){for(var O=Array(T.length),N=0;N<T.length;N++)Object.defineProperty(O,""+N,n(N,!0));return O}var k=Kn(T);delete k[Tt];for(var B=Un(k),$=0;$<B.length;$++){var X=B[$];k[X]=n(X,E||!!k[X].enumerable)}return Object.create(Object.getPrototypeOf(T),k)}(g,h),x={i:g?5:4,A:p?p.A:ll(),P:!1,I:!1,D:{},l:p,t:h,k:y,o:null,O:!1,C:!1};return Object.defineProperty(y,Tt,{value:x,writable:!0}),y},S:function(h,p,g){g?Fs(p)&&p[Tt].A===h&&r(h.p):(h.u&&function y(x){if(x&&typeof x=="object"){var E=x[Tt];if(E){var T=E.t,O=E.k,N=E.D,k=E.i;if(k===4)Bs(O,function(be){be!==Tt&&(T[be]!==void 0||dc(T,be)?N[be]||y(O[be]):(N[be]=!0,aa(E)))}),Bs(T,function(be){O[be]!==void 0||dc(O,be)||(N[be]=!1,aa(E))});else if(k===5){if(s(E)&&(aa(E),N.length=!0),O.length<T.length)for(var B=O.length;B<T.length;B++)N[B]=!1;else for(var $=T.length;$<O.length;$++)N[$]=!0;for(var X=Math.min(O.length,T.length),ne=0;ne<X;ne++)O.hasOwnProperty(ne)||(N[ne]=!0),N[ne]===void 0&&y(O[ne])}}}}(h.p[0]),r(h.p))},K:function(h){return h.i===4?i(h):s(h)}})}function dt(){function n(s){if(!Za(s))return s;if(Array.isArray(s))return s.map(n);if(Cs(s))return new Map(Array.from(s.entries()).map(function(h){return[h[0],n(h[1])]}));if(nu(s))return new Set(Array.from(s).map(n));var a=Object.create(Object.getPrototypeOf(s));for(var u in s)a[u]=n(s[u]);return dc(s,lt)&&(a[lt]=s[lt]),a}function r(s){return Fs(s)?n(s):s}var i="add";Ya("Patches",{$:function(s,a){return a.forEach(function(u){for(var h=u.path,p=u.op,g=s,y=0;y<h.length-1;y++){var x=Sc(g),E=""+h[y];x!==0&&x!==1||E!=="__proto__"&&E!=="constructor"||Bo(24),typeof g=="function"&&E==="prototype"&&Bo(24),typeof(g=cl(g,E))!="object"&&Bo(15,h.join("/"))}var T=Sc(g),O=n(u.value),N=h[h.length-1];switch(p){case"replace":switch(T){case 2:return g.set(N,O);case 3:Bo(16);default:return g[N]=O}case i:switch(T){case 1:return N==="-"?g.push(O):g.splice(N,0,O);case 2:return g.set(N,O);case 3:return g.add(O);default:return g[N]=O}case"remove":switch(T){case 1:return g.splice(N,1);case 2:return g.delete(N);case 3:return g.delete(u.value);default:return delete g[N]}default:Bo(17,p)}}),s},R:function(s,a,u,h){switch(s.i){case 0:case 4:case 2:return function(p,g,y,x){var E=p.t,T=p.o;Bs(p.D,function(O,N){var k=cl(E,O),B=cl(T,O),$=N?dc(E,O)?"replace":i:"remove";if(k!==B||$!=="replace"){var X=g.concat(O);y.push($==="remove"?{op:$,path:X}:{op:$,path:X,value:B}),x.push($===i?{op:"remove",path:X}:$==="remove"?{op:i,path:X,value:r(k)}:{op:"replace",path:X,value:r(k)})}})}(s,a,u,h);case 5:case 1:return function(p,g,y,x){var E=p.t,T=p.D,O=p.o;if(O.length<E.length){var N=[O,E];E=N[0],O=N[1];var k=[x,y];y=k[0],x=k[1]}for(var B=0;B<E.length;B++)if(T[B]&&O[B]!==E[B]){var $=g.concat([B]);y.push({op:"replace",path:$,value:r(O[B])}),x.push({op:"replace",path:$,value:r(E[B])})}for(var X=E.length;X<O.length;X++){var ne=g.concat([X]);y.push({op:i,path:ne,value:r(O[X])})}E.length<O.length&&x.push({op:"replace",path:g.concat(["length"]),value:E.length})}(s,a,u,h);case 3:return function(p,g,y,x){var E=p.t,T=p.o,O=0;E.forEach(function(N){if(!T.has(N)){var k=g.concat([O]);y.push({op:"remove",path:k,value:N}),x.unshift({op:i,path:k,value:N})}O++}),O=0,T.forEach(function(N){if(!E.has(N)){var k=g.concat([O]);y.push({op:i,path:k,value:N}),x.unshift({op:"remove",path:k,value:N})}O++})}(s,a,u,h)}},M:function(s,a,u,h){u.push({op:"replace",path:[],value:a===Ye?void 0:a}),h.push({op:"replace",path:[],value:s})}})}function Qt(){function n(p,g){function y(){this.constructor=p}a(p,g),p.prototype=(y.prototype=g.prototype,new y)}function r(p){p.o||(p.D=new Map,p.o=new Map(p.t))}function i(p){p.o||(p.o=new Set,p.t.forEach(function(g){if(Za(g)){var y=Gd(p.A.h,g,p);p.p.set(g,y),p.o.add(y)}else p.o.add(g)}))}function s(p){p.O&&Bo(3,JSON.stringify(zo(p)))}var a=function(p,g){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,x){y.__proto__=x}||function(y,x){for(var E in x)x.hasOwnProperty(E)&&(y[E]=x[E])})(p,g)},u=function(){function p(y,x){return this[Tt]={i:2,l:x,A:x?x.A:ll(),P:!1,I:!1,o:void 0,D:void 0,t:y,k:this,C:!1,O:!1},this}n(p,Map);var g=p.prototype;return Object.defineProperty(g,"size",{get:function(){return zo(this[Tt]).size}}),g.has=function(y){return zo(this[Tt]).has(y)},g.set=function(y,x){var E=this[Tt];return s(E),zo(E).has(y)&&zo(E).get(y)===x||(r(E),aa(E),E.D.set(y,!0),E.o.set(y,x),E.D.set(y,!0)),this},g.delete=function(y){if(!this.has(y))return!1;var x=this[Tt];return s(x),r(x),aa(x),x.t.has(y)?x.D.set(y,!1):x.D.delete(y),x.o.delete(y),!0},g.clear=function(){var y=this[Tt];s(y),zo(y).size&&(r(y),aa(y),y.D=new Map,Bs(y.t,function(x){y.D.set(x,!1)}),y.o.clear())},g.forEach=function(y,x){var E=this;zo(this[Tt]).forEach(function(T,O){y.call(x,E.get(O),O,E)})},g.get=function(y){var x=this[Tt];s(x);var E=zo(x).get(y);if(x.I||!Za(E)||E!==x.t.get(y))return E;var T=Gd(x.A.h,E,x);return r(x),x.o.set(y,T),T},g.keys=function(){return zo(this[Tt]).keys()},g.values=function(){var y,x=this,E=this.keys();return(y={})[yt]=function(){return x.values()},y.next=function(){var T=E.next();return T.done?T:{done:!1,value:x.get(T.value)}},y},g.entries=function(){var y,x=this,E=this.keys();return(y={})[yt]=function(){return x.entries()},y.next=function(){var T=E.next();if(T.done)return T;var O=x.get(T.value);return{done:!1,value:[T.value,O]}},y},g[yt]=function(){return this.entries()},p}(),h=function(){function p(y,x){return this[Tt]={i:3,l:x,A:x?x.A:ll(),P:!1,I:!1,o:void 0,t:y,k:this,p:new Map,O:!1,C:!1},this}n(p,Set);var g=p.prototype;return Object.defineProperty(g,"size",{get:function(){return zo(this[Tt]).size}}),g.has=function(y){var x=this[Tt];return s(x),x.o?!!x.o.has(y)||!(!x.p.has(y)||!x.o.has(x.p.get(y))):x.t.has(y)},g.add=function(y){var x=this[Tt];return s(x),this.has(y)||(i(x),aa(x),x.o.add(y)),this},g.delete=function(y){if(!this.has(y))return!1;var x=this[Tt];return s(x),i(x),aa(x),x.o.delete(y)||!!x.p.has(y)&&x.o.delete(x.p.get(y))},g.clear=function(){var y=this[Tt];s(y),zo(y).size&&(i(y),aa(y),y.o.clear())},g.values=function(){var y=this[Tt];return s(y),i(y),y.o.values()},g.entries=function(){var y=this[Tt];return s(y),i(y),y.o.entries()},g.keys=function(){return this.values()},g[yt]=function(){return this.values()},g.forEach=function(y,x){for(var E=this.values(),T=E.next();!T.done;)y.call(x,T.value,T.value,this),T=E.next()},p}();Ya("MapSet",{N:function(p,g){return new u(p,g)},T:function(p,g){return new h(p,g)}})}function Bt(){hc(),Qt(),dt()}function ir(n){return n}function $r(n){return n}var Ki,bo,ro=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Fd=typeof Map<"u",wg=typeof Set<"u",Me=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Ye=ro?Symbol.for("immer-nothing"):((Ki={})["immer-nothing"]=!0,Ki),lt=ro?Symbol.for("immer-draftable"):"__$immer_draftable",Tt=ro?Symbol.for("immer-state"):"__$immer_state",yt=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",an={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(n){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+n},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(n){return"Cannot apply patch, path doesn't resolve: "+n},16:'Sets cannot have "replace" patches.',17:function(n){return"Unsupported patch operation: "+n},18:function(n){return"The plugin for '"+n+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+n+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(n){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+n+"'"},22:function(n){return"'current' expects a draft, got: "+n},23:function(n){return"'original' expects a draft, got: "+n},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Ut=""+Object.prototype.constructor,Un=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,Kn=Object.getOwnPropertyDescriptors||function(n){var r={};return Un(n).forEach(function(i){r[i]=Object.getOwnPropertyDescriptor(n,i)}),r},Er={},xr={get:function(n,r){if(r===Tt)return n;var i=zo(n);if(!dc(i,r))return function(a,u,h){var p,g=ns(u,h);return g?"value"in g?g.value:(p=g.get)===null||p===void 0?void 0:p.call(a.k):void 0}(n,i,r);var s=i[r];return n.I||!Za(s)?s:s===Wo(n.t,r)?(iu(n),n.o[r]=Gd(n.A.h,s,n)):s},has:function(n,r){return r in zo(n)},ownKeys:function(n){return Reflect.ownKeys(zo(n))},set:function(n,r,i){var s=ns(zo(n),r);if(s?.set)return s.set.call(n.k,i),!0;if(!n.P){var a=Wo(zo(n),r),u=a?.[Tt];if(u&&u.t===i)return n.o[r]=i,n.D[r]=!1,!0;if(Uu(i,a)&&(i!==void 0||dc(n.t,r)))return!0;iu(n),aa(n)}return n.o[r]===i&&typeof i!="number"&&(i!==void 0||r in n.o)||(n.o[r]=i,n.D[r]=!0,!0)},deleteProperty:function(n,r){return Wo(n.t,r)!==void 0||r in n.t?(n.D[r]=!1,iu(n),aa(n)):delete n.D[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var i=zo(n),s=Reflect.getOwnPropertyDescriptor(i,r);return s&&{writable:!0,configurable:n.i!==1||r!=="length",enumerable:s.enumerable,value:i[r]}},defineProperty:function(){Bo(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){Bo(12)}},Or={};Bs(xr,function(n,r){Or[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}}),Or.deleteProperty=function(n,r){return Or.set.call(this,n,r,void 0)},Or.set=function(n,r,i){return xr.set.call(this,n[0],r,i,n[0])};var vi=function(){function n(i){var s=this;this.g=Me,this.F=!0,this.produce=function(a,u,h){if(typeof a=="function"&&typeof u!="function"){var p=u;u=a;var g=s;return function(k){var B=this;k===void 0&&(k=p);for(var $=arguments.length,X=Array($>1?$-1:0),ne=1;ne<$;ne++)X[ne-1]=arguments[ne];return g.produce(k,function(be){var me;return(me=u).call.apply(me,[B,be].concat(X))})}}var y;if(typeof u!="function"&&Bo(6),h!==void 0&&typeof h!="function"&&Bo(7),Za(a)){var x=ba(s),E=Gd(s,a,void 0),T=!0;try{y=u(E),T=!1}finally{T?ya(x):Ka(x)}return typeof Promise<"u"&&y instanceof Promise?y.then(function(k){return ju(x,h),Hu(k,x)},function(k){throw ya(x),k}):(ju(x,h),Hu(y,x))}if(!a||typeof a!="object"){if((y=u(a))===void 0&&(y=a),y===Ye&&(y=void 0),s.F&&Il(y,!0),h){var O=[],N=[];_c("Patches").M(a,y,O,N),h(O,N)}return y}Bo(21,a)},this.produceWithPatches=function(a,u){if(typeof a=="function")return function(y){for(var x=arguments.length,E=Array(x>1?x-1:0),T=1;T<x;T++)E[T-1]=arguments[T];return s.produceWithPatches(y,function(O){return a.apply(void 0,[O].concat(E))})};var h,p,g=s.produce(a,u,function(y,x){h=y,p=x});return typeof Promise<"u"&&g instanceof Promise?g.then(function(y){return[y,h,p]}):[g,h,p]},typeof i?.useProxies=="boolean"&&this.setUseProxies(i.useProxies),typeof i?.autoFreeze=="boolean"&&this.setAutoFreeze(i.autoFreeze)}var r=n.prototype;return r.createDraft=function(i){Za(i)||Bo(8),Fs(i)&&(i=Mh(i));var s=ba(this),a=Gd(this,i,void 0);return a[Tt].C=!0,Ka(s),a},r.finishDraft=function(i,s){var a=i&&i[Tt],u=a.A;return ju(u,s),Hu(void 0,u)},r.setAutoFreeze=function(i){this.F=i},r.setUseProxies=function(i){i&&!Me&&Bo(20),this.g=i},r.applyPatches=function(i,s){var a;for(a=s.length-1;a>=0;a--){var u=s[a];if(u.path.length===0&&u.op==="replace"){i=u.value;break}}a>-1&&(s=s.slice(a+1));var h=_c("Patches").$;return Fs(i)?h(i,s):this.produce(i,function(p){return h(p,s)})},n}(),ai=new vi,vr=ai.produce,io=ai.produceWithPatches.bind(ai),Vi=ai.setAutoFreeze.bind(ai),ca=ai.setUseProxies.bind(ai),No=ai.applyPatches.bind(ai),fc=ai.createDraft.bind(ai),ul=ai.finishDraft.bind(ai),xa=null;Qt(),Vi(!1);var Ja;(function(n){n.EMPTY_VALUE=Symbol("EMPTY_MODEL_VALUE");function r(s){return s!==n.EMPTY_VALUE}n.isValidValue=r;function i(s){return s.pipe(le(),qe(a=>r(a)),es(17,kd,{leading:!1,trailing:!0}))}n.defaultPipeFunction=i})(Ja||(Ja={}));class Ia{constructor(r=Ja.EMPTY_VALUE,i=30){this.toDispose=new ln,this.watch=(s,a=Ja.defaultPipeFunction)=>{this.subject$.observers.length+1>this.maxSubscription&&console.warn(`${this.subject$} reach maxSubscription limitation, please check`);const h=(a?a(this.subject$):this.subject$).subscribe(s);return xt.create(()=>{h.unsubscribe()})},this.getValue=()=>this.subject$.getValue(),this.setValue=s=>{if(!!this.subject$){if(typeof s=="function"){const a=this.subject$.getValue(),u=vr(a,h=>{s(h)});Ja.isValidValue(u)&&this.setValue(u);return}this.subject$.next(s)}},this.hasValidValue=()=>{const s=this.getValue();return Ja.isValidValue(s)},this.getValidValue=()=>(0,F.mG)(this,void 0,void 0,function*(){const s=new Gn;if(this.hasValidValue())return this.getValue();const a=this.watch(u=>{Ja.isValidValue(u)&&(s.resolve(u),a.dispose())});return s.promise}),this.dispose=()=>{this.toDispose.dispose()},this.subject$=new se(r||Ja.EMPTY_VALUE),this.maxSubscription=i,this.toDispose.push(xt.create(()=>{this.subject$.complete(),this.subject$.unsubscribe(),this.subject$=null}))}}const dl=pe.defineToken("IFrontendApplicationContribution"),Bd=Symbol("IGraphCommandService"),ci=pe.defineToken("ICommandHandler"),ui=Symbol("ICommandContextProvider"),Oh=Symbol("IGraphCommandFactory"),$u=pe.defineToken("IGraphCommandContribution");var Ph;(function(n){function r(a){return!!a&&a===Object(a)&&"id"in a}n.is=r;function i(a,u){if(a.label&&u.label){const h=(a.category?`${a.category}: ${a.label}`:a.label).toLowerCase(),p=(u.category?`${u.category}: ${u.label}`:u.label).toLowerCase();return h.localeCompare(p)}else return 0}n.compareCommands=i;function s(a,u){return a.id===u.id&&a.label===u.label&&a.iconName===u.iconName&&a.category===u.category}n.equals=s})(Ph||(Ph={}));let Eg=class{constructor(r){this.contributionProvider=r,this.redoStack=[],this.undoStack=[],this.commands=new Map,this.factories=new Map,this.disposables=new Map,this.cmdChangeEvent=new Ia(null),this.Globals=new Ia(new Map),this.setGlobal=(i,s)=>{this.Globals.setValue(a=>{a.set(i,s)})},this.getGlobal=i=>this.Globals.getValue().get(i),this.undoCommand=()=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.undoStack.pop();if(!i){console.error("empty undo stack");return}yield i.undo(),this.redoStack.push(i),this.cmdChangeEvent.setValue(null)}),this.redoCommand=()=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.redoStack.pop();if(!i){console.error("empty undo stack");return}yield i.redo(),this.undoStack.push(i),this.cmdChangeEvent.setValue(null)}),this.registerDisposableCommand=i=>{const s=new ln;return i({registerCommand:(u,h)=>{const p=this.registerCommand(u,h);return s.push(p),p}}),s}}get watchChange(){return this.cmdChangeEvent.watch}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerGraphCommands(this)}executeCommandPipeline(r){return(0,F.mG)(this,void 0,void 0,function*(){let i=null;for(const s of r){const a=i?.contextProvider(),{args:u,hooks:h}=yield s?.getCommandOption(a);i=yield this.executeCommand(s?.commandId,u,h)}return this.cmdChangeEvent.setValue(null),i})}executeCommand(r,i,s=[]){return(0,F.mG)(this,void 0,void 0,function*(){const a=this.getFactory(r);if(a){const u=yield a.createCommand(r,i,s);return yield u.execute(),u.isUndoable()&&this.undoStack.push(u),this.cmdChangeEvent.setValue(null),u}throw Object.assign(new Error(`The command '${r}' cannot be executed. There are no active handlers available for the command.`),{code:"NO_ACTIVE_HANDLER"})})}executeUndoCommand(r,i,s=[]){return(0,F.mG)(this,void 0,void 0,function*(){const a=this.getFactory(r);if(a){const u=yield a.createCommand(r,i,s);return yield u.execute(),u}throw Object.assign(new Error(`The command '${r}' cannot be executed. There are no active handlers available for the command.`),{code:"NO_ACTIVE_HANDLER"})})}createCommand(r,i,s=[]){return(0,F.mG)(this,void 0,void 0,function*(){const a=this.getFactory(r);if(a)return yield a.createCommand(r,i,s);throw Object.assign(new Error(`The command '${r}' cannot be executed. There are no active handlers available for the command.`),{code:"NO_ACTIVE_HANDLER"})})}get isUndoable(){return this.undoStack.length>0}get isRedoable(){return this.redoStack.length>0}hasCommand(r){return this.commands.has(r)}getCommand(r){return this.commands.get(r)}registerCommand(r,i){if(this.factories.has(r.id))return console.warn(`A command ${r.id} is already registered.`),xt.NULL;const s=new ln(this.doRegisterCommand(r),this.registerFactory(r.id,i),xt.create(()=>this.disposables.delete(r.id)));return this.disposables.set(r.id,s),s}doRegisterCommand(r){return this.commands.set(r.id,r),xt.create(()=>this.disposables.delete(r.id))}unregisterCommand(r){const i=Ph.is(r)?r.id:r,s=this.disposables.get(i);s&&s.dispose()}hasFactory(r){return!!this.factories.get(r)}getFactory(r){return this.factories.get(r)}registerFactory(r,i,s=!1){return this.hasFactory(r)&&s===!1&&console.error("cannot register command:",r),this.factories.set(r,i),xt.create(()=>{this.factories.delete(r)})}getAllFactories(){return Array.from(this.factories.entries())}};Eg=(0,F.gn)([En({contrib:[dl,Bd]}),(0,F.fM)(0,Qr($u)),(0,F.w6)("design:paramtypes",[Object])],Eg);const Pf=Ko(n=>{Bi.register(n,$u),n(Eg)}),zd=pe.defineToken("IModelService"),pc=pe.defineToken("IModelContribution"),us=Symbol("IModelOptionProvider");var Os;(function(n){n.ASYNC_SRRIES="ASYNC_SRRIES",n.ASYNC_PARALLEL="ASYNC_PARALLEL"})(Os||(Os={}));var A0=M(94633),T0=M.n(A0),ou;(function(n){let r;(function(a){a.INVALID_HOOK_BEFORE="INVALID_HOOK_BEFORE",a.INVALID_HOOK_AFTER="INVALID_HOOK_AFTER",a.INVALID_HOOK_ARGS_LENGTH="INVALID_HOOK_ARGS_LENGTH"})(r=n.ErrorEnum||(n.ErrorEnum={}));class i extends Error{constructor(u,h,...p){Array.isArray(h)&&(h=h.filter(function(g){return!!g}).join(" ")),super(`${u}: ${h}`),Error.captureStackTrace&&Error.captureStackTrace(this,i),this.code=u,this.contexts={},p.forEach(g=>{typeof g=="object"&&Object.entries(g).forEach(y=>{const[x,E]=y;x!=="key"&&E&&(this.contexts[x]=JSON.parse(JSON.stringify(E)))})})}toString(){return`${this.code}: ${this.message}`}}n.HookError=i;const s=(a,u,...h)=>new i(a,u,...h);n.HookBeforeError=()=>s(r.INVALID_HOOK_BEFORE,["hook require a before dependency but not exist in hookmap"]),n.HookAfterError=()=>s(r.INVALID_HOOK_AFTER,["hook require a after dependency but not exist in hookmap"]),n.InvalidHookArguments=a=>s(r.INVALID_HOOK_ARGS_LENGTH,["hook handlers must have 0 to 2 arguments",`but got ${a.handler.length}`])})(ou||(ou={}));var Ud;(function(n){n.normalize=(r=[],i)=>{const s=Array.isArray(r)?r:[r],a=[];return i.forEach(u=>{a.push(u)}),[...a,...s].filter(u=>u&&!!u.handler)},n.sort=(r=[],i)=>{const s=[];return r.forEach(u=>{if(u.before){if(!i.has(u.before))throw ou.HookBeforeError();const h=[u,i.get(u.before)];s.push(h)}if(u.after){if(!i.has(u.after))throw ou.HookBeforeError();const h=[i.get(u.after),u];s.push(h)}}),T0().array(r,s)}})(Ud||(Ud={}));class Ap{constructor(){this.isResolved=!1,this.isRejected=!1,this.promise=new Promise((r,i)=>{this.resolve=s=>{this.isResolved=!0,r(s)},this.reject=s=>{this.isRejected=!0,i(s)}})}}class Ra{constructor(r){this.scheduleType=Os.ASYNC_SRRIES,this.hasHook=i=>this.hookMap.has(i),this.getHooks=(i=[],s=!0)=>{const a=Ud.normalize(i,this.hookMap);return s?Ud.sort(a,this.hookMap):a},this.registerHook=i=>(this.hookMap.has(i.name)&&console.error(`${i.name} is duplicated in hookmap`),this.hookMap.set(i.name,i),{dispose:()=>{this.hookMap.delete(i.name)}}),this.call=(i,s=u=>(0,F.mG)(this,void 0,void 0,function*(){return u}),a=[])=>(0,F.mG)(this,void 0,void 0,function*(){const u=this.getHooks(a,!0);return this.schedulers[this.scheduleType](i,s,u)}),this.schedulers={[Os.ASYNC_SRRIES]:(i,s,a=[])=>(0,F.mG)(this,void 0,void 0,function*(){let u=s;for(const h of a){if([0,1].includes(h.handler.length)){yield h.handler.call(this,i);continue}if([2].includes(h.handler.length)&&u!==null){const g=yield h.handler.call(this,i,u);if(g===null){u=null;break}else if(typeof g=="function"){u=g;continue}}throw ou.InvalidHookArguments(h)}if(u)return yield u.call(this,i)}),[Os.ASYNC_PARALLEL]:(i,s,a=[])=>(0,F.mG)(this,void 0,void 0,function*(){const u=a.map(p=>{if([0,1].includes(p.handler.length))return p.handler.call(this,i);if([2].includes(p.handler.length))return p.handler.call(this,i,s);throw ou.InvalidHookArguments(p)}),h=new Ap;if(Promise.all(u).then(p=>h.resolve(p)),s)return yield s.call(this,h)})},this.hookMap=new Map,r&&r.type&&(this.scheduleType=r.type)}}const Dh=pe.defineToken("IHookService"),Ys=pe.defineToken("IHookContribution"),Qa=()=>({graphOptions:new Ra,reactNodeRender:new Ra,reactEdgeLabelRender:new Ra,afterGraphInit:new Ra,beforeGraphDestroy:new Ra,x6Events:new Ra}),Vd=()=>({dispose:()=>{}});var Nh;(function(n){n.CONFIG_TYPE="XFlowHook"})(Nh||(Nh={}));class Ks{constructor(){this.CONFIG_TYPE=Nh.CONFIG_TYPE,this.time=Date.now(),this.setRegisterHook=r=>{this.hookRegisterFunc=r},this.setRegisterHookhub=r=>{this.hookhubRegisterFn=r},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return{CONFIG_TYPE:this.CONFIG_TYPE,hookRegisterFn:this.hookRegisterFunc||Vd,hookhubRegisterFn:this.hookhubRegisterFn||Vd}}),this.dispose=()=>{}}}let Ih=class{constructor(){this.toDispose=new ln,this.hookProvider=()=>this.hooks,this.registerHook=r=>r(this.hooks),this.registerHookHub=(r,i)=>(this.hooks[r]=i,{dispose:()=>{delete this.hooks[r]}}),this.onStart=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerHookHub(this);for(const i of r)i.registerHook(this.hooks)}),this.hooks=Qa()}onStop(){this.toDispose.dispose()}};(0,F.gn)([Qr(Ys),(0,F.w6)("design:type",Object)],Ih.prototype,"contributionProvider",void 0),Ih=(0,F.gn)([En({contrib:[dl,Dh]}),(0,F.w6)("design:paramtypes",[])],Ih);var Wu;(function(n){n.pluginId="GraphEventPlugin"})(Wu||(Wu={}));let Xu=class{constructor(){this.toDispose=new ln,this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const{hookRegisterFn:i}=yield this.hookConfig.getConfig(),s=i(r);return xt.create(()=>{s.dispose()})}),this.registerHookHub=r=>(0,F.mG)(this,void 0,void 0,function*(){const{hookhubRegisterFn:i}=yield this.hookConfig.getConfig(),s=i(r);return xt.create(()=>{s.dispose()})})}};(0,F.gn)([pn(Ks),(0,F.w6)("design:type",Ks)],Xu.prototype,"hookConfig",void 0),Xu=(0,F.gn)([En({contrib:Ys})],Xu);const Df={dispose:()=>null};function Tp(n,r){let i;return()=>{clearTimeout(i),i=window.setTimeout(n,r)}}function Rh(n){let r;return()=>{r||(r=requestAnimationFrame(()=>{r=null,n()}))}}const Sg=n=>{const r=document.createElement("style");return r.setAttribute("type","text/css"),document.head.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),r};function Te(n){return typeof n=="function"&&!!n.prototype.isReactComponent}function jd(n){return typeof n=="function"&&String(n).includes("return React.createElement")}function Zu(n){return Te(n)||jd(n)}var ka;(function(n){n.pluginId="base-graph-events"})(ka||(ka={}));let bi=class{constructor(){this.toDispose=new ln,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return xt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new ln,s=[r.x6Events.registerHook({name:ka.pluginId,handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{events:u}=yield this.graphOptions.getOptions();u.forEach(h=>{a.push(h)})})}),r.afterGraphInit.registerHook({name:ka.pluginId,handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:u,modelService:h,graph:p}=a,g=yield r.x6Events.call([],y=>(0,F.mG)(this,void 0,void 0,function*(){return y.map(x=>{const E=T=>{x.callback(T,u,h,p)};return p.on(x.eventName,E),{dispose:()=>{p.off(x.eventName,E)}}})}));i.pushAll(g)})}),r.afterGraphInit.registerHook({name:"add auto resize event",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:u,options:h,graph:p}=a,g=Rh(()=>{u.executeCommand(ei.GRAPH_RESIZE.id,{})});window.addEventListener("resize",g);const{rootContainer:y}=h,x=new ResizeObserver(()=>p.resize(y.clientWidth));y&&x.observe(y),i.push(xt.create(()=>{window.removeEventListener("resize",g)}))})}),r.beforeGraphDestroy.registerHook({name:ka.pluginId,handler:()=>(0,F.mG)(this,void 0,void 0,function*(){i.dispose()})})];return i.pushAll(s),i})}};(0,F.gn)([pn(Pd),(0,F.w6)("design:type",Object)],bi.prototype,"graphOptions",void 0),bi=(0,F.gn)([En({contrib:Ys})],bi);const tm=n=>Ko(r=>{Bi.register(r,Ys),r(Xu),r(bi),r(Ih),r(Ks,{useValue:n})});var Yu=M(96486);class Hd{constructor(){this.extensions=[],this.containerClassNames=new Set,this.addCoreModule=r=>(this.extensions.unshift(r),xt.create(()=>{this.removeExtension(r)})),this.addExtension=r=>(this.extensions.push(r),xt.create(()=>{this.removeExtension(r)})),this.getExtension=r=>(0,Yu.find)(this.extensions,i=>(0,Yu.get)(i,"config.CONFIG_TYPE")===r),this.removeExtension=r=>{const i=this.extensions.indexOf(r);i>-1&&this.extensions.splice(i,1)},this.getInstanceId=()=>this.instanceId,this.addContainerClassNames=r=>this.containerClassNames.add(r),this.getContainerClassNames=()=>Array.from(this.containerClassNames),this.getAllExtensions=()=>this.extensions,this.getAllExtensionConfigs=()=>this.extensions.map(r=>r.config),this.instanceId=Cc()}has(r){return this.extensions.some(i=>i.config.CONFIG_TYPE===r)}}const Ku=()=>H.useMemo(()=>new Hd,[]),M0=H.createContext({}),kl=()=>H.useContext(M0),kh=n=>{const r=kl(),i=H.useMemo(()=>n.config?n.config:new Ks,[]);return H.useEffect(()=>{const s=r.addCoreModule({config:i,createModule:tm});return()=>{s.dispose(),i.dispose()}},[r,i]),null},Mp=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new Ks;return n(a,i),a},[i])},_g=H.createContext({cell:null,x6Graph:null,commands:null,modelService:null}),su=()=>React.useContext(_g);function O0(n,r,i){return function(s){const a=this,u=s?.getData(),h=s?.getSize(),p=s?.getPosition(),g=()=>H.createElement(_g.Provider,{value:{cell:s,x6Graph:a,commands:r,modelService:i}},H.createElement(n,{cell:s,data:u,size:h,position:p}));return H.createElement(g,null)}}function nm(n,r,i){return function(s){const a=this,u=s?.getData(),h=()=>H.createElement(_g.Provider,{value:{cell:s,x6Graph:a,commands:r,modelService:i}},H.createElement(n,{data:u,cell:s}));return H.createElement(h,null)}}const Xy=()=>{const[n,r]=React.useState(!1),{x6Graph:i,cell:s}=su();return React.useEffect(()=>{const a=({added:u,removed:h})=>{if(u.filter(y=>y.isNode()).some(y=>{y.id,s.id})){s.setData(Object.assign(Object.assign({},s.getData()),{isNodeSelected:!0})),r(!0);return}if(h.filter(y=>y.isNode()).some(y=>{y.id,s.id})){s.setData(Object.assign(Object.assign({},s.getData()),{isNodeSelected:!1})),r(!1);return}};return i.on("selection:changed",a),()=>{i.off("selection:changed",a)}},[i]),[n]},qu=Symbol("IGraphProvider"),P0=Symbol("ICommandServiceProvider"),Ll=Symbol("IModelServiceProvider");let Ju=class{constructor(){this.toDispose=new ln,this.graphMap=new Map,this.getGraph=r=>(0,F.mG)(this,void 0,void 0,function*(){let i=this.graphMap.get(r);if(!i){i=new Gn,this.graphMap.set(r,i);const s=yield this.optionProvider.getOptions(),a=this.hookService.hookProvider(),u=yield a.graphOptions.call(s.x6Options),{graphContainer:h,edgeRender:p,nodeRender:g,edgeTypeParser:y}=s,x=yield a.reactEdgeLabelRender.call(p);yield a.reactNodeRender.call(g);const{clientHeight:E,clientWidth:T}=h,O=yield this.commandServiceProvider.getCommandService(),N=yield this.modelServiceProvider.getModelService(),k=new gr.kJ(Object.assign(Object.assign({container:h,width:T,height:E},u),{onEdgeLabelRendered:B=>{const{edge:$,container:X}=B;this.renderEdgeReactLabel({edge:$,container:X,edgeRenderMap:x,edgeTypeParser:y,modelService:N,commandService:O})}}));yield a.afterGraphInit.call({graph:k,commandService:O,modelService:N,options:s}),i.resolve(k),k.on("node:moved",({node:B})=>{const $=B.getData(),X=B.position();B.setData(Object.assign(Object.assign({},$),{x:X?.x,y:X?.y}))}),k.on("node:resized",({node:B})=>{const $=B.getData(),X=B.size();B.setData(Object.assign(Object.assign({},$),{width:X?.width,height:X?.height}))}),this.toDispose.push(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){yield a.beforeGraphDestroy.call({graph:k,commandService:O,modelService:N,options:s}),this.graphMap.delete(r),k.dispose()})))}return i.promise}),this.renderEdgeReactLabel=r=>(0,F.mG)(this,void 0,void 0,function*(){const{container:i,edgeTypeParser:s,edge:a,edgeRenderMap:u,commandService:h,modelService:p}=r,g=s(a?.data)||ko,y=u.get(g);if(!!y&&a&&a?.data&&y){const x=this.edgeAppendForeignObject(a,i),E=nm(y,h,p)(a);Pa.render(E,x)}})}edgeAppendForeignObject(r,i){const s=gr.is.createSvgElement("foreignObject"),a=gr.is.createElementNS("body",gr.is.ns.xhtml),u=gr.is.createElementNS("div",gr.is.ns.xhtml),h=r?.data,p=h?.edgeContentWidth||100,g=h?.edgeContentHeight||30;return s.setAttribute("width",`${p}`),s.setAttribute("height",`${g}`),s.setAttribute("x",`${-1*p/2}`),s.setAttribute("y",`${-1*g/2}`),a.setAttribute("xhtmls",gr.is.ns.xhtml),a.style.width="100%",a.style.height="100%",a.style.padding="0",a.style.margin="0",a.style.background="unset",a.style.overflow="visible",a.className="xflow-edge-label-body",u.style.width="100%",u.style.height="100%",a.appendChild(u),s.appendChild(a),i.appendChild(s),u}dispose(){this.toDispose.dispose()}};(0,F.gn)([pn(Pd),(0,F.w6)("design:type",Object)],Ju.prototype,"optionProvider",void 0),(0,F.gn)([pn(Dh),(0,F.w6)("design:type",Object)],Ju.prototype,"hookService",void 0),(0,F.gn)([pn(P0),(0,F.w6)("design:type",Object)],Ju.prototype,"commandServiceProvider",void 0),(0,F.gn)([pn(Ll),(0,F.w6)("design:type",Object)],Ju.prototype,"modelServiceProvider",void 0),Ju=(0,F.gn)([En()],Ju);const rm=n=>{n(Ju),n(qu,{lifecycle:pe.Lifecycle.singleton,useDynamic:r=>({getGraphInstance:()=>(0,F.mG)(void 0,void 0,void 0,function*(){const i=r.container.get(Ju),s=r.container.get(Pd),a=yield s?.getOptions();return yield i?.getGraph(a.graphId)}),getGraphOptions:()=>(0,F.mG)(void 0,void 0,void 0,function*(){const i=r.container.get(Pd);return i?.getOptions()})})}),n(P0,{lifecycle:pe.Lifecycle.singleton,useDynamic:r=>({getCommandService:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.container.get(Bd)})})}),n(Ll,{lifecycle:pe.Lifecycle.singleton,useDynamic:r=>({getModelService:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.container.get(zd)})})})};var Ag;(function(n){n.CONFIG_TYPE="MODEL_SERVICE_CONFIG"})(Ag||(Ag={}));const Qu=()=>xt.create(()=>{});class D0{constructor(){this.CONFIG_TYPE=Ag.CONFIG_TYPE,this.registerModelFn=Qu,this.isMounted=new Gn,this.registerModel=r=>{this.registerModelFn=r},this.setMountState=()=>{this.isMounted.resolve(!0)},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return yield this.isMounted.promise,{CONFIG_TYPE:this.CONFIG_TYPE,modelRegisterFunc:this.registerModelFn||Qu}}),this.dispose=()=>{this.registerModelFn=Qu,this.isMounted=new Gn}}}let Uc=class{constructor(){this.toDispose=new ln,this.deferredModelMap=new Map,this.registerModel=r=>{const{id:i,getInitialValue:s,modelFactory:a}=r,u=new ln,h=this.ensureModel(i);if(h.isResolved){console.error(r,"model has been registerd");return}const p=s?s():Ja.EMPTY_VALUE,g=a?a():new Ia(p);return Ja.isValidValue(p)&&h.resolve(g),r.watchChange&&r.watchChange(g,this).then(y=>{h.isResolved||h.resolve(g),this.toDispose.pushAll([y,u]),u.push(y)}),u},this.findDeferredModel=r=>this.deferredModelMap.get(r),this.awaitModel=r=>this.ensureModel(r).promise,this.registerRuntimeModel=()=>(0,F.mG)(this,void 0,void 0,function*(){const{modelRegisterFunc:r}=yield this.modelOptionProvider.getOption(),i=yield this.graphProvider.getGraphInstance();r&&r(this,i)}),this.ensureModel=r=>{const i=this.deferredModelMap.get(r);if(i)return i;const s=new Gn;return this.deferredModelMap.set(r,s),this.toDispose.push(xt.create(()=>this.deferredModelMap.delete(r))),s}}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerModel(this);this.registerRuntimeModel()}onStop(){this.toDispose.dispose()}};(0,F.gn)([Qr(pc),(0,F.w6)("design:type",Object)],Uc.prototype,"contributionProvider",void 0),(0,F.gn)([pn(us),(0,F.w6)("design:type",Object)],Uc.prototype,"modelOptionProvider",void 0),(0,F.gn)([pn(qu),(0,F.w6)("design:type",Object)],Uc.prototype,"graphProvider",void 0),Uc=(0,F.gn)([En({contrib:[dl,zd]})],Uc);const N0=n=>r=>{const i=r.findDeferredModel(n);return!!(i&&i.promise)},Uo=n=>r=>(0,F.mG)(void 0,void 0,void 0,function*(){return yield r.awaitModel(n)}),qi=n=>r=>(0,F.mG)(void 0,void 0,void 0,function*(){return(yield r.awaitModel(n)).getValidValue()});var Lh;(function(n){n.id="GRAPH_ENABLE_MULTI_SELECT",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Lh||(Lh={}));var $d;(function(n){n.id="GRAPH_FULLSCREEN",n.getModel=Uo(n.id),n.useValue=qi(n.id)})($d||($d={}));var Op;(function(n){n.id="IS_NODE_SELECTED",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Op||(Op={}));var Pp;(function(n){n.id="IS_GROUP_SELECTED",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Pp||(Pp={}));var Dp;(function(n){n.id="IS_NORMAL_NODES_SELECTED",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Dp||(Dp={}));var Wd;(function(n){n.id="LAST_SELECTED_CELL",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Wd||(Wd={}));var Ni;(function(n){n.id="SELECTED_CELLS",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Ni||(Ni={}));var Nf;(function(n){n.id="LAST_SELECTED_NODE",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Nf||(Nf={}));var Gl;(function(n){n.id="SELECTED_NODES",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Gl||(Gl={}));var If;(function(n){n.id="SELECTED_EDGES",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(If||(If={}));var la;(function(n){n.id="SELECTED_GROUPS",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(la||(la={}));var Vc;(function(n){n.id="CONTEXTMENU_NODE",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Vc||(Vc={}));var Xd;(function(n){n.id="CONTEXTMENU_EDGE",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Xd||(Xd={}));var hl;(function(n){n.id="CONTEXTMENU_TARGET",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(hl||(hl={}));var Fl;(function(n){n.id="GRAPH_META",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Fl||(Fl={}));var qs;(function(n){n.id="GRAPH_SCALE",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(qs||(qs={}));var ec;(function(n){n.id="COMMAND_REDOABLE",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(ec||(ec={}));var Ac;(function(n){n.id="COMMAND_UNDOABLE",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Ac||(Ac={}));var Ca;(function(n){n.id="COMMAND_GLOBALS",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Ca||(Ca={}));var au;(function(n){n.id="HISTORY_UNDOABLE",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(au||(au={}));var Zd;(function(n){n.id="HISTORY_REDOABLE",n.getModel=Uo(n.id),n.useValue=qi(n.id)})(Zd||(Zd={}));let ed=class{registerModel(r){r.registerModel({id:ec.id,getInitialValue:()=>this.commands.isRedoable,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){return this.commands.watchChange(()=>{i.setValue(this.commands.isRedoable)})})}),r.registerModel({id:Ac.id,getInitialValue:()=>this.commands.isUndoable,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){return this.commands.watchChange(()=>{i.setValue(this.commands.isUndoable)})})}),r.registerModel({id:Ca.id,modelFactory:()=>this.commands.Globals})}};(0,F.gn)([pn(Bd),(0,F.w6)("design:type",Object)],ed.prototype,"commands",void 0),ed=(0,F.gn)([En({contrib:pc})],ed);const td=(n,r,i)=>(n.on(r,i),xt.create(()=>{n.off(r,i)}));let Tc=class{constructor(){this.getGraphInstance=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=yield this.graphProvider.getGraphInstance(),i=yield this.graphProvider.getGraphOptions();return{graph:r,config:i}})}registerModel(r){r.registerModel({id:Fl.id,getInitialValue:()=>({flowId:"-1"}),watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){return xt.create(()=>{i.setValue({flowId:"-1"})})})}),r.registerModel({id:Lh.id,getInitialValue:()=>({isEnable:!1}),watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){return xt.create(()=>{i.setValue({isEnable:!1})})})}),r.registerModel({id:$d.id,getInitialValue:()=>!1,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){const a=()=>(0,F.mG)(this,void 0,void 0,function*(){const u=!!document.fullscreenElement;(yield $d.getModel(s)).setValue(u)});return document.addEventListener("fullscreenchange",a,!1),xt.create(()=>{document.removeEventListener("fullscreenchange",a),i.setValue(!1)})})}),r.registerModel({id:Ni.id,getInitialValue:()=>[],watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s}=yield this.getGraphInstance(),a=u=>{const{selected:h}=u;i.setValue(h)};return s.on("selection:changed",a),xt.create(()=>s.off("selection:changed",a))})}),r.registerModel({id:Wd.id,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Ni.getModel(s)).watch((u=[])=>{i.setValue([...u].pop()||null)})})}),r.registerModel({id:Gl.id,getInitialValue:()=>[],watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Ni.getModel(s)).watch((u=[])=>{const h=u.filter(p=>p.isNode());i.setValue(h)})})}),r.registerModel({id:Nf.id,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Gl.getModel(s)).watch(h=>{i.setValue([...h].pop()||null)})})}),r.registerModel({id:Op.id,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Gl.getModel(s)).watch(h=>{i.setValue(h.length>0)})})}),r.registerModel({id:Pp.id,getInitialValue:()=>!1,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Ni.getModel(s)).watch(h=>{const p=h.every(g=>g&&g.getProp("isGroup")===!0);i.setValue(p)})})}),r.registerModel({id:la.id,getInitialValue:()=>[],watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Gl.getModel(s)).watch(h=>{const p=h.filter(g=>g&&g.getProp("isGroup")===!0);i.setValue(p)})})}),r.registerModel({id:Dp.id,getInitialValue:()=>!1,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Ni.getModel(s)).watch(h=>{const p=h.every(y=>{const x=!(y&&y.getProp("isGroup")),E=!(y&&y.getProp("group"));return x&&E}),g=h.length>0&&p;i.setValue(g)})})}),r.registerModel({id:qs.id,getInitialValue:()=>({zoomFactor:-1}),watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s}=yield this.getGraphInstance(),a=u=>{const h=s.zoom();i.setValue(Object.assign(Object.assign({},u),{zoomFactor:h}))};return s.on("scale",a),xt.create(()=>s.off("scale",a))})}),r.registerModel({id:hl.id,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s,config:a}=yield this.getGraphInstance(),u=p=>g=>{const{x:y,y:x}=g,E=s.localToClient({x:y,y:x}),T=a.rootContainer.getBoundingClientRect(),O={x:E.x-(T?.x||0),y:E.y-(T?.y||0)};i.setValue({type:p,anchor:O,data:g,cell:g.cell})},h=new ln;return h.pushAll([td(s,"node:contextmenu",u("node")),td(s,"edge:contextmenu",u("edge")),td(s,"blank:contextmenu",u("blank"))]),h})}),r.registerModel({id:Zd.id,getInitialValue:()=>!1,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s}=yield this.getGraphInstance(),a=()=>{const u=s.history.canRedo();i.setValue(u)};return s.history&&s.history.on("change",a),xt.create(()=>s.history.off("change",a))})}),r.registerModel({id:au.id,getInitialValue:()=>!1,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s}=yield this.getGraphInstance(),a=()=>{const u=s.history.canUndo();i.setValue(u)};return s.history&&s.history.on("change",a),xt.create(()=>s.history.off("change",a))})})}};(0,F.gn)([pn(qu),(0,F.w6)("design:type",Object)],Tc.prototype,"graphProvider",void 0),Tc=(0,F.gn)([En({contrib:pc})],Tc);const Tg=Ko(n=>{Bi.register(n,pc),n(Uc),n(Tc),n(ed)}),I0=(n,r)=>{n({token:us,useDynamic:()=>({getOption:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.getConfig()})}),lifecycle:pe.Lifecycle.singleton})},nd=n=>Ko(r=>{I0(r,n)}),Np=n=>{const{config:r}=n,i=kl(),s=H.useMemo(()=>r||new D0,[]);return H.useEffect(()=>{const a=i.addCoreModule({config:s,createModule:nd});return s.setMountState(),()=>{a.dispose(),s.dispose()}},[]),null};Np.defaultProps={XFlowModuleType:"ModelServiceConfig"};const Rf=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new D0;return n(a,i),a},[i])},ua=n=>{const r=n.getChildren(),i=n.getSize(),s=n.getData()||{},a=n.getPosition(),u=n.getParentId(),{isCollapsed:h}=s,p=s.groupCollapsedSize||(h?i:null);return Object.assign(Object.assign({},s),{id:n.id,width:i.width,height:i.height,x:a.x,y:a.y,group:u,groupChildren:r?r.map(g=>g.id):null,groupCollapsedSize:p})},Ip=n=>{const r=n.getData()||{};return Object.assign(Object.assign({},r),{id:n.id,source:n.getSourceCellId(),target:n.getTargetCellId(),sourcePortId:n.getSourcePortId(),targetPortId:n.getTargetPortId(),sourcePort:n.getSourcePortId(),targetPort:n.getTargetPortId()})},Rp=n=>{const r=[],i=[],s=a=>{a.isNode()&&r.push(ua(a)),a.isEdge()&&i.push(Ip(a))};return n.map(a=>s(a)),{nodes:r,edges:i}},fl=100;let jc=class{constructor(){this.getGraphInstance=()=>this.graphProvider.getGraphInstance(),this.getGraphConfig=()=>this.graphProvider.getGraphOptions(),this.getGraphData=()=>(0,F.mG)(this,void 0,void 0,function*(){const i=(yield this.graphProvider.getGraphInstance()).getCells();return Rp(i)}),this.getAllNodes=()=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.graphProvider.getGraphInstance()).getNodes()}),this.getNodeById=r=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.graphProvider.getGraphInstance()).getCellById(r)}),this.getAllEdges=()=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.graphProvider.getGraphInstance()).getEdges()}),this.getEdgeById=r=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.graphProvider.getGraphInstance()).getCellById(r)}),this.updateNodeAttrs=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){r instanceof gr.NB?r.setAttrs(i):(yield this.getNodeById(r)).setAttrs(i)}),this.updateEdgeAttrs=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){r instanceof gr.kS?r.setAttrs(i):(yield this.getEdgeById(r)).setAttrs(i)}),this.translateGraph=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){const s=yield this.graphProvider.getGraphInstance(),a=s.translate();s.translate(a.tx+r,a.ty+i)})}start(){return(0,F.mG)(this,void 0,void 0,function*(){yield this.startContributions(),this.registerEventListeners()})}executeCommand(r,i,s=[]){return this.commandService.executeCommand(r,i,s)}executeCommandPipeline(r){return this.commandService.executeCommandPipeline(r)}registerEventListeners(){window.addEventListener("unload",()=>{this.stopContributions()})}startContributions(){return(0,F.mG)(this,void 0,void 0,function*(){console.log(this.contributions.getContributions());for(const r of this.contributions.getContributions())if(r.onStart)try{yield this.measure(`${r.constructor.name}.onStart`,()=>r.onStart(this))}catch(i){console.error("Could not start contribution",i)}})}stopContributions(){console.info(">>> Stopping frontend contributions...");for(const r of this.contributions.getContributions())if(r.onStop)try{r.onStop(this)}catch(i){console.error("Could not stop contribution",i)}console.info("<<< All frontend contributions have been stopped.")}measure(r,i){return(0,F.mG)(this,void 0,void 0,function*(){const s=`${r}-start`,a=`${r}-end`;performance.mark(s);const u=yield i();performance.mark(a),performance.measure(r,s,a);for(const h of performance.getEntriesByName(r)){const p=`Frontend ${h.name}`;h.duration>fl?console.warn(`${p} is slow, took: ${h.duration.toFixed(1)} ms`):console.debug(`${p} took: ${h.duration.toFixed(1)} ms`)}return performance.clearMeasures(r),u})}};(0,F.gn)([Qr(dl),(0,F.w6)("design:type",Object)],jc.prototype,"contributions",void 0),(0,F.gn)([pn(qu),(0,F.w6)("design:type",Object)],jc.prototype,"graphProvider",void 0),(0,F.gn)([pn(Bd),(0,F.w6)("design:type",Object)],jc.prototype,"commandService",void 0),(0,F.gn)([pn(zd),(0,F.w6)("design:type",Object)],jc.prototype,"modelService",void 0),jc=(0,F.gn)([En()],jc);const Gh=Ko(n=>{Bi.register(n,dl),n(jc)}),rd=n=>{const r=n.getAllExtensions(),i=new Qn,s=r.map(u=>{const{createModule:h,config:p}=u;return h(p)});return i.load(Gh),i.load(Pf),i.load(Tg),s.forEach(u=>{i.load(u)}),i.get(jc)};class id{constructor(){this.xflowPrefixCls=XFLOW_PREFIX_CLS,this.getXflowPrefixCls=r=>`${this.xflowPrefixCls}-${r}`,this.setXflowPrefixCls=r=>this.xflowPrefixCls=r}}const wa=H.createContext({configProvider:null}),Fh=()=>H.useContext(wa),Bh=n=>{const r=Fh();return H.useMemo(()=>r.configProvider?r.configProvider.getXflowPrefixCls(n):`${Lr}-${n}`,[n])};function kf(n){const{createModule:r,children:i}=n,s=kl(),a=H.useMemo(()=>n.config||{CONFIG_TYPE:"",getConfig:()=>(0,F.mG)(this,void 0,void 0,function*(){return{}})},[]);return H.useEffect(()=>{const u=s.addExtension({config:a,createModule:r});return()=>{u.dispose()}},[]),Array.isArray(i)||H.isValidElement(i)?H.createElement(H.Fragment,null," ",i," "):null}const Bl=(n={})=>(0,H.useMemo)(()=>{const r=Object.entries(n),i=r.length>0?{position:"absolute"}:{};return r.forEach(([s,a=0])=>{i[s]=`${a}px`}),i},[n]),Lf=n=>Ko(r=>{rm(r),Dd(r,n)}),Gf=gr.Bz.create({type:"react componnet"});gr.kJ.registerReactComponent=Gf.register,gr.kJ.unregisterReactComponent=Gf.unregister,gr.kJ.Hook.prototype.getReactComponent=function(n){const r=this.options.getReactComponent;if(typeof r=="function"){const s=gr.Iw.call(r,this.graph,n);if(s!=null)return s}let i=n.getComponent();if(typeof i=="string"){const s=Gf.get(i);if(s==null)return Gf.onNotFound(i);i=s}return i};class zl extends gr.NB{get component(){return this.getComponent()}set component(r){this.setComponent(r)}getComponent(){return this.store.get("component")}setComponent(r,i={}){return r==null?this.removeComponent(i):this.store.set("component",r,i),this}removeComponent(r={}){return this.store.remove("component",r),this}}(function(n){function r(i,s,a="rect"){const u=[],h=s?gr.Lu.getForeignObjectMarkup():{tagName:"g",selector:"content"};return i?u.push(h):u.push({tagName:a,selector:"body"},h,{tagName:"text",selector:"label"}),u}n.config({view:"react-shape-view",markup:r(!1,!0),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"},label:{fontSize:14,fill:"#333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"}},propHooks(i){if(i.markup==null){const s=i.primer,a=i.useForeignObject!==!1;if(s&&s!=="rect"){i.markup=r(!1,a,s);let u={};s==="circle"?u={refCx:"50%",refCy:"50%",refR:"50%"}:s==="ellipse"&&(u={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}),i.attrs=gr.QK.merge({},{body:Object.assign({refWidth:null,refHeight:null},u)},i.attrs||{})}else i.simple&&(i.markup=r(!0,a),i.attrs=gr.QK.merge({},{body:null,label:null},i.attrs||{}))}return i}}),gr.NB.registry.register("react-shape",n,!0)})(zl||(zl={}));var pl;(function(n){let r=!1,i;const s=(g,y)=>{const x=y.payload;switch(y.type){case"add":{const E=g.findIndex(T=>T.id===x.id);return E>=0?(g[E]=x,[...g]):[...g,x]}case"remove":{const E=g.findIndex(T=>T.id===x.id);if(E>=0){const T=[...g];return T.splice(E,1),T}break}default:break}return g};function a(g,y){r&&i({type:"add",payload:{id:g,portal:y}})}n.connect=a;function u(g){r&&i({type:"remove",payload:{id:g}})}n.disconnect=u;function h(){return r}n.isActive=h;function p(){return()=>{r=!0;const[g,y]=(0,H.useReducer)(s,[]);return i=y,H.createElement(H.Fragment,{children:g.map(x=>x.portal)})}}n.getProvider=p})(pl||(pl={}));class Yd extends H.PureComponent{constructor(r){super(r),this.scheduledAnimationFrame=!1,this.throttleUpdateFunc=()=>{this.scheduledAnimationFrame||(this.scheduledAnimationFrame=!0,window.requestAnimationFrame(()=>{this.setState(i=>(this.scheduledAnimationFrame=!1,{tick:i.tick+1}))}))},this.onChange=i=>{if(Yd.throttleChangeTypes.includes(i.key)){this.throttleUpdateFunc();return}this.setState({tick:this.state.tick+1})},this.state={tick:0}}componentDidMount(){this.props.node.on("change:*",this.onChange)}componentWillUnmount(){this.props.node.off("change:*",this.onChange)}clone(r){const{node:i}=this.props;return typeof r.type=="string"?H.cloneElement(r):H.cloneElement(r,{node:i})}render(){const{graph:r,node:i,component:s}=this.props;if(H.isValidElement(s))return this.clone(s);if(typeof s=="function"){const a=gr.Iw.call(s,r,i);if(H.isValidElement(a))return this.clone(a)}return s}}Yd.throttleChangeTypes=["position","size"];class Ul extends gr.DK{init(){super.init(),this.cell.on("removed",()=>{pl.disconnect(this.cell.id)})}getComponentContainer(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent}confirmUpdate(r){const i=super.confirmUpdate(r);return this.handleAction(i,Ul.action,()=>{gr.b2?gr.b2.scheduleTask(()=>{this.renderReactComponent()}):this.renderReactComponent()})}renderReactComponent(){this.unmountReactComponent();const r=this.getComponentContainer(),i=this.cell,s=this.graph;if(r){const a=this.graph.hook.getReactComponent(i),u=H.createElement(Yd,{graph:s,node:i,component:a});pl.isActive()?pl.connect(this.cell.id,Pa.createPortal(u,r)):Pa.render(u,r)}}unmountReactComponent(){const r=this.getComponentContainer();return r&&Pa.unmountComponentAtNode(r),r}onMouseDown(r,i,s){const a=r.target;if(a.tagName.toLowerCase()==="input"){const h=a.getAttribute("type");if(h==null||["text","password","number","email","search","tel","url"].includes(h))return}super.onMouseDown(r,i,s)}unmount(){return pl.disconnect(this.cell.id),this.unmountReactComponent(),super.unmount(),this}}(function(n){n.action="react",n.config({bootstrap:[n.action],actions:{component:n.action}}),gr.DK.registry.register("react-shape-view",n,!0)})(Ul||(Ul={}));var zh=function(n,r,i,s){var a=arguments.length,u=a<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,i):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,r,i,s);else for(var p=n.length-1;p>=0;p--)(h=n[p])&&(u=(a<3?h(u):a>3?h(r,i,u):h(r,i))||u);return a>3&&u&&Object.defineProperty(r,i,u),u};const od="react";function Vl(n){const r={current:()=>{}},i=y=>{r.current(y)};let s,a;function u(y,x){s({id:y,portal:x})}function h(y){a(y)}const p=()=>{const[y,x]=(0,H.useState)([]),[E,T]=(0,H.useState)(),O=(0,H.useRef)([]),N=(0,H.useRef)([]);r.current=T,s=(0,H.useCallback)(ne=>{const{id:be}=ne;if(O.current.includes(be)){const me=N.current,je=me.findIndex(it=>it.id===be);je>-1?me[je]=ne:me.push(ne),N.current=me}else x(me=>{const je=[...me],it=je.findIndex(ct=>ct.id===be);return it>-1?je[it]=ne:je.push(ne),je})},[]),a=(0,H.useCallback)(ne=>{O.current.includes(ne)&&(O.current=O.current.filter(be=>be!==ne)),N.current.map(be=>be.id).includes(ne)&&(N.current=N.current.filter(be=>be.id!==ne)),x(be=>be.filter(me=>me.id!==ne))},[]);const $=(0,H.useCallback)(ne=>{const{name:be,data:me}=ne,{cells:je=[]}=me||{};if(be==="add"){const it=je.filter(ct=>ct.isNode()).map(ct=>ct.id);O.current=Array.from(new Set([...O.current,...it]))}},[]),X=(0,H.useCallback)(({name:ne})=>{if(ne==="add"){const be=N.current;if(be.length){const me=be.map(je=>je.id);O.current=O.current.filter(je=>!me.includes(je)),N.current=[],x(je=>{const it=[...je];return be.forEach(ct=>{const Zt=it.findIndex(At=>At.id===ct.id);Zt>-1?it[Zt]=ct:it.push(ct)}),it})}}},[]);return(0,H.useLayoutEffect)(()=>(E&&(E.on("batch:start",$),E.on("batch:stop",X)),()=>{E&&(E.off("batch:start",$),E.off("batch:stop",X),x([]),O.current=[],N.current=[])}),[E,$,X]),H.createElement(H.Fragment,null,...y.map(ne=>ne.portal))};class g extends gr.DK{init(){super.init(),this.cell.on("removed",()=>{h(this.cell.id)})}getComponentContainer(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent}confirmUpdate(x){const E=super.confirmUpdate(x);return this.handleAction(E,od,()=>this.renderReactComponent())}renderReactComponent(){this.unmountReactComponent();const x=this.getComponentContainer(),E=this.cell,T=this.graph;if(x){const O=this.graph.hook.getReactComponent(E),N=H.createElement(Yd,{graph:T,node:E,component:O});u(this.cell.id,Pa.createPortal(N,x))}}unmountReactComponent(){const x=this.getComponentContainer();return x&&Pa.unmountComponentAtNode(x),x}onMouseDown(x,E,T){const O=x.target;if(O.tagName.toLowerCase()==="input"){const k=O.getAttribute("type");if(k==null||["text","password","number","email","search","tel","url"].includes(k))return}super.onMouseDown(x,E,T)}dispose(){h(this.cell.id),this.unmountReactComponent()}}return zh([gr.DK.dispose()],g.prototype,"dispose",null),g.config({bootstrap:[od],actions:{component:od}}),gr.DK.registry.register(n,g,!0),{Portal:p,setGraph:i}}function Kd(n){const r=(0,H.useRef)(!1),[i]=(0,H.useState)(()=>r.current?{}:(r.current=!0,Vl(n)));return[i.Portal,i.setGraph]}const Hc=n=>{const r=Qo(),i=H.useRef(null),s=H.useRef(null),a=kl(),u=H.useMemo(()=>{const E=n.config?n.config:new Ql;return E.setX6Config(),E},[]),[h,p]=Kd(u.graphId);H.useEffect(()=>{r&&r.getGraphInstance().then(E=>{p(E)})},[r,p]),H.useEffect(()=>{u.setRootContainer(i.current),u.setGraphContainer(s.current),u.xflowInstanceId=a.getInstanceId(),a.addCoreModule({config:u,createModule:Lf});const E=()=>(0,F.mG)(void 0,void 0,void 0,function*(){u.dispose()});return()=>{E()}},[]);const g=Bl(n.position),y=Bh("canvas-root"),x=Bh("x6-canvas");return H.createElement(H.Fragment,null,H.createElement("div",{ref:i,className:y,style:g,id:u.graphId,tabIndex:0},H.createElement("div",{ref:s,className:x}),n.children),H.createElement(h,null))};Hc.defaultProps={isXFlowCanvas:!0};let gc=class{constructor(){this.toDispose=new ln,this.runtimeHooks=[],this.getX6Graph=()=>(0,F.mG)(this,void 0,void 0,function*(){if(this.graph)return this.graph;const r=yield this.graphProvider.getGraphInstance();return this.graph=r,r}),this.getGraphConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.graphProvider.getGraphOptions()}),this.getGraphMeta=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.getModelService();return this.graphMeta||(yield Fl.useValue(r))}),this.setArgs=(r,i=[])=>(this.args=r,this.runtimeHooks=i,{args:r,hooks:i}),this.getArgs=()=>({args:Object.assign(Object.assign({},this.args),{modelService:this.getModelService(),commandService:this.getCommands(),getGraphMeta:this.getGraphMeta,getX6Graph:this.getX6Graph,getGraphConfig:this.getGraphConfig}),hooks:this.runtimeHooks}),this.setResult=r=>(this.result=r,this.result),this.getResult=()=>this.result,this.getHooks=()=>this.hookService.hookProvider(),this.getCommands=()=>this.commandService,this.getModelService=()=>this.modelService,this.addUndo=r=>{if(!Array.isArray(r))return this.addUndo([r]);this.toDispose.pushAll(r)},this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){yield this.toDispose.dispose()}),this.isUndoable=()=>!this.toDispose.disposed,this.getDisposables=()=>this.toDispose,this.setGlobal=(r,i)=>{this.commandService.setGlobal(r,i)},this.getGlobal=r=>this.commandService.getGlobal(r)}init(){this.getGraphMeta().then(r=>{this.graphMeta=r})}};(0,F.gn)([pn(qu),(0,F.w6)("design:type",Object)],gc.prototype,"graphProvider",void 0),(0,F.gn)([pn(Dh),(0,F.w6)("design:type",Object)],gc.prototype,"hookService",void 0),(0,F.gn)([pn(Bd),(0,F.w6)("design:type",Object)],gc.prototype,"commandService",void 0),(0,F.gn)([pn(zd),(0,F.w6)("design:type",Object)],gc.prototype,"modelService",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],gc.prototype,"init",null),gc=(0,F.gn)([jt()],gc);const Uh="CommandConfig",sd=()=>[];class Mc{constructor(){this.setCommandContributions=r=>{this.getContributions=r},this.getCommandContributions=()=>this.getContributions(),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){return this.registerHookFn?this.registerHookFn(r):Df}),this.registerHookHub=r=>(0,F.mG)(this,void 0,void 0,function*(){return this.registerHookHubFn?this.registerHookHubFn(r):Df}),this.CONFIG_TYPE=Uh,this.setRegisterHookFn=r=>{this.registerHookFn=r},this.setRegisterHookHubFn=r=>{this.registerHookHubFn=r},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return{registerHookFn:this.registerHookFn,getContributions:this.getContributions,CONFIG_TYPE:this.CONFIG_TYPE}}),this.getContributions=sd}}const ad=()=>new Mc,kp=(n,r)=>{n({token:Mc,contrib:[Ys],lifecycle:pe.Lifecycle.singleton,useDynamic:()=>r})};var cu;(function(n){n.command=Hi.ADD_NODE,n.hookKey="addNode"})(cu||(cu={}));let lu=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().addNode.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{createNodeService:p,cellFactory:g,commandService:y,options:x}=h,E=yield r.getX6Graph();let T=h.nodeConfig;if(p){const B=yield p(h);if(typeof B=="boolean")return{err:"createNodeService rejected"};T=B}const O=yield this.processNodeConfig(T);let N;const k=Object.assign(Object.assign({},x),{isCommand:!0});if(g){const B=yield g(O,this);N=E.addNode(B,k)}else N=E.addNode(O,k);return r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){const B=Object.assign({id:N.id},N.getData());y.executeCommand(Hi.DEL_NODE.id,{nodeConfig:B})}))),{nodeConfig:O,nodeCell:N}}),s);return r.setResult(u),this}),this.processNodeConfig=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.contextProvider();if(r.data=Object.assign({},r),r.shape)return r;if(!r.view){const s=yield i.getGraphConfig();r.view=s.graphId}if(!r.component){const s=yield this.getNodeReactComponent(r),a=i.getCommands(),u=i.getModelService();r.shape="react-shape",r.component=O0(s,a,u)}return r}),this.getNodeReactComponent=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.contextProvider(),s=i.getHooks(),a=yield i.getGraphConfig(),u=yield s.reactNodeRender.call(a.nodeRender),h=a.nodeTypeParser(r)||gi,p=u.get(h);return p||console.error("react node component is missing:",a.nodeRender,h,p),p}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],lu.prototype,"contextProvider",void 0),lu=(0,F.gn)([jt({token:{token:ci,named:cu.command.id}})],lu);var Oc;(function(n){n.command=Hi.DEL_NODE,n.hookKey="delNode",n.createHook=()=>new Ra})(Oc||(Oc={}));let $c=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().delNode.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:p,deleteNodeService:g,options:y}=h,x=yield r.getX6Graph();if(g&&!(yield g(h)))return{err:" service rejected"};const E=(h.x6Node||h.nodeConfig).id,T=x.getCellById(E);if(T&&T.isNode()){const O=[...x.getIncomingEdges(T)||[],...x.getOutgoingEdges(T)||[]];yield Promise.all(O.map(k=>p.executeCommand(uo.DEL_EDGE.id,{x6Edge:k})));const N=T.getData();return T.remove(Object.assign(Object.assign({},y),{isCommand:!0})),r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){yield p.executeCommand(Hi.ADD_NODE.id,{nodeConfig:N})}))),{err:null,nodeConfig:N}}return{err:"node is not exist"}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()&&this.contextProvider().undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],$c.prototype,"contextProvider",void 0),$c=(0,F.gn)([jt({token:{token:ci,named:Oc.command.id}})],$c);var Wc;(function(n){n.command=Hi.SELECT_NODE,n.hookKey="selectNode"})(Wc||(Wc={}));let gl=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().selectNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),p=h.getSelectedCells().map(E=>E.id),{nodeIds:g,resetSelection:y,commandService:x}=u;return y?h.resetSelection(g):h.select(g),this.ctx.addUndo({dispose:()=>{x.executeUndoCommand(Hi.SELECT_NODE.id,{nodeIds:p,resetSelection:!0})}}),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],gl.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],gl.prototype,"init",null),gl=(0,F.gn)([jt({token:{token:ci,named:Wc.command.id}})],gl);var Vh;(function(n){n.command=Hi.MOVE_NODE,n.hookKey="moveNode",n.createHook=()=>new Ra})(Vh||(Vh={}));let cd=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().moveNode.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{nodePositionService:p}=h;if(p&&!(yield p(h)))return{err:"service rejected"};const{dx:g=0,dy:y=0,x,y:E,duration:T=150}=h.position,N=(yield r.getX6Graph()).getCellById(h.id);if(N){let k=x,B=E;const{x:$,y:X}=N.position();let ne=()=>{N.position($,X,{silent:!1})};return g||y?(k=g+$,B=y+X,N.translate(g,y,{transition:{duration:T}}),ne=()=>N.translate(-g,-y,{transition:{duration:T}})):N.position(k,B,{silent:!1}),r.addUndo(xt.create(()=>{ne()})),{err:null,nextX:k,nextY:B}}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],cd.prototype,"contextProvider",void 0),cd=(0,F.gn)([jt({token:{token:ci,named:Vh.command.id}})],cd);var R0=M(51584),qd=M.n(R0),ld;(function(n){n.command=Hi.UPDATE_NODE,n.hookKey="updateNode",n.XFlowNodeSetOptions={overwrite:!0},n.NODE_WIDTH=200,n.NODE_HEIGHT=40})(ld||(ld={}));let Jd=class{constructor(){this.setNodeConfig=(r,i,s)=>{r.setData(i,s),r.setPosition(i?.x||0,i?.y||0),r.setSize(i?.width||ld.NODE_WIDTH,i?.height||ld.NODE_HEIGHT),r.angle(i?.angle||0,{absolute:!0}),qd()(i?.visible)&&r.setVisible(i?.visible),!(r instanceof zl)&&!!r.getAttrByPath("text/text")&&r.setAttrByPath("text/text",i.label),i.attrs&&r.setAttrs(i.attrs),Array.isArray(i.ports)&&r.setPropByPath("ports/items",i.ports,Object.assign({rewrite:!0},s))},this.getNodeConfig=r=>{const i=r.getData(),s=r.getPosition(),a=r.getSize();return Object.assign(Object.assign(Object.assign({},i),s),a)},this.getNodeCell=(r,i)=>{const{nodeConfig:s,setNodeConfig:a}=i;let u="";if(a&&a.node&&typeof a.node=="string"?u=a.node:s&&s.id&&typeof s.id=="string"&&(u=s.id),u)return r?.getCellById(u);if(a&&a.node instanceof gr.NB)return a.node},this.getNextNodeConfig=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){if(r&&r.setNodeConfig&&r.setNodeConfig.callback){const s=this.getNodeConfig(i);return r.setNodeConfig.callback(s)}return r.nodeConfig}),this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().updateNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{options:h=ld.XFlowNodeSetOptions}=u,p=yield this.ctx.getX6Graph(),g=this.getNodeCell(p,u),y=yield this.getNextNodeConfig(u,g);return this.setNodeConfig(g,y,h),{nodeConfig:y,nodeCell:g}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Jd.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Jd.prototype,"init",null),Jd=(0,F.gn)([jt({token:{token:ci,named:ld.command.id}})],Jd);var vl;(function(n){n.command=Hi.CENTER_NODE,n.hookKey="centerNode"})(vl||(vl={}));let uu=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().centerNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{nodeConfig:p}=u,g=h?.getCellById(p?.id);return h?.centerCell(g),{x6Node:g}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],uu.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],uu.prototype,"init",null),uu=(0,F.gn)([jt({token:{token:ci,named:vl.command.id}})],uu);var Lp;(function(n){n.command=Hi.FRONT_NODE,n.hookKey="frontNode"})(Lp||(Lp={}));let Qd=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().frontNode.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield this.ctx.getX6Graph(),{nodeId:g}=h,y=p?.getCellById(g);return y?(y.toFront(),r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){h.commandService.executeCommand(Hi.BACK_NODE.id,{nodeId:g})})))):console.error(g,"this nodeId is not exist"),{}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Qd.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Qd.prototype,"init",null),Qd=(0,F.gn)([jt({token:{token:ci,named:Lp.command.id}})],Qd);var hi;(function(n){n.command=Hi.BACK_NODE,n.hookKey="backNode"})(hi||(hi={}));let Ff=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().backNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{nodeId:p}=u,g=h?.getCellById(p);return g?(g.toBack(),this.ctx.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){u.commandService.executeCommand(Hi.FRONT_NODE.id,{nodeId:p})})))):console.error(p,"this nodeId is not exist"),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Ff.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Ff.prototype,"init",null),Ff=(0,F.gn)([jt({token:{token:ci,named:hi.command.id}})],Ff);var Gp;(function(n){n.command=Hi.HIGHLIGHT_NODE,n.hookKey="highlightNode"})(Gp||(Gp={}));let jl=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().highlightNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{nodeId:p,stroke:g,strokeWidth:y}=u,x=h?.getCellById(p);if(x){if(x?.setAttrs({body:{stroke:g||"#7c68fc",strokeWidth:y||2}}),u?.isHighlightRelatedLines){const{edgeStroke:E,edgeStrokeWidth:T}=u;(h?.getEdges()).forEach(N=>{const k=N?.getData();u?.commandService.executeCommand(uo.HIGHLIGHT_EDGE.id,{edgeId:k?.id,strokeColor:E,strokeWidth:T})})}}else return console.error(p,"this nodeId is not exist"),{err:"this nodeId is not exist"};return{err:null}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],jl.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],jl.prototype,"init",null),jl=(0,F.gn)([jt({token:{token:ci,named:Gp.command.id}})],jl);var Bf;(function(n){n.command=Hi.UPDATE_NODE_PORT,n.hookKey="updateNodePort"})(Bf||(Bf={}));let Fp=class{constructor(){this.getCell=(r,i)=>typeof i=="string"?r.getCellById(i):i,this.getNodeConfig=r=>{const i=r.getData(),s=r.getPosition(),a=r.getSize();return Object.assign(Object.assign(Object.assign({},i),s),a)},this.updatePortsOfNodeConfig=(r,i,s)=>{const a=this.getNodeConfig(r);this.isNodeAnchors(a.ports)&&(a.ports=[...i]),this.isPortMetaData(a.ports)&&(a.ports.items=[...i]),r.setData(a,s)},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),a=r.getHooks(),u=yield r.getX6Graph(),h=yield a.updateNodePort.call(i,p=>(0,F.mG)(this,void 0,void 0,function*(){const{node:g,updatePorts:y,options:x,commandService:E}=p,T=this.getCell(u,g);if(!T||T.isEdge())return console.error("node_is _not_exsit",g),{err:"node_is _not_exsit"};const O=T.getPorts(),N=yield y([...O],T,u);return N===!1?{err:"service rejected"}:(T.setPropByPath("ports/items",N,Object.assign({rewrite:!0},x)),this.updatePortsOfNodeConfig(T,N,x),r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){E.executeCommand(Hi.UPDATE_NODE_PORT.id,{node:g,updatePorts:()=>(0,F.mG)(this,void 0,void 0,function*(){return O})})}))),{ports:N})}),s);return r.setResult(h),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isNodeAnchors(r){return Array.isArray(r)}isPortMetaData(r){return r.items&&Array.isArray(r.items)}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Fp.prototype,"contextProvider",void 0),Fp=(0,F.gn)([jt({token:{token:ci,named:Bf.command.id}})],Fp);const im=n=>{n(lu),n($c),n(gl),n(cd),n(Jd),n(uu),n(Qd),n(Ff),n(jl),n(Fp)},Pc=[cu,Oc,Wc,Vh,ld,vl,Lp,hi,Gp,Bf];var Bp;(function(n){n.command=ei.LOAD_META,n.hookKey="graphMeta"})(Bp||(Bp={}));let ud=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().graphMeta.call(r,p=>(0,F.mG)(this,void 0,void 0,function*(){const{graphMetaService:g}=p,y=g?yield g(p):Object.assign({},p?.meta);return Object.assign({flowId:y?.flowId},y)}),i),u=this.ctx.getModelService();return(yield Fl.getModel(u)).setValue(a),this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],ud.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],ud.prototype,"init",null),ud=(0,F.gn)([jt({token:{token:ci,named:Bp.command.id}})],ud);var jh;(function(n){n.command=ei.SAVE_GRAPH_DATA,n.hookKey="saveGraphData"})(jh||(jh={}));let dd=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.ctx,i=r.getArgs();return yield r.getHooks().saveGraphData.call(i.args,a=>(0,F.mG)(this,void 0,void 0,function*(){const{saveGraphDataService:u,includeAttrs:h}=a,p=yield r.getX6Graph(),g=p.getNodes(),y=p.getEdges(),x=g.map(N=>{const k=N.getData(),B=N.position(),$=N.size(),X=Object.assign(Object.assign(Object.assign({id:N.id},k),B),$);return h&&(X.attrs=N.getAttrs()),X}),E=y.map(N=>{const k=N.getData(),B=Object.assign({id:N.id},k);return h&&(B.attrs=N.getAttrs()),B}),T={nodes:x,edges:E},O=yield this.ctx.getGraphMeta();if(u){const N=yield u(O,T);N&&this.ctx.setResult(N)}return{}}),i.hooks),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],dd.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],dd.prototype,"init",null),dd=(0,F.gn)([jt({token:{token:ci,named:jh.command.id}})],dd);var hd;(function(n){n.command=ei.LOAD_DATA,n.hookKey="loadData",n.createHook=()=>new Ra})(hd||(hd={}));let ws=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().loadData.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{loadDataService:h}=u,p=yield this.ctx.getGraphMeta();return{graphData:yield h(p)}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],ws.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],ws.prototype,"init",null),ws=(0,F.gn)([jt({token:{token:ci,named:hd.command.id}})],ws);const tc=n=>typeof n=="string",eh=n=>{const r=Object.create(null);return i=>r[i]||(r[i]=n(i))},zf=/-(\w)/g,Hh=eh(n=>n.replace(zf,(r,i)=>i?i.toUpperCase():"")),Ps=Array.isArray,Wn=n=>typeof n=="number",fd=n=>Number.isNaN(Number(n)),Uf=n=>{const r=parseFloat(n);return fd(r)?n:r},vc=n=>n!==null&&typeof n=="object",La=n=>{if(n===null)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array){const r=[];return n.forEach(i=>{r.push(i)}),r.map(i=>La(i))}if(typeof n=="object"&&n!=={}){const r=Object.assign({},n);return Object.keys(r).forEach(i=>{r[i]=La(r[i])}),r}return n},xi=(n,r)=>{const i=n[r];return vc(i)?i.cell:i},Ds=(n,r,i)=>{const s=[];for(let a=0;a<n;a++)s[a]=0;return i&&i.forEach(a=>{const u=xi(a,"source"),h=xi(a,"target");u&&(s[r[u]]+=1),h&&(s[r[h]]+=1)}),s},th=n=>{const r=[],i=n.length;for(let s=0;s<i;s+=1){r[s]=[];for(let a=0;a<i;a+=1)s===a?r[s][a]=0:n[s][a]===0||!n[s][a]?r[s][a]=1/0:r[s][a]=n[s][a]}for(let s=0;s<i;s+=1)for(let a=0;a<i;a+=1)for(let u=0;u<i;u+=1)r[a][u]>r[a][s]+r[s][u]&&(r[a][u]=r[a][s]+r[s][u]);return r},pd=(n,r)=>{const{nodes:i,edges:s}=n,a=[],u={};if(!i)throw new Error("invalid nodes data!");return i&&i.forEach((h,p)=>{u[h.id]=p;const g=[];a.push(g)}),s&&s.forEach(h=>{const p=xi(h,"source"),g=xi(h,"target"),y=u[p],x=u[g];a[y][x]=1,r||(a[x][y]=1)}),a},Vf=(n,r)=>{const i=[];return n.forEach(s=>{const a=[];s.forEach(u=>{a.push(u*r)}),i.push(a)}),i},nh=(n,r)=>{if(n&&n.children){for(let i=n.children.length-1;i>=0;i--)if(!nh(n.children[i],r))return}return!!r(n)},Ga=(n,r)=>{typeof r=="function"&&nh(n,r)},du=n=>typeof n=="function",go=new Map,om=(n,r)=>{if(go.get(n)&&console.warn(`The layout with the name ${n} exists already, it will be overridden`),isObject(r)){class i extends Base{constructor(a){super();const u=this,h={},p=u.getDefaultCfg();Object.assign(h,p,r,a),Object.keys(h).forEach(g=>{const y=h[g];u[g]=y})}}go.set(n,i)}else go.set(n,r);return go.get(n)},Mg=n=>{go.has(n)&&go.delete(n)},sm=n=>go.has(n)?go.get(n):null;class ds{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(r){return this.init(r),this.execute(!0)}init(r){this.nodes=r.nodes||[],this.edges=r.edges||[],this.combos=r.combos||[]}execute(r){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(r){r&&Object.assign(this,r)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}class Js extends ds{constructor(r){super(),this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodeSize=30,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const r=this,i=r.nodes,s=r.edges,a=i.length,u=r.begin;if(a===0)return r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s};if(a===1)return i[0].x=u[0],i[0].y=u[1],r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s};const h=[];i.forEach(x=>{h.push(x)});const p={};if(h.forEach((x,E)=>{p[x.id]=E}),(r.sortBy==="degree"||!tc(r.sortBy)||h[0][r.sortBy]===void 0)&&(r.sortBy="degree",fd(i[0].degree))){const x=Ds(h.length,p,s);h.forEach((E,T)=>{E.degree=x[T]})}h.sort((x,E)=>E[r.sortBy]-x[r.sortBy]),!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight);const g=r.rows,y=r.cols!=null?r.cols:r.columns;if(r.cells=a,g!=null&&y!=null?(r.rows=g,r.cols=y):g!=null&&y==null?(r.rows=g,r.cols=Math.ceil(r.cells/r.rows)):g==null&&y!=null?(r.cols=y,r.rows=Math.ceil(r.cells/r.cols)):(r.splits=Math.sqrt(r.cells*r.height/r.width),r.rows=Math.round(r.splits),r.cols=Math.round(r.width/r.height*r.splits)),r.cols*r.rows>r.cells){const x=r.small(),E=r.large();(x-1)*E>=r.cells?r.small(x-1):(E-1)*x>=r.cells&&r.large(E-1)}else for(;r.cols*r.rows<r.cells;){const x=r.small(),E=r.large();(E+1)*x>=r.cells?r.large(E+1):r.small(x+1)}r.cellWidth=r.width/r.cols,r.cellHeight=r.height/r.rows,r.condense&&(r.cellWidth=0,r.cellHeight=0),r.preventOverlap&&h.forEach(x=>{(!x.x||!x.y)&&(x.x=0,x.y=0);let E,T;Ps(x.size)?(E=x.size[0],T=x.size[1]):Wn(x.size)?(E=x.size,T=x.size):vc(x.size)&&(E=x.size.width,T=x.size.height),(E===void 0||T===void 0)&&(Ps(r.nodeSize)?(E=r.nodeSize[0],T=r.nodeSize[1]):Wn(r.nodeSize)?(E=r.nodeSize,T=r.nodeSize):(E=30,T=30));const O=r.preventOverlapPadding,N=E+O,k=T+O;r.cellWidth=Math.max(r.cellWidth,N),r.cellHeight=Math.max(r.cellHeight,k)}),r.cellUsed={},r.row=0,r.col=0,r.id2manPos={};for(let x=0;x<h.length;x++){const E=h[x];let T;if(r.position&&(T=r.position(E)),T&&(T.row!==void 0||T.col!==void 0)){const O={row:T.row,col:T.col};if(O.col===void 0)for(O.col=0;r.used(O.row,O.col);)O.col++;else if(O.row===void 0)for(O.row=0;r.used(O.row,O.col);)O.row++;r.id2manPos[E.id]=O,r.use(O.row,O.col)}r.getPos(E)}return r.onLayoutEnd&&r.onLayoutEnd(),{edges:s,nodes:h}}small(r){const i=this;let s;const a=i.rows||5,u=i.cols||5;return r==null?s=Math.min(a,u):Math.min(a,u)===i.rows?i.rows=r:i.cols=r,s}large(r){const i=this;let s;const a=i.rows||5,u=i.cols||5;return r==null?s=Math.max(a,u):Math.max(a,u)===i.rows?i.rows=r:i.cols=r,s}used(r,i){return this.cellUsed[`c-${r}-${i}`]||!1}use(r,i){const s=this;s.cellUsed[`c-${r}-${i}`]=!0}moveToNextCell(){const r=this,i=r.cols||5;r.col++,r.col>=i&&(r.col=0,r.row++)}getPos(r){const i=this,s=i.begin,a=i.cellWidth,u=i.cellHeight;let h,p;const g=i.id2manPos[r.id];if(g)h=g.col*a+a/2+s[0],p=g.row*u+u/2+s[1];else{for(;i.used(i.row,i.col);)i.moveToNextCell();h=i.col*a+a/2+s[0],p=i.row*u+u/2+s[1],i.use(i.row,i.col),i.moveToNextCell()}r.x=h,r.y=p}getType(){return"grid"}}const Dc=(n,r)=>{let i;return n?Wn(n)?i=s=>n:i=n:i=s=>r||1,i};class jf extends ds{constructor(r){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0}}execute(){var r,i;const s=this,a=s.nodes;if(s.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(s.timeInterval),!a||a.length===0){(r=s.onLayoutEnd)===null||r===void 0||r.call(s);return}!s.width&&typeof window<"u"&&(s.width=window.innerWidth),!s.height&&typeof window<"u"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);const u=s.center;if(a.length===1){a[0].x=u[0],a[0].y=u[1],(i=s.onLayoutEnd)===null||i===void 0||i.call(s);return}const h={},p={};a.forEach((E,T)=>{Wn(E.x)||(E.x=Math.random()*s.width),Wn(E.y)||(E.y=Math.random()*s.height),h[E.id]=E,p[E.id]=T}),s.nodeMap=h,s.nodeIdxMap=p,s.linkDistance=Dc(s.linkDistance,1),s.nodeStrength=Dc(s.nodeStrength,1),s.edgeStrength=Dc(s.edgeStrength,1);const g=s.nodeSize;let y;if(s.preventOverlap){const E=s.nodeSpacing;let T;Wn(E)?T=()=>E:du(E)?T=E:T=()=>0,g?Ps(g)?y=O=>(g[0]>g[1]?g[0]:g[1])+T(O):y=O=>g+T(O):y=O=>O.size?Ps(O.size)?(O.size[0]>O.size[1]?O.size[0]:O.size[1])+T(O):vc(O.size)?(O.size.width>O.size.height?O.size.width:O.size.height)+T(O):O.size+T(O):10+T(O)}s.nodeSize=y;const x=s.edges;s.degrees=Ds(a.length,s.nodeIdxMap,x),s.getMass||(s.getMass=E=>s.degrees[s.nodeIdxMap[E.id]]||1),s.run()}run(){var r;const i=this,{maxIteration:s,nodes:a,workerEnabled:u,minMovement:h}=i;if(!!a)if(u){for(let p=0;p<s;p++){const g=i.runOneStep(p);if(i.reachMoveThreshold(a,g,h))break}(r=i.onLayoutEnd)===null||r===void 0||r.call(i)}else{if(typeof window>"u")return;let p=0;this.timeInterval=window.setInterval(()=>{var g,y;if(!a)return;const x=i.runOneStep(p)||[];i.reachMoveThreshold(a,x,h)&&((g=i.onLayoutEnd)===null||g===void 0||g.call(i),window.clearInterval(i.timeInterval)),p++,p>=s&&((y=i.onLayoutEnd)===null||y===void 0||y.call(i),window.clearInterval(i.timeInterval))},0)}}reachMoveThreshold(r,i,s){let a=0;return r.forEach((u,h)=>{const p=u.x-i[h].x,g=u.y-i[h].y;a+=Math.sqrt(p*p+g*g)}),a/=r.length,a<s}runOneStep(r){var i;const s=this,{nodes:a,edges:u}=s,h=[],p=[];if(!a)return;a.forEach((x,E)=>{h[2*E]=0,h[2*E+1]=0,p[2*E]=0,p[2*E+1]=0}),s.calRepulsive(h,a),u&&s.calAttractive(h,u),s.calGravity(h,a);const g=Math.max(.02,s.interval-r*.002);s.updateVelocity(h,p,g,a);const y=[];return a.forEach(x=>{y.push({x:x.x,y:x.y})}),s.updatePosition(p,g,a),(i=s.tick)===null||i===void 0||i.call(s),y}calRepulsive(r,i){const s=this,a=s.getMass,u=s.nodeStrength,h=s.factor,p=s.coulombDisScale,g=s.preventOverlap,y=s.nodeSize;i.forEach((x,E)=>{const T=a?a(x):1;i.forEach((O,N)=>{if(E>=N)return;const k=x.x-O.x,B=x.y-O.y,$=Math.sqrt(k*k+B*B)+.01,X=($+.1)*p,ne=k/$,be=B/$,me=(u(x)+u(O))/2*h/(X*X),je=a?a(O):1;if(r[2*E]+=ne*me,r[2*E+1]+=be*me,r[2*N]-=ne*me,r[2*N+1]-=be*me,g&&$<(y(x)+y(O))/2){const it=(u(x)+u(O))/2/($*$);r[2*E]+=ne*it/T,r[2*E+1]+=be*it/T,r[2*N]-=ne*it/je,r[2*N+1]-=be*it/je}})})}calAttractive(r,i){const s=this,a=s.nodeMap,u=s.nodeIdxMap,h=s.linkDistance,p=s.edgeStrength,g=s.getMass;i.forEach((y,x)=>{const E=xi(y,"source"),T=xi(y,"target"),O=a[E],N=a[T],k=N.x-O.x,B=N.y-O.y,$=Math.sqrt(k*k+B*B)+.01,X=k/$,ne=B/$,je=((h(y)||1)-$)*p(y),it=u[E],ct=u[T],Zt=g?g(O):1,At=g?g(N):1;r[2*it]-=X*je/Zt,r[2*it+1]-=ne*je/Zt,r[2*ct]+=X*je/At,r[2*ct+1]+=ne*je/At})}calGravity(r,i){const s=this,a=s.center,u=s.gravity,h=s.degrees,p=i.length;for(let g=0;g<p;g++){const y=i[g];let x=y.x-a[0],E=y.y-a[1],T=u;if(s.getCenter){const O=s.getCenter(y,h[g]);O&&Wn(O[0])&&Wn(O[1])&&Wn(O[2])&&(x=y.x-O[0],E=y.y-O[1],T=O[2])}!T||(r[2*g]-=T*x,r[2*g+1]-=T*E)}}updateVelocity(r,i,s,a){const u=this,h=s*u.damping;a.forEach((p,g)=>{let y=r[2*g]*h||.01,x=r[2*g+1]*h||.01;const E=Math.sqrt(y*y+x*x);if(E>u.maxSpeed){const T=u.maxSpeed/E;y=T*y,x=T*x}i[2*g]=y,i[2*g+1]=x})}updatePosition(r,i,s){s.forEach((a,u)=>{if(Wn(a.fx)&&Wn(a.fy)){a.x=a.fx,a.y=a.fy;return}const h=r[2*u]*i,p=r[2*u+1]*i;a.x+=h,a.y+=p})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)}destroy(){const r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0}getType(){return"gForce"}}function am(n){const r=+this._x.call(null,n),i=+this._y.call(null,n);return $h(this.cover(r,i),r,i,n)}function $h(n,r,i,s){if(isNaN(r)||isNaN(i))return n;var a,u=n._root,h={data:s},p=n._x0,g=n._y0,y=n._x1,x=n._y1,E,T,O,N,k,B,$,X;if(!u)return n._root=h,n;for(;u.length;)if((k=r>=(E=(p+y)/2))?p=E:y=E,(B=i>=(T=(g+x)/2))?g=T:x=T,a=u,!(u=u[$=B<<1|k]))return a[$]=h,n;if(O=+n._x.call(null,u.data),N=+n._y.call(null,u.data),r===O&&i===N)return h.next=u,a?a[$]=h:n._root=h,n;do a=a?a[$]=new Array(4):n._root=new Array(4),(k=r>=(E=(p+y)/2))?p=E:y=E,(B=i>=(T=(g+x)/2))?g=T:x=T;while(($=B<<1|k)===(X=(N>=T)<<1|O>=E));return a[X]=u,a[$]=h,n}function Wh(n){var r,i,s=n.length,a,u,h=new Array(s),p=new Array(s),g=1/0,y=1/0,x=-1/0,E=-1/0;for(i=0;i<s;++i)isNaN(a=+this._x.call(null,r=n[i]))||isNaN(u=+this._y.call(null,r))||(h[i]=a,p[i]=u,a<g&&(g=a),a>x&&(x=a),u<y&&(y=u),u>E&&(E=u));if(g>x||y>E)return this;for(this.cover(g,y).cover(x,E),i=0;i<s;++i)$h(this,h[i],p[i],n[i]);return this}function ml(n,r){if(isNaN(n=+n)||isNaN(r=+r))return this;var i=this._x0,s=this._y0,a=this._x1,u=this._y1;if(isNaN(i))a=(i=Math.floor(n))+1,u=(s=Math.floor(r))+1;else{for(var h=a-i||1,p=this._root,g,y;i>n||n>=a||s>r||r>=u;)switch(y=(r<s)<<1|n<i,g=new Array(4),g[y]=p,p=g,h*=2,y){case 0:a=i+h,u=s+h;break;case 1:i=a-h,u=s+h;break;case 2:a=i+h,s=u-h;break;case 3:i=a-h,s=u-h;break}this._root&&this._root.length&&(this._root=p)}return this._x0=i,this._y0=s,this._x1=a,this._y1=u,this}function Og(){var n=[];return this.visit(function(r){if(!r.length)do n.push(r.data);while(r=r.next)}),n}function rh(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function hs(n,r,i,s,a){this.node=n,this.x0=r,this.y0=i,this.x1=s,this.y1=a}function gd(n,r,i){var s,a=this._x0,u=this._y0,h,p,g,y,x=this._x1,E=this._y1,T=[],O=this._root,N,k;for(O&&T.push(new hs(O,a,u,x,E)),i==null?i=1/0:(a=n-i,u=r-i,x=n+i,E=r+i,i*=i);N=T.pop();)if(!(!(O=N.node)||(h=N.x0)>x||(p=N.y0)>E||(g=N.x1)<a||(y=N.y1)<u))if(O.length){var B=(h+g)/2,$=(p+y)/2;T.push(new hs(O[3],B,$,g,y),new hs(O[2],h,$,B,y),new hs(O[1],B,p,g,$),new hs(O[0],h,p,B,$)),(k=(r>=$)<<1|n>=B)&&(N=T[T.length-1],T[T.length-1]=T[T.length-1-k],T[T.length-1-k]=N)}else{var X=n-+this._x.call(null,O.data),ne=r-+this._y.call(null,O.data),be=X*X+ne*ne;if(be<i){var me=Math.sqrt(i=be);a=n-me,u=r-me,x=n+me,E=r+me,s=O.data}}return s}function ih(n){if(isNaN(x=+this._x.call(null,n))||isNaN(E=+this._y.call(null,n)))return this;var r,i=this._root,s,a,u,h=this._x0,p=this._y0,g=this._x1,y=this._y1,x,E,T,O,N,k,B,$;if(!i)return this;if(i.length)for(;;){if((N=x>=(T=(h+g)/2))?h=T:g=T,(k=E>=(O=(p+y)/2))?p=O:y=O,r=i,!(i=i[B=k<<1|N]))return this;if(!i.length)break;(r[B+1&3]||r[B+2&3]||r[B+3&3])&&(s=r,$=B)}for(;i.data!==n;)if(a=i,!(i=i.next))return this;return(u=i.next)&&delete i.next,a?(u?a.next=u:delete a.next,this):r?(u?r[B]=u:delete r[B],(i=r[0]||r[1]||r[2]||r[3])&&i===(r[3]||r[2]||r[1]||r[0])&&!i.length&&(s?s[$]=i:this._root=i),this):(this._root=u,this)}function zp(n){for(var r=0,i=n.length;r<i;++r)this.remove(n[r]);return this}function Pg(){return this._root}function Fa(){var n=0;return this.visit(function(r){if(!r.length)do++n;while(r=r.next)}),n}function yl(n){var r=[],i,s=this._root,a,u,h,p,g;for(s&&r.push(new hs(s,this._x0,this._y0,this._x1,this._y1));i=r.pop();)if(!n(s=i.node,u=i.x0,h=i.y0,p=i.x1,g=i.y1)&&s.length){var y=(u+p)/2,x=(h+g)/2;(a=s[3])&&r.push(new hs(a,y,x,p,g)),(a=s[2])&&r.push(new hs(a,u,x,y,g)),(a=s[1])&&r.push(new hs(a,y,h,p,x)),(a=s[0])&&r.push(new hs(a,u,h,y,x))}return this}function rs(n){var r=[],i=[],s;for(this._root&&r.push(new hs(this._root,this._x0,this._y0,this._x1,this._y1));s=r.pop();){var a=s.node;if(a.length){var u,h=s.x0,p=s.y0,g=s.x1,y=s.y1,x=(h+g)/2,E=(p+y)/2;(u=a[0])&&r.push(new hs(u,h,p,x,E)),(u=a[1])&&r.push(new hs(u,x,p,g,E)),(u=a[2])&&r.push(new hs(u,h,E,x,y)),(u=a[3])&&r.push(new hs(u,x,E,g,y))}i.push(s)}for(;s=i.pop();)n(s.node,s.x0,s.y0,s.x1,s.y1);return this}function Ea(n){return n[0]}function Up(n){return arguments.length?(this._x=n,this):this._x}function Vp(n){return n[1]}function cm(n){return arguments.length?(this._y=n,this):this._y}function jp(n,r,i){var s=new vd(r??Ea,i??Vp,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function vd(n,r,i,s,a,u){this._x=n,this._y=r,this._x0=i,this._y0=s,this._x1=a,this._y1=u,this._root=void 0}function Hp(n){for(var r={data:n.data},i=r;n=n.next;)i=i.next={data:n.data};return r}var Sa=jp.prototype=vd.prototype;Sa.copy=function(){var n=new vd(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,i,s;if(!r)return n;if(!r.length)return n._root=Hp(r),n;for(i=[{source:r,target:n._root=new Array(4)}];r=i.pop();)for(var a=0;a<4;++a)(s=r.source[a])&&(s.length?i.push({source:s,target:r.target[a]=new Array(4)}):r.target[a]=Hp(s));return n},Sa.add=am,Sa.addAll=Wh,Sa.cover=ml,Sa.data=Og,Sa.extent=rh,Sa.find=gd,Sa.remove=ih,Sa.removeAll=zp,Sa.root=Pg,Sa.size=Fa,Sa.visit=yl,Sa.visitAfter=rs,Sa.x=Up,Sa.y=cm;function nc(n){return function(){return n}}function hu(n){return(n()-.5)*1e-6}var fu={value:function(){}};function Hf(){for(var n=0,r=arguments.length,i={},s;n<r;++n){if(!(s=arguments[n]+"")||s in i||/[\s.]/.test(s))throw new Error("illegal type: "+s);i[s]=[]}return new Xh(i)}function Xh(n){this._=n}function k0(n,r){return n.trim().split(/^|\s+/).map(function(i){var s="",a=i.indexOf(".");if(a>=0&&(s=i.slice(a+1),i=i.slice(0,a)),i&&!r.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:s}})}Xh.prototype=Hf.prototype={constructor:Xh,on:function(r,i){var s=this._,a=k0(r+"",s),u,h=-1,p=a.length;if(arguments.length<2){for(;++h<p;)if((u=(r=a[h]).type)&&(u=Dg(s[u],r.name)))return u;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++h<p;)if(u=(r=a[h]).type)s[u]=L0(s[u],r.name,i);else if(i==null)for(u in s)s[u]=L0(s[u],r.name,null);return this},copy:function(){var r={},i=this._;for(var s in i)r[s]=i[s].slice();return new Xh(r)},call:function(r,i){if((u=arguments.length-2)>0)for(var s=new Array(u),a=0,u,h;a<u;++a)s[a]=arguments[a+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(h=this._[r],a=0,u=h.length;a<u;++a)h[a].value.apply(i,s)},apply:function(r,i,s){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var a=this._[r],u=0,h=a.length;u<h;++u)a[u].value.apply(i,s)}};function Dg(n,r){for(var i=0,s=n.length,a;i<s;++i)if((a=n[i]).name===r)return a.value}function L0(n,r,i){for(var s=0,a=n.length;s<a;++s)if(n[s].name===r){n[s]=fu,n=n.slice(0,s).concat(n.slice(s+1));break}return i!=null&&n.push({name:r,value:i}),n}var lm=Hf,Ba=0,oh=0,K=0,Pe=1e3,ze,_t,pt=0,Ct=0,It=0,en=typeof performance=="object"&&performance.now?performance:Date,un=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function hn(){return Ct||(un(rn),Ct=en.now()+It)}function rn(){Ct=0}function on(){this._call=this._time=this._next=null}on.prototype=On.prototype={constructor:on,restart:function(n,r,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?hn():+i)+(r==null?0:+r),!this._next&&_t!==this&&(_t?_t._next=this:ze=this,_t=this),this._call=n,this._time=i,fn()},stop:function(){this._call&&(this._call=null,this._time=1/0,fn())}};function On(n,r,i){var s=new on;return s.restart(n,r,i),s}function cn(){hn(),++Ba;for(var n=ze,r;n;)(r=Ct-n._time)>=0&&n._call.call(null,r),n=n._next;--Ba}function wn(){Ct=(pt=en.now())+It,Ba=oh=0;try{cn()}finally{Ba=0,Rt(),Ct=0}}function ft(){var n=en.now(),r=n-pt;r>Pe&&(It-=r,pt=n)}function Rt(){for(var n,r=ze,i,s=1/0;r;)r._call?(s>r._time&&(s=r._time),n=r,r=r._next):(i=r._next,r._next=null,r=n?n._next=i:ze=i);_t=n,fn(s)}function fn(n){if(!Ba){oh&&(oh=clearTimeout(oh));var r=n-Ct;r>24?(n<1/0&&(oh=setTimeout(wn,n-en.now()-It)),K&&(K=clearInterval(K))):(K||(pt=en.now(),K=setInterval(ft,Pe)),Ba=1,un(wn))}}var Vn=1664525,tn=1013904223,zn=4294967296;function Wt(){var n=1;return function(){return(n=(Vn*n+tn)%zn)/zn}}function An(n){return n.x}function nn(n){return n.y}var _n=10,dr=Math.PI*(3-Math.sqrt(5));function Pr(n){var r,i=1,s=.001,a=1-Math.pow(s,1/300),u=0,h=.6,p=new Map,g=On(E),y=lm("tick","end"),x=Wt();n==null&&(n=[]);function E(){T(),y.call("tick",r),i<s&&(g.stop(),y.call("end",r))}function T(k){var B,$=n.length,X;k===void 0&&(k=1);for(var ne=0;ne<k;++ne)for(i+=(u-i)*a,p.forEach(function(be){be(i)}),B=0;B<$;++B)X=n[B],X.fx==null?X.x+=X.vx*=h:(X.x=X.fx,X.vx=0),X.fy==null?X.y+=X.vy*=h:(X.y=X.fy,X.vy=0);return r}function O(){for(var k=0,B=n.length,$;k<B;++k){if($=n[k],$.index=k,$.fx!=null&&($.x=$.fx),$.fy!=null&&($.y=$.fy),isNaN($.x)||isNaN($.y)){var X=_n*Math.sqrt(.5+k),ne=k*dr;$.x=X*Math.cos(ne),$.y=X*Math.sin(ne)}(isNaN($.vx)||isNaN($.vy))&&($.vx=$.vy=0)}}function N(k){return k.initialize&&k.initialize(n,x),k}return O(),r={tick:T,restart:function(){return g.restart(E),r},stop:function(){return g.stop(),r},nodes:function(B){return arguments.length?(n=B,O(),p.forEach(N),r):n},alpha:function(B){return arguments.length?(i=+B,r):i},alphaMin:function(B){return arguments.length?(s=+B,r):s},alphaDecay:function(B){return arguments.length?(a=+B,r):+a},alphaTarget:function(B){return arguments.length?(u=+B,r):u},velocityDecay:function(B){return arguments.length?(h=1-B,r):1-h},randomSource:function(B){return arguments.length?(x=B,p.forEach(N),r):x},force:function(B,$){return arguments.length>1?($==null?p.delete(B):p.set(B,N($)),r):p.get(B)},find:function(B,$,X){var ne=0,be=n.length,me,je,it,ct,Zt;for(X==null?X=1/0:X*=X,ne=0;ne<be;++ne)ct=n[ne],me=B-ct.x,je=$-ct.y,it=me*me+je*je,it<X&&(Zt=ct,X=it);return Zt},on:function(B,$){return arguments.length>1?(y.on(B,$),r):y.on(B)}}}function Tn(){var n,r,i,s,a=nc(-30),u,h=1,p=1/0,g=.81;function y(O){var N,k=n.length,B=jp(n,An,nn).visitAfter(E);for(s=O,N=0;N<k;++N)r=n[N],B.visit(T)}function x(){if(!!n){var O,N=n.length,k;for(u=new Array(N),O=0;O<N;++O)k=n[O],u[k.index]=+a(k,O,n)}}function E(O){var N=0,k,B,$=0,X,ne,be;if(O.length){for(X=ne=be=0;be<4;++be)(k=O[be])&&(B=Math.abs(k.value))&&(N+=k.value,$+=B,X+=B*k.x,ne+=B*k.y);O.x=X/$,O.y=ne/$}else{k=O,k.x=k.data.x,k.y=k.data.y;do N+=u[k.data.index];while(k=k.next)}O.value=N}function T(O,N,k,B){if(!O.value)return!0;var $=O.x-r.x,X=O.y-r.y,ne=B-N,be=$*$+X*X;if(ne*ne/g<be)return be<p&&($===0&&($=hu(i),be+=$*$),X===0&&(X=hu(i),be+=X*X),be<h&&(be=Math.sqrt(h*be)),r.vx+=$*O.value*s/be,r.vy+=X*O.value*s/be),!0;if(O.length||be>=p)return;(O.data!==r||O.next)&&($===0&&($=hu(i),be+=$*$),X===0&&(X=hu(i),be+=X*X),be<h&&(be=Math.sqrt(h*be)));do O.data!==r&&(ne=u[O.data.index]*s/be,r.vx+=$*ne,r.vy+=X*ne);while(O=O.next)}return y.initialize=function(O,N){n=O,i=N,x()},y.strength=function(O){return arguments.length?(a=typeof O=="function"?O:nc(+O),x(),y):a},y.distanceMin=function(O){return arguments.length?(h=O*O,y):Math.sqrt(h)},y.distanceMax=function(O){return arguments.length?(p=O*O,y):Math.sqrt(p)},y.theta=function(O){return arguments.length?(g=O*O,y):Math.sqrt(g)},y}function mn(n,r){var i,s=1;n==null&&(n=0),r==null&&(r=0);function a(){var u,h=i.length,p,g=0,y=0;for(u=0;u<h;++u)p=i[u],g+=p.x,y+=p.y;for(g=(g/h-n)*s,y=(y/h-r)*s,u=0;u<h;++u)p=i[u],p.x-=g,p.y-=y}return a.initialize=function(u){i=u},a.x=function(u){return arguments.length?(n=+u,a):n},a.y=function(u){return arguments.length?(r=+u,a):r},a.strength=function(u){return arguments.length?(s=+u,a):s},a}function qt(n){return n.index}function Cr(n,r){var i=n.get(r);if(!i)throw new Error("node not found: "+r);return i}function Fr(n){var r=qt,i=E,s,a=nc(30),u,h,p,g,y,x=1;n==null&&(n=[]);function E(B){return 1/Math.min(p[B.source.index],p[B.target.index])}function T(B){for(var $=0,X=n.length;$<x;++$)for(var ne=0,be,me,je,it,ct,Zt,At;ne<X;++ne)be=n[ne],me=be.source,je=be.target,it=je.x+je.vx-me.x-me.vx||hu(y),ct=je.y+je.vy-me.y-me.vy||hu(y),Zt=Math.sqrt(it*it+ct*ct),Zt=(Zt-u[ne])/Zt*B*s[ne],it*=Zt,ct*=Zt,je.vx-=it*(At=g[ne]),je.vy-=ct*At,me.vx+=it*(At=1-At),me.vy+=ct*At}function O(){if(!!h){var B,$=h.length,X=n.length,ne=new Map(h.map(function(me,je){return[r(me,je,h),me]})),be;for(B=0,p=new Array($);B<X;++B)be=n[B],be.index=B,pa()(be.source)!=="object"&&(be.source=Cr(ne,be.source)),pa()(be.target)!=="object"&&(be.target=Cr(ne,be.target)),p[be.source.index]=(p[be.source.index]||0)+1,p[be.target.index]=(p[be.target.index]||0)+1;for(B=0,g=new Array(X);B<X;++B)be=n[B],g[B]=p[be.source.index]/(p[be.source.index]+p[be.target.index]);s=new Array(X),N(),u=new Array(X),k()}}function N(){if(!!h)for(var B=0,$=n.length;B<$;++B)s[B]=+i(n[B],B,n)}function k(){if(!!h)for(var B=0,$=n.length;B<$;++B)u[B]=+a(n[B],B,n)}return T.initialize=function(B,$){h=B,y=$,O()},T.links=function(B){return arguments.length?(n=B,O(),T):n},T.id=function(B){return arguments.length?(r=B,T):r},T.iterations=function(B){return arguments.length?(x=+B,T):x},T.strength=function(B){return arguments.length?(i=typeof B=="function"?B:nc(+B),N(),T):i},T.distance=function(B){return arguments.length?(a=typeof B=="function"?B:nc(+B),k(),T):a},T}function qn(n){return n.x+n.vx}function si(n){return n.y+n.vy}function Dr(n){var r,i,s,a=1,u=1;typeof n!="function"&&(n=nc(n==null?1:+n));function h(){for(var y,x=r.length,E,T,O,N,k,B,$=0;$<u;++$)for(E=jp(r,qn,si).visitAfter(p),y=0;y<x;++y)T=r[y],k=i[T.index],B=k*k,O=T.x+T.vx,N=T.y+T.vy,E.visit(X);function X(ne,be,me,je,it){var ct=ne.data,Zt=ne.r,At=k+Zt;if(ct){if(ct.index>T.index){var Yt=O-ct.x-ct.vx,st=N-ct.y-ct.vy,Bn=Yt*Yt+st*st;Bn<At*At&&(Yt===0&&(Yt=hu(s),Bn+=Yt*Yt),st===0&&(st=hu(s),Bn+=st*st),Bn=(At-(Bn=Math.sqrt(Bn)))/Bn*a,T.vx+=(Yt*=Bn)*(At=(Zt*=Zt)/(B+Zt)),T.vy+=(st*=Bn)*At,ct.vx-=Yt*(At=1-At),ct.vy-=st*At)}return}return be>O+At||je<O-At||me>N+At||it<N-At}}function p(y){if(y.data)return y.r=i[y.data.index];for(var x=y.r=0;x<4;++x)y[x]&&y[x].r>y.r&&(y.r=y[x].r)}function g(){if(!!r){var y,x=r.length,E;for(i=new Array(x),y=0;y<x;++y)E=r[y],i[E.index]=+n(E,y,r)}}return h.initialize=function(y,x){r=y,s=x,g()},h.iterations=function(y){return arguments.length?(u=+y,h):u},h.strength=function(y){return arguments.length?(a=+y,h):a},h.radius=function(y){return arguments.length?(n=typeof y=="function"?y:nc(+y),g(),h):n},h}function Wr(n){var r=nc(.1),i,s,a;typeof n!="function"&&(n=nc(n==null?0:+n));function u(p){for(var g=0,y=i.length,x;g<y;++g)x=i[g],x.vx+=(a[g]-x.x)*s[g]*p}function h(){if(!!i){var p,g=i.length;for(s=new Array(g),a=new Array(g),p=0;p<g;++p)s[p]=isNaN(a[p]=+n(i[p],p,i))?0:+r(i[p],p,i)}}return u.initialize=function(p){i=p,h()},u.strength=function(p){return arguments.length?(r=typeof p=="function"?p:nc(+p),h(),u):r},u.x=function(p){return arguments.length?(n=typeof p=="function"?p:nc(+p),h(),u):n},u}function Pi(n){var r=nc(.1),i,s,a;typeof n!="function"&&(n=nc(n==null?0:+n));function u(p){for(var g=0,y=i.length,x;g<y;++g)x=i[g],x.vy+=(a[g]-x.y)*s[g]*p}function h(){if(!!i){var p,g=i.length;for(s=new Array(g),a=new Array(g),p=0;p<g;++p)s[p]=isNaN(a[p]=+n(i[p],p,i))?0:+r(i[p],p,i)}}return u.initialize=function(p){i=p,h()},u.strength=function(p){return arguments.length?(r=typeof p=="function"?p:nc(+p),h(),u):r},u.y=function(p){return arguments.length?(n=typeof p=="function"?p:nc(+p),h(),u):n},u}function Xo(){function n(In){return()=>In}let r=In=>In.cluster,i=n(1),s=n(-1),a=n(100),u=n(.1),h=[0,0],p=[],g={},y=[],x=100,E=100,T={none:{x:0,y:0}},O=[],N,k="force",B=!0,$=.1;function X(In){if(!B)return X;N.tick(),ct();for(let yr=0,Fi=p.length,Yi,mo=In*$;yr<Fi;++yr)Yi=p[yr],Yi.vx+=(T[r(Yi)].x-Yi.x)*mo,Yi.vy+=(T[r(Yi)].y-Yi.y)*mo}function ne(){!p||be()}function be(){if(!p||!p.length)return;if(r(p[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const In=me();N=Pr(In.nodes).force("x",Wr(x).strength(.1)).force("y",Pi(E).strength(.1)).force("collide",Dr(yr=>yr.r).iterations(4)).force("charge",Tn().strength(s)).force("links",Fr(In.nodes.length?In.links:[]).distance(a).strength(u)),O=N.nodes(),ct()}function me(){const In=[],yr=[],Fi={};let Yi=[],mo={},Zr=[];return mo=je(p),Zr=it(y),Yi=Object.keys(mo),Yi.forEach((ia,Gc)=>{const $o=mo[ia];In.push({id:ia,size:$o.count,r:Math.sqrt($o.sumforceNodeSize/Math.PI)}),Fi[ia]=Gc}),Zr.forEach(ia=>{const Gc=xi(ia,"source"),$o=xi(ia,"target"),ff=Fi[Gc],pf=Fi[$o];ff!==void 0&&pf!==void 0&&yr.push({source:ff,target:pf,count:ia.count})}),{nodes:In,links:yr}}function je(In){const yr={};return In.forEach(Fi=>{const Yi=r(Fi);yr[Yi]||(yr[Yi]={count:0,sumforceNodeSize:0})}),In.forEach(Fi=>{const Yi=r(Fi),mo=i(Fi),Zr=yr[Yi];Zr.count=Zr.count+1,Zr.sumforceNodeSize=Zr.sumforceNodeSize+Math.PI*(mo*mo)*1.3,yr[Yi]=Zr}),yr}function it(In){const yr={},Fi=[];return In.forEach(mo=>{const Zr=Zt(mo);let ia=0;yr[Zr]!==void 0&&(ia=yr[Zr]),ia+=1,yr[Zr]=ia}),Object.entries(yr).forEach(([mo,Zr])=>{const ia=mo.split("~")[0],Gc=mo.split("~")[1];ia!==void 0&&Gc!==void 0&&Fi.push({source:ia,target:Gc,count:Zr})}),Fi}function ct(){return T={none:{x:0,y:0}},O.forEach(In=>{T[In.id]={x:In.x-h[0],y:In.y-h[1]}}),T}function Zt(In){const yr=xi(In,"source"),Fi=xi(In,"target"),Yi=r(g[yr]),mo=r(g[Fi]);return Yi<=mo?`${Yi}~${mo}`:`${mo}~${Yi}`}function At(In){g={},In.forEach(yr=>{g[yr.id]=yr})}function Yt(In){return arguments.length?(k=In,ne(),X):k}function st(In){return arguments.length?typeof In=="string"?(r=yr=>yr[In],X):(r=In,X):r}function Bn(In){return arguments.length?(B=In,X):B}function kn(In){return arguments.length?($=In,X):$}function Jn(In){return arguments.length?(x=In,X):x}function Li(In){return arguments.length?(E=In,X):E}function Gi(In){return arguments.length?(At(In||[]),p=In||[],X):p}function Xr(In){return arguments.length?(y=In||[],ne(),X):y}function Ho(In){return arguments.length?(typeof In=="function"?i=In:i=n(+In),ne(),X):i}function na(In){return arguments.length?(typeof In=="function"?s=In:s=n(+In),ne(),X):s}function pi(In){return arguments.length?(typeof In=="function"?a=In:a=n(+In),ne(),X):a}function ra(In){return arguments.length?(typeof In=="function"?u=In:u=n(+In),ne(),X):u}function ja(In){return arguments.length?(h=In,X):h}return X.initialize=In=>{p=In,ne()},X.template=Yt,X.groupBy=st,X.enableGrouping=Bn,X.strength=kn,X.centerX=Jn,X.centerY=Li,X.nodes=Gi,X.links=Xr,X.forceNodeSize=Ho,X.nodeSize=X.forceNodeSize,X.forceCharge=na,X.forceLinkDistance=pi,X.forceLinkStrength=ra,X.offset=ja,X.getFocis=ct,X}const fs={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};class Kr extends ds{constructor(r){super(),this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,r&&this.updateCfg(r)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(r){const i=this;i.nodes=r.nodes||[];const s=r.edges||[];i.edges=s.map(a=>{const u={},h=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(a).forEach(p=>{h.indexOf(p)>-1||(u[p]=a[p])}),u}),i.ticking=!1}execute(r){const i=this,s=i.nodes,a=i.edges;if(i.ticking)return;let u=i.forceSimulation;const h=i.alphaMin,p=i.alphaDecay,g=i.alpha;if(u){if(r){if(i.clustering&&i.clusterForce&&(i.clusterForce.nodes(s),i.clusterForce.links(a)),u.nodes(s),a&&i.edgeForce)i.edgeForce.links(a);else if(a&&!i.edgeForce){const y=Fr().id(x=>x.id).links(a);i.edgeStrength&&y.strength(i.edgeStrength),i.linkDistance&&y.distance(i.linkDistance),i.edgeForce=y,u.force("link",y)}}i.preventOverlap&&i.overlapProcess(u),u.alpha(g).restart(),this.ticking=!0}else try{const y=Tn();if(i.nodeStrength&&y.strength(i.nodeStrength),u=Pr().nodes(s),i.clustering){const x=Xo();x.centerX(i.center[0]).centerY(i.center[1]).template("force").strength(i.clusterFociStrength),a&&x.links(a),s&&x.nodes(s),x.forceLinkDistance(i.clusterEdgeDistance).forceLinkStrength(i.clusterEdgeStrength).forceCharge(i.clusterNodeStrength).forceNodeSize(i.clusterNodeSize),i.clusterForce=x,u.force("group",x)}if(u.force("center",mn(i.center[0],i.center[1])).force("charge",y).alpha(g).alphaDecay(p).alphaMin(h),i.preventOverlap&&i.overlapProcess(u),a){const x=Fr().id(E=>E.id).links(a);i.edgeStrength&&x.strength(i.edgeStrength),i.linkDistance&&x.distance(i.linkDistance),i.edgeForce=x,u.force("link",x)}if(i.workerEnabled&&!xo()&&(i.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!i.workerEnabled)u.on("tick",()=>{i.tick()}).on("end",()=>{i.ticking=!1,i.onLayoutEnd&&i.onLayoutEnd()}),i.ticking=!0;else{u.stop();const x=ps(u);for(let E=1;E<=x;E++)u.tick(),postMessage({nodes:s,currentTick:E,totalTicks:x,type:fs.TICK},void 0);i.ticking=!1}i.forceSimulation=u,i.ticking=!0}catch(y){i.ticking=!1,console.warn(y)}}overlapProcess(r){const i=this,s=i.nodeSize,a=i.nodeSpacing;let u,h;const p=i.collideStrength;if(Wn(a)?h=()=>a:du(a)?h=a:h=()=>0,!s)u=g=>g.size?Ps(g.size)?(g.size[0]>g.size[1]?g.size[0]:g.size[1])/2+h(g):vc(g.size)?(g.size.width>g.size.height?g.size.width:g.size.height)/2+h(g):g.size/2+h(g):10+h(g);else if(du(s))u=g=>s(g)+h(g);else if(Ps(s)){const y=(s[0]>s[1]?s[0]:s[1])/2;u=x=>y+h(x)}else if(Wn(s)){const g=s/2;u=y=>g+h(y)}else u=()=>10;r.force("collisionForce",Dr(u).strength(p))}updateCfg(r){const i=this;i.ticking&&(i.forceSimulation.stop(),i.ticking=!1),i.forceSimulation=null,Object.assign(i,r)}destroy(){const r=this;r.ticking&&(r.forceSimulation.stop(),r.ticking=!1),r.nodes=null,r.edges=null,r.destroyed=!0}}function ps(n){const r=n.alphaMin(),i=n.alphaTarget(),s=n.alpha(),a=Math.log((r-i)/(s-i))/Math.log(1-n.alphaDecay());return Math.ceil(a)}function xo(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function gs(n,r,i,s){n.forEach((a,u)=>{n[u].children=[],n[u].parent=[]}),s?r.forEach(a=>{const u=xi(a,"source"),h=xi(a,"target");let p=0;u&&(p=i[u]);let g=0;h&&(g=i[h]);const y=n[p].children,x=n[g].parent;y.push(n[g].id),x.push(n[p].id)}):r.forEach(a=>{const u=xi(a,"source"),h=xi(a,"target");let p=0;u&&(p=i[u]);let g=0;h&&(g=i[h]);const y=n[p].children,x=n[g].children;y.push(n[g].id),x.push(n[p].id)})}function Co(n,r,i){const s=i.length;for(let a=0;a<s;a++){const u=xi(i[a],"source"),h=xi(i[a],"target");if(n.id===u&&r.id===h||r.id===u&&n.id===h)return!0}return!1}function Es(n,r){const i=n.degree,s=r.degree;return i<s?-1:i>s?1:0}class Ao extends ds{constructor(r){super(),this.radius=null,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(r)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){const r=this,i=r.nodes,s=r.edges,a=i.length;if(a===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const u=r.center;if(a===1){i[0].x=u[0],i[0].y=u[1],r.onLayoutEnd&&r.onLayoutEnd();return}let h=r.radius,p=r.startRadius,g=r.endRadius;const y=r.divisions,x=r.startAngle,E=r.endAngle,T=(E-x)/a,O={};i.forEach((me,je)=>{O[me.id]=je}),r.nodeMap=O;const N=Ds(i.length,O,s);r.degrees=N,!h&&!p&&!g?h=r.height>r.width?r.width/2:r.height/2:!p&&g?p=g:p&&!g&&(g=p);const k=r.angleRatio,B=T*k,$=r.ordering;let X=[];$==="topology"?X=r.topologyOrdering():$==="topology-directed"?X=r.topologyOrdering(!0):$==="degree"?X=r.degreeOrdering():X=i;const ne=r.clockwise,be=Math.ceil(a/y);for(let me=0;me<a;++me){let je=h;!je&&p!==null&&g!==null&&(je=p+me*(g-p)/(a-1)),je||(je=10+me*100/(a-1));let it=x+me%be*B+2*Math.PI/y*Math.floor(me/be);ne||(it=E-me%be*B-2*Math.PI/y*Math.floor(me/be)),X[me].x=u[0]+Math.cos(it)*je,X[me].y=u[1]+Math.sin(it)*je,X[me].weight=N[me]}return r.onLayoutEnd&&r.onLayoutEnd(),{nodes:X,edges:this.edges}}topologyOrdering(r=!1){const i=this,s=i.degrees,a=i.edges,u=i.nodes,h=La(u),p=i.nodeMap,g=[h[0]],y=[u[0]],x=[],E=u.length;x[0]=!0,gs(h,a,p,r);let T=0;return h.forEach((O,N)=>{if(N!==0)if((N===E-1||s[N]!==s[N+1]||Co(g[T],O,a))&&!x[N])g.push(O),y.push(u[p[O.id]]),x[N]=!0,T++;else{const k=g[T].children;let B=!1;for(let X=0;X<k.length;X++){const ne=p[k[X]];if(s[ne]===s[N]&&!x[ne]){g.push(h[ne]),y.push(u[p[h[ne].id]]),x[ne]=!0,B=!0;break}}let $=0;for(;!B&&(x[$]||(g.push(h[$]),y.push(u[p[h[$].id]]),x[$]=!0,B=!0),$++,$!==E););}}),y}degreeOrdering(){const r=this,i=r.nodes,s=[],a=r.degrees;return i.forEach((u,h)=>{u.degree=a[h],s.push(u)}),s.sort(Es),s}getType(){return"circular"}}var is=M(85788),Zo=M.n(is);let Br=Zo();!Br&&typeof window<"u"&&(Br=window.graphlib),Array.prototype.flat||(Array.prototype.flat=function(n){let r=n||1;if(!isFinite(r))return;const i=this.length;let s=[];if(this.length===0)return this;for(;r--;){const a=[];let u=!1;if(s.length===0){u=!0;for(let h=0;h<i;h++)this[h]instanceof Array?s.push(...this[h]):s.push(this[h])}else{for(let h=0;h<s.length;h++)s[h]instanceof Array?(u=!0,a.push(...s[h])):a.push(s[h]);s=a}if(!u&&r===1/0)break}return s});var Vo=Br;const Ii=n=>{n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev},mr=(n,r)=>{if(n!=="_next"&&n!=="_prev")return r};class li{constructor(){const r={};r._next=r._prev=r,this.isentinel=r}dequeue(){const r=this.isentinel,i=r._prev;if(i!==r)return Ii(i),i}enqueue(){const r=this.isentinel,i=r._prev;if(i!==r)return Ii(i),i}toString(){const r=[],i=this.isentinel;let s=i._prev;for(;s!==i;)r.push(JSON.stringify(s,mr)),s=s._prev;return`[${r.join(", ")}]`}}var Ci=li;const vs=Vo.Graph,Hl=()=>1,sh=(n,r)=>{var i;if(n.nodeCount()<=1)return[];const s=Et(n,r||Hl);return(i=Be(s.graph,s.buckets,s.zeroIdx).map(u=>n.outEdges(u.v,u.w)))===null||i===void 0?void 0:i.flat()},Be=(n,r,i)=>{let s=[];const a=r[r.length-1],u=r[0];let h;for(;n.nodeCount();){for(;h=u.dequeue();)Dt(n,r,i,h);for(;h=a.dequeue();)Dt(n,r,i,h);if(n.nodeCount()){for(let p=r.length-2;p>0;--p)if(h=r[p].dequeue(),h){s=s.concat(Dt(n,r,i,h,!0));break}}}return s},Dt=(n,r,i,s,a)=>{var u,h;const p=a?[]:void 0;return(u=n.inEdges(s.v))===null||u===void 0||u.forEach(g=>{const y=n.edge(g),x=n.node(g.v);a&&p.push({v:g.v,w:g.w}),x.out===void 0&&(x.out=0),x.out-=y,$n(r,i,x)}),(h=n.outEdges(s.v))===null||h===void 0||h.forEach(g=>{const y=n.edge(g),x=g.w,E=n.node(x);E.in===void 0&&(E.in=0),E.in-=y,$n(r,i,E)}),n.removeNode(s.v),p},Et=(n,r)=>{const i=new vs;let s=0,a=0;n.nodes().forEach(g=>{i.setNode(g,{v:g,in:0,out:0})}),n.edges().forEach(g=>{const y=i.edge(g.v,g.w)||0,x=r?.(g),E=y+x;i.setEdge(g.v,g.w,E),a=Math.max(a,i.node(g.v).out+=x),s=Math.max(s,i.node(g.w).in+=x)});const u=[],h=a+s+3;for(let g=0;g<h;g++)u.push(new Ci);const p=s+1;return i.nodes().forEach(g=>{$n(u,p,i.node(g))}),{buckets:u,zeroIdx:p,graph:i}},$n=(n,r,i)=>{i.out?i.in?n[i.out-i.in+r].enqueue(i):n[n.length-1].enqueue(i):n[0].enqueue(i)};var ti=sh;const Ge=n=>{const r=s=>a=>s.edge(a).weight,i=n.graph().acyclicer==="greedy"?ti(n,r(n)):we(n);i?.forEach(s=>{const a=n.edge(s);n.removeEdge(s),a.forwardName=s.name,a.reversed=!0,n.setEdge(s.w,s.v,a,`rev-${Math.random()}`)})},we=n=>{const r=[],i={},s={},a=u=>{var h;s.hasOwnProperty(u)||(s[u]=!0,i[u]=!0,(h=n.outEdges(u))===null||h===void 0||h.forEach(p=>{i.hasOwnProperty(p.w)?r.push(p):a(p.w)}),delete i[u])};return n.nodes().forEach(a),r};var ut={run:Ge,undo:n=>{n.edges().forEach(r=>{const i=n.edge(r);if(i.reversed){n.removeEdge(r);const s=i.forwardName;delete i.reversed,delete i.forwardName,n.setEdge(r.w,r.v,i,s)}})}};const ht=Vo.Graph,Je=(n,r,i,s)=>{let a;do a=`${s}${Math.random()}`;while(n.hasNode(a));return i.dummy=r,n.setNode(a,i),a},Xe=n=>{const r=new ht().setGraph(n.graph());return n.nodes().forEach(i=>{r.setNode(i,n.node(i))}),n.edges().forEach(i=>{const s=r.edge(i.v,i.w)||{weight:0,minlen:1},a=n.edge(i);r.setEdge(i.v,i.w,{weight:s.weight+a.weight,minlen:Math.max(s.minlen,a.minlen)})}),r},tt=n=>{const r=new ht({multigraph:n.isMultigraph()}).setGraph(n.graph());return n.nodes().forEach(i=>{var s;!((s=n.children(i))===null||s===void 0)&&s.length||r.setNode(i,n.node(i))}),n.edges().forEach(i=>r.setEdge(i,n.edge(i))),r},Le=(n,r)=>{const i={};return n?.forEach((s,a)=>{i[s]=r[a]}),i},He=n=>{const r=n.nodes().map(i=>{var s;const a={};return(s=n.outEdges(i))===null||s===void 0||s.forEach(u=>{a[u.w]=(a[u.w]||0)+n.edge(u).weight}),a});return Le(n.nodes(),r)},Ie=n=>{const r=n.nodes().map(i=>{var s;const a={};return(s=n.inEdges(i))===null||s===void 0||s.forEach(u=>{a[u.v]=(a[u.v]||0)+n.edge(u).weight}),a});return Le(n.nodes(),r)},rt=(n,r)=>{const i=n.x,s=n.y,a=r.x-i,u=r.y-s;let h=n.width/2,p=n.height/2;if(!a&&!u)return{x:0,y:0};let g,y;return Math.abs(u)*h>Math.abs(a)*p?(u<0&&(p=-p),g=p*a/u,y=p):(a<0&&(h=-h),g=h,y=h*u/a),{x:i+g,y:s+y}},vt=n=>{const r=[],i=[],s=dn(n)+1;for(let a=0;a<s;a++)r.push([]),i.push([]);return n.nodes().forEach(a=>{const h=n.node(a).rank;h!==void 0&&r[h]&&i[h].push(a)}),i?.forEach((a,u)=>{a?.sort((h,p)=>{var g,y;return((g=n.node(h))===null||g===void 0?void 0:g.order)-((y=n.node(p))===null||y===void 0?void 0:y.order)}),a.forEach(h=>{r[u].push(h)})}),r},Vt=n=>{const r=n.nodes().filter(s=>n.node(s).rank!==void 0).map(s=>n.node(s).rank),i=Math.min(...r);n.nodes().forEach(s=>{const a=n.node(s);a.hasOwnProperty("rank")&&(a.rank||(a.rank=0),a.rank-=i)})},Xt=n=>{const r=n.nodes().filter(h=>n.node(h).rank!==void 0).map(h=>n.node(h).rank),i=Math.min(...r),s=[];n.nodes().forEach(h=>{var p;const g=(((p=n.node(h))===null||p===void 0?void 0:p.rank)||0)-i;s[g]||(s[g]=[]),s[g].push(h)});let a=0;const u=n.graph().nodeRankFactor||0;for(let h=0;h<s.length;h++){const p=s[h];p===void 0&&h%u!==0?--a:a&&p?.forEach(g=>{n.node(g).rank||(n.node(g).rank=0),n.node(g).rank+=a})}},Lt=(n,r,i,s)=>{const a={width:0,height:0};return Wn(i)&&Wn(s)&&(a.rank=i,a.order=s),Je(n,"border",a,r)},dn=n=>{const r=n.nodes().map(i=>{const s=n.node(i).rank;return s!==void 0?s:-1/0});return Math.max(...r)},or=(n,r)=>{const i={lhs:[],rhs:[]};return n?.forEach(s=>{r(s)?i.lhs.push(s):i.rhs.push(s)}),i},Vr=(n,r)=>{const i=Date.now();try{return r()}finally{console.log(`${n} time: ${Date.now()-i}ms`)}},Zn=(n,r)=>r(),ur=(n,r)=>{let i=1/0,s;return n?.forEach(a=>{const u=r(a);i>u&&(i=u,s=a)}),s};var tr={addDummyNode:Je,simplify:Xe,asNonCompoundGraph:tt,successorWeights:He,predecessorWeights:Ie,intersectRect:rt,buildLayerMatrix:vt,normalizeRanks:Vt,removeEmptyRanks:Xt,addBorderNode:Lt,maxRank:dn,partition:or,time:Vr,notime:Zn,zipObject:Le,minBy:ur};const Si=n=>{n.graph().dummyChains=[],n.edges().forEach(r=>os(n,r))},os=(n,r)=>{var i,s;let a=r.v,u=n.node(a).rank;const h=r.w,p=n.node(h).rank,g=r.name,y=n.edge(r),x=y.labelRank;if(p===u+1)return;n.removeEdge(r);let E,T,O;for(O=0,++u;u<p;++O,++u)y.points=[],T={edgeLabel:y,width:0,height:0,edgeObj:r,rank:u},E=tr.addDummyNode(n,"edge",T,"_d"),u===x&&(T.width=y.width,T.height=y.height,T.dummy="edge-label",T.labelpos=y.labelpos),n.setEdge(a,E,{weight:y.weight},g),O===0&&(n.graph().dummyChains||(n.graph().dummyChains=[]),(s=(i=n.graph())===null||i===void 0?void 0:i.dummyChains)===null||s===void 0||s.push(E)),a=E;n.setEdge(a,h,{weight:y.weight},g)};var $f={run:Si,undo:n=>{var r;(r=n.graph().dummyChains)===null||r===void 0||r.forEach(i=>{var s;let a=n.node(i);const u=a.edgeLabel;let h;a.edgeObj&&n.setEdge(a.edgeObj,u);let p=i;for(;a.dummy;)h=(s=n.successors(p))===null||s===void 0?void 0:s[0],n.removeNode(p),u.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(u.x=a.x,u.y=a.y,u.width=a.width,u.height=a.height),p=h,a=n.node(p)})}};const mc=n=>{var r;const i={},s=a=>{var u;const h=n.node(a);if(i.hasOwnProperty(a))return h.rank;i[a]=!0;const p=(u=n.outEdges(a))===null||u===void 0?void 0:u.map(y=>s(y.w)-n.edge(y).minlen||1/0);let g=Math.min(...p);return(g===Number.POSITIVE_INFINITY||g===void 0||g===null)&&(g=0),h.rank=g,g};(r=n.sources())===null||r===void 0||r.forEach(a=>s(a))},Ng=n=>{var r;const i={};let s=0;const a=h=>{var p;const g=n.node(h);if(i.hasOwnProperty(h))return g.rank;i[h]=!0;const y=(p=n.outEdges(h))===null||p===void 0?void 0:p.map(E=>a(E.w)-n.edge(E).minlen||1/0);let x=Math.min(...y);return(x===Number.POSITIVE_INFINITY||x===void 0||x===null)&&(x=0),g.rank=x,s=Math.min(g.rank,s),g.rank};(r=n.sources())===null||r===void 0||r.forEach(h=>a(h)),s+=1;const u=(h,p)=>{var g;const y=n.node(h),x=isNaN(y.layer)?p:y.layer;(y.rank===void 0||y.rank<x)&&(y.rank=x),(g=n.outEdges(h))===null||g===void 0||g.map(E=>{u(E.w,x+n.edge(E).minlen)})};n.nodes().forEach(h=>{const p=n.node(h);isNaN(p.layer)?p.rank-=s:u(h,p.layer)})},Qs=(n,r)=>n.node(r.w).rank-n.node(r.v).rank-n.edge(r).minlen;var Ig={longestPath:mc,longestPathWithLayer:Ng,slack:Qs};const Zy=Vo.Graph,um=n=>{const r=new Zy({directed:!1}),i=n.nodes()[0],s=n.nodeCount();r.setNode(i,{});let a,u;for(;g1(r,n)<s;)a=dm(r,n),u=r.hasNode(a.v)?Qs(n,a):-Qs(n,a),Ky(r,n,u);return r},g1=(n,r)=>{const i=s=>{r.nodeEdges(s).forEach(a=>{const u=a.v,h=s===u?a.w:u;!n.hasNode(h)&&!Qs(r,a)&&(n.setNode(h,{}),n.setEdge(s,h,{}),i(h))})};return n.nodes().forEach(i),n.nodeCount()},Yy=n=>{const r=new Zy({directed:!1}),i=n.nodes()[0],s=n.nodeCount();r.setNode(i,{});let a,u;for(;v1(r,n)<s;)a=dm(r,n),u=r.hasNode(a.v)?Qs(n,a):-Qs(n,a),Ky(r,n,u);return r},v1=(n,r)=>{const i=s=>{var a;(a=r.nodeEdges(s))===null||a===void 0||a.forEach(u=>{const h=u.v,p=s===h?u.w:h;!n.hasNode(p)&&(r.node(p).layer!==void 0||!Qs(r,u))&&(n.setNode(p,{}),n.setEdge(s,p,{}),i(p))})};return n.nodes().forEach(i),n.nodeCount()},dm=(n,r)=>ur(r.edges(),i=>n.hasNode(i.v)!==n.hasNode(i.w)?Qs(r,i):1/0),Ky=(n,r,i)=>{n.nodes().forEach(s=>{r.node(s).rank||(r.node(s).rank=0),r.node(s).rank+=i})};var Fw={feasibleTree:um,feasibleTreeWithLayer:Yy};const m1=Vo.alg,{preorder:Xc,postorder:y1}=m1,pu=n=>{n=Xe(n),mc(n);const r=um(n);hm(r),G0(r,n);let i,s;for(;i=Qy(r);)s=fm(r,n,i),F0(r,n,i,s)},G0=(n,r)=>{let i=y1(n,n.nodes());i=i?.slice(0,i?.length-1),i?.forEach(s=>{Wf(n,r,s)})},Wf=(n,r,i)=>{const a=n.node(i).parent;n.edge(i,a).cutvalue=qy(n,r,i)},qy=(n,r,i)=>{var s;const u=n.node(i).parent;let h=!0,p=r.edge(i,u),g=0;return p||(h=!1,p=r.edge(u,i)),g=p.weight,(s=r.nodeEdges(i))===null||s===void 0||s.forEach(y=>{const x=y.v===i,E=x?y.w:y.v;if(E!==u){const T=x===h,O=r.edge(y).weight;if(g+=T?O:-O,Rg(n,i,E)){const N=n.edge(i,E).cutvalue;g+=T?-N:N}}}),g},hm=(n,r)=>{r!==void 0&&(r=n.nodes()[0]),Jy(n,{},1,r)},Jy=(n,r,i,s,a)=>{var u;const h=i;let p=i;const g=n.node(s);return r[s]=!0,(u=n.neighbors(s))===null||u===void 0||u.forEach(y=>{r.hasOwnProperty(y)||(p=Jy(n,r,p,y,s))}),g.low=h,g.lim=p++,a?g.parent=a:delete g.parent,p},Qy=n=>n.edges().find(r=>n.edge(r).cutvalue<0),fm=(n,r,i)=>{let s=i.v,a=i.w;r.hasEdge(s,a)||(s=i.w,a=i.v);const u=n.node(s),h=n.node(a);let p=u,g=!1;u.lim>h.lim&&(p=h,g=!0);const y=r.edges().filter(x=>g===eb(n,n.node(x.v),p)&&g!==eb(n,n.node(x.w),p));return ur(y,x=>Qs(r,x))},F0=(n,r,i,s)=>{const a=i.v,u=i.w;n.removeEdge(a,u),n.setEdge(s.v,s.w,{}),hm(n),G0(n,r),b1(n,r)},b1=(n,r)=>{const i=n.nodes().find(a=>!r.node(a).parent);let s=Xc(n,i);s=s?.slice(1),s?.forEach(a=>{const u=n.node(a).parent;let h=r.edge(a,u),p=!1;h||(h=r.edge(u,a),p=!0),r.node(a).rank=r.node(u).rank+(p?h.minlen:-h.minlen)})},Rg=(n,r,i)=>n.hasEdge(r,i),eb=(n,r,i)=>i.low<=r.lim&&r.lim<=i.lim;pu.initLowLimValues=hm,pu.initCutValues=G0,pu.calcCutValue=qy,pu.leaveEdge=Qy,pu.enterEdge=fm,pu.exchangeEdges=F0;var wo=pu;const x1=n=>{switch(n.graph().ranker){case"network-simplex":gu(n);break;case"tight-tree":tb(n);break;case"longest-path":C1(n);break;default:tb(n)}},C1=mc,tb=n=>{Ng(n),Yy(n)},gu=n=>{wo(n)};var w1=x1;const E1=n=>{var r;const i=_1(n);(r=n.graph().dummyChains)===null||r===void 0||r.forEach(s=>{var a,u;let h=n.node(s);const p=h.edgeObj;if(!p)return;const g=S1(n,i,p.v,p.w),y=g.path,x=g.lca;let E=0,T=y[E],O=!0;for(;s!==p.w;){if(h=n.node(s),O){for(;(T=y[E])!==x&&n.node(T).maxRank<h.rank;)E++;T===x&&(O=!1)}if(!O){for(;E<y.length-1&&((a=n.node(T=y[E+1]))===null||a===void 0?void 0:a.minRank)<=h.rank;)E++;T=y[E]}n.setParent(s,T),s=(u=n.successors(s))===null||u===void 0?void 0:u[0]}})},S1=(n,r,i,s)=>{const a=[],u=[],h=Math.min(r[i].low,r[s].low),p=Math.max(r[i].lim,r[s].lim);let g,y;g=i;do g=n.parent(g),a.push(g);while(g&&(r[g].low>h||p>r[g].lim));for(y=g,g=s;(g=n.parent(g))!==y;)u.push(g);return{lca:y,path:a.concat(u.reverse())}},_1=n=>{var r;const i={};let s=0;const a=u=>{var h;const p=s;(h=n.children(u))===null||h===void 0||h.forEach(a),i[u]={low:p,lim:s++}};return(r=n.children())===null||r===void 0||r.forEach(a),i};var A1=E1;const pm=n=>{var r;const i=tr.addDummyNode(n,"root",{},"_root"),s=T1(n),a=Math.max(...Object.values(s))-1,u=2*a+1;n.graph().nestingRoot=i,n.edges().forEach(p=>{n.edge(p).minlen*=u});const h=M1(n)+1;(r=n.children())===null||r===void 0||r.forEach(p=>{nb(n,i,u,h,a,s,p)}),n.graph().nodeRankFactor=u},nb=(n,r,i,s,a,u,h)=>{const p=n.children(h);if(!p?.length){h!==r&&n.setEdge(r,h,{weight:0,minlen:i});return}const g=tr.addBorderNode(n,"_bt"),y=tr.addBorderNode(n,"_bb"),x=n.node(h);n.setParent(g,h),x.borderTop=g,n.setParent(y,h),x.borderBottom=y,p?.forEach(E=>{nb(n,r,i,s,a,u,E);const T=n.node(E),O=T.borderTop?T.borderTop:E,N=T.borderBottom?T.borderBottom:E,k=T.borderTop?s:2*s,B=O!==N?1:a-u[h]+1;n.setEdge(g,O,{minlen:B,weight:k,nestingEdge:!0}),n.setEdge(N,y,{minlen:B,weight:k,nestingEdge:!0})}),n.parent(h)||n.setEdge(r,g,{weight:0,minlen:a+u[h]})},T1=n=>{var r;const i={},s=(a,u)=>{const h=n.children(a);h?.forEach(p=>s(p,u+1)),i[a]=u};return(r=n.children())===null||r===void 0||r.forEach(a=>s(a,1)),i},M1=n=>{let r=0;return n.edges().forEach(i=>{r+=n.edge(i).weight}),r};var rb={run:pm,cleanup:n=>{const r=n.graph();r.nestingRoot&&n.removeNode(r.nestingRoot),delete r.nestingRoot,n.edges().forEach(i=>{n.edge(i).nestingEdge&&n.removeEdge(i)})}};const O1=n=>{var r;const i=s=>{const a=n.children(s),u=n.node(s);if(a?.length&&a.forEach(h=>i(h)),u.hasOwnProperty("minRank")){u.borderLeft=[],u.borderRight=[];for(let h=u.minRank,p=u.maxRank+1;h<p;++h)gm(n,"borderLeft","_bl",s,u,h),gm(n,"borderRight","_br",s,u,h)}};(r=n.children())===null||r===void 0||r.forEach(s=>i(s))},gm=(n,r,i,s,a,u)=>{const h={rank:u,width:0,height:0,borderType:r},p=a[r][u-1],g=tr.addDummyNode(n,"border",h,i);a[r][u]=g,n.setParent(g,s),p&&n.setEdge(p,g,{weight:1})};var ib=O1;const P1=n=>{var r;const i=(r=n.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(i==="lr"||i==="rl")&&vm(n)},D1=n=>{var r;const i=(r=n.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(i==="bt"||i==="rl")&&B0(n),(i==="lr"||i==="rl")&&(N1(n),vm(n))},vm=n=>{n.nodes().forEach(r=>{ob(n.node(r))}),n.edges().forEach(r=>{ob(n.edge(r))})},ob=n=>{const r=n.width;n.width=n.height,n.height=r},B0=n=>{n.nodes().forEach(r=>{mm(n.node(r))}),n.edges().forEach(r=>{var i;const s=n.edge(r);(i=s.points)===null||i===void 0||i.forEach(a=>mm(a)),s.hasOwnProperty("y")&&mm(s)})},mm=n=>{n.y=-n.y},N1=n=>{n.nodes().forEach(r=>{ym(n.node(r))}),n.edges().forEach(r=>{var i;const s=n.edge(r);(i=s.points)===null||i===void 0||i.forEach(a=>ym(a)),s.hasOwnProperty("x")&&ym(s)})},ym=n=>{const r=n.x;n.x=n.y,n.y=r};var sb={adjust:P1,undo:D1},ab=n=>{const r={},i=n.nodes().filter(x=>{var E;return!(!((E=n.children(x))===null||E===void 0)&&E.length)}),s=i.map(x=>n.node(x).rank),a=Math.max(...s),u=[];for(let x=0;x<a+1;x++)u.push([]);const h=x=>{var E;if(r.hasOwnProperty(x))return;r[x]=!0;const T=n.node(x);isNaN(T.rank)||u[T.rank].push(x),(E=n.successors(x))===null||E===void 0||E.forEach(O=>h(O))},p=i.sort((x,E)=>n.node(x).rank-n.node(E).rank),y=p.filter(x=>n.node(x).fixorder!==void 0).sort((x,E)=>n.node(x).fixorder-n.node(E).fixorder);return y?.forEach(x=>{isNaN(n.node(x).rank)||u[n.node(x).rank].push(x),r[x]=!0}),p?.forEach(h),u};const I1=(n,r,i)=>{const s=Le(i,i.map((x,E)=>E)),u=r.map(x=>{var E;const T=(E=n.outEdges(x))===null||E===void 0?void 0:E.map(O=>({pos:s[O.w]||0,weight:n.edge(O).weight}));return T?.sort((O,N)=>O.pos-N.pos)}).flat().filter(x=>x!==void 0);let h=1;for(;h<i.length;)h<<=1;const p=2*h-1;h-=1;const g=Array(p).fill(0,0,p);let y=0;return u?.forEach(x=>{let E=x.pos+h;g[E]+=x.weight;let T=0;for(;E>0;)E%2&&(T+=g[E+1]),E=E-1>>1,g[E]+=x.weight;y+=x.weight*T}),y};var cb=(n,r)=>{let i=0;for(let s=1;s<r?.length;++s)i+=I1(n,r[s-1],r[s]);return i};const R1=Vo.Graph,k1=(n,r,i)=>{const s=kg(n),a=new R1({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(u=>n.node(u));return n.nodes().forEach(u=>{const h=n.node(u),p=n.parent(u);(h.rank===r||h.minRank<=r&&r<=h.maxRank)&&(a.setNode(u),a.setParent(u,p||s),n[i](u).forEach(g=>{const y=g.v===u?g.w:g.v,x=a.edge(y,u),E=x!==void 0?x.weight:0;a.setEdge(y,u,{weight:n.edge(g).weight+E})}),h.hasOwnProperty("minRank")&&a.setNode(u,{borderLeft:h.borderLeft[r],borderRight:h.borderRight[r]}))}),a},kg=n=>{let r;for(;n.hasNode(r=`_root${Math.random()}`););return r};var lb=k1,ub=(n,r,i)=>{const s={};let a;i?.forEach(u=>{let h=n.parent(u),p,g;for(;h;){if(p=n.parent(h),p?(g=s[p],s[p]=h):(g=a,a=h),g&&g!==h){r.setEdge(g,h);return}h=p}})},hb=(n,r)=>r.map(i=>{const s=n.inEdges(i);if(!s?.length)return{v:i};{const a={sum:0,weight:0};return s?.forEach(u=>{const h=n.edge(u),p=n.node(u.v);a.sum+=h.weight*p.order,a.weight+=h.weight}),{v:i,barycenter:a.sum/a.weight,weight:a.weight}}});const fb=(n,r)=>{var i,s,a;const u={};n?.forEach((p,g)=>{const y=u[p.v]={i:g,indegree:0,in:[],out:[],vs:[p.v]};p.barycenter!==void 0&&(y.barycenter=p.barycenter,y.weight=p.weight)}),(i=r.edges())===null||i===void 0||i.forEach(p=>{const g=u[p.v],y=u[p.w];g!==void 0&&y!==void 0&&(y.indegree++,g.out.push(u[p.w]))});const h=(a=(s=Object.values(u)).filter)===null||a===void 0?void 0:a.call(s,p=>!p.indegree);return pb(h)},pb=n=>{var r,i;const s=[],a=g=>y=>{y.merged||(y.barycenter===void 0||g.barycenter===void 0||y.barycenter>=g.barycenter)&&gb(g,y)},u=g=>y=>{y.in.push(g),--y.indegree===0&&n.push(y)};for(;n?.length;){const g=n.pop();s.push(g),(r=g.in.reverse())===null||r===void 0||r.forEach(y=>a(g)(y)),(i=g.out)===null||i===void 0||i.forEach(y=>u(g)(y))}const h=s.filter(g=>!g.merged),p=["vs","i","barycenter","weight"];return h.map(g=>{const y={};return p?.forEach(x=>{g[x]!==void 0&&(y[x]=g[x])}),y})},gb=(n,r)=>{var i;let s=0,a=0;n.weight&&(s+=n.barycenter*n.weight,a+=n.weight),r.weight&&(s+=r.barycenter*r.weight,a+=r.weight),n.vs=(i=r.vs)===null||i===void 0?void 0:i.concat(n.vs),n.barycenter=s/a,n.weight=a,n.i=Math.min(r.i,n.i),r.merged=!0};var G1=fb;const F1=(n,r,i)=>{const s=tr.partition(n,E=>E.hasOwnProperty("fixorder")&&!isNaN(E.fixorder)||E.hasOwnProperty("barycenter")),a=s.lhs,u=s.rhs.sort((E,T)=>-E.i- -T.i),h=[];let p=0,g=0,y=0;a?.sort(z0(!!r,!!i)),y=vb(h,u,y),a?.forEach(E=>{var T;y+=(T=E.vs)===null||T===void 0?void 0:T.length,h.push(E.vs),p+=E.barycenter*E.weight,g+=E.weight,y=vb(h,u,y)});const x={vs:h.flat()};return g&&(x.barycenter=p/g,x.weight=g),x},vb=(n,r,i)=>{let s=i,a;for(;r.length&&(a=r[r.length-1]).i<=s;)r.pop(),n?.push(a.vs),s++;return s},z0=(n,r)=>(i,s)=>{if(i.fixorder!==void 0&&s.fixorder!==void 0)return i.fixorder-s.fixorder;if(i.barycenter<s.barycenter)return-1;if(i.barycenter>s.barycenter)return 1;if(r&&i.order!==void 0&&s.order!==void 0){if(i.order<s.order)return-1;if(i.order>s.order)return 1}return n?s.i-i.i:i.i-s.i};var U0=F1;const mb=(n,r,i,s,a)=>{var u,h,p,g;let y=n.children(r);const x=n.node(r),E=x?x.borderLeft:void 0,T=x?x.borderRight:void 0,O={};E&&(y=y?.filter($=>$!==E&&$!==T));const N=hb(n,y||[]);N?.forEach($=>{var X;if(!((X=n.children($.v))===null||X===void 0)&&X.length){const ne=mb(n,$.v,i,s);O[$.v]=ne,ne.hasOwnProperty("barycenter")&&bm($,ne)}});const k=G1(N,i);B1(k,O),(u=k.filter($=>{var X;return!!$.vs||((X=$.vs)===null||X===void 0?void 0:X.length)>0}))===null||u===void 0||u.forEach($=>{const X=n.node($.vs[0]);$.fixorder=X.fixorder,$.order=X.order});const B=U0(k,s,a);if(E&&(B.vs=[E,B.vs,T].flat(),!((h=n.predecessors(E))===null||h===void 0)&&h.length)){const $=n.node(((p=n.predecessors(E))===null||p===void 0?void 0:p[0])||{}),X=n.node(((g=n.predecessors(T))===null||g===void 0?void 0:g[0])||{});B.hasOwnProperty("barycenter")||(B.barycenter=0,B.weight=0),B.barycenter=(B.barycenter*B.weight+$.order+X.order)/(B.weight+2),B.weight+=2}return B},B1=(n,r)=>{n?.forEach(i=>{var s;const a=(s=i.vs)===null||s===void 0?void 0:s.map(u=>r[u]?r[u].vs:u);i.vs=a.flat()})},bm=(n,r)=>{n.barycenter!==void 0?(n.barycenter=(n.barycenter*n.weight+r.barycenter*r.weight)/(n.weight+r.weight),n.weight+=r.weight):(n.barycenter=r.barycenter,n.weight=r.weight)};var yb=mb;const z1=Vo.Graph,U1=n=>{const r=tr.maxRank(n),i=[],s=[];for(let y=1;y<r+1;y++)i.push(y);for(let y=r-1;y>-1;y--)s.push(y);const a=bb(n,i,"inEdges"),u=bb(n,s,"outEdges");let h=ab(n);xm(n,h);let p=Number.POSITIVE_INFINITY,g;for(let y=0,x=0;x<4;++y,++x){xb(y%2?a:u,y%4>=2),h=tr.buildLayerMatrix(n);const E=cb(n,h);E<p&&(x=0,g=La(h),p=E)}h=ab(n),xm(n,h);for(let y=0,x=0;x<4;++y,++x){xb(y%2?a:u,y%4>=2,!0),h=tr.buildLayerMatrix(n);const E=cb(n,h);E<p&&(x=0,g=La(h),p=E)}xm(n,g)},bb=(n,r,i)=>r.map(s=>lb(n,s,i)),xb=(n,r,i)=>{const s=new z1;n?.forEach(a=>{var u;const h=a.graph().root,p=yb(a,h,s,r,i);for(let g=0;g<((u=p.vs)===null||u===void 0?void 0:u.length);g++)a.node(p.vs[g]).order=g;ub(a,s,p.vs)})},xm=(n,r)=>{r?.forEach(i=>{i?.forEach((s,a)=>{n.node(s).order=a})})};var V1=U1;const j1=Vo.Graph,Cm=(n,r)=>{const i={},s=(a,u)=>{let h=0,p=0;const g=a.length,y=u?.[u?.length-1];return u?.forEach((x,E)=>{var T;const O=H1(n,x),N=O?n.node(O).order:g;(O||x===y)&&((T=u.slice(p,E+1))===null||T===void 0||T.forEach(k=>{var B;(B=n.predecessors(k))===null||B===void 0||B.forEach($=>{const X=n.node($),ne=X.order;(ne<h||N<ne)&&!(X.dummy&&n.node(k).dummy)&&V0(i,$,k)})}),p=E+1,h=N)}),u};return r?.length&&r.reduce(s),i},wm=(n,r)=>{const i={},s=(u,h,p,g,y)=>{let x;const E=[];for(let T=h;T<p;T++)E.push(T);E.forEach(T=>{var O;x=u[T],n.node(x).dummy&&((O=n.predecessors(x))===null||O===void 0||O.forEach(N=>{const k=n.node(N);k.dummy&&(k.order<g||k.order>y)&&V0(i,N,x)}))})},a=(u,h)=>{let p=-1,g,y=0;return h?.forEach((x,E)=>{if(n.node(x).dummy==="border"){const T=n.predecessors(x)||[];T.length&&(g=n.node(T[0]).order,s(h,y,E,p,g),y=E,p=g)}s(h,y,h.length,g,u.length)}),h};return r?.length&&r.reduce(a),i},H1=(n,r)=>{var i;if(n.node(r).dummy)return(i=n.predecessors(r))===null||i===void 0?void 0:i.find(s=>n.node(s).dummy)},V0=(n,r,i)=>{let s=r,a=i;if(s>a){const h=s;s=a,a=h}let u=n[s];u||(n[s]=u={}),u[a]=!0},Cb=(n,r,i)=>{let s=r,a=i;if(s>a){const u=r;s=a,a=u}return n[s]&&n[s].hasOwnProperty(a)},bl=(n,r,i,s)=>{const a={},u={},h={};return r?.forEach(p=>{p?.forEach((g,y)=>{a[g]=g,u[g]=g,h[g]=y})}),r?.forEach(p=>{let g=-1;p?.forEach(y=>{let x=s(y);if(x.length){x=x.sort((T,O)=>h[T]-h[O]);const E=(x.length-1)/2;for(let T=Math.floor(E),O=Math.ceil(E);T<=O;++T){const N=x[T];u[y]===y&&g<h[N]&&!Cb(i,y,N)&&(u[N]=y,u[y]=a[y]=a[N],g=h[N])}}})}),{root:a,align:u}},Em=(n,r,i,s,a)=>{var u;const h={},p=$1(n,r,i,a),g=a?"borderLeft":"borderRight",y=(T,O)=>{let N=p.nodes(),k=N.pop();const B={};for(;k;)B[k]?T(k):(B[k]=!0,N.push(k),N=N.concat(O(k))),k=N.pop()},x=T=>{h[T]=(p.inEdges(T)||[]).reduce((O,N)=>Math.max(O,(h[N.v]||0)+p.edge(N)),0)},E=T=>{const O=(p.outEdges(T)||[]).reduce((k,B)=>Math.min(k,(h[B.w]||0)-p.edge(B)),Number.POSITIVE_INFINITY),N=n.node(T);O!==Number.POSITIVE_INFINITY&&N.borderType!==g&&(h[T]=Math.max(h[T],O))};return y(x,p.predecessors.bind(p)),y(E,p.successors.bind(p)),(u=Object.values(s))===null||u===void 0||u.forEach(T=>{h[T]=h[i[T]]}),h},$1=(n,r,i,s)=>{const a=new j1,u=n.graph(),h=ea(u.nodesep,u.edgesep,s);return r?.forEach(p=>{let g;p?.forEach(y=>{const x=i[y];if(a.setNode(x),g){const E=i[g],T=a.edge(E,x);a.setEdge(E,x,Math.max(h(n,y,g),T||0))}g=y})}),a},ah=(n,r)=>tr.minBy(Object.values(r),i=>{var s;let a=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;return(s=Object.keys(i))===null||s===void 0||s.forEach(h=>{const p=i[h],g=W1(n,h)/2;a=Math.max(p+g,a),u=Math.min(p-g,u)}),a-u});function di(n,r){const i=Object.values(r),s=Math.min(...i),a=Math.max(...i);["u","d"].forEach(u=>{["l","r"].forEach(h=>{const p=u+h,g=n[p];let y;if(g===r)return;const x=Object.values(g);y=h==="l"?s-Math.min(...x):a-Math.max(...x),y&&(n[p]={},Object.keys(g).forEach(E=>{n[p][E]=g[E]+y}))})})}const Sm=(n,r)=>{const i={};return Object.keys(n.ul).forEach(s=>{if(r)i[s]=n[r.toLowerCase()][s];else{const u=Object.values(n).map(h=>h[s]).sort((h,p)=>h-p);i[s]=(u[1]+u[2])/2}}),i},Zc=n=>{const r=tr.buildLayerMatrix(n),i=Object.assign(Cm(n,r),wm(n,r)),s={};let a;["u","d"].forEach(h=>{a=h==="u"?r:Object.values(r).reverse(),["l","r"].forEach(p=>{p==="r"&&(a=a.map(E=>Object.values(E).reverse()));const g=(h==="u"?n.predecessors:n.successors).bind(n),y=bl(n,a,i,g);let x=Em(n,a,y.root,y.align,p==="r");p==="r"&&(x=Object.values(x).map(E=>-E)),s[h+p]=x})});const u=ah(n,s);return di(s,u),Sm(s,n.graph().align)},ea=(n,r,i)=>(s,a,u)=>{const h=s.node(a),p=s.node(u);let g=0,y;if(g+=h.width/2,h.hasOwnProperty("labelpos"))switch((h.labelpos||"").toLowerCase()){case"l":y=-h.width/2;break;case"r":y=h.width/2;break}if(y&&(g+=i?y:-y),y=0,g+=(h.dummy?r:n)/2,g+=(p.dummy?r:n)/2,g+=p.width/2,p.hasOwnProperty("labelpos"))switch((p.labelpos||"").toLowerCase()){case"l":y=p.width/2;break;case"r":y=-p.width/2;break}return y&&(g+=i?y:-y),y=0,g},W1=(n,r)=>{var i;return((i=n.node(r))===null||i===void 0?void 0:i.width)||0};var Xf={positionX:Zc,findType1Conflicts:Cm,findType2Conflicts:wm,addConflict:V0,hasConflict:Cb,verticalAlignment:bl,horizontalCompaction:Em,alignCoordinates:di,findSmallestWidthAlignment:ah,balance:Sm};const wb=n=>{const r=tr.buildLayerMatrix(n),i=n.graph().ranksep;let s=0;r?.forEach(a=>{const u=a.map(p=>n.node(p).height),h=Math.max(...u);a?.forEach(p=>{n.node(p).y=s+h/2}),s+=h+i})},X1=n=>{const r=tr.buildLayerMatrix(n),i=Object.assign(Cm(n,r),wm(n,r)),s={};let a;["u","d"].forEach(h=>{a=h==="u"?r:Object.values(r).reverse(),["l","r"].forEach(p=>{p==="r"&&(a=a.map(E=>Object.values(E).reverse()));const g=(h==="u"?n.predecessors:n.successors).bind(n),y=bl(n,a,i,g),x=Em(n,a,y.root,y.align,p==="r");p==="r"&&Object.keys(x).forEach(E=>x[E]=-x[E]),s[h+p]=x})});const u=ah(n,s);return u&&di(s,u),Sm(s,n.graph().align)};var Z1=n=>{var r;n=tr.asNonCompoundGraph(n),wb(n);const i=X1(n);(r=Object.keys(i))===null||r===void 0||r.forEach(s=>{n.node(s).x=i[s]})},j0=(n,r)=>{const s=n.nodes().filter(h=>{var p;return!(!((p=n.children(h))===null||p===void 0)&&p.length)}).map(h=>n.node(h).rank),a=Math.max(...s),u=[];for(let h=0;h<a+1;h++)u.push([]);r?.forEach(h=>{const p=n.node(h);!p||p.dummy||isNaN(p.rank)||(p.fixorder=u[p.rank].length,u[p.rank].push(h))})};const Y1=Vo.Graph,ch=(n,r)=>{const i=r&&r.debugTiming?tr.time:tr.notime;i("layout",()=>{r&&!r.keepNodeOrder&&r.prevGraph&&i("  inheritOrder",()=>{Lg(n,r.prevGraph)});const s=i("  buildLayoutGraph",()=>Ab(n));r&&r.edgeLabelSpace===!1||i("  makeSpaceForEdgeLabels",()=>{Gg(s)});try{i("  runLayout",()=>{Eb(s,i,r)})}catch(a){if(a.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,a);return}throw a}i("  updateInputGraph",()=>{Ns(n,s)})})},Eb=(n,r,i)=>{r("    removeSelfEdges",()=>{ex(n)}),r("    acyclic",()=>{ut.run(n)}),r("    nestingGraph.run",()=>{rb.run(n)}),r("    rank",()=>{w1(tr.asNonCompoundGraph(n))}),r("    injectEdgeLabelProxies",()=>{Tm(n)}),r("    removeEmptyRanks",()=>{Xt(n)}),r("    nestingGraph.cleanup",()=>{rb.cleanup(n)}),r("    normalizeRanks",()=>{Vt(n)}),r("    assignRankMinMax",()=>{Q1(n)}),r("    removeEdgeLabelProxies",()=>{Tb(n)}),r("    normalize.run",()=>{$f.run(n)}),r("    parentDummyChains",()=>{A1(n)}),r("    addBorderSegments",()=>{ib(n)}),i&&i.keepNodeOrder&&r("    initDataOrder",()=>{j0(n,i.nodeOrder)}),r("    order",()=>{V1(n)}),r("    insertSelfEdges",()=>{tx(n)}),r("    adjustCoordinateSystem",()=>{sb.adjust(n)}),r("    position",()=>{Z1(n)}),r("    positionSelfEdges",()=>{$p(n)}),r("    removeBorderNodes",()=>{Mb(n)}),r("    normalize.undo",()=>{$f.undo(n)}),r("    fixupEdgeLabelCoords",()=>{Eo(n)}),r("    undoCoordinateSystem",()=>{sb.undo(n)}),r("    translateGraph",()=>{H0(n)}),r("    assignNodeIntersects",()=>{xl(n)}),r("    reversePoints",()=>{$0(n)}),r("    acyclic.undo",()=>{ut.undo(n)})},Lg=(n,r)=>{const i=r._nodes||{};n.nodes().forEach(s=>{const a=n.node(s);i[s]!==void 0?(a.fixorder=i[s]._order,delete i[s]._order):delete a.fixorder})},Ns=(n,r)=>{n.nodes().forEach(i=>{var s;const a=n.node(i),u=r.node(i);a&&(a.x=u.x,a.y=u.y,a._order=u.order,a._rank=u.rank,!((s=r.children(i))===null||s===void 0)&&s.length&&(a.width=u.width,a.height=u.height))}),n.edges().forEach(i=>{const s=n.edge(i),a=r.edge(i);s.points=a.points,a.hasOwnProperty("x")&&(s.x=a.x,s.y=a.y)}),n.graph().width=r.graph().width,n.graph().height=r.graph().height},zs=["nodesep","edgesep","ranksep","marginx","marginy"],Sb={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},_m=["acyclicer","ranker","rankdir","align"],K1=["width","height","layer","fixorder"],_b={width:0,height:0},q1=["minlen","weight","width","height","labeloffset"],J1={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Am=["labelpos"],Ab=n=>{const r=new Y1({multigraph:!0,compound:!0}),i=vu(n.graph()),s={};return _m?.forEach(a=>{i[a]!==void 0&&(s[a]=i[a])}),r.setGraph(Object.assign({},Sb,W0(i,zs),s)),n.nodes().forEach(a=>{const u=vu(n.node(a)),h=W0(u,K1);Object.keys(_b).forEach(p=>{h[p]===void 0&&(h[p]=_b[p])}),r.setNode(a,h),r.setParent(a,n.parent(a))}),n.edges().forEach(a=>{const u=vu(n.edge(a)),h={};Am?.forEach(p=>{u[p]!==void 0&&(h[p]=u[p])}),r.setEdge(a,Object.assign({},J1,W0(u,q1),h))}),r},Gg=n=>{const r=n.graph();r.ranksep||(r.ranksep=0),r.ranksep/=2,n.nodes().forEach(i=>{const s=n.node(i);isNaN(s.layer)||(s.layer?s.layer*=2:s.layer=0)}),n.edges().forEach(i=>{var s;const a=n.edge(i);a.minlen*=2,((s=a.labelpos)===null||s===void 0?void 0:s.toLowerCase())!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?a.width+=a.labeloffset:a.height+=a.labeloffset)})},Tm=n=>{n.edges().forEach(r=>{const i=n.edge(r);if(i.width&&i.height){const s=n.node(r.v),a=n.node(r.w),u={e:r,rank:(a.rank-s.rank)/2+s.rank};tr.addDummyNode(n,"edge-proxy",u,"_ep")}})},Q1=n=>{let r=0;n.nodes().forEach(i=>{const s=n.node(i);s.borderTop&&(s.minRank=n.node(s.borderTop).rank,s.maxRank=n.node(s.borderBottom).rank,r=Math.max(r,s.maxRank||-1/0))}),n.graph().maxRank=r},Tb=n=>{n.nodes().forEach(r=>{const i=n.node(r);i.dummy==="edge-proxy"&&(n.edge(i.e).labelRank=i.rank,n.removeNode(r))})},H0=n=>{let r=Number.POSITIVE_INFINITY,i=0,s=Number.POSITIVE_INFINITY,a=0;const u=n.graph(),h=u.marginx||0,p=u.marginy||0,g=y=>{if(!y)return;const x=y.x,E=y.y,T=y.width,O=y.height;!isNaN(x)&&!isNaN(T)&&(r=Math.min(r,x-T/2),i=Math.max(i,x+T/2)),!isNaN(E)&&!isNaN(O)&&(s=Math.min(s,E-O/2),a=Math.max(a,E+O/2))};n.nodes().forEach(y=>{g(n.node(y))}),n.edges().forEach(y=>{const x=n.edge(y);x.hasOwnProperty("x")&&g(x)}),r-=h,s-=p,n.nodes().forEach(y=>{const x=n.node(y);x.x-=r,x.y-=s}),n.edges().forEach(y=>{var x;const E=n.edge(y);(x=E.points)===null||x===void 0||x.forEach(T=>{T.x-=r,T.y-=s}),E.hasOwnProperty("x")&&(E.x-=r),E.hasOwnProperty("y")&&(E.y-=s)}),u.width=i-r+h,u.height=a-s+p},xl=n=>{n.edges().forEach(r=>{const i=n.edge(r),s=n.node(r.v),a=n.node(r.w);let u,h;i.points?(u=i.points[0],h=i.points[i.points.length-1]):(i.points=[],u=a,h=s),i.points.unshift(tr.intersectRect(s,u)),i.points.push(tr.intersectRect(a,h))})},Eo=n=>{n.edges().forEach(r=>{const i=n.edge(r);if(i.hasOwnProperty("x"))switch((i.labelpos==="l"||i.labelpos==="r")&&(i.width-=i.labeloffset),i.labelpos){case"l":i.x-=i.width/2+i.labeloffset;break;case"r":i.x+=i.width/2+i.labeloffset;break}})},$0=n=>{n.edges().forEach(r=>{const i=n.edge(r);i.reversed&&i.points.reverse()})},Mb=n=>{n.nodes().forEach(r=>{var i,s,a;if(!((i=n.children(r))===null||i===void 0)&&i.length){const u=n.node(r),h=n.node(u.borderTop),p=n.node(u.borderBottom),g=n.node(u.borderLeft[((s=u.borderLeft)===null||s===void 0?void 0:s.length)-1]),y=n.node(u.borderRight[((a=u.borderRight)===null||a===void 0?void 0:a.length)-1]);u.width=Math.abs(y?.x-g?.x)||10,u.height=Math.abs(p?.y-h?.y)||10,u.x=(g?.x||0)+u.width/2,u.y=(h?.y||0)+u.height/2}}),n.nodes().forEach(r=>{n.node(r).dummy==="border"&&n.removeNode(r)})},ex=n=>{n.edges().forEach(r=>{if(r.v===r.w){const i=n.node(r.v);i.selfEdges||(i.selfEdges=[]),i.selfEdges.push({e:r,label:n.edge(r)}),n.removeEdge(r)}})},tx=n=>{const r=tr.buildLayerMatrix(n);r?.forEach(i=>{let s=0;i?.forEach((a,u)=>{var h;const p=n.node(a);p.order=u+s,(h=p.selfEdges)===null||h===void 0||h.forEach(g=>{tr.addDummyNode(n,"selfedge",{width:g.label.width,height:g.label.height,rank:p.rank,order:u+ ++s,e:g.e,label:g.label},"_se")}),delete p.selfEdges})})},$p=n=>{n.nodes().forEach(r=>{const i=n.node(r);if(i.dummy==="selfedge"){const s=n.node(i.e.v),a=s.x+s.width/2,u=s.y,h=i.x-a,p=s.height/2;n.setEdge(i.e,i.label),n.removeNode(r),i.label.points=[{x:a+2*h/3,y:u-p},{x:a+5*h/6,y:u-p},{y:u,x:a+h},{x:a+5*h/6,y:u+p},{x:a+2*h/3,y:u+p}],i.label.x=i.x,i.label.y=i.y}})},W0=(n,r)=>{const i={};return r?.forEach(s=>{n[s]!==void 0&&(i[s]=+n[s])}),i},vu=n=>{const r={};return Object.keys(n).forEach(i=>{const s=n[i];r[i.toLowerCase()]=s}),r};var _i=ch,Yo={graphlib:Vo,layout:_i,util:{time:Vr,notime:Zn}};class Yc extends ds{constructor(r){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=i=>{const s=this,{nodes:a}=s,u=a.find(h=>h.id===i);return u?u.layout!==!1:!0},this.updateCfg(r)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}execute(){const r=this,{nodes:i,nodeSize:s,rankdir:a,combos:u,begin:h}=r;if(!i)return;const p=r.edges||[],g=new Yo.graphlib.Graph({multigraph:!0,compound:!0});let y;s?Ps(s)?y=()=>s:y=()=>[s,s]:y=k=>k.size?Ps(k.size)?k.size:vc(k.size)?[k.size.width||40,k.size.height||40]:[k.size,k.size]:[40,40];let x=Fg(r.nodesepFunc,r.nodesep,50),E=Fg(r.ranksepFunc,r.ranksep,50);(a==="LR"||a==="RL")&&(x=Fg(r.ranksepFunc,r.ranksep,50),E=Fg(r.nodesepFunc,r.nodesep,50)),g.setDefaultEdgeLabel(()=>({})),g.setGraph(r);const T={};i.filter(k=>k.layout!==!1).forEach(k=>{const B=y(k),$=E(k),X=x(k),ne=B[0]+2*X,be=B[1]+2*$,me=k.layer;Wn(me)?g.setNode(k.id,{width:ne,height:be,layer:me}):g.setNode(k.id,{width:ne,height:be}),this.sortByCombo&&k.comboId&&(T[k.comboId]||(T[k.comboId]=!0,g.setNode(k.comboId,{})),g.setParent(k.id,k.comboId))}),this.sortByCombo&&u&&u.forEach(k=>{!k.parentId||(T[k.parentId]||(T[k.parentId]=!0,g.setNode(k.parentId,{})),g.setParent(k.id,k.parentId))}),p.forEach(k=>{const B=xi(k,"source"),$=xi(k,"target");this.layoutNode(B)&&this.layoutNode($)&&g.setEdge(B,$,{weight:k.weight||1})});let O;r.preset&&(O=new Yo.graphlib.Graph({multigraph:!0,compound:!0}),r.preset.nodes.forEach(k=>{O?.setNode(k.id,k)})),Yo.layout(g,{prevGraph:O,edgeLabelSpace:r.edgeLabelSpace,keepNodeOrder:Boolean(!!r.nodeOrder),nodeOrder:r.nodeOrder});const N=[0,0];if(h){let k=1/0,B=1/0;g.nodes().forEach($=>{const X=g.node($);k>X.x&&(k=X.x),B>X.y&&(B=X.y)}),g.edges().forEach($=>{g.edge($).points.forEach(ne=>{k>ne.x&&(k=ne.x),B>ne.y&&(B=ne.y)})}),N[0]=h[0]-k,N[1]=h[1]-B}return g.nodes().forEach(k=>{const B=g.node(k),$=i.findIndex(X=>X.id===k);!i[$]||(i[$].x=B.x+N[0],i[$].y=B.y+N[1],i[$]._order=B._order)}),g.edges().forEach(k=>{const B=g.edge(k),$=p.findIndex(X=>{const ne=xi(X,"source"),be=xi(X,"target");return ne===k.v&&be===k.w});r.edgeLabelSpace&&r.controlPoints&&p[$].type!=="loop"&&(p[$].controlPoints=B.points.slice(1,B.points.length-1),p[$].controlPoints.forEach(X=>{X.x+=N[0],X.y+=N[1]}))}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:p}}getType(){return"dagre"}}function Fg(n,r,i){let s;return n?s=n:Wn(r)?s=()=>r:s=()=>i,s}var nx=M(40271),So=M.n(nx),Ob=M(80069),Mm=M.n(Ob),X0=M(80866),Pb=M.n(X0),rx=M(6411),Wp=M.n(rx),Om=M(82675),Z0=M.n(Om);const Db=Object.prototype.toString;function Cl(n){return Db.call(n).endsWith("Array]")}function ix(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Cl(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var i=r.fromIndex,s=i===void 0?0:i,a=r.toIndex,u=a===void 0?n.length:a;if(s<0||s>=n.length||!Number.isInteger(s))throw new Error("fromIndex must be a positive integer smaller than length");if(u<=s||u>n.length||!Number.isInteger(u))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var h=n[s],p=s+1;p<u;p++)n[p]>h&&(h=n[p]);return h}function Y0(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Cl(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var i=r.fromIndex,s=i===void 0?0:i,a=r.toIndex,u=a===void 0?n.length:a;if(s<0||s>=n.length||!Number.isInteger(s))throw new Error("fromIndex must be a positive integer smaller than length");if(u<=s||u>n.length||!Number.isInteger(u))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var h=n[s],p=s+1;p<u;p++)n[p]<h&&(h=n[p]);return h}function Pm(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Cl(n)){if(n.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var i;if(r.output!==void 0){if(!Cl(r.output))throw new TypeError("output option must be an array if specified");i=r.output}else i=new Array(n.length);var s=Y0(n),a=ix(n);if(s===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var u=r.min,h=u===void 0?r.autoMinMax?s:0:u,p=r.max,g=p===void 0?r.autoMinMax?a:1:p;if(h>=g)throw new RangeError("min option must be smaller than max option");for(var y=(g-h)/(a-s),x=0;x<n.length;x++)i[x]=(n[x]-s)*y+h;return i}var K0=" ".repeat(2),Nb=" ".repeat(4);function ox(){return Xp(this)}function Xp(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.maxRows,s=i===void 0?15:i,a=r.maxColumns,u=a===void 0?10:a,h=r.maxNumSize,p=h===void 0?8:h;return"".concat(n.constructor.name,` {
`).concat(K0,`[
`).concat(Nb).concat(q0(n,s,u,p),`
`).concat(K0,`]
`).concat(K0,"rows: ").concat(n.rows,`
`).concat(K0,"columns: ").concat(n.columns,`
}`)}function q0(n,r,i,s){for(var a=n.rows,u=n.columns,h=Math.min(a,r),p=Math.min(u,i),g=[],y=0;y<h;y++){for(var x=[],E=0;E<p;E++)x.push(lh(n.get(y,E),s));g.push("".concat(x.join(" ")))}return p!==u&&(g[g.length-1]+=" ... ".concat(u-i," more columns")),h!==a&&g.push("... ".concat(a-r," more rows")),g.join(`
`.concat(Nb))}function lh(n,r){var i=String(n);if(i.length<=r)return i.padEnd(r," ");var s=n.toPrecision(r-2);if(s.length<=r)return s;var a=n.toExponential(r-2),u=a.indexOf("e"),h=a.slice(u);return a.slice(0,r-h.length)+h}function Dm(n,r){n.prototype.add=function(s){return typeof s=="number"?this.addS(s):this.addM(s)},n.prototype.addS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)+s);return this},n.prototype.addM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)+s.get(a,u));return this},n.add=function(s,a){var u=new r(s);return u.add(a)},n.prototype.sub=function(s){return typeof s=="number"?this.subS(s):this.subM(s)},n.prototype.subS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)-s);return this},n.prototype.subM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)-s.get(a,u));return this},n.sub=function(s,a){var u=new r(s);return u.sub(a)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(s){return typeof s=="number"?this.mulS(s):this.mulM(s)},n.prototype.mulS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)*s);return this},n.prototype.mulM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)*s.get(a,u));return this},n.mul=function(s,a){var u=new r(s);return u.mul(a)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(s){return typeof s=="number"?this.divS(s):this.divM(s)},n.prototype.divS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)/s);return this},n.prototype.divM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)/s.get(a,u));return this},n.div=function(s,a){var u=new r(s);return u.div(a)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(s){return typeof s=="number"?this.modS(s):this.modM(s)},n.prototype.modS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)%s);return this},n.prototype.modM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)%s.get(a,u));return this},n.mod=function(s,a){var u=new r(s);return u.mod(a)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(s){return typeof s=="number"?this.andS(s):this.andM(s)},n.prototype.andS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)&s);return this},n.prototype.andM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)&s.get(a,u));return this},n.and=function(s,a){var u=new r(s);return u.and(a)},n.prototype.or=function(s){return typeof s=="number"?this.orS(s):this.orM(s)},n.prototype.orS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)|s);return this},n.prototype.orM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)|s.get(a,u));return this},n.or=function(s,a){var u=new r(s);return u.or(a)},n.prototype.xor=function(s){return typeof s=="number"?this.xorS(s):this.xorM(s)},n.prototype.xorS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)^s);return this},n.prototype.xorM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)^s.get(a,u));return this},n.xor=function(s,a){var u=new r(s);return u.xor(a)},n.prototype.leftShift=function(s){return typeof s=="number"?this.leftShiftS(s):this.leftShiftM(s)},n.prototype.leftShiftS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)<<s);return this},n.prototype.leftShiftM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)<<s.get(a,u));return this},n.leftShift=function(s,a){var u=new r(s);return u.leftShift(a)},n.prototype.signPropagatingRightShift=function(s){return typeof s=="number"?this.signPropagatingRightShiftS(s):this.signPropagatingRightShiftM(s)},n.prototype.signPropagatingRightShiftS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>s);return this},n.prototype.signPropagatingRightShiftM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>s.get(a,u));return this},n.signPropagatingRightShift=function(s,a){var u=new r(s);return u.signPropagatingRightShift(a)},n.prototype.rightShift=function(s){return typeof s=="number"?this.rightShiftS(s):this.rightShiftM(s)},n.prototype.rightShiftS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>>s);return this},n.prototype.rightShiftM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>>s.get(a,u));return this},n.rightShift=function(s,a){var u=new r(s);return u.rightShift(a)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,~this.get(s,a));return this},n.not=function(s){var a=new r(s);return a.not()},n.prototype.abs=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.abs(this.get(s,a)));return this},n.abs=function(s){var a=new r(s);return a.abs()},n.prototype.acos=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.acos(this.get(s,a)));return this},n.acos=function(s){var a=new r(s);return a.acos()},n.prototype.acosh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.acosh(this.get(s,a)));return this},n.acosh=function(s){var a=new r(s);return a.acosh()},n.prototype.asin=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.asin(this.get(s,a)));return this},n.asin=function(s){var a=new r(s);return a.asin()},n.prototype.asinh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.asinh(this.get(s,a)));return this},n.asinh=function(s){var a=new r(s);return a.asinh()},n.prototype.atan=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.atan(this.get(s,a)));return this},n.atan=function(s){var a=new r(s);return a.atan()},n.prototype.atanh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.atanh(this.get(s,a)));return this},n.atanh=function(s){var a=new r(s);return a.atanh()},n.prototype.cbrt=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.cbrt(this.get(s,a)));return this},n.cbrt=function(s){var a=new r(s);return a.cbrt()},n.prototype.ceil=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.ceil(this.get(s,a)));return this},n.ceil=function(s){var a=new r(s);return a.ceil()},n.prototype.clz32=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.clz32(this.get(s,a)));return this},n.clz32=function(s){var a=new r(s);return a.clz32()},n.prototype.cos=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.cos(this.get(s,a)));return this},n.cos=function(s){var a=new r(s);return a.cos()},n.prototype.cosh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.cosh(this.get(s,a)));return this},n.cosh=function(s){var a=new r(s);return a.cosh()},n.prototype.exp=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.exp(this.get(s,a)));return this},n.exp=function(s){var a=new r(s);return a.exp()},n.prototype.expm1=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.expm1(this.get(s,a)));return this},n.expm1=function(s){var a=new r(s);return a.expm1()},n.prototype.floor=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.floor(this.get(s,a)));return this},n.floor=function(s){var a=new r(s);return a.floor()},n.prototype.fround=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.fround(this.get(s,a)));return this},n.fround=function(s){var a=new r(s);return a.fround()},n.prototype.log=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log(this.get(s,a)));return this},n.log=function(s){var a=new r(s);return a.log()},n.prototype.log1p=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log1p(this.get(s,a)));return this},n.log1p=function(s){var a=new r(s);return a.log1p()},n.prototype.log10=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log10(this.get(s,a)));return this},n.log10=function(s){var a=new r(s);return a.log10()},n.prototype.log2=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log2(this.get(s,a)));return this},n.log2=function(s){var a=new r(s);return a.log2()},n.prototype.round=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.round(this.get(s,a)));return this},n.round=function(s){var a=new r(s);return a.round()},n.prototype.sign=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sign(this.get(s,a)));return this},n.sign=function(s){var a=new r(s);return a.sign()},n.prototype.sin=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sin(this.get(s,a)));return this},n.sin=function(s){var a=new r(s);return a.sin()},n.prototype.sinh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sinh(this.get(s,a)));return this},n.sinh=function(s){var a=new r(s);return a.sinh()},n.prototype.sqrt=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sqrt(this.get(s,a)));return this},n.sqrt=function(s){var a=new r(s);return a.sqrt()},n.prototype.tan=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.tan(this.get(s,a)));return this},n.tan=function(s){var a=new r(s);return a.tan()},n.prototype.tanh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.tanh(this.get(s,a)));return this},n.tanh=function(s){var a=new r(s);return a.tanh()},n.prototype.trunc=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.trunc(this.get(s,a)));return this},n.trunc=function(s){var a=new r(s);return a.trunc()},n.pow=function(s,a){var u=new r(s);return u.pow(a)},n.prototype.pow=function(s){return typeof s=="number"?this.powS(s):this.powM(s)},n.prototype.powS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,Math.pow(this.get(a,u),s));return this},n.prototype.powM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,Math.pow(this.get(a,u),s.get(a,u)));return this}}function $l(n,r,i){var s=i?n.rows:n.rows-1;if(r<0||r>s)throw new RangeError("Row index out of range")}function mu(n,r,i){var s=i?n.columns:n.columns-1;if(r<0||r>s)throw new RangeError("Column index out of range")}function Is(n,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function _a(n,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function sx(n,r){if(!Cl(r))throw new TypeError("row indices must be an array");for(var i=0;i<r.length;i++)if(r[i]<0||r[i]>=n.rows)throw new RangeError("row indices are out of range")}function Nm(n,r){if(!Cl(r))throw new TypeError("column indices must be an array");for(var i=0;i<r.length;i++)if(r[i]<0||r[i]>=n.columns)throw new RangeError("column indices are out of range")}function Ib(n,r,i,s,a){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(J0("startRow",r),J0("endRow",i),J0("startColumn",s),J0("endColumn",a),r>i||s>a||r<0||r>=n.rows||i<0||i>=n.rows||s<0||s>=n.columns||a<0||a>=n.columns)throw new RangeError("Submatrix indices are out of range")}function Bg(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=[],s=0;s<n;s++)i.push(r);return i}function J0(n,r){if(typeof r!="number")throw new TypeError("".concat(n," must be a number"))}function Zf(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function ax(n){for(var r=Bg(n.rows),i=0;i<n.rows;++i)for(var s=0;s<n.columns;++s)r[i]+=n.get(i,s);return r}function Rb(n){for(var r=Bg(n.columns),i=0;i<n.rows;++i)for(var s=0;s<n.columns;++s)r[s]+=n.get(i,s);return r}function kb(n){for(var r=0,i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)r+=n.get(i,s);return r}function cx(n){for(var r=Bg(n.rows,1),i=0;i<n.rows;++i)for(var s=0;s<n.columns;++s)r[i]*=n.get(i,s);return r}function lx(n){for(var r=Bg(n.columns,1),i=0;i<n.rows;++i)for(var s=0;s<n.columns;++s)r[s]*=n.get(i,s);return r}function Lb(n){for(var r=1,i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)r*=n.get(i,s);return r}function Im(n,r,i){for(var s=n.rows,a=n.columns,u=[],h=0;h<s;h++){for(var p=0,g=0,y=0,x=0;x<a;x++)y=n.get(h,x)-i[h],p+=y,g+=y*y;r?u.push((g-p*p/a)/(a-1)):u.push((g-p*p/a)/a)}return u}function ux(n,r,i){for(var s=n.rows,a=n.columns,u=[],h=0;h<a;h++){for(var p=0,g=0,y=0,x=0;x<s;x++)y=n.get(x,h)-i[h],p+=y,g+=y*y;r?u.push((g-p*p/s)/(s-1)):u.push((g-p*p/s)/s)}return u}function dx(n,r,i){for(var s=n.rows,a=n.columns,u=s*a,h=0,p=0,g=0,y=0;y<s;y++)for(var x=0;x<a;x++)g=n.get(y,x)-i,h+=g,p+=g*g;return r?(p-h*h/u)/(u-1):(p-h*h/u)/u}function hx(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)-r[i])}function fx(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)-r[s])}function uh(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)-r)}function px(n){for(var r=[],i=0;i<n.rows;i++){for(var s=0,a=0;a<n.columns;a++)s+=Math.pow(n.get(i,a),2)/(n.columns-1);r.push(Math.sqrt(s))}return r}function gx(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)/r[i])}function vx(n){for(var r=[],i=0;i<n.columns;i++){for(var s=0,a=0;a<n.rows;a++)s+=Math.pow(n.get(a,i),2)/(n.rows-1);r.push(Math.sqrt(s))}return r}function mx(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)/r[s])}function yx(n){for(var r=n.size-1,i=0,s=0;s<n.columns;s++)for(var a=0;a<n.rows;a++)i+=Math.pow(n.get(a,s),2)/r;return Math.sqrt(i)}function Gb(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)/r)}var ta=function(){function n(){Wp()(this,n)}return Z0()(n,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(i){if(typeof i!="function")throw new TypeError("callback must be a function");for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i.call(this,s,a);return this}},{key:"to1DArray",value:function(){for(var i=[],s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i.push(this.get(s,a));return i}},{key:"to2DArray",value:function(){for(var i=[],s=0;s<this.rows;s++){i.push([]);for(var a=0;a<this.columns;a++)i[s].push(this.get(s,a))}return i}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var i=0;i<this.rows;i++)for(var s=0;s<=i;s++)if(this.get(i,s)!==this.get(s,i))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var i=0,s=0,a=-1,u=!0,h=!1;i<this.rows&&u;){for(s=0,h=!1;s<this.columns&&h===!1;)this.get(i,s)===0?s++:this.get(i,s)===1&&s>a?(h=!0,a=s):(u=!1,h=!0);i++}return u}},{key:"isReducedEchelonForm",value:function(){for(var i=0,s=0,a=-1,u=!0,h=!1;i<this.rows&&u;){for(s=0,h=!1;s<this.columns&&h===!1;)this.get(i,s)===0?s++:this.get(i,s)===1&&s>a?(h=!0,a=s):(u=!1,h=!0);for(var p=s+1;p<this.rows;p++)this.get(i,p)!==0&&(u=!1);i++}return u}},{key:"echelonForm",value:function(){for(var i=this.clone(),s=0,a=0;s<i.rows&&a<i.columns;){for(var u=s,h=s;h<i.rows;h++)i.get(h,a)>i.get(u,a)&&(u=h);if(i.get(u,a)===0)a++;else{i.swapRows(s,u);for(var p=i.get(s,a),g=a;g<i.columns;g++)i.set(s,g,i.get(s,g)/p);for(var y=s+1;y<i.rows;y++){var x=i.get(y,a)/i.get(s,a);i.set(y,a,0);for(var E=a+1;E<i.columns;E++)i.set(y,E,i.get(y,E)-i.get(s,E)*x)}s++,a++}}return i}},{key:"reducedEchelonForm",value:function(){for(var i=this.echelonForm(),s=i.columns,a=i.rows,u=a-1;u>=0;)if(i.maxRow(u)===0)u--;else{for(var h=0,p=!1;h<a&&p===!1;)i.get(u,h)===1?p=!0:h++;for(var g=0;g<u;g++)for(var y=i.get(g,h),x=h;x<s;x++){var E=i.get(g,x)-y*i.get(u,x);i.set(g,x,E)}u--}return i}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(pa()(i)!=="object")throw new TypeError("options must be an object");var s=i.rows,a=s===void 0?1:s,u=i.columns,h=u===void 0?1:u;if(!Number.isInteger(a)||a<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(h)||h<=0)throw new TypeError("columns must be a positive integer");for(var p=new qr(this.rows*a,this.columns*h),g=0;g<a;g++)for(var y=0;y<h;y++)p.setSubMatrix(this,this.rows*g,this.columns*y);return p}},{key:"fill",value:function(i){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,i);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(i){$l(this,i);for(var s=[],a=0;a<this.columns;a++)s.push(this.get(i,a));return s}},{key:"getRowVector",value:function(i){return qr.rowVector(this.getRow(i))}},{key:"setRow",value:function(i,s){$l(this,i),s=Is(this,s);for(var a=0;a<this.columns;a++)this.set(i,a,s[a]);return this}},{key:"swapRows",value:function(i,s){$l(this,i),$l(this,s);for(var a=0;a<this.columns;a++){var u=this.get(i,a);this.set(i,a,this.get(s,a)),this.set(s,a,u)}return this}},{key:"getColumn",value:function(i){mu(this,i);for(var s=[],a=0;a<this.rows;a++)s.push(this.get(a,i));return s}},{key:"getColumnVector",value:function(i){return qr.columnVector(this.getColumn(i))}},{key:"setColumn",value:function(i,s){mu(this,i),s=_a(this,s);for(var a=0;a<this.rows;a++)this.set(a,i,s[a]);return this}},{key:"swapColumns",value:function(i,s){mu(this,i),mu(this,s);for(var a=0;a<this.rows;a++){var u=this.get(a,i);this.set(a,i,this.get(a,s)),this.set(a,s,u)}return this}},{key:"addRowVector",value:function(i){i=Is(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)+i[a]);return this}},{key:"subRowVector",value:function(i){i=Is(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)-i[a]);return this}},{key:"mulRowVector",value:function(i){i=Is(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)*i[a]);return this}},{key:"divRowVector",value:function(i){i=Is(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)/i[a]);return this}},{key:"addColumnVector",value:function(i){i=_a(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)+i[s]);return this}},{key:"subColumnVector",value:function(i){i=_a(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)-i[s]);return this}},{key:"mulColumnVector",value:function(i){i=_a(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)*i[s]);return this}},{key:"divColumnVector",value:function(i){i=_a(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)/i[s]);return this}},{key:"mulRow",value:function(i,s){$l(this,i);for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*s);return this}},{key:"mulColumn",value:function(i,s){mu(this,i);for(var a=0;a<this.rows;a++)this.set(a,i,this.get(a,i)*s);return this}},{key:"max",value:function(i){if(this.isEmpty())return NaN;switch(i){case"row":{for(var s=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)>s[a]&&(s[a]=this.get(a,u));return s}case"column":{for(var h=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),p=0;p<this.rows;p++)for(var g=0;g<this.columns;g++)this.get(p,g)>h[g]&&(h[g]=this.get(p,g));return h}case void 0:{for(var y=this.get(0,0),x=0;x<this.rows;x++)for(var E=0;E<this.columns;E++)this.get(x,E)>y&&(y=this.get(x,E));return y}default:throw new Error("invalid option: ".concat(i))}}},{key:"maxIndex",value:function(){Zf(this);for(var i=this.get(0,0),s=[0,0],a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)>i&&(i=this.get(a,u),s[0]=a,s[1]=u);return s}},{key:"min",value:function(i){if(this.isEmpty())return NaN;switch(i){case"row":{for(var s=new Array(this.rows).fill(Number.POSITIVE_INFINITY),a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)<s[a]&&(s[a]=this.get(a,u));return s}case"column":{for(var h=new Array(this.columns).fill(Number.POSITIVE_INFINITY),p=0;p<this.rows;p++)for(var g=0;g<this.columns;g++)this.get(p,g)<h[g]&&(h[g]=this.get(p,g));return h}case void 0:{for(var y=this.get(0,0),x=0;x<this.rows;x++)for(var E=0;E<this.columns;E++)this.get(x,E)<y&&(y=this.get(x,E));return y}default:throw new Error("invalid option: ".concat(i))}}},{key:"minIndex",value:function(){Zf(this);for(var i=this.get(0,0),s=[0,0],a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)<i&&(i=this.get(a,u),s[0]=a,s[1]=u);return s}},{key:"maxRow",value:function(i){if($l(this,i),this.isEmpty())return NaN;for(var s=this.get(i,0),a=1;a<this.columns;a++)this.get(i,a)>s&&(s=this.get(i,a));return s}},{key:"maxRowIndex",value:function(i){$l(this,i),Zf(this);for(var s=this.get(i,0),a=[i,0],u=1;u<this.columns;u++)this.get(i,u)>s&&(s=this.get(i,u),a[1]=u);return a}},{key:"minRow",value:function(i){if($l(this,i),this.isEmpty())return NaN;for(var s=this.get(i,0),a=1;a<this.columns;a++)this.get(i,a)<s&&(s=this.get(i,a));return s}},{key:"minRowIndex",value:function(i){$l(this,i),Zf(this);for(var s=this.get(i,0),a=[i,0],u=1;u<this.columns;u++)this.get(i,u)<s&&(s=this.get(i,u),a[1]=u);return a}},{key:"maxColumn",value:function(i){if(mu(this,i),this.isEmpty())return NaN;for(var s=this.get(0,i),a=1;a<this.rows;a++)this.get(a,i)>s&&(s=this.get(a,i));return s}},{key:"maxColumnIndex",value:function(i){mu(this,i),Zf(this);for(var s=this.get(0,i),a=[0,i],u=1;u<this.rows;u++)this.get(u,i)>s&&(s=this.get(u,i),a[0]=u);return a}},{key:"minColumn",value:function(i){if(mu(this,i),this.isEmpty())return NaN;for(var s=this.get(0,i),a=1;a<this.rows;a++)this.get(a,i)<s&&(s=this.get(a,i));return s}},{key:"minColumnIndex",value:function(i){mu(this,i),Zf(this);for(var s=this.get(0,i),a=[0,i],u=1;u<this.rows;u++)this.get(u,i)<s&&(s=this.get(u,i),a[0]=u);return a}},{key:"diag",value:function(){for(var i=Math.min(this.rows,this.columns),s=[],a=0;a<i;a++)s.push(this.get(a,a));return s}},{key:"norm",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",s=0;if(i==="max")return this.max();if(i==="frobenius"){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)s=s+this.get(a,u)*this.get(a,u);return Math.sqrt(s)}else throw new RangeError("unknown norm type: ".concat(i))}},{key:"cumulativeSum",value:function(){for(var i=0,s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i+=this.get(s,a),this.set(s,a,i);return this}},{key:"dot",value:function(i){n.isMatrix(i)&&(i=i.to1DArray());var s=this.to1DArray();if(s.length!==i.length)throw new RangeError("vectors do not have the same size");for(var a=0,u=0;u<s.length;u++)a+=s[u]*i[u];return a}},{key:"mmul",value:function(i){i=qr.checkMatrix(i);for(var s=this.rows,a=this.columns,u=i.columns,h=new qr(s,u),p=new Float64Array(a),g=0;g<u;g++){for(var y=0;y<a;y++)p[y]=i.get(y,g);for(var x=0;x<s;x++){for(var E=0,T=0;T<a;T++)E+=this.get(x,T)*p[T];h.set(x,g,E)}}return h}},{key:"strassen2x2",value:function(i){i=qr.checkMatrix(i);var s=new qr(2,2),a=this.get(0,0),u=i.get(0,0),h=this.get(0,1),p=i.get(0,1),g=this.get(1,0),y=i.get(1,0),x=this.get(1,1),E=i.get(1,1),T=(a+x)*(u+E),O=(g+x)*u,N=a*(p-E),k=x*(y-u),B=(a+h)*E,$=(g-a)*(u+p),X=(h-x)*(y+E),ne=T+k-B+X,be=N+B,me=O+k,je=T-O+N+$;return s.set(0,0,ne),s.set(0,1,be),s.set(1,0,me),s.set(1,1,je),s}},{key:"strassen3x3",value:function(i){i=qr.checkMatrix(i);var s=new qr(3,3),a=this.get(0,0),u=this.get(0,1),h=this.get(0,2),p=this.get(1,0),g=this.get(1,1),y=this.get(1,2),x=this.get(2,0),E=this.get(2,1),T=this.get(2,2),O=i.get(0,0),N=i.get(0,1),k=i.get(0,2),B=i.get(1,0),$=i.get(1,1),X=i.get(1,2),ne=i.get(2,0),be=i.get(2,1),me=i.get(2,2),je=(a+u+h-p-g-E-T)*$,it=(a-p)*(-N+$),ct=g*(-O+N+B-$-X-ne+me),Zt=(-a+p+g)*(O-N+$),At=(p+g)*(-O+N),Yt=a*O,st=(-a+x+E)*(O-k+X),Bn=(-a+x)*(k-X),kn=(x+E)*(-O+k),Jn=(a+u+h-g-y-x-E)*X,Li=E*(-O+k+B-$-X-ne+be),Gi=(-h+E+T)*($+ne-be),Xr=(h-T)*($-be),Ho=h*ne,na=(E+T)*(-ne+be),pi=(-h+g+y)*(X+ne-me),ra=(h-y)*(X-me),ja=(g+y)*(-ne+me),In=u*B,yr=y*be,Fi=p*k,Yi=x*N,mo=T*me,Zr=Yt+Ho+In,ia=je+Zt+At+Yt+Gi+Ho+na,Gc=Yt+st+kn+Jn+Ho+pi+ja,$o=it+ct+Zt+Yt+Ho+pi+ra,ff=it+Zt+At+Yt+yr,pf=Ho+pi+ra+ja+Fi,Wv=Yt+st+Bn+Li+Gi+Xr+Ho,E0=Gi+Xr+Ho+na+Yi,Xv=Yt+st+Bn+kn+mo;return s.set(0,0,Zr),s.set(0,1,ia),s.set(0,2,Gc),s.set(1,0,$o),s.set(1,1,ff),s.set(1,2,pf),s.set(2,0,Wv),s.set(2,1,E0),s.set(2,2,Xv),s}},{key:"mmulStrassen",value:function(i){i=qr.checkMatrix(i);var s=this.clone(),a=s.rows,u=s.columns,h=i.rows,p=i.columns;u!==h&&console.warn("Multiplying ".concat(a," x ").concat(u," and ").concat(h," x ").concat(p," matrix: dimensions do not match."));function g(T,O,N){var k=T.rows,B=T.columns;if(k===O&&B===N)return T;var $=n.zeros(O,N);return $=$.setSubMatrix(T,0,0),$}var y=Math.max(a,h),x=Math.max(u,p);s=g(s,y,x),i=g(i,y,x);function E(T,O,N,k){if(N<=512||k<=512)return T.mmul(O);N%2===1&&k%2===1?(T=g(T,N+1,k+1),O=g(O,N+1,k+1)):N%2===1?(T=g(T,N+1,k),O=g(O,N+1,k)):k%2===1&&(T=g(T,N,k+1),O=g(O,N,k+1));var B=parseInt(T.rows/2,10),$=parseInt(T.columns/2,10),X=T.subMatrix(0,B-1,0,$-1),ne=O.subMatrix(0,B-1,0,$-1),be=T.subMatrix(0,B-1,$,T.columns-1),me=O.subMatrix(0,B-1,$,O.columns-1),je=T.subMatrix(B,T.rows-1,0,$-1),it=O.subMatrix(B,O.rows-1,0,$-1),ct=T.subMatrix(B,T.rows-1,$,T.columns-1),Zt=O.subMatrix(B,O.rows-1,$,O.columns-1),At=E(n.add(X,ct),n.add(ne,Zt),B,$),Yt=E(n.add(je,ct),ne,B,$),st=E(X,n.sub(me,Zt),B,$),Bn=E(ct,n.sub(it,ne),B,$),kn=E(n.add(X,be),Zt,B,$),Jn=E(n.sub(je,X),n.add(ne,me),B,$),Li=E(n.sub(be,ct),n.add(it,Zt),B,$),Gi=n.add(At,Bn);Gi.sub(kn),Gi.add(Li);var Xr=n.add(st,kn),Ho=n.add(Yt,Bn),na=n.sub(At,Yt);na.add(st),na.add(Jn);var pi=n.zeros(2*Gi.rows,2*Gi.columns);return pi=pi.setSubMatrix(Gi,0,0),pi=pi.setSubMatrix(Xr,Gi.rows,0),pi=pi.setSubMatrix(Ho,0,Gi.columns),pi=pi.setSubMatrix(na,Gi.rows,Gi.columns),pi.subMatrix(0,N-1,0,k-1)}return E(s,i,y,x)}},{key:"scaleRows",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(pa()(i)!=="object")throw new TypeError("options must be an object");var s=i.min,a=s===void 0?0:s,u=i.max,h=u===void 0?1:u;if(!Number.isFinite(a))throw new TypeError("min must be a number");if(!Number.isFinite(h))throw new TypeError("max must be a number");if(a>=h)throw new RangeError("min must be smaller than max");for(var p=new qr(this.rows,this.columns),g=0;g<this.rows;g++){var y=this.getRow(g);y.length>0&&Pm(y,{min:a,max:h,output:y}),p.setRow(g,y)}return p}},{key:"scaleColumns",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(pa()(i)!=="object")throw new TypeError("options must be an object");var s=i.min,a=s===void 0?0:s,u=i.max,h=u===void 0?1:u;if(!Number.isFinite(a))throw new TypeError("min must be a number");if(!Number.isFinite(h))throw new TypeError("max must be a number");if(a>=h)throw new RangeError("min must be smaller than max");for(var p=new qr(this.rows,this.columns),g=0;g<this.columns;g++){var y=this.getColumn(g);y.length&&Pm(y,{min:a,max:h,output:y}),p.setColumn(g,y)}return p}},{key:"flipRows",value:function(){for(var i=Math.ceil(this.columns/2),s=0;s<this.rows;s++)for(var a=0;a<i;a++){var u=this.get(s,a),h=this.get(s,this.columns-1-a);this.set(s,a,h),this.set(s,this.columns-1-a,u)}return this}},{key:"flipColumns",value:function(){for(var i=Math.ceil(this.rows/2),s=0;s<this.columns;s++)for(var a=0;a<i;a++){var u=this.get(a,s),h=this.get(this.rows-1-a,s);this.set(a,s,h),this.set(this.rows-1-a,s,u)}return this}},{key:"kroneckerProduct",value:function(i){i=qr.checkMatrix(i);for(var s=this.rows,a=this.columns,u=i.rows,h=i.columns,p=new qr(s*u,a*h),g=0;g<s;g++)for(var y=0;y<a;y++)for(var x=0;x<u;x++)for(var E=0;E<h;E++)p.set(u*g+x,h*y+E,this.get(g,y)*i.get(x,E));return p}},{key:"kroneckerSum",value:function(i){if(i=qr.checkMatrix(i),!this.isSquare()||!i.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var s=this.rows,a=i.rows,u=this.kroneckerProduct(qr.eye(a,a)),h=qr.eye(s,s).kroneckerProduct(i);return u.add(h)}},{key:"transpose",value:function(){for(var i=new qr(this.columns,this.rows),s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i.set(a,s,this.get(s,a));return i}},{key:"sortRows",value:function(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fb,s=0;s<this.rows;s++)this.setRow(s,this.getRow(s).sort(i));return this}},{key:"sortColumns",value:function(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fb,s=0;s<this.columns;s++)this.setColumn(s,this.getColumn(s).sort(i));return this}},{key:"subMatrix",value:function(i,s,a,u){Ib(this,i,s,a,u);for(var h=new qr(s-i+1,u-a+1),p=i;p<=s;p++)for(var g=a;g<=u;g++)h.set(p-i,g-a,this.get(p,g));return h}},{key:"subMatrixRow",value:function(i,s,a){if(s===void 0&&(s=0),a===void 0&&(a=this.columns-1),s>a||s<0||s>=this.columns||a<0||a>=this.columns)throw new RangeError("Argument out of range");for(var u=new qr(i.length,a-s+1),h=0;h<i.length;h++)for(var p=s;p<=a;p++){if(i[h]<0||i[h]>=this.rows)throw new RangeError("Row index out of range: ".concat(i[h]));u.set(h,p-s,this.get(i[h],p))}return u}},{key:"subMatrixColumn",value:function(i,s,a){if(s===void 0&&(s=0),a===void 0&&(a=this.rows-1),s>a||s<0||s>=this.rows||a<0||a>=this.rows)throw new RangeError("Argument out of range");for(var u=new qr(a-s+1,i.length),h=0;h<i.length;h++)for(var p=s;p<=a;p++){if(i[h]<0||i[h]>=this.columns)throw new RangeError("Column index out of range: ".concat(i[h]));u.set(p-s,h,this.get(p,i[h]))}return u}},{key:"setSubMatrix",value:function(i,s,a){if(i=qr.checkMatrix(i),i.isEmpty())return this;var u=s+i.rows-1,h=a+i.columns-1;Ib(this,s,u,a,h);for(var p=0;p<i.rows;p++)for(var g=0;g<i.columns;g++)this.set(s+p,a+g,i.get(p,g));return this}},{key:"selection",value:function(i,s){sx(this,i),Nm(this,s);for(var a=new qr(i.length,s.length),u=0;u<i.length;u++)for(var h=i[u],p=0;p<s.length;p++){var g=s[p];a.set(u,p,this.get(h,g))}return a}},{key:"trace",value:function(){for(var i=Math.min(this.rows,this.columns),s=0,a=0;a<i;a++)s+=this.get(a,a);return s}},{key:"clone",value:function(){for(var i=new qr(this.rows,this.columns),s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i.set(s,a,this.get(s,a));return i}},{key:"sum",value:function(i){switch(i){case"row":return ax(this);case"column":return Rb(this);case void 0:return kb(this);default:throw new Error("invalid option: ".concat(i))}}},{key:"product",value:function(i){switch(i){case"row":return cx(this);case"column":return lx(this);case void 0:return Lb(this);default:throw new Error("invalid option: ".concat(i))}}},{key:"mean",value:function(i){var s=this.sum(i);switch(i){case"row":{for(var a=0;a<this.rows;a++)s[a]/=this.columns;return s}case"column":{for(var u=0;u<this.columns;u++)s[u]/=this.rows;return s}case void 0:return s/this.size;default:throw new Error("invalid option: ".concat(i))}}},{key:"variance",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(pa()(i)==="object"&&(s=i,i=void 0),pa()(s)!=="object")throw new TypeError("options must be an object");var a=s,u=a.unbiased,h=u===void 0?!0:u,p=a.mean,g=p===void 0?this.mean(i):p;if(typeof h!="boolean")throw new TypeError("unbiased must be a boolean");switch(i){case"row":{if(!Cl(g))throw new TypeError("mean must be an array");return Im(this,h,g)}case"column":{if(!Cl(g))throw new TypeError("mean must be an array");return ux(this,h,g)}case void 0:{if(typeof g!="number")throw new TypeError("mean must be a number");return dx(this,h,g)}default:throw new Error("invalid option: ".concat(i))}}},{key:"standardDeviation",value:function(i,s){pa()(i)==="object"&&(s=i,i=void 0);var a=this.variance(i,s);if(i===void 0)return Math.sqrt(a);for(var u=0;u<a.length;u++)a[u]=Math.sqrt(a[u]);return a}},{key:"center",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(pa()(i)==="object"&&(s=i,i=void 0),pa()(s)!=="object")throw new TypeError("options must be an object");var a=s,u=a.center,h=u===void 0?this.mean(i):u;switch(i){case"row":{if(!Cl(h))throw new TypeError("center must be an array");return hx(this,h),this}case"column":{if(!Cl(h))throw new TypeError("center must be an array");return fx(this,h),this}case void 0:{if(typeof h!="number")throw new TypeError("center must be a number");return uh(this,h),this}default:throw new Error("invalid option: ".concat(i))}}},{key:"scale",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(pa()(i)==="object"&&(s=i,i=void 0),pa()(s)!=="object")throw new TypeError("options must be an object");var a=s.scale;switch(i){case"row":{if(a===void 0)a=px(this);else if(!Cl(a))throw new TypeError("scale must be an array");return gx(this,a),this}case"column":{if(a===void 0)a=vx(this);else if(!Cl(a))throw new TypeError("scale must be an array");return mx(this,a),this}case void 0:{if(a===void 0)a=yx(this);else if(typeof a!="number")throw new TypeError("scale must be a number");return Gb(this,a),this}default:throw new Error("invalid option: ".concat(i))}}},{key:"toString",value:function(i){return Xp(this,i)}}],[{key:"from1DArray",value:function(i,s,a){var u=i*s;if(u!==a.length)throw new RangeError("data length does not match given dimensions");for(var h=new qr(i,s),p=0;p<i;p++)for(var g=0;g<s;g++)h.set(p,g,a[p*s+g]);return h}},{key:"rowVector",value:function(i){for(var s=new qr(1,i.length),a=0;a<i.length;a++)s.set(0,a,i[a]);return s}},{key:"columnVector",value:function(i){for(var s=new qr(i.length,1),a=0;a<i.length;a++)s.set(a,0,i[a]);return s}},{key:"zeros",value:function(i,s){return new qr(i,s)}},{key:"ones",value:function(i,s){return new qr(i,s).fill(1)}},{key:"rand",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(pa()(a)!=="object")throw new TypeError("options must be an object");for(var u=a.random,h=u===void 0?Math.random:u,p=new qr(i,s),g=0;g<i;g++)for(var y=0;y<s;y++)p.set(g,y,h());return p}},{key:"randInt",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(pa()(a)!=="object")throw new TypeError("options must be an object");var u=a.min,h=u===void 0?0:u,p=a.max,g=p===void 0?1e3:p,y=a.random,x=y===void 0?Math.random:y;if(!Number.isInteger(h))throw new TypeError("min must be an integer");if(!Number.isInteger(g))throw new TypeError("max must be an integer");if(h>=g)throw new RangeError("min must be smaller than max");for(var E=g-h,T=new qr(i,s),O=0;O<i;O++)for(var N=0;N<s;N++){var k=h+Math.round(x()*E);T.set(O,N,k)}return T}},{key:"eye",value:function(i,s,a){s===void 0&&(s=i),a===void 0&&(a=1);for(var u=Math.min(i,s),h=this.zeros(i,s),p=0;p<u;p++)h.set(p,p,a);return h}},{key:"diag",value:function(i,s,a){var u=i.length;s===void 0&&(s=u),a===void 0&&(a=s);for(var h=Math.min(u,s,a),p=this.zeros(s,a),g=0;g<h;g++)p.set(g,g,i[g]);return p}},{key:"min",value:function(i,s){i=this.checkMatrix(i),s=this.checkMatrix(s);for(var a=i.rows,u=i.columns,h=new qr(a,u),p=0;p<a;p++)for(var g=0;g<u;g++)h.set(p,g,Math.min(i.get(p,g),s.get(p,g)));return h}},{key:"max",value:function(i,s){i=this.checkMatrix(i),s=this.checkMatrix(s);for(var a=i.rows,u=i.columns,h=new this(a,u),p=0;p<a;p++)for(var g=0;g<u;g++)h.set(p,g,Math.max(i.get(p,g),s.get(p,g)));return h}},{key:"checkMatrix",value:function(i){return n.isMatrix(i)?i:new qr(i)}},{key:"isMatrix",value:function(i){return i!=null&&i.klass==="Matrix"}}]),n}();ta.prototype.klass="Matrix",typeof Symbol<"u"&&(ta.prototype[Symbol.for("nodejs.util.inspect.custom")]=ox);function Fb(n,r){return n-r}function bx(n){return n.every(function(r){return typeof r=="number"})}ta.random=ta.rand,ta.randomInt=ta.randInt,ta.diagonal=ta.diag,ta.prototype.diagonal=ta.prototype.diag,ta.identity=ta.eye,ta.prototype.negate=ta.prototype.neg,ta.prototype.tensorProduct=ta.prototype.kroneckerProduct;var qr=function(n){Mm()(i,n);var r=Pb()(i);function i(s,a){var u;if(Wp()(this,i),u=r.call(this),i.isMatrix(s))return So()(u,s.clone());if(Number.isInteger(s)&&s>=0)if(u.data=[],Number.isInteger(a)&&a>=0)for(var h=0;h<s;h++)u.data.push(new Float64Array(a));else throw new TypeError("nColumns must be a positive integer");else if(Cl(s)){var p=s;if(s=p.length,a=s?p[0].length:0,typeof a!="number")throw new TypeError("Data must be a 2D array with at least one element");u.data=[];for(var g=0;g<s;g++){if(p[g].length!==a)throw new RangeError("Inconsistent array dimensions");if(!bx(p[g]))throw new TypeError("Input data contains non-numeric values");u.data.push(Float64Array.from(p[g]))}}else throw new TypeError("First argument must be a positive number or an array");return u.rows=s,u.columns=a,u}return Z0()(i,[{key:"set",value:function(a,u,h){return this.data[a][u]=h,this}},{key:"get",value:function(a,u){return this.data[a][u]}},{key:"removeRow",value:function(a){return $l(this,a),this.data.splice(a,1),this.rows-=1,this}},{key:"addRow",value:function(a,u){return u===void 0&&(u=a,a=this.rows),$l(this,a,!0),u=Float64Array.from(Is(this,u)),this.data.splice(a,0,u),this.rows+=1,this}},{key:"removeColumn",value:function(a){mu(this,a);for(var u=0;u<this.rows;u++){for(var h=new Float64Array(this.columns-1),p=0;p<a;p++)h[p]=this.data[u][p];for(var g=a+1;g<this.columns;g++)h[g-1]=this.data[u][g];this.data[u]=h}return this.columns-=1,this}},{key:"addColumn",value:function(a,u){typeof u>"u"&&(u=a,a=this.columns),mu(this,a,!0),u=_a(this,u);for(var h=0;h<this.rows;h++){for(var p=new Float64Array(this.columns+1),g=0;g<a;g++)p[g]=this.data[h][g];for(p[g++]=u[h];g<this.columns+1;g++)p[g]=this.data[h][g-1];this.data[h]=p}return this.columns+=1,this}}]),i}(ta);Dm(ta,qr);var xx=function(n){Mm()(i,n);var r=Pb()(i);function i(s){var a;return Wp()(this,i),a=r.call(this),a.data=s,a.rows=s.length,a.columns=s[0].length,a}return Z0()(i,[{key:"set",value:function(a,u,h){return this.data[a][u]=h,this}},{key:"get",value:function(a,u){return this.data[a][u]}}]),i}(ta);function Zp(n,r){var i=0;return Math.abs(n)>Math.abs(r)?(i=r/n,Math.abs(n)*Math.sqrt(1+i*i)):r!==0?(i=n/r,Math.abs(r)*Math.sqrt(1+i*i)):0}var Zh=function(){function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Wp()(this,n),r=xx.checkMatrix(r),r.isEmpty())throw new Error("Matrix must be non-empty");var s=r.rows,a=r.columns,u=i.computeLeftSingularVectors,h=u===void 0?!0:u,p=i.computeRightSingularVectors,g=p===void 0?!0:p,y=i.autoTranspose,x=y===void 0?!1:y,E=Boolean(h),T=Boolean(g),O=!1,N;if(s<a)if(!x)N=r.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{N=r.transpose(),s=N.rows,a=N.columns,O=!0;var k=E;E=T,T=k}else N=r.clone();for(var B=Math.min(s,a),$=Math.min(s+1,a),X=new Float64Array($),ne=new qr(s,B),be=new qr(a,a),me=new Float64Array(a),je=new Float64Array(s),it=new Float64Array($),ct=0;ct<$;ct++)it[ct]=ct;for(var Zt=Math.min(s-1,a),At=Math.max(0,Math.min(a-2,s)),Yt=Math.max(Zt,At),st=0;st<Yt;st++){if(st<Zt){X[st]=0;for(var Bn=st;Bn<s;Bn++)X[st]=Zp(X[st],N.get(Bn,st));if(X[st]!==0){N.get(st,st)<0&&(X[st]=-X[st]);for(var kn=st;kn<s;kn++)N.set(kn,st,N.get(kn,st)/X[st]);N.set(st,st,N.get(st,st)+1)}X[st]=-X[st]}for(var Jn=st+1;Jn<a;Jn++){if(st<Zt&&X[st]!==0){for(var Li=0,Gi=st;Gi<s;Gi++)Li+=N.get(Gi,st)*N.get(Gi,Jn);Li=-Li/N.get(st,st);for(var Xr=st;Xr<s;Xr++)N.set(Xr,Jn,N.get(Xr,Jn)+Li*N.get(Xr,st))}me[Jn]=N.get(st,Jn)}if(E&&st<Zt)for(var Ho=st;Ho<s;Ho++)ne.set(Ho,st,N.get(Ho,st));if(st<At){me[st]=0;for(var na=st+1;na<a;na++)me[st]=Zp(me[st],me[na]);if(me[st]!==0){me[st+1]<0&&(me[st]=0-me[st]);for(var pi=st+1;pi<a;pi++)me[pi]/=me[st];me[st+1]+=1}if(me[st]=-me[st],st+1<s&&me[st]!==0){for(var ra=st+1;ra<s;ra++)je[ra]=0;for(var ja=st+1;ja<s;ja++)for(var In=st+1;In<a;In++)je[ja]+=me[In]*N.get(ja,In);for(var yr=st+1;yr<a;yr++)for(var Fi=-me[yr]/me[st+1],Yi=st+1;Yi<s;Yi++)N.set(Yi,yr,N.get(Yi,yr)+Fi*je[Yi])}if(T)for(var mo=st+1;mo<a;mo++)be.set(mo,st,me[mo])}}var Zr=Math.min(a,s+1);if(Zt<a&&(X[Zt]=N.get(Zt,Zt)),s<Zr&&(X[Zr-1]=0),At+1<Zr&&(me[At]=N.get(At,Zr-1)),me[Zr-1]=0,E){for(var ia=Zt;ia<B;ia++){for(var Gc=0;Gc<s;Gc++)ne.set(Gc,ia,0);ne.set(ia,ia,1)}for(var $o=Zt-1;$o>=0;$o--)if(X[$o]!==0){for(var ff=$o+1;ff<B;ff++){for(var pf=0,Wv=$o;Wv<s;Wv++)pf+=ne.get(Wv,$o)*ne.get(Wv,ff);pf=-pf/ne.get($o,$o);for(var E0=$o;E0<s;E0++)ne.set(E0,ff,ne.get(E0,ff)+pf*ne.get(E0,$o))}for(var Xv=$o;Xv<s;Xv++)ne.set(Xv,$o,-ne.get(Xv,$o));ne.set($o,$o,1+ne.get($o,$o));for(var Iw=0;Iw<$o-1;Iw++)ne.set(Iw,$o,0)}else{for(var jy=0;jy<s;jy++)ne.set(jy,$o,0);ne.set($o,$o,1)}}if(T)for(var ql=a-1;ql>=0;ql--){if(ql<At&&me[ql]!==0)for(var Hy=ql+1;Hy<a;Hy++){for(var u1=0,Zv=ql+1;Zv<a;Zv++)u1+=be.get(Zv,ql)*be.get(Zv,Hy);u1=-u1/be.get(ql+1,ql);for(var Gt=ql+1;Gt<a;Gt++)be.set(Gt,Hy,be.get(Gt,Hy)+u1*be.get(Gt,ql))}for(var bn=0;bn<a;bn++)be.set(bn,ql,0);be.set(ql,ql,1)}for(var jn=Zr-1,ar=0,jr=Number.EPSILON;Zr>0;){var pr=void 0,wi=void 0;for(pr=Zr-2;pr>=-1&&pr!==-1;pr--){var eo=Number.MIN_VALUE+jr*Math.abs(X[pr]+Math.abs(X[pr+1]));if(Math.abs(me[pr])<=eo||Number.isNaN(me[pr])){me[pr]=0;break}}if(pr===Zr-2)wi=4;else{var Mr=void 0;for(Mr=Zr-1;Mr>=pr&&Mr!==pr;Mr--){var Oo=(Mr!==Zr?Math.abs(me[Mr]):0)+(Mr!==pr+1?Math.abs(me[Mr-1]):0);if(Math.abs(X[Mr])<=jr*Oo){X[Mr]=0;break}}Mr===pr?wi=3:Mr===Zr-1?wi=1:(wi=2,pr=Mr)}switch(pr++,wi){case 1:{var yo=me[Zr-2];me[Zr-2]=0;for(var cc=Zr-2;cc>=pr;cc--){var Yv=Zp(X[cc],yo),tP=X[cc]/Yv,nP=yo/Yv;if(X[cc]=Yv,cc!==pr&&(yo=-nP*me[cc-1],me[cc-1]=tP*me[cc-1]),T)for(var Kv=0;Kv<a;Kv++)Yv=tP*be.get(Kv,cc)+nP*be.get(Kv,Zr-1),be.set(Kv,Zr-1,-nP*be.get(Kv,cc)+tP*be.get(Kv,Zr-1)),be.set(Kv,cc,Yv)}break}case 2:{var rP=me[pr-1];me[pr-1]=0;for(var fp=pr;fp<Zr;fp++){var Rw=Zp(X[fp],rP),iP=X[fp]/Rw,oP=rP/Rw;if(X[fp]=Rw,rP=-oP*me[fp],me[fp]=iP*me[fp],E)for(var qv=0;qv<s;qv++)Rw=iP*ne.get(qv,fp)+oP*ne.get(qv,pr-1),ne.set(qv,pr-1,-oP*ne.get(qv,fp)+iP*ne.get(qv,pr-1)),ne.set(qv,fp,Rw)}break}case 3:{var kw=Math.max(Math.abs(X[Zr-1]),Math.abs(X[Zr-2]),Math.abs(me[Zr-2]),Math.abs(X[pr]),Math.abs(me[pr])),d1=X[Zr-1]/kw,tN=X[Zr-2]/kw,iT=me[Zr-2]/kw,sP=X[pr]/kw,Rk=me[pr]/kw,$y=((tN+d1)*(tN-d1)+iT*iT)/2,oT=d1*iT*(d1*iT),Lw=0;($y!==0||oT!==0)&&($y<0?Lw=0-Math.sqrt($y*$y+oT):Lw=Math.sqrt($y*$y+oT),Lw=oT/($y+Lw));for(var Wy=(sP+d1)*(sP-d1)+Lw,h1=sP*Rk,Po=pr;Po<Zr-1;Po++){var Mu=Zp(Wy,h1);Mu===0&&(Mu=Number.MIN_VALUE);var pp=Wy/Mu,gp=h1/Mu;if(Po!==pr&&(me[Po-1]=Mu),Wy=pp*X[Po]+gp*me[Po],me[Po]=pp*me[Po]-gp*X[Po],h1=gp*X[Po+1],X[Po+1]=pp*X[Po+1],T)for(var Jv=0;Jv<a;Jv++)Mu=pp*be.get(Jv,Po)+gp*be.get(Jv,Po+1),be.set(Jv,Po+1,-gp*be.get(Jv,Po)+pp*be.get(Jv,Po+1)),be.set(Jv,Po,Mu);if(Mu=Zp(Wy,h1),Mu===0&&(Mu=Number.MIN_VALUE),pp=Wy/Mu,gp=h1/Mu,X[Po]=Mu,Wy=pp*me[Po]+gp*X[Po+1],X[Po+1]=-gp*me[Po]+pp*X[Po+1],h1=gp*me[Po+1],me[Po+1]=pp*me[Po+1],E&&Po<s-1)for(var Qv=0;Qv<s;Qv++)Mu=pp*ne.get(Qv,Po)+gp*ne.get(Qv,Po+1),ne.set(Qv,Po+1,-gp*ne.get(Qv,Po)+pp*ne.get(Qv,Po+1)),ne.set(Qv,Po,Mu)}me[Zr-2]=Wy,ar=ar+1;break}case 4:{if(X[pr]<=0&&(X[pr]=X[pr]<0?-X[pr]:0,T))for(var sT=0;sT<=jn;sT++)be.set(sT,pr,-be.get(sT,pr));for(;pr<jn&&!(X[pr]>=X[pr+1]);){var Gw=X[pr];if(X[pr]=X[pr+1],X[pr+1]=Gw,T&&pr<a-1)for(var f1=0;f1<a;f1++)Gw=be.get(f1,pr+1),be.set(f1,pr+1,be.get(f1,pr)),be.set(f1,pr,Gw);if(E&&pr<s-1)for(var p1=0;p1<s;p1++)Gw=ne.get(p1,pr+1),ne.set(p1,pr+1,ne.get(p1,pr)),ne.set(p1,pr,Gw);pr++}ar=0,Zr--;break}}}if(O){var kk=be;be=ne,ne=kk}this.m=s,this.n=a,this.s=X,this.U=ne,this.V=be}return Z0()(n,[{key:"solve",value:function(i){for(var s=i,a=this.threshold,u=this.s.length,h=qr.zeros(u,u),p=0;p<u;p++)Math.abs(this.s[p])<=a?h.set(p,p,0):h.set(p,p,1/this.s[p]);for(var g=this.U,y=this.rightSingularVectors,x=y.mmul(h),E=y.rows,T=g.rows,O=qr.zeros(E,T),N=0;N<E;N++)for(var k=0;k<T;k++){for(var B=0,$=0;$<u;$++)B+=x.get(N,$)*g.get(k,$);O.set(N,k,B)}return O.mmul(s)}},{key:"solveForDiagonal",value:function(i){return this.solve(qr.diag(i))}},{key:"inverse",value:function(){for(var i=this.V,s=this.threshold,a=i.rows,u=i.columns,h=new qr(a,this.s.length),p=0;p<a;p++)for(var g=0;g<u;g++)Math.abs(this.s[g])>s&&h.set(p,g,i.get(p,g)/this.s[g]);for(var y=this.U,x=y.rows,E=y.columns,T=new qr(a,x),O=0;O<a;O++)for(var N=0;N<x;N++){for(var k=0,B=0;B<E;B++)k+=h.get(O,B)*y.get(N,B);T.set(O,N,k)}return T}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var i=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,s=0,a=this.s,u=0,h=a.length;u<h;u++)a[u]>i&&s++;return s}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return qr.diag(this.s)}}]),n}();class Bb{constructor(r){this.distances=r.distances,this.dimension=r.dimension||2,this.linkDistance=r.linkDistance}layout(){const r=this,{dimension:i,distances:s,linkDistance:a}=r;try{const u=qr.mul(qr.pow(s,2),-.5),h=u.mean("row"),p=u.mean("column"),g=u.mean();u.add(g).subRowVector(h).subColumnVector(p);const y=new Zh(u),x=qr.sqrt(y.diagonalMatrix).diagonal();return y.leftSingularVectors.toJSON().map(E=>qr.mul([E],[x]).toJSON()[0].splice(0,i))}catch{const h=[];for(let p=0;p<s.length;p++){const g=Math.random()*a,y=Math.random()*a;h.push([g,y])}return h}}}const Cx=800;class wx{constructor(r){this.disp=[],this.positions=r.positions,this.adjMatrix=r.adjMatrix,this.focusID=r.focusID,this.radii=r.radii,this.iterations=r.iterations||10,this.height=r.height||10,this.width=r.width||10,this.speed=r.speed||100,this.gravity=r.gravity||10,this.nodeSizeFunc=r.nodeSizeFunc,this.k=r.k||5,this.strictRadial=r.strictRadial,this.nodes=r.nodes}layout(){const r=this,i=r.positions,s=[],a=r.iterations,u=r.width/10;r.maxDisplace=u,r.disp=s;for(let h=0;h<a;h++)i.forEach((p,g)=>{s[g]={x:0,y:0}}),r.getRepulsion(),r.updatePositions();return i}getRepulsion(){const r=this,i=r.positions,s=r.nodes,a=r.disp,u=r.k,h=r.radii||[];i.forEach((p,g)=>{a[g]={x:0,y:0},i.forEach((y,x)=>{if(g===x||h[g]!==h[x])return;let E=p[0]-y[0],T=p[1]-y[1],O=Math.sqrt(E*E+T*T);if(O===0){O=1;const N=g>x?1:-1;E=.01*N,T=.01*N}if(O<r.nodeSizeFunc(s[g])/2+r.nodeSizeFunc(s[x])/2){const N=u*u/O;a[g].x+=E/O*N,a[g].y+=T/O*N}})})}updatePositions(){const r=this,i=r.positions,s=r.disp,a=r.speed,u=r.strictRadial,h=r.focusID,p=r.maxDisplace||r.width/10;u&&s.forEach((y,x)=>{const E=i[x][0]-i[h][0],T=i[x][1]-i[h][1],O=Math.sqrt(E*E+T*T);let N=T/O,k=-E/O;const B=Math.sqrt(y.x*y.x+y.y*y.y);let $=Math.acos((N*y.x+k*y.y)/B);$>Math.PI/2&&($-=Math.PI/2,N*=-1,k*=-1);const X=Math.cos($)*B;y.x=N*X,y.y=k*X});const g=r.radii;i.forEach((y,x)=>{if(x===h)return;const E=Math.sqrt(s[x].x*s[x].x+s[x].y*s[x].y);if(E>0&&x!==h){const T=Math.min(p*(a/Cx),E);if(y[0]+=s[x].x/E*T,y[1]+=s[x].y/E*T,u){let O=y[0]-i[h][0],N=y[1]-i[h][1];const k=Math.sqrt(O*O+N*N);O=O/k*g[x],N=N/k*g[x],y[0]=i[h][0]+O,y[1]=i[h][1]+N}}})}}function Rm(n){const r=n.length,i=n[0].length,s=[];for(let a=0;a<r;a++){const u=[];for(let h=0;h<i;h++)n[a][h]!==0?u.push(1/(n[a][h]*n[a][h])):u.push(0);s.push(u)}return s}function Ex(n,r){let i=-1;return n.forEach((s,a)=>{s.id===r&&(i=a)}),i}function yu(n,r){return Math.sqrt((n[0]-r[0])*(n[0]-r[0])+(n[1]-r[1])*(n[1]-r[1]))}class Sx extends ds{constructor(r){super(),this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(r)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const r=this,i=r.nodes,s=r.edges||[];if(!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const a=r.center;if(i.length===1){i[0].x=a[0],i[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd();return}const u=r.linkDistance;let h=null;if(tc(r.focusNode)){let Yt=!1;for(let st=0;st<i.length;st++)i[st].id===r.focusNode&&(h=i[st],r.focusNode=h,Yt=!0,st=i.length);Yt||(h=null)}else h=r.focusNode;h||(h=i[0],r.focusNode=h);const p=Ex(i,h.id);r.focusIndex=p;const g=pd({nodes:i,edges:s},!1),y=th(g),x=r.maxToFocus(y,p);r.handleInfinity(y,p,x+1),r.distances=y;const E=y[p],T=r.width||500,O=r.height||500;let N=T-a[0]>a[0]?a[0]:T-a[0],k=O-a[1]>a[1]?a[1]:O-a[1];N===0&&(N=T/2),k===0&&(k=O/2);const B=k>N?N:k,$=Math.max(...E),X=[];E.forEach((Yt,st)=>{r.unitRadius||(r.unitRadius=B/$),X[st]=Yt*r.unitRadius}),r.radii=X;const ne=r.eIdealDisMatrix();r.eIdealDistances=ne;const be=Rm(ne);r.weights=be;let je=new Bb({linkDistance:u,distances:ne}).layout();je.forEach(Yt=>{fd(Yt[0])&&(Yt[0]=Math.random()*u),fd(Yt[1])&&(Yt[1]=Math.random()*u)}),r.positions=je,je.forEach((Yt,st)=>{i[st].x=Yt[0]+a[0],i[st].y=Yt[1]+a[1]}),je.forEach(Yt=>{Yt[0]-=je[p][0],Yt[1]-=je[p][1]}),r.run();const it=r.preventOverlap,ct=r.nodeSize;let Zt;const At=r.strictRadial;if(it){const Yt=r.nodeSpacing;let st;Wn(Yt)?st=()=>Yt:du(Yt)?st=Yt:st=()=>0,ct?Ps(ct)?Zt=Jn=>(ct[0]>ct[1]?ct[0]:ct[1])+st(Jn):Zt=Jn=>ct+st(Jn):Zt=Jn=>Jn.size?Ps(Jn.size)?(Jn.size[0]>Jn.size[1]?Jn.size[0]:Jn.size[1])+st(Jn):vc(Jn.size)?(Jn.size.width>Jn.size.height?Jn.size.width:Jn.size.height)+st(Jn):Jn.size+st(Jn):10+st(Jn);const Bn={nodes:i,nodeSizeFunc:Zt,adjMatrix:g,positions:je,radii:X,height:O,width:T,strictRadial:At,focusID:p,iterations:r.maxPreventOverlapIteration||200,k:je.length/4.5};je=new wx(Bn).layout()}return je.forEach((Yt,st)=>{i[st].x=Yt[0]+a[0],i[st].y=Yt[1]+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s}}run(){const r=this,i=r.maxIteration,s=r.positions||[],a=r.weights||[],u=r.eIdealDistances||[],h=r.radii||[];for(let p=0;p<=i;p++){const g=p/i;r.oneIteration(g,s,h,u,a)}}oneIteration(r,i,s,a,u){const h=this,p=1-r,g=h.focusIndex;i.forEach((y,x)=>{const E=yu(y,[0,0]),T=E===0?0:1/E;if(x===g)return;let O=0,N=0,k=0;i.forEach(($,X)=>{if(x===X)return;const ne=yu(y,$),be=ne===0?0:1/ne,me=a[X][x];k+=u[x][X],O+=u[x][X]*($[0]+me*(y[0]-$[0])*be),N+=u[x][X]*($[1]+me*(y[1]-$[1])*be)});const B=s[x]===0?0:1/s[x];k*=p,k+=r*B*B,O*=p,O+=r*B*y[0]*T,y[0]=O/k,N*=p,N+=r*B*y[1]*T,y[1]=N/k})}eIdealDisMatrix(){const r=this,i=r.nodes;if(!i)return[];const s=r.distances,a=r.linkDistance,u=r.radii||[],h=r.unitRadius||50,p=[];return s&&s.forEach((g,y)=>{const x=[];g.forEach((E,T)=>{if(y===T)x.push(0);else if(u[y]===u[T])if(r.sortBy==="data")x.push(E*(Math.abs(y-T)*r.sortStrength)/(u[y]/h));else if(r.sortBy){let O=i[y][r.sortBy]||0,N=i[T][r.sortBy]||0;tc(O)&&(O=O.charCodeAt(0)),tc(N)&&(N=N.charCodeAt(0)),x.push(E*(Math.abs(O-N)*r.sortStrength)/(u[y]/h))}else x.push(E*a/(u[y]/h));else{const O=(a+h)/2;x.push(E*O)}}),p.push(x)}),p}handleInfinity(r,i,s){const a=r.length;for(let u=0;u<a;u++)if(r[i][u]===1/0){r[i][u]=s,r[u][i]=s;for(let h=0;h<a;h++)r[u][h]!==1/0&&r[i][h]===1/0&&(r[i][h]=s+r[u][h],r[h][i]=s+r[u][h])}for(let u=0;u<a;u++)if(u!==i){for(let h=0;h<a;h++)if(r[u][h]===1/0){let p=Math.abs(r[i][u]-r[i][h]);p=p===0?1:p,r[u][h]=p}}}maxToFocus(r,i){let s=0;for(let a=0;a<r[i].length;a++)r[i][a]!==1/0&&(s=r[i][a]>s?r[i][a]:s);return s}getType(){return"radial"}}class _x extends ds{constructor(r){super(),this.nodeSize=30,this.minNodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){const r=this,i=r.nodes,s=r.edges,a=i.length;if(a===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const u=r.center;if(a===1){i[0].x=u[0],i[0].y=u[1],r.onLayoutEnd&&r.onLayoutEnd();return}const h=[];let p;Ps(r.nodeSize)?p=Math.max(r.nodeSize[0],r.nodeSize[1]):p=r.nodeSize,i.forEach(N=>{h.push(N);let k=p;Ps(N.size)?k=Math.max(N.size[0],N.size[1]):Wn(N.size)?k=N.size:vc(N.size)&&(k=Math.max(N.size.width,N.size.height)),p=Math.max(p,k)}),r.clockwise=r.counterclockwise!==void 0?!r.counterclockwise:r.clockwise;const g={},y={};if(h.forEach((N,k)=>{g[N.id]=N,y[N.id]=k}),(r.sortBy==="degree"||!tc(r.sortBy)||h[0][r.sortBy]===void 0)&&(r.sortBy="degree",!Wn(i[0].degree))){const N=Ds(i.length,y,s);h.forEach((k,B)=>{k.degree=N[B]})}h.sort((N,k)=>k[r.sortBy]-N[r.sortBy]),r.maxValueNode=h[0],r.maxLevelDiff=r.maxLevelDiff||r.maxValueNode[r.sortBy]/4;const x=[[]];let E=x[0];h.forEach(N=>{if(E.length>0){const k=Math.abs(E[0][r.sortBy]-N[r.sortBy]);r.maxLevelDiff&&k>=r.maxLevelDiff&&(E=[],x.push(E))}E.push(N)});let T=p+r.minNodeSpacing;if(!r.preventOverlap){const N=x.length>0&&x[0].length>1,B=(Math.min(r.width,r.height)/2-T)/(x.length+(N?1:0));T=Math.min(T,B)}let O=0;if(x.forEach(N=>{let k=r.sweep;k===void 0&&(k=2*Math.PI-2*Math.PI/N.length);const B=N.dTheta=k/Math.max(1,N.length-1);if(N.length>1&&r.preventOverlap){const $=Math.cos(B)-Math.cos(0),X=Math.sin(B)-Math.sin(0),ne=Math.sqrt(T*T/($*$+X*X));O=Math.max(ne,O)}N.r=O,O+=T}),r.equidistant){let N=0,k=0;for(let B=0;B<x.length;B++){const X=x[B].r-k;N=Math.max(N,X)}k=0,x.forEach((B,$)=>{$===0&&(k=B.r),B.r=k,k+=N})}return x.forEach(N=>{const k=N.dTheta,B=N.r;N.forEach(($,X)=>{const ne=r.startAngle+(r.clockwise?1:-1)*k*X;$.x=u[0]+B*Math.cos(ne),$.y=u[1]+B*Math.sin(ne)})}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s}}getType(){return"concentric"}}class Ax extends ds{constructor(r){super(),this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const r=this,{nodes:i,edges:s=[]}=r,a=r.center;if(!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(i.length===1){i[0].x=a[0],i[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd();return}const u=r.linkDistance,h=pd({nodes:i,edges:s},!1),p=th(h);r.handleInfinity(p);const g=Vf(p,u);r.scaledDistances=g;const y=r.runMDS();return r.positions=y,y.forEach((x,E)=>{i[E].x=x[0]+a[0],i[E].y=x[1]+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s}}runMDS(){const r=this,i=2,s=r.scaledDistances,a=qr.mul(qr.pow(s,2),-.5),u=a.mean("row"),h=a.mean("column"),p=a.mean();a.add(p).subRowVector(u).subColumnVector(h);const g=new Zh(a),y=qr.sqrt(g.diagonalMatrix).diagonal();return g.leftSingularVectors.toJSON().map(x=>qr.mul([x],[y]).toJSON()[0].splice(0,i))}handleInfinity(r){let i=-999999;r.forEach(s=>{s.forEach(a=>{a!==1/0&&i<a&&(i=a)})}),r.forEach((s,a)=>{s.forEach((u,h)=>{u===1/0&&(r[a][h]=i)})})}getType(){return"mds"}}const Tx=800;class Mx extends ds{constructor(r){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){var r,i;const s=this,a=s.nodes;if(s.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(s.timeInterval),!a||a.length===0){(r=s.onLayoutEnd)===null||r===void 0||r.call(s);return}!s.width&&typeof window<"u"&&(s.width=window.innerWidth),!s.height&&typeof window<"u"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);const u=s.center;if(a.length===1){a[0].x=u[0],a[0].y=u[1],(i=s.onLayoutEnd)===null||i===void 0||i.call(s);return}const h={},p={};return a.forEach((g,y)=>{Wn(g.x)||(g.x=Math.random()*this.width),Wn(g.y)||(g.y=Math.random()*this.height),h[g.id]=g,p[g.id]=y}),s.nodeMap=h,s.nodeIdxMap=p,s.run()}run(){var r;const i=this,s=i.nodes;if(!s)return;const{edges:a,maxIteration:u,workerEnabled:h,clustering:p}=i,g={};if(p&&s.forEach(y=>{g[y.cluster]===void 0&&(g[y.cluster]={name:y.cluster,cx:0,cy:0,count:0})}),h){for(let y=0;y<u;y++)i.runOneStep(g);(r=i.onLayoutEnd)===null||r===void 0||r.call(i)}else{if(typeof window>"u")return;let y=0;this.timeInterval=window.setInterval(()=>{var x;i.runOneStep(g),y++,y>=u&&((x=i.onLayoutEnd)===null||x===void 0||x.call(i),window.clearInterval(i.timeInterval))},0)}return{nodes:s,edges:a}}runOneStep(r){var i;const s=this,a=s.nodes;if(!a)return;const{edges:u,center:h,gravity:p,speed:g,clustering:y}=s,x=s.height*s.width,E=Math.sqrt(x)/10,T=x/(a.length+1),O=Math.sqrt(T),N=[];if(a.forEach((k,B)=>{N[B]={x:0,y:0}}),s.applyCalculate(a,u,N,O,T),y){for(const B in r)r[B].cx=0,r[B].cy=0,r[B].count=0;a.forEach(B=>{const $=r[B.cluster];Wn(B.x)&&($.cx+=B.x),Wn(B.y)&&($.cy+=B.y),$.count++});for(const B in r)r[B].cx/=r[B].count,r[B].cy/=r[B].count;const k=s.clusterGravity||p;a.forEach((B,$)=>{if(!Wn(B.x)||!Wn(B.y))return;const X=r[B.cluster],ne=Math.sqrt((B.x-X.cx)*(B.x-X.cx)+(B.y-X.cy)*(B.y-X.cy)),be=O*k;N[$].x-=be*(B.x-X.cx)/ne,N[$].y-=be*(B.y-X.cy)/ne})}a.forEach((k,B)=>{if(!Wn(k.x)||!Wn(k.y))return;const $=.01*O*p;N[B].x-=$*(k.x-h[0]),N[B].y-=$*(k.y-h[1])}),a.forEach((k,B)=>{if(Wn(k.fx)&&Wn(k.fy)){k.x=k.fx,k.y=k.fy;return}if(!Wn(k.x)||!Wn(k.y))return;const $=Math.sqrt(N[B].x*N[B].x+N[B].y*N[B].y);if($>0){const X=Math.min(E*(g/Tx),$);k.x+=N[B].x/$*X,k.y+=N[B].y/$*X}}),(i=s.tick)===null||i===void 0||i.call(s)}applyCalculate(r,i,s,a,u){const h=this;h.calRepulsive(r,s,u),i&&h.calAttractive(i,s,a)}calRepulsive(r,i,s){r.forEach((a,u)=>{i[u]={x:0,y:0},r.forEach((h,p)=>{if(u===p||!Wn(a.x)||!Wn(h.x)||!Wn(a.y)||!Wn(h.y))return;let g=a.x-h.x,y=a.y-h.y,x=g*g+y*y;if(x===0){x=1;const T=u>p?1:-1;g=.01*T,y=.01*T}const E=s/x;i[u].x+=g*E,i[u].y+=y*E})})}calAttractive(r,i,s){r.forEach(a=>{const u=xi(a,"source"),h=xi(a,"target");if(!u||!h)return;const p=this.nodeIdxMap[u],g=this.nodeIdxMap[h];if(p===g)return;const y=this.nodeMap[u],x=this.nodeMap[h];if(!Wn(x.x)||!Wn(y.x)||!Wn(x.y)||!Wn(y.y))return;const E=x.x-y.x,T=x.y-y.y,O=Math.sqrt(E*E+T*T),N=O*O/s;i[g].x-=E/O*N,i[g].y-=T/O*N,i[p].x+=E/O*N,i[p].y+=T/O*N})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)}destroy(){const r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0}getType(){return"fruchterman"}}function Sr(n,r,i,s){!i||Object.defineProperty(n,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}var hr=M(15671),wr=M(43144);function _r(n,r,i,s,a){var u={};return Object.keys(s).forEach(function(h){u[h]=s[h]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=i.slice().reverse().reduce(function(h,p){return p(n,r,h)||h},u),a&&u.initializer!==void 0&&(u.value=u.initializer?u.initializer.call(a):void 0,u.initializer=void 0),u.initializer===void 0&&(Object.defineProperty(n,r,u),u=null),u}var Ox=M(64687),cr=M.n(Ox),Ji=M(15861),Px=-1,km=1;function bu(){return km++}var Yh=function n(r){(0,hr.Z)(this,n)},Yf=function(){function n(r){(0,hr.Z)(this,n),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=r}return(0,wr.Z)(n,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(i){return this.lookup[i]>-1}},{key:"create",value:function(i,s){this.lookup[i]=this.components.length;var a=new this.clazz(s||{});return this.components.push(a),this.entities.push(i),a}},{key:"remove",value:function(i){var s=this.lookup[i];s>-1&&s<this.components.length-1&&(this.components[s]=this.components[this.components.length-1],this.entities[s]=this.entities[this.entities.length-1],this.lookup[this.entities[s]]=s),this.components.pop(),this.entities.pop(),delete this.lookup[i]}},{key:"removeKeepSorted",value:function(i){var s=this.lookup[i];if(s>-1){var a=this.entities[s];if(s<this.components.length-1){for(var u=s+1;u<this.components.length;++u)this.components[u-1]=this.components[u];for(var h=s+1;h<this.entities.length;++h)this.entities[h-1]=this.entities[h],this.lookup[this.entities[h-1]]=h-1}this.components.pop(),this.entities.pop(),delete this.lookup[a]}}},{key:"moveItem",value:function(i,s){if(i!==s){for(var a=this.components[i],u=this.entities[i],h=i<s?1:-1,p=i;p!==s;p+=h){var g=p+h;this.components[p]=this.components[g],this.entities[p]=this.entities[g],this.lookup[this.entities[p]]=p}this.components[s]=a,this.entities[s]=u,this.lookup[u]=s}}},{key:"getEntity",value:function(i){return this.entities[i]}},{key:"getComponent",value:function(i){return this.components[i]}},{key:"getComponentByEntity",value:function(i){var s=this.lookup[i];return s>-1?this.components[s]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(i){for(var s=0,a=Object.keys(this.lookup);s<a.length;s++){var u=a[s],h=Number(u);if(this.lookup[h]===i)return h}return Px}},{key:"find",value:function(i){for(var s=0;s<this.getCount();s++){var a=this.getComponent(s);if(i(a,s))return a}return null}},{key:"findIndex",value:function(i){for(var s=0;s<this.getCount();s++){var a=this.getComponent(s);if(i(a,s))return s}return-1}},{key:"forEach",value:function(i){for(var s=0,a=Object.keys(this.lookup);s<a.length;s++){var u=a[s],h=Number(u),p=this.lookup[h];i(h,this.getComponent(p))}}},{key:"forEachAsync",value:function(){var r=(0,Ji.Z)(cr().mark(function s(a){var u,h,p,g,y;return cr().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:u=0,h=Object.keys(this.lookup);case 1:if(!(u<h.length)){E.next=10;break}return p=h[u],g=Number(p),y=this.lookup[g],E.next=7,a(g,this.getComponent(y));case 7:u++,E.next=1;break;case 10:case"end":return E.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"map",value:function(i){for(var s=[],a=0,u=Object.keys(this.lookup);a<u.length;a++){var h=u[a],p=Number(h),g=this.lookup[p];s.push(i(p,this.getComponent(g)))}return s}}]),n}(),xu=M(29439),sn={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Lm=function n(){(0,hr.Z)(this,n),this.index=void 0},Dx=function n(){(0,hr.Z)(this,n),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},zb=function(){function n(){(0,hr.Z)(this,n),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return(0,wr.Z)(n,[{key:"read",value:function(i){return this.reads.find(function(s){return s.index===i.index})||this.reads.push(i),i}},{key:"sample",value:function(i){return this.read(i),i}},{key:"write",value:function(i,s){var a=this.writes.find(function(g){return g.index===s.index});if(a)return s;var u=i.getResourceNode(s);u.resource.version++,u.resource.imported&&(this.hasSideEffect=!0);var h=i.createResourceNode(u.resource),p=i.getResourceNode(h);return p.writer=this,this.writes.push(h),h}}]),n}(),za=M(79340),To=M(82963),so=M(61120),Nx=function n(){(0,hr.Z)(this,n),this.first=void 0,this.last=void 0};function Ub(n){var r=Ix();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function Ix(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var Vb=function(n){(0,za.Z)(i,n);var r=Ub(i);function i(){var s;(0,hr.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),s.version=0,s.refs=0,s.name=void 0,s.imported=void 0,s.priority=void 0,s.discardStart=!0,s.discardEnd=!1,s.descriptor=void 0,s.resource=void 0,s}return(0,wr.Z)(i,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),i}(Nx),Gm=function n(){(0,hr.Z)(this,n),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},jb,Q0,Hb,zg,ev,$b;function Kc(n,r){var i;if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=Wb(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function Wb(n,r){if(!!n){if(typeof n=="string")return Fm(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Fm(n,r)}}function Fm(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var Rx=(jb=(0,z.b2)(),Q0=(0,z.f3)(sn.RenderEngine),jb(Hb=(zg=($b=function(){function n(){(0,hr.Z)(this,n),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],Sr(this,"engine",ev,this)}return(0,wr.Z)(n,[{key:"execute",value:function(){var r=(0,Ji.Z)(cr().mark(function s(a){return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return this.compile(),h.next=3,this.executePassNodes(a);case 3:case"end":return h.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(i){i.tearDown&&i.tearDown()}),this.reset()}},{key:"addPass",value:function(i,s,a,u){var h=new Dx;h.execute=a,u&&(h.tearDown=u),h.name=i;var p=new zb;return p.name=i,this.passNodes.push(p),this.frameGraphPasses.push(h),s(this,p,h),h}},{key:"getPass",value:function(i){return this.frameGraphPasses.find(function(s){return s.name===i})}},{key:"compile",value:function(){var i=this,s=Kc(this.passNodes),a;try{for(s.s();!(a=s.n()).done;){var u=a.value;u.refCount=u.writes.length+(u.hasSideEffect?1:0),u.reads.forEach(function(Xr){i.resourceNodes[Xr.index].readerCount++})}}catch(Xr){s.e(Xr)}finally{s.f()}var h=[],p=Kc(this.resourceNodes),g;try{for(p.s();!(g=p.n()).done;){var y=g.value;y.readerCount===0&&h.push(y)}}catch(Xr){p.e(Xr)}finally{p.f()}for(;h.length;){var x=h.pop(),E=x&&x.writer;if(E&&--E.refCount===0){var T=Kc(E.reads),O;try{for(T.s();!(O=T.n()).done;){var N=O.value,k=this.resourceNodes[N.index];--k.readerCount===0&&h.push(k)}}catch(Xr){T.e(Xr)}finally{T.f()}}}this.resourceNodes.forEach(function(Xr){Xr.resource.refs+=Xr.readerCount});var B=Kc(this.passNodes),$;try{for(B.s();!($=B.n()).done;){var X=$.value;if(!!X.refCount){var ne=Kc(X.reads),be;try{for(ne.s();!(be=ne.n()).done;){var me=be.value,je=this.resourceNodes[me.index].resource;je.first=je.first?je.first:X,je.last=X}}catch(Xr){ne.e(Xr)}finally{ne.f()}var it=Kc(X.writes),ct;try{for(it.s();!(ct=it.n()).done;){var Zt=ct.value,At=this.resourceNodes[Zt.index].resource;At.first=At.first?At.first:X,At.last=X}}catch(Xr){it.e(Xr)}finally{it.f()}}}}catch(Xr){B.e(Xr)}finally{B.f()}for(var Yt=0;Yt<2;Yt++){var st=Kc(this.resourceNodes),Bn;try{for(st.s();!(Bn=st.n()).done;){var kn=Bn.value,Jn=kn.resource;if(Jn.priority===Yt&&Jn.refs){var Li=Jn.first,Gi=Jn.last;Li&&Gi&&(Li.devirtualize.push(Jn),Gi.destroy.push(Jn))}}}catch(Xr){st.e(Xr)}finally{st.f()}}}},{key:"executePassNodes",value:function(){var r=(0,Ji.Z)(cr().mark(function s(a){var u,h,p,g,y,x,E,T,O,N,k,B,$,X,ne,be,me;return cr().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:u=Kc(this.passNodes.entries()),it.prev=1,u.s();case 3:if((h=u.n()).done){it.next=18;break}if(p=(0,xu.Z)(h.value,2),g=p[0],y=p[1],!y.refCount){it.next=16;break}x=Kc(y.devirtualize);try{for(x.s();!(E=x.n()).done;)T=E.value,T.preExecuteDevirtualize(this.engine)}catch(ct){x.e(ct)}finally{x.f()}O=Kc(y.destroy);try{for(O.s();!(N=O.n()).done;)k=N.value,k.preExecuteDestroy(this.engine)}catch(ct){O.e(ct)}finally{O.f()}return it.next=12,this.frameGraphPasses[g].execute(this,this.frameGraphPasses[g],a);case 12:B=Kc(y.devirtualize);try{for(B.s();!($=B.n()).done;)X=$.value,X.postExecuteDevirtualize(this.engine)}catch(ct){B.e(ct)}finally{B.f()}ne=Kc(y.destroy);try{for(ne.s();!(be=ne.n()).done;)me=be.value,me.postExecuteDestroy(this.engine)}catch(ct){ne.e(ct)}finally{ne.f()}case 16:it.next=3;break;case 18:it.next=23;break;case 20:it.prev=20,it.t0=it.catch(1),u.e(it.t0);case 23:return it.prev=23,u.f(),it.finish(23);case 26:this.reset();case 27:case"end":return it.stop()}},s,this,[[1,20,23,26]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(i){return this.resourceNodes[i.index]}},{key:"createResourceNode",value:function(i){var s=new Gm;s.resource=i,s.version=i.version,this.resourceNodes.push(s);var a=new Lm;return a.index=this.resourceNodes.length-1,a}},{key:"createTexture",value:function(i,s,a){var u=new Vb;return u.name=s,u.descriptor=a,this.createResourceNode(u)}},{key:"createRenderTarget",value:function(i,s,a){var u=new Vb;return u.name=s,u.descriptor=a,this.createResourceNode(u)}},{key:"present",value:function(i){this.addPass("Present",function(s,a){a.read(i),a.hasSideEffect=!0},(0,Ji.Z)(cr().mark(function s(){return cr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},s)})))}}]),n}(),$b),ev=_r(zg.prototype,"engine",[Q0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zg))||Hb),kt=M(4942),ms=M(97326),Ua=M(49685);function Ug(){var n=new Ua.WT(4);return Ua.WT!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function kx(n){var r=new Ua.WT(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}function Xb(n,r,i,s){var a=new Ua.WT(4);return a[0]=n,a[1]=r,a[2]=i,a[3]=s,a}function Lx(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n}function Gx(n,r,i,s,a){return n[0]=r,n[1]=i,n[2]=s,n[3]=a,n}function Fx(n,r,i){return n[0]=r[0]+i[0],n[1]=r[1]+i[1],n[2]=r[2]+i[2],n[3]=r[3]+i[3],n}function Bm(n,r,i){return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n[2]=r[2]-i[2],n[3]=r[3]-i[3],n}function Hw(n,r,i){return n[0]=r[0]*i[0],n[1]=r[1]*i[1],n[2]=r[2]*i[2],n[3]=r[3]*i[3],n}function $w(n,r,i){return n[0]=r[0]/i[0],n[1]=r[1]/i[1],n[2]=r[2]/i[2],n[3]=r[3]/i[3],n}function Ww(n,r){return n[0]=Math.ceil(r[0]),n[1]=Math.ceil(r[1]),n[2]=Math.ceil(r[2]),n[3]=Math.ceil(r[3]),n}function Xw(n,r){return n[0]=Math.floor(r[0]),n[1]=Math.floor(r[1]),n[2]=Math.floor(r[2]),n[3]=Math.floor(r[3]),n}function Zw(n,r,i){return n[0]=Math.min(r[0],i[0]),n[1]=Math.min(r[1],i[1]),n[2]=Math.min(r[2],i[2]),n[3]=Math.min(r[3],i[3]),n}function Yw(n,r,i){return n[0]=Math.max(r[0],i[0]),n[1]=Math.max(r[1],i[1]),n[2]=Math.max(r[2],i[2]),n[3]=Math.max(r[3],i[3]),n}function Zb(n,r){return n[0]=Math.round(r[0]),n[1]=Math.round(r[1]),n[2]=Math.round(r[2]),n[3]=Math.round(r[3]),n}function Bx(n,r,i){return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n}function Kw(n,r,i,s){return n[0]=r[0]+i[0]*s,n[1]=r[1]+i[1]*s,n[2]=r[2]+i[2]*s,n[3]=r[3]+i[3]*s,n}function qw(n,r){var i=r[0]-n[0],s=r[1]-n[1],a=r[2]-n[2],u=r[3]-n[3];return Math.hypot(i,s,a,u)}function Jw(n,r){var i=r[0]-n[0],s=r[1]-n[1],a=r[2]-n[2],u=r[3]-n[3];return i*i+s*s+a*a+u*u}function Yb(n){var r=n[0],i=n[1],s=n[2],a=n[3];return Math.hypot(r,i,s,a)}function zx(n){var r=n[0],i=n[1],s=n[2],a=n[3];return r*r+i*i+s*s+a*a}function m(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=-r[3],n}function C(n,r){return n[0]=1/r[0],n[1]=1/r[1],n[2]=1/r[2],n[3]=1/r[3],n}function D(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=i*i+s*s+a*a+u*u;return h>0&&(h=1/Math.sqrt(h)),n[0]=i*h,n[1]=s*h,n[2]=a*h,n[3]=u*h,n}function Y(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]+n[3]*r[3]}function ve(n,r,i,s){var a=i[0]*s[1]-i[1]*s[0],u=i[0]*s[2]-i[2]*s[0],h=i[0]*s[3]-i[3]*s[0],p=i[1]*s[2]-i[2]*s[1],g=i[1]*s[3]-i[3]*s[1],y=i[2]*s[3]-i[3]*s[2],x=r[0],E=r[1],T=r[2],O=r[3];return n[0]=E*y-T*g+O*p,n[1]=-(x*y)+T*h-O*u,n[2]=x*g-E*h+O*a,n[3]=-(x*p)+E*u-T*a,n}function Re(n,r,i,s){var a=r[0],u=r[1],h=r[2],p=r[3];return n[0]=a+s*(i[0]-a),n[1]=u+s*(i[1]-u),n[2]=h+s*(i[2]-h),n[3]=p+s*(i[3]-p),n}function Ke(n,r){r=r||1;var i,s,a,u,h,p;do i=glMatrix.RANDOM()*2-1,s=glMatrix.RANDOM()*2-1,h=i*i+s*s;while(h>=1);do a=glMatrix.RANDOM()*2-1,u=glMatrix.RANDOM()*2-1,p=a*a+u*u;while(p>=1);var g=Math.sqrt((1-h)/p);return n[0]=r*i,n[1]=r*s,n[2]=r*a*g,n[3]=r*u*g,n}function ot(n,r,i){var s=r[0],a=r[1],u=r[2],h=r[3];return n[0]=i[0]*s+i[4]*a+i[8]*u+i[12]*h,n[1]=i[1]*s+i[5]*a+i[9]*u+i[13]*h,n[2]=i[2]*s+i[6]*a+i[10]*u+i[14]*h,n[3]=i[3]*s+i[7]*a+i[11]*u+i[15]*h,n}function Mt(n,r,i){var s=r[0],a=r[1],u=r[2],h=i[0],p=i[1],g=i[2],y=i[3],x=y*s+p*u-g*a,E=y*a+g*s-h*u,T=y*u+h*a-p*s,O=-h*s-p*a-g*u;return n[0]=x*y+O*-h+E*-g-T*-p,n[1]=E*y+O*-p+T*-h-x*-g,n[2]=T*y+O*-g+x*-p-E*-h,n[3]=r[3],n}function yn(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}function xn(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}function Dn(n,r){return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]}function nr(n,r){var i=n[0],s=n[1],a=n[2],u=n[3],h=r[0],p=r[1],g=r[2],y=r[3];return Math.abs(i-h)<=Ua.Ib*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-p)<=Ua.Ib*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(a-g)<=Ua.Ib*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-y)<=Ua.Ib*Math.max(1,Math.abs(u),Math.abs(y))}var Tr=null,ni=null,Ri=null,ri=null,$i=null,ao=null,Wl=null,qc=function(){var n=Ug();return function(r,i,s,a,u,h){var p,g;for(i||(i=4),s||(s=0),a?g=Math.min(a*i+s,r.length):g=r.length,p=s;p<g;p+=i)n[0]=r[p],n[1]=r[p+1],n[2]=r[p+2],n[3]=r[p+3],u(n,n,h),r[p]=n[0],r[p+1]=n[1],r[p+2]=n[2],r[p+3]=n[3];return r}}(),Rs=M(35600),St=M(77160),Va=M(71002),Xl=9007199254740991,Kb="[object Arguments]",aT="[object Array]",cT="[object Boolean]",lT="[object Date]",uT="[object Error]",dT="[object Function]",hT="[object Map]",fT="[object Number]",pT="[object Object]",gT="[object RegExp]",vT="[object Set]",mT="[object String]",yT="[object WeakMap]",bT="[object ArrayBuffer]",Qw="[object DataView]",xT="[object Float32Array]",CT="[object Float64Array]",wT="[object Int8Array]",eE="[object Int16Array]",ET="[object Int32Array]",ST="[object Uint8Array]",_T="[object Uint8ClampedArray]",AT="[object Uint16Array]",tE="[object Uint32Array]",ks={};ks[xT]=ks[CT]=ks[wT]=ks[eE]=ks[ET]=ks[ST]=ks[_T]=ks[AT]=ks[tE]=!0,ks[Kb]=ks[aT]=ks[bT]=ks[cT]=ks[Qw]=ks[lT]=ks[uT]=ks[dT]=ks[hT]=ks[fT]=ks[pT]=ks[gT]=ks[vT]=ks[mT]=ks[yT]=!1;function aP(n){return function(r){return n(r)}}var nE=Object.prototype,TT=nE.toString;function MT(n){return PT(n)&&OT(n.length)&&!!ks[TT.call(n)]}function OT(n){return typeof n=="number"&&n>-1&&n%1===0&&n<=Xl}function PT(n){return!!n&&(0,Va.Z)(n)==="object"}var Ux=MT;function rE(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function iE(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?rE(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):rE(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function DT(n){var r=NT();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function NT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var IT=function(n){(0,za.Z)(i,n);var r=DT(i);function i(s){var a;return(0,hr.Z)(this,i),a=r.call(this,s),a.dirty=!0,a.attributes=[],a.indices=void 0,a.indicesBuffer=void 0,a.vertexCount=0,a.maxInstancedCount=void 0,a.aabb=void 0,a.entity=void 0,Object.assign((0,ms.Z)(a),s),a}return(0,wr.Z)(i,[{key:"setAttribute",value:function(a,u,h,p){var g=this.attributes.find(function(y){return y.name===a});return g?(g.data=u,g.dirty=!0):this.attributes.push(iE(iE({dirty:!0,name:a,data:u},h),{},{bufferGetter:p})),this.dirty=!0,this}},{key:"setIndex",value:function(a){return this.indices=new Uint32Array(a.buffer?a.buffer:a),this.dirty=!0,this}},{key:"applyMatrix",value:function(a){var u=this.attributes.find(function(T){var O=T.name;return O==="position"}),h=this.attributes.find(function(T){var O=T.name;return O==="normal"});if(u&&(u.dirty=!0,u.data&&u.data.length))for(var p=0;p<u.data.length;p+=3){var g=Xb(u.data[p],u.data[p+1],u.data[p+2],1);ot(g,g,a),Ux(u.data)?u.data.set([g[0],g[1],g[2]],p):(u.data[p]=g[0],u.data[p+1]=g[1],u.data[p+2]=g[2])}if(h){var y=Rs.XL(Rs.Ue(),a);if(h.data&&h.data.length)for(var x=0;x<h.data.length;x+=3){var E=St.al(h.data[x],h.data[x+1],h.data[x+2]);St.kK(E,E,y),St.Fv(E,E),Ux(h.data)?h.data.set([E[0],E[1],E[2]],x):(h.data[x]=E[0],h.data[x+1]=E[1],h.data[x+2]=E[2])}}}}]),i}(Yh),gt;(function(n){n[n.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",n[n.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",n[n.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n[n.ZERO=0]="ZERO",n[n.ONE=1]="ONE",n[n.SRC_COLOR=768]="SRC_COLOR",n[n.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",n[n.SRC_ALPHA=770]="SRC_ALPHA",n[n.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",n[n.DST_ALPHA=772]="DST_ALPHA",n[n.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",n[n.DST_COLOR=774]="DST_COLOR",n[n.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",n[n.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",n[n.FUNC_ADD=32774]="FUNC_ADD",n[n.BLEND_EQUATION=32777]="BLEND_EQUATION",n[n.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",n[n.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",n[n.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",n[n.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",n[n.MAX_EXT=32776]="MAX_EXT",n[n.MIN_EXT=32775]="MIN_EXT",n[n.BLEND_DST_RGB=32968]="BLEND_DST_RGB",n[n.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",n[n.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",n[n.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",n[n.CONSTANT_COLOR=32769]="CONSTANT_COLOR",n[n.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",n[n.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",n[n.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",n[n.BLEND_COLOR=32773]="BLEND_COLOR",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",n[n.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",n[n.STREAM_DRAW=35040]="STREAM_DRAW",n[n.STATIC_DRAW=35044]="STATIC_DRAW",n[n.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",n[n.BUFFER_SIZE=34660]="BUFFER_SIZE",n[n.BUFFER_USAGE=34661]="BUFFER_USAGE",n[n.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",n[n.FRONT=1028]="FRONT",n[n.BACK=1029]="BACK",n[n.FRONT_AND_BACK=1032]="FRONT_AND_BACK",n[n.CULL_FACE=2884]="CULL_FACE",n[n.BLEND=3042]="BLEND",n[n.DITHER=3024]="DITHER",n[n.STENCIL_TEST=2960]="STENCIL_TEST",n[n.DEPTH_TEST=2929]="DEPTH_TEST",n[n.SCISSOR_TEST=3089]="SCISSOR_TEST",n[n.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",n[n.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",n[n.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",n[n.NO_ERROR=0]="NO_ERROR",n[n.INVALID_ENUM=1280]="INVALID_ENUM",n[n.INVALID_VALUE=1281]="INVALID_VALUE",n[n.INVALID_OPERATION=1282]="INVALID_OPERATION",n[n.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",n[n.CW=2304]="CW",n[n.CCW=2305]="CCW",n[n.LINE_WIDTH=2849]="LINE_WIDTH",n[n.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",n[n.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",n[n.CULL_FACE_MODE=2885]="CULL_FACE_MODE",n[n.FRONT_FACE=2886]="FRONT_FACE",n[n.DEPTH_RANGE=2928]="DEPTH_RANGE",n[n.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",n[n.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",n[n.DEPTH_FUNC=2932]="DEPTH_FUNC",n[n.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",n[n.STENCIL_FUNC=2962]="STENCIL_FUNC",n[n.STENCIL_FAIL=2964]="STENCIL_FAIL",n[n.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",n[n.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",n[n.STENCIL_REF=2967]="STENCIL_REF",n[n.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",n[n.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",n[n.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",n[n.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",n[n.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",n[n.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",n[n.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",n[n.VIEWPORT=2978]="VIEWPORT",n[n.SCISSOR_BOX=3088]="SCISSOR_BOX",n[n.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",n[n.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",n[n.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",n[n.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",n[n.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",n[n.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",n[n.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",n[n.RED_BITS=3410]="RED_BITS",n[n.GREEN_BITS=3411]="GREEN_BITS",n[n.BLUE_BITS=3412]="BLUE_BITS",n[n.ALPHA_BITS=3413]="ALPHA_BITS",n[n.DEPTH_BITS=3414]="DEPTH_BITS",n[n.STENCIL_BITS=3415]="STENCIL_BITS",n[n.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",n[n.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",n[n.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",n[n.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",n[n.SAMPLES=32937]="SAMPLES",n[n.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",n[n.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",n[n.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",n[n.DONT_CARE=4352]="DONT_CARE",n[n.FASTEST=4353]="FASTEST",n[n.NICEST=4354]="NICEST",n[n.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.INT=5124]="INT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.ALPHA=6406]="ALPHA",n[n.RGB=6407]="RGB",n[n.RGBA=6408]="RGBA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",n[n.VERTEX_SHADER=35633]="VERTEX_SHADER",n[n.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",n[n.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",n[n.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",n[n.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",n[n.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",n[n.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",n[n.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",n[n.SHADER_TYPE=35663]="SHADER_TYPE",n[n.DELETE_STATUS=35712]="DELETE_STATUS",n[n.LINK_STATUS=35714]="LINK_STATUS",n[n.VALIDATE_STATUS=35715]="VALIDATE_STATUS",n[n.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",n[n.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",n[n.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",n[n.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",n[n.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",n[n.NEVER=512]="NEVER",n[n.LESS=513]="LESS",n[n.EQUAL=514]="EQUAL",n[n.LEQUAL=515]="LEQUAL",n[n.GREATER=516]="GREATER",n[n.NOTEQUAL=517]="NOTEQUAL",n[n.GEQUAL=518]="GEQUAL",n[n.ALWAYS=519]="ALWAYS",n[n.KEEP=7680]="KEEP",n[n.REPLACE=7681]="REPLACE",n[n.INCR=7682]="INCR",n[n.DECR=7683]="DECR",n[n.INVERT=5386]="INVERT",n[n.INCR_WRAP=34055]="INCR_WRAP",n[n.DECR_WRAP=34056]="DECR_WRAP",n[n.VENDOR=7936]="VENDOR",n[n.RENDERER=7937]="RENDERER",n[n.VERSION=7938]="VERSION",n[n.NEAREST=9728]="NEAREST",n[n.LINEAR=9729]="LINEAR",n[n.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",n[n.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",n[n.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",n[n.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",n[n.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",n[n.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",n[n.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",n[n.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE=5890]="TEXTURE",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n[n.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",n[n.TEXTURE0=33984]="TEXTURE0",n[n.TEXTURE1=33985]="TEXTURE1",n[n.TEXTURE2=33986]="TEXTURE2",n[n.TEXTURE3=33987]="TEXTURE3",n[n.TEXTURE4=33988]="TEXTURE4",n[n.TEXTURE5=33989]="TEXTURE5",n[n.TEXTURE6=33990]="TEXTURE6",n[n.TEXTURE7=33991]="TEXTURE7",n[n.TEXTURE8=33992]="TEXTURE8",n[n.TEXTURE9=33993]="TEXTURE9",n[n.TEXTURE10=33994]="TEXTURE10",n[n.TEXTURE11=33995]="TEXTURE11",n[n.TEXTURE12=33996]="TEXTURE12",n[n.TEXTURE13=33997]="TEXTURE13",n[n.TEXTURE14=33998]="TEXTURE14",n[n.TEXTURE15=33999]="TEXTURE15",n[n.TEXTURE16=34e3]="TEXTURE16",n[n.TEXTURE17=34001]="TEXTURE17",n[n.TEXTURE18=34002]="TEXTURE18",n[n.TEXTURE19=34003]="TEXTURE19",n[n.TEXTURE20=34004]="TEXTURE20",n[n.TEXTURE21=34005]="TEXTURE21",n[n.TEXTURE22=34006]="TEXTURE22",n[n.TEXTURE23=34007]="TEXTURE23",n[n.TEXTURE24=34008]="TEXTURE24",n[n.TEXTURE25=34009]="TEXTURE25",n[n.TEXTURE26=34010]="TEXTURE26",n[n.TEXTURE27=34011]="TEXTURE27",n[n.TEXTURE28=34012]="TEXTURE28",n[n.TEXTURE29=34013]="TEXTURE29",n[n.TEXTURE30=34014]="TEXTURE30",n[n.TEXTURE31=34015]="TEXTURE31",n[n.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",n[n.REPEAT=10497]="REPEAT",n[n.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n[n.FLOAT_VEC2=35664]="FLOAT_VEC2",n[n.FLOAT_VEC3=35665]="FLOAT_VEC3",n[n.FLOAT_VEC4=35666]="FLOAT_VEC4",n[n.INT_VEC2=35667]="INT_VEC2",n[n.INT_VEC3=35668]="INT_VEC3",n[n.INT_VEC4=35669]="INT_VEC4",n[n.BOOL=35670]="BOOL",n[n.BOOL_VEC2=35671]="BOOL_VEC2",n[n.BOOL_VEC3=35672]="BOOL_VEC3",n[n.BOOL_VEC4=35673]="BOOL_VEC4",n[n.FLOAT_MAT2=35674]="FLOAT_MAT2",n[n.FLOAT_MAT3=35675]="FLOAT_MAT3",n[n.FLOAT_MAT4=35676]="FLOAT_MAT4",n[n.SAMPLER_2D=35678]="SAMPLER_2D",n[n.SAMPLER_CUBE=35680]="SAMPLER_CUBE",n[n.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",n[n.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",n[n.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",n[n.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",n[n.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",n[n.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",n[n.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",n[n.COMPILE_STATUS=35713]="COMPILE_STATUS",n[n.LOW_FLOAT=36336]="LOW_FLOAT",n[n.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",n[n.HIGH_FLOAT=36338]="HIGH_FLOAT",n[n.LOW_INT=36339]="LOW_INT",n[n.MEDIUM_INT=36340]="MEDIUM_INT",n[n.HIGH_INT=36341]="HIGH_INT",n[n.FRAMEBUFFER=36160]="FRAMEBUFFER",n[n.RENDERBUFFER=36161]="RENDERBUFFER",n[n.RGBA4=32854]="RGBA4",n[n.RGB5_A1=32855]="RGB5_A1",n[n.RGB565=36194]="RGB565",n[n.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",n[n.STENCIL_INDEX=6401]="STENCIL_INDEX",n[n.STENCIL_INDEX8=36168]="STENCIL_INDEX8",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n[n.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",n[n.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",n[n.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",n[n.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",n[n.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",n[n.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",n[n.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",n[n.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",n[n.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",n[n.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",n[n.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",n[n.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",n[n.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",n[n.NONE=0]="NONE",n[n.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",n[n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",n[n.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",n[n.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",n[n.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",n[n.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",n[n.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",n[n.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",n[n.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",n[n.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",n[n.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",n[n.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",n[n.COPY_SRC=1]="COPY_SRC",n[n.COPY_DST=2]="COPY_DST",n[n.SAMPLED=4]="SAMPLED",n[n.STORAGE=8]="STORAGE",n[n.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(gt||(gt={}));var oE,sE,aE,cE,qb,lE,zm,uE,RT=(oE=(0,z.b2)(),sE=(0,z.f3)(sn.GeometryComponentManager),aE=(0,z.f3)(sn.RenderEngine),oE(cE=(qb=(uE=function(){function n(){(0,hr.Z)(this,n),Sr(this,"geometry",lE,this),Sr(this,"engine",zm,this)}return(0,wr.Z)(n,[{key:"execute",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){var a=this;return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:this.geometry.forEach(function(p,g){g.dirty&&(g.attributes.forEach(function(y){if(y.dirty&&y.data){if(!y.buffer)y.buffer=a.engine.createBuffer({data:y.data,type:gt.FLOAT});else{var x;(x=y.buffer)===null||x===void 0||x.subData({data:y.data,offset:0})}y.dirty=!1}}),g.indices&&(g.indicesBuffer?g.indicesBuffer.subData({data:g.indices,offset:0}):g.indicesBuffer=a.engine.createElements({data:g.indices,count:g.indices.length,type:gt.UNSIGNED_INT,usage:gt.STATIC_DRAW})),g.dirty=!1)});case 1:case"end":return h.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.geometry.forEach(function(i,s){s.indicesBuffer&&s.indicesBuffer.destroy(),s.attributes.forEach(function(a){a.buffer&&a.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},s=i.vertexCount,a=bu();return this.geometry.create(a,{vertexCount:s})}},{key:"createInstancedBufferGeometry",value:function(i){var s=i.maxInstancedCount,a=i.vertexCount,u=bu();return this.geometry.create(u,{maxInstancedCount:s,vertexCount:a})}}]),n}(),uE),lE=_r(qb.prototype,"geometry",[sE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zm=_r(qb.prototype,"engine",[aE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qb))||cE);function Vx(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function dE(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Vx(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Vx(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function Vg(n){var r=kT();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function kT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var LT=function(n){(0,za.Z)(i,n);var r=Vg(i);function i(s){var a;return(0,hr.Z)(this,i),a=r.call(this,s),a.vertexShaderGLSL=void 0,a.fragmentShaderGLSL=void 0,a.defines={},a.dirty=!0,a.uniforms=[],a.cull={enable:!0,face:gt.BACK},a.depth={enable:!0},a.blend=void 0,a.entity=void 0,a.type=void 0,Object.assign((0,ms.Z)(a),s),a}return(0,wr.Z)(i,[{key:"setDefines",value:function(a){return this.defines=dE(dE({},this.defines),a),this}},{key:"setCull",value:function(a){return this.cull=a,this}},{key:"setDepth",value:function(a){return this.depth=a,this}},{key:"setBlend",value:function(a){return this.blend=a,this}},{key:"setUniform",value:function(a,u){var h=this;if(typeof a!="string")return Object.keys(a).forEach(function(g){return h.setUniform(g,a[g])}),this;var p=this.uniforms.find(function(g){return g.name===a});return p?(p.dirty=!0,p.data=u):this.uniforms.push({name:a,dirty:!0,data:u}),this.dirty=!0,this}}]),i}(Yh),jx,hE,fE,pE,gE,Um,vE,mE,yE,bE;function xE(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function CE(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?xE(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):xE(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var GT=(jx=(0,z.b2)(),hE=(0,z.f3)(sn.MaterialComponentManager),fE=(0,z.f3)(sn.RenderEngine),pE=(0,z.f3)(sn.ShaderModuleService),jx(gE=(Um=(bE=function(){function n(){(0,hr.Z)(this,n),Sr(this,"material",vE,this),Sr(this,"engine",mE,this),Sr(this,"shaderModule",yE,this)}return(0,wr.Z)(n,[{key:"execute",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){return cr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},s)}));function i(){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(i){var s=bu(),a=i.vertexShader,u=i.fragmentShader,h=[];if(!this.engine.supportWebGPU){var p="material-".concat(s);this.shaderModule.registerModule(p,{vs:i.vertexShader,fs:i.fragmentShader});var g=this.shaderModule.getModule(p);a=g.vs,u=g.fs,g.uniforms&&(h=Object.keys(g.uniforms).map(function(y){return{dirty:!0,name:y,data:g.uniforms[y]}}))}return this.material.create(s,CE(CE({vertexShaderGLSL:a,fragmentShaderGLSL:u},i),{},{uniforms:h}))}}]),n}(),bE),vE=_r(Um.prototype,"material",[hE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mE=_r(Um.prototype,"engine",[fE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yE=_r(Um.prototype,"shaderModule",[pE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Um))||gE);function FT(n){var r=BT();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function BT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var Hx;(function(n){n[n.Standard=0]="Standard"})(Hx||(Hx={}));var zT=function(n){(0,za.Z)(i,n);var r=FT(i);function i(s){var a;return(0,hr.Z)(this,i),a=r.call(this,s),a.strategy=Hx.Standard,a.visibilityPlaneMask=0,a.visible=!1,Object.assign((0,ms.Z)(a),s),a}return i}(Yh),$x=function(){function n(r,i){(0,hr.Z)(this,n),this.center=void 0,this.halfExtents=void 0,this.min=St.Ue(),this.max=St.Ue(),this.update(r,i)}return(0,wr.Z)(n,[{key:"update",value:function(i,s){this.center=i||St.Ue(),this.halfExtents=s||St.al(.5,.5,.5),this.min=St.lu(this.min,this.center,this.halfExtents),this.max=St.IH(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(i,s){St.IH(this.center,s,i),St.bA(this.center,this.center,.5),St.lu(this.halfExtents,s,i),St.bA(this.halfExtents,this.halfExtents,.5),St.JG(this.min,i),St.JG(this.max,s)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(i){var s=this.center,a=s[0],u=s[1],h=s[2],p=this.halfExtents,g=p[0],y=p[1],x=p[2],E=a-g,T=a+g,O=u-y,N=u+y,k=h-x,B=h+x,$=i.center,X=$[0],ne=$[1],be=$[2],me=i.halfExtents,je=me[0],it=me[1],ct=me[2],Zt=X-je,At=X+je,Yt=ne-it,st=ne+it,Bn=be-ct,kn=be+ct;Zt<E&&(E=Zt),At>T&&(T=At),Yt<O&&(O=Yt),st>N&&(N=st),Bn<k&&(k=Bn),kn>B&&(B=kn),s[0]=(E+T)*.5,s[1]=(O+N)*.5,s[2]=(k+B)*.5,p[0]=(T-E)*.5,p[1]=(N-O)*.5,p[2]=(B-k)*.5,this.min[0]=E,this.min[1]=O,this.min[2]=k,this.max[0]=T,this.max[1]=N,this.max[2]=B}},{key:"intersects",value:function(i){var s=this.getMax(),a=this.getMin(),u=i.getMax(),h=i.getMin();return a[0]<=u[0]&&s[0]>=h[0]&&a[1]<=u[1]&&s[1]>=h[1]&&a[2]<=u[2]&&s[2]>=h[2]}},{key:"containsPoint",value:function(i){var s=this.getMin(),a=this.getMax();return!(i[0]<s[0]||i[0]>a[0]||i[1]<s[1]||i[1]>a[1]||i[2]<s[2]||i[2]>a[2])}},{key:"getNegativeFarPoint",value:function(i){return i.pnVertexFlag===273?St.JG(St.Ue(),this.min):i.pnVertexFlag===272?St.al(this.min[0],this.min[1],this.max[2]):i.pnVertexFlag===257?St.al(this.min[0],this.max[1],this.min[2]):i.pnVertexFlag===256?St.al(this.min[0],this.max[1],this.max[2]):i.pnVertexFlag===17?St.al(this.max[0],this.min[1],this.min[2]):i.pnVertexFlag===16?St.al(this.max[0],this.min[1],this.max[2]):i.pnVertexFlag===1?St.al(this.max[0],this.max[1],this.min[2]):St.al(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(i){return i.pnVertexFlag===273?St.JG(St.Ue(),this.max):i.pnVertexFlag===272?St.al(this.max[0],this.max[1],this.min[2]):i.pnVertexFlag===257?St.al(this.max[0],this.min[1],this.max[2]):i.pnVertexFlag===256?St.al(this.max[0],this.min[1],this.min[2]):i.pnVertexFlag===17?St.al(this.min[0],this.max[1],this.max[2]):i.pnVertexFlag===16?St.al(this.min[0],this.max[1],this.min[2]):i.pnVertexFlag===1?St.al(this.min[0],this.min[1],this.max[2]):St.al(this.min[0],this.min[1],this.min[2])}}]),n}();function UT(n){var r=VT();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function VT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var jT=function(n){(0,za.Z)(i,n);var r=UT(i);function i(s){var a;return(0,hr.Z)(this,i),a=r.call(this,s),a.material=void 0,a.geometry=void 0,a.aabb=new $x,a.aabbDirty=!0,a.model=void 0,a.visible=!0,a.children=[],Object.assign((0,ms.Z)(a),s),a}return i}(Yh),HT=function(){function n(r,i){(0,hr.Z)(this,n),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=r||0,this.normal=i||St.al(0,1,0),this.updatePNVertexFlag()}return(0,wr.Z)(n,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(i){return St.AK(i,this.normal)-this.distance}},{key:"normalize",value:function(){var i=1/St.Zh(this.normal);St.bA(this.normal,this.normal,i),this.distance*=i}},{key:"intersectsLine",value:function(i,s,a){var u=this.distanceToPoint(i),h=this.distanceToPoint(s),p=u/(u-h),g=p>=0&&p<=1;return g&&a&&St.t7(a,i,s,p),g}}]),n}(),Kf;(function(n){n[n.OUTSIDE=4294967295]="OUTSIDE",n[n.INSIDE=0]="INSIDE",n[n.INDETERMINATE=2147483647]="INDETERMINATE"})(Kf||(Kf={}));var $T=function(){function n(r){if((0,hr.Z)(this,n),this.planes=[],r)this.planes=r;else for(var i=0;i<6;i++)this.planes.push(new HT)}return(0,wr.Z)(n,[{key:"extractFromVPMatrix",value:function(i){var s=(0,xu.Z)(i,16),a=s[0],u=s[1],h=s[2],p=s[3],g=s[4],y=s[5],x=s[6],E=s[7],T=s[8],O=s[9],N=s[10],k=s[11],B=s[12],$=s[13],X=s[14],ne=s[15];St.t8(this.planes[0].normal,p-a,E-g,k-T),this.planes[0].distance=-(ne-B),St.t8(this.planes[1].normal,p+a,E+g,k+T),this.planes[1].distance=-(ne+B),St.t8(this.planes[2].normal,p+u,E+y,k+O),this.planes[2].distance=-(ne+$),St.t8(this.planes[3].normal,p-u,E-y,k-O),this.planes[3].distance=-(ne-$),St.t8(this.planes[4].normal,p-h,E-x,k-N),this.planes[4].distance=-(ne-X),St.t8(this.planes[5].normal,p+h,E+x,k+N),this.planes[5].distance=-(ne+X),this.planes.forEach(function(be){be.normalize(),be.updatePNVertexFlag()})}}]),n}();function cP(n){return typeof n=="number"}function lP(n){return n===void 0?0:n>360||n<-360?n%360:n}function uP(n,r,i){return isNumber(n)?vec3.fromValues(n,r,i):n.length===3?vec3.clone(n):vec3.fromValues(n[0],n[1],n[2])}function wE(n,r){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[4],r[4]=n[5],r[5]=n[6],r[6]=n[8],r[7]=n[9],r[8]=n[10],r}function EE(n){var r=(0,xu.Z)(n,3),i=r[0],s=r[1],a=r[2],u=i+s*256+a*65536-1;return u}function dP(n){return[n+1&255,n+1>>8&255,n+1>>8>>8&255]}var SE,_E,AE,Wx,TE,Xx,Zx,Yp,ME,Yx,OE,Kx,qx,PE;function DE(n,r){var i;if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=WT(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function WT(n,r){if(!!n){if(typeof n=="string")return Jx(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Jx(n,r)}}function Jx(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var NE=(SE=(0,z.b2)(),_E=(0,z.f3)(sn.MeshComponentManager),AE=(0,z.f3)(sn.CullableComponentManager),Wx=(0,z.f3)(sn.GeometryComponentManager),TE=(0,z.f3)(sn.HierarchyComponentManager),Xx=(0,z.f3)(sn.TransformComponentManager),SE(Zx=(Yp=(PE=function(){function n(){(0,hr.Z)(this,n),Sr(this,"mesh",ME,this),Sr(this,"cullable",Yx,this),Sr(this,"geometry",OE,this),Sr(this,"hierarchy",Kx,this),Sr(this,"transform",qx,this),this.planes=void 0}return(0,wr.Z)(n,[{key:"setFrustumPlanes",value:function(i){this.planes=i}},{key:"execute",value:function(){var r=(0,Ji.Z)(cr().mark(function s(a){var u,h,p,g,y,x,E,T,O,N,k,B,$,X,ne,be,me,je,it,ct,Zt;return cr().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:u=DE(a);try{for(u.s();!(h=u.n()).done;){p=h.value,g=p.getScene(),y=p.getCamera(),x=DE(g.getEntities());try{for(x.s();!(E=x.n()).done;)T=E.value,O=this.mesh.getComponentByEntity(T),O&&(N=this.hierarchy.getComponentByEntity(T),k=this.cullable.getComponentByEntity(T),B=O.geometry,$=this.transform.getComponentByEntity(T),B&&B.aabb&&$&&O.aabbDirty&&(X=$.worldTransform,ne=B.aabb,be=ne.center,me=ne.halfExtents,je=St.fF(St.Ue(),be,X),it=wE(X,Rs.Ue()),ct=St.kK(St.Ue(),me,it),O.aabb.update(je,ct),O.aabbDirty=!1),k&&B&&(Zt=this.cullable.getComponentByEntity(N?.parentID||-1),k.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(O.aabb,Zt?.visibilityPlaneMask||Kf.INDETERMINATE,this.planes||y.getFrustum().planes),k.visible=k.visibilityPlaneMask!==Kf.OUTSIDE))}catch(st){x.e(st)}finally{x.f()}}}catch(st){u.e(st)}finally{u.f()}case 2:case"end":return Yt.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(i,s,a){if(s===Kf.OUTSIDE||s===Kf.INSIDE)return s;for(var u=Kf.INSIDE,h=0,p=a.length;h<p;++h){var g=h<31?1<<h:0;if(!(h<31&&(s&g)===0)){var y=a[h],x=y.normal,E=y.distance;if(St.AK(x,i.getNegativeFarPoint(a[h]))+E>0)return Kf.OUTSIDE;St.AK(x,i.getPositiveFarPoint(a[h]))+E>0&&(u|=g)}}return u}}]),n}(),PE),ME=_r(Yp.prototype,"mesh",[_E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yx=_r(Yp.prototype,"cullable",[AE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OE=_r(Yp.prototype,"geometry",[Wx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kx=_r(Yp.prototype,"hierarchy",[TE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qx=_r(Yp.prototype,"transform",[Xx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yp))||Zx);function ic(){var n=new Ua.WT(16);return Ua.WT!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function XT(n){var r=new Ua.WT(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}function Jb(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n}function hP(n,r,i,s,a,u,h,p,g,y,x,E,T,O,N,k){var B=new glMatrix.ARRAY_TYPE(16);return B[0]=n,B[1]=r,B[2]=i,B[3]=s,B[4]=a,B[5]=u,B[6]=h,B[7]=p,B[8]=g,B[9]=y,B[10]=x,B[11]=E,B[12]=T,B[13]=O,B[14]=N,B[15]=k,B}function ZT(n,r,i,s,a,u,h,p,g,y,x,E,T,O,N,k,B){return n[0]=r,n[1]=i,n[2]=s,n[3]=a,n[4]=u,n[5]=h,n[6]=p,n[7]=g,n[8]=y,n[9]=x,n[10]=E,n[11]=T,n[12]=O,n[13]=N,n[14]=k,n[15]=B,n}function Qx(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function YT(n,r){if(n===r){var i=r[1],s=r[2],a=r[3],u=r[6],h=r[7],p=r[11];n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=i,n[6]=r[9],n[7]=r[13],n[8]=s,n[9]=u,n[11]=r[14],n[12]=a,n[13]=h,n[14]=p}else n[0]=r[0],n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=r[1],n[5]=r[5],n[6]=r[9],n[7]=r[13],n[8]=r[2],n[9]=r[6],n[10]=r[10],n[11]=r[14],n[12]=r[3],n[13]=r[7],n[14]=r[11],n[15]=r[15];return n}function Vm(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=r[4],p=r[5],g=r[6],y=r[7],x=r[8],E=r[9],T=r[10],O=r[11],N=r[12],k=r[13],B=r[14],$=r[15],X=i*p-s*h,ne=i*g-a*h,be=i*y-u*h,me=s*g-a*p,je=s*y-u*p,it=a*y-u*g,ct=x*k-E*N,Zt=x*B-T*N,At=x*$-O*N,Yt=E*B-T*k,st=E*$-O*k,Bn=T*$-O*B,kn=X*Bn-ne*st+be*Yt+me*At-je*Zt+it*ct;return kn?(kn=1/kn,n[0]=(p*Bn-g*st+y*Yt)*kn,n[1]=(a*st-s*Bn-u*Yt)*kn,n[2]=(k*it-B*je+$*me)*kn,n[3]=(T*je-E*it-O*me)*kn,n[4]=(g*At-h*Bn-y*Zt)*kn,n[5]=(i*Bn-a*At+u*Zt)*kn,n[6]=(B*be-N*it-$*ne)*kn,n[7]=(x*it-T*be+O*ne)*kn,n[8]=(h*st-p*At+y*ct)*kn,n[9]=(s*At-i*st-u*ct)*kn,n[10]=(N*je-k*be+$*X)*kn,n[11]=(E*be-x*je-O*X)*kn,n[12]=(p*Zt-h*Yt-g*ct)*kn,n[13]=(i*Yt-s*Zt+a*ct)*kn,n[14]=(k*ne-N*me-B*X)*kn,n[15]=(x*me-E*ne+T*X)*kn,n):null}function fP(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=r[4],p=r[5],g=r[6],y=r[7],x=r[8],E=r[9],T=r[10],O=r[11],N=r[12],k=r[13],B=r[14],$=r[15];return n[0]=p*(T*$-O*B)-E*(g*$-y*B)+k*(g*O-y*T),n[1]=-(s*(T*$-O*B)-E*(a*$-u*B)+k*(a*O-u*T)),n[2]=s*(g*$-y*B)-p*(a*$-u*B)+k*(a*y-u*g),n[3]=-(s*(g*O-y*T)-p*(a*O-u*T)+E*(a*y-u*g)),n[4]=-(h*(T*$-O*B)-x*(g*$-y*B)+N*(g*O-y*T)),n[5]=i*(T*$-O*B)-x*(a*$-u*B)+N*(a*O-u*T),n[6]=-(i*(g*$-y*B)-h*(a*$-u*B)+N*(a*y-u*g)),n[7]=i*(g*O-y*T)-h*(a*O-u*T)+x*(a*y-u*g),n[8]=h*(E*$-O*k)-x*(p*$-y*k)+N*(p*O-y*E),n[9]=-(i*(E*$-O*k)-x*(s*$-u*k)+N*(s*O-u*E)),n[10]=i*(p*$-y*k)-h*(s*$-u*k)+N*(s*y-u*p),n[11]=-(i*(p*O-y*E)-h*(s*O-u*E)+x*(s*y-u*p)),n[12]=-(h*(E*B-T*k)-x*(p*B-g*k)+N*(p*T-g*E)),n[13]=i*(E*B-T*k)-x*(s*B-a*k)+N*(s*T-a*E),n[14]=-(i*(p*B-g*k)-h*(s*B-a*k)+N*(s*g-a*p)),n[15]=i*(p*T-g*E)-h*(s*T-a*E)+x*(s*g-a*p),n}function pP(n){var r=n[0],i=n[1],s=n[2],a=n[3],u=n[4],h=n[5],p=n[6],g=n[7],y=n[8],x=n[9],E=n[10],T=n[11],O=n[12],N=n[13],k=n[14],B=n[15],$=r*h-i*u,X=r*p-s*u,ne=r*g-a*u,be=i*p-s*h,me=i*g-a*h,je=s*g-a*p,it=y*N-x*O,ct=y*k-E*O,Zt=y*B-T*O,At=x*k-E*N,Yt=x*B-T*N,st=E*B-T*k;return $*st-X*Yt+ne*At+be*Zt-me*ct+je*it}function jg(n,r,i){var s=r[0],a=r[1],u=r[2],h=r[3],p=r[4],g=r[5],y=r[6],x=r[7],E=r[8],T=r[9],O=r[10],N=r[11],k=r[12],B=r[13],$=r[14],X=r[15],ne=i[0],be=i[1],me=i[2],je=i[3];return n[0]=ne*s+be*p+me*E+je*k,n[1]=ne*a+be*g+me*T+je*B,n[2]=ne*u+be*y+me*O+je*$,n[3]=ne*h+be*x+me*N+je*X,ne=i[4],be=i[5],me=i[6],je=i[7],n[4]=ne*s+be*p+me*E+je*k,n[5]=ne*a+be*g+me*T+je*B,n[6]=ne*u+be*y+me*O+je*$,n[7]=ne*h+be*x+me*N+je*X,ne=i[8],be=i[9],me=i[10],je=i[11],n[8]=ne*s+be*p+me*E+je*k,n[9]=ne*a+be*g+me*T+je*B,n[10]=ne*u+be*y+me*O+je*$,n[11]=ne*h+be*x+me*N+je*X,ne=i[12],be=i[13],me=i[14],je=i[15],n[12]=ne*s+be*p+me*E+je*k,n[13]=ne*a+be*g+me*T+je*B,n[14]=ne*u+be*y+me*O+je*$,n[15]=ne*h+be*x+me*N+je*X,n}function jm(n,r,i){var s=i[0],a=i[1],u=i[2],h,p,g,y,x,E,T,O,N,k,B,$;return r===n?(n[12]=r[0]*s+r[4]*a+r[8]*u+r[12],n[13]=r[1]*s+r[5]*a+r[9]*u+r[13],n[14]=r[2]*s+r[6]*a+r[10]*u+r[14],n[15]=r[3]*s+r[7]*a+r[11]*u+r[15]):(h=r[0],p=r[1],g=r[2],y=r[3],x=r[4],E=r[5],T=r[6],O=r[7],N=r[8],k=r[9],B=r[10],$=r[11],n[0]=h,n[1]=p,n[2]=g,n[3]=y,n[4]=x,n[5]=E,n[6]=T,n[7]=O,n[8]=N,n[9]=k,n[10]=B,n[11]=$,n[12]=h*s+x*a+N*u+r[12],n[13]=p*s+E*a+k*u+r[13],n[14]=g*s+T*a+B*u+r[14],n[15]=y*s+O*a+$*u+r[15]),n}function gP(n,r,i){var s=i[0],a=i[1],u=i[2];return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=r[3]*s,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=r[7]*a,n[8]=r[8]*u,n[9]=r[9]*u,n[10]=r[10]*u,n[11]=r[11]*u,n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n}function vP(n,r,i,s){var a=s[0],u=s[1],h=s[2],p=Math.hypot(a,u,h),g,y,x,E,T,O,N,k,B,$,X,ne,be,me,je,it,ct,Zt,At,Yt,st,Bn,kn,Jn;return p<glMatrix.EPSILON?null:(p=1/p,a*=p,u*=p,h*=p,g=Math.sin(i),y=Math.cos(i),x=1-y,E=r[0],T=r[1],O=r[2],N=r[3],k=r[4],B=r[5],$=r[6],X=r[7],ne=r[8],be=r[9],me=r[10],je=r[11],it=a*a*x+y,ct=u*a*x+h*g,Zt=h*a*x-u*g,At=a*u*x-h*g,Yt=u*u*x+y,st=h*u*x+a*g,Bn=a*h*x+u*g,kn=u*h*x-a*g,Jn=h*h*x+y,n[0]=E*it+k*ct+ne*Zt,n[1]=T*it+B*ct+be*Zt,n[2]=O*it+$*ct+me*Zt,n[3]=N*it+X*ct+je*Zt,n[4]=E*At+k*Yt+ne*st,n[5]=T*At+B*Yt+be*st,n[6]=O*At+$*Yt+me*st,n[7]=N*At+X*Yt+je*st,n[8]=E*Bn+k*kn+ne*Jn,n[9]=T*Bn+B*kn+be*Jn,n[10]=O*Bn+$*kn+me*Jn,n[11]=N*Bn+X*kn+je*Jn,r!==n&&(n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n)}function KT(n,r,i){var s=Math.sin(i),a=Math.cos(i),u=r[4],h=r[5],p=r[6],g=r[7],y=r[8],x=r[9],E=r[10],T=r[11];return r!==n&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[4]=u*a+y*s,n[5]=h*a+x*s,n[6]=p*a+E*s,n[7]=g*a+T*s,n[8]=y*a-u*s,n[9]=x*a-h*s,n[10]=E*a-p*s,n[11]=T*a-g*s,n}function qT(n,r,i){var s=Math.sin(i),a=Math.cos(i),u=r[0],h=r[1],p=r[2],g=r[3],y=r[8],x=r[9],E=r[10],T=r[11];return r!==n&&(n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=u*a-y*s,n[1]=h*a-x*s,n[2]=p*a-E*s,n[3]=g*a-T*s,n[8]=u*s+y*a,n[9]=h*s+x*a,n[10]=p*s+E*a,n[11]=g*s+T*a,n}function mP(n,r,i){var s=Math.sin(i),a=Math.cos(i),u=r[0],h=r[1],p=r[2],g=r[3],y=r[4],x=r[5],E=r[6],T=r[7];return r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=u*a+y*s,n[1]=h*a+x*s,n[2]=p*a+E*s,n[3]=g*a+T*s,n[4]=y*a-u*s,n[5]=x*a-h*s,n[6]=E*a-p*s,n[7]=T*a-g*s,n}function yP(n,r){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function bP(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=r[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function xP(n,r,i){var s=i[0],a=i[1],u=i[2],h=Math.hypot(s,a,u),p,g,y;return h<glMatrix.EPSILON?null:(h=1/h,s*=h,a*=h,u*=h,p=Math.sin(r),g=Math.cos(r),y=1-g,n[0]=s*s*y+g,n[1]=a*s*y+u*p,n[2]=u*s*y-a*p,n[3]=0,n[4]=s*a*y-u*p,n[5]=a*a*y+g,n[6]=u*a*y+s*p,n[7]=0,n[8]=s*u*y+a*p,n[9]=a*u*y-s*p,n[10]=u*u*y+g,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}function CP(n,r){var i=Math.sin(r),s=Math.cos(r);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=i,n[7]=0,n[8]=0,n[9]=-i,n[10]=s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function eC(n,r){var i=Math.sin(r),s=Math.cos(r);return n[0]=s,n[1]=0,n[2]=-i,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=i,n[9]=0,n[10]=s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function wP(n,r){var i=Math.sin(r),s=Math.cos(r);return n[0]=s,n[1]=i,n[2]=0,n[3]=0,n[4]=-i,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function IE(n,r,i){var s=r[0],a=r[1],u=r[2],h=r[3],p=s+s,g=a+a,y=u+u,x=s*p,E=s*g,T=s*y,O=a*g,N=a*y,k=u*y,B=h*p,$=h*g,X=h*y;return n[0]=1-(O+k),n[1]=E+X,n[2]=T-$,n[3]=0,n[4]=E-X,n[5]=1-(x+k),n[6]=N+B,n[7]=0,n[8]=T+$,n[9]=N-B,n[10]=1-(x+O),n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n}function EP(n,r){var i=new glMatrix.ARRAY_TYPE(3),s=-r[0],a=-r[1],u=-r[2],h=r[3],p=r[4],g=r[5],y=r[6],x=r[7],E=s*s+a*a+u*u+h*h;return E>0?(i[0]=(p*h+x*s+g*u-y*a)*2/E,i[1]=(g*h+x*a+y*s-p*u)*2/E,i[2]=(y*h+x*u+p*a-g*s)*2/E):(i[0]=(p*h+x*s+g*u-y*a)*2,i[1]=(g*h+x*a+y*s-p*u)*2,i[2]=(y*h+x*u+p*a-g*s)*2),IE(n,r,i),n}function Kh(n,r){return n[0]=r[12],n[1]=r[13],n[2]=r[14],n}function tv(n,r){var i=r[0],s=r[1],a=r[2],u=r[4],h=r[5],p=r[6],g=r[8],y=r[9],x=r[10];return n[0]=Math.hypot(i,s,a),n[1]=Math.hypot(u,h,p),n[2]=Math.hypot(g,y,x),n}function nv(n,r){var i=new Ua.WT(3);tv(i,r);var s=1/i[0],a=1/i[1],u=1/i[2],h=r[0]*s,p=r[1]*a,g=r[2]*u,y=r[4]*s,x=r[5]*a,E=r[6]*u,T=r[8]*s,O=r[9]*a,N=r[10]*u,k=h+x+N,B=0;return k>0?(B=Math.sqrt(k+1)*2,n[3]=.25*B,n[0]=(E-O)/B,n[1]=(T-g)/B,n[2]=(p-y)/B):h>x&&h>N?(B=Math.sqrt(1+h-x-N)*2,n[3]=(E-O)/B,n[0]=.25*B,n[1]=(p+y)/B,n[2]=(T+g)/B):x>N?(B=Math.sqrt(1+x-h-N)*2,n[3]=(T-g)/B,n[0]=(p+y)/B,n[1]=.25*B,n[2]=(E+O)/B):(B=Math.sqrt(1+N-h-x)*2,n[3]=(p-y)/B,n[0]=(T+g)/B,n[1]=(E+O)/B,n[2]=.25*B),n}function JT(n,r,i,s){var a=r[0],u=r[1],h=r[2],p=r[3],g=a+a,y=u+u,x=h+h,E=a*g,T=a*y,O=a*x,N=u*y,k=u*x,B=h*x,$=p*g,X=p*y,ne=p*x,be=s[0],me=s[1],je=s[2];return n[0]=(1-(N+B))*be,n[1]=(T+ne)*be,n[2]=(O-X)*be,n[3]=0,n[4]=(T-ne)*me,n[5]=(1-(E+B))*me,n[6]=(k+$)*me,n[7]=0,n[8]=(O+X)*je,n[9]=(k-$)*je,n[10]=(1-(E+N))*je,n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n}function SP(n,r,i,s,a){var u=r[0],h=r[1],p=r[2],g=r[3],y=u+u,x=h+h,E=p+p,T=u*y,O=u*x,N=u*E,k=h*x,B=h*E,$=p*E,X=g*y,ne=g*x,be=g*E,me=s[0],je=s[1],it=s[2],ct=a[0],Zt=a[1],At=a[2],Yt=(1-(k+$))*me,st=(O+be)*me,Bn=(N-ne)*me,kn=(O-be)*je,Jn=(1-(T+$))*je,Li=(B+X)*je,Gi=(N+ne)*it,Xr=(B-X)*it,Ho=(1-(T+k))*it;return n[0]=Yt,n[1]=st,n[2]=Bn,n[3]=0,n[4]=kn,n[5]=Jn,n[6]=Li,n[7]=0,n[8]=Gi,n[9]=Xr,n[10]=Ho,n[11]=0,n[12]=i[0]+ct-(Yt*ct+kn*Zt+Gi*At),n[13]=i[1]+Zt-(st*ct+Jn*Zt+Xr*At),n[14]=i[2]+At-(Bn*ct+Li*Zt+Ho*At),n[15]=1,n}function RE(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=i+i,p=s+s,g=a+a,y=i*h,x=s*h,E=s*p,T=a*h,O=a*p,N=a*g,k=u*h,B=u*p,$=u*g;return n[0]=1-E-N,n[1]=x+$,n[2]=T-B,n[3]=0,n[4]=x-$,n[5]=1-y-N,n[6]=O+k,n[7]=0,n[8]=T+B,n[9]=O-k,n[10]=1-y-E,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Qb(n,r,i,s,a,u,h){var p=1/(i-r),g=1/(a-s),y=1/(u-h);return n[0]=u*2*p,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u*2*g,n[6]=0,n[7]=0,n[8]=(i+r)*p,n[9]=(a+s)*g,n[10]=(h+u)*y,n[11]=-1,n[12]=0,n[13]=0,n[14]=h*u*2*y,n[15]=0,n}function QT(n,r,i,s,a){var u=1/Math.tan(r/2),h;return n[0]=u/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,a!=null&&a!==1/0?(h=1/(s-a),n[10]=(a+s)*h,n[14]=2*a*s*h):(n[10]=-1,n[14]=-2*s),n}var eM=QT;function _P(n,r,i,s,a){var u=1/Math.tan(r/2),h;return n[0]=u/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,a!=null&&a!==1/0?(h=1/(s-a),n[10]=a*h,n[14]=a*s*h):(n[10]=-1,n[14]=-s),n}function kE(n,r,i,s){var a=Math.tan(r.upDegrees*Math.PI/180),u=Math.tan(r.downDegrees*Math.PI/180),h=Math.tan(r.leftDegrees*Math.PI/180),p=Math.tan(r.rightDegrees*Math.PI/180),g=2/(h+p),y=2/(a+u);return n[0]=g,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=y,n[6]=0,n[7]=0,n[8]=-((h-p)*g*.5),n[9]=(a-u)*y*.5,n[10]=s/(i-s),n[11]=-1,n[12]=0,n[13]=0,n[14]=s*i/(i-s),n[15]=0,n}function tM(n,r,i,s,a,u,h){var p=1/(r-i),g=1/(s-a),y=1/(u-h);return n[0]=-2*p,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*g,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*y,n[11]=0,n[12]=(r+i)*p,n[13]=(a+s)*g,n[14]=(h+u)*y,n[15]=1,n}var LE=tM;function rv(n,r,i,s,a,u,h){var p=1/(r-i),g=1/(s-a),y=1/(u-h);return n[0]=-2*p,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*g,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=y,n[11]=0,n[12]=(r+i)*p,n[13]=(a+s)*g,n[14]=u*y,n[15]=1,n}function tC(n,r,i,s){var a,u,h,p,g,y,x,E,T,O,N=r[0],k=r[1],B=r[2],$=s[0],X=s[1],ne=s[2],be=i[0],me=i[1],je=i[2];return Math.abs(N-be)<Ua.Ib&&Math.abs(k-me)<Ua.Ib&&Math.abs(B-je)<Ua.Ib?Qx(n):(x=N-be,E=k-me,T=B-je,O=1/Math.hypot(x,E,T),x*=O,E*=O,T*=O,a=X*T-ne*E,u=ne*x-$*T,h=$*E-X*x,O=Math.hypot(a,u,h),O?(O=1/O,a*=O,u*=O,h*=O):(a=0,u=0,h=0),p=E*h-T*u,g=T*a-x*h,y=x*u-E*a,O=Math.hypot(p,g,y),O?(O=1/O,p*=O,g*=O,y*=O):(p=0,g=0,y=0),n[0]=a,n[1]=p,n[2]=x,n[3]=0,n[4]=u,n[5]=g,n[6]=E,n[7]=0,n[8]=h,n[9]=y,n[10]=T,n[11]=0,n[12]=-(a*N+u*k+h*B),n[13]=-(p*N+g*k+y*B),n[14]=-(x*N+E*k+T*B),n[15]=1,n)}function nC(n,r,i,s){var a=r[0],u=r[1],h=r[2],p=s[0],g=s[1],y=s[2],x=a-i[0],E=u-i[1],T=h-i[2],O=x*x+E*E+T*T;O>0&&(O=1/Math.sqrt(O),x*=O,E*=O,T*=O);var N=g*T-y*E,k=y*x-p*T,B=p*E-g*x;return O=N*N+k*k+B*B,O>0&&(O=1/Math.sqrt(O),N*=O,k*=O,B*=O),n[0]=N,n[1]=k,n[2]=B,n[3]=0,n[4]=E*B-T*k,n[5]=T*N-x*B,n[6]=x*k-E*N,n[7]=0,n[8]=x,n[9]=E,n[10]=T,n[11]=0,n[12]=a,n[13]=u,n[14]=h,n[15]=1,n}function AP(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}function TP(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}function MP(n,r,i){return n[0]=r[0]+i[0],n[1]=r[1]+i[1],n[2]=r[2]+i[2],n[3]=r[3]+i[3],n[4]=r[4]+i[4],n[5]=r[5]+i[5],n[6]=r[6]+i[6],n[7]=r[7]+i[7],n[8]=r[8]+i[8],n[9]=r[9]+i[9],n[10]=r[10]+i[10],n[11]=r[11]+i[11],n[12]=r[12]+i[12],n[13]=r[13]+i[13],n[14]=r[14]+i[14],n[15]=r[15]+i[15],n}function OP(n,r,i){return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n[2]=r[2]-i[2],n[3]=r[3]-i[3],n[4]=r[4]-i[4],n[5]=r[5]-i[5],n[6]=r[6]-i[6],n[7]=r[7]-i[7],n[8]=r[8]-i[8],n[9]=r[9]-i[9],n[10]=r[10]-i[10],n[11]=r[11]-i[11],n[12]=r[12]-i[12],n[13]=r[13]-i[13],n[14]=r[14]-i[14],n[15]=r[15]-i[15],n}function PP(n,r,i){return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n[4]=r[4]*i,n[5]=r[5]*i,n[6]=r[6]*i,n[7]=r[7]*i,n[8]=r[8]*i,n[9]=r[9]*i,n[10]=r[10]*i,n[11]=r[11]*i,n[12]=r[12]*i,n[13]=r[13]*i,n[14]=r[14]*i,n[15]=r[15]*i,n}function rC(n,r,i,s){return n[0]=r[0]+i[0]*s,n[1]=r[1]+i[1]*s,n[2]=r[2]+i[2]*s,n[3]=r[3]+i[3]*s,n[4]=r[4]+i[4]*s,n[5]=r[5]+i[5]*s,n[6]=r[6]+i[6]*s,n[7]=r[7]+i[7]*s,n[8]=r[8]+i[8]*s,n[9]=r[9]+i[9]*s,n[10]=r[10]+i[10]*s,n[11]=r[11]+i[11]*s,n[12]=r[12]+i[12]*s,n[13]=r[13]+i[13]*s,n[14]=r[14]+i[14]*s,n[15]=r[15]+i[15]*s,n}function iC(n,r){return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]&&n[4]===r[4]&&n[5]===r[5]&&n[6]===r[6]&&n[7]===r[7]&&n[8]===r[8]&&n[9]===r[9]&&n[10]===r[10]&&n[11]===r[11]&&n[12]===r[12]&&n[13]===r[13]&&n[14]===r[14]&&n[15]===r[15]}function GE(n,r){var i=n[0],s=n[1],a=n[2],u=n[3],h=n[4],p=n[5],g=n[6],y=n[7],x=n[8],E=n[9],T=n[10],O=n[11],N=n[12],k=n[13],B=n[14],$=n[15],X=r[0],ne=r[1],be=r[2],me=r[3],je=r[4],it=r[5],ct=r[6],Zt=r[7],At=r[8],Yt=r[9],st=r[10],Bn=r[11],kn=r[12],Jn=r[13],Li=r[14],Gi=r[15];return Math.abs(i-X)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(X))&&Math.abs(s-ne)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(ne))&&Math.abs(a-be)<=glMatrix.EPSILON*Math.max(1,Math.abs(a),Math.abs(be))&&Math.abs(u-me)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(me))&&Math.abs(h-je)<=glMatrix.EPSILON*Math.max(1,Math.abs(h),Math.abs(je))&&Math.abs(p-it)<=glMatrix.EPSILON*Math.max(1,Math.abs(p),Math.abs(it))&&Math.abs(g-ct)<=glMatrix.EPSILON*Math.max(1,Math.abs(g),Math.abs(ct))&&Math.abs(y-Zt)<=glMatrix.EPSILON*Math.max(1,Math.abs(y),Math.abs(Zt))&&Math.abs(x-At)<=glMatrix.EPSILON*Math.max(1,Math.abs(x),Math.abs(At))&&Math.abs(E-Yt)<=glMatrix.EPSILON*Math.max(1,Math.abs(E),Math.abs(Yt))&&Math.abs(T-st)<=glMatrix.EPSILON*Math.max(1,Math.abs(T),Math.abs(st))&&Math.abs(O-Bn)<=glMatrix.EPSILON*Math.max(1,Math.abs(O),Math.abs(Bn))&&Math.abs(N-kn)<=glMatrix.EPSILON*Math.max(1,Math.abs(N),Math.abs(kn))&&Math.abs(k-Jn)<=glMatrix.EPSILON*Math.max(1,Math.abs(k),Math.abs(Jn))&&Math.abs(B-Li)<=glMatrix.EPSILON*Math.max(1,Math.abs(B),Math.abs(Li))&&Math.abs($-Gi)<=glMatrix.EPSILON*Math.max(1,Math.abs($),Math.abs(Gi))}var nM=null,DP=null,FE,BE,e2,zE,rM,UE,VE,iM,jE,HE,oC,$E,qh,WE,Jc,XE,ZE,YE,KE,qE,oM,sC,JE,sM;function t2(n,r){var i;if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=aM(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function aM(n,r){if(!!n){if(typeof n=="string")return QE(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return QE(n,r)}}function QE(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var Hm=(FE=(0,z.b2)(),BE=(0,z.f3)(sn.MeshComponentManager),e2=(0,z.f3)(sn.GeometryComponentManager),zE=(0,z.f3)(sn.MaterialComponentManager),rM=(0,z.f3)(sn.CullableComponentManager),UE=(0,z.f3)(sn.TransformComponentManager),VE=(0,z.f3)(sn.HierarchyComponentManager),iM=(0,z.f3)(sn.Systems),jE=(0,z.t6)(sn.FrameGraphSystem),HE=(0,z.f3)(sn.RenderEngine),oC=(0,z.f3)(sn.ResourcePool),FE($E=(qh=(sM=JE=function(){function n(){var r=this;(0,hr.Z)(this,n),Sr(this,"mesh",WE,this),Sr(this,"geometry",Jc,this),Sr(this,"material",XE,this),Sr(this,"cullable",ZE,this),Sr(this,"transform",YE,this),Sr(this,"hierarchy",KE,this),Sr(this,"frameGraphSystem",qE,this),Sr(this,"engine",oM,this),Sr(this,"resourcePool",sC,this),this.modelCache={},this.setup=function(i,s,a){var u=i.createRenderTarget(s,"color buffer",{width:1,height:1,usage:gt.RENDER_ATTACHMENT|gt.SAMPLED|gt.COPY_SRC});a.data={output:s.write(i,u)}},this.execute=function(){var i=(0,Ji.Z)(cr().mark(function s(a,u,h){var p,g,y,x,E,T;return cr().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:p=a.getResourceNode(u.data.output),g=r.resourcePool.getOrCreateResource(p.resource),y=t2(h),N.prev=3,y.s();case 5:if((x=y.n()).done){N.next=11;break}return E=x.value,N.next=9,r.initView(E);case 9:N.next=5;break;case 11:N.next=16;break;case 13:N.prev=13,N.t0=N.catch(3),y.e(N.t0);case 16:return N.prev=16,y.f(),N.finish(16);case 19:T=r.engine.getCanvas(),g.resize({width:T.width,height:T.height}),r.engine.setScissor({enable:!1}),r.engine.clear({framebuffer:g,color:h[0].getClearColor(),depth:1}),r.engine.useFramebuffer(g,function(){var k=t2(h),B;try{for(k.s();!(B=k.n()).done;){var $=B.value;r.renderView($)}}catch(X){k.e(X)}finally{k.f()}});case 24:case"end":return N.stop()}},s,null,[[3,13,16,19]])}));return function(s,a,u){return i.apply(this,arguments)}}()}return(0,wr.Z)(n,[{key:"renderView",value:function(i){var s=i.getScene(),a=i.getCamera(),u=a.getViewTransform(),h=jg(ic(),a.getPerspective(),u);a.getFrustum().extractFromVPMatrix(h);var p=i.getViewport(),g=p.x,y=p.y,x=p.width,E=p.height;this.engine.viewport({x:g,y,width:x,height:E});var T=t2(s.getEntities()),O;try{for(T.s();!(O=T.n()).done;){var N=O.value;this.renderMesh(N,{camera:a,view:i,viewMatrix:u})}}catch(k){T.e(k)}finally{T.f()}}},{key:"renderMesh",value:function(i,s){var a=s.camera,u=s.view,h=s.viewMatrix,p=this.mesh.getComponentByEntity(i);if(!(!p||!p.visible)){var g=p.material,y=p.geometry;if(!(!y||y.dirty||!g)){var x=this.transform.getComponentByEntity(i),E=jg(ic(),h,x.worldTransform),T=u.getViewport(),O=T.width,N=T.height;g.setUniform({projectionMatrix:a.getPerspective(),modelViewMatrix:E,modelMatrix:x.worldTransform,viewMatrix:h,cameraPosition:a.getPosition(),u_viewport:[O,N]}),p.model&&(p.model.draw({uniforms:g.uniforms.reduce(function(k,B){return k[B.name]=B.data,k},{})}),g.uniforms.forEach(function(k){k.dirty=!1}),g.dirty=!1)}}}},{key:"initMesh",value:function(){var r=(0,Ji.Z)(cr().mark(function s(a,u){var h,p,g,y,x,E,T,O;return cr().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(h=this.mesh.getComponentByEntity(a),h){k.next=3;break}return k.abrupt("return");case 3:if(p=h.material,g=h.geometry,!(!g||g.dirty||!p)){k.next=7;break}return k.abrupt("return");case 7:if(h.model){k.next=24;break}if(y="m-".concat(p.entity,"-g-").concat(g.entity),!this.modelCache[y]){k.next=12;break}return h.model=this.modelCache[y],k.abrupt("return");case 12:return p.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),x=this.engine,E=x.createModel,T=x.createAttribute,O={vs:p.vertexShaderGLSL,fs:p.fragmentShaderGLSL,defines:p.defines,attributes:g.attributes.reduce(function(B,$){return $.data&&$.buffer&&(B[$.name]=T({buffer:$.buffer,attributes:$.attributes,arrayStride:$.arrayStride,stepMode:$.stepMode,divisor:$.stepMode==="vertex"?0:1})),B},{}),uniforms:p.uniforms.reduce(function(B,$){return B[$.name]=$.data,B},{}),scissor:{enable:!0,box:function(){return u.getViewport()}}},p.cull&&(O.cull=p.cull),p.depth&&(O.depth=p.depth),p.blend&&(O.blend=p.blend),g.indicesBuffer&&(O.elements=g.indicesBuffer),g.maxInstancedCount&&(O.instances=g.maxInstancedCount,O.count=g.vertexCount||3),k.next=22,E(O);case 22:h.model=k.sent,this.modelCache[y]=h.model;case 24:case"end":return k.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"initView",value:function(){var r=(0,Ji.Z)(cr().mark(function s(a){var u,h,p,g;return cr().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:u=a.getScene(),h=t2(u.getEntities()),x.prev=2,h.s();case 4:if((p=h.n()).done){x.next=10;break}return g=p.value,x.next=8,this.initMesh(g,a);case 8:x.next=4;break;case 10:x.next=15;break;case 12:x.prev=12,x.t0=x.catch(2),h.e(x.t0);case 15:return x.prev=15,h.f(),x.finish(15);case 18:case"end":return x.stop()}},s,this,[[2,12,15,18]])}));function i(s){return r.apply(this,arguments)}return i}()}]),n}(),JE.IDENTIFIER="Render Pass",sM),WE=_r(qh.prototype,"mesh",[BE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jc=_r(qh.prototype,"geometry",[e2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),XE=_r(qh.prototype,"material",[zE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZE=_r(qh.prototype,"cullable",[rM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),YE=_r(qh.prototype,"transform",[UE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KE=_r(qh.prototype,"hierarchy",[VE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qE=_r(qh.prototype,"frameGraphSystem",[iM,jE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oM=_r(qh.prototype,"engine",[HE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sC=_r(qh.prototype,"resourcePool",[oC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qh))||$E),cM,eS,lM,uM,dh,md,iv,wl,tS,nS,rS,iS,oS;function aC(n,r){var i;if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=cC(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function cC(n,r){if(!!n){if(typeof n=="string")return sS(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return sS(n,r)}}function sS(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var lC={NONE:0,ENCODE:1,HIGHLIGHT:2},uC=(cM=(0,z.b2)(),eS=(0,z.f3)(sn.RenderEngine),lM=(0,z.f3)(sn.ResourcePool),uM=(0,z.f3)(sn.RenderPassFactory),dh=(0,z.f3)(sn.MeshComponentManager),cM(md=(iv=(oS=iS=function(){function n(){var r=this;(0,hr.Z)(this,n),Sr(this,"engine",wl,this),Sr(this,"resourcePool",tS,this),Sr(this,"renderPassFactory",nS,this),Sr(this,"mesh",rS,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(i,s,a){var u=i.createRenderTarget(s,"picking fbo",{width:1,height:1});a.data={output:s.write(i,u)},s.hasSideEffect=!0},this.execute=function(){var i=(0,Ji.Z)(cr().mark(function s(a,u,h){var p,g,y;return cr().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(r.views=h,!r.alreadyInRendering){E.next=3;break}return E.abrupt("return");case 3:p=aC(h);try{for(y=function(){var O=g.value,N=O.getViewport(),k=N.width,B=N.height;r.alreadyInRendering=!0;var $=a.getResourceNode(u.data.output);r.pickingFBO=r.resourcePool.getOrCreateResource($.resource),r.pickingFBO.resize({width:k,height:B}),r.engine.useFramebuffer(r.pickingFBO,function(){r.engine.clear({framebuffer:r.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var X=r.renderPassFactory(Hm.IDENTIFIER),ne=[],be=O.getScene(),me=aC(be.getEntities()),je;try{for(me.s();!(je=me.n()).done;){var it=je.value,ct=r.mesh.getComponentByEntity(it),Zt=ct.material;Zt.setUniform("u_PickingStage",lC.ENCODE),ne.push(ct)}}catch(At){me.e(At)}finally{me.f()}X.renderView(O),ne.forEach(function(At){var Yt=At.material;Yt.setUniform("u_PickingStage",lC.HIGHLIGHT)}),r.alreadyInRendering=!1})},p.s();!(g=p.n()).done;)y()}catch(T){p.e(T)}finally{p.f()}case 5:case"end":return E.stop()}},s)}));return function(s,a,u){return i.apply(this,arguments)}}(),this.pick=function(i,s){var a=i.x,u=i.y,h=r.engine,p=h.readPixels,g=h.useFramebuffer,y=s.getViewport(),x=y.width,E=y.height,T=a*window.devicePixelRatio,O=u*window.devicePixelRatio;if(!(T>x||T<0||O>E||O<0)){var N,k;return g(r.pickingFBO,function(){N=p({x:Math.round(T),y:Math.round(E-(u+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:r.pickingFBO}),(N[0]!==0||N[1]!==0||N[2]!==0)&&(k=EE(N),r.highlightEnabled&&r.highlightPickedFeature(N,s))}),k}}}return(0,wr.Z)(n,[{key:"enableHighlight",value:function(i){this.highlightEnabled=i}},{key:"setHighlightColor",value:function(i){this.highlightColor=i}},{key:"highlightPickedFeature",value:function(i,s){if(i){var a=aC(s.getScene().getEntities()),u;try{for(a.s();!(u=a.n()).done;){var h=u.value,p=this.mesh.getComponentByEntity(h),g=p.material;g.setUniform("u_PickingStage",lC.HIGHLIGHT),g.setUniform("u_PickingColor",[i[0],i[1],i[2]]),g.setUniform("u_HighlightColor",this.highlightColor)}}catch(y){a.e(y)}finally{a.f()}}}}]),n}(),iS.IDENTIFIER="PixelPicking Pass",oS),wl=_r(iv.prototype,"engine",[eS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tS=_r(iv.prototype,"resourcePool",[lM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nS=_r(iv.prototype,"renderPassFactory",[uM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rS=_r(iv.prototype,"mesh",[dh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iv))||md),aS,n2,cS,lS,r2,uS,dC,$m,er,dM=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,hM=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,dS=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,i2=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Hg=(aS=(0,z.b2)(),n2=(0,z.f3)(sn.RenderEngine),cS=(0,z.f3)(sn.ResourcePool),aS(lS=(r2=(er=$m=function n(){var r=this;(0,hr.Z)(this,n),Sr(this,"engine",uS,this),Sr(this,"resourcePool",dC,this),this.model=void 0,this.setup=function(i,s,a){var u=i.getPass(Hm.IDENTIFIER);if(u){var h=i.createRenderTarget(s,"render to screen",{width:1,height:1});a.data={input:s.read(u.data.output),output:s.write(i,h)}}},this.execute=function(){var i=(0,Ji.Z)(cr().mark(function s(a,u){var h,p,g,y,x,E,T;return cr().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(h=r.engine,p=h.createModel,g=h.createAttribute,y=h.createBuffer,r.model){N.next=6;break}return N.next=4,p({vs:r.engine.supportWebGPU?i2:hM,fs:r.engine.supportWebGPU?dS:dM,attributes:{a_Position:g({buffer:y({data:[-4,-4,4,-4,0,4],type:gt.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:x=N.sent,r.model=x;case 6:E=a.getResourceNode(u.data.input),T=r.resourcePool.getOrCreateResource(E.resource),r.engine.useFramebuffer(null,function(){r.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),r.model.draw({uniforms:{u_Texture:T}})});case 9:case"end":return N.stop()}},s)}));return function(s,a){return i.apply(this,arguments)}}(),this.tearDown=function(){r.model=void 0}},$m.IDENTIFIER="Copy Pass",er),uS=_r(r2.prototype,"engine",[n2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dC=_r(r2.prototype,"resourcePool",[cS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r2))||lS),hC,o2,s2,$g,Kp,Wg,co,yc,a2,fC,pC,ov,qf,Aa=(hC=(0,z.b2)(),o2=(0,z.f3)(sn.Systems),s2=(0,z.t6)(sn.FrameGraphSystem),$g=(0,z.f3)(sn.RenderPassFactory),Kp=(0,z.f3)(sn.ConfigService),Wg=(0,z.f3)(sn.ResourcePool),hC(co=(yc=(qf=function(){function n(){(0,hr.Z)(this,n),Sr(this,"frameGraphSystem",a2,this),Sr(this,"renderPassFactory",fC,this),Sr(this,"configService",pC,this),Sr(this,"resourcePool",ov,this)}return(0,wr.Z)(n,[{key:"execute",value:function(){var r=(0,Ji.Z)(cr().mark(function s(a){var u,h,p,g,y,x,E,T,O;return cr().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:u=this.renderPassFactory(Hm.IDENTIFIER),h=u.setup,p=u.execute,g=this.frameGraphSystem.addPass(Hm.IDENTIFIER,h,p),y=this.renderPassFactory(Hg.IDENTIFIER),x=y.setup,E=y.execute,T=y.tearDown,O=this.frameGraphSystem.addPass(Hg.IDENTIFIER,x,E,T),this.frameGraphSystem.present(O.data.output);case 5:case"end":return k.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(i,s){var a=this.renderPassFactory(uC.IDENTIFIER);return a.pick(i,s)}}]),n}(),qf),a2=_r(yc.prototype,"frameGraphSystem",[o2,s2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fC=_r(yc.prototype,"renderPassFactory",[$g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pC=_r(yc.prototype,"configService",[Kp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ov=_r(yc.prototype,"resourcePool",[Wg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yc))||co);function gC(n){var r=vC();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function vC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var c2=function(n){(0,za.Z)(i,n);var r=gC(i);function i(s){var a;return(0,hr.Z)(this,i),a=r.call(this,s),a.parentID=void 0,Object.assign((0,ms.Z)(a),s),a}return i}(Yh),Qc,sv,l2,Wm,Xm,av,Zm,u2,Ym,yd,d2=(Qc=(0,z.b2)(),sv=(0,z.f3)(sn.HierarchyComponentManager),l2=(0,z.f3)(sn.TransformComponentManager),Wm=(0,z.f3)(sn.MeshComponentManager),Qc(Xm=(av=(yd=function(){function n(){(0,hr.Z)(this,n),Sr(this,"hierarchy",Zm,this),Sr(this,"transform",u2,this),Sr(this,"mesh",Ym,this)}return(0,wr.Z)(n,[{key:"execute",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){return cr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return u.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var i=this;this.transform.forEach(function(s,a){(a.isDirty()||a.isLocalDirty())&&(i.setMeshAABBDirty(i.mesh.getComponentByEntity(s)),a.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var i=this;this.hierarchy.forEach(function(s,a){var u=i.transform.getComponentByEntity(s),h=i.transform.getComponentByEntity(a.parentID);u!==null&&h!==null&&u.updateTransformWithParent(h)})}},{key:"attach",value:function(i,s,a){this.hierarchy.contains(i)&&this.detach(i),this.hierarchy.create(i,{parentID:s});var u=this.mesh.getComponentByEntity(s);if(this.setMeshAABBDirty(u),u&&u.children.indexOf(i)===-1&&u.children.push(i),this.hierarchy.getCount()>1)for(var h=this.hierarchy.getCount()-1;h>0;--h)for(var p=this.hierarchy.getEntity(h),g=0;g<h;++g){var y=this.hierarchy.getComponent(g);if(y.parentID===p){this.hierarchy.moveItem(h,g),++h;break}}var x=this.hierarchy.getComponentByEntity(i),E=this.transform.getComponentByEntity(s);E===null&&(E=this.transform.create(s));var T=this.transform.getComponentByEntity(i);T===null&&(T=this.transform.create(i),E=this.transform.getComponentByEntity(s)),T.parent=E,!a&&E&&(T.matrixTransform(Vm(ic(),E.worldTransform)),T.updateTransform()),E&&T.updateTransformWithParent(E)}},{key:"detach",value:function(i){var s=this.hierarchy.getComponentByEntity(i);if(s!==null){var a=this.transform.getComponentByEntity(i);a!==null&&(a.parent=null,a.applyTransform()),this.hierarchy.removeKeepSorted(i);var u=this.mesh.getComponentByEntity(s.parentID);if(u){var h=u.children.indexOf(i);u.children.splice(h,1)}this.setMeshAABBDirty(u)}}},{key:"detachChildren",value:function(i){var s=this.mesh.getComponentByEntity(i);s&&(s.children=[]);for(var a=0;a<this.hierarchy.getCount();){var u;if(((u=this.hierarchy.getComponent(a))===null||u===void 0?void 0:u.parentID)===i){var h=this.hierarchy.getEntity(a);this.detach(h)}else++a}}},{key:"setMeshAABBDirty",value:function(i){i&&(i.aabbDirty=!0)}}]),n}(),yd),Zm=_r(av.prototype,"hierarchy",[sv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u2=_r(av.prototype,"transform",[l2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ym=_r(av.prototype,"mesh",[Wm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),av))||Xm);function Us(){var n=new Ua.WT(4);return Ua.WT!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function fM(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function Jh(n,r,i){i=i*.5;var s=Math.sin(i);return n[0]=s*r[0],n[1]=s*r[1],n[2]=s*r[2],n[3]=Math.cos(i),n}function pM(n,r){var i=Math.acos(r[3])*2,s=Math.sin(i/2);return s>glMatrix.EPSILON?(n[0]=r[0]/s,n[1]=r[1]/s,n[2]=r[2]/s):(n[0]=1,n[1]=0,n[2]=0),i}function h2(n,r){var i=p2(n,r);return Math.acos(2*i*i-1)}function El(n,r,i){var s=r[0],a=r[1],u=r[2],h=r[3],p=i[0],g=i[1],y=i[2],x=i[3];return n[0]=s*x+h*p+a*y-u*g,n[1]=a*x+h*g+u*p-s*y,n[2]=u*x+h*y+s*g-a*p,n[3]=h*x-s*p-a*g-u*y,n}function hS(n,r,i){i*=.5;var s=r[0],a=r[1],u=r[2],h=r[3],p=Math.sin(i),g=Math.cos(i);return n[0]=s*g+h*p,n[1]=a*g+u*p,n[2]=u*g-a*p,n[3]=h*g-s*p,n}function fS(n,r,i){i*=.5;var s=r[0],a=r[1],u=r[2],h=r[3],p=Math.sin(i),g=Math.cos(i);return n[0]=s*g-u*p,n[1]=a*g+h*p,n[2]=u*g+s*p,n[3]=h*g-a*p,n}function gM(n,r,i){i*=.5;var s=r[0],a=r[1],u=r[2],h=r[3],p=Math.sin(i),g=Math.cos(i);return n[0]=s*g+a*p,n[1]=a*g-s*p,n[2]=u*g+h*p,n[3]=h*g-u*p,n}function pS(n,r){var i=r[0],s=r[1],a=r[2];return n[0]=i,n[1]=s,n[2]=a,n[3]=Math.sqrt(Math.abs(1-i*i-s*s-a*a)),n}function f2(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=Math.sqrt(i*i+s*s+a*a),p=Math.exp(u),g=h>0?p*Math.sin(h)/h:0;return n[0]=i*g,n[1]=s*g,n[2]=a*g,n[3]=p*Math.cos(h),n}function mC(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=Math.sqrt(i*i+s*s+a*a),p=h>0?Math.atan2(h,u)/h:0;return n[0]=i*p,n[1]=s*p,n[2]=a*p,n[3]=.5*Math.log(i*i+s*s+a*a+u*u),n}function vo(n,r,i){return mC(n,r),xC(n,n,i),f2(n,n),n}function cv(n,r,i,s){var a=r[0],u=r[1],h=r[2],p=r[3],g=i[0],y=i[1],x=i[2],E=i[3],T,O,N,k,B;return O=a*g+u*y+h*x+p*E,O<0&&(O=-O,g=-g,y=-y,x=-x,E=-E),1-O>Ua.Ib?(T=Math.acos(O),N=Math.sin(T),k=Math.sin((1-s)*T)/N,B=Math.sin(s*T)/N):(k=1-s,B=s),n[0]=k*a+B*g,n[1]=k*u+B*y,n[2]=k*h+B*x,n[3]=k*p+B*E,n}function Km(n){var r=glMatrix.RANDOM(),i=glMatrix.RANDOM(),s=glMatrix.RANDOM(),a=Math.sqrt(1-r),u=Math.sqrt(r);return n[0]=a*Math.sin(2*Math.PI*i),n[1]=a*Math.cos(2*Math.PI*i),n[2]=u*Math.sin(2*Math.PI*s),n[3]=u*Math.cos(2*Math.PI*s),n}function lv(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=i*i+s*s+a*a+u*u,p=h?1/h:0;return n[0]=-i*p,n[1]=-s*p,n[2]=-a*p,n[3]=u*p,n}function yC(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=r[3],n}function vM(n,r){var i=r[0]+r[4]+r[8],s;if(i>0)s=Math.sqrt(i+1),n[3]=.5*s,s=.5/s,n[0]=(r[5]-r[7])*s,n[1]=(r[6]-r[2])*s,n[2]=(r[1]-r[3])*s;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[a*3+a]&&(a=2);var u=(a+1)%3,h=(a+2)%3;s=Math.sqrt(r[a*3+a]-r[u*3+u]-r[h*3+h]+1),n[a]=.5*s,s=.5/s,n[3]=(r[u*3+h]-r[h*3+u])*s,n[u]=(r[u*3+a]+r[a*3+u])*s,n[h]=(r[h*3+a]+r[a*3+h])*s}return n}function gS(n,r,i,s){var a=.5*Math.PI/180;r*=a,i*=a,s*=a;var u=Math.sin(r),h=Math.cos(r),p=Math.sin(i),g=Math.cos(i),y=Math.sin(s),x=Math.cos(s);return n[0]=u*g*x-h*p*y,n[1]=h*p*x+u*g*y,n[2]=h*g*y-u*p*x,n[3]=h*g*x+u*p*y,n}function nN(n){return"quat("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}var rN=kx,bC=Xb,uv=Lx,vS=Gx,dv=Fx,mM=El,xC=Bx,p2=Y,CC=Re,NP=Yb,IP=null,mS=zx,yM=null,Xg=D,RP=Dn,bM=nr,kP=function(){var n=St.Ue(),r=St.al(1,0,0),i=St.al(0,1,0);return function(s,a,u){var h=St.AK(a,u);return h<-.999999?(St.kC(n,r,a),St.Zh(n)<1e-6&&St.kC(n,i,a),St.Fv(n,n),Jh(s,n,Math.PI),s):h>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(St.kC(n,a,u),s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=1+h,Xg(s,s))}}(),wC=function(){var n=Us(),r=Us();return function(i,s,a,u,h,p){return cv(n,s,h,p),cv(r,a,u,p),cv(i,n,r,2*p*(1-p)),i}}(),LP=function(){var n=Rs.Ue();return function(r,i,s,a){return n[0]=s[0],n[3]=s[1],n[6]=s[2],n[1]=a[0],n[4]=a[1],n[7]=a[2],n[2]=-i[0],n[5]=-i[1],n[8]=-i[2],Xg(r,vM(r,n))}}();function xM(n){var r=ki();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function ki(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var qp=function(n){(0,za.Z)(i,n);var r=xM(i);function i(s){var a;return(0,hr.Z)(this,i),a=r.call(this,s),a.dirtyFlag=void 0,a.localDirtyFlag=void 0,a.parent=null,a.localPosition=St.al(0,0,0),a.localRotation=bC(0,0,0,1),a.localScale=St.al(1,1,1),a.localTransform=ic(),a.position=St.al(0,0,0),a.rotation=bC(0,0,0,1),a.scaling=St.al(1,1,1),a.worldTransform=ic(),a.matrixTransform=function(){var u=ic();return function(h){jg(u,a.getLocalTransform(),h),tv(a.localScale,u),Kh(a.localPosition,u),nv(a.localRotation,u)}}(),a.rotateRollPitchYaw=function(){var u=Us(),h=Us(),p=Us();return function(g,y,x){a.setDirty(),gS(u,g,0,0),gS(h,0,y,0),gS(p,0,0,x),El(a.localRotation,u,a.localRotation),El(a.localRotation,a.localRotation,h),El(a.localRotation,p,a.localRotation),Xg(a.localRotation,a.localRotation)}}(),a.lerp=function(){var u=St.Ue(),h=Us(),p=St.Ue(),g=St.Ue(),y=Us(),x=St.Ue();return function(E,T,O){a.setDirty(),tv(u,E.worldTransform),Kh(p,E.worldTransform),nv(h,E.worldTransform),tv(g,T.worldTransform),Kh(x,T.worldTransform),nv(y,T.worldTransform),St.t7(a.localScale,u,g,O),cv(a.localRotation,h,y,O),St.t7(a.localPosition,p,x,O)}}(),a.translate=function(){var u=St.Ue();return function(h){return St.IH(u,a.getPosition(),h),a.setPosition(u),a.setDirty(!0),(0,ms.Z)(a)}}(),a.translateLocal=function(){return function(u){return St.VC(u,u,a.localRotation),St.IH(a.localPosition,a.localPosition,u),a.setLocalDirty(!0),(0,ms.Z)(a)}}(),a.setPosition=function(){var u=ic();return function(h){return a.position=h,a.setLocalDirty(!0),a.parent===null?St.JG(a.localPosition,h):(Jb(u,a.parent.worldTransform),Vm(u,u),St.fF(a.localPosition,h,u)),(0,ms.Z)(a)}}(),a.rotate=function(){var u=Us();return function(h){if(a.parent===null)El(a.localRotation,a.localRotation,h),Xg(a.localRotation,a.localRotation);else{var p=a.getRotation(),g=a.parent.getRotation();uv(u,g),lv(u,u),El(u,u,h),El(a.localRotation,h,p),Xg(a.localRotation,a.localRotation)}return a.setLocalDirty(),(0,ms.Z)(a)}}(),a.rotateLocal=function(){return function(u){return El(a.localRotation,a.localRotation,u),Xg(a.localRotation,a.localRotation),a.setLocalDirty(!0),(0,ms.Z)(a)}}(),a.setRotation=function(){var u=Us();return function(h){return a.parent===null?uv(a.localRotation,h):(uv(u,a.parent.getRotation()),lv(u,u),uv(a.localRotation,u),mM(a.localRotation,a.localRotation,h)),a.setLocalDirty(!0),(0,ms.Z)(a)}}(),a}return(0,wr.Z)(i,[{key:"setLocalPosition",value:function(a){St.JG(this.localPosition,a),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(a){St.JG(this.localScale,a),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(a){return uv(this.localRotation,a),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;a?this.dirtyFlag|=i.DIRTY:this.dirtyFlag&=~i.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;a?(this.localDirtyFlag|=i.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~i.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(Jb(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(a){jg(this.worldTransform,a.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),tv(this.localScale,this.worldTransform),Kh(this.localPosition,this.worldTransform),nv(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=St.al(0,0,0),this.localRotation=bC(0,0,0,1),this.localScale=St.al(1,1,1)}},{key:"scaleLocal",value:function(a){return this.setLocalDirty(),St.Jp(this.localScale,this.localScale,a),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(JT(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return Kh(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return nv(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return tv(this.scaling,this.worldTransform),this.scaling}}]),i}(Yh);qp.DIRTY=1<<0;var yS=M(84879),Zg,g2,EC,v2,Jf,Ve,Rn=(Zg=(0,z.b2)(),g2=(0,z.f3)(sn.RenderEngine),Zg(EC=(v2=(Ve=function(){function n(){(0,hr.Z)(this,n),Sr(this,"engine",Jf,this),this.resourcePool={}}return(0,wr.Z)(n,[{key:"getOrCreateResource",value:function(i){if(!this.resourcePool[i.name]){var s=i.descriptor,a=s.width,u=s.height,h=s.usage;this.resourcePool[i.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:a,height:u,wrapS:gt.CLAMP_TO_EDGE,wrapT:gt.CLAMP_TO_EDGE,usage:h})})}return this.resourcePool[i.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),n}(),Ve),Jf=_r(v2.prototype,"engine",[g2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v2))||EC);function fr(n){var r=bd();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function bd(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var da=function(n){(0,za.Z)(i,n);var r=fr(i);function i(s){var a;return(0,hr.Z)(this,i),a=r.call(this,s),a.name=void 0,a.name=s.name||"",a}return i}(Yh),Vs,qm,Nc,hv=(Vs=(0,z.b2)(),Vs(qm=(Nc=function(){function n(){(0,hr.Z)(this,n),this.config=void 0}return(0,wr.Z)(n,[{key:"get",value:function(){return this.config}},{key:"set",value:function(i){this.config=i}}]),n}(),Nc))||qm),Yg,Cu,Jm;(function(n){n.PANSTART="PANSTART",n.PANEND="PANEND",n.PANMOVE="PANMOVE",n.PINCH="PINCH",n.KEYDOWN="KEYDOWN",n.KEYUP="KEYUP",n.HOVER="HOVER"})(Jm||(Jm={}));var bS=(Yg=(0,z.b2)(),Yg(Cu=function(){function n(){(0,hr.Z)(this,n)}return(0,wr.Z)(n,[{key:"listen",value:function(i){}},{key:"on",value:function(i,s){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),n}())||Cu);function xS(n){var r=0;switch(n){case"vec2":case"ivec2":r=2;break;case"vec3":case"ivec3":r=3;break;case"vec4":case"ivec4":case"mat2":r=4;break;case"mat3":r=9;break;case"mat4":r=16;break;default:}return r}var CM=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function CS(n){var r={};return n=n.replace(CM,function(i,s,a){var u=a.split(":"),h=u[0].trim(),p="";switch(u.length>1&&(p=u[1].trim()),s){case"bool":p=p==="true";break;case"float":case"int":p=Number(p);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":p?p=p.replace("[","").replace("]","").split(",").reduce(function(g,y){return g.push(Number(y.trim())),g},[]):p=new Array(xS(s)).fill(0);break;default:}return r[h]=p,"uniform ".concat(s," ").concat(h,`;
`)}),{content:n,uniforms:r}}function wM(n){return n.filter(function(r,i,s){return s.indexOf(r)===i})}var wS,ES,SS;function m2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function Qm(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?m2(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):m2(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var _S=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,y2=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,EM=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,Nr=/precision\s+(high|low|medium)p\s+float/,sr=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,SM=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,_M=(wS=(0,z.b2)(),wS(ES=(SS=function(){function n(){(0,hr.Z)(this,n),this.moduleCache={},this.rawContentCache={}}return(0,wr.Z)(n,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:y2,fs:_S}),this.registerModule("sdf2d",{vs:"",fs:EM})}},{key:"registerModule",value:function(i,s){if(!this.rawContentCache[i]){var a=s.vs,u=a===void 0?"":a,h=s.fs,p=h===void 0?"":h,g=s.uniforms,y=CS(u),x=y.content,E=y.uniforms,T=CS(p),O=T.content,N=T.uniforms;this.rawContentCache[i]={fs:O,uniforms:Qm(Qm(Qm({},E),N),g),vs:x}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(i){var s=this;if(this.moduleCache[i])return this.moduleCache[i];var a=this.rawContentCache[i].vs||"",u=this.rawContentCache[i].fs||"",h=this.processModule(a,[],"vs"),p=h.content,g=h.includeList,y=this.processModule(u,[],"fs"),x=y.content,E=y.includeList,T=x,O=wM(g.concat(E).concat(i)).reduce(function(N,k){return Qm(Qm({},N),s.rawContentCache[k].uniforms)},{});return Nr.test(x)||(T=sr+x),this.moduleCache[i]={fs:T.trim(),uniforms:O,vs:p.trim()},this.moduleCache[i]}},{key:"processModule",value:function(i,s,a){var u=this,h=i.replace(SM,function(p,g){var y=g.split(" "),x=y[0].replace(/"/g,"");if(s.indexOf(x)>-1)return"";var E=u.rawContentCache[x][a];s.push(x);var T=u.processModule(E||"",s,a),O=T.content;return O});return{content:h,includeList:s}}}]),n}(),SS))||ES),hh=new z.W2,ey=(0,yS.Z)(hh,!1),GP=function(r){var i=ey.lazyInject(r);return function(s,a,u){i.call(this,s,a),u&&(u.initializer=function(){return s[a]})}},AS=function(r){var i=ey.lazyMultiInject(r);return function(s,a,u){i.call(this,s,a),u&&(u.initializer=function(){return s[a]})}};hh.bind(sn.ShaderModuleService).to(_M).inSingletonScope(),hh.bind(sn.NameComponentManager).toConstantValue(new Yf(da)),hh.bind(sn.HierarchyComponentManager).toConstantValue(new Yf(c2)),hh.bind(sn.TransformComponentManager).toConstantValue(new Yf(qp)),hh.bind(sn.MeshComponentManager).toConstantValue(new Yf(jT)),hh.bind(sn.CullableComponentManager).toConstantValue(new Yf(zT)),hh.bind(sn.GeometryComponentManager).toConstantValue(new Yf(IT)),hh.bind(sn.MaterialComponentManager).toConstantValue(new Yf(LT));function AM(){var n=new z.W2;return n.parent=hh,n.bind(sn.Systems).to(d2).inSingletonScope().whenTargetNamed(sn.SceneGraphSystem),n.bind(sn.Systems).to(Rx).inSingletonScope().whenTargetNamed(sn.FrameGraphSystem),n.bind(sn.Systems).to(NE).inSingletonScope().whenTargetNamed(sn.MeshSystem),n.bind(sn.Systems).to(RT).inSingletonScope().whenTargetNamed(sn.GeometrySystem),n.bind(sn.Systems).to(GT).inSingletonScope().whenTargetNamed(sn.MaterialSystem),n.bind(sn.Systems).to(Aa).inSingletonScope().whenTargetNamed(sn.RendererSystem),n.bind(sn.ResourcePool).to(Rn).inSingletonScope(),n.bind(sn.ConfigService).to(hv).inSingletonScope(),n.bind(sn.InteractorService).to(bS).inSingletonScope(),n.bind(sn.RenderPass).to(Hm).inSingletonScope().whenTargetNamed(Hm.IDENTIFIER),n.bind(sn.RenderPass).to(Hg).inSingletonScope().whenTargetNamed(Hg.IDENTIFIER),n.bind(sn.RenderPass).to(uC).inSingletonScope().whenTargetNamed(uC.IDENTIFIER),n.bind(sn.RenderPassFactory).toFactory(function(r){return function(i){return r.container.getNamed(sn.RenderPass,i)}}),n}function ty(n){for(var r=new $x,i=St.al(n[0],n[1],n[2]),s=St.al(n[0],n[1],n[2]),a=3;a<n.length;){var u=n[a++],h=n[a++],p=n[a++];u<i[0]&&(i[0]=u),h<i[1]&&(i[1]=h),p<i[2]&&(i[2]=p),u>s[0]&&(s[0]=u),h>s[1]&&(s[1]=h),p>s[2]&&(s[2]=p)}return r.setMinMax(i,s),r}var Ic=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),el=St.Ue(),TS=null,TM=St.Ue(),MM=St.Ue(),OM=St.Ue(),PM=St.Ue(),b2=St.Ue(),DM=null,NM=M(59518),IM=M(26199),MS=M(14156),OS=M(71468),PS=M(48871),RM=M(9871),fv;(function(n){n.Normal="normal",n.PostProcessing="post-processing"})(fv||(fv={}));var FP=M(25612),kM=M(92777),BP=M(20159),DS=M(61622),oc=M(20499),ny=M(64851),xd;(function(n){n.Void="Void",n.Boolean="Boolean",n.Float="Float",n.Uint32="Uint32",n.Int32="Int32",n.Vector="Vector",n.Vector2Float="vec2<f32>",n.Vector3Float="vec3<f32>",n.Vector4Float="vec4<f32>",n.Vector2Boolean="vec2<bool>",n.Vector3Boolean="vec3<bool>",n.Vector4Boolean="vec4<bool>",n.Vector2Uint="vec2<u32>",n.Vector3Uint="vec3<u32>",n.Vector4Uint="vec4<u32>",n.Vector2Int="vec2<i32>",n.Vector3Int="vec3<i32>",n.Vector4Int="vec4<i32>",n.Matrix="Matrix",n.Matrix3x3Float="mat3x3<f32>",n.Matrix4x4Float="mat4x4<i32>",n.Struct="Struct",n.FloatArray="Float[]",n.Vector4FloatArray="vec4<f32>[]"})(xd||(xd={}));var Qf;(function(n){n.Program="Program",n.Identifier="Identifier",n.VariableDeclaration="VariableDeclaration",n.BlockStatement="BlockStatement",n.ReturnStatement="ReturnStatement",n.FunctionDeclaration="FunctionDeclaration",n.VariableDeclarator="VariableDeclarator",n.AssignmentExpression="AssignmentExpression",n.LogicalExpression="LogicalExpression",n.BinaryExpression="BinaryExpression",n.ArrayExpression="ArrayExpression",n.UnaryExpression="UnaryExpression",n.UpdateExpression="UpdateExpression",n.FunctionExpression="FunctionExpression",n.MemberExpression="MemberExpression",n.ConditionalExpression="ConditionalExpression",n.ExpressionStatement="ExpressionStatement",n.CallExpression="CallExpression",n.NumThreadStatement="NumThreadStatement",n.StorageStatement="StorageStatement",n.DoWhileStatement="DoWhileStatement",n.WhileStatement="WhileStatement",n.ForStatement="ForStatement",n.BreakStatement="BreakStatement",n.ContinueStatement="ContinueStatement",n.IfStatement="IfStatement",n.ImportedFunctionStatement="ImportedFunctionStatement"})(Qf||(Qf={}));var Cd;(function(n){n.Input="Input",n.Output="Output",n.Uniform="Uniform",n.Workgroup="Workgroup",n.UniformConstant="UniformConstant",n.Image="Image",n.StorageBuffer="StorageBuffer",n.Private="Private",n.Function="Function"})(Cd||(Cd={}));var Kg;(function(n){n.GLSL100="GLSL100",n.GLSL450="GLSL450",n.WGSL="WGSL"})(Kg||(Kg={}));var SC="__DefineValuePlaceholder__";function x2(n){return typeof n=="number"}function Qh(n){return n===void 0?0:n>360||n<-360?n%360:n}function Jp(n,r,i){return x2(n)?St.al(n,r,i):n.length===3?St.d9(n):St.al(n[0],n[1],n[2])}var wd=function(){function n(r,i){(0,hr.Z)(this,n),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=r,this.matrix=XT(i.matrix),this.right=St.d9(i.right),this.up=St.d9(i.up),this.forward=St.d9(i.forward),this.position=St.d9(i.position),this.focalPoint=St.d9(i.focalPoint),this.distanceVector=St.d9(i.distanceVector),this.azimuth=i.azimuth,this.elevation=i.elevation,this.roll=i.roll,this.relAzimuth=i.relAzimuth,this.relElevation=i.relElevation,this.relRoll=i.relRoll,this.dollyingStep=i.dollyingStep,this.distance=i.distance}return(0,wr.Z)(n,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(i){i.matrix=Jb(i.matrix,this.matrix),i.right=St.JG(i.right,this.right),i.up=St.JG(i.up,this.up),i.forward=St.JG(i.forward,this.forward),i.position=St.JG(i.position,this.position),i.focalPoint=St.JG(i.focalPoint,this.focalPoint),i.distanceVector=St.JG(i.distanceVector,this.distanceVector),i.azimuth=this.azimuth,i.elevation=this.elevation,i.roll=this.roll,i.relAzimuth=this.relAzimuth,i.relElevation=this.relElevation,i.relRoll=this.relRoll,i.dollyingStep=this.dollyingStep,i.distance=this.distance}}]),n}(),_C,NS,tl,AC,TC,Ta,IS,jo;(function(n){n.ORBITING="ORBITING",n.EXPLORING="EXPLORING",n.TRACKING="TRACKING"})(jo||(jo={}));var Ed;(function(n){n.DEFAULT="DEFAULT",n.ROTATIONAL="ROTATIONAL",n.TRANSLATIONAL="TRANSLATIONAL",n.CINEMATIC="CINEMATIC"})(Ed||(Ed={}));var Qp;(function(n){n.ORTHOGRAPHIC="ORTHOGRAPHIC",n.PERSPECTIVE="PERSPECTIVE"})(Qp||(Qp={}));var fh=Math.PI/180,eg=180/Math.PI,MC=(_C=(0,z.b2)(),NS=(0,z.f3)(sn.InteractorService),_C(tl=(AC=(IS=Ta=function(){function n(){(0,hr.Z)(this,n),this.matrix=ic(),this.right=St.al(1,0,0),this.up=St.al(0,1,0),this.forward=St.al(0,0,1),this.position=St.al(0,0,1),this.focalPoint=St.al(0,0,0),this.distanceVector=St.al(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,Sr(this,"interactor",TC,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=ic(),this.view=void 0,this.following=void 0,this.type=jo.EXPLORING,this.trackingMode=Ed.DEFAULT,this.projectionMode=Qp.PERSPECTIVE,this.frustum=new $T,this.landmarks=[],this.landmarkAnimationID=void 0}return(0,wr.Z)(n,[{key:"clone",value:function(){var i=new n;return i.setType(this.type,void 0),i.interactor=this.interactor,i}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(i,s){return this.type=i,this.type===jo.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===jo.TRACKING&&s!==void 0&&this.setTrackingMode(s),this}},{key:"setProjectionMode",value:function(i){return this.projectionMode=i,this}},{key:"setTrackingMode",value:function(i){if(this.type!==jo.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=i,this}},{key:"setWorldRotation",value:function(i){this.rotateWorld=i,this._getAngles()}},{key:"getViewTransform",value:function(){return Vm(ic(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(i){return this.matrix=i,this._update(),this}},{key:"setAspect",value:function(i){return this.setPerspective(this.near,this.far,this.fov,i),this}},{key:"setViewOffset",value:function(i,s,a,u,h,p){return this.aspect=i/s,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=i,this.view.fullHeight=s,this.view.offsetX=a,this.view.offsetY=u,this.view.width=h,this.view.height=p,this.projectionMode===Qp.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Qp.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(i,s,a,u){return this.projectionMode=Qp.PERSPECTIVE,this.fov=a,this.near=i,this.far=s,this.aspect=u,eM(this.perspective,this.fov*fh,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(i,s,a,u,h,p){this.projectionMode=Qp.ORTHOGRAPHIC,this.rright=s,this.left=i,this.top=a,this.bottom=u,this.near=h,this.far=p;var g=(this.rright-this.left)/(2*this.zoom),y=(this.top-this.bottom)/(2*this.zoom),x=(this.rright+this.left)/2,E=(this.top+this.bottom)/2,T=x-g,O=x+g,N=E+y,k=E-y;if(this.view!==void 0&&this.view.enabled){var B=(this.rright-this.left)/this.view.fullWidth/this.zoom,$=(this.top-this.bottom)/this.view.fullHeight/this.zoom;T+=B*this.view.offsetX,O=T+B*this.view.width,N-=$*this.view.offsetY,k=N-$*this.view.height}return LE(this.perspective,T,O,N,k,h,p),this}},{key:"setPosition",value:function(i,s,a){return this._setPosition(i,s,a),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(i,s,a){var u=St.al(0,1,0);if(this.focalPoint=Jp(i,s,a),this.trackingMode===Ed.CINEMATIC){var h=St.$X(St.Ue(),this.focalPoint,this.position);i=h[0],s=h[1],a=h[2];var p=St.kE(h),g=Math.asin(s/p)*eg,y=90+Math.atan2(a,i)*eg,x=ic();qT(x,x,y*fh),KT(x,x,g*fh),u=St.fF(St.Ue(),[0,1,0],x)}return Vm(this.matrix,tC(ic(),this.position,this.focalPoint,u)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(i){if(!(this.distance===i||i<0)){this.distance=i,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var s=St.Ue();i=this.distance;var a=this.forward,u=this.focalPoint;return s[0]=i*a[0]+u[0],s[1]=i*a[1]+u[1],s[2]=i*a[2]+u[2],this._setPosition(s),this}}},{key:"setMaxDistance",value:function(i){return this.maxDistance=i,this}},{key:"setMinDistance",value:function(i){return this.minDistance=i,this}},{key:"changeAzimuth",value:function(i){return this.setAzimuth(this.azimuth+i),this}},{key:"changeElevation",value:function(i){return this.setElevation(this.elevation+i),this}},{key:"changeRoll",value:function(i){return this.setRoll(this.roll+i),this}},{key:"setAzimuth",value:function(i){return this.azimuth=Qh(i),this.computeMatrix(),this._getAxes(),this.type===jo.ORBITING||this.type===jo.EXPLORING?this._getPosition():this.type===jo.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(i){return this.elevation=Qh(i),this.computeMatrix(),this._getAxes(),this.type===jo.ORBITING||this.type===jo.EXPLORING?this._getPosition():this.type===jo.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(i){return this.roll=Qh(i),this.computeMatrix(),this._getAxes(),this.type===jo.ORBITING||this.type===jo.EXPLORING?this._getPosition():this.type===jo.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(i,s,a){if(this.type===jo.EXPLORING){i=Qh(i),s=Qh(s),a=Qh(a);var u=Jh(Us(),[1,0,0],(this.rotateWorld?1:-1)*s*fh),h=Jh(Us(),[0,1,0],(this.rotateWorld?1:-1)*i*fh),p=Jh(Us(),[0,0,1],a*fh),g=El(Us(),h,u);g=El(Us(),g,p);var y=RE(ic(),g);jm(this.matrix,this.matrix,[0,0,-this.distance]),jg(this.matrix,this.matrix,y),jm(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+s)>90)return;this.relElevation=Qh(s),this.relAzimuth=Qh(i),this.relRoll=Qh(a),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===jo.ORBITING||this.type===jo.EXPLORING?this._getPosition():this.type===jo.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(i,s){var a=Jp(i,s,0),u=St.d9(this.position);return St.IH(u,u,St.bA(St.Ue(),this.right,a[0])),St.IH(u,u,St.bA(St.Ue(),this.up,a[1])),this._setPosition(u),this}},{key:"dolly",value:function(i){var s=this.forward,a=St.d9(this.position),u=i*this.dollyingStep,h=this.distance+i*this.dollyingStep;return u=Math.max(Math.min(h,this.maxDistance),this.minDistance)-this.distance,a[0]+=u*s[0],a[1]+=u*s[1],a[2]+=u*s[2],this._setPosition(a),this.type===jo.ORBITING||this.type===jo.EXPLORING?this._getDistance():this.type===jo.TRACKING&&St.IH(this.focalPoint,a,this.distanceVector),this}},{key:"createLandmark",value:function(i,s){var a=this.clone();a.setPosition(s.position),a.setFocalPoint(s.focalPoint),s.roll!==void 0&&a.setRoll(s.roll);var u=new wd(i,a);return this.landmarks.push(u),u}},{key:"setLandmark",value:function(i){var s=new wd(i,this);return this.landmarks.push(s),this}},{key:"gotoLandmark",value:function(i){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,u=this.landmarks.find(function(E){return E.name===i});if(u){if(a===0){u.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var h=u.getPosition(),p=u.getFocalPoint(),g=u.getRoll(),y,x=function E(T){y===void 0&&(y=T);var O=T-y,N=(1-Math.cos(O/a*Math.PI))/2,k=St.Ue(),B=St.Ue(),$=0;St.t7(k,s.focalPoint,p,N),St.t7(B,s.position,h,N),$=s.roll*(1-N)+g*N,s.setFocalPoint(k),s.setPosition(B),s.setRoll($),s.computeMatrix();var X=St.TK(k,p)+St.TK(B,h);if(!(X>.01)){s.setFocalPoint(k),s.setPosition(B),s.setRoll($),s.computeMatrix(),s.interactor.connect();return}O<a&&(s.landmarkAnimationID=window.requestAnimationFrame(E))};window.requestAnimationFrame(x)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var i,s,a=Jh(Us(),[0,0,1],this.roll*fh);Qx(this.matrix),i=Jh(Us(),[1,0,0],(this.rotateWorld&&this.type!==jo.TRACKING||this.type===jo.TRACKING?1:-1)*this.elevation*fh),s=Jh(Us(),[0,1,0],(this.rotateWorld&&this.type!==jo.TRACKING||this.type===jo.TRACKING?1:-1)*this.azimuth*fh);var u=El(Us(),s,i);u=El(Us(),u,a);var h=RE(ic(),u);this.type===jo.ORBITING||this.type===jo.EXPLORING?(jm(this.matrix,this.matrix,this.focalPoint),jg(this.matrix,this.matrix,h),jm(this.matrix,this.matrix,[0,0,this.distance])):this.type===jo.TRACKING&&(jm(this.matrix,this.matrix,this.position),jg(this.matrix,this.matrix,h))}},{key:"_setPosition",value:function(i,s,a){this.position=Jp(i,s,a);var u=this.matrix;u[12]=this.position[0],u[13]=this.position[1],u[14]=this.position[2],u[15]=1}},{key:"_getAxes",value:function(){St.JG(this.right,Jp(ot(Ug(),[1,0,0,0],this.matrix))),St.JG(this.up,Jp(ot(Ug(),[0,1,0,0],this.matrix))),St.JG(this.forward,Jp(ot(Ug(),[0,0,1,0],this.matrix))),St.Fv(this.right,this.right),St.Fv(this.up,this.up),St.Fv(this.forward,this.forward)}},{key:"_getAngles",value:function(){var i=this.distanceVector[0],s=this.distanceVector[1],a=this.distanceVector[2],u=St.kE(this.distanceVector);if(u===0){this.elevation=0,this.azimuth=0;return}this.type===jo.TRACKING?(this.elevation=Math.asin(s/u)*eg,this.azimuth=Math.atan2(-i,-a)*eg):this.rotateWorld?(this.elevation=Math.asin(s/u)*eg,this.azimuth=Math.atan2(-i,-a)*eg):(this.elevation=-Math.asin(s/u)*eg,this.azimuth=-Math.atan2(-i,-a)*eg)}},{key:"_getPosition",value:function(){St.JG(this.position,Jp(ot(Ug(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){St.kK(this.distanceVector,[0,0,-this.distance],Rs.xO(Rs.Ue(),this.matrix)),St.IH(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=St.$X(St.Ue(),this.focalPoint,this.position),this.distance=St.kE(this.distanceVector),this.dollyingStep=this.distance/100}}]),n}(),Ta.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},IS),TC=_r(AC.prototype,"interactor",[NS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AC))||tl),OC,PC,DC,C2,NC,ph,w2,gh=(OC=(0,z.b2)(),PC=(0,z.f3)(sn.GeometryComponentManager),OC(DC=(C2=(w2=ph=function(){function n(){(0,hr.Z)(this,n),this.config=void 0,Sr(this,"geometry",NC,this),this.entity=void 0,this.component=void 0}return(0,wr.Z)(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(i){this.config=i}},{key:"setEntity",value:function(i){this.entity=i,this.component=this.geometry.create(i),this.component.entity=i,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),n}(),ph.BOX="box",ph.SPHERE="sphere",ph.PLANE="plane",ph.MERGED="merged",w2),NC=_r(C2.prototype,"geometry",[PC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C2))||DC),Nn=M(49469);function ry(){if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var IC={}.toString,LM=function(r,i){return IC.call(r)==="[object "+i+"]"},GM=LM,FM=function(n){return Array.isArray?Array.isArray(n):GM(n,"Array")},RS=9007199254740991,BM="[object Arguments]",zM="[object Array]",UM="[object Boolean]",E2="[object Date]",S2="[object Error]",js="[object Function]",VM="[object Map]",jM="[object Number]",kS="[object Object]",LS="[object RegExp]",HM="[object Set]",$M="[object String]",GS="[object WeakMap]",FS="[object ArrayBuffer]",WM="[object DataView]",XM="[object Float32Array]",BS="[object Float64Array]",ZM="[object Int8Array]",YM="[object Int16Array]",KM="[object Int32Array]",zS="[object Uint8Array]",qM="[object Uint8ClampedArray]",US="[object Uint16Array]",JM="[object Uint32Array]",Ls={};Ls[XM]=Ls[BS]=Ls[ZM]=Ls[YM]=Ls[KM]=Ls[zS]=Ls[qM]=Ls[US]=Ls[JM]=!0,Ls[BM]=Ls[zM]=Ls[FS]=Ls[UM]=Ls[WM]=Ls[E2]=Ls[S2]=Ls[js]=Ls[VM]=Ls[jM]=Ls[kS]=Ls[LS]=Ls[HM]=Ls[$M]=Ls[GS]=!1;function zP(n){return function(r){return n(r)}}var QM=Object.prototype,eO=QM.toString;function tO(n){return rO(n)&&nO(n.length)&&!!Ls[eO.call(n)]}function nO(n){return typeof n=="number"&&n>-1&&n%1===0&&n<=RS}function rO(n){return!!n&&(0,Va.Z)(n)==="object"}var iy=tO,ep,RC,kC,LC,_2,VS,GC,jS;function qg(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function HS(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?qg(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):qg(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var $S=(ep=(0,z.b2)(),RC=(0,z.f3)(sn.RenderEngine),kC=(0,z.f3)(sn.ConfigService),ep(LC=(_2=(jS=function(){function n(){(0,hr.Z)(this,n),Sr(this,"engine",VS,this),Sr(this,"configService",GC,this),this.entity=bu(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,wr.Z)(n,[{key:"init",value:function(){var i=this.configService.get(),s=i.canvas,a=i.engineOptions;this.initPromise=this.engine.init(HS({canvas:s||ry(),swapChainFormat:Nn.EV.BGRA8Unorm,antialiasing:!1},a))}},{key:"setBundle",value:function(i){this.compiledBundle=JSON.parse(JSON.stringify(i))}},{key:"setDispatch",value:function(i){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=i),this}},{key:"setMaxIteration",value:function(i){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=i),this}},{key:"setBinding",value:function(i,s){var a=this;if(typeof i=="string"){var u=x2(s)||iy(s)||FM(s);if(this.compiledBundle&&this.compiledBundle.context){var h=this.compiledBundle.context.defines.find(function(g){return g.name===i});if(h)return h.value=s,this;var p=this.compiledBundle.context.uniforms.find(function(g){return g.name===i});p&&(u?(p.data=s,p.isReferer=!1,p.storageClass===Cd.Uniform?this.model&&this.model.updateUniform(i,s):this.model&&this.model.updateBuffer(i,s)):(p.isReferer=!0,p.data=s))}}else Object.keys(i).forEach(function(g){a.setBinding(g,i[g])});return this}},{key:"execute",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){var a=this,u,h,p=arguments;return cr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(u=p.length>0&&p[0]!==void 0?p[0]:1,!this.dirty){y.next=6;break}return this.compiledBundle.context&&(u>1?this.compiledBundle.context.maxIteration=u:this.compiledBundle.context.maxIteration++),y.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(x){var E=x.isReferer;return E}).forEach(function(x){var E=x.data,T=x.name;a.model.confirmInput(E.model,T)}),h=0;h<u;h++)this.model.run();return this.engine.endFrame(),y.abrupt("return",this);case 12:case"end":return y.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"getOutput",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){return cr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.model.readData());case 1:case"end":return u.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"compile",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){var a,u,h;return cr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.initPromise;case 2:return a=HS({},this.compiledBundle.context),u=this.engine.supportWebGPU?this.engine.useWGSL?Kg.WGSL:Kg.GLSL450:Kg.GLSL100,h=this.compiledBundle.shaders[u],a.defines.filter(function(y){return y.runtime}).forEach(function(y){var x="".concat(SC).concat(y.name);h=h.replace(x,"".concat(y.value))}),a.shader=h,a.uniforms.forEach(function(y){if(!y.data&&y.storageClass===Cd.StorageBuffer){var x=1;y.type===xd.FloatArray?x=1:y.type===xd.Vector4FloatArray&&(x=4),y.data=new Float32Array(a.output.length*x).fill(0)}}),this.compiledBundle.context=a,g.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=g.sent;case 12:case"end":return g.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()}]),n}(),jS),VS=_r(_2.prototype,"engine",[RC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GC=_r(_2.prototype,"configService",[kC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_2))||LC),WS,XS,ZS,FC,YS,KS,qS,JS=(WS=(0,z.b2)(),XS=(0,z.f3)(sn.MaterialComponentManager),WS(ZS=(FC=(qS=KS=function(){function n(){(0,hr.Z)(this,n),this.config=void 0,Sr(this,"material",YS,this),this.entity=void 0,this.component=void 0}return(0,wr.Z)(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(i){this.config=i}},{key:"setEntity",value:function(i,s){this.entity=i,this.component=this.material.create(i),this.component.entity=i,this.component.type=s,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),n}(),KS.BASIC="basic",qS),YS=_r(FC.prototype,"material",[XS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FC))||ZS),BC,QS,e_,t_,n_,tp,zC,pv,r_,UC,i_,o_,A2,s_,tg=(BC=(0,z.b2)(),QS=(0,z.f3)(sn.MeshComponentManager),e_=(0,z.f3)(sn.CullableComponentManager),t_=(0,z.f3)(sn.TransformComponentManager),n_=(0,z.f3)(sn.Systems),tp=(0,z.t6)(sn.SceneGraphSystem),BC(zC=(pv=(s_=A2=function(){function n(){(0,hr.Z)(this,n),this.attributes={},this.config=void 0,Sr(this,"mesh",r_,this),Sr(this,"cullable",UC,this),Sr(this,"transform",i_,this),Sr(this,"sceneGraphSystem",o_,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return(0,wr.Z)(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(i){this.config=i}},{key:"setEntity",value:function(i){this.entity=i,this.cullable.create(i),this.meshComponent=this.mesh.create(i),this.transformComponent=this.transform.create(i),this.onEntityCreated()}},{key:"setMaterial",value:function(i){return this.meshComponent.material=i,this}},{key:"setGeometry",value:function(i){return this.meshComponent.geometry=i,this}},{key:"setAttributes",value:function(i){var s=this;Object.keys(i).forEach(function(a){i[a]!==void 0&&i[a]!==s.attributes[a]&&(s.onAttributeChanged({name:a,data:i[a]}),s.attributes[a]=i[a])})}},{key:"setVisible",value:function(i){var s=this;return this.meshComponent.visible=i,this.meshComponent.children.forEach(function(a){var u=s.mesh.getComponentByEntity(a);u&&(u.visible=i)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(i){return this.sceneGraphSystem.attach(this.entity,i.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(i){var s=i.name,a=i.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(s),a)}},{key:"convertAttributeName2UniformName",value:function(i){return i}}]),n}(),A2.POINT="point",A2.LINE="line",A2.GRID="grid",s_),r_=_r(pv.prototype,"mesh",[QS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UC=_r(pv.prototype,"cullable",[e_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i_=_r(pv.prototype,"transform",[t_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o_=_r(pv.prototype,"sceneGraphSystem",[n_,tp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pv))||zC),iO=M(81550),oO=M.n(iO),sO=function(){function n(r,i){(0,hr.Z)(this,n),this.attribute=void 0,this.buffer=void 0;var s=i.buffer,a=i.offset,u=i.stride,h=i.normalized,p=i.size,g=i.divisor;this.buffer=s,this.attribute={buffer:s.get(),offset:a||0,stride:u||0,normalized:h||!1,divisor:g||0},p&&(this.attribute.size=p)}return(0,wr.Z)(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(i){this.buffer.subData(i)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),ef,gv,np,Sd,oy,nl,sy,vv,tf,Jg,Rc,_d,nf,ng,aO=(ef={},(0,kt.Z)(ef,gt.POINTS,"points"),(0,kt.Z)(ef,gt.LINES,"lines"),(0,kt.Z)(ef,gt.LINE_LOOP,"line loop"),(0,kt.Z)(ef,gt.LINE_STRIP,"line strip"),(0,kt.Z)(ef,gt.TRIANGLES,"triangles"),(0,kt.Z)(ef,gt.TRIANGLE_FAN,"triangle fan"),(0,kt.Z)(ef,gt.TRIANGLE_STRIP,"triangle strip"),ef),VC=(gv={},(0,kt.Z)(gv,gt.STATIC_DRAW,"static"),(0,kt.Z)(gv,gt.DYNAMIC_DRAW,"dynamic"),(0,kt.Z)(gv,gt.STREAM_DRAW,"stream"),gv),jC=(np={},(0,kt.Z)(np,gt.BYTE,"int8"),(0,kt.Z)(np,gt.UNSIGNED_INT,"int16"),(0,kt.Z)(np,gt.INT,"int32"),(0,kt.Z)(np,gt.UNSIGNED_BYTE,"uint8"),(0,kt.Z)(np,gt.UNSIGNED_SHORT,"uint16"),(0,kt.Z)(np,gt.UNSIGNED_INT,"uint32"),(0,kt.Z)(np,gt.FLOAT,"float"),np),a_=(Sd={},(0,kt.Z)(Sd,gt.ALPHA,"alpha"),(0,kt.Z)(Sd,gt.LUMINANCE,"luminance"),(0,kt.Z)(Sd,gt.LUMINANCE_ALPHA,"luminance alpha"),(0,kt.Z)(Sd,gt.RGB,"rgb"),(0,kt.Z)(Sd,gt.RGBA,"rgba"),(0,kt.Z)(Sd,gt.RGBA4,"rgba4"),(0,kt.Z)(Sd,gt.RGB5_A1,"rgb5 a1"),(0,kt.Z)(Sd,gt.RGB565,"rgb565"),(0,kt.Z)(Sd,gt.DEPTH_COMPONENT,"depth"),(0,kt.Z)(Sd,gt.DEPTH_STENCIL,"depth stencil"),Sd),cO=(oy={},(0,kt.Z)(oy,gt.DONT_CARE,"dont care"),(0,kt.Z)(oy,gt.NICEST,"nice"),(0,kt.Z)(oy,gt.FASTEST,"fast"),oy),c_=(nl={},(0,kt.Z)(nl,gt.NEAREST,"nearest"),(0,kt.Z)(nl,gt.LINEAR,"linear"),(0,kt.Z)(nl,gt.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,kt.Z)(nl,gt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,kt.Z)(nl,gt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,kt.Z)(nl,gt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),nl),l_=(sy={},(0,kt.Z)(sy,gt.REPEAT,"repeat"),(0,kt.Z)(sy,gt.CLAMP_TO_EDGE,"clamp"),(0,kt.Z)(sy,gt.MIRRORED_REPEAT,"mirror"),sy),T2=(vv={},(0,kt.Z)(vv,gt.NONE,"none"),(0,kt.Z)(vv,gt.BROWSER_DEFAULT_WEBGL,"browser"),vv),vh=(tf={},(0,kt.Z)(tf,gt.NEVER,"never"),(0,kt.Z)(tf,gt.ALWAYS,"always"),(0,kt.Z)(tf,gt.LESS,"less"),(0,kt.Z)(tf,gt.LEQUAL,"lequal"),(0,kt.Z)(tf,gt.GREATER,"greater"),(0,kt.Z)(tf,gt.GEQUAL,"gequal"),(0,kt.Z)(tf,gt.EQUAL,"equal"),(0,kt.Z)(tf,gt.NOTEQUAL,"notequal"),tf),u_=(Jg={},(0,kt.Z)(Jg,gt.FUNC_ADD,"add"),(0,kt.Z)(Jg,gt.MIN_EXT,"min"),(0,kt.Z)(Jg,gt.MAX_EXT,"max"),(0,kt.Z)(Jg,gt.FUNC_SUBTRACT,"subtract"),(0,kt.Z)(Jg,gt.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Jg),M2=(Rc={},(0,kt.Z)(Rc,gt.ZERO,"zero"),(0,kt.Z)(Rc,gt.ONE,"one"),(0,kt.Z)(Rc,gt.SRC_COLOR,"src color"),(0,kt.Z)(Rc,gt.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,kt.Z)(Rc,gt.SRC_ALPHA,"src alpha"),(0,kt.Z)(Rc,gt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,kt.Z)(Rc,gt.DST_COLOR,"dst color"),(0,kt.Z)(Rc,gt.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,kt.Z)(Rc,gt.DST_ALPHA,"dst alpha"),(0,kt.Z)(Rc,gt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,kt.Z)(Rc,gt.CONSTANT_COLOR,"constant color"),(0,kt.Z)(Rc,gt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,kt.Z)(Rc,gt.CONSTANT_ALPHA,"constant alpha"),(0,kt.Z)(Rc,gt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,kt.Z)(Rc,gt.SRC_ALPHA_SATURATE,"src alpha saturate"),Rc),lO=(_d={},(0,kt.Z)(_d,gt.NEVER,"never"),(0,kt.Z)(_d,gt.ALWAYS,"always"),(0,kt.Z)(_d,gt.LESS,"less"),(0,kt.Z)(_d,gt.LEQUAL,"lequal"),(0,kt.Z)(_d,gt.GREATER,"greater"),(0,kt.Z)(_d,gt.GEQUAL,"gequal"),(0,kt.Z)(_d,gt.EQUAL,"equal"),(0,kt.Z)(_d,gt.NOTEQUAL,"notequal"),_d),mv=(nf={},(0,kt.Z)(nf,gt.ZERO,"zero"),(0,kt.Z)(nf,gt.KEEP,"keep"),(0,kt.Z)(nf,gt.REPLACE,"replace"),(0,kt.Z)(nf,gt.INVERT,"invert"),(0,kt.Z)(nf,gt.INCR,"increment"),(0,kt.Z)(nf,gt.DECR,"decrement"),(0,kt.Z)(nf,gt.INCR_WRAP,"increment wrap"),(0,kt.Z)(nf,gt.DECR_WRAP,"decrement wrap"),nf),rp=(ng={},(0,kt.Z)(ng,gt.FRONT,"front"),(0,kt.Z)(ng,gt.BACK,"back"),ng),HC=function(){function n(r,i){(0,hr.Z)(this,n),this.buffer=void 0;var s=i.data,a=i.usage,u=i.type;this.buffer=r.buffer({data:s,usage:VC[a||gt.STATIC_DRAW],type:jC[u||gt.UNSIGNED_BYTE]})}return(0,wr.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(i){var s=i.data,a=i.offset;this.buffer.subdata(s,a)}}]),n}(),Wi=M(93433),uO=9007199254740991,dO="[object Arguments]",hO="[object Array]",fO="[object Boolean]",pO="[object Date]",gO="[object Error]",vO="[object Function]",mO="[object Map]",yO="[object Number]",bO="[object Object]",xO="[object RegExp]",Qg="[object Set]",d_="[object String]",h_="[object WeakMap]",f_="[object ArrayBuffer]",CO="[object DataView]",yv="[object Float32Array]",wu="[object Float64Array]",ha="[object Int8Array]",p_="[object Int16Array]",wO="[object Int32Array]",g_="[object Uint8Array]",EO="[object Uint8ClampedArray]",SO="[object Uint16Array]",_O="[object Uint32Array]",Mo={};Mo[yv]=Mo[wu]=Mo[ha]=Mo[p_]=Mo[wO]=Mo[g_]=Mo[EO]=Mo[SO]=Mo[_O]=!0,Mo[dO]=Mo[hO]=Mo[f_]=Mo[fO]=Mo[CO]=Mo[pO]=Mo[gO]=Mo[vO]=Mo[mO]=Mo[yO]=Mo[bO]=Mo[xO]=Mo[Qg]=Mo[d_]=Mo[h_]=!1;function ip(n){return function(r){return n(r)}}var $C=Object.prototype,WC=$C.toString;function AO(n){return MO(n)&&TO(n.length)&&!!Mo[WC.call(n)]}function TO(n){return typeof n=="number"&&n>-1&&n%1===0&&n<=uO}function MO(n){return!!n&&(0,Va.Z)(n)==="object"}var O2=AO;function v_(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function m_(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?v_(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):v_(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var OO=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,y_=0,P2=!1,PO=function(){function n(r,i){var s=this;(0,hr.Z)(this,n),this.reGl=r,this.context=i,this.entity=bu(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var a={};this.context.uniforms.forEach(function(y){var x=y.name,E=y.type,T=y.data,O=y.isReferer,N=y.storageClass;if(N===Cd.StorageBuffer){if(O)s.textureCache[x]={data:void 0},a["".concat(x,"Size")]=function(){return T.compiledBundle.context.output.textureSize};else{s.textureCache[x]=s.calcDataTexture(x,E,T);var k=s.textureCache[x],B=k.textureWidth,$=k.isOutput;a["".concat(x,"Size")]=[B,B],$&&(s.outputTextureName=x,s.context.needPingpong&&(s.outputTextureName="".concat(x,"Output"),s.textureCache[s.outputTextureName]=s.calcDataTexture(x,E,T)))}a[x]=function(){return P2&&console.log("[".concat(s.entity,"]: ").concat(x," ").concat(s.textureCache[x].id)),s.textureCache[x].texture}}else if(N===Cd.Uniform){if(T&&(Array.isArray(T)||O2(T))&&T.length>16)throw new Error("invalid data type ".concat(E));a[x]=function(){return y.data}}});var u=this.getOuputDataTexture(),h=u.textureWidth,p=u.texelCount;a.u_OutputTextureSize=[h,h],a.u_OutputTexelCount=p,this.context.output.textureSize=[h,h];var g={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:a,vert:OO,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(g)}return(0,wr.Z)(n,[{key:"run",value:function(){var i=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){i.computeCommand()}),P2&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){var a=this,u,h,p,g,y,x,E,T;return cr().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){u=a.reGl.read()}),!u){N.next=6;break}if(h=this.getOuputDataTexture(),p=h.originalDataLength,g=h.elementsPerTexel,y=h.typedArrayConstructor,x=y===void 0?Float32Array:y,E=[],g!==4)for(T=0;T<u.length;T+=4)g===1?E.push(u[T]):g===2?E.push(u[T],u[T+1]):E.push(u[T],u[T+1],u[T+2]);else E=u;return N.abrupt("return",new x(E.slice(0,p)));case 6:return N.abrupt("return",new Float32Array);case 7:case"end":return N.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"confirmInput",value:function(i,s){var a;this.entity===i.entity?(this.dynamicPingpong=!0,a=this):a=i,this.textureCache[s].id=a.getOuputDataTexture().id,this.textureCache[s].texture=a.getOuputDataTexture().texture,P2&&console.log("[".concat(this.entity,"]: confirm input ").concat(s," from model ").concat(a.entity,", ").concat(a.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=this.context.uniforms.find(function(y){var x=y.name;return x===i});if(u){var h=this.calcDataTexture(i,u.type,s),p=h.texture,g=h.data;this.textureCache[i].data=g,this.textureCache[i].texture=p}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var i=this.context.output.name;this.textureCache[i].id=this.getOuputDataTexture().id,this.textureCache[i].texture=this.getOuputDataTexture().texture}var s=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=s,P2&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var i=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=i}},{key:"cloneDataTexture",value:function(i){var s=i.data,a=i.textureWidth;return m_(m_({},i),{},{id:y_++,texture:this.reGl.texture({width:a,height:a,data:s,type:"float"})})}},{key:"calcDataTexture",value:function(i,s,a){var u=1;s===xd.Vector4FloatArray&&(u=4);for(var h=[],p=0;p<a.length;p+=u)u===1?h.push(a[p],0,0,0):u===2?h.push(a[p],a[p+1],0,0):u===3?h.push(a[p],a[p+1],a[p+2],0):u===4&&h.push(a[p],a[p+1],a[p+2],a[p+3]);var g=a.length,y=Math.ceil(g/u),x=Math.ceil(Math.sqrt(y)),E=x*x;y<E&&h.push.apply(h,(0,Wi.Z)(new Array((E-y)*4).fill(0)));var T=this.reGl.texture({width:x,height:x,data:h,type:"float"});return{id:y_++,data:h,originalDataLength:g,typedArrayConstructor:O2(a)?a.constructor:void 0,textureWidth:x,texture:T,texelCount:y,elementsPerTexel:u,isOutput:i===this.context.output.name}}}]),n}(),ay=function(){function n(r,i){(0,hr.Z)(this,n),this.elements=void 0;var s=i.data,a=i.usage,u=i.type,h=i.count;this.elements=r.elements({data:s,usage:VC[a||gt.STATIC_DRAW],type:jC[u||gt.UNSIGNED_BYTE],count:h})}return(0,wr.Z)(n,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(i){var s=i.data;this.elements.subdata(s)}},{key:"destroy",value:function(){this.elements.destroy()}}]),n}(),rg=function(){function n(r,i){(0,hr.Z)(this,n),this.framebuffer=void 0;var s=i.width,a=i.height,u=i.color,h=i.colors,p=i.depth,g=i.stencil,y={width:s,height:a};Array.isArray(h)&&(y.colors=h.map(function(x){return x.get()})),u&&typeof u!="boolean"&&(y.color=u.get()),this.framebuffer=r.framebuffer(y)}return(0,wr.Z)(n,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(i){var s=i.width,a=i.height;this.framebuffer.resize(s,a)}}]),n}();function DO(n){var r=(0,Va.Z)(n);return n!=null&&(r==="object"||r==="function")}function Ad(n){var r={};return Object.keys(n).forEach(function(i){XC(i,n[i],r,"")}),r}function XC(n,r,i,s){if(r===null||typeof r=="number"||typeof r=="boolean"||Array.isArray(r)&&typeof r[0]=="number"||O2(r)||r===""||r.resize!==void 0){i["".concat(s&&s+".").concat(n)]=r;return}DO(r)&&Object.keys(r).forEach(function(a){XC(a,r[a],i,"".concat(s&&s+".").concat(n))}),Array.isArray(r)&&r.forEach(function(a,u){Object.keys(a).forEach(function(h){XC(h,a[h],i,"".concat(s&&s+".").concat(n,"[").concat(u,"]"))})})}function b_(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function bv(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?b_(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):b_(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var NO=function(){function n(r,i){(0,hr.Z)(this,n),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=r;var s=i.vs,a=i.fs,u=i.defines,h=i.attributes,p=i.uniforms,g=i.primitive,y=i.count,x=i.elements,E=i.depth,T=i.blend,O=i.stencil,N=i.cull,k=i.instances,B=i.scissor,$=i.viewport,X={};p&&(this.uniforms=Ad(p),Object.keys(p).forEach(function(je){X[je]=r.prop(je)}));var ne={};Object.keys(h).forEach(function(je){ne[je]=h[je].get()});var be=u&&this.generateDefines(u)||"",me={attributes:ne,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(be,`
`).concat(a),uniforms:X,vert:`
`.concat(be,`
`).concat(s),primitive:aO[g===void 0?gt.TRIANGLES:g]};k&&(me.instances=k),y&&(me.count=y),x&&(me.elements=x.get()),B&&(me.scissor=B),$&&(me.viewport=$),this.initDepthDrawParams({depth:E},me),this.initBlendDrawParams({blend:T},me),this.initStencilDrawParams({stencil:O},me),this.initCullDrawParams({cull:N},me),this.drawCommand=r(me)}return(0,wr.Z)(n,[{key:"addUniforms",value:function(i){this.uniforms=bv(bv({},this.uniforms),Ad(i))}},{key:"draw",value:function(i){var s=bv(bv({},this.uniforms),Ad(i.uniforms||{})),a={};Object.keys(s).forEach(function(u){var h=(0,Va.Z)(s[u]);h==="boolean"||h==="number"||Array.isArray(s[u])||s[u].BYTES_PER_ELEMENT?a[u]=s[u]:h==="string"||(a[u]=s[u].get())}),this.drawCommand(a)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(i,s){var a=i.depth;a&&(s.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:vh[a.func||gt.LESS],range:a.range||[0,1]})}},{key:"initBlendDrawParams",value:function(i,s){var a=i.blend;if(a){var u=a.enable,h=a.func,p=a.equation,g=a.color,y=g===void 0?[0,0,0,0]:g;s.blend={enable:!!u,func:{srcRGB:M2[h&&h.srcRGB||gt.SRC_ALPHA],srcAlpha:M2[h&&h.srcAlpha||gt.SRC_ALPHA],dstRGB:M2[h&&h.dstRGB||gt.ONE_MINUS_SRC_ALPHA],dstAlpha:M2[h&&h.dstAlpha||gt.ONE_MINUS_SRC_ALPHA]},equation:{rgb:u_[p&&p.rgb||gt.FUNC_ADD],alpha:u_[p&&p.alpha||gt.FUNC_ADD]},color:y}}}},{key:"initStencilDrawParams",value:function(i,s){var a=i.stencil;if(a){var u=a.enable,h=a.mask,p=h===void 0?-1:h,g=a.func,y=g===void 0?{cmp:gt.ALWAYS,ref:0,mask:-1}:g,x=a.opFront,E=x===void 0?{fail:gt.KEEP,zfail:gt.KEEP,zpass:gt.KEEP}:x,T=a.opBack,O=T===void 0?{fail:gt.KEEP,zfail:gt.KEEP,zpass:gt.KEEP}:T;s.stencil={enable:!!u,mask:p,func:bv(bv({},y),{},{cmp:lO[y.cmp]}),opFront:{fail:mv[E.fail],zfail:mv[E.zfail],zpass:mv[E.zpass]},opBack:{fail:mv[O.fail],zfail:mv[O.zfail],zpass:mv[O.zpass]}}}}},{key:"initCullDrawParams",value:function(i,s){var a=i.cull;if(a){var u=a.enable,h=a.face,p=h===void 0?gt.BACK:h;s.cull={enable:!!u,face:rp[p]}}}},{key:"generateDefines",value:function(i){return Object.keys(i).map(function(s){return"#define ".concat(s," ").concat(Number(i[s]))}).join(`
`)}}]),n}(),IO=function(){function n(r,i){(0,hr.Z)(this,n),this.texture=void 0,this.width=void 0,this.height=void 0;var s=i.data,a=i.type,u=a===void 0?gt.UNSIGNED_BYTE:a,h=i.width,p=i.height,g=i.flipY,y=g===void 0?!1:g,x=i.format,E=x===void 0?gt.RGBA:x,T=i.mipmap,O=T===void 0?!1:T,N=i.wrapS,k=N===void 0?gt.CLAMP_TO_EDGE:N,B=i.wrapT,$=B===void 0?gt.CLAMP_TO_EDGE:B,X=i.aniso,ne=X===void 0?0:X,be=i.alignment,me=be===void 0?1:be,je=i.premultiplyAlpha,it=je===void 0?!1:je,ct=i.mag,Zt=ct===void 0?gt.NEAREST:ct,At=i.min,Yt=At===void 0?gt.NEAREST:At,st=i.colorSpace,Bn=st===void 0?gt.BROWSER_DEFAULT_WEBGL:st;this.width=h,this.height=p;var kn={width:h,height:p,type:jC[u],format:a_[E],wrapS:l_[k],wrapT:l_[$],mag:c_[Zt],min:c_[Yt],alignment:me,flipY:y,colorSpace:T2[Bn],premultiplyAlpha:it,aniso:ne};s&&(kn.data=s),typeof O=="number"?kn.mipmap=cO[O]:typeof O=="boolean"&&(kn.mipmap=O),this.texture=r.texture(kn)}return(0,wr.Z)(n,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(i){var s=i.width,a=i.height;this.texture.resize(s,a),this.width=s,this.height=a}},{key:"destroy",value:function(){this.texture.destroy()}}]),n}(),x_,C_,w_,RO=(x_=(0,z.b2)(),x_(C_=(w_=function(){function n(){var r=this;(0,hr.Z)(this,n),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var i=(0,Ji.Z)(cr().mark(function s(a){return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!a.uniforms){h.next=3;break}return h.next=3,Promise.all(Object.keys(a.uniforms).map(function(){var p=(0,Ji.Z)(cr().mark(function g(y){var x;return cr().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!(a.uniforms[y]&&a.uniforms[y].load!==void 0)){T.next=5;break}return T.next=3,a.uniforms[y].load();case 3:x=T.sent,a.uniforms[y]=x;case 5:case"end":return T.stop()}},g)}));return function(g){return p.apply(this,arguments)}}()));case 3:return h.abrupt("return",new NO(r.gl,a));case 4:case"end":return h.stop()}},s)}));return function(s){return i.apply(this,arguments)}}(),this.createAttribute=function(i){return new sO(r.gl,i)},this.createBuffer=function(i){return new HC(r.gl,i)},this.createElements=function(i){return new ay(r.gl,i)},this.createTexture2D=function(i){return new IO(r.gl,i)},this.createFramebuffer=function(i){return new rg(r.gl,i)},this.useFramebuffer=function(i,s){r.gl({framebuffer:i?i.get():null})(s)},this.createComputeModel=function(){var i=(0,Ji.Z)(cr().mark(function s(a){return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",new PO(r.gl,a));case 1:case"end":return h.stop()}},s)}));return function(s){return i.apply(this,arguments)}}(),this.clear=function(i){var s=i.color,a=i.depth,u=i.stencil,h=i.framebuffer,p=h===void 0?null:h,g={color:s,depth:a,stencil:u};g.framebuffer=p===null?p:p.get(),r.gl.clear(g)},this.setScissor=function(i){r.gl&&r.gl._gl&&(i.enable&&i.box?(r.gl._gl.enable(gt.SCISSOR_TEST),r.gl._gl.scissor(i.box.x,i.box.y,i.box.width,i.box.height)):r.gl._gl.disable(gt.SCISSOR_TEST),r.gl._refresh())},this.viewport=function(i){var s=i.x,a=i.y,u=i.width,h=i.height;r.gl&&r.gl._gl&&(r.gl._gl.viewport(s,a,u,h),r.gl._refresh())},this.readPixels=function(i){var s=i.framebuffer,a=i.x,u=i.y,h=i.width,p=i.height,g={x:a,y:u,width:h,height:p};return s&&(g.framebuffer=s.get()),r.gl.read(g)},this.getCanvas=function(){return r.$canvas},this.getGLContext=function(){return r.gl._gl},this.destroy=function(){r.gl&&(r.gl.destroy(),r.inited=!1)}}return(0,wr.Z)(n,[{key:"init",value:function(){var r=(0,Ji.Z)(cr().mark(function s(a){return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.inited){h.next=2;break}return h.abrupt("return");case 2:return this.$canvas=a.canvas,h.next=5,new Promise(function(p,g){oO()({canvas:a.canvas,attributes:{alpha:!0,antialias:a.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(x,E){(x||!E)&&g(x),p(E)}})});case 5:this.gl=h.sent,this.inited=!0;case 7:case"end":return h.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),n}(),w_))||C_);function E_(){return typeof window<"u"}function S_(n,r,i,s){if(!!E_()){var a=document.getElementsByTagName("head")[0],u=document.createElement("script");u.setAttribute("type","text/javascript"),u.setAttribute("src",n),s&&(u.id=s),u.onload=function(){r&&r()},u.onerror=function(h){i&&i("Unable to load script '".concat(n,"'"),h)},a.appendChild(u)}}function __(n,r){return new Promise(function(i,s){S_(n,function(){i()},function(a,u){s(u)})})}var D2;function kO(){return N2.apply(this,arguments)}function N2(){return N2=(0,Ji.Z)(cr().mark(function n(){return cr().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!D2){i.next=2;break}return i.abrupt("return",D2);case 2:return i.next=4,__("https://preview.babylonjs.com/glslang/glslang.js");case 4:return D2=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),i.abrupt("return",D2);case 6:case"end":return i.stop()}},n)})),N2.apply(this,arguments)}var e0=function(){function n(r,i){(0,hr.Z)(this,n),this.engine=r,this.options=i,this.attribute=void 0,this.buffer=void 0;var s=i,a=s.buffer,u=s.offset,h=s.stride,p=s.normalized,g=s.size,y=s.divisor,x=s.arrayStride,E=s.attributes,T=s.stepMode;this.buffer=a,this.attribute={buffer:a.get(),offset:u||0,stride:h||0,normalized:p||!1,divisor:y||0,arrayStride:x||0,attributes:E,stepMode:T||"vertex"},g&&(this.attribute.size=g)}return(0,wr.Z)(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(i){this.buffer.subData(i)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),Zl=function(){function n(r,i){(0,hr.Z)(this,n),this.engine=r,this.options=i,this.buffer=void 0;var s=i,a=s.data,u=s.usage,h=s.type;this.buffer=this.createBuffer(a instanceof Array?new Float32Array(a):a,u||Nn.FB.Vertex|Nn.FB.CopyDst)}return(0,wr.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(i){var s=i.data,a=i.offset;this.setSubData(this.buffer,a,s instanceof Array?new Float32Array(s):s)}},{key:"createBuffer",value:function(i,s){var a=i.byteLength%4,u={size:i.byteLength+a,usage:s},h=this.engine.device.createBuffer(u);return this.setSubData(h,0,i),h}},{key:"setSubData",value:function(i,s,a){var u=Ic?this.engine.device.getQueue():this.engine.device.defaultQueue;u.writeBuffer(i,s,a)}}]),n}();function LO(n){return typeof n=="number"}var cy=function(){function n(r,i){(0,hr.Z)(this,n),this.engine=r,this.context=i,this.entity=bu(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return(0,wr.Z)(n,[{key:"init",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){var a=this,u,h,p,g,y,x,E;return cr().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:u=O.sent,h=u.computeStage,p=this.context.uniforms.filter(function(N){return N.storageClass===Cd.StorageBuffer}),g=this.context.uniforms.filter(function(N){return N.storageClass===Cd.Uniform}),y=g.length?1:0,this.bindGroupEntries=[],y&&(x=0,E=[],g.forEach(function(N){if(LO(N.data))a.uniformGPUBufferLayout.push({name:N.name,offset:x}),x+=4,E.push(N.data);else{var k,B=((k=N.data)===null||k===void 0?void 0:k.length)||1;B===3&&(B=4,N.data.push(0));var $=x/4%4;if($>0){var X=4-$;if(B>1&&B<=X)B===2&&(X===3&&(x+=4,E.push(0)),E.push.apply(E,(0,Wi.Z)(N.data)),a.uniformGPUBufferLayout.push({name:N.name,offset:x}));else{for(var ne=0;ne<X;ne++)x+=4,E.push(0);E.push.apply(E,(0,Wi.Z)(N.data)),a.uniformGPUBufferLayout.push({name:N.name,offset:x})}}x+=4*B}}),this.uniformBuffer=new Zl(this.engine,{data:E instanceof Array?new Float32Array(E):E,usage:Nn.FB.Uniform|Nn.FB.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),p.forEach(function(N){if(N.data!==null&&(N.type===xd.Vector4FloatArray||N.type===xd.FloatArray)){var k;N.name===a.context.output.name?(k=new Zl(a.engine,{data:isFinite(Number(N.data))?[N.data]:N.data,usage:Nn.FB.Storage|Nn.FB.CopyDst|Nn.FB.CopySrc}),a.outputBuffer=k,a.context.output={name:N.name,length:isFinite(Number(N.data))?1:N.data.length,typedArrayConstructor:Float32Array,gpuBuffer:k.get()}):N.isReferer?N.data.model&&N.data.model.outputBuffer&&(k=N.data.model.outputBuffer):k=new Zl(a.engine,{data:isFinite(Number(N.data))?[N.data]:N.data,usage:Nn.FB.Storage|Nn.FB.CopyDst|Nn.FB.CopySrc}),a.vertexBuffers[N.name]=k,a.bindGroupEntries.push({binding:y,resource:{name:N.name,refer:k?void 0:N.data,buffer:k?k.get():void 0}}),y++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:h}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return O.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"destroy",value:function(){var i=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(s){return i.vertexBuffers[s].destroy()})}},{key:"readData",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){var a,u,h,p,g,y,x,E,T,O;return cr().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(a=this.context.output,!a){k.next=16;break}if(u=a.length,h=a.typedArrayConstructor,p=a.gpuBuffer,!p){k.next=16;break}return g=u*h.BYTES_PER_ELEMENT,y=this.engine.device.createBuffer({size:g,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),x=this.engine.device.createCommandEncoder(),x.copyBufferToBuffer(p,0,y,0,g),E=Ic?this.engine.device.getQueue():this.engine.device.defaultQueue,E.submit([x.finish()]),k.next=12,y.mapAsync(Nn.gc.Read);case 12:return T=y.getMappedRange(),O=new h(T.slice(0)),y.unmap(),k.abrupt("return",O);case 16:return k.abrupt("return",new Float32Array);case 17:case"end":return k.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"run",value:function(){if(this.engine.currentComputePass){var i;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(i=this.engine.currentComputePass).dispatch.apply(i,(0,Wi.Z)(this.context.dispatch))}}},{key:"updateBuffer",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=this.vertexBuffers[i];u&&u.subData({data:s,offset:a})}},{key:"updateUniform",value:function(i,s){var a=this.uniformGPUBufferLayout.find(function(u){return u.name===i});a&&this.uniformBuffer.subData({data:Number.isFinite(s)?new Float32Array([s]):new Float32Array(s),offset:a.offset})}},{key:"confirmInput",value:function(i,s){var a=this.vertexBuffers[s],u=i.outputBuffer;if(a&&u&&a!==u){var h=this.engine.device.createCommandEncoder(),p=i.context.output,g=p.length,y=p.typedArrayConstructor,x=g*y.BYTES_PER_ELEMENT;h.copyBufferToBuffer(u.get(),0,a.get(),0,x);var E=Ic?this.engine.device.getQueue():this.engine.device.defaultQueue;E.submit([h.finish()])}}},{key:"compileShaderToSpirV",value:function(i,s,a){return this.compileRawShaderToSpirV(a+i,s)}},{key:"compileRawShaderToSpirV",value:function(i,s){return this.engine.glslang.compileGLSL(i,s)}},{key:"compileComputePipelineStageDescriptor",value:function(){var r=(0,Ji.Z)(cr().mark(function s(a){var u,h;return cr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(u=a,h=`#version 450
`,this.engine.options.useWGSL){g.next=6;break}return g.next=5,this.compileShaderToSpirV(a,"compute",h);case 5:u=g.sent;case 6:return g.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:u,isWHLSL:Ic}),entryPoint:"main"}});case 7:case"end":return g.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()}]),n}(),mh=function(){function n(r,i){(0,hr.Z)(this,n),this.engine=r,this.options=i,this.indexCount=void 0,this.buffer=void 0;var s=i,a=s.data,u=s.usage,h=s.type,p=s.count;this.indexCount=p||0,this.buffer=new Zl(r,{data:a instanceof Array?new Uint16Array(a):a,usage:Nn.FB.Index|Nn.FB.CopyDst})}return(0,wr.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(i){this.buffer.subData(i)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),UP=function(){function n(r,i){(0,hr.Z)(this,n),this.engine=r,this.options=i,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var s=i,a=s.width,u=s.height,h=s.color,p=s.colors,g=s.depth,y=s.stencil;h&&(this.colorTexture=h),g&&(this.depthTexture=g)}return(0,wr.Z)(n,[{key:"get",value:function(){var i,s;return{color:(i=this.colorTexture)===null||i===void 0?void 0:i.get(),depth:(s=this.depthTexture)===null||s===void 0?void 0:s.get()}}},{key:"destroy",value:function(){var i,s;(i=this.colorTexture)===null||i===void 0||i.destroy(),(s=this.depthTexture)===null||s===void 0||s.destroy()}},{key:"resize",value:function(i){var s=i.width,a=i.height;if(s!==this.width||a!==this.height){var u,h;(u=this.colorTexture)===null||u===void 0||u.resize({width:s,height:a}),(h=this.depthTexture)===null||h===void 0||h.resize({width:s,height:a})}this.width=s,this.height=a}}]),n}(),rf,Ss,ig,Sl,op,og,t0,n0=(rf={},(0,kt.Z)(rf,gt.POINTS,Nn.YV.PointList),(0,kt.Z)(rf,gt.LINES,Nn.YV.LineList),(0,kt.Z)(rf,gt.LINE_LOOP,Nn.YV.LineList),(0,kt.Z)(rf,gt.LINE_STRIP,Nn.YV.LineStrip),(0,kt.Z)(rf,gt.TRIANGLES,Nn.YV.TriangleList),(0,kt.Z)(rf,gt.TRIANGLE_FAN,Nn.YV.TriangleList),(0,kt.Z)(rf,gt.TRIANGLE_STRIP,Nn.YV.TriangleStrip),rf),r0=(Ss={},(0,kt.Z)(Ss,gt.NEVER,Nn.wb.Never),(0,kt.Z)(Ss,gt.ALWAYS,Nn.wb.Always),(0,kt.Z)(Ss,gt.LESS,Nn.wb.Less),(0,kt.Z)(Ss,gt.LEQUAL,Nn.wb.LessEqual),(0,kt.Z)(Ss,gt.GREATER,Nn.wb.Greater),(0,kt.Z)(Ss,gt.GEQUAL,Nn.wb.GreaterEqual),(0,kt.Z)(Ss,gt.EQUAL,Nn.wb.Equal),(0,kt.Z)(Ss,gt.NOTEQUAL,Nn.wb.NotEqual),Ss),ZC=(ig={},(0,kt.Z)(ig,gt.FUNC_ADD,Nn.db.Add),(0,kt.Z)(ig,gt.MIN_EXT,Nn.db.Min),(0,kt.Z)(ig,gt.MAX_EXT,Nn.db.Max),(0,kt.Z)(ig,gt.FUNC_SUBTRACT,Nn.db.Subtract),(0,kt.Z)(ig,gt.FUNC_REVERSE_SUBTRACT,Nn.db.ReverseSubtract),ig),Ai=(Sl={},(0,kt.Z)(Sl,gt.ZERO,Nn.zi.Zero),(0,kt.Z)(Sl,gt.ONE,Nn.zi.One),(0,kt.Z)(Sl,gt.SRC_COLOR,Nn.zi.SrcColor),(0,kt.Z)(Sl,gt.ONE_MINUS_SRC_COLOR,Nn.zi.OneMinusSrcColor),(0,kt.Z)(Sl,gt.SRC_ALPHA,Nn.zi.SrcAlpha),(0,kt.Z)(Sl,gt.ONE_MINUS_SRC_ALPHA,Nn.zi.OneMinusSrcAlpha),(0,kt.Z)(Sl,gt.DST_COLOR,Nn.zi.DstColor),(0,kt.Z)(Sl,gt.ONE_MINUS_DST_COLOR,Nn.zi.OneMinusDstColor),(0,kt.Z)(Sl,gt.DST_ALPHA,Nn.zi.DstAlpha),(0,kt.Z)(Sl,gt.ONE_MINUS_DST_ALPHA,Nn.zi.OneMinusDstAlpha),(0,kt.Z)(Sl,gt.CONSTANT_COLOR,Nn.zi.BlendColor),(0,kt.Z)(Sl,gt.ONE_MINUS_CONSTANT_COLOR,Nn.zi.OneMinusBlendColor),(0,kt.Z)(Sl,gt.SRC_ALPHA_SATURATE,Nn.zi.SrcAlphaSaturated),Sl),YC=(op={},(0,kt.Z)(op,gt.ALPHA,"r8unorm"),(0,kt.Z)(op,gt.RGBA,"rgba8unorm"),(0,kt.Z)(op,gt.DEPTH_COMPONENT,"depth32float"),(0,kt.Z)(op,gt.DEPTH_STENCIL,"depth24plus-stencil8"),op),A_=(og={},(0,kt.Z)(og,gt.NEAREST,"nearest"),(0,kt.Z)(og,gt.LINEAR,"linear"),og),I2=(t0={},(0,kt.Z)(t0,gt.REPEAT,"repeat"),(0,kt.Z)(t0,gt.CLAMP_TO_EDGE,"clamp-to-edge"),(0,kt.Z)(t0,gt.MIRRORED_REPEAT,"mirror-repeat"),t0);function T_(n){var r=n.cull;if(!r||!r.enable)return Nn.Wf.None;if(r.face)return r.face===gt.FRONT?Nn.Wf.Front:Nn.Wf.Back}function GO(n){var r=n.depth,i=n.stencil,s={compare:Nn.wb.Always,depthFailOp:Nn.xS.Keep,failOp:Nn.xS.Keep,passOp:Nn.xS.Keep};return{depthWriteEnabled:r&&r.enable,depthCompare:r0[r?.func||gt.ALWAYS],format:Nn.EV.Depth24PlusStencil8,stencilFront:s,stencilBack:s,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function FO(n,r){var i=n.blend;return[{format:r,alphaBlend:{srcFactor:Ai[i&&i.func&&i.func.srcAlpha||gt.ONE],dstFactor:Ai[i&&i.func&&i.func.dstAlpha||gt.ZERO],operation:ZC[i&&i.equation&&i.equation.alpha||gt.FUNC_ADD]},colorBlend:{srcFactor:Ai[i&&i.func&&i.func.srcRGB||gt.ONE],dstFactor:Ai[i&&i.func&&i.func.dstRGB||gt.ZERO],operation:ZC[i&&i.equation&&i.equation.rgb||gt.FUNC_ADD]},writeMask:Nn.Yw.All}]}function M_(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function xv(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?M_(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):M_(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function i0(n){for(var r=0,i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];for(var u=0,h=s;u<h.length;u++){var p=h[u];r+=p.length}for(var g=new n(r),y=0,x=0,E=s;x<E.length;x++){var T=E[x];g.set(T,y),y+=T.length}return g}var BO=function(){function n(r,i){(0,hr.Z)(this,n),this.engine=r,this.options=i,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return(0,wr.Z)(n,[{key:"init",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){var a=this,u,h,p,g,y,x,E,T,O,N,k,B,$,X,ne,be,me,je;return cr().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return u=this.options,h=u.vs,p=u.fs,g=u.attributes,y=u.uniforms,x=u.primitive,E=u.count,T=u.elements,O=u.depth,N=u.blend,k=u.stencil,B=u.cull,$=u.instances,ct.next=3,this.compilePipelineStageDescriptor(h,p,null);case 3:X=ct.sent,ne=X.vertexStage,be=X.fragmentStage,y&&this.buildUniformBindGroup(y),T&&(this.indexBuffer=T.get(),this.indexCount=T.indexCount),me={vertexBuffers:Object.keys(g).map(function(Zt,At){var Yt=g[Zt],st=Yt.get(),Bn=st.arrayStride,kn=st.stepMode,Jn=st.attributes;return a.attributeCache[Zt]=Yt,{arrayStride:Bn,stepMode:kn,attributes:Jn}})},je={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:n0[x||gt.TRIANGLES],rasterizationState:xv(xv({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:T_({cull:B})}),depthStencilState:GO({depth:O,stencil:k}),colorStates:FO({blend:N},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:ne,fragmentStage:be,vertexState:me},this.renderPipeline=this.engine.device.createRenderPipeline(je);case 11:case"end":return ct.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"addUniforms",value:function(i){this.uniforms=xv(xv({},this.uniforms),Ad(i))}},{key:"draw",value:function(i){var s=this,a=this.engine.getCurrentRenderPass(),u=xv(xv({},this.uniforms),Ad(i.uniforms||{})),h=[];Object.keys(u).forEach(function(p){var g=(0,Va.Z)(u[p]);if(g==="boolean"||g==="number"||Array.isArray(u[p])||u[p].BYTES_PER_ELEMENT){var y,x=(y=s.uniformGPUBufferLayout.find(function($){var X=$.name;return X===p}))===null||y===void 0?void 0:y.offset;x!==null&&s.uniformBuffer.subData({data:u[p],offset:x})}else{var E,T=(E=s.uniformGPUBufferLayout.find(function($){var X=$.name;return X===p}))===null||E===void 0?void 0:E.offset;if(T!==null){var O=u[p].get(),N=O.color||O,k=N.texture,B=N.sampler;B&&(h.push({binding:T,resource:B}),T++),h.push({binding:T,resource:k.createView()})}}}),this.uniformBuffer&&(h[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:h}),this.renderPipeline&&a.setPipeline(this.renderPipeline),a.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&a.setIndexBuffer(this.indexBuffer.get(),Nn.iD.Uint32,0),Object.keys(this.attributeCache).forEach(function(p,g){a.setVertexBuffer(0+g,s.attributeCache[p].get().buffer,0)}),this.indexBuffer?a.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):a.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var r=(0,Ji.Z)(cr().mark(function s(a,u,h){var p,g,y;return cr().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(p=`#version 450
`,g=a,y=u,this.engine.options.useWGSL){E.next=10;break}return E.next=6,this.compileShaderToSpirV(a,"vertex",p);case 6:return g=E.sent,E.next=9,this.compileShaderToSpirV(u,"fragment",p);case 9:y=E.sent;case 10:return E.abrupt("return",this.createPipelineStageDescriptor(g,y));case 11:case"end":return E.stop()}},s,this)}));function i(s,a,u){return r.apply(this,arguments)}return i}()},{key:"compileShaderToSpirV",value:function(i,s,a){return this.compileRawShaderToSpirV(a+i,s)}},{key:"compileRawShaderToSpirV",value:function(i,s){return this.engine.glslang.compileGLSL(i,s)}},{key:"createPipelineStageDescriptor",value:function(i,s){return{vertexStage:{module:this.engine.device.createShaderModule({code:i,isWHLSL:Ic}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:s,isWHLSL:Ic}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:Nn.zX.CCW,cullMode:Nn.Wf.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(i){var s=this,a=0,u=i0.apply(void 0,[Float32Array].concat((0,Wi.Z)(Object.keys(i).map(function(g){return i[g]?(s.uniformGPUBufferLayout.push({name:g,offset:a}),a+=(i[g].length||1)*4,i[g]):[]})))),h=[],p=!1;u.length&&(p=!0,h.push({binding:0,visibility:Nn.$X.Fragment|Nn.$X.Vertex,type:Nn.$l.UniformBuffer})),Object.keys(i).filter(function(g){return i[g]===null}).forEach(function(g,y){s.uniformGPUBufferLayout.push({name:g,offset:y*2+(p?1:0)}),h.push({binding:y*2+(p?1:0),visibility:Nn.$X.Fragment,type:Nn.$l.Sampler},{binding:y*2+(p?1:0)+1,visibility:Nn.$X.Fragment,type:Nn.$l.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:h}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),p&&(this.uniformBuffer=new Zl(this.engine,{data:u instanceof Array?new Float32Array(u):u,usage:Nn.FB.Uniform|Nn.FB.CopyDst}))}}]),n}(),Xi=function(){function n(r,i){(0,hr.Z)(this,n),this.engine=r,this.options=i,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return(0,wr.Z)(n,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(i){var s=i.width,a=i.height;(s!==this.width||a!==this.height)&&(this.destroy(),this.createTexture()),this.width=s,this.height=a}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var i=this.options,s=i.data,a=i.type,u=a===void 0?gt.UNSIGNED_BYTE:a,h=i.width,p=i.height,g=i.flipY,y=g===void 0?!1:g,x=i.format,E=x===void 0?gt.RGBA:x,T=i.mipmap,O=T===void 0?!1:T,N=i.wrapS,k=N===void 0?gt.CLAMP_TO_EDGE:N,B=i.wrapT,$=B===void 0?gt.CLAMP_TO_EDGE:B,X=i.aniso,ne=X===void 0?0:X,be=i.alignment,me=be===void 0?1:be,je=i.premultiplyAlpha,it=je===void 0?!1:je,ct=i.mag,Zt=ct===void 0?gt.NEAREST:ct,At=i.min,Yt=At===void 0?gt.NEAREST:At,st=i.colorSpace,Bn=st===void 0?gt.BROWSER_DEFAULT_WEBGL:st,kn=i.usage;this.width=h,this.height=p,this.texture=this.engine.device.createTexture({size:[h,p,1],mipLevelCount:1,sampleCount:1,dimension:Nn.kd.E2d,format:YC[E],usage:kn||Nn.v2.Sampled|Nn.v2.CopyDst}),(!kn||kn&Nn.v2.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:I2[k],addressModeV:I2[$],addressModeW:I2[k],magFilter:A_[Zt],minFilter:A_[Yt],maxAnisotropy:ne}))}}]),n}(),o0,KC,O_,Gs=(o0=(0,z.b2)(),o0(KC=(O_=function(){function n(){var r=this;(0,hr.Z)(this,n),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(i){var s=i.framebuffer,a=i.color,u=i.depth,h=i.stencil;r.options.supportCompute&&r.startComputePass(),r.currentRenderTarget?(r.currentRenderPass&&r.endRenderTargetRenderPass(),r.startRenderTargetRenderPass(r.currentRenderTarget,a||null,!!u,!!h)):(r.mainColorAttachments[0].loadValue=a||Nn.Ws.Load,r.mainDepthAttachment.depthLoadValue=u||Nn.Ws.Load,r.mainDepthAttachment.stencilLoadValue=h?r.clearStencilValue:Nn.Ws.Load,r.mainRenderPass&&r.endMainRenderPass(),r.startMainRenderPass())},this.createModel=function(){var i=(0,Ji.Z)(cr().mark(function s(a){var u;return cr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u=new BO(r,a),p.next=3,u.init();case 3:return p.abrupt("return",u);case 4:case"end":return p.stop()}},s)}));return function(s){return i.apply(this,arguments)}}(),this.createAttribute=function(i){return new e0(r,i)},this.createBuffer=function(i){return new Zl(r,i)},this.createElements=function(i){return new mh(r,i)},this.createTexture2D=function(i){return new Xi(r,i)},this.createFramebuffer=function(i){return new UP(r,i)},this.useFramebuffer=function(i,s){r.currentRenderTarget&&r.unbindFramebuffer(r.currentRenderTarget),r.currentRenderTarget=i,r.currentRenderTargetViewDescriptor={dimension:Nn.p_.E2d,arrayLayerCount:1,aspect:Nn.H7.All},r.currentRenderPass=null,s()},this.createComputeModel=function(){var i=(0,Ji.Z)(cr().mark(function s(a){var u;return cr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u=new cy(r,a),p.next=3,u.init();case 3:return p.abrupt("return",u);case 4:case"end":return p.stop()}},s)}));return function(s){return i.apply(this,arguments)}}(),this.getCanvas=function(){return r.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(i){var s=i.x,a=i.y,u=i.width,h=i.height;if(!r.currentRenderPass)r.transientViewport={x:s,y:a,width:u,height:h};else if(r.transientViewport.x!==1/0){var p=r.getCurrentRenderPass();p.setViewport(r.transientViewport.x,r.transientViewport.y,r.transientViewport.width,r.transientViewport.height,0,1)}else if(s!==r.cachedViewport.x||a!==r.cachedViewport.y||u!==r.cachedViewport.width||h!==r.cachedViewport.height){r.cachedViewport={x:s,y:a,width:u,height:h};var g=r.getCurrentRenderPass();g.setViewport(s,a,u,h,0,1)}},this.readPixels=function(i){throw new Error("Method not implemented.")}}return(0,wr.Z)(n,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var r=(0,Ji.Z)(cr().mark(function s(a){return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return this.canvas=a.canvas,this.options=a,this.useWGSL=!!a.useWGSL,this.mainPassSampleCount=a.antialiasing?this.defaultSampleCount:1,h.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return h.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setScissor",value:function(i){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(i){return i.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),Ic?this.device.getQueue().submit(this.commandBuffers.filter(function(i){return i})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(i){return i}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){var a,u;return cr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,kO();case 2:return this.glslang=p.sent,p.next=5,(a=navigator)===null||a===void 0||(u=a.gpu)===null||u===void 0?void 0:u.requestAdapter();case 5:return this.adapter=p.sent,p.next=8,this.adapter.requestDevice();case 8:this.device=p.sent;case 9:case"end":return p.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(Ic?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Nn.v2.OutputAttachment|Nn.v2.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var i={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Nn.kd.E2d,format:Nn.EV.BGRA8Unorm,usage:Nn.v2.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(i),this.mainColorAttachments=[{attachment:Ic?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Nn.EG.Store}]}else this.mainColorAttachments=[{attachment:Ic?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Nn.EG.Store}];var s={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Nn.kd.E2d,format:Ic?"depth32float-stencil8":Nn.EV.Depth24PlusStencil8,usage:Nn.v2.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(s),this.mainDepthAttachment={attachment:Ic?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Nn.EG.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Nn.EG.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=Ic?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=Ic?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(i,s,a){var u,h,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,g=(u=i.get().color)===null||u===void 0?void 0:u.texture,y;g&&(y=g.createView(this.currentRenderTargetViewDescriptor));var x=(h=i.get().depth)===null||h===void 0?void 0:h.texture,E;x&&(E=x.createView());var T=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:y,loadValue:s!==null?s:Nn.Ws.Load,storeOp:Nn.EG.Store}],depthStencilAttachment:x&&E?{attachment:E,depthLoadValue:a?this.clearDepthValue:Nn.Ws.Load,depthStoreOp:Nn.EG.Store,stencilLoadValue:p?this.clearStencilValue:Nn.Ws.Load,stencilStoreOp:Nn.EG.Store}:void 0});this.currentRenderPass=T,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(i){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),n}(),O_))||KC),Ma,qC;function P_(n){var r=sg();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function sg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var JC=4/64,ly=1-JC*2,uy=(Ma=(0,z.b2)(),Ma(qC=function(n){(0,za.Z)(i,n);var r=P_(i);function i(){return(0,hr.Z)(this,i),r.apply(this,arguments)}return(0,wr.Z)(i,[{key:"onEntityCreated",value:function(){var a=this.config,u=a.widthSegments,h=u===void 0?1:u,p=a.heightSegments,g=p===void 0?1:p,y=a.depthSegments,x=y===void 0?1:y,E=a.halfExtents,T=E===void 0?St.al(.5,.5,.5):E,O=h,N=g,k=x,B=(0,xu.Z)(T,3),$=B[0],X=B[1],ne=B[2],be=[St.al(-$,-X,ne),St.al($,-X,ne),St.al($,X,ne),St.al(-$,X,ne),St.al($,-X,-ne),St.al(-$,-X,-ne),St.al(-$,X,-ne),St.al($,X,-ne)],me=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],je=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],it={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},ct=[],Zt=[],At=[],Yt=[],st=[],Bn=0,kn=function(Xr,Ho,na){var pi,ra,ja,In;for(ja=0;ja<=Ho;ja++)for(In=0;In<=na;In++){var yr=St.Ue(),Fi=St.Ue(),Yi=St.Ue(),mo=St.Ue();St.t7(yr,be[me[Xr][0]],be[me[Xr][1]],ja/Ho),St.t7(Fi,be[me[Xr][0]],be[me[Xr][2]],In/na),St.lu(Yi,Fi,be[me[Xr][0]]),St.IH(mo,yr,Yi),pi=ja/Ho,ra=In/na,ct.push(mo[0],mo[1],mo[2]),Zt.push(je[Xr][0],je[Xr][1],je[Xr][2]),At.push(pi,ra),pi/=3,ra/=3,pi=pi*ly+JC,ra=ra*ly+JC,pi+=Xr%3/3,ra+=Math.floor(Xr/3)/3,Yt.push(pi,ra),ja<Ho&&In<na&&(st.push(Bn+na+1,Bn+1,Bn),st.push(Bn+na+1,Bn+na+2,Bn+1)),Bn++}};kn(it.FRONT,O,N),kn(it.BACK,O,N),kn(it.TOP,O,k),kn(it.BOTTOM,O,k),kn(it.RIGHT,k,N),kn(it.LEFT,k,N);var Jn=ty(ct),Li=this.getComponent();Li.indices=Uint32Array.from(st),Li.aabb=Jn,Li.vertexCount=Bn,Li.attributes=[{dirty:!0,name:"position",data:Float32Array.from(ct),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(Zt),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(At),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),i}(gh))||qC);function dy(n,r){if(!n&&!r)throw new Error("Please specify valid arguments for parameters a and b.");if(!r||r.length===0)return n;if(!n||n.length===0)return r;if(Object.prototype.toString.call(n)!==Object.prototype.toString.call(r))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var i=new n.constructor(n.length+r.length);return i.set(n),i.set(r,n.length),i}var hy,D_;function zO(n){var r=UO();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function UO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var R2=(hy=(0,z.b2)(),hy(D_=function(n){(0,za.Z)(i,n);var r=zO(i);function i(){return(0,hr.Z)(this,i),r.apply(this,arguments)}return(0,wr.Z)(i,[{key:"onEntityCreated",value:function(){var a=this.config.geometries,u=a===void 0?[]:a,h=this.getComponent();h.aabb=new $x;var p=[],g=[],y=0;u.forEach(function(x){var E=x.aabb,T=x.indices,O=x.vertexCount,N=x.attributes;h.aabb.add(E),h.vertexCount+=O,T&&g.push.apply(g,(0,Wi.Z)(T.map(function(k){return k+y}))),y+=O,N.forEach(function(k,B){p[B]?k.data&&(x2(k.data)?p[B].push(k.data):iy(k.data)?p[B].data=dy(p[B].data,k.data):p[B].data=p[B].data.concat(k.data)):(p[B]=k,p[B].dirty=!0)})}),h.attributes=p,h.indices=Uint32Array.from(g),h.dirty=!0}}]),i}(gh))||D_),N_,I_;function Cv(n){var r=R_();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function R_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var s0=(N_=(0,z.b2)(),N_(I_=function(n){(0,za.Z)(i,n);var r=Cv(i);function i(){return(0,hr.Z)(this,i),r.apply(this,arguments)}return(0,wr.Z)(i,[{key:"onEntityCreated",value:function(){for(var a=this.config,u=a.halfExtents,h=u===void 0?[.5,.5]:u,p=a.widthSegments,g=p===void 0?5:p,y=a.lengthSegments,x=y===void 0?5:y,E=[],T=[],O=[],N=[],k=0,B=0;B<=g;B++)for(var $=0;$<=x;$++){var X=-h[0]+2*h[0]*B/g,ne=0,be=-(-h[1]+2*h[1]*$/x),me=B/g,je=$/x;E.push(X,ne,be),T.push(0,1,0),O.push(me,je),B<g&&$<x&&(N.push(k+x+1,k+1,k),N.push(k+x+1,k+x+2,k+1)),k++}var it=ty(E),ct=this.getComponent();ct.indices=Uint32Array.from(N),ct.aabb=it,ct.vertexCount=k,ct.attributes=[{dirty:!0,name:"position",data:Float32Array.from(E),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(T),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(O),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),i}(gh))||I_),ag,k_;function VO(n){var r=jO();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function jO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var HO=(ag=(0,z.b2)(),ag(k_=function(n){(0,za.Z)(i,n);var r=VO(i);function i(){return(0,hr.Z)(this,i),r.apply(this,arguments)}return(0,wr.Z)(i,[{key:"onEntityCreated",value:function(){for(var a=this.config,u=a.radius,h=u===void 0?.5:u,p=a.latitudeBands,g=p===void 0?16:p,y=a.longitudeBands,x=y===void 0?16:y,E=[],T=[],O=[],N=[],k=0;k<=g;k++)for(var B=k*Math.PI/g,$=Math.sin(B),X=Math.cos(B),ne=0;ne<=x;ne++){var be=ne*2*Math.PI/x-Math.PI/2,me=Math.sin(be),je=Math.cos(be),it=je*$,ct=X,Zt=me*$,At=1-ne/x,Yt=1-k/g;E.push(it*h,ct*h,Zt*h),T.push(it,ct,Zt),O.push(At,Yt)}for(var st=0;st<g;++st)for(var Bn=0;Bn<x;++Bn){var kn=st*(x+1)+Bn,Jn=kn+x+1;N.push(kn+1,Jn,kn),N.push(kn+1,Jn+1,Jn)}var Li=ty(E),Gi=this.getComponent();Gi.indices=Uint32Array.from(N),Gi.aabb=Li,Gi.vertexCount=E.length/3,Gi.attributes=[{dirty:!0,name:"position",data:Float32Array.from(E),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(T),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(O),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),i}(gh))||k_),L_,G_,F_,B_,k2,of,fy,QC;function VP(n){var r=$O();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function $O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var WO=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,jP=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,XO=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,a0=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,ZO=(L_=(0,z.b2)(),G_=(0,z.f3)(sn.RenderEngine),F_=(0,z.f3)(sn.ShaderModuleService),L_(B_=(k2=(QC=function(n){(0,za.Z)(i,n);var r=VP(i);function i(){var s;(0,hr.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),Sr(s,"engine",of,(0,ms.Z)(s)),Sr(s,"shaderModuleService",fy,(0,ms.Z)(s)),s}return(0,wr.Z)(i,[{key:"onEntityCreated",value:function(){var a=this.getComponent(),u=this.engine.supportWebGPU?a0:jP,h=this.engine.supportWebGPU?XO:WO;this.shaderModuleService.registerModule("material-basic",{vs:u,fs:h});var p=this.shaderModuleService.getModule("material-basic"),g=p.vs,y=p.fs,x=p.uniforms;a.vertexShaderGLSL=g,a.fragmentShaderGLSL=y,a.setUniform(x),this.config.map&&(a.setDefines({USE_UV:1,USE_MAP:1}),a.setUniform({map:this.config.map,uvTransform:Rs.Ue()}))}}]),i}(JS),QC),of=_r(k2.prototype,"engine",[G_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fy=_r(k2.prototype,"shaderModuleService",[F_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k2))||B_),z_,ew,U_,YO,V_,cg,py,lg,j_,tw,H_,$_;function KO(n){var r=qO();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function qO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var c0=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,JO=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,QO=(z_=(0,z.b2)(),ew=(0,z.f3)(sn.Systems),U_=(0,z.t6)(sn.MaterialSystem),YO=(0,z.f3)(sn.Systems),V_=(0,z.t6)(sn.GeometrySystem),cg=(0,z.f3)(sn.ShaderModuleService),z_(py=(lg=($_=function(n){(0,za.Z)(i,n);var r=KO(i);function i(){var s;(0,hr.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),Sr(s,"materialSystem",j_,(0,ms.Z)(s)),Sr(s,"geometrySystem",tw,(0,ms.Z)(s)),Sr(s,"shaderModuleService",H_,(0,ms.Z)(s)),s}return(0,wr.Z)(i,[{key:"onAttributeChanged",value:function(a){var u=a.name,h=a.data,p=this.getMeshComponent();p&&p.material&&(u==="gridColor"?(p.material.setUniform("u_GridColor",h),p.material.setUniform("u_GridColor2",h)):u==="gridSize"&&(p.material.setUniform("u_GridSize",h),p.material.setUniform("u_GridSize2",h)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:JO,fs:c0});var a=this.shaderModuleService.getModule("grid"),u=a.vs,h=a.fs,p=a.uniforms,g=this.materialSystem.createShaderMaterial({vertexShader:u,fragmentShader:h});this.setMaterial(g);var y=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(y),g.setCull({enable:!1,face:gt.BACK}).setDepth({enable:!0,func:gt.LESS}),g.setUniform(p),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),y.setIndex([0,3,2,2,1,0]),y.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),i}(tg),$_),j_=_r(lg.prototype,"materialSystem",[ew,U_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tw=_r(lg.prototype,"geometrySystem",[YO,V_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H_=_r(lg.prototype,"shaderModuleService",[cg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lg))||py),l0=M(32644),sf=M(40582);function gy(n,r,i,s,a){wv(r,s,-a),wv(r,s,a),n.push(i),n.push(i)}function wv(n,r,i){n.push([[r[0],r[1]],i])}function e3(n,r,i){var s=[0,0],a=[0,0],u=[0,0],h=[0,0],p=-1,g=!1,y=null,x=(0,l0.create)(),E=i||0,T=3,O=[],N=[],k=[],B=[0,0];r&&(n=n.slice(),n.push(n[0]));for(var $=n.length,X=1;X<$;X++){var ne=E,be=n[X-1],me=n[X],je=X<n.length-1?n[X+1]:null;if(B.push(X/$,X/$),(0,sf.o7)(s,me,be),y||(y=[0,0],(0,sf.mJ)(y,s)),g||(g=!0,gy(N,O,be,y,1)),k.push([ne+0,ne+1,ne+2]),!je)(0,sf.mJ)(y,s),gy(N,O,me,y,1),k.push(p===1?[ne,ne+2,ne+3]:[ne+2,ne+1,ne+3]),E+=2;else{(0,sf.o7)(a,je,me);var it=(0,sf.x7)(u,h,s,a,1),ct=(0,l0.dot)(u,y)<0?-1:1,Zt=it>T;if(!isFinite(it)){(0,sf.mJ)(y,s),gy(N,O,me,y,1),k.push(p===1?[ne,ne+2,ne+3]:[ne+2,ne+1,ne+3]),E+=2,p=ct;continue}Zt?(it=T,B.push(X/$),wv(O,y,-ct),N.push(me),wv(O,h,it*ct),N.push(me),k.push(p!==-ct?[ne,ne+2,ne+3]:[ne+2,ne+1,ne+3]),k.push([ne+2,ne+3,ne+4]),(0,sf.mJ)(x,a),(0,l0.copy)(y,x),wv(O,y,-ct),N.push(me),E+=3):(gy(N,O,me,h,it),k.push(p===1?[ne,ne+2,ne+3]:[ne+2,ne+1,ne+3]),ct=-1,(0,l0.copy)(y,h),E+=2),p=ct}}return{normals:O,attrIndex:k,attrPos:N,attrCounters:B}}var W_,nw,Eu,X_,sp,Z_,rw,Ev,Y_,K_,iw,ow;function q_(n){var r=t3();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function t3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var sw=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,n3=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,J_=(W_=(0,z.b2)(),nw=(0,z.f3)(sn.Systems),Eu=(0,z.t6)(sn.MaterialSystem),X_=(0,z.f3)(sn.Systems),sp=(0,z.t6)(sn.GeometrySystem),Z_=(0,z.f3)(sn.ShaderModuleService),W_(rw=(Ev=(ow=function(n){(0,za.Z)(i,n);var r=q_(i);function i(){var s;(0,hr.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),Sr(s,"materialSystem",Y_,(0,ms.Z)(s)),Sr(s,"geometrySystem",K_,(0,ms.Z)(s)),Sr(s,"shaderModuleService",iw,(0,ms.Z)(s)),s.vertexCount=void 0,s}return(0,wr.Z)(i,[{key:"onAttributeChanged",value:function(a){var u=a.name,h=a.data,p=this.getMeshComponent();if(p&&p.material)switch(u){case"dashArray":p.material.setUniform("u_dash_array",h);break;case"dashOffset":p.material.setUniform("u_dash_offset",h);break;case"dashRatio":p.material.setUniform("u_dash_ratio",h);break;case"thickness":p.material.setUniform("u_thickness",h);break;case"color":var g=new Array(this.vertexCount).fill(void 0).map(function(){return h}).reduce(function(y,x){return[].concat((0,Wi.Z)(y),(0,Wi.Z)(x))},[]);p.geometry.setAttribute("a_color",Float32Array.from(g),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var a=this;this.shaderModuleService.registerModule("line",{vs:n3,fs:sw});var u=this.shaderModuleService.getModule("line"),h=u.vs,p=u.fs,g=u.uniforms,y=this.materialSystem.createShaderMaterial({vertexShader:h,fragmentShader:p}),x=e3(this.config.points,!1),E=x.normals,T=x.attrIndex,O=x.attrPos,N=x.attrCounters,k=O.length;this.vertexCount=k;var B=this.geometrySystem.createBufferGeometry({vertexCount:k});this.setMaterial(y),this.setGeometry(B),y.setCull({enable:!1,face:gt.BACK}).setUniform(g),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var $=[],X=[];E.forEach(function(be){var me=be[0],je=be[1];$.push([me[0],me[1]]),X.push(je)}),B.setIndex(T.reduce(function(be,me){return[].concat((0,Wi.Z)(be),(0,Wi.Z)(me))},[])),B.setAttribute("a_pos",Float32Array.from(O.reduce(function(be,me){return[].concat((0,Wi.Z)(be),(0,Wi.Z)(me))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var ne=new Array(k).fill(void 0).map(function(){return(0,Wi.Z)(a.config.color)}).reduce(function(be,me){return[].concat((0,Wi.Z)(be),(0,Wi.Z)(me))},[]);B.setAttribute("a_color",Float32Array.from(ne),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),B.setAttribute("a_line_miter",Float32Array.from(X),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),B.setAttribute("a_line_normal",Float32Array.from($.reduce(function(be,me){return[].concat((0,Wi.Z)(be),(0,Wi.Z)(me))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),B.setAttribute("a_counters",Float32Array.from(N),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),i}(tg),ow),Y_=_r(Ev.prototype,"materialSystem",[nw,Eu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K_=_r(Ev.prototype,"geometrySystem",[X_,sp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iw=_r(Ev.prototype,"shaderModuleService",[Z_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ev))||rw);function r3(n){return[n+1&255,n+1>>8&255,n+1>>8>>8&255]}var Q_,aw,eA,Sv,vy,_v,L2,Av,cw,tA,nA,rA;function lw(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function i3(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?lw(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):lw(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function o3(n){var r=s3();return function(){var s=(0,so.Z)(n),a;if(r){var u=(0,so.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,To.Z)(this,a)}}function s3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var Tv=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,a3=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,ap=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],c3=(Q_=(0,z.b2)(),aw=(0,z.f3)(sn.Systems),eA=(0,z.t6)(sn.MaterialSystem),Sv=(0,z.f3)(sn.Systems),vy=(0,z.t6)(sn.GeometrySystem),_v=(0,z.f3)(sn.ShaderModuleService),Q_(L2=(Av=(rA=function(n){(0,za.Z)(i,n);var r=o3(i);function i(){var s;(0,hr.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),Sr(s,"materialSystem",cw,(0,ms.Z)(s)),Sr(s,"geometrySystem",tA,(0,ms.Z)(s)),Sr(s,"shaderModuleService",nA,(0,ms.Z)(s)),s}return(0,wr.Z)(i,[{key:"onAttributeChanged",value:function(a){var u=a.name,h=a.data,p=this.getMeshComponent();p&&p.material&&(u==="strokeWidth"?p.material.setUniform("u_stroke_width",h):u==="strokeColor"?p.material.setUniform("u_stroke_color",h):u==="strokeOpacity"?p.material.setUniform("u_stroke_opacity",h):u==="opacity"?p.material.setUniform("u_opacity",h):u==="blur"&&p.material.setUniform("u_blur",h))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:a3,fs:Tv});var a=this.shaderModuleService.getModule("grid"),u=a.vs,h=a.fs,p=a.uniforms,g=this.materialSystem.createShaderMaterial({vertexShader:u,fragmentShader:h,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:gt.SRC_ALPHA,dstRGB:gt.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});g.setUniform(i3({u_device_pixel_ratio:window.devicePixelRatio},p));var y=this.buildAttributes(),x=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:y.instancedOffsets.length/2,vertexCount:6});x.setIndex([0,2,1,0,3,2]),x.setAttribute("position",Float32Array.from(y.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),x.setAttribute("offset",Float32Array.from(y.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),x.setAttribute("color",Float32Array.from(y.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),x.setAttribute("size",Float32Array.from(y.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),x.setAttribute("shape",Float32Array.from(y.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),x.setAttribute("a_PickingColor",Float32Array.from(y.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(g),this.setGeometry(x)}},{key:"buildAttribute",value:function(a,u,h){var p,g,y,x;(p=u.instancedPickingColors).push.apply(p,(0,Wi.Z)(r3(a.id||h))),u.instancedShapes.push(ap.indexOf(a.shape||"circle")),(g=u.instancedColors).push.apply(g,(0,Wi.Z)(a.color||[1,0,0,1])),(y=u.instancedOffsets).push.apply(y,(0,Wi.Z)(a.position||[0,0])),(x=u.instancedSizes).push.apply(x,(0,Wi.Z)(a.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var a=this,u={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(h,p){a.buildAttribute(h,u,p)}):this.buildAttribute(this.config,u,0),u}}]),i}(tg),rA),cw=_r(Av.prototype,"materialSystem",[aw,eA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tA=_r(Av.prototype,"geometrySystem",[Sv,vy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nA=_r(Av.prototype,"shaderModuleService",[_v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Av))||L2),iA,oA,sA,uw,my,ug,aA,G2,cA,dw;function lA(n,r){var i;if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=uA(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function uA(n,r){if(!!n){if(typeof n=="string")return dA(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return dA(n,r)}}function dA(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var yy=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,F2=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,l3=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,dg=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,u3=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,Mv=(iA=(0,z.b2)(),oA=(0,z.f3)(sn.RenderEngine),sA=(0,z.f3)(sn.ShaderModuleService),uw=(0,z.f3)(sn.ConfigService),iA(my=(ug=(dw=function(){function n(){(0,hr.Z)(this,n),this.container=void 0,Sr(this,"engine",aA,this),Sr(this,"shaderModule",G2,this),Sr(this,"configService",cA,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return(0,wr.Z)(n,[{key:"init",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){var a,u,h,p,g;return cr().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:dg}),this.shaderModule.registerModule("uv.vert.main",{vs:u3}),this.shaderModule.registerModule("uv.frag.declaration",{fs:l3}),this.shaderModule.registerModule("map.frag.declaration",{fs:yy}),this.shaderModule.registerModule("map.frag.main",{fs:F2}),a=this.container.getAll(sn.Systems),u=this.configService.get(),!u.canvas){x.next=30;break}return x.next=11,this.engine.init({canvas:u.canvas,swapChainFormat:Nn.EV.BGRA8Unorm,antialiasing:!1});case 11:h=lA(a),x.prev=12,h.s();case 14:if((p=h.n()).done){x.next=21;break}if(g=p.value,!g.initialize){x.next=19;break}return x.next=19,g.initialize();case 19:x.next=14;break;case 21:x.next=26;break;case 23:x.prev=23,x.t0=x.catch(12),h.e(x.t0);case 26:return x.prev=26,h.f(),x.finish(26);case 29:this.inited=!0;case 30:case"end":return x.stop()}},s,this,[[12,23,26,29]])}));function i(){return r.apply(this,arguments)}return i}()},{key:"render",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){var a,u,h,p,g,y,x,E=arguments;return cr().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(!this.inited||this.rendering)){O.next=2;break}return O.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(N){N()}),this.rendering=!0,this.engine.beginFrame(),a=this.container.getAll(sn.Systems),u=E.length,h=new Array(u),p=0;p<u;p++)h[p]=E[p];g=lA(a),O.prev=8,g.s();case 10:if((y=g.n()).done){O.next=17;break}if(x=y.value,!x.execute){O.next=15;break}return O.next=15,x.execute(h);case 15:O.next=10;break;case 17:O.next=22;break;case 19:O.prev=19,O.t0=O.catch(8),g.e(O.t0);case 22:return O.prev=22,g.f(),O.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return O.stop()}},s,this,[[8,19,22,25]])}));function i(){return r.apply(this,arguments)}return i}()},{key:"clear",value:function(i){var s=this;return this.inited?this.engine.clear(i):this.pendings.unshift(function(){s.engine.clear(i),s.pendings.shift()}),this}},{key:"setSize",value:function(i){var s=i.width,a=i.height,u=this.engine.getCanvas();return this.size={width:s,height:a},u.width=s,u.height=a,this}},{key:"getSize",value:function(){return this.size}}]),n}(),dw),aA=_r(ug.prototype,"engine",[oA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G2=_r(ug.prototype,"shaderModule",[sA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cA=_r(ug.prototype,"configService",[uw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ug))||my),hA,hw,fA,fw=(hA=(0,z.b2)(),hA(hw=(fA=function(){function n(){(0,hr.Z)(this,n),this.entities=[]}return(0,wr.Z)(n,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(i){return this.addEntity(i.getEntity()),this}},{key:"removeRenderable",value:function(i){return this.removeEntity(i.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(i){return this.entities.indexOf(i)===-1&&this.entities.push(i),this}},{key:"removeEntity",value:function(i){var s=this.entities.indexOf(i);return this.entities.splice(s,1),this}}]),n}(),fA))||hw),Ti,u0,pA,by=(Ti=(0,z.b2)(),Ti(u0=(pA=function(){function n(){(0,hr.Z)(this,n),this.cache={}}return(0,wr.Z)(n,[{key:"get",value:function(i){return this.cache[i]}},{key:"set",value:function(i,s){this.cache[i]=s}}]),n}(),pA))||u0),ys,gA,sc,vA,B2,z2,Ov,yh;function d3(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function h3(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?d3(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):d3(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var f3=(ys=(0,z.b2)(),gA=(0,z.f3)(by),sc=(0,z.f3)(sn.RenderEngine),ys(vA=(B2=(yh=function(){function n(){(0,hr.Z)(this,n),Sr(this,"textureCache",z2,this),Sr(this,"engine",Ov,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return(0,wr.Z)(n,[{key:"setConfig",value:function(i){this.config=i}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){var a=this;return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.config.url){h.next=4;break}return h.abrupt("return",new Promise(function(p,g){var y=a.textureCache.get(a.config.url);if(y)p(y);else{var x=new Image;x.crossOrigin="Anonymous",x.src=a.config.url,x.onload=function(){var E=a.engine.createTexture2D(h3(h3({},a.config),{},{data:x,width:x.width,height:x.height,flipY:!0}));a.textureCache.set(a.config.url,E),a.texture=E,a.loaded=!0,p(E)},x.onerror=function(){g()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),h.abrupt("return",this.texture);case 7:case"end":return h.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()}]),n}(),yh),z2=_r(B2.prototype,"textureCache",[gA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ov=_r(B2.prototype,"engine",[sc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B2))||vA),p3,g3,v3,mA,U2,m3,y3,xy=(p3=(0,z.b2)(),g3=(0,z.f3)(sn.Systems),v3=(0,z.t6)(sn.RendererSystem),p3(mA=(U2=(y3=function(){function n(){(0,hr.Z)(this,n),Sr(this,"rendererSystem",m3,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return(0,wr.Z)(n,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(i){return this.camera=i,this}},{key:"setScene",value:function(i){return this.scene=i,this}},{key:"setViewport",value:function(i){return this.viewport=i,this}},{key:"setClearColor",value:function(i){return this.clearColor=i,this}},{key:"pick",value:function(i){return this.rendererSystem.pick(i,this)}}]),n}(),y3),m3=_r(U2.prototype,"rendererSystem",[g3,v3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U2))||mA),ss,yA,af,bc,pw,gw;function vw(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function kc(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?vw(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):vw(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var Su=(ss=(0,z.b2)(),yA=(0,z.f3)(sn.ConfigService),ss(af=(bc=(gw=function(){function n(){(0,hr.Z)(this,n),Sr(this,"configService",pw,this),this.container=void 0}return(0,wr.Z)(n,[{key:"getEngine",value:function(){var r=(0,Ji.Z)(cr().mark(function s(){var a,u,h,p;return cr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return a=this.container.get(sn.RenderEngine),u=this.configService.get(),h=u.canvas,p=u.engineOptions,y.next=4,a.init(kc({canvas:h||ry(),swapChainFormat:Nn.EV.BGRA8Unorm,antialiasing:!1},p));case 4:return y.abrupt("return",a);case 5:case"end":return y.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"getTransformComponent",value:function(i){var s=this.container.get(sn.TransformComponentManager);return s.getComponentByEntity(i)}},{key:"getMeshComponent",value:function(i){var s=this.container.get(sn.MeshComponentManager);return s.getComponentByEntity(i)}},{key:"setConfig",value:function(i){this.configService.set(i)}},{key:"setContainer",value:function(i){this.container=i}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return bu()}},{key:"createScene",value:function(){return this.container.get(fw)}},{key:"createCamera",value:function(){return this.container.get(MC)}},{key:"createView",value:function(){return this.container.get(xy)}},{key:"createRenderable",value:function(i,s){var a=i?this.container.getNamed(sn.Renderable,i):this.container.get(tg),u=bu();return a.setConfig(s||{}),a.setEntity(u),a}},{key:"createGeometry",value:function(i,s){var a=this.container.getNamed(sn.Geometry,i),u=bu();return a.setConfig(s||{}),a.setEntity(u),a.getComponent()}},{key:"createMaterial",value:function(i,s){var a=this.container.getNamed(sn.Material,i),u=bu();return a.setConfig(s||{}),a.setEntity(u,i),a.getComponent()}},{key:"createTexture2D",value:function(i){var s=this.container.get(f3);return s.setConfig(i),s}},{key:"createBufferGeometry",value:function(i){var s=this.container.getNamed(sn.Systems,sn.GeometrySystem);return s.createBufferGeometry(i)}},{key:"createInstancedBufferGeometry",value:function(i){var s=this.container.getNamed(sn.Systems,sn.GeometrySystem);return s.createInstancedBufferGeometry(i)}},{key:"createShaderMaterial",value:function(i){var s=this.container.getNamed(sn.Systems,sn.MaterialSystem);return s.createShaderMaterial(i)}},{key:"createKernel",value:function(i){var s=this.container.get($S);return typeof i=="string"?s.setBundle(JSON.parse(i)):s.setBundle(i),s.init(),s}},{key:"createRenderer",value:function(){var i=this.container.get(Mv);return i.container=this.container,i.init(),i}},{key:"destroy",value:function(){var i=this.container.getAll(sn.Systems);i.forEach(function(u){u.tearDown&&u.tearDown()});var s=this.container.get(sn.RenderEngine);s.destroy();var a=this.container.get(sn.InteractorService);a.destroy()}}],[{key:"create",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=AM(),a=navigator.gpu?Gs:RO;s.isBound(sn.RenderEngine)||s.bind(sn.RenderEngine).to(a).inSingletonScope(),s.bind(Mv).toSelf(),s.bind($S).toSelf(),s.bind(tg).toSelf(),s.bind(xy).toSelf(),s.bind(MC).toSelf(),s.bind(fw).toSelf(),s.bind(n).toSelf(),s.bind(by).toSelf(),s.bind(f3).toSelf(),s.bind(sn.Geometry).to(uy).whenTargetNamed(gh.BOX),s.bind(sn.Geometry).to(HO).whenTargetNamed(gh.SPHERE),s.bind(sn.Geometry).to(s0).whenTargetNamed(gh.PLANE),s.bind(sn.Geometry).to(R2).whenTargetNamed(gh.MERGED),s.bind(sn.Material).to(ZO).whenTargetNamed(JS.BASIC),s.bind(sn.Renderable).to(c3).whenTargetNamed(tg.POINT),s.bind(sn.Renderable).to(J_).whenTargetNamed(tg.LINE),s.bind(sn.Renderable).to(QO).whenTargetNamed(tg.GRID);var u=s.get(n);return u.setContainer(s),u.setConfig(i),u}}]),n}(),gw),pw=_r(bc.prototype,"configService",[yA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bc))||af);const cp=(n,r)=>{let i;return n?Wn(n)?i=()=>n:i=n:i=()=>r||1,i},V2=(n,r)=>{const i=[],s=[],a={};let u=0;for(u=0;u<n.length;u++){const p=n[u];a[p.id]=u,i.push(p.x),i.push(p.y),i.push(0),i.push(0),s.push([])}for(u=0;u<r.length;u++){const p=r[u],g=xi(p,"source"),y=xi(p,"target");s[a[g]].push(a[y]),s[a[y]].push(a[g])}let h=0;for(u=0;u<n.length;u++){const p=i.length,g=s[u],y=g.length;i[u*4+2]=p,i[u*4+3]=g.length,h=Math.max(h,g.length);for(let x=0;x<y;++x){const E=g[x];i.push(+E)}}for(;i.length%4!==0;)i.push(0);return{maxEdgePerVetex:h,array:new Float32Array(i)}},HP=(n,r,i,s)=>{const a=[],u=[],h={};let p=0;for(p=0;p<n.length;p++){const y=n[p];h[y.id]=p,a.push(y.x),a.push(y.y),a.push(0),a.push(0),u.push([])}for(p=0;p<r.length;p++){const y=r[p],x=xi(y,"source"),E=xi(y,"target");u[h[x]].push(h[E]),u[h[x]].push(i(y)),u[h[x]].push(s(y)),u[h[x]].push(0),u[h[E]].push(h[x]),u[h[E]].push(i(y)),u[h[E]].push(s(y)),u[h[E]].push(0)}let g=0;for(p=0;p<n.length;p++){const y=a.length,x=u[p],E=x.length;a[p*4+2]=y+1048576*E/4,a[p*4+3]=0,g=Math.max(g,E/4);for(let T=0;T<E;++T){const O=x[T];a.push(+O)}}for(;a.length%4!==0;)a.push(0);return{maxEdgePerVetex:g,array:new Float32Array(a)}},b3=(n,r)=>{const i=[],s=n.length,a={};return r.forEach(u=>{n.forEach((h,p)=>{if(a[u[h]]===void 0&&(a[u[h]]=Object.keys(a).length),i.push(a[u[h]]),p===s-1)for(;i.length%4!==0;)i.push(0)})}),{array:new Float32Array(i),count:Object.keys(a).length}},cf=n=>{const r=[],i=n.length,s=n[0].length;for(let a=0;a<s;a++)n.forEach((u,h)=>{if(r.push(u[a]),h===i-1)for(;r.length%4!==0;)r.push(0)});return new Float32Array(r)},iN=null,$P='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',oN=null,mw='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var yw=function(n,r,i,s){function a(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(x){try{y(s.next(x))}catch(E){h(E)}}function g(x){try{y(s.throw(x))}catch(E){h(E)}}function y(x){x.done?u(x.value):a(x.value).then(p,g)}y((s=s.apply(n,r||[])).next())})};class WP extends ds{constructor(r){super(),this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return yw(this,void 0,void 0,function*(){const r=this,i=r.nodes;if(!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const s=r.center;if(i.length===1){i[0].x=s[0],i[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}const a={},u={};i.forEach((h,p)=>{Wn(h.x)||(h.x=Math.random()*this.width),Wn(h.y)||(h.y=Math.random()*this.height),a[h.id]=h,u[h.id]=p}),r.nodeMap=a,r.nodeIdxMap=u,yield r.run()})}executeWithWorker(r,i){return yw(this,void 0,void 0,function*(){const s=this,a=s.nodes,u=s.center;if(!a||a.length===0)return;if(a.length===1){a[0].x=u[0],a[0].y=u[1];return}const h={},p={};a.forEach((g,y)=>{Wn(g.x)||(g.x=Math.random()*this.width),Wn(g.y)||(g.y=Math.random()*this.height),h[g.id]=g,p[g.id]=y}),s.nodeMap=h,s.nodeIdxMap=p,yield s.run(r,i)})}run(r,i){return yw(this,void 0,void 0,function*(){const s=this,a=s.nodes,u=s.edges,h=s.maxIteration,p=s.center,g=s.height*s.width;let y=Math.sqrt(g)/10;const x=g/(a.length+1),E=Math.sqrt(x),T=s.speed,O=s.clustering,{array:N,count:k}=b3([s.clusterField],a);a.forEach((At,Yt)=>{let st=0,Bn=0;Wn(At.fx)&&Wn(At.fy)&&(st=At.fx||.001,Bn=At.fy||.001),N[4*Yt+1]=st,N[4*Yt+2]=Bn});const B=a.length,{maxEdgePerVetex:$,array:X}=V2(a,u),ne=s.workerEnabled;let be;ne?be=Su.create({canvas:r,engineOptions:{supportCompute:!0}}):be=Su.create({engineOptions:{supportCompute:!0}});const me=s.onLayoutEnd,je=[];for(let At=0;At<k;At++)je.push(0,0,0,0);const it=be.createKernel($P).setDispatch([B,1,1]).setBinding({u_Data:X,u_K:E,u_K2:x,u_Gravity:s.gravity,u_ClusterGravity:s.clusterGravity||s.gravity||1,u_Speed:T,u_MaxDisplace:y,u_Clustering:O?1:0,u_Center:p,u_AttributeArray:N,u_ClusterCenters:je,MAX_EDGE_PER_VERTEX:$,VERTEX_COUNT:B});let ct;O&&(ct=be.createKernel(mw).setDispatch([k,1,1]).setBinding({u_Data:X,u_NodeAttributes:N,u_ClusterCenters:je,VERTEX_COUNT:B,CLUSTER_COUNT:k})),yield(()=>yw(this,void 0,void 0,function*(){for(let Yt=0;Yt<h;Yt++)yield it.execute(),O&&(ct.setBinding({u_Data:it}),yield ct.execute(),it.setBinding({u_ClusterCenters:ct})),it.setBinding({u_MaxDisplace:y*=.99});const At=yield it.getOutput();r?i.postMessage({type:fs.GPUEND,vertexEdgeData:At}):a.forEach((Yt,st)=>{const Bn=At[4*st],kn=At[4*st+1];Yt.x=Bn,Yt.y=kn}),me&&me()}))()})}getType(){return"fruchterman-gpu"}}const XP=null,Pv='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',sN=null,ZP='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var bw=function(n,r,i,s){function a(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(x){try{y(s.next(x))}catch(E){h(E)}}function g(x){try{y(s.throw(x))}catch(E){h(E)}}function y(x){x.done?u(x.value):a(x.value).then(p,g)}y((s=s.apply(n,r||[])).next())})};class YP extends ds{constructor(r){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return bw(this,void 0,void 0,function*(){const r=this,i=r.nodes;if(!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const s=r.center;if(i.length===1){i[0].x=s[0],i[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}const a={},u={};i.forEach((h,p)=>{Wn(h.x)||(h.x=Math.random()*r.width),Wn(h.y)||(h.y=Math.random()*r.height),a[h.id]=h,u[h.id]=p}),r.nodeMap=a,r.nodeIdxMap=u,r.nodeStrength=cp(r.nodeStrength,1),r.edgeStrength=cp(r.edgeStrength,1),yield r.run()})}executeWithWorker(r,i){const s=this,a=s.nodes,u=s.center;if(!a||a.length===0)return;if(a.length===1){a[0].x=u[0],a[0].y=u[1];return}const h={},p={};a.forEach((g,y)=>{Wn(g.x)||(g.x=Math.random()*s.width),Wn(g.y)||(g.y=Math.random()*s.height),h[g.id]=g,p[g.id]=y}),s.nodeMap=h,s.nodeIdxMap=p,s.nodeStrength=cp(s.nodeStrength,1),s.edgeStrength=cp(s.edgeStrength,1),s.run(r,i)}run(r,i){return bw(this,void 0,void 0,function*(){const s=this,a=s.nodes,u=s.edges,h=s.maxIteration;!s.width&&typeof window<"u"&&(s.width=window.innerWidth),!s.height&&typeof window<"u"&&(s.height=window.innerHeight);const p=a.length;s.linkDistance=cp(s.linkDistance),s.edgeStrength=cp(s.edgeStrength);const{maxEdgePerVetex:g,array:y}=HP(a,u,s.linkDistance,s.edgeStrength);s.degrees=Ds(a.length,s.nodeIdxMap,u);const x=[],E=[],T=[],O=[],N=[],k=[],B=[];s.getMass||(s.getMass=st=>s.degrees[s.nodeIdxMap[st.id]]||1);const $=s.gravity,X=s.center;a.forEach((st,Bn)=>{x.push(s.getMass(st)),E.push(s.nodeStrength(st)),s.degrees[Bn]||(s.degrees[Bn]=0);let kn=[X[0],X[1],$];if(s.getCenter){const Jn=s.getCenter(st,s.degrees[Bn]);Jn&&Wn(Jn[0])&&Wn(Jn[1])&&Wn(Jn[2])&&(kn=Jn)}T.push(kn[0]),O.push(kn[1]),N.push(kn[2]),Wn(st.fx)&&Wn(st.fy)?(k.push(st.fx||.001),B.push(st.fy||.001)):(k.push(0),B.push(0))});const ne=cf([x,s.degrees,E,k]),be=cf([T,O,N,B]),me=s.workerEnabled;let je;me?je=Su.create({canvas:r,engineOptions:{supportCompute:!0}}):je=Su.create({engineOptions:{supportCompute:!0}});const it=s.onLayoutEnd,ct=[];y.forEach(st=>{ct.push(st)});for(let st=0;st<4;st++)ct.push(0);const Zt=je.createKernel(Pv).setDispatch([p,1,1]).setBinding({u_Data:y,u_damping:s.damping,u_maxSpeed:s.maxSpeed,u_minMovement:s.minMovement,u_coulombDisScale:s.coulombDisScale,u_factor:s.factor,u_NodeAttributeArray1:ne,u_NodeAttributeArray2:be,MAX_EDGE_PER_VERTEX:g,VERTEX_COUNT:p,u_AveMovement:ct,u_interval:s.interval}),At=je.createKernel(ZP).setDispatch([1,1,1]).setBinding({u_Data:y,VERTEX_COUNT:p,u_AveMovement:[0,0,0,0]});yield(()=>bw(this,void 0,void 0,function*(){for(let Bn=0;Bn<h;Bn++){yield Zt.execute(),At.setBinding({u_Data:Zt}),yield At.execute();const kn=Math.max(.02,s.interval-Bn*.002);Zt.setBinding({u_interval:kn,u_AveMovement:At})}const st=yield Zt.getOutput();r?i.postMessage({type:fs.GPUEND,vertexEdgeData:st}):a.forEach((Bn,kn)=>{const Jn=st[4*kn],Li=st[4*kn+1];Bn.x=Jn,Bn.y=Li}),it&&it()}))()})}getType(){return"gForce-gpu"}}class x3 extends ds{constructor(r){super(),this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(r)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const r=this,i=r.nodes,s=r.center;if(r.comboTree={id:"comboTreeRoot",depth:-1,children:r.comboTrees},!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(i.length===1){i[0].x=s[0],i[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}r.initVals(),r.run(),r.onLayoutEnd&&r.onLayoutEnd()}run(){const r=this,i=r.nodes,s=r.previousLayouted?r.maxIteration/5:r.maxIteration;!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight);const a=r.center,u=r.velocityDecay,h=r.comboMap;r.previousLayouted||r.initPos(h);for(let y=0;y<s;y++){const x=[];i.forEach((E,T)=>{x[T]={x:0,y:0}}),r.applyCalculate(x),r.applyComboCenterForce(x),i.forEach((E,T)=>{!Wn(E.x)||!Wn(E.y)||(E.x+=x[T].x*u,E.y+=x[T].y*u)}),r.alpha+=(r.alphaTarget-r.alpha)*r.alphaDecay,r.onTick()}const p=[0,0];i.forEach(y=>{!Wn(y.x)||!Wn(y.y)||(p[0]+=y.x,p[1]+=y.y)}),p[0]/=i.length,p[1]/=i.length;const g=[a[0]-p[0],a[1]-p[1]];i.forEach((y,x)=>{!Wn(y.x)||!Wn(y.y)||(y.x+=g[0],y.y+=g[1])}),r.combos.forEach(y=>{const x=h[y.id];x&&x.empty&&(y.x=x.cx||y.x,y.y=x.cy||y.y)}),r.previousLayouted=!0}initVals(){const r=this,i=r.edges,s=r.nodes,a=r.combos,u={},h={},p={};s.forEach((At,Yt)=>{h[At.id]=At,p[At.id]=Yt}),r.nodeMap=h,r.indexMap=p;const g={};a.forEach(At=>{g[At.id]=At}),r.oriComboMap=g,r.comboMap=r.getComboMap();const y=r.preventOverlap;r.preventComboOverlap=r.preventComboOverlap||y,r.preventNodeOverlap=r.preventNodeOverlap||y;const x=r.collideStrength;x&&(r.comboCollideStrength=x,r.nodeCollideStrength=x),r.comboCollideStrength=r.comboCollideStrength?r.comboCollideStrength:0,r.nodeCollideStrength=r.nodeCollideStrength?r.nodeCollideStrength:0;for(let At=0;At<i.length;++At){const Yt=xi(i[At],"source"),st=xi(i[At],"target");u[Yt]?u[Yt]++:u[Yt]=1,u[st]?u[st]++:u[st]=1}const E=[];for(let At=0;At<i.length;++At){const Yt=xi(i[At],"source"),st=xi(i[At],"target");E[At]=u[Yt]/(u[Yt]+u[st])}this.bias=E;const T=r.nodeSize,O=r.nodeSpacing;let N,k;if(Wn(O)?k=()=>O:du(O)?k=O:k=()=>0,this.nodeSpacing=k,!T)N=At=>At.size?Ps(At.size)?(At.size[0]>At.size[1]?At.size[0]:At.size[1])/2:vc(At.size)?(At.size.width>At.size.height?At.size.width:At.size.height)/2:At.size/2:10;else if(du(T))N=At=>T(At);else if(Ps(T)){const Yt=(T[0]>T[1]?T[0]:T[1])/2;N=st=>Yt}else{const At=T/2;N=Yt=>At}this.nodeSize=N;const B=r.comboSpacing;let $;Wn(B)?$=()=>B:du(B)?$=B:$=()=>0,this.comboSpacing=$;const X=r.comboPadding;let ne;Wn(X)?ne=()=>X:Ps(X)?ne=()=>Math.max.apply(null,X):du(X)?ne=X:ne=()=>0,this.comboPadding=ne;let be=this.linkDistance,me;be||(be=10),Wn(be)?me=At=>be:me=be,this.linkDistance=me;let je=this.edgeStrength,it;je||(je=1),Wn(je)?it=At=>je:it=je,this.edgeStrength=it;let ct=this.nodeStrength,Zt;ct||(ct=30),Wn(ct)?Zt=At=>ct:Zt=ct,this.nodeStrength=Zt}initPos(r){this.nodes.forEach((a,u)=>{const h=a.comboId,p=r[h];h&&p?(a.x=p.cx+100/(u+1),a.y=p.cy+100/(u+1)):(a.x=100/(u+1),a.y=100/(u+1))})}getComboMap(){const r=this,i=r.nodeMap,s=r.comboTrees,a=r.oriComboMap,u={};return(s||[]).forEach(h=>{const p=[];Ga(h,g=>{if(g.itemType==="node"||!a[g.id])return!0;if(u[g.id]===void 0){const E={id:g.id,name:g.id,cx:0,cy:0,count:0,depth:r.oriComboMap[g.id].depth||0,children:[]};u[g.id]=E}const y=g.children;y&&y.forEach(E=>{if(!u[E.id]&&!i[E.id])return!0;p.push(E)});const x=u[g.id];if(x.cx=0,x.cy=0,p.length===0){x.empty=!0;const E=a[g.id];x.cx=E.x,x.cy=E.y}return p.forEach(E=>{if(x.count++,E.itemType!=="node"){const O=u[E.id];Wn(O.cx)&&(x.cx+=O.cx),Wn(O.cy)&&(x.cy+=O.cy);return}const T=i[E.id];!T||(Wn(T.x)&&(x.cx+=T.x),Wn(T.y)&&(x.cy+=T.y))}),x.cx/=x.count||1,x.cy/=x.count||1,x.children=p,!0})}),u}applyComboCenterForce(r){const i=this,s=i.gravity,a=i.comboGravity||s,u=this.alpha,h=i.comboTrees,p=i.indexMap,g=i.nodeMap,y=i.comboMap;(h||[]).forEach(x=>{Ga(x,E=>{if(E.itemType==="node"||!y[E.id])return!0;const O=y[E.id],N=(O.depth+1)/10*.5,k=O.cx,B=O.cy;return O.cx=0,O.cy=0,O.children.forEach($=>{if($.itemType!=="node"){const ct=y[$.id];ct&&Wn(ct.cx)&&(O.cx+=ct.cx),ct&&Wn(ct.cy)&&(O.cy+=ct.cy);return}const X=g[$.id],ne=X.x-k||.005,be=X.y-B||.005,me=Math.sqrt(ne*ne+be*be),je=p[X.id],it=a*u/me*N;r[je].x-=ne*it,r[je].y-=be*it,Wn(X.x)&&(O.cx+=X.x),Wn(X.y)&&(O.cy+=X.y)}),O.cx/=O.count||1,O.cy/=O.count||1,!0})})}applyCalculate(r){const i=this,s=i.comboMap,a=i.nodes,u={};a.forEach((p,g)=>{a.forEach((y,x)=>{if(g<x)return;const E=p.x-y.x||.005,T=p.y-y.y||.005;let O=E*E+T*T;const N=Math.sqrt(O);O<1&&(O=N),u[`${p.id}-${y.id}`]={vx:E,vy:T,vl2:O,vl:N},u[`${y.id}-${p.id}`]={vl2:O,vl:N,vx:-E,vy:-T}})}),i.updateComboSizes(s),i.calRepulsive(r,u),i.calAttractive(r,u),i.preventComboOverlap&&i.comboNonOverlapping(r,s)}updateComboSizes(r){const i=this,s=i.comboTrees,a=i.nodeMap,u=i.nodeSize,h=i.comboSpacing,p=i.comboPadding;(s||[]).forEach(g=>{const y=[];Ga(g,x=>{if(x.itemType==="node")return!0;const E=r[x.id];if(!E)return!1;const T=x.children;T&&T.forEach(k=>{!r[k.id]&&!a[k.id]||y.push(k)}),E.minX=1/0,E.minY=1/0,E.maxX=-1/0,E.maxY=-1/0,y.forEach(k=>{if(k.itemType!=="node")return!0;const B=a[k.id];if(!B)return!0;const $=u(B),X=B.x-$,ne=B.y-$,be=B.x+$,me=B.y+$;E.minX>X&&(E.minX=X),E.minY>ne&&(E.minY=ne),E.maxX<be&&(E.maxX=be),E.maxY<me&&(E.maxY=me)});let O=i.oriComboMap[x.id].size||10;Ps(O)&&(O=O[0]);const N=Math.max(E.maxX-E.minX,E.maxY-E.minY,O);return E.r=N/2+h(E)/2+p(E),!0})})}comboNonOverlapping(r,i){const s=this,a=s.comboTree,u=s.comboCollideStrength,h=s.indexMap,p=s.nodeMap;Ga(a,g=>{if(!i[g.id]&&!p[g.id]&&g.id!=="comboTreeRoot")return!1;const y=g.children;return y&&y.length>1&&y.forEach((x,E)=>{if(x.itemType==="node")return!1;const T=i[x.id];!T||y.forEach((O,N)=>{if(E<=N||O.itemType==="node")return!1;const k=i[O.id];if(!k)return!1;const B=T.cx-k.cx||.005,$=T.cy-k.cy||.005,X=B*B+$*$,ne=T.r||1,be=k.r||1,me=ne+be,je=be*be,it=ne*ne;if(X<me*me){const ct=x.children;if(!ct||ct.length===0)return!1;const Zt=O.children;if(!Zt||Zt.length===0)return!1;const At=Math.sqrt(X),Yt=(me-At)/At*u,st=B*Yt,Bn=$*Yt,kn=je/(it+je),Jn=1-kn;ct.forEach(Li=>{if(Li.itemType!=="node")return!1;if(!p[Li.id])return;const Gi=h[Li.id];Zt.forEach(Xr=>{if(Xr.itemType!=="node"||!p[Xr.id])return!1;const Ho=h[Xr.id];r[Gi].x+=st*kn,r[Gi].y+=Bn*kn,r[Ho].x-=st*Jn,r[Ho].y-=Bn*Jn})})}})}),!0})}calRepulsive(r,i){const s=this,a=s.nodes,u=s.width*s.optimizeRangeFactor,h=s.nodeStrength,p=s.alpha,g=s.nodeCollideStrength,y=s.preventNodeOverlap,x=s.nodeSize,E=s.nodeSpacing,T=s.depthRepulsiveForceScale,O=s.center;a.forEach((N,k)=>{if(!(!N.x||!N.y)){if(O){const B=s.gravity,$=N.x-O[0]||.005,X=N.y-O[1]||.005,ne=Math.sqrt($*$+X*X);r[k].x-=$*B*p/ne,r[k].y-=X*B*p/ne}a.forEach((B,$)=>{if(k===$||!B.x||!B.y)return;const{vl2:X,vl:ne}=i[`${N.id}-${B.id}`];if(ne>u)return;const{vx:be,vy:me}=i[`${N.id}-${B.id}`];let je=Math.log(Math.abs(B.depth-N.depth)/10)+1||1;je=je<1?1:je,B.comboId!==N.comboId&&(je+=1);const it=je?Math.pow(T,je):1,ct=h(B)*p/X*it;if(r[k].x+=be*ct,r[k].y+=me*ct,k<$&&y){const Zt=x(N)+E(N)||1,At=x(B)+E(B)||1,Yt=Zt+At;if(X<Yt*Yt){const st=(Yt-ne)/ne*g,Bn=At*At;let kn=Bn/(Zt*Zt+Bn);const Jn=be*st,Li=me*st;r[k].x+=Jn*kn,r[k].y+=Li*kn,kn=1-kn,r[$].x-=Jn*kn,r[$].y-=Li*kn}}})}})}calAttractive(r,i){const s=this,a=s.edges,u=s.linkDistance,h=s.alpha,p=s.edgeStrength,g=s.bias,y=s.depthAttractiveForceScale;a.forEach((x,E)=>{const T=xi(x,"source"),O=xi(x,"target");if(!T||!O||T===O)return;const N=s.indexMap[T],k=s.indexMap[O],B=s.nodeMap[T],$=s.nodeMap[O];if(!B||!$)return;let X=B.depth===$.depth?0:Math.log(Math.abs(B.depth-$.depth)/10);B.comboId===$.comboId&&(X=X/2);let ne=X?Math.pow(y,X):1;if(B.comboId!==$.comboId&&ne===1?ne=y/2:B.comboId===$.comboId&&(ne=2),!Wn($.x)||!Wn(B.x)||!Wn($.y)||!Wn(B.y))return;const{vl:be,vx:me,vy:je}=i[`${O}-${T}`],it=(be-u(x))/be*h*p(x)*ne,ct=me*it,Zt=je*it,At=g[E];r[k].x-=ct*At,r[k].y-=Zt*At,r[N].x+=ct*(1-At),r[N].y+=Zt*(1-At)})}getType(){return"comboForce"}}class bA{constructor(r){this.id=r.id||0,this.rx=r.rx,this.ry=r.ry,this.fx=0,this.fy=0,this.mass=r.mass,this.degree=r.degree,this.g=r.g||0}distanceTo(r){const i=this.rx-r.rx,s=this.ry-r.ry;return Math.hypot(i,s)}setPos(r,i){this.rx=r,this.ry=i}resetForce(){this.fx=0,this.fy=0}addForce(r){const i=r.rx-this.rx,s=r.ry-this.ry;let a=Math.hypot(i,s);a=a<1e-4?1e-4:a;const u=this.g*(this.degree+1)*(r.degree+1)/a;this.fx+=u*i/a,this.fy+=u*s/a}in(r){return r.contains(this.rx,this.ry)}add(r){const i=this.mass+r.mass,s=(this.rx*this.mass+r.rx*r.mass)/i,a=(this.ry*this.mass+r.ry*r.mass)/i,u=this.degree+r.degree,h={rx:s,ry:a,mass:i,degree:u};return new bA(h)}}class Cy{constructor(r){this.xmid=r.xmid,this.ymid=r.ymid,this.length=r.length,this.massCenter=r.massCenter||[0,0],this.mass=r.mass||1}getLength(){return this.length}contains(r,i){const s=this.length/2;return r<=this.xmid+s&&r>=this.xmid-s&&i<=this.ymid+s&&i>=this.ymid-s}NW(){const r=this.xmid-this.length/4,i=this.ymid+this.length/4,s=this.length/2,a={xmid:r,ymid:i,length:s};return new Cy(a)}NE(){const r=this.xmid+this.length/4,i=this.ymid+this.length/4,s=this.length/2,a={xmid:r,ymid:i,length:s};return new Cy(a)}SW(){const r=this.xmid-this.length/4,i=this.ymid-this.length/4,s=this.length/2,a={xmid:r,ymid:i,length:s};return new Cy(a)}SE(){const r=this.xmid+this.length/4,i=this.ymid-this.length/4,s=this.length/2,a={xmid:r,ymid:i,length:s};return new Cy(a)}}class wy{constructor(r){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,r!=null&&(this.quad=r)}insert(r){if(this.body==null){this.body=r;return}this._isExternal()?(this.quad&&(this.NW=new wy(this.quad.NW()),this.NE=new wy(this.quad.NE()),this.SW=new wy(this.quad.SW()),this.SE=new wy(this.quad.SE())),this._putBody(this.body),this._putBody(r),this.body=this.body.add(r)):(this.body=this.body.add(r),this._putBody(r))}_putBody(r){!this.quad||(r.in(this.quad.NW())&&this.NW?this.NW.insert(r):r.in(this.quad.NE())&&this.NE?this.NE.insert(r):r.in(this.quad.SW())&&this.SW?this.SW.insert(r):r.in(this.quad.SE())&&this.SE&&this.SE.insert(r))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(r){if(!(this.body==null||r===this.body))if(this._isExternal())r.addForce(this.body);else{const i=this.quad?this.quad.getLength():0,s=this.body.distanceTo(r);i/s<this.theta?r.addForce(this.body):(this.NW&&this.NW.updateForce(r),this.NE&&this.NE.updateForce(r),this.SW&&this.SW.updateForce(r),this.SE&&this.SE.updateForce(r))}}}class KP extends ds{constructor(r){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(r)}getDefaultCfg(){return{}}execute(){const r=this,{nodes:i,onLayoutEnd:s,prune:a}=r;let u=r.maxIteration;!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight);const h=[],p=i.length;for(let g=0;g<p;g+=1){const y=i[g];let x=10,E=10;Wn(y.size)&&(x=y.size,E=y.size),Ps(y.size)?(isNaN(y.size[0])||(x=y.size[0]),isNaN(y.size[1])||(E=y.size[1])):vc(y.size)&&(x=y.size.width,E=y.size.height),r.getWidth&&!isNaN(r.getWidth(y))&&(E=r.getWidth(y)),r.getHeight&&!isNaN(r.getHeight(y))&&(x=r.getHeight(y));const T=Math.max(x,E);h.push(T)}r.barnesHut===void 0&&p>250&&(r.barnesHut=!0),r.prune===void 0&&p>100&&(r.prune=!0),this.maxIteration===0&&!r.prune?(u=250,p<=200&&p>100?u=1e3:p>200&&(u=1200),this.maxIteration=u):this.maxIteration===0&&a&&(u=100,p<=200&&p>100?u=500:p>200&&(u=950),this.maxIteration=u),r.kr||(r.kr=50,p>100&&p<=500?r.kr=20:p>500&&(r.kr=1)),r.kg||(r.kg=20,p>100&&p<=500?r.kg=10:p>500&&(r.kg=1)),this.nodes=r.updateNodesByForces(h),s()}updateNodesByForces(r){const i=this,{edges:s,maxIteration:a}=i;let u=i.nodes;const h=s.filter(N=>{const k=xi(N,"source"),B=xi(N,"target");return k!==B}),p=u.length,g=h.length,y=[],x={},E={},T=[];for(let N=0;N<p;N+=1)x[u[N].id]=N,y[N]=0,(u[N].x===void 0||isNaN(u[N].x))&&(u[N].x=Math.random()*1e3),(u[N].y===void 0||isNaN(u[N].y))&&(u[N].y=Math.random()*1e3),T.push({x:u[N].x,y:u[N].y});for(let N=0;N<g;N+=1){let k,B,$=0,X=0;for(let ne=0;ne<p;ne+=1){const be=xi(h[N],"source"),me=xi(h[N],"target");u[ne].id===be?(k=u[ne],$=ne):u[ne].id===me&&(B=u[ne],X=ne),E[N]={sourceIdx:$,targetIdx:X}}k&&(y[x[k.id]]+=1),B&&(y[x[B.id]]+=1)}let O=a;if(u=this.iterate(O,x,E,g,y,r),i.prune){for(let N=0;N<g;N+=1)y[E[N].sourceIdx]<=1?(u[E[N].sourceIdx].x=u[E[N].targetIdx].x,u[E[N].sourceIdx].y=u[E[N].targetIdx].y):y[E[N].targetIdx]<=1&&(u[E[N].targetIdx].x=u[E[N].sourceIdx].x,u[E[N].targetIdx].y=u[E[N].sourceIdx].y);i.prune=!1,i.barnesHut=!1,O=100,u=this.iterate(O,x,E,g,y,r)}return u}iterate(r,i,s,a,u,h){const p=this;let{nodes:g}=p;const{kr:y,preventOverlap:x}=p,{barnesHut:E}=p,T=g.length;let O=0;const N=100;let k=r;const B=50;let $=[];const X=[],ne=[];for(let be=0;be<T;be+=1)if($[2*be]=0,$[2*be+1]=0,E){const me={id:be,rx:g[be].x,ry:g[be].y,mass:1,g:y,degree:u[be]};ne[be]=new bA(me)}for(;k>0;){for(let me=0;me<T;me+=1)X[2*me]=$[2*me],X[2*me+1]=$[2*me+1],$[2*me]=0,$[2*me+1]=0;$=this.getAttrForces(k,B,a,i,s,u,h,$),E&&(x&&k>B||!x)?$=this.getOptRepGraForces($,ne,u):$=this.getRepGraForces(k,B,$,N,h,u);const be=this.updatePos($,X,O,u);g=be.nodes,O=be.sg,k--,p.tick&&p.tick()}return g}getAttrForces(r,i,s,a,u,h,p,g){const y=this,{nodes:x,preventOverlap:E,dissuadeHubs:T,mode:O,prune:N}=y;for(let k=0;k<s;k+=1){const B=x[u[k].sourceIdx],$=u[k].sourceIdx,X=x[u[k].targetIdx],ne=u[k].targetIdx;if(N&&(h[$]<=1||h[ne]<=1))continue;const be=[X.x-B.x,X.y-B.y];let me=Math.hypot(be[0],be[1]);me=me<1e-4?1e-4:me,be[0]=be[0]/me,be[1]=be[1]/me,E&&r<i&&(me=me-p[$]-p[ne]);let je=me,it=je;O==="linlog"&&(je=Math.log(1+me),it=je),T&&(je=me/h[$],it=me/h[ne]),E&&r<i&&me<=0?(je=0,it=0):E&&r<i&&me>0&&(je=me,it=me),g[2*a[B.id]]+=je*be[0],g[2*a[X.id]]-=it*be[0],g[2*a[B.id]+1]+=je*be[1],g[2*a[X.id]+1]-=it*be[1]}return g}getRepGraForces(r,i,s,a,u,h){const p=this,{nodes:g,preventOverlap:y,kr:x,kg:E,center:T,prune:O}=p,N=g.length;for(let k=0;k<N;k+=1){for(let ne=k+1;ne<N;ne+=1){if(O&&(h[k]<=1||h[ne]<=1))continue;const be=[g[ne].x-g[k].x,g[ne].y-g[k].y];let me=Math.hypot(be[0],be[1]);me=me<1e-4?1e-4:me,be[0]=be[0]/me,be[1]=be[1]/me,y&&r<i&&(me=me-u[k]-u[ne]);let je=x*(h[k]+1)*(h[ne]+1)/me;y&&r<i&&me<0?je=a*(h[k]+1)*(h[ne]+1):y&&r<i&&me===0?je=0:y&&r<i&&me>0&&(je=x*(h[k]+1)*(h[ne]+1)/me),s[2*k]-=je*be[0],s[2*ne]+=je*be[0],s[2*k+1]-=je*be[1],s[2*ne+1]+=je*be[1]}const B=[g[k].x-T[0],g[k].y-T[1]],$=Math.hypot(B[0],B[1]);B[0]=B[0]/$,B[1]=B[1]/$;const X=E*(h[k]+1);s[2*k]-=X*B[0],s[2*k+1]-=X*B[1]}return s}getOptRepGraForces(r,i,s){const a=this,{nodes:u,kg:h,center:p,prune:g}=a,y=u.length;let x=9e10,E=-9e10,T=9e10,O=-9e10;for(let X=0;X<y;X+=1)g&&s[X]<=1||(i[X].setPos(u[X].x,u[X].y),u[X].x>=E&&(E=u[X].x),u[X].x<=x&&(x=u[X].x),u[X].y>=O&&(O=u[X].y),u[X].y<=T&&(T=u[X].y));const N=Math.max(E-x,O-T),k={xmid:(E+x)/2,ymid:(O+T)/2,length:N,massCenter:p,mass:y},B=new Cy(k),$=new wy(B);for(let X=0;X<y;X+=1)g&&s[X]<=1||i[X].in(B)&&$.insert(i[X]);for(let X=0;X<y;X+=1){if(g&&s[X]<=1)continue;i[X].resetForce(),$.updateForce(i[X]),r[2*X]-=i[X].fx,r[2*X+1]-=i[X].fy;const ne=[u[X].x-p[0],u[X].y-p[1]];let be=Math.hypot(ne[0],ne[1]);be=be<1e-4?1e-4:be,ne[0]=ne[0]/be,ne[1]=ne[1]/be;const me=h*(s[X]+1);r[2*X]-=me*ne[0],r[2*X+1]-=me*ne[1]}return r}updatePos(r,i,s,a){const u=this,{nodes:h,ks:p,tao:g,prune:y,ksmax:x}=u,E=h.length,T=[],O=[];let N=0,k=0;for(let $=0;$<E;$+=1){if(y&&a[$]<=1)continue;const X=[r[2*$]-i[2*$],r[2*$+1]-i[2*$+1]],ne=Math.hypot(X[0],X[1]),be=[r[2*$]+i[2*$],r[2*$+1]+i[2*$+1]],me=Math.hypot(be[0],be[1]);T[$]=ne,O[$]=me/2,N+=(a[$]+1)*T[$],k+=(a[$]+1)*O[$]}const B=s;s=g*k/N,B!==0&&(s=s>1.5*B?1.5*B:s);for(let $=0;$<E;$+=1){if(y&&a[$]<=1)continue;let X=p*s/(1+s*Math.sqrt(T[$])),ne=Math.hypot(r[2*$],r[2*$+1]);ne=ne<1e-4?1e-4:ne;const be=x/ne;X=X>be?be:X;const me=X*r[2*$],je=X*r[2*$+1];h[$].x+=me,h[$].y+=je}return{nodes:h,sg:s}}}class hg{constructor(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}init(r,i,s){this.cells=[],this.CELL_W=s.CELL_W||hg.DEFAULT_CELL_W,this.CELL_H=s.CELL_H||hg.DEFAULT_CELL_H,this.columnNum=Math.ceil(r/this.CELL_W),this.rowNum=Math.ceil(i/this.CELL_H),hg.MIN_DIST=Math.pow(r,2)+Math.pow(i,2);for(let a=0;a<this.columnNum;a++){const u=[];for(let h=0;h<this.rowNum;h++){const p={dx:a,dy:h,x:a*this.CELL_W,y:h*this.CELL_H,occupied:!1};u.push(p)}this.cells.push(u)}}findGridByNodeId(r){var i,s;for(let a=0;a<this.columnNum;a++)for(let u=0;u<this.rowNum;u++)if(this.cells[a][u].node&&((s=(i=this.cells[a][u])===null||i===void 0?void 0:i.node)===null||s===void 0?void 0:s.id)===r)return{column:a,row:u};return null}sqdist(r,i){return Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)}occupyNearest(r){let i=hg.MIN_DIST,s,a=null;for(let u=0;u<this.columnNum;u++)for(let h=0;h<this.rowNum;h++)!this.cells[u][h].occupied&&(s=this.sqdist(r,this.cells[u][h]))<i&&(i=s,a=this.cells[u][h]);return a&&(a.occupied=!0),a}insertColumn(r,i){if(!(i<=0)){for(let s=0;s<i;s++){this.cells[s+this.columnNum]=[];for(let a=0;a<this.rowNum;a++)this.cells[s+this.columnNum][a]={dx:s,dy:a,x:s*this.CELL_W,y:a*this.CELL_H,occupied:!1,node:null}}for(let s=this.columnNum-1;s>r;s--)for(let a=0;a<this.rowNum;a++)this.cells[s+i][a]=Object.assign(Object.assign({},this.cells[s][a]),{x:(s+i)*this.CELL_W,y:a*this.CELL_H}),this.cells[s][a]={x:s*this.CELL_W,y:a*this.CELL_H,occupied:!0,node:null};for(let s=0;s<this.additionColumn.length;s++)this.additionColumn[s]>=r&&(this.additionColumn[s]+=i);for(let s=0;s<i;s++)this.additionColumn.push(r+s+1);this.columnNum+=i}}insertRow(r,i){if(!(i<=0)){for(let s=0;s<i;s++)for(let a=0;a<this.columnNum;a++)this.cells[a][s+this.rowNum]={dx:a,dy:s,x:a*this.CELL_W,y:s*this.CELL_H,occupied:!1,node:null};for(let s=0;s<this.columnNum;s++)for(let a=this.rowNum-1;a>r;a--)this.cells[s][a+i]=Object.assign(Object.assign({},this.cells[s][a]),{dx:s,dy:a+i,x:s*this.CELL_W,y:(a+i)*this.CELL_H}),this.cells[s][a]={dx:s,dy:a,x:s*this.CELL_W,y:a*this.CELL_H,occupied:!1,node:null};for(let s=0;s<this.additionRow.length;s++)this.additionRow[s]>=r&&(this.additionRow[s]+=i);for(let s=0;s<i;s++)this.additionRow.push(r+s+1);this.rowNum+=i}}getNodes(){const r=[];for(let i=0;i<this.columnNum;i++)for(let s=0;s<this.rowNum;s++)this.cells[i][s].node&&r.push(this.cells[i][s]);return r}}hg.MIN_DIST=50,hg.DEFAULT_CELL_W=80,hg.DEFAULT_CELL_H=80;function xw(n,r){if(!n.nodes||n.nodes.length===0)return n;const i=r.width,s=r.height,a=r.nodeMinGap;let u=1e4,h=1e4;n.nodes.forEach(g=>{const y=g.size[0]||50,x=g.size[1]||50;u=Math.min(y,u),h=Math.min(x,h)});const p=new hg;p.init(i,s,{CELL_H:h,CELL_W:u}),n.nodes.forEach(g=>{const y=p.occupyNearest(g);y&&(y.node={id:g.id,size:g.size},g.x=y.x,g.y=y.y,g.dx=y.dx,g.dy=y.dy)});for(let g=0;g<n.nodes.length;g++){const y=n.nodes[g],x=p.findGridByNodeId(y.id);if(!x)throw new Error("can not find node cell");const{column:E,row:T}=x;if(y.size[0]+a>u){const O=Math.ceil((y.size[0]+a)/u)-1;let N=O;for(let k=0;k<O&&(p.additionColumn.indexOf(E+k+1)>-1&&!p.cells[E+k+1][T].node);k++)N--;p.insertColumn(E,N)}if(y.size[1]+a>h){const O=Math.ceil((y.size[1]+a)/h)-1;let N=O;for(let k=0;k<O&&(p.additionRow.indexOf(T+k+1)>-1&&!p.cells[E][T+k+1].node);k++)N--;p.insertRow(T,N)}}for(let g=0;g<p.columnNum;g++)for(let y=0;y<p.rowNum;y++){const x=p.cells[g][y];if(x.node){const E=n.nodes.find(T=>{var O;return T.id===((O=x?.node)===null||O===void 0?void 0:O.id)});E&&(E.x=x.x+E.size[0]/2,E.y=x.y+E.size[1]/2)}}}const C3=1200,w3=800,_u=1e7,Ey=10,Dv=3.141592653589793,_o=1.5707963267948966,E3=Dv*.375,bh=Dv*.625,_l=new Map,S3=10,_3=10;let lf=.8;const xA=.1,d0=.5;function Io(n,r,i){const s=n.x-n.size[0]/2,a=n.y-n.size[1]/2,u=n.x+n.size[0]/2,h=n.y+n.size[1]/2,p=r.x-r.size[0]/2,g=r.y-r.size[1]/2,y=r.x+r.size[0]/2,x=r.y+r.size[1]/2,E=n.x,T=n.y,O=r.x,N=r.y,k=O-E,B=Math.atan2(k,N-T);let $=0,X=0,ne=0,be=0;B>_o?(X=a-x,$=p-u,ne=parseFloat(X?(X/Math.cos(B)).toFixed(2):$.toFixed(2)),be=parseFloat($?($/Math.sin(B)).toFixed(2):X.toFixed(2))):0<B&&B<=_o?(X=g-h,$=p-u,X>$?ne=be=parseFloat(X?(X/Math.cos(B)).toFixed(2):$.toFixed(2)):ne=be=parseFloat($?($/Math.sin(B)).toFixed(2):X.toFixed(2))):B<-_o?(X=a-x,$=-(y-s),X>$?ne=be=parseFloat(X?(X/Math.cos(B)).toFixed(2):$.toFixed(2)):ne=be=parseFloat($?($/Math.sin(B)).toFixed(2):X.toFixed(2))):(X=g-h,Math.abs(k)>(u-s)/2?$=s-y:$=k,X>$?ne=be=parseFloat(X?(X/Math.cos(B)).toFixed(2):$.toFixed(2)):ne=be=parseFloat($&&B!==0?($/Math.sin(B)).toFixed(2):X.toFixed(2)));const me=parseFloat(B.toFixed(2));let je=i;return i&&(je=E3<me&&me<bh),{distance:Math.abs(ne<be?ne:be),isHoriz:je}}function CA(n,r){const s=(_l.get(n.id)||[]).find(it=>it.source===r.id||it.target===r.id),a=n.size[0]*n.size[1],u=r.size[0]*r.size[1],h=a>u?r:n,p=a>u?n:r,g=h.x-h.size[0]/2,y=h.y-h.size[1]/2,x=h.x+h.size[0]/2,E=h.y+h.size[1]/2,T=p.x-p.size[0]/2,O=p.y-p.size[1]/2,N=p.x+p.size[0]/2,k=p.y+p.size[1]/2,B=h.x,$=h.y,X=p.x,ne=p.y,be=x>=T&&N>=g&&E>=O&&k>=y;let me=0,je=0;if(be){je=Math.sqrt(Math.pow(X-B,2)+Math.pow(ne-$,2));const it=g>T?g:T,ct=y>O?y:O,Zt=x<N?x:N,At=E<k?E:k,Yt=Zt-it,st=At-ct,Bn=Yt*st;je===0&&(je=1e-7),me=Ey*1/je*100+Bn,me*=_u}else{let it=!1;const ct=Io(h,p,it);je=ct.distance,it=ct.isHoriz,je<=Ey?je!==0?s?me+=Ey+_u*1/je:me+=Ey+_u*Ey/je:me+=_u:(me+=je,s&&(me+=je*je))}return me}function wA(n){let r=0;for(let i=0;i<n.length;i++){const s=n[i];(s.x<0||s.y<0||s.x>C3||s.y>w3)&&(r+=1e12);for(let a=i+1;a<n.length;a++)r+=CA(s,n[a])}return r}function Sy(n,r,i,s){const a=new Map;i.forEach((g,y)=>{a.set(g.id,g)});const u=s.filter(g=>g.source===n.id||g.target===n.id)||[],h=[];u.forEach(g=>{const y=g.source===n.id?g.target:g.source,x=a.get(y);x&&h.push(x)});let p=!0;for(let g=0;g<h.length;g++){const y=h[g],x=Math.atan((n.y-y.y)/(y.x-n.y))*180,E=Math.atan((r.y-y.y)/(y.x-r.y))*180,T=x<30||x>150,O=E<30||E>150,N=x>70&&x<110,k=E>70&&E<110;if(T&&!O||x*E<0){p=!1;break}else if(N&&!k||x*E<0){p=!1;break}else if((y.x-n.x)*(y.x-r.x)<0){p=!1;break}else if((y.y-n.y)*(y.y-r.y)<0){p=!1;break}}return p}function EA(n,r){let i=!1;const s=1,a=S3*s,u=_3*s,h=[a,-a,0,0],p=[0,0,u,-u];for(let g=0;g<n.length;++g){const y=n[g];let x=fg(y,n);for(let E=0;E<h.length;E++)if(Sy(y,{x:y.x+h[E],y:y.y+p[E]},n,r)){y.x+=h[E],y.y+=p[E];const O=fg(y,n),N=Math.random();O<x||N<lf&&N>xA?(x=O,i=!0):(y.x-=h[E],y.y-=p[E])}}return lf>xA&&(lf*=d0),i?wA(n):0}function fg(n,r){let i=0;(n.x<0||n.y<0||n.x+n.size[0]+20>C3||n.y+n.size[1]+20>w3)&&(i+=1e12);for(let s=0;s<r.length;++s)n.id!==r[s].id&&(i+=CA(n,r[s]));return i}function A3(n,r){if(n.length===0)return{nodes:n,edges:r};n.forEach(g=>{const y=r.filter(x=>x.source===g.id||x.target===g.id);_l.set(g,y)}),n.sort((g,y)=>{var x,E;return((x=_l.get(g.id))===null||x===void 0?void 0:x.length)-((E=_l.get(y.id))===null||E===void 0?void 0:E.length)});let i=wA(n),s=20,a=1,u=0;const h=50;let p=0;for(;s>0&&(p++,!(p>=h));){const g=EA(n,r);g!==0&&(u=g),a=u-i,i=u,a===0?--s:s=20}return n.forEach(g=>{g.x=g.x-g.size[0]/2,g.y=g.y-g.size[1]/2}),{nodes:n,edges:r}}var _y=A3;function SA(n,r){const{nodes:i,edges:s}=n,a=r.width,u=r.height;if(!i?.length)return Promise.resolve();const h=[];i.forEach(N=>{if(s.filter(B=>B.source===N.id||B.target===N.id).length>1){const B=Object.assign({},N);delete B.size,h.push(B)}});const p=[];s.forEach(N=>{const k=h.find($=>$.id===N.source),B=h.find($=>$.id===N.target);k&&B&&p.push(N)});const g=new Yc({type:"dagre",ranksep:r.nodeMinGap,nodesep:r.nodeMinGap}),{nodes:y}=g.layout({nodes:h,edges:p});i.forEach(N=>{const k=(y||[]).find(B=>B.id===N.id);N.x=k?.x||a/2,N.y=k?.y||u/2});const x=JSON.parse(JSON.stringify(i)),E=JSON.parse(JSON.stringify(s)),T=Pr().nodes(x).force("link",Fr(E).id(N=>N.id).distance(N=>p.find(B=>B.source===N.source&&B.target===N.target)?30:20)).force("charge",Tn()).force("center",mn(a/2,u/2)).force("x",Wr(a/2)).force("y",Pi(u/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(N=>{T.on("end",()=>{i.forEach(me=>{const je=x.find(it=>it.id===me.id);je&&(me.x=je.x,me.y=je.y)});const k=Math.min(...i.map(me=>me.x)),B=Math.max(...i.map(me=>me.x)),$=Math.min(...i.map(me=>me.y)),X=Math.max(...i.map(me=>me.y)),ne=a/(B-k),be=u/(X-$);i.forEach(me=>{me.x!==void 0&&ne<1&&(me.x=(me.x-k)*ne),me.y!==void 0&&be<1&&(me.y=(me.y-$)*be)}),i.forEach(me=>{me.sizeTemp=me.size,me.size=[10,10]}),_y(i,s),i.forEach(me=>{me.size=me.sizeTemp||[],delete me.sizeTemp}),xw({nodes:i,edges:s},r),N()})})}class j2 extends ds{constructor(r){super(),this.width=300,this.height=300,this.nodeMinGap=50,this.onLayoutEnd=()=>{},r&&this.updateCfg(r)}getDefaultCfg(){return{width:300,height:300,nodeMinGap:50}}execute(){const r=this,i=r.nodes,s=r.edges;return i?.forEach(a=>{a.size||(a.size=[50,50])}),SA({nodes:i,edges:s},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(()=>{r.onLayoutEnd&&r.onLayoutEnd()})}getType(){return"er"}}class T3 extends ds{constructor(r){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const r=this,i=r.nodes,s=.9,a=r.center;return!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),i&&i.forEach(u=>{u.x=(Math.random()-.5)*s*r.width+a[0],u.y=(Math.random()-.5)*s*r.height+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:this.edges}}getType(){return"random"}}class qP{constructor(r){const i=getLayoutByName(r.type);this.layoutInstance=new i(r)}layout(r){return this.layoutInstance.layout(r)}updateCfg(r){this.layoutInstance.updateCfg(r)}init(r){this.layoutInstance.init(r)}execute(){this.layoutInstance.execute()}getDefaultCfg(){return this.layoutInstance.getDefaultCfg()}destroy(){return this.layoutInstance.destroy()}}const _A={force:Kr,fruchterman:Mx,forceAtlas2:KP,gForce:jf,dagre:Yc,circular:Ao,radial:Sx,concentric:_x,grid:Js,mds:Ax,comboForce:x3,random:T3,"gForce-gpu":YP,"fruchterman-gpu":WP,er:j2};var H2;(function(n){n.command=ei.GRAPH_LAYOUT,n.hookKey="graphLayout"})(H2||(H2={}));let Zi=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().graphLayout.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{layoutType:h,layoutOptions:p,customLayout:g}=u;return yield(g||(E=>{const T=_A[h];return new T(Object.assign({},p)).layout(E)}))(u.graphData),{graphData:u.graphData}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Zi.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Zi.prototype,"init",null),Zi=(0,F.gn)([jt({token:{token:ci,named:H2.command.id}})],Zi);var $2;(function(n){function r(s,a){return(0,Yu.isEqual)(s,a)}n.isNodeEqual=r;function i(s,a){return(0,Yu.isEqual)(s,a)}n.isEdgeEqual=i})($2||($2={}));var h0;(function(n){n.command=ei.GRAPH_RENDER,n.hookKey="graphRender"})(h0||(h0={}));let Ay=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().graphRender.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),p=yield this.ctx.getGraphMeta(),{beforeRender:g,graphData:y,isNodeEqual:x,isEdgeEqual:E,afterRender:T}=u;return g&&g(p),yield this.doLoadGraph(h,y,x,E),T&&T(y,p),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this}),this.doLoadGraph=(r,i,s,a)=>(0,F.mG)(this,void 0,void 0,function*(){r?.isFrozen()||r?.freeze();const u=this.ctx.getCommands(),{addNodeConfigs:h,addEdgeConfigs:p,removeNodes:g,removeEdges:y,updateNodes:x,updateEdges:E}=this.graphDataDiff(r,i,s,a);for(const T of x){const O=T?.getData();yield u.executeCommand(Hi.UPDATE_NODE.id,{nodeConfig:O})}for(const T of E){const O=T?.getData();yield u.executeCommand(uo.UPDATE_EDGE.id,{edgeConfig:O})}for(const T of h)yield u.executeCommand(Hi.ADD_NODE.id,{nodeConfig:T,options:{isRenderGraph:!0}},{name:"remove servcie",handler:O=>(0,F.mG)(this,void 0,void 0,function*(){delete O.createNodeService})});yield u.executeCommand(Ms.INIT_GROUP.id,{graphData:{nodes:h,edges:[]}});for(const T of p)yield u.executeCommand(uo.ADD_EDGE.id,{edgeConfig:T,options:{isRenderGraph:!0}},{name:"remove servcie",handler:O=>(0,F.mG)(this,void 0,void 0,function*(){delete O.createEdgeService})});for(const T of g){const O=T?.getData();O.isGroup?yield u.executeCommand(Ms.DEL_GROUP.id,{nodeConfig:O}):yield u.executeCommand(Hi.DEL_NODE.id,{nodeConfig:O})}for(const T of y){const O=T?.getData();yield u.executeCommand(uo.DEL_EDGE.id,{edgeConfig:O})}r?.isFrozen()&&r?.unfreeze()})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}graphDataDiff(r,i,s,a){const{nodes:u,edges:h}=i,p=[];u.forEach($=>{r.getCellById($?.id)||p.push($)});const g=[],y=[],x=[];r.getNodes().forEach($=>{const X=u.find(ne=>ne?.id===$?.id);if(!X)x.push($);else{let ne=!0;s?ne=s($?.data,X):$?.data&&X&&(ne=$2.isNodeEqual($?.data,X)),ne||$.setData(X,{deep:!1}),ne===!0?g.push($):y.push($)}});const T=[];h.forEach($=>{r.getCellById($?.id)||T.push($)});const O=[],N=[],k=[];return r.getEdges().forEach($=>{const X=h.find(ne=>ne?.id===$?.id);if(!X)k.push($);else{let ne=!0;a?ne=a($?.data,X):$?.data&&X&&(ne=$2.isEdgeEqual($?.data,X)),ne||$.setData(X,{deep:!1}),ne===!0?O.push($):N.push($)}}),{addNodeConfigs:p,addEdgeConfigs:T,retainNodes:g,retainEdges:O,removeNodes:x,removeEdges:k,updateNodes:y,updateEdges:N}}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Ay.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Ay.prototype,"init",null),Ay=(0,F.gn)([jt({token:{token:ci,named:h0.command.id}})],Ay);var W2;(function(n){n.command=ei.GRAPH_RESIZE,n.hookKey="graphResize"})(W2||(W2={}));let uf=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),s=this.ctx.getHooks(),a=yield this.ctx.getGraphConfig(),u=a.rootContainer.clientHeight,h=a.rootContainer.clientWidth,p=yield s.graphResize.call(r,g=>(0,F.mG)(this,void 0,void 0,function*(){const y=yield this.ctx.getX6Graph(),{width:x=h,height:E=u}=g;return y?.resize(x,E),{}}),i);return this.ctx.setResult(p),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],uf.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],uf.prototype,"init",null),uf=(0,F.gn)([jt({token:{token:ci,named:W2.command.id}})],uf);var Al;(function(n){n.command=ei.GRAPH_FULLSCREEN,n.hookKey="graphFullscreen"})(Al||(Al={}));let Hs=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),s=this.ctx.getHooks(),a=yield this.ctx.getGraphConfig(),{appContainer:u}=a;if(!u)return;const h=yield s.graphFullscreen.call(r,()=>(0,F.mG)(this,void 0,void 0,function*(){var p,g;let y=!1;return document.fullscreenElement?(g=document.exitFullscreen)===null||g===void 0||g.call(document):((p=u.requestFullscreen)===null||p===void 0||p.call(u),y=!0),{fulllscreen:y}}),i);return this.ctx.setResult(h),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Hs.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Hs.prototype,"init",null),Hs=(0,F.gn)([jt({token:{token:ci,named:Al.command.id}})],Hs);var Ty;(function(n){n.command=ei.GRAPH_ZOOM,n.MAX_SCALE=1.5,n.MIN_SCALE=.05,n.defaultZoomOptions={maxScale:n.MAX_SCALE,minScale:n.MIN_SCALE},n.hookKey="graphZoom"})(Ty||(Ty={}));let f0=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().graphZoom.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{factor:p,zoomFitPadding:g=12,zoomOptions:y=Ty.defaultZoomOptions}=u;return typeof p=="number"?h?.zoom(p,y||{}):p==="fit"?h?.zoomToFit(Object.assign(Object.assign({},y),{padding:g})):p==="real"&&(h?.scale(1),h?.centerContent()),{factor:p,zoomFitPadding:g,zoomOptions:y}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],f0.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],f0.prototype,"init",null),f0=(0,F.gn)([jt({token:{token:ci,named:Ty.command.id}})],f0);var xc;(function(n){n.command=ei.GRAPH_COPY,n.hookKey="graphCopySelection"})(xc||(xc={}));let My=class{constructor(){this.parseCells=r=>{r.forEach(u=>{const h=u.getData();u.isNode()&&h.isGroup&&u.getChildren().forEach(g=>{r.push(g)})});const i=r.filter(u=>u.isNode()).map(u=>u.id),s=r.reduce((u,h)=>{if(h.isEdge()){const p=h.getSourceCellId(),g=h.getTargetCellId();p&&g&&i.includes(p)&&i.includes(g)&&u.set(h.id,h)}else u.set(h.id,h);return u},new Map),a=Array.from(s.values());return Rp(a)},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().graphCopySelection.call(i,()=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield r.getX6Graph(),p=h.getSelectedCells(),g=h.getEdges(),y=this.parseCells([...p,...g]),x=window.localStorage.getItem(Fc);return window.localStorage.setItem(Fc,JSON.stringify(y)),r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){window.localStorage.setItem(Fc,x)}))),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],My.prototype,"contextProvider",void 0),My=(0,F.gn)([jt({token:{token:ci,named:xc.command.id}})],My);function ac(n,r=null){try{return JSON.parse(n)||r}catch(i){return console.error(i),r}}let Oy=class{constructor(){this.groupNodeMap=new Map,this.nodeMap=new Map,this.nodeMappingRecord=new Map,this.portMap=new Map,this.portMappingRecord=new Map,this.edgeMap=new Map,this.edgeMappingRecord=new Map,this.getNodesByType=r=>r.reduce((i,s)=>(s.isGroup?i.groupNodes.push(s):i.normalNodes.push(s),i),{normalNodes:[],groupNodes:[]}),this.getNodePorts=r=>Array.isArray(r.ports)?r.ports:r.ports&&Array.isArray(r.ports.items)?r.ports.items:[],this.addNodes=r=>{r.forEach(i=>{if(i.isGroup)this.groupNodeMap.set(i.id,i);else{const s=this.getNodePorts(i);this.nodeMap.set(i.id,i),s.forEach(a=>{this.portMap.set(a.id,a)})}})},this.addEdge=r=>{r.forEach(i=>{this.edgeMap.set(i.id,i)})},this.buildNodeMapping=(r,i)=>{const s=r.id||r.originalId,a=i.id;this.nodeMappingRecord.set(s,a),this.getNodePorts(r).forEach((h,p)=>{const g=i.ports[p];g&&(this.portMap.set(g.id,g),this.portMappingRecord.set(h.id,g.id))})},this.createEdgeBetweenNodes=r=>{const{id:i,source:s,sourcePortId:a,target:u,targetPortId:h}=r,p=(0,F._T)(r,["id","source","sourcePortId","target","targetPortId"]);return Object.assign(Object.assign({},p),{id:void 0,originalId:i,source:this.nodeMappingRecord.get(s),target:this.nodeMappingRecord.get(u),sourcePortId:this.portMappingRecord.get(a),targetPortId:this.portMappingRecord.get(h),sourcePort:this.portMappingRecord.get(a),targetPort:this.portMappingRecord.get(h)})},this.buildGroupRelations=r=>{const{groupChildren:i}=r,s=i.map(a=>this.nodeMappingRecord.get(a));return Object.assign(Object.assign({},r),{groupChildren:s})}}};Oy=(0,F.gn)([jt()],Oy);var Tl,Py;(function(n){n.command=ei.GRAPH_PASTE,n.hookKey="graphPasteSelection"})(Py||(Py={}));function Dy(n,r=0){return Math.floor(Math.random()*(n-r)+r)}let Nv=Tl=class{constructor(){this.updateNodeCopiedProps=(r,i)=>{let s=Dy(100),a=Dy(100);return r&&(s=i.x-r.x+Dy(30),a=i.y-r.y+Dy(30)),i.x+=s,i.y+=a,i.originalId=i.id,delete i.id,i.label=i.label?`${i.label}_copied`:"",i.isCollapsed=!1,i},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),a=r.getHooks();if(Tl.doing)return this;Tl.doing=!0;const u=yield a.graphPasteSelection.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:p,position:g}=h,y=window.localStorage.getItem(Fc),x=ac(y,{nodes:[],edges:[]}),{nodes:E=[],edges:T=[]}=x,{normalNodes:O,groupNodes:N}=this.mappingHelper.getNodesByType(E);return this.mappingHelper.addNodes(E),yield Promise.all(O.map(k=>(0,F.mG)(this,void 0,void 0,function*(){const X=(yield p.executeCommand(Hi.ADD_NODE.id,{nodeConfig:this.updateNodeCopiedProps(g,k)})).contextProvider().getResult();this.mappingHelper.buildNodeMapping(k,X.nodeConfig)}))),yield Promise.all(N.map(k=>(0,F.mG)(this,void 0,void 0,function*(){const B=this.mappingHelper.buildGroupRelations(k);yield p.executeCommand(Ms.ADD_GROUP.id,{nodeConfig:this.updateNodeCopiedProps(g,B)})}))),yield Promise.all(T.map(k=>{const B=this.mappingHelper.createEdgeBetweenNodes(k);return p.executeCommand(uo.ADD_EDGE.id,{edgeConfig:B})})),r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){window.localStorage.setItem(Fc,null)}))),{err:null}}),s);return r.setResult(u),Tl.doing=!1,this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};Nv.doing=!1,(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Nv.prototype,"contextProvider",void 0),(0,F.gn)([pn(Oy),(0,F.w6)("design:type",Oy)],Nv.prototype,"mappingHelper",void 0),Nv=Tl=(0,F.gn)([jt({token:{token:ci,named:Py.command.id}})],Nv);var X2;(function(n){n.command=ei.GRAPH_TOGGLE_MULTI_SELECT,n.hookKey="toggleMultiSelect"})(X2||(X2={}));let p0=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().toggleMultiSelect.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),p=yield this.ctx.getGraphConfig(),{isEnable:g,modelService:y}=u,x=yield Lh.getModel(y),E=typeof g=="boolean"?g:!h.isRubberbandEnabled();return E?(h.enableRubberband(),h.scroller&&h.scroller.widget?h.scroller.disablePanning():h.disablePanning(),p.graphContainer.style.cursor="crosshair"):(h.disableRubberband(),h.scroller&&h.scroller.widget?h.scroller.enablePanning():h.enablePanning(),p.graphContainer.style.cursor="grab"),x.setValue({isEnable:E}),{isEnable:E}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],p0.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],p0.prototype,"init",null),p0=(0,F.gn)([jt({token:{token:ci,named:X2.command.id}})],p0);var Ny;(function(n){n.command=ei.GRAPH_HISTORY_UNDO,n.hookKey="historyUndo"})(Ny||(Ny={}));let Z2=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().historyUndo.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield r.getX6Graph();return p.isHistoryEnabled()===!1?{err:"history is disabled"}:(p.undo(),r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:g}=h;g.executeCommand(ei.GRAPH_HISTORY_REDO.id,{})}))),{err:null})}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Z2.prototype,"contextProvider",void 0),Z2=(0,F.gn)([jt({token:{token:ci,named:Ny.command.id}})],Z2);var Iv;(function(n){n.command=ei.GRAPH_HISTORY_REDO,n.hookKey="historyRedo"})(Iv||(Iv={}));let xh=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().historyRedo.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield r.getX6Graph();return p.isHistoryEnabled()===!1?{err:"history is disabled"}:(p.redo(),r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:g}=h;g.executeCommand(ei.GRAPH_HISTORY_UNDO.id,{})}))),{err:null})}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],xh.prototype,"contextProvider",void 0),xh=(0,F.gn)([jt({token:{token:ci,named:Iv.command.id}})],xh);var Y2;(function(n){n.command=ei.GRAPH_HISTORY_TOGGLE,n.hookKey="historyToggle"})(Y2||(Y2={}));let Rv=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().historyToggle.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield r.getX6Graph();if(p.isHistoryEnabled()===!1)return{err:"history is disabled"};const g=p.isHistoryEnabled(),{enabled:y}=h;return p.toggleHistory(y),r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:x}=h;x.executeCommand(ei.GRAPH_HISTORY_TOGGLE.id,{enabled:g})}))),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Rv.prototype,"contextProvider",void 0),Rv=(0,F.gn)([jt({token:{token:ci,named:Y2.command.id}})],Rv);var K2;(function(n){n.command=ei.GRAPH_HISTORY_RESET,n.hookKey="historyReset"})(K2||(K2={}));let q2=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().historyReset.call(i,()=>(0,F.mG)(this,void 0,void 0,function*(){return(yield r.getX6Graph()).cleanHistory(),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],q2.prototype,"contextProvider",void 0),q2=(0,F.gn)([jt({token:{token:ci,named:K2.command.id}})],q2);var kv;(function(n){n.command=ei.GRAPH_ADD_TOOL,n.hookKey="addTool"})(kv||(kv={}));let J2=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().addTool.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{cellId:p,toolConfig:g,commandService:y}=h,E=(yield r.getX6Graph()).getCellById(p);return E&&(E.addTools(g.items,g.options),r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){Array.isArray(g.items)&&g.items.forEach(T=>{y.executeCommand(ei.GRAPH_DEL_TOOL.id,{cellId:p,toolname:T})})})))),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],J2.prototype,"contextProvider",void 0),J2=(0,F.gn)([jt({token:{token:ci,named:kv.command.id}})],J2);var g0;(function(n){n.command=ei.GRAPH_DEL_TOOL,n.hookKey="delTool"})(g0||(g0={}));let Q2=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().delTool.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{cellId:p,toolName:g,toolConfig:y}=h,E=(yield r.getX6Graph()).getCellById(p);return E&&(g==="*"?E.removeTools(y):E.removeTool(g,y)),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Q2.prototype,"contextProvider",void 0),Q2=(0,F.gn)([jt({token:{token:ci,named:g0.command.id}})],Q2);var v0;(function(n){n.command=ei.REDO_CMD,n.hookKey="redoCommand"})(v0||(v0={}));let Iy=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.ctx,{args:i,hooks:s}=r.getArgs();return yield r.getHooks().redoCommand.call(i,()=>(0,F.mG)(this,void 0,void 0,function*(){const u=r.getCommands();return u.isRedoable&&u.redoCommand(),this.ctx.addUndo(xt.create(()=>{u.redoCommand()})),{}}),s),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Iy.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Iy.prototype,"init",null),Iy=(0,F.gn)([jt({token:{token:ci,named:v0.command.id}})],Iy);var Lv;(function(n){n.command=ei.UNDO_CMD,n.hookKey="undoCommand"})(Lv||(Lv={}));let Gv=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.ctx,{args:i,hooks:s}=r.getArgs();return yield r.getHooks().undoCommand.call(i,()=>(0,F.mG)(this,void 0,void 0,function*(){const u=r.getCommands();return u.isUndoable&&u.undoCommand(),this.ctx.addUndo(xt.create(()=>{u.redoCommand()})),{}}),s),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Gv.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Gv.prototype,"init",null),Gv=(0,F.gn)([jt({token:{token:ci,named:Lv.command.id}})],Gv);const M3=n=>{n(ud),n(ws),n(dd),n(Zi),n(Ay),n(uf),n(Z2),n(xh),n(Rv),n(q2),n(Iy),n(Gv),n(f0),n(p0),n(My),n(Nv),n(Hs),n(J2),n(Q2)},m0=[Bp,jh,hd,Ny,Iv,K2,Y2,H2,h0,W2,Al,v0,Lv,Ty,X2,xc,Py,kv,g0];var bs;(function(n){n.command=uo.ADD_EDGE,n.hookKey="addEdge",n.createEdgeId=s=>{if(gr.kf.isString(s.source))return`${s.source}:${s.sourcePortId}-${s.target}:${s.targetPortId}`;if(r(s)){const a=s;return`${a.source.cell}:${a.source.port}-${a.target.cell}:${a.target.port}`}if(i(s)){const a=s;return`${a.sourceCell}:${a.sourcePort}-${a.targetCell}:${a.targetPort}`}};function r(s){return s.source&&s.source.cell&&gr.kf.isString(s.source.cell)}n.isX6EdgeConfig=r;function i(s){return s.sourceCell&&gr.kf.isString(s.sourceCell)}n.isX6EdgePlainConfig=i})(bs||(bs={}));let Ry=class{constructor(){this.processEdgeConfig=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){if(!i.id){const{createIdService:s=bs.createEdgeId}=r;i.id=yield s(i)}return i.sourcePortId&&!i.sourcePort&&(i.sourcePort=i.sourcePortId,i.targetPort=i.targetPortId),i}),this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().addEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{cellFactory:h,createEdgeService:p,commandService:g,options:y}=u,x=yield this.ctx.getX6Graph();let E=u.edgeConfig;if(p){const B=yield p(u);if(typeof B=="boolean")return{err:"createEdgeService rejected"};E=B}const T=yield this.processEdgeConfig(u,E);let O;const N=Object.assign(Object.assign({},y),{isCommand:!0});if(h){const B=yield h(T,this);O=x.addEdge(B,N)}else O=x.addEdge(Object.assign(Object.assign({},T),{label:T?.label||T,data:Object.assign({},T)}),N);const k=xt.create(()=>{g.executeCommand(uo.DEL_EDGE.id,{x6Edge:O})});return this.ctx.addUndo(k),{edgeConfig:T,edgeCell:O}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Ry.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Ry.prototype,"init",null),Ry=(0,F.gn)([jt({token:{token:ci,named:bs.command.id}})],Ry);var Au;(function(n){n.command=uo.DEL_EDGE,n.hookKey="delEdge";let r;(function(i){i.EDGE_NOT_EXIST="edge is not exist",i.EDGE_INVALID_CELL="this is not a valid cell",i.X6_DELETE_FAILED="x6 throw err when call delete edge",i.SERVICE_REJECT="service reject to delete"})(r=n.ErrEnum||(n.ErrEnum={}))})(Au||(Au={}));let ky=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().delEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{edgeConfig:h,x6Edge:p,deleteEdgeService:g,commandService:y,options:x}=u;let E=p;if(!E&&(E=yield this.findEdgeById(h),!E))return console.error(Au.ErrEnum.EDGE_NOT_EXIST,h),{err:Au.ErrEnum.EDGE_NOT_EXIST};if(!(E&&E.isEdge()))return console.error(Au.ErrEnum.EDGE_NOT_EXIST,E),{err:Au.ErrEnum.EDGE_NOT_EXIST};if(g&&!(yield g(u)))return{err:Au.ErrEnum.SERVICE_REJECT};try{const O=E.getTargetCell(),N=E.getSourceCell(),k=E.getSourcePortId(),B=E.getTargetPortId(),$=N?N.id:N.source,X=O?O.id:O.target;E.remove(Object.assign(Object.assign({},x),{isCommand:!0}));const ne=xt.create(()=>{y.executeCommand(uo.ADD_EDGE.id,{edgeConfig:{source:$,target:X,sourcePortId:k,targetPortId:B}})});return this.ctx.addUndo(ne),{err:null,edgeConfig:{source:$,target:X,sourcePortId:k,targetPortId:B},targetCell:O,sourceCell:N,sourcePortId:k,targetPortId:B}}catch(O){return console.error(Au.ErrEnum.X6_DELETE_FAILED,O),{err:Au.ErrEnum.X6_DELETE_FAILED}}}),i);return this.ctx.setResult(a),this}),this.findEdgeById=r=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.ctx.getX6Graph()).getCellById(r.id)}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],ky.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],ky.prototype,"init",null),ky=(0,F.gn)([jt({token:{token:ci,named:Au.command.id}})],ky);var O3=M(13218),AA=M.n(O3),Td;(function(n){n.command=uo.UPDATE_EDGE,n.hookKey="updateEdge",n.XFlowEdgeSetOptions={overwrite:!0},n.XFlowUpdateLabelService=(r,i,s=n.XFlowEdgeSetOptions)=>(0,F.mG)(this,void 0,void 0,function*(){r?.setLabelAt(0,i?.label||i,s)})})(Td||(Td={}));let Ly=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().updateEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{updateEdgeService:p,updateEdgeLabelService:g=Td.XFlowUpdateLabelService,options:y=Td.XFlowEdgeSetOptions}=u,x=p?yield p(u):u?.edgeConfig,E=h?.getCellById(x?.id);return E?.setData(x,y),x?.hasOwnProperty("label")&&(yield g(E,x,y)),qd()(x?.visible)&&E.setVisible(x?.visible),x.attrs&&E.setAttrs(x.attrs),x.vertices&&E.setVertices(x.vertices),x.router&&E.setRouter(x.router),x.connector&&E.setConnector(x.connector),AA()(x.source)&&E.setSource(x.source),AA()(x.target)&&E.setTarget(x.target),{edgeConfig:x,edgeCell:E}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Ly.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Ly.prototype,"init",null),Ly=(0,F.gn)([jt({token:{token:ci,named:Td.command.id}})],Ly);var Fv;(function(n){n.command=uo.HIGHLIGHT_EDGE,n.hookKey="highlightEdge"})(Fv||(Fv={}));let Gy=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().highlightEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){var h,p;const g=yield this.ctx.getX6Graph(),{edgeId:y,strokeColor:x,strokeWidth:E}=u,T=g.getEdges(),O=T.find(k=>k.id===y),N=T.filter(k=>k.id!==y);if(!O)console.error(y,"this edgeId is not exist");else{const k=O.getAttrs();((h=k?.line)===null||h===void 0?void 0:h.stroke)===x&&((p=k?.line)===null||p===void 0?void 0:p.strokeWidth)===E||(O?.setAttrs({line:{stroke:x,strokeWidth:E||2}}),N.forEach(B=>{B.setAttrs({line:k?.line})}),u.commandService.executeCommand(uo.FRONT_EDGE.id,{edgeId:y}))}return{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Gy.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Gy.prototype,"init",null),Gy=(0,F.gn)([jt({token:{token:ci,named:Fv.command.id}})],Gy);var df;(function(n){n.command=uo.FRONT_EDGE,n.hookKey="frontEdge"})(df||(df={}));let Bv=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().frontEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{edgeId:p}=u,g=h?.getCellById(p);return g?(g.toFront(),this.ctx.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){u.commandService.executeCommand(uo.BACK_EDGE.id,{edgeId:p})})))):console.error(p,"this edgeId is not exist"),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Bv.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Bv.prototype,"init",null),Bv=(0,F.gn)([jt({token:{token:ci,named:df.command.id}})],Bv);var e1;(function(n){n.command=uo.BACK_EDGE,n.hookKey="frontEdge"})(e1||(e1={}));let Fy=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().frontEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{edgeId:p}=u,g=h?.getCellById(p);return g?(g.toBack(),this.ctx.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){u.commandService.executeCommand(uo.FRONT_EDGE.id,{edgeId:p})})))):console.error(p,"this edgeId is not exist"),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Fy.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Fy.prototype,"init",null),Fy=(0,F.gn)([jt({token:{token:ci,named:e1.command.id}})],Fy);const TA=n=>{n(Ry),n(ky),n(Ly),n(Gy),n(Bv),n(Fy)},P3=[bs,Au,Td,Fv,df,e1];var y0;(function(n){n.command=Ms.ADD_GROUP,n.hookKey="addGroup",n.GROUP_PADDING=12,n.GROUP_HEADER_HEIGHT=40})(y0||(y0={}));let Mi=class{constructor(){this.getBBox=(r,i,s)=>{const{groupHeaderHeight:a=y0.GROUP_HEADER_HEIGHT,groupPadding:u=y0.GROUP_PADDING}=i,h=s.getCellsBBox(r.children);return h.moveAndExpand({x:-u,y:-(u+a),width:u*2,height:u*2+a}),h},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().addGroup.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{nodeConfig:p,createService:g,cellFactory:y,commandService:x}=h,E=yield r.getX6Graph(),T=yield x.executeCommand(Hi.ADD_NODE.id,{cellFactory:y,createNodeService:g,nodeConfig:p}),{nodeCell:O}=T.contextProvider().getResult(),{id:N}=O,{groupChildren:k}=p;if(k.length){k.forEach($=>{const X=E.getCellById($);X&&(X.setData(Object.assign(Object.assign({},X.getData()),{group:N,isCollapsed:!1})),X.prop("group",N),O.addChild(X),E.unselect(X))});const B=this.getBBox(O,p,E);O.position(B.x,B.y),O.size(B.width,B.height),O.setZIndex(0),O.prop("isGroup",!0),O.setData(Object.assign(Object.assign({},O.getData()),{width:B.width,height:B.height,groupChildrenSize:{width:B.width,height:B.height},x:B.x,y:B.y,isGroup:!0})),E.select(O)}return p.isCollapsed&&(yield x.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:p.id,isCollapsed:p.isCollapsed})),r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){x.executeCommand(Ms.DEL_GROUP.id,{nodeConfig:p})}))),{nodeConfig:p,nodeCell:O}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Mi.prototype,"contextProvider",void 0),Mi=(0,F.gn)([jt({token:{token:ci,named:y0.command.id}})],Mi);var t1;(function(n){n.command=Ms.DEL_GROUP,n.hookKey="delGroup"})(t1||(t1={}));let mi=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().delGroup.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield r.getX6Graph(),{nodeConfig:g,commandService:y,deleteService:x}=h,{id:E}=g,T=p.getCellById(E);if(x&&!(yield x(h)))return{err:"service rejected"};if(!T)return{err:"target node is not exist"};if(T.getProp("isGroup")!==!0)return{err:"target node is not group"};const{isCollapsed:O}=T.getData();O&&(yield y.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:T.id,isCollapsed:!1,collapsedSize:{width:0,height:0}}));const N=T.getChildren();return N&&N.forEach(k=>{T.unembed(k),k.prop("group",""),k.setData(Object.assign(Object.assign({},k.getData()),{group:""}))}),yield y.executeCommand(Hi.DEL_NODE.id,{nodeConfig:g}),r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){y.executeCommand(Ms.ADD_GROUP.id,{nodeConfig:g})}))),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],mi.prototype,"contextProvider",void 0),mi=(0,F.gn)([jt({token:{token:ci,named:t1.command.id}})],mi);var yi;(function(n){n.command=Ms.INIT_GROUP,n.hookKey="initGroup"})(yi||(yi={}));let Yl=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().initGroup.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{graphData:p,commandService:g}=h,y=yield r.getX6Graph(),{nodes:x}=p,E={};return x.forEach(T=>{const{id:O,group:N}=T;N&&(E[N]?E[N].push(O):E[N]=[O])}),Object.keys(E).forEach(T=>(0,F.mG)(this,void 0,void 0,function*(){const O=y.getCellById(T),N=O.getData(),k=E[T]||[];O.prop("isGroup",!0),O.setData(Object.assign(Object.assign({},N),{isGroup:!0,groupChildren:k})),k.forEach(X=>{const ne=y.getCellById(X);O.embed(ne)}),O.toBack();const{isCollapsed:B,groupCollapsedSize:$}=N;if(B){const X=h.collapsedSize||$||Bc;yield g.executeCommand(Ms.COLLAPSE_GROUP.id,{collapsedSize:X,isCollapsed:!0,nodeId:O.id})}})),{}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],Yl.prototype,"contextProvider",void 0),Yl=(0,F.gn)([jt({token:{token:ci,named:yi.command.id}})],Yl);var Qi;(function(n){n.command=Ms.COLLAPSE_GROUP,n.hookKey="collapseGroup"})(Qi||(Qi={}));let By=class{constructor(){this.toggleVisible=(r,i,s)=>{r.forEach(a=>{const u=s.findViewByCell(a).container;u.style.visibility=i?"visible":"hidden"})},this.toggleCollapse=(r,i,s)=>{const a=r.getChildren().filter(g=>g.isNode()),u=r.getData(),{isCollapsed:h,gap:p=0}=s;if(h){const g=s.collapsedSize||u.groupCollapsedSize||Bc;r.prop("previousSize",r.size()),r.size(g)}else r.size(r.prop("previousSize"));a&&a.forEach(g=>{const y=r.position(),x=i.getConnectedEdges(g).filter(E=>{const T=E.getSourceNode(),O=E.getTargetNode();return a.includes(T)&&a.includes(O)});if(h){this.toggleVisible([g,...x],!1,i),g.prop("previousSize",g.size()),g.prop("previousRelativePosition",g.position({relative:!0})),g.position(y.x+p,y.y+p);const E=r.size();g.size({width:E.width-p*2,height:E.height-p*2})}else{this.toggleVisible([g,...x],!0,i);const E=g.prop("previousRelativePosition"),T=g.prop("previousSize");g.position(E.x,E.y,{relative:!0}),g.size(T)}}),r.prop("isCollapsed",h),r.setData(Object.assign(Object.assign({},r.getData()),{isCollapsed:h}))},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().collapseGroup.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),p=h.getCellById(r.nodeId),{toggleService:g}=u;return g&&!(yield g(u))?{err:"service rejected"}:(p&&(this.toggleCollapse(p,h,r),this.ctx.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){p&&this.toggleCollapse(p,h,Object.assign(r,{isCollapsed:!r.isCollapsed}))})))),{err:null})}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],By.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],By.prototype,"init",null),By=(0,F.gn)([jt({token:{token:ci,named:Qi.command.id}})],By);const zy=n=>{n(Mi),n(mi),n(Yl),n(By)},D3=[y0,t1,yi,Qi];var n1;(function(n){n.command=Do.UPDATE_MODEL,n.hookKey="updateModel"})(n1||(n1={}));let pg=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().updateModel.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{updateModel:p,getModel:g,modelService:y}=h,x=yield g(y),E=x.getValue(),T=fc(E);yield p(T);const O=ul(T);return x.setValue(O),r.addUndo(xt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){x.setValue(O)}))),{model:x,value:O}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],pg.prototype,"contextProvider",void 0),pg=(0,F.gn)([jt({token:{token:ci,named:n1.command.id}})],pg);const Cw=()=>{},N3=n=>{n(pg)},lp=[n1],MA=[...Pc,...P3,...D3,...m0,...lp],Ch=()=>new Ra;let gg=class{constructor(){this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=r.x6Events.registerHook({name:"bind group node move event",handler:s=>(0,F.mG)(this,void 0,void 0,function*(){const a={eventName:"node:moving",callback:({node:u})=>(0,F.mG)(this,void 0,void 0,function*(){if(u.prop("isGroup")){u.prop("originPosition",u.getPosition());return}const p=u.model.graph,{group:g}=u.getData(),y=p.getNodes().find(ne=>ne.id===g);if(!y)return;const x=y.getProp("isCollapsed");let E=y.getProp("originSize"),T=!1;E==null&&(E=y.size(),y.prop("originSize",E));let O=y.prop("originPosition");O==null&&(O=y.getPosition(),y.prop("originPosition",O));let N=O.x,k=O.y,B=O.x+E.width,$=O.y+E.height;const X=y.getChildren();if(X&&X.forEach(ne=>{const be=ne.getBBox().inflate(12),me=be.getCorner();be.x<N&&(N=be.x,T=!0),be.y<k&&(k=be.y,T=!0),me.x>B&&(B=me.x,T=!0),me.y>$&&($=me.y,T=!0)}),T){y.prop({position:{x:N,y:k},size:{width:B-N,height:$-k}});const ne=Object.assign(Object.assign({},y.getData()),{x:N,y:k,width:B-N,height:$-k});x!==!0&&(ne.groupChildrenSize={width:B-N,height:$-k}),y.setData(ne)}})};s.push(a)})});return xt.create(()=>{i.dispose()})}),this.registerHookHub=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new ln;return MA.forEach(({hookKey:s,createHook:a=Ch})=>{const u=r.registerHookHub(s,a());i.push(u)}),this.commandConfig.getConfig().then(({getContributions:s})=>{s().forEach(({hookKey:u,createHook:h=Ch})=>{const p=r.registerHookHub(u,h());i.push(p)})}),i})}registerGraphCommands(r){MA.forEach(({command:i})=>{r.registerCommand(i,{createCommand:this.commandFactory})}),this.commandConfig.getConfig().then(({getContributions:i})=>{i().forEach(a=>{r.registerCommand(a.command,{createCommand:this.commandFactory})})})}};(0,F.gn)([pn(Oh),(0,F.w6)("design:type",Function)],gg.prototype,"commandFactory",void 0),(0,F.gn)([pn(Mc),(0,F.w6)("design:type",Mc)],gg.prototype,"commandConfig",void 0),gg=(0,F.gn)([En({contrib:[$u,Ys]})],gg);const Kl=(n,r)=>{r.getCommandContributions().forEach(s=>{const{CommandHandler:a,command:u}=s;n({token:{token:ci,named:u.id},useClass:a})}),M3(n),im(n),TA(n),zy(n),N3(n),n(gg)},Uy=n=>Ko(r=>{r(Oy),kp(r,n),Kl(r,n),r(gc),r(Oh,{useFactory:i=>(s,a,u)=>{const h=i.container.createChild(),p=h.get(gc);h.register(ui,{useDynamic:()=>()=>p});const g=h.getNamed(ci,s);return p.setArgs(a,u),p.handlerInstance=g,g}})}),l=n=>{const r=kl(),i=H.useMemo(()=>n.config?n.config:new Mc,[]);return H.useEffect(()=>{r.addCoreModule({config:i,createModule:Uy})},[]),null},e=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new Mc;return n(a,i),a},[i])},t=Symbol("IToolbarService"),o=pe.defineToken("IToolbarContribution");var c=M(23279),d=M.n(c),f=M(50361),v=M.n(f);let b=class{constructor(){this.toDispose=new ln,this.toolbarItems=new Map,this.onDidChangeEvent=new Ia(null),this.onDidChange=this.onDidChangeEvent.watch,this.fireOnDidChange=d()(()=>this.onDidChangeEvent.setValue(void 0),16),this.registerDisposableToolbar=r=>{const i=new ln;return r({registerToolbarItem:a=>{const u=this.registerItem(a);return i.push(u),u}}),this.toDispose.push(i),i},this.getToolbarModel=r=>{const{layout:i,mainGroups:s=[],extraGroups:a=[]}=r;return new Ia({layout:i,mainGroups:this.createToolbarGroupModel(s),extraGroups:this.createToolbarGroupModel(a)})},this.createToolbarGroupModel=r=>r.map(s=>{const{items:a=[]}=s;return Object.assign(Object.assign({},s),{items:a.map(u=>this.createToolbarModel({id:u.id})).filter(u=>!!u)})})}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerToolbarItems(this)}onStop(){this.toDispose.dispose()}registerItem(r){return this.toolbarItems.has(r.id)&&console.warn(`ToolbarRegistry ${r.id} is duplicated, in`,r),this.toolbarItems.set(r.id,r),this.fireOnDidChange(),new ln(xt.create(()=>this.fireOnDidChange()),xt.create(()=>this.toolbarItems.delete(r.id)))}createToolbarModel(r){const i=v()(this.toolbarItems.get(r.id)),s=qd()(i.isEnabled)?i.isEnabled:!0,a=qd()(i.isVisible)?i.isVisible:!0;return Object.assign(Object.assign({},i),{isEnabled:s,isVisible:a,iconName:i.iconName,text:i.text})}};(0,F.gn)([pn(Bd),(0,F.w6)("design:type",Object)],b.prototype,"commandService",void 0),(0,F.gn)([pn(zd),(0,F.w6)("design:type",Object)],b.prototype,"modelService",void 0),(0,F.gn)([Qr(o),(0,F.w6)("design:type",Object)],b.prototype,"contributionProvider",void 0),b=(0,F.gn)([En({contrib:[dl,t]})],b);const w=()=>Ko(n=>{Bi.register(n,o),n(b)}),_=n=>{const{}=n,r=kl();return H.useEffect(()=>{const i=r.addCoreModule({config:{CONFIG_TYPE:"ToolbarRegistry",getConfig:()=>(0,F.mG)(void 0,void 0,void 0,function*(){})},createModule:w});return()=>{i.dispose()}},[r]),null};_.defaultProps={XFlowModuleType:"ToolbarRegistry"};const A=Symbol("xflow-menu-root"),P=Symbol("IMenuService"),V=pe.defineToken("IMenuContribution");var q;(function(n){n.Separator="separator",n.Submenu="submenu",n.Root="root",n.Leaf="leaf"})(q||(q={}));let ee=class{constructor(){this.toDispose=new ln,this.menuMap=new Map,this.getMenu=r=>this.menuMap.get(r),this.registerDisposableMenu=r=>{const i=new ln;return r({registerMenu:a=>{const u=this.registerMenu(a);return i.push(u),u}}),this.toDispose.push(i),i}}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerMenu(this)}onStop(){this.toDispose.dispose()}registerMenu(r){return this.menuMap.set(r.id,r),xt.create(()=>this.menuMap.delete(r.id))}};(0,F.gn)([Qr(V),(0,F.w6)("design:type",Object)],ee.prototype,"contributionProvider",void 0),ee=(0,F.gn)([En({contrib:[dl,P]})],ee);const ge=()=>Ko(n=>{Bi.register(n,V),n(ee)}),_e=n=>{const{}=n,r=kl();return H.useEffect(()=>{const i=r.addCoreModule({config:{CONFIG_TYPE:"MenuRegistry",getConfig:()=>(0,F.mG)(void 0,void 0,void 0,function*(){})},createModule:ge});return()=>{i.dispose()}},[]),null};_e.defaultProps={XFlowModuleType:"MenuRegistry"};const ke=n=>{const{meta:r,graphConfig:i,graphData:s,graphLayout:a,onLoad:u,isAutoCenter:h,hookConfig:p,modelServiceConfig:g,commandConfig:y,onAppConfigReady:x,onAppDestroy:E,children:T=[],className:O,style:N}=n,[k,B]=H.useState(),$=H.useRef(null),X=Ku();H.useEffect(()=>{x&&x(X);const me=rd(X);me.start().then(()=>(0,F.mG)(void 0,void 0,void 0,function*(){var it;B(me),(it=X.getExtension("GraphConfig"))===null||it===void 0||it.config.setAppContainer($.current),r&&(yield me.commandService.executeCommand(ei.LOAD_META.id,{meta:r})),u&&u(me,X),s&&(a&&(yield me.commandService.executeCommand(ei.GRAPH_LAYOUT.id,Object.assign({graphData:s},a))),yield me.commandService.executeCommand(ei.GRAPH_RENDER.id,{graphData:s}))}));const je=()=>(0,F.mG)(void 0,void 0,void 0,function*(){E&&E(me)});return()=>{je()}},[]),H.useEffect(()=>{k&&k.commandService.executeCommand(ei.LOAD_META.id,{meta:r})},[r]),H.useEffect(()=>{(()=>(0,F.mG)(void 0,void 0,void 0,function*(){k&&(s&&a&&(yield k.commandService.executeCommand(ei.GRAPH_LAYOUT.id,Object.assign({graphData:s},a))),yield k.commandService.executeCommand(ei.GRAPH_RENDER.id,{graphData:s}),h&&(yield k.getGraphInstance()).centerContent())}))()},[s]);const ne=Oe()("xflow-app-workspace",O,...X.getContainerClassNames()),be=(Array.isArray(T)?T:[T]).some(me=>me&&me.props.isXFlowCanvas);return H.createElement(mp,{app:k},H.createElement(M0.Provider,{value:X},H.createElement("div",{className:ne,id:X.getInstanceId(),ref:$,style:N},!be&&H.createElement(Hc,{config:i,position:{top:0,bottom:0,left:0,right:0}}),T,H.createElement(Np,{config:g}),H.createElement(l,{config:y}),H.createElement(kh,{config:p}),H.createElement(_,null),H.createElement(_e,null))))};ke.defaultProps={};var Se=null;const Ue=n=>n&&n.current,Qe=()=>{const n=H.useRef(!0);return H.useEffect(()=>()=>{n.current=!1},[]),n},bt=n=>{const r=Qe(),[i,s]=H.useState(n.getValue());H.useEffect(()=>{const p=n.watch(g=>{Ue(r)&&s(g)});return()=>{p.dispose()}},[s]);const a=i,u=Ja.isValidValue(a),h=H.useCallback(p=>n.setValue(p),[n]);return[a,h,u]},Ot=n=>{const r=H.useMemo(()=>new Ia(n),[]),[i,s,a]=bt(r);return H.useEffect(()=>()=>{r.dispose()},[r]),[i,s,r,a]},Kt=n=>{const{getModel:r,initialState:i}=n,s=Qe(),a=H.useRef(),[u,h]=H.useState(i);return H.useEffect(()=>{let p;return r().then(g=>(0,F.mG)(void 0,void 0,void 0,function*(){a.current=g;const y=yield g.getValidValue();!s.current||(h(y),p=g.watch(x=>{s.current&&h(x)}))})),()=>{p&&p.dispose&&p.dispose()}},[]),[u,h,a.current]},Fn=Symbol("IKeyBindingService"),Cn=pe.defineToken("IKeyBindingContribution"),Sn=Symbol("IKeyBindingOptionProvider");let Ln=class{constructor(){this.toDispose=new ln,this.keyBindingMap=new Map,this.enabledKeyBindingMap=new Map,this.registerExternalKeybindings=()=>(0,F.mG)(this,void 0,void 0,function*(){const{registerKeybindingFunc:r}=yield this.optionProvider.getOption();return r(this)}),this.registerKeybinding=(r=[])=>{const i=new ln;return r.forEach(s=>{this.keyBindingMap.set(s.id,s),this.enableKeyBindings(s.id).then(a=>{i.push(xt.create(()=>{a.dispose(),this.keyBindingMap.delete(s.id)}))})}),this.toDispose.push(i),i},this.enableKeyBindings=r=>(0,F.mG)(this,void 0,void 0,function*(){this.disableKeyBindings([r]);const i=this.keyBindingMap.get(r),s=yield this.getX6Graph(),a=this.runCommand(i);s.bindKey(i.keybinding,a);const u=xt.create(()=>{s.unbindKey(i.keybinding),this.enabledKeyBindingMap.delete(i.id)});return this.enabledKeyBindingMap.set(i.id,u),u}),this.disableKeyBindings=r=>{r.forEach(i=>{const s=this.enabledKeyBindingMap.get(i);s&&s.dispose()})},this.runCommand=r=>i=>(0,F.mG)(this,void 0,void 0,function*(){yield r.callback(r,this.modelService,this.commandService,i)}),this.getX6Graph=()=>(0,F.mG)(this,void 0,void 0,function*(){return yield this.graphProvider.getGraphInstance()})}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerKeybinding(this);this.registerExternalKeybindings()}onStop(){this.toDispose.dispose()}};(0,F.gn)([pn(Sn),(0,F.w6)("design:type",Object)],Ln.prototype,"optionProvider",void 0),(0,F.gn)([pn(Bd),(0,F.w6)("design:type",Object)],Ln.prototype,"commandService",void 0),(0,F.gn)([pn(zd),(0,F.w6)("design:type",Object)],Ln.prototype,"modelService",void 0),(0,F.gn)([Qr(Cn),(0,F.w6)("design:type",Object)],Ln.prototype,"contributionProvider",void 0),(0,F.gn)([pn(qu),(0,F.w6)("design:type",Object)],Ln.prototype,"graphProvider",void 0),Ln=(0,F.gn)([En({contrib:[dl,Fn]})],Ln);const Jr=(n,r)=>{n(Sn,{useDynamic:()=>({getOption:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.getConfig()})}),lifecycle:pe.Lifecycle.singleton})},ii=n=>Ko(r=>{Jr(r,n),Bi.register(r,Cn),r(Ln)});var Ht;(function(n){n.CONFIG_TYPE="CONTEXT_CONFIG"})(Ht||(Ht={}));const Pn=()=>xt.create(()=>{});class Rr{constructor(){this.CONFIG_TYPE=Ht.CONFIG_TYPE,this.keybindingFunc=Pn,this.isMounted=new Gn,this.setKeybindingFunc=r=>{this.keybindingFunc=r},this.setMountState=()=>{this.isMounted.resolve(!0)},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return yield this.isMounted.promise,{CONFIG_TYPE:this.CONFIG_TYPE,registerKeybindingFunc:this.keybindingFunc}}),this.dispose=()=>{this.keybindingFunc=Pn,this.isMounted=new Gn}}}const Ro=n=>{const{config:r}=n,i=kl(),s=H.useMemo(()=>r||new Rr,[r]);return H.useEffect(()=>{const a=i.addCoreModule({config:s,createModule:ii});return s.setMountState(),()=>{a.dispose(),s.dispose()}},[i,s]),null},as=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new Rr;return n(a,i),a},[i])};function Oa(n){return new Promise(r=>setTimeout(()=>r(!0),n))}var _s=M(1870);class r1{constructor(){this.map=new Map([["default",_s.Z],["QuestionCircleOutlined",_s.Z]]),this.map.set("default",_s.Z),this.map.set("QuestionCircleOutlined",_s.Z)}get(r){return this.map.get(r)}set(r,i){this.map.set(r,i)}has(r){return this.map.has(r)}}const Tu=new r1;var b0=null;let x0=class{constructor(){this.toDispose=new ln,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return xt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new ln,s=[r.graphOptions.registerHook({name:"add snapline options",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){a.snapline={enabled:!0,className:"xflow-snapline",clean:5e3}})})];return i.pushAll(s),xt.create(()=>{})})}};x0=(0,F.gn)([En({contrib:Ys})],x0);const up=()=>Ko(n=>{n(x0)}),dp="CanvasSnapline",OA="#faad14",PA=n=>{const{color:r=OA}=n,i=kl(),s=H.useMemo(()=>({CONFIG_TYPE:dp,getConfig:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return{}})}),[]);return H.useEffect(()=>{const a=`xflow-snapline-${Date.now()}`;i.addContainerClassNames(a);const u=`
    .${a} .xflow-snapline .x6-widget-snapline-horizontal,
    .${a} .xflow-snapline .x6-widget-snapline-vertical {
      border-color: ${r};
    }`,h=Sg(u);return()=>{document.head.removeChild(h)}},[r,i]),H.createElement(kf,{config:s,createModule:up})};var hp=M(45777),zv;(function(n){n.MOUSE_ENTER="node-port:mouseenter",n.MOUSE_LEAVE="node-port:mouseleave"})(zv||(zv={}));var DA;(function(n){n.id="ACTIVE_NODE_PORT",n.useModel=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=yield r.awaitModel(n.id);return{data:yield i.getValidValue(),model:i}})})(DA||(DA={}));let NA=class{constructor(){this.toDispose=new ln,this.getGraphInstance=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=yield this.graphProvider.getGraphInstance(),i=yield this.graphProvider.getGraphOptions();return{graph:r,config:i}}),this.getPortRenderConfig=()=>({onPortRendered(i){const s=this,{port:a,node:u}=i,{contentSelectors:h}=i,p=h&&h["xflow-port-group"];p instanceof Element&&(p.setAttribute("class",Oe()("xflow-port-group",{connected:a.connected&&a.group!=="out",groupPort:u?.isGroup&&u?.isGroup()})),p.addEventListener("mouseenter",g=>{const y={e:g,portId:a.id,nodeId:u.id,portData:a,nodeData:u.getData(),tooltip:a.tooltip,placement:a.group};s.trigger(zv.MOUSE_ENTER,y)}),p.addEventListener("mouseleave",g=>{const y={e:g,portId:a.id,nodeId:u.id,portData:a,nodeData:u.getData(),tooltip:a.tooltip,placement:a.group};s.trigger(zv.MOUSE_LEAVE,y)}))}}),this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return xt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new ln,s=[r.graphOptions.registerHook({name:"add onPortRendered options ",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){Object.assign(a,this.getPortRenderConfig())})})];return i.pushAll(s),xt.create(()=>{})})}registerModel(r){r.registerModel({id:DA.id,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s,config:a}=yield this.getGraphInstance(),u=g=>{const{x:y,y:x,width:E,height:T}=g.target.getBoundingClientRect(),O=a.rootContainer.getBoundingClientRect();return{x:y-(O?.x||0)+E/2,y:x-(O?.y||0)+T/2}},h=g=>{i.setValue(Object.assign(Object.assign({},g),{position:u(g.e)}))},p=()=>{i.setValue(null)};return s.on(zv.MOUSE_ENTER,h),s.on(zv.MOUSE_LEAVE,p),s.on("cell:mouseleave",p),xt.create(()=>{s.off(zv.MOUSE_ENTER,h),s.off(zv.MOUSE_LEAVE,p)})})})}};(0,F.gn)([pn(qu),(0,F.w6)("design:type",Object)],NA.prototype,"graphProvider",void 0),NA=(0,F.gn)([En({contrib:[Ys,pc]})],NA);const aN=()=>Ko(n=>{n(NA)}),cN="CanvasNodePortTooltip",lN=n=>{const r=Qo(),[i,,s]=Ot(null);H.useEffect(()=>{if(!r)return;const p=(()=>(0,F.mG)(void 0,void 0,void 0,function*(){const{model:g}=yield DA.useModel(r.modelService);return g.watch(y=>{s.setValue(y)})}))();return()=>{p.then(g=>{g.dispose()})}},[s,r]);const a=!!(i&&i.position&&i.position.x);if(!a)return null;const u=n.getTooltip?n.getTooltip(i):i.tooltip;return H.createElement(hp.Z,{visible:a,title:u,placement:i.placement||"top"},H.createElement("span",{className:"canvas-node-port-tooltip",style:{position:"absolute",left:i.position.x,top:i.position.y}}))},uN=n=>{const r=H.useCallback(()=>(0,F.mG)(void 0,void 0,void 0,function*(){return null}),[]);return H.createElement(kf,{createModule:aN,config:{CONFIG_TYPE:cN,getConfig:r}},H.createElement(lN,Object.assign({},n)))};var I3;(function(n){n.CONFIG_TYPE="ContextMenuConfig"})(I3||(I3={}));class ww{constructor(r){this.CONFIG_TYPE=I3.CONFIG_TYPE,this.setMenuModelService=i=>{this.menuModelService=i},this.setCustomMenuRender=i=>{this.menuCustomRender=i},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return{CONFIG_TYPE:this.CONFIG_TYPE,menuCustomRender:this.menuCustomRender,menuModelService:this.menuModelService}}),this.moduleId=r||Cc()}dispose(){}}var IA;(function(n){n.id="CONTEXT_MENU_MODEL",n.useValue=qi(n.id),n.getModel=Uo(n.id)})(IA||(IA={}));const{inject:JP,singleton:dN}=j;let Ew=class{constructor(){this.toDispose=new ln,this.getMenuModelValue=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=yield this.menuConfig.getConfig(),{anchor:s,type:a,cell:u}=r,h=new ln;this.toDispose.push(h);const p=u?u.getData():null,g=new Ia({id:"menuroot",type:q.Root,submenu:[]});h.push(xt.create(()=>{g.dispose()}));const y={toDispose:h,anchor:s,target:{data:p,type:a},customRender:null,menuModel:g};return i.menuCustomRender&&(y.customRender=yield i.menuCustomRender(r,this.modelService)),i.menuModelService&&(yield i.menuModelService(r,y.menuModel,this.modelService,h)),y})}registerModel(r){const i=[r.registerModel({id:IA.id,getInitialValue:()=>null,watchChange:(s,a)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield hl.getModel(a)).watch(h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield this.getMenuModelValue(h);s.setValue(p)}))})})];this.toDispose.pushAll(i)}};(0,F.gn)([JP(ww),(0,F.w6)("design:type",ww)],Ew.prototype,"menuConfig",void 0),(0,F.gn)([JP(zd),(0,F.w6)("design:type",Object)],Ew.prototype,"modelService",void 0),Ew=(0,F.gn)([dN({contrib:[pc]})],Ew);const hN=n=>Ko(r=>{r(Ew),r(ww,{useValue:n})});var vg=M(1413),fN=M(44925),pN=M(18481),i1={adjustX:1,adjustY:1},o1=[0,0],gN={topLeft:{points:["bl","tl"],overflow:i1,offset:[0,-4],targetOffset:o1},topCenter:{points:["bc","tc"],overflow:i1,offset:[0,-4],targetOffset:o1},topRight:{points:["br","tr"],overflow:i1,offset:[0,-4],targetOffset:o1},bottomLeft:{points:["tl","bl"],overflow:i1,offset:[0,4],targetOffset:o1},bottomCenter:{points:["tc","bc"],overflow:i1,offset:[0,4],targetOffset:o1},bottomRight:{points:["tr","br"],overflow:i1,offset:[0,4],targetOffset:o1}},vN=gN,fi={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(r){var i=r.keyCode;if(r.altKey&&!r.ctrlKey||r.metaKey||i>=fi.F1&&i<=fi.F12)return!1;switch(i){case fi.ALT:case fi.CAPS_LOCK:case fi.CONTEXT_MENU:case fi.CTRL:case fi.DOWN:case fi.END:case fi.ESC:case fi.HOME:case fi.INSERT:case fi.LEFT:case fi.MAC_FF_META:case fi.META:case fi.NUMLOCK:case fi.NUM_CENTER:case fi.PAGE_DOWN:case fi.PAGE_UP:case fi.PAUSE:case fi.PRINT_SCREEN:case fi.RIGHT:case fi.SHIFT:case fi.UP:case fi.WIN_KEY:case fi.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(r){if(r>=fi.ZERO&&r<=fi.NINE||r>=fi.NUM_ZERO&&r<=fi.NUM_MULTIPLY||r>=fi.A&&r<=fi.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&r===0)return!0;switch(r){case fi.SPACE:case fi.QUESTION_MARK:case fi.NUM_PLUS:case fi.NUM_MINUS:case fi.NUM_PERIOD:case fi.NUM_DIVISION:case fi.SEMICOLON:case fi.DASH:case fi.EQUALS:case fi.COMMA:case fi.PERIOD:case fi.SLASH:case fi.APOSTROPHE:case fi.SINGLE_QUOTE:case fi.OPEN_SQUARE_BRACKET:case fi.BACKSLASH:case fi.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},QP=fi,eD=function(r){return+setTimeout(r,16)},tD=function(r){return clearTimeout(r)};typeof window<"u"&&"requestAnimationFrame"in window&&(eD=function(r){return window.requestAnimationFrame(r)},tD=function(r){return window.cancelAnimationFrame(r)});var nD=0,R3=new Map;function rD(n){R3.delete(n)}function iD(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;nD+=1;var i=nD;function s(a){if(a===0)rD(i),n();else{var u=eD(function(){s(a-1)});R3.set(i,u)}}return s(r),i}iD.cancel=function(n){var r=R3.get(n);return rD(r),tD(r)};var mN=QP.ESC,yN=QP.TAB;function bN(n){var r=n.visible,i=n.setTriggerVisible,s=n.triggerRef,a=n.menuRef,u=n.onVisibleChange,h=n.autoFocus,p=H.useRef(!1),g=function(){if(r&&s.current){var T,O,N,k;(T=s.current)===null||T===void 0||(O=T.triggerRef)===null||O===void 0||(N=O.current)===null||N===void 0||(k=N.focus)===null||k===void 0||k.call(N),i(!1),typeof u=="function"&&u(!1)}},y=function(){var T,O;(T=a.current)===null||T===void 0||(O=T.focus)===null||O===void 0||O.call(T),p.current=!0},x=function(T){var O;switch(T.keyCode){case mN:g();break;case yN:!p.current&&((O=a.current)===null||O===void 0?void 0:O.focus)?(T.preventDefault(),y()):g();break}};H.useEffect(function(){return r?(window.addEventListener("keydown",x),h&&iD(y,3),function(){window.removeEventListener("keydown",x),p.current=!1}):function(){p.current=!1}},[r])}var xN=M(59864);function Lk(n,r,i){var s=React.useRef({});return(!("value"in s.current)||i(s.current.condition,r))&&(s.current.value=n(),s.current.condition=r),s.current.value}function CN(n,r){typeof n=="function"?n(r):(0,Va.Z)(n)==="object"&&n&&"current"in n&&(n.current=r)}function oD(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(function(a){return a});return s.length<=1?s[0]:function(a){r.forEach(function(u){CN(u,a)})}}function Gk(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return useMemo(function(){return oD.apply(void 0,r)},r,function(s,a){return s.length===a.length&&s.every(function(u,h){return u===a[h]})})}function wN(n){var r,i,s=(0,xN.isMemo)(n)?n.type.type:n.type;return!(typeof s=="function"&&!(!((r=s.prototype)===null||r===void 0)&&r.render)||typeof n=="function"&&!(!((i=n.prototype)===null||i===void 0)&&i.render))}var EN=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function SN(n,r){var i=n.arrow,s=i===void 0?!1:i,a=n.prefixCls,u=a===void 0?"rc-dropdown":a,h=n.transitionName,p=n.animation,g=n.align,y=n.placement,x=y===void 0?"bottomLeft":y,E=n.placements,T=E===void 0?vN:E,O=n.getPopupContainer,N=n.showAction,k=n.hideAction,B=n.overlayClassName,$=n.overlayStyle,X=n.visible,ne=n.trigger,be=ne===void 0?["hover"]:ne,me=n.autoFocus,je=(0,fN.Z)(n,EN),it=H.useState(),ct=(0,xu.Z)(it,2),Zt=ct[0],At=ct[1],Yt="visible"in n?X:Zt,st=H.useRef(null);H.useImperativeHandle(r,function(){return st.current});var Bn=H.useRef(null),kn="".concat(u,"-menu");bN({visible:Yt,setTriggerVisible:At,triggerRef:st,menuRef:Bn,onVisibleChange:n.onVisibleChange,autoFocus:me});var Jn=function(){var yr=n.overlay,Fi;return typeof yr=="function"?Fi=yr():Fi=yr,Fi},Li=function(yr){var Fi=n.onOverlayClick,Yi=Jn().props;At(!1),Fi&&Fi(yr),Yi.onClick&&Yi.onClick(yr)},Gi=function(yr){var Fi=n.onVisibleChange;At(yr),typeof Fi=="function"&&Fi(yr)},Xr=function(){var yr,Fi=Jn(),Yi=oD(Bn,Fi.ref),mo=(yr={prefixCls:kn},(0,kt.Z)(yr,"data-dropdown-inject",!0),(0,kt.Z)(yr,"onClick",Li),(0,kt.Z)(yr,"ref",wN(Fi)?Yi:void 0),yr);return typeof Fi.type=="string"&&(delete mo.prefixCls,delete mo["data-dropdown-inject"]),H.createElement(H.Fragment,null,s&&H.createElement("div",{className:"".concat(u,"-arrow")}),H.cloneElement(Fi,mo))},Ho=function(){var yr=n.overlay;return typeof yr=="function"?Xr:Xr()},na=function(){var yr=n.minOverlayWidthMatchTrigger,Fi=n.alignPoint;return"minOverlayWidthMatchTrigger"in n?yr:!Fi},pi=function(){var yr=n.openClassName;return yr!==void 0?yr:"".concat(u,"-open")},ra=function(){var yr=n.children,Fi=yr.props?yr.props:{},Yi=Oe()(Fi.className,pi());return Yt&&yr?H.cloneElement(yr,{className:Yi}):yr},ja=k;return!ja&&be.indexOf("contextMenu")!==-1&&(ja=["click"]),H.createElement(pN.Z,(0,vg.Z)((0,vg.Z)({builtinPlacements:T},je),{},{prefixCls:u,ref:st,popupClassName:Oe()(B,(0,kt.Z)({},"".concat(u,"-show-arrow"),s)),popupStyle:$,action:be,showAction:N,hideAction:ja||[],popupPlacement:x,popupAlign:g,popupTransitionName:h,popupAnimation:p,popupVisible:Yt,stretch:na()?"minWidth":"",popup:Ho(),onPopupVisibleChange:Gi,getPopupContainer:O}),ra())}var _N=H.forwardRef(SN),AN=_N;class RA extends H.Component{render(){const{children:r,trigger:i,disabled:s}=this.props,a=`${this.props.prefixCls}-dropdown`,u=H.Children.only(r),h=H.cloneElement(u,{className:Oe()(r.props.className,`${a}-trigger`),disabled:s}),p=s?[]:Array.isArray(i)?i:[i];let g=!1;p&&p.indexOf("contextMenu")!==-1&&(g=!0);const y=H.Children.only(this.props.overlay),x=H.createElement("div",{className:`${a}-overlay`},y);return H.createElement(AN,Object.assign({},this.props,{prefixCls:a,overlay:x,alignPoint:g,trigger:p}),h)}}(function(n){n.defaultProps={trigger:"hover",prefixCls:"x6",mouseEnterDelay:.15,mouseLeaveDelay:.1,placement:"bottomLeft"}})(RA||(RA={}));const kA=H.createContext({});class Uv extends H.PureComponent{constructor(){super(...arguments),this.onHotkey=()=>{this.triggerHandler()},this.onClick=r=>{this.triggerHandler(r)}}componentDidMount(){const{hotkey:r}=this.props;r&&this.props.context.registerHotkey(r,this.onHotkey)}componentWillUnmount(){const{hotkey:r}=this.props;r&&this.props.context.unregisterHotkey(r,this.onHotkey)}triggerHandler(r){!this.props.disabled&&!this.props.hidden&&(this.props.name&&this.props.context.onClick(this.props.name,r),this.props.onClick&&this.props.onClick())}render(){return H.createElement("div",Object.assign({},Uv.getProps(this.props)),Uv.getContent(this.props,this.onClick))}}(function(n){function r(s,a){const{className:u,disabled:h,active:p,hidden:g}=s,{prefixCls:y}=s.context,x=`${y}-item`;return{className:Oe()(x,a,{[`${x}-active`]:p,[`${x}-hidden`]:g,[`${x}-disabled`]:h},u)}}n.getProps=r;function i(s,a,u,h){const{icon:p,text:g,hotkey:y,children:x}=s,{prefixCls:E}=s.context,T=`${E}-item`;return H.createElement(H.Fragment,null,H.createElement("button",{type:"button",className:`${T}-button`,onClick:a},p&&H.isValidElement(p)&&H.createElement("span",{className:`${T}-icon`},p),H.createElement("span",{className:`${T}-text`},g||x),y&&H.createElement("span",{className:`${T}-hotkey`},y),u),h)}n.getContent=i})(Uv||(Uv={}));const TN=n=>H.createElement(kA.Consumer,null,r=>H.createElement(Uv,Object.assign({context:r},n))),MN=()=>H.createElement(kA.Consumer,null,({prefixCls:n})=>H.createElement("div",{className:`${n}-item ${n}-item-divider`}));var ON=function(n,r){var i={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&r.indexOf(s)<0&&(i[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)r.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(i[s[a]]=n[s[a]]);return i};const PN=n=>{const{hotkey:r,children:i}=n,s=ON(n,["hotkey","children"]);return H.createElement(kA.Consumer,null,a=>{const{prefixCls:u}=a,h=Uv.getProps(Object.assign({context:a},n),`${u}-submenu`);return H.createElement("div",Object.assign({},h),Uv.getContent(Object.assign({context:a},s),null,H.createElement("span",{className:`${u}-submenu-arrow`}),H.createElement("div",{className:`${u}-submenu-menu`},i)))})};class Vv extends H.PureComponent{constructor(){super(...arguments),this.onClick=(r,i)=>{this.props.stopPropagation&&i!=null&&i.stopPropagation(),this.props.onClick&&this.props.onClick(r)},this.registerHotkey=(r,i)=>{this.props.registerHotkey&&this.props.registerHotkey(r,i)},this.unregisterHotkey=(r,i)=>{this.props.unregisterHotkey&&this.props.unregisterHotkey(r,i)}}render(){const{prefixCls:r,className:i,children:s,hasIcon:a}=this.props,u=`${r}-menu`,h=kA.Provider,p={prefixCls:u,onClick:this.onClick,registerHotkey:this.registerHotkey,unregisterHotkey:this.unregisterHotkey};return H.createElement("div",{className:Oe()(u,{[`${u}-has-icon`]:a},i)},H.createElement(h,{value:p},s))}}(function(n){n.Item=TN,n.Divider=MN,n.SubMenu=PN,n.defaultProps={prefixCls:"x6",stopPropagation:!1}})(Vv||(Vv={}));const k3=n=>{const{idx:r,menuOptions:i,target:s,modelService:a,commandService:u,onHide:h}=n,{id:p,label:g,isEnabled:y=!0,isVisible:x=!0,iconName:E,submenu:T=[],active:O,hotkey:N,render:k,onClick:B}=i;if(!x)return null;if(i.type==="separator")return H.createElement(Vv.Divider,{key:String(i.id)+r});if(i.type==="root")return H.createElement(Vv,{hasIcon:!0},T.map((X,ne)=>k3({idx:ne,target:s,commandService:u,modelService:a,menuOptions:X,onHide:h})));if(i.submenu&&Array.isArray(i.submenu)){const X=Tu.get(E),ne=!y;return H.createElement(Vv.SubMenu,{key:String(p),text:g,disabled:ne||T.length===0,icon:X?H.createElement(X,null):null,active:O,hotkey:N},T.map((be,me)=>k3({idx:me,target:s,commandService:u,modelService:a,menuOptions:be,onHide:h})))}const $=Tu.get(E);return k?H.createElement(k,{menuItem:i,target:s,commandService:u,modelService:a,onHide:h},[H.createElement(Vv.Item,{key:String(p),text:g,disabled:!y,icon:$?H.createElement($,null):null,active:O,hotkey:N})]):H.createElement(Vv.Item,{key:String(p),text:g,disabled:!y,icon:$?H.createElement($,null):null,active:O,hotkey:N,onClick:()=>(0,F.mG)(void 0,void 0,void 0,function*(){yield B({menuItem:i,target:s,commandService:u,modelService:a}),h&&h()})})},DN=n=>{const{menuModel:r,target:i,onHide:s}=n,{modelService:a,commandService:u}=Qo(),[h]=bt(r);return k3({idx:-1,target:i,commandService:u,modelService:a,menuOptions:h,onHide:s})},NN=({toDispose:n})=>(H.useEffect(()=>()=>{n.dispose()},[n]),null),IN=()=>{const n=H.useRef(),r=Qo(),[i,,s]=Kt({getModel:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return yield IA.getModel(r.modelService)}),initialState:{anchor:null,menuModel:null,target:null,customRender:null,toDispose:null}}),{target:a,anchor:u,menuModel:h,customRender:p,toDispose:g}=i;if(!a||!u||!h)return null;const y=()=>{s.setValue({anchor:null,menuModel:null,target:null,customRender:null,toDispose:null})},x=p?H.createElement(p,{target:a,modelService:r.modelService,onHide:y}):H.createElement(DN,{target:a,menuModel:h,onHide:y});return H.createElement("div",{className:"xflow-menu-mask",ref:n,onClick:y,onContextMenu:E=>{E.preventDefault(),E.stopPropagation()}},H.createElement(NN,{toDispose:g}),H.createElement(RA,{visible:!0,getPopupContainer:()=>n.current,overlay:x},H.createElement("div",{className:"xflow-context-menu-anchor",style:{top:u.y,left:u.x}})))},Fk="CanvasContextMenu",RN=n=>{const i=!!Qo(),s=H.useMemo(()=>n.config?n.config:new ww,[n.config]);return H.createElement(kf,{createModule:hN,config:s},i&&H.createElement(IN,{config:s}))},kN=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new ww;return n(a,i),a},[i])},L3="CanvasToolbar";class sD{constructor(){this.CONFIG_TYPE=L3,this.setToolbarName=r=>{this.moduleId=L3+"__"+r},this.setToolbarModelService=r=>{this.toolbarModelService=r},this.setCustomToolbarRender=r=>{this.customRenderService=r},this.getConfig=()=>({CONFIG_TYPE:this.CONFIG_TYPE,toolbarCustomRender:this.customRenderService,toolbarModelService:this.toolbarModelService}),this.moduleId=L3+"__"+Cc()}dispose(){}}var aD=M(11382);const G3=H.createContext({});class LN extends H.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{this.processClick()},this.handleDropdownItemClick=r=>{this.processClick(r,!1)}}processClick(r=this.props.name,i=this.props.dropdown){!this.props.disabled&&!i&&(r&&this.props.context.onClick(r),this.props.onClick&&this.props.onClick(r))}renderButton(){const{className:r,hidden:i,disabled:s,active:a,icon:u,text:h,dropdown:p,dropdownArrow:g,tooltip:y,tooltipProps:x,tooltipAsTitle:E,children:T}=this.props,{prefixCls:O}=this.props.context,N=`${O}-item`,k={onClick:this.handleClick,className:Oe()(N,{[`${N}-hidden`]:i,[`${N}-active`]:a,[`${N}-disabled`]:s,[`${N}-dropdown`]:p},r)};y&&E&&(k.title=y);const B=H.createElement("button",Object.assign({type:"button"},k),u&&H.isValidElement(u)&&H.createElement("span",{className:`${N}-icon`},u),(h||T)&&H.createElement("span",{className:`${N}-text`},h||T),p&&g&&H.createElement("span",{className:`${N}-dropdown-arrow`}));return y&&!E&&!s?H.createElement(hp.Z,Object.assign({title:y,placement:"bottom",mouseEnterDelay:0,mouseLeaveDelay:0},x),B):B}render(){const{dropdown:r,dropdownProps:i,disabled:s}=this.props,a=this.renderButton();if(r!=null&&!s){const u=H.createElement("div",null,r.type===Vv?H.cloneElement(r,{onClick:this.handleDropdownItemClick}):r),h=Object.assign(Object.assign({trigger:["click"]},i),{disabled:s,overlay:u});return H.createElement(RA,Object.assign({},h),a)}return a}}const cD=n=>H.createElement(G3.Consumer,null,r=>H.createElement(LN,Object.assign({context:r},n)));cD.defaultProps={dropdownArrow:!0};const GN=({children:n,className:r})=>H.createElement(G3.Consumer,null,({prefixCls:i})=>H.createElement("div",{className:Oe()(`${i}-group`,r)},n));class s1 extends H.PureComponent{constructor(){super(...arguments),this.onClick=(r,i)=>{this.props.onClick&&this.props.onClick(r,i)}}render(){const{prefixCls:r,className:i,children:s,extra:a,size:u,align:h,hoverEffect:p}=this.props,g=`${r}-toolbar`;return H.createElement("div",{className:Oe()(g,i,{[`${g}-${u}`]:u,[`${g}-align-right`]:h==="right",[`${g}-hover-effect`]:p})},H.createElement("div",{className:`${g}-content`},H.createElement("div",{className:`${g}-content-inner`},H.createElement(G3.Provider,{value:{prefixCls:g,onClick:this.onClick}},s)),a&&H.createElement("div",{className:`${g}-content-extras`},a)))}}(function(n){n.Item=cD,n.Group=GN,n.defaultProps={prefixCls:"x6",hoverEffect:!1}})(s1||(s1={}));const FN=n=>{const r=Qo(),{item:i,layout:s}=n,a=Oe()({["xflow-toolbar-item"]:!0}),u=s==="vertical"?"":i.text;let h;if(i.icon)h=i.icon;else if(i.iconName){const T=Tu.get(i.iconName);h=H.createElement(T,null)}const p=i.render,{isEnabled:g=!0}=i,{commandService:y,modelService:x}=r,E=()=>{i.onClick&&i.onClick({toolbarItem:i,commandService:y,modelService:x})};return p?H.createElement(p,Object.assign({},i,{onClick:E}),H.createElement(s1.Item,Object.assign({},i,{icon:h,text:u,className:a,disabled:!g,tooltip:i.tooltip||i.text,tooltipProps:Object.assign({placement:s==="vertical"?"left":"bottom"},i.tooltipProps),onClick:()=>{}}))):H.createElement(s1.Item,Object.assign({},i,{icon:h,text:u,className:a,hidden:!i,disabled:!g,tooltip:i.tooltip||i.text,onClick:E,tooltipProps:Object.assign(Object.assign({},i.tooltipProps),{placement:s==="vertical"?"left":"bottom"})}))},BN=n=>{const{group:r,layout:i}=n,s=H.useMemo(()=>r.name||Cc(),[r.name]),{items:a=[]}=r;if(a.length===0)return null;const u=Oe()({["xflow-toolbar-group"]:!0});return H.createElement(s1.Group,{className:u,key:s},a.map(h=>H.createElement(FN,{item:h,layout:i,key:h.id})))},zN=n=>{const{config:r}=n,i=r.moduleId,s=Qo(),[a,u,h,p]=Ot({name:i,layout:n.layout,mainGroups:[],extraGroups:[],customRender:null});return H.useEffect(()=>{const g=new ln;if(!s.modelService.findDeferredModel(i)){const{toolbarCustomRender:x,toolbarModelService:E}=r.getConfig(),T=s.modelService.registerModel({id:i,modelFactory:()=>h,watchChange:O=>(0,F.mG)(void 0,void 0,void 0,function*(){if(E&&(yield E(O,s.modelService,g)),x){const N=k=>{O.setValue(B=>B.customRender=k)};yield x(s.modelService,N)}return g})});g.push(T)}return()=>{g.dispose()}},[]),{isModelReady:p,state:a,setState:u,toolbarModel:h}},lD=n=>{const{idx:r,groups:i,layout:s,toolbarOptions:a}=n,{hoverEffect:u=!0}=a;return H.createElement(s1,{hoverEffect:u},i.map((h,p)=>{const g=r+p;return H.createElement(BN,{key:g,group:h,layout:s})}))},UN=n=>{const{isModelReady:r,state:i}=zN(n),s=Bl(n.position),{mainGroups:a=[],extraGroups:u=[],layout:h,customRender:p}=i,g=Oe()(n.className,h,"xflow-toolbar"),y=Oe()({[h]:!0,["xflow-toolbar-root"]:!0});return r?p?H.createElement("div",{className:g,style:Object.assign(Object.assign({},s),n.style)},H.createElement(p,{config:i})):H.createElement("div",{className:g,style:Object.assign(Object.assign({},s),n.style)},H.createElement("div",{className:y},a.length>0&&H.createElement(lD,{idx:"mainGroups",groups:a,layout:h,toolbarOptions:i}),u.length>0&&H.createElement(lD,{idx:"extraGroups",groups:u,layout:h,toolbarOptions:i}))):H.createElement("div",{className:g,style:Object.assign(Object.assign({},s),n.style)},H.createElement(aD.Z,{spinning:!0,size:"small"}))},VN=H.memo(UN),uD=n=>{const i=!!Qo(),s=H.useMemo(()=>n.config?n.config:new sD,[n.config]);return i?H.createElement(VN,Object.assign({},n,{config:s})):null},dD=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new sD;return n(a,i),a},[i])};var jN=M(72504),HN=M(16130),$N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zm196-50c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zm0-140c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}},{tag:"path",attrs:{d:"M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"}}]},name:"one-to-one",theme:"outlined"},WN=$N,LA=M(27029),hD=function(r,i){return H.createElement(LA.Z,(0,vg.Z)((0,vg.Z)({},r),{},{ref:i,icon:WN}))};hD.displayName="OneToOneOutlined";var XN=H.forwardRef(hD),ZN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},YN=ZN,fD=function(r,i){return H.createElement(LA.Z,(0,vg.Z)((0,vg.Z)({},r),{},{ref:i,icon:YN}))};fD.displayName="CompressOutlined";var KN=H.forwardRef(fD),qN=M(38296),JN=M(21444),Sw;(function(n){Tu.set("ZoomInOutlined",jN.Z),Tu.set("ZoomOutOutlined",HN.Z),Tu.set("OneToOneOutlined",XN),Tu.set("CompressOutlined",KN),Tu.set("FullscreenOutlined",qN.Z),Tu.set("FullscreenExitOutlined",JN.Z),n.ZOOM_IN=ei.GRAPH_ZOOM.id+"-zoom-in",n.ZOOM_OUT=ei.GRAPH_ZOOM.id+"-zoom-out",n.SCALE_TO_ONE=ei.GRAPH_ZOOM.id+"-scale-to-one",n.SCALE_TO_FIT=ei.GRAPH_ZOOM.id+"-scale-to-fit",n.FULLSCREEN=ei.GRAPH_ZOOM.id+"-fullscreen",n.MAX_SCALE=1.5,n.MIN_SCALE=.05,n.zoomOptions={maxScale:n.MAX_SCALE,minScale:n.MIN_SCALE},n.getToolbarConfig=({zoomFactor:r,fullscreen:i})=>[{name:"main",items:[{id:n.ZOOM_IN,tooltip:"\u653E\u5927",iconName:"ZoomInOutlined",onClick:({commandService:s})=>{s.executeCommand(ei.GRAPH_ZOOM.id,{factor:.1,zoomOptions:n.zoomOptions})}},{id:n.ZOOM_OUT,tooltip:"\u7F29\u5C0F",iconName:"ZoomOutOutlined",onClick:({commandService:s})=>{s.executeCommand(ei.GRAPH_ZOOM.id,{factor:-.1,zoomOptions:n.zoomOptions})}},{id:n.SCALE_TO_ONE,iconName:"OneToOneOutlined",tooltip:"\u7F29\u653E\u52301:1",isEnabled:r!==1,onClick:({commandService:s})=>{s.executeCommand(ei.GRAPH_ZOOM.id,{factor:"real",zoomOptions:n.zoomOptions})}},{id:n.SCALE_TO_FIT,tooltip:"\u7F29\u653E\u5230\u9002\u5E94\u5C4F\u5E55",iconName:"CompressOutlined",onClick:({commandService:s})=>{s.executeCommand(ei.GRAPH_ZOOM.id,{factor:"fit",zoomOptions:n.zoomOptions})}},{id:n.FULLSCREEN,tooltip:i?"\u9000\u51FA\u5168\u5C4F":"\u5168\u5C4F",iconName:i?"FullscreenExitOutlined":"FullscreenOutlined",onClick:({commandService:s})=>{s.executeCommand(ei.GRAPH_FULLSCREEN.id,{})}}]}]})(Sw||(Sw={}));const Bk="CANVAS_SCALE_TOOLBAR",QN=dD(n=>{n.setToolbarModelService((r,i)=>(0,F.mG)(void 0,void 0,void 0,function*(){const s=yield qs.useValue(i);r.setValue(h=>{h.mainGroups=Sw.getToolbarConfig({zoomFactor:s.zoomFactor,fullscreen:!1})});const a=yield $d.getModel(i);a.setValue(!1),a.watch(h=>{r.setValue(p=>{p.mainGroups=Sw.getToolbarConfig({zoomFactor:s.zoomFactor,fullscreen:h})})}),(yield qs.getModel(i)).watch(({zoomFactor:h})=>(0,F.mG)(void 0,void 0,void 0,function*(){const p=yield $d.useValue(i);r.setValue(g=>{g.mainGroups=Sw.getToolbarConfig({zoomFactor:h,fullscreen:p})})}))}))}),eI=n=>{const r=QN(n);return H.createElement(uD,Object.assign({layout:"vertical"},n,{config:r,position:n.position||{top:12,right:12}}))};function zk(n){const{className:r,layout:i,initialValues:s,form:a,formItems:u=[],onFinish:h,submitButton:p,buttonProps:g}=n;if(!a)return null;const y=i==="vertical"?{padding:"0px 12px"}:{padding:"8px 12px"};return React.createElement(Form,{size:"small",form:a,style:y,layout:i,onFinish:h,className:r,initialValues:s,labelCol:i==="vertical"?{span:24}:{span:8},wrapperCol:i==="vertical"?{span:24}:{span:16}},u.map(x=>React.createElement(Form.Item,Object.assign({label:x.label,name:x.name,rules:x.rules},x.itemProps),React.createElement(x.render,x.renderProps))),React.createElement(Form.Item,{wrapperCol:{offset:0,span:24}},p||React.createElement(Button,Object.assign({type:"primary",htmlType:"submit",style:{width:"100%"}},g),"\u6267\u884C\u547D\u4EE4")))}const tI=Symbol("IMinimapConfigProvider");let F3=class{constructor(){this.toDispose=new ln,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return xt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new ln,s=[r.graphOptions.registerHook({name:"add minimap options",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=yield this.minimapConfig.getConfig();a.minimap=Object.assign({},u)})})];return i.pushAll(s),xt.create(()=>{})})}};(0,F.gn)([pn(tI),(0,F.w6)("design:type",Object)],F3.prototype,"minimapConfig",void 0),F3=(0,F.gn)([En({contrib:Ys})],F3);const Uk=n=>ManaSyringe.Module(r=>{r(IMinimapConfigProvider,{useDynamic:()=>n}),r(HookContribution)});class _w extends gr.DK{renderMarkup(){return this.renderJSONMarkup({tagName:"rect",selector:"body"})}update(){super.update({body:{refWidth:"100%",refHeight:"100%",fill:_w.nodeFillColor}})}}_w.nodeFillColor="#31d0c6",_w.setNodeFillColor=n=>{_w.nodeFillColor=n};const nI="CanvasMiniMap",rI=()=>({grid:!1,enabled:!0,width:200,height:120,padding:8,graphOptions:{async:!0,getCellView(n){if(n.isNode())return SimpleNodeView},createCellView(n){if(n.isEdge())return null}}}),Vk=n=>{const{nodeFillColor:r,borderColor:i="#ced4de",handlerColor:s="rgba(0,0,0,.3)",miniMapClz:a="",position:u={bottom:12,right:12},minimapOptions:h={}}=n,p=React.useRef(null),g=React.useRef(n.minimapOptions),y=React.useMemo(()=>new Set([a,"xflow-minimap","minimap-instacne-"+Date.now().toString()]),[a]),x=React.useMemo(()=>()=>__awaiter(void 0,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},rI()),g.current),{container:p.current})}),[p]),E=usePositionStyle(u);React.useEffect(()=>{g.current=h},[g,h]),React.useEffect(()=>{r&&SimpleNodeView.setNodeFillColor(r)},[r]),React.useEffect(()=>{const O=Array.from(y).reduce((B,$)=>$?`${B}.${$}`:B,""),N=`
      ${O} .x6-widget-minimap-viewport {
        border: 1px solid ${i};
        margin: 0;
      }
      ${O} .x6-widget-minimap-viewport-zoom {
        border: 1px solid ${s};
      }
    `,k=insertCss(N);return()=>{document.head.removeChild(k)}},[i,y,s]);const T=Array.from(y).join(" ");return React.createElement(XFlowAppExtensionModule,{config:{getConfig:x,CONFIG_TYPE:nI},createModule},React.createElement("div",{ref:p,className:T,style:E}))};class iI{constructor(){this.getValue=()=>({})}dispose(){this.getValue=()=>null}}class jk{constructor(r){this.moduleId=r}dispose(){}}const pD=H.createContext({propsProxy:null,commandService:null,modelService:null}),Aw=()=>H.useContext(pD),gD=n=>{const{className:r,position:i,style:s,children:a}=n,u=Qo(),h=Bl(i),p=H.useMemo(()=>new iI,[]);if(H.useEffect(()=>()=>{p.dispose()},[p]),!u||!u.modelService)return null;p.getValue=()=>n;const g=Oe()({[r]:!!r,"xflow-workspace-panel":!0}),{commandService:y,modelService:x}=u;return H.createElement(pD.Provider,{value:{propsProxy:p,commandService:y,modelService:x}},H.createElement("div",{className:g,style:Object.assign(Object.assign({},h),s)},a))};var oI=M(82363);const a1={HORIRONTAL_NODE:"xflow-node-horizontal-edge",VERTICAL_NODE:"xflow-node-vertical-edge",VERTICAL_GROUP:"xflow-group-vertical-edge"},GA={EDGE:"xflow-edge"},B3="XFLOW_NODE_SHAPE",vD="processing",sI=160,aI=32;var c1;(function(n){n.id="GRAPH_STATUS_INFO";let r;(function(i){i.SUCCESS="success",i.PROCESSING="processing",i.ERROR="error",i.DEFAULT="default",i.WARNING="warning"})(r=n.StatusEnum||(n.StatusEnum={})),n.getModel=Uo(n.id),n.useValue=qi(n.id)})(c1||(c1={}));var FA;(function(n){n.QUERY_GRAPH_STATUS={id:"xflow:query-graph-status",label:"\u67E5\u8BE2\u753B\u5E03\u8282\u70B9\u72B6\u6001"}})(FA||(FA={}));let BA;const{AnchorGroup:zA}=$s;gr.NB.registry.exist(B3)?BA=gr.NB.registry.get(B3):BA=zl.define({width:sI,height:aI,shape:B3,view:zi,ports:{groups:{top:{zIndex:2,position:{name:zA.TOP}},bottom:{zIndex:2,position:{name:zA.BOTTOM}},right:{zIndex:2,position:{name:zA.RIGHT}},left:{zIndex:2,position:{name:zA.LEFT}}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%",zIndex:1}},portMarkup:[{tagName:"g",selector:"xflow-port-group",className:"xflow-port-group",attrs:{width:8,height:8,x:-4,y:-4,zIndex:10,magnet:"true"},children:[{tagName:"circle",selector:"xflow-port",className:"xflow-port",attrs:{r:4,fill:"#fff",stroke:"#d9d9d9",zIndex:12}},{tagName:"polygon",selector:"xflow-port-arrow",className:"xflow-port-arrow",attrs:{points:"0,0 8,0 4,4 ",fill:"#d9d9d9",stroke:"#d9d9d9",zIndex:13,transform:"translate(-4,0)"}}]}]});const{DirectoryTree:cI,TreeNode:mD}=oI.Z,lI=({expanded:n})=>n?React.createElement(FolderOpenFilled,null):React.createElement(FolderFilled,null),uI=n=>new XFlowNode(n),yD=n=>{const{nodeConfig:r,onMouseDown:i,graphConfig:s,modelService:a,commandService:u}=n;if(!s)return React.createElement("div",null);if(r.renderComponent)return React.createElement("div",{onMouseDown:i},React.createElement(r.renderComponent,{data:r,isNodeTreePanel:!0}));const h=s.nodeTypeParser(r)||XFlowConstants.XFLOW_DEFAULT_NODE,p=s.nodeRender.get(h);return React.createElement("div",{onMouseDown:i},React.createElement(p,{commandService:u,modelService:a,data:r,isNodeTreePanel:!0}))},bD=n=>{const[r,i]=useState(!1),[s,a]=useState(),{getGraphConfig:u}=useXFlowApp();React.useEffect(()=>{u().then(O=>{a(O.appContainer)})});const{prefixClz:h,graphConfig:p,commandService:g,modelService:y,popoverContent:x,onMouseDown:E,item:T}=n;return React.createElement(React.Fragment,null,x&&React.createElement(Popover,{placement:"right",destroyTooltipOnHide:!0,content:x,visible:r,onVisibleChange:O=>{i(O)},getPopupContainer:()=>s||document.body},React.createElement("div",{className:`${h}-node-wrapper`,onMouseEnter:()=>{i(!0)}},yD({graphConfig:p,commandService:g,onMouseDown:E,modelService:y,nodeConfig:T}))),!x&&React.createElement("div",{className:`${h}-node-wrapper`,onMouseEnter:()=>{i(!0)}},yD({graphConfig:p,commandService:g,onMouseDown:E,modelService:y,nodeConfig:T})))},Hk=n=>{const{x6NodeFactory:r,dndOptions:i,onNodeDrop:s,state:a,onFolderExpand:u,prefixClz:h}=n,{graphProvider:p,modelService:g,commandService:y}=useXFlowApp(),[x,E]=React.useState(),[T,O]=React.useState(),[N,k]=React.useState();React.useEffect(()=>{p.getGraphInstance().then(X=>{k(X)})}),React.useEffect(()=>{if(p.getGraphOptions().then(ne=>{E(ne)}),!N)return;const X=new Addon.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},i),{target:N,validateNode:ne=>__awaiter(void 0,void 0,void 0,function*(){const be=Object.assign(Object.assign({},ne.getData()),ne.getPosition());return s?yield s(be,y,g):console.error("onNodeDrop method is required in NodeTree Panel"),!1})}));O(X)},[y,i,N,p,g,s]);const B=React.useCallback(X=>ne=>{if(!N||!T||!x)return;const be=x.nodeTypeParser(X),me=X.renderComponent?X.renderComponent:x.nodeRender.get(be),je=getNodeReactComponent(me,y,g),it={data:X,width:X.width||180,height:X.height||40,view:x.graphId,component:je},ct=r?r(it):uI(it);T.start(ct,ne.nativeEvent)},[y,T,N,x,g,r]),$=React.useCallback((X=[])=>X.map(ne=>{const{isDirectory:be,children:me,popoverContent:je}=ne;return be?React.createElement(mD,{icon:lI,key:ne.id,title:ne.label,className:`${h}-tree-folder`},$(me)):React.createElement(mD,{isLeaf:!0,key:ne.id,className:`${h}-tree-leaf`,icon:React.createElement("span",null),title:React.createElement(bD,{item:ne,onMouseDown:B(ne),popoverContent:je,prefixClz:h,modelService:g,commandService:y,graphConfig:x})})}),[y,x,g,B,h]);return React.createElement(React.Fragment,null,React.createElement("div",{className:`${h}-body`,style:n.style},!a.keyword&&React.createElement(cI,{showIcon:!0,selectable:!1,autoExpandParent:!1,onExpand:u,expandedKeys:a.expandedKeys,className:`${h}-tree`},$(a.treeData)),a.searchList.length>0&&React.createElement("ul",{className:`${h}-body-list`},a.searchList.map(X=>React.createElement("li",{key:X.id,className:`${h}-body-list-item`},React.createElement(bD,{item:X,onMouseDown:B(X),popoverContent:X.popoverContent,prefixClz:h,modelService:g,commandService:y,graphConfig:x})))),a.keyword&&a.searchList.length===0&&React.createElement(Empty,{style:{marginTop:"48px"}})))},$k=n=>{const{prefixClz:r,onKeywordChange:i}=n,{propsProxy:s}=usePanelContext(),a=s.getValue();return React.createElement(React.Fragment,null,React.createElement("div",{className:`${r}-header`,style:n.style},a.header&&React.isValidElement(a.header)&&a.header,a.searchService&&React.createElement("div",{className:`${r}-header-search`},React.createElement(Input,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:u=>i(u.target.value),style:{width:"100%",border:0}}))))},Wk=n=>{const{prefixClz:r}=n,{propsProxy:i}=usePanelContext(),s=i.getValue();return React.createElement(React.Fragment,null,React.createElement("div",{className:`${r}-footer`,style:n.style},s.footer&&React.isValidElement(s.footer)&&s.footer))},Xk=n=>{const r=n&&n.headerPosition&&n.headerPosition.height||PANEL_HEADER_HEIGHT,i=n.footerPosition&&n.footerPosition.height||PANEL_FOOTER_HEIGHT;return{headerStyle:usePositionStyle(Object.assign({height:r,lineHeight:r,top:0,left:0,right:0},n.headerPosition)),bodyStyle:usePositionStyle(Object.assign({left:0,right:0,top:r,bottom:i},n.bodyPosition)),footerStyle:usePositionStyle(Object.assign({left:0,right:0,lineHeight:i,height:i,bottom:0},n.footerPosition))}};var Zk=M(45578),Tw;(function(n){n.id="TREE_PANEL_MODEL",n.useModel=r=>(0,F.mG)(this,void 0,void 0,function*(){return r.awaitModel(n.id)})})(Tw||(Tw={}));const Yk=(n,r)=>{n.executeCommand(XFlowModelCommands.UPDATE_MODEL.id,{getModel:i=>__awaiter(void 0,void 0,void 0,function*(){return Tw.useModel(i)}),updateModel:r})},Kk=n=>{const{treeDataService:r,searchService:i}=n,{modelService:s}=useXFlowApp(),[a,u,h]=createComponentModel({treeData:[],searchList:[],treeNodeList:[],expandedKeys:[],defaultExpandAll:!1,keyword:""});React.useEffect(()=>{s.findDeferredModel(Tw.id)||s.registerModel({id:Tw.id,modelFactory:()=>h,watchChange:y=>__awaiter(void 0,void 0,void 0,function*(){const x=yield MODELS.GRAPH_META.getModel(s),E=O=>__awaiter(void 0,void 0,void 0,function*(){const N=yield r(O,s),{treeData:k,rootNodes:B}=dI(N),$=yield y.getValidValue(),X=$.expandedKeys.length>0?$.expandedKeys:B.map(ne=>ne.id);return{listData:N,treeData:k,expandedKeys:X}}),T=x.watch(O=>__awaiter(void 0,void 0,void 0,function*(){const N=yield E(O);y.setValue({treeNodeList:N.listData,treeData:N.treeData,expandedKeys:N.expandedKeys,defaultExpandAll:!1,keyword:"",searchList:[]})}));return Disposable.create(()=>{T.dispose()})})})},[]);const p=React.useCallback(y=>{u(x=>{x.expandedKeys=y})},[u]),g=React.useCallback(y=>__awaiter(void 0,void 0,void 0,function*(){if(!i)return console.warn("searchService is not defined");if(y){const x=yield i(a.treeNodeList,y);u(E=>{E.keyword=y,E.searchList=x})}else u(x=>{x.keyword="",x.searchList=[]})}),[i,a.treeNodeList]);return{state:a,setState:u,onKeywordChange:g,onFolderExpand:p}};function dI(n=[]){const i=(h=>uniqBy(h,"id").reduce((y,x)=>{const E=x.parentId||TREE_ROOT_ID;return y.has(E)||y.set(E,[]),y.get(E).push(x),y},new Map))(cloneDeep(n));function s(h,p){return h.map(g=>{if(p.has(g.id)){const y=p.get(g.id);g.key=g.id,g.isDirectory=!0,g.children=s(y,p)||[]}else g.isLeaf=!0;return g})}const a=i.get(TREE_ROOT_ID)||[];return{treeData:s(a,i),rootNodes:a}}var xD;(function(n){n.id="TREE_PANEL_DATA"})(xD||(xD={}));const hI=n=>{const{headerStyle:r,bodyStyle:i,footerStyle:s}=usePanelLyaoutStyle(n),{state:a,onFolderExpand:u,onKeywordChange:h}=useTreePanelData(n);return React.createElement(React.Fragment,null,React.createElement(NodePanelHeader,Object.assign({},n,{state:a,style:r,onKeywordChange:h})),React.createElement(NodePanelBody,Object.assign({},n,{state:a,style:i,onFolderExpand:u})),React.createElement(NodePanelFooter,Object.assign({},n,{state:a,style:s})))},qk=n=>{const r=useXflowPrefixCls("node-dnd-panel");return React.createElement(WorkspacePanel,Object.assign({},n,{className:r}),React.createElement(hI,Object.assign({},n,{prefixClz:r})))},fI=n=>new BA(n),pI=n=>{const{x6NodeFactory:r,dndOptions:i,onNodeDrop:s}=n,{graphProvider:a,modelService:u,commandService:h}=Qo(),[p,g]=H.useState(),[y,x]=H.useState(),[E,T]=H.useState();H.useEffect(()=>{a.getGraphInstance().then(N=>{T(N)}),a.getGraphOptions().then(N=>{g(N)})},[a,T,g]),H.useEffect(()=>{if(!E)return;const N=new gr.e9.q6(Object.assign(Object.assign({scaled:!1,animation:!1},i),{target:E,validateNode:k=>(0,F.mG)(void 0,void 0,void 0,function*(){const B=Object.assign(Object.assign({},k.getData()),k.getPosition());return s?yield s(B,h,u):console.error("onNodeDrop method is required in NodeTree Panel"),!1})}));return x(N),()=>{N.dispose()}},[h,u,i,E,s]);const O=H.useCallback(N=>k=>{if(!E||!y||!p||N.isDisabled)return;const B=p.nodeTypeParser(N),$=N.renderComponent?N.renderComponent:p.nodeRender.get(B),X=O0($,h,u),ne={data:N,width:N.width||180,height:N.height||40,view:p.graphId,component:X},be=r?r(ne):fI(ne);y.start(be,k.nativeEvent)},[h,y,E,p,u,r]);return{graphConfig:p,onMouseDown:O,modelService:u,commandService:h}};var Mw=M(14277),gI=M(55241);const CD=n=>{const{nodeConfig:r,onMouseDown:i,graphConfig:s,modelService:a,commandService:u}=n;if(!s)return H.createElement("div",null);if(r.renderComponent)return H.createElement("div",{onMouseDown:i},H.createElement(r.renderComponent,{data:r,isNodePanel:!0}));const h=s.nodeTypeParser(r)||gi,p=s.nodeRender.get(h);return H.createElement("div",{onMouseDown:i},H.createElement(p,{commandService:u,modelService:a,data:r,isNodeTreePanel:!0}))},wD=n=>{const[r,i]=H.useState(!1),{prefixClz:s,graphConfig:a,commandService:u,modelService:h,popoverContent:p,onMouseDown:g,item:y}=n;return H.createElement(H.Fragment,null,p?H.createElement(gI.Z,{placement:"right",destroyTooltipOnHide:!0,content:p,visible:r,onVisibleChange:x=>{i(x)}},H.createElement("div",{className:`${s}-node-wrapper`,onMouseEnter:()=>{i(!0)}},CD({graphConfig:a,commandService:u,onMouseDown:g,modelService:h,nodeConfig:y}))):H.createElement("div",{className:`${s}-node-wrapper`},CD({graphConfig:a,commandService:u,onMouseDown:g,modelService:h,nodeConfig:y})))},vI=n=>{const{searchResult:r,prefixClz:i,onMouseDown:s,modelService:a,commandService:u,graphConfig:h}=n;return r.length===0?H.createElement(Mw.Z,{style:{marginTop:"24px"}}):H.createElement("ul",{className:"xflow-collapse-search-list"},r.map(p=>H.createElement("li",{className:`xflow-collapse-search-list-item ${p.isDisabled?"disabled":""}`,key:p.id},H.createElement(wD,{item:p,onMouseDown:s(p),popoverContent:p.popoverContent,prefixClz:i,modelService:a,commandService:u,graphConfig:h}))))};var mI={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},yI=mI,ED=function(r,i){return H.createElement(LA.Z,(0,vg.Z)((0,vg.Z)({},r),{},{ref:i,icon:yI}))};ED.displayName="CaretRightOutlined";var bI=H.forwardRef(ED);const xI=n=>{const{onActiveKeyChange:r,collapseData:i,prefixClz:s,onMouseDown:a,modelService:u,commandService:h,graphConfig:p}=n,g=x=>{const{header:E,extra:T,icon:O,isCollapsed:N}=x,k=B=>{B.preventDefault(),r(x.id)};return H.createElement("div",{className:"xflow-collapse-header",onClick:k},H.createElement("div",{className:"xflow-collapse-header-icon"},Zu(O)?H.createElement(O,{isCollapsed:N}):H.createElement(bI,{rotate:N?0:90,style:{fontSize:"12px"}})),H.createElement("div",{className:"xflow-collapse-header-label"},Zu(E)?H.createElement(E,x):E),H.createElement("div",{className:"xflow-collapse-header-extra"},Zu(T)?H.createElement(T,x):T))},y=x=>H.createElement("div",{className:"xflow-collapse-content"},x.map(E=>H.createElement("div",{className:`xflow-collapse-content-item ${E.isDisabled?"disabled":""}`,key:E.id},H.createElement(wD,{item:E,onMouseDown:a(E),popoverContent:E.popoverContent,prefixClz:s,modelService:u,commandService:h,graphConfig:p}))));return H.createElement("ul",{className:"xflow-collapse-list"},i.length===0&&H.createElement(Mw.Z,{style:{marginTop:"24px"}}),i.map(x=>{const{children:E=[],isCollapsed:T,render:O}=x,N=T?"close":"open";return H.createElement("li",{className:`xflow-collapse-list-item ${N}`,key:x.id},g(x),Zu(O)?H.createElement(O,x):y(E))}))},CI=n=>{const{state:r,prefixClz:i,onActiveKeyChange:s}=n,{graphConfig:a,onMouseDown:u,modelService:h,commandService:p}=pI(n),{searchResult:g,collapseData:y,keyword:x}=r;return H.createElement("div",{className:`${i}-body`,style:n.style},x.length===0&&H.createElement(xI,{onActiveKeyChange:s,collapseData:y,onMouseDown:u,modelService:h,commandService:p,graphConfig:a,prefixClz:i}),x.length>0&&H.createElement(vI,{searchResult:g,onMouseDown:u,modelService:h,commandService:p,graphConfig:a,prefixClz:i}))};var UA=M(4107);const wI=n=>{const{prefixClz:r,onKeywordChange:i,state:s}=n,{propsProxy:a}=Aw(),u=a.getValue(),h=p=>{const g=s.collapseData.reduce((y,x)=>(x.children&&y.push(...x.children),y),[]);i(p.target.value,g)};return H.createElement(H.Fragment,null,H.createElement("div",{className:`${r}-header`,style:n.style},u.header&&H.isValidElement(u.header)&&u.header,u.searchService&&H.createElement("div",{className:`${r}-header-search`},H.createElement(UA.Z,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:p=>h(p),style:{width:"100%",border:0}}))))},EI=n=>{const{prefixClz:r}=n,{propsProxy:i}=Aw(),s=i.getValue();return H.createElement(H.Fragment,null,H.createElement("div",{className:`${r}-footer`,style:n.style},s.footer&&H.isValidElement(s.footer)&&s.footer))};var SI={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M689 165.1L308.2 493.5c-10.9 9.4-10.9 27.5 0 37L689 858.9c14.2 12.2 35 1.2 35-18.5V183.6c0-19.7-20.8-30.7-35-18.5z"}}]},name:"caret-left",theme:"outlined"},_I=SI,SD=function(r,i){return H.createElement(LA.Z,(0,vg.Z)((0,vg.Z)({},r),{},{ref:i,icon:_I}))};SD.displayName="CaretLeftOutlined";var AI=H.forwardRef(SD);const TI=n=>{const{prefixClz:r,onCollapseBtnClick:i,isCollapsed:s,collapseButtonStyle:a,style:u}=n;return H.createElement(H.Fragment,null,H.createElement("div",{className:`${r}-header`,style:Object.assign(Object.assign({},u),a),onClick:i},H.createElement(AI,{rotate:s?180:0})))},MI=40,OI=40,PI=n=>{const r=n&&n.headerPosition&&n.headerPosition.height||MI,i=n.footerPosition&&n.footerPosition.height||OI;return{headerStyle:Bl(Object.assign({height:r,lineHeight:r,top:0,left:0,right:0},n.headerPosition)),bodyStyle:Bl(Object.assign({left:0,right:0,top:r,bottom:i},n.bodyPosition)),footerStyle:Bl(Object.assign({left:0,right:0,lineHeight:i,height:i,bottom:0},n.footerPosition))}};var VA;(function(n){n.id="COLLAPSE_PANEL_DATA",n.useModel=r=>(0,F.mG)(this,void 0,void 0,function*(){return r.awaitModel(n.id)})})(VA||(VA={}));const Jk=(n,r)=>{n.executeCommand(XFlowModelCommands.UPDATE_MODEL.id,{getModel:i=>__awaiter(void 0,void 0,void 0,function*(){return NsCollapsePanelModel.useModel(i)}),updateModel:r})},DI=n=>{const{collapsible:r,nodeDataService:i,searchService:s,onCollapseChange:a}=n,{modelService:u}=Qo(),[h,p,g]=Ot({keyword:"",collapseData:[],searchResult:[]});H.useEffect(()=>{u.findDeferredModel(VA.id)||u.registerModel({id:VA.id,modelFactory:()=>g,watchChange:E=>(0,F.mG)(void 0,void 0,void 0,function*(){const T=yield Fl.getModel(u),O=k=>(0,F.mG)(void 0,void 0,void 0,function*(){return{collapseData:yield i(k,u)}}),N=T.watch(k=>(0,F.mG)(void 0,void 0,void 0,function*(){const{collapseData:B}=yield O(k);E.setValue($=>{$.keyword="",$.collapseData=B,$.searchResult=[]})}));return xt.create(()=>{N.dispose()})})})},[]);const y=H.useCallback(E=>{p(T=>{T.collapseData.forEach(O=>{O.id===E&&O.collapsible!==!1&&(O.isCollapsed=!O.isCollapsed)})})},[p]),x=H.useCallback((E,T)=>(0,F.mG)(void 0,void 0,void 0,function*(){if(!s)return console.warn("searchService is not defined");if(E){const O=yield s(T,E);p(N=>{N.keyword=E,N.searchResult=O})}else p(O=>{O.keyword="",O.searchResult=[]})}),[s]);return{state:h,collapsible:r,setState:p,onKeywordChange:x,onActiveKeyChange:y,onCollapseChange:a}},NI=n=>{const{headerStyle:r,bodyStyle:i,footerStyle:s}=PI(n),{state:a,onActiveKeyChange:u,onKeywordChange:h}=DI(n);return H.createElement(H.Fragment,null,H.createElement(wI,Object.assign({},n,{state:a,style:r,onKeywordChange:h})),H.createElement(CI,Object.assign({},n,{state:a,style:i,onActiveKeyChange:u})),H.createElement(EI,Object.assign({},n,{state:a,style:s})))},II=n=>{const{position:r,collapsible:i,onCollapseChange:s}=n,{width:a=200,left:u}=r,h=Bh("collapse-panel"),[p,g]=(0,H.useState)(!1),y=(0,H.useCallback)(()=>{g(!p),s(!p)},[p,s]);return H.createElement(gD,Object.assign({},n,{className:h,position:Object.assign(Object.assign({},r),{left:p?-a:u}),style:{transition:"left 0.5s"}}),H.createElement(NI,Object.assign({},n,{prefixClz:h})),i&&H.createElement(TI,Object.assign({},n,{prefixClz:h,isCollapsed:p,onCollapseBtnClick:y,style:{position:"absolute",zIndex:1,width:13,right:-13,bottom:20,padding:"12px 0px",textAlign:"center",borderWidth:"1px 1px 1px 0",borderStyle:"solid solid solid",borderColor:"rgb(232, 232, 232) rgb(232, 232, 232) rgb(232, 232, 232)",cursor:"pointer"}})))},RI=n=>{const{state:r}=n,{propsProxy:i}=Aw(),s=i.getValue(),a=Qo(),u=s.footer&&typeof s.footer=="function";return H.createElement(H.Fragment,null,H.createElement("div",{className:`${n.prefixClz}-footer`,style:n.style},u&&H.createElement(s.footer,Object.assign(Object.assign({},n),{headerStyle:{},bodyStyle:{},footerStyle:n.style,targetData:r.targetData,targetType:r.targetType,modelService:a.modelService,commandService:a.commandService})),!s.footer&&H.createElement("div",{className:`${n.prefixClz}-footer-title`},s.footerText)))},kI=n=>{const{prefixClz:r,hasSchema:i,state:s}=n,{propsProxy:a}=Aw(),u=a.getValue(),h=Qo();if(i)return null;const p=u.header&&typeof u.header=="function";return H.createElement(H.Fragment,null,H.createElement("div",{className:`${r}-header`,style:n.style},p&&H.createElement(u.header,Object.assign(Object.assign({},n),{headerStyle:n.style,bodyStyle:{},footerStyle:{},targetData:s.targetData,targetType:s.targetType,modelService:h.modelService,commandService:h.commandService})),!u.header&&H.createElement("div",{className:`${r}-header-title`},u.headerText||"Panel")))};var _D=M(51752),C0=M(86835);const LI=n=>{const{text:r}=n,i=(0,F._T)(n,["text"]);return r?H.createElement(hp.Z,Object.assign({placement:"left",title:r},i),H.createElement("div",{className:"text-truncate"},r)):null};function l1(n){if(!!n)return H.createElement(LI,{text:n})}var GI=M(27361),AD=M.n(GI);function FI(n,r){return(i,s)=>n.some(u=>typeof u?.condition=="function")?(typeof r=="function"&&r(void 0),!0):n.some(u=>{const{name:h}=u;return h?AD()(i,h)!==AD()(s,h)?(typeof r=="function"&&r(h),!0):!1:(console.error("[Schema form]: A dependent name must be provided in the updater when the dependency condition is not a function."),!1)})}function BI(n){return n===""||n===void 0}function zI(n,r,i){const{getFieldValue:s,getFieldsValue:a}=n,{dependencies:u,hidden:h,disabled:p}=r;let g=h,y=p;return u?.forEach(x=>{const{name:E,condition:T,hidden:O,disabled:N}=x;if(typeof T!="function"&&i&&E!==i)return;let k=!1;if(typeof T=="function"){const B=a();k=!!T(B)}else{if(!E){console.error("[Schema form]: A dependent name must be provided in the props genarator when the dependency condition is not a function.");return}k=s(E)===T}k&&(O!==void 0&&(g=O),N!==void 0&&(y=N))}),{hidden:g,disabled:y}}const jv=n=>{const{schema:r,children:i}=n,[s,a]=(0,H.useState)(),{dependencies:u,value:h,defaultValue:p,hidden:g,disabled:y}=r,x=(0,H.useMemo)(()=>u?.length?FI(u,a):void 0,[u]);if(typeof i!="function")throw new Error("[Schema Form]: chilren of FormItemWrapper should be a render prop.");const E=BI(h)?p:h;return x?H.createElement(C0.Z.Item,{noStyle:!0,shouldUpdate:x},T=>{const{hidden:O,disabled:N}=zI(T,r,s);return i({hidden:O,disabled:N,initialValue:E})}):i({hidden:g,disabled:y,initialValue:E})},TD=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,placeholder:p,rules:g}=r;return H.createElement(jv,{schema:r},({disabled:y,hidden:x,initialValue:E})=>H.createElement(C0.Z.Item,{name:u,label:h,initialValue:E,tooltip:s,extra:l1(a),required:i,hidden:x,rules:g},H.createElement(UA.Z,{className:"xflow-form-input",allowClear:!0,placeholder:p,disabled:y})))};var UI=M(9676);const VI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,rules:p}=r;return H.createElement(jv,{schema:r},({hidden:g,disabled:y,initialValue:x})=>H.createElement(C0.Z.Item,{className:"xflow-form-checkbox",name:u,rules:p,initialValue:x,tooltip:s,extra:l1(a),required:i,hidden:g,valuePropName:"checked",getValueProps:E=>({checked:!!{true:!0,false:!1}[E]})},H.createElement(UI.Z,{disabled:y},h)))},jI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,placeholder:p,rules:g}=r;return H.createElement(jv,{schema:r},({hidden:y,disabled:x,initialValue:E})=>H.createElement(C0.Z.Item,{name:u,label:h,initialValue:E,tooltip:s,extra:l1(a),required:i,hidden:y,rules:g},H.createElement(UA.Z.TextArea,{allowClear:!0,placeholder:p,rows:3,disabled:x})))};var z3=M(34041);const HI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,placeholder:p,options:g=[],rules:y}=r;return H.createElement(jv,{schema:r},({hidden:x,disabled:E,initialValue:T})=>H.createElement(C0.Z.Item,{name:u,label:h,initialValue:T,tooltip:s,extra:l1(a),required:i,hidden:x,rules:y},H.createElement(z3.Z,{disabled:E,placeholder:p},g.map(O=>{const{title:N,value:k}=O;return H.createElement(z3.Z.Option,{key:k.toString(),value:k},N)}))))};var $I=M(68588),WI=M(30381),U3=M.n(WI);const XI=n=>{const{className:r,style:i,disabled:s,value:a,onChange:u}=n,[h,p]=(0,H.useState)(a?U3()(a):void 0),g=(0,H.useRef)(!1);(0,H.useEffect)(()=>{if(!g.current){g.current=!0;return}const x=U3()(a);x.isValid()&&p(x)},[a]);const y=(0,H.useCallback)((x,E)=>{const T=U3()(E);p(T.isValid()?T:void 0),typeof u=="function"&&u(T.isValid()?T.format("YYYY-MM-DD HH:mm:ss"):"")},[u]);return H.createElement($I.Z,{showTime:!0,allowClear:!0,className:r,style:i,disabled:s,value:h,onChange:y})},ZI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,rules:p}=r;return H.createElement(jv,{schema:r},({disabled:g,hidden:y,initialValue:x})=>H.createElement(C0.Z.Item,{name:u,label:h,initialValue:x,tooltip:s,extra:l1(a),required:i,hidden:y,rules:p},H.createElement(XI,{style:{width:"100%"},disabled:g})))};var V3=M(70507);function jA(n){const r=Number(n);return Number.isNaN(r)?void 0:r}const YI=n=>{const{disabled:r,placeholder:i,value:s,onChange:a}=n,[u,h]=(0,H.useState)(jA(s)),p=(0,H.useRef)(!1);(0,H.useEffect)(()=>{p.current||(p.current=!0),h(jA(s))},[s]);const g=(0,H.useCallback)(y=>{h(y),typeof a=="function"&&(y===void 0?a(""):typeof jA(y)=="number"&&a(jA(y)))},[a]);return H.createElement(V3.Z,{style:{width:"100%"},size:"small",placeholder:i,value:u,onChange:g,disabled:r})},KI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,placeholder:p,rules:g}=r;return H.createElement(jv,{schema:r},({disabled:y,hidden:x,initialValue:E})=>H.createElement(C0.Z.Item,{name:u,label:h,initialValue:E,tooltip:s,extra:l1(a),required:i,hidden:x,rules:g},H.createElement(YI,{placeholder:p,disabled:y})))};var Hv;(function(n){n.INPUT="input",n.CHECKBOX="checkbox",n.TEXTAREA="textArea",n.SELECT="select",n.DATETIME="datetime",n.FLOAT="float"})(Hv||(Hv={}));const MD=[[Hv.INPUT,TD],[Hv.CHECKBOX,VI],[Hv.TEXTAREA,jI],[Hv.DATETIME,ZI],[Hv.SELECT,HI],[Hv.FLOAT,KI]],OD=n=>{const r=new Map;return n.forEach(i=>{const[s,a]=i,u=s.toLowerCase();r.has(u)&&console.error(`${s} is duplicated in controlMap:`,r),r.set(u,a)}),r},qI=(n,r,i=TD)=>{if(r.has(n))return r.get(n);const s=n.toLowerCase();return r.has(s)?r.get(s):(console.warn(`${n} is not exist in controlmap, fallback to defaultControl`),i)},{TabPane:JI}=_D.Z,QI=n=>{var r;const{schema:i,form:s,className:a,triggerUpdate:u,defaultControlRender:h,afterUpdatingCb:p,controlMap:g}=n,y=(0,F._T)(n,["schema","form","className","triggerUpdate","defaultControlRender","afterUpdatingCb","controlMap"]),{tabs:x}=i,[E]=C0.Z.useForm(s),T=H.useMemo(()=>n.controlMap?n.controlMap:OD(MD),[n.controlMap]),O=(0,H.useCallback)(k=>{typeof u=="function"&&u(E,k)},[E,u]);(0,H.useEffect)(()=>{E.setFieldsValue({})},[E]);const N=(0,H.useCallback)(()=>{requestAnimationFrame(()=>{E.setFieldsValue({})})},[E]);return H.createElement(C0.Z,Object.assign({size:"small",form:E,layout:"vertical",className:Oe()("xflow-json-form",a)},y),H.createElement(_D.Z,{type:"card",defaultActiveKey:(r=x[0])===null||r===void 0?void 0:r.name,className:Oe()({tabs:!0,xTab:!0,singleTab:x?.length===1,coupleTab:x?.length===2,ternateTab:x?.length===3}),onTabClick:N},x.map(k=>{const{name:B,groups:$}=k;return H.createElement(JI,{key:B,tab:B},$.length===0&&H.createElement(Mw.Z,{style:{padding:"24px 0"}}),$.length>0&&$.map(X=>{const{controls:ne=[]}=X;return ne.length===0?H.createElement(Mw.Z,{style:{padding:"24px 0"}}):ne.map(be=>{const{shape:me,name:je}=be,it=qI(me,T,h);return it?H.createElement(it,{key:je,form:E,controlSchema:be,triggerUpdate:O,afterUpdatingCb:p}):(console.error("\u672A\u627E\u5230\u5BF9\u5E94\u7684\u63A7\u4EF6:",me),null)})}))})))},eR=n=>{const{schema:r={tabs:[]},triggerUpdate:i,onFieldsChange:s,afterUpdatingCb:a,defaultControlRender:u,loading:h,controlMapService:p,defaultControls:g=[]}=n,y=H.useMemo(()=>{const x=OD([...MD,...g]);return p&&p(x),x},[p,g]);return h?H.createElement("div",{className:`${n.prefixClz}-body`,style:Object.assign(Object.assign({},n.style),{display:"flex",justifyContent:"center",alignItems:"center"})},H.createElement(aD.Z,{spinning:!0})):H.createElement("div",{className:`${n.prefixClz}-body`,style:n.style},r.tabs.length>0&&H.createElement(QI,{schema:r,onFieldsChange:s,controlMap:y,defaultControlRender:u,afterUpdatingCb:a,triggerUpdate:i}),r.tabs.length===0&&H.createElement(Mw.Z,{style:{paddingTop:"64px"}}))},tR=40,nR=40,rR=(n,r)=>{const i=n&&n.headerPosition&&n.headerPosition.height||tR,s=n.footerPosition&&n.footerPosition.height||nR;return{headerStyle:Bl(Object.assign(Object.assign({height:0,top:0,left:0,right:0},r?{height:i,lineHeight:i}:{}),n.headerPosition)),bodyStyle:Bl(Object.assign(Object.assign({left:0,right:0,top:0},r?{top:i,bottom:s}:{bottom:s}),n.bodyPosition)),footerStyle:Bl(Object.assign(Object.assign({left:0,right:0,lineHeight:s,height:s,bottom:0},r?{lineHeight:s,height:s}:{bottom:0}),n.footerPosition))}};var Ow;(function(n){n.id="XFLOW_JSON_SCHEMA_FORM",n.useModel=r=>(0,F.mG)(this,void 0,void 0,function*(){return r.awaitModel(n.id)})})(Ow||(Ow={}));const Qk=(n,r)=>{n.executeCommand(XFlowModelCommands.UPDATE_MODEL.id,{getModel:i=>__awaiter(void 0,void 0,void 0,function*(){return Ow.useModel(i)}),updateModel:r})},iR=n=>{const r=Qo(),{commandService:i,modelService:s,getGraphInstance:a}=r,{formSchemaService:u}=n,[h,p,g,y]=Ot({schema:{tabs:[]},targetType:null,targetData:null,targetCell:null,loading:!1});return H.useEffect(()=>{if(!r||!r.modelService)return;const x=new ln;if(!r.modelService.findDeferredModel(Ow.id)){const T=r.modelService.registerModel({id:Ow.id,modelFactory:()=>g,watchChange:(O,N)=>(0,F.mG)(void 0,void 0,void 0,function*(){const B=(yield Wd.getModel(N)).watch($=>(0,F.mG)(void 0,void 0,void 0,function*(){const X=(me,je)=>(0,F.mG)(void 0,void 0,void 0,function*(){O.setValue(At=>{At.loading=!0,At.schema={tabs:[]},At.targetType=null,At.targetData=null,At.targetCell=null});const it=me?me.getData():null;if(!u)return;const ct=yield a(),Zt=yield u({commandService:i,modelService:s,targetData:it,cell:me,targetType:je,graph:ct});O.setValue({loading:!1,schema:Zt,targetType:je,targetCell:me,targetData:it})}),be=(me=>me?me.isNode&&me.isNode()&&me.getProp("isGroup")?"group":me.isNode&&me.isNode()?"node":me.isEdge&&me.isEdge()?"edge":"canvas":"canvas")($);(n.targetType||["node","canvas"]).includes(be)&&(yield X($,be))}));return xt.create(()=>{B.dispose(),x.push(B)})})});x.push(T)}return()=>{x.dispose()}},[]),{commandService:i,modelService:s,state:h,setState:p,model:g,isModelReady:y}},oR=n=>{const{prefixClz:r}=n,{getCustomRenderComponent:i,afterUpdatingCb:s,formValueUpdateService:a=()=>{}}=n,{state:u,commandService:h,modelService:p}=iR(n),g=H.useCallback((N,k={})=>(0,F.mG)(void 0,void 0,void 0,function*(){N.setFieldsValue(k);const B=Object.entries(k).map(([ne,be])=>({name:ne,value:be})),$=Object.entries(u.targetData).map(([ne,be])=>({name:ne,value:be})),X=yield a({allFields:$,values:B,modelService:p,commandService:h,targetData:u.targetData,targetType:u.targetType});s&&s(X)}),[s,h,a,p,u.targetData,u.targetType]),y=H.useCallback((N,k)=>(0,F.mG)(void 0,void 0,void 0,function*(){const B=yield a({values:N,allFields:k,modelService:p,commandService:h,targetData:u.targetData,targetType:u.targetType});s&&s(B)}),[s,h,a,p,u.targetData,u.targetType]),x=H.useMemo(()=>{try{return u.schema.tabs.length===0||!u.schema}catch{return!0}},[u.schema]),{headerStyle:E,bodyStyle:T,footerStyle:O}=rR(n,x);if(i){const N=i(u.targetType,u.targetData,p,h);if(N)return H.createElement(N,Object.assign(Object.assign({},n),{headerStyle:E,bodyStyle:T,footerStyle:O,targetData:u.targetData,targetType:u.targetType,modelService:p,commandService:h}))}return H.createElement("div",{className:r},H.createElement(kI,Object.assign({hasSchema:!x},n,{state:u,style:E,prefixClz:n.prefixClz})),H.createElement(eR,Object.assign({},n,{key:u.targetData&&u.targetData.id,style:T,prefixClz:n.prefixClz,loading:u.loading,schema:u.schema,triggerUpdate:g,onFieldsChange:y})),H.createElement(RI,Object.assign({},n,{state:u,style:O})))},sR=n=>{const r=Bh("json-schema-form");return H.createElement(gD,Object.assign({},n,{className:r}),H.createElement(oR,Object.assign({},n,{prefixClz:r})))};gr.Bz.Connector.registry.exist(a1.VERTICAL_NODE)||gr.kJ.registerConnector(a1.VERTICAL_NODE,(n,r)=>{const s=Math.abs(r.y-n.y),a=Math.floor(s/3*2),u={x:n.x,y:n.y+16+a},h={x:r.x,y:r.y-16-a};return gr.y$.normalize(`M ${n.x} ${n.y}
         L ${n.x} ${n.y+16}
         C ${u.x} ${u.y} ${h.x} ${h.y} ${r.x} ${r.y-16}
         L ${r.x} ${r.y}
        `)},!0),gr.Bz.Connector.registry.exist(a1.VERTICAL_GROUP)||gr.kJ.registerConnector(a1.VERTICAL_GROUP,(n,r)=>{const s=Math.abs(r.y-n.y),a={x:n.x,y:n.y+4+s},u={x:r.x,y:r.y-4-s};return gr.y$.normalize(`M ${n.x} ${n.y}
       L ${n.x} ${n.y+4}
       C ${a.x} ${a.y} ${u.x} ${u.y} ${r.x} ${r.y-4}
       L ${r.x} ${r.y}
      `)},!0),gr.Bz.Connector.registry.exist(a1.HORIRONTAL_NODE)||gr.kJ.registerConnector(a1.HORIRONTAL_NODE,(n,r)=>{const s=Math.abs(r.y-n.y),a=Math.floor(s/3*2),u={x:n.x,y:n.y+4+a},h={x:r.x,y:r.y-4-a};return gr.y$.normalize(`M ${n.x} ${n.y}
         L ${n.x} ${n.y+4}
         C ${u.x} ${u.y} ${h.x} ${h.y} ${r.x} ${r.y-4}
         L ${r.x} ${r.y}
        `)},!0);let j3=gr.bn.kS.registry.get(GA.EDGE);gr.bn.kS.registry.exist(GA.EDGE)||(j3=gr.bn.kS.registry.register(GA.EDGE,gr.bn.kS.define({zIndex:1,highlight:!1,shape:GA.EDGE}),!0));var hf;(function(n){n.MODEL=c1,n.command=FA.QUERY_GRAPH_STATUS,n.hookKey="queryGraphStatus";let r;(function(i){i.SUCCESS="success",i.PROCESSING="processing",i.ERROR="error",i.DEFAULT="default",i.WARNING="warning"})(r=n.StatusEnum||(n.StatusEnum={})),n.initStatusMap=()=>({[n.StatusEnum.DEFAULT]:[],[n.StatusEnum.PROCESSING]:[],[n.StatusEnum.ERROR]:[],[n.StatusEnum.WARNING]:[],[n.StatusEnum.SUCCESS]:[]}),n.groupByStatus=i=>{const s=n.initStatusMap();return Object.entries(i).reduce((a,[u,h])=>(a[h.status].push(u),a),s)},n.statusDiff=(i,s)=>{const a=new Set([...i,...s]),u={current:[],add:[],remove:[]};return a.forEach(h=>{s.includes(h)&&!i.includes(h)&&u.add.push(h),!s.includes(h)&&i.includes(h)&&u.remove.push(h)}),u},n.shouldStop=i=>(0,F.mG)(this,void 0,void 0,function*(){return[r.ERROR,r.SUCCESS].includes(i.graphStatus)})})(hf||(hf={}));let HA=class{constructor(){this.statusInfo=hf.initStatusMap(),this.getStatusModel=()=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.contextProvider().getModelService();return yield c1.getModel(i)}),this.updateModelValue=r=>(0,F.mG)(this,void 0,void 0,function*(){(yield this.getStatusModel()).setValue(r)}),this.stopCurrentStatusLooping=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=yield this.getStatusModel(),{subscription:i}=yield r.getValidValue();i.dispose()}),this.addStopDispose=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=yield this.getStatusModel(),{subscription:i}=yield r.getValidValue();i.push({dispose:()=>{this.updateEdges(this.statusInfo,hf.initStatusMap()),this.isLooping=!1}})}),this.updateGraph=(r,i,s)=>{this.updateNodes(r,i,s),this.updateEdges(r,i)},this.updateNodeData=(r,i)=>{const s=this.x6Graph.getCellById(r);!s||s.setData(Object.assign(Object.assign(Object.assign(Object.assign({},s.getData()),s.getSize()),s.getPosition()),i))},this.updateNodes=(r,i,s)=>{Object.keys(r).forEach(a=>{const u=hf.statusDiff(r[a],i[a]);u.add.forEach(h=>{this.updateNodeData(h,s[h])}),u.remove.forEach(h=>{this.updateNodeData(h,s[h])})})},this.updateEdges=(r,i)=>{const s=hf.statusDiff(r.processing,i.processing);this.x6Graph.getEdges().forEach(u=>{var h;const p=(h=this.x6Graph)===null||h===void 0?void 0:h.findViewByCell(u.id),g=u.getTargetCellId();if(!g)return;const y=g.toString();if(!!p){if(s.add.includes(y))return p.addClass(vD);if(s.remove.includes(y))return p.removeClass(vD)}})},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),a=r.getHooks();this.x6Graph=yield r.getX6Graph();const u=yield a.queryGraphStatus.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{graphStatusService:p,shouldStop:g=hf.shouldStop,doOnce:y}=h;yield this.stopCurrentStatusLooping();const x=(E,T=1e4)=>(0,F.mG)(this,void 0,void 0,function*(){const O=yield E(h);this.updateModelValue(k=>{Object.entries(O.statusMap).forEach(([B,$])=>{k.statusMap.set(B,$)}),k.graphStatus=O.graphStatus});const N=hf.groupByStatus(O.statusMap);this.updateGraph(this.statusInfo,N,O.statusMap),this.statusInfo=N,yield Oa(T),this.isLooping&&(g&&(yield g(O,h))||(yield x(E,T)))});return this.isLooping=h.loop===void 0?!0:h.loop,yield this.addStopDispose(),y&&(yield y(h)),x(p,h.loopInterval),{}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([pn(ui),(0,F.w6)("design:type",Object)],HA.prototype,"contextProvider",void 0),HA=(0,F.gn)([jt({token:{token:ci,named:hf.command.id}})],HA);const e4=()=>{};var $v;(function(n){n.TOP_BOTTOM="TB",n.LEFT_RIGHT="LR"})($v||($v={}));const PD=pe.defineToken("DAG_EXTENSION_CONFIG");var $A;(function(n){n.EVENT_NAME="ADD_EDGE_CMD_EVENT"})($A||($A={}));var WA;(function(n){n.router={name:"manhattan"},n.connector={name:"rounded",args:{radius:15}}})(WA||(WA={}));const t4="ant",aR=n=>{const{layout:r,router:i=WA.router,connector:s=WA.connector}=n;return{grid:!1,keyboard:{enabled:!0},selecting:{enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},connecting:{sourceAnchor:r?r===$v.TOP_BOTTOM?"bottom":"right":"center",targetAnchor:r?r===$v.TOP_BOTTOM?"center":"left":"center",connectionPoint:"anchor",snap:{radius:20},router:i,connector:s,highlight:!0,dangling:!1,createEdge(){const u=this,h=new j3({attrs:{line:{strokeDasharray:"5 5",stroke:"#888",strokeWidth:1,targetMarker:{name:"block",args:{size:"6"}}}}}),p=g=>{const{isNew:y}=g,x=g.edge;if(y&&x.isEdge()&&x===h){const E=x.getTargetPortId(),T=x.getTargetCell();if(T&&T.isNode()){T.setPortProp(E,"connected",!1),x.attr({line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5"}});const O=x.getTargetPortId(),N=x.getSourcePortId(),k=x.getSourceCellId(),B=x.getTargetCellId();u.trigger($A.EVENT_NAME,{targetPortId:O,sourcePortId:N,source:k,target:B,edge:h})}}};return u.once("edge:connected",p),h},validateEdge:u=>{var h;const{edge:p}=u;return!!(!((h=p?.target)===null||h===void 0)&&h.port)},validateMagnet({magnet:u,cell:h}){const p=h.getData().ports.filter(g=>g.type===$s.AnchorType.INPUT);return p.length>0?u.getAttribute("port-group")!==p[0].group:!1},validateConnection({sourceView:u,targetView:h,sourceMagnet:p,targetMagnet:g}){if(u===h||!p||!g)return!1;if(r){const k=r===$v.TOP_BOTTOM?$s.AnchorGroup.TOP:$s.AnchorGroup.LEFT;if(p.getAttribute("port-group")===k||g.getAttribute("port-group")!==k)return!1}const y=u.cell,x=p.getAttribute("port");if(!x||y.getPort(x).type!==$s.AnchorType.OUTPUT)return!1;const T=h.cell,O=g.getAttribute("port");if(!O)return!1;const N=T.getPort(O);return N.type!==$s.AnchorType.INPUT?!1:!(N&&N.connected)}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},scaling:{max:1.05,min:.01}}};let Pw=class{constructor(){this.registerGraphCommands=r=>{r.registerCommand(hf.command,{createCommand:this.commandFactory})},this.toDispose=new ln,this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new ln,s=[r.addNode.registerHook({name:"dag-add-node",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=h=>(0,F.mG)(this,void 0,void 0,function*(){return new BA(Object.assign({},h))});a.cellFactory=u})}),r.addEdge.registerHook({name:"dag-add-edge",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{layout:u=$v.TOP_BOTTOM}=yield this.propConfig.getConfig(),h=p=>(0,F.mG)(this,void 0,void 0,function*(){return new j3(Object.assign(Object.assign({},p),{id:p.id,source:{cell:p.source,port:p.sourcePortId,anchor:{name:u===$v.TOP_BOTTOM?"bottom":"right"}},target:{cell:p.target,port:p.targetPortId,anchor:{name:u===$v.TOP_BOTTOM?"center":"right"}},attrs:{line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5",strokeWidth:1}},data:Object.assign({},p)}))});a.cellFactory=h})}),r.addEdge.registerHook({name:"after add edge, set target port props",handler:(a,u)=>(0,F.mG)(this,void 0,void 0,function*(){return p=>(0,F.mG)(this,void 0,void 0,function*(){const g=yield u(p);if(g&&g.edgeCell){const y=g.edgeCell.getTargetCell(),x=g.edgeCell.getTargetPortId();y.setPortProp(x,"connected",!0)}return g})})}),r.delEdge.registerHook({name:"afetr del edge, reset target node port props",handler:(a,u)=>(0,F.mG)(this,void 0,void 0,function*(){return p=>(0,F.mG)(this,void 0,void 0,function*(){const g=yield u(p),{targetCell:y,targetPortId:x}=g;return y&&y.isNode()&&x&&y.setPortProp(x,"connected",!1),g})})}),r.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:u,graph:h}=a;h.on($A.EVENT_NAME,p=>{u.executeCommand(uo.ADD_EDGE.id,{edgeConfig:p}),p.edge.remove()})})}),r.graphOptions.registerHook({name:"dag-extension-x6-options",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=yield this.propConfig.getConfig(),h=aR(u);Object.assign(a,h)})})];return i.pushAll(s),xt.create(()=>{})}),this.registerHookHub=r=>(0,F.mG)(this,void 0,void 0,function*(){return r.registerHookHub(hf.hookKey,new Ra)})}registerModel(r){r.registerModel({id:c1.id,getInitialValue:()=>({statusMap:new Map,subscription:new ln,graphStatus:c1.StatusEnum.DEFAULT}),watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{subscription:s}=yield i.getValidValue();return s})})}};(0,F.gn)([pn(Oh),(0,F.w6)("design:type",Function)],Pw.prototype,"commandFactory",void 0),(0,F.gn)([pn(PD),(0,F.w6)("design:type",Object)],Pw.prototype,"propConfig",void 0),Pw=(0,F.gn)([En({contrib:[Ys,pc,$u]})],Pw);const cR=n=>Ko(r=>{r(Pw),r(HA),r(PD,{useValue:n})}),lR=n=>{const r=kl();H.useEffect(()=>{r.addContainerClassNames("dag-extension-container");const s=n.layout||"TB";r.addContainerClassNames(s==="TB"?"layout-top-bottom":"layout-left-right")},[r,n.layout]);const i=H.useMemo(()=>({CONFIG_TYPE:"DAG_EXTENSION",getConfig:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return n})}),[n]);return H.createElement(kf,{config:i,createModule:cR})},H3="XFLOW_FLOW_NODE_SHAPE",uR=150,dR=60;let $3;const{AnchorGroup:XA}=$s,ZA={circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}};gr.NB.registry.exist(H3)?$3=gr.NB.registry.get(H3):$3=zl.define({width:uR,height:dR,shape:H3,view:zi,ports:{groups:{top:{position:XA.TOP,attrs:ZA},bottom:{position:XA.BOTTOM,attrs:ZA},right:{position:XA.RIGHT,attrs:ZA},left:{position:XA.LEFT,attrs:ZA}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"}}});const hR={grid:!0,mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge(){return new gr.bn.kS({attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:0})},validateConnection({targetMagnet:n}){return!!n}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}},resizing:!0,rotating:!0,selecting:{enabled:!0,rubberband:!0,showNodeSelectionBox:!0,modifiers:"shift"},snapline:!0,keyboard:!0,clipboard:!0};let DD=class{constructor(){this.toDispose=new ln,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return xt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new ln,s=[r.addNode.registerHook({name:"flow-add-node",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=h=>(0,F.mG)(this,void 0,void 0,function*(){return new $3(Object.assign({},h))});a.cellFactory=u})}),r.addEdge.registerHook({name:"flow-add-edge",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=h=>(0,F.mG)(this,void 0,void 0,function*(){return delete h.id,new gr.bn.kS({source:{cell:h.source,port:h.sourcePortId},target:{cell:h.target,port:h.targetPortId},attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:-1,data:Object.assign({},h)})});a.cellFactory=u})}),r.graphOptions.registerHook({name:"assign options ",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){Object.assign(a,hR)})})];return i.pushAll(s),xt.create(()=>{})})}};DD=(0,F.gn)([En({contrib:Ys})],DD);const n4=()=>ManaSyringe.Module(n=>{n(FlowHooksContribution)}),r4=()=>{const n=useExtensionRegistry(),r=React.useMemo(()=>({CONFIG_TYPE:"DAG_EXTENSION",getConfig:()=>__awaiter(void 0,void 0,void 0,function*(){})}),[]);return React.useEffect(()=>{const i=n.addExtension({config:r,createModule:createFlowExtensionModule});return n.addContainerClassNames("flow-extension-container"),()=>{i.dispose()}},[r,n]),null};var fR=M(75901),pR=M(82492),ND=M.n(pR);const W3={config:{}},ID=n=>{W3.config=Object.assign({},W3.config,n)},YA=n=>{var r;return(r=W3.config)===null||r===void 0?void 0:r[n]},RD=new Map,kD=new Map,gR=n=>(0,F.mG)(void 0,void 0,void 0,function*(){const r=yield n.getGraphInstance();RD.set("x6graph",r),kD.set("app",n)}),LD=()=>RD.get("x6graph"),vR=()=>kD.get("app"),mR=()=>(0,F.mG)(void 0,void 0,void 0,function*(){return vR().getGraphData()}),Dw=(0,Yu.debounce)(n=>{const r=YA("onConfigChange");if(!(!r||typeof r!="function"))return r(Object.assign({data:mR()},n))},300,{trailing:!0}),yR=(n,r)=>(0,F.mG)(void 0,void 0,void 0,function*(){const{node:i}=n;if(!i)return;const{data:s}=i;if(s?.groupChildren){const u=LD();s?.groupChildren.forEach(h=>(0,F.mG)(void 0,void 0,void 0,function*(){var p,g;const y=u.getCellById(h);y&&y.isNode()&&(yield r.executeCommand(Hi.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign(Object.assign({},y.data),(p=y.getSize)===null||p===void 0?void 0:p.call(y)),(g=y.getPosition)===null||g===void 0?void 0:g.call(y))}))}))}const a=Object.assign(Object.assign(Object.assign({},i.data),i.getPosition()),i.getSize());yield r.executeCommand(Hi.UPDATE_NODE.id,{nodeConfig:a}),Dw({type:"move:node",config:a})}),bR=(n,r)=>(0,F.mG)(void 0,void 0,void 0,function*(){const{node:i}=n;if(!i)return;const s=Object.assign(Object.assign(Object.assign({},i.data),i.getPosition()),i.size());yield r.executeCommand(Hi.UPDATE_NODE.id,{nodeConfig:s}),Dw({type:"resize:node",config:s})}),xR=n=>{var r;let i=(r=n?.e)===null||r===void 0?void 0:r.currentTarget;if(!i)return document.getElementsByClassName("xflow-canvas-root");let s=null;for(;!s;){const a=i.getElementsByClassName("xflow-canvas-root");a?.length>0&&(s=a),i=i.parentNode}return s},CR=n=>{const r=document.getElementsByClassName("x6-node-selected");if(!r)return;let i=r[0];return Array.from(r).forEach(s=>{s.getAttribute("data-cell-id")===n&&(i=s)}),i.getElementsByClassName("x6-port")},GD=(n,r)=>{const s=n.getAttribute("transform").split(",");s[0]=`matrix(${Number(s[0].split("(")[1])*r}`,s[3]=Number(s[3])*r,n.setAttribute("transform",s.join(","))},wR=n=>{if(!n?.length)return;const r=2;n.forEach(i=>{i.getAttribute("data-scale")||(GD(i,r),i.setAttribute("data-scale",`${r}`))})},ER=()=>{const n=document.getElementsByClassName("x6-port");!n||Array.from(n).forEach(r=>{const i=r.getAttribute("data-scale");i&&(GD(r,1/Number(i)),r.removeAttribute("data-scale"))})},X3=(n,r,i)=>{var s;n||ER();const a=xR(r),h=(s=LD().getSelectedCells())===null||s===void 0?void 0:s[0];h?.isNode()&&i&&wR(CR(h.id)),Array.from(a).forEach(p=>{const g=p.querySelectorAll(".x6-port-body"),y=h?.isNode();for(let x=0,E=g.length;x<E;x=x+1)g[x].style.visibility=(!y||i)&&n?"visible":"hidden"})},SR=n=>(0,F.mG)(void 0,void 0,void 0,function*(){const{edge:r}=n;!r||r.addTools("vertices","ondbclick")}),_R=(n,r)=>(0,F.mG)(void 0,void 0,void 0,function*(){const{edge:i}=n;!i||i.hasTools("ondbclick")&&(r.executeCommand(uo.UPDATE_EDGE.id,{edgeConfig:Object.assign(Object.assign({},(0,Yu.get)(i,"data")),{vertices:i.getVertices()})}),i.removeTools())}),i4=40,o4="xflow-node-panel-collpase",AR="GROUP_NODE_RENDER_ID",fa=60,cs=40,et=1,gn={stroke:"#A2B1C3",fill:"#FFFFFF",fontFill:"#000",fontSize:12,label:""},TR=[{name:"Terminal"},{name:"Process"},{name:"Decision"},{name:"Multi Document"},{name:"Connector",width:cs,height:cs},{name:"DataIO",ports:["top","bottom"]},{name:"Database"},{name:"Hard Disk"},{name:"Stroed Data"},{name:"Document"},{name:"Predefined Process"},{name:"Extract"},{name:"Merge"},{name:"Or",width:cs,height:cs},{name:"Manual Input"},{name:"Preparation"},{name:"Delay"},{name:"Manual Operation"},{name:"Display"},{name:"Off Page Link"},{name:"Note Left",label:"\u2263"},{name:"Note Right",label:"\u2263"},{name:"Internal Storage"},{name:"Text",label:"text"}],MR=["Connector","Or"],OR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=[["M",et,et],["L",g-2*et,et],["L",g-2*et,y-2*et],["L",et,y-2*et],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(x),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},PR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=[["M",g/2,et],["L",g-2*et,y/2],["L",g/2,y-2*et],["L",et,y/2],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(x),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},DR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=y-2*et;return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:`M ${et},${y/2} a ${x/2} ${x/2} 0 1 1 0 1 z`,fill:u,stroke:s}),H.createElement("text",{x:y/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},NR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=y/2,E=[["M",x-et,et],["L",g-2*et,et],["L",g-x,y-2*et],["L",et,y-2*et],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},IR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=Math.min(y,g)/2,E=[["M",x,et],["L",g-x,et],["C",g-2*et,et,g-2*et,y/2],["",g-2*et,y/2],["C",g-2*et,y/2,g-2*et,y-2*et],["",g-x,y-2*et],["L",x,y-2*et],["C",et,y-2*et,et,y/2],["",et,y/2],["C",et,y/2,et,et],["",x,et]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},RR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=g/4,E=Math.min(y/10,12),T=[["M",et,et+E],["C",et+x,et,et+g-x,et],["",g-2*et,et+E],["L",g-2*et,y-2*et-E],["C",g-2*et-x,y-2*et,et+x,y-2*et],["",et,y-2*et-E],["Z"]],O=[["M",et,et+E],["C",et+x,et+2*E,et+g-x,et+2*E],["",g-2*et,et+E]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(T),fill:u,stroke:s}),H.createElement("path",{d:As(O),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},kR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=Math.min(g/10,y/4),E=Math.min(y/4,g/4),T=[["M",et+x,et],["L",g-2*et-x,et],["C",g-2*et,et+E,g-2*et,y-2*et-E],["",g-2*et-x,y-2*et],["L",et+x,y-2*et],["C",et,y-2*et-E,et,et+E],["",et+x,et]],O=[["M",g-2*et-x,et],["C",g-2*et-2*x,et+E,g-2*et-2*x,y-2*et-E],["",g-2*et-x,y-2*et]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(T),fill:u,stroke:s}),H.createElement("path",{d:As(O),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},LR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=Math.min(g/10,y/4),E=Math.min(y/4,g/4),T=[["M",et+x,et],["L",g-2*et-x,et],["C",g-2*et-2*x,et+E,g-2*et-2*x,y-2*et-E],["",g-2*et-x,y-2*et],["L",et+x,y-2*et],["C",et,y-2*et-E,et,et+E],["",et+x,et]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(T),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},GR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=g/8,E=y/8,T=[["M",et,et],["L",g-2*et,et],["L",g-2*et,y-2*et-E],["C",g-2*et-x,y-2*et-2*E,g/2+x,y-2*et-2*E],["",g/2,y-2*et-E],["S",g/4,y-2*et,et,y-2*et-2*E],["L",et,et]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(T),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},FR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,g=6,y=et,x=g/2;let{width:E,height:T}=r;E+=g,T+=g;const O=E/8,N=T/8,k=[["M",y+x,y],["L",E-2*y,y],["L",E-2*y,T-2*y-N],["C",E-2*y-O,T-2*y-2*N,E/2+O,T-2*y-2*N],["",E/2,T-2*y-N],["S",E/4,T-2*y,y+x,T-2*y-2*N],["L",y+x,y]];return H.createElement("svg",{viewBox:`0 0 ${E} ${T}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(k),fill:u,stroke:s}),H.createElement("path",{d:As(k,-g/2,g/2),fill:u,stroke:s}),H.createElement("text",{x:E/2,y:T/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},BR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=g/8,E=[["M",et,et],["L",g-2*et,et],["L",g-2*et,y-2*et],["L",et,y-2*et],["Z"]],T=[["M",x,et],["L",x,y-2*et]],O=[["M",g-x,et],["L",g-x,y-2*et]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("path",{d:As(T),stroke:s}),H.createElement("path",{d:As(O),stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},zR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=[["M",g/2,et],["L",g-2*et,y-2*et],["L",et,y-2*et],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(x),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},UR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=[["M",et,et],["L",g-2*et,et],["L",g/2,y-2*et],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(x),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},VR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=[["M",y/2,et],["L",y/2,y-2*et]],E=[["M",et,y/2],["L",y-2*et,y/2]],T=y-2*et;return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:`M ${et},${y/2} a ${T/2} ${T/2} 0 1 1 0 1 z`,fill:u,stroke:s}),H.createElement("path",{d:As(x),stroke:s}),H.createElement("path",{d:As(E),stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},jR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=[["M",et,y/5],["L",g-2*et,et],["L",g-2*et,y-2*et],["L",et,y-2*et],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(x),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},HR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=Math.tan(Math.PI/6)*(y/2),E=[["M",x,et],["L",g-x,et],["L",g-2*et,y/2],["L",g-x,y-2*et],["L",x,y-2*et],["L",et,y/2],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},$R=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=Math.min(y,g)/2,E=[["M",et,et],["L",g-x,et],["C",g-2*et,et,g-2*et,y/2],["",g-2*et,y/2],["C",g-2*et,y/2,g-2*et,y-2*et],["",g-x,y-2*et],["L",et,y-2*et],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},WR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=Math.min(Math.tan(Math.PI/6)*y,g/2),E=[["M",et,et],["L",g-2*et,et],["L",g-x,y-2*et],["L",x,y-2*et],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},XR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=Math.min(y,g)/3,E=Math.min(Math.tan(Math.PI/6)*(y/2),g/3),T=[["M",E,et],["L",g-x,et],["C",g-2*et,et,g-2*et,y/2],["",g-2*et,y/2],["C",g-2*et,y/2,g-2*et,y-2*et],["",g-x,y-2*et],["L",E,y-2*et],["L",et,y/2],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(T),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},ZR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=Math.min(Math.tan(Math.PI/6)*(g/2),y/4),E=[["M",et,et],["L",g-2*et,et],["L",g-2*et,y-x],["L",g/2,y-2*et],["L",et,y-x],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},YR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u="transparent",fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=6,E=g-2*et,T=[["M",E,et],["C",E-x,et,E-x,x],["",E-x,(y-x)/2],["L",E-2*x,y/2],["L",E-x,(y+x)/2],["L",E-x,y-2*et-x],["C",E-x,y-2*et,E,y-2*et],["",E,y-2*et]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(T),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},KR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u="transparent",fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=6,E=[["M",et,et],["C",x,et,x,x],["",x,(y-x)/2],["L",2*x,y/2],["L",x,(y+x)/2],["L",x,y-2*et-x],["C",x,y-2*et,et,y-2*et],["",et,y-2*et]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},qR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{stroke:s=gn.stroke,label:a=gn.label,fill:u=gn.fill,fontFill:h=gn.fontFill,fontSize:p=gn.fontSize}=i,{width:g,height:y}=r,x=g-2*et,E=y-2*et,T=6,O=[["M",et,et],["L",x-T,et],["C",x,et,x,T],["",x,y/2],["L",x,E-T],["C",x,E,x-T,E],["",x-T,E],["L",T,E],["C",et,E,et,E-T],["",et,E-T],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(O),fill:u,stroke:s}),H.createElement("path",{d:`M ${et},${T} L ${x-1} ${T} `,fill:u,stroke:s}),H.createElement("path",{d:`M ${T},${et} L ${T} ${E} `,fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},JR=n=>{const{size:r={width:fa,height:cs},data:i={}}=n,{label:s=gn.label,fontFill:a=gn.fontFill,fontSize:u=gn.fontSize}=i,{width:h,height:p}=r,g=2;return H.createElement("svg",{viewBox:`0 0 ${h/g} ${p/g}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("text",{x:h/(2*g),y:p/(2*g),fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:u},s),"Sorry, your browser does not support inline SVG.")},KA=n=>({position:{name:n},attrs:{circle:{r:4,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff",style:{visibility:"hidden"}}},zIndex:10}),FD=(n=["top","right","bottom","left"])=>({items:n.map(r=>({group:r,id:uuidv4()})),groups:{top:KA("top"),right:KA("right"),bottom:KA("bottom"),left:KA("left")}}),QR=n=>(n||[]).map(r=>{const{name:i,popover:s,label:a="",width:u=NODE_HEIGHT,height:h=NODE_HEIGHT,ports:p,parentKey:g}=r;return{id:uuidv4(),renderKey:i,name:i,label:a,popoverContent:s,width:u,height:h,ports:p||FD(),originData:Object.assign({},r),isCustom:!0,parentKey:g}}),s4=n=>__awaiter(void 0,void 0,void 0,function*(){return[...QR(n),...NODEPOOL.map(({name:i,ports:s,width:a=NODE_WIDTH,height:u=NODE_HEIGHT,label:h=""})=>({id:uuidv4(),renderKey:i,name:i,label:h,popoverContent:()=>i,width:a,height:u,ports:FD(s)}))]}),ek=n=>{const r=n?(0,Yu.isArray)(n)?n:[n]:[];let i=[];r.forEach(u=>{i=i.concat(u.nodes.map(h=>Object.assign(Object.assign({},h),{parentKey:u.key})))}),i.length&&ID({registerNode:i});const s=YA("graphConfig"),a=YA("registerNode");!s||!a?.length||a.forEach(u=>{const{name:h,component:p}=u;s.setNodeRender(h,p)})},tk=n=>{ek(),n.nodeRender.get("Terminal")||TR.forEach(r=>{n.setNodeRender(r.name,J[`${r.name.replace(/\s+/g,"")}Node`])})},As=(n,r=0,i=0)=>{if(!n.length)return null;let s="";return n.forEach(a=>{const[u,h,p,g,y]=a;s+=(0,Yu.isNumber)(p)?` ${u} ${h+r} ${p+i}`:` ${u}`,y&&(s+=` ${g+r} ${y+i}`)}),s};var Vy=M(87462),nk=M(8812),BD=M(54062),rk=M(96774),Z3=M.n(rk),zD=M(50344),ik=M(63441),UD=H.forwardRef(function(n,r){var i,s=n.prefixCls,a=n.forceRender,u=n.className,h=n.style,p=n.children,g=n.isActive,y=n.role,x=H.useState(g||a),E=(0,xu.Z)(x,2),T=E[0],O=E[1];return H.useEffect(function(){(a||g)&&O(!0)},[a,g]),T?H.createElement("div",{ref:r,className:Oe()("".concat(s,"-content"),(i={},(0,kt.Z)(i,"".concat(s,"-content-active"),g),(0,kt.Z)(i,"".concat(s,"-content-inactive"),!g),i),u),style:h,role:y},H.createElement("div",{className:"".concat(s,"-content-box")},p)):null});UD.displayName="PanelContent";var ok=UD,VD=function(n){(0,za.Z)(i,n);var r=(0,BD.Z)(i);function i(){var s;(0,hr.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),s.onItemClick=function(){var p=s.props,g=p.onItemClick,y=p.panelKey;typeof g=="function"&&g(y)},s.handleKeyPress=function(p){(p.key==="Enter"||p.keyCode===13||p.which===13)&&s.onItemClick()},s.renderIcon=function(){var p=s.props,g=p.showArrow,y=p.expandIcon,x=p.prefixCls,E=p.collapsible;if(!g)return null;var T=typeof y=="function"?y(s.props):H.createElement("i",{className:"arrow"});return T&&H.createElement("div",{className:"".concat(x,"-expand-icon"),onClick:E==="header"?s.onItemClick:null},T)},s.renderTitle=function(){var p=s.props,g=p.header,y=p.prefixCls,x=p.collapsible;return H.createElement("span",{className:"".concat(y,"-header-text"),onClick:x==="header"?s.onItemClick:null},g)},s}return(0,wr.Z)(i,[{key:"shouldComponentUpdate",value:function(a){return!Z3()(this.props,a)}},{key:"render",value:function(){var a,u,h=this.props,p=h.className,g=h.id,y=h.style,x=h.prefixCls,E=h.headerClass,T=h.children,O=h.isActive,N=h.destroyInactivePanel,k=h.accordion,B=h.forceRender,$=h.openMotion,X=h.extra,ne=h.collapsible,be=ne==="disabled",me=ne==="header",je=Oe()((a={},(0,kt.Z)(a,"".concat(x,"-item"),!0),(0,kt.Z)(a,"".concat(x,"-item-active"),O),(0,kt.Z)(a,"".concat(x,"-item-disabled"),be),a),p),it=Oe()("".concat(x,"-header"),(u={},(0,kt.Z)(u,E,E),(0,kt.Z)(u,"".concat(x,"-header-collapsible-only"),me),u)),ct={className:it,"aria-expanded":O,"aria-disabled":be,onKeyPress:this.handleKeyPress};me||(ct.onClick=this.onItemClick,ct.role=k?"tab":"button",ct.tabIndex=be?-1:0);var Zt=X!=null&&typeof X!="boolean";return H.createElement("div",{className:je,style:y,id:g},H.createElement("div",ct,this.renderIcon(),this.renderTitle(),Zt&&H.createElement("div",{className:"".concat(x,"-extra")},X)),H.createElement(ik.Z,(0,Vy.Z)({visible:O,leavedClassName:"".concat(x,"-content-hidden")},$,{forceRender:B,removeOnLeave:N}),function(At,Yt){var st=At.className,Bn=At.style;return H.createElement(ok,{ref:Yt,prefixCls:x,className:st,style:Bn,isActive:O,forceRender:B,role:k?"tabpanel":null},T)}))}}]),i}(H.Component);VD.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var sk=VD;function jD(n){var r=n;if(!Array.isArray(r)){var i=(0,Va.Z)(r);r=i==="number"||i==="string"?[r]:[]}return r.map(function(s){return String(s)})}var Y3=function(n){(0,za.Z)(i,n);var r=(0,BD.Z)(i);function i(s){var a;(0,hr.Z)(this,i),a=r.call(this,s),a.onClickItem=function(g){var y=a.state.activeKey;if(a.props.accordion)y=y[0]===g?[]:[g];else{y=(0,Wi.Z)(y);var x=y.indexOf(g),E=x>-1;E?y.splice(x,1):y.push(g)}a.setActiveKey(y)},a.getNewChild=function(g,y){if(!g)return null;var x=a.state.activeKey,E=a.props,T=E.prefixCls,O=E.openMotion,N=E.accordion,k=E.destroyInactivePanel,B=E.expandIcon,$=E.collapsible,X=g.key||String(y),ne=g.props,be=ne.header,me=ne.headerClass,je=ne.destroyInactivePanel,it=ne.collapsible,ct=!1;N?ct=x[0]===X:ct=x.indexOf(X)>-1;var Zt=it??$,At={key:X,panelKey:X,header:be,headerClass:me,isActive:ct,prefixCls:T,destroyInactivePanel:je??k,openMotion:O,accordion:N,children:g.props.children,onItemClick:Zt==="disabled"?null:a.onClickItem,expandIcon:B,collapsible:Zt};return typeof g.type=="string"?g:(Object.keys(At).forEach(function(Yt){typeof At[Yt]>"u"&&delete At[Yt]}),H.cloneElement(g,At))},a.getItems=function(){var g=a.props.children;return(0,zD.Z)(g).map(a.getNewChild)},a.setActiveKey=function(g){"activeKey"in a.props||a.setState({activeKey:g}),a.props.onChange(a.props.accordion?g[0]:g)};var u=s.activeKey,h=s.defaultActiveKey,p=h;return"activeKey"in s&&(p=u),a.state={activeKey:jD(p)},a}return(0,wr.Z)(i,[{key:"shouldComponentUpdate",value:function(a,u){return!Z3()(this.props,a)||!Z3()(this.state,u)}},{key:"render",value:function(){var a,u=this.props,h=u.prefixCls,p=u.className,g=u.style,y=u.accordion,x=Oe()((a={},(0,kt.Z)(a,h,!0),(0,kt.Z)(a,p,!!p),a));return H.createElement("div",{className:x,style:g,role:y?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(a){var u={};return"activeKey"in a&&(u.activeKey=jD(a.activeKey)),u}}]),i}(H.Component);Y3.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},Y3.Panel=sk;var HD=Y3,$D=HD,a4=HD.Panel,ak=M(98423),WD=M(53124),ck=M(33603),XD=M(96159),lk=function(r){var i=H.useContext(WD.E_),s=i.getPrefixCls,a=r.prefixCls,u=r.className,h=u===void 0?"":u,p=r.showArrow,g=p===void 0?!0:p,y=s("collapse",a),x=Oe()((0,kt.Z)({},"".concat(y,"-no-arrow"),!g),h);return H.createElement($D.Panel,(0,Vy.Z)({},r,{prefixCls:y,className:x}))},uk=lk,ZD=function(r){var i,s=H.useContext(WD.E_),a=s.getPrefixCls,u=s.direction,h=r.prefixCls,p=r.className,g=p===void 0?"":p,y=r.bordered,x=y===void 0?!0:y,E=r.ghost,T=r.expandIconPosition,O=T===void 0?"start":T,N=a("collapse",h),k=H.useMemo(function(){return O==="left"?"start":O==="right"?"end":O},[O]),B=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},je=r.expandIcon,it=je?je(me):H.createElement(nk.Z,{rotate:me.isActive?90:void 0});return(0,XD.Tm)(it,function(){return{className:Oe()(it.props.className,"".concat(N,"-arrow"))}})},$=Oe()("".concat(N,"-icon-position-").concat(k),(i={},(0,kt.Z)(i,"".concat(N,"-borderless"),!x),(0,kt.Z)(i,"".concat(N,"-rtl"),u==="rtl"),(0,kt.Z)(i,"".concat(N,"-ghost"),!!E),i),g),X=(0,Vy.Z)((0,Vy.Z)({},ck.ZP),{motionAppear:!1,leavedClassName:"".concat(N,"-content-hidden")}),ne=function(){var me=r.children;return(0,zD.Z)(me).map(function(je,it){var ct;if(!((ct=je.props)===null||ct===void 0)&&ct.disabled){var Zt=je.key||String(it),At=je.props,Yt=At.disabled,st=At.collapsible,Bn=(0,Vy.Z)((0,Vy.Z)({},(0,ak.Z)(je.props,["disabled"])),{key:Zt,collapsible:st??(Yt?"disabled":void 0)});return(0,XD.Tm)(je,Bn)}return je})};return H.createElement($D,(0,Vy.Z)({openMotion:X},r,{expandIcon:B,prefixCls:N,className:$}),ne())};ZD.Panel=uk;var dk=ZD,hk=dk;const{Panel:YD}=hk,c4=n=>{const{x6NodeFactory:r,dndOptions:i,state:s,prefixClz:a,defaultActiveKey:u=["official"],showOfficial:h=!0}=n,p=n.registerNode?isArray(n.registerNode)?n.registerNode:[n.registerNode]:[],{graphProvider:g,modelService:y,commandService:x}=useXFlowApp(),[E,T]=React.useState(),[O,N]=React.useState();React.useEffect(()=>{g.getGraphInstance().then(it=>{N(it)})});let k;g.getGraphOptions().then(it=>{k=it});const B=useCallback(it=>__awaiter(void 0,void 0,void 0,function*(){var ct;const{ports:Zt}=it,At=Object.assign(Object.assign({},it),{id:`node-${uuidv4()}`,zIndex:10,ports:Object.assign(Object.assign({},Zt),{items:(ct=Zt.items)===null||ct===void 0?void 0:ct.map(Bn=>Object.assign(Object.assign({},Bn),{id:uuidv4()}))})}),Yt={nodeConfig:At};yield x.executeCommand(XFlowNodeCommands.ADD_NODE.id,Yt);const st=getProps("onAddNode");typeof st=="function"&&st(At)}),[x]);React.useEffect(()=>{if(!O)return;const it=new Addon.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},i),{target:O,validateNode:ct=>__awaiter(void 0,void 0,void 0,function*(){const Zt=Object.assign(Object.assign({},ct.getData()),ct.getPosition());return yield B(Zt),!1})}));T(it)},[x,i,O,y,B]);const $=React.useCallback(it=>ct=>{if(!O||!E||!k)return;const Zt=k.nodeTypeParser(it),{width:At=180,height:Yt=40}=it,st=k.nodeRender.get(Zt),Bn=getNodeReactComponent(st,x,y),kn={data:it,width:At,height:Yt,view:k.graphId,component:Bn},Jn=r?r(kn):defaultNodeFactory(kn);E.start(Jn,ct.nativeEvent)},[x,E,O,k,y,r]),X=React.useCallback((it=[])=>it.map(ct=>{const{popoverContent:Zt}=ct;return React.createElement(NodeTitle,{item:ct,key:ct.id,onMouseDown:$(ct),popoverContent:Zt,prefixClz:a,modelService:y,commandService:x,graphConfig:k})}),[x,k,y,$,a]),ne=s.nodeList.filter(it=>!it.isCustom),be=s.searchList.filter(it=>!it.isCustom),me=it=>s.nodeList.filter(ct=>ct.isCustom&&ct.parentKey===it),je=it=>s.searchList.filter(ct=>ct.isCustom&&ct.parentKey===it);return React.createElement(React.Fragment,null,React.createElement("div",{className:`${a}-body`},React.createElement(Collapse,{defaultActiveKey:u,style:{border:"none"}},h&&React.createElement(YD,{header:"\u901A\u7528\u8282\u70B9",key:"official",style:{border:"none"}},!s.keyword&&React.createElement("div",{className:`${a}-official`},X(ne)),s.searchList.length>0&&React.createElement("div",{className:`${a}-official`},X(be))),p?.length>0&&p.map(it=>!it.hidden&&it.nodes.length>0&&React.createElement(YD,{header:it.title,key:it.key,style:{border:"none"}},!s.keyword&&React.createElement("div",{className:`${a}-custom`},X(me(it.key))),s.searchList.length>0&&React.createElement("div",{className:`${a}-custom`},X(je(it.key)))))),s.keyword&&s.searchList.length===0&&React.createElement(Empty,{style:{marginTop:"48px"}})))},l4=n=>{const{prefixClz:r,onKeywordChange:i}=n,{propsProxy:s}=usePanelContext(),a=s.getValue();return React.createElement(React.Fragment,null,React.createElement("div",{className:`${r}-header`,style:Object.assign({zIndex:1},n.style)},a.header&&React.isValidElement(a.header)&&a.header,React.createElement("div",{className:`${r}-header-search`},React.createElement(Input,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:u=>i(u.target.value),style:{width:"100%",border:0}}))))};var qA;(function(n){n.id="NODE_PANEL_DATA"})(qA||(qA={}));const fk=(n=[],r)=>__awaiter(void 0,void 0,void 0,function*(){return n.filter(s=>{var a,u;return s.isDirectory||((a=s.label)===null||a===void 0?void 0:a.includes(r))||((u=s.name)===null||u===void 0?void 0:u.includes(r))})}),u4=n=>{const{searchService:r=fk}=n,i=n.registerNode?isArray(n.registerNode)?n.registerNode:[n.registerNode]:[];let s=[];i.forEach(y=>{s=s.concat(y.nodes.map(x=>Object.assign(Object.assign({},x),{parentKey:y.key})))});const{modelService:a}=useXFlowApp(),[u,h,p]=createComponentModel({searchList:[],nodeList:[],defaultExpandAll:!1,keyword:""});React.useEffect(()=>{a.findDeferredModel(qA.id)||a.registerModel({id:qA.id,modelFactory:()=>p,watchChange:y=>__awaiter(void 0,void 0,void 0,function*(){const x=yield MODELS.GRAPH_META.getModel(a),E=()=>__awaiter(void 0,void 0,void 0,function*(){return{listData:yield nodeService(s)}}),T=x.watch(()=>__awaiter(void 0,void 0,void 0,function*(){const O=yield E();y.setValue({nodeList:O.listData,defaultExpandAll:!1,keyword:"",searchList:[]})}));return Disposable.create(()=>{T.dispose()})})})},[]);const g=React.useCallback(y=>__awaiter(void 0,void 0,void 0,function*(){if(!!r)if(y){const x=yield r(u.nodeList,y);h(E=>{E.keyword=y,E.searchList=x})}else h(x=>{x.keyword="",x.searchList=[]})}),[r,u.nodeList,h]);return{state:u,setState:h,onKeywordChange:g}},pk=n=>{const{cell:r,data:{label:i,stroke:s,fill:a,fontSize:u,fontFill:h,width:p=200,isCollapsed:g=!1}}=n,y=Qo(),x=()=>{y.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!1,collapsedSize:{width:p,height:40}})},E=()=>{y.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!0,collapsedSize:{width:p,height:40},gap:3})};return H.createElement("div",{className:"xflow-group-node",style:{borderColor:s,backgroundColor:a,fontSize:u,color:h}},H.createElement("div",{className:"xflow-group-header"},H.createElement("div",{className:"header-left"},i),H.createElement("div",{className:"header-right"},g&&H.createElement(Jo.Z,{onClick:x}),!g&&H.createElement(yf.Z,{onClick:E}))))},gk=n=>{n.setNodeRender(AR,pk)};var KD;(function(n){n.id="FLOWCHART_PANEL_DATA"})(KD||(KD={}));const vk=n=>{const{prefixClz:r,position:i={width:240,top:0,bottom:0,left:0},showHeader:s=!0}=n,a=__rest(n,["prefixClz","position","showHeader"]),{width:u=200}=i,{headerStyle:h,bodyStyle:p}=usePanelLyaoutStyle(n),{state:g,onKeywordChange:y}=usePanelData(n);return React.createElement(React.Fragment,null,s&&React.createElement(WorkspacePanel,Object.assign({},a,{position:{top:0,left:0,height:PANEL_HEADER_HEIGHT,width:u}}),React.createElement(NodePanelHeader,Object.assign({},n,{state:g,style:h,onKeywordChange:y}))),React.createElement(WorkspacePanel,Object.assign({className:`${CONTAINER_CLASS}-nodes`},a,{position:Object.assign(Object.assign({},i),{top:s?PANEL_HEADER_HEIGHT:0})}),React.createElement(NodePanelBody,Object.assign({},n,{state:g,style:p}))))},d4=n=>{registerCustomNode(get(n,"registerNode"));const r=useXflowPrefixCls("node-panel"),[i,s]=useState(!1),{show:a=!0,position:u={width:240,top:40,bottom:0,left:0}}=n,h=__rest(n,["show","position"]);if(!a)return null;const{width:p=200,left:g}=u;return React.createElement(WorkspacePanel,{className:CONTAINER_CLASS,position:Object.assign(Object.assign({},u),{left:i?-p:g})},React.createElement("div",{className:`${CONTAINER_CLASS}-wrapper`},React.createElement(WorkspacePanel,Object.assign({className:r},h,{position:{top:0,bottom:0,left:0,right:0}}),React.createElement(vk,Object.assign({},n,{prefixClz:r,position:u}))),React.createElement("div",{className:`${CONTAINER_CLASS}-icon`,style:{top:21,right:i?-20:-10,borderRadius:i?"0 50% 50% 0":"50%",borderLeft:i?"none":""},onClick:()=>{s(!i)}},i?React.createElement(DoubleRightOutlined,null):React.createElement(DoubleLeftOutlined,null))))},mk="flowchart-connecting-edge",yk="ant";var JA;(function(n){n.EVENT_NAME="ADD_FLOWCHART_EDGE_CMD_EVENT"})(JA||(JA={}));const qD={attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8},strokeDasharray:"5 5",strokeWidth:1}}},bk=gr.bn.kS.registry.register("xflow",gr.bn.kS.define({zIndex:1,highlight:!0,name:mk,label:"",anchor:{name:"midSide",args:{dx:10}},attrs:qD.attrs,data:{label:""}}),!0),xk=mg((n,r)=>{const{config:i={},useConfig:s,mode:a="edit",showPortsOnNodeSelected:u=!1,edgeConfig:h={}}=r.getValue();n.setEdgeTypeParser(p=>p?.renderKey),ID(Object.assign(Object.assign({},r.getValue()),{graphConfig:n})),tk(n),gk(n),n.setX6Config(ND()({grid:!0,history:!0,resizing:{enabled:!0,minWidth:cs,minHeight:cs,preserveAspectRatio:p=>{const{data:g}=p;return MR.includes(g.name)}},snapline:{enabled:!0},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge(){const p=new bk({});return this.once("edge:connected",g=>{const{edge:y,isNew:x}=g;if(x&&y&&y.isEdge()&&p===y){const E=y.getTargetCell();if(E&&E.isNode()){const T=y.getTargetPortId(),O=y.getSourcePortId(),N=y.getSourceCellId(),k=y.getTargetCellId(),B=typeof h=="function"?h(y):h;this.trigger(JA.EVENT_NAME,Object.assign({targetPortId:T,sourcePortId:O,source:N,target:k,edge:y,tempEdgeId:p.id},ND()(qD,B)))}}}),p},validateEdge:p=>{var g;const{edge:y}=p;return!!(!((g=y?.target)===null||g===void 0)&&g.port)},validateMagnet(){return!0},validateConnection({sourceView:p,targetView:g,targetMagnet:y}){if(p===g)return!1;const x=g.cell;if(y){const E=y.getAttribute("port"),T=x.getPort(E);return!(T&&T.connected)}}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},onPortRendered(p){const{port:g}=p,{contentSelectors:y}=p,x=y&&y.content,E=g.group,T=Oe()("xflow-port",{connected:g.connected});x&&Pa.render(H.createElement(fR.ZP,{prefixCls:yk},H.createElement(hp.Z,{title:g.tooltip,placement:E},H.createElement("span",{className:T}))),x)}},i)),n.setEvents([{eventName:"node:selected",callback:()=>{a==="edit"&&X3(!1)}},{eventName:"edge:dblclick",callback:p=>{SR(p)}},{eventName:"edge:mouseleave",callback:(p,g)=>{_R(p,g)}},{eventName:"node:mouseenter",callback:p=>{a==="edit"&&X3(!0,p,u)}},{eventName:"node:mouseleave",callback:p=>{X3(!1,p)}},{eventName:"node:moved",callback:(p,g)=>{yR(p,g)}},{eventName:"node:resized",callback:(p,g)=>{bR(p,g)}}]),typeof s=="function"&&s(n)});let JD=class{constructor(){this.toDispose=new ln,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return xt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new ln,s=[r.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:u,graph:h}=a;h.on(JA.EVENT_NAME,p=>(0,F.mG)(this,void 0,void 0,function*(){const{edge:g}=p,y=(0,F._T)(p,["edge"]),{tempEdgeId:x}=y,E=(0,F._T)(y,["tempEdgeId"]),T={edgeConfig:Object.assign(Object.assign({},E),{source:{cell:y.source,port:y.sourcePortId},target:{cell:y.target,port:y.targetPortId},zIndex:1,data:Object.assign({},E)})};yield u.executeCommand(uo.ADD_EDGE.id,T),yield u.executeCommand(uo.DEL_EDGE.id,{edgeConfig:{id:x}});const O=h.getCellById(y.source),N=h.getCellById(y.target);yield u.executeCommand(Hi.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign({},O.data),{incomingEdges:h.getIncomingEdges(O),outgoingEdges:h.getOutgoingEdges(O)})}),yield u.executeCommand(Hi.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign({},N.data),{incomingEdges:h.getIncomingEdges(N),outgoingEdges:h.getOutgoingEdges(N)})});const k=YA("onAddEdge");typeof k=="function"&&k(T.edgeConfig),p.edge.remove()}))})})];return i.pushAll(s),xt.create(()=>{})})}};JD=(0,F.gn)([En({contrib:Ys})],JD);const h4=()=>{const n=useExtensionRegistry(),r=React.useMemo(()=>({CONFIG_TYPE:"FLOWCHART_EXTENSION",getConfig:()=>__awaiter(void 0,void 0,void 0,function*(){})}),[]);return React.useEffect(()=>{const i=n.addExtension({config:r,createModule:createFlowchartExtensionModule});return n.addContainerClassNames("flowchart-extension-container"),()=>{i.dispose()}},[r,n]),null},f4=()=>Module(n=>{n(FlowHooksContribution)}),Ck=n=>{const{position:r={top:40,left:240,right:240,bottom:0}}=n,i=xk(n),s=Qo();return(0,H.useEffect)(()=>{s&&gR(s)},[s]),H.createElement(Hc,Object.assign({},n,{config:i,position:r}),n.children)};Ck.defaultProps={isXFlowCanvas:!0};function wk(n){const[r,i]=(0,H.useState)({loading:!0}),s=(0,H.useCallback)(()=>{n().then(a=>{i({loading:!1,data:a})},a=>{i({loading:!1}),console.error(a)})},[n]);return(0,H.useEffect)(()=>{s()},[s]),r}const K3=n=>{const{controlSchema:r,children:i,type:s="node"}=n,{commandService:a,modelService:u}=Aw(),h=(0,H.useCallback)(()=>(0,F.mG)(void 0,void 0,void 0,function*(){const{data:O}=yield Nf.useValue(u);return O}),[u]),p=(0,H.useCallback)(()=>(0,F.mG)(void 0,void 0,void 0,function*(){const O=yield Wd.useValue(u),N=O.getData();return Object.assign({id:O.id},N)}),[u]),{data:g,loading:y}=wk(s==="edge"?p:h);H.useEffect(()=>{a.executeCommand(ei.SAVE_GRAPH_DATA.id,{saveGraphDataService:(O,N)=>(0,F.mG)(void 0,void 0,void 0,function*(){return{err:null,data:N,meta:O}})})},[a]);const x=O=>(0,F.mG)(void 0,void 0,void 0,function*(){const N=yield h(),k=Object.assign(Object.assign({},N),O);yield a.executeCommand(Hi.UPDATE_NODE.id,{nodeConfig:k}),Dw({type:"update:node",config:k})}),E=(O,N="line",k)=>(0,F.mG)(void 0,void 0,void 0,function*(){var B;const $=yield p(),X=Object.assign(Object.assign(Object.assign({},$),k?O[k]:O),{attrs:Object.assign(Object.assign({},$.attrs),{[N]:Object.assign(Object.assign({},(B=$.attrs)===null||B===void 0?void 0:B[N]),k?O[k]:O)})});yield a.executeCommand(uo.UPDATE_EDGE.id,{edgeConfig:X}),Dw({type:"update:edge",config:X})}),T=O=>(0,F.mG)(void 0,void 0,void 0,function*(){const N=yield h(),k=Object.assign(Object.assign({},N),O);yield a.executeCommand(Hi.UPDATE_NODE.id,{nodeConfig:k}),Dw({type:"update:group",config:k})});return y?null:H.createElement(jv,{schema:r},()=>i(Object.assign({},g),{updateNode:x,updateEdge:E,updateGroup:T}))},Lc="flowchart-editor",QA=24,QD={attrs:{line:{stroke:"#A2B1C3",strokeWidth:1},text:{fill:"#000",fontSize:12,textAnchor:"middle",textVerticalAnchor:"middle"}}},eT={width:12,height:8,name:"block"},tT={width:0,height:0,name:""},Ek={target:{sourceMarker:tT,targetMarker:eT},source:{sourceMarker:eT,targetMarker:tT},all:{sourceMarker:eT,targetMarker:eT},none:{sourceMarker:tT,targetMarker:tT}},Sk={solid:[0,0],dash:[5,5]};var nT=n=>{const{label:r="\u6807\u7B7E",value:i,onChange:s}=n;return H.createElement("div",{className:"group"},H.createElement("label",null,r),H.createElement(UA.Z,{value:i,style:{height:QA},onChange:a=>{s?.(a.target.value)}}))},eN=M(71577),_k=M(24198);const Ak=n=>{const{label:r,value:i="",onChange:s,getContainer:a}=n,[u,h]=(0,H.useState)(!1),p=(0,H.useRef)(i),g=(0,H.useRef)(),{graphProvider:y}=Qo(),x=(0,H.useRef)();y.getGraphOptions().then(N=>{x.current=N});const E=()=>H.createElement("div",{className:`${Lc}-pick-color-container`},H.createElement("div",{className:`${Lc}-popover`},H.createElement(_k.xS,{onChange:N=>{p.current=N.hex}}),H.createElement("div",{className:"foolter"},H.createElement(eN.Z,{onClick:()=>{h(!1)}},"\u53D6\u6D88"),H.createElement(eN.Z,{type:"primary",onClick:()=>{s?.(p.current),h(!1)}},"\u786E\u8BA4")))),T=(N,k)=>{const B=document.getElementsByClassName(k);if(B.length===1)return B[0];let $=null,X=N.parentElement;for(;!$;){const ne=X.getElementsByClassName(k);ne?.length>0&&($=ne[0]),X=X.parentElement}return $},O=()=>{var N;const k=(N=a?.())!==null&&N!==void 0?N:T(g.current,"flowchart-editor-panel-body");return(0,Pa.createPortal)(H.createElement(E,null),k)};return H.createElement("div",{className:"group",ref:g},r&&H.createElement("label",null,r),H.createElement("div",{className:`${Lc}-color-container`,onClick:()=>{h(!0)}},H.createElement("div",{className:`${Lc}-color`,style:{backgroundColor:i,height:"100%"}})),u&&O())};var w0=(0,H.memo)(Ak,(n,r)=>n.label===r.label&&n.value===r.value),Nw=n=>{const{label:r,value:i,onChange:s,min:a,width:u}=n;return H.createElement("div",{className:"group"},r&&H.createElement("label",null,r),H.createElement(V3.Z,{value:i,min:a,style:{width:u,height:QA},onChange:h=>{s?.(h)}}))};const rT=({value:n,onChangeItem:r,addonBefore:i})=>H.createElement("div",{className:"addon-before-group"},H.createElement(V3.Z,{value:n,style:{height:QA,border:"none"},onChange:s=>{r(s)}}),H.createElement("span",null,i));var q3=n=>{const{label:r="\u4F4D\u7F6E",x:i,y:s,onChange:a}=n;return H.createElement("div",{className:"group"},H.createElement("label",null,r),H.createElement("div",{className:"split"},H.createElement(rT,{addonBefore:"X",value:i,onChangeItem:u=>{a?.("x",u)}}),H.createElement(rT,{addonBefore:"Y",value:s,onChangeItem:u=>{a?.("y",u)}})))},J3=n=>{const{width:r,height:i,label:s="\u5C3A\u5BF8",onChange:a}=n;return H.createElement("div",{className:"group"},H.createElement("label",null,s),H.createElement("div",{className:"split"},H.createElement(rT,{addonBefore:"W",value:r,onChangeItem:u=>{a?.("width",u)}}),H.createElement(rT,{addonBefore:"H",value:i,onChangeItem:u=>{a?.("height",u)}})))},Q3=n=>{const{label:r="\u7BAD\u5934",value:i,onChange:s,options:a=[],width:u}=n;return H.createElement("div",{className:"group"},H.createElement("label",null,r),H.createElement(z3.Z,{size:"small",value:i,style:{width:u,height:QA},getPopupContainer:h=>h.parentNode,optionFilterProp:"children",onChange:h=>{s?.(h)},filterOption:(h,p)=>{const{label:g=""}=p;return typeof g=="string"?g.toLowerCase().indexOf(h.toLowerCase())>=0:g.toString().indexOf(h.toLowerCase())>=0},options:a}))};const b4={InputFiled:nT,ColorPicker:w0,InputNumberFiled:Nw,Size:J3,Position:q3,SelectField:Q3},Tk=n=>{const{config:r,plugin:i={}}=n,{updateNode:s}=i,[a,u]=(0,H.useState)(Object.assign(Object.assign({},gn),r)),h=(p,g)=>{u(Object.assign(Object.assign({},a),{[p]:g})),s({[p]:g})};return(0,H.useEffect)(()=>{u(Object.assign(Object.assign({},gn),r))},[r]),H.createElement("div",{className:`${Lc}-panel-body`},H.createElement("div",{className:`${Lc}-panel-group`},H.createElement("h5",null,"\u5185\u5BB9"),H.createElement(nT,{label:"\u6807\u9898",value:a.label,onChange:p=>{h("label",p)}})),H.createElement("div",{className:`${Lc}-panel-group`},H.createElement("h5",null,"\u6837\u5F0F"),H.createElement(q3,{x:a.x,y:a.y,onChange:(p,g)=>{h(p,g)}}),H.createElement(J3,{width:a.width,height:a.height,onChange:(p,g)=>{h(p,g)}}),H.createElement(w0,{label:"\u586B\u5145",value:a.fill,onChange:p=>{h("fill",p)}}),H.createElement(w0,{label:"\u8FB9\u6846",value:a.stroke,onChange:p=>{h("stroke",p)}}),H.createElement("div",{className:`${Lc}-node-text-style`},H.createElement(Nw,{label:"\u5B57\u53F7",value:a.fontSize,width:68,onChange:p=>{h("fontSize",p)}}),H.createElement(w0,{value:a.fontFill,onChange:p=>{h("fontFill",p)}}))))},Mk=n=>H.createElement(K3,Object.assign({},n),(r,i)=>H.createElement(Tk,Object.assign({},n,{plugin:i,config:r}))),Ok=n=>{const{config:r,plugin:i={}}=n,{updateEdge:s}=i,[a,u]=(0,H.useState)(Object.assign(Object.assign({},QD),r));(0,H.useEffect)(()=>{u(Object.assign(Object.assign({},QD),r))},[r]);const h=(x,E="line")=>{var T;const{attrs:O={}}=a;return(T=O[E])===null||T===void 0?void 0:T[x]},p=()=>{var x,E,T,O,N;const{attrs:k={}}=a,{line:B={}}=k;return((x=B.sourceMarker)===null||x===void 0?void 0:x.name)&&((E=B.targetMarker)===null||E===void 0?void 0:E.name)?"all":!(!((T=B.sourceMarker)===null||T===void 0)&&T.name)&&!(!((O=B.targetMarker)===null||O===void 0)&&O.name)?"none":!((N=B.sourceMarker)===null||N===void 0)&&N.name?"source":"target"},g=()=>{const{attrs:x={}}=a,{line:E={}}=x;return E.strokeDasharray?"dash":"solid"},y=(x,E,T="line")=>{var O,N;u(x==="arrow"?Object.assign(Object.assign({},a),{attrs:Object.assign(Object.assign({},a.attrs),{[T]:Object.assign(Object.assign({},(O=a.attrs)===null||O===void 0?void 0:O[T]),E)})}):Object.assign(Object.assign({},a),{[x]:E,attrs:Object.assign(Object.assign({},a.attrs),{[T]:Object.assign(Object.assign({},(N=a.attrs)===null||N===void 0?void 0:N[T]),{[x]:E})})})),s({[x]:E},T,x==="arrow"?"arrow":"")};return H.createElement("div",{className:`${Lc}-panel-body`},H.createElement("div",{className:`${Lc}-panel-group`},H.createElement("h5",null,"\u5185\u5BB9"),H.createElement(nT,{label:"\u6807\u7B7E",value:a.label,onChange:x=>{y("label",x)}})),H.createElement("h5",{style:{marginBottom:12}},"\u6837\u5F0F"),H.createElement("div",{className:`${Lc}-panel-group`,style:{marginBottom:0}},H.createElement("h5",null,"\u7EBF"),H.createElement(Q3,{label:"\u7BAD\u5934",value:p(),width:"100%",options:[{label:"\u6B63\u5411",value:"target"},{label:"\u9006\u5411",value:"source"},{label:"\u53CC\u5411",value:"all"},{label:"\u65E0",value:"none"}],onChange:x=>{y("arrow",Ek[x],"line")}}),H.createElement("div",{className:`${Lc}-edge-stroke-style`},H.createElement(Q3,{label:"\u7EBF\u5F62",width:68,value:g(),options:[{label:"\u5B9E\u7EBF",value:"solid"},{label:"\u865A\u7EBF",value:"dash"}],onChange:x=>{y("strokeDasharray",Sk[x],"line")}}),H.createElement(Nw,{value:h("strokeWidth"),min:1,onChange:x=>{y("strokeWidth",x,"line")}})),H.createElement(w0,{label:"\u8FB9\u6846",value:h("stroke"),onChange:x=>{y("stroke",x,"line")}})),H.createElement("div",{className:`${Lc}-panel-group`},H.createElement("h5",null,"\u6807\u7B7E"),H.createElement("div",{className:`${Lc}-edge-text-style`},H.createElement(Nw,{label:"\u5B57\u53F7",min:10,width:68,value:h("fontSize","text")||12,onChange:x=>{y("fontSize",x,"text")}}),H.createElement(w0,{value:h("fill","text")||"#000",onChange:x=>{y("fill",x,"text")}}))))},Pk=n=>H.createElement(K3,Object.assign({},n,{type:"edge"}),(r,i)=>H.createElement(Ok,Object.assign({},n,{plugin:i,config:r}))),Dk=n=>{const{config:r,plugin:i={}}=n,{updateGroup:s}=i,[a,u]=(0,H.useState)(Object.assign(Object.assign({},gn),r)),h=(p,g)=>{u(Object.assign(Object.assign({},a),{[p]:g})),s({[p]:g})};return(0,H.useEffect)(()=>{u(Object.assign(Object.assign({},gn),r))},[r]),H.createElement("div",{className:`${Lc}-panel-body`},H.createElement("div",{className:`${Lc}-panel-group`},H.createElement("h5",null,"\u5185\u5BB9"),H.createElement(nT,{label:"\u6807\u9898",value:a.label,onChange:p=>{h("label",p)}})),H.createElement("div",{className:`${Lc}-panel-group`},H.createElement("h5",null,"\u6837\u5F0F"),H.createElement(q3,{x:a.x,y:a.y,onChange:(p,g)=>{h(p,g)}}),H.createElement(J3,{width:a.width,height:a.height,onChange:(p,g)=>{h(p,g)}}),H.createElement(w0,{label:"\u586B\u5145",value:a.fill,onChange:p=>{h("fill",p)}}),H.createElement(w0,{label:"\u8FB9\u6846",value:a.stroke,onChange:p=>{h("stroke",p)}}),H.createElement("div",{className:`${Lc}-node-text-style`},H.createElement(Nw,{label:"\u5B57\u53F7",value:a.fontSize,width:68,onChange:p=>{h("fontSize",p)}}),H.createElement(w0,{value:a.fontFill,onChange:p=>{h("fontFill",p)}}))))},Nk=n=>H.createElement(K3,Object.assign({},n),(r,i)=>H.createElement(Dk,Object.assign({},n,{plugin:i,config:r}))),Ik=()=>H.createElement("div",{className:`${Lc}-canvas-panel`},H.createElement("span",null,"\u672A\u9009\u4E2D")),x4=n=>(n.set("node-service",NodeService),n.set("edge-service",EdgeService),n.set("group-service",GroupService),n.set("canvas-service",CanvasService),n),C4={NodeService:Mk,EdgeService:Pk,GroupService:Nk,CanvasService:Ik},eP="xflow-editor-panel-collpase",w4=n=>{const[r,i]=useState(!1),{controlMapService:s=defaultControlMapService,formSchemaService:a=defaultFormSchemaService,position:u={width:240,top:0,bottom:0,right:0},show:h=!0}=n,p=__rest(n,["controlMapService","formSchemaService","position","show"]);if(!h)return null;const{width:g=200,right:y}=u;return React.createElement(WorkspacePanel,{className:eP,position:Object.assign(Object.assign({},u),{right:r?-g:y})},React.createElement("div",{className:`${eP}-wrapper`},React.createElement(JsonSchemaForm,Object.assign({targetType:["node","edge","canvas","group"],controlMapService:s,formSchemaService:a,position:Object.assign(Object.assign({},u),{top:0}),prefixClz:"xflow-form-editor"},p)),React.createElement("div",{className:`${eP}-icon`,style:{top:21,left:r?-20:-10,borderRadius:r?"50% 0 0  50%":"50%",borderRight:r?"none":""},onClick:()=>{i(!r)}},r?React.createElement(DoubleLeftOutlined,null):React.createElement(DoubleRightOutlined,null))))}},85788:function(Ne,L,M){var j=M(58579);Ne.exports={Graph:j.Graph,json:M(62485),alg:M(39100),version:j.version}},74774:function(Ne,L,M){var j=M(77163);Ne.exports=R;function R(J){var z={},Z=[],te;function Q(de){j.has(z,de)||(z[de]=!0,te.push(de),j.each(J.successors(de),Q),j.each(J.predecessors(de),Q))}return j.each(J.nodes(),function(de){te=[],Q(de),te.length&&Z.push(te)}),Z}},65179:function(Ne,L,M){var j=M(77163);Ne.exports=R;function R(z,Z,te){j.isArray(Z)||(Z=[Z]);var Q=(z.isDirected()?z.successors:z.neighbors).bind(z),de=[],oe={};return j.each(Z,function(ie){if(!z.hasNode(ie))throw new Error("Graph does not have node: "+ie);J(z,ie,te==="post",oe,Q,de)}),de}function J(z,Z,te,Q,de,oe){j.has(Q,Z)||(Q[Z]=!0,te||oe.push(Z),j.each(de(Z),function(ie){J(z,ie,te,Q,de,oe)}),te&&oe.push(Z))}},73897:function(Ne,L,M){var j=M(69205),R=M(77163);Ne.exports=J;function J(z,Z,te){return R.transform(z.nodes(),function(Q,de){Q[de]=j(z,de,Z,te)},{})}},69205:function(Ne,L,M){var j=M(77163),R=M(96129);Ne.exports=z;var J=j.constant(1);function z(te,Q,de,oe){return Z(te,String(Q),de||J,oe||function(ie){return te.outEdges(ie)})}function Z(te,Q,de,oe){var ie={},re=new R,he,De,ue=function(xe){var ae=xe.v!==he?xe.v:xe.w,ce=ie[ae],fe=de(xe),Ee=De.distance+fe;if(fe<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+xe+" Weight: "+fe);Ee<ce.distance&&(ce.distance=Ee,ce.predecessor=he,re.decrease(ae,Ee))};for(te.nodes().forEach(function(xe){var ae=xe===Q?0:Number.POSITIVE_INFINITY;ie[xe]={distance:ae},re.add(xe,ae)});re.size()>0&&(he=re.removeMin(),De=ie[he],De.distance!==Number.POSITIVE_INFINITY);)oe(he).forEach(ue);return ie}},32630:function(Ne,L,M){var j=M(77163),R=M(93070);Ne.exports=J;function J(z){return j.filter(R(z),function(Z){return Z.length>1||Z.length===1&&z.hasEdge(Z[0],Z[0])})}},3171:function(Ne,L,M){var j=M(77163);Ne.exports=J;var R=j.constant(1);function J(Z,te,Q){return z(Z,te||R,Q||function(de){return Z.outEdges(de)})}function z(Z,te,Q){var de={},oe=Z.nodes();return oe.forEach(function(ie){de[ie]={},de[ie][ie]={distance:0},oe.forEach(function(re){ie!==re&&(de[ie][re]={distance:Number.POSITIVE_INFINITY})}),Q(ie).forEach(function(re){var he=re.v===ie?re.w:re.v,De=te(re);de[ie][he]={distance:De,predecessor:ie}})}),oe.forEach(function(ie){var re=de[ie];oe.forEach(function(he){var De=de[he];oe.forEach(function(ue){var xe=De[ie],ae=re[ue],ce=De[ue],fe=xe.distance+ae.distance;fe<ce.distance&&(ce.distance=fe,ce.predecessor=ae.predecessor)})})}),de}},39100:function(Ne,L,M){Ne.exports={components:M(74774),dijkstra:M(69205),dijkstraAll:M(73897),findCycles:M(32630),floydWarshall:M(3171),isAcyclic:M(78149),postorder:M(85979),preorder:M(5340),prim:M(74975),tarjan:M(93070),topsort:M(37034)}},78149:function(Ne,L,M){var j=M(37034);Ne.exports=R;function R(J){try{j(J)}catch(z){if(z instanceof j.CycleException)return!1;throw z}return!0}},85979:function(Ne,L,M){var j=M(65179);Ne.exports=R;function R(J,z){return j(J,z,"post")}},5340:function(Ne,L,M){var j=M(65179);Ne.exports=R;function R(J,z){return j(J,z,"pre")}},74975:function(Ne,L,M){var j=M(77163),R=M(1053),J=M(96129);Ne.exports=z;function z(Z,te){var Q=new R,de={},oe=new J,ie;function re(De){var ue=De.v===ie?De.w:De.v,xe=oe.priority(ue);if(xe!==void 0){var ae=te(De);ae<xe&&(de[ue]=ie,oe.decrease(ue,ae))}}if(Z.nodeCount()===0)return Q;j.each(Z.nodes(),function(De){oe.add(De,Number.POSITIVE_INFINITY),Q.setNode(De)}),oe.decrease(Z.nodes()[0],0);for(var he=!1;oe.size()>0;){if(ie=oe.removeMin(),j.has(de,ie))Q.setEdge(ie,de[ie]);else{if(he)throw new Error("Input graph is not connected: "+Z);he=!0}Z.nodeEdges(ie).forEach(re)}return Q}},93070:function(Ne,L,M){var j=M(77163);Ne.exports=R;function R(J){var z=0,Z=[],te={},Q=[];function de(oe){var ie=te[oe]={onStack:!0,lowlink:z,index:z++};if(Z.push(oe),J.successors(oe).forEach(function(De){j.has(te,De)?te[De].onStack&&(ie.lowlink=Math.min(ie.lowlink,te[De].index)):(de(De),ie.lowlink=Math.min(ie.lowlink,te[De].lowlink))}),ie.lowlink===ie.index){var re=[],he;do he=Z.pop(),te[he].onStack=!1,re.push(he);while(oe!==he);Q.push(re)}}return J.nodes().forEach(function(oe){j.has(te,oe)||de(oe)}),Q}},37034:function(Ne,L,M){var j=M(77163);Ne.exports=R,R.CycleException=J;function R(z){var Z={},te={},Q=[];function de(oe){if(j.has(te,oe))throw new J;j.has(Z,oe)||(te[oe]=!0,Z[oe]=!0,j.each(z.predecessors(oe),de),delete te[oe],Q.push(oe))}if(j.each(z.sinks(),de),j.size(Z)!==z.nodeCount())throw new J;return Q}function J(){}},96129:function(Ne,L,M){var j=M(77163);Ne.exports=R;function R(){this._arr=[],this._keyIndices={}}R.prototype.size=function(){return this._arr.length},R.prototype.keys=function(){return this._arr.map(function(J){return J.key})},R.prototype.has=function(J){return j.has(this._keyIndices,J)},R.prototype.priority=function(J){var z=this._keyIndices[J];if(z!==void 0)return this._arr[z].priority},R.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},R.prototype.add=function(J,z){var Z=this._keyIndices;if(J=String(J),!j.has(Z,J)){var te=this._arr,Q=te.length;return Z[J]=Q,te.push({key:J,priority:z}),this._decrease(Q),!0}return!1},R.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var J=this._arr.pop();return delete this._keyIndices[J.key],this._heapify(0),J.key},R.prototype.decrease=function(J,z){var Z=this._keyIndices[J];if(z>this._arr[Z].priority)throw new Error("New priority is greater than current priority. Key: "+J+" Old: "+this._arr[Z].priority+" New: "+z);this._arr[Z].priority=z,this._decrease(Z)},R.prototype._heapify=function(J){var z=this._arr,Z=2*J,te=Z+1,Q=J;Z<z.length&&(Q=z[Z].priority<z[Q].priority?Z:Q,te<z.length&&(Q=z[te].priority<z[Q].priority?te:Q),Q!==J&&(this._swap(J,Q),this._heapify(Q)))},R.prototype._decrease=function(J){for(var z=this._arr,Z=z[J].priority,te;J!==0&&(te=J>>1,!(z[te].priority<Z));)this._swap(J,te),J=te},R.prototype._swap=function(J,z){var Z=this._arr,te=this._keyIndices,Q=Z[J],de=Z[z];Z[J]=de,Z[z]=Q,te[de.key]=J,te[Q.key]=z}},1053:function(Ne,L,M){"use strict";var j=M(77163);Ne.exports=Z;var R="\0",J="\0",z="";function Z(re){this._isDirected=j.has(re,"directed")?re.directed:!0,this._isMultigraph=j.has(re,"multigraph")?re.multigraph:!1,this._isCompound=j.has(re,"compound")?re.compound:!1,this._label=void 0,this._defaultNodeLabelFn=j.constant(void 0),this._defaultEdgeLabelFn=j.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[J]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}Z.prototype._nodeCount=0,Z.prototype._edgeCount=0,Z.prototype.isDirected=function(){return this._isDirected},Z.prototype.isMultigraph=function(){return this._isMultigraph},Z.prototype.isCompound=function(){return this._isCompound},Z.prototype.setGraph=function(re){return this._label=re,this},Z.prototype.graph=function(){return this._label},Z.prototype.setDefaultNodeLabel=function(re){return j.isFunction(re)||(re=j.constant(re)),this._defaultNodeLabelFn=re,this},Z.prototype.nodeCount=function(){return this._nodeCount},Z.prototype.nodes=function(){return j.keys(this._nodes)},Z.prototype.sources=function(){return j.filter(this.nodes(),j.bind(function(re){return j.isEmpty(this._in[re])},this))},Z.prototype.sinks=function(){return j.filter(this.nodes(),j.bind(function(re){return j.isEmpty(this._out[re])},this))},Z.prototype.setNodes=function(re,he){var De=arguments;return j.each(re,j.bind(function(ue){De.length>1?this.setNode(ue,he):this.setNode(ue)},this)),this},Z.prototype.setNode=function(re,he){return j.has(this._nodes,re)?(arguments.length>1&&(this._nodes[re]=he),this):(this._nodes[re]=arguments.length>1?he:this._defaultNodeLabelFn(re),this._isCompound&&(this._parent[re]=J,this._children[re]={},this._children[J][re]=!0),this._in[re]={},this._preds[re]={},this._out[re]={},this._sucs[re]={},++this._nodeCount,this)},Z.prototype.node=function(re){return this._nodes[re]},Z.prototype.hasNode=function(re){return j.has(this._nodes,re)},Z.prototype.removeNode=function(re){var he=this;if(j.has(this._nodes,re)){var De=function(ue){he.removeEdge(he._edgeObjs[ue])};delete this._nodes[re],this._isCompound&&(this._removeFromParentsChildList(re),delete this._parent[re],j.each(this.children(re),j.bind(function(ue){this.setParent(ue)},this)),delete this._children[re]),j.each(j.keys(this._in[re]),De),delete this._in[re],delete this._preds[re],j.each(j.keys(this._out[re]),De),delete this._out[re],delete this._sucs[re],--this._nodeCount}return this},Z.prototype.setParent=function(re,he){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(j.isUndefined(he))he=J;else{he+="";for(var De=he;!j.isUndefined(De);De=this.parent(De))if(De===re)throw new Error("Setting "+he+" as parent of "+re+" would create create a cycle");this.setNode(he)}return this.setNode(re),this._removeFromParentsChildList(re),this._parent[re]=he,this._children[he][re]=!0,this},Z.prototype._removeFromParentsChildList=function(re){delete this._children[this._parent[re]][re]},Z.prototype.parent=function(re){if(this._isCompound){var he=this._parent[re];if(he!==J)return he}},Z.prototype.children=function(re){if(j.isUndefined(re)&&(re=J),this._isCompound){var he=this._children[re];if(he)return j.keys(he)}else{if(re===J)return this.nodes();if(this.hasNode(re))return[]}},Z.prototype.predecessors=function(re){var he=this._preds[re];if(he)return j.keys(he)},Z.prototype.successors=function(re){var he=this._sucs[re];if(he)return j.keys(he)},Z.prototype.neighbors=function(re){var he=this.predecessors(re);if(he)return j.union(he,this.successors(re))},Z.prototype.isLeaf=function(re){var he;return this.isDirected()?he=this.successors(re):he=this.neighbors(re),he.length===0},Z.prototype.filterNodes=function(re){var he=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});he.setGraph(this.graph()),j.each(this._nodes,j.bind(function(ae,ce){re(ce)&&he.setNode(ce,ae)},this)),j.each(this._edgeObjs,j.bind(function(ae){he.hasNode(ae.v)&&he.hasNode(ae.w)&&he.setEdge(ae,this.edge(ae))},this));var De=this,ue={};function xe(ae){var ce=De.parent(ae);return ce===void 0||he.hasNode(ce)?(ue[ae]=ce,ce):ce in ue?ue[ce]:xe(ce)}return this._isCompound&&j.each(he.nodes(),function(ae){he.setParent(ae,xe(ae))}),he},Z.prototype.setDefaultEdgeLabel=function(re){return j.isFunction(re)||(re=j.constant(re)),this._defaultEdgeLabelFn=re,this},Z.prototype.edgeCount=function(){return this._edgeCount},Z.prototype.edges=function(){return j.values(this._edgeObjs)},Z.prototype.setPath=function(re,he){var De=this,ue=arguments;return j.reduce(re,function(xe,ae){return ue.length>1?De.setEdge(xe,ae,he):De.setEdge(xe,ae),ae}),this},Z.prototype.setEdge=function(){var re,he,De,ue,xe=!1,ae=arguments[0];typeof ae=="object"&&ae!==null&&"v"in ae?(re=ae.v,he=ae.w,De=ae.name,arguments.length===2&&(ue=arguments[1],xe=!0)):(re=ae,he=arguments[1],De=arguments[3],arguments.length>2&&(ue=arguments[2],xe=!0)),re=""+re,he=""+he,j.isUndefined(De)||(De=""+De);var ce=de(this._isDirected,re,he,De);if(j.has(this._edgeLabels,ce))return xe&&(this._edgeLabels[ce]=ue),this;if(!j.isUndefined(De)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(re),this.setNode(he),this._edgeLabels[ce]=xe?ue:this._defaultEdgeLabelFn(re,he,De);var fe=oe(this._isDirected,re,he,De);return re=fe.v,he=fe.w,Object.freeze(fe),this._edgeObjs[ce]=fe,te(this._preds[he],re),te(this._sucs[re],he),this._in[he][ce]=fe,this._out[re][ce]=fe,this._edgeCount++,this},Z.prototype.edge=function(re,he,De){var ue=arguments.length===1?ie(this._isDirected,arguments[0]):de(this._isDirected,re,he,De);return this._edgeLabels[ue]},Z.prototype.hasEdge=function(re,he,De){var ue=arguments.length===1?ie(this._isDirected,arguments[0]):de(this._isDirected,re,he,De);return j.has(this._edgeLabels,ue)},Z.prototype.removeEdge=function(re,he,De){var ue=arguments.length===1?ie(this._isDirected,arguments[0]):de(this._isDirected,re,he,De),xe=this._edgeObjs[ue];return xe&&(re=xe.v,he=xe.w,delete this._edgeLabels[ue],delete this._edgeObjs[ue],Q(this._preds[he],re),Q(this._sucs[re],he),delete this._in[he][ue],delete this._out[re][ue],this._edgeCount--),this},Z.prototype.inEdges=function(re,he){var De=this._in[re];if(De){var ue=j.values(De);return he?j.filter(ue,function(xe){return xe.v===he}):ue}},Z.prototype.outEdges=function(re,he){var De=this._out[re];if(De){var ue=j.values(De);return he?j.filter(ue,function(xe){return xe.w===he}):ue}},Z.prototype.nodeEdges=function(re,he){var De=this.inEdges(re,he);if(De)return De.concat(this.outEdges(re,he))};function te(re,he){re[he]?re[he]++:re[he]=1}function Q(re,he){--re[he]||delete re[he]}function de(re,he,De,ue){var xe=""+he,ae=""+De;if(!re&&xe>ae){var ce=xe;xe=ae,ae=ce}return xe+z+ae+z+(j.isUndefined(ue)?R:ue)}function oe(re,he,De,ue){var xe=""+he,ae=""+De;if(!re&&xe>ae){var ce=xe;xe=ae,ae=ce}var fe={v:xe,w:ae};return ue&&(fe.name=ue),fe}function ie(re,he){return de(re,he.v,he.w,he.name)}},58579:function(Ne,L,M){Ne.exports={Graph:M(1053),version:M(82321)}},62485:function(Ne,L,M){var j=M(77163),R=M(1053);Ne.exports={write:J,read:te};function J(Q){var de={options:{directed:Q.isDirected(),multigraph:Q.isMultigraph(),compound:Q.isCompound()},nodes:z(Q),edges:Z(Q)};return j.isUndefined(Q.graph())||(de.value=j.clone(Q.graph())),de}function z(Q){return j.map(Q.nodes(),function(de){var oe=Q.node(de),ie=Q.parent(de),re={v:de};return j.isUndefined(oe)||(re.value=oe),j.isUndefined(ie)||(re.parent=ie),re})}function Z(Q){return j.map(Q.edges(),function(de){var oe=Q.edge(de),ie={v:de.v,w:de.w};return j.isUndefined(de.name)||(ie.name=de.name),j.isUndefined(oe)||(ie.value=oe),ie})}function te(Q){var de=new R(Q.options).setGraph(Q.value);return j.each(Q.nodes,function(oe){de.setNode(oe.v,oe.value),oe.parent&&de.setParent(oe.v,oe.parent)}),j.each(Q.edges,function(oe){de.setEdge({v:oe.v,w:oe.w,name:oe.name},oe.value)}),de}},77163:function(Ne,L,M){var j;try{j=M(96486)}catch{}j||(j=window._),Ne.exports=j},82321:function(Ne){Ne.exports="2.1.4"},70597:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var j=Object.assign||function(Q){for(var de=1;de<arguments.length;de++){var oe=arguments[de];for(var ie in oe)Object.prototype.hasOwnProperty.call(oe,ie)&&(Q[ie]=oe[ie])}return Q},R=M(67294),J=z(R);function z(Q){return Q&&Q.__esModule?Q:{default:Q}}function Z(Q,de){var oe={};for(var ie in Q)de.indexOf(ie)>=0||!Object.prototype.hasOwnProperty.call(Q,ie)||(oe[ie]=Q[ie]);return oe}var te=24;L.default=function(Q){var de=Q.fill,oe=de===void 0?"currentColor":de,ie=Q.width,re=ie===void 0?te:ie,he=Q.height,De=he===void 0?te:he,ue=Q.style,xe=ue===void 0?{}:ue,ae=Z(Q,["fill","width","height","style"]);return J.default.createElement("svg",j({viewBox:"0 0 "+te+" "+te,style:j({fill:oe,width:re,height:De},xe)},ae),J.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},43891:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var j=Object.assign||function(Q){for(var de=1;de<arguments.length;de++){var oe=arguments[de];for(var ie in oe)Object.prototype.hasOwnProperty.call(oe,ie)&&(Q[ie]=oe[ie])}return Q},R=M(67294),J=z(R);function z(Q){return Q&&Q.__esModule?Q:{default:Q}}function Z(Q,de){var oe={};for(var ie in Q)de.indexOf(ie)>=0||!Object.prototype.hasOwnProperty.call(Q,ie)||(oe[ie]=Q[ie]);return oe}var te=24;L.default=function(Q){var de=Q.fill,oe=de===void 0?"currentColor":de,ie=Q.width,re=ie===void 0?te:ie,he=Q.height,De=he===void 0?te:he,ue=Q.style,xe=ue===void 0?{}:ue,ae=Z(Q,["fill","width","height","style"]);return J.default.createElement("svg",j({viewBox:"0 0 "+te+" "+te,style:j({fill:oe,width:re,height:De},xe)},ae),J.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},49469:function(Ne,L){"use strict";var M;M={value:!0};var j;(function(ye){ye.TextureCompressionBC="texture-compression-bc"})(j=L.UX||(L.UX={}));var R;(function(ye){ye.ClampToEdge="clamp-to-edge",ye.Repeat="repeat",ye.MirrorRepeat="mirror-repeat"})(R=L.OB||(L.OB={}));var J;(function(ye){ye.UniformBuffer="uniform-buffer",ye.StorageBuffer="storage-buffer",ye.ReadonlyStorageBuffer="readonly-storage-buffer",ye.Sampler="sampler",ye.ComparisonSampler="comparison-sampler",ye.SampledTexture="sampled-texture",ye.ReadonlyStorageTexture="readonly-storage-texture",ye.WriteonlyStorageTexture="writeonly-storage-texture"})(J=L.$l||(L.$l={}));var z;(function(ye){ye.Zero="zero",ye.One="one",ye.SrcColor="src-color",ye.OneMinusSrcColor="one-minus-src-color",ye.SrcAlpha="src-alpha",ye.OneMinusSrcAlpha="one-minus-src-alpha",ye.DstColor="dst-color",ye.OneMinusDstColor="one-minus-dst-color",ye.DstAlpha="dst-alpha",ye.OneMinusDstAlpha="one-minus-dst-alpha",ye.SrcAlphaSaturated="src-alpha-saturated",ye.BlendColor="blend-color",ye.OneMinusBlendColor="one-minus-blend-color"})(z=L.zi||(L.zi={}));var Z;(function(ye){ye.Add="add",ye.Subtract="subtract",ye.ReverseSubtract="reverse-subtract",ye.Min="min",ye.Max="max"})(Z=L.db||(L.db={}));var te;(function(ye){ye.Never="never",ye.Less="less",ye.Equal="equal",ye.LessEqual="less-equal",ye.Greater="greater",ye.NotEqual="not-equal",ye.GreaterEqual="greater-equal",ye.Always="always"})(te=L.wb||(L.wb={}));var Q;(function(ye){ye.None="none",ye.Front="front",ye.Back="back"})(Q=L.Wf||(L.Wf={}));var de;(function(ye){ye.Nearest="nearest",ye.Linear="linear"})(de=L.X9||(L.X9={}));var oe;(function(ye){ye.CCW="ccw",ye.CW="cw"})(oe=L.zX||(L.zX={}));var ie;(function(ye){ye.Uint16="uint16",ye.Uint32="uint32"})(ie=L.iD||(L.iD={}));var re;(function(ye){ye.Vertex="vertex",ye.Instance="instance"})(re=L.V||(L.V={}));var he;(function(ye){ye.Load="load"})(he=L.Ws||(L.Ws={}));var De;(function(ye){ye.PointList="point-list",ye.LineList="line-list",ye.LineStrip="line-strip",ye.TriangleList="triangle-list",ye.TriangleStrip="triangle-strip"})(De=L.YV||(L.YV={}));var ue;(function(ye){ye.Keep="keep",ye.Zero="zero",ye.Replace="replace",ye.Invert="invert",ye.IncrementClamp="increment-clamp",ye.DecrementClamp="decrement-clamp",ye.IncrementWrap="increment-wrap",ye.DecrementWrap="decrement-wrap"})(ue=L.xS||(L.xS={}));var xe;(function(ye){ye.Store="store",ye.Clear="clear"})(xe=L.EG||(L.EG={}));var ae;(function(ye){ye.E1d="1d",ye.E2d="2d",ye.E3d="3d"})(ae=L.kd||(L.kd={}));var ce;(function(ye){ye.R8Unorm="r8unorm",ye.R8Snorm="r8snorm",ye.R8Uint="r8uint",ye.R8Sint="r8sint",ye.R16Uint="r16uint",ye.R16Sint="r16sint",ye.R16Float="r16float",ye.RG8Unorm="rg8unorm",ye.RG8Snorm="rg8snorm",ye.RG8Uint="rg8uint",ye.RG8Sint="rg8sint",ye.R32Uint="r32uint",ye.R32Sint="r32sint",ye.R32Float="r32float",ye.RG16Uint="rg16uint",ye.RG16Sint="rg16sint",ye.RG16Float="rg16float",ye.RGBA8Unorm="rgba8unorm",ye.RGBA8UnormSRGB="rgba8unorm-srgb",ye.RGBA8Snorm="rgba8snorm",ye.RGBA8Uint="rgba8uint",ye.RGBA8Sint="rgba8sint",ye.BGRA8Unorm="bgra8unorm",ye.BGRA8UnormSRGB="bgra8unorm-srgb",ye.RGB10A2Unorm="rgb10a2unorm",ye.RG11B10Float="rg11b10float",ye.RG32Uint="rg32uint",ye.RG32Sint="rg32sint",ye.RG32Float="rg32float",ye.RGBA16Uint="rgba16uint",ye.RGBA16Sint="rgba16sint",ye.RGBA16Float="rgba16float",ye.RGBA32Uint="rgba32uint",ye.RGBA32Sint="rgba32sint",ye.RGBA32Float="rgba32float",ye.Depth32Float="depth32float",ye.Depth24Plus="depth24plus",ye.Depth24PlusStencil8="depth24plus-stencil8"})(ce=L.EV||(L.EV={}));var fe;(function(ye){ye.Float="float",ye.Sint="sint",ye.Uint="uint"})(fe=L.Ek||(L.Ek={}));var Ee;(function(ye){ye.E1d="1d",ye.E2d="2d",ye.E2dArray="2d-array",ye.Cube="cube",ye.CubeArray="cube-array",ye.E3d="3d"})(Ee=L.p_||(L.p_={}));var pe;(function(ye){ye.Uchar2="uchar2",ye.Uchar4="uchar4",ye.Char2="char2",ye.Char4="char4",ye.Uchar2Norm="uchar2norm",ye.Uchar4Norm="uchar4norm",ye.Char2Norm="char2norm",ye.Char4Norm="char4norm",ye.Ushort2="ushort2",ye.Ushort4="ushort4",ye.Short2="short2",ye.Short4="short4",ye.Ushort2Norm="ushort2norm",ye.Ushort4Norm="ushort4norm",ye.Short2Norm="short2norm",ye.Short4Norm="short4norm",ye.Half2="half2",ye.Half4="half4",ye.Float="float",ye.Float2="float2",ye.Float3="float3",ye.Float4="float4",ye.Uint="uint",ye.Uint2="uint2",ye.Uint3="uint3",ye.Uint4="uint4",ye.Int="int",ye.Int2="int2",ye.Int3="int3",ye.Int4="int4"})(pe=L.gB||(L.gB={}));var Ae;(function(ye){ye.All="all",ye.StencilOnly="stencil-only",ye.DepthOnly="depth-only"})(Ae=L.H7||(L.H7={}));var nt;(function(ye){ye.Error="error",ye.Warning="warning",ye.Info="info"})(nt=L.mj||(L.mj={}));var G;(function(ye){ye.Occlusion="occlusion"})(G=L.xL||(L.xL={}));var Fe;(function(ye){ye[ye.MapRead=1]="MapRead",ye[ye.MapWrite=2]="MapWrite",ye[ye.CopySrc=4]="CopySrc",ye[ye.CopyDst=8]="CopyDst",ye[ye.Index=16]="Index",ye[ye.Vertex=32]="Vertex",ye[ye.Uniform=64]="Uniform",ye[ye.Storage=128]="Storage",ye[ye.Indirect=256]="Indirect",ye[ye.QueryResolve=512]="QueryResolve"})(Fe=L.FB||(L.FB={}));var $e;(function(ye){ye[ye.Red=1]="Red",ye[ye.Green=2]="Green",ye[ye.Blue=4]="Blue",ye[ye.Alpha=8]="Alpha",ye[ye.All=15]="All"})($e=L.Yw||(L.Yw={}));var at;(function(ye){ye[ye.Vertex=1]="Vertex",ye[ye.Fragment=2]="Fragment",ye[ye.Compute=4]="Compute"})(at=L.$X||(L.$X={}));var Ft;(function(ye){ye[ye.CopySrc=1]="CopySrc",ye[ye.CopyDst=2]="CopyDst",ye[ye.Sampled=4]="Sampled",ye[ye.Storage=8]="Storage",ye[ye.OutputAttachment=16]="OutputAttachment"})(Ft=L.v2||(L.v2={}));var Hn;(function(ye){ye[ye.Read=1]="Read",ye[ye.Write=2]="Write"})(Hn=L.gc||(L.gc={}))},89550:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=j[0]+R[0],M[1]=j[1]+R[1],M}},62189:function(Ne){Ne.exports=L;function L(M,j){return M[0]=Math.ceil(j[0]),M[1]=Math.ceil(j[1]),M}},76057:function(Ne){Ne.exports=L;function L(M){var j=new Float32Array(2);return j[0]=M[0],j[1]=M[1],j}},3492:function(Ne){Ne.exports=L;function L(M,j){return M[0]=j[0],M[1]=j[1],M}},61589:function(Ne){Ne.exports=L;function L(){var M=new Float32Array(2);return M[0]=0,M[1]=0,M}},56439:function(Ne){Ne.exports=L;function L(M,j,R){var J=j[0]*R[1]-j[1]*R[0];return M[0]=M[1]=0,M[2]=J,M}},80278:function(Ne,L,M){Ne.exports=M(27953)},27953:function(Ne){Ne.exports=L;function L(M,j){var R=j[0]-M[0],J=j[1]-M[1];return Math.sqrt(R*R+J*J)}},49973:function(Ne,L,M){Ne.exports=M(6773)},6773:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=j[0]/R[0],M[1]=j[1]/R[1],M}},56601:function(Ne){Ne.exports=L;function L(M,j){return M[0]*j[0]+M[1]*j[1]}},89936:function(Ne){Ne.exports=1e-6},51232:function(Ne,L,M){Ne.exports=R;var j=M(89936);function R(J,z){var Z=J[0],te=J[1],Q=z[0],de=z[1];return Math.abs(Z-Q)<=j*Math.max(1,Math.abs(Z),Math.abs(Q))&&Math.abs(te-de)<=j*Math.max(1,Math.abs(te),Math.abs(de))}},39546:function(Ne){Ne.exports=L;function L(M,j){return M[0]===j[0]&&M[1]===j[1]}},67744:function(Ne){Ne.exports=L;function L(M,j){return M[0]=Math.floor(j[0]),M[1]=Math.floor(j[1]),M}},49002:function(Ne,L,M){Ne.exports=R;var j=M(61589)();function R(J,z,Z,te,Q,de){var oe,ie;for(z||(z=2),Z||(Z=0),te?ie=Math.min(te*z+Z,J.length):ie=J.length,oe=Z;oe<ie;oe+=z)j[0]=J[oe],j[1]=J[oe+1],Q(j,j,de),J[oe]=j[0],J[oe+1]=j[1];return J}},69878:function(Ne){Ne.exports=L;function L(M,j){var R=new Float32Array(2);return R[0]=M,R[1]=j,R}},32644:function(Ne,L,M){Ne.exports={EPSILON:M(89936),create:M(61589),clone:M(76057),fromValues:M(69878),copy:M(3492),set:M(68854),equals:M(51232),exactEquals:M(39546),add:M(89550),subtract:M(43650),sub:M(45222),multiply:M(79920),mul:M(23113),divide:M(6773),div:M(49973),inverse:M(83793),min:M(20676),max:M(97899),rotate:M(48677),floor:M(67744),ceil:M(62189),round:M(57074),scale:M(47838),scaleAndAdd:M(21066),distance:M(27953),dist:M(80278),squaredDistance:M(14290),sqrDist:M(79569),length:M(37781),len:M(8123),squaredLength:M(26791),sqrLen:M(1791),negate:M(90549),normalize:M(36820),dot:M(56601),cross:M(56439),lerp:M(20577),random:M(85773),transformMat2:M(904),transformMat2d:M(60736),transformMat3:M(60221),transformMat4:M(37674),forEach:M(49002),limit:M(82418)}},83793:function(Ne){Ne.exports=L;function L(M,j){return M[0]=1/j[0],M[1]=1/j[1],M}},8123:function(Ne,L,M){Ne.exports=M(37781)},37781:function(Ne){Ne.exports=L;function L(M){var j=M[0],R=M[1];return Math.sqrt(j*j+R*R)}},20577:function(Ne){Ne.exports=L;function L(M,j,R,J){var z=j[0],Z=j[1];return M[0]=z+J*(R[0]-z),M[1]=Z+J*(R[1]-Z),M}},82418:function(Ne){Ne.exports=L;function L(M,j,R){var J=j[0]*j[0]+j[1]*j[1];if(J>R*R){var z=Math.sqrt(J);M[0]=j[0]/z*R,M[1]=j[1]/z*R}else M[0]=j[0],M[1]=j[1];return M}},97899:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=Math.max(j[0],R[0]),M[1]=Math.max(j[1],R[1]),M}},20676:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=Math.min(j[0],R[0]),M[1]=Math.min(j[1],R[1]),M}},23113:function(Ne,L,M){Ne.exports=M(79920)},79920:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=j[0]*R[0],M[1]=j[1]*R[1],M}},90549:function(Ne){Ne.exports=L;function L(M,j){return M[0]=-j[0],M[1]=-j[1],M}},36820:function(Ne){Ne.exports=L;function L(M,j){var R=j[0],J=j[1],z=R*R+J*J;return z>0&&(z=1/Math.sqrt(z),M[0]=j[0]*z,M[1]=j[1]*z),M}},85773:function(Ne){Ne.exports=L;function L(M,j){j=j||1;var R=Math.random()*2*Math.PI;return M[0]=Math.cos(R)*j,M[1]=Math.sin(R)*j,M}},48677:function(Ne){Ne.exports=L;function L(M,j,R){var J=Math.cos(R),z=Math.sin(R),Z=j[0],te=j[1];return M[0]=Z*J-te*z,M[1]=Z*z+te*J,M}},57074:function(Ne){Ne.exports=L;function L(M,j){return M[0]=Math.round(j[0]),M[1]=Math.round(j[1]),M}},47838:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=j[0]*R,M[1]=j[1]*R,M}},21066:function(Ne){Ne.exports=L;function L(M,j,R,J){return M[0]=j[0]+R[0]*J,M[1]=j[1]+R[1]*J,M}},68854:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=j,M[1]=R,M}},79569:function(Ne,L,M){Ne.exports=M(14290)},1791:function(Ne,L,M){Ne.exports=M(26791)},14290:function(Ne){Ne.exports=L;function L(M,j){var R=j[0]-M[0],J=j[1]-M[1];return R*R+J*J}},26791:function(Ne){Ne.exports=L;function L(M){var j=M[0],R=M[1];return j*j+R*R}},45222:function(Ne,L,M){Ne.exports=M(43650)},43650:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=j[0]-R[0],M[1]=j[1]-R[1],M}},904:function(Ne){Ne.exports=L;function L(M,j,R){var J=j[0],z=j[1];return M[0]=R[0]*J+R[2]*z,M[1]=R[1]*J+R[3]*z,M}},60736:function(Ne){Ne.exports=L;function L(M,j,R){var J=j[0],z=j[1];return M[0]=R[0]*J+R[2]*z+R[4],M[1]=R[1]*J+R[3]*z+R[5],M}},60221:function(Ne){Ne.exports=L;function L(M,j,R){var J=j[0],z=j[1];return M[0]=R[0]*J+R[3]*z+R[6],M[1]=R[1]*J+R[4]*z+R[7],M}},37674:function(Ne){Ne.exports=L;function L(M,j,R){var J=j[0],z=j[1];return M[0]=R[0]*J+R[4]*z+R[12],M[1]=R[1]*J+R[5]*z+R[13],M}},7375:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M=Symbol.for("INJECTION");function j(te,Q,de,oe){function ie(){return oe&&!Reflect.hasMetadata(M,this,Q)&&Reflect.defineMetadata(M,de(),this,Q),Reflect.hasMetadata(M,this,Q)?Reflect.getMetadata(M,this,Q):de()}function re(he){Reflect.defineMetadata(M,he,this,Q)}Object.defineProperty(te,Q,{configurable:!0,enumerable:!0,get:ie,set:re})}function R(te,Q){return function(de){return function(oe,ie){var re=function(){return te.get(de)};j(oe,ie,re,Q)}}}L.makePropertyInjectDecorator=R;function J(te,Q){return function(de,oe){return function(ie,re){var he=function(){return te.getNamed(de,oe)};j(ie,re,he,Q)}}}L.makePropertyInjectNamedDecorator=J;function z(te,Q){return function(de,oe,ie){return function(re,he){var De=function(){return te.getTagged(de,oe,ie)};j(re,he,De,Q)}}}L.makePropertyInjectTaggedDecorator=z;function Z(te,Q){return function(de){return function(oe,ie){var re=function(){return te.getAll(de)};j(oe,ie,re,Q)}}}L.makePropertyMultiInjectDecorator=Z},84879:function(Ne,L,M){"use strict";var j;j={value:!0};var R=M(7375);function J(z,Z){Z===void 0&&(Z=!0);var te=R.makePropertyInjectDecorator(z,Z),Q=R.makePropertyInjectNamedDecorator(z,Z),de=R.makePropertyInjectTaggedDecorator(z,Z),oe=R.makePropertyMultiInjectDecorator(z,Z);return{lazyInject:te,lazyInjectNamed:Q,lazyInjectTagged:de,lazyMultiInject:oe}}L.Z=J},99934:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.tagProperty=L.tagParameter=L.decorate=void 0;var j=M(16674),R=M(6867);function J(oe,ie,re,he){var De=R.TAGGED;Z(De,oe,ie,he,re)}L.tagParameter=J;function z(oe,ie,re){var he=R.TAGGED_PROP;Z(he,oe.constructor,ie,re)}L.tagProperty=z;function Z(oe,ie,re,he,De){var ue={},xe=typeof De=="number",ae=De!==void 0&&xe?De.toString():re;if(xe&&re!==void 0)throw new Error(j.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(oe,ie)&&(ue=Reflect.getMetadata(oe,ie));var ce=ue[ae];if(!Array.isArray(ce))ce=[];else for(var fe=0,Ee=ce;fe<Ee.length;fe++){var pe=Ee[fe];if(pe.key===he.key)throw new Error(j.DUPLICATED_METADATA+" "+pe.key.toString())}ce.push(he),ue[ae]=ce,Reflect.defineMetadata(oe,ue,ie)}function te(oe,ie){Reflect.decorate(oe,ie)}function Q(oe,ie){return function(re,he){ie(re,he,oe)}}function de(oe,ie,re){typeof re=="number"?te([Q(re,oe)],ie):typeof re=="string"?Reflect.decorate([oe],ie,re):te([oe],ie)}L.decorate=de},5744:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.inject=L.LazyServiceIdentifer=void 0;var j=M(16674),R=M(6867),J=M(47738),z=M(99934),Z=function(){function Q(de){this._cb=de}return Q.prototype.unwrap=function(){return this._cb()},Q}();L.LazyServiceIdentifer=Z;function te(Q){return function(de,oe,ie){if(Q===void 0)throw new Error(j.UNDEFINED_INJECT_ANNOTATION(de.name));var re=new J.Metadata(R.INJECT_TAG,Q);typeof ie=="number"?z.tagParameter(de,oe,ie,re):z.tagProperty(de,oe,re)}}L.inject=te},64315:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.injectable=void 0;var j=M(16674),R=M(6867);function J(){return function(z){if(Reflect.hasOwnMetadata(R.PARAM_TYPES,z))throw new Error(j.DUPLICATED_INJECTABLE_DECORATOR);var Z=Reflect.getMetadata(R.DESIGN_PARAM_TYPES,z)||[];return Reflect.defineMetadata(R.PARAM_TYPES,Z,z),z}}L.injectable=J},71693:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.multiInject=void 0;var j=M(6867),R=M(47738),J=M(99934);function z(Z){return function(te,Q,de){var oe=new R.Metadata(j.MULTI_INJECT_TAG,Z);typeof de=="number"?J.tagParameter(te,Q,de,oe):J.tagProperty(te,Q,oe)}}L.multiInject=z},38085:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.named=void 0;var j=M(6867),R=M(47738),J=M(99934);function z(Z){return function(te,Q,de){var oe=new R.Metadata(j.NAMED_TAG,Z);typeof de=="number"?J.tagParameter(te,Q,de,oe):J.tagProperty(te,Q,oe)}}L.named=z},6515:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.optional=void 0;var j=M(6867),R=M(47738),J=M(99934);function z(){return function(Z,te,Q){var de=new R.Metadata(j.OPTIONAL_TAG,!0);typeof Q=="number"?J.tagParameter(Z,te,Q,de):J.tagProperty(Z,te,de)}}L.optional=z},7014:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.postConstruct=void 0;var j=M(16674),R=M(6867),J=M(47738);function z(){return function(Z,te,Q){var de=new J.Metadata(R.POST_CONSTRUCT,te);if(Reflect.hasOwnMetadata(R.POST_CONSTRUCT,Z.constructor))throw new Error(j.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(R.POST_CONSTRUCT,de,Z.constructor)}}L.postConstruct=z},32052:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.tagged=void 0;var j=M(47738),R=M(99934);function J(z,Z){return function(te,Q,de){var oe=new j.Metadata(z,Z);typeof de=="number"?R.tagParameter(te,Q,de,oe):R.tagProperty(te,Q,oe)}}L.tagged=J},55638:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.targetName=void 0;var j=M(6867),R=M(47738),J=M(99934);function z(Z){return function(te,Q,de){var oe=new R.Metadata(j.NAME_TAG,Z);J.tagParameter(te,Q,de,oe)}}L.targetName=z},86757:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.unmanaged=void 0;var j=M(6867),R=M(47738),J=M(99934);function z(){return function(Z,te,Q){var de=new R.Metadata(j.UNMANAGED_TAG,!0);J.tagParameter(Z,te,Q,de)}}L.unmanaged=z},44290:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Binding=void 0;var j=M(28421),R=M(37791),J=function(){function z(Z,te){this.id=R.id(),this.activated=!1,this.serviceIdentifier=Z,this.scope=te,this.type=j.BindingTypeEnum.Invalid,this.constraint=function(Q){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return z.prototype.clone=function(){var Z=new z(this.serviceIdentifier,this.scope);return Z.activated=Z.scope===j.BindingScopeEnum.Singleton?this.activated:!1,Z.implementationType=this.implementationType,Z.dynamicValue=this.dynamicValue,Z.scope=this.scope,Z.type=this.type,Z.factory=this.factory,Z.provider=this.provider,Z.constraint=this.constraint,Z.onActivation=this.onActivation,Z.cache=this.cache,Z},z}();L.Binding=J},23184:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingCount=void 0;var M={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};L.BindingCount=M},16674:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.STACK_OVERFLOW=L.CIRCULAR_DEPENDENCY_IN_FACTORY=L.POST_CONSTRUCT_ERROR=L.MULTIPLE_POST_CONSTRUCT_METHODS=L.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=L.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=L.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=L.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=L.ARGUMENTS_LENGTH_MISMATCH=L.INVALID_DECORATOR_OPERATION=L.INVALID_TO_SELF_VALUE=L.INVALID_FUNCTION_BINDING=L.INVALID_MIDDLEWARE_RETURN=L.NO_MORE_SNAPSHOTS_AVAILABLE=L.INVALID_BINDING_TYPE=L.NOT_IMPLEMENTED=L.CIRCULAR_DEPENDENCY=L.UNDEFINED_INJECT_ANNOTATION=L.MISSING_INJECT_ANNOTATION=L.MISSING_INJECTABLE_ANNOTATION=L.NOT_REGISTERED=L.CANNOT_UNBIND=L.AMBIGUOUS_MATCH=L.KEY_NOT_FOUND=L.NULL_ARGUMENT=L.DUPLICATED_METADATA=L.DUPLICATED_INJECTABLE_DECORATOR=void 0,L.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",L.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",L.NULL_ARGUMENT="NULL argument",L.KEY_NOT_FOUND="Key Not Found",L.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",L.CANNOT_UNBIND="Could not unbind serviceIdentifier:",L.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",L.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",L.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var M=function(z){return"@inject called with undefined this could mean that the class "+z+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};L.UNDEFINED_INJECT_ANNOTATION=M,L.CIRCULAR_DEPENDENCY="Circular dependency found:",L.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",L.INVALID_BINDING_TYPE="Invalid binding type:",L.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",L.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",L.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",L.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",L.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var j=function(){for(var z=[],Z=0;Z<arguments.length;Z++)z[Z]=arguments[Z];return"The number of constructor arguments in the derived class "+(z[0]+" must be >= than the number of constructor arguments of its base class.")};L.ARGUMENTS_LENGTH_MISMATCH=j,L.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",L.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",L.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",L.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",L.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var R=function(){for(var z=[],Z=0;Z<arguments.length;Z++)z[Z]=arguments[Z];return"@postConstruct error in class "+z[0]+": "+z[1]};L.POST_CONSTRUCT_ERROR=R;var J=function(){for(var z=[],Z=0;Z<arguments.length;Z++)z[Z]=arguments[Z];return"It looks like there is a circular dependency "+("in one of the '"+z[0]+"' bindings. Please investigate bindings with")+("service identifier '"+z[1]+"'.")};L.CIRCULAR_DEPENDENCY_IN_FACTORY=J,L.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.TargetTypeEnum=L.BindingTypeEnum=L.BindingScopeEnum=void 0;var M={Request:"Request",Singleton:"Singleton",Transient:"Transient"};L.BindingScopeEnum=M;var j={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};L.BindingTypeEnum=j;var R={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};L.TargetTypeEnum=R},6867:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.NON_CUSTOM_TAG_KEYS=L.POST_CONSTRUCT=L.DESIGN_PARAM_TYPES=L.PARAM_TYPES=L.TAGGED_PROP=L.TAGGED=L.MULTI_INJECT_TAG=L.INJECT_TAG=L.OPTIONAL_TAG=L.UNMANAGED_TAG=L.NAME_TAG=L.NAMED_TAG=void 0,L.NAMED_TAG="named",L.NAME_TAG="name",L.UNMANAGED_TAG="unmanaged",L.OPTIONAL_TAG="optional",L.INJECT_TAG="inject",L.MULTI_INJECT_TAG="multi_inject",L.TAGGED="inversify:tagged",L.TAGGED_PROP="inversify:tagged_props",L.PARAM_TYPES="inversify:paramtypes",L.DESIGN_PARAM_TYPES="design:paramtypes",L.POST_CONSTRUCT="post_construct";function M(){return[L.INJECT_TAG,L.MULTI_INJECT_TAG,L.NAME_TAG,L.UNMANAGED_TAG,L.NAMED_TAG,L.OPTIONAL_TAG]}L.NON_CUSTOM_TAG_KEYS=M()},51389:function(Ne,L,M){"use strict";var j=this&&this.__awaiter||function(ce,fe,Ee,pe){function Ae(nt){return nt instanceof Ee?nt:new Ee(function(G){G(nt)})}return new(Ee||(Ee=Promise))(function(nt,G){function Fe(Ft){try{at(pe.next(Ft))}catch(Hn){G(Hn)}}function $e(Ft){try{at(pe.throw(Ft))}catch(Hn){G(Hn)}}function at(Ft){Ft.done?nt(Ft.value):Ae(Ft.value).then(Fe,$e)}at((pe=pe.apply(ce,fe||[])).next())})},R=this&&this.__generator||function(ce,fe){var Ee={label:0,sent:function(){if(nt[0]&1)throw nt[1];return nt[1]},trys:[],ops:[]},pe,Ae,nt,G;return G={next:Fe(0),throw:Fe(1),return:Fe(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function Fe(at){return function(Ft){return $e([at,Ft])}}function $e(at){if(pe)throw new TypeError("Generator is already executing.");for(;Ee;)try{if(pe=1,Ae&&(nt=at[0]&2?Ae.return:at[0]?Ae.throw||((nt=Ae.return)&&nt.call(Ae),0):Ae.next)&&!(nt=nt.call(Ae,at[1])).done)return nt;switch(Ae=0,nt&&(at=[at[0]&2,nt.value]),at[0]){case 0:case 1:nt=at;break;case 4:return Ee.label++,{value:at[1],done:!1};case 5:Ee.label++,Ae=at[1],at=[0];continue;case 7:at=Ee.ops.pop(),Ee.trys.pop();continue;default:if(nt=Ee.trys,!(nt=nt.length>0&&nt[nt.length-1])&&(at[0]===6||at[0]===2)){Ee=0;continue}if(at[0]===3&&(!nt||at[1]>nt[0]&&at[1]<nt[3])){Ee.label=at[1];break}if(at[0]===6&&Ee.label<nt[1]){Ee.label=nt[1],nt=at;break}if(nt&&Ee.label<nt[2]){Ee.label=nt[2],Ee.ops.push(at);break}nt[2]&&Ee.ops.pop(),Ee.trys.pop();continue}at=fe.call(ce,Ee)}catch(Ft){at=[6,Ft],Ae=0}finally{pe=nt=0}if(at[0]&5)throw at[1];return{value:at[0]?at[1]:void 0,done:!0}}},J=this&&this.__spreadArray||function(ce,fe){for(var Ee=0,pe=fe.length,Ae=ce.length;Ee<pe;Ee++,Ae++)ce[Ae]=fe[Ee];return ce};Object.defineProperty(L,"__esModule",{value:!0}),L.Container=void 0;var z=M(44290),Z=M(16674),te=M(28421),Q=M(6867),de=M(51377),oe=M(86311),ie=M(31927),re=M(51860),he=M(37791),De=M(55800),ue=M(85700),xe=M(80175),ae=function(){function ce(fe){this._appliedMiddleware=[];var Ee=fe||{};if(typeof Ee!="object")throw new Error(""+Z.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(Ee.defaultScope===void 0)Ee.defaultScope=te.BindingScopeEnum.Transient;else if(Ee.defaultScope!==te.BindingScopeEnum.Singleton&&Ee.defaultScope!==te.BindingScopeEnum.Transient&&Ee.defaultScope!==te.BindingScopeEnum.Request)throw new Error(""+Z.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(Ee.autoBindInjectable===void 0)Ee.autoBindInjectable=!1;else if(typeof Ee.autoBindInjectable!="boolean")throw new Error(""+Z.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(Ee.skipBaseClassChecks===void 0)Ee.skipBaseClassChecks=!1;else if(typeof Ee.skipBaseClassChecks!="boolean")throw new Error(""+Z.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:Ee.autoBindInjectable,defaultScope:Ee.defaultScope,skipBaseClassChecks:Ee.skipBaseClassChecks},this.id=he.id(),this._bindingDictionary=new xe.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new de.MetadataReader}return ce.merge=function(fe,Ee){for(var pe=[],Ae=2;Ae<arguments.length;Ae++)pe[Ae-2]=arguments[Ae];var nt=new ce,G=J([fe,Ee],pe).map(function(at){return oe.getBindingDictionary(at)}),Fe=oe.getBindingDictionary(nt);function $e(at,Ft){at.traverse(function(Hn,ye){ye.forEach(function(wt){Ft.add(wt.serviceIdentifier,wt.clone())})})}return G.forEach(function(at){$e(at,Fe)}),nt},ce.prototype.load=function(){for(var fe=[],Ee=0;Ee<arguments.length;Ee++)fe[Ee]=arguments[Ee];for(var pe=this._getContainerModuleHelpersFactory(),Ae=0,nt=fe;Ae<nt.length;Ae++){var G=nt[Ae],Fe=pe(G.id);G.registry(Fe.bindFunction,Fe.unbindFunction,Fe.isboundFunction,Fe.rebindFunction)}},ce.prototype.loadAsync=function(){for(var fe=[],Ee=0;Ee<arguments.length;Ee++)fe[Ee]=arguments[Ee];return j(this,void 0,void 0,function(){var pe,Ae,nt,G,Fe;return R(this,function($e){switch($e.label){case 0:pe=this._getContainerModuleHelpersFactory(),Ae=0,nt=fe,$e.label=1;case 1:return Ae<nt.length?(G=nt[Ae],Fe=pe(G.id),[4,G.registry(Fe.bindFunction,Fe.unbindFunction,Fe.isboundFunction,Fe.rebindFunction)]):[3,4];case 2:$e.sent(),$e.label=3;case 3:return Ae++,[3,1];case 4:return[2]}})})},ce.prototype.unload=function(){for(var fe=this,Ee=[],pe=0;pe<arguments.length;pe++)Ee[pe]=arguments[pe];var Ae=function(nt){return function(G){return G.moduleId===nt}};Ee.forEach(function(nt){var G=Ae(nt.id);fe._bindingDictionary.removeByCondition(G)})},ce.prototype.bind=function(fe){var Ee=this.options.defaultScope||te.BindingScopeEnum.Transient,pe=new z.Binding(fe,Ee);return this._bindingDictionary.add(fe,pe),new re.BindingToSyntax(pe)},ce.prototype.rebind=function(fe){return this.unbind(fe),this.bind(fe)},ce.prototype.unbind=function(fe){try{this._bindingDictionary.remove(fe)}catch{throw new Error(Z.CANNOT_UNBIND+" "+De.getServiceIdentifierAsString(fe))}},ce.prototype.unbindAll=function(){this._bindingDictionary=new xe.Lookup},ce.prototype.isBound=function(fe){var Ee=this._bindingDictionary.hasKey(fe);return!Ee&&this.parent&&(Ee=this.parent.isBound(fe)),Ee},ce.prototype.isBoundNamed=function(fe,Ee){return this.isBoundTagged(fe,Q.NAMED_TAG,Ee)},ce.prototype.isBoundTagged=function(fe,Ee,pe){var Ae=!1;if(this._bindingDictionary.hasKey(fe)){var nt=this._bindingDictionary.get(fe),G=oe.createMockRequest(this,fe,Ee,pe);Ae=nt.some(function(Fe){return Fe.constraint(G)})}return!Ae&&this.parent&&(Ae=this.parent.isBoundTagged(fe,Ee,pe)),Ae},ce.prototype.snapshot=function(){this._snapshots.push(ue.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},ce.prototype.restore=function(){var fe=this._snapshots.pop();if(fe===void 0)throw new Error(Z.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=fe.bindings,this._middleware=fe.middleware},ce.prototype.createChild=function(fe){var Ee=new ce(fe||this.options);return Ee.parent=this,Ee},ce.prototype.applyMiddleware=function(){for(var fe=[],Ee=0;Ee<arguments.length;Ee++)fe[Ee]=arguments[Ee];this._appliedMiddleware=this._appliedMiddleware.concat(fe);var pe=this._middleware?this._middleware:this._planAndResolve();this._middleware=fe.reduce(function(Ae,nt){return nt(Ae)},pe)},ce.prototype.applyCustomMetadataReader=function(fe){this._metadataReader=fe},ce.prototype.get=function(fe){return this._get(!1,!1,te.TargetTypeEnum.Variable,fe)},ce.prototype.getTagged=function(fe,Ee,pe){return this._get(!1,!1,te.TargetTypeEnum.Variable,fe,Ee,pe)},ce.prototype.getNamed=function(fe,Ee){return this.getTagged(fe,Q.NAMED_TAG,Ee)},ce.prototype.getAll=function(fe){return this._get(!0,!0,te.TargetTypeEnum.Variable,fe)},ce.prototype.getAllTagged=function(fe,Ee,pe){return this._get(!1,!0,te.TargetTypeEnum.Variable,fe,Ee,pe)},ce.prototype.getAllNamed=function(fe,Ee){return this.getAllTagged(fe,Q.NAMED_TAG,Ee)},ce.prototype.resolve=function(fe){var Ee=this.createChild();return Ee.bind(fe).toSelf(),this._appliedMiddleware.forEach(function(pe){Ee.applyMiddleware(pe)}),Ee.get(fe)},ce.prototype._getContainerModuleHelpersFactory=function(){var fe=this,Ee=function(Fe,$e){Fe._binding.moduleId=$e},pe=function(Fe){return function($e){var at=fe.bind.bind(fe),Ft=at($e);return Ee(Ft,Fe),Ft}},Ae=function(Fe){return function($e){var at=fe.unbind.bind(fe);at($e)}},nt=function(Fe){return function($e){var at=fe.isBound.bind(fe);return at($e)}},G=function(Fe){return function($e){var at=fe.rebind.bind(fe),Ft=at($e);return Ee(Ft,Fe),Ft}};return function(Fe){return{bindFunction:pe(Fe),isboundFunction:nt(Fe),rebindFunction:G(Fe),unbindFunction:Ae(Fe)}}},ce.prototype._get=function(fe,Ee,pe,Ae,nt,G){var Fe=null,$e={avoidConstraints:fe,contextInterceptor:function(at){return at},isMultiInject:Ee,key:nt,serviceIdentifier:Ae,targetType:pe,value:G};if(this._middleware){if(Fe=this._middleware($e),Fe==null)throw new Error(Z.INVALID_MIDDLEWARE_RETURN)}else Fe=this._planAndResolve()($e);return Fe},ce.prototype._planAndResolve=function(){var fe=this;return function(Ee){var pe=oe.plan(fe._metadataReader,fe,Ee.isMultiInject,Ee.targetType,Ee.serviceIdentifier,Ee.key,Ee.value,Ee.avoidConstraints);pe=Ee.contextInterceptor(pe);var Ae=ie.resolve(pe);return Ae}},ce}();L.Container=ae},33244:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AsyncContainerModule=L.ContainerModule=void 0;var j=M(37791),R=function(){function z(Z){this.id=j.id(),this.registry=Z}return z}();L.ContainerModule=R;var J=function(){function z(Z){this.id=j.id(),this.registry=Z}return z}();L.AsyncContainerModule=J},85700:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ContainerSnapshot=void 0;var M=function(){function j(){}return j.of=function(R,J){var z=new j;return z.bindings=R,z.middleware=J,z},j}();L.ContainerSnapshot=M},80175:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Lookup=void 0;var j=M(16674),R=function(){function J(){this._map=new Map}return J.prototype.getMap=function(){return this._map},J.prototype.add=function(z,Z){if(z==null)throw new Error(j.NULL_ARGUMENT);if(Z==null)throw new Error(j.NULL_ARGUMENT);var te=this._map.get(z);te!==void 0?(te.push(Z),this._map.set(z,te)):this._map.set(z,[Z])},J.prototype.get=function(z){if(z==null)throw new Error(j.NULL_ARGUMENT);var Z=this._map.get(z);if(Z!==void 0)return Z;throw new Error(j.KEY_NOT_FOUND)},J.prototype.remove=function(z){if(z==null)throw new Error(j.NULL_ARGUMENT);if(!this._map.delete(z))throw new Error(j.KEY_NOT_FOUND)},J.prototype.removeByCondition=function(z){var Z=this;this._map.forEach(function(te,Q){var de=te.filter(function(oe){return!z(oe)});de.length>0?Z._map.set(Q,de):Z._map.delete(Q)})},J.prototype.hasKey=function(z){if(z==null)throw new Error(j.NULL_ARGUMENT);return this._map.has(z)},J.prototype.clone=function(){var z=new J;return this._map.forEach(function(Z,te){Z.forEach(function(Q){return z.add(te,Q.clone())})}),z},J.prototype.traverse=function(z){this._map.forEach(function(Z,te){z(te,Z)})},J}();L.Lookup=R},86700:function(Ne,L,M){"use strict";var j;j={value:!0},j=j=j=j=j=j=L.GW=j=j=L.zY=j=j=L.NT=L.jt=j=L.f3=L.t6=j=L.b2=j=j=j=j=j=L.W2=j=void 0;var R=M(6867);j=R;var J=M(51389);Object.defineProperty(L,"W2",{enumerable:!0,get:function(){return J.Container}});var z=M(28421);j={enumerable:!0,get:function(){return z.BindingScopeEnum}},j={enumerable:!0,get:function(){return z.BindingTypeEnum}},j={enumerable:!0,get:function(){return z.TargetTypeEnum}};var Z=M(33244);j={enumerable:!0,get:function(){return Z.AsyncContainerModule}},j={enumerable:!0,get:function(){return Z.ContainerModule}};var te=M(64315);Object.defineProperty(L,"b2",{enumerable:!0,get:function(){return te.injectable}});var Q=M(32052);j={enumerable:!0,get:function(){return Q.tagged}};var de=M(38085);Object.defineProperty(L,"t6",{enumerable:!0,get:function(){return de.named}});var oe=M(5744);Object.defineProperty(L,"f3",{enumerable:!0,get:function(){return oe.inject}}),j={enumerable:!0,get:function(){return oe.LazyServiceIdentifer}};var ie=M(6515);Object.defineProperty(L,"jt",{enumerable:!0,get:function(){return ie.optional}});var re=M(86757);Object.defineProperty(L,"NT",{enumerable:!0,get:function(){return re.unmanaged}});var he=M(71693);j={enumerable:!0,get:function(){return he.multiInject}};var De=M(55638);j={enumerable:!0,get:function(){return De.targetName}};var ue=M(7014);Object.defineProperty(L,"zY",{enumerable:!0,get:function(){return ue.postConstruct}});var xe=M(51377);j={enumerable:!0,get:function(){return xe.MetadataReader}};var ae=M(37791);j={enumerable:!0,get:function(){return ae.id}};var ce=M(99934);Object.defineProperty(L,"GW",{enumerable:!0,get:function(){return ce.decorate}});var fe=M(80758);j={enumerable:!0,get:function(){return fe.traverseAncerstors}},j={enumerable:!0,get:function(){return fe.taggedConstraint}},j={enumerable:!0,get:function(){return fe.namedConstraint}},j={enumerable:!0,get:function(){return fe.typeConstraint}};var Ee=M(55800);j={enumerable:!0,get:function(){return Ee.getServiceIdentifierAsString}};var pe=M(70600);j={enumerable:!0,get:function(){return pe.multiBindToService}}},95228:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Context=void 0;var j=M(37791),R=function(){function J(z){this.id=j.id(),this.container=z}return J.prototype.addPlan=function(z){this.plan=z},J.prototype.setCurrentRequest=function(z){this.currentRequest=z},J}();L.Context=R},47738:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Metadata=void 0;var j=M(6867),R=function(){function J(z,Z){this.key=z,this.value=Z}return J.prototype.toString=function(){return this.key===j.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},J}();L.Metadata=R},51377:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.MetadataReader=void 0;var j=M(6867),R=function(){function J(){}return J.prototype.getConstructorMetadata=function(z){var Z=Reflect.getMetadata(j.PARAM_TYPES,z),te=Reflect.getMetadata(j.TAGGED,z);return{compilerGeneratedMetadata:Z,userGeneratedMetadata:te||{}}},J.prototype.getPropertiesMetadata=function(z){var Z=Reflect.getMetadata(j.TAGGED_PROP,z)||[];return Z},J}();L.MetadataReader=R},55314:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Plan=void 0;var M=function(){function j(R,J){this.parentContext=R,this.rootRequest=J}return j}();L.Plan=M},86311:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.getBindingDictionary=L.createMockRequest=L.plan=void 0;var j=M(23184),R=M(16674),J=M(28421),z=M(6867),Z=M(85265),te=M(55800),Q=M(95228),de=M(47738),oe=M(55314),ie=M(6e3),re=M(6748),he=M(18924);function De(Ae){return Ae._bindingDictionary}L.getBindingDictionary=De;function ue(Ae,nt,G,Fe,$e,at){var Ft=Ae?z.MULTI_INJECT_TAG:z.INJECT_TAG,Hn=new de.Metadata(Ft,G),ye=new he.Target(nt,Fe,G,Hn);if($e!==void 0){var wt=new de.Metadata($e,at);ye.metadata.push(wt)}return ye}function xe(Ae,nt,G,Fe,$e){var at=fe(G.container,$e.serviceIdentifier),Ft=[];return at.length===j.BindingCount.NoBindingsAvailable&&G.container.options.autoBindInjectable&&typeof $e.serviceIdentifier=="function"&&Ae.getConstructorMetadata($e.serviceIdentifier).compilerGeneratedMetadata&&(G.container.bind($e.serviceIdentifier).toSelf(),at=fe(G.container,$e.serviceIdentifier)),nt?Ft=at:Ft=at.filter(function(Hn){var ye=new re.Request(Hn.serviceIdentifier,G,Fe,Hn,$e);return Hn.constraint(ye)}),ae($e.serviceIdentifier,Ft,$e,G.container),Ft}function ae(Ae,nt,G,Fe){switch(nt.length){case j.BindingCount.NoBindingsAvailable:if(G.isOptional())return nt;var $e=te.getServiceIdentifierAsString(Ae),at=R.NOT_REGISTERED;throw at+=te.listMetadataForTarget($e,G),at+=te.listRegisteredBindingsForServiceIdentifier(Fe,$e,fe),new Error(at);case j.BindingCount.OnlyOneBindingAvailable:if(!G.isArray())return nt;case j.BindingCount.MultipleBindingsAvailable:default:if(G.isArray())return nt;var $e=te.getServiceIdentifierAsString(Ae),at=R.AMBIGUOUS_MATCH+" "+$e;throw at+=te.listRegisteredBindingsForServiceIdentifier(Fe,$e,fe),new Error(at)}}function ce(Ae,nt,G,Fe,$e,at){var Ft,Hn;if($e===null){Ft=xe(Ae,nt,Fe,null,at),Hn=new re.Request(G,Fe,null,Ft,at);var ye=new oe.Plan(Fe,Hn);Fe.addPlan(ye)}else Ft=xe(Ae,nt,Fe,$e,at),Hn=$e.addChildRequest(at.serviceIdentifier,Ft,at);Ft.forEach(function(wt){var Mn=null;if(at.isArray())Mn=Hn.addChildRequest(wt.serviceIdentifier,wt,at);else{if(wt.cache)return;Mn=Hn}if(wt.type===J.BindingTypeEnum.Instance&&wt.implementationType!==null){var jt=ie.getDependencies(Ae,wt.implementationType);if(!Fe.container.options.skipBaseClassChecks){var En=ie.getBaseClassDependencyCount(Ae,wt.implementationType);if(jt.length<En){var Yn=R.ARGUMENTS_LENGTH_MISMATCH(ie.getFunctionName(wt.implementationType));throw new Error(Yn)}}jt.forEach(function(pn){ce(Ae,!1,pn.serviceIdentifier,Fe,Mn,pn)})}})}function fe(Ae,nt){var G=[],Fe=De(Ae);return Fe.hasKey(nt)?G=Fe.get(nt):Ae.parent!==null&&(G=fe(Ae.parent,nt)),G}function Ee(Ae,nt,G,Fe,$e,at,Ft,Hn){Hn===void 0&&(Hn=!1);var ye=new Q.Context(nt),wt=ue(G,Fe,$e,"",at,Ft);try{return ce(Ae,Hn,$e,ye,null,wt),ye}catch(Mn){throw Z.isStackOverflowExeption(Mn)&&ye.plan&&te.circularDependencyToException(ye.plan.rootRequest),Mn}}L.plan=Ee;function pe(Ae,nt,G,Fe){var $e=new he.Target(J.TargetTypeEnum.Variable,"",nt,new de.Metadata(G,Fe)),at=new Q.Context(Ae),Ft=new re.Request(nt,at,null,[],$e);return Ft}L.createMockRequest=pe},88460:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.QueryableString=void 0;var M=function(){function j(R){this.str=R}return j.prototype.startsWith=function(R){return this.str.indexOf(R)===0},j.prototype.endsWith=function(R){var J="",z=R.split("").reverse().join("");return J=this.str.split("").reverse().join(""),this.startsWith.call({str:J},z)},j.prototype.contains=function(R){return this.str.indexOf(R)!==-1},j.prototype.equals=function(R){return this.str===R},j.prototype.value=function(){return this.str},j}();L.QueryableString=M},6e3:function(Ne,L,M){"use strict";var j=this&&this.__spreadArray||function(xe,ae){for(var ce=0,fe=ae.length,Ee=xe.length;ce<fe;ce++,Ee++)xe[Ee]=ae[ce];return xe};Object.defineProperty(L,"__esModule",{value:!0}),L.getFunctionName=L.getBaseClassDependencyCount=L.getDependencies=void 0;var R=M(5744),J=M(16674),z=M(28421),Z=M(6867),te=M(55800);Object.defineProperty(L,"getFunctionName",{enumerable:!0,get:function(){return te.getFunctionName}});var Q=M(18924);function de(xe,ae){var ce=te.getFunctionName(ae),fe=oe(xe,ce,ae,!1);return fe}L.getDependencies=de;function oe(xe,ae,ce,fe){var Ee=xe.getConstructorMetadata(ce),pe=Ee.compilerGeneratedMetadata;if(pe===void 0){var Ae=J.MISSING_INJECTABLE_ANNOTATION+" "+ae+".";throw new Error(Ae)}var nt=Ee.userGeneratedMetadata,G=Object.keys(nt),Fe=ce.length===0&&G.length>0,$e=G.length>ce.length,at=Fe||$e?G.length:ce.length,Ft=re(fe,ae,pe,nt,at),Hn=he(xe,ce),ye=j(j([],Ft),Hn);return ye}function ie(xe,ae,ce,fe,Ee){var pe=Ee[xe.toString()]||[],Ae=ue(pe),nt=Ae.unmanaged!==!0,G=fe[xe],Fe=Ae.inject||Ae.multiInject;if(G=Fe||G,G instanceof R.LazyServiceIdentifer&&(G=G.unwrap()),nt){var $e=G===Object,at=G===Function,Ft=G===void 0,Hn=$e||at||Ft;if(!ae&&Hn){var ye=J.MISSING_INJECT_ANNOTATION+" argument "+xe+" in class "+ce+".";throw new Error(ye)}var wt=new Q.Target(z.TargetTypeEnum.ConstructorArgument,Ae.targetName,G);return wt.metadata=pe,wt}return null}function re(xe,ae,ce,fe,Ee){for(var pe=[],Ae=0;Ae<Ee;Ae++){var nt=Ae,G=ie(nt,xe,ae,ce,fe);G!==null&&pe.push(G)}return pe}function he(xe,ae){for(var ce=xe.getPropertiesMetadata(ae),fe=[],Ee=Object.keys(ce),pe=0,Ae=Ee;pe<Ae.length;pe++){var nt=Ae[pe],G=ce[nt],Fe=ue(ce[nt]),$e=Fe.targetName||nt,at=Fe.inject||Fe.multiInject,Ft=new Q.Target(z.TargetTypeEnum.ClassProperty,$e,at);Ft.metadata=G,fe.push(Ft)}var Hn=Object.getPrototypeOf(ae.prototype).constructor;if(Hn!==Object){var ye=he(xe,Hn);fe=j(j([],fe),ye)}return fe}function De(xe,ae){var ce=Object.getPrototypeOf(ae.prototype).constructor;if(ce!==Object){var fe=te.getFunctionName(ce),Ee=oe(xe,fe,ce,!0),pe=Ee.map(function(G){return G.metadata.filter(function(Fe){return Fe.key===Z.UNMANAGED_TAG})}),Ae=[].concat.apply([],pe).length,nt=Ee.length-Ae;return nt>0?nt:De(xe,ce)}else return 0}L.getBaseClassDependencyCount=De;function ue(xe){var ae={};return xe.forEach(function(ce){ae[ce.key.toString()]=ce.value}),{inject:ae[Z.INJECT_TAG],multiInject:ae[Z.MULTI_INJECT_TAG],targetName:ae[Z.NAME_TAG],unmanaged:ae[Z.UNMANAGED_TAG]}}},6748:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Request=void 0;var j=M(37791),R=function(){function J(z,Z,te,Q,de){this.id=j.id(),this.serviceIdentifier=z,this.parentContext=Z,this.parentRequest=te,this.target=de,this.childRequests=[],this.bindings=Array.isArray(Q)?Q:[Q],this.requestScope=te===null?new Map:null}return J.prototype.addChildRequest=function(z,Z,te){var Q=new J(z,this.parentContext,this,Z,te);return this.childRequests.push(Q),Q},J}();L.Request=R},18924:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Target=void 0;var j=M(6867),R=M(37791),J=M(47738),z=M(88460),Z=function(){function te(Q,de,oe,ie){this.id=R.id(),this.type=Q,this.serviceIdentifier=oe,this.name=new z.QueryableString(de||""),this.metadata=new Array;var re=null;typeof ie=="string"?re=new J.Metadata(j.NAMED_TAG,ie):ie instanceof J.Metadata&&(re=ie),re!==null&&this.metadata.push(re)}return te.prototype.hasTag=function(Q){for(var de=0,oe=this.metadata;de<oe.length;de++){var ie=oe[de];if(ie.key===Q)return!0}return!1},te.prototype.isArray=function(){return this.hasTag(j.MULTI_INJECT_TAG)},te.prototype.matchesArray=function(Q){return this.matchesTag(j.MULTI_INJECT_TAG)(Q)},te.prototype.isNamed=function(){return this.hasTag(j.NAMED_TAG)},te.prototype.isTagged=function(){return this.metadata.some(function(Q){return j.NON_CUSTOM_TAG_KEYS.every(function(de){return Q.key!==de})})},te.prototype.isOptional=function(){return this.matchesTag(j.OPTIONAL_TAG)(!0)},te.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(Q){return Q.key===j.NAMED_TAG})[0]:null},te.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(Q){return j.NON_CUSTOM_TAG_KEYS.every(function(de){return Q.key!==de})}):null},te.prototype.matchesNamedTag=function(Q){return this.matchesTag(j.NAMED_TAG)(Q)},te.prototype.matchesTag=function(Q){var de=this;return function(oe){for(var ie=0,re=de.metadata;ie<re.length;ie++){var he=re[ie];if(he.key===Q&&he.value===oe)return!0}return!1}},te}();L.Target=Z},52279:function(Ne,L,M){"use strict";var j=this&&this.__spreadArray||function(oe,ie){for(var re=0,he=ie.length,De=oe.length;re<he;re++,De++)oe[De]=ie[re];return oe};Object.defineProperty(L,"__esModule",{value:!0}),L.resolveInstance=void 0;var R=M(16674),J=M(28421),z=M(6867);function Z(oe,ie,re){var he=ie.filter(function(ue){return ue.target!==null&&ue.target.type===J.TargetTypeEnum.ClassProperty}),De=he.map(re);return he.forEach(function(ue,xe){var ae="";ae=ue.target.name.value();var ce=De[xe];oe[ae]=ce}),oe}function te(oe,ie){return new(oe.bind.apply(oe,j([void 0],ie)))}function Q(oe,ie){if(Reflect.hasMetadata(z.POST_CONSTRUCT,oe)){var re=Reflect.getMetadata(z.POST_CONSTRUCT,oe);try{ie[re.value]()}catch(he){throw new Error(R.POST_CONSTRUCT_ERROR(oe.name,he.message))}}}function de(oe,ie,re){var he=null;if(ie.length>0){var De=ie.filter(function(xe){return xe.target!==null&&xe.target.type===J.TargetTypeEnum.ConstructorArgument}),ue=De.map(re);he=te(oe,ue),he=Z(he,ie,re)}else he=new oe;return Q(oe,he),he}L.resolveInstance=de},31927:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.resolve=void 0;var j=M(16674),R=M(28421),J=M(85265),z=M(55800),Z=M(52279),te=function(oe,ie,re){try{return re()}catch(he){throw J.isStackOverflowExeption(he)?new Error(j.CIRCULAR_DEPENDENCY_IN_FACTORY(oe,ie.toString())):he}},Q=function(oe){return function(ie){ie.parentContext.setCurrentRequest(ie);var re=ie.bindings,he=ie.childRequests,De=ie.target&&ie.target.isArray(),ue=!ie.parentRequest||!ie.parentRequest.target||!ie.target||!ie.parentRequest.target.matchesArray(ie.target.serviceIdentifier);if(De&&ue)return he.map(function(pe){var Ae=Q(oe);return Ae(pe)});var xe=null;if(ie.target.isOptional()&&re.length===0)return;var ae=re[0],ce=ae.scope===R.BindingScopeEnum.Singleton,fe=ae.scope===R.BindingScopeEnum.Request;if(ce&&ae.activated)return ae.cache;if(fe&&oe!==null&&oe.has(ae.id))return oe.get(ae.id);if(ae.type===R.BindingTypeEnum.ConstantValue)xe=ae.cache,ae.activated=!0;else if(ae.type===R.BindingTypeEnum.Function)xe=ae.cache,ae.activated=!0;else if(ae.type===R.BindingTypeEnum.Constructor)xe=ae.implementationType;else if(ae.type===R.BindingTypeEnum.DynamicValue&&ae.dynamicValue!==null)xe=te("toDynamicValue",ae.serviceIdentifier,function(){return ae.dynamicValue(ie.parentContext)});else if(ae.type===R.BindingTypeEnum.Factory&&ae.factory!==null)xe=te("toFactory",ae.serviceIdentifier,function(){return ae.factory(ie.parentContext)});else if(ae.type===R.BindingTypeEnum.Provider&&ae.provider!==null)xe=te("toProvider",ae.serviceIdentifier,function(){return ae.provider(ie.parentContext)});else if(ae.type===R.BindingTypeEnum.Instance&&ae.implementationType!==null)xe=Z.resolveInstance(ae.implementationType,he,Q(oe));else{var Ee=z.getServiceIdentifierAsString(ie.serviceIdentifier);throw new Error(j.INVALID_BINDING_TYPE+" "+Ee)}return typeof ae.onActivation=="function"&&(xe=ae.onActivation(ie.parentContext,xe)),ce&&(ae.cache=xe,ae.activated=!0),fe&&oe!==null&&!oe.has(ae.id)&&oe.set(ae.id,xe),xe}};function de(oe){var ie=Q(oe.plan.rootRequest.requestScope);return ie(oe.plan.rootRequest)}L.resolve=de},83366:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingInSyntax=void 0;var j=M(28421),R=M(71325),J=function(){function z(Z){this._binding=Z}return z.prototype.inRequestScope=function(){return this._binding.scope=j.BindingScopeEnum.Request,new R.BindingWhenOnSyntax(this._binding)},z.prototype.inSingletonScope=function(){return this._binding.scope=j.BindingScopeEnum.Singleton,new R.BindingWhenOnSyntax(this._binding)},z.prototype.inTransientScope=function(){return this._binding.scope=j.BindingScopeEnum.Transient,new R.BindingWhenOnSyntax(this._binding)},z}();L.BindingInSyntax=J},99812:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingInWhenOnSyntax=void 0;var j=M(83366),R=M(51811),J=M(98370),z=function(){function Z(te){this._binding=te,this._bindingWhenSyntax=new J.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new R.BindingOnSyntax(this._binding),this._bindingInSyntax=new j.BindingInSyntax(te)}return Z.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},Z.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},Z.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},Z.prototype.when=function(te){return this._bindingWhenSyntax.when(te)},Z.prototype.whenTargetNamed=function(te){return this._bindingWhenSyntax.whenTargetNamed(te)},Z.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},Z.prototype.whenTargetTagged=function(te,Q){return this._bindingWhenSyntax.whenTargetTagged(te,Q)},Z.prototype.whenInjectedInto=function(te){return this._bindingWhenSyntax.whenInjectedInto(te)},Z.prototype.whenParentNamed=function(te){return this._bindingWhenSyntax.whenParentNamed(te)},Z.prototype.whenParentTagged=function(te,Q){return this._bindingWhenSyntax.whenParentTagged(te,Q)},Z.prototype.whenAnyAncestorIs=function(te){return this._bindingWhenSyntax.whenAnyAncestorIs(te)},Z.prototype.whenNoAncestorIs=function(te){return this._bindingWhenSyntax.whenNoAncestorIs(te)},Z.prototype.whenAnyAncestorNamed=function(te){return this._bindingWhenSyntax.whenAnyAncestorNamed(te)},Z.prototype.whenAnyAncestorTagged=function(te,Q){return this._bindingWhenSyntax.whenAnyAncestorTagged(te,Q)},Z.prototype.whenNoAncestorNamed=function(te){return this._bindingWhenSyntax.whenNoAncestorNamed(te)},Z.prototype.whenNoAncestorTagged=function(te,Q){return this._bindingWhenSyntax.whenNoAncestorTagged(te,Q)},Z.prototype.whenAnyAncestorMatches=function(te){return this._bindingWhenSyntax.whenAnyAncestorMatches(te)},Z.prototype.whenNoAncestorMatches=function(te){return this._bindingWhenSyntax.whenNoAncestorMatches(te)},Z.prototype.onActivation=function(te){return this._bindingOnSyntax.onActivation(te)},Z}();L.BindingInWhenOnSyntax=z},51811:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingOnSyntax=void 0;var j=M(98370),R=function(){function J(z){this._binding=z}return J.prototype.onActivation=function(z){return this._binding.onActivation=z,new j.BindingWhenSyntax(this._binding)},J}();L.BindingOnSyntax=R},51860:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingToSyntax=void 0;var j=M(16674),R=M(28421),J=M(99812),z=M(71325),Z=function(){function te(Q){this._binding=Q}return te.prototype.to=function(Q){return this._binding.type=R.BindingTypeEnum.Instance,this._binding.implementationType=Q,new J.BindingInWhenOnSyntax(this._binding)},te.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+j.INVALID_TO_SELF_VALUE);var Q=this._binding.serviceIdentifier;return this.to(Q)},te.prototype.toConstantValue=function(Q){return this._binding.type=R.BindingTypeEnum.ConstantValue,this._binding.cache=Q,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=R.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},te.prototype.toDynamicValue=function(Q){return this._binding.type=R.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=Q,this._binding.implementationType=null,new J.BindingInWhenOnSyntax(this._binding)},te.prototype.toConstructor=function(Q){return this._binding.type=R.BindingTypeEnum.Constructor,this._binding.implementationType=Q,this._binding.scope=R.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},te.prototype.toFactory=function(Q){return this._binding.type=R.BindingTypeEnum.Factory,this._binding.factory=Q,this._binding.scope=R.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},te.prototype.toFunction=function(Q){if(typeof Q!="function")throw new Error(j.INVALID_FUNCTION_BINDING);var de=this.toConstantValue(Q);return this._binding.type=R.BindingTypeEnum.Function,this._binding.scope=R.BindingScopeEnum.Singleton,de},te.prototype.toAutoFactory=function(Q){return this._binding.type=R.BindingTypeEnum.Factory,this._binding.factory=function(de){var oe=function(){return de.container.get(Q)};return oe},this._binding.scope=R.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},te.prototype.toProvider=function(Q){return this._binding.type=R.BindingTypeEnum.Provider,this._binding.provider=Q,this._binding.scope=R.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},te.prototype.toService=function(Q){this.toDynamicValue(function(de){return de.container.get(Q)})},te}();L.BindingToSyntax=Z},71325:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingWhenOnSyntax=void 0;var j=M(51811),R=M(98370),J=function(){function z(Z){this._binding=Z,this._bindingWhenSyntax=new R.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new j.BindingOnSyntax(this._binding)}return z.prototype.when=function(Z){return this._bindingWhenSyntax.when(Z)},z.prototype.whenTargetNamed=function(Z){return this._bindingWhenSyntax.whenTargetNamed(Z)},z.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},z.prototype.whenTargetTagged=function(Z,te){return this._bindingWhenSyntax.whenTargetTagged(Z,te)},z.prototype.whenInjectedInto=function(Z){return this._bindingWhenSyntax.whenInjectedInto(Z)},z.prototype.whenParentNamed=function(Z){return this._bindingWhenSyntax.whenParentNamed(Z)},z.prototype.whenParentTagged=function(Z,te){return this._bindingWhenSyntax.whenParentTagged(Z,te)},z.prototype.whenAnyAncestorIs=function(Z){return this._bindingWhenSyntax.whenAnyAncestorIs(Z)},z.prototype.whenNoAncestorIs=function(Z){return this._bindingWhenSyntax.whenNoAncestorIs(Z)},z.prototype.whenAnyAncestorNamed=function(Z){return this._bindingWhenSyntax.whenAnyAncestorNamed(Z)},z.prototype.whenAnyAncestorTagged=function(Z,te){return this._bindingWhenSyntax.whenAnyAncestorTagged(Z,te)},z.prototype.whenNoAncestorNamed=function(Z){return this._bindingWhenSyntax.whenNoAncestorNamed(Z)},z.prototype.whenNoAncestorTagged=function(Z,te){return this._bindingWhenSyntax.whenNoAncestorTagged(Z,te)},z.prototype.whenAnyAncestorMatches=function(Z){return this._bindingWhenSyntax.whenAnyAncestorMatches(Z)},z.prototype.whenNoAncestorMatches=function(Z){return this._bindingWhenSyntax.whenNoAncestorMatches(Z)},z.prototype.onActivation=function(Z){return this._bindingOnSyntax.onActivation(Z)},z}();L.BindingWhenOnSyntax=J},98370:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingWhenSyntax=void 0;var j=M(51811),R=M(80758),J=function(){function z(Z){this._binding=Z}return z.prototype.when=function(Z){return this._binding.constraint=Z,new j.BindingOnSyntax(this._binding)},z.prototype.whenTargetNamed=function(Z){return this._binding.constraint=R.namedConstraint(Z),new j.BindingOnSyntax(this._binding)},z.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(Z){var te=Z.target!==null&&!Z.target.isNamed()&&!Z.target.isTagged();return te},new j.BindingOnSyntax(this._binding)},z.prototype.whenTargetTagged=function(Z,te){return this._binding.constraint=R.taggedConstraint(Z)(te),new j.BindingOnSyntax(this._binding)},z.prototype.whenInjectedInto=function(Z){return this._binding.constraint=function(te){return R.typeConstraint(Z)(te.parentRequest)},new j.BindingOnSyntax(this._binding)},z.prototype.whenParentNamed=function(Z){return this._binding.constraint=function(te){return R.namedConstraint(Z)(te.parentRequest)},new j.BindingOnSyntax(this._binding)},z.prototype.whenParentTagged=function(Z,te){return this._binding.constraint=function(Q){return R.taggedConstraint(Z)(te)(Q.parentRequest)},new j.BindingOnSyntax(this._binding)},z.prototype.whenAnyAncestorIs=function(Z){return this._binding.constraint=function(te){return R.traverseAncerstors(te,R.typeConstraint(Z))},new j.BindingOnSyntax(this._binding)},z.prototype.whenNoAncestorIs=function(Z){return this._binding.constraint=function(te){return!R.traverseAncerstors(te,R.typeConstraint(Z))},new j.BindingOnSyntax(this._binding)},z.prototype.whenAnyAncestorNamed=function(Z){return this._binding.constraint=function(te){return R.traverseAncerstors(te,R.namedConstraint(Z))},new j.BindingOnSyntax(this._binding)},z.prototype.whenNoAncestorNamed=function(Z){return this._binding.constraint=function(te){return!R.traverseAncerstors(te,R.namedConstraint(Z))},new j.BindingOnSyntax(this._binding)},z.prototype.whenAnyAncestorTagged=function(Z,te){return this._binding.constraint=function(Q){return R.traverseAncerstors(Q,R.taggedConstraint(Z)(te))},new j.BindingOnSyntax(this._binding)},z.prototype.whenNoAncestorTagged=function(Z,te){return this._binding.constraint=function(Q){return!R.traverseAncerstors(Q,R.taggedConstraint(Z)(te))},new j.BindingOnSyntax(this._binding)},z.prototype.whenAnyAncestorMatches=function(Z){return this._binding.constraint=function(te){return R.traverseAncerstors(te,Z)},new j.BindingOnSyntax(this._binding)},z.prototype.whenNoAncestorMatches=function(Z){return this._binding.constraint=function(te){return!R.traverseAncerstors(te,Z)},new j.BindingOnSyntax(this._binding)},z}();L.BindingWhenSyntax=J},80758:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.typeConstraint=L.namedConstraint=L.taggedConstraint=L.traverseAncerstors=void 0;var j=M(6867),R=M(47738),J=function(Q,de){var oe=Q.parentRequest;return oe!==null?de(oe)?!0:J(oe,de):!1};L.traverseAncerstors=J;var z=function(Q){return function(de){var oe=function(ie){return ie!==null&&ie.target!==null&&ie.target.matchesTag(Q)(de)};return oe.metaData=new R.Metadata(Q,de),oe}};L.taggedConstraint=z;var Z=z(j.NAMED_TAG);L.namedConstraint=Z;var te=function(Q){return function(de){var oe=null;if(de!==null)if(oe=de.bindings[0],typeof Q=="string"){var ie=oe.serviceIdentifier;return ie===Q}else{var re=de.bindings[0].implementationType;return Q===re}return!1}};L.typeConstraint=te},70600:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.multiBindToService=void 0;var M=function(j){return function(R){return function(){for(var J=[],z=0;z<arguments.length;z++)J[z]=arguments[z];return J.forEach(function(Z){return j.bind(Z).toService(R)})}}};L.multiBindToService=M},85265:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isStackOverflowExeption=void 0;var j=M(16674);function R(J){return J instanceof RangeError||J.message===j.STACK_OVERFLOW}L.isStackOverflowExeption=R},37791:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.id=void 0;var M=0;function j(){return M++}L.id=j},55800:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.circularDependencyToException=L.listMetadataForTarget=L.listRegisteredBindingsForServiceIdentifier=L.getServiceIdentifierAsString=L.getFunctionName=void 0;var j=M(16674);function R(oe){if(typeof oe=="function"){var ie=oe;return ie.name}else{if(typeof oe=="symbol")return oe.toString();var ie=oe;return ie}}L.getServiceIdentifierAsString=R;function J(oe,ie,re){var he="",De=re(oe,ie);return De.length!==0&&(he=`
Registered bindings:`,De.forEach(function(ue){var xe="Object";ue.implementationType!==null&&(xe=de(ue.implementationType)),he=he+`
 `+xe,ue.constraint.metaData&&(he=he+" - "+ue.constraint.metaData)})),he}L.listRegisteredBindingsForServiceIdentifier=J;function z(oe,ie){return oe.parentRequest===null?!1:oe.parentRequest.serviceIdentifier===ie?!0:z(oe.parentRequest,ie)}function Z(oe){function ie(he,De){De===void 0&&(De=[]);var ue=R(he.serviceIdentifier);return De.push(ue),he.parentRequest!==null?ie(he.parentRequest,De):De}var re=ie(oe);return re.reverse().join(" --> ")}function te(oe){oe.childRequests.forEach(function(ie){if(z(ie,ie.serviceIdentifier)){var re=Z(ie);throw new Error(j.CIRCULAR_DEPENDENCY+" "+re)}else te(ie)})}L.circularDependencyToException=te;function Q(oe,ie){if(ie.isTagged()||ie.isNamed()){var re="",he=ie.getNamedTag(),De=ie.getCustomTags();return he!==null&&(re+=he.toString()+`
`),De!==null&&De.forEach(function(ue){re+=ue.toString()+`
`})," "+oe+`
 `+oe+" - "+re}else return" "+oe}L.listMetadataForTarget=Q;function de(oe){if(oe.name)return oe.name;var ie=oe.toString(),re=ie.match(/^function\s*([^\s(]+)/);return re?re[1]:"Anonymous function: "+ie}L.getFunctionName=de},50450:function(Ne,L,M){var j,R,J;(function(z){R=[M(19755)],j=z,J=typeof j=="function"?j.apply(L,R):j,J!==void 0&&(Ne.exports=J)})(function(z){var Z=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],te="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],Q=Array.prototype.slice,de,oe;if(z.event.fixHooks)for(var ie=Z.length;ie;)z.event.fixHooks[Z[--ie]]=z.event.mouseHooks;var re=z.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var xe=te.length;xe;)this.addEventListener(te[--xe],he,!1);else this.onmousewheel=he;z.data(this,"mousewheel-line-height",re.getLineHeight(this)),z.data(this,"mousewheel-page-height",re.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var xe=te.length;xe;)this.removeEventListener(te[--xe],he,!1);else this.onmousewheel=null;z.removeData(this,"mousewheel-line-height"),z.removeData(this,"mousewheel-page-height")},getLineHeight:function(xe){var ae=z(xe),ce=ae["offsetParent"in z.fn?"offsetParent":"parent"]();return ce.length||(ce=z("body")),parseInt(ce.css("fontSize"),10)||parseInt(ae.css("fontSize"),10)||16},getPageHeight:function(xe){return z(xe).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};z.fn.extend({mousewheel:function(xe){return xe?this.bind("mousewheel",xe):this.trigger("mousewheel")},unmousewheel:function(xe){return this.unbind("mousewheel",xe)}});function he(xe){var ae=xe||window.event,ce=Q.call(arguments,1),fe=0,Ee=0,pe=0,Ae=0,nt=0,G=0;if(xe=z.event.fix(ae),xe.type="mousewheel","detail"in ae&&(pe=ae.detail*-1),"wheelDelta"in ae&&(pe=ae.wheelDelta),"wheelDeltaY"in ae&&(pe=ae.wheelDeltaY),"wheelDeltaX"in ae&&(Ee=ae.wheelDeltaX*-1),"axis"in ae&&ae.axis===ae.HORIZONTAL_AXIS&&(Ee=pe*-1,pe=0),fe=pe===0?Ee:pe,"deltaY"in ae&&(pe=ae.deltaY*-1,fe=pe),"deltaX"in ae&&(Ee=ae.deltaX,pe===0&&(fe=Ee*-1)),!(pe===0&&Ee===0)){if(ae.deltaMode===1){var Fe=z.data(this,"mousewheel-line-height");fe*=Fe,pe*=Fe,Ee*=Fe}else if(ae.deltaMode===2){var $e=z.data(this,"mousewheel-page-height");fe*=$e,pe*=$e,Ee*=$e}if(Ae=Math.max(Math.abs(pe),Math.abs(Ee)),(!oe||Ae<oe)&&(oe=Ae,ue(ae,Ae)&&(oe/=40)),ue(ae,Ae)&&(fe/=40,Ee/=40,pe/=40),fe=Math[fe>=1?"floor":"ceil"](fe/oe),Ee=Math[Ee>=1?"floor":"ceil"](Ee/oe),pe=Math[pe>=1?"floor":"ceil"](pe/oe),re.settings.normalizeOffset&&this.getBoundingClientRect){var at=this.getBoundingClientRect();nt=xe.clientX-at.left,G=xe.clientY-at.top}return xe.deltaX=Ee,xe.deltaY=pe,xe.deltaFactor=oe,xe.offsetX=nt,xe.offsetY=G,xe.deltaMode=0,ce.unshift(xe,fe,Ee,pe),de&&clearTimeout(de),de=setTimeout(De,200),(z.event.dispatch||z.event.handle).apply(this,ce)}}function De(){oe=null}function ue(xe,ae){return re.settings.adjustOldDeltas&&xe.type==="mousewheel"&&ae%120===0}})},19755:function(Ne,L){var M,j;(function(R,J){"use strict";typeof Ne.exports=="object"?Ne.exports=R.document?J(R,!0):function(z){if(!z.document)throw new Error("jQuery requires a window with a document");return J(z)}:J(R)})(typeof window<"u"?window:this,function(R,J){"use strict";var z=[],Z=Object.getPrototypeOf,te=z.slice,Q=z.flat?function(S){return z.flat.call(S)}:function(S){return z.concat.apply([],S)},de=z.push,oe=z.indexOf,ie={},re=ie.toString,he=ie.hasOwnProperty,De=he.toString,ue=De.call(Object),xe={},ae=function(I){return typeof I=="function"&&typeof I.nodeType!="number"&&typeof I.item!="function"},ce=function(I){return I!=null&&I===I.window},fe=R.document,Ee={type:!0,src:!0,nonce:!0,noModule:!0};function pe(S,I,U){U=U||fe;var W,se,le=U.createElement("script");if(le.text=S,I)for(W in Ee)se=I[W]||I.getAttribute&&I.getAttribute(W),se&&le.setAttribute(W,se);U.head.appendChild(le).parentNode.removeChild(le)}function Ae(S){return S==null?S+"":typeof S=="object"||typeof S=="function"?ie[re.call(S)]||"object":typeof S}var nt="3.6.0",G=function(S,I){return new G.fn.init(S,I)};G.fn=G.prototype={jquery:nt,constructor:G,length:0,toArray:function(){return te.call(this)},get:function(S){return S==null?te.call(this):S<0?this[S+this.length]:this[S]},pushStack:function(S){var I=G.merge(this.constructor(),S);return I.prevObject=this,I},each:function(S){return G.each(this,S)},map:function(S){return this.pushStack(G.map(this,function(I,U){return S.call(I,U,I)}))},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(G.grep(this,function(S,I){return(I+1)%2}))},odd:function(){return this.pushStack(G.grep(this,function(S,I){return I%2}))},eq:function(S){var I=this.length,U=+S+(S<0?I:0);return this.pushStack(U>=0&&U<I?[this[U]]:[])},end:function(){return this.prevObject||this.constructor()},push:de,sort:z.sort,splice:z.splice},G.extend=G.fn.extend=function(){var S,I,U,W,se,le,Ce=arguments[0]||{},Ze=1,qe=arguments.length,mt=!1;for(typeof Ce=="boolean"&&(mt=Ce,Ce=arguments[Ze]||{},Ze++),typeof Ce!="object"&&!ae(Ce)&&(Ce={}),Ze===qe&&(Ce=this,Ze--);Ze<qe;Ze++)if((S=arguments[Ze])!=null)for(I in S)W=S[I],!(I==="__proto__"||Ce===W)&&(mt&&W&&(G.isPlainObject(W)||(se=Array.isArray(W)))?(U=Ce[I],se&&!Array.isArray(U)?le=[]:!se&&!G.isPlainObject(U)?le={}:le=U,se=!1,Ce[I]=G.extend(mt,le,W)):W!==void 0&&(Ce[I]=W));return Ce},G.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(S){throw new Error(S)},noop:function(){},isPlainObject:function(S){var I,U;return!S||re.call(S)!=="[object Object]"?!1:(I=Z(S),I?(U=he.call(I,"constructor")&&I.constructor,typeof U=="function"&&De.call(U)===ue):!0)},isEmptyObject:function(S){var I;for(I in S)return!1;return!0},globalEval:function(S,I,U){pe(S,{nonce:I&&I.nonce},U)},each:function(S,I){var U,W=0;if(Fe(S))for(U=S.length;W<U&&I.call(S[W],W,S[W])!==!1;W++);else for(W in S)if(I.call(S[W],W,S[W])===!1)break;return S},makeArray:function(S,I){var U=I||[];return S!=null&&(Fe(Object(S))?G.merge(U,typeof S=="string"?[S]:S):de.call(U,S)),U},inArray:function(S,I,U){return I==null?-1:oe.call(I,S,U)},merge:function(S,I){for(var U=+I.length,W=0,se=S.length;W<U;W++)S[se++]=I[W];return S.length=se,S},grep:function(S,I,U){for(var W,se=[],le=0,Ce=S.length,Ze=!U;le<Ce;le++)W=!I(S[le],le),W!==Ze&&se.push(S[le]);return se},map:function(S,I,U){var W,se,le=0,Ce=[];if(Fe(S))for(W=S.length;le<W;le++)se=I(S[le],le,U),se!=null&&Ce.push(se);else for(le in S)se=I(S[le],le,U),se!=null&&Ce.push(se);return Q(Ce)},guid:1,support:xe}),typeof Symbol=="function"&&(G.fn[Symbol.iterator]=z[Symbol.iterator]),G.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(S,I){ie["[object "+I+"]"]=I.toLowerCase()});function Fe(S){var I=!!S&&"length"in S&&S.length,U=Ae(S);return ae(S)||ce(S)?!1:U==="array"||I===0||typeof I=="number"&&I>0&&I-1 in S}var $e=function(S){var I,U,W,se,le,Ce,Ze,qe,mt,zt,vn,Nt,$t,rr,oi,br,fo,Lo,va,Gr="sizzle"+1*new Date,Ir=S.document,Ei=0,Di=0,Go=qa(),ma=qa(),tu=qa(),Xs=qa(),Na=function(Me,Ye){return Me===Ye&&(vn=!0),0},Fo={}.hasOwnProperty,es=[],uc=es.pop,Zs=es.push,Ec=es.push,Bo=es.slice,Fs=function(Me,Ye){for(var lt=0,Tt=Me.length;lt<Tt;lt++)if(Me[lt]===Ye)return lt;return-1},Za="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ui="[\\x20\\t\\r\\n\\f]",Bs="(?:\\\\[\\da-fA-F]{1,6}"+Ui+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Sc="\\["+Ui+"*("+Bs+")(?:"+Ui+"*([*^$|!~]?=)"+Ui+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Bs+"))|)"+Ui+"*\\]",dc=":("+Bs+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Sc+")*)|.*)\\)|)",cl=new RegExp(Ui+"+","g"),ts=new RegExp("^"+Ui+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ui+"+$","g"),Uu=new RegExp("^"+Ui+"*,"+Ui+"*"),Cs=new RegExp("^"+Ui+"*([>+~]|"+Ui+")"+Ui+"*"),nu=new RegExp(Ui+"|>"),zo=new RegExp(dc),Vu=new RegExp("^"+Bs+"$"),Il={ID:new RegExp("^#("+Bs+")"),CLASS:new RegExp("^\\.("+Bs+")"),TAG:new RegExp("^("+Bs+"|[*])"),ATTR:new RegExp("^"+Sc),PSEUDO:new RegExp("^"+dc),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ui+"*(even|odd|(([+-]|)(\\d*)n|)"+Ui+"*(?:([+-]|)"+Ui+"*(\\d+)|))"+Ui+"*\\)|)","i"),bool:new RegExp("^(?:"+Za+")$","i"),needsContext:new RegExp("^"+Ui+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ui+"*((?:-\\d)?\\d*)"+Ui+"*\\)|)(?=[^-]|$)","i")},Mf=/HTML$/i,Th=/^(?:input|select|textarea|button)$/i,_c=/^h\d$/i,Ya=/^[^{]+\{\s*\[native \w/,ll=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ju=/[+~]/,ya=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ui+"?|\\\\([^\\r\\n\\f])","g"),Ka=function(Me,Ye){var lt="0x"+Me.slice(1)-65536;return Ye||(lt<0?String.fromCharCode(lt+65536):String.fromCharCode(lt>>10|55296,lt&1023|56320))},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ru=function(Me,Ye){return Ye?Me==="\0"?"\uFFFD":Me.slice(0,-1)+"\\"+Me.charCodeAt(Me.length-1).toString(16)+" ":"\\"+Me},Hu=function(){Nt()},Rl=ir(function(Me){return Me.disabled===!0&&Me.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Ec.apply(es=Bo.call(Ir.childNodes),Ir.childNodes),es[Ir.childNodes.length].nodeType}catch{Ec={apply:es.length?function(Ye,lt){Zs.apply(Ye,Bo.call(lt))}:function(Ye,lt){for(var Tt=Ye.length,yt=0;Ye[Tt++]=lt[yt++];);Ye.length=Tt-1}}}function po(Me,Ye,lt,Tt){var yt,an,Ut,Un,Kn,Er,xr,Or=Ye&&Ye.ownerDocument,vi=Ye?Ye.nodeType:9;if(lt=lt||[],typeof Me!="string"||!Me||vi!==1&&vi!==9&&vi!==11)return lt;if(!Tt&&(Nt(Ye),Ye=Ye||$t,oi)){if(vi!==11&&(Kn=ll.exec(Me)))if(yt=Kn[1]){if(vi===9)if(Ut=Ye.getElementById(yt)){if(Ut.id===yt)return lt.push(Ut),lt}else return lt;else if(Or&&(Ut=Or.getElementById(yt))&&va(Ye,Ut)&&Ut.id===yt)return lt.push(Ut),lt}else{if(Kn[2])return Ec.apply(lt,Ye.getElementsByTagName(Me)),lt;if((yt=Kn[3])&&U.getElementsByClassName&&Ye.getElementsByClassName)return Ec.apply(lt,Ye.getElementsByClassName(yt)),lt}if(U.qsa&&!Xs[Me+" "]&&(!br||!br.test(Me))&&(vi!==1||Ye.nodeName.toLowerCase()!=="object")){if(xr=Me,Or=Ye,vi===1&&(nu.test(Me)||Cs.test(Me))){for(Or=ju.test(Me)&&dt(Ye.parentNode)||Ye,(Or!==Ye||!U.scope)&&((Un=Ye.getAttribute("id"))?Un=Un.replace(ba,ru):Ye.setAttribute("id",Un=Gr)),Er=Ce(Me),an=Er.length;an--;)Er[an]=(Un?"#"+Un:":scope")+" "+Bt(Er[an]);xr=Er.join(",")}try{return Ec.apply(lt,Or.querySelectorAll(xr)),lt}catch{Xs(Me,!0)}finally{Un===Gr&&Ye.removeAttribute("id")}}}return qe(Me.replace(ts,"$1"),Ye,lt,Tt)}function qa(){var Me=[];function Ye(lt,Tt){return Me.push(lt+" ")>W.cacheLength&&delete Ye[Me.shift()],Ye[lt+" "]=Tt}return Ye}function Wo(Me){return Me[Gr]=!0,Me}function ns(Me){var Ye=$t.createElement("fieldset");try{return!!Me(Ye)}catch{return!1}finally{Ye.parentNode&&Ye.parentNode.removeChild(Ye),Ye=null}}function aa(Me,Ye){for(var lt=Me.split("|"),Tt=lt.length;Tt--;)W.attrHandle[lt[Tt]]=Ye}function iu(Me,Ye){var lt=Ye&&Me,Tt=lt&&Me.nodeType===1&&Ye.nodeType===1&&Me.sourceIndex-Ye.sourceIndex;if(Tt)return Tt;if(lt){for(;lt=lt.nextSibling;)if(lt===Ye)return-1}return Me?1:-1}function Gd(Me){return function(Ye){var lt=Ye.nodeName.toLowerCase();return lt==="input"&&Ye.type===Me}}function Mh(Me){return function(Ye){var lt=Ye.nodeName.toLowerCase();return(lt==="input"||lt==="button")&&Ye.type===Me}}function Of(Me){return function(Ye){return"form"in Ye?Ye.parentNode&&Ye.disabled===!1?"label"in Ye?"label"in Ye.parentNode?Ye.parentNode.disabled===Me:Ye.disabled===Me:Ye.isDisabled===Me||Ye.isDisabled!==!Me&&Rl(Ye)===Me:Ye.disabled===Me:"label"in Ye?Ye.disabled===Me:!1}}function hc(Me){return Wo(function(Ye){return Ye=+Ye,Wo(function(lt,Tt){for(var yt,an=Me([],lt.length,Ye),Ut=an.length;Ut--;)lt[yt=an[Ut]]&&(lt[yt]=!(Tt[yt]=lt[yt]))})})}function dt(Me){return Me&&typeof Me.getElementsByTagName<"u"&&Me}U=po.support={},le=po.isXML=function(Me){var Ye=Me&&Me.namespaceURI,lt=Me&&(Me.ownerDocument||Me).documentElement;return!Mf.test(Ye||lt&&lt.nodeName||"HTML")},Nt=po.setDocument=function(Me){var Ye,lt,Tt=Me?Me.ownerDocument||Me:Ir;return Tt==$t||Tt.nodeType!==9||!Tt.documentElement||($t=Tt,rr=$t.documentElement,oi=!le($t),Ir!=$t&&(lt=$t.defaultView)&&lt.top!==lt&&(lt.addEventListener?lt.addEventListener("unload",Hu,!1):lt.attachEvent&&lt.attachEvent("onunload",Hu)),U.scope=ns(function(yt){return rr.appendChild(yt).appendChild($t.createElement("div")),typeof yt.querySelectorAll<"u"&&!yt.querySelectorAll(":scope fieldset div").length}),U.attributes=ns(function(yt){return yt.className="i",!yt.getAttribute("className")}),U.getElementsByTagName=ns(function(yt){return yt.appendChild($t.createComment("")),!yt.getElementsByTagName("*").length}),U.getElementsByClassName=Ya.test($t.getElementsByClassName),U.getById=ns(function(yt){return rr.appendChild(yt).id=Gr,!$t.getElementsByName||!$t.getElementsByName(Gr).length}),U.getById?(W.filter.ID=function(yt){var an=yt.replace(ya,Ka);return function(Ut){return Ut.getAttribute("id")===an}},W.find.ID=function(yt,an){if(typeof an.getElementById<"u"&&oi){var Ut=an.getElementById(yt);return Ut?[Ut]:[]}}):(W.filter.ID=function(yt){var an=yt.replace(ya,Ka);return function(Ut){var Un=typeof Ut.getAttributeNode<"u"&&Ut.getAttributeNode("id");return Un&&Un.value===an}},W.find.ID=function(yt,an){if(typeof an.getElementById<"u"&&oi){var Ut,Un,Kn,Er=an.getElementById(yt);if(Er){if(Ut=Er.getAttributeNode("id"),Ut&&Ut.value===yt)return[Er];for(Kn=an.getElementsByName(yt),Un=0;Er=Kn[Un++];)if(Ut=Er.getAttributeNode("id"),Ut&&Ut.value===yt)return[Er]}return[]}}),W.find.TAG=U.getElementsByTagName?function(yt,an){if(typeof an.getElementsByTagName<"u")return an.getElementsByTagName(yt);if(U.qsa)return an.querySelectorAll(yt)}:function(yt,an){var Ut,Un=[],Kn=0,Er=an.getElementsByTagName(yt);if(yt==="*"){for(;Ut=Er[Kn++];)Ut.nodeType===1&&Un.push(Ut);return Un}return Er},W.find.CLASS=U.getElementsByClassName&&function(yt,an){if(typeof an.getElementsByClassName<"u"&&oi)return an.getElementsByClassName(yt)},fo=[],br=[],(U.qsa=Ya.test($t.querySelectorAll))&&(ns(function(yt){var an;rr.appendChild(yt).innerHTML="<a id='"+Gr+"'></a><select id='"+Gr+"-\r\\' msallowcapture=''><option selected=''></option></select>",yt.querySelectorAll("[msallowcapture^='']").length&&br.push("[*^$]="+Ui+`*(?:''|"")`),yt.querySelectorAll("[selected]").length||br.push("\\["+Ui+"*(?:value|"+Za+")"),yt.querySelectorAll("[id~="+Gr+"-]").length||br.push("~="),an=$t.createElement("input"),an.setAttribute("name",""),yt.appendChild(an),yt.querySelectorAll("[name='']").length||br.push("\\["+Ui+"*name"+Ui+"*="+Ui+`*(?:''|"")`),yt.querySelectorAll(":checked").length||br.push(":checked"),yt.querySelectorAll("a#"+Gr+"+*").length||br.push(".#.+[+~]"),yt.querySelectorAll("\\\f"),br.push("[\\r\\n\\f]")}),ns(function(yt){yt.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var an=$t.createElement("input");an.setAttribute("type","hidden"),yt.appendChild(an).setAttribute("name","D"),yt.querySelectorAll("[name=d]").length&&br.push("name"+Ui+"*[*^$|!~]?="),yt.querySelectorAll(":enabled").length!==2&&br.push(":enabled",":disabled"),rr.appendChild(yt).disabled=!0,yt.querySelectorAll(":disabled").length!==2&&br.push(":enabled",":disabled"),yt.querySelectorAll("*,:x"),br.push(",.*:")})),(U.matchesSelector=Ya.test(Lo=rr.matches||rr.webkitMatchesSelector||rr.mozMatchesSelector||rr.oMatchesSelector||rr.msMatchesSelector))&&ns(function(yt){U.disconnectedMatch=Lo.call(yt,"*"),Lo.call(yt,"[s!='']:x"),fo.push("!=",dc)}),br=br.length&&new RegExp(br.join("|")),fo=fo.length&&new RegExp(fo.join("|")),Ye=Ya.test(rr.compareDocumentPosition),va=Ye||Ya.test(rr.contains)?function(yt,an){var Ut=yt.nodeType===9?yt.documentElement:yt,Un=an&&an.parentNode;return yt===Un||!!(Un&&Un.nodeType===1&&(Ut.contains?Ut.contains(Un):yt.compareDocumentPosition&&yt.compareDocumentPosition(Un)&16))}:function(yt,an){if(an){for(;an=an.parentNode;)if(an===yt)return!0}return!1},Na=Ye?function(yt,an){if(yt===an)return vn=!0,0;var Ut=!yt.compareDocumentPosition-!an.compareDocumentPosition;return Ut||(Ut=(yt.ownerDocument||yt)==(an.ownerDocument||an)?yt.compareDocumentPosition(an):1,Ut&1||!U.sortDetached&&an.compareDocumentPosition(yt)===Ut?yt==$t||yt.ownerDocument==Ir&&va(Ir,yt)?-1:an==$t||an.ownerDocument==Ir&&va(Ir,an)?1:zt?Fs(zt,yt)-Fs(zt,an):0:Ut&4?-1:1)}:function(yt,an){if(yt===an)return vn=!0,0;var Ut,Un=0,Kn=yt.parentNode,Er=an.parentNode,xr=[yt],Or=[an];if(!Kn||!Er)return yt==$t?-1:an==$t?1:Kn?-1:Er?1:zt?Fs(zt,yt)-Fs(zt,an):0;if(Kn===Er)return iu(yt,an);for(Ut=yt;Ut=Ut.parentNode;)xr.unshift(Ut);for(Ut=an;Ut=Ut.parentNode;)Or.unshift(Ut);for(;xr[Un]===Or[Un];)Un++;return Un?iu(xr[Un],Or[Un]):xr[Un]==Ir?-1:Or[Un]==Ir?1:0}),$t},po.matches=function(Me,Ye){return po(Me,null,null,Ye)},po.matchesSelector=function(Me,Ye){if(Nt(Me),U.matchesSelector&&oi&&!Xs[Ye+" "]&&(!fo||!fo.test(Ye))&&(!br||!br.test(Ye)))try{var lt=Lo.call(Me,Ye);if(lt||U.disconnectedMatch||Me.document&&Me.document.nodeType!==11)return lt}catch{Xs(Ye,!0)}return po(Ye,$t,null,[Me]).length>0},po.contains=function(Me,Ye){return(Me.ownerDocument||Me)!=$t&&Nt(Me),va(Me,Ye)},po.attr=function(Me,Ye){(Me.ownerDocument||Me)!=$t&&Nt(Me);var lt=W.attrHandle[Ye.toLowerCase()],Tt=lt&&Fo.call(W.attrHandle,Ye.toLowerCase())?lt(Me,Ye,!oi):void 0;return Tt!==void 0?Tt:U.attributes||!oi?Me.getAttribute(Ye):(Tt=Me.getAttributeNode(Ye))&&Tt.specified?Tt.value:null},po.escape=function(Me){return(Me+"").replace(ba,ru)},po.error=function(Me){throw new Error("Syntax error, unrecognized expression: "+Me)},po.uniqueSort=function(Me){var Ye,lt=[],Tt=0,yt=0;if(vn=!U.detectDuplicates,zt=!U.sortStable&&Me.slice(0),Me.sort(Na),vn){for(;Ye=Me[yt++];)Ye===Me[yt]&&(Tt=lt.push(yt));for(;Tt--;)Me.splice(lt[Tt],1)}return zt=null,Me},se=po.getText=function(Me){var Ye,lt="",Tt=0,yt=Me.nodeType;if(yt){if(yt===1||yt===9||yt===11){if(typeof Me.textContent=="string")return Me.textContent;for(Me=Me.firstChild;Me;Me=Me.nextSibling)lt+=se(Me)}else if(yt===3||yt===4)return Me.nodeValue}else for(;Ye=Me[Tt++];)lt+=se(Ye);return lt},W=po.selectors={cacheLength:50,createPseudo:Wo,match:Il,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Me){return Me[1]=Me[1].replace(ya,Ka),Me[3]=(Me[3]||Me[4]||Me[5]||"").replace(ya,Ka),Me[2]==="~="&&(Me[3]=" "+Me[3]+" "),Me.slice(0,4)},CHILD:function(Me){return Me[1]=Me[1].toLowerCase(),Me[1].slice(0,3)==="nth"?(Me[3]||po.error(Me[0]),Me[4]=+(Me[4]?Me[5]+(Me[6]||1):2*(Me[3]==="even"||Me[3]==="odd")),Me[5]=+(Me[7]+Me[8]||Me[3]==="odd")):Me[3]&&po.error(Me[0]),Me},PSEUDO:function(Me){var Ye,lt=!Me[6]&&Me[2];return Il.CHILD.test(Me[0])?null:(Me[3]?Me[2]=Me[4]||Me[5]||"":lt&&zo.test(lt)&&(Ye=Ce(lt,!0))&&(Ye=lt.indexOf(")",lt.length-Ye)-lt.length)&&(Me[0]=Me[0].slice(0,Ye),Me[2]=lt.slice(0,Ye)),Me.slice(0,3))}},filter:{TAG:function(Me){var Ye=Me.replace(ya,Ka).toLowerCase();return Me==="*"?function(){return!0}:function(lt){return lt.nodeName&&lt.nodeName.toLowerCase()===Ye}},CLASS:function(Me){var Ye=Go[Me+" "];return Ye||(Ye=new RegExp("(^|"+Ui+")"+Me+"("+Ui+"|$)"))&&Go(Me,function(lt){return Ye.test(typeof lt.className=="string"&&lt.className||typeof lt.getAttribute<"u"&&lt.getAttribute("class")||"")})},ATTR:function(Me,Ye,lt){return function(Tt){var yt=po.attr(Tt,Me);return yt==null?Ye==="!=":Ye?(yt+="",Ye==="="?yt===lt:Ye==="!="?yt!==lt:Ye==="^="?lt&&yt.indexOf(lt)===0:Ye==="*="?lt&&yt.indexOf(lt)>-1:Ye==="$="?lt&&yt.slice(-lt.length)===lt:Ye==="~="?(" "+yt.replace(cl," ")+" ").indexOf(lt)>-1:Ye==="|="?yt===lt||yt.slice(0,lt.length+1)===lt+"-":!1):!0}},CHILD:function(Me,Ye,lt,Tt,yt){var an=Me.slice(0,3)!=="nth",Ut=Me.slice(-4)!=="last",Un=Ye==="of-type";return Tt===1&&yt===0?function(Kn){return!!Kn.parentNode}:function(Kn,Er,xr){var Or,vi,ai,vr,io,Vi,ca=an!==Ut?"nextSibling":"previousSibling",No=Kn.parentNode,fc=Un&&Kn.nodeName.toLowerCase(),ul=!xr&&!Un,xa=!1;if(No){if(an){for(;ca;){for(vr=Kn;vr=vr[ca];)if(Un?vr.nodeName.toLowerCase()===fc:vr.nodeType===1)return!1;Vi=ca=Me==="only"&&!Vi&&"nextSibling"}return!0}if(Vi=[Ut?No.firstChild:No.lastChild],Ut&&ul){for(vr=No,ai=vr[Gr]||(vr[Gr]={}),vi=ai[vr.uniqueID]||(ai[vr.uniqueID]={}),Or=vi[Me]||[],io=Or[0]===Ei&&Or[1],xa=io&&Or[2],vr=io&&No.childNodes[io];vr=++io&&vr&&vr[ca]||(xa=io=0)||Vi.pop();)if(vr.nodeType===1&&++xa&&vr===Kn){vi[Me]=[Ei,io,xa];break}}else if(ul&&(vr=Kn,ai=vr[Gr]||(vr[Gr]={}),vi=ai[vr.uniqueID]||(ai[vr.uniqueID]={}),Or=vi[Me]||[],io=Or[0]===Ei&&Or[1],xa=io),xa===!1)for(;(vr=++io&&vr&&vr[ca]||(xa=io=0)||Vi.pop())&&!((Un?vr.nodeName.toLowerCase()===fc:vr.nodeType===1)&&++xa&&(ul&&(ai=vr[Gr]||(vr[Gr]={}),vi=ai[vr.uniqueID]||(ai[vr.uniqueID]={}),vi[Me]=[Ei,xa]),vr===Kn)););return xa-=yt,xa===Tt||xa%Tt===0&&xa/Tt>=0}}},PSEUDO:function(Me,Ye){var lt,Tt=W.pseudos[Me]||W.setFilters[Me.toLowerCase()]||po.error("unsupported pseudo: "+Me);return Tt[Gr]?Tt(Ye):Tt.length>1?(lt=[Me,Me,"",Ye],W.setFilters.hasOwnProperty(Me.toLowerCase())?Wo(function(yt,an){for(var Ut,Un=Tt(yt,Ye),Kn=Un.length;Kn--;)Ut=Fs(yt,Un[Kn]),yt[Ut]=!(an[Ut]=Un[Kn])}):function(yt){return Tt(yt,0,lt)}):Tt}},pseudos:{not:Wo(function(Me){var Ye=[],lt=[],Tt=Ze(Me.replace(ts,"$1"));return Tt[Gr]?Wo(function(yt,an,Ut,Un){for(var Kn,Er=Tt(yt,null,Un,[]),xr=yt.length;xr--;)(Kn=Er[xr])&&(yt[xr]=!(an[xr]=Kn))}):function(yt,an,Ut){return Ye[0]=yt,Tt(Ye,null,Ut,lt),Ye[0]=null,!lt.pop()}}),has:Wo(function(Me){return function(Ye){return po(Me,Ye).length>0}}),contains:Wo(function(Me){return Me=Me.replace(ya,Ka),function(Ye){return(Ye.textContent||se(Ye)).indexOf(Me)>-1}}),lang:Wo(function(Me){return Vu.test(Me||"")||po.error("unsupported lang: "+Me),Me=Me.replace(ya,Ka).toLowerCase(),function(Ye){var lt;do if(lt=oi?Ye.lang:Ye.getAttribute("xml:lang")||Ye.getAttribute("lang"))return lt=lt.toLowerCase(),lt===Me||lt.indexOf(Me+"-")===0;while((Ye=Ye.parentNode)&&Ye.nodeType===1);return!1}}),target:function(Me){var Ye=S.location&&S.location.hash;return Ye&&Ye.slice(1)===Me.id},root:function(Me){return Me===rr},focus:function(Me){return Me===$t.activeElement&&(!$t.hasFocus||$t.hasFocus())&&!!(Me.type||Me.href||~Me.tabIndex)},enabled:Of(!1),disabled:Of(!0),checked:function(Me){var Ye=Me.nodeName.toLowerCase();return Ye==="input"&&!!Me.checked||Ye==="option"&&!!Me.selected},selected:function(Me){return Me.parentNode&&Me.parentNode.selectedIndex,Me.selected===!0},empty:function(Me){for(Me=Me.firstChild;Me;Me=Me.nextSibling)if(Me.nodeType<6)return!1;return!0},parent:function(Me){return!W.pseudos.empty(Me)},header:function(Me){return _c.test(Me.nodeName)},input:function(Me){return Th.test(Me.nodeName)},button:function(Me){var Ye=Me.nodeName.toLowerCase();return Ye==="input"&&Me.type==="button"||Ye==="button"},text:function(Me){var Ye;return Me.nodeName.toLowerCase()==="input"&&Me.type==="text"&&((Ye=Me.getAttribute("type"))==null||Ye.toLowerCase()==="text")},first:hc(function(){return[0]}),last:hc(function(Me,Ye){return[Ye-1]}),eq:hc(function(Me,Ye,lt){return[lt<0?lt+Ye:lt]}),even:hc(function(Me,Ye){for(var lt=0;lt<Ye;lt+=2)Me.push(lt);return Me}),odd:hc(function(Me,Ye){for(var lt=1;lt<Ye;lt+=2)Me.push(lt);return Me}),lt:hc(function(Me,Ye,lt){for(var Tt=lt<0?lt+Ye:lt>Ye?Ye:lt;--Tt>=0;)Me.push(Tt);return Me}),gt:hc(function(Me,Ye,lt){for(var Tt=lt<0?lt+Ye:lt;++Tt<Ye;)Me.push(Tt);return Me})}},W.pseudos.nth=W.pseudos.eq;for(I in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})W.pseudos[I]=Gd(I);for(I in{submit:!0,reset:!0})W.pseudos[I]=Mh(I);function Qt(){}Qt.prototype=W.filters=W.pseudos,W.setFilters=new Qt,Ce=po.tokenize=function(Me,Ye){var lt,Tt,yt,an,Ut,Un,Kn,Er=ma[Me+" "];if(Er)return Ye?0:Er.slice(0);for(Ut=Me,Un=[],Kn=W.preFilter;Ut;){(!lt||(Tt=Uu.exec(Ut)))&&(Tt&&(Ut=Ut.slice(Tt[0].length)||Ut),Un.push(yt=[])),lt=!1,(Tt=Cs.exec(Ut))&&(lt=Tt.shift(),yt.push({value:lt,type:Tt[0].replace(ts," ")}),Ut=Ut.slice(lt.length));for(an in W.filter)(Tt=Il[an].exec(Ut))&&(!Kn[an]||(Tt=Kn[an](Tt)))&&(lt=Tt.shift(),yt.push({value:lt,type:an,matches:Tt}),Ut=Ut.slice(lt.length));if(!lt)break}return Ye?Ut.length:Ut?po.error(Me):ma(Me,Un).slice(0)};function Bt(Me){for(var Ye=0,lt=Me.length,Tt="";Ye<lt;Ye++)Tt+=Me[Ye].value;return Tt}function ir(Me,Ye,lt){var Tt=Ye.dir,yt=Ye.next,an=yt||Tt,Ut=lt&&an==="parentNode",Un=Di++;return Ye.first?function(Kn,Er,xr){for(;Kn=Kn[Tt];)if(Kn.nodeType===1||Ut)return Me(Kn,Er,xr);return!1}:function(Kn,Er,xr){var Or,vi,ai,vr=[Ei,Un];if(xr){for(;Kn=Kn[Tt];)if((Kn.nodeType===1||Ut)&&Me(Kn,Er,xr))return!0}else for(;Kn=Kn[Tt];)if(Kn.nodeType===1||Ut)if(ai=Kn[Gr]||(Kn[Gr]={}),vi=ai[Kn.uniqueID]||(ai[Kn.uniqueID]={}),yt&&yt===Kn.nodeName.toLowerCase())Kn=Kn[Tt]||Kn;else{if((Or=vi[an])&&Or[0]===Ei&&Or[1]===Un)return vr[2]=Or[2];if(vi[an]=vr,vr[2]=Me(Kn,Er,xr))return!0}return!1}}function $r(Me){return Me.length>1?function(Ye,lt,Tt){for(var yt=Me.length;yt--;)if(!Me[yt](Ye,lt,Tt))return!1;return!0}:Me[0]}function Ki(Me,Ye,lt){for(var Tt=0,yt=Ye.length;Tt<yt;Tt++)po(Me,Ye[Tt],lt);return lt}function bo(Me,Ye,lt,Tt,yt){for(var an,Ut=[],Un=0,Kn=Me.length,Er=Ye!=null;Un<Kn;Un++)(an=Me[Un])&&(!lt||lt(an,Tt,yt))&&(Ut.push(an),Er&&Ye.push(Un));return Ut}function ro(Me,Ye,lt,Tt,yt,an){return Tt&&!Tt[Gr]&&(Tt=ro(Tt)),yt&&!yt[Gr]&&(yt=ro(yt,an)),Wo(function(Ut,Un,Kn,Er){var xr,Or,vi,ai=[],vr=[],io=Un.length,Vi=Ut||Ki(Ye||"*",Kn.nodeType?[Kn]:Kn,[]),ca=Me&&(Ut||!Ye)?bo(Vi,ai,Me,Kn,Er):Vi,No=lt?yt||(Ut?Me:io||Tt)?[]:Un:ca;if(lt&&lt(ca,No,Kn,Er),Tt)for(xr=bo(No,vr),Tt(xr,[],Kn,Er),Or=xr.length;Or--;)(vi=xr[Or])&&(No[vr[Or]]=!(ca[vr[Or]]=vi));if(Ut){if(yt||Me){if(yt){for(xr=[],Or=No.length;Or--;)(vi=No[Or])&&xr.push(ca[Or]=vi);yt(null,No=[],xr,Er)}for(Or=No.length;Or--;)(vi=No[Or])&&(xr=yt?Fs(Ut,vi):ai[Or])>-1&&(Ut[xr]=!(Un[xr]=vi))}}else No=bo(No===Un?No.splice(io,No.length):No),yt?yt(null,Un,No,Er):Ec.apply(Un,No)})}function Fd(Me){for(var Ye,lt,Tt,yt=Me.length,an=W.relative[Me[0].type],Ut=an||W.relative[" "],Un=an?1:0,Kn=ir(function(Or){return Or===Ye},Ut,!0),Er=ir(function(Or){return Fs(Ye,Or)>-1},Ut,!0),xr=[function(Or,vi,ai){var vr=!an&&(ai||vi!==mt)||((Ye=vi).nodeType?Kn(Or,vi,ai):Er(Or,vi,ai));return Ye=null,vr}];Un<yt;Un++)if(lt=W.relative[Me[Un].type])xr=[ir($r(xr),lt)];else{if(lt=W.filter[Me[Un].type].apply(null,Me[Un].matches),lt[Gr]){for(Tt=++Un;Tt<yt&&!W.relative[Me[Tt].type];Tt++);return ro(Un>1&&$r(xr),Un>1&&Bt(Me.slice(0,Un-1).concat({value:Me[Un-2].type===" "?"*":""})).replace(ts,"$1"),lt,Un<Tt&&Fd(Me.slice(Un,Tt)),Tt<yt&&Fd(Me=Me.slice(Tt)),Tt<yt&&Bt(Me))}xr.push(lt)}return $r(xr)}function wg(Me,Ye){var lt=Ye.length>0,Tt=Me.length>0,yt=function(an,Ut,Un,Kn,Er){var xr,Or,vi,ai=0,vr="0",io=an&&[],Vi=[],ca=mt,No=an||Tt&&W.find.TAG("*",Er),fc=Ei+=ca==null?1:Math.random()||.1,ul=No.length;for(Er&&(mt=Ut==$t||Ut||Er);vr!==ul&&(xr=No[vr])!=null;vr++){if(Tt&&xr){for(Or=0,!Ut&&xr.ownerDocument!=$t&&(Nt(xr),Un=!oi);vi=Me[Or++];)if(vi(xr,Ut||$t,Un)){Kn.push(xr);break}Er&&(Ei=fc)}lt&&((xr=!vi&&xr)&&ai--,an&&io.push(xr))}if(ai+=vr,lt&&vr!==ai){for(Or=0;vi=Ye[Or++];)vi(io,Vi,Ut,Un);if(an){if(ai>0)for(;vr--;)io[vr]||Vi[vr]||(Vi[vr]=uc.call(Kn));Vi=bo(Vi)}Ec.apply(Kn,Vi),Er&&!an&&Vi.length>0&&ai+Ye.length>1&&po.uniqueSort(Kn)}return Er&&(Ei=fc,mt=ca),io};return lt?Wo(yt):yt}return Ze=po.compile=function(Me,Ye){var lt,Tt=[],yt=[],an=tu[Me+" "];if(!an){for(Ye||(Ye=Ce(Me)),lt=Ye.length;lt--;)an=Fd(Ye[lt]),an[Gr]?Tt.push(an):yt.push(an);an=tu(Me,wg(yt,Tt)),an.selector=Me}return an},qe=po.select=function(Me,Ye,lt,Tt){var yt,an,Ut,Un,Kn,Er=typeof Me=="function"&&Me,xr=!Tt&&Ce(Me=Er.selector||Me);if(lt=lt||[],xr.length===1){if(an=xr[0]=xr[0].slice(0),an.length>2&&(Ut=an[0]).type==="ID"&&Ye.nodeType===9&&oi&&W.relative[an[1].type]){if(Ye=(W.find.ID(Ut.matches[0].replace(ya,Ka),Ye)||[])[0],Ye)Er&&(Ye=Ye.parentNode);else return lt;Me=Me.slice(an.shift().value.length)}for(yt=Il.needsContext.test(Me)?0:an.length;yt--&&(Ut=an[yt],!W.relative[Un=Ut.type]);)if((Kn=W.find[Un])&&(Tt=Kn(Ut.matches[0].replace(ya,Ka),ju.test(an[0].type)&&dt(Ye.parentNode)||Ye))){if(an.splice(yt,1),Me=Tt.length&&Bt(an),!Me)return Ec.apply(lt,Tt),lt;break}}return(Er||Ze(Me,xr))(Tt,Ye,!oi,lt,!Ye||ju.test(Me)&&dt(Ye.parentNode)||Ye),lt},U.sortStable=Gr.split("").sort(Na).join("")===Gr,U.detectDuplicates=!!vn,Nt(),U.sortDetached=ns(function(Me){return Me.compareDocumentPosition($t.createElement("fieldset"))&1}),ns(function(Me){return Me.innerHTML="<a href='#'></a>",Me.firstChild.getAttribute("href")==="#"})||aa("type|href|height|width",function(Me,Ye,lt){if(!lt)return Me.getAttribute(Ye,Ye.toLowerCase()==="type"?1:2)}),(!U.attributes||!ns(function(Me){return Me.innerHTML="<input/>",Me.firstChild.setAttribute("value",""),Me.firstChild.getAttribute("value")===""}))&&aa("value",function(Me,Ye,lt){if(!lt&&Me.nodeName.toLowerCase()==="input")return Me.defaultValue}),ns(function(Me){return Me.getAttribute("disabled")==null})||aa(Za,function(Me,Ye,lt){var Tt;if(!lt)return Me[Ye]===!0?Ye.toLowerCase():(Tt=Me.getAttributeNode(Ye))&&Tt.specified?Tt.value:null}),po}(R);G.find=$e,G.expr=$e.selectors,G.expr[":"]=G.expr.pseudos,G.uniqueSort=G.unique=$e.uniqueSort,G.text=$e.getText,G.isXMLDoc=$e.isXML,G.contains=$e.contains,G.escapeSelector=$e.escape;var at=function(S,I,U){for(var W=[],se=U!==void 0;(S=S[I])&&S.nodeType!==9;)if(S.nodeType===1){if(se&&G(S).is(U))break;W.push(S)}return W},Ft=function(S,I){for(var U=[];S;S=S.nextSibling)S.nodeType===1&&S!==I&&U.push(S);return U},Hn=G.expr.match.needsContext;function ye(S,I){return S.nodeName&&S.nodeName.toLowerCase()===I.toLowerCase()}var wt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Mn(S,I,U){return ae(I)?G.grep(S,function(W,se){return!!I.call(W,se,W)!==U}):I.nodeType?G.grep(S,function(W){return W===I!==U}):typeof I!="string"?G.grep(S,function(W){return oe.call(I,W)>-1!==U}):G.filter(I,S,U)}G.filter=function(S,I,U){var W=I[0];return U&&(S=":not("+S+")"),I.length===1&&W.nodeType===1?G.find.matchesSelector(W,S)?[W]:[]:G.find.matches(S,G.grep(I,function(se){return se.nodeType===1}))},G.fn.extend({find:function(S){var I,U,W=this.length,se=this;if(typeof S!="string")return this.pushStack(G(S).filter(function(){for(I=0;I<W;I++)if(G.contains(se[I],this))return!0}));for(U=this.pushStack([]),I=0;I<W;I++)G.find(S,se[I],U);return W>1?G.uniqueSort(U):U},filter:function(S){return this.pushStack(Mn(this,S||[],!1))},not:function(S){return this.pushStack(Mn(this,S||[],!0))},is:function(S){return!!Mn(this,typeof S=="string"&&Hn.test(S)?G(S):S||[],!1).length}});var jt,En=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Yn=G.fn.init=function(S,I,U){var W,se;if(!S)return this;if(U=U||jt,typeof S=="string")if(S[0]==="<"&&S[S.length-1]===">"&&S.length>=3?W=[null,S,null]:W=En.exec(S),W&&(W[1]||!I))if(W[1]){if(I=I instanceof G?I[0]:I,G.merge(this,G.parseHTML(W[1],I&&I.nodeType?I.ownerDocument||I:fe,!0)),wt.test(W[1])&&G.isPlainObject(I))for(W in I)ae(this[W])?this[W](I[W]):this.attr(W,I[W]);return this}else return se=fe.getElementById(W[2]),se&&(this[0]=se,this.length=1),this;else return!I||I.jquery?(I||U).find(S):this.constructor(I).find(S);else{if(S.nodeType)return this[0]=S,this.length=1,this;if(ae(S))return U.ready!==void 0?U.ready(S):S(G)}return G.makeArray(S,this)};Yn.prototype=G.fn,jt=G(fe);var pn=/^(?:parents|prev(?:Until|All))/,lo={children:!0,contents:!0,next:!0,prev:!0};G.fn.extend({has:function(S){var I=G(S,this),U=I.length;return this.filter(function(){for(var W=0;W<U;W++)if(G.contains(this,I[W]))return!0})},closest:function(S,I){var U,W=0,se=this.length,le=[],Ce=typeof S!="string"&&G(S);if(!Hn.test(S)){for(;W<se;W++)for(U=this[W];U&&U!==I;U=U.parentNode)if(U.nodeType<11&&(Ce?Ce.index(U)>-1:U.nodeType===1&&G.find.matchesSelector(U,S))){le.push(U);break}}return this.pushStack(le.length>1?G.uniqueSort(le):le)},index:function(S){return S?typeof S=="string"?oe.call(G(S),this[0]):oe.call(this,S.jquery?S[0]:S):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(S,I){return this.pushStack(G.uniqueSort(G.merge(this.get(),G(S,I))))},addBack:function(S){return this.add(S==null?this.prevObject:this.prevObject.filter(S))}});function ji(S,I){for(;(S=S[I])&&S.nodeType!==1;);return S}G.each({parent:function(S){var I=S.parentNode;return I&&I.nodeType!==11?I:null},parents:function(S){return at(S,"parentNode")},parentsUntil:function(S,I,U){return at(S,"parentNode",U)},next:function(S){return ji(S,"nextSibling")},prev:function(S){return ji(S,"previousSibling")},nextAll:function(S){return at(S,"nextSibling")},prevAll:function(S){return at(S,"previousSibling")},nextUntil:function(S,I,U){return at(S,"nextSibling",U)},prevUntil:function(S,I,U){return at(S,"previousSibling",U)},siblings:function(S){return Ft((S.parentNode||{}).firstChild,S)},children:function(S){return Ft(S.firstChild)},contents:function(S){return S.contentDocument!=null&&Z(S.contentDocument)?S.contentDocument:(ye(S,"template")&&(S=S.content||S),G.merge([],S.childNodes))}},function(S,I){G.fn[S]=function(U,W){var se=G.map(this,I,U);return S.slice(-5)!=="Until"&&(W=U),W&&typeof W=="string"&&(se=G.filter(W,se)),this.length>1&&(lo[S]||G.uniqueSort(se),pn.test(S)&&se.reverse()),this.pushStack(se)}});var Xn=/[^\x20\t\r\n\f]+/g;function kr(S){var I={};return G.each(S.match(Xn)||[],function(U,W){I[W]=!0}),I}G.Callbacks=function(S){S=typeof S=="string"?kr(S):G.extend({},S);var I,U,W,se,le=[],Ce=[],Ze=-1,qe=function(){for(se=se||S.once,W=I=!0;Ce.length;Ze=-1)for(U=Ce.shift();++Ze<le.length;)le[Ze].apply(U[0],U[1])===!1&&S.stopOnFalse&&(Ze=le.length,U=!1);S.memory||(U=!1),I=!1,se&&(U?le=[]:le="")},mt={add:function(){return le&&(U&&!I&&(Ze=le.length-1,Ce.push(U)),function zt(vn){G.each(vn,function(Nt,$t){ae($t)?(!S.unique||!mt.has($t))&&le.push($t):$t&&$t.length&&Ae($t)!=="string"&&zt($t)})}(arguments),U&&!I&&qe()),this},remove:function(){return G.each(arguments,function(zt,vn){for(var Nt;(Nt=G.inArray(vn,le,Nt))>-1;)le.splice(Nt,1),Nt<=Ze&&Ze--}),this},has:function(zt){return zt?G.inArray(zt,le)>-1:le.length>0},empty:function(){return le&&(le=[]),this},disable:function(){return se=Ce=[],le=U="",this},disabled:function(){return!le},lock:function(){return se=Ce=[],!U&&!I&&(le=U=""),this},locked:function(){return!!se},fireWith:function(zt,vn){return se||(vn=vn||[],vn=[zt,vn.slice?vn.slice():vn],Ce.push(vn),I||qe()),this},fire:function(){return mt.fireWith(this,arguments),this},fired:function(){return!!W}};return mt};function lr(S){return S}function Qn(S){throw S}function Oi(S,I,U,W){var se;try{S&&ae(se=S.promise)?se.call(S).done(I).fail(U):S&&ae(se=S.then)?se.call(S,I,U):I.apply(void 0,[S].slice(W))}catch(le){U.apply(void 0,[le])}}G.extend({Deferred:function(S){var I=[["notify","progress",G.Callbacks("memory"),G.Callbacks("memory"),2],["resolve","done",G.Callbacks("once memory"),G.Callbacks("once memory"),0,"resolved"],["reject","fail",G.Callbacks("once memory"),G.Callbacks("once memory"),1,"rejected"]],U="pending",W={state:function(){return U},always:function(){return se.done(arguments).fail(arguments),this},catch:function(le){return W.then(null,le)},pipe:function(){var le=arguments;return G.Deferred(function(Ce){G.each(I,function(Ze,qe){var mt=ae(le[qe[4]])&&le[qe[4]];se[qe[1]](function(){var zt=mt&&mt.apply(this,arguments);zt&&ae(zt.promise)?zt.promise().progress(Ce.notify).done(Ce.resolve).fail(Ce.reject):Ce[qe[0]+"With"](this,mt?[zt]:arguments)})}),le=null}).promise()},then:function(le,Ce,Ze){var qe=0;function mt(zt,vn,Nt,$t){return function(){var rr=this,oi=arguments,br=function(){var Lo,va;if(!(zt<qe)){if(Lo=Nt.apply(rr,oi),Lo===vn.promise())throw new TypeError("Thenable self-resolution");va=Lo&&(typeof Lo=="object"||typeof Lo=="function")&&Lo.then,ae(va)?$t?va.call(Lo,mt(qe,vn,lr,$t),mt(qe,vn,Qn,$t)):(qe++,va.call(Lo,mt(qe,vn,lr,$t),mt(qe,vn,Qn,$t),mt(qe,vn,lr,vn.notifyWith))):(Nt!==lr&&(rr=void 0,oi=[Lo]),($t||vn.resolveWith)(rr,oi))}},fo=$t?br:function(){try{br()}catch(Lo){G.Deferred.exceptionHook&&G.Deferred.exceptionHook(Lo,fo.stackTrace),zt+1>=qe&&(Nt!==Qn&&(rr=void 0,oi=[Lo]),vn.rejectWith(rr,oi))}};zt?fo():(G.Deferred.getStackHook&&(fo.stackTrace=G.Deferred.getStackHook()),R.setTimeout(fo))}}return G.Deferred(function(zt){I[0][3].add(mt(0,zt,ae(Ze)?Ze:lr,zt.notifyWith)),I[1][3].add(mt(0,zt,ae(le)?le:lr)),I[2][3].add(mt(0,zt,ae(Ce)?Ce:Qn))}).promise()},promise:function(le){return le!=null?G.extend(le,W):W}},se={};return G.each(I,function(le,Ce){var Ze=Ce[2],qe=Ce[5];W[Ce[1]]=Ze.add,qe&&Ze.add(function(){U=qe},I[3-le][2].disable,I[3-le][3].disable,I[0][2].lock,I[0][3].lock),Ze.add(Ce[3].fire),se[Ce[0]]=function(){return se[Ce[0]+"With"](this===se?void 0:this,arguments),this},se[Ce[0]+"With"]=Ze.fireWith}),W.promise(se),S&&S.call(se,se),se},when:function(S){var I=arguments.length,U=I,W=Array(U),se=te.call(arguments),le=G.Deferred(),Ce=function(Ze){return function(qe){W[Ze]=this,se[Ze]=arguments.length>1?te.call(arguments):qe,--I||le.resolveWith(W,se)}};if(I<=1&&(Oi(S,le.done(Ce(U)).resolve,le.reject,!I),le.state()==="pending"||ae(se[U]&&se[U].then)))return le.then();for(;U--;)Oi(se[U],Ce(U),le.reject);return le.promise()}});var zr=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;G.Deferred.exceptionHook=function(S,I){R.console&&R.console.warn&&S&&zr.test(S.name)&&R.console.warn("jQuery.Deferred exception: "+S.message,S.stack,I)},G.readyException=function(S){R.setTimeout(function(){throw S})};var Yr=G.Deferred();G.fn.ready=function(S){return Yr.then(S).catch(function(I){G.readyException(I)}),this},G.extend({isReady:!1,readyWait:1,ready:function(S){(S===!0?--G.readyWait:G.isReady)||(G.isReady=!0,!(S!==!0&&--G.readyWait>0)&&Yr.resolveWith(fe,[G]))}}),G.ready.then=Yr.then;function to(){fe.removeEventListener("DOMContentLoaded",to),R.removeEventListener("load",to),G.ready()}fe.readyState==="complete"||fe.readyState!=="loading"&&!fe.documentElement.doScroll?R.setTimeout(G.ready):(fe.addEventListener("DOMContentLoaded",to),R.addEventListener("load",to));var Ts=function(S,I,U,W,se,le,Ce){var Ze=0,qe=S.length,mt=U==null;if(Ae(U)==="object"){se=!0;for(Ze in U)Ts(S,I,Ze,U[Ze],!0,le,Ce)}else if(W!==void 0&&(se=!0,ae(W)||(Ce=!0),mt&&(Ce?(I.call(S,W),I=null):(mt=I,I=function(zt,vn,Nt){return mt.call(G(zt),Nt)})),I))for(;Ze<qe;Ze++)I(S[Ze],U,Ce?W:W.call(S[Ze],Ze,I(S[Ze],U)));return se?S:mt?I.call(S):qe?I(S[0],U):le},oa=/^-ms-/,no=/-([a-z])/g;function Ko(S,I){return I.toUpperCase()}function Qr(S){return S.replace(oa,"ms-").replace(no,Ko)}var Bi=function(S){return S.nodeType===1||S.nodeType===9||!+S.nodeType};function $s(){this.expando=G.expando+$s.uid++}$s.uid=1,$s.prototype={cache:function(S){var I=S[this.expando];return I||(I={},Bi(S)&&(S.nodeType?S[this.expando]=I:Object.defineProperty(S,this.expando,{value:I,configurable:!0}))),I},set:function(S,I,U){var W,se=this.cache(S);if(typeof I=="string")se[Qr(I)]=U;else for(W in I)se[Qr(W)]=I[W];return se},get:function(S,I){return I===void 0?this.cache(S):S[this.expando]&&S[this.expando][Qr(I)]},access:function(S,I,U){return I===void 0||I&&typeof I=="string"&&U===void 0?this.get(S,I):(this.set(S,I,U),U!==void 0?U:I)},remove:function(S,I){var U,W=S[this.expando];if(W!==void 0){if(I!==void 0)for(Array.isArray(I)?I=I.map(Qr):(I=Qr(I),I=I in W?[I]:I.match(Xn)||[]),U=I.length;U--;)delete W[I[U]];(I===void 0||G.isEmptyObject(W))&&(S.nodeType?S[this.expando]=void 0:delete S[this.expando])}},hasData:function(S){var I=S[this.expando];return I!==void 0&&!G.isEmptyObject(I)}};var F=new $s,H=new $s,gf=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Oe=/[A-Z]/g;function lc(S){return S==="true"?!0:S==="false"?!1:S==="null"?null:S===+S+""?+S:gf.test(S)?JSON.parse(S):S}function gr(S,I,U){var W;if(U===void 0&&S.nodeType===1)if(W="data-"+I.replace(Oe,"-$&").toLowerCase(),U=S.getAttribute(W),typeof U=="string"){try{U=lc(U)}catch{}H.set(S,I,U)}else U=void 0;return U}G.extend({hasData:function(S){return H.hasData(S)||F.hasData(S)},data:function(S,I,U){return H.access(S,I,U)},removeData:function(S,I){H.remove(S,I)},_data:function(S,I,U){return F.access(S,I,U)},_removeData:function(S,I){F.remove(S,I)}}),G.fn.extend({data:function(S,I){var U,W,se,le=this[0],Ce=le&&le.attributes;if(S===void 0){if(this.length&&(se=H.get(le),le.nodeType===1&&!F.get(le,"hasDataAttrs"))){for(U=Ce.length;U--;)Ce[U]&&(W=Ce[U].name,W.indexOf("data-")===0&&(W=Qr(W.slice(5)),gr(le,W,se[W])));F.set(le,"hasDataAttrs",!0)}return se}return typeof S=="object"?this.each(function(){H.set(this,S)}):Ts(this,function(Ze){var qe;if(le&&Ze===void 0)return qe=H.get(le,S),qe!==void 0||(qe=gr(le,S),qe!==void 0)?qe:void 0;this.each(function(){H.set(this,S,Ze)})},null,I,arguments.length>1,null,!0)},removeData:function(S){return this.each(function(){H.remove(this,S)})}}),G.extend({queue:function(S,I,U){var W;if(S)return I=(I||"fx")+"queue",W=F.get(S,I),U&&(!W||Array.isArray(U)?W=F.access(S,I,G.makeArray(U)):W.push(U)),W||[]},dequeue:function(S,I){I=I||"fx";var U=G.queue(S,I),W=U.length,se=U.shift(),le=G._queueHooks(S,I),Ce=function(){G.dequeue(S,I)};se==="inprogress"&&(se=U.shift(),W--),se&&(I==="fx"&&U.unshift("inprogress"),delete le.stop,se.call(S,Ce,le)),!W&&le&&le.empty.fire()},_queueHooks:function(S,I){var U=I+"queueHooks";return F.get(S,U)||F.access(S,U,{empty:G.Callbacks("once memory").add(function(){F.remove(S,[I+"queue",U])})})}}),G.fn.extend({queue:function(S,I){var U=2;return typeof S!="string"&&(I=S,S="fx",U--),arguments.length<U?G.queue(this[0],S):I===void 0?this:this.each(function(){var W=G.queue(this,S,I);G._queueHooks(this,S),S==="fx"&&W[0]!=="inprogress"&&G.dequeue(this,S)})},dequeue:function(S){return this.each(function(){G.dequeue(this,S)})},clearQueue:function(S){return this.queue(S||"fx",[])},promise:function(S,I){var U,W=1,se=G.Deferred(),le=this,Ce=this.length,Ze=function(){--W||se.resolveWith(le,[le])};for(typeof S!="string"&&(I=S,S=void 0),S=S||"fx";Ce--;)U=F.get(le[Ce],S+"queueHooks"),U&&U.empty&&(W++,U.empty.add(Ze));return Ze(),se.promise(I)}});var Pa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rl=new RegExp("^(?:([+-])=|)("+Pa+")([a-z%]*)$","i"),qo=["Top","Right","Bottom","Left"],Ha=fe.documentElement,Pt=function(S){return G.contains(S.ownerDocument,S)},Jt={composed:!0};Ha.getRootNode&&(Pt=function(S){return G.contains(S.ownerDocument,S)||S.getRootNode(Jt)===S.ownerDocument});var xt=function(S,I){return S=I||S,S.style.display==="none"||S.style.display===""&&Pt(S)&&G.css(S,"display")==="none"};function ln(S,I,U,W){var se,le,Ce=20,Ze=W?function(){return W.cur()}:function(){return G.css(S,I,"")},qe=Ze(),mt=U&&U[3]||(G.cssNumber[I]?"":"px"),zt=S.nodeType&&(G.cssNumber[I]||mt!=="px"&&+qe)&&rl.exec(G.css(S,I));if(zt&&zt[3]!==mt){for(qe=qe/2,mt=mt||zt[3],zt=+qe||1;Ce--;)G.style(S,I,zt+mt),(1-le)*(1-(le=Ze()/qe||.5))<=0&&(Ce=0),zt=zt/le;zt=zt*2,G.style(S,I,zt+mt),U=U||[]}return U&&(zt=+zt||+qe||0,se=U[1]?zt+(U[1]+1)*U[2]:+U[2],W&&(W.unit=mt,W.start=zt,W.end=se)),se}var Gn={};function zi(S){var I,U=S.ownerDocument,W=S.nodeName,se=Gn[W];return se||(I=U.body.appendChild(U.createElement(W)),se=G.css(I,"display"),I.parentNode.removeChild(I),se==="none"&&(se="block"),Gn[W]=se,se)}function Lr(S,I){for(var U,W,se=[],le=0,Ce=S.length;le<Ce;le++)W=S[le],W.style&&(U=W.style.display,I?(U==="none"&&(se[le]=F.get(W,"display")||null,se[le]||(W.style.display="")),W.style.display===""&&xt(W)&&(se[le]=zi(W))):U!=="none"&&(se[le]="none",F.set(W,"display",U)));for(le=0;le<Ce;le++)se[le]!=null&&(S[le].style.display=se[le]);return S}G.fn.extend({show:function(){return Lr(this,!0)},hide:function(){return Lr(this)},toggle:function(S){return typeof S=="boolean"?S?this.show():this.hide():this.each(function(){xt(this)?G(this).show():G(this).hide()})}});var Hr=/^(?:checkbox|radio)$/i,Ar=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,gi=/^$|^module$|\/(?:java|ecma)script/i;(function(){var S=fe.createDocumentFragment(),I=S.appendChild(fe.createElement("div")),U=fe.createElement("input");U.setAttribute("type","radio"),U.setAttribute("checked","checked"),U.setAttribute("name","t"),I.appendChild(U),xe.checkClone=I.cloneNode(!0).cloneNode(!0).lastChild.checked,I.innerHTML="<textarea>x</textarea>",xe.noCloneChecked=!!I.cloneNode(!0).lastChild.defaultValue,I.innerHTML="<option></option>",xe.option=!!I.lastChild})();var Ur={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ur.tbody=Ur.tfoot=Ur.colgroup=Ur.caption=Ur.thead,Ur.th=Ur.td,xe.option||(Ur.optgroup=Ur.option=[1,"<select multiple='multiple'>","</select>"]);function ko(S,I){var U;return typeof S.getElementsByTagName<"u"?U=S.getElementsByTagName(I||"*"):typeof S.querySelectorAll<"u"?U=S.querySelectorAll(I||"*"):U=[],I===void 0||I&&ye(S,I)?G.merge([S],U):U}function Fc(S,I){for(var U=0,W=S.length;U<W;U++)F.set(S[U],"globalEval",!I||F.get(I[U],"globalEval"))}var vf=/<|&#?\w+;/;function mf(S,I,U,W,se){for(var le,Ce,Ze,qe,mt,zt,vn=I.createDocumentFragment(),Nt=[],$t=0,rr=S.length;$t<rr;$t++)if(le=S[$t],le||le===0)if(Ae(le)==="object")G.merge(Nt,le.nodeType?[le]:le);else if(!vf.test(le))Nt.push(I.createTextNode(le));else{for(Ce=Ce||vn.appendChild(I.createElement("div")),Ze=(Ar.exec(le)||["",""])[1].toLowerCase(),qe=Ur[Ze]||Ur._default,Ce.innerHTML=qe[1]+G.htmlPrefilter(le)+qe[2],zt=qe[0];zt--;)Ce=Ce.lastChild;G.merge(Nt,Ce.childNodes),Ce=vn.firstChild,Ce.textContent=""}for(vn.textContent="",$t=0;le=Nt[$t++];){if(W&&G.inArray(le,W)>-1){se&&se.push(le);continue}if(mt=Pt(le),Ce=ko(vn.appendChild(le),"script"),mt&&Fc(Ce),U)for(zt=0;le=Ce[zt++];)gi.test(le.type||"")&&U.push(le)}return vn}var Bc=/^([^.]*)(?:\.(.+)|)/;function Cc(){return!0}function Jo(){return!1}function yf(S,I){return S===Md()==(I==="focus")}function Md(){try{return fe.activeElement}catch{}}function Qo(S,I,U,W,se,le){var Ce,Ze;if(typeof I=="object"){typeof U!="string"&&(W=W||U,U=void 0);for(Ze in I)Qo(S,Ze,U,W,I[Ze],le);return S}if(W==null&&se==null?(se=U,W=U=void 0):se==null&&(typeof U=="string"?(se=W,W=void 0):(se=W,W=U,U=void 0)),se===!1)se=Jo;else if(!se)return S;return le===1&&(Ce=se,se=function(qe){return G().off(qe),Ce.apply(this,arguments)},se.guid=Ce.guid||(Ce.guid=G.guid++)),S.each(function(){G.event.add(this,I,se,W,U)})}G.event={global:{},add:function(S,I,U,W,se){var le,Ce,Ze,qe,mt,zt,vn,Nt,$t,rr,oi,br=F.get(S);if(!!Bi(S))for(U.handler&&(le=U,U=le.handler,se=le.selector),se&&G.find.matchesSelector(Ha,se),U.guid||(U.guid=G.guid++),(qe=br.events)||(qe=br.events=Object.create(null)),(Ce=br.handle)||(Ce=br.handle=function(fo){return typeof G<"u"&&G.event.triggered!==fo.type?G.event.dispatch.apply(S,arguments):void 0}),I=(I||"").match(Xn)||[""],mt=I.length;mt--;)Ze=Bc.exec(I[mt])||[],$t=oi=Ze[1],rr=(Ze[2]||"").split(".").sort(),$t&&(vn=G.event.special[$t]||{},$t=(se?vn.delegateType:vn.bindType)||$t,vn=G.event.special[$t]||{},zt=G.extend({type:$t,origType:oi,data:W,handler:U,guid:U.guid,selector:se,needsContext:se&&G.expr.match.needsContext.test(se),namespace:rr.join(".")},le),(Nt=qe[$t])||(Nt=qe[$t]=[],Nt.delegateCount=0,(!vn.setup||vn.setup.call(S,W,rr,Ce)===!1)&&S.addEventListener&&S.addEventListener($t,Ce)),vn.add&&(vn.add.call(S,zt),zt.handler.guid||(zt.handler.guid=U.guid)),se?Nt.splice(Nt.delegateCount++,0,zt):Nt.push(zt),G.event.global[$t]=!0)},remove:function(S,I,U,W,se){var le,Ce,Ze,qe,mt,zt,vn,Nt,$t,rr,oi,br=F.hasData(S)&&F.get(S);if(!(!br||!(qe=br.events))){for(I=(I||"").match(Xn)||[""],mt=I.length;mt--;){if(Ze=Bc.exec(I[mt])||[],$t=oi=Ze[1],rr=(Ze[2]||"").split(".").sort(),!$t){for($t in qe)G.event.remove(S,$t+I[mt],U,W,!0);continue}for(vn=G.event.special[$t]||{},$t=(W?vn.delegateType:vn.bindType)||$t,Nt=qe[$t]||[],Ze=Ze[2]&&new RegExp("(^|\\.)"+rr.join("\\.(?:.*\\.|)")+"(\\.|$)"),Ce=le=Nt.length;le--;)zt=Nt[le],(se||oi===zt.origType)&&(!U||U.guid===zt.guid)&&(!Ze||Ze.test(zt.namespace))&&(!W||W===zt.selector||W==="**"&&zt.selector)&&(Nt.splice(le,1),zt.selector&&Nt.delegateCount--,vn.remove&&vn.remove.call(S,zt));Ce&&!Nt.length&&((!vn.teardown||vn.teardown.call(S,rr,br.handle)===!1)&&G.removeEvent(S,$t,br.handle),delete qe[$t])}G.isEmptyObject(qe)&&F.remove(S,"handle events")}},dispatch:function(S){var I,U,W,se,le,Ce,Ze=new Array(arguments.length),qe=G.event.fix(S),mt=(F.get(this,"events")||Object.create(null))[qe.type]||[],zt=G.event.special[qe.type]||{};for(Ze[0]=qe,I=1;I<arguments.length;I++)Ze[I]=arguments[I];if(qe.delegateTarget=this,!(zt.preDispatch&&zt.preDispatch.call(this,qe)===!1)){for(Ce=G.event.handlers.call(this,qe,mt),I=0;(se=Ce[I++])&&!qe.isPropagationStopped();)for(qe.currentTarget=se.elem,U=0;(le=se.handlers[U++])&&!qe.isImmediatePropagationStopped();)(!qe.rnamespace||le.namespace===!1||qe.rnamespace.test(le.namespace))&&(qe.handleObj=le,qe.data=le.data,W=((G.event.special[le.origType]||{}).handle||le.handler).apply(se.elem,Ze),W!==void 0&&(qe.result=W)===!1&&(qe.preventDefault(),qe.stopPropagation()));return zt.postDispatch&&zt.postDispatch.call(this,qe),qe.result}},handlers:function(S,I){var U,W,se,le,Ce,Ze=[],qe=I.delegateCount,mt=S.target;if(qe&&mt.nodeType&&!(S.type==="click"&&S.button>=1)){for(;mt!==this;mt=mt.parentNode||this)if(mt.nodeType===1&&!(S.type==="click"&&mt.disabled===!0)){for(le=[],Ce={},U=0;U<qe;U++)W=I[U],se=W.selector+" ",Ce[se]===void 0&&(Ce[se]=W.needsContext?G(se,this).index(mt)>-1:G.find(se,this,null,[mt]).length),Ce[se]&&le.push(W);le.length&&Ze.push({elem:mt,handlers:le})}}return mt=this,qe<I.length&&Ze.push({elem:mt,handlers:I.slice(qe)}),Ze},addProp:function(S,I){Object.defineProperty(G.Event.prototype,S,{enumerable:!0,configurable:!0,get:ae(I)?function(){if(this.originalEvent)return I(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[S]},set:function(U){Object.defineProperty(this,S,{enumerable:!0,configurable:!0,writable:!0,value:U})}})},fix:function(S){return S[G.expando]?S:new G.Event(S)},special:{load:{noBubble:!0},click:{setup:function(S){var I=this||S;return Hr.test(I.type)&&I.click&&ye(I,"input")&&wh(I,"click",Cc),!1},trigger:function(S){var I=this||S;return Hr.test(I.type)&&I.click&&ye(I,"input")&&wh(I,"click"),!0},_default:function(S){var I=S.target;return Hr.test(I.type)&&I.click&&ye(I,"input")&&F.get(I,"click")||ye(I,"a")}},beforeunload:{postDispatch:function(S){S.result!==void 0&&S.originalEvent&&(S.originalEvent.returnValue=S.result)}}}};function wh(S,I,U){if(!U){F.get(S,I)===void 0&&G.event.add(S,I,Cc);return}F.set(S,I,!1),G.event.add(S,I,{namespace:!1,handler:function(W){var se,le,Ce=F.get(this,I);if(W.isTrigger&1&&this[I]){if(Ce.length)(G.event.special[I]||{}).delegateType&&W.stopPropagation();else if(Ce=te.call(arguments),F.set(this,I,Ce),se=U(this,I),this[I](),le=F.get(this,I),Ce!==le||se?F.set(this,I,!1):le={},Ce!==le)return W.stopImmediatePropagation(),W.preventDefault(),le&&le.value}else Ce.length&&(F.set(this,I,{value:G.event.trigger(G.extend(Ce[0],G.Event.prototype),Ce.slice(1),this)}),W.stopImmediatePropagation())}})}G.removeEvent=function(S,I,U){S.removeEventListener&&S.removeEventListener(I,U)},G.Event=function(S,I){if(!(this instanceof G.Event))return new G.Event(S,I);S&&S.type?(this.originalEvent=S,this.type=S.type,this.isDefaultPrevented=S.defaultPrevented||S.defaultPrevented===void 0&&S.returnValue===!1?Cc:Jo,this.target=S.target&&S.target.nodeType===3?S.target.parentNode:S.target,this.currentTarget=S.currentTarget,this.relatedTarget=S.relatedTarget):this.type=S,I&&G.extend(this,I),this.timeStamp=S&&S.timeStamp||Date.now(),this[G.expando]=!0},G.Event.prototype={constructor:G.Event,isDefaultPrevented:Jo,isPropagationStopped:Jo,isImmediatePropagationStopped:Jo,isSimulated:!1,preventDefault:function(){var S=this.originalEvent;this.isDefaultPrevented=Cc,S&&!this.isSimulated&&S.preventDefault()},stopPropagation:function(){var S=this.originalEvent;this.isPropagationStopped=Cc,S&&!this.isSimulated&&S.stopPropagation()},stopImmediatePropagation:function(){var S=this.originalEvent;this.isImmediatePropagationStopped=Cc,S&&!this.isSimulated&&S.stopImmediatePropagation(),this.stopPropagation()}},G.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},G.event.addProp),G.each({focus:"focusin",blur:"focusout"},function(S,I){G.event.special[S]={setup:function(){return wh(this,S,yf),!1},trigger:function(){return wh(this,S),!0},_default:function(){return!0},delegateType:I}}),G.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(S,I){G.event.special[S]={delegateType:I,bindType:I,handle:function(U){var W,se=this,le=U.relatedTarget,Ce=U.handleObj;return(!le||le!==se&&!G.contains(se,le))&&(U.type=Ce.origType,W=Ce.handler.apply(this,arguments),U.type=I),W}}}),G.fn.extend({on:function(S,I,U,W){return Qo(this,S,I,U,W)},one:function(S,I,U,W){return Qo(this,S,I,U,W,1)},off:function(S,I,U){var W,se;if(S&&S.preventDefault&&S.handleObj)return W=S.handleObj,G(S.delegateTarget).off(W.namespace?W.origType+"."+W.namespace:W.origType,W.selector,W.handler),this;if(typeof S=="object"){for(se in S)this.off(se,I,S[se]);return this}return(I===!1||typeof I=="function")&&(U=I,I=void 0),U===!1&&(U=Jo),this.each(function(){G.event.remove(this,S,U,I)})}});var vp=/<script|<style|<link/i,mp=/checked\s*(?:[^=]|=\s*.checked.)/i,il=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Hi(S,I){return ye(S,"table")&&ye(I.nodeType!==11?I:I.firstChild,"tr")&&G(S).children("tbody")[0]||S}function uo(S){return S.type=(S.getAttribute("type")!==null)+"/"+S.type,S}function ei(S){return(S.type||"").slice(0,5)==="true/"?S.type=S.type.slice(5):S.removeAttribute("type"),S}function Do(S,I){var U,W,se,le,Ce,Ze,qe;if(I.nodeType===1){if(F.hasData(S)&&(le=F.get(S),qe=le.events,qe)){F.remove(I,"handle events");for(se in qe)for(U=0,W=qe[se].length;U<W;U++)G.event.add(I,se,qe[se][U])}H.hasData(S)&&(Ce=H.access(S),Ze=G.extend({},Ce),H.set(I,Ze))}}function Ms(S,I){var U=I.nodeName.toLowerCase();U==="input"&&Hr.test(S.type)?I.checked=S.checked:(U==="input"||U==="textarea")&&(I.defaultValue=S.defaultValue)}function Jl(S,I,U,W){I=Q(I);var se,le,Ce,Ze,qe,mt,zt=0,vn=S.length,Nt=vn-1,$t=I[0],rr=ae($t);if(rr||vn>1&&typeof $t=="string"&&!xe.checkClone&&mp.test($t))return S.each(function(oi){var br=S.eq(oi);rr&&(I[0]=$t.call(this,oi,br.html())),Jl(br,I,U,W)});if(vn&&(se=mf(I,S[0].ownerDocument,!1,S,W),le=se.firstChild,se.childNodes.length===1&&(se=le),le||W)){for(Ce=G.map(ko(se,"script"),uo),Ze=Ce.length;zt<vn;zt++)qe=se,zt!==Nt&&(qe=G.clone(qe,!0,!0),Ze&&G.merge(Ce,ko(qe,"script"))),U.call(S[zt],qe,zt);if(Ze)for(mt=Ce[Ce.length-1].ownerDocument,G.map(Ce,ei),zt=0;zt<Ze;zt++)qe=Ce[zt],gi.test(qe.type||"")&&!F.access(qe,"globalEval")&&G.contains(mt,qe)&&(qe.src&&(qe.type||"").toLowerCase()!=="module"?G._evalUrl&&!qe.noModule&&G._evalUrl(qe.src,{nonce:qe.nonce||qe.getAttribute("nonce")},mt):pe(qe.textContent.replace(il,""),qe,mt))}return S}function yp(S,I,U){for(var W,se=I?G.filter(I,S):S,le=0;(W=se[le])!=null;le++)!U&&W.nodeType===1&&G.cleanData(ko(W)),W.parentNode&&(U&&Pt(W)&&Fc(ko(W,"script")),W.parentNode.removeChild(W));return S}G.extend({htmlPrefilter:function(S){return S},clone:function(S,I,U){var W,se,le,Ce,Ze=S.cloneNode(!0),qe=Pt(S);if(!xe.noCloneChecked&&(S.nodeType===1||S.nodeType===11)&&!G.isXMLDoc(S))for(Ce=ko(Ze),le=ko(S),W=0,se=le.length;W<se;W++)Ms(le[W],Ce[W]);if(I)if(U)for(le=le||ko(S),Ce=Ce||ko(Ze),W=0,se=le.length;W<se;W++)Do(le[W],Ce[W]);else Do(S,Ze);return Ce=ko(Ze,"script"),Ce.length>0&&Fc(Ce,!qe&&ko(S,"script")),Ze},cleanData:function(S){for(var I,U,W,se=G.event.special,le=0;(U=S[le])!==void 0;le++)if(Bi(U)){if(I=U[F.expando]){if(I.events)for(W in I.events)se[W]?G.event.remove(U,W):G.removeEvent(U,W,I.handle);U[F.expando]=void 0}U[H.expando]&&(U[H.expando]=void 0)}}}),G.fn.extend({detach:function(S){return yp(this,S,!0)},remove:function(S){return yp(this,S)},text:function(S){return Ts(this,function(I){return I===void 0?G.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=I)})},null,S,arguments.length)},append:function(){return Jl(this,arguments,function(S){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var I=Hi(this,S);I.appendChild(S)}})},prepend:function(){return Jl(this,arguments,function(S){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var I=Hi(this,S);I.insertBefore(S,I.firstChild)}})},before:function(){return Jl(this,arguments,function(S){this.parentNode&&this.parentNode.insertBefore(S,this)})},after:function(){return Jl(this,arguments,function(S){this.parentNode&&this.parentNode.insertBefore(S,this.nextSibling)})},empty:function(){for(var S,I=0;(S=this[I])!=null;I++)S.nodeType===1&&(G.cleanData(ko(S,!1)),S.textContent="");return this},clone:function(S,I){return S=S??!1,I=I??S,this.map(function(){return G.clone(this,S,I)})},html:function(S){return Ts(this,function(I){var U=this[0]||{},W=0,se=this.length;if(I===void 0&&U.nodeType===1)return U.innerHTML;if(typeof I=="string"&&!vp.test(I)&&!Ur[(Ar.exec(I)||["",""])[1].toLowerCase()]){I=G.htmlPrefilter(I);try{for(;W<se;W++)U=this[W]||{},U.nodeType===1&&(G.cleanData(ko(U,!1)),U.innerHTML=I);U=0}catch{}}U&&this.empty().append(I)},null,S,arguments.length)},replaceWith:function(){var S=[];return Jl(this,arguments,function(I){var U=this.parentNode;G.inArray(this,S)<0&&(G.cleanData(ko(this)),U&&U.replaceChild(I,this))},S)}}),G.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(S,I){G.fn[S]=function(U){for(var W,se=[],le=G(U),Ce=le.length-1,Ze=0;Ze<=Ce;Ze++)W=Ze===Ce?this:this.clone(!0),G(le[Ze])[I](W),de.apply(se,W.get());return this.pushStack(se)}});var bf=new RegExp("^("+Pa+")(?!px)[a-z%]+$","i"),Eh=function(S){var I=S.ownerDocument.defaultView;return(!I||!I.opener)&&(I=R),I.getComputedStyle(S)},bp=function(S,I,U){var W,se,le={};for(se in I)le[se]=S.style[se],S.style[se]=I[se];W=U.call(S);for(se in I)S.style[se]=le[se];return W},xp=new RegExp(qo.join("|"),"i");(function(){function S(){if(!!mt){qe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",mt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ha.appendChild(qe).appendChild(mt);var zt=R.getComputedStyle(mt);U=zt.top!=="1%",Ze=I(zt.marginLeft)===12,mt.style.right="60%",le=I(zt.right)===36,W=I(zt.width)===36,mt.style.position="absolute",se=I(mt.offsetWidth/3)===12,Ha.removeChild(qe),mt=null}}function I(zt){return Math.round(parseFloat(zt))}var U,W,se,le,Ce,Ze,qe=fe.createElement("div"),mt=fe.createElement("div");!mt.style||(mt.style.backgroundClip="content-box",mt.cloneNode(!0).style.backgroundClip="",xe.clearCloneStyle=mt.style.backgroundClip==="content-box",G.extend(xe,{boxSizingReliable:function(){return S(),W},pixelBoxStyles:function(){return S(),le},pixelPosition:function(){return S(),U},reliableMarginLeft:function(){return S(),Ze},scrollboxSize:function(){return S(),se},reliableTrDimensions:function(){var zt,vn,Nt,$t;return Ce==null&&(zt=fe.createElement("table"),vn=fe.createElement("tr"),Nt=fe.createElement("div"),zt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",vn.style.cssText="border:1px solid",vn.style.height="1px",Nt.style.height="9px",Nt.style.display="block",Ha.appendChild(zt).appendChild(vn).appendChild(Nt),$t=R.getComputedStyle(vn),Ce=parseInt($t.height,10)+parseInt($t.borderTopWidth,10)+parseInt($t.borderBottomWidth,10)===vn.offsetHeight,Ha.removeChild(zt)),Ce}}))})();function Od(S,I,U){var W,se,le,Ce,Ze=S.style;return U=U||Eh(S),U&&(Ce=U.getPropertyValue(I)||U[I],Ce===""&&!Pt(S)&&(Ce=G.style(S,I)),!xe.pixelBoxStyles()&&bf.test(Ce)&&xp.test(I)&&(W=Ze.width,se=Ze.minWidth,le=Ze.maxWidth,Ze.minWidth=Ze.maxWidth=Ze.width=Ce,Ce=U.width,Ze.width=W,Ze.minWidth=se,Ze.maxWidth=le)),Ce!==void 0?Ce+"":Ce}function Ml(S,I){return{get:function(){if(S()){delete this.get;return}return(this.get=I).apply(this,arguments)}}}var Ol=["Webkit","Moz","ms"],Ou=fe.createElement("div").style,xf={};function Pu(S){for(var I=S[0].toUpperCase()+S.slice(1),U=Ol.length;U--;)if(S=Ol[U]+I,S in Ou)return S}function Ql(S){var I=G.cssProps[S]||xf[S];return I||(S in Ou?S:xf[S]=Pu(S)||S)}var Pd=/^(none|table(?!-c[ea]).+)/,Dd=/^--/,mg={position:"absolute",visibility:"hidden",display:"block"},Cp={letterSpacing:"0",fontWeight:"400"};function pa(S,I,U){var W=rl.exec(I);return W?Math.max(0,W[2]-(U||0))+(W[3]||"px"):I}function Du(S,I,U,W,se,le){var Ce=I==="width"?1:0,Ze=0,qe=0;if(U===(W?"border":"content"))return 0;for(;Ce<4;Ce+=2)U==="margin"&&(qe+=G.css(S,U+qo[Ce],!0,se)),W?(U==="content"&&(qe-=G.css(S,"padding"+qo[Ce],!0,se)),U!=="margin"&&(qe-=G.css(S,"border"+qo[Ce]+"Width",!0,se))):(qe+=G.css(S,"padding"+qo[Ce],!0,se),U!=="padding"?qe+=G.css(S,"border"+qo[Ce]+"Width",!0,se):Ze+=G.css(S,"border"+qo[Ce]+"Width",!0,se));return!W&&le>=0&&(qe+=Math.max(0,Math.ceil(S["offset"+I[0].toUpperCase()+I.slice(1)]-le-qe-Ze-.5))||0),qe}function xs(S,I,U){var W=Eh(S),se=!xe.boxSizingReliable()||U,le=se&&G.css(S,"boxSizing",!1,W)==="border-box",Ce=le,Ze=Od(S,I,W),qe="offset"+I[0].toUpperCase()+I.slice(1);if(bf.test(Ze)){if(!U)return Ze;Ze="auto"}return(!xe.boxSizingReliable()&&le||!xe.reliableTrDimensions()&&ye(S,"tr")||Ze==="auto"||!parseFloat(Ze)&&G.css(S,"display",!1,W)==="inline")&&S.getClientRects().length&&(le=G.css(S,"boxSizing",!1,W)==="border-box",Ce=qe in S,Ce&&(Ze=S[qe])),Ze=parseFloat(Ze)||0,Ze+Du(S,I,U||(le?"border":"content"),Ce,W,Ze)+"px"}G.extend({cssHooks:{opacity:{get:function(S,I){if(I){var U=Od(S,"opacity");return U===""?"1":U}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(S,I,U,W){if(!(!S||S.nodeType===3||S.nodeType===8||!S.style)){var se,le,Ce,Ze=Qr(I),qe=Dd.test(I),mt=S.style;if(qe||(I=Ql(Ze)),Ce=G.cssHooks[I]||G.cssHooks[Ze],U!==void 0){if(le=typeof U,le==="string"&&(se=rl.exec(U))&&se[1]&&(U=ln(S,I,se),le="number"),U==null||U!==U)return;le==="number"&&!qe&&(U+=se&&se[3]||(G.cssNumber[Ze]?"":"px")),!xe.clearCloneStyle&&U===""&&I.indexOf("background")===0&&(mt[I]="inherit"),(!Ce||!("set"in Ce)||(U=Ce.set(S,U,W))!==void 0)&&(qe?mt.setProperty(I,U):mt[I]=U)}else return Ce&&"get"in Ce&&(se=Ce.get(S,!1,W))!==void 0?se:mt[I]}},css:function(S,I,U,W){var se,le,Ce,Ze=Qr(I),qe=Dd.test(I);return qe||(I=Ql(Ze)),Ce=G.cssHooks[I]||G.cssHooks[Ze],Ce&&"get"in Ce&&(se=Ce.get(S,!0,U)),se===void 0&&(se=Od(S,I,W)),se==="normal"&&I in Cp&&(se=Cp[I]),U===""||U?(le=parseFloat(se),U===!0||isFinite(le)?le||0:se):se}}),G.each(["height","width"],function(S,I){G.cssHooks[I]={get:function(U,W,se){if(W)return Pd.test(G.css(U,"display"))&&(!U.getClientRects().length||!U.getBoundingClientRect().width)?bp(U,mg,function(){return xs(U,I,se)}):xs(U,I,se)},set:function(U,W,se){var le,Ce=Eh(U),Ze=!xe.scrollboxSize()&&Ce.position==="absolute",qe=Ze||se,mt=qe&&G.css(U,"boxSizing",!1,Ce)==="border-box",zt=se?Du(U,I,se,mt,Ce):0;return mt&&Ze&&(zt-=Math.ceil(U["offset"+I[0].toUpperCase()+I.slice(1)]-parseFloat(Ce[I])-Du(U,I,"border",!1,Ce)-.5)),zt&&(le=rl.exec(W))&&(le[3]||"px")!=="px"&&(U.style[I]=W,W=G.css(U,I)),pa(U,W,zt)}}}),G.cssHooks.marginLeft=Ml(xe.reliableMarginLeft,function(S,I){if(I)return(parseFloat(Od(S,"marginLeft"))||S.getBoundingClientRect().left-bp(S,{marginLeft:0},function(){return S.getBoundingClientRect().left}))+"px"}),G.each({margin:"",padding:"",border:"Width"},function(S,I){G.cssHooks[S+I]={expand:function(U){for(var W=0,se={},le=typeof U=="string"?U.split(" "):[U];W<4;W++)se[S+qo[W]+I]=le[W]||le[W-2]||le[0];return se}},S!=="margin"&&(G.cssHooks[S+I].set=pa)}),G.fn.extend({css:function(S,I){return Ts(this,function(U,W,se){var le,Ce,Ze={},qe=0;if(Array.isArray(W)){for(le=Eh(U),Ce=W.length;qe<Ce;qe++)Ze[W[qe]]=G.css(U,W[qe],!1,le);return Ze}return se!==void 0?G.style(U,W,se):G.css(U,W)},S,I,arguments.length>1)}});function sa(S,I,U,W,se){return new sa.prototype.init(S,I,U,W,se)}G.Tween=sa,sa.prototype={constructor:sa,init:function(S,I,U,W,se,le){this.elem=S,this.prop=U,this.easing=se||G.easing._default,this.options=I,this.start=this.now=this.cur(),this.end=W,this.unit=le||(G.cssNumber[U]?"":"px")},cur:function(){var S=sa.propHooks[this.prop];return S&&S.get?S.get(this):sa.propHooks._default.get(this)},run:function(S){var I,U=sa.propHooks[this.prop];return this.options.duration?this.pos=I=G.easing[this.easing](S,this.options.duration*S,0,1,this.options.duration):this.pos=I=S,this.now=(this.end-this.start)*I+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),U&&U.set?U.set(this):sa.propHooks._default.set(this),this}},sa.prototype.init.prototype=sa.prototype,sa.propHooks={_default:{get:function(S){var I;return S.elem.nodeType!==1||S.elem[S.prop]!=null&&S.elem.style[S.prop]==null?S.elem[S.prop]:(I=G.css(S.elem,S.prop,""),!I||I==="auto"?0:I)},set:function(S){G.fx.step[S.prop]?G.fx.step[S.prop](S):S.elem.nodeType===1&&(G.cssHooks[S.prop]||S.elem.style[Ql(S.prop)]!=null)?G.style(S.elem,S.prop,S.now+S.unit):S.elem[S.prop]=S.now}}},sa.propHooks.scrollTop=sa.propHooks.scrollLeft={set:function(S){S.elem.nodeType&&S.elem.parentNode&&(S.elem[S.prop]=S.now)}},G.easing={linear:function(S){return S},swing:function(S){return .5-Math.cos(S*Math.PI)/2},_default:"swing"},G.fx=sa.prototype.init,G.fx.step={};var Nd,Cf,S0=/^(?:toggle|show|hide)$/,_0=/queueHooks$/;function wf(){Cf&&(fe.hidden===!1&&R.requestAnimationFrame?R.requestAnimationFrame(wf):R.setTimeout(wf,G.fx.interval),G.fx.tick())}function zc(){return R.setTimeout(function(){Nd=void 0}),Nd=Date.now()}function Nu(S,I){var U,W=0,se={height:S};for(I=I?1:0;W<4;W+=2-I)U=qo[W],se["margin"+U]=se["padding"+U]=S;return I&&(se.opacity=se.width=S),se}function Ef(S,I,U){for(var W,se=(ls.tweeners[I]||[]).concat(ls.tweeners["*"]),le=0,Ce=se.length;le<Ce;le++)if(W=se[le].call(U,I,S))return W}function wp(S,I,U){var W,se,le,Ce,Ze,qe,mt,zt,vn="width"in I||"height"in I,Nt=this,$t={},rr=S.style,oi=S.nodeType&&xt(S),br=F.get(S,"fxshow");U.queue||(Ce=G._queueHooks(S,"fx"),Ce.unqueued==null&&(Ce.unqueued=0,Ze=Ce.empty.fire,Ce.empty.fire=function(){Ce.unqueued||Ze()}),Ce.unqueued++,Nt.always(function(){Nt.always(function(){Ce.unqueued--,G.queue(S,"fx").length||Ce.empty.fire()})}));for(W in I)if(se=I[W],S0.test(se)){if(delete I[W],le=le||se==="toggle",se===(oi?"hide":"show"))if(se==="show"&&br&&br[W]!==void 0)oi=!0;else continue;$t[W]=br&&br[W]||G.style(S,W)}if(qe=!G.isEmptyObject(I),!(!qe&&G.isEmptyObject($t))){vn&&S.nodeType===1&&(U.overflow=[rr.overflow,rr.overflowX,rr.overflowY],mt=br&&br.display,mt==null&&(mt=F.get(S,"display")),zt=G.css(S,"display"),zt==="none"&&(mt?zt=mt:(Lr([S],!0),mt=S.style.display||mt,zt=G.css(S,"display"),Lr([S]))),(zt==="inline"||zt==="inline-block"&&mt!=null)&&G.css(S,"float")==="none"&&(qe||(Nt.done(function(){rr.display=mt}),mt==null&&(zt=rr.display,mt=zt==="none"?"":zt)),rr.display="inline-block")),U.overflow&&(rr.overflow="hidden",Nt.always(function(){rr.overflow=U.overflow[0],rr.overflowX=U.overflow[1],rr.overflowY=U.overflow[2]})),qe=!1;for(W in $t)qe||(br?"hidden"in br&&(oi=br.hidden):br=F.access(S,"fxshow",{display:mt}),le&&(br.hidden=!oi),oi&&Lr([S],!0),Nt.done(function(){oi||Lr([S]),F.remove(S,"fxshow");for(W in $t)G.style(S,W,$t[W])})),qe=Ef(oi?br[W]:0,W,Nt),W in br||(br[W]=qe.start,oi&&(qe.end=qe.start,qe.start=0))}}function Iu(S,I){var U,W,se,le,Ce;for(U in S)if(W=Qr(U),se=I[W],le=S[U],Array.isArray(le)&&(se=le[1],le=S[U]=le[0]),U!==W&&(S[W]=le,delete S[U]),Ce=G.cssHooks[W],Ce&&"expand"in Ce){le=Ce.expand(le),delete S[W];for(U in le)U in S||(S[U]=le[U],I[U]=se)}else I[W]=se}function ls(S,I,U){var W,se,le=0,Ce=ls.prefilters.length,Ze=G.Deferred().always(function(){delete qe.elem}),qe=function(){if(se)return!1;for(var vn=Nd||zc(),Nt=Math.max(0,mt.startTime+mt.duration-vn),$t=Nt/mt.duration||0,rr=1-$t,oi=0,br=mt.tweens.length;oi<br;oi++)mt.tweens[oi].run(rr);return Ze.notifyWith(S,[mt,rr,Nt]),rr<1&&br?Nt:(br||Ze.notifyWith(S,[mt,1,0]),Ze.resolveWith(S,[mt]),!1)},mt=Ze.promise({elem:S,props:G.extend({},I),opts:G.extend(!0,{specialEasing:{},easing:G.easing._default},U),originalProperties:I,originalOptions:U,startTime:Nd||zc(),duration:U.duration,tweens:[],createTween:function(vn,Nt){var $t=G.Tween(S,mt.opts,vn,Nt,mt.opts.specialEasing[vn]||mt.opts.easing);return mt.tweens.push($t),$t},stop:function(vn){var Nt=0,$t=vn?mt.tweens.length:0;if(se)return this;for(se=!0;Nt<$t;Nt++)mt.tweens[Nt].run(1);return vn?(Ze.notifyWith(S,[mt,1,0]),Ze.resolveWith(S,[mt,vn])):Ze.rejectWith(S,[mt,vn]),this}}),zt=mt.props;for(Iu(zt,mt.opts.specialEasing);le<Ce;le++)if(W=ls.prefilters[le].call(mt,S,zt,mt.opts),W)return ae(W.stop)&&(G._queueHooks(mt.elem,mt.opts.queue).stop=W.stop.bind(W)),W;return G.map(zt,Ef,mt),ae(mt.opts.start)&&mt.opts.start.call(S,mt),mt.progress(mt.opts.progress).done(mt.opts.done,mt.opts.complete).fail(mt.opts.fail).always(mt.opts.always),G.fx.timer(G.extend(qe,{elem:S,anim:mt,queue:mt.opts.queue})),mt}G.Animation=G.extend(ls,{tweeners:{"*":[function(S,I){var U=this.createTween(S,I);return ln(U.elem,S,rl.exec(I),U),U}]},tweener:function(S,I){ae(S)?(I=S,S=["*"]):S=S.match(Xn);for(var U,W=0,se=S.length;W<se;W++)U=S[W],ls.tweeners[U]=ls.tweeners[U]||[],ls.tweeners[U].unshift(I)},prefilters:[wp],prefilter:function(S,I){I?ls.prefilters.unshift(S):ls.prefilters.push(S)}}),G.speed=function(S,I,U){var W=S&&typeof S=="object"?G.extend({},S):{complete:U||!U&&I||ae(S)&&S,duration:S,easing:U&&I||I&&!ae(I)&&I};return G.fx.off?W.duration=0:typeof W.duration!="number"&&(W.duration in G.fx.speeds?W.duration=G.fx.speeds[W.duration]:W.duration=G.fx.speeds._default),(W.queue==null||W.queue===!0)&&(W.queue="fx"),W.old=W.complete,W.complete=function(){ae(W.old)&&W.old.call(this),W.queue&&G.dequeue(this,W.queue)},W},G.fn.extend({fadeTo:function(S,I,U,W){return this.filter(xt).css("opacity",0).show().end().animate({opacity:I},S,U,W)},animate:function(S,I,U,W){var se=G.isEmptyObject(S),le=G.speed(I,U,W),Ce=function(){var Ze=ls(this,G.extend({},S),le);(se||F.get(this,"finish"))&&Ze.stop(!0)};return Ce.finish=Ce,se||le.queue===!1?this.each(Ce):this.queue(le.queue,Ce)},stop:function(S,I,U){var W=function(se){var le=se.stop;delete se.stop,le(U)};return typeof S!="string"&&(U=I,I=S,S=void 0),I&&this.queue(S||"fx",[]),this.each(function(){var se=!0,le=S!=null&&S+"queueHooks",Ce=G.timers,Ze=F.get(this);if(le)Ze[le]&&Ze[le].stop&&W(Ze[le]);else for(le in Ze)Ze[le]&&Ze[le].stop&&_0.test(le)&&W(Ze[le]);for(le=Ce.length;le--;)Ce[le].elem===this&&(S==null||Ce[le].queue===S)&&(Ce[le].anim.stop(U),se=!1,Ce.splice(le,1));(se||!U)&&G.dequeue(this,S)})},finish:function(S){return S!==!1&&(S=S||"fx"),this.each(function(){var I,U=F.get(this),W=U[S+"queue"],se=U[S+"queueHooks"],le=G.timers,Ce=W?W.length:0;for(U.finish=!0,G.queue(this,S,[]),se&&se.stop&&se.stop.call(this,!0),I=le.length;I--;)le[I].elem===this&&le[I].queue===S&&(le[I].anim.stop(!0),le.splice(I,1));for(I=0;I<Ce;I++)W[I]&&W[I].finish&&W[I].finish.call(this);delete U.finish})}}),G.each(["toggle","show","hide"],function(S,I){var U=G.fn[I];G.fn[I]=function(W,se,le){return W==null||typeof W=="boolean"?U.apply(this,arguments):this.animate(Nu(I,!0),W,se,le)}}),G.each({slideDown:Nu("show"),slideUp:Nu("hide"),slideToggle:Nu("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(S,I){G.fn[S]=function(U,W,se){return this.animate(I,U,W,se)}}),G.timers=[],G.fx.tick=function(){var S,I=0,U=G.timers;for(Nd=Date.now();I<U.length;I++)S=U[I],!S()&&U[I]===S&&U.splice(I--,1);U.length||G.fx.stop(),Nd=void 0},G.fx.timer=function(S){G.timers.push(S),G.fx.start()},G.fx.interval=13,G.fx.start=function(){Cf||(Cf=!0,wf())},G.fx.stop=function(){Cf=null},G.fx.speeds={slow:600,fast:200,_default:400},G.fn.delay=function(S,I){return S=G.fx&&G.fx.speeds[S]||S,I=I||"fx",this.queue(I,function(U,W){var se=R.setTimeout(U,S);W.stop=function(){R.clearTimeout(se)}})},function(){var S=fe.createElement("input"),I=fe.createElement("select"),U=I.appendChild(fe.createElement("option"));S.type="checkbox",xe.checkOn=S.value!=="",xe.optSelected=U.selected,S=fe.createElement("input"),S.value="t",S.type="radio",xe.radioValue=S.value==="t"}();var Sf,$a=G.expr.attrHandle;G.fn.extend({attr:function(S,I){return Ts(this,G.attr,S,I,arguments.length>1)},removeAttr:function(S){return this.each(function(){G.removeAttr(this,S)})}}),G.extend({attr:function(S,I,U){var W,se,le=S.nodeType;if(!(le===3||le===8||le===2)){if(typeof S.getAttribute>"u")return G.prop(S,I,U);if((le!==1||!G.isXMLDoc(S))&&(se=G.attrHooks[I.toLowerCase()]||(G.expr.match.bool.test(I)?Sf:void 0)),U!==void 0){if(U===null){G.removeAttr(S,I);return}return se&&"set"in se&&(W=se.set(S,U,I))!==void 0?W:(S.setAttribute(I,U+""),U)}return se&&"get"in se&&(W=se.get(S,I))!==null?W:(W=G.find.attr(S,I),W??void 0)}},attrHooks:{type:{set:function(S,I){if(!xe.radioValue&&I==="radio"&&ye(S,"input")){var U=S.value;return S.setAttribute("type",I),U&&(S.value=U),I}}}},removeAttr:function(S,I){var U,W=0,se=I&&I.match(Xn);if(se&&S.nodeType===1)for(;U=se[W++];)S.removeAttribute(U)}}),Sf={set:function(S,I,U){return I===!1?G.removeAttr(S,U):S.setAttribute(U,U),U}},G.each(G.expr.match.bool.source.match(/\w+/g),function(S,I){var U=$a[I]||G.find.attr;$a[I]=function(W,se,le){var Ce,Ze,qe=se.toLowerCase();return le||(Ze=$a[qe],$a[qe]=Ce,Ce=U(W,se,le)!=null?qe:null,$a[qe]=Ze),Ce}});var yg=/^(?:input|select|textarea|button)$/i,bg=/^(?:a|area)$/i;G.fn.extend({prop:function(S,I){return Ts(this,G.prop,S,I,arguments.length>1)},removeProp:function(S){return this.each(function(){delete this[G.propFix[S]||S]})}}),G.extend({prop:function(S,I,U){var W,se,le=S.nodeType;if(!(le===3||le===8||le===2))return(le!==1||!G.isXMLDoc(S))&&(I=G.propFix[I]||I,se=G.propHooks[I]),U!==void 0?se&&"set"in se&&(W=se.set(S,U,I))!==void 0?W:S[I]=U:se&&"get"in se&&(W=se.get(S,I))!==null?W:S[I]},propHooks:{tabIndex:{get:function(S){var I=G.find.attr(S,"tabindex");return I?parseInt(I,10):yg.test(S.nodeName)||bg.test(S.nodeName)&&S.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),xe.optSelected||(G.propHooks.selected={get:function(S){var I=S.parentNode;return I&&I.parentNode&&I.parentNode.selectedIndex,null},set:function(S){var I=S.parentNode;I&&(I.selectedIndex,I.parentNode&&I.parentNode.selectedIndex)}}),G.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){G.propFix[this.toLowerCase()]=this});function Pl(S){var I=S.match(Xn)||[];return I.join(" ")}function Ru(S){return S.getAttribute&&S.getAttribute("class")||""}function Wa(S){return Array.isArray(S)?S:typeof S=="string"?S.match(Xn)||[]:[]}G.fn.extend({addClass:function(S){var I,U,W,se,le,Ce,Ze,qe=0;if(ae(S))return this.each(function(mt){G(this).addClass(S.call(this,mt,Ru(this)))});if(I=Wa(S),I.length){for(;U=this[qe++];)if(se=Ru(U),W=U.nodeType===1&&" "+Pl(se)+" ",W){for(Ce=0;le=I[Ce++];)W.indexOf(" "+le+" ")<0&&(W+=le+" ");Ze=Pl(W),se!==Ze&&U.setAttribute("class",Ze)}}return this},removeClass:function(S){var I,U,W,se,le,Ce,Ze,qe=0;if(ae(S))return this.each(function(mt){G(this).removeClass(S.call(this,mt,Ru(this)))});if(!arguments.length)return this.attr("class","");if(I=Wa(S),I.length){for(;U=this[qe++];)if(se=Ru(U),W=U.nodeType===1&&" "+Pl(se)+" ",W){for(Ce=0;le=I[Ce++];)for(;W.indexOf(" "+le+" ")>-1;)W=W.replace(" "+le+" "," ");Ze=Pl(W),se!==Ze&&U.setAttribute("class",Ze)}}return this},toggleClass:function(S,I){var U=typeof S,W=U==="string"||Array.isArray(S);return typeof I=="boolean"&&W?I?this.addClass(S):this.removeClass(S):ae(S)?this.each(function(se){G(this).toggleClass(S.call(this,se,Ru(this),I),I)}):this.each(function(){var se,le,Ce,Ze;if(W)for(le=0,Ce=G(this),Ze=Wa(S);se=Ze[le++];)Ce.hasClass(se)?Ce.removeClass(se):Ce.addClass(se);else(S===void 0||U==="boolean")&&(se=Ru(this),se&&F.set(this,"__className__",se),this.setAttribute&&this.setAttribute("class",se||S===!1?"":F.get(this,"__className__")||""))})},hasClass:function(S){var I,U,W=0;for(I=" "+S+" ";U=this[W++];)if(U.nodeType===1&&(" "+Pl(Ru(U))+" ").indexOf(I)>-1)return!0;return!1}});var Da=/\r/g;G.fn.extend({val:function(S){var I,U,W,se=this[0];return arguments.length?(W=ae(S),this.each(function(le){var Ce;this.nodeType===1&&(W?Ce=S.call(this,le,G(this).val()):Ce=S,Ce==null?Ce="":typeof Ce=="number"?Ce+="":Array.isArray(Ce)&&(Ce=G.map(Ce,function(Ze){return Ze==null?"":Ze+""})),I=G.valHooks[this.type]||G.valHooks[this.nodeName.toLowerCase()],(!I||!("set"in I)||I.set(this,Ce,"value")===void 0)&&(this.value=Ce))})):se?(I=G.valHooks[se.type]||G.valHooks[se.nodeName.toLowerCase()],I&&"get"in I&&(U=I.get(se,"value"))!==void 0?U:(U=se.value,typeof U=="string"?U.replace(Da,""):U??"")):void 0}}),G.extend({valHooks:{option:{get:function(S){var I=G.find.attr(S,"value");return I??Pl(G.text(S))}},select:{get:function(S){var I,U,W,se=S.options,le=S.selectedIndex,Ce=S.type==="select-one",Ze=Ce?null:[],qe=Ce?le+1:se.length;for(le<0?W=qe:W=Ce?le:0;W<qe;W++)if(U=se[W],(U.selected||W===le)&&!U.disabled&&(!U.parentNode.disabled||!ye(U.parentNode,"optgroup"))){if(I=G(U).val(),Ce)return I;Ze.push(I)}return Ze},set:function(S,I){for(var U,W,se=S.options,le=G.makeArray(I),Ce=se.length;Ce--;)W=se[Ce],(W.selected=G.inArray(G.valHooks.option.get(W),le)>-1)&&(U=!0);return U||(S.selectedIndex=-1),le}}}}),G.each(["radio","checkbox"],function(){G.valHooks[this]={set:function(S,I){if(Array.isArray(I))return S.checked=G.inArray(G(S).val(),I)>-1}},xe.checkOn||(G.valHooks[this].get=function(S){return S.getAttribute("value")===null?"on":S.value})}),xe.focusin="onfocusin"in R;var ku=/^(?:focusinfocus|focusoutblur)$/,Lu=function(S){S.stopPropagation()};G.extend(G.event,{trigger:function(S,I,U,W){var se,le,Ce,Ze,qe,mt,zt,vn,Nt=[U||fe],$t=he.call(S,"type")?S.type:S,rr=he.call(S,"namespace")?S.namespace.split("."):[];if(le=vn=Ce=U=U||fe,!(U.nodeType===3||U.nodeType===8)&&!ku.test($t+G.event.triggered)&&($t.indexOf(".")>-1&&(rr=$t.split("."),$t=rr.shift(),rr.sort()),qe=$t.indexOf(":")<0&&"on"+$t,S=S[G.expando]?S:new G.Event($t,typeof S=="object"&&S),S.isTrigger=W?2:3,S.namespace=rr.join("."),S.rnamespace=S.namespace?new RegExp("(^|\\.)"+rr.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,S.result=void 0,S.target||(S.target=U),I=I==null?[S]:G.makeArray(I,[S]),zt=G.event.special[$t]||{},!(!W&&zt.trigger&&zt.trigger.apply(U,I)===!1))){if(!W&&!zt.noBubble&&!ce(U)){for(Ze=zt.delegateType||$t,ku.test(Ze+$t)||(le=le.parentNode);le;le=le.parentNode)Nt.push(le),Ce=le;Ce===(U.ownerDocument||fe)&&Nt.push(Ce.defaultView||Ce.parentWindow||R)}for(se=0;(le=Nt[se++])&&!S.isPropagationStopped();)vn=le,S.type=se>1?Ze:zt.bindType||$t,mt=(F.get(le,"events")||Object.create(null))[S.type]&&F.get(le,"handle"),mt&&mt.apply(le,I),mt=qe&&le[qe],mt&&mt.apply&&Bi(le)&&(S.result=mt.apply(le,I),S.result===!1&&S.preventDefault());return S.type=$t,!W&&!S.isDefaultPrevented()&&(!zt._default||zt._default.apply(Nt.pop(),I)===!1)&&Bi(U)&&qe&&ae(U[$t])&&!ce(U)&&(Ce=U[qe],Ce&&(U[qe]=null),G.event.triggered=$t,S.isPropagationStopped()&&vn.addEventListener($t,Lu),U[$t](),S.isPropagationStopped()&&vn.removeEventListener($t,Lu),G.event.triggered=void 0,Ce&&(U[qe]=Ce)),S.result}},simulate:function(S,I,U){var W=G.extend(new G.Event,U,{type:S,isSimulated:!0});G.event.trigger(W,null,I)}}),G.fn.extend({trigger:function(S,I){return this.each(function(){G.event.trigger(S,I,this)})},triggerHandler:function(S,I){var U=this[0];if(U)return G.event.trigger(S,I,U,!0)}}),xe.focusin||G.each({focus:"focusin",blur:"focusout"},function(S,I){var U=function(W){G.event.simulate(I,W.target,G.event.fix(W))};G.event.special[I]={setup:function(){var W=this.ownerDocument||this.document||this,se=F.access(W,I);se||W.addEventListener(S,U,!0),F.access(W,I,(se||0)+1)},teardown:function(){var W=this.ownerDocument||this.document||this,se=F.access(W,I)-1;se?F.access(W,I,se):(W.removeEventListener(S,U,!0),F.remove(W,I))}}});var Gu=R.location,Id={guid:Date.now()},wc=/\?/;G.parseXML=function(S){var I,U;if(!S||typeof S!="string")return null;try{I=new R.DOMParser().parseFromString(S,"text/xml")}catch{}return U=I&&I.getElementsByTagName("parsererror")[0],(!I||U)&&G.error("Invalid XML: "+(U?G.map(U.childNodes,function(W){return W.textContent}).join(`
`):S)),I};var Rd=/\[\]$/,Fu=/\r?\n/g,Xa=/^(?:submit|button|image|reset|file)$/i,_f=/^(?:input|select|textarea|keygen)/i;function Af(S,I,U,W){var se;if(Array.isArray(I))G.each(I,function(le,Ce){U||Rd.test(S)?W(S,Ce):Af(S+"["+(typeof Ce=="object"&&Ce!=null?le:"")+"]",Ce,U,W)});else if(!U&&Ae(I)==="object")for(se in I)Af(S+"["+se+"]",I[se],U,W);else W(S,I)}G.param=function(S,I){var U,W=[],se=function(le,Ce){var Ze=ae(Ce)?Ce():Ce;W[W.length]=encodeURIComponent(le)+"="+encodeURIComponent(Ze??"")};if(S==null)return"";if(Array.isArray(S)||S.jquery&&!G.isPlainObject(S))G.each(S,function(){se(this.name,this.value)});else for(U in S)Af(U,S[U],I,se);return W.join("&")},G.fn.extend({serialize:function(){return G.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var S=G.prop(this,"elements");return S?G.makeArray(S):this}).filter(function(){var S=this.type;return this.name&&!G(this).is(":disabled")&&_f.test(this.nodeName)&&!Xa.test(S)&&(this.checked||!Hr.test(S))}).map(function(S,I){var U=G(this).val();return U==null?null:Array.isArray(U)?G.map(U,function(W){return{name:I.name,value:W.replace(Fu,`\r
`)}}):{name:I.name,value:U.replace(Fu,`\r
`)}}).get()}});var xg=/%20/g,Ep=/#.*$/,Sp=/([?&])_=[^&]*/,kd=/^(.*?):[ \t]*([^\r\n]*)$/mg,Cg=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tf=/^(?:GET|HEAD)$/,Ws=/^\/\//,ol={},Bu={},Dl="*/".concat("*"),Sh=fe.createElement("a");Sh.href=Gu.href;function ga(S){return function(I,U){typeof I!="string"&&(U=I,I="*");var W,se=0,le=I.toLowerCase().match(Xn)||[];if(ae(U))for(;W=le[se++];)W[0]==="+"?(W=W.slice(1)||"*",(S[W]=S[W]||[]).unshift(U)):(S[W]=S[W]||[]).push(U)}}function sl(S,I,U,W){var se={},le=S===Bu;function Ce(Ze){var qe;return se[Ze]=!0,G.each(S[Ze]||[],function(mt,zt){var vn=zt(I,U,W);if(typeof vn=="string"&&!le&&!se[vn])return I.dataTypes.unshift(vn),Ce(vn),!1;if(le)return!(qe=vn)}),qe}return Ce(I.dataTypes[0])||!se["*"]&&Ce("*")}function oo(S,I){var U,W,se=G.ajaxSettings.flatOptions||{};for(U in I)I[U]!==void 0&&((se[U]?S:W||(W={}))[U]=I[U]);return W&&G.extend(!0,S,W),S}function ho(S,I,U){for(var W,se,le,Ce,Ze=S.contents,qe=S.dataTypes;qe[0]==="*";)qe.shift(),W===void 0&&(W=S.mimeType||I.getResponseHeader("Content-Type"));if(W){for(se in Ze)if(Ze[se]&&Ze[se].test(W)){qe.unshift(se);break}}if(qe[0]in U)le=qe[0];else{for(se in U){if(!qe[0]||S.converters[se+" "+qe[0]]){le=se;break}Ce||(Ce=se)}le=le||Ce}if(le)return le!==qe[0]&&qe.unshift(le),U[le]}function Ld(S,I,U,W){var se,le,Ce,Ze,qe,mt={},zt=S.dataTypes.slice();if(zt[1])for(Ce in S.converters)mt[Ce.toLowerCase()]=S.converters[Ce];for(le=zt.shift();le;)if(S.responseFields[le]&&(U[S.responseFields[le]]=I),!qe&&W&&S.dataFilter&&(I=S.dataFilter(I,S.dataType)),qe=le,le=zt.shift(),le){if(le==="*")le=qe;else if(qe!=="*"&&qe!==le){if(Ce=mt[qe+" "+le]||mt["* "+le],!Ce){for(se in mt)if(Ze=se.split(" "),Ze[1]===le&&(Ce=mt[qe+" "+Ze[0]]||mt["* "+Ze[0]],Ce)){Ce===!0?Ce=mt[se]:mt[se]!==!0&&(le=Ze[0],zt.unshift(Ze[1]));break}}if(Ce!==!0)if(Ce&&S.throws)I=Ce(I);else try{I=Ce(I)}catch(vn){return{state:"parsererror",error:Ce?vn:"No conversion from "+qe+" to "+le}}}}return{state:"success",data:I}}G.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Gu.href,type:"GET",isLocal:Cg.test(Gu.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dl,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":G.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(S,I){return I?oo(oo(S,G.ajaxSettings),I):oo(G.ajaxSettings,S)},ajaxPrefilter:ga(ol),ajaxTransport:ga(Bu),ajax:function(S,I){typeof S=="object"&&(I=S,S=void 0),I=I||{};var U,W,se,le,Ce,Ze,qe,mt,zt,vn,Nt=G.ajaxSetup({},I),$t=Nt.context||Nt,rr=Nt.context&&($t.nodeType||$t.jquery)?G($t):G.event,oi=G.Deferred(),br=G.Callbacks("once memory"),fo=Nt.statusCode||{},Lo={},va={},Gr="canceled",Ir={readyState:0,getResponseHeader:function(Di){var Go;if(qe){if(!le)for(le={};Go=kd.exec(se);)le[Go[1].toLowerCase()+" "]=(le[Go[1].toLowerCase()+" "]||[]).concat(Go[2]);Go=le[Di.toLowerCase()+" "]}return Go==null?null:Go.join(", ")},getAllResponseHeaders:function(){return qe?se:null},setRequestHeader:function(Di,Go){return qe==null&&(Di=va[Di.toLowerCase()]=va[Di.toLowerCase()]||Di,Lo[Di]=Go),this},overrideMimeType:function(Di){return qe==null&&(Nt.mimeType=Di),this},statusCode:function(Di){var Go;if(Di)if(qe)Ir.always(Di[Ir.status]);else for(Go in Di)fo[Go]=[fo[Go],Di[Go]];return this},abort:function(Di){var Go=Di||Gr;return U&&U.abort(Go),Ei(0,Go),this}};if(oi.promise(Ir),Nt.url=((S||Nt.url||Gu.href)+"").replace(Ws,Gu.protocol+"//"),Nt.type=I.method||I.type||Nt.method||Nt.type,Nt.dataTypes=(Nt.dataType||"*").toLowerCase().match(Xn)||[""],Nt.crossDomain==null){Ze=fe.createElement("a");try{Ze.href=Nt.url,Ze.href=Ze.href,Nt.crossDomain=Sh.protocol+"//"+Sh.host!=Ze.protocol+"//"+Ze.host}catch{Nt.crossDomain=!0}}if(Nt.data&&Nt.processData&&typeof Nt.data!="string"&&(Nt.data=G.param(Nt.data,Nt.traditional)),sl(ol,Nt,I,Ir),qe)return Ir;mt=G.event&&Nt.global,mt&&G.active++===0&&G.event.trigger("ajaxStart"),Nt.type=Nt.type.toUpperCase(),Nt.hasContent=!Tf.test(Nt.type),W=Nt.url.replace(Ep,""),Nt.hasContent?Nt.data&&Nt.processData&&(Nt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Nt.data=Nt.data.replace(xg,"+")):(vn=Nt.url.slice(W.length),Nt.data&&(Nt.processData||typeof Nt.data=="string")&&(W+=(wc.test(W)?"&":"?")+Nt.data,delete Nt.data),Nt.cache===!1&&(W=W.replace(Sp,"$1"),vn=(wc.test(W)?"&":"?")+"_="+Id.guid+++vn),Nt.url=W+vn),Nt.ifModified&&(G.lastModified[W]&&Ir.setRequestHeader("If-Modified-Since",G.lastModified[W]),G.etag[W]&&Ir.setRequestHeader("If-None-Match",G.etag[W])),(Nt.data&&Nt.hasContent&&Nt.contentType!==!1||I.contentType)&&Ir.setRequestHeader("Content-Type",Nt.contentType),Ir.setRequestHeader("Accept",Nt.dataTypes[0]&&Nt.accepts[Nt.dataTypes[0]]?Nt.accepts[Nt.dataTypes[0]]+(Nt.dataTypes[0]!=="*"?", "+Dl+"; q=0.01":""):Nt.accepts["*"]);for(zt in Nt.headers)Ir.setRequestHeader(zt,Nt.headers[zt]);if(Nt.beforeSend&&(Nt.beforeSend.call($t,Ir,Nt)===!1||qe))return Ir.abort();if(Gr="abort",br.add(Nt.complete),Ir.done(Nt.success),Ir.fail(Nt.error),U=sl(Bu,Nt,I,Ir),!U)Ei(-1,"No Transport");else{if(Ir.readyState=1,mt&&rr.trigger("ajaxSend",[Ir,Nt]),qe)return Ir;Nt.async&&Nt.timeout>0&&(Ce=R.setTimeout(function(){Ir.abort("timeout")},Nt.timeout));try{qe=!1,U.send(Lo,Ei)}catch(Di){if(qe)throw Di;Ei(-1,Di)}}function Ei(Di,Go,ma,tu){var Xs,Na,Fo,es,uc,Zs=Go;qe||(qe=!0,Ce&&R.clearTimeout(Ce),U=void 0,se=tu||"",Ir.readyState=Di>0?4:0,Xs=Di>=200&&Di<300||Di===304,ma&&(es=ho(Nt,Ir,ma)),!Xs&&G.inArray("script",Nt.dataTypes)>-1&&G.inArray("json",Nt.dataTypes)<0&&(Nt.converters["text script"]=function(){}),es=Ld(Nt,es,Ir,Xs),Xs?(Nt.ifModified&&(uc=Ir.getResponseHeader("Last-Modified"),uc&&(G.lastModified[W]=uc),uc=Ir.getResponseHeader("etag"),uc&&(G.etag[W]=uc)),Di===204||Nt.type==="HEAD"?Zs="nocontent":Di===304?Zs="notmodified":(Zs=es.state,Na=es.data,Fo=es.error,Xs=!Fo)):(Fo=Zs,(Di||!Zs)&&(Zs="error",Di<0&&(Di=0))),Ir.status=Di,Ir.statusText=(Go||Zs)+"",Xs?oi.resolveWith($t,[Na,Zs,Ir]):oi.rejectWith($t,[Ir,Zs,Fo]),Ir.statusCode(fo),fo=void 0,mt&&rr.trigger(Xs?"ajaxSuccess":"ajaxError",[Ir,Nt,Xs?Na:Fo]),br.fireWith($t,[Ir,Zs]),mt&&(rr.trigger("ajaxComplete",[Ir,Nt]),--G.active||G.event.trigger("ajaxStop")))}return Ir},getJSON:function(S,I,U){return G.get(S,I,U,"json")},getScript:function(S,I){return G.get(S,void 0,I,"script")}}),G.each(["get","post"],function(S,I){G[I]=function(U,W,se,le){return ae(W)&&(le=le||se,se=W,W=void 0),G.ajax(G.extend({url:U,type:I,dataType:le,data:W,success:se},G.isPlainObject(U)&&U))}}),G.ajaxPrefilter(function(S){var I;for(I in S.headers)I.toLowerCase()==="content-type"&&(S.contentType=S.headers[I]||"")}),G._evalUrl=function(S,I,U){return G.ajax({url:S,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(W){G.globalEval(W,I,U)}})},G.fn.extend({wrapAll:function(S){var I;return this[0]&&(ae(S)&&(S=S.call(this[0])),I=G(S,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&I.insertBefore(this[0]),I.map(function(){for(var U=this;U.firstElementChild;)U=U.firstElementChild;return U}).append(this)),this},wrapInner:function(S){return ae(S)?this.each(function(I){G(this).wrapInner(S.call(this,I))}):this.each(function(){var I=G(this),U=I.contents();U.length?U.wrapAll(S):I.append(S)})},wrap:function(S){var I=ae(S);return this.each(function(U){G(this).wrapAll(I?S.call(this,U):S)})},unwrap:function(S){return this.parent(S).not("body").each(function(){G(this).replaceWith(this.childNodes)}),this}}),G.expr.pseudos.hidden=function(S){return!G.expr.pseudos.visible(S)},G.expr.pseudos.visible=function(S){return!!(S.offsetWidth||S.offsetHeight||S.getClientRects().length)},G.ajaxSettings.xhr=function(){try{return new R.XMLHttpRequest}catch{}};var Nl={0:200,1223:204},eu=G.ajaxSettings.xhr();xe.cors=!!eu&&"withCredentials"in eu,xe.ajax=eu=!!eu,G.ajaxTransport(function(S){var I,U;if(xe.cors||eu&&!S.crossDomain)return{send:function(W,se){var le,Ce=S.xhr();if(Ce.open(S.type,S.url,S.async,S.username,S.password),S.xhrFields)for(le in S.xhrFields)Ce[le]=S.xhrFields[le];S.mimeType&&Ce.overrideMimeType&&Ce.overrideMimeType(S.mimeType),!S.crossDomain&&!W["X-Requested-With"]&&(W["X-Requested-With"]="XMLHttpRequest");for(le in W)Ce.setRequestHeader(le,W[le]);I=function(Ze){return function(){I&&(I=U=Ce.onload=Ce.onerror=Ce.onabort=Ce.ontimeout=Ce.onreadystatechange=null,Ze==="abort"?Ce.abort():Ze==="error"?typeof Ce.status!="number"?se(0,"error"):se(Ce.status,Ce.statusText):se(Nl[Ce.status]||Ce.status,Ce.statusText,(Ce.responseType||"text")!=="text"||typeof Ce.responseText!="string"?{binary:Ce.response}:{text:Ce.responseText},Ce.getAllResponseHeaders()))}},Ce.onload=I(),U=Ce.onerror=Ce.ontimeout=I("error"),Ce.onabort!==void 0?Ce.onabort=U:Ce.onreadystatechange=function(){Ce.readyState===4&&R.setTimeout(function(){I&&U()})},I=I("abort");try{Ce.send(S.hasContent&&S.data||null)}catch(Ze){if(I)throw Ze}},abort:function(){I&&I()}}}),G.ajaxPrefilter(function(S){S.crossDomain&&(S.contents.script=!1)}),G.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(S){return G.globalEval(S),S}}}),G.ajaxPrefilter("script",function(S){S.cache===void 0&&(S.cache=!1),S.crossDomain&&(S.type="GET")}),G.ajaxTransport("script",function(S){if(S.crossDomain||S.scriptAttrs){var I,U;return{send:function(W,se){I=G("<script>").attr(S.scriptAttrs||{}).prop({charset:S.scriptCharset,src:S.url}).on("load error",U=function(le){I.remove(),U=null,le&&se(le.type==="error"?404:200,le.type)}),fe.head.appendChild(I[0])},abort:function(){U&&U()}}}});var _h=[],al=/(=)\?(?=&|$)|\?\?/;G.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var S=_h.pop()||G.expando+"_"+Id.guid++;return this[S]=!0,S}}),G.ajaxPrefilter("json jsonp",function(S,I,U){var W,se,le,Ce=S.jsonp!==!1&&(al.test(S.url)?"url":typeof S.data=="string"&&(S.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&al.test(S.data)&&"data");if(Ce||S.dataTypes[0]==="jsonp")return W=S.jsonpCallback=ae(S.jsonpCallback)?S.jsonpCallback():S.jsonpCallback,Ce?S[Ce]=S[Ce].replace(al,"$1"+W):S.jsonp!==!1&&(S.url+=(wc.test(S.url)?"&":"?")+S.jsonp+"="+W),S.converters["script json"]=function(){return le||G.error(W+" was not called"),le[0]},S.dataTypes[0]="json",se=R[W],R[W]=function(){le=arguments},U.always(function(){se===void 0?G(R).removeProp(W):R[W]=se,S[W]&&(S.jsonpCallback=I.jsonpCallback,_h.push(W)),le&&ae(se)&&se(le[0]),le=se=void 0}),"script"}),xe.createHTMLDocument=function(){var S=fe.implementation.createHTMLDocument("").body;return S.innerHTML="<form></form><form></form>",S.childNodes.length===2}(),G.parseHTML=function(S,I,U){if(typeof S!="string")return[];typeof I=="boolean"&&(U=I,I=!1);var W,se,le;return I||(xe.createHTMLDocument?(I=fe.implementation.createHTMLDocument(""),W=I.createElement("base"),W.href=fe.location.href,I.head.appendChild(W)):I=fe),se=wt.exec(S),le=!U&&[],se?[I.createElement(se[1])]:(se=mf([S],I,le),le&&le.length&&G(le).remove(),G.merge([],se.childNodes))},G.fn.load=function(S,I,U){var W,se,le,Ce=this,Ze=S.indexOf(" ");return Ze>-1&&(W=Pl(S.slice(Ze)),S=S.slice(0,Ze)),ae(I)?(U=I,I=void 0):I&&typeof I=="object"&&(se="POST"),Ce.length>0&&G.ajax({url:S,type:se||"GET",dataType:"html",data:I}).done(function(qe){le=arguments,Ce.html(W?G("<div>").append(G.parseHTML(qe)).find(W):qe)}).always(U&&function(qe,mt){Ce.each(function(){U.apply(this,le||[qe.responseText,mt,qe])})}),this},G.expr.pseudos.animated=function(S){return G.grep(G.timers,function(I){return S===I.elem}).length},G.offset={setOffset:function(S,I,U){var W,se,le,Ce,Ze,qe,mt,zt=G.css(S,"position"),vn=G(S),Nt={};zt==="static"&&(S.style.position="relative"),Ze=vn.offset(),le=G.css(S,"top"),qe=G.css(S,"left"),mt=(zt==="absolute"||zt==="fixed")&&(le+qe).indexOf("auto")>-1,mt?(W=vn.position(),Ce=W.top,se=W.left):(Ce=parseFloat(le)||0,se=parseFloat(qe)||0),ae(I)&&(I=I.call(S,U,G.extend({},Ze))),I.top!=null&&(Nt.top=I.top-Ze.top+Ce),I.left!=null&&(Nt.left=I.left-Ze.left+se),"using"in I?I.using.call(S,Nt):vn.css(Nt)}},G.fn.extend({offset:function(S){if(arguments.length)return S===void 0?this:this.each(function(se){G.offset.setOffset(this,S,se)});var I,U,W=this[0];if(!!W)return W.getClientRects().length?(I=W.getBoundingClientRect(),U=W.ownerDocument.defaultView,{top:I.top+U.pageYOffset,left:I.left+U.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var S,I,U,W=this[0],se={top:0,left:0};if(G.css(W,"position")==="fixed")I=W.getBoundingClientRect();else{for(I=this.offset(),U=W.ownerDocument,S=W.offsetParent||U.documentElement;S&&(S===U.body||S===U.documentElement)&&G.css(S,"position")==="static";)S=S.parentNode;S&&S!==W&&S.nodeType===1&&(se=G(S).offset(),se.top+=G.css(S,"borderTopWidth",!0),se.left+=G.css(S,"borderLeftWidth",!0))}return{top:I.top-se.top-G.css(W,"marginTop",!0),left:I.left-se.left-G.css(W,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var S=this.offsetParent;S&&G.css(S,"position")==="static";)S=S.offsetParent;return S||Ha})}}),G.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(S,I){var U=I==="pageYOffset";G.fn[S]=function(W){return Ts(this,function(se,le,Ce){var Ze;if(ce(se)?Ze=se:se.nodeType===9&&(Ze=se.defaultView),Ce===void 0)return Ze?Ze[I]:se[le];Ze?Ze.scrollTo(U?Ze.pageXOffset:Ce,U?Ce:Ze.pageYOffset):se[le]=Ce},S,W,arguments.length)}}),G.each(["top","left"],function(S,I){G.cssHooks[I]=Ml(xe.pixelPosition,function(U,W){if(W)return W=Od(U,I),bf.test(W)?G(U).position()[I]+"px":W})}),G.each({Height:"height",Width:"width"},function(S,I){G.each({padding:"inner"+S,content:I,"":"outer"+S},function(U,W){G.fn[W]=function(se,le){var Ce=arguments.length&&(U||typeof se!="boolean"),Ze=U||(se===!0||le===!0?"margin":"border");return Ts(this,function(qe,mt,zt){var vn;return ce(qe)?W.indexOf("outer")===0?qe["inner"+S]:qe.document.documentElement["client"+S]:qe.nodeType===9?(vn=qe.documentElement,Math.max(qe.body["scroll"+S],vn["scroll"+S],qe.body["offset"+S],vn["offset"+S],vn["client"+S])):zt===void 0?G.css(qe,mt,Ze):G.style(qe,mt,zt,Ze)},I,Ce?se:void 0,Ce)}})}),G.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(S,I){G.fn[I]=function(U){return this.on(I,U)}}),G.fn.extend({bind:function(S,I,U){return this.on(S,null,I,U)},unbind:function(S,I){return this.off(S,null,I)},delegate:function(S,I,U,W){return this.on(I,S,U,W)},undelegate:function(S,I,U){return arguments.length===1?this.off(S,"**"):this.off(I,S||"**",U)},hover:function(S,I){return this.mouseenter(S).mouseleave(I||S)}}),G.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(S,I){G.fn[I]=function(U,W){return arguments.length>0?this.on(I,null,U,W):this.trigger(I)}});var Ah=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;G.proxy=function(S,I){var U,W,se;if(typeof I=="string"&&(U=S[I],I=S,S=U),!!ae(S))return W=te.call(arguments,2),se=function(){return S.apply(I||this,W.concat(te.call(arguments)))},se.guid=S.guid=S.guid||G.guid++,se},G.holdReady=function(S){S?G.readyWait++:G.ready(!0)},G.isArray=Array.isArray,G.parseJSON=JSON.parse,G.nodeName=ye,G.isFunction=ae,G.isWindow=ce,G.camelCase=Qr,G.type=Ae,G.now=Date.now,G.isNumeric=function(S){var I=G.type(S);return(I==="number"||I==="string")&&!isNaN(S-parseFloat(S))},G.trim=function(S){return S==null?"":(S+"").replace(Ah,"")},M=[],j=function(){return G}.apply(L,M),j!==void 0&&(Ne.exports=j);var _p=R.jQuery,zu=R.$;return G.noConflict=function(S){return R.$===G&&(R.$=zu),S&&R.jQuery===G&&(R.jQuery=_p),G},typeof J>"u"&&(R.jQuery=R.$=G),G})},47443:function(Ne,L,M){var j=M(42118);function R(J,z){var Z=J==null?0:J.length;return!!Z&&j(J,z,0)>-1}Ne.exports=R},1196:function(Ne){function L(M,j,R){for(var J=-1,z=M==null?0:M.length;++J<z;)if(R(j,M[J]))return!0;return!1}Ne.exports=L},41848:function(Ne){function L(M,j,R,J){for(var z=M.length,Z=R+(J?1:-1);J?Z--:++Z<z;)if(j(M[Z],Z,M))return Z;return-1}Ne.exports=L},42118:function(Ne,L,M){var j=M(41848),R=M(62722),J=M(42351);function z(Z,te,Q){return te===te?J(Z,te,Q):j(Z,R,Q)}Ne.exports=z},62722:function(Ne){function L(M){return M!==M}Ne.exports=L},45652:function(Ne,L,M){var j=M(88668),R=M(47443),J=M(1196),z=M(74757),Z=M(23593),te=M(21814),Q=200;function de(oe,ie,re){var he=-1,De=R,ue=oe.length,xe=!0,ae=[],ce=ae;if(re)xe=!1,De=J;else if(ue>=Q){var fe=ie?null:Z(oe);if(fe)return te(fe);xe=!1,De=z,ce=new j}else ce=ie?[]:ae;e:for(;++he<ue;){var Ee=oe[he],pe=ie?ie(Ee):Ee;if(Ee=re||Ee!==0?Ee:0,xe&&pe===pe){for(var Ae=ce.length;Ae--;)if(ce[Ae]===pe)continue e;ie&&ce.push(pe),ae.push(Ee)}else De(ce,pe,re)||(ce!==ae&&ce.push(pe),ae.push(Ee))}return ae}Ne.exports=de},23593:function(Ne,L,M){var j=M(58525),R=M(50308),J=M(21814),z=1/0,Z=j&&1/J(new j([,-0]))[1]==z?function(te){return new j(te)}:R;Ne.exports=Z},42351:function(Ne){function L(M,j,R){for(var J=R-1,z=M.length;++J<z;)if(M[J]===j)return J;return-1}Ne.exports=L},51584:function(Ne,L,M){var j=M(44239),R=M(37005),J="[object Boolean]";function z(Z){return Z===!0||Z===!1||R(Z)&&j(Z)==J}Ne.exports=z},96486:function(Ne,L,M){Ne=M.nmd(Ne);var j;(function(){var R,J="4.17.21",z=200,Z="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",te="Expected a function",Q="Invalid `variable` option passed into `_.template`",de="__lodash_hash_undefined__",oe=500,ie="__lodash_placeholder__",re=1,he=2,De=4,ue=1,xe=2,ae=1,ce=2,fe=4,Ee=8,pe=16,Ae=32,nt=64,G=128,Fe=256,$e=512,at=30,Ft="...",Hn=800,ye=16,wt=1,Mn=2,jt=3,En=1/0,Yn=9007199254740991,pn=17976931348623157e292,lo=0/0,ji=4294967295,Xn=ji-1,kr=ji>>>1,lr=[["ary",G],["bind",ae],["bindKey",ce],["curry",Ee],["curryRight",pe],["flip",$e],["partial",Ae],["partialRight",nt],["rearg",Fe]],Qn="[object Arguments]",Oi="[object Array]",zr="[object AsyncFunction]",Yr="[object Boolean]",to="[object Date]",Ts="[object DOMException]",oa="[object Error]",no="[object Function]",Ko="[object GeneratorFunction]",Qr="[object Map]",Bi="[object Number]",$s="[object Null]",F="[object Object]",H="[object Promise]",gf="[object Proxy]",Oe="[object RegExp]",lc="[object Set]",gr="[object String]",Pa="[object Symbol]",rl="[object Undefined]",qo="[object WeakMap]",Ha="[object WeakSet]",Pt="[object ArrayBuffer]",Jt="[object DataView]",xt="[object Float32Array]",ln="[object Float64Array]",Gn="[object Int8Array]",zi="[object Int16Array]",Lr="[object Int32Array]",Hr="[object Uint8Array]",Ar="[object Uint8ClampedArray]",gi="[object Uint16Array]",Ur="[object Uint32Array]",ko=/\b__p \+= '';/g,Fc=/\b(__p \+=) '' \+/g,vf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mf=/&(?:amp|lt|gt|quot|#39);/g,Bc=/[&<>"']/g,Cc=RegExp(mf.source),Jo=RegExp(Bc.source),yf=/<%-([\s\S]+?)%>/g,Md=/<%([\s\S]+?)%>/g,Qo=/<%=([\s\S]+?)%>/g,wh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vp=/^\w*$/,mp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,il=/[\\^$.*+?()[\]{}|]/g,Hi=RegExp(il.source),uo=/^\s+/,ei=/\s/,Do=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ms=/\{\n\/\* \[wrapped with (.+)\] \*/,Jl=/,? & /,yp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,bf=/[()=,{}\[\]\/\s]/,Eh=/\\(\\)?/g,bp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xp=/\w*$/,Od=/^[-+]0x[0-9a-f]+$/i,Ml=/^0b[01]+$/i,Ol=/^\[object .+?Constructor\]$/,Ou=/^0o[0-7]+$/i,xf=/^(?:0|[1-9]\d*)$/,Pu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ql=/($^)/,Pd=/['\n\r\u2028\u2029\\]/g,Dd="\\ud800-\\udfff",mg="\\u0300-\\u036f",Cp="\\ufe20-\\ufe2f",pa="\\u20d0-\\u20ff",Du=mg+Cp+pa,xs="\\u2700-\\u27bf",sa="a-z\\xdf-\\xf6\\xf8-\\xff",Nd="\\xac\\xb1\\xd7\\xf7",Cf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",S0="\\u2000-\\u206f",_0=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",wf="A-Z\\xc0-\\xd6\\xd8-\\xde",zc="\\ufe0e\\ufe0f",Nu=Nd+Cf+S0+_0,Ef="['\u2019]",wp="["+Dd+"]",Iu="["+Nu+"]",ls="["+Du+"]",Sf="\\d+",$a="["+xs+"]",yg="["+sa+"]",bg="[^"+Dd+Nu+Sf+xs+sa+wf+"]",Pl="\\ud83c[\\udffb-\\udfff]",Ru="(?:"+ls+"|"+Pl+")",Wa="[^"+Dd+"]",Da="(?:\\ud83c[\\udde6-\\uddff]){2}",ku="[\\ud800-\\udbff][\\udc00-\\udfff]",Lu="["+wf+"]",Gu="\\u200d",Id="(?:"+yg+"|"+bg+")",wc="(?:"+Lu+"|"+bg+")",Rd="(?:"+Ef+"(?:d|ll|m|re|s|t|ve))?",Fu="(?:"+Ef+"(?:D|LL|M|RE|S|T|VE))?",Xa=Ru+"?",_f="["+zc+"]?",Af="(?:"+Gu+"(?:"+[Wa,Da,ku].join("|")+")"+_f+Xa+")*",xg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ep="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sp=_f+Xa+Af,kd="(?:"+[$a,Da,ku].join("|")+")"+Sp,Cg="(?:"+[Wa+ls+"?",ls,Da,ku,wp].join("|")+")",Tf=RegExp(Ef,"g"),Ws=RegExp(ls,"g"),ol=RegExp(Pl+"(?="+Pl+")|"+Cg+Sp,"g"),Bu=RegExp([Lu+"?"+yg+"+"+Rd+"(?="+[Iu,Lu,"$"].join("|")+")",wc+"+"+Fu+"(?="+[Iu,Lu+Id,"$"].join("|")+")",Lu+"?"+Id+"+"+Rd,Lu+"+"+Fu,Ep,xg,Sf,kd].join("|"),"g"),Dl=RegExp("["+Gu+Dd+Du+zc+"]"),Sh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ga=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sl=-1,oo={};oo[xt]=oo[ln]=oo[Gn]=oo[zi]=oo[Lr]=oo[Hr]=oo[Ar]=oo[gi]=oo[Ur]=!0,oo[Qn]=oo[Oi]=oo[Pt]=oo[Yr]=oo[Jt]=oo[to]=oo[oa]=oo[no]=oo[Qr]=oo[Bi]=oo[F]=oo[Oe]=oo[lc]=oo[gr]=oo[qo]=!1;var ho={};ho[Qn]=ho[Oi]=ho[Pt]=ho[Jt]=ho[Yr]=ho[to]=ho[xt]=ho[ln]=ho[Gn]=ho[zi]=ho[Lr]=ho[Qr]=ho[Bi]=ho[F]=ho[Oe]=ho[lc]=ho[gr]=ho[Pa]=ho[Hr]=ho[Ar]=ho[gi]=ho[Ur]=!0,ho[oa]=ho[no]=ho[qo]=!1;var Ld={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Nl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},eu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_h={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},al=parseFloat,Ah=parseInt,_p=typeof M.g=="object"&&M.g&&M.g.Object===Object&&M.g,zu=typeof self=="object"&&self&&self.Object===Object&&self,S=_p||zu||Function("return this")(),I=L&&!L.nodeType&&L,U=I&&!0&&Ne&&!Ne.nodeType&&Ne,W=U&&U.exports===I,se=W&&_p.process,le=function(){try{var dt=U&&U.require&&U.require("util").types;return dt||se&&se.binding&&se.binding("util")}catch{}}(),Ce=le&&le.isArrayBuffer,Ze=le&&le.isDate,qe=le&&le.isMap,mt=le&&le.isRegExp,zt=le&&le.isSet,vn=le&&le.isTypedArray;function Nt(dt,Qt,Bt){switch(Bt.length){case 0:return dt.call(Qt);case 1:return dt.call(Qt,Bt[0]);case 2:return dt.call(Qt,Bt[0],Bt[1]);case 3:return dt.call(Qt,Bt[0],Bt[1],Bt[2])}return dt.apply(Qt,Bt)}function $t(dt,Qt,Bt,ir){for(var $r=-1,Ki=dt==null?0:dt.length;++$r<Ki;){var bo=dt[$r];Qt(ir,bo,Bt(bo),dt)}return ir}function rr(dt,Qt){for(var Bt=-1,ir=dt==null?0:dt.length;++Bt<ir&&Qt(dt[Bt],Bt,dt)!==!1;);return dt}function oi(dt,Qt){for(var Bt=dt==null?0:dt.length;Bt--&&Qt(dt[Bt],Bt,dt)!==!1;);return dt}function br(dt,Qt){for(var Bt=-1,ir=dt==null?0:dt.length;++Bt<ir;)if(!Qt(dt[Bt],Bt,dt))return!1;return!0}function fo(dt,Qt){for(var Bt=-1,ir=dt==null?0:dt.length,$r=0,Ki=[];++Bt<ir;){var bo=dt[Bt];Qt(bo,Bt,dt)&&(Ki[$r++]=bo)}return Ki}function Lo(dt,Qt){var Bt=dt==null?0:dt.length;return!!Bt&&es(dt,Qt,0)>-1}function va(dt,Qt,Bt){for(var ir=-1,$r=dt==null?0:dt.length;++ir<$r;)if(Bt(Qt,dt[ir]))return!0;return!1}function Gr(dt,Qt){for(var Bt=-1,ir=dt==null?0:dt.length,$r=Array(ir);++Bt<ir;)$r[Bt]=Qt(dt[Bt],Bt,dt);return $r}function Ir(dt,Qt){for(var Bt=-1,ir=Qt.length,$r=dt.length;++Bt<ir;)dt[$r+Bt]=Qt[Bt];return dt}function Ei(dt,Qt,Bt,ir){var $r=-1,Ki=dt==null?0:dt.length;for(ir&&Ki&&(Bt=dt[++$r]);++$r<Ki;)Bt=Qt(Bt,dt[$r],$r,dt);return Bt}function Di(dt,Qt,Bt,ir){var $r=dt==null?0:dt.length;for(ir&&$r&&(Bt=dt[--$r]);$r--;)Bt=Qt(Bt,dt[$r],$r,dt);return Bt}function Go(dt,Qt){for(var Bt=-1,ir=dt==null?0:dt.length;++Bt<ir;)if(Qt(dt[Bt],Bt,dt))return!0;return!1}var ma=Bo("length");function tu(dt){return dt.split("")}function Xs(dt){return dt.match(yp)||[]}function Na(dt,Qt,Bt){var ir;return Bt(dt,function($r,Ki,bo){if(Qt($r,Ki,bo))return ir=Ki,!1}),ir}function Fo(dt,Qt,Bt,ir){for(var $r=dt.length,Ki=Bt+(ir?1:-1);ir?Ki--:++Ki<$r;)if(Qt(dt[Ki],Ki,dt))return Ki;return-1}function es(dt,Qt,Bt){return Qt===Qt?Rl(dt,Qt,Bt):Fo(dt,Zs,Bt)}function uc(dt,Qt,Bt,ir){for(var $r=Bt-1,Ki=dt.length;++$r<Ki;)if(ir(dt[$r],Qt))return $r;return-1}function Zs(dt){return dt!==dt}function Ec(dt,Qt){var Bt=dt==null?0:dt.length;return Bt?Bs(dt,Qt)/Bt:lo}function Bo(dt){return function(Qt){return Qt==null?R:Qt[dt]}}function Fs(dt){return function(Qt){return dt==null?R:dt[Qt]}}function Za(dt,Qt,Bt,ir,$r){return $r(dt,function(Ki,bo,ro){Bt=ir?(ir=!1,Ki):Qt(Bt,Ki,bo,ro)}),Bt}function Ui(dt,Qt){var Bt=dt.length;for(dt.sort(Qt);Bt--;)dt[Bt]=dt[Bt].value;return dt}function Bs(dt,Qt){for(var Bt,ir=-1,$r=dt.length;++ir<$r;){var Ki=Qt(dt[ir]);Ki!==R&&(Bt=Bt===R?Ki:Bt+Ki)}return Bt}function Sc(dt,Qt){for(var Bt=-1,ir=Array(dt);++Bt<dt;)ir[Bt]=Qt(Bt);return ir}function dc(dt,Qt){return Gr(Qt,function(Bt){return[Bt,dt[Bt]]})}function cl(dt){return dt&&dt.slice(0,ns(dt)+1).replace(uo,"")}function ts(dt){return function(Qt){return dt(Qt)}}function Uu(dt,Qt){return Gr(Qt,function(Bt){return dt[Bt]})}function Cs(dt,Qt){return dt.has(Qt)}function nu(dt,Qt){for(var Bt=-1,ir=dt.length;++Bt<ir&&es(Qt,dt[Bt],0)>-1;);return Bt}function zo(dt,Qt){for(var Bt=dt.length;Bt--&&es(Qt,dt[Bt],0)>-1;);return Bt}function Vu(dt,Qt){for(var Bt=dt.length,ir=0;Bt--;)dt[Bt]===Qt&&++ir;return ir}var Il=Fs(Ld),Mf=Fs(Nl);function Th(dt){return"\\"+_h[dt]}function _c(dt,Qt){return dt==null?R:dt[Qt]}function Ya(dt){return Dl.test(dt)}function ll(dt){return Sh.test(dt)}function ju(dt){for(var Qt,Bt=[];!(Qt=dt.next()).done;)Bt.push(Qt.value);return Bt}function ya(dt){var Qt=-1,Bt=Array(dt.size);return dt.forEach(function(ir,$r){Bt[++Qt]=[$r,ir]}),Bt}function Ka(dt,Qt){return function(Bt){return dt(Qt(Bt))}}function ba(dt,Qt){for(var Bt=-1,ir=dt.length,$r=0,Ki=[];++Bt<ir;){var bo=dt[Bt];(bo===Qt||bo===ie)&&(dt[Bt]=ie,Ki[$r++]=Bt)}return Ki}function ru(dt){var Qt=-1,Bt=Array(dt.size);return dt.forEach(function(ir){Bt[++Qt]=ir}),Bt}function Hu(dt){var Qt=-1,Bt=Array(dt.size);return dt.forEach(function(ir){Bt[++Qt]=[ir,ir]}),Bt}function Rl(dt,Qt,Bt){for(var ir=Bt-1,$r=dt.length;++ir<$r;)if(dt[ir]===Qt)return ir;return-1}function po(dt,Qt,Bt){for(var ir=Bt+1;ir--;)if(dt[ir]===Qt)return ir;return ir}function qa(dt){return Ya(dt)?iu(dt):ma(dt)}function Wo(dt){return Ya(dt)?Gd(dt):tu(dt)}function ns(dt){for(var Qt=dt.length;Qt--&&ei.test(dt.charAt(Qt)););return Qt}var aa=Fs(eu);function iu(dt){for(var Qt=ol.lastIndex=0;ol.test(dt);)++Qt;return Qt}function Gd(dt){return dt.match(ol)||[]}function Mh(dt){return dt.match(Bu)||[]}var Of=function dt(Qt){Qt=Qt==null?S:hc.defaults(S.Object(),Qt,hc.pick(S,ga));var Bt=Qt.Array,ir=Qt.Date,$r=Qt.Error,Ki=Qt.Function,bo=Qt.Math,ro=Qt.Object,Fd=Qt.RegExp,wg=Qt.String,Me=Qt.TypeError,Ye=Bt.prototype,lt=Ki.prototype,Tt=ro.prototype,yt=Qt["__core-js_shared__"],an=lt.toString,Ut=Tt.hasOwnProperty,Un=0,Kn=function(){var m=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),Er=Tt.toString,xr=an.call(ro),Or=S._,vi=Fd("^"+an.call(Ut).replace(il,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ai=W?Qt.Buffer:R,vr=Qt.Symbol,io=Qt.Uint8Array,Vi=ai?ai.allocUnsafe:R,ca=Ka(ro.getPrototypeOf,ro),No=ro.create,fc=Tt.propertyIsEnumerable,ul=Ye.splice,xa=vr?vr.isConcatSpreadable:R,Ja=vr?vr.iterator:R,Ia=vr?vr.toStringTag:R,dl=function(){try{var m=en(ro,"defineProperty");return m({},"",{}),m}catch{}}(),Bd=Qt.clearTimeout!==S.clearTimeout&&Qt.clearTimeout,ci=ir&&ir.now!==S.Date.now&&ir.now,ui=Qt.setTimeout!==S.setTimeout&&Qt.setTimeout,Oh=bo.ceil,$u=bo.floor,Ph=ro.getOwnPropertySymbols,Eg=ai?ai.isBuffer:R,Pf=Qt.isFinite,zd=Ye.join,pc=Ka(ro.keys,ro),us=bo.max,Os=bo.min,A0=ir.now,T0=Qt.parseInt,ou=bo.random,Ud=Ye.reverse,Ap=en(Qt,"DataView"),Ra=en(Qt,"Map"),Dh=en(Qt,"Promise"),Ys=en(Qt,"Set"),Qa=en(Qt,"WeakMap"),Vd=en(ro,"create"),Nh=Qa&&new Qa,Ks={},Ih=is(Ap),Wu=is(Ra),Xu=is(Dh),em=is(Ys),Df=is(Qa),Tp=vr?vr.prototype:R,Rh=Tp?Tp.valueOf:R,Sg=Tp?Tp.toString:R;function Te(m){if(zs(m)&&!di(m)&&!(m instanceof bi)){if(m instanceof ka)return m;if(Ut.call(m,"__wrapped__"))return Br(m)}return new ka(m)}var jd=function(){function m(){}return function(C){if(!Ns(C))return{};if(No)return No(C);m.prototype=C;var D=new m;return m.prototype=R,D}}();function Zu(){}function ka(m,C){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=R}Te.templateSettings={escape:yf,evaluate:Md,interpolate:Qo,variable:"",imports:{_:Te}},Te.prototype=Zu.prototype,Te.prototype.constructor=Te,ka.prototype=jd(Zu.prototype),ka.prototype.constructor=ka;function bi(m){this.__wrapped__=m,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ji,this.__views__=[]}function tm(){var m=new bi(this.__wrapped__);return m.__actions__=Js(this.__actions__),m.__dir__=this.__dir__,m.__filtered__=this.__filtered__,m.__iteratees__=Js(this.__iteratees__),m.__takeCount__=this.__takeCount__,m.__views__=Js(this.__views__),m}function Yu(){if(this.__filtered__){var m=new bi(this);m.__dir__=-1,m.__filtered__=!0}else m=this.clone(),m.__dir__*=-1;return m}function Hd(){var m=this.__wrapped__.value(),C=this.__dir__,D=di(m),Y=C<0,ve=D?m.length:0,Re=On(0,ve,this.__views__),Ke=Re.start,ot=Re.end,Mt=ot-Ke,yn=Y?ot:Ke-1,xn=this.__iteratees__,Dn=xn.length,nr=0,Tr=Os(Mt,this.__takeCount__);if(!D||!Y&&ve==Mt&&Tr==Mt)return Ps(m,this.__actions__);var ni=[];e:for(;Mt--&&nr<Tr;){yn+=C;for(var Ri=-1,ri=m[yn];++Ri<Dn;){var $i=xn[Ri],ao=$i.iteratee,Wl=$i.type,qc=ao(ri);if(Wl==Mn)ri=qc;else if(!qc){if(Wl==wt)continue e;break e}}ni[nr++]=ri}return ni}bi.prototype=jd(Zu.prototype),bi.prototype.constructor=bi;function Ku(m){var C=-1,D=m==null?0:m.length;for(this.clear();++C<D;){var Y=m[C];this.set(Y[0],Y[1])}}function M0(){this.__data__=Vd?Vd(null):{},this.size=0}function kl(m){var C=this.has(m)&&delete this.__data__[m];return this.size-=C?1:0,C}function kh(m){var C=this.__data__;if(Vd){var D=C[m];return D===de?R:D}return Ut.call(C,m)?C[m]:R}function Mp(m){var C=this.__data__;return Vd?C[m]!==R:Ut.call(C,m)}function _g(m,C){var D=this.__data__;return this.size+=this.has(m)?0:1,D[m]=Vd&&C===R?de:C,this}Ku.prototype.clear=M0,Ku.prototype.delete=kl,Ku.prototype.get=kh,Ku.prototype.has=Mp,Ku.prototype.set=_g;function su(m){var C=-1,D=m==null?0:m.length;for(this.clear();++C<D;){var Y=m[C];this.set(Y[0],Y[1])}}function O0(){this.__data__=[],this.size=0}function nm(m){var C=this.__data__,D=Vc(C,m);if(D<0)return!1;var Y=C.length-1;return D==Y?C.pop():ul.call(C,D,1),--this.size,!0}function Xy(m){var C=this.__data__,D=Vc(C,m);return D<0?R:C[D][1]}function qu(m){return Vc(this.__data__,m)>-1}function P0(m,C){var D=this.__data__,Y=Vc(D,m);return Y<0?(++this.size,D.push([m,C])):D[Y][1]=C,this}su.prototype.clear=O0,su.prototype.delete=nm,su.prototype.get=Xy,su.prototype.has=qu,su.prototype.set=P0;function Ll(m){var C=-1,D=m==null?0:m.length;for(this.clear();++C<D;){var Y=m[C];this.set(Y[0],Y[1])}}function Ju(){this.size=0,this.__data__={hash:new Ku,map:new(Ra||su),string:new Ku}}function rm(m){var C=Ct(this,m).delete(m);return this.size-=C?1:0,C}function Ag(m){return Ct(this,m).get(m)}function Qu(m){return Ct(this,m).has(m)}function D0(m,C){var D=Ct(this,m),Y=D.size;return D.set(m,C),this.size+=D.size==Y?0:1,this}Ll.prototype.clear=Ju,Ll.prototype.delete=rm,Ll.prototype.get=Ag,Ll.prototype.has=Qu,Ll.prototype.set=D0;function Uc(m){var C=-1,D=m==null?0:m.length;for(this.__data__=new Ll;++C<D;)this.add(m[C])}function N0(m){return this.__data__.set(m,de),this}function Uo(m){return this.__data__.has(m)}Uc.prototype.add=Uc.prototype.push=N0,Uc.prototype.has=Uo;function qi(m){var C=this.__data__=new su(m);this.size=C.size}function Lh(){this.__data__=new su,this.size=0}function $d(m){var C=this.__data__,D=C.delete(m);return this.size=C.size,D}function Op(m){return this.__data__.get(m)}function Pp(m){return this.__data__.has(m)}function Dp(m,C){var D=this.__data__;if(D instanceof su){var Y=D.__data__;if(!Ra||Y.length<z-1)return Y.push([m,C]),this.size=++D.size,this;D=this.__data__=new Ll(Y)}return D.set(m,C),this.size=D.size,this}qi.prototype.clear=Lh,qi.prototype.delete=$d,qi.prototype.get=Op,qi.prototype.has=Pp,qi.prototype.set=Dp;function Wd(m,C){var D=di(m),Y=!D&&ah(m),ve=!D&&!Y&&Xf(m),Re=!D&&!Y&&!ve&&Eo(m),Ke=D||Y||ve||Re,ot=Ke?Sc(m.length,wg):[],Mt=ot.length;for(var yn in m)(C||Ut.call(m,yn))&&!(Ke&&(yn=="length"||ve&&(yn=="offset"||yn=="parent")||Re&&(yn=="buffer"||yn=="byteLength"||yn=="byteOffset")||zn(yn,Mt)))&&ot.push(yn);return ot}function Ni(m){var C=m.length;return C?m[uu(0,C-1)]:R}function Nf(m,C){return Co(Js(m),Ac(C,0,m.length))}function Gl(m){return Co(Js(m))}function If(m,C,D){(D!==R&&!bl(m[C],D)||D===R&&!(C in m))&&qs(m,C,D)}function la(m,C,D){var Y=m[C];(!(Ut.call(m,C)&&bl(Y,D))||D===R&&!(C in m))&&qs(m,C,D)}function Vc(m,C){for(var D=m.length;D--;)if(bl(m[D][0],C))return D;return-1}function Xd(m,C,D,Y){return Tc(m,function(ve,Re,Ke){C(Y,ve,D(ve),Ke)}),Y}function hl(m,C){return m&&Dc(C,Is(C),m)}function Fl(m,C){return m&&Dc(C,_a(C),m)}function qs(m,C,D){C=="__proto__"&&dl?dl(m,C,{configurable:!0,enumerable:!0,value:D,writable:!0}):m[C]=D}function ec(m,C){for(var D=-1,Y=C.length,ve=Bt(Y),Re=m==null;++D<Y;)ve[D]=Re?R:Xp(m,C[D]);return ve}function Ac(m,C,D){return m===m&&(D!==R&&(m=m<=D?m:D),C!==R&&(m=m>=C?m:C)),m}function Ca(m,C,D,Y,ve,Re){var Ke,ot=C&re,Mt=C&he,yn=C&De;if(D&&(Ke=ve?D(m,Y,ve,Re):D(m)),Ke!==R)return Ke;if(!Ns(m))return m;var xn=di(m);if(xn){if(Ke=ft(m),!ot)return Js(m,Ke)}else{var Dn=on(m),nr=Dn==no||Dn==Ko;if(Xf(m))return pd(m,ot);if(Dn==F||Dn==Qn||nr&&!ve){if(Ke=Mt||nr?{}:Rt(m),!ot)return Mt?am(m,Fl(Ke,m)):jf(m,hl(Ke,m))}else{if(!ho[Dn])return ve?m:{};Ke=fn(m,Dn,ot)}}Re||(Re=new qi);var Tr=Re.get(m);if(Tr)return Tr;Re.set(m,Ke),Tb(m)?m.forEach(function(ri){Ke.add(Ca(ri,C,D,ri,m,Re))}):Sb(m)&&m.forEach(function(ri,$i){Ke.set($i,Ca(ri,C,D,$i,m,Re))});var ni=yn?Mt?K:oh:Mt?_a:Is,Ri=xn?R:ni(m);return rr(Ri||m,function(ri,$i){Ri&&($i=ri,ri=m[$i]),la(Ke,$i,Ca(ri,C,D,$i,m,Re))}),Ke}function au(m){var C=Is(m);return function(D){return Zd(D,m,C)}}function Zd(m,C,D){var Y=D.length;if(m==null)return!Y;for(m=ro(m);Y--;){var ve=D[Y],Re=C[ve],Ke=m[ve];if(Ke===R&&!(ve in m)||!Re(Ke))return!1}return!0}function ed(m,C,D){if(typeof m!="function")throw new Me(te);return Kr(function(){m.apply(R,D)},C)}function td(m,C,D,Y){var ve=-1,Re=Lo,Ke=!0,ot=m.length,Mt=[],yn=C.length;if(!ot)return Mt;D&&(C=Gr(C,ts(D))),Y?(Re=va,Ke=!1):C.length>=z&&(Re=Cs,Ke=!1,C=new Uc(C));e:for(;++ve<ot;){var xn=m[ve],Dn=D==null?xn:D(xn);if(xn=Y||xn!==0?xn:0,Ke&&Dn===Dn){for(var nr=yn;nr--;)if(C[nr]===Dn)continue e;Mt.push(xn)}else Re(C,Dn,Y)||Mt.push(xn)}return Mt}var Tc=ml(fl),Tg=ml(jc,!0);function I0(m,C){var D=!0;return Tc(m,function(Y,ve,Re){return D=!!C(Y,ve,Re),D}),D}function nd(m,C,D){for(var Y=-1,ve=m.length;++Y<ve;){var Re=m[Y],Ke=C(Re);if(Ke!=null&&(ot===R?Ke===Ke&&!xl(Ke):D(Ke,ot)))var ot=Ke,Mt=Re}return Mt}function Np(m,C,D,Y){var ve=m.length;for(D=_i(D),D<0&&(D=-D>ve?0:ve+D),Y=Y===R||Y>ve?ve:_i(Y),Y<0&&(Y+=ve),Y=D>Y?0:Yo(Y);D<Y;)m[D++]=C;return m}function Rf(m,C){var D=[];return Tc(m,function(Y,ve,Re){C(Y,ve,Re)&&D.push(Y)}),D}function ua(m,C,D,Y,ve){var Re=-1,Ke=m.length;for(D||(D=tn),ve||(ve=[]);++Re<Ke;){var ot=m[Re];C>0&&D(ot)?C>1?ua(ot,C-1,D,Y,ve):Ir(ve,ot):Y||(ve[ve.length]=ot)}return ve}var Ip=Og(),Rp=Og(!0);function fl(m,C){return m&&Ip(m,C,Is)}function jc(m,C){return m&&Rp(m,C,Is)}function Gh(m,C){return fo(C,function(D){return ch(m[D])})}function rd(m,C){C=La(C,m);for(var D=0,Y=C.length;m!=null&&D<Y;)m=m[Ao(C[D++])];return D&&D==Y?m:R}function id(m,C,D){var Y=C(m);return di(m)?Y:Ir(Y,D(m))}function wa(m){return m==null?m===R?rl:$s:Ia&&Ia in ro(m)?un(m):si(m)}function Fh(m,C){return m>C}function Bh(m,C){return m!=null&&Ut.call(m,C)}function kf(m,C){return m!=null&&C in ro(m)}function Bl(m,C,D){return m>=Os(C,D)&&m<us(C,D)}function Lf(m,C,D){for(var Y=D?va:Lo,ve=m[0].length,Re=m.length,Ke=Re,ot=Bt(Re),Mt=1/0,yn=[];Ke--;){var xn=m[Ke];Ke&&C&&(xn=Gr(xn,ts(C))),Mt=Os(xn.length,Mt),ot[Ke]=!D&&(C||ve>=120&&xn.length>=120)?new Uc(Ke&&xn):R}xn=m[0];var Dn=-1,nr=ot[0];e:for(;++Dn<ve&&yn.length<Mt;){var Tr=xn[Dn],ni=C?C(Tr):Tr;if(Tr=D||Tr!==0?Tr:0,!(nr?Cs(nr,ni):Y(yn,ni,D))){for(Ke=Re;--Ke;){var Ri=ot[Ke];if(!(Ri?Cs(Ri,ni):Y(m[Ke],ni,D)))continue e}nr&&nr.push(ni),yn.push(Tr)}}return yn}function Gf(m,C,D,Y){return fl(m,function(ve,Re,Ke){C(Y,D(ve),Re,Ke)}),Y}function zl(m,C,D){C=La(C,m),m=Wr(m,C);var Y=m==null?m:m[Ao(rt(C))];return Y==null?R:Nt(Y,m,D)}function pl(m){return zs(m)&&wa(m)==Qn}function Yd(m){return zs(m)&&wa(m)==Pt}function Ul(m){return zs(m)&&wa(m)==to}function zh(m,C,D,Y,ve){return m===C?!0:m==null||C==null||!zs(m)&&!zs(C)?m!==m&&C!==C:od(m,C,D,Y,zh,ve)}function od(m,C,D,Y,ve,Re){var Ke=di(m),ot=di(C),Mt=Ke?Oi:on(m),yn=ot?Oi:on(C);Mt=Mt==Qn?F:Mt,yn=yn==Qn?F:yn;var xn=Mt==F,Dn=yn==F,nr=Mt==yn;if(nr&&Xf(m)){if(!Xf(C))return!1;Ke=!0,xn=!1}if(nr&&!xn)return Re||(Re=new qi),Ke||Eo(m)?Dg(m,C,D,Y,ve,Re):L0(m,C,Mt,D,Y,ve,Re);if(!(D&ue)){var Tr=xn&&Ut.call(m,"__wrapped__"),ni=Dn&&Ut.call(C,"__wrapped__");if(Tr||ni){var Ri=Tr?m.value():m,ri=ni?C.value():C;return Re||(Re=new qi),ve(Ri,ri,D,Y,Re)}}return nr?(Re||(Re=new qi),lm(m,C,D,Y,ve,Re)):!1}function Vl(m){return zs(m)&&on(m)==Qr}function Kd(m,C,D,Y){var ve=D.length,Re=ve,Ke=!Y;if(m==null)return!Re;for(m=ro(m);ve--;){var ot=D[ve];if(Ke&&ot[2]?ot[1]!==m[ot[0]]:!(ot[0]in m))return!1}for(;++ve<Re;){ot=D[ve];var Mt=ot[0],yn=m[Mt],xn=ot[1];if(Ke&&ot[2]){if(yn===R&&!(Mt in m))return!1}else{var Dn=new qi;if(Y)var nr=Y(yn,xn,Mt,m,C,Dn);if(!(nr===R?zh(xn,yn,ue|xe,Y,Dn):nr))return!1}}return!0}function Hc(m){if(!Ns(m)||dr(m))return!1;var C=ch(m)?vi:Ol;return C.test(is(m))}function gc(m){return zs(m)&&wa(m)==Oe}function Uh(m){return zs(m)&&on(m)==lc}function sd(m){return zs(m)&&Lg(m.length)&&!!oo[wa(m)]}function Mc(m){return typeof m=="function"?m:m==null?To:typeof m=="object"?di(m)?$c(m[0],m[1]):Oc(m):Kc(m)}function ad(m){if(!Tn(m))return pc(m);var C=[];for(var D in ro(m))Ut.call(m,D)&&D!="constructor"&&C.push(D);return C}function kp(m){if(!Ns(m))return qn(m);var C=Tn(m),D=[];for(var Y in m)Y=="constructor"&&(C||!Ut.call(m,Y))||D.push(Y);return D}function cu(m,C){return m<C}function lu(m,C){var D=-1,Y=Zc(m)?Bt(m.length):[];return Tc(m,function(ve,Re,Ke){Y[++D]=C(ve,Re,Ke)}),Y}function Oc(m){var C=It(m);return C.length==1&&C[0][2]?qt(C[0][0],C[0][1]):function(D){return D===m||Kd(D,m,C)}}function $c(m,C){return An(m)&&mn(C)?qt(Ao(m),C):function(D){var Y=Xp(D,m);return Y===R&&Y===C?lh(D,m):zh(C,Y,ue|xe)}}function Wc(m,C,D,Y,ve){m!==C&&Ip(C,function(Re,Ke){if(ve||(ve=new qi),Ns(Re))gl(m,C,Ke,D,Wc,Y,ve);else{var ot=Y?Y(Xo(m,Ke),Re,Ke+"",m,C,ve):R;ot===R&&(ot=Re),If(m,Ke,ot)}},_a)}function gl(m,C,D,Y,ve,Re,Ke){var ot=Xo(m,D),Mt=Xo(C,D),yn=Ke.get(Mt);if(yn){If(m,D,yn);return}var xn=Re?Re(ot,Mt,D+"",m,C,Ke):R,Dn=xn===R;if(Dn){var nr=di(Mt),Tr=!nr&&Xf(Mt),ni=!nr&&!Tr&&Eo(Mt);xn=Mt,nr||Tr||ni?di(ot)?xn=ot:ea(ot)?xn=Js(ot):Tr?(Dn=!1,xn=pd(Mt,!0)):ni?(Dn=!1,xn=go(Mt,!0)):xn=[]:Gg(Mt)||ah(Mt)?(xn=ot,ah(ot)?xn=Fg(ot):(!Ns(ot)||ch(ot))&&(xn=Rt(Mt))):Dn=!1}Dn&&(Ke.set(Mt,xn),ve(xn,Mt,Y,Re,Ke),Ke.delete(Mt)),If(m,D,xn)}function Vh(m,C){var D=m.length;if(!!D)return C+=C<0?D:0,zn(C,D)?m[C]:R}function cd(m,C,D){C.length?C=Gr(C,function(Re){return di(Re)?function(Ke){return rd(Ke,Re.length===1?Re[0]:Re)}:Re}):C=[To];var Y=-1;C=Gr(C,ts(pt()));var ve=lu(m,function(Re,Ke,ot){var Mt=Gr(C,function(yn){return yn(Re)});return{criteria:Mt,index:++Y,value:Re}});return Ui(ve,function(Re,Ke){return Mg(Re,Ke,D)})}function R0(m,C){return qd(m,C,function(D,Y){return lh(m,Y)})}function qd(m,C,D){for(var Y=-1,ve=C.length,Re={};++Y<ve;){var Ke=C[Y],ot=rd(m,Ke);D(ot,Ke)&&jl(Re,La(Ke,m),ot)}return Re}function ld(m){return function(C){return rd(C,m)}}function Jd(m,C,D,Y){var ve=Y?uc:es,Re=-1,Ke=C.length,ot=m;for(m===C&&(C=Js(C)),D&&(ot=Gr(m,ts(D)));++Re<Ke;)for(var Mt=0,yn=C[Re],xn=D?D(yn):yn;(Mt=ve(ot,xn,Mt,Y))>-1;)ot!==m&&ul.call(ot,Mt,1),ul.call(m,Mt,1);return m}function vl(m,C){for(var D=m?C.length:0,Y=D-1;D--;){var ve=C[D];if(D==Y||ve!==Re){var Re=ve;zn(ve)?ul.call(m,ve,1):eh(m,ve)}}return m}function uu(m,C){return m+$u(ou()*(C-m+1))}function Lp(m,C,D,Y){for(var ve=-1,Re=us(Oh((C-m)/(D||1)),0),Ke=Bt(Re);Re--;)Ke[Y?Re:++ve]=m,m+=D;return Ke}function Qd(m,C){var D="";if(!m||C<1||C>Yn)return D;do C%2&&(D+=m),C=$u(C/2),C&&(m+=m);while(C);return D}function hi(m,C){return ps(Dr(m,C,To),m+"")}function Ff(m){return Ni(uh(m))}function Gp(m,C){var D=uh(m);return Co(D,Ac(C,0,D.length))}function jl(m,C,D,Y){if(!Ns(m))return m;C=La(C,m);for(var ve=-1,Re=C.length,Ke=Re-1,ot=m;ot!=null&&++ve<Re;){var Mt=Ao(C[ve]),yn=D;if(Mt==="__proto__"||Mt==="constructor"||Mt==="prototype")return m;if(ve!=Ke){var xn=ot[Mt];yn=Y?Y(xn,Mt,ot):R,yn===R&&(yn=Ns(xn)?xn:zn(C[ve+1])?[]:{})}la(ot,Mt,yn),ot=ot[Mt]}return m}var Bf=Nh?function(m,C){return Nh.set(m,C),m}:To,Fp=dl?function(m,C){return dl(m,"toString",{configurable:!0,enumerable:!1,value:Lm(C),writable:!0})}:To;function im(m){return Co(uh(m))}function Pc(m,C,D){var Y=-1,ve=m.length;C<0&&(C=-C>ve?0:ve+C),D=D>ve?ve:D,D<0&&(D+=ve),ve=C>D?0:D-C>>>0,C>>>=0;for(var Re=Bt(ve);++Y<ve;)Re[Y]=m[Y+C];return Re}function Bp(m,C){var D;return Tc(m,function(Y,ve,Re){return D=C(Y,ve,Re),!D}),!!D}function ud(m,C,D){var Y=0,ve=m==null?Y:m.length;if(typeof C=="number"&&C===C&&ve<=kr){for(;Y<ve;){var Re=Y+ve>>>1,Ke=m[Re];Ke!==null&&!xl(Ke)&&(D?Ke<=C:Ke<C)?Y=Re+1:ve=Re}return ve}return jh(m,C,To,D)}function jh(m,C,D,Y){var ve=0,Re=m==null?0:m.length;if(Re===0)return 0;C=D(C);for(var Ke=C!==C,ot=C===null,Mt=xl(C),yn=C===R;ve<Re;){var xn=$u((ve+Re)/2),Dn=D(m[xn]),nr=Dn!==R,Tr=Dn===null,ni=Dn===Dn,Ri=xl(Dn);if(Ke)var ri=Y||ni;else yn?ri=ni&&(Y||nr):ot?ri=ni&&nr&&(Y||!Tr):Mt?ri=ni&&nr&&!Tr&&(Y||!Ri):Tr||Ri?ri=!1:ri=Y?Dn<=C:Dn<C;ri?ve=xn+1:Re=xn}return Os(Re,Xn)}function dd(m,C){for(var D=-1,Y=m.length,ve=0,Re=[];++D<Y;){var Ke=m[D],ot=C?C(Ke):Ke;if(!D||!bl(ot,Mt)){var Mt=ot;Re[ve++]=Ke===0?0:Ke}}return Re}function hd(m){return typeof m=="number"?m:xl(m)?lo:+m}function ws(m){if(typeof m=="string")return m;if(di(m))return Gr(m,ws)+"";if(xl(m))return Sg?Sg.call(m):"";var C=m+"";return C=="0"&&1/m==-En?"-0":C}function tc(m,C,D){var Y=-1,ve=Lo,Re=m.length,Ke=!0,ot=[],Mt=ot;if(D)Ke=!1,ve=va;else if(Re>=z){var yn=C?null:nc(m);if(yn)return ru(yn);Ke=!1,ve=Cs,Mt=new Uc}else Mt=C?[]:ot;e:for(;++Y<Re;){var xn=m[Y],Dn=C?C(xn):xn;if(xn=D||xn!==0?xn:0,Ke&&Dn===Dn){for(var nr=Mt.length;nr--;)if(Mt[nr]===Dn)continue e;C&&Mt.push(Dn),ot.push(xn)}else ve(Mt,Dn,D)||(Mt!==ot&&Mt.push(Dn),ot.push(xn))}return ot}function eh(m,C){return C=La(C,m),m=Wr(m,C),m==null||delete m[Ao(rt(C))]}function zf(m,C,D,Y){return jl(m,C,D(rd(m,C)),Y)}function Hh(m,C,D,Y){for(var ve=m.length,Re=Y?ve:-1;(Y?Re--:++Re<ve)&&C(m[Re],Re,m););return D?Pc(m,Y?0:Re,Y?Re+1:ve):Pc(m,Y?Re+1:0,Y?ve:Re)}function Ps(m,C){var D=m;return D instanceof bi&&(D=D.value()),Ei(C,function(Y,ve){return ve.func.apply(ve.thisArg,Ir([Y],ve.args))},D)}function Wn(m,C,D){var Y=m.length;if(Y<2)return Y?tc(m[0]):[];for(var ve=-1,Re=Bt(Y);++ve<Y;)for(var Ke=m[ve],ot=-1;++ot<Y;)ot!=ve&&(Re[ve]=td(Re[ve]||Ke,m[ot],C,D));return tc(ua(Re,1),C,D)}function fd(m,C,D){for(var Y=-1,ve=m.length,Re=C.length,Ke={};++Y<ve;){var ot=Y<Re?C[Y]:R;D(Ke,m[Y],ot)}return Ke}function Uf(m){return ea(m)?m:[]}function vc(m){return typeof m=="function"?m:To}function La(m,C){return di(m)?m:An(m,C)?[m]:Es(So(m))}var xi=hi;function Ds(m,C,D){var Y=m.length;return D=D===R?Y:D,!C&&D>=Y?m:Pc(m,C,D)}var th=Bd||function(m){return S.clearTimeout(m)};function pd(m,C){if(C)return m.slice();var D=m.length,Y=Vi?Vi(D):new m.constructor(D);return m.copy(Y),Y}function Vf(m){var C=new m.constructor(m.byteLength);return new io(C).set(new io(m)),C}function nh(m,C){var D=C?Vf(m.buffer):m.buffer;return new m.constructor(D,m.byteOffset,m.byteLength)}function Ga(m){var C=new m.constructor(m.source,xp.exec(m));return C.lastIndex=m.lastIndex,C}function du(m){return Rh?ro(Rh.call(m)):{}}function go(m,C){var D=C?Vf(m.buffer):m.buffer;return new m.constructor(D,m.byteOffset,m.length)}function om(m,C){if(m!==C){var D=m!==R,Y=m===null,ve=m===m,Re=xl(m),Ke=C!==R,ot=C===null,Mt=C===C,yn=xl(C);if(!ot&&!yn&&!Re&&m>C||Re&&Ke&&Mt&&!ot&&!yn||Y&&Ke&&Mt||!D&&Mt||!ve)return 1;if(!Y&&!Re&&!yn&&m<C||yn&&D&&ve&&!Y&&!Re||ot&&D&&ve||!Ke&&ve||!Mt)return-1}return 0}function Mg(m,C,D){for(var Y=-1,ve=m.criteria,Re=C.criteria,Ke=ve.length,ot=D.length;++Y<Ke;){var Mt=om(ve[Y],Re[Y]);if(Mt){if(Y>=ot)return Mt;var yn=D[Y];return Mt*(yn=="desc"?-1:1)}}return m.index-C.index}function sm(m,C,D,Y){for(var ve=-1,Re=m.length,Ke=D.length,ot=-1,Mt=C.length,yn=us(Re-Ke,0),xn=Bt(Mt+yn),Dn=!Y;++ot<Mt;)xn[ot]=C[ot];for(;++ve<Ke;)(Dn||ve<Re)&&(xn[D[ve]]=m[ve]);for(;yn--;)xn[ot++]=m[ve++];return xn}function ds(m,C,D,Y){for(var ve=-1,Re=m.length,Ke=-1,ot=D.length,Mt=-1,yn=C.length,xn=us(Re-ot,0),Dn=Bt(xn+yn),nr=!Y;++ve<xn;)Dn[ve]=m[ve];for(var Tr=ve;++Mt<yn;)Dn[Tr+Mt]=C[Mt];for(;++Ke<ot;)(nr||ve<Re)&&(Dn[Tr+D[Ke]]=m[ve++]);return Dn}function Js(m,C){var D=-1,Y=m.length;for(C||(C=Bt(Y));++D<Y;)C[D]=m[D];return C}function Dc(m,C,D,Y){var ve=!D;D||(D={});for(var Re=-1,Ke=C.length;++Re<Ke;){var ot=C[Re],Mt=Y?Y(D[ot],m[ot],ot,D,m):R;Mt===R&&(Mt=m[ot]),ve?qs(D,ot,Mt):la(D,ot,Mt)}return D}function jf(m,C){return Dc(m,hn(m),C)}function am(m,C){return Dc(m,rn(m),C)}function $h(m,C){return function(D,Y){var ve=di(D)?$t:Xd,Re=C?C():{};return ve(D,m,pt(Y,2),Re)}}function Wh(m){return hi(function(C,D){var Y=-1,ve=D.length,Re=ve>1?D[ve-1]:R,Ke=ve>2?D[2]:R;for(Re=m.length>3&&typeof Re=="function"?(ve--,Re):R,Ke&&Wt(D[0],D[1],Ke)&&(Re=ve<3?R:Re,ve=1),C=ro(C);++Y<ve;){var ot=D[Y];ot&&m(C,ot,Y,Re)}return C})}function ml(m,C){return function(D,Y){if(D==null)return D;if(!Zc(D))return m(D,Y);for(var ve=D.length,Re=C?ve:-1,Ke=ro(D);(C?Re--:++Re<ve)&&Y(Ke[Re],Re,Ke)!==!1;);return D}}function Og(m){return function(C,D,Y){for(var ve=-1,Re=ro(C),Ke=Y(C),ot=Ke.length;ot--;){var Mt=Ke[m?ot:++ve];if(D(Re[Mt],Mt,Re)===!1)break}return C}}function rh(m,C,D){var Y=C&ae,ve=ih(m);function Re(){var Ke=this&&this!==S&&this instanceof Re?ve:m;return Ke.apply(Y?D:this,arguments)}return Re}function hs(m){return function(C){C=So(C);var D=Ya(C)?Wo(C):R,Y=D?D[0]:C.charAt(0),ve=D?Ds(D,1).join(""):C.slice(1);return Y[m]()+ve}}function gd(m){return function(C){return Ei(bu(ta(C).replace(Tf,"")),m,"")}}function ih(m){return function(){var C=arguments;switch(C.length){case 0:return new m;case 1:return new m(C[0]);case 2:return new m(C[0],C[1]);case 3:return new m(C[0],C[1],C[2]);case 4:return new m(C[0],C[1],C[2],C[3]);case 5:return new m(C[0],C[1],C[2],C[3],C[4]);case 6:return new m(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new m(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var D=jd(m.prototype),Y=m.apply(D,C);return Ns(Y)?Y:D}}function zp(m,C,D){var Y=ih(m);function ve(){for(var Re=arguments.length,Ke=Bt(Re),ot=Re,Mt=_t(ve);ot--;)Ke[ot]=arguments[ot];var yn=Re<3&&Ke[0]!==Mt&&Ke[Re-1]!==Mt?[]:ba(Ke,Mt);if(Re-=yn.length,Re<D)return Hp(m,C,yl,ve.placeholder,R,Ke,yn,R,R,D-Re);var xn=this&&this!==S&&this instanceof ve?Y:m;return Nt(xn,this,Ke)}return ve}function Pg(m){return function(C,D,Y){var ve=ro(C);if(!Zc(C)){var Re=pt(D,3);C=Is(C),D=function(ot){return Re(ve[ot],ot,ve)}}var Ke=m(C,D,Y);return Ke>-1?ve[Re?C[Ke]:Ke]:R}}function Fa(m){return Ba(function(C){var D=C.length,Y=D,ve=ka.prototype.thru;for(m&&C.reverse();Y--;){var Re=C[Y];if(typeof Re!="function")throw new Me(te);if(ve&&!Ke&&ze(Re)=="wrapper")var Ke=new ka([],!0)}for(Y=Ke?Y:D;++Y<D;){Re=C[Y];var ot=ze(Re),Mt=ot=="wrapper"?Pe(Re):R;Mt&&_n(Mt[0])&&Mt[1]==(G|Ee|Ae|Fe)&&!Mt[4].length&&Mt[9]==1?Ke=Ke[ze(Mt[0])].apply(Ke,Mt[3]):Ke=Re.length==1&&_n(Re)?Ke[ot]():Ke.thru(Re)}return function(){var yn=arguments,xn=yn[0];if(Ke&&yn.length==1&&di(xn))return Ke.plant(xn).value();for(var Dn=0,nr=D?C[Dn].apply(this,yn):xn;++Dn<D;)nr=C[Dn].call(this,nr);return nr}})}function yl(m,C,D,Y,ve,Re,Ke,ot,Mt,yn){var xn=C&G,Dn=C&ae,nr=C&ce,Tr=C&(Ee|pe),ni=C&$e,Ri=nr?R:ih(m);function ri(){for(var $i=arguments.length,ao=Bt($i),Wl=$i;Wl--;)ao[Wl]=arguments[Wl];if(Tr)var qc=_t(ri),Rs=Vu(ao,qc);if(Y&&(ao=sm(ao,Y,ve,Tr)),Re&&(ao=ds(ao,Re,Ke,Tr)),$i-=Rs,Tr&&$i<yn){var St=ba(ao,qc);return Hp(m,C,yl,ri.placeholder,D,ao,St,ot,Mt,yn-$i)}var Va=Dn?D:this,Xl=nr?Va[m]:m;return $i=ao.length,ot?ao=Pi(ao,ot):ni&&$i>1&&ao.reverse(),xn&&Mt<$i&&(ao.length=Mt),this&&this!==S&&this instanceof ri&&(Xl=Ri||ih(Xl)),Xl.apply(Va,ao)}return ri}function rs(m,C){return function(D,Y){return Gf(D,m,C(Y),{})}}function Ea(m,C){return function(D,Y){var ve;if(D===R&&Y===R)return C;if(D!==R&&(ve=D),Y!==R){if(ve===R)return Y;typeof D=="string"||typeof Y=="string"?(D=ws(D),Y=ws(Y)):(D=hd(D),Y=hd(Y)),ve=m(D,Y)}return ve}}function Up(m){return Ba(function(C){return C=Gr(C,ts(pt())),hi(function(D){var Y=this;return m(C,function(ve){return Nt(ve,Y,D)})})})}function Vp(m,C){C=C===R?" ":ws(C);var D=C.length;if(D<2)return D?Qd(C,m):C;var Y=Qd(C,Oh(m/qa(C)));return Ya(C)?Ds(Wo(Y),0,m).join(""):Y.slice(0,m)}function cm(m,C,D,Y){var ve=C&ae,Re=ih(m);function Ke(){for(var ot=-1,Mt=arguments.length,yn=-1,xn=Y.length,Dn=Bt(xn+Mt),nr=this&&this!==S&&this instanceof Ke?Re:m;++yn<xn;)Dn[yn]=Y[yn];for(;Mt--;)Dn[yn++]=arguments[++ot];return Nt(nr,ve?D:this,Dn)}return Ke}function jp(m){return function(C,D,Y){return Y&&typeof Y!="number"&&Wt(C,D,Y)&&(D=Y=R),C=vu(C),D===R?(D=C,C=0):D=vu(D),Y=Y===R?C<D?1:-1:vu(Y),Lp(C,D,Y,m)}}function vd(m){return function(C,D){return typeof C=="string"&&typeof D=="string"||(C=Yc(C),D=Yc(D)),m(C,D)}}function Hp(m,C,D,Y,ve,Re,Ke,ot,Mt,yn){var xn=C&Ee,Dn=xn?Ke:R,nr=xn?R:Ke,Tr=xn?Re:R,ni=xn?R:Re;C|=xn?Ae:nt,C&=~(xn?nt:Ae),C&fe||(C&=~(ae|ce));var Ri=[m,C,ve,Tr,Dn,ni,nr,ot,Mt,yn],ri=D.apply(R,Ri);return _n(m)&&fs(ri,Ri),ri.placeholder=Y,xo(ri,m,C)}function Sa(m){var C=bo[m];return function(D,Y){if(D=Yc(D),Y=Y==null?0:Os(_i(Y),292),Y&&Pf(D)){var ve=(So(D)+"e").split("e"),Re=C(ve[0]+"e"+(+ve[1]+Y));return ve=(So(Re)+"e").split("e"),+(ve[0]+"e"+(+ve[1]-Y))}return C(D)}}var nc=Ys&&1/ru(new Ys([,-0]))[1]==En?function(m){return new Ys(m)}:Q0;function hu(m){return function(C){var D=on(C);return D==Qr?ya(C):D==lc?Hu(C):dc(C,m(C))}}function fu(m,C,D,Y,ve,Re,Ke,ot){var Mt=C&ce;if(!Mt&&typeof m!="function")throw new Me(te);var yn=Y?Y.length:0;if(yn||(C&=~(Ae|nt),Y=ve=R),Ke=Ke===R?Ke:us(_i(Ke),0),ot=ot===R?ot:_i(ot),yn-=ve?ve.length:0,C&nt){var xn=Y,Dn=ve;Y=ve=R}var nr=Mt?R:Pe(m),Tr=[m,C,D,Y,ve,xn,Dn,Re,Ke,ot];if(nr&&Fr(Tr,nr),m=Tr[0],C=Tr[1],D=Tr[2],Y=Tr[3],ve=Tr[4],ot=Tr[9]=Tr[9]===R?Mt?0:m.length:us(Tr[9]-yn,0),!ot&&C&(Ee|pe)&&(C&=~(Ee|pe)),!C||C==ae)var ni=rh(m,C,D);else C==Ee||C==pe?ni=zp(m,C,ot):(C==Ae||C==(ae|Ae))&&!ve.length?ni=cm(m,C,D,Y):ni=yl.apply(R,Tr);var Ri=nr?Bf:fs;return xo(Ri(ni,Tr),m,C)}function Hf(m,C,D,Y){return m===R||bl(m,Tt[D])&&!Ut.call(Y,D)?C:m}function Xh(m,C,D,Y,ve,Re){return Ns(m)&&Ns(C)&&(Re.set(C,m),Wc(m,C,R,Xh,Re),Re.delete(C)),m}function k0(m){return Gg(m)?R:m}function Dg(m,C,D,Y,ve,Re){var Ke=D&ue,ot=m.length,Mt=C.length;if(ot!=Mt&&!(Ke&&Mt>ot))return!1;var yn=Re.get(m),xn=Re.get(C);if(yn&&xn)return yn==C&&xn==m;var Dn=-1,nr=!0,Tr=D&xe?new Uc:R;for(Re.set(m,C),Re.set(C,m);++Dn<ot;){var ni=m[Dn],Ri=C[Dn];if(Y)var ri=Ke?Y(Ri,ni,Dn,C,m,Re):Y(ni,Ri,Dn,m,C,Re);if(ri!==R){if(ri)continue;nr=!1;break}if(Tr){if(!Go(C,function($i,ao){if(!Cs(Tr,ao)&&(ni===$i||ve(ni,$i,D,Y,Re)))return Tr.push(ao)})){nr=!1;break}}else if(!(ni===Ri||ve(ni,Ri,D,Y,Re))){nr=!1;break}}return Re.delete(m),Re.delete(C),nr}function L0(m,C,D,Y,ve,Re,Ke){switch(D){case Jt:if(m.byteLength!=C.byteLength||m.byteOffset!=C.byteOffset)return!1;m=m.buffer,C=C.buffer;case Pt:return!(m.byteLength!=C.byteLength||!Re(new io(m),new io(C)));case Yr:case to:case Bi:return bl(+m,+C);case oa:return m.name==C.name&&m.message==C.message;case Oe:case gr:return m==C+"";case Qr:var ot=ya;case lc:var Mt=Y&ue;if(ot||(ot=ru),m.size!=C.size&&!Mt)return!1;var yn=Ke.get(m);if(yn)return yn==C;Y|=xe,Ke.set(m,C);var xn=Dg(ot(m),ot(C),Y,ve,Re,Ke);return Ke.delete(m),xn;case Pa:if(Rh)return Rh.call(m)==Rh.call(C)}return!1}function lm(m,C,D,Y,ve,Re){var Ke=D&ue,ot=oh(m),Mt=ot.length,yn=oh(C),xn=yn.length;if(Mt!=xn&&!Ke)return!1;for(var Dn=Mt;Dn--;){var nr=ot[Dn];if(!(Ke?nr in C:Ut.call(C,nr)))return!1}var Tr=Re.get(m),ni=Re.get(C);if(Tr&&ni)return Tr==C&&ni==m;var Ri=!0;Re.set(m,C),Re.set(C,m);for(var ri=Ke;++Dn<Mt;){nr=ot[Dn];var $i=m[nr],ao=C[nr];if(Y)var Wl=Ke?Y(ao,$i,nr,C,m,Re):Y($i,ao,nr,m,C,Re);if(!(Wl===R?$i===ao||ve($i,ao,D,Y,Re):Wl)){Ri=!1;break}ri||(ri=nr=="constructor")}if(Ri&&!ri){var qc=m.constructor,Rs=C.constructor;qc!=Rs&&"constructor"in m&&"constructor"in C&&!(typeof qc=="function"&&qc instanceof qc&&typeof Rs=="function"&&Rs instanceof Rs)&&(Ri=!1)}return Re.delete(m),Re.delete(C),Ri}function Ba(m){return ps(Dr(m,R,Ge),m+"")}function oh(m){return id(m,Is,hn)}function K(m){return id(m,_a,rn)}var Pe=Nh?function(m){return Nh.get(m)}:Q0;function ze(m){for(var C=m.name+"",D=Ks[C],Y=Ut.call(Ks,C)?D.length:0;Y--;){var ve=D[Y],Re=ve.func;if(Re==null||Re==m)return ve.name}return C}function _t(m){var C=Ut.call(Te,"placeholder")?Te:m;return C.placeholder}function pt(){var m=Te.iteratee||so;return m=m===so?Mc:m,arguments.length?m(arguments[0],arguments[1]):m}function Ct(m,C){var D=m.__data__;return nn(C)?D[typeof C=="string"?"string":"hash"]:D.map}function It(m){for(var C=Is(m),D=C.length;D--;){var Y=C[D],ve=m[Y];C[D]=[Y,ve,mn(ve)]}return C}function en(m,C){var D=_c(m,C);return Hc(D)?D:R}function un(m){var C=Ut.call(m,Ia),D=m[Ia];try{m[Ia]=R;var Y=!0}catch{}var ve=Er.call(m);return Y&&(C?m[Ia]=D:delete m[Ia]),ve}var hn=Ph?function(m){return m==null?[]:(m=ro(m),fo(Ph(m),function(C){return fc.call(m,C)}))}:kt,rn=Ph?function(m){for(var C=[];m;)Ir(C,hn(m)),m=ca(m);return C}:kt,on=wa;(Ap&&on(new Ap(new ArrayBuffer(1)))!=Jt||Ra&&on(new Ra)!=Qr||Dh&&on(Dh.resolve())!=H||Ys&&on(new Ys)!=lc||Qa&&on(new Qa)!=qo)&&(on=function(m){var C=wa(m),D=C==F?m.constructor:R,Y=D?is(D):"";if(Y)switch(Y){case Ih:return Jt;case Wu:return Qr;case Xu:return H;case em:return lc;case Df:return qo}return C});function On(m,C,D){for(var Y=-1,ve=D.length;++Y<ve;){var Re=D[Y],Ke=Re.size;switch(Re.type){case"drop":m+=Ke;break;case"dropRight":C-=Ke;break;case"take":C=Os(C,m+Ke);break;case"takeRight":m=us(m,C-Ke);break}}return{start:m,end:C}}function cn(m){var C=m.match(Ms);return C?C[1].split(Jl):[]}function wn(m,C,D){C=La(C,m);for(var Y=-1,ve=C.length,Re=!1;++Y<ve;){var Ke=Ao(C[Y]);if(!(Re=m!=null&&D(m,Ke)))break;m=m[Ke]}return Re||++Y!=ve?Re:(ve=m==null?0:m.length,!!ve&&Lg(ve)&&zn(Ke,ve)&&(di(m)||ah(m)))}function ft(m){var C=m.length,D=new m.constructor(C);return C&&typeof m[0]=="string"&&Ut.call(m,"index")&&(D.index=m.index,D.input=m.input),D}function Rt(m){return typeof m.constructor=="function"&&!Tn(m)?jd(ca(m)):{}}function fn(m,C,D){var Y=m.constructor;switch(C){case Pt:return Vf(m);case Yr:case to:return new Y(+m);case Jt:return nh(m,D);case xt:case ln:case Gn:case zi:case Lr:case Hr:case Ar:case gi:case Ur:return go(m,D);case Qr:return new Y;case Bi:case gr:return new Y(m);case Oe:return Ga(m);case lc:return new Y;case Pa:return du(m)}}function Vn(m,C){var D=C.length;if(!D)return m;var Y=D-1;return C[Y]=(D>1?"& ":"")+C[Y],C=C.join(D>2?", ":" "),m.replace(Do,`{
/* [wrapped with `+C+`] */
`)}function tn(m){return di(m)||ah(m)||!!(xa&&m&&m[xa])}function zn(m,C){var D=typeof m;return C=C??Yn,!!C&&(D=="number"||D!="symbol"&&xf.test(m))&&m>-1&&m%1==0&&m<C}function Wt(m,C,D){if(!Ns(D))return!1;var Y=typeof C;return(Y=="number"?Zc(D)&&zn(C,D.length):Y=="string"&&C in D)?bl(D[C],m):!1}function An(m,C){if(di(m))return!1;var D=typeof m;return D=="number"||D=="symbol"||D=="boolean"||m==null||xl(m)?!0:vp.test(m)||!wh.test(m)||C!=null&&m in ro(C)}function nn(m){var C=typeof m;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?m!=="__proto__":m===null}function _n(m){var C=ze(m),D=Te[C];if(typeof D!="function"||!(C in bi.prototype))return!1;if(m===D)return!0;var Y=Pe(D);return!!Y&&m===Y[0]}function dr(m){return!!Kn&&Kn in m}var Pr=yt?ch:ms;function Tn(m){var C=m&&m.constructor,D=typeof C=="function"&&C.prototype||Tt;return m===D}function mn(m){return m===m&&!Ns(m)}function qt(m,C){return function(D){return D==null?!1:D[m]===C&&(C!==R||m in ro(D))}}function Cr(m){var C=z0(m,function(Y){return D.size===oe&&D.clear(),Y}),D=C.cache;return C}function Fr(m,C){var D=m[1],Y=C[1],ve=D|Y,Re=ve<(ae|ce|G),Ke=Y==G&&D==Ee||Y==G&&D==Fe&&m[7].length<=C[8]||Y==(G|Fe)&&C[7].length<=C[8]&&D==Ee;if(!(Re||Ke))return m;Y&ae&&(m[2]=C[2],ve|=D&ae?0:fe);var ot=C[3];if(ot){var Mt=m[3];m[3]=Mt?sm(Mt,ot,C[4]):ot,m[4]=Mt?ba(m[3],ie):C[4]}return ot=C[5],ot&&(Mt=m[5],m[5]=Mt?ds(Mt,ot,C[6]):ot,m[6]=Mt?ba(m[5],ie):C[6]),ot=C[7],ot&&(m[7]=ot),Y&G&&(m[8]=m[8]==null?C[8]:Os(m[8],C[8])),m[9]==null&&(m[9]=C[9]),m[0]=C[0],m[1]=ve,m}function qn(m){var C=[];if(m!=null)for(var D in ro(m))C.push(D);return C}function si(m){return Er.call(m)}function Dr(m,C,D){return C=us(C===R?m.length-1:C,0),function(){for(var Y=arguments,ve=-1,Re=us(Y.length-C,0),Ke=Bt(Re);++ve<Re;)Ke[ve]=Y[C+ve];ve=-1;for(var ot=Bt(C+1);++ve<C;)ot[ve]=Y[ve];return ot[C]=D(Ke),Nt(m,this,ot)}}function Wr(m,C){return C.length<2?m:rd(m,Pc(C,0,-1))}function Pi(m,C){for(var D=m.length,Y=Os(C.length,D),ve=Js(m);Y--;){var Re=C[Y];m[Y]=zn(Re,D)?ve[Re]:R}return m}function Xo(m,C){if(!(C==="constructor"&&typeof m[C]=="function")&&C!="__proto__")return m[C]}var fs=gs(Bf),Kr=ui||function(m,C){return S.setTimeout(m,C)},ps=gs(Fp);function xo(m,C,D){var Y=C+"";return ps(m,Vn(Y,Zo(cn(Y),D)))}function gs(m){var C=0,D=0;return function(){var Y=A0(),ve=ye-(Y-D);if(D=Y,ve>0){if(++C>=Hn)return arguments[0]}else C=0;return m.apply(R,arguments)}}function Co(m,C){var D=-1,Y=m.length,ve=Y-1;for(C=C===R?Y:C;++D<C;){var Re=uu(D,ve),Ke=m[Re];m[Re]=m[D],m[D]=Ke}return m.length=C,m}var Es=Cr(function(m){var C=[];return m.charCodeAt(0)===46&&C.push(""),m.replace(mp,function(D,Y,ve,Re){C.push(ve?Re.replace(Eh,"$1"):Y||D)}),C});function Ao(m){if(typeof m=="string"||xl(m))return m;var C=m+"";return C=="0"&&1/m==-En?"-0":C}function is(m){if(m!=null){try{return an.call(m)}catch{}try{return m+""}catch{}}return""}function Zo(m,C){return rr(lr,function(D){var Y="_."+D[0];C&D[1]&&!Lo(m,Y)&&m.push(Y)}),m.sort()}function Br(m){if(m instanceof bi)return m.clone();var C=new ka(m.__wrapped__,m.__chain__);return C.__actions__=Js(m.__actions__),C.__index__=m.__index__,C.__values__=m.__values__,C}function Vo(m,C,D){(D?Wt(m,C,D):C===R)?C=1:C=us(_i(C),0);var Y=m==null?0:m.length;if(!Y||C<1)return[];for(var ve=0,Re=0,Ke=Bt(Oh(Y/C));ve<Y;)Ke[Re++]=Pc(m,ve,ve+=C);return Ke}function Ii(m){for(var C=-1,D=m==null?0:m.length,Y=0,ve=[];++C<D;){var Re=m[C];Re&&(ve[Y++]=Re)}return ve}function mr(){var m=arguments.length;if(!m)return[];for(var C=Bt(m-1),D=arguments[0],Y=m;Y--;)C[Y-1]=arguments[Y];return Ir(di(D)?Js(D):[D],ua(C,1))}var li=hi(function(m,C){return ea(m)?td(m,ua(C,1,ea,!0)):[]}),Ci=hi(function(m,C){var D=rt(C);return ea(D)&&(D=R),ea(m)?td(m,ua(C,1,ea,!0),pt(D,2)):[]}),vs=hi(function(m,C){var D=rt(C);return ea(D)&&(D=R),ea(m)?td(m,ua(C,1,ea,!0),R,D):[]});function Hl(m,C,D){var Y=m==null?0:m.length;return Y?(C=D||C===R?1:_i(C),Pc(m,C<0?0:C,Y)):[]}function sh(m,C,D){var Y=m==null?0:m.length;return Y?(C=D||C===R?1:_i(C),C=Y-C,Pc(m,0,C<0?0:C)):[]}function Be(m,C){return m&&m.length?Hh(m,pt(C,3),!0,!0):[]}function Dt(m,C){return m&&m.length?Hh(m,pt(C,3),!0):[]}function Et(m,C,D,Y){var ve=m==null?0:m.length;return ve?(D&&typeof D!="number"&&Wt(m,C,D)&&(D=0,Y=ve),Np(m,C,D,Y)):[]}function $n(m,C,D){var Y=m==null?0:m.length;if(!Y)return-1;var ve=D==null?0:_i(D);return ve<0&&(ve=us(Y+ve,0)),Fo(m,pt(C,3),ve)}function ti(m,C,D){var Y=m==null?0:m.length;if(!Y)return-1;var ve=Y-1;return D!==R&&(ve=_i(D),ve=D<0?us(Y+ve,0):Os(ve,Y-1)),Fo(m,pt(C,3),ve,!0)}function Ge(m){var C=m==null?0:m.length;return C?ua(m,1):[]}function we(m){var C=m==null?0:m.length;return C?ua(m,En):[]}function We(m,C){var D=m==null?0:m.length;return D?(C=C===R?1:_i(C),ua(m,C)):[]}function ut(m){for(var C=-1,D=m==null?0:m.length,Y={};++C<D;){var ve=m[C];Y[ve[0]]=ve[1]}return Y}function ht(m){return m&&m.length?m[0]:R}function Je(m,C,D){var Y=m==null?0:m.length;if(!Y)return-1;var ve=D==null?0:_i(D);return ve<0&&(ve=us(Y+ve,0)),es(m,C,ve)}function Xe(m){var C=m==null?0:m.length;return C?Pc(m,0,-1):[]}var tt=hi(function(m){var C=Gr(m,Uf);return C.length&&C[0]===m[0]?Lf(C):[]}),Le=hi(function(m){var C=rt(m),D=Gr(m,Uf);return C===rt(D)?C=R:D.pop(),D.length&&D[0]===m[0]?Lf(D,pt(C,2)):[]}),He=hi(function(m){var C=rt(m),D=Gr(m,Uf);return C=typeof C=="function"?C:R,C&&D.pop(),D.length&&D[0]===m[0]?Lf(D,R,C):[]});function Ie(m,C){return m==null?"":zd.call(m,C)}function rt(m){var C=m==null?0:m.length;return C?m[C-1]:R}function vt(m,C,D){var Y=m==null?0:m.length;if(!Y)return-1;var ve=Y;return D!==R&&(ve=_i(D),ve=ve<0?us(Y+ve,0):Os(ve,Y-1)),C===C?po(m,C,ve):Fo(m,Zs,ve,!0)}function Vt(m,C){return m&&m.length?Vh(m,_i(C)):R}var Xt=hi(Lt);function Lt(m,C){return m&&m.length&&C&&C.length?Jd(m,C):m}function dn(m,C,D){return m&&m.length&&C&&C.length?Jd(m,C,pt(D,2)):m}function or(m,C,D){return m&&m.length&&C&&C.length?Jd(m,C,R,D):m}var Vr=Ba(function(m,C){var D=m==null?0:m.length,Y=ec(m,C);return vl(m,Gr(C,function(ve){return zn(ve,D)?+ve:ve}).sort(om)),Y});function Zn(m,C){var D=[];if(!(m&&m.length))return D;var Y=-1,ve=[],Re=m.length;for(C=pt(C,3);++Y<Re;){var Ke=m[Y];C(Ke,Y,m)&&(D.push(Ke),ve.push(Y))}return vl(m,ve),D}function ur(m){return m==null?m:Ud.call(m)}function tr(m,C,D){var Y=m==null?0:m.length;return Y?(D&&typeof D!="number"&&Wt(m,C,D)?(C=0,D=Y):(C=C==null?0:_i(C),D=D===R?Y:_i(D)),Pc(m,C,D)):[]}function Si(m,C){return ud(m,C)}function os(m,C,D){return jh(m,C,pt(D,2))}function rc(m,C){var D=m==null?0:m.length;if(D){var Y=ud(m,C);if(Y<D&&bl(m[Y],C))return Y}return-1}function $f(m,C){return ud(m,C,!0)}function mc(m,C,D){return jh(m,C,pt(D,2),!0)}function Ng(m,C){var D=m==null?0:m.length;if(D){var Y=ud(m,C,!0)-1;if(bl(m[Y],C))return Y}return-1}function Qs(m){return m&&m.length?dd(m):[]}function Ig(m,C){return m&&m.length?dd(m,pt(C,2)):[]}function Zy(m){var C=m==null?0:m.length;return C?Pc(m,1,C):[]}function um(m,C,D){return m&&m.length?(C=D||C===R?1:_i(C),Pc(m,0,C<0?0:C)):[]}function g1(m,C,D){var Y=m==null?0:m.length;return Y?(C=D||C===R?1:_i(C),C=Y-C,Pc(m,C<0?0:C,Y)):[]}function Yy(m,C){return m&&m.length?Hh(m,pt(C,3),!1,!0):[]}function v1(m,C){return m&&m.length?Hh(m,pt(C,3)):[]}var dm=hi(function(m){return tc(ua(m,1,ea,!0))}),Ky=hi(function(m){var C=rt(m);return ea(C)&&(C=R),tc(ua(m,1,ea,!0),pt(C,2))}),Fw=hi(function(m){var C=rt(m);return C=typeof C=="function"?C:R,tc(ua(m,1,ea,!0),R,C)});function m1(m){return m&&m.length?tc(m):[]}function Xc(m,C){return m&&m.length?tc(m,pt(C,2)):[]}function y1(m,C){return C=typeof C=="function"?C:R,m&&m.length?tc(m,R,C):[]}function pu(m){if(!(m&&m.length))return[];var C=0;return m=fo(m,function(D){if(ea(D))return C=us(D.length,C),!0}),Sc(C,function(D){return Gr(m,Bo(D))})}function G0(m,C){if(!(m&&m.length))return[];var D=pu(m);return C==null?D:Gr(D,function(Y){return Nt(C,R,Y)})}var Wf=hi(function(m,C){return ea(m)?td(m,C):[]}),qy=hi(function(m){return Wn(fo(m,ea))}),hm=hi(function(m){var C=rt(m);return ea(C)&&(C=R),Wn(fo(m,ea),pt(C,2))}),Jy=hi(function(m){var C=rt(m);return C=typeof C=="function"?C:R,Wn(fo(m,ea),R,C)}),Qy=hi(pu);function fm(m,C){return fd(m||[],C||[],la)}function F0(m,C){return fd(m||[],C||[],jl)}var b1=hi(function(m){var C=m.length,D=C>1?m[C-1]:R;return D=typeof D=="function"?(m.pop(),D):R,G0(m,D)});function Rg(m){var C=Te(m);return C.__chain__=!0,C}function eb(m,C){return C(m),m}function wo(m,C){return C(m)}var x1=Ba(function(m){var C=m.length,D=C?m[0]:0,Y=this.__wrapped__,ve=function(Re){return ec(Re,m)};return C>1||this.__actions__.length||!(Y instanceof bi)||!zn(D)?this.thru(ve):(Y=Y.slice(D,+D+(C?1:0)),Y.__actions__.push({func:wo,args:[ve],thisArg:R}),new ka(Y,this.__chain__).thru(function(Re){return C&&!Re.length&&Re.push(R),Re}))});function C1(){return Rg(this)}function tb(){return new ka(this.value(),this.__chain__)}function gu(){this.__values__===R&&(this.__values__=W0(this.value()));var m=this.__index__>=this.__values__.length,C=m?R:this.__values__[this.__index__++];return{done:m,value:C}}function w1(){return this}function E1(m){for(var C,D=this;D instanceof Zu;){var Y=Br(D);Y.__index__=0,Y.__values__=R,C?ve.__wrapped__=Y:C=Y;var ve=Y;D=D.__wrapped__}return ve.__wrapped__=m,C}function S1(){var m=this.__wrapped__;if(m instanceof bi){var C=m;return this.__actions__.length&&(C=new bi(this)),C=C.reverse(),C.__actions__.push({func:wo,args:[ur],thisArg:R}),new ka(C,this.__chain__)}return this.thru(ur)}function _1(){return Ps(this.__wrapped__,this.__actions__)}var A1=$h(function(m,C,D){Ut.call(m,D)?++m[D]:qs(m,D,1)});function pm(m,C,D){var Y=di(m)?br:I0;return D&&Wt(m,C,D)&&(C=R),Y(m,pt(C,3))}function nb(m,C){var D=di(m)?fo:Rf;return D(m,pt(C,3))}var T1=Pg($n),M1=Pg(ti);function Bw(m,C){return ua(B0(m,C),1)}function rb(m,C){return ua(B0(m,C),En)}function O1(m,C,D){return D=D===R?1:_i(D),ua(B0(m,C),D)}function gm(m,C){var D=di(m)?rr:Tc;return D(m,pt(C,3))}function ib(m,C){var D=di(m)?oi:Tg;return D(m,pt(C,3))}var P1=$h(function(m,C,D){Ut.call(m,D)?m[D].push(C):qs(m,D,[C])});function D1(m,C,D,Y){m=Zc(m)?m:uh(m),D=D&&!Y?_i(D):0;var ve=m.length;return D<0&&(D=us(ve+D,0)),H0(m)?D<=ve&&m.indexOf(C,D)>-1:!!ve&&es(m,C,D)>-1}var vm=hi(function(m,C,D){var Y=-1,ve=typeof C=="function",Re=Zc(m)?Bt(m.length):[];return Tc(m,function(Ke){Re[++Y]=ve?Nt(C,Ke,D):zl(Ke,C,D)}),Re}),ob=$h(function(m,C,D){qs(m,D,C)});function B0(m,C){var D=di(m)?Gr:lu;return D(m,pt(C,3))}function mm(m,C,D,Y){return m==null?[]:(di(C)||(C=C==null?[]:[C]),D=Y?R:D,di(D)||(D=D==null?[]:[D]),cd(m,C,D))}var N1=$h(function(m,C,D){m[D?0:1].push(C)},function(){return[[],[]]});function ym(m,C,D){var Y=di(m)?Ei:Za,ve=arguments.length<3;return Y(m,pt(C,4),D,ve,Tc)}function sb(m,C,D){var Y=di(m)?Di:Za,ve=arguments.length<3;return Y(m,pt(C,4),D,ve,Tg)}function zw(m,C){var D=di(m)?fo:Rf;return D(m,U0(pt(C,3)))}function ab(m){var C=di(m)?Ni:Ff;return C(m)}function I1(m,C,D){(D?Wt(m,C,D):C===R)?C=1:C=_i(C);var Y=di(m)?Nf:Gp;return Y(m,C)}function Uw(m){var C=di(m)?Gl:im;return C(m)}function cb(m){if(m==null)return 0;if(Zc(m))return H0(m)?qa(m):m.length;var C=on(m);return C==Qr||C==lc?m.size:ad(m).length}function R1(m,C,D){var Y=di(m)?Go:Bp;return D&&Wt(m,C,D)&&(C=R),Y(m,pt(C,3))}var k1=hi(function(m,C){if(m==null)return[];var D=C.length;return D>1&&Wt(m,C[0],C[1])?C=[]:D>2&&Wt(C[0],C[1],C[2])&&(C=[C[0]]),cd(m,ua(C,1),[])}),kg=ci||function(){return S.Date.now()};function lb(m,C){if(typeof C!="function")throw new Me(te);return m=_i(m),function(){if(--m<1)return C.apply(this,arguments)}}function L1(m,C,D){return C=D?R:C,C=m&&C==null?m.length:C,fu(m,G,R,R,R,R,C)}function ub(m,C){var D;if(typeof C!="function")throw new Me(te);return m=_i(m),function(){return--m>0&&(D=C.apply(this,arguments)),m<=1&&(C=R),D}}var db=hi(function(m,C,D){var Y=ae;if(D.length){var ve=ba(D,_t(db));Y|=Ae}return fu(m,Y,C,D,ve)}),hb=hi(function(m,C,D){var Y=ae|ce;if(D.length){var ve=ba(D,_t(hb));Y|=Ae}return fu(C,Y,m,D,ve)});function fb(m,C,D){C=D?R:C;var Y=fu(m,Ee,R,R,R,R,R,C);return Y.placeholder=fb.placeholder,Y}function pb(m,C,D){C=D?R:C;var Y=fu(m,pe,R,R,R,R,R,C);return Y.placeholder=pb.placeholder,Y}function gb(m,C,D){var Y,ve,Re,Ke,ot,Mt,yn=0,xn=!1,Dn=!1,nr=!0;if(typeof m!="function")throw new Me(te);C=Yc(C)||0,Ns(D)&&(xn=!!D.leading,Dn="maxWait"in D,Re=Dn?us(Yc(D.maxWait)||0,C):Re,nr="trailing"in D?!!D.trailing:nr);function Tr(St){var Va=Y,Xl=ve;return Y=ve=R,yn=St,Ke=m.apply(Xl,Va),Ke}function ni(St){return yn=St,ot=Kr($i,C),xn?Tr(St):Ke}function Ri(St){var Va=St-Mt,Xl=St-yn,Kb=C-Va;return Dn?Os(Kb,Re-Xl):Kb}function ri(St){var Va=St-Mt,Xl=St-yn;return Mt===R||Va>=C||Va<0||Dn&&Xl>=Re}function $i(){var St=kg();if(ri(St))return ao(St);ot=Kr($i,Ri(St))}function ao(St){return ot=R,nr&&Y?Tr(St):(Y=ve=R,Ke)}function Wl(){ot!==R&&th(ot),yn=0,Y=Mt=ve=ot=R}function qc(){return ot===R?Ke:ao(kg())}function Rs(){var St=kg(),Va=ri(St);if(Y=arguments,ve=this,Mt=St,Va){if(ot===R)return ni(Mt);if(Dn)return th(ot),ot=Kr($i,C),Tr(Mt)}return ot===R&&(ot=Kr($i,C)),Ke}return Rs.cancel=Wl,Rs.flush=qc,Rs}var G1=hi(function(m,C){return ed(m,1,C)}),F1=hi(function(m,C,D){return ed(m,Yc(C)||0,D)});function vb(m){return fu(m,$e)}function z0(m,C){if(typeof m!="function"||C!=null&&typeof C!="function")throw new Me(te);var D=function(){var Y=arguments,ve=C?C.apply(this,Y):Y[0],Re=D.cache;if(Re.has(ve))return Re.get(ve);var Ke=m.apply(this,Y);return D.cache=Re.set(ve,Ke)||Re,Ke};return D.cache=new(z0.Cache||Ll),D}z0.Cache=Ll;function U0(m){if(typeof m!="function")throw new Me(te);return function(){var C=arguments;switch(C.length){case 0:return!m.call(this);case 1:return!m.call(this,C[0]);case 2:return!m.call(this,C[0],C[1]);case 3:return!m.call(this,C[0],C[1],C[2])}return!m.apply(this,C)}}function mb(m){return ub(2,m)}var B1=xi(function(m,C){C=C.length==1&&di(C[0])?Gr(C[0],ts(pt())):Gr(ua(C,1),ts(pt()));var D=C.length;return hi(function(Y){for(var ve=-1,Re=Os(Y.length,D);++ve<Re;)Y[ve]=C[ve].call(this,Y[ve]);return Nt(m,this,Y)})}),bm=hi(function(m,C){var D=ba(C,_t(bm));return fu(m,Ae,R,C,D)}),yb=hi(function(m,C){var D=ba(C,_t(yb));return fu(m,nt,R,C,D)}),z1=Ba(function(m,C){return fu(m,Fe,R,R,R,C)});function U1(m,C){if(typeof m!="function")throw new Me(te);return C=C===R?C:_i(C),hi(m,C)}function bb(m,C){if(typeof m!="function")throw new Me(te);return C=C==null?0:us(_i(C),0),hi(function(D){var Y=D[C],ve=Ds(D,0,C);return Y&&Ir(ve,Y),Nt(m,this,ve)})}function xb(m,C,D){var Y=!0,ve=!0;if(typeof m!="function")throw new Me(te);return Ns(D)&&(Y="leading"in D?!!D.leading:Y,ve="trailing"in D?!!D.trailing:ve),gb(m,C,{leading:Y,maxWait:C,trailing:ve})}function xm(m){return L1(m,1)}function V1(m,C){return bm(vc(C),m)}function j1(){if(!arguments.length)return[];var m=arguments[0];return di(m)?m:[m]}function Cm(m){return Ca(m,De)}function wm(m,C){return C=typeof C=="function"?C:R,Ca(m,De,C)}function H1(m){return Ca(m,re|De)}function V0(m,C){return C=typeof C=="function"?C:R,Ca(m,re|De,C)}function Cb(m,C){return C==null||Zd(m,C,Is(C))}function bl(m,C){return m===C||m!==m&&C!==C}var Em=vd(Fh),$1=vd(function(m,C){return m>=C}),ah=pl(function(){return arguments}())?pl:function(m){return zs(m)&&Ut.call(m,"callee")&&!fc.call(m,"callee")},di=Bt.isArray,Sm=Ce?ts(Ce):Yd;function Zc(m){return m!=null&&Lg(m.length)&&!ch(m)}function ea(m){return zs(m)&&Zc(m)}function W1(m){return m===!0||m===!1||zs(m)&&wa(m)==Yr}var Xf=Eg||ms,wb=Ze?ts(Ze):Ul;function X1(m){return zs(m)&&m.nodeType===1&&!Gg(m)}function Vw(m){if(m==null)return!0;if(Zc(m)&&(di(m)||typeof m=="string"||typeof m.splice=="function"||Xf(m)||Eo(m)||ah(m)))return!m.length;var C=on(m);if(C==Qr||C==lc)return!m.size;if(Tn(m))return!ad(m).length;for(var D in m)if(Ut.call(m,D))return!1;return!0}function Z1(m,C){return zh(m,C)}function jw(m,C,D){D=typeof D=="function"?D:R;var Y=D?D(m,C):R;return Y===R?zh(m,C,R,D):!!Y}function j0(m){if(!zs(m))return!1;var C=wa(m);return C==oa||C==Ts||typeof m.message=="string"&&typeof m.name=="string"&&!Gg(m)}function Y1(m){return typeof m=="number"&&Pf(m)}function ch(m){if(!Ns(m))return!1;var C=wa(m);return C==no||C==Ko||C==zr||C==gf}function Eb(m){return typeof m=="number"&&m==_i(m)}function Lg(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=Yn}function Ns(m){var C=typeof m;return m!=null&&(C=="object"||C=="function")}function zs(m){return m!=null&&typeof m=="object"}var Sb=qe?ts(qe):Vl;function _m(m,C){return m===C||Kd(m,C,It(C))}function K1(m,C,D){return D=typeof D=="function"?D:R,Kd(m,C,It(C),D)}function _b(m){return Ab(m)&&m!=+m}function q1(m){if(Pr(m))throw new $r(Z);return Hc(m)}function J1(m){return m===null}function Am(m){return m==null}function Ab(m){return typeof m=="number"||zs(m)&&wa(m)==Bi}function Gg(m){if(!zs(m)||wa(m)!=F)return!1;var C=ca(m);if(C===null)return!0;var D=Ut.call(C,"constructor")&&C.constructor;return typeof D=="function"&&D instanceof D&&an.call(D)==xr}var Tm=mt?ts(mt):gc;function Q1(m){return Eb(m)&&m>=-Yn&&m<=Yn}var Tb=zt?ts(zt):Uh;function H0(m){return typeof m=="string"||!di(m)&&zs(m)&&wa(m)==gr}function xl(m){return typeof m=="symbol"||zs(m)&&wa(m)==Pa}var Eo=vn?ts(vn):sd;function $0(m){return m===R}function Mb(m){return zs(m)&&on(m)==qo}function ex(m){return zs(m)&&wa(m)==Ha}var tx=vd(cu),$p=vd(function(m,C){return m<=C});function W0(m){if(!m)return[];if(Zc(m))return H0(m)?Wo(m):Js(m);if(Ja&&m[Ja])return ju(m[Ja]());var C=on(m),D=C==Qr?ya:C==lc?ru:uh;return D(m)}function vu(m){if(!m)return m===0?m:0;if(m=Yc(m),m===En||m===-En){var C=m<0?-1:1;return C*pn}return m===m?m:0}function _i(m){var C=vu(m),D=C%1;return C===C?D?C-D:C:0}function Yo(m){return m?Ac(_i(m),0,ji):0}function Yc(m){if(typeof m=="number")return m;if(xl(m))return lo;if(Ns(m)){var C=typeof m.valueOf=="function"?m.valueOf():m;m=Ns(C)?C+"":C}if(typeof m!="string")return m===0?m:+m;m=cl(m);var D=Ml.test(m);return D||Ou.test(m)?Ah(m.slice(2),D?2:8):Od.test(m)?lo:+m}function Fg(m){return Dc(m,_a(m))}function nx(m){return m?Ac(_i(m),-Yn,Yn):m===0?m:0}function So(m){return m==null?"":ws(m)}var Ob=Wh(function(m,C){if(Tn(C)||Zc(C)){Dc(C,Is(C),m);return}for(var D in C)Ut.call(C,D)&&la(m,D,C[D])}),Mm=Wh(function(m,C){Dc(C,_a(C),m)}),X0=Wh(function(m,C,D,Y){Dc(C,_a(C),m,Y)}),Pb=Wh(function(m,C,D,Y){Dc(C,Is(C),m,Y)}),rx=Ba(ec);function Wp(m,C){var D=jd(m);return C==null?D:hl(D,C)}var Om=hi(function(m,C){m=ro(m);var D=-1,Y=C.length,ve=Y>2?C[2]:R;for(ve&&Wt(C[0],C[1],ve)&&(Y=1);++D<Y;)for(var Re=C[D],Ke=_a(Re),ot=-1,Mt=Ke.length;++ot<Mt;){var yn=Ke[ot],xn=m[yn];(xn===R||bl(xn,Tt[yn])&&!Ut.call(m,yn))&&(m[yn]=Re[yn])}return m}),Z0=hi(function(m){return m.push(R,Xh),Nt(Bg,R,m)});function Db(m,C){return Na(m,pt(C,3),fl)}function Cl(m,C){return Na(m,pt(C,3),jc)}function ix(m,C){return m==null?m:Ip(m,pt(C,3),_a)}function Y0(m,C){return m==null?m:Rp(m,pt(C,3),_a)}function Pm(m,C){return m&&fl(m,pt(C,3))}function K0(m,C){return m&&jc(m,pt(C,3))}function Nb(m){return m==null?[]:Gh(m,Is(m))}function ox(m){return m==null?[]:Gh(m,_a(m))}function Xp(m,C,D){var Y=m==null?R:rd(m,C);return Y===R?D:Y}function q0(m,C){return m!=null&&wn(m,C,Bh)}function lh(m,C){return m!=null&&wn(m,C,kf)}var Dm=rs(function(m,C,D){C!=null&&typeof C.toString!="function"&&(C=Er.call(C)),m[C]=D},Lm(To)),$l=rs(function(m,C,D){C!=null&&typeof C.toString!="function"&&(C=Er.call(C)),Ut.call(m,C)?m[C].push(D):m[C]=[D]},pt),mu=hi(zl);function Is(m){return Zc(m)?Wd(m):ad(m)}function _a(m){return Zc(m)?Wd(m,!0):kp(m)}function sx(m,C){var D={};return C=pt(C,3),fl(m,function(Y,ve,Re){qs(D,C(Y,ve,Re),Y)}),D}function Nm(m,C){var D={};return C=pt(C,3),fl(m,function(Y,ve,Re){qs(D,ve,C(Y,ve,Re))}),D}var Ib=Wh(function(m,C,D){Wc(m,C,D)}),Bg=Wh(function(m,C,D,Y){Wc(m,C,D,Y)}),J0=Ba(function(m,C){var D={};if(m==null)return D;var Y=!1;C=Gr(C,function(Re){return Re=La(Re,m),Y||(Y=Re.length>1),Re}),Dc(m,K(m),D),Y&&(D=Ca(D,re|he|De,k0));for(var ve=C.length;ve--;)eh(D,C[ve]);return D});function Zf(m,C){return Rb(m,U0(pt(C)))}var ax=Ba(function(m,C){return m==null?{}:R0(m,C)});function Rb(m,C){if(m==null)return{};var D=Gr(K(m),function(Y){return[Y]});return C=pt(C),qd(m,D,function(Y,ve){return C(Y,ve[0])})}function kb(m,C,D){C=La(C,m);var Y=-1,ve=C.length;for(ve||(ve=1,m=R);++Y<ve;){var Re=m==null?R:m[Ao(C[Y])];Re===R&&(Y=ve,Re=D),m=ch(Re)?Re.call(m):Re}return m}function cx(m,C,D){return m==null?m:jl(m,C,D)}function lx(m,C,D,Y){return Y=typeof Y=="function"?Y:R,m==null?m:jl(m,C,D,Y)}var Lb=hu(Is),Im=hu(_a);function ux(m,C,D){var Y=di(m),ve=Y||Xf(m)||Eo(m);if(C=pt(C,4),D==null){var Re=m&&m.constructor;ve?D=Y?new Re:[]:Ns(m)?D=ch(Re)?jd(ca(m)):{}:D={}}return(ve?rr:fl)(m,function(Ke,ot,Mt){return C(D,Ke,ot,Mt)}),D}function dx(m,C){return m==null?!0:eh(m,C)}function hx(m,C,D){return m==null?m:zf(m,C,vc(D))}function fx(m,C,D,Y){return Y=typeof Y=="function"?Y:R,m==null?m:zf(m,C,vc(D),Y)}function uh(m){return m==null?[]:Uu(m,Is(m))}function px(m){return m==null?[]:Uu(m,_a(m))}function gx(m,C,D){return D===R&&(D=C,C=R),D!==R&&(D=Yc(D),D=D===D?D:0),C!==R&&(C=Yc(C),C=C===C?C:0),Ac(Yc(m),C,D)}function vx(m,C,D){return C=vu(C),D===R?(D=C,C=0):D=vu(D),m=Yc(m),Bl(m,C,D)}function mx(m,C,D){if(D&&typeof D!="boolean"&&Wt(m,C,D)&&(C=D=R),D===R&&(typeof C=="boolean"?(D=C,C=R):typeof m=="boolean"&&(D=m,m=R)),m===R&&C===R?(m=0,C=1):(m=vu(m),C===R?(C=m,m=0):C=vu(C)),m>C){var Y=m;m=C,C=Y}if(D||m%1||C%1){var ve=ou();return Os(m+ve*(C-m+al("1e-"+((ve+"").length-1))),C)}return uu(m,C)}var yx=gd(function(m,C,D){return C=C.toLowerCase(),m+(D?Gb(C):C)});function Gb(m){return km(So(m).toLowerCase())}function ta(m){return m=So(m),m&&m.replace(Pu,Il).replace(Ws,"")}function Fb(m,C,D){m=So(m),C=ws(C);var Y=m.length;D=D===R?Y:Ac(_i(D),0,Y);var ve=D;return D-=C.length,D>=0&&m.slice(D,ve)==C}function bx(m){return m=So(m),m&&Jo.test(m)?m.replace(Bc,Mf):m}function qr(m){return m=So(m),m&&Hi.test(m)?m.replace(il,"\\$&"):m}var xx=gd(function(m,C,D){return m+(D?"-":"")+C.toLowerCase()}),Zp=gd(function(m,C,D){return m+(D?" ":"")+C.toLowerCase()}),Zh=hs("toLowerCase");function Bb(m,C,D){m=So(m),C=_i(C);var Y=C?qa(m):0;if(!C||Y>=C)return m;var ve=(C-Y)/2;return Vp($u(ve),D)+m+Vp(Oh(ve),D)}function Cx(m,C,D){m=So(m),C=_i(C);var Y=C?qa(m):0;return C&&Y<C?m+Vp(C-Y,D):m}function wx(m,C,D){m=So(m),C=_i(C);var Y=C?qa(m):0;return C&&Y<C?Vp(C-Y,D)+m:m}function Rm(m,C,D){return D||C==null?C=0:C&&(C=+C),T0(So(m).replace(uo,""),C||0)}function Ex(m,C,D){return(D?Wt(m,C,D):C===R)?C=1:C=_i(C),Qd(So(m),C)}function yu(){var m=arguments,C=So(m[0]);return m.length<3?C:C.replace(m[1],m[2])}var Sx=gd(function(m,C,D){return m+(D?"_":"")+C.toLowerCase()});function _x(m,C,D){return D&&typeof D!="number"&&Wt(m,C,D)&&(C=D=R),D=D===R?ji:D>>>0,D?(m=So(m),m&&(typeof C=="string"||C!=null&&!Tm(C))&&(C=ws(C),!C&&Ya(m))?Ds(Wo(m),0,D):m.split(C,D)):[]}var Ax=gd(function(m,C,D){return m+(D?" ":"")+km(C)});function Tx(m,C,D){return m=So(m),D=D==null?0:Ac(_i(D),0,m.length),C=ws(C),m.slice(D,D+C.length)==C}function Mx(m,C,D){var Y=Te.templateSettings;D&&Wt(m,C,D)&&(C=R),m=So(m),C=X0({},C,Y,Hf);var ve=X0({},C.imports,Y.imports,Hf),Re=Is(ve),Ke=Uu(ve,Re),ot,Mt,yn=0,xn=C.interpolate||Ql,Dn="__p += '",nr=Fd((C.escape||Ql).source+"|"+xn.source+"|"+(xn===Qo?bp:Ql).source+"|"+(C.evaluate||Ql).source+"|$","g"),Tr="//# sourceURL="+(Ut.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sl+"]")+`
`;m.replace(nr,function(ri,$i,ao,Wl,qc,Rs){return ao||(ao=Wl),Dn+=m.slice(yn,Rs).replace(Pd,Th),$i&&(ot=!0,Dn+=`' +
__e(`+$i+`) +
'`),qc&&(Mt=!0,Dn+=`';
`+qc+`;
__p += '`),ao&&(Dn+=`' +
((__t = (`+ao+`)) == null ? '' : __t) +
'`),yn=Rs+ri.length,ri}),Dn+=`';
`;var ni=Ut.call(C,"variable")&&C.variable;if(!ni)Dn=`with (obj) {
`+Dn+`
}
`;else if(bf.test(ni))throw new $r(Q);Dn=(Mt?Dn.replace(ko,""):Dn).replace(Fc,"$1").replace(vf,"$1;"),Dn="function("+(ni||"obj")+`) {
`+(ni?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ot?", __e = _.escape":"")+(Mt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Dn+`return __p
}`;var Ri=Yh(function(){return Ki(Re,Tr+"return "+Dn).apply(R,Ke)});if(Ri.source=Dn,j0(Ri))throw Ri;return Ri}function Sr(m){return So(m).toLowerCase()}function hr(m){return So(m).toUpperCase()}function wr(m,C,D){if(m=So(m),m&&(D||C===R))return cl(m);if(!m||!(C=ws(C)))return m;var Y=Wo(m),ve=Wo(C),Re=nu(Y,ve),Ke=zo(Y,ve)+1;return Ds(Y,Re,Ke).join("")}function _r(m,C,D){if(m=So(m),m&&(D||C===R))return m.slice(0,ns(m)+1);if(!m||!(C=ws(C)))return m;var Y=Wo(m),ve=zo(Y,Wo(C))+1;return Ds(Y,0,ve).join("")}function Ox(m,C,D){if(m=So(m),m&&(D||C===R))return m.replace(uo,"");if(!m||!(C=ws(C)))return m;var Y=Wo(m),ve=nu(Y,Wo(C));return Ds(Y,ve).join("")}function cr(m,C){var D=at,Y=Ft;if(Ns(C)){var ve="separator"in C?C.separator:ve;D="length"in C?_i(C.length):D,Y="omission"in C?ws(C.omission):Y}m=So(m);var Re=m.length;if(Ya(m)){var Ke=Wo(m);Re=Ke.length}if(D>=Re)return m;var ot=D-qa(Y);if(ot<1)return Y;var Mt=Ke?Ds(Ke,0,ot).join(""):m.slice(0,ot);if(ve===R)return Mt+Y;if(Ke&&(ot+=Mt.length-ot),Tm(ve)){if(m.slice(ot).search(ve)){var yn,xn=Mt;for(ve.global||(ve=Fd(ve.source,So(xp.exec(ve))+"g")),ve.lastIndex=0;yn=ve.exec(xn);)var Dn=yn.index;Mt=Mt.slice(0,Dn===R?ot:Dn)}}else if(m.indexOf(ws(ve),ot)!=ot){var nr=Mt.lastIndexOf(ve);nr>-1&&(Mt=Mt.slice(0,nr))}return Mt+Y}function Ji(m){return m=So(m),m&&Cc.test(m)?m.replace(mf,aa):m}var Px=gd(function(m,C,D){return m+(D?" ":"")+C.toUpperCase()}),km=hs("toUpperCase");function bu(m,C,D){return m=So(m),C=D?R:C,C===R?ll(m)?Mh(m):Xs(m):m.match(C)||[]}var Yh=hi(function(m,C){try{return Nt(m,R,C)}catch(D){return j0(D)?D:new $r(D)}}),Yf=Ba(function(m,C){return rr(C,function(D){D=Ao(D),qs(m,D,db(m[D],m))}),m});function xu(m){var C=m==null?0:m.length,D=pt();return m=C?Gr(m,function(Y){if(typeof Y[1]!="function")throw new Me(te);return[D(Y[0]),Y[1]]}):[],hi(function(Y){for(var ve=-1;++ve<C;){var Re=m[ve];if(Nt(Re[0],this,Y))return Nt(Re[1],this,Y)}})}function sn(m){return au(Ca(m,re))}function Lm(m){return function(){return m}}function Dx(m,C){return m==null||m!==m?C:m}var zb=Fa(),za=Fa(!0);function To(m){return m}function so(m){return Mc(typeof m=="function"?m:Ca(m,re))}function Nx(m){return Oc(Ca(m,re))}function Ub(m,C){return $c(m,Ca(C,re))}var Ix=hi(function(m,C){return function(D){return zl(D,m,C)}}),Vb=hi(function(m,C){return function(D){return zl(m,D,C)}});function Gm(m,C,D){var Y=Is(C),ve=Gh(C,Y);D==null&&!(Ns(C)&&(ve.length||!Y.length))&&(D=C,C=m,m=this,ve=Gh(C,Is(C)));var Re=!(Ns(D)&&"chain"in D)||!!D.chain,Ke=ch(m);return rr(ve,function(ot){var Mt=C[ot];m[ot]=Mt,Ke&&(m.prototype[ot]=function(){var yn=this.__chain__;if(Re||yn){var xn=m(this.__wrapped__),Dn=xn.__actions__=Js(this.__actions__);return Dn.push({func:Mt,args:arguments,thisArg:m}),xn.__chain__=yn,xn}return Mt.apply(m,Ir([this.value()],arguments))})}),m}function jb(){return S._===this&&(S._=Or),this}function Q0(){}function Hb(m){return m=_i(m),hi(function(C){return Vh(C,m)})}var zg=Up(Gr),ev=Up(br),$b=Up(Go);function Kc(m){return An(m)?Bo(Ao(m)):ld(m)}function Wb(m){return function(C){return m==null?R:rd(m,C)}}var Fm=jp(),Rx=jp(!0);function kt(){return[]}function ms(){return!1}function Ua(){return{}}function Ug(){return""}function kx(){return!0}function Xb(m,C){if(m=_i(m),m<1||m>Yn)return[];var D=ji,Y=Os(m,ji);C=pt(C),m-=ji;for(var ve=Sc(Y,C);++D<m;)C(D);return ve}function Lx(m){return di(m)?Gr(m,Ao):xl(m)?[m]:Js(Es(So(m)))}function Gx(m){var C=++Un;return So(m)+C}var Fx=Ea(function(m,C){return m+C},0),Bm=Sa("ceil"),Hw=Ea(function(m,C){return m/C},1),$w=Sa("floor");function Ww(m){return m&&m.length?nd(m,To,Fh):R}function Xw(m,C){return m&&m.length?nd(m,pt(C,2),Fh):R}function Zw(m){return Ec(m,To)}function Yw(m,C){return Ec(m,pt(C,2))}function Zb(m){return m&&m.length?nd(m,To,cu):R}function Bx(m,C){return m&&m.length?nd(m,pt(C,2),cu):R}var Kw=Ea(function(m,C){return m*C},1),qw=Sa("round"),Jw=Ea(function(m,C){return m-C},0);function Yb(m){return m&&m.length?Bs(m,To):0}function zx(m,C){return m&&m.length?Bs(m,pt(C,2)):0}return Te.after=lb,Te.ary=L1,Te.assign=Ob,Te.assignIn=Mm,Te.assignInWith=X0,Te.assignWith=Pb,Te.at=rx,Te.before=ub,Te.bind=db,Te.bindAll=Yf,Te.bindKey=hb,Te.castArray=j1,Te.chain=Rg,Te.chunk=Vo,Te.compact=Ii,Te.concat=mr,Te.cond=xu,Te.conforms=sn,Te.constant=Lm,Te.countBy=A1,Te.create=Wp,Te.curry=fb,Te.curryRight=pb,Te.debounce=gb,Te.defaults=Om,Te.defaultsDeep=Z0,Te.defer=G1,Te.delay=F1,Te.difference=li,Te.differenceBy=Ci,Te.differenceWith=vs,Te.drop=Hl,Te.dropRight=sh,Te.dropRightWhile=Be,Te.dropWhile=Dt,Te.fill=Et,Te.filter=nb,Te.flatMap=Bw,Te.flatMapDeep=rb,Te.flatMapDepth=O1,Te.flatten=Ge,Te.flattenDeep=we,Te.flattenDepth=We,Te.flip=vb,Te.flow=zb,Te.flowRight=za,Te.fromPairs=ut,Te.functions=Nb,Te.functionsIn=ox,Te.groupBy=P1,Te.initial=Xe,Te.intersection=tt,Te.intersectionBy=Le,Te.intersectionWith=He,Te.invert=Dm,Te.invertBy=$l,Te.invokeMap=vm,Te.iteratee=so,Te.keyBy=ob,Te.keys=Is,Te.keysIn=_a,Te.map=B0,Te.mapKeys=sx,Te.mapValues=Nm,Te.matches=Nx,Te.matchesProperty=Ub,Te.memoize=z0,Te.merge=Ib,Te.mergeWith=Bg,Te.method=Ix,Te.methodOf=Vb,Te.mixin=Gm,Te.negate=U0,Te.nthArg=Hb,Te.omit=J0,Te.omitBy=Zf,Te.once=mb,Te.orderBy=mm,Te.over=zg,Te.overArgs=B1,Te.overEvery=ev,Te.overSome=$b,Te.partial=bm,Te.partialRight=yb,Te.partition=N1,Te.pick=ax,Te.pickBy=Rb,Te.property=Kc,Te.propertyOf=Wb,Te.pull=Xt,Te.pullAll=Lt,Te.pullAllBy=dn,Te.pullAllWith=or,Te.pullAt=Vr,Te.range=Fm,Te.rangeRight=Rx,Te.rearg=z1,Te.reject=zw,Te.remove=Zn,Te.rest=U1,Te.reverse=ur,Te.sampleSize=I1,Te.set=cx,Te.setWith=lx,Te.shuffle=Uw,Te.slice=tr,Te.sortBy=k1,Te.sortedUniq=Qs,Te.sortedUniqBy=Ig,Te.split=_x,Te.spread=bb,Te.tail=Zy,Te.take=um,Te.takeRight=g1,Te.takeRightWhile=Yy,Te.takeWhile=v1,Te.tap=eb,Te.throttle=xb,Te.thru=wo,Te.toArray=W0,Te.toPairs=Lb,Te.toPairsIn=Im,Te.toPath=Lx,Te.toPlainObject=Fg,Te.transform=ux,Te.unary=xm,Te.union=dm,Te.unionBy=Ky,Te.unionWith=Fw,Te.uniq=m1,Te.uniqBy=Xc,Te.uniqWith=y1,Te.unset=dx,Te.unzip=pu,Te.unzipWith=G0,Te.update=hx,Te.updateWith=fx,Te.values=uh,Te.valuesIn=px,Te.without=Wf,Te.words=bu,Te.wrap=V1,Te.xor=qy,Te.xorBy=hm,Te.xorWith=Jy,Te.zip=Qy,Te.zipObject=fm,Te.zipObjectDeep=F0,Te.zipWith=b1,Te.entries=Lb,Te.entriesIn=Im,Te.extend=Mm,Te.extendWith=X0,Gm(Te,Te),Te.add=Fx,Te.attempt=Yh,Te.camelCase=yx,Te.capitalize=Gb,Te.ceil=Bm,Te.clamp=gx,Te.clone=Cm,Te.cloneDeep=H1,Te.cloneDeepWith=V0,Te.cloneWith=wm,Te.conformsTo=Cb,Te.deburr=ta,Te.defaultTo=Dx,Te.divide=Hw,Te.endsWith=Fb,Te.eq=bl,Te.escape=bx,Te.escapeRegExp=qr,Te.every=pm,Te.find=T1,Te.findIndex=$n,Te.findKey=Db,Te.findLast=M1,Te.findLastIndex=ti,Te.findLastKey=Cl,Te.floor=$w,Te.forEach=gm,Te.forEachRight=ib,Te.forIn=ix,Te.forInRight=Y0,Te.forOwn=Pm,Te.forOwnRight=K0,Te.get=Xp,Te.gt=Em,Te.gte=$1,Te.has=q0,Te.hasIn=lh,Te.head=ht,Te.identity=To,Te.includes=D1,Te.indexOf=Je,Te.inRange=vx,Te.invoke=mu,Te.isArguments=ah,Te.isArray=di,Te.isArrayBuffer=Sm,Te.isArrayLike=Zc,Te.isArrayLikeObject=ea,Te.isBoolean=W1,Te.isBuffer=Xf,Te.isDate=wb,Te.isElement=X1,Te.isEmpty=Vw,Te.isEqual=Z1,Te.isEqualWith=jw,Te.isError=j0,Te.isFinite=Y1,Te.isFunction=ch,Te.isInteger=Eb,Te.isLength=Lg,Te.isMap=Sb,Te.isMatch=_m,Te.isMatchWith=K1,Te.isNaN=_b,Te.isNative=q1,Te.isNil=Am,Te.isNull=J1,Te.isNumber=Ab,Te.isObject=Ns,Te.isObjectLike=zs,Te.isPlainObject=Gg,Te.isRegExp=Tm,Te.isSafeInteger=Q1,Te.isSet=Tb,Te.isString=H0,Te.isSymbol=xl,Te.isTypedArray=Eo,Te.isUndefined=$0,Te.isWeakMap=Mb,Te.isWeakSet=ex,Te.join=Ie,Te.kebabCase=xx,Te.last=rt,Te.lastIndexOf=vt,Te.lowerCase=Zp,Te.lowerFirst=Zh,Te.lt=tx,Te.lte=$p,Te.max=Ww,Te.maxBy=Xw,Te.mean=Zw,Te.meanBy=Yw,Te.min=Zb,Te.minBy=Bx,Te.stubArray=kt,Te.stubFalse=ms,Te.stubObject=Ua,Te.stubString=Ug,Te.stubTrue=kx,Te.multiply=Kw,Te.nth=Vt,Te.noConflict=jb,Te.noop=Q0,Te.now=kg,Te.pad=Bb,Te.padEnd=Cx,Te.padStart=wx,Te.parseInt=Rm,Te.random=mx,Te.reduce=ym,Te.reduceRight=sb,Te.repeat=Ex,Te.replace=yu,Te.result=kb,Te.round=qw,Te.runInContext=dt,Te.sample=ab,Te.size=cb,Te.snakeCase=Sx,Te.some=R1,Te.sortedIndex=Si,Te.sortedIndexBy=os,Te.sortedIndexOf=rc,Te.sortedLastIndex=$f,Te.sortedLastIndexBy=mc,Te.sortedLastIndexOf=Ng,Te.startCase=Ax,Te.startsWith=Tx,Te.subtract=Jw,Te.sum=Yb,Te.sumBy=zx,Te.template=Mx,Te.times=Xb,Te.toFinite=vu,Te.toInteger=_i,Te.toLength=Yo,Te.toLower=Sr,Te.toNumber=Yc,Te.toSafeInteger=nx,Te.toString=So,Te.toUpper=hr,Te.trim=wr,Te.trimEnd=_r,Te.trimStart=Ox,Te.truncate=cr,Te.unescape=Ji,Te.uniqueId=Gx,Te.upperCase=Px,Te.upperFirst=km,Te.each=gm,Te.eachRight=ib,Te.first=ht,Gm(Te,function(){var m={};return fl(Te,function(C,D){Ut.call(Te.prototype,D)||(m[D]=C)}),m}(),{chain:!1}),Te.VERSION=J,rr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(m){Te[m].placeholder=Te}),rr(["drop","take"],function(m,C){bi.prototype[m]=function(D){D=D===R?1:us(_i(D),0);var Y=this.__filtered__&&!C?new bi(this):this.clone();return Y.__filtered__?Y.__takeCount__=Os(D,Y.__takeCount__):Y.__views__.push({size:Os(D,ji),type:m+(Y.__dir__<0?"Right":"")}),Y},bi.prototype[m+"Right"]=function(D){return this.reverse()[m](D).reverse()}}),rr(["filter","map","takeWhile"],function(m,C){var D=C+1,Y=D==wt||D==jt;bi.prototype[m]=function(ve){var Re=this.clone();return Re.__iteratees__.push({iteratee:pt(ve,3),type:D}),Re.__filtered__=Re.__filtered__||Y,Re}}),rr(["head","last"],function(m,C){var D="take"+(C?"Right":"");bi.prototype[m]=function(){return this[D](1).value()[0]}}),rr(["initial","tail"],function(m,C){var D="drop"+(C?"":"Right");bi.prototype[m]=function(){return this.__filtered__?new bi(this):this[D](1)}}),bi.prototype.compact=function(){return this.filter(To)},bi.prototype.find=function(m){return this.filter(m).head()},bi.prototype.findLast=function(m){return this.reverse().find(m)},bi.prototype.invokeMap=hi(function(m,C){return typeof m=="function"?new bi(this):this.map(function(D){return zl(D,m,C)})}),bi.prototype.reject=function(m){return this.filter(U0(pt(m)))},bi.prototype.slice=function(m,C){m=_i(m);var D=this;return D.__filtered__&&(m>0||C<0)?new bi(D):(m<0?D=D.takeRight(-m):m&&(D=D.drop(m)),C!==R&&(C=_i(C),D=C<0?D.dropRight(-C):D.take(C-m)),D)},bi.prototype.takeRightWhile=function(m){return this.reverse().takeWhile(m).reverse()},bi.prototype.toArray=function(){return this.take(ji)},fl(bi.prototype,function(m,C){var D=/^(?:filter|find|map|reject)|While$/.test(C),Y=/^(?:head|last)$/.test(C),ve=Te[Y?"take"+(C=="last"?"Right":""):C],Re=Y||/^find/.test(C);!ve||(Te.prototype[C]=function(){var Ke=this.__wrapped__,ot=Y?[1]:arguments,Mt=Ke instanceof bi,yn=ot[0],xn=Mt||di(Ke),Dn=function($i){var ao=ve.apply(Te,Ir([$i],ot));return Y&&nr?ao[0]:ao};xn&&D&&typeof yn=="function"&&yn.length!=1&&(Mt=xn=!1);var nr=this.__chain__,Tr=!!this.__actions__.length,ni=Re&&!nr,Ri=Mt&&!Tr;if(!Re&&xn){Ke=Ri?Ke:new bi(this);var ri=m.apply(Ke,ot);return ri.__actions__.push({func:wo,args:[Dn],thisArg:R}),new ka(ri,nr)}return ni&&Ri?m.apply(this,ot):(ri=this.thru(Dn),ni?Y?ri.value()[0]:ri.value():ri)})}),rr(["pop","push","shift","sort","splice","unshift"],function(m){var C=Ye[m],D=/^(?:push|sort|unshift)$/.test(m)?"tap":"thru",Y=/^(?:pop|shift)$/.test(m);Te.prototype[m]=function(){var ve=arguments;if(Y&&!this.__chain__){var Re=this.value();return C.apply(di(Re)?Re:[],ve)}return this[D](function(Ke){return C.apply(di(Ke)?Ke:[],ve)})}}),fl(bi.prototype,function(m,C){var D=Te[C];if(D){var Y=D.name+"";Ut.call(Ks,Y)||(Ks[Y]=[]),Ks[Y].push({name:C,func:D})}}),Ks[yl(R,ce).name]=[{name:"wrapper",func:R}],bi.prototype.clone=tm,bi.prototype.reverse=Yu,bi.prototype.value=Hd,Te.prototype.at=x1,Te.prototype.chain=C1,Te.prototype.commit=tb,Te.prototype.next=gu,Te.prototype.plant=E1,Te.prototype.reverse=S1,Te.prototype.toJSON=Te.prototype.valueOf=Te.prototype.value=_1,Te.prototype.first=Te.prototype.head,Ja&&(Te.prototype[Ja]=w1),Te},hc=Of();S._=hc,j=function(){return hc}.call(L,M,L,Ne),j!==R&&(Ne.exports=j)}).call(this)},50308:function(Ne){function L(){}Ne.exports=L},45578:function(Ne,L,M){var j=M(67206),R=M(45652);function J(z,Z){return z&&z.length?R(z,j(Z,2)):[]}Ne.exports=J},53893:function(Ne,L,M){"use strict";M.r(L),M.d(L,{amber:function(){return ue},black:function(){return $e},blue:function(){return te},blueGrey:function(){return Ee},brown:function(){return ce},cyan:function(){return de},darkIcons:function(){return nt},darkText:function(){return pe},deepOrange:function(){return ae},deepPurple:function(){return z},green:function(){return ie},grey:function(){return fe},indigo:function(){return Z},lightBlue:function(){return Q},lightGreen:function(){return re},lightIcons:function(){return G},lightText:function(){return Ae},lime:function(){return he},orange:function(){return xe},pink:function(){return R},purple:function(){return J},red:function(){return j},teal:function(){return oe},white:function(){return Fe},yellow:function(){return De}});var j={"50":"#ffebee","100":"#ffcdd2","200":"#ef9a9a","300":"#e57373","400":"#ef5350","500":"#f44336","600":"#e53935","700":"#d32f2f","800":"#c62828","900":"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},R={"50":"#fce4ec","100":"#f8bbd0","200":"#f48fb1","300":"#f06292","400":"#ec407a","500":"#e91e63","600":"#d81b60","700":"#c2185b","800":"#ad1457","900":"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},J={"50":"#f3e5f5","100":"#e1bee7","200":"#ce93d8","300":"#ba68c8","400":"#ab47bc","500":"#9c27b0","600":"#8e24aa","700":"#7b1fa2","800":"#6a1b9a","900":"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},z={"50":"#ede7f6","100":"#d1c4e9","200":"#b39ddb","300":"#9575cd","400":"#7e57c2","500":"#673ab7","600":"#5e35b1","700":"#512da8","800":"#4527a0","900":"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Z={"50":"#e8eaf6","100":"#c5cae9","200":"#9fa8da","300":"#7986cb","400":"#5c6bc0","500":"#3f51b5","600":"#3949ab","700":"#303f9f","800":"#283593","900":"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},te={"50":"#e3f2fd","100":"#bbdefb","200":"#90caf9","300":"#64b5f6","400":"#42a5f5","500":"#2196f3","600":"#1e88e5","700":"#1976d2","800":"#1565c0","900":"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},Q={"50":"#e1f5fe","100":"#b3e5fc","200":"#81d4fa","300":"#4fc3f7","400":"#29b6f6","500":"#03a9f4","600":"#039be5","700":"#0288d1","800":"#0277bd","900":"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},de={"50":"#e0f7fa","100":"#b2ebf2","200":"#80deea","300":"#4dd0e1","400":"#26c6da","500":"#00bcd4","600":"#00acc1","700":"#0097a7","800":"#00838f","900":"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},oe={"50":"#e0f2f1","100":"#b2dfdb","200":"#80cbc4","300":"#4db6ac","400":"#26a69a","500":"#009688","600":"#00897b","700":"#00796b","800":"#00695c","900":"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},ie={"50":"#e8f5e9","100":"#c8e6c9","200":"#a5d6a7","300":"#81c784","400":"#66bb6a","500":"#4caf50","600":"#43a047","700":"#388e3c","800":"#2e7d32","900":"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},re={"50":"#f1f8e9","100":"#dcedc8","200":"#c5e1a5","300":"#aed581","400":"#9ccc65","500":"#8bc34a","600":"#7cb342","700":"#689f38","800":"#558b2f","900":"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},he={"50":"#f9fbe7","100":"#f0f4c3","200":"#e6ee9c","300":"#dce775","400":"#d4e157","500":"#cddc39","600":"#c0ca33","700":"#afb42b","800":"#9e9d24","900":"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},De={"50":"#fffde7","100":"#fff9c4","200":"#fff59d","300":"#fff176","400":"#ffee58","500":"#ffeb3b","600":"#fdd835","700":"#fbc02d","800":"#f9a825","900":"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},ue={"50":"#fff8e1","100":"#ffecb3","200":"#ffe082","300":"#ffd54f","400":"#ffca28","500":"#ffc107","600":"#ffb300","700":"#ffa000","800":"#ff8f00","900":"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},xe={"50":"#fff3e0","100":"#ffe0b2","200":"#ffcc80","300":"#ffb74d","400":"#ffa726","500":"#ff9800","600":"#fb8c00","700":"#f57c00","800":"#ef6c00","900":"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},ae={"50":"#fbe9e7","100":"#ffccbc","200":"#ffab91","300":"#ff8a65","400":"#ff7043","500":"#ff5722","600":"#f4511e","700":"#e64a19","800":"#d84315","900":"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},ce={"50":"#efebe9","100":"#d7ccc8","200":"#bcaaa4","300":"#a1887f","400":"#8d6e63","500":"#795548","600":"#6d4c41","700":"#5d4037","800":"#4e342e","900":"#3e2723"},fe={"50":"#fafafa","100":"#f5f5f5","200":"#eeeeee","300":"#e0e0e0","400":"#bdbdbd","500":"#9e9e9e","600":"#757575","700":"#616161","800":"#424242","900":"#212121"},Ee={"50":"#eceff1","100":"#cfd8dc","200":"#b0bec5","300":"#90a4ae","400":"#78909c","500":"#607d8b","600":"#546e7a","700":"#455a64","800":"#37474f","900":"#263238"},pe={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},Ae={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},nt={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},G={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},Fe="#ffffff",$e="#000000";L.default={red:j,pink:R,purple:J,deepPurple:z,indigo:Z,blue:te,lightBlue:Q,cyan:de,teal:oe,green:ie,lightGreen:re,lime:he,yellow:De,amber:ue,orange:xe,deepOrange:ae,brown:ce,grey:fe,blueGrey:Ee,darkText:pe,lightText:Ae,darkIcons:nt,lightIcons:G,white:Fe,black:$e}},42441:function(Ne,L,M){var j;(function(R,J,z){if(!R)return;for(var Z={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},te={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Q={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},de={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},oe,ie=1;ie<20;++ie)Z[111+ie]="f"+ie;for(ie=0;ie<=9;++ie)Z[ie+96]=ie.toString();function re(Fe,$e,at){if(Fe.addEventListener){Fe.addEventListener($e,at,!1);return}Fe.attachEvent("on"+$e,at)}function he(Fe){if(Fe.type=="keypress"){var $e=String.fromCharCode(Fe.which);return Fe.shiftKey||($e=$e.toLowerCase()),$e}return Z[Fe.which]?Z[Fe.which]:te[Fe.which]?te[Fe.which]:String.fromCharCode(Fe.which).toLowerCase()}function De(Fe,$e){return Fe.sort().join(",")===$e.sort().join(",")}function ue(Fe){var $e=[];return Fe.shiftKey&&$e.push("shift"),Fe.altKey&&$e.push("alt"),Fe.ctrlKey&&$e.push("ctrl"),Fe.metaKey&&$e.push("meta"),$e}function xe(Fe){if(Fe.preventDefault){Fe.preventDefault();return}Fe.returnValue=!1}function ae(Fe){if(Fe.stopPropagation){Fe.stopPropagation();return}Fe.cancelBubble=!0}function ce(Fe){return Fe=="shift"||Fe=="ctrl"||Fe=="alt"||Fe=="meta"}function fe(){if(!oe){oe={};for(var Fe in Z)Fe>95&&Fe<112||Z.hasOwnProperty(Fe)&&(oe[Z[Fe]]=Fe)}return oe}function Ee(Fe,$e,at){return at||(at=fe()[Fe]?"keydown":"keypress"),at=="keypress"&&$e.length&&(at="keydown"),at}function pe(Fe){return Fe==="+"?["+"]:(Fe=Fe.replace(/\+{2}/g,"+plus"),Fe.split("+"))}function Ae(Fe,$e){var at,Ft,Hn,ye=[];for(at=pe(Fe),Hn=0;Hn<at.length;++Hn)Ft=at[Hn],de[Ft]&&(Ft=de[Ft]),$e&&$e!="keypress"&&Q[Ft]&&(Ft=Q[Ft],ye.push("shift")),ce(Ft)&&ye.push(Ft);return $e=Ee(Ft,ye,$e),{key:Ft,modifiers:ye,action:$e}}function nt(Fe,$e){return Fe===null||Fe===J?!1:Fe===$e?!0:nt(Fe.parentNode,$e)}function G(Fe){var $e=this;if(Fe=Fe||J,!($e instanceof G))return new G(Fe);$e.target=Fe,$e._callbacks={},$e._directMap={};var at={},Ft,Hn=!1,ye=!1,wt=!1;function Mn(Xn){Xn=Xn||{};var kr=!1,lr;for(lr in at){if(Xn[lr]){kr=!0;continue}at[lr]=0}kr||(wt=!1)}function jt(Xn,kr,lr,Qn,Oi,zr){var Yr,to,Ts=[],oa=lr.type;if(!$e._callbacks[Xn])return[];for(oa=="keyup"&&ce(Xn)&&(kr=[Xn]),Yr=0;Yr<$e._callbacks[Xn].length;++Yr)if(to=$e._callbacks[Xn][Yr],!(!Qn&&to.seq&&at[to.seq]!=to.level)&&oa==to.action&&(oa=="keypress"&&!lr.metaKey&&!lr.ctrlKey||De(kr,to.modifiers))){var no=!Qn&&to.combo==Oi,Ko=Qn&&to.seq==Qn&&to.level==zr;(no||Ko)&&$e._callbacks[Xn].splice(Yr,1),Ts.push(to)}return Ts}function En(Xn,kr,lr,Qn){$e.stopCallback(kr,kr.target||kr.srcElement,lr,Qn)||Xn(kr,lr)===!1&&(xe(kr),ae(kr))}$e._handleKey=function(Xn,kr,lr){var Qn=jt(Xn,kr,lr),Oi,zr={},Yr=0,to=!1;for(Oi=0;Oi<Qn.length;++Oi)Qn[Oi].seq&&(Yr=Math.max(Yr,Qn[Oi].level));for(Oi=0;Oi<Qn.length;++Oi){if(Qn[Oi].seq){if(Qn[Oi].level!=Yr)continue;to=!0,zr[Qn[Oi].seq]=1,En(Qn[Oi].callback,lr,Qn[Oi].combo,Qn[Oi].seq);continue}to||En(Qn[Oi].callback,lr,Qn[Oi].combo)}var Ts=lr.type=="keypress"&&ye;lr.type==wt&&!ce(Xn)&&!Ts&&Mn(zr),ye=to&&lr.type=="keydown"};function Yn(Xn){typeof Xn.which!="number"&&(Xn.which=Xn.keyCode);var kr=he(Xn);if(!!kr){if(Xn.type=="keyup"&&Hn===kr){Hn=!1;return}$e.handleKey(kr,ue(Xn),Xn)}}function pn(){clearTimeout(Ft),Ft=setTimeout(Mn,1e3)}function lo(Xn,kr,lr,Qn){at[Xn]=0;function Oi(oa){return function(){wt=oa,++at[Xn],pn()}}function zr(oa){En(lr,oa,Xn),Qn!=="keyup"&&(Hn=he(oa)),setTimeout(Mn,10)}for(var Yr=0;Yr<kr.length;++Yr){var to=Yr+1===kr.length,Ts=to?zr:Oi(Qn||Ae(kr[Yr+1]).action);ji(kr[Yr],Ts,Qn,Xn,Yr)}}function ji(Xn,kr,lr,Qn,Oi){$e._directMap[Xn+":"+lr]=kr,Xn=Xn.replace(/\s+/g," ");var zr=Xn.split(" "),Yr;if(zr.length>1){lo(Xn,zr,kr,lr);return}Yr=Ae(Xn,lr),$e._callbacks[Yr.key]=$e._callbacks[Yr.key]||[],jt(Yr.key,Yr.modifiers,{type:Yr.action},Qn,Xn,Oi),$e._callbacks[Yr.key][Qn?"unshift":"push"]({callback:kr,modifiers:Yr.modifiers,action:Yr.action,seq:Qn,level:Oi,combo:Xn})}$e._bindMultiple=function(Xn,kr,lr){for(var Qn=0;Qn<Xn.length;++Qn)ji(Xn[Qn],kr,lr)},re(Fe,"keypress",Yn),re(Fe,"keydown",Yn),re(Fe,"keyup",Yn)}G.prototype.bind=function(Fe,$e,at){var Ft=this;return Fe=Fe instanceof Array?Fe:[Fe],Ft._bindMultiple.call(Ft,Fe,$e,at),Ft},G.prototype.unbind=function(Fe,$e){var at=this;return at.bind.call(at,Fe,function(){},$e)},G.prototype.trigger=function(Fe,$e){var at=this;return at._directMap[Fe+":"+$e]&&at._directMap[Fe+":"+$e]({},Fe),at},G.prototype.reset=function(){var Fe=this;return Fe._callbacks={},Fe._directMap={},Fe},G.prototype.stopCallback=function(Fe,$e){var at=this;if((" "+$e.className+" ").indexOf(" mousetrap ")>-1||nt($e,at.target))return!1;if("composedPath"in Fe&&typeof Fe.composedPath=="function"){var Ft=Fe.composedPath()[0];Ft!==Fe.target&&($e=Ft)}return $e.tagName=="INPUT"||$e.tagName=="SELECT"||$e.tagName=="TEXTAREA"||$e.isContentEditable},G.prototype.handleKey=function(){var Fe=this;return Fe._handleKey.apply(Fe,arguments)},G.addKeycodes=function(Fe){for(var $e in Fe)Fe.hasOwnProperty($e)&&(Z[$e]=Fe[$e]);oe=null},G.init=function(){var Fe=G(J);for(var $e in Fe)$e.charAt(0)!=="_"&&(G[$e]=function(at){return function(){return Fe[at].apply(Fe,arguments)}}($e))},G.init(),R.Mousetrap=G,Ne.exports&&(Ne.exports=G),j=function(){return G}.call(L,M,L,Ne),j!==z&&(Ne.exports=j)})(typeof window<"u"?window:null,typeof window<"u"?document:null)},40582:function(Ne,L,M){var j=M(89550),R=M(68854),J=M(36820),z=M(43650),Z=M(56601),te=[0,0];Ne.exports.x7=function(de,oe,ie,re,he){return j(de,ie,re),J(de,de),R(oe,-de[1],de[0]),R(te,-ie[1],ie[0]),he/Z(oe,te)},Ne.exports.mJ=function(de,oe){return R(de,-oe[1],oe[0]),de},Ne.exports.o7=function(de,oe,ie){return z(de,oe,ie),J(de,de),de}},92703:function(Ne,L,M){"use strict";var j=M(50414);function R(){}function J(){}J.resetWarningCache=R,Ne.exports=function(){function z(Q,de,oe,ie,re,he){if(he!==j){var De=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw De.name="Invariant Violation",De}}z.isRequired=z;function Z(){return z}var te={array:z,bigint:z,bool:z,func:z,number:z,object:z,string:z,symbol:z,any:z,arrayOf:Z,element:z,elementType:z,instanceOf:Z,node:z,objectOf:Z,oneOf:Z,oneOfType:Z,shape:Z,exact:Z,checkPropTypes:J,resetWarningCache:R};return te.PropTypes=te,te}},45697:function(Ne,L,M){if(!1)var j,R;else Ne.exports=M(92703)()},50414:function(Ne){"use strict";var L="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Ne.exports=L},9563:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AlphaPicker=void 0;var j=Object.assign||function(re){for(var he=1;he<arguments.length;he++){var De=arguments[he];for(var ue in De)Object.prototype.hasOwnProperty.call(De,ue)&&(re[ue]=De[ue])}return re},R=M(67294),J=oe(R),z=M(79941),Z=oe(z),te=M(1150),Q=M(82519),de=oe(Q);function oe(re){return re&&re.__esModule?re:{default:re}}var ie=L.AlphaPicker=function(he){var De=he.rgb,ue=he.hsl,xe=he.width,ae=he.height,ce=he.onChange,fe=he.direction,Ee=he.style,pe=he.renderers,Ae=he.pointer,nt=he.className,G=nt===void 0?"":nt,Fe=(0,Z.default)({default:{picker:{position:"relative",width:xe,height:ae},alpha:{radius:"2px",style:Ee}}});return J.default.createElement("div",{style:Fe.picker,className:"alpha-picker "+G},J.default.createElement(te.Alpha,j({},Fe.alpha,{rgb:De,hsl:ue,pointer:Ae,renderers:pe,onChange:ce,direction:fe})))};ie.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:de.default},L.default=(0,te.ColorWrap)(ie)},82519:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AlphaPointer=void 0;var j=M(67294),R=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.AlphaPointer=function(de){var oe=de.direction,ie=(0,z.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:oe==="vertical"});return R.default.createElement("div",{style:ie.picker})};L.default=te},88858:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Block=void 0;var j=M(67294),R=ue(j),J=M(45697),z=ue(J),Z=M(79941),te=ue(Z),Q=M(82492),de=ue(Q),oe=M(64809),ie=ue(oe),re=M(1150),he=M(53014),De=ue(he);function ue(ae){return ae&&ae.__esModule?ae:{default:ae}}var xe=L.Block=function(ce){var fe=ce.onChange,Ee=ce.onSwatchHover,pe=ce.hex,Ae=ce.colors,nt=ce.width,G=ce.triangle,Fe=ce.styles,$e=Fe===void 0?{}:Fe,at=ce.className,Ft=at===void 0?"":at,Hn=pe==="transparent",ye=function(jt,En){ie.default.isValidHex(jt)&&fe({hex:jt,source:"hex"},En)},wt=(0,te.default)((0,de.default)({default:{card:{width:nt,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:pe,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:ie.default.getContrastingColor(pe),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+pe+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},$e),{"hide-triangle":G==="hide"});return R.default.createElement("div",{style:wt.card,className:"block-picker "+Ft},R.default.createElement("div",{style:wt.triangle}),R.default.createElement("div",{style:wt.head},Hn&&R.default.createElement(re.Checkboard,{borderRadius:"6px 6px 0 0"}),R.default.createElement("div",{style:wt.label},pe)),R.default.createElement("div",{style:wt.body},R.default.createElement(De.default,{colors:Ae,onClick:ye,onSwatchHover:Ee}),R.default.createElement(re.EditableInput,{style:{input:wt.input},value:pe,onChange:ye})))};xe.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),colors:z.default.arrayOf(z.default.string),triangle:z.default.oneOf(["top","hide"]),styles:z.default.object},xe.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},L.default=(0,re.ColorWrap)(xe)},53014:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BlockSwatches=void 0;var j=M(67294),R=de(j),J=M(79941),z=de(J),Z=M(35161),te=de(Z),Q=M(1150);function de(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.BlockSwatches=function(re){var he=re.colors,De=re.onClick,ue=re.onSwatchHover,xe=(0,z.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return R.default.createElement("div",{style:xe.swatches},(0,te.default)(he,function(ae){return R.default.createElement(Q.Swatch,{key:ae,color:ae,style:xe.swatch,onClick:De,onHover:ue,focusStyle:{boxShadow:"0 0 4px "+ae}})}),R.default.createElement("div",{style:xe.clear}))};L.default=oe},21847:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Chrome=void 0;var j=M(67294),R=ae(j),J=M(45697),z=ae(J),Z=M(79941),te=ae(Z),Q=M(82492),de=ae(Q),oe=M(1150),ie=M(32564),re=ae(ie),he=M(14066),De=ae(he),ue=M(20289),xe=ae(ue);function ae(fe){return fe&&fe.__esModule?fe:{default:fe}}var ce=L.Chrome=function(Ee){var pe=Ee.width,Ae=Ee.onChange,nt=Ee.disableAlpha,G=Ee.rgb,Fe=Ee.hsl,$e=Ee.hsv,at=Ee.hex,Ft=Ee.renderers,Hn=Ee.styles,ye=Hn===void 0?{}:Hn,wt=Ee.className,Mn=wt===void 0?"":wt,jt=(0,te.default)((0,de.default)({default:{picker:{width:pe,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+G.r+", "+G.g+", "+G.b+", "+G.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},ye),{disableAlpha:nt});return R.default.createElement("div",{style:jt.picker,className:"chrome-picker "+Mn},R.default.createElement("div",{style:jt.saturation},R.default.createElement(oe.Saturation,{style:jt.Saturation,hsl:Fe,hsv:$e,pointer:xe.default,onChange:Ae})),R.default.createElement("div",{style:jt.body},R.default.createElement("div",{style:jt.controls,className:"flexbox-fix"},R.default.createElement("div",{style:jt.color},R.default.createElement("div",{style:jt.swatch},R.default.createElement("div",{style:jt.active}),R.default.createElement(oe.Checkboard,{renderers:Ft}))),R.default.createElement("div",{style:jt.toggles},R.default.createElement("div",{style:jt.hue},R.default.createElement(oe.Hue,{style:jt.Hue,hsl:Fe,pointer:De.default,onChange:Ae})),R.default.createElement("div",{style:jt.alpha},R.default.createElement(oe.Alpha,{style:jt.Alpha,rgb:G,hsl:Fe,pointer:De.default,renderers:Ft,onChange:Ae})))),R.default.createElement(re.default,{rgb:G,hsl:Fe,hex:at,onChange:Ae,disableAlpha:nt})))};ce.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),disableAlpha:z.default.bool,styles:z.default.object},ce.defaultProps={width:225,disableAlpha:!1,styles:{}},L.default=(0,oe.ColorWrap)(ce)},32564:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ChromeFields=void 0;var j=function(){function ae(ce,fe){for(var Ee=0;Ee<fe.length;Ee++){var pe=fe[Ee];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ce,pe.key,pe)}}return function(ce,fe,Ee){return fe&&ae(ce.prototype,fe),Ee&&ae(ce,Ee),ce}}(),R=M(67294),J=re(R),z=M(79941),Z=re(z),te=M(64809),Q=re(te),de=M(1150),oe=M(43891),ie=re(oe);function re(ae){return ae&&ae.__esModule?ae:{default:ae}}function he(ae,ce){if(!(ae instanceof ce))throw new TypeError("Cannot call a class as a function")}function De(ae,ce){if(!ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce&&(typeof ce=="object"||typeof ce=="function")?ce:ae}function ue(ae,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ce);ae.prototype=Object.create(ce&&ce.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(ae,ce):ae.__proto__=ce)}var xe=L.ChromeFields=function(ae){ue(ce,ae);function ce(){var fe,Ee,pe,Ae;he(this,ce);for(var nt=arguments.length,G=Array(nt),Fe=0;Fe<nt;Fe++)G[Fe]=arguments[Fe];return Ae=(Ee=(pe=De(this,(fe=ce.__proto__||Object.getPrototypeOf(ce)).call.apply(fe,[this].concat(G))),pe),pe.state={view:""},pe.toggleViews=function(){pe.state.view==="hex"?pe.setState({view:"rgb"}):pe.state.view==="rgb"?pe.setState({view:"hsl"}):pe.state.view==="hsl"&&(pe.props.hsl.a===1?pe.setState({view:"hex"}):pe.setState({view:"rgb"}))},pe.handleChange=function($e,at){$e.hex?Q.default.isValidHex($e.hex)&&pe.props.onChange({hex:$e.hex,source:"hex"},at):$e.r||$e.g||$e.b?pe.props.onChange({r:$e.r||pe.props.rgb.r,g:$e.g||pe.props.rgb.g,b:$e.b||pe.props.rgb.b,source:"rgb"},at):$e.a?($e.a<0?$e.a=0:$e.a>1&&($e.a=1),pe.props.onChange({h:pe.props.hsl.h,s:pe.props.hsl.s,l:pe.props.hsl.l,a:Math.round($e.a*100)/100,source:"rgb"},at)):($e.h||$e.s||$e.l)&&(typeof $e.s=="string"&&$e.s.includes("%")&&($e.s=$e.s.replace("%","")),typeof $e.l=="string"&&$e.l.includes("%")&&($e.l=$e.l.replace("%","")),pe.props.onChange({h:$e.h||pe.props.hsl.h,s:Number($e.s&&$e.s||pe.props.hsl.s),l:Number($e.l&&$e.l||pe.props.hsl.l),source:"hsl"},at))},pe.showHighlight=function($e){$e.currentTarget.style.background="#eee"},pe.hideHighlight=function($e){$e.currentTarget.style.background="transparent"},Ee),De(pe,Ae)}return j(ce,[{key:"componentDidMount",value:function(){this.props.hsl.a===1&&this.state.view!=="hex"?this.setState({view:"hex"}):this.state.view!=="rgb"&&this.state.view!=="hsl"&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(Ee){Ee.hsl.a!==1&&this.state.view==="hex"&&this.setState({view:"rgb"})}},{key:"render",value:function(){var Ee=this,pe=(0,Z.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),Ae=void 0;return this.state.view==="hex"?Ae=J.default.createElement("div",{style:pe.fields,className:"flexbox-fix"},J.default.createElement("div",{style:pe.field},J.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?Ae=J.default.createElement("div",{style:pe.fields,className:"flexbox-fix"},J.default.createElement("div",{style:pe.field},J.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),J.default.createElement("div",{style:pe.field},J.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),J.default.createElement("div",{style:pe.field},J.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),J.default.createElement("div",{style:pe.alpha},J.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(Ae=J.default.createElement("div",{style:pe.fields,className:"flexbox-fix"},J.default.createElement("div",{style:pe.field},J.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),J.default.createElement("div",{style:pe.field},J.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),J.default.createElement("div",{style:pe.field},J.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),J.default.createElement("div",{style:pe.alpha},J.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),J.default.createElement("div",{style:pe.wrap,className:"flexbox-fix"},Ae,J.default.createElement("div",{style:pe.toggle},J.default.createElement("div",{style:pe.icon,onClick:this.toggleViews,ref:function(G){return Ee.icon=G}},J.default.createElement(ie.default,{style:pe.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}]),ce}(J.default.Component);L.default=xe},14066:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ChromePointer=void 0;var j=M(67294),R=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.ChromePointer=function(){var de=(0,z.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return R.default.createElement("div",{style:de.picker})};L.default=te},20289:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ChromePointerCircle=void 0;var j=M(67294),R=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.ChromePointerCircle=function(){var de=(0,z.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return R.default.createElement("div",{style:de.picker})};L.default=te},9703:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Circle=void 0;var j=M(67294),R=ce(j),J=M(45697),z=ce(J),Z=M(79941),te=ce(Z),Q=M(35161),de=ce(Q),oe=M(82492),ie=ce(oe),re=M(53893),he=ae(re),De=M(1150),ue=M(26249),xe=ce(ue);function ae(Ee){if(Ee&&Ee.__esModule)return Ee;var pe={};if(Ee!=null)for(var Ae in Ee)Object.prototype.hasOwnProperty.call(Ee,Ae)&&(pe[Ae]=Ee[Ae]);return pe.default=Ee,pe}function ce(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}var fe=L.Circle=function(pe){var Ae=pe.width,nt=pe.onChange,G=pe.onSwatchHover,Fe=pe.colors,$e=pe.hex,at=pe.circleSize,Ft=pe.styles,Hn=Ft===void 0?{}:Ft,ye=pe.circleSpacing,wt=pe.className,Mn=wt===void 0?"":wt,jt=(0,te.default)((0,ie.default)({default:{card:{width:Ae,display:"flex",flexWrap:"wrap",marginRight:-ye,marginBottom:-ye}}},Hn)),En=function(pn,lo){return nt({hex:pn,source:"hex"},lo)};return R.default.createElement("div",{style:jt.card,className:"circle-picker "+Mn},(0,de.default)(Fe,function(Yn){return R.default.createElement(xe.default,{key:Yn,color:Yn,onClick:En,onSwatchHover:G,active:$e===Yn.toLowerCase(),circleSize:at,circleSpacing:ye})}))};fe.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),circleSize:z.default.number,circleSpacing:z.default.number,styles:z.default.object},fe.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[he.red["500"],he.pink["500"],he.purple["500"],he.deepPurple["500"],he.indigo["500"],he.blue["500"],he.lightBlue["500"],he.cyan["500"],he.teal["500"],he.green["500"],he.lightGreen["500"],he.lime["500"],he.yellow["500"],he.amber["500"],he.orange["500"],he.deepOrange["500"],he.brown["500"],he.blueGrey["500"]],styles:{}},L.default=(0,De.ColorWrap)(fe)},26249:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.CircleSwatch=void 0;var j=M(67294),R=te(j),J=M(79941),z=te(J),Z=M(1150);function te(de){return de&&de.__esModule?de:{default:de}}var Q=L.CircleSwatch=function(oe){var ie=oe.color,re=oe.onClick,he=oe.onSwatchHover,De=oe.hover,ue=oe.active,xe=oe.circleSize,ae=oe.circleSpacing,ce=(0,z.default)({default:{swatch:{width:xe,height:xe,marginRight:ae,marginBottom:ae,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+xe/2+"px "+ie,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+ie}}},{hover:De,active:ue});return R.default.createElement("div",{style:ce.swatch},R.default.createElement(Z.Swatch,{style:ce.Swatch,color:ie,onClick:re,onHover:he,focusStyle:{boxShadow:ce.Swatch.boxShadow+", 0 0 5px "+ie}}))};Q.defaultProps={circleSize:28,circleSpacing:14},L.default=(0,J.handleHover)(Q)},57319:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Alpha=void 0;var j=Object.assign||function(ce){for(var fe=1;fe<arguments.length;fe++){var Ee=arguments[fe];for(var pe in Ee)Object.prototype.hasOwnProperty.call(Ee,pe)&&(ce[pe]=Ee[pe])}return ce},R=function(){function ce(fe,Ee){for(var pe=0;pe<Ee.length;pe++){var Ae=Ee[pe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(fe,Ae.key,Ae)}}return function(fe,Ee,pe){return Ee&&ce(fe.prototype,Ee),pe&&ce(fe,pe),fe}}(),J=M(67294),z=he(J),Z=M(79941),te=he(Z),Q=M(66713),de=re(Q),oe=M(34349),ie=he(oe);function re(ce){if(ce&&ce.__esModule)return ce;var fe={};if(ce!=null)for(var Ee in ce)Object.prototype.hasOwnProperty.call(ce,Ee)&&(fe[Ee]=ce[Ee]);return fe.default=ce,fe}function he(ce){return ce&&ce.__esModule?ce:{default:ce}}function De(ce,fe){if(!(ce instanceof fe))throw new TypeError("Cannot call a class as a function")}function ue(ce,fe){if(!ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe&&(typeof fe=="object"||typeof fe=="function")?fe:ce}function xe(ce,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof fe);ce.prototype=Object.create(fe&&fe.prototype,{constructor:{value:ce,enumerable:!1,writable:!0,configurable:!0}}),fe&&(Object.setPrototypeOf?Object.setPrototypeOf(ce,fe):ce.__proto__=fe)}var ae=L.Alpha=function(ce){xe(fe,ce);function fe(){var Ee,pe,Ae,nt;De(this,fe);for(var G=arguments.length,Fe=Array(G),$e=0;$e<G;$e++)Fe[$e]=arguments[$e];return nt=(pe=(Ae=ue(this,(Ee=fe.__proto__||Object.getPrototypeOf(fe)).call.apply(Ee,[this].concat(Fe))),Ae),Ae.handleChange=function(at){var Ft=de.calculateChange(at,Ae.props.hsl,Ae.props.direction,Ae.props.a,Ae.container);Ft&&typeof Ae.props.onChange=="function"&&Ae.props.onChange(Ft,at)},Ae.handleMouseDown=function(at){Ae.handleChange(at),window.addEventListener("mousemove",Ae.handleChange),window.addEventListener("mouseup",Ae.handleMouseUp)},Ae.handleMouseUp=function(){Ae.unbindEventListeners()},Ae.unbindEventListeners=function(){window.removeEventListener("mousemove",Ae.handleChange),window.removeEventListener("mouseup",Ae.handleMouseUp)},pe),ue(Ae,nt)}return R(fe,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var pe=this,Ae=this.props.rgb,nt=(0,te.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+Ae.r+","+Ae.g+","+Ae.b+`, 0) 0%,
           rgba(`+Ae.r+","+Ae.g+","+Ae.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:Ae.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+Ae.r+","+Ae.g+","+Ae.b+`, 0) 0%,
           rgba(`+Ae.r+","+Ae.g+","+Ae.b+", 1) 100%)"},pointer:{left:0,top:Ae.a*100+"%"}},overwrite:j({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return z.default.createElement("div",{style:nt.alpha},z.default.createElement("div",{style:nt.checkboard},z.default.createElement(ie.default,{renderers:this.props.renderers})),z.default.createElement("div",{style:nt.gradient}),z.default.createElement("div",{style:nt.container,ref:function(Fe){return pe.container=Fe},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},z.default.createElement("div",{style:nt.pointer},this.props.pointer?z.default.createElement(this.props.pointer,this.props):z.default.createElement("div",{style:nt.slider}))))}}]),fe}(J.PureComponent||J.Component);L.default=ae},34349:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Checkboard=void 0;var j=M(67294),R=de(j),J=M(79941),z=de(J),Z=M(45704),te=Q(Z);function Q(ie){if(ie&&ie.__esModule)return ie;var re={};if(ie!=null)for(var he in ie)Object.prototype.hasOwnProperty.call(ie,he)&&(re[he]=ie[he]);return re.default=ie,re}function de(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.Checkboard=function(re){var he=re.white,De=re.grey,ue=re.size,xe=re.renderers,ae=re.borderRadius,ce=re.boxShadow,fe=(0,z.default)({default:{grid:{borderRadius:ae,boxShadow:ce,absolute:"0px 0px 0px 0px",background:"url("+te.get(he,De,ue,xe.canvas)+") center left"}}});return R.default.createElement("div",{style:fe.grid})};oe.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},L.default=oe},88288:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ColorWrap=void 0;var j=Object.assign||function(ue){for(var xe=1;xe<arguments.length;xe++){var ae=arguments[xe];for(var ce in ae)Object.prototype.hasOwnProperty.call(ae,ce)&&(ue[ce]=ae[ce])}return ue},R=function(){function ue(xe,ae){for(var ce=0;ce<ae.length;ce++){var fe=ae[ce];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(xe,fe.key,fe)}}return function(xe,ae,ce){return ae&&ue(xe.prototype,ae),ce&&ue(xe,ce),xe}}(),J=M(67294),z=oe(J),Z=M(23279),te=oe(Z),Q=M(64809),de=oe(Q);function oe(ue){return ue&&ue.__esModule?ue:{default:ue}}function ie(ue,xe){if(!(ue instanceof xe))throw new TypeError("Cannot call a class as a function")}function re(ue,xe){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xe&&(typeof xe=="object"||typeof xe=="function")?xe:ue}function he(ue,xe){if(typeof xe!="function"&&xe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof xe);ue.prototype=Object.create(xe&&xe.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),xe&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,xe):ue.__proto__=xe)}var De=L.ColorWrap=function(xe){var ae=function(ce){he(fe,ce);function fe(Ee){ie(this,fe);var pe=re(this,(fe.__proto__||Object.getPrototypeOf(fe)).call(this));return pe.handleChange=function(Ae,nt){var G=de.default.simpleCheckForValidColor(Ae);if(G){var Fe=de.default.toState(Ae,Ae.h||pe.state.oldHue);pe.setState(Fe),pe.props.onChangeComplete&&pe.debounce(pe.props.onChangeComplete,Fe,nt),pe.props.onChange&&pe.props.onChange(Fe,nt)}},pe.handleSwatchHover=function(Ae,nt){var G=de.default.simpleCheckForValidColor(Ae);if(G){var Fe=de.default.toState(Ae,Ae.h||pe.state.oldHue);pe.setState(Fe),pe.props.onSwatchHover&&pe.props.onSwatchHover(Fe,nt)}},pe.state=j({},de.default.toState(Ee.color,0)),pe.debounce=(0,te.default)(function(Ae,nt,G){Ae(nt,G)},100),pe}return R(fe,[{key:"componentWillReceiveProps",value:function(pe){this.setState(j({},de.default.toState(pe.color,this.state.oldHue)))}},{key:"render",value:function(){var pe={};return this.props.onSwatchHover&&(pe.onSwatchHover=this.handleSwatchHover),z.default.createElement(xe,j({},this.props,this.state,{onChange:this.handleChange},pe))}}]),fe}(J.PureComponent||J.Component);return ae.propTypes=j({},xe.propTypes),ae.defaultProps=j({},xe.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),ae};L.default=De},27747:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.EditableInput=void 0;var j=function(){function pe(Ae,nt){for(var G=0;G<nt.length;G++){var Fe=nt[G];Fe.enumerable=Fe.enumerable||!1,Fe.configurable=!0,"value"in Fe&&(Fe.writable=!0),Object.defineProperty(Ae,Fe.key,Fe)}}return function(Ae,nt,G){return nt&&pe(Ae.prototype,nt),G&&pe(Ae,G),Ae}}(),R=M(67294),J=te(R),z=M(79941),Z=te(z);function te(pe){return pe&&pe.__esModule?pe:{default:pe}}function Q(pe,Ae,nt){return Ae in pe?Object.defineProperty(pe,Ae,{value:nt,enumerable:!0,configurable:!0,writable:!0}):pe[Ae]=nt,pe}function de(pe,Ae){if(!(pe instanceof Ae))throw new TypeError("Cannot call a class as a function")}function oe(pe,Ae){if(!pe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ae&&(typeof Ae=="object"||typeof Ae=="function")?Ae:pe}function ie(pe,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ae);pe.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:pe,enumerable:!1,writable:!0,configurable:!0}}),Ae&&(Object.setPrototypeOf?Object.setPrototypeOf(pe,Ae):pe.__proto__=Ae)}var re=1,he=38,De=40,ue=[he,De],xe=function(Ae){return ue.indexOf(Ae)>-1},ae=function(Ae){return Ae+"%"},ce=function(Ae){return Number(String(Ae).replace(/%/g,""))},fe=function(Ae){return String(Ae).indexOf("%")>-1},Ee=L.EditableInput=function(pe){ie(Ae,pe);function Ae(nt){de(this,Ae);var G=oe(this,(Ae.__proto__||Object.getPrototypeOf(Ae)).call(this));return G.handleBlur=function(){G.state.blurValue&&G.setState({value:G.state.blurValue,blurValue:null})},G.handleChange=function(Fe){G.setUpdatedValue(Fe.target.value,Fe)},G.handleKeyDown=function(Fe){var $e=ce(Fe.target.value);if(!isNaN($e)&&xe(Fe.keyCode)){var at=G.getArrowOffset(),Ft=Fe.keyCode===he?$e+at:$e-at;G.setUpdatedValue(Ft,Fe)}},G.handleDrag=function(Fe){if(G.props.dragLabel){var $e=Math.round(G.props.value+Fe.movementX);$e>=0&&$e<=G.props.dragMax&&G.props.onChange&&G.props.onChange(G.getValueObjectWithLabel($e),Fe)}},G.handleMouseDown=function(Fe){G.props.dragLabel&&(Fe.preventDefault(),G.handleDrag(Fe),window.addEventListener("mousemove",G.handleDrag),window.addEventListener("mouseup",G.handleMouseUp))},G.handleMouseUp=function(){G.unbindEventListeners()},G.unbindEventListeners=function(){window.removeEventListener("mousemove",G.handleDrag),window.removeEventListener("mouseup",G.handleMouseUp)},G.state={value:String(nt.value).toUpperCase(),blurValue:String(nt.value).toUpperCase()},G}return j(Ae,[{key:"componentWillReceiveProps",value:function(G){var Fe=this.input;G.value!==this.state.value&&(Fe===document.activeElement?this.setState({blurValue:String(G.value).toUpperCase()}):this.setState({value:String(G.value).toUpperCase(),blurValue:!this.state.blurValue&&String(G.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(G){return Q({},this.props.label,G)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||re}},{key:"setUpdatedValue",value:function(G,Fe){var $e=this.props.label!==null?this.getValueObjectWithLabel(G):G;this.props.onChange&&this.props.onChange($e,Fe);var at=fe(Fe.target.value);this.setState({value:at?ae(G):G})}},{key:"render",value:function(){var G=this,Fe=(0,Z.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return J.default.createElement("div",{style:Fe.wrap},J.default.createElement("input",{style:Fe.input,ref:function(at){return G.input=at},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?J.default.createElement("span",{style:Fe.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),Ae}(R.PureComponent||R.Component);L.default=Ee},26358:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Hue=void 0;var j=function(){function ue(xe,ae){for(var ce=0;ce<ae.length;ce++){var fe=ae[ce];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(xe,fe.key,fe)}}return function(xe,ae,ce){return ae&&ue(xe.prototype,ae),ce&&ue(xe,ce),xe}}(),R=M(67294),J=oe(R),z=M(79941),Z=oe(z),te=M(33716),Q=de(te);function de(ue){if(ue&&ue.__esModule)return ue;var xe={};if(ue!=null)for(var ae in ue)Object.prototype.hasOwnProperty.call(ue,ae)&&(xe[ae]=ue[ae]);return xe.default=ue,xe}function oe(ue){return ue&&ue.__esModule?ue:{default:ue}}function ie(ue,xe){if(!(ue instanceof xe))throw new TypeError("Cannot call a class as a function")}function re(ue,xe){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xe&&(typeof xe=="object"||typeof xe=="function")?xe:ue}function he(ue,xe){if(typeof xe!="function"&&xe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof xe);ue.prototype=Object.create(xe&&xe.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),xe&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,xe):ue.__proto__=xe)}var De=L.Hue=function(ue){he(xe,ue);function xe(){var ae,ce,fe,Ee;ie(this,xe);for(var pe=arguments.length,Ae=Array(pe),nt=0;nt<pe;nt++)Ae[nt]=arguments[nt];return Ee=(ce=(fe=re(this,(ae=xe.__proto__||Object.getPrototypeOf(xe)).call.apply(ae,[this].concat(Ae))),fe),fe.handleChange=function(G){var Fe=Q.calculateChange(G,fe.props.direction,fe.props.hsl,fe.container);Fe&&typeof fe.props.onChange=="function"&&fe.props.onChange(Fe,G)},fe.handleMouseDown=function(G){fe.handleChange(G),window.addEventListener("mousemove",fe.handleChange),window.addEventListener("mouseup",fe.handleMouseUp)},fe.handleMouseUp=function(){fe.unbindEventListeners()},ce),re(fe,Ee)}return j(xe,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var ce=this,fe=this.props.direction,Ee=fe===void 0?"horizontal":fe,pe=(0,Z.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:Ee==="vertical"});return J.default.createElement("div",{style:pe.hue},J.default.createElement("div",{className:"hue-"+Ee,style:pe.container,ref:function(nt){return ce.container=nt},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},J.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),J.default.createElement("div",{style:pe.pointer},this.props.pointer?J.default.createElement(this.props.pointer,this.props):J.default.createElement("div",{style:pe.slider}))))}}]),xe}(R.PureComponent||R.Component);L.default=De},96207:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Raised=void 0;var j=M(67294),R=oe(j),J=M(45697),z=oe(J),Z=M(79941),te=oe(Z),Q=M(82492),de=oe(Q);function oe(re){return re&&re.__esModule?re:{default:re}}var ie=L.Raised=function(he){var De=he.zDepth,ue=he.radius,xe=he.background,ae=he.children,ce=he.styles,fe=ce===void 0?{}:ce,Ee=(0,te.default)((0,de.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+De+"px "+De*4+"px rgba(0,0,0,.24)",borderRadius:ue,background:xe}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},fe),{"zDepth-1":De===1});return R.default.createElement("div",{style:Ee.wrap},R.default.createElement("div",{style:Ee.bg}),R.default.createElement("div",{style:Ee.content},ae))};ie.propTypes={background:z.default.string,zDepth:z.default.oneOf([0,1,2,3,4,5]),radius:z.default.number,styles:z.default.object},ie.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},L.default=ie},76659:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Saturation=void 0;var j=function(){function ae(ce,fe){for(var Ee=0;Ee<fe.length;Ee++){var pe=fe[Ee];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ce,pe.key,pe)}}return function(ce,fe,Ee){return fe&&ae(ce.prototype,fe),Ee&&ae(ce,Ee),ce}}(),R=M(67294),J=re(R),z=M(79941),Z=re(z),te=M(23493),Q=re(te),de=M(37599),oe=ie(de);function ie(ae){if(ae&&ae.__esModule)return ae;var ce={};if(ae!=null)for(var fe in ae)Object.prototype.hasOwnProperty.call(ae,fe)&&(ce[fe]=ae[fe]);return ce.default=ae,ce}function re(ae){return ae&&ae.__esModule?ae:{default:ae}}function he(ae,ce){if(!(ae instanceof ce))throw new TypeError("Cannot call a class as a function")}function De(ae,ce){if(!ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce&&(typeof ce=="object"||typeof ce=="function")?ce:ae}function ue(ae,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ce);ae.prototype=Object.create(ce&&ce.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(ae,ce):ae.__proto__=ce)}var xe=L.Saturation=function(ae){ue(ce,ae);function ce(fe){he(this,ce);var Ee=De(this,(ce.__proto__||Object.getPrototypeOf(ce)).call(this,fe));return Ee.handleChange=function(pe){typeof Ee.props.onChange=="function"&&Ee.throttle(Ee.props.onChange,oe.calculateChange(pe,Ee.props.hsl,Ee.container),pe)},Ee.handleMouseDown=function(pe){Ee.handleChange(pe),window.addEventListener("mousemove",Ee.handleChange),window.addEventListener("mouseup",Ee.handleMouseUp)},Ee.handleMouseUp=function(){Ee.unbindEventListeners()},Ee.throttle=(0,Q.default)(function(pe,Ae,nt){pe(Ae,nt)},50),Ee}return j(ce,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var Ee=this,pe=this.props.style||{},Ae=pe.color,nt=pe.white,G=pe.black,Fe=pe.pointer,$e=pe.circle,at=(0,Z.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:Ae,white:nt,black:G,pointer:Fe,circle:$e}},{custom:!!this.props.style});return J.default.createElement("div",{style:at.color,ref:function(Hn){return Ee.container=Hn},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},J.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),J.default.createElement("div",{style:at.white,className:"saturation-white"},J.default.createElement("div",{style:at.black,className:"saturation-black"}),J.default.createElement("div",{style:at.pointer},this.props.pointer?J.default.createElement(this.props.pointer,this.props):J.default.createElement("div",{style:at.circle}))))}}]),ce}(R.PureComponent||R.Component);L.default=xe},62489:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Swatch=void 0;var j=Object.assign||function(he){for(var De=1;De<arguments.length;De++){var ue=arguments[De];for(var xe in ue)Object.prototype.hasOwnProperty.call(ue,xe)&&(he[xe]=ue[xe])}return he},R=M(67294),J=oe(R),z=M(79941),Z=oe(z),te=M(82538),Q=M(34349),de=oe(Q);function oe(he){return he&&he.__esModule?he:{default:he}}var ie=13,re=L.Swatch=function(De){var ue=De.color,xe=De.style,ae=De.onClick,ce=ae===void 0?function(){}:ae,fe=De.onHover,Ee=De.title,pe=Ee===void 0?ue:Ee,Ae=De.children,nt=De.focus,G=De.focusStyle,Fe=G===void 0?{}:G,$e=ue==="transparent",at=(0,Z.default)({default:{swatch:j({background:ue,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},xe,nt?Fe:{})}}),Ft=function(jt){return ce(ue,jt)},Hn=function(jt){return jt.keyCode===ie&&ce(ue,jt)},ye=function(jt){return fe(ue,jt)},wt={};return fe&&(wt.onMouseOver=ye),J.default.createElement("div",j({style:at.swatch,onClick:Ft,title:pe,tabIndex:0,onKeyDown:Hn},wt),Ae,$e&&J.default.createElement(de.default,{borderRadius:at.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};L.default=(0,te.handleFocus)(re)},1150:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var j=M(57319);Object.defineProperty(L,"Alpha",{enumerable:!0,get:function(){return oe(j).default}});var R=M(34349);Object.defineProperty(L,"Checkboard",{enumerable:!0,get:function(){return oe(R).default}});var J=M(27747);Object.defineProperty(L,"EditableInput",{enumerable:!0,get:function(){return oe(J).default}});var z=M(26358);Object.defineProperty(L,"Hue",{enumerable:!0,get:function(){return oe(z).default}});var Z=M(96207);Object.defineProperty(L,"Raised",{enumerable:!0,get:function(){return oe(Z).default}});var te=M(76659);Object.defineProperty(L,"Saturation",{enumerable:!0,get:function(){return oe(te).default}});var Q=M(88288);Object.defineProperty(L,"ColorWrap",{enumerable:!0,get:function(){return oe(Q).default}});var de=M(62489);Object.defineProperty(L,"Swatch",{enumerable:!0,get:function(){return oe(de).default}});function oe(ie){return ie&&ie.__esModule?ie:{default:ie}}},99766:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Compact=void 0;var j=M(67294),R=fe(j),J=M(45697),z=fe(J),Z=M(79941),te=fe(Z),Q=M(35161),de=fe(Q),oe=M(82492),ie=fe(oe),re=M(64809),he=fe(re),De=M(1150),ue=M(49613),xe=fe(ue),ae=M(82018),ce=fe(ae);function fe(pe){return pe&&pe.__esModule?pe:{default:pe}}var Ee=L.Compact=function(Ae){var nt=Ae.onChange,G=Ae.onSwatchHover,Fe=Ae.colors,$e=Ae.hex,at=Ae.rgb,Ft=Ae.styles,Hn=Ft===void 0?{}:Ft,ye=Ae.className,wt=ye===void 0?"":ye,Mn=(0,te.default)((0,ie.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},Hn)),jt=function(Yn,pn){Yn.hex?he.default.isValidHex(Yn.hex)&&nt({hex:Yn.hex,source:"hex"},pn):nt(Yn,pn)};return R.default.createElement(De.Raised,{style:Mn.Compact,styles:Hn},R.default.createElement("div",{style:Mn.compact,className:"compact-picker "+wt},R.default.createElement("div",null,(0,de.default)(Fe,function(En){return R.default.createElement(xe.default,{key:En,color:En,active:En.toLowerCase()===$e,onClick:jt,onSwatchHover:G})}),R.default.createElement("div",{style:Mn.clear})),R.default.createElement(ce.default,{hex:$e,rgb:at,onChange:jt})))};Ee.propTypes={colors:z.default.arrayOf(z.default.string),styles:z.default.object},Ee.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},L.default=(0,De.ColorWrap)(Ee)},49613:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.CompactColor=void 0;var j=M(67294),R=de(j),J=M(79941),z=de(J),Z=M(64809),te=de(Z),Q=M(1150);function de(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.CompactColor=function(re){var he=re.color,De=re.onClick,ue=De===void 0?function(){}:De,xe=re.onSwatchHover,ae=re.active,ce=(0,z.default)({default:{color:{background:he,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:te.default.getContrastingColor(he),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:ae,"color-#FFFFFF":he==="#FFFFFF",transparent:he==="transparent"});return R.default.createElement(Q.Swatch,{style:ce.color,color:he,onClick:ue,onHover:xe,focusStyle:{boxShadow:"0 0 4px "+he}},R.default.createElement("div",{style:ce.dot}))};L.default=oe},82018:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.CompactFields=void 0;var j=M(67294),R=te(j),J=M(79941),z=te(J),Z=M(1150);function te(de){return de&&de.__esModule?de:{default:de}}var Q=L.CompactFields=function(oe){var ie=oe.hex,re=oe.rgb,he=oe.onChange,De=(0,z.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:ie},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),ue=function(ae,ce){ae.r||ae.g||ae.b?he({r:ae.r||re.r,g:ae.g||re.g,b:ae.b||re.b,source:"rgb"},ce):he({hex:ae.hex,source:"hex"},ce)};return R.default.createElement("div",{style:De.fields,className:"flexbox-fix"},R.default.createElement("div",{style:De.active}),R.default.createElement(Z.EditableInput,{style:{wrap:De.HEXwrap,input:De.HEXinput,label:De.HEXlabel},label:"hex",value:ie,onChange:ue}),R.default.createElement(Z.EditableInput,{style:{wrap:De.RGBwrap,input:De.RGBinput,label:De.RGBlabel},label:"r",value:re.r,onChange:ue}),R.default.createElement(Z.EditableInput,{style:{wrap:De.RGBwrap,input:De.RGBinput,label:De.RGBlabel},label:"g",value:re.g,onChange:ue}),R.default.createElement(Z.EditableInput,{style:{wrap:De.RGBwrap,input:De.RGBinput,label:De.RGBlabel},label:"b",value:re.b,onChange:ue}))};L.default=Q},19700:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Github=void 0;var j=M(67294),R=ue(j),J=M(45697),z=ue(J),Z=M(79941),te=ue(Z),Q=M(35161),de=ue(Q),oe=M(82492),ie=ue(oe),re=M(1150),he=M(13255),De=ue(he);function ue(ae){return ae&&ae.__esModule?ae:{default:ae}}var xe=L.Github=function(ce){var fe=ce.width,Ee=ce.colors,pe=ce.onChange,Ae=ce.onSwatchHover,nt=ce.triangle,G=ce.styles,Fe=G===void 0?{}:G,$e=ce.className,at=$e===void 0?"":$e,Ft=(0,te.default)((0,ie.default)({default:{card:{width:fe,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},Fe),{"hide-triangle":nt==="hide","top-left-triangle":nt==="top-left","top-right-triangle":nt==="top-right","bottom-left-triangle":nt==="bottom-left","bottom-right-triangle":nt==="bottom-right"}),Hn=function(wt,Mn){return pe({hex:wt,source:"hex"},Mn)};return R.default.createElement("div",{style:Ft.card,className:"github-picker "+at},R.default.createElement("div",{style:Ft.triangleShadow}),R.default.createElement("div",{style:Ft.triangle}),(0,de.default)(Ee,function(ye){return R.default.createElement(De.default,{color:ye,key:ye,onClick:Hn,onSwatchHover:Ae})}))};xe.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),colors:z.default.arrayOf(z.default.string),triangle:z.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:z.default.object},xe.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},L.default=(0,re.ColorWrap)(xe)},13255:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.GithubSwatch=void 0;var j=M(67294),R=te(j),J=M(79941),z=te(J),Z=M(1150);function te(de){return de&&de.__esModule?de:{default:de}}var Q=L.GithubSwatch=function(oe){var ie=oe.hover,re=oe.color,he=oe.onClick,De=oe.onSwatchHover,ue={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},xe=(0,z.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:ue}},{hover:ie});return R.default.createElement("div",{style:xe.swatch},R.default.createElement(Z.Swatch,{color:re,onClick:he,onHover:De,focusStyle:ue}))};L.default=(0,J.handleHover)(Q)},10565:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.HuePicker=void 0;var j=Object.assign||function(xe){for(var ae=1;ae<arguments.length;ae++){var ce=arguments[ae];for(var fe in ce)Object.prototype.hasOwnProperty.call(ce,fe)&&(xe[fe]=ce[fe])}return xe},R=M(67294),J=De(R),z=M(45697),Z=De(z),te=M(79941),Q=De(te),de=M(82492),oe=De(de),ie=M(1150),re=M(88878),he=De(re);function De(xe){return xe&&xe.__esModule?xe:{default:xe}}var ue=L.HuePicker=function(ae){var ce=ae.width,fe=ae.height,Ee=ae.onChange,pe=ae.hsl,Ae=ae.direction,nt=ae.pointer,G=ae.styles,Fe=G===void 0?{}:G,$e=ae.className,at=$e===void 0?"":$e,Ft=(0,Q.default)((0,oe.default)({default:{picker:{position:"relative",width:ce,height:fe},hue:{radius:"2px"}}},Fe)),Hn=function(wt){return Ee({a:1,h:wt.h,l:.5,s:1})};return J.default.createElement("div",{style:Ft.picker,className:"hue-picker "+at},J.default.createElement(ie.Hue,j({},Ft.hue,{hsl:pe,pointer:nt,onChange:Hn,direction:Ae})))};ue.propTypes={styles:Z.default.object},ue.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:he.default,styles:{}},L.default=(0,ie.ColorWrap)(ue)},88878:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SliderPointer=void 0;var j=M(67294),R=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.SliderPointer=function(de){var oe=de.direction,ie=(0,z.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:oe==="vertical"});return R.default.createElement("div",{style:ie.picker})};L.default=te},66142:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Material=void 0;var j=M(67294),R=ie(j),J=M(79941),z=ie(J),Z=M(82492),te=ie(Z),Q=M(64809),de=ie(Q),oe=M(1150);function ie(he){return he&&he.__esModule?he:{default:he}}var re=L.Material=function(De){var ue=De.onChange,xe=De.hex,ae=De.rgb,ce=De.styles,fe=ce===void 0?{}:ce,Ee=De.className,pe=Ee===void 0?"":Ee,Ae=(0,z.default)((0,te.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+xe,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},fe)),nt=function(Fe,$e){Fe.hex?de.default.isValidHex(Fe.hex)&&ue({hex:Fe.hex,source:"hex"},$e):(Fe.r||Fe.g||Fe.b)&&ue({r:Fe.r||ae.r,g:Fe.g||ae.g,b:Fe.b||ae.b,source:"rgb"},$e)};return R.default.createElement(oe.Raised,{styles:fe},R.default.createElement("div",{style:Ae.material,className:"material-picker "+pe},R.default.createElement(oe.EditableInput,{style:{wrap:Ae.HEXwrap,input:Ae.HEXinput,label:Ae.HEXlabel},label:"hex",value:xe,onChange:nt}),R.default.createElement("div",{style:Ae.split,className:"flexbox-fix"},R.default.createElement("div",{style:Ae.third},R.default.createElement(oe.EditableInput,{style:{wrap:Ae.RGBwrap,input:Ae.RGBinput,label:Ae.RGBlabel},label:"r",value:ae.r,onChange:nt})),R.default.createElement("div",{style:Ae.third},R.default.createElement(oe.EditableInput,{style:{wrap:Ae.RGBwrap,input:Ae.RGBinput,label:Ae.RGBlabel},label:"g",value:ae.g,onChange:nt})),R.default.createElement("div",{style:Ae.third},R.default.createElement(oe.EditableInput,{style:{wrap:Ae.RGBwrap,input:Ae.RGBinput,label:Ae.RGBlabel},label:"b",value:ae.b,onChange:nt})))))};L.default=(0,oe.ColorWrap)(re)},33165:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Photoshop=void 0;var j=function(){function at(Ft,Hn){for(var ye=0;ye<Hn.length;ye++){var wt=Hn[ye];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(Ft,wt.key,wt)}}return function(Ft,Hn,ye){return Hn&&at(Ft.prototype,Hn),ye&&at(Ft,ye),Ft}}(),R=M(67294),J=Ae(R),z=M(45697),Z=Ae(z),te=M(79941),Q=Ae(te),de=M(82492),oe=Ae(de),ie=M(1150),re=M(21962),he=Ae(re),De=M(31804),ue=Ae(De),xe=M(40670),ae=Ae(xe),ce=M(10170),fe=Ae(ce),Ee=M(29628),pe=Ae(Ee);function Ae(at){return at&&at.__esModule?at:{default:at}}function nt(at,Ft){if(!(at instanceof Ft))throw new TypeError("Cannot call a class as a function")}function G(at,Ft){if(!at)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:at}function Fe(at,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);at.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:at,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf(at,Ft):at.__proto__=Ft)}var $e=L.Photoshop=function(at){Fe(Ft,at);function Ft(Hn){nt(this,Ft);var ye=G(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).call(this));return ye.state={currentColor:Hn.hex},ye}return j(Ft,[{key:"render",value:function(){var ye=this.props,wt=ye.styles,Mn=wt===void 0?{}:wt,jt=ye.className,En=jt===void 0?"":jt,Yn=(0,Q.default)((0,oe.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},Mn));return J.default.createElement("div",{style:Yn.picker,className:"photoshop-picker "+En},J.default.createElement("div",{style:Yn.head},this.props.header),J.default.createElement("div",{style:Yn.body,className:"flexbox-fix"},J.default.createElement("div",{style:Yn.saturation},J.default.createElement(ie.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:ue.default,onChange:this.props.onChange})),J.default.createElement("div",{style:Yn.hue},J.default.createElement(ie.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:ae.default,onChange:this.props.onChange})),J.default.createElement("div",{style:Yn.controls},J.default.createElement("div",{style:Yn.top,className:"flexbox-fix"},J.default.createElement("div",{style:Yn.previews},J.default.createElement(pe.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),J.default.createElement("div",{style:Yn.actions},J.default.createElement(fe.default,{label:"OK",onClick:this.props.onAccept,active:!0}),J.default.createElement(fe.default,{label:"Cancel",onClick:this.props.onCancel}),J.default.createElement(he.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),Ft}(J.default.Component);$e.propTypes={header:Z.default.string,styles:Z.default.object},$e.defaultProps={header:"Color Picker",styles:{}},L.default=(0,ie.ColorWrap)($e)},10170:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopButton=void 0;var j=M(67294),R=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.PhotoshopButton=function(de){var oe=de.onClick,ie=de.label,re=de.children,he=de.active,De=(0,z.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:he});return R.default.createElement("div",{style:De.button,onClick:oe},ie||re)};L.default=te},21962:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopPicker=void 0;var j=M(67294),R=de(j),J=M(79941),z=de(J),Z=M(64809),te=de(Z),Q=M(1150);function de(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.PhotoshopPicker=function(re){var he=re.onChange,De=re.rgb,ue=re.hsv,xe=re.hex,ae=(0,z.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),ce=function(Ee,pe){Ee["#"]?te.default.isValidHex(Ee["#"])&&he({hex:Ee["#"],source:"hex"},pe):Ee.r||Ee.g||Ee.b?he({r:Ee.r||De.r,g:Ee.g||De.g,b:Ee.b||De.b,source:"rgb"},pe):(Ee.h||Ee.s||Ee.v)&&he({h:Ee.h||ue.h,s:Ee.s||ue.s,v:Ee.v||ue.v,source:"hsv"},pe)};return R.default.createElement("div",{style:ae.fields},R.default.createElement(Q.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"h",value:Math.round(ue.h),onChange:ce}),R.default.createElement(Q.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"s",value:Math.round(ue.s*100),onChange:ce}),R.default.createElement(Q.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"v",value:Math.round(ue.v*100),onChange:ce}),R.default.createElement("div",{style:ae.divider}),R.default.createElement(Q.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"r",value:De.r,onChange:ce}),R.default.createElement(Q.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"g",value:De.g,onChange:ce}),R.default.createElement(Q.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"b",value:De.b,onChange:ce}),R.default.createElement("div",{style:ae.divider}),R.default.createElement(Q.EditableInput,{style:{wrap:ae.HEXwrap,input:ae.HEXinput,label:ae.HEXlabel},label:"#",value:xe.replace("#",""),onChange:ce}),R.default.createElement("div",{style:ae.fieldSymbols},R.default.createElement("div",{style:ae.symbol},"\xB0"),R.default.createElement("div",{style:ae.symbol},"%"),R.default.createElement("div",{style:ae.symbol},"%")))};L.default=oe},40670:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopPointerCircle=void 0;var j=M(67294),R=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.PhotoshopPointerCircle=function(){var de=(0,z.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return R.default.createElement("div",{style:de.pointer},R.default.createElement("div",{style:de.left},R.default.createElement("div",{style:de.leftInside})),R.default.createElement("div",{style:de.right},R.default.createElement("div",{style:de.rightInside})))};L.default=te},31804:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopPointerCircle=void 0;var j=M(67294),R=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.PhotoshopPointerCircle=function(de){var oe=de.hsl,ie=(0,z.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":oe.l>.5});return R.default.createElement("div",{style:ie.picker})};L.default=te},29628:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopPreviews=void 0;var j=M(67294),R=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.PhotoshopPreviews=function(de){var oe=de.rgb,ie=de.currentColor,re=(0,z.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+oe.r+","+oe.g+", "+oe.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:ie,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return R.default.createElement("div",null,R.default.createElement("div",{style:re.label},"new"),R.default.createElement("div",{style:re.swatches},R.default.createElement("div",{style:re.new}),R.default.createElement("div",{style:re.current})),R.default.createElement("div",{style:re.label},"current"))};L.default=te},89753:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Sketch=void 0;var j=Object.assign||function(ce){for(var fe=1;fe<arguments.length;fe++){var Ee=arguments[fe];for(var pe in Ee)Object.prototype.hasOwnProperty.call(Ee,pe)&&(ce[pe]=Ee[pe])}return ce},R=M(67294),J=xe(R),z=M(45697),Z=xe(z),te=M(79941),Q=xe(te),de=M(82492),oe=xe(de),ie=M(1150),re=M(24530),he=xe(re),De=M(13067),ue=xe(De);function xe(ce){return ce&&ce.__esModule?ce:{default:ce}}var ae=L.Sketch=function(fe){var Ee=fe.width,pe=fe.rgb,Ae=fe.hex,nt=fe.hsv,G=fe.hsl,Fe=fe.onChange,$e=fe.onSwatchHover,at=fe.disableAlpha,Ft=fe.presetColors,Hn=fe.renderers,ye=fe.styles,wt=ye===void 0?{}:ye,Mn=fe.className,jt=Mn===void 0?"":Mn,En=(0,Q.default)((0,oe.default)({default:j({picker:{width:Ee,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+pe.r+","+pe.g+","+pe.b+","+pe.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},wt),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},wt),{disableAlpha:at});return J.default.createElement("div",{style:En.picker,className:"sketch-picker "+jt},J.default.createElement("div",{style:En.saturation},J.default.createElement(ie.Saturation,{style:En.Saturation,hsl:G,hsv:nt,onChange:Fe})),J.default.createElement("div",{style:En.controls,className:"flexbox-fix"},J.default.createElement("div",{style:En.sliders},J.default.createElement("div",{style:En.hue},J.default.createElement(ie.Hue,{style:En.Hue,hsl:G,onChange:Fe})),J.default.createElement("div",{style:En.alpha},J.default.createElement(ie.Alpha,{style:En.Alpha,rgb:pe,hsl:G,renderers:Hn,onChange:Fe}))),J.default.createElement("div",{style:En.color},J.default.createElement(ie.Checkboard,null),J.default.createElement("div",{style:En.activeColor}))),J.default.createElement(he.default,{rgb:pe,hsl:G,hex:Ae,onChange:Fe,disableAlpha:at}),J.default.createElement(ue.default,{colors:Ft,onClick:Fe,onSwatchHover:$e}))};ae.propTypes={disableAlpha:Z.default.bool,width:Z.default.oneOfType([Z.default.string,Z.default.number]),styles:Z.default.object},ae.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},L.default=(0,ie.ColorWrap)(ae)},24530:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SketchFields=void 0;var j=M(67294),R=de(j),J=M(79941),z=de(J),Z=M(64809),te=de(Z),Q=M(1150);function de(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.SketchFields=function(re){var he=re.onChange,De=re.rgb,ue=re.hsl,xe=re.hex,ae=re.disableAlpha,ce=(0,z.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:ae}),fe=function(pe,Ae){pe.hex?te.default.isValidHex(pe.hex)&&he({hex:pe.hex,source:"hex"},Ae):pe.r||pe.g||pe.b?he({r:pe.r||De.r,g:pe.g||De.g,b:pe.b||De.b,a:De.a,source:"rgb"},Ae):pe.a&&(pe.a<0?pe.a=0:pe.a>100&&(pe.a=100),pe.a/=100,he({h:ue.h,s:ue.s,l:ue.l,a:pe.a,source:"rgb"},Ae))};return R.default.createElement("div",{style:ce.fields,className:"flexbox-fix"},R.default.createElement("div",{style:ce.double},R.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"hex",value:xe.replace("#",""),onChange:fe})),R.default.createElement("div",{style:ce.single},R.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"r",value:De.r,onChange:fe,dragLabel:"true",dragMax:"255"})),R.default.createElement("div",{style:ce.single},R.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"g",value:De.g,onChange:fe,dragLabel:"true",dragMax:"255"})),R.default.createElement("div",{style:ce.single},R.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"b",value:De.b,onChange:fe,dragLabel:"true",dragMax:"255"})),R.default.createElement("div",{style:ce.alpha},R.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"a",value:Math.round(De.a*100),onChange:fe,dragLabel:"true",dragMax:"100"})))};L.default=oe},13067:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SketchPresetColors=void 0;var j=Object.assign||function(re){for(var he=1;he<arguments.length;he++){var De=arguments[he];for(var ue in De)Object.prototype.hasOwnProperty.call(De,ue)&&(re[ue]=De[ue])}return re},R=M(67294),J=oe(R),z=M(45697),Z=oe(z),te=M(79941),Q=oe(te),de=M(1150);function oe(re){return re&&re.__esModule?re:{default:re}}var ie=L.SketchPresetColors=function(he){var De=he.colors,ue=he.onClick,xe=ue===void 0?function(){}:ue,ae=he.onSwatchHover,ce=(0,Q.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!De||!De.length}),fe=function(pe,Ae){xe({hex:pe,source:"hex"},Ae)};return J.default.createElement("div",{style:ce.colors,className:"flexbox-fix"},De.map(function(Ee){var pe=typeof Ee=="string"?{color:Ee}:Ee,Ae=""+pe.color+(pe.title||"");return J.default.createElement("div",{key:Ae,style:ce.swatchWrap},J.default.createElement(de.Swatch,j({},pe,{style:ce.swatch,onClick:fe,onHover:ae,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+pe.color}})))}))};ie.propTypes={colors:Z.default.arrayOf(Z.default.oneOfType([Z.default.string,Z.default.shape({color:Z.default.string,title:Z.default.string})])).isRequired},L.default=ie},49857:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Slider=void 0;var j=M(67294),R=ue(j),J=M(45697),z=ue(J),Z=M(79941),te=ue(Z),Q=M(82492),de=ue(Q),oe=M(1150),ie=M(6457),re=ue(ie),he=M(77792),De=ue(he);function ue(ae){return ae&&ae.__esModule?ae:{default:ae}}var xe=L.Slider=function(ce){var fe=ce.hsl,Ee=ce.onChange,pe=ce.pointer,Ae=ce.styles,nt=Ae===void 0?{}:Ae,G=ce.className,Fe=G===void 0?"":G,$e=(0,te.default)((0,de.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},nt));return R.default.createElement("div",{style:$e.wrap||{},className:"slider-picker "+Fe},R.default.createElement("div",{style:$e.hue},R.default.createElement(oe.Hue,{style:$e.Hue,hsl:fe,pointer:pe,onChange:Ee})),R.default.createElement("div",{style:$e.swatches},R.default.createElement(re.default,{hsl:fe,onClick:Ee})))};xe.propTypes={styles:z.default.object},xe.defaultProps={pointer:De.default,styles:{}},L.default=(0,oe.ColorWrap)(xe)},77792:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SliderPointer=void 0;var j=M(67294),R=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.SliderPointer=function(){var de=(0,z.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return R.default.createElement("div",{style:de.picker})};L.default=te},64377:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SliderSwatch=void 0;var j=M(67294),R=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.SliderSwatch=function(de){var oe=de.hsl,ie=de.offset,re=de.onClick,he=re===void 0?function(){}:re,De=de.active,ue=de.first,xe=de.last,ae=(0,z.default)({default:{swatch:{height:"12px",background:"hsl("+oe.h+", 50%, "+ie*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:De,first:ue,last:xe}),ce=function(Ee){return he({h:oe.h,s:.5,l:ie,source:"hsl"},Ee)};return R.default.createElement("div",{style:ae.swatch,onClick:ce})};L.default=te},6457:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SliderSwatches=void 0;var j=M(67294),R=Q(j),J=M(79941),z=Q(J),Z=M(64377),te=Q(Z);function Q(oe){return oe&&oe.__esModule?oe:{default:oe}}var de=L.SliderSwatches=function(ie){var re=ie.onClick,he=ie.hsl,De=(0,z.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),ue=.1;return R.default.createElement("div",{style:De.swatches},R.default.createElement("div",{style:De.swatch},R.default.createElement(te.default,{hsl:he,offset:".80",active:Math.abs(he.l-.8)<ue&&Math.abs(he.s-.5)<ue,onClick:re,first:!0})),R.default.createElement("div",{style:De.swatch},R.default.createElement(te.default,{hsl:he,offset:".65",active:Math.abs(he.l-.65)<ue&&Math.abs(he.s-.5)<ue,onClick:re})),R.default.createElement("div",{style:De.swatch},R.default.createElement(te.default,{hsl:he,offset:".50",active:Math.abs(he.l-.5)<ue&&Math.abs(he.s-.5)<ue,onClick:re})),R.default.createElement("div",{style:De.swatch},R.default.createElement(te.default,{hsl:he,offset:".35",active:Math.abs(he.l-.35)<ue&&Math.abs(he.s-.5)<ue,onClick:re})),R.default.createElement("div",{style:De.swatch},R.default.createElement(te.default,{hsl:he,offset:".20",active:Math.abs(he.l-.2)<ue&&Math.abs(he.s-.5)<ue,onClick:re,last:!0})),R.default.createElement("div",{style:De.clear}))};L.default=de},93926:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Swatches=void 0;var j=M(67294),R=Ee(j),J=M(45697),z=Ee(J),Z=M(79941),te=Ee(Z),Q=M(35161),de=Ee(Q),oe=M(82492),ie=Ee(oe),re=M(64809),he=Ee(re),De=M(53893),ue=fe(De),xe=M(1150),ae=M(23088),ce=Ee(ae);function fe(Ae){if(Ae&&Ae.__esModule)return Ae;var nt={};if(Ae!=null)for(var G in Ae)Object.prototype.hasOwnProperty.call(Ae,G)&&(nt[G]=Ae[G]);return nt.default=Ae,nt}function Ee(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}var pe=L.Swatches=function(nt){var G=nt.width,Fe=nt.height,$e=nt.onChange,at=nt.onSwatchHover,Ft=nt.colors,Hn=nt.hex,ye=nt.styles,wt=ye===void 0?{}:ye,Mn=nt.className,jt=Mn===void 0?"":Mn,En=(0,te.default)((0,ie.default)({default:{picker:{width:G,height:Fe},overflow:{height:Fe,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},wt)),Yn=function(lo,ji){he.default.isValidHex(lo)&&$e({hex:lo,source:"hex"},ji)};return R.default.createElement("div",{style:En.picker,className:"swatches-picker "+jt},R.default.createElement(xe.Raised,null,R.default.createElement("div",{style:En.overflow},R.default.createElement("div",{style:En.body},(0,de.default)(Ft,function(pn){return R.default.createElement(ce.default,{key:pn.toString(),group:pn,active:Hn,onClick:Yn,onSwatchHover:at})}),R.default.createElement("div",{style:En.clear})))))};pe.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),height:z.default.oneOfType([z.default.string,z.default.number]),colors:z.default.arrayOf(z.default.arrayOf(z.default.string)),styles:z.default.object},pe.defaultProps={width:320,height:240,colors:[[ue.red["900"],ue.red["700"],ue.red["500"],ue.red["300"],ue.red["100"]],[ue.pink["900"],ue.pink["700"],ue.pink["500"],ue.pink["300"],ue.pink["100"]],[ue.purple["900"],ue.purple["700"],ue.purple["500"],ue.purple["300"],ue.purple["100"]],[ue.deepPurple["900"],ue.deepPurple["700"],ue.deepPurple["500"],ue.deepPurple["300"],ue.deepPurple["100"]],[ue.indigo["900"],ue.indigo["700"],ue.indigo["500"],ue.indigo["300"],ue.indigo["100"]],[ue.blue["900"],ue.blue["700"],ue.blue["500"],ue.blue["300"],ue.blue["100"]],[ue.lightBlue["900"],ue.lightBlue["700"],ue.lightBlue["500"],ue.lightBlue["300"],ue.lightBlue["100"]],[ue.cyan["900"],ue.cyan["700"],ue.cyan["500"],ue.cyan["300"],ue.cyan["100"]],[ue.teal["900"],ue.teal["700"],ue.teal["500"],ue.teal["300"],ue.teal["100"]],["#194D33",ue.green["700"],ue.green["500"],ue.green["300"],ue.green["100"]],[ue.lightGreen["900"],ue.lightGreen["700"],ue.lightGreen["500"],ue.lightGreen["300"],ue.lightGreen["100"]],[ue.lime["900"],ue.lime["700"],ue.lime["500"],ue.lime["300"],ue.lime["100"]],[ue.yellow["900"],ue.yellow["700"],ue.yellow["500"],ue.yellow["300"],ue.yellow["100"]],[ue.amber["900"],ue.amber["700"],ue.amber["500"],ue.amber["300"],ue.amber["100"]],[ue.orange["900"],ue.orange["700"],ue.orange["500"],ue.orange["300"],ue.orange["100"]],[ue.deepOrange["900"],ue.deepOrange["700"],ue.deepOrange["500"],ue.deepOrange["300"],ue.deepOrange["100"]],[ue.brown["900"],ue.brown["700"],ue.brown["500"],ue.brown["300"],ue.brown["100"]],[ue.blueGrey["900"],ue.blueGrey["700"],ue.blueGrey["500"],ue.blueGrey["300"],ue.blueGrey["100"]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},L.default=(0,xe.ColorWrap)(pe)},85638:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SwatchesColor=void 0;var j=M(67294),R=ie(j),J=M(79941),z=ie(J),Z=M(64809),te=ie(Z),Q=M(1150),de=M(70597),oe=ie(de);function ie(he){return he&&he.__esModule?he:{default:he}}var re=L.SwatchesColor=function(De){var ue=De.color,xe=De.onClick,ae=xe===void 0?function(){}:xe,ce=De.onSwatchHover,fe=De.first,Ee=De.last,pe=De.active,Ae=(0,z.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:ue,marginBottom:"1px"},check:{color:te.default.getContrastingColor(ue),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:fe,last:Ee,active:pe,"color-#FFFFFF":ue==="#FFFFFF",transparent:ue==="transparent"});return R.default.createElement(Q.Swatch,{color:ue,style:Ae.color,onClick:ae,onHover:ce,focusStyle:{boxShadow:"0 0 4px "+ue}},R.default.createElement("div",{style:Ae.check},R.default.createElement(oe.default,null)))};L.default=re},23088:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SwatchesGroup=void 0;var j=M(67294),R=oe(j),J=M(79941),z=oe(J),Z=M(35161),te=oe(Z),Q=M(85638),de=oe(Q);function oe(re){return re&&re.__esModule?re:{default:re}}var ie=L.SwatchesGroup=function(he){var De=he.onClick,ue=he.onSwatchHover,xe=he.group,ae=he.active,ce=(0,z.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return R.default.createElement("div",{style:ce.group},(0,te.default)(xe,function(fe,Ee){return R.default.createElement(de.default,{key:fe,color:fe,active:fe.toLowerCase()===ae,first:Ee===0,last:Ee===xe.length-1,onClick:De,onSwatchHover:ue})}))};L.default=ie},64503:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Twitter=void 0;var j=M(67294),R=ue(j),J=M(45697),z=ue(J),Z=M(79941),te=ue(Z),Q=M(35161),de=ue(Q),oe=M(82492),ie=ue(oe),re=M(64809),he=ue(re),De=M(1150);function ue(ae){return ae&&ae.__esModule?ae:{default:ae}}var xe=L.Twitter=function(ce){var fe=ce.onChange,Ee=ce.onSwatchHover,pe=ce.hex,Ae=ce.colors,nt=ce.width,G=ce.triangle,Fe=ce.styles,$e=Fe===void 0?{}:Fe,at=ce.className,Ft=at===void 0?"":at,Hn=(0,te.default)((0,ie.default)({default:{card:{width:nt,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},$e),{"hide-triangle":G==="hide","top-left-triangle":G==="top-left","top-right-triangle":G==="top-right"}),ye=function(Mn,jt){he.default.isValidHex(Mn)&&fe({hex:Mn,source:"hex"},jt)};return R.default.createElement("div",{style:Hn.card,className:"twitter-picker "+Ft},R.default.createElement("div",{style:Hn.triangleShadow}),R.default.createElement("div",{style:Hn.triangle}),R.default.createElement("div",{style:Hn.body},(0,de.default)(Ae,function(wt,Mn){return R.default.createElement(De.Swatch,{key:Mn,color:wt,hex:wt,style:Hn.swatch,onClick:ye,onHover:Ee,focusStyle:{boxShadow:"0 0 4px "+wt}})}),R.default.createElement("div",{style:Hn.hash},"#"),R.default.createElement(De.EditableInput,{style:{input:Hn.input},value:pe.replace("#",""),onChange:ye}),R.default.createElement("div",{style:Hn.clear})))};xe.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),triangle:z.default.oneOf(["hide","top-left","top-right"]),colors:z.default.arrayOf(z.default.string),styles:z.default.object},xe.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},L.default=(0,De.ColorWrap)(xe)},66713:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M=L.calculateChange=function(R,J,z,Z,te){R.preventDefault();var Q=te.clientWidth,de=te.clientHeight,oe=typeof R.pageX=="number"?R.pageX:R.touches[0].pageX,ie=typeof R.pageY=="number"?R.pageY:R.touches[0].pageY,re=oe-(te.getBoundingClientRect().left+window.pageXOffset),he=ie-(te.getBoundingClientRect().top+window.pageYOffset);if(z==="vertical"){var De=void 0;if(he<0?De=0:he>de?De=1:De=Math.round(he*100/de)/100,J.a!==De)return{h:J.h,s:J.s,l:J.l,a:De,source:"rgb"}}else{var ue=void 0;if(re<0?ue=0:re>Q?ue=1:ue=Math.round(re*100/Q)/100,Z!==ue)return{h:J.h,s:J.s,l:J.l,a:ue,source:"rgb"}}return null}},45704:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M={},j=L.render=function(z,Z,te,Q){if(typeof document>"u"&&!Q)return null;var de=Q?new Q:document.createElement("canvas");de.width=te*2,de.height=te*2;var oe=de.getContext("2d");return oe?(oe.fillStyle=z,oe.fillRect(0,0,de.width,de.height),oe.fillStyle=Z,oe.fillRect(0,0,te,te),oe.translate(te,te),oe.fillRect(0,0,te,te),de.toDataURL()):null},R=L.get=function(z,Z,te,Q){var de=z+"-"+Z+"-"+te+(Q?"-server":"");if(M[de])return M[de];var oe=j(z,Z,te,Q);return M[de]=oe,oe}},64809:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.red=void 0;var j=M(66073),R=Z(j),J=M(17621),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}L.default={simpleCheckForValidColor:function(de){var oe=["r","g","b","a","h","s","l","v"],ie=0,re=0;return(0,R.default)(oe,function(he){if(de[he]&&(ie+=1,isNaN(de[he])||(re+=1),he==="s"||he==="l")){var De=/^\d+%$/;De.test(de[he])&&(re+=1)}}),ie===re?de:!1},toState:function(de,oe){var ie=de.hex?(0,z.default)(de.hex):(0,z.default)(de),re=ie.toHsl(),he=ie.toHsv(),De=ie.toRgb(),ue=ie.toHex();re.s===0&&(re.h=oe||0,he.h=oe||0);var xe=ue==="000000"&&De.a===0;return{hsl:re,hex:xe?"transparent":"#"+ue,rgb:De,hsv:he,oldHue:de.h||oe||re.h,source:de.source}},isValidHex:function(de){var oe=String(de).charAt(0)==="#"?1:0;return de.length!==4+oe&&de.length<7+oe&&(0,z.default)(de).isValid()},getContrastingColor:function(de){if(!de)return"#fff";var oe=this.toState(de);if(oe.hex==="transparent")return"rgba(0,0,0,0.4)";var ie=(oe.rgb.r*299+oe.rgb.g*587+oe.rgb.b*114)/1e3;return ie>=128?"#000":"#fff"}};var te=L.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},33716:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M=L.calculateChange=function(R,J,z,Z){R.preventDefault();var te=Z.clientWidth,Q=Z.clientHeight,de=typeof R.pageX=="number"?R.pageX:R.touches[0].pageX,oe=typeof R.pageY=="number"?R.pageY:R.touches[0].pageY,ie=de-(Z.getBoundingClientRect().left+window.pageXOffset),re=oe-(Z.getBoundingClientRect().top+window.pageYOffset);if(J==="vertical"){var he=void 0;if(re<0)he=359;else if(re>Q)he=0;else{var De=-(re*100/Q)+100;he=360*De/100}if(z.h!==he)return{h:he,s:z.s,l:z.l,a:z.a,source:"rgb"}}else{var ue=void 0;if(ie<0)ue=0;else if(ie>te)ue=359;else{var xe=ie*100/te;ue=360*xe/100}if(z.h!==ue)return{h:ue,s:z.s,l:z.l,a:z.a,source:"rgb"}}return null}},82538:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.handleFocus=void 0;var j=Object.assign||function(ie){for(var re=1;re<arguments.length;re++){var he=arguments[re];for(var De in he)Object.prototype.hasOwnProperty.call(he,De)&&(ie[De]=he[De])}return ie},R=function(){function ie(re,he){for(var De=0;De<he.length;De++){var ue=he[De];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(re,ue.key,ue)}}return function(re,he,De){return he&&ie(re.prototype,he),De&&ie(re,De),re}}(),J=M(67294),z=Z(J);function Z(ie){return ie&&ie.__esModule?ie:{default:ie}}function te(ie,re){if(!(ie instanceof re))throw new TypeError("Cannot call a class as a function")}function Q(ie,re){if(!ie)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:ie}function de(ie,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);ie.prototype=Object.create(re&&re.prototype,{constructor:{value:ie,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(ie,re):ie.__proto__=re)}var oe=L.handleFocus=function(re){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(De){de(ue,De);function ue(){var xe,ae,ce,fe;te(this,ue);for(var Ee=arguments.length,pe=Array(Ee),Ae=0;Ae<Ee;Ae++)pe[Ae]=arguments[Ae];return fe=(ae=(ce=Q(this,(xe=ue.__proto__||Object.getPrototypeOf(ue)).call.apply(xe,[this].concat(pe))),ce),ce.state={focus:!1},ce.handleFocus=function(){return ce.setState({focus:!0})},ce.handleBlur=function(){return ce.setState({focus:!1})},ae),Q(ce,fe)}return R(ue,[{key:"render",value:function(){return z.default.createElement(he,{onFocus:this.handleFocus,onBlur:this.handleBlur},z.default.createElement(re,j({},this.props,this.state)))}}]),ue}(z.default.Component)}},37599:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M=L.calculateChange=function(R,J,z){R.preventDefault();var Z=z.getBoundingClientRect(),te=Z.width,Q=Z.height,de=typeof R.pageX=="number"?R.pageX:R.touches[0].pageX,oe=typeof R.pageY=="number"?R.pageY:R.touches[0].pageY,ie=de-(z.getBoundingClientRect().left+window.pageXOffset),re=oe-(z.getBoundingClientRect().top+window.pageYOffset);ie<0?ie=0:ie>te?ie=te:re<0?re=0:re>Q&&(re=Q);var he=ie*100/te,De=-(re*100/Q)+100;return{h:J.h,s:he,v:De,a:J.a,source:"rgb"}}},24198:function(Ne,L,M){"use strict";var j;j={value:!0},j=j=j=j=L.xS=j=j=j=j=j=j=j=j=j=j=void 0;var R=M(9563);j={enumerable:!0,get:function(){return ce(R).default}};var J=M(88858);j={enumerable:!0,get:function(){return ce(J).default}};var z=M(9703);j={enumerable:!0,get:function(){return ce(z).default}};var Z=M(21847);j={enumerable:!0,get:function(){return ce(Z).default}};var te=M(99766);j={enumerable:!0,get:function(){return ce(te).default}};var Q=M(19700);j={enumerable:!0,get:function(){return ce(Q).default}};var de=M(10565);j={enumerable:!0,get:function(){return ce(de).default}};var oe=M(66142);j={enumerable:!0,get:function(){return ce(oe).default}};var ie=M(33165);j={enumerable:!0,get:function(){return ce(ie).default}};var re=M(89753);Object.defineProperty(L,"xS",{enumerable:!0,get:function(){return ce(re).default}});var he=M(49857);j={enumerable:!0,get:function(){return ce(he).default}};var De=M(93926);j={enumerable:!0,get:function(){return ce(De).default}};var ue=M(64503);j={enumerable:!0,get:function(){return ce(ue).default}};var xe=M(88288);j={enumerable:!0,get:function(){return ce(xe).default}};var ae=ce(Z);function ce(fe){return fe&&fe.__esModule?fe:{default:fe}}j=ae.default},28660:function(Ne,L,M){var j=M(34155);var R;(function(J){(function(z){var Z=typeof M.g=="object"?M.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),te=Q(J);typeof Z.Reflect>"u"?Z.Reflect=J:te=Q(Z.Reflect,te),z(te);function Q(de,oe){return function(ie,re){typeof de[ie]!="function"&&Object.defineProperty(de,ie,{configurable:!0,writable:!0,value:re}),oe&&oe(ie,re)}}})(function(z){var Z=Object.prototype.hasOwnProperty,te=typeof Symbol=="function",Q=te&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",de=te&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",oe=typeof Object.create=="function",ie={__proto__:[]}instanceof Array,re=!oe&&!ie,he={create:oe?function(){return Ha(Object.create(null))}:ie?function(){return Ha({__proto__:null})}:function(){return Ha({})},has:re?function(Pt,Jt){return Z.call(Pt,Jt)}:function(Pt,Jt){return Jt in Pt},get:re?function(Pt,Jt){return Z.call(Pt,Jt)?Pt[Jt]:void 0}:function(Pt,Jt){return Pt[Jt]}},De=Object.getPrototypeOf(Function),ue=typeof j=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",xe=!ue&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Pa(),ae=!ue&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:rl(),ce=!ue&&typeof WeakMap=="function"?WeakMap:qo(),fe=new ce;function Ee(Pt,Jt,xt,ln){if(lr(xt)){if(!Ko(Pt))throw new TypeError;if(!Bi(Jt))throw new TypeError;return ye(Pt,Jt)}else{if(!Ko(Pt))throw new TypeError;if(!zr(Jt))throw new TypeError;if(!zr(ln)&&!lr(ln)&&!Qn(ln))throw new TypeError;return Qn(ln)&&(ln=void 0),xt=no(xt),wt(Pt,Jt,xt,ln)}}z("decorate",Ee);function pe(Pt,Jt){function xt(ln,Gn){if(!zr(ln))throw new TypeError;if(!lr(Gn)&&!$s(Gn))throw new TypeError;lo(Pt,Jt,ln,Gn)}return xt}z("metadata",pe);function Ae(Pt,Jt,xt,ln){if(!zr(xt))throw new TypeError;return lr(ln)||(ln=no(ln)),lo(Pt,Jt,xt,ln)}z("defineMetadata",Ae);function nt(Pt,Jt,xt){if(!zr(Jt))throw new TypeError;return lr(xt)||(xt=no(xt)),jt(Pt,Jt,xt)}z("hasMetadata",nt);function G(Pt,Jt,xt){if(!zr(Jt))throw new TypeError;return lr(xt)||(xt=no(xt)),En(Pt,Jt,xt)}z("hasOwnMetadata",G);function Fe(Pt,Jt,xt){if(!zr(Jt))throw new TypeError;return lr(xt)||(xt=no(xt)),Yn(Pt,Jt,xt)}z("getMetadata",Fe);function $e(Pt,Jt,xt){if(!zr(Jt))throw new TypeError;return lr(xt)||(xt=no(xt)),pn(Pt,Jt,xt)}z("getOwnMetadata",$e);function at(Pt,Jt){if(!zr(Pt))throw new TypeError;return lr(Jt)||(Jt=no(Jt)),ji(Pt,Jt)}z("getMetadataKeys",at);function Ft(Pt,Jt){if(!zr(Pt))throw new TypeError;return lr(Jt)||(Jt=no(Jt)),Xn(Pt,Jt)}z("getOwnMetadataKeys",Ft);function Hn(Pt,Jt,xt){if(!zr(Jt))throw new TypeError;lr(xt)||(xt=no(xt));var ln=Mn(Jt,xt,!1);if(lr(ln)||!ln.delete(Pt))return!1;if(ln.size>0)return!0;var Gn=fe.get(Jt);return Gn.delete(xt),Gn.size>0||fe.delete(Jt),!0}z("deleteMetadata",Hn);function ye(Pt,Jt){for(var xt=Pt.length-1;xt>=0;--xt){var ln=Pt[xt],Gn=ln(Jt);if(!lr(Gn)&&!Qn(Gn)){if(!Bi(Gn))throw new TypeError;Jt=Gn}}return Jt}function wt(Pt,Jt,xt,ln){for(var Gn=Pt.length-1;Gn>=0;--Gn){var zi=Pt[Gn],Lr=zi(Jt,xt,ln);if(!lr(Lr)&&!Qn(Lr)){if(!zr(Lr))throw new TypeError;ln=Lr}}return ln}function Mn(Pt,Jt,xt){var ln=fe.get(Pt);if(lr(ln)){if(!xt)return;ln=new xe,fe.set(Pt,ln)}var Gn=ln.get(Jt);if(lr(Gn)){if(!xt)return;Gn=new xe,ln.set(Jt,Gn)}return Gn}function jt(Pt,Jt,xt){var ln=En(Pt,Jt,xt);if(ln)return!0;var Gn=gr(Jt);return Qn(Gn)?!1:jt(Pt,Gn,xt)}function En(Pt,Jt,xt){var ln=Mn(Jt,xt,!1);return lr(ln)?!1:Ts(ln.has(Pt))}function Yn(Pt,Jt,xt){var ln=En(Pt,Jt,xt);if(ln)return pn(Pt,Jt,xt);var Gn=gr(Jt);if(!Qn(Gn))return Yn(Pt,Gn,xt)}function pn(Pt,Jt,xt){var ln=Mn(Jt,xt,!1);if(!lr(ln))return ln.get(Pt)}function lo(Pt,Jt,xt,ln){var Gn=Mn(xt,ln,!0);Gn.set(Pt,Jt)}function ji(Pt,Jt){var xt=Xn(Pt,Jt),ln=gr(Pt);if(ln===null)return xt;var Gn=ji(ln,Jt);if(Gn.length<=0)return xt;if(xt.length<=0)return Gn;for(var zi=new ae,Lr=[],Hr=0,Ar=xt;Hr<Ar.length;Hr++){var gi=Ar[Hr],Ur=zi.has(gi);Ur||(zi.add(gi),Lr.push(gi))}for(var ko=0,Fc=Gn;ko<Fc.length;ko++){var gi=Fc[ko],Ur=zi.has(gi);Ur||(zi.add(gi),Lr.push(gi))}return Lr}function Xn(Pt,Jt){var xt=[],ln=Mn(Pt,Jt,!1);if(lr(ln))return xt;for(var Gn=ln.keys(),zi=H(Gn),Lr=0;;){var Hr=Oe(zi);if(!Hr)return xt.length=Lr,xt;var Ar=gf(Hr);try{xt[Lr]=Ar}catch(gi){try{lc(zi)}finally{throw gi}}Lr++}}function kr(Pt){if(Pt===null)return 1;switch(typeof Pt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Pt===null?1:6;default:return 6}}function lr(Pt){return Pt===void 0}function Qn(Pt){return Pt===null}function Oi(Pt){return typeof Pt=="symbol"}function zr(Pt){return typeof Pt=="object"?Pt!==null:typeof Pt=="function"}function Yr(Pt,Jt){switch(kr(Pt)){case 0:return Pt;case 1:return Pt;case 2:return Pt;case 3:return Pt;case 4:return Pt;case 5:return Pt}var xt=Jt===3?"string":Jt===5?"number":"default",ln=F(Pt,Q);if(ln!==void 0){var Gn=ln.call(Pt,xt);if(zr(Gn))throw new TypeError;return Gn}return to(Pt,xt==="default"?"number":xt)}function to(Pt,Jt){if(Jt==="string"){var xt=Pt.toString;if(Qr(xt)){var ln=xt.call(Pt);if(!zr(ln))return ln}var Gn=Pt.valueOf;if(Qr(Gn)){var ln=Gn.call(Pt);if(!zr(ln))return ln}}else{var Gn=Pt.valueOf;if(Qr(Gn)){var ln=Gn.call(Pt);if(!zr(ln))return ln}var zi=Pt.toString;if(Qr(zi)){var ln=zi.call(Pt);if(!zr(ln))return ln}}throw new TypeError}function Ts(Pt){return!!Pt}function oa(Pt){return""+Pt}function no(Pt){var Jt=Yr(Pt,3);return Oi(Jt)?Jt:oa(Jt)}function Ko(Pt){return Array.isArray?Array.isArray(Pt):Pt instanceof Object?Pt instanceof Array:Object.prototype.toString.call(Pt)==="[object Array]"}function Qr(Pt){return typeof Pt=="function"}function Bi(Pt){return typeof Pt=="function"}function $s(Pt){switch(kr(Pt)){case 3:return!0;case 4:return!0;default:return!1}}function F(Pt,Jt){var xt=Pt[Jt];if(xt!=null){if(!Qr(xt))throw new TypeError;return xt}}function H(Pt){var Jt=F(Pt,de);if(!Qr(Jt))throw new TypeError;var xt=Jt.call(Pt);if(!zr(xt))throw new TypeError;return xt}function gf(Pt){return Pt.value}function Oe(Pt){var Jt=Pt.next();return Jt.done?!1:Jt}function lc(Pt){var Jt=Pt.return;Jt&&Jt.call(Pt)}function gr(Pt){var Jt=Object.getPrototypeOf(Pt);if(typeof Pt!="function"||Pt===De||Jt!==De)return Jt;var xt=Pt.prototype,ln=xt&&Object.getPrototypeOf(xt);if(ln==null||ln===Object.prototype)return Jt;var Gn=ln.constructor;return typeof Gn!="function"||Gn===Pt?Jt:Gn}function Pa(){var Pt={},Jt=[],xt=function(){function Lr(Hr,Ar,gi){this._index=0,this._keys=Hr,this._values=Ar,this._selector=gi}return Lr.prototype["@@iterator"]=function(){return this},Lr.prototype[de]=function(){return this},Lr.prototype.next=function(){var Hr=this._index;if(Hr>=0&&Hr<this._keys.length){var Ar=this._selector(this._keys[Hr],this._values[Hr]);return Hr+1>=this._keys.length?(this._index=-1,this._keys=Jt,this._values=Jt):this._index++,{value:Ar,done:!1}}return{value:void 0,done:!0}},Lr.prototype.throw=function(Hr){throw this._index>=0&&(this._index=-1,this._keys=Jt,this._values=Jt),Hr},Lr.prototype.return=function(Hr){return this._index>=0&&(this._index=-1,this._keys=Jt,this._values=Jt),{value:Hr,done:!0}},Lr}();return function(){function Lr(){this._keys=[],this._values=[],this._cacheKey=Pt,this._cacheIndex=-2}return Object.defineProperty(Lr.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Lr.prototype.has=function(Hr){return this._find(Hr,!1)>=0},Lr.prototype.get=function(Hr){var Ar=this._find(Hr,!1);return Ar>=0?this._values[Ar]:void 0},Lr.prototype.set=function(Hr,Ar){var gi=this._find(Hr,!0);return this._values[gi]=Ar,this},Lr.prototype.delete=function(Hr){var Ar=this._find(Hr,!1);if(Ar>=0){for(var gi=this._keys.length,Ur=Ar+1;Ur<gi;Ur++)this._keys[Ur-1]=this._keys[Ur],this._values[Ur-1]=this._values[Ur];return this._keys.length--,this._values.length--,Hr===this._cacheKey&&(this._cacheKey=Pt,this._cacheIndex=-2),!0}return!1},Lr.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Pt,this._cacheIndex=-2},Lr.prototype.keys=function(){return new xt(this._keys,this._values,ln)},Lr.prototype.values=function(){return new xt(this._keys,this._values,Gn)},Lr.prototype.entries=function(){return new xt(this._keys,this._values,zi)},Lr.prototype["@@iterator"]=function(){return this.entries()},Lr.prototype[de]=function(){return this.entries()},Lr.prototype._find=function(Hr,Ar){return this._cacheKey!==Hr&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Hr)),this._cacheIndex<0&&Ar&&(this._cacheIndex=this._keys.length,this._keys.push(Hr),this._values.push(void 0)),this._cacheIndex},Lr}();function ln(Lr,Hr){return Lr}function Gn(Lr,Hr){return Hr}function zi(Lr,Hr){return[Lr,Hr]}}function rl(){return function(){function Pt(){this._map=new xe}return Object.defineProperty(Pt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Pt.prototype.has=function(Jt){return this._map.has(Jt)},Pt.prototype.add=function(Jt){return this._map.set(Jt,Jt),this},Pt.prototype.delete=function(Jt){return this._map.delete(Jt)},Pt.prototype.clear=function(){this._map.clear()},Pt.prototype.keys=function(){return this._map.keys()},Pt.prototype.values=function(){return this._map.values()},Pt.prototype.entries=function(){return this._map.entries()},Pt.prototype["@@iterator"]=function(){return this.keys()},Pt.prototype[de]=function(){return this.keys()},Pt}()}function qo(){var Pt=16,Jt=he.create(),xt=ln();return function(){function Ar(){this._key=ln()}return Ar.prototype.has=function(gi){var Ur=Gn(gi,!1);return Ur!==void 0?he.has(Ur,this._key):!1},Ar.prototype.get=function(gi){var Ur=Gn(gi,!1);return Ur!==void 0?he.get(Ur,this._key):void 0},Ar.prototype.set=function(gi,Ur){var ko=Gn(gi,!0);return ko[this._key]=Ur,this},Ar.prototype.delete=function(gi){var Ur=Gn(gi,!1);return Ur!==void 0?delete Ur[this._key]:!1},Ar.prototype.clear=function(){this._key=ln()},Ar}();function ln(){var Ar;do Ar="@@WeakMap@@"+Hr();while(he.has(Jt,Ar));return Jt[Ar]=!0,Ar}function Gn(Ar,gi){if(!Z.call(Ar,xt)){if(!gi)return;Object.defineProperty(Ar,xt,{value:he.create()})}return Ar[xt]}function zi(Ar,gi){for(var Ur=0;Ur<gi;++Ur)Ar[Ur]=Math.random()*255|0;return Ar}function Lr(Ar){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(Ar)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(Ar)):zi(new Uint8Array(Ar),Ar):zi(new Array(Ar),Ar)}function Hr(){var Ar=Lr(Pt);Ar[6]=Ar[6]&79|64,Ar[8]=Ar[8]&191|128;for(var gi="",Ur=0;Ur<Pt;++Ur){var ko=Ar[Ur];(Ur===4||Ur===6||Ur===8)&&(gi+="-"),ko<16&&(gi+="0"),gi+=ko.toString(16).toLowerCase()}return gi}}function Ha(Pt){return Pt.__=void 0,delete Pt.__,Pt}})})(R||(R={}))},81550:function(Ne){(function(L,M){Ne.exports=M()})(this,function(){"use strict";var L=function(K){return K instanceof Uint8Array||K instanceof Uint16Array||K instanceof Uint32Array||K instanceof Int8Array||K instanceof Int16Array||K instanceof Int32Array||K instanceof Float32Array||K instanceof Float64Array||K instanceof Uint8ClampedArray},M=function(K,Pe){for(var ze=Object.keys(Pe),_t=0;_t<ze.length;++_t)K[ze[_t]]=Pe[ze[_t]];return K},j=`
`;function R(K){return typeof atob<"u"?atob(K):"base64:"+K}function J(K){var Pe=new Error("(regl) "+K);throw console.error(Pe),Pe}function z(K,Pe){K||J(Pe)}function Z(K){return K?": "+K:""}function te(K,Pe,ze){K in Pe||J("unknown parameter ("+K+")"+Z(ze)+". possible values: "+Object.keys(Pe).join())}function Q(K,Pe){L(K)||J("invalid parameter type"+Z(Pe)+". must be a typed array")}function de(K,Pe){switch(Pe){case"number":return typeof K=="number";case"object":return typeof K=="object";case"string":return typeof K=="string";case"boolean":return typeof K=="boolean";case"function":return typeof K=="function";case"undefined":return typeof K>"u";case"symbol":return typeof K=="symbol"}}function oe(K,Pe,ze){de(K,Pe)||J("invalid parameter type"+Z(ze)+". expected "+Pe+", got "+typeof K)}function ie(K,Pe){K>=0&&(K|0)===K||J("invalid parameter type, ("+K+")"+Z(Pe)+". must be a nonnegative integer")}function re(K,Pe,ze){Pe.indexOf(K)<0&&J("invalid value"+Z(ze)+". must be one of: "+Pe)}var he=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function De(K){Object.keys(K).forEach(function(Pe){he.indexOf(Pe)<0&&J('invalid regl constructor argument "'+Pe+'". must be one of '+he)})}function ue(K,Pe){for(K=K+"";K.length<Pe;)K=" "+K;return K}function xe(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function ae(K,Pe){this.number=K,this.line=Pe,this.errors=[]}function ce(K,Pe,ze){this.file=K,this.line=Pe,this.message=ze}function fe(){var K=new Error,Pe=(K.stack||K).toString(),ze=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Pe);if(ze)return ze[1];var _t=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Pe);return _t?_t[1]:"unknown"}function Ee(){var K=new Error,Pe=(K.stack||K).toString(),ze=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Pe);if(ze)return ze[1];var _t=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Pe);return _t?_t[1]:"unknown"}function pe(K,Pe){var ze=K.split(`
`),_t=1,pt=0,Ct={unknown:new xe,0:new xe};Ct.unknown.name=Ct[0].name=Pe||fe(),Ct.unknown.lines.push(new ae(0,""));for(var It=0;It<ze.length;++It){var en=ze[It],un=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(en);if(un)switch(un[1]){case"line":var hn=/(\d+)(\s+\d+)?/.exec(un[2]);hn&&(_t=hn[1]|0,hn[2]&&(pt=hn[2]|0,pt in Ct||(Ct[pt]=new xe)));break;case"define":var rn=/SHADER_NAME(_B64)?\s+(.*)$/.exec(un[2]);rn&&(Ct[pt].name=rn[1]?R(rn[2]):rn[2]);break}Ct[pt].lines.push(new ae(_t++,en))}return Object.keys(Ct).forEach(function(on){var On=Ct[on];On.lines.forEach(function(cn){On.index[cn.number]=cn})}),Ct}function Ae(K){var Pe=[];return K.split(`
`).forEach(function(ze){if(!(ze.length<5)){var _t=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(ze);_t?Pe.push(new ce(_t[1]|0,_t[2]|0,_t[3].trim())):ze.length>0&&Pe.push(new ce("unknown",0,ze))}}),Pe}function nt(K,Pe){Pe.forEach(function(ze){var _t=K[ze.file];if(_t){var pt=_t.index[ze.line];if(pt){pt.errors.push(ze),_t.hasErrors=!0;return}}K.unknown.hasErrors=!0,K.unknown.lines[0].errors.push(ze)})}function G(K,Pe,ze,_t,pt){if(!K.getShaderParameter(Pe,K.COMPILE_STATUS)){var Ct=K.getShaderInfoLog(Pe),It=_t===K.FRAGMENT_SHADER?"fragment":"vertex";wt(ze,"string",It+" shader source must be a string",pt);var en=pe(ze,pt),un=Ae(Ct);nt(en,un),Object.keys(en).forEach(function(hn){var rn=en[hn];if(!rn.hasErrors)return;var on=[""],On=[""];function cn(wn,ft){on.push(wn),On.push(ft||"")}cn("file number "+hn+": "+rn.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),rn.lines.forEach(function(wn){if(wn.errors.length>0){cn(ue(wn.number,4)+"|  ","background-color:yellow; font-weight:bold"),cn(wn.line+j,"color:red; background-color:yellow; font-weight:bold");var ft=0;wn.errors.forEach(function(Rt){var fn=Rt.message,Vn=/^\s*'(.*)'\s*:\s*(.*)$/.exec(fn);if(Vn){var tn=Vn[1];switch(fn=Vn[2],tn){case"assign":tn="=";break}ft=Math.max(wn.line.indexOf(tn,ft),0)}else ft=0;cn(ue("| ",6)),cn(ue("^^^",ft+3)+j,"font-weight:bold"),cn(ue("| ",6)),cn(fn+j,"font-weight:bold")}),cn(ue("| ",6)+j)}else cn(ue(wn.number,4)+"|  "),cn(wn.line+j,"color:red")}),typeof document<"u"&&!window.chrome?(On[0]=on.join("%c"),console.log.apply(console,On)):console.log(on.join(""))}),z.raise("Error compiling "+It+" shader, "+en[0].name)}}function Fe(K,Pe,ze,_t,pt){if(!K.getProgramParameter(Pe,K.LINK_STATUS)){var Ct=K.getProgramInfoLog(Pe),It=pe(ze,pt),en=pe(_t,pt),un='Error linking program with vertex shader, "'+en[0].name+'", and fragment shader "'+It[0].name+'"';typeof document<"u"?console.log("%c"+un+j+"%c"+Ct,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(un+j+Ct),z.raise(un)}}function $e(K){K._commandRef=fe()}function at(K,Pe,ze,_t){$e(K);function pt(un){return un?_t.id(un):0}K._fragId=pt(K.static.frag),K._vertId=pt(K.static.vert);function Ct(un,hn){Object.keys(hn).forEach(function(rn){un[_t.id(rn)]=!0})}var It=K._uniformSet={};Ct(It,Pe.static),Ct(It,Pe.dynamic);var en=K._attributeSet={};Ct(en,ze.static),Ct(en,ze.dynamic),K._hasCount="count"in K.static||"count"in K.dynamic||"elements"in K.static||"elements"in K.dynamic}function Ft(K,Pe){var ze=Ee();J(K+" in command "+(Pe||fe())+(ze==="unknown"?"":" called from "+ze))}function Hn(K,Pe,ze){K||Ft(Pe,ze||fe())}function ye(K,Pe,ze,_t){K in Pe||Ft("unknown parameter ("+K+")"+Z(ze)+". possible values: "+Object.keys(Pe).join(),_t||fe())}function wt(K,Pe,ze,_t){de(K,Pe)||Ft("invalid parameter type"+Z(ze)+". expected "+Pe+", got "+typeof K,_t||fe())}function Mn(K){K()}function jt(K,Pe,ze){K.texture?re(K.texture._texture.internalformat,Pe,"unsupported texture format for attachment"):re(K.renderbuffer._renderbuffer.format,ze,"unsupported renderbuffer format for attachment")}var En=33071,Yn=9728,pn=9984,lo=9985,ji=9986,Xn=9987,kr=5120,lr=5121,Qn=5122,Oi=5123,zr=5124,Yr=5125,to=5126,Ts=32819,oa=32820,no=33635,Ko=34042,Qr=36193,Bi={};Bi[kr]=Bi[lr]=1,Bi[Qn]=Bi[Oi]=Bi[Qr]=Bi[no]=Bi[Ts]=Bi[oa]=2,Bi[zr]=Bi[Yr]=Bi[to]=Bi[Ko]=4;function $s(K,Pe){return K===oa||K===Ts||K===no?2:K===Ko?4:Bi[K]*Pe}function F(K){return!(K&K-1)&&!!K}function H(K,Pe,ze){var _t,pt=Pe.width,Ct=Pe.height,It=Pe.channels;z(pt>0&&pt<=ze.maxTextureSize&&Ct>0&&Ct<=ze.maxTextureSize,"invalid texture shape"),(K.wrapS!==En||K.wrapT!==En)&&z(F(pt)&&F(Ct),"incompatible wrap mode for texture, both width and height must be power of 2"),Pe.mipmask===1?pt!==1&&Ct!==1&&z(K.minFilter!==pn&&K.minFilter!==ji&&K.minFilter!==lo&&K.minFilter!==Xn,"min filter requires mipmap"):(z(F(pt)&&F(Ct),"texture must be a square power of 2 to support mipmapping"),z(Pe.mipmask===(pt<<1)-1,"missing or incomplete mipmap data")),Pe.type===to&&(ze.extensions.indexOf("oes_texture_float_linear")<0&&z(K.minFilter===Yn&&K.magFilter===Yn,"filter not supported, must enable oes_texture_float_linear"),z(!K.genMipmaps,"mipmap generation not supported with float textures"));var en=Pe.images;for(_t=0;_t<16;++_t)if(en[_t]){var un=pt>>_t,hn=Ct>>_t;z(Pe.mipmask&1<<_t,"missing mipmap data");var rn=en[_t];if(z(rn.width===un&&rn.height===hn,"invalid shape for mip images"),z(rn.format===Pe.format&&rn.internalformat===Pe.internalformat&&rn.type===Pe.type,"incompatible type for mip image"),!rn.compressed)if(rn.data){var on=Math.ceil($s(rn.type,It)*un/rn.unpackAlignment)*rn.unpackAlignment;z(rn.data.byteLength===on*hn,"invalid data for image, buffer size is inconsistent with image format")}else rn.element||rn.copy}else K.genMipmaps||z((Pe.mipmask&1<<_t)===0,"extra mipmap data");Pe.compressed&&z(!K.genMipmaps,"mipmap generation for compressed images not supported")}function gf(K,Pe,ze,_t){var pt=K.width,Ct=K.height,It=K.channels;z(pt>0&&pt<=_t.maxTextureSize&&Ct>0&&Ct<=_t.maxTextureSize,"invalid texture shape"),z(pt===Ct,"cube map must be square"),z(Pe.wrapS===En&&Pe.wrapT===En,"wrap mode not supported by cube map");for(var en=0;en<ze.length;++en){var un=ze[en];z(un.width===pt&&un.height===Ct,"inconsistent cube map face shape"),Pe.genMipmaps&&(z(!un.compressed,"can not generate mipmap for compressed textures"),z(un.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var hn=un.images,rn=0;rn<16;++rn){var on=hn[rn];if(on){var On=pt>>rn,cn=Ct>>rn;z(un.mipmask&1<<rn,"missing mipmap data"),z(on.width===On&&on.height===cn,"invalid shape for mip images"),z(on.format===K.format&&on.internalformat===K.internalformat&&on.type===K.type,"incompatible type for mip image"),on.compressed||(on.data?z(on.data.byteLength===On*cn*Math.max($s(on.type,It),on.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):on.element||on.copy)}}}}var Oe=M(z,{optional:Mn,raise:J,commandRaise:Ft,command:Hn,parameter:te,commandParameter:ye,constructor:De,type:oe,commandType:wt,isTypedArray:Q,nni:ie,oneOf:re,shaderError:G,linkError:Fe,callSite:Ee,saveCommandRef:$e,saveDrawInfo:at,framebufferFormat:jt,guessCommand:fe,texture2D:H,textureCube:gf}),lc=0,gr=0,Pa=5,rl=6;function qo(K,Pe){this.id=lc++,this.type=K,this.data=Pe}function Ha(K){return K.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Pt(K){if(K.length===0)return[];var Pe=K.charAt(0),ze=K.charAt(K.length-1);if(K.length>1&&Pe===ze&&(Pe==='"'||Pe==="'"))return['"'+Ha(K.substr(1,K.length-2))+'"'];var _t=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(K);if(_t)return Pt(K.substr(0,_t.index)).concat(Pt(_t[1])).concat(Pt(K.substr(_t.index+_t[0].length)));var pt=K.split(".");if(pt.length===1)return['"'+Ha(K)+'"'];for(var Ct=[],It=0;It<pt.length;++It)Ct=Ct.concat(Pt(pt[It]));return Ct}function Jt(K){return"["+Pt(K).join("][")+"]"}function xt(K,Pe){return new qo(K,Jt(Pe+""))}function ln(K){return typeof K=="function"&&!K._reglType||K instanceof qo}function Gn(K,Pe){if(typeof K=="function")return new qo(gr,K);if(typeof K=="number"||typeof K=="boolean")return new qo(Pa,K);if(Array.isArray(K))return new qo(rl,K.map((ze,_t)=>Gn(ze,Pe+"["+_t+"]")));if(K instanceof qo)return K;Oe(!1,"invalid option type in uniform "+Pe)}var zi={DynamicVariable:qo,define:xt,isDynamic:ln,unbox:Gn,accessor:Jt},Lr={next:typeof requestAnimationFrame=="function"?function(K){return requestAnimationFrame(K)}:function(K){return setTimeout(K,16)},cancel:typeof cancelAnimationFrame=="function"?function(K){return cancelAnimationFrame(K)}:clearTimeout},Hr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Ar(){var K={"":0},Pe=[""];return{id:function(ze){var _t=K[ze];return _t||(_t=K[ze]=Pe.length,Pe.push(ze),_t)},str:function(ze){return Pe[ze]}}}function gi(K,Pe,ze){var _t=document.createElement("canvas");M(_t.style,{border:0,margin:0,padding:0,top:0,left:0}),K.appendChild(_t),K===document.body&&(_t.style.position="absolute",M(K.style,{margin:0,padding:0}));function pt(){var en=window.innerWidth,un=window.innerHeight;if(K!==document.body){var hn=K.getBoundingClientRect();en=hn.right-hn.left,un=hn.bottom-hn.top}_t.width=ze*en,_t.height=ze*un,M(_t.style,{width:en+"px",height:un+"px"})}var Ct;K!==document.body&&typeof ResizeObserver=="function"?(Ct=new ResizeObserver(function(){setTimeout(pt)}),Ct.observe(K)):window.addEventListener("resize",pt,!1);function It(){Ct?Ct.disconnect():window.removeEventListener("resize",pt),K.removeChild(_t)}return pt(),{canvas:_t,onDestroy:It}}function Ur(K,Pe){function ze(_t){try{return K.getContext(_t,Pe)}catch{return null}}return ze("webgl")||ze("experimental-webgl")||ze("webgl-experimental")}function ko(K){return typeof K.nodeName=="string"&&typeof K.appendChild=="function"&&typeof K.getBoundingClientRect=="function"}function Fc(K){return typeof K.drawArrays=="function"||typeof K.drawElements=="function"}function vf(K){return typeof K=="string"?K.split():(Oe(Array.isArray(K),"invalid extension array"),K)}function mf(K){return typeof K=="string"?(Oe(typeof document<"u","not supported outside of DOM"),document.querySelector(K)):K}function Bc(K){var Pe=K||{},ze,_t,pt,Ct,It={},en=[],un=[],hn=typeof window>"u"?1:window.devicePixelRatio,rn=!1,on=function(wn){wn&&Oe.raise(wn)},On=function(){};if(typeof Pe=="string"?(Oe(typeof document<"u","selector queries only supported in DOM enviroments"),ze=document.querySelector(Pe),Oe(ze,"invalid query string for element")):typeof Pe=="object"?ko(Pe)?ze=Pe:Fc(Pe)?(Ct=Pe,pt=Ct.canvas):(Oe.constructor(Pe),"gl"in Pe?Ct=Pe.gl:"canvas"in Pe?pt=mf(Pe.canvas):"container"in Pe&&(_t=mf(Pe.container)),"attributes"in Pe&&(It=Pe.attributes,Oe.type(It,"object","invalid context attributes")),"extensions"in Pe&&(en=vf(Pe.extensions)),"optionalExtensions"in Pe&&(un=vf(Pe.optionalExtensions)),"onDone"in Pe&&(Oe.type(Pe.onDone,"function","invalid or missing onDone callback"),on=Pe.onDone),"profile"in Pe&&(rn=!!Pe.profile),"pixelRatio"in Pe&&(hn=+Pe.pixelRatio,Oe(hn>0,"invalid pixel ratio"))):Oe.raise("invalid arguments to regl"),ze&&(ze.nodeName.toLowerCase()==="canvas"?pt=ze:_t=ze),!Ct){if(!pt){Oe(typeof document<"u","must manually specify webgl context outside of DOM environments");var cn=gi(_t||document.body,on,hn);if(!cn)return null;pt=cn.canvas,On=cn.onDestroy}It.premultipliedAlpha===void 0&&(It.premultipliedAlpha=!0),Ct=Ur(pt,It)}return Ct?{gl:Ct,canvas:pt,container:_t,extensions:en,optionalExtensions:un,pixelRatio:hn,profile:rn,onDone:on,onDestroy:On}:(On(),on("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Cc(K,Pe){var ze={};function _t(It){Oe.type(It,"string","extension name must be string");var en=It.toLowerCase(),un;try{un=ze[en]=K.getExtension(en)}catch{}return!!un}for(var pt=0;pt<Pe.extensions.length;++pt){var Ct=Pe.extensions[pt];if(!_t(Ct))return Pe.onDestroy(),Pe.onDone('"'+Ct+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Pe.optionalExtensions.forEach(_t),{extensions:ze,restore:function(){Object.keys(ze).forEach(function(It){if(ze[It]&&!_t(It))throw new Error("(regl): error restoring extension "+It)})}}}function Jo(K,Pe){for(var ze=Array(K),_t=0;_t<K;++_t)ze[_t]=Pe(_t);return ze}var yf=5120,Md=5121,Qo=5122,wh=5123,vp=5124,mp=5125,il=5126;function Hi(K){for(var Pe=16;Pe<=1<<28;Pe*=16)if(K<=Pe)return Pe;return 0}function uo(K){var Pe,ze;return Pe=(K>65535)<<4,K>>>=Pe,ze=(K>255)<<3,K>>>=ze,Pe|=ze,ze=(K>15)<<2,K>>>=ze,Pe|=ze,ze=(K>3)<<1,K>>>=ze,Pe|=ze,Pe|K>>1}function ei(){var K=Jo(8,function(){return[]});function Pe(Ct){var It=Hi(Ct),en=K[uo(It)>>2];return en.length>0?en.pop():new ArrayBuffer(It)}function ze(Ct){K[uo(Ct.byteLength)>>2].push(Ct)}function _t(Ct,It){var en=null;switch(Ct){case yf:en=new Int8Array(Pe(It),0,It);break;case Md:en=new Uint8Array(Pe(It),0,It);break;case Qo:en=new Int16Array(Pe(2*It),0,It);break;case wh:en=new Uint16Array(Pe(2*It),0,It);break;case vp:en=new Int32Array(Pe(4*It),0,It);break;case mp:en=new Uint32Array(Pe(4*It),0,It);break;case il:en=new Float32Array(Pe(4*It),0,It);break;default:return null}return en.length!==It?en.subarray(0,It):en}function pt(Ct){ze(Ct.buffer)}return{alloc:Pe,free:ze,allocType:_t,freeType:pt}}var Do=ei();Do.zero=ei();var Ms=3408,Jl=3410,yp=3411,bf=3412,Eh=3413,bp=3414,xp=3415,Od=33901,Ml=33902,Ol=3379,Ou=3386,xf=34921,Pu=36347,Ql=36348,Pd=35661,Dd=35660,mg=34930,Cp=36349,pa=34076,Du=34024,xs=7936,sa=7937,Nd=7938,Cf=35724,S0=34047,_0=36063,wf=34852,zc=3553,Nu=34067,Ef=34069,wp=33984,Iu=6408,ls=5126,Sf=5121,$a=36160,yg=36053,bg=36064,Pl=16384,Ru=function(K,Pe){var ze=1;Pe.ext_texture_filter_anisotropic&&(ze=K.getParameter(S0));var _t=1,pt=1;Pe.webgl_draw_buffers&&(_t=K.getParameter(wf),pt=K.getParameter(_0));var Ct=!!Pe.oes_texture_float;if(Ct){var It=K.createTexture();K.bindTexture(zc,It),K.texImage2D(zc,0,Iu,1,1,0,Iu,ls,null);var en=K.createFramebuffer();if(K.bindFramebuffer($a,en),K.framebufferTexture2D($a,bg,zc,It,0),K.bindTexture(zc,null),K.checkFramebufferStatus($a)!==yg)Ct=!1;else{K.viewport(0,0,1,1),K.clearColor(1,0,0,1),K.clear(Pl);var un=Do.allocType(ls,4);K.readPixels(0,0,1,1,Iu,ls,un),K.getError()?Ct=!1:(K.deleteFramebuffer(en),K.deleteTexture(It),Ct=un[0]===1),Do.freeType(un)}}var hn=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),rn=!0;if(!hn){var on=K.createTexture(),On=Do.allocType(Sf,36);K.activeTexture(wp),K.bindTexture(Nu,on),K.texImage2D(Ef,0,Iu,3,3,0,Iu,Sf,On),Do.freeType(On),K.bindTexture(Nu,null),K.deleteTexture(on),rn=!K.getError()}return{colorBits:[K.getParameter(Jl),K.getParameter(yp),K.getParameter(bf),K.getParameter(Eh)],depthBits:K.getParameter(bp),stencilBits:K.getParameter(xp),subpixelBits:K.getParameter(Ms),extensions:Object.keys(Pe).filter(function(cn){return!!Pe[cn]}),maxAnisotropic:ze,maxDrawbuffers:_t,maxColorAttachments:pt,pointSizeDims:K.getParameter(Od),lineWidthDims:K.getParameter(Ml),maxViewportDims:K.getParameter(Ou),maxCombinedTextureUnits:K.getParameter(Pd),maxCubeMapSize:K.getParameter(pa),maxRenderbufferSize:K.getParameter(Du),maxTextureUnits:K.getParameter(mg),maxTextureSize:K.getParameter(Ol),maxAttributes:K.getParameter(xf),maxVertexUniforms:K.getParameter(Pu),maxVertexTextureUnits:K.getParameter(Dd),maxVaryingVectors:K.getParameter(Ql),maxFragmentUniforms:K.getParameter(Cp),glsl:K.getParameter(Cf),renderer:K.getParameter(sa),vendor:K.getParameter(xs),version:K.getParameter(Nd),readFloat:Ct,npotTextureCube:rn}};function Wa(K){return!!K&&typeof K=="object"&&Array.isArray(K.shape)&&Array.isArray(K.stride)&&typeof K.offset=="number"&&K.shape.length===K.stride.length&&(Array.isArray(K.data)||L(K.data))}var Da=function(K){return Object.keys(K).map(function(Pe){return K[Pe]})},ku={shape:Fu,flatten:Rd};function Lu(K,Pe,ze){for(var _t=0;_t<Pe;++_t)ze[_t]=K[_t]}function Gu(K,Pe,ze,_t){for(var pt=0,Ct=0;Ct<Pe;++Ct)for(var It=K[Ct],en=0;en<ze;++en)_t[pt++]=It[en]}function Id(K,Pe,ze,_t,pt,Ct){for(var It=Ct,en=0;en<Pe;++en)for(var un=K[en],hn=0;hn<ze;++hn)for(var rn=un[hn],on=0;on<_t;++on)pt[It++]=rn[on]}function wc(K,Pe,ze,_t,pt){for(var Ct=1,It=ze+1;It<Pe.length;++It)Ct*=Pe[It];var en=Pe[ze];if(Pe.length-ze===4){var un=Pe[ze+1],hn=Pe[ze+2],rn=Pe[ze+3];for(It=0;It<en;++It)Id(K[It],un,hn,rn,_t,pt),pt+=Ct}else for(It=0;It<en;++It)wc(K[It],Pe,ze+1,_t,pt),pt+=Ct}function Rd(K,Pe,ze,_t){var pt=1;if(Pe.length)for(var Ct=0;Ct<Pe.length;++Ct)pt*=Pe[Ct];else pt=0;var It=_t||Do.allocType(ze,pt);switch(Pe.length){case 0:break;case 1:Lu(K,Pe[0],It);break;case 2:Gu(K,Pe[0],Pe[1],It);break;case 3:Id(K,Pe[0],Pe[1],Pe[2],It,0);break;default:wc(K,Pe,0,It,0)}return It}function Fu(K){for(var Pe=[],ze=K;ze.length;ze=ze[0])Pe.push(ze.length);return Pe}var Xa={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},_f=5120,Af=5122,xg=5124,Ep=5121,Sp=5123,kd=5125,Cg=5126,Tf=5126,Ws={int8:_f,int16:Af,int32:xg,uint8:Ep,uint16:Sp,uint32:kd,float:Cg,float32:Tf},ol=35048,Bu=35040,Dl={dynamic:ol,stream:Bu,static:35044},Sh=ku.flatten,ga=ku.shape,sl=35044,oo=35040,ho=5121,Ld=5126,Nl=[];Nl[5120]=1,Nl[5122]=2,Nl[5124]=4,Nl[5121]=1,Nl[5123]=2,Nl[5125]=4,Nl[5126]=4;function eu(K){return Xa[Object.prototype.toString.call(K)]|0}function _h(K,Pe){for(var ze=0;ze<Pe.length;++ze)K[ze]=Pe[ze]}function al(K,Pe,ze,_t,pt,Ct,It){for(var en=0,un=0;un<ze;++un)for(var hn=0;hn<_t;++hn)K[en++]=Pe[pt*un+Ct*hn+It]}function Ah(K,Pe,ze,_t){var pt=0,Ct={};function It(ft){this.id=pt++,this.buffer=K.createBuffer(),this.type=ft,this.usage=sl,this.byteLength=0,this.dimension=1,this.dtype=ho,this.persistentData=null,ze.profile&&(this.stats={size:0})}It.prototype.bind=function(){K.bindBuffer(this.type,this.buffer)},It.prototype.destroy=function(){On(this)};var en=[];function un(ft,Rt){var fn=en.pop();return fn||(fn=new It(ft)),fn.bind(),on(fn,Rt,oo,0,1,!1),fn}function hn(ft){en.push(ft)}function rn(ft,Rt,fn){ft.byteLength=Rt.byteLength,K.bufferData(ft.type,Rt,fn)}function on(ft,Rt,fn,Vn,tn,zn){var Wt;if(ft.usage=fn,Array.isArray(Rt)){if(ft.dtype=Vn||Ld,Rt.length>0){var An;if(Array.isArray(Rt[0])){Wt=ga(Rt);for(var nn=1,_n=1;_n<Wt.length;++_n)nn*=Wt[_n];ft.dimension=nn,An=Sh(Rt,Wt,ft.dtype),rn(ft,An,fn),zn?ft.persistentData=An:Do.freeType(An)}else if(typeof Rt[0]=="number"){ft.dimension=tn;var dr=Do.allocType(ft.dtype,Rt.length);_h(dr,Rt),rn(ft,dr,fn),zn?ft.persistentData=dr:Do.freeType(dr)}else L(Rt[0])?(ft.dimension=Rt[0].length,ft.dtype=Vn||eu(Rt[0])||Ld,An=Sh(Rt,[Rt.length,Rt[0].length],ft.dtype),rn(ft,An,fn),zn?ft.persistentData=An:Do.freeType(An)):Oe.raise("invalid buffer data")}}else if(L(Rt))ft.dtype=Vn||eu(Rt),ft.dimension=tn,rn(ft,Rt,fn),zn&&(ft.persistentData=new Uint8Array(new Uint8Array(Rt.buffer)));else if(Wa(Rt)){Wt=Rt.shape;var Pr=Rt.stride,Tn=Rt.offset,mn=0,qt=0,Cr=0,Fr=0;Wt.length===1?(mn=Wt[0],qt=1,Cr=Pr[0],Fr=0):Wt.length===2?(mn=Wt[0],qt=Wt[1],Cr=Pr[0],Fr=Pr[1]):Oe.raise("invalid shape"),ft.dtype=Vn||eu(Rt.data)||Ld,ft.dimension=qt;var qn=Do.allocType(ft.dtype,mn*qt);al(qn,Rt.data,mn,qt,Cr,Fr,Tn),rn(ft,qn,fn),zn?ft.persistentData=qn:Do.freeType(qn)}else Rt instanceof ArrayBuffer?(ft.dtype=ho,ft.dimension=tn,rn(ft,Rt,fn),zn&&(ft.persistentData=new Uint8Array(new Uint8Array(Rt)))):Oe.raise("invalid buffer data")}function On(ft){Pe.bufferCount--,_t(ft);var Rt=ft.buffer;Oe(Rt,"buffer must not be deleted already"),K.deleteBuffer(Rt),ft.buffer=null,delete Ct[ft.id]}function cn(ft,Rt,fn,Vn){Pe.bufferCount++;var tn=new It(Rt);Ct[tn.id]=tn;function zn(nn){var _n=sl,dr=null,Pr=0,Tn=0,mn=1;return Array.isArray(nn)||L(nn)||Wa(nn)||nn instanceof ArrayBuffer?dr=nn:typeof nn=="number"?Pr=nn|0:nn&&(Oe.type(nn,"object","buffer arguments must be an object, a number or an array"),"data"in nn&&(Oe(dr===null||Array.isArray(dr)||L(dr)||Wa(dr),"invalid data for buffer"),dr=nn.data),"usage"in nn&&(Oe.parameter(nn.usage,Dl,"invalid buffer usage"),_n=Dl[nn.usage]),"type"in nn&&(Oe.parameter(nn.type,Ws,"invalid buffer type"),Tn=Ws[nn.type]),"dimension"in nn&&(Oe.type(nn.dimension,"number","invalid dimension"),mn=nn.dimension|0),"length"in nn&&(Oe.nni(Pr,"buffer length must be a nonnegative integer"),Pr=nn.length|0)),tn.bind(),dr?on(tn,dr,_n,Tn,mn,Vn):(Pr&&K.bufferData(tn.type,Pr,_n),tn.dtype=Tn||ho,tn.usage=_n,tn.dimension=mn,tn.byteLength=Pr),ze.profile&&(tn.stats.size=tn.byteLength*Nl[tn.dtype]),zn}function Wt(nn,_n){Oe(_n+nn.byteLength<=tn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+nn.byteLength+" starting from offset "+_n+" to a buffer of size "+tn.byteLength),K.bufferSubData(tn.type,_n,nn)}function An(nn,_n){var dr=(_n||0)|0,Pr;if(tn.bind(),L(nn)||nn instanceof ArrayBuffer)Wt(nn,dr);else if(Array.isArray(nn)){if(nn.length>0)if(typeof nn[0]=="number"){var Tn=Do.allocType(tn.dtype,nn.length);_h(Tn,nn),Wt(Tn,dr),Do.freeType(Tn)}else if(Array.isArray(nn[0])||L(nn[0])){Pr=ga(nn);var mn=Sh(nn,Pr,tn.dtype);Wt(mn,dr),Do.freeType(mn)}else Oe.raise("invalid buffer data")}else if(Wa(nn)){Pr=nn.shape;var qt=nn.stride,Cr=0,Fr=0,qn=0,si=0;Pr.length===1?(Cr=Pr[0],Fr=1,qn=qt[0],si=0):Pr.length===2?(Cr=Pr[0],Fr=Pr[1],qn=qt[0],si=qt[1]):Oe.raise("invalid shape");var Dr=Array.isArray(nn.data)?tn.dtype:eu(nn.data),Wr=Do.allocType(Dr,Cr*Fr);al(Wr,nn.data,Cr,Fr,qn,si,nn.offset),Wt(Wr,dr),Do.freeType(Wr)}else Oe.raise("invalid data for buffer subdata");return zn}return fn||zn(ft),zn._reglType="buffer",zn._buffer=tn,zn.subdata=An,ze.profile&&(zn.stats=tn.stats),zn.destroy=function(){On(tn)},zn}function wn(){Da(Ct).forEach(function(ft){ft.buffer=K.createBuffer(),K.bindBuffer(ft.type,ft.buffer),K.bufferData(ft.type,ft.persistentData||ft.byteLength,ft.usage)})}return ze.profile&&(Pe.getTotalBufferSize=function(){var ft=0;return Object.keys(Ct).forEach(function(Rt){ft+=Ct[Rt].stats.size}),ft}),{create:cn,createStream:un,destroyStream:hn,clear:function(){Da(Ct).forEach(On),en.forEach(On)},getBuffer:function(ft){return ft&&ft._buffer instanceof It?ft._buffer:null},restore:wn,_initBuffer:on}}var _p=0,zu=0,S=1,I=1,U=4,W=4,se={points:_p,point:zu,lines:S,line:I,triangles:U,triangle:W,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},le=0,Ce=1,Ze=4,qe=5120,mt=5121,zt=5122,vn=5123,Nt=5124,$t=5125,rr=34963,oi=35040,br=35044;function fo(K,Pe,ze,_t){var pt={},Ct=0,It={uint8:mt,uint16:vn};Pe.oes_element_index_uint&&(It.uint32=$t);function en(wn){this.id=Ct++,pt[this.id]=this,this.buffer=wn,this.primType=Ze,this.vertCount=0,this.type=0}en.prototype.bind=function(){this.buffer.bind()};var un=[];function hn(wn){var ft=un.pop();return ft||(ft=new en(ze.create(null,rr,!0,!1)._buffer)),on(ft,wn,oi,-1,-1,0,0),ft}function rn(wn){un.push(wn)}function on(wn,ft,Rt,fn,Vn,tn,zn){wn.buffer.bind();var Wt;if(ft){var An=zn;!zn&&(!L(ft)||Wa(ft)&&!L(ft.data))&&(An=Pe.oes_element_index_uint?$t:vn),ze._initBuffer(wn.buffer,ft,Rt,An,3)}else K.bufferData(rr,tn,Rt),wn.buffer.dtype=Wt||mt,wn.buffer.usage=Rt,wn.buffer.dimension=3,wn.buffer.byteLength=tn;if(Wt=zn,!zn){switch(wn.buffer.dtype){case mt:case qe:Wt=mt;break;case vn:case zt:Wt=vn;break;case $t:case Nt:Wt=$t;break;default:Oe.raise("unsupported type for element array")}wn.buffer.dtype=Wt}wn.type=Wt,Oe(Wt!==$t||!!Pe.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var nn=Vn;nn<0&&(nn=wn.buffer.byteLength,Wt===vn?nn>>=1:Wt===$t&&(nn>>=2)),wn.vertCount=nn;var _n=fn;if(fn<0){_n=Ze;var dr=wn.buffer.dimension;dr===1&&(_n=le),dr===2&&(_n=Ce),dr===3&&(_n=Ze)}wn.primType=_n}function On(wn){_t.elementsCount--,Oe(wn.buffer!==null,"must not double destroy elements"),delete pt[wn.id],wn.buffer.destroy(),wn.buffer=null}function cn(wn,ft){var Rt=ze.create(null,rr,!0),fn=new en(Rt._buffer);_t.elementsCount++;function Vn(tn){if(!tn)Rt(),fn.primType=Ze,fn.vertCount=0,fn.type=mt;else if(typeof tn=="number")Rt(tn),fn.primType=Ze,fn.vertCount=tn|0,fn.type=mt;else{var zn=null,Wt=br,An=-1,nn=-1,_n=0,dr=0;Array.isArray(tn)||L(tn)||Wa(tn)?zn=tn:(Oe.type(tn,"object","invalid arguments for elements"),"data"in tn&&(zn=tn.data,Oe(Array.isArray(zn)||L(zn)||Wa(zn),"invalid data for element buffer")),"usage"in tn&&(Oe.parameter(tn.usage,Dl,"invalid element buffer usage"),Wt=Dl[tn.usage]),"primitive"in tn&&(Oe.parameter(tn.primitive,se,"invalid element buffer primitive"),An=se[tn.primitive]),"count"in tn&&(Oe(typeof tn.count=="number"&&tn.count>=0,"invalid vertex count for elements"),nn=tn.count|0),"type"in tn&&(Oe.parameter(tn.type,It,"invalid buffer type"),dr=It[tn.type]),"length"in tn?_n=tn.length|0:(_n=nn,dr===vn||dr===zt?_n*=2:(dr===$t||dr===Nt)&&(_n*=4))),on(fn,zn,Wt,An,nn,_n,dr)}return Vn}return Vn(wn),Vn._reglType="elements",Vn._elements=fn,Vn.subdata=function(tn,zn){return Rt.subdata(tn,zn),Vn},Vn.destroy=function(){On(fn)},Vn}return{create:cn,createStream:hn,destroyStream:rn,getElements:function(wn){return typeof wn=="function"&&wn._elements instanceof en?wn._elements:null},clear:function(){Da(pt).forEach(On)}}}var Lo=new Float32Array(1),va=new Uint32Array(Lo.buffer),Gr=5123;function Ir(K){for(var Pe=Do.allocType(Gr,K.length),ze=0;ze<K.length;++ze)if(isNaN(K[ze]))Pe[ze]=65535;else if(K[ze]===1/0)Pe[ze]=31744;else if(K[ze]===-1/0)Pe[ze]=64512;else{Lo[0]=K[ze];var _t=va[0],pt=_t>>>31<<15,Ct=(_t<<1>>>24)-127,It=_t>>13&(1<<10)-1;if(Ct<-24)Pe[ze]=pt;else if(Ct<-14){var en=-14-Ct;Pe[ze]=pt+(It+(1<<10)>>en)}else Ct>15?Pe[ze]=pt+31744:Pe[ze]=pt+(Ct+15<<10)+It}return Pe}function Ei(K){return Array.isArray(K)||L(K)}var Di=function(K){return!(K&K-1)&&!!K},Go=34467,ma=3553,tu=34067,Xs=34069,Na=6408,Fo=6406,es=6407,uc=6409,Zs=6410,Ec=32854,Bo=32855,Fs=36194,Za=32819,Ui=32820,Bs=33635,Sc=34042,dc=6402,cl=34041,ts=35904,Uu=35906,Cs=36193,nu=33776,zo=33777,Vu=33778,Il=33779,Mf=35986,Th=35987,_c=34798,Ya=35840,ll=35841,ju=35842,ya=35843,Ka=36196,ba=5121,ru=5123,Hu=5125,Rl=5126,po=10242,qa=10243,Wo=10497,ns=33071,aa=33648,iu=10240,Gd=10241,Mh=9728,Of=9729,hc=9984,dt=9985,Qt=9986,Bt=9987,ir=33170,$r=4352,Ki=4353,bo=4354,ro=34046,Fd=3317,wg=37440,Me=37441,Ye=37443,lt=37444,Tt=33984,yt=[hc,Qt,dt,Bt],an=[0,uc,Zs,es,Na],Ut={};Ut[uc]=Ut[Fo]=Ut[dc]=1,Ut[cl]=Ut[Zs]=2,Ut[es]=Ut[ts]=3,Ut[Na]=Ut[Uu]=4;function Un(K){return"[object "+K+"]"}var Kn=Un("HTMLCanvasElement"),Er=Un("OffscreenCanvas"),xr=Un("CanvasRenderingContext2D"),Or=Un("ImageBitmap"),vi=Un("HTMLImageElement"),ai=Un("HTMLVideoElement"),vr=Object.keys(Xa).concat([Kn,Er,xr,Or,vi,ai]),io=[];io[ba]=1,io[Rl]=4,io[Cs]=2,io[ru]=2,io[Hu]=4;var Vi=[];Vi[Ec]=2,Vi[Bo]=2,Vi[Fs]=2,Vi[cl]=4,Vi[nu]=.5,Vi[zo]=.5,Vi[Vu]=1,Vi[Il]=1,Vi[Mf]=.5,Vi[Th]=1,Vi[_c]=1,Vi[Ya]=.5,Vi[ll]=.25,Vi[ju]=.5,Vi[ya]=.25,Vi[Ka]=.5;function ca(K){return Array.isArray(K)&&(K.length===0||typeof K[0]=="number")}function No(K){if(!Array.isArray(K))return!1;var Pe=K.length;return!(Pe===0||!Ei(K[0]))}function fc(K){return Object.prototype.toString.call(K)}function ul(K){return fc(K)===Kn}function xa(K){return fc(K)===Er}function Ja(K){return fc(K)===xr}function Ia(K){return fc(K)===Or}function dl(K){return fc(K)===vi}function Bd(K){return fc(K)===ai}function ci(K){if(!K)return!1;var Pe=fc(K);return vr.indexOf(Pe)>=0?!0:ca(K)||No(K)||Wa(K)}function ui(K){return Xa[Object.prototype.toString.call(K)]|0}function Oh(K,Pe){var ze=Pe.length;switch(K.type){case ba:case ru:case Hu:case Rl:var _t=Do.allocType(K.type,ze);_t.set(Pe),K.data=_t;break;case Cs:K.data=Ir(Pe);break;default:Oe.raise("unsupported texture type, must specify a typed array")}}function $u(K,Pe){return Do.allocType(K.type===Cs?Rl:K.type,Pe)}function Ph(K,Pe){K.type===Cs?(K.data=Ir(Pe),Do.freeType(Pe)):K.data=Pe}function Eg(K,Pe,ze,_t,pt,Ct){for(var It=K.width,en=K.height,un=K.channels,hn=It*en*un,rn=$u(K,hn),on=0,On=0;On<en;++On)for(var cn=0;cn<It;++cn)for(var wn=0;wn<un;++wn)rn[on++]=Pe[ze*cn+_t*On+pt*wn+Ct];Ph(K,rn)}function Pf(K,Pe,ze,_t,pt,Ct){var It;if(typeof Vi[K]<"u"?It=Vi[K]:It=Ut[K]*io[Pe],Ct&&(It*=6),pt){for(var en=0,un=ze;un>=1;)en+=It*un*un,un/=2;return en}else return It*ze*_t}function zd(K,Pe,ze,_t,pt,Ct,It){var en={"don't care":$r,"dont care":$r,nice:bo,fast:Ki},un={repeat:Wo,clamp:ns,mirror:aa},hn={nearest:Mh,linear:Of},rn=M({mipmap:Bt,"nearest mipmap nearest":hc,"linear mipmap nearest":dt,"nearest mipmap linear":Qt,"linear mipmap linear":Bt},hn),on={none:0,browser:lt},On={uint8:ba,rgba4:Za,rgb565:Bs,"rgb5 a1":Ui},cn={alpha:Fo,luminance:uc,"luminance alpha":Zs,rgb:es,rgba:Na,rgba4:Ec,"rgb5 a1":Bo,rgb565:Fs},wn={};Pe.ext_srgb&&(cn.srgb=ts,cn.srgba=Uu),Pe.oes_texture_float&&(On.float32=On.float=Rl),Pe.oes_texture_half_float&&(On.float16=On["half float"]=Cs),Pe.webgl_depth_texture&&(M(cn,{depth:dc,"depth stencil":cl}),M(On,{uint16:ru,uint32:Hu,"depth stencil":Sc})),Pe.webgl_compressed_texture_s3tc&&M(wn,{"rgb s3tc dxt1":nu,"rgba s3tc dxt1":zo,"rgba s3tc dxt3":Vu,"rgba s3tc dxt5":Il}),Pe.webgl_compressed_texture_atc&&M(wn,{"rgb atc":Mf,"rgba atc explicit alpha":Th,"rgba atc interpolated alpha":_c}),Pe.webgl_compressed_texture_pvrtc&&M(wn,{"rgb pvrtc 4bppv1":Ya,"rgb pvrtc 2bppv1":ll,"rgba pvrtc 4bppv1":ju,"rgba pvrtc 2bppv1":ya}),Pe.webgl_compressed_texture_etc1&&(wn["rgb etc1"]=Ka);var ft=Array.prototype.slice.call(K.getParameter(Go));Object.keys(wn).forEach(function(Be){var Dt=wn[Be];ft.indexOf(Dt)>=0&&(cn[Be]=Dt)});var Rt=Object.keys(cn);ze.textureFormats=Rt;var fn=[];Object.keys(cn).forEach(function(Be){var Dt=cn[Be];fn[Dt]=Be});var Vn=[];Object.keys(On).forEach(function(Be){var Dt=On[Be];Vn[Dt]=Be});var tn=[];Object.keys(hn).forEach(function(Be){var Dt=hn[Be];tn[Dt]=Be});var zn=[];Object.keys(rn).forEach(function(Be){var Dt=rn[Be];zn[Dt]=Be});var Wt=[];Object.keys(un).forEach(function(Be){var Dt=un[Be];Wt[Dt]=Be});var An=Rt.reduce(function(Be,Dt){var Et=cn[Dt];return Et===uc||Et===Fo||Et===uc||Et===Zs||Et===dc||Et===cl||Pe.ext_srgb&&(Et===ts||Et===Uu)?Be[Et]=Et:Et===Bo||Dt.indexOf("rgba")>=0?Be[Et]=Na:Be[Et]=es,Be},{});function nn(){this.internalformat=Na,this.format=Na,this.type=ba,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=lt,this.width=0,this.height=0,this.channels=0}function _n(Be,Dt){Be.internalformat=Dt.internalformat,Be.format=Dt.format,Be.type=Dt.type,Be.compressed=Dt.compressed,Be.premultiplyAlpha=Dt.premultiplyAlpha,Be.flipY=Dt.flipY,Be.unpackAlignment=Dt.unpackAlignment,Be.colorSpace=Dt.colorSpace,Be.width=Dt.width,Be.height=Dt.height,Be.channels=Dt.channels}function dr(Be,Dt){if(!(typeof Dt!="object"||!Dt)){if("premultiplyAlpha"in Dt&&(Oe.type(Dt.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Be.premultiplyAlpha=Dt.premultiplyAlpha),"flipY"in Dt&&(Oe.type(Dt.flipY,"boolean","invalid texture flip"),Be.flipY=Dt.flipY),"alignment"in Dt&&(Oe.oneOf(Dt.alignment,[1,2,4,8],"invalid texture unpack alignment"),Be.unpackAlignment=Dt.alignment),"colorSpace"in Dt&&(Oe.parameter(Dt.colorSpace,on,"invalid colorSpace"),Be.colorSpace=on[Dt.colorSpace]),"type"in Dt){var Et=Dt.type;Oe(Pe.oes_texture_float||!(Et==="float"||Et==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Oe(Pe.oes_texture_half_float||!(Et==="half float"||Et==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Oe(Pe.webgl_depth_texture||!(Et==="uint16"||Et==="uint32"||Et==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Oe.parameter(Et,On,"invalid texture type"),Be.type=On[Et]}var $n=Be.width,ti=Be.height,Ge=Be.channels,we=!1;"shape"in Dt?(Oe(Array.isArray(Dt.shape)&&Dt.shape.length>=2,"shape must be an array"),$n=Dt.shape[0],ti=Dt.shape[1],Dt.shape.length===3&&(Ge=Dt.shape[2],Oe(Ge>0&&Ge<=4,"invalid number of channels"),we=!0),Oe($n>=0&&$n<=ze.maxTextureSize,"invalid width"),Oe(ti>=0&&ti<=ze.maxTextureSize,"invalid height")):("radius"in Dt&&($n=ti=Dt.radius,Oe($n>=0&&$n<=ze.maxTextureSize,"invalid radius")),"width"in Dt&&($n=Dt.width,Oe($n>=0&&$n<=ze.maxTextureSize,"invalid width")),"height"in Dt&&(ti=Dt.height,Oe(ti>=0&&ti<=ze.maxTextureSize,"invalid height")),"channels"in Dt&&(Ge=Dt.channels,Oe(Ge>0&&Ge<=4,"invalid number of channels"),we=!0)),Be.width=$n|0,Be.height=ti|0,Be.channels=Ge|0;var We=!1;if("format"in Dt){var ut=Dt.format;Oe(Pe.webgl_depth_texture||!(ut==="depth"||ut==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Oe.parameter(ut,cn,"invalid texture format");var ht=Be.internalformat=cn[ut];Be.format=An[ht],ut in On&&("type"in Dt||(Be.type=On[ut])),ut in wn&&(Be.compressed=!0),We=!0}!we&&We?Be.channels=Ut[Be.format]:we&&!We?Be.channels!==an[Be.format]&&(Be.format=Be.internalformat=an[Be.channels]):We&&we&&Oe(Be.channels===Ut[Be.format],"number of channels inconsistent with specified format")}}function Pr(Be){K.pixelStorei(wg,Be.flipY),K.pixelStorei(Me,Be.premultiplyAlpha),K.pixelStorei(Ye,Be.colorSpace),K.pixelStorei(Fd,Be.unpackAlignment)}function Tn(){nn.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function mn(Be,Dt){var Et=null;if(ci(Dt)?Et=Dt:Dt&&(Oe.type(Dt,"object","invalid pixel data type"),dr(Be,Dt),"x"in Dt&&(Be.xOffset=Dt.x|0),"y"in Dt&&(Be.yOffset=Dt.y|0),ci(Dt.data)&&(Et=Dt.data)),Oe(!Be.compressed||Et instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Dt.copy){Oe(!Et,"can not specify copy and data field for the same texture");var $n=pt.viewportWidth,ti=pt.viewportHeight;Be.width=Be.width||$n-Be.xOffset,Be.height=Be.height||ti-Be.yOffset,Be.needsCopy=!0,Oe(Be.xOffset>=0&&Be.xOffset<$n&&Be.yOffset>=0&&Be.yOffset<ti&&Be.width>0&&Be.width<=$n&&Be.height>0&&Be.height<=ti,"copy texture read out of bounds")}else if(!Et)Be.width=Be.width||1,Be.height=Be.height||1,Be.channels=Be.channels||4;else if(L(Et))Be.channels=Be.channels||4,Be.data=Et,!("type"in Dt)&&Be.type===ba&&(Be.type=ui(Et));else if(ca(Et))Be.channels=Be.channels||4,Oh(Be,Et),Be.alignment=1,Be.needsFree=!0;else if(Wa(Et)){var Ge=Et.data;!Array.isArray(Ge)&&Be.type===ba&&(Be.type=ui(Ge));var we=Et.shape,We=Et.stride,ut,ht,Je,Xe,tt,Le;we.length===3?(Je=we[2],Le=We[2]):(Oe(we.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Je=1,Le=1),ut=we[0],ht=we[1],Xe=We[0],tt=We[1],Be.alignment=1,Be.width=ut,Be.height=ht,Be.channels=Je,Be.format=Be.internalformat=an[Je],Be.needsFree=!0,Eg(Be,Ge,Xe,tt,Le,Et.offset)}else if(ul(Et)||xa(Et)||Ja(Et))ul(Et)||xa(Et)?Be.element=Et:Be.element=Et.canvas,Be.width=Be.element.width,Be.height=Be.element.height,Be.channels=4;else if(Ia(Et))Be.element=Et,Be.width=Et.width,Be.height=Et.height,Be.channels=4;else if(dl(Et))Be.element=Et,Be.width=Et.naturalWidth,Be.height=Et.naturalHeight,Be.channels=4;else if(Bd(Et))Be.element=Et,Be.width=Et.videoWidth,Be.height=Et.videoHeight,Be.channels=4;else if(No(Et)){var He=Be.width||Et[0].length,Ie=Be.height||Et.length,rt=Be.channels;Ei(Et[0][0])?rt=rt||Et[0][0].length:rt=rt||1;for(var vt=ku.shape(Et),Vt=1,Xt=0;Xt<vt.length;++Xt)Vt*=vt[Xt];var Lt=$u(Be,Vt);ku.flatten(Et,vt,"",Lt),Ph(Be,Lt),Be.alignment=1,Be.width=He,Be.height=Ie,Be.channels=rt,Be.format=Be.internalformat=an[rt],Be.needsFree=!0}Be.type===Rl?Oe(ze.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Be.type===Cs&&Oe(ze.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function qt(Be,Dt,Et){var $n=Be.element,ti=Be.data,Ge=Be.internalformat,we=Be.format,We=Be.type,ut=Be.width,ht=Be.height;Pr(Be),$n?K.texImage2D(Dt,Et,we,we,We,$n):Be.compressed?K.compressedTexImage2D(Dt,Et,Ge,ut,ht,0,ti):Be.needsCopy?(_t(),K.copyTexImage2D(Dt,Et,we,Be.xOffset,Be.yOffset,ut,ht,0)):K.texImage2D(Dt,Et,we,ut,ht,0,we,We,ti||null)}function Cr(Be,Dt,Et,$n,ti){var Ge=Be.element,we=Be.data,We=Be.internalformat,ut=Be.format,ht=Be.type,Je=Be.width,Xe=Be.height;Pr(Be),Ge?K.texSubImage2D(Dt,ti,Et,$n,ut,ht,Ge):Be.compressed?K.compressedTexSubImage2D(Dt,ti,Et,$n,We,Je,Xe,we):Be.needsCopy?(_t(),K.copyTexSubImage2D(Dt,ti,Et,$n,Be.xOffset,Be.yOffset,Je,Xe)):K.texSubImage2D(Dt,ti,Et,$n,Je,Xe,ut,ht,we)}var Fr=[];function qn(){return Fr.pop()||new Tn}function si(Be){Be.needsFree&&Do.freeType(Be.data),Tn.call(Be),Fr.push(Be)}function Dr(){nn.call(this),this.genMipmaps=!1,this.mipmapHint=$r,this.mipmask=0,this.images=Array(16)}function Wr(Be,Dt,Et){var $n=Be.images[0]=qn();Be.mipmask=1,$n.width=Be.width=Dt,$n.height=Be.height=Et,$n.channels=Be.channels=4}function Pi(Be,Dt){var Et=null;if(ci(Dt))Et=Be.images[0]=qn(),_n(Et,Be),mn(Et,Dt),Be.mipmask=1;else if(dr(Be,Dt),Array.isArray(Dt.mipmap))for(var $n=Dt.mipmap,ti=0;ti<$n.length;++ti)Et=Be.images[ti]=qn(),_n(Et,Be),Et.width>>=ti,Et.height>>=ti,mn(Et,$n[ti]),Be.mipmask|=1<<ti;else Et=Be.images[0]=qn(),_n(Et,Be),mn(Et,Dt),Be.mipmask=1;_n(Be,Be.images[0]),Be.compressed&&(Be.internalformat===nu||Be.internalformat===zo||Be.internalformat===Vu||Be.internalformat===Il)&&Oe(Be.width%4===0&&Be.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Xo(Be,Dt){for(var Et=Be.images,$n=0;$n<Et.length;++$n){if(!Et[$n])return;qt(Et[$n],Dt,$n)}}var fs=[];function Kr(){var Be=fs.pop()||new Dr;nn.call(Be),Be.mipmask=0;for(var Dt=0;Dt<16;++Dt)Be.images[Dt]=null;return Be}function ps(Be){for(var Dt=Be.images,Et=0;Et<Dt.length;++Et)Dt[Et]&&si(Dt[Et]),Dt[Et]=null;fs.push(Be)}function xo(){this.minFilter=Mh,this.magFilter=Mh,this.wrapS=ns,this.wrapT=ns,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=$r}function gs(Be,Dt){if("min"in Dt){var Et=Dt.min;Oe.parameter(Et,rn),Be.minFilter=rn[Et],yt.indexOf(Be.minFilter)>=0&&!("faces"in Dt)&&(Be.genMipmaps=!0)}if("mag"in Dt){var $n=Dt.mag;Oe.parameter($n,hn),Be.magFilter=hn[$n]}var ti=Be.wrapS,Ge=Be.wrapT;if("wrap"in Dt){var we=Dt.wrap;typeof we=="string"?(Oe.parameter(we,un),ti=Ge=un[we]):Array.isArray(we)&&(Oe.parameter(we[0],un),Oe.parameter(we[1],un),ti=un[we[0]],Ge=un[we[1]])}else{if("wrapS"in Dt){var We=Dt.wrapS;Oe.parameter(We,un),ti=un[We]}if("wrapT"in Dt){var ut=Dt.wrapT;Oe.parameter(ut,un),Ge=un[ut]}}if(Be.wrapS=ti,Be.wrapT=Ge,"anisotropic"in Dt){var ht=Dt.anisotropic;Oe(typeof ht=="number"&&ht>=1&&ht<=ze.maxAnisotropic,"aniso samples must be between 1 and "),Be.anisotropic=Dt.anisotropic}if("mipmap"in Dt){var Je=!1;switch(typeof Dt.mipmap){case"string":Oe.parameter(Dt.mipmap,en,"invalid mipmap hint"),Be.mipmapHint=en[Dt.mipmap],Be.genMipmaps=!0,Je=!0;break;case"boolean":Je=Be.genMipmaps=Dt.mipmap;break;case"object":Oe(Array.isArray(Dt.mipmap),"invalid mipmap type"),Be.genMipmaps=!1,Je=!0;break;default:Oe.raise("invalid mipmap type")}Je&&!("min"in Dt)&&(Be.minFilter=hc)}}function Co(Be,Dt){K.texParameteri(Dt,Gd,Be.minFilter),K.texParameteri(Dt,iu,Be.magFilter),K.texParameteri(Dt,po,Be.wrapS),K.texParameteri(Dt,qa,Be.wrapT),Pe.ext_texture_filter_anisotropic&&K.texParameteri(Dt,ro,Be.anisotropic),Be.genMipmaps&&(K.hint(ir,Be.mipmapHint),K.generateMipmap(Dt))}var Es=0,Ao={},is=ze.maxTextureUnits,Zo=Array(is).map(function(){return null});function Br(Be){nn.call(this),this.mipmask=0,this.internalformat=Na,this.id=Es++,this.refCount=1,this.target=Be,this.texture=K.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new xo,It.profile&&(this.stats={size:0})}function Vo(Be){K.activeTexture(Tt),K.bindTexture(Be.target,Be.texture)}function Ii(){var Be=Zo[0];Be?K.bindTexture(Be.target,Be.texture):K.bindTexture(ma,null)}function mr(Be){var Dt=Be.texture;Oe(Dt,"must not double destroy texture");var Et=Be.unit,$n=Be.target;Et>=0&&(K.activeTexture(Tt+Et),K.bindTexture($n,null),Zo[Et]=null),K.deleteTexture(Dt),Be.texture=null,Be.params=null,Be.pixels=null,Be.refCount=0,delete Ao[Be.id],Ct.textureCount--}M(Br.prototype,{bind:function(){var Be=this;Be.bindCount+=1;var Dt=Be.unit;if(Dt<0){for(var Et=0;Et<is;++Et){var $n=Zo[Et];if($n){if($n.bindCount>0)continue;$n.unit=-1}Zo[Et]=Be,Dt=Et;break}Dt>=is&&Oe.raise("insufficient number of texture units"),It.profile&&Ct.maxTextureUnits<Dt+1&&(Ct.maxTextureUnits=Dt+1),Be.unit=Dt,K.activeTexture(Tt+Dt),K.bindTexture(Be.target,Be.texture)}return Dt},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&mr(this)}});function li(Be,Dt){var Et=new Br(ma);Ao[Et.id]=Et,Ct.textureCount++;function $n(we,We){var ut=Et.texInfo;xo.call(ut);var ht=Kr();return typeof we=="number"?typeof We=="number"?Wr(ht,we|0,We|0):Wr(ht,we|0,we|0):we?(Oe.type(we,"object","invalid arguments to regl.texture"),gs(ut,we),Pi(ht,we)):Wr(ht,1,1),ut.genMipmaps&&(ht.mipmask=(ht.width<<1)-1),Et.mipmask=ht.mipmask,_n(Et,ht),Oe.texture2D(ut,ht,ze),Et.internalformat=ht.internalformat,$n.width=ht.width,$n.height=ht.height,Vo(Et),Xo(ht,ma),Co(ut,ma),Ii(),ps(ht),It.profile&&(Et.stats.size=Pf(Et.internalformat,Et.type,ht.width,ht.height,ut.genMipmaps,!1)),$n.format=fn[Et.internalformat],$n.type=Vn[Et.type],$n.mag=tn[ut.magFilter],$n.min=zn[ut.minFilter],$n.wrapS=Wt[ut.wrapS],$n.wrapT=Wt[ut.wrapT],$n}function ti(we,We,ut,ht){Oe(!!we,"must specify image data");var Je=We|0,Xe=ut|0,tt=ht|0,Le=qn();return _n(Le,Et),Le.width=0,Le.height=0,mn(Le,we),Le.width=Le.width||(Et.width>>tt)-Je,Le.height=Le.height||(Et.height>>tt)-Xe,Oe(Et.type===Le.type&&Et.format===Le.format&&Et.internalformat===Le.internalformat,"incompatible format for texture.subimage"),Oe(Je>=0&&Xe>=0&&Je+Le.width<=Et.width&&Xe+Le.height<=Et.height,"texture.subimage write out of bounds"),Oe(Et.mipmask&1<<tt,"missing mipmap data"),Oe(Le.data||Le.element||Le.needsCopy,"missing image data"),Vo(Et),Cr(Le,ma,Je,Xe,tt),Ii(),si(Le),$n}function Ge(we,We){var ut=we|0,ht=We|0||ut;if(ut===Et.width&&ht===Et.height)return $n;$n.width=Et.width=ut,$n.height=Et.height=ht,Vo(Et);for(var Je=0;Et.mipmask>>Je;++Je){var Xe=ut>>Je,tt=ht>>Je;if(!Xe||!tt)break;K.texImage2D(ma,Je,Et.format,Xe,tt,0,Et.format,Et.type,null)}return Ii(),It.profile&&(Et.stats.size=Pf(Et.internalformat,Et.type,ut,ht,!1,!1)),$n}return $n(Be,Dt),$n.subimage=ti,$n.resize=Ge,$n._reglType="texture2d",$n._texture=Et,It.profile&&($n.stats=Et.stats),$n.destroy=function(){Et.decRef()},$n}function Ci(Be,Dt,Et,$n,ti,Ge){var we=new Br(tu);Ao[we.id]=we,Ct.cubeCount++;var We=new Array(6);function ut(Xe,tt,Le,He,Ie,rt){var vt,Vt=we.texInfo;for(xo.call(Vt),vt=0;vt<6;++vt)We[vt]=Kr();if(typeof Xe=="number"||!Xe){var Xt=Xe|0||1;for(vt=0;vt<6;++vt)Wr(We[vt],Xt,Xt)}else if(typeof Xe=="object")if(tt)Pi(We[0],Xe),Pi(We[1],tt),Pi(We[2],Le),Pi(We[3],He),Pi(We[4],Ie),Pi(We[5],rt);else if(gs(Vt,Xe),dr(we,Xe),"faces"in Xe){var Lt=Xe.faces;for(Oe(Array.isArray(Lt)&&Lt.length===6,"cube faces must be a length 6 array"),vt=0;vt<6;++vt)Oe(typeof Lt[vt]=="object"&&!!Lt[vt],"invalid input for cube map face"),_n(We[vt],we),Pi(We[vt],Lt[vt])}else for(vt=0;vt<6;++vt)Pi(We[vt],Xe);else Oe.raise("invalid arguments to cube map");for(_n(we,We[0]),ze.npotTextureCube||Oe(Di(we.width)&&Di(we.height),"your browser does not support non power or two texture dimensions"),Vt.genMipmaps?we.mipmask=(We[0].width<<1)-1:we.mipmask=We[0].mipmask,Oe.textureCube(we,Vt,We,ze),we.internalformat=We[0].internalformat,ut.width=We[0].width,ut.height=We[0].height,Vo(we),vt=0;vt<6;++vt)Xo(We[vt],Xs+vt);for(Co(Vt,tu),Ii(),It.profile&&(we.stats.size=Pf(we.internalformat,we.type,ut.width,ut.height,Vt.genMipmaps,!0)),ut.format=fn[we.internalformat],ut.type=Vn[we.type],ut.mag=tn[Vt.magFilter],ut.min=zn[Vt.minFilter],ut.wrapS=Wt[Vt.wrapS],ut.wrapT=Wt[Vt.wrapT],vt=0;vt<6;++vt)ps(We[vt]);return ut}function ht(Xe,tt,Le,He,Ie){Oe(!!tt,"must specify image data"),Oe(typeof Xe=="number"&&Xe===(Xe|0)&&Xe>=0&&Xe<6,"invalid face");var rt=Le|0,vt=He|0,Vt=Ie|0,Xt=qn();return _n(Xt,we),Xt.width=0,Xt.height=0,mn(Xt,tt),Xt.width=Xt.width||(we.width>>Vt)-rt,Xt.height=Xt.height||(we.height>>Vt)-vt,Oe(we.type===Xt.type&&we.format===Xt.format&&we.internalformat===Xt.internalformat,"incompatible format for texture.subimage"),Oe(rt>=0&&vt>=0&&rt+Xt.width<=we.width&&vt+Xt.height<=we.height,"texture.subimage write out of bounds"),Oe(we.mipmask&1<<Vt,"missing mipmap data"),Oe(Xt.data||Xt.element||Xt.needsCopy,"missing image data"),Vo(we),Cr(Xt,Xs+Xe,rt,vt,Vt),Ii(),si(Xt),ut}function Je(Xe){var tt=Xe|0;if(tt!==we.width){ut.width=we.width=tt,ut.height=we.height=tt,Vo(we);for(var Le=0;Le<6;++Le)for(var He=0;we.mipmask>>He;++He)K.texImage2D(Xs+Le,He,we.format,tt>>He,tt>>He,0,we.format,we.type,null);return Ii(),It.profile&&(we.stats.size=Pf(we.internalformat,we.type,ut.width,ut.height,!1,!0)),ut}}return ut(Be,Dt,Et,$n,ti,Ge),ut.subimage=ht,ut.resize=Je,ut._reglType="textureCube",ut._texture=we,It.profile&&(ut.stats=we.stats),ut.destroy=function(){we.decRef()},ut}function vs(){for(var Be=0;Be<is;++Be)K.activeTexture(Tt+Be),K.bindTexture(ma,null),Zo[Be]=null;Da(Ao).forEach(mr),Ct.cubeCount=0,Ct.textureCount=0}It.profile&&(Ct.getTotalTextureSize=function(){var Be=0;return Object.keys(Ao).forEach(function(Dt){Be+=Ao[Dt].stats.size}),Be});function Hl(){for(var Be=0;Be<is;++Be){var Dt=Zo[Be];Dt&&(Dt.bindCount=0,Dt.unit=-1,Zo[Be]=null)}Da(Ao).forEach(function(Et){Et.texture=K.createTexture(),K.bindTexture(Et.target,Et.texture);for(var $n=0;$n<32;++$n)if((Et.mipmask&1<<$n)!==0)if(Et.target===ma)K.texImage2D(ma,$n,Et.internalformat,Et.width>>$n,Et.height>>$n,0,Et.internalformat,Et.type,null);else for(var ti=0;ti<6;++ti)K.texImage2D(Xs+ti,$n,Et.internalformat,Et.width>>$n,Et.height>>$n,0,Et.internalformat,Et.type,null);Co(Et.texInfo,Et.target)})}function sh(){for(var Be=0;Be<is;++Be){var Dt=Zo[Be];Dt&&(Dt.bindCount=0,Dt.unit=-1,Zo[Be]=null),K.activeTexture(Tt+Be),K.bindTexture(ma,null),K.bindTexture(tu,null)}}return{create2D:li,createCube:Ci,clear:vs,getTexture:function(Be){return null},restore:Hl,refresh:sh}}var pc=36161,us=32854,Os=32855,A0=36194,T0=33189,ou=36168,Ud=34041,Ap=35907,Ra=34836,Dh=34842,Ys=34843,Qa=[];Qa[us]=2,Qa[Os]=2,Qa[A0]=2,Qa[T0]=2,Qa[ou]=1,Qa[Ud]=4,Qa[Ap]=4,Qa[Ra]=16,Qa[Dh]=8,Qa[Ys]=6;function Vd(K,Pe,ze){return Qa[K]*Pe*ze}var Nh=function(K,Pe,ze,_t,pt){var Ct={rgba4:us,rgb565:A0,"rgb5 a1":Os,depth:T0,stencil:ou,"depth stencil":Ud};Pe.ext_srgb&&(Ct.srgba=Ap),Pe.ext_color_buffer_half_float&&(Ct.rgba16f=Dh,Ct.rgb16f=Ys),Pe.webgl_color_buffer_float&&(Ct.rgba32f=Ra);var It=[];Object.keys(Ct).forEach(function(cn){var wn=Ct[cn];It[wn]=cn});var en=0,un={};function hn(cn){this.id=en++,this.refCount=1,this.renderbuffer=cn,this.format=us,this.width=0,this.height=0,pt.profile&&(this.stats={size:0})}hn.prototype.decRef=function(){--this.refCount<=0&&rn(this)};function rn(cn){var wn=cn.renderbuffer;Oe(wn,"must not double destroy renderbuffer"),K.bindRenderbuffer(pc,null),K.deleteRenderbuffer(wn),cn.renderbuffer=null,cn.refCount=0,delete un[cn.id],_t.renderbufferCount--}function on(cn,wn){var ft=new hn(K.createRenderbuffer());un[ft.id]=ft,_t.renderbufferCount++;function Rt(Vn,tn){var zn=0,Wt=0,An=us;if(typeof Vn=="object"&&Vn){var nn=Vn;if("shape"in nn){var _n=nn.shape;Oe(Array.isArray(_n)&&_n.length>=2,"invalid renderbuffer shape"),zn=_n[0]|0,Wt=_n[1]|0}else"radius"in nn&&(zn=Wt=nn.radius|0),"width"in nn&&(zn=nn.width|0),"height"in nn&&(Wt=nn.height|0);"format"in nn&&(Oe.parameter(nn.format,Ct,"invalid renderbuffer format"),An=Ct[nn.format])}else typeof Vn=="number"?(zn=Vn|0,typeof tn=="number"?Wt=tn|0:Wt=zn):Vn?Oe.raise("invalid arguments to renderbuffer constructor"):zn=Wt=1;if(Oe(zn>0&&Wt>0&&zn<=ze.maxRenderbufferSize&&Wt<=ze.maxRenderbufferSize,"invalid renderbuffer size"),!(zn===ft.width&&Wt===ft.height&&An===ft.format))return Rt.width=ft.width=zn,Rt.height=ft.height=Wt,ft.format=An,K.bindRenderbuffer(pc,ft.renderbuffer),K.renderbufferStorage(pc,An,zn,Wt),Oe(K.getError()===0,"invalid render buffer format"),pt.profile&&(ft.stats.size=Vd(ft.format,ft.width,ft.height)),Rt.format=It[ft.format],Rt}function fn(Vn,tn){var zn=Vn|0,Wt=tn|0||zn;return zn===ft.width&&Wt===ft.height||(Oe(zn>0&&Wt>0&&zn<=ze.maxRenderbufferSize&&Wt<=ze.maxRenderbufferSize,"invalid renderbuffer size"),Rt.width=ft.width=zn,Rt.height=ft.height=Wt,K.bindRenderbuffer(pc,ft.renderbuffer),K.renderbufferStorage(pc,ft.format,zn,Wt),Oe(K.getError()===0,"invalid render buffer format"),pt.profile&&(ft.stats.size=Vd(ft.format,ft.width,ft.height))),Rt}return Rt(cn,wn),Rt.resize=fn,Rt._reglType="renderbuffer",Rt._renderbuffer=ft,pt.profile&&(Rt.stats=ft.stats),Rt.destroy=function(){ft.decRef()},Rt}pt.profile&&(_t.getTotalRenderbufferSize=function(){var cn=0;return Object.keys(un).forEach(function(wn){cn+=un[wn].stats.size}),cn});function On(){Da(un).forEach(function(cn){cn.renderbuffer=K.createRenderbuffer(),K.bindRenderbuffer(pc,cn.renderbuffer),K.renderbufferStorage(pc,cn.format,cn.width,cn.height)}),K.bindRenderbuffer(pc,null)}return{create:on,clear:function(){Da(un).forEach(rn)},restore:On}},Ks=36160,Ih=36161,Wu=3553,Xu=34069,em=36064,Df=36096,Tp=36128,Rh=33306,Sg=36053,Te=36054,jd=36055,Zu=36057,ka=36061,bi=36193,tm=5121,Yu=5126,Hd=6407,Ku=6408,M0=6402,kl=[Hd,Ku],kh=[];kh[Ku]=4,kh[Hd]=3;var Mp=[];Mp[tm]=1,Mp[Yu]=4,Mp[bi]=2;var _g=32854,su=32855,O0=36194,nm=33189,Xy=36168,qu=34041,P0=35907,Ll=34836,Ju=34842,rm=34843,Ag=[_g,su,O0,P0,Ju,rm,Ll],Qu={};Qu[Sg]="complete",Qu[Te]="incomplete attachment",Qu[Zu]="incomplete dimensions",Qu[jd]="incomplete, missing attachment",Qu[ka]="unsupported";function D0(K,Pe,ze,_t,pt,Ct){var It={cur:null,next:null,dirty:!1,setFBO:null},en=["rgba"],un=["rgba4","rgb565","rgb5 a1"];Pe.ext_srgb&&un.push("srgba"),Pe.ext_color_buffer_half_float&&un.push("rgba16f","rgb16f"),Pe.webgl_color_buffer_float&&un.push("rgba32f");var hn=["uint8"];Pe.oes_texture_half_float&&hn.push("half float","float16"),Pe.oes_texture_float&&hn.push("float","float32");function rn(Tn,mn,qt){this.target=Tn,this.texture=mn,this.renderbuffer=qt;var Cr=0,Fr=0;mn?(Cr=mn.width,Fr=mn.height):qt&&(Cr=qt.width,Fr=qt.height),this.width=Cr,this.height=Fr}function on(Tn){Tn&&(Tn.texture&&Tn.texture._texture.decRef(),Tn.renderbuffer&&Tn.renderbuffer._renderbuffer.decRef())}function On(Tn,mn,qt){if(!!Tn)if(Tn.texture){var Cr=Tn.texture._texture,Fr=Math.max(1,Cr.width),qn=Math.max(1,Cr.height);Oe(Fr===mn&&qn===qt,"inconsistent width/height for supplied texture"),Cr.refCount+=1}else{var si=Tn.renderbuffer._renderbuffer;Oe(si.width===mn&&si.height===qt,"inconsistent width/height for renderbuffer"),si.refCount+=1}}function cn(Tn,mn){mn&&(mn.texture?K.framebufferTexture2D(Ks,Tn,mn.target,mn.texture._texture.texture,0):K.framebufferRenderbuffer(Ks,Tn,Ih,mn.renderbuffer._renderbuffer.renderbuffer))}function wn(Tn){var mn=Wu,qt=null,Cr=null,Fr=Tn;typeof Tn=="object"&&(Fr=Tn.data,"target"in Tn&&(mn=Tn.target|0)),Oe.type(Fr,"function","invalid attachment data");var qn=Fr._reglType;return qn==="texture2d"?(qt=Fr,Oe(mn===Wu)):qn==="textureCube"?(qt=Fr,Oe(mn>=Xu&&mn<Xu+6,"invalid cube map target")):qn==="renderbuffer"?(Cr=Fr,mn=Ih):Oe.raise("invalid regl object for attachment"),new rn(mn,qt,Cr)}function ft(Tn,mn,qt,Cr,Fr){if(qt){var qn=_t.create2D({width:Tn,height:mn,format:Cr,type:Fr});return qn._texture.refCount=0,new rn(Wu,qn,null)}else{var si=pt.create({width:Tn,height:mn,format:Cr});return si._renderbuffer.refCount=0,new rn(Ih,null,si)}}function Rt(Tn){return Tn&&(Tn.texture||Tn.renderbuffer)}function fn(Tn,mn,qt){Tn&&(Tn.texture?Tn.texture.resize(mn,qt):Tn.renderbuffer&&Tn.renderbuffer.resize(mn,qt),Tn.width=mn,Tn.height=qt)}var Vn=0,tn={};function zn(){this.id=Vn++,tn[this.id]=this,this.framebuffer=K.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Wt(Tn){Tn.colorAttachments.forEach(on),on(Tn.depthAttachment),on(Tn.stencilAttachment),on(Tn.depthStencilAttachment)}function An(Tn){var mn=Tn.framebuffer;Oe(mn,"must not double destroy framebuffer"),K.deleteFramebuffer(mn),Tn.framebuffer=null,Ct.framebufferCount--,delete tn[Tn.id]}function nn(Tn){var mn;K.bindFramebuffer(Ks,Tn.framebuffer);var qt=Tn.colorAttachments;for(mn=0;mn<qt.length;++mn)cn(em+mn,qt[mn]);for(mn=qt.length;mn<ze.maxColorAttachments;++mn)K.framebufferTexture2D(Ks,em+mn,Wu,null,0);K.framebufferTexture2D(Ks,Rh,Wu,null,0),K.framebufferTexture2D(Ks,Df,Wu,null,0),K.framebufferTexture2D(Ks,Tp,Wu,null,0),cn(Df,Tn.depthAttachment),cn(Tp,Tn.stencilAttachment),cn(Rh,Tn.depthStencilAttachment);var Cr=K.checkFramebufferStatus(Ks);!K.isContextLost()&&Cr!==Sg&&Oe.raise("framebuffer configuration not supported, status = "+Qu[Cr]),K.bindFramebuffer(Ks,It.next?It.next.framebuffer:null),It.cur=It.next,K.getError()}function _n(Tn,mn){var qt=new zn;Ct.framebufferCount++;function Cr(qn,si){var Dr;Oe(It.next!==qt,"can not update framebuffer which is currently in use");var Wr=0,Pi=0,Xo=!0,fs=!0,Kr=null,ps=!0,xo="rgba",gs="uint8",Co=1,Es=null,Ao=null,is=null,Zo=!1;if(typeof qn=="number")Wr=qn|0,Pi=si|0||Wr;else if(!qn)Wr=Pi=1;else{Oe.type(qn,"object","invalid arguments for framebuffer");var Br=qn;if("shape"in Br){var Vo=Br.shape;Oe(Array.isArray(Vo)&&Vo.length>=2,"invalid shape for framebuffer"),Wr=Vo[0],Pi=Vo[1]}else"radius"in Br&&(Wr=Pi=Br.radius),"width"in Br&&(Wr=Br.width),"height"in Br&&(Pi=Br.height);("color"in Br||"colors"in Br)&&(Kr=Br.color||Br.colors,Array.isArray(Kr)&&Oe(Kr.length===1||Pe.webgl_draw_buffers,"multiple render targets not supported")),Kr||("colorCount"in Br&&(Co=Br.colorCount|0,Oe(Co>0,"invalid color buffer count")),"colorTexture"in Br&&(ps=!!Br.colorTexture,xo="rgba4"),"colorType"in Br&&(gs=Br.colorType,ps?(Oe(Pe.oes_texture_float||!(gs==="float"||gs==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Oe(Pe.oes_texture_half_float||!(gs==="half float"||gs==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):gs==="half float"||gs==="float16"?(Oe(Pe.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),xo="rgba16f"):(gs==="float"||gs==="float32")&&(Oe(Pe.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),xo="rgba32f"),Oe.oneOf(gs,hn,"invalid color type")),"colorFormat"in Br&&(xo=Br.colorFormat,en.indexOf(xo)>=0?ps=!0:un.indexOf(xo)>=0?ps=!1:ps?Oe.oneOf(Br.colorFormat,en,"invalid color format for texture"):Oe.oneOf(Br.colorFormat,un,"invalid color format for renderbuffer"))),("depthTexture"in Br||"depthStencilTexture"in Br)&&(Zo=!!(Br.depthTexture||Br.depthStencilTexture),Oe(!Zo||Pe.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Br&&(typeof Br.depth=="boolean"?Xo=Br.depth:(Es=Br.depth,fs=!1)),"stencil"in Br&&(typeof Br.stencil=="boolean"?fs=Br.stencil:(Ao=Br.stencil,Xo=!1)),"depthStencil"in Br&&(typeof Br.depthStencil=="boolean"?Xo=fs=Br.depthStencil:(is=Br.depthStencil,Xo=!1,fs=!1))}var Ii=null,mr=null,li=null,Ci=null;if(Array.isArray(Kr))Ii=Kr.map(wn);else if(Kr)Ii=[wn(Kr)];else for(Ii=new Array(Co),Dr=0;Dr<Co;++Dr)Ii[Dr]=ft(Wr,Pi,ps,xo,gs);Oe(Pe.webgl_draw_buffers||Ii.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Oe(Ii.length<=ze.maxColorAttachments,"too many color attachments, not supported"),Wr=Wr||Ii[0].width,Pi=Pi||Ii[0].height,Es?mr=wn(Es):Xo&&!fs&&(mr=ft(Wr,Pi,Zo,"depth","uint32")),Ao?li=wn(Ao):fs&&!Xo&&(li=ft(Wr,Pi,!1,"stencil","uint8")),is?Ci=wn(is):!Es&&!Ao&&fs&&Xo&&(Ci=ft(Wr,Pi,Zo,"depth stencil","depth stencil")),Oe(!!Es+!!Ao+!!is<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var vs=null;for(Dr=0;Dr<Ii.length;++Dr)if(On(Ii[Dr],Wr,Pi),Oe(!Ii[Dr]||Ii[Dr].texture&&kl.indexOf(Ii[Dr].texture._texture.format)>=0||Ii[Dr].renderbuffer&&Ag.indexOf(Ii[Dr].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Dr+" is invalid"),Ii[Dr]&&Ii[Dr].texture){var Hl=kh[Ii[Dr].texture._texture.format]*Mp[Ii[Dr].texture._texture.type];vs===null?vs=Hl:Oe(vs===Hl,"all color attachments much have the same number of bits per pixel.")}return On(mr,Wr,Pi),Oe(!mr||mr.texture&&mr.texture._texture.format===M0||mr.renderbuffer&&mr.renderbuffer._renderbuffer.format===nm,"invalid depth attachment for framebuffer object"),On(li,Wr,Pi),Oe(!li||li.renderbuffer&&li.renderbuffer._renderbuffer.format===Xy,"invalid stencil attachment for framebuffer object"),On(Ci,Wr,Pi),Oe(!Ci||Ci.texture&&Ci.texture._texture.format===qu||Ci.renderbuffer&&Ci.renderbuffer._renderbuffer.format===qu,"invalid depth-stencil attachment for framebuffer object"),Wt(qt),qt.width=Wr,qt.height=Pi,qt.colorAttachments=Ii,qt.depthAttachment=mr,qt.stencilAttachment=li,qt.depthStencilAttachment=Ci,Cr.color=Ii.map(Rt),Cr.depth=Rt(mr),Cr.stencil=Rt(li),Cr.depthStencil=Rt(Ci),Cr.width=qt.width,Cr.height=qt.height,nn(qt),Cr}function Fr(qn,si){Oe(It.next!==qt,"can not resize a framebuffer which is currently in use");var Dr=Math.max(qn|0,1),Wr=Math.max(si|0||Dr,1);if(Dr===qt.width&&Wr===qt.height)return Cr;for(var Pi=qt.colorAttachments,Xo=0;Xo<Pi.length;++Xo)fn(Pi[Xo],Dr,Wr);return fn(qt.depthAttachment,Dr,Wr),fn(qt.stencilAttachment,Dr,Wr),fn(qt.depthStencilAttachment,Dr,Wr),qt.width=Cr.width=Dr,qt.height=Cr.height=Wr,nn(qt),Cr}return Cr(Tn,mn),M(Cr,{resize:Fr,_reglType:"framebuffer",_framebuffer:qt,destroy:function(){An(qt),Wt(qt)},use:function(qn){It.setFBO({framebuffer:Cr},qn)}})}function dr(Tn){var mn=Array(6);function qt(Fr){var qn;Oe(mn.indexOf(It.next)<0,"can not update framebuffer which is currently in use");var si={color:null},Dr=0,Wr=null,Pi="rgba",Xo="uint8",fs=1;if(typeof Fr=="number")Dr=Fr|0;else if(!Fr)Dr=1;else{Oe.type(Fr,"object","invalid arguments for framebuffer");var Kr=Fr;if("shape"in Kr){var ps=Kr.shape;Oe(Array.isArray(ps)&&ps.length>=2,"invalid shape for framebuffer"),Oe(ps[0]===ps[1],"cube framebuffer must be square"),Dr=ps[0]}else"radius"in Kr&&(Dr=Kr.radius|0),"width"in Kr?(Dr=Kr.width|0,"height"in Kr&&Oe(Kr.height===Dr,"must be square")):"height"in Kr&&(Dr=Kr.height|0);("color"in Kr||"colors"in Kr)&&(Wr=Kr.color||Kr.colors,Array.isArray(Wr)&&Oe(Wr.length===1||Pe.webgl_draw_buffers,"multiple render targets not supported")),Wr||("colorCount"in Kr&&(fs=Kr.colorCount|0,Oe(fs>0,"invalid color buffer count")),"colorType"in Kr&&(Oe.oneOf(Kr.colorType,hn,"invalid color type"),Xo=Kr.colorType),"colorFormat"in Kr&&(Pi=Kr.colorFormat,Oe.oneOf(Kr.colorFormat,en,"invalid color format for texture"))),"depth"in Kr&&(si.depth=Kr.depth),"stencil"in Kr&&(si.stencil=Kr.stencil),"depthStencil"in Kr&&(si.depthStencil=Kr.depthStencil)}var xo;if(Wr)if(Array.isArray(Wr))for(xo=[],qn=0;qn<Wr.length;++qn)xo[qn]=Wr[qn];else xo=[Wr];else{xo=Array(fs);var gs={radius:Dr,format:Pi,type:Xo};for(qn=0;qn<fs;++qn)xo[qn]=_t.createCube(gs)}for(si.color=Array(xo.length),qn=0;qn<xo.length;++qn){var Co=xo[qn];Oe(typeof Co=="function"&&Co._reglType==="textureCube","invalid cube map"),Dr=Dr||Co.width,Oe(Co.width===Dr&&Co.height===Dr,"invalid cube map shape"),si.color[qn]={target:Xu,data:xo[qn]}}for(qn=0;qn<6;++qn){for(var Es=0;Es<xo.length;++Es)si.color[Es].target=Xu+qn;qn>0&&(si.depth=mn[0].depth,si.stencil=mn[0].stencil,si.depthStencil=mn[0].depthStencil),mn[qn]?mn[qn](si):mn[qn]=_n(si)}return M(qt,{width:Dr,height:Dr,color:xo})}function Cr(Fr){var qn,si=Fr|0;if(Oe(si>0&&si<=ze.maxCubeMapSize,"invalid radius for cube fbo"),si===qt.width)return qt;var Dr=qt.color;for(qn=0;qn<Dr.length;++qn)Dr[qn].resize(si);for(qn=0;qn<6;++qn)mn[qn].resize(si);return qt.width=qt.height=si,qt}return qt(Tn),M(qt,{faces:mn,resize:Cr,_reglType:"framebufferCube",destroy:function(){mn.forEach(function(Fr){Fr.destroy()})}})}function Pr(){It.cur=null,It.next=null,It.dirty=!0,Da(tn).forEach(function(Tn){Tn.framebuffer=K.createFramebuffer(),nn(Tn)})}return M(It,{getFramebuffer:function(Tn){if(typeof Tn=="function"&&Tn._reglType==="framebuffer"){var mn=Tn._framebuffer;if(mn instanceof zn)return mn}return null},create:_n,createCube:dr,clear:function(){Da(tn).forEach(An)},restore:Pr})}var Uc=5126,N0=34962;function Uo(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Uc,this.offset=0,this.stride=0,this.divisor=0}function qi(K,Pe,ze,_t,pt){for(var Ct=ze.maxAttributes,It=new Array(Ct),en=0;en<Ct;++en)It[en]=new Uo;var un=0,hn={},rn={Record:Uo,scope:{},state:It,currentVAO:null,targetVAO:null,restore:On()?tn:function(){},createVAO:zn,getVAO:wn,destroyBuffer:on,setVAO:On()?ft:Rt,clear:On()?fn:function(){}};function on(Wt){for(var An=0;An<It.length;++An){var nn=It[An];nn.buffer===Wt&&(K.disableVertexAttribArray(An),nn.buffer=null)}}function On(){return Pe.oes_vertex_array_object}function cn(){return Pe.angle_instanced_arrays}function wn(Wt){return typeof Wt=="function"&&Wt._vao?Wt._vao:null}function ft(Wt){if(Wt!==rn.currentVAO){var An=On();Wt?An.bindVertexArrayOES(Wt.vao):An.bindVertexArrayOES(null),rn.currentVAO=Wt}}function Rt(Wt){if(Wt!==rn.currentVAO){if(Wt)Wt.bindAttrs();else for(var An=cn(),nn=0;nn<It.length;++nn){var _n=It[nn];_n.buffer?(K.enableVertexAttribArray(nn),K.vertexAttribPointer(nn,_n.size,_n.type,_n.normalized,_n.stride,_n.offfset),An&&_n.divisor&&An.vertexAttribDivisorANGLE(nn,_n.divisor)):(K.disableVertexAttribArray(nn),K.vertexAttrib4f(nn,_n.x,_n.y,_n.z,_n.w))}rn.currentVAO=Wt}}function fn(){Da(hn).forEach(function(Wt){Wt.destroy()})}function Vn(){this.id=++un,this.attributes=[];var Wt=On();Wt?this.vao=Wt.createVertexArrayOES():this.vao=null,hn[this.id]=this,this.buffers=[]}Vn.prototype.bindAttrs=function(){for(var Wt=cn(),An=this.attributes,nn=0;nn<An.length;++nn){var _n=An[nn];_n.buffer?(K.enableVertexAttribArray(nn),K.bindBuffer(N0,_n.buffer.buffer),K.vertexAttribPointer(nn,_n.size,_n.type,_n.normalized,_n.stride,_n.offset),Wt&&_n.divisor&&Wt.vertexAttribDivisorANGLE(nn,_n.divisor)):(K.disableVertexAttribArray(nn),K.vertexAttrib4f(nn,_n.x,_n.y,_n.z,_n.w))}for(var dr=An.length;dr<Ct;++dr)K.disableVertexAttribArray(dr)},Vn.prototype.refresh=function(){var Wt=On();Wt&&(Wt.bindVertexArrayOES(this.vao),this.bindAttrs(),rn.currentVAO=this)},Vn.prototype.destroy=function(){if(this.vao){var Wt=On();this===rn.currentVAO&&(rn.currentVAO=null,Wt.bindVertexArrayOES(null)),Wt.deleteVertexArrayOES(this.vao),this.vao=null}hn[this.id]&&(delete hn[this.id],_t.vaoCount-=1)};function tn(){var Wt=On();Wt&&Da(hn).forEach(function(An){An.refresh()})}function zn(Wt){var An=new Vn;_t.vaoCount+=1;function nn(_n){Oe(Array.isArray(_n),"arguments to vertex array constructor must be an array"),Oe(_n.length<Ct,"too many attributes"),Oe(_n.length>0,"must specify at least one attribute");var dr={},Pr=An.attributes;Pr.length=_n.length;for(var Tn=0;Tn<_n.length;++Tn){var mn=_n[Tn],qt=Pr[Tn]=new Uo,Cr=mn.data||mn;if(Array.isArray(Cr)||L(Cr)||Wa(Cr)){var Fr;An.buffers[Tn]&&(Fr=An.buffers[Tn],L(Cr)&&Fr._buffer.byteLength>=Cr.byteLength?Fr.subdata(Cr):(Fr.destroy(),An.buffers[Tn]=null)),An.buffers[Tn]||(Fr=An.buffers[Tn]=pt.create(mn,N0,!1,!0)),qt.buffer=pt.getBuffer(Fr),qt.size=qt.buffer.dimension|0,qt.normalized=!1,qt.type=qt.buffer.dtype,qt.offset=0,qt.stride=0,qt.divisor=0,qt.state=1,dr[Tn]=1}else pt.getBuffer(mn)?(qt.buffer=pt.getBuffer(mn),qt.size=qt.buffer.dimension|0,qt.normalized=!1,qt.type=qt.buffer.dtype,qt.offset=0,qt.stride=0,qt.divisor=0,qt.state=1):pt.getBuffer(mn.buffer)?(qt.buffer=pt.getBuffer(mn.buffer),qt.size=(+mn.size||qt.buffer.dimension)|0,qt.normalized=!!mn.normalized||!1,"type"in mn?(Oe.parameter(mn.type,Ws,"invalid buffer type"),qt.type=Ws[mn.type]):qt.type=qt.buffer.dtype,qt.offset=(mn.offset||0)|0,qt.stride=(mn.stride||0)|0,qt.divisor=(mn.divisor||0)|0,qt.state=1,Oe(qt.size>=1&&qt.size<=4,"size must be between 1 and 4"),Oe(qt.offset>=0,"invalid offset"),Oe(qt.stride>=0&&qt.stride<=255,"stride must be between 0 and 255"),Oe(qt.divisor>=0,"divisor must be positive"),Oe(!qt.divisor||!!Pe.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in mn?(Oe(Tn>0,"first attribute must not be a constant"),qt.x=+mn.x||0,qt.y=+mn.y||0,qt.z=+mn.z||0,qt.w=+mn.w||0,qt.state=2):Oe(!1,"invalid attribute spec for location "+Tn)}for(var qn=0;qn<An.buffers.length;++qn)!dr[qn]&&An.buffers[qn]&&(An.buffers[qn].destroy(),An.buffers[qn]=null);return An.refresh(),nn}return nn.destroy=function(){for(var _n=0;_n<An.buffers.length;++_n)An.buffers[_n]&&An.buffers[_n].destroy();An.buffers.length=0,An.destroy()},nn._vao=An,nn._reglType="vao",nn(Wt)}return rn}var Lh=35632,$d=35633,Op=35718,Pp=35721;function Dp(K,Pe,ze,_t){var pt={},Ct={};function It(ft,Rt,fn,Vn){this.name=ft,this.id=Rt,this.location=fn,this.info=Vn}function en(ft,Rt){for(var fn=0;fn<ft.length;++fn)if(ft[fn].id===Rt.id){ft[fn].location=Rt.location;return}ft.push(Rt)}function un(ft,Rt,fn){var Vn=ft===Lh?pt:Ct,tn=Vn[Rt];if(!tn){var zn=Pe.str(Rt);tn=K.createShader(ft),K.shaderSource(tn,zn),K.compileShader(tn),Oe.shaderError(K,tn,zn,ft,fn),Vn[Rt]=tn}return tn}var hn={},rn=[],on=0;function On(ft,Rt){this.id=on++,this.fragId=ft,this.vertId=Rt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,_t.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function cn(ft,Rt,fn){var Vn,tn,zn=un(Lh,ft.fragId),Wt=un($d,ft.vertId),An=ft.program=K.createProgram();if(K.attachShader(An,zn),K.attachShader(An,Wt),fn)for(Vn=0;Vn<fn.length;++Vn){var nn=fn[Vn];K.bindAttribLocation(An,nn[0],nn[1])}K.linkProgram(An),Oe.linkError(K,An,Pe.str(ft.fragId),Pe.str(ft.vertId),Rt);var _n=K.getProgramParameter(An,Op);_t.profile&&(ft.stats.uniformsCount=_n);var dr=ft.uniforms;for(Vn=0;Vn<_n;++Vn)if(tn=K.getActiveUniform(An,Vn),tn)if(tn.size>1)for(var Pr=0;Pr<tn.size;++Pr){var Tn=tn.name.replace("[0]","["+Pr+"]");en(dr,new It(Tn,Pe.id(Tn),K.getUniformLocation(An,Tn),tn))}else en(dr,new It(tn.name,Pe.id(tn.name),K.getUniformLocation(An,tn.name),tn));var mn=K.getProgramParameter(An,Pp);_t.profile&&(ft.stats.attributesCount=mn);var qt=ft.attributes;for(Vn=0;Vn<mn;++Vn)tn=K.getActiveAttrib(An,Vn),tn&&en(qt,new It(tn.name,Pe.id(tn.name),K.getAttribLocation(An,tn.name),tn))}_t.profile&&(ze.getMaxUniformsCount=function(){var ft=0;return rn.forEach(function(Rt){Rt.stats.uniformsCount>ft&&(ft=Rt.stats.uniformsCount)}),ft},ze.getMaxAttributesCount=function(){var ft=0;return rn.forEach(function(Rt){Rt.stats.attributesCount>ft&&(ft=Rt.stats.attributesCount)}),ft});function wn(){pt={},Ct={};for(var ft=0;ft<rn.length;++ft)cn(rn[ft],null,rn[ft].attributes.map(function(Rt){return[Rt.location,Rt.name]}))}return{clear:function(){var ft=K.deleteShader.bind(K);Da(pt).forEach(ft),pt={},Da(Ct).forEach(ft),Ct={},rn.forEach(function(Rt){K.deleteProgram(Rt.program)}),rn.length=0,hn={},ze.shaderCount=0},program:function(ft,Rt,fn,Vn){Oe.command(ft>=0,"missing vertex shader",fn),Oe.command(Rt>=0,"missing fragment shader",fn);var tn=hn[Rt];tn||(tn=hn[Rt]={});var zn=tn[ft];if(zn&&(zn.refCount++,!Vn))return zn;var Wt=new On(Rt,ft);return ze.shaderCount++,cn(Wt,fn,Vn),zn||(tn[ft]=Wt),rn.push(Wt),M(Wt,{destroy:function(){if(Wt.refCount--,Wt.refCount<=0){K.deleteProgram(Wt.program);var An=rn.indexOf(Wt);rn.splice(An,1),ze.shaderCount--}tn[Wt.vertId].refCount<=0&&(K.deleteShader(Ct[Wt.vertId]),delete Ct[Wt.vertId],delete hn[Wt.fragId][Wt.vertId]),Object.keys(hn[Wt.fragId]).length||(K.deleteShader(pt[Wt.fragId]),delete pt[Wt.fragId],delete hn[Wt.fragId])}})},restore:wn,shader:un,frag:-1,vert:-1}}var Wd=6408,Ni=5121,Nf=3333,Gl=5126;function If(K,Pe,ze,_t,pt,Ct,It){function en(rn){var on;Pe.next===null?(Oe(pt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),on=Ni):(Oe(Pe.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),on=Pe.next.colorAttachments[0].texture._texture.type,Ct.oes_texture_float?(Oe(on===Ni||on===Gl,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),on===Gl&&Oe(It.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Oe(on===Ni,"Reading from a framebuffer is only allowed for the type 'uint8'"));var On=0,cn=0,wn=_t.framebufferWidth,ft=_t.framebufferHeight,Rt=null;L(rn)?Rt=rn:rn&&(Oe.type(rn,"object","invalid arguments to regl.read()"),On=rn.x|0,cn=rn.y|0,Oe(On>=0&&On<_t.framebufferWidth,"invalid x offset for regl.read"),Oe(cn>=0&&cn<_t.framebufferHeight,"invalid y offset for regl.read"),wn=(rn.width||_t.framebufferWidth-On)|0,ft=(rn.height||_t.framebufferHeight-cn)|0,Rt=rn.data||null),Rt&&(on===Ni?Oe(Rt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):on===Gl&&Oe(Rt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Oe(wn>0&&wn+On<=_t.framebufferWidth,"invalid width for read pixels"),Oe(ft>0&&ft+cn<=_t.framebufferHeight,"invalid height for read pixels"),ze();var fn=wn*ft*4;return Rt||(on===Ni?Rt=new Uint8Array(fn):on===Gl&&(Rt=Rt||new Float32Array(fn))),Oe.isTypedArray(Rt,"data buffer for regl.read() must be a typedarray"),Oe(Rt.byteLength>=fn,"data buffer for regl.read() too small"),K.pixelStorei(Nf,4),K.readPixels(On,cn,wn,ft,Wd,on,Rt),Rt}function un(rn){var on;return Pe.setFBO({framebuffer:rn.framebuffer},function(){on=en(rn)}),on}function hn(rn){return!rn||!("framebuffer"in rn)?en(rn):un(rn)}return hn}function la(K){return Array.prototype.slice.call(K)}function Vc(K){return la(K).join("")}function Xd(){var K=0,Pe=[],ze=[];function _t(on){for(var On=0;On<ze.length;++On)if(ze[On]===on)return Pe[On];var cn="g"+K++;return Pe.push(cn),ze.push(on),cn}function pt(){var on=[];function On(){on.push.apply(on,la(arguments))}var cn=[];function wn(){var ft="v"+K++;return cn.push(ft),arguments.length>0&&(on.push(ft,"="),on.push.apply(on,la(arguments)),on.push(";")),ft}return M(On,{def:wn,toString:function(){return Vc([cn.length>0?"var "+cn.join(",")+";":"",Vc(on)])}})}function Ct(){var on=pt(),On=pt(),cn=on.toString,wn=On.toString;function ft(Rt,fn){On(Rt,fn,"=",on.def(Rt,fn),";")}return M(function(){on.apply(on,la(arguments))},{def:on.def,entry:on,exit:On,save:ft,set:function(Rt,fn,Vn){ft(Rt,fn),on(Rt,fn,"=",Vn,";")},toString:function(){return cn()+wn()}})}function It(){var on=Vc(arguments),On=Ct(),cn=Ct(),wn=On.toString,ft=cn.toString;return M(On,{then:function(){return On.apply(On,la(arguments)),this},else:function(){return cn.apply(cn,la(arguments)),this},toString:function(){var Rt=ft();return Rt&&(Rt="else{"+Rt+"}"),Vc(["if(",on,"){",wn(),"}",Rt])}})}var en=pt(),un={};function hn(on,On){var cn=[];function wn(){var tn="a"+cn.length;return cn.push(tn),tn}On=On||0;for(var ft=0;ft<On;++ft)wn();var Rt=Ct(),fn=Rt.toString,Vn=un[on]=M(Rt,{arg:wn,toString:function(){return Vc(["function(",cn.join(),"){",fn(),"}"])}});return Vn}function rn(){var on=['"use strict";',en,"return {"];Object.keys(un).forEach(function(wn){on.push('"',wn,'":',un[wn].toString(),",")}),on.push("}");var On=Vc(on).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),cn=Function.apply(null,Pe.concat(On));return cn.apply(null,ze)}return{global:en,link:_t,block:pt,proc:hn,scope:Ct,cond:It,compile:rn}}var hl="xyzw".split(""),Fl=5121,qs=1,ec=2,Ac=0,Ca=1,au=2,Zd=3,ed=4,td=5,Tc=6,Tg="dither",I0="blend.enable",nd="blend.color",Np="blend.equation",Rf="blend.func",ua="depth.enable",Ip="depth.func",Rp="depth.range",fl="depth.mask",jc="colorMask",Gh="cull.enable",rd="cull.face",id="frontFace",wa="lineWidth",Fh="polygonOffset.enable",Bh="polygonOffset.offset",kf="sample.alpha",Bl="sample.enable",Lf="sample.coverage",Gf="stencil.enable",zl="stencil.mask",pl="stencil.func",Yd="stencil.opFront",Ul="stencil.opBack",zh="scissor.enable",od="scissor.box",Vl="viewport",Kd="profile",Hc="framebuffer",gc="vert",Uh="frag",sd="elements",Mc="primitive",ad="count",kp="offset",cu="instances",lu="vao",Oc="Width",$c="Height",Wc=Hc+Oc,gl=Hc+$c,Vh=Vl+Oc,cd=Vl+$c,R0="drawingBuffer",qd=R0+Oc,ld=R0+$c,Jd=[Rf,Np,pl,Yd,Ul,Lf,Vl,od,Bh],vl=34962,uu=34963,Lp=35632,Qd=35633,hi=3553,Ff=34067,Gp=2884,jl=3042,Bf=3024,Fp=2960,im=2929,Pc=3089,Bp=32823,ud=32926,jh=32928,dd=5126,hd=35664,ws=35665,tc=35666,eh=5124,zf=35667,Hh=35668,Ps=35669,Wn=35670,fd=35671,Uf=35672,vc=35673,La=35674,xi=35675,Ds=35676,th=35678,pd=35680,Vf=4,nh=1028,Ga=1029,du=2304,go=2305,om=32775,Mg=32776,sm=519,ds=7680,Js=0,Dc=1,jf=32774,am=513,$h=36160,Wh=36064,ml={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Og=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],rh={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},hs={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},gd={frag:Lp,vert:Qd},ih={cw:du,ccw:go};function zp(K){return Array.isArray(K)||L(K)||Wa(K)}function Pg(K){return K.sort(function(Pe,ze){return Pe===Vl?-1:ze===Vl?1:Pe<ze?-1:1})}function Fa(K,Pe,ze,_t){this.thisDep=K,this.contextDep=Pe,this.propDep=ze,this.append=_t}function yl(K){return K&&!(K.thisDep||K.contextDep||K.propDep)}function rs(K){return new Fa(!1,!1,!1,K)}function Ea(K,Pe){var ze=K.type;if(ze===Ac){var _t=K.data.length;return new Fa(!0,_t>=1,_t>=2,Pe)}else if(ze===ed){var pt=K.data;return new Fa(pt.thisDep,pt.contextDep,pt.propDep,Pe)}else{if(ze===td)return new Fa(!1,!1,!1,Pe);if(ze===Tc){for(var Ct=!1,It=!1,en=!1,un=0;un<K.data.length;++un){var hn=K.data[un];if(hn.type===Ca)en=!0;else if(hn.type===au)It=!0;else if(hn.type===Zd)Ct=!0;else if(hn.type===Ac){Ct=!0;var rn=hn.data;rn>=1&&(It=!0),rn>=2&&(en=!0)}else hn.type===ed&&(Ct=Ct||hn.data.thisDep,It=It||hn.data.contextDep,en=en||hn.data.propDep)}return new Fa(Ct,It,en,Pe)}else return new Fa(ze===Zd,ze===au,ze===Ca,Pe)}}var Up=new Fa(!1,!1,!1,function(){});function Vp(K,Pe,ze,_t,pt,Ct,It,en,un,hn,rn,on,On,cn,wn){var ft=hn.Record,Rt={add:32774,subtract:32778,"reverse subtract":32779};ze.ext_blend_minmax&&(Rt.min=om,Rt.max=Mg);var fn=ze.angle_instanced_arrays,Vn=ze.webgl_draw_buffers,tn={dirty:!0,profile:wn.profile},zn={},Wt=[],An={},nn={};function _n(Ge){return Ge.replace(".","_")}function dr(Ge,we,We){var ut=_n(Ge);Wt.push(Ge),zn[ut]=tn[ut]=!!We,An[ut]=we}function Pr(Ge,we,We){var ut=_n(Ge);Wt.push(Ge),Array.isArray(We)?(tn[ut]=We.slice(),zn[ut]=We.slice()):tn[ut]=zn[ut]=We,nn[ut]=we}dr(Tg,Bf),dr(I0,jl),Pr(nd,"blendColor",[0,0,0,0]),Pr(Np,"blendEquationSeparate",[jf,jf]),Pr(Rf,"blendFuncSeparate",[Dc,Js,Dc,Js]),dr(ua,im,!0),Pr(Ip,"depthFunc",am),Pr(Rp,"depthRange",[0,1]),Pr(fl,"depthMask",!0),Pr(jc,jc,[!0,!0,!0,!0]),dr(Gh,Gp),Pr(rd,"cullFace",Ga),Pr(id,id,go),Pr(wa,wa,1),dr(Fh,Bp),Pr(Bh,"polygonOffset",[0,0]),dr(kf,ud),dr(Bl,jh),Pr(Lf,"sampleCoverage",[1,!1]),dr(Gf,Fp),Pr(zl,"stencilMask",-1),Pr(pl,"stencilFunc",[sm,0,-1]),Pr(Yd,"stencilOpSeparate",[nh,ds,ds,ds]),Pr(Ul,"stencilOpSeparate",[Ga,ds,ds,ds]),dr(zh,Pc),Pr(od,"scissor",[0,0,K.drawingBufferWidth,K.drawingBufferHeight]),Pr(Vl,Vl,[0,0,K.drawingBufferWidth,K.drawingBufferHeight]);var Tn={gl:K,context:On,strings:Pe,next:zn,current:tn,draw:on,elements:Ct,buffer:pt,shader:rn,attributes:hn.state,vao:hn,uniforms:un,framebuffer:en,extensions:ze,timer:cn,isBufferArgs:zp},mn={primTypes:se,compareFuncs:rh,blendFuncs:ml,blendEquations:Rt,stencilOps:hs,glTypes:Ws,orientationType:ih};Oe.optional(function(){Tn.isArrayLike=Ei}),Vn&&(mn.backBuffer=[Ga],mn.drawBuffer=Jo(_t.maxDrawbuffers,function(Ge){return Ge===0?[0]:Jo(Ge,function(we){return Wh+we})}));var qt=0;function Cr(){var Ge=Xd(),we=Ge.link,We=Ge.global;Ge.id=qt++,Ge.batchId="0";var ut=we(Tn),ht=Ge.shared={props:"a0"};Object.keys(Tn).forEach(function(He){ht[He]=We.def(ut,".",He)}),Oe.optional(function(){Ge.CHECK=we(Oe),Ge.commandStr=Oe.guessCommand(),Ge.command=we(Ge.commandStr),Ge.assert=function(He,Ie,rt){He("if(!(",Ie,"))",this.CHECK,".commandRaise(",we(rt),",",this.command,");")},mn.invalidBlendCombinations=Og});var Je=Ge.next={},Xe=Ge.current={};Object.keys(nn).forEach(function(He){Array.isArray(tn[He])&&(Je[He]=We.def(ht.next,".",He),Xe[He]=We.def(ht.current,".",He))});var tt=Ge.constants={};Object.keys(mn).forEach(function(He){tt[He]=We.def(JSON.stringify(mn[He]))}),Ge.invoke=function(He,Ie){switch(Ie.type){case Ac:var rt=["this",ht.context,ht.props,Ge.batchId];return He.def(we(Ie.data),".call(",rt.slice(0,Math.max(Ie.data.length+1,4)),")");case Ca:return He.def(ht.props,Ie.data);case au:return He.def(ht.context,Ie.data);case Zd:return He.def("this",Ie.data);case ed:return Ie.data.append(Ge,He),Ie.data.ref;case td:return Ie.data.toString();case Tc:return Ie.data.map(function(vt){return Ge.invoke(He,vt)})}},Ge.attribCache={};var Le={};return Ge.scopeAttrib=function(He){var Ie=Pe.id(He);if(Ie in Le)return Le[Ie];var rt=hn.scope[Ie];rt||(rt=hn.scope[Ie]=new ft);var vt=Le[Ie]=we(rt);return vt},Ge}function Fr(Ge){var we=Ge.static,We=Ge.dynamic,ut;if(Kd in we){var ht=!!we[Kd];ut=rs(function(Xe,tt){return ht}),ut.enable=ht}else if(Kd in We){var Je=We[Kd];ut=Ea(Je,function(Xe,tt){return Xe.invoke(tt,Je)})}return ut}function qn(Ge,we){var We=Ge.static,ut=Ge.dynamic;if(Hc in We){var ht=We[Hc];return ht?(ht=en.getFramebuffer(ht),Oe.command(ht,"invalid framebuffer object"),rs(function(Xe,tt){var Le=Xe.link(ht),He=Xe.shared;tt.set(He.framebuffer,".next",Le);var Ie=He.context;return tt.set(Ie,"."+Wc,Le+".width"),tt.set(Ie,"."+gl,Le+".height"),Le})):rs(function(Xe,tt){var Le=Xe.shared;tt.set(Le.framebuffer,".next","null");var He=Le.context;return tt.set(He,"."+Wc,He+"."+qd),tt.set(He,"."+gl,He+"."+ld),"null"})}else if(Hc in ut){var Je=ut[Hc];return Ea(Je,function(Xe,tt){var Le=Xe.invoke(tt,Je),He=Xe.shared,Ie=He.framebuffer,rt=tt.def(Ie,".getFramebuffer(",Le,")");Oe.optional(function(){Xe.assert(tt,"!"+Le+"||"+rt,"invalid framebuffer object")}),tt.set(Ie,".next",rt);var vt=He.context;return tt.set(vt,"."+Wc,rt+"?"+rt+".width:"+vt+"."+qd),tt.set(vt,"."+gl,rt+"?"+rt+".height:"+vt+"."+ld),rt})}else return null}function si(Ge,we,We){var ut=Ge.static,ht=Ge.dynamic;function Je(Le){if(Le in ut){var He=ut[Le];Oe.commandType(He,"object","invalid "+Le,We.commandStr);var Ie=!0,rt=He.x|0,vt=He.y|0,Vt,Xt;return"width"in He?(Vt=He.width|0,Oe.command(Vt>=0,"invalid "+Le,We.commandStr)):Ie=!1,"height"in He?(Xt=He.height|0,Oe.command(Xt>=0,"invalid "+Le,We.commandStr)):Ie=!1,new Fa(!Ie&&we&&we.thisDep,!Ie&&we&&we.contextDep,!Ie&&we&&we.propDep,function(or,Vr){var Zn=or.shared.context,ur=Vt;"width"in He||(ur=Vr.def(Zn,".",Wc,"-",rt));var tr=Xt;return"height"in He||(tr=Vr.def(Zn,".",gl,"-",vt)),[rt,vt,ur,tr]})}else if(Le in ht){var Lt=ht[Le],dn=Ea(Lt,function(or,Vr){var Zn=or.invoke(Vr,Lt);Oe.optional(function(){or.assert(Vr,Zn+"&&typeof "+Zn+'==="object"',"invalid "+Le)});var ur=or.shared.context,tr=Vr.def(Zn,".x|0"),Si=Vr.def(Zn,".y|0"),os=Vr.def('"width" in ',Zn,"?",Zn,".width|0:","(",ur,".",Wc,"-",tr,")"),rc=Vr.def('"height" in ',Zn,"?",Zn,".height|0:","(",ur,".",gl,"-",Si,")");return Oe.optional(function(){or.assert(Vr,os+">=0&&"+rc+">=0","invalid "+Le)}),[tr,Si,os,rc]});return we&&(dn.thisDep=dn.thisDep||we.thisDep,dn.contextDep=dn.contextDep||we.contextDep,dn.propDep=dn.propDep||we.propDep),dn}else return we?new Fa(we.thisDep,we.contextDep,we.propDep,function(or,Vr){var Zn=or.shared.context;return[0,0,Vr.def(Zn,".",Wc),Vr.def(Zn,".",gl)]}):null}var Xe=Je(Vl);if(Xe){var tt=Xe;Xe=new Fa(Xe.thisDep,Xe.contextDep,Xe.propDep,function(Le,He){var Ie=tt.append(Le,He),rt=Le.shared.context;return He.set(rt,"."+Vh,Ie[2]),He.set(rt,"."+cd,Ie[3]),Ie})}return{viewport:Xe,scissor_box:Je(od)}}function Dr(Ge,we){var We=Ge.static,ut=typeof We[Uh]=="string"&&typeof We[gc]=="string";if(ut){if(Object.keys(we.dynamic).length>0)return null;var ht=we.static,Je=Object.keys(ht);if(Je.length>0&&typeof ht[Je[0]]=="number"){for(var Xe=[],tt=0;tt<Je.length;++tt)Oe(typeof ht[Je[tt]]=="number","must specify all vertex attribute locations when using vaos"),Xe.push([ht[Je[tt]]|0,Je[tt]]);return Xe}}return null}function Wr(Ge,we,We){var ut=Ge.static,ht=Ge.dynamic;function Je(Ie){if(Ie in ut){var rt=Pe.id(ut[Ie]);Oe.optional(function(){rn.shader(gd[Ie],rt,Oe.guessCommand())});var vt=rs(function(){return rt});return vt.id=rt,vt}else if(Ie in ht){var Vt=ht[Ie];return Ea(Vt,function(Xt,Lt){var dn=Xt.invoke(Lt,Vt),or=Lt.def(Xt.shared.strings,".id(",dn,")");return Oe.optional(function(){Lt(Xt.shared.shader,".shader(",gd[Ie],",",or,",",Xt.command,");")}),or})}return null}var Xe=Je(Uh),tt=Je(gc),Le=null,He;return yl(Xe)&&yl(tt)?(Le=rn.program(tt.id,Xe.id,null,We),He=rs(function(Ie,rt){return Ie.link(Le)})):He=new Fa(Xe&&Xe.thisDep||tt&&tt.thisDep,Xe&&Xe.contextDep||tt&&tt.contextDep,Xe&&Xe.propDep||tt&&tt.propDep,function(Ie,rt){var vt=Ie.shared.shader,Vt;Xe?Vt=Xe.append(Ie,rt):Vt=rt.def(vt,".",Uh);var Xt;tt?Xt=tt.append(Ie,rt):Xt=rt.def(vt,".",gc);var Lt=vt+".program("+Xt+","+Vt;return Oe.optional(function(){Lt+=","+Ie.command}),rt.def(Lt+")")}),{frag:Xe,vert:tt,progVar:He,program:Le}}function Pi(Ge,we){var We=Ge.static,ut=Ge.dynamic;function ht(){if(sd in We){var Ie=We[sd];zp(Ie)?Ie=Ct.getElements(Ct.create(Ie,!0)):Ie&&(Ie=Ct.getElements(Ie),Oe.command(Ie,"invalid elements",we.commandStr));var rt=rs(function(Vt,Xt){if(Ie){var Lt=Vt.link(Ie);return Vt.ELEMENTS=Lt,Lt}return Vt.ELEMENTS=null,null});return rt.value=Ie,rt}else if(sd in ut){var vt=ut[sd];return Ea(vt,function(Vt,Xt){var Lt=Vt.shared,dn=Lt.isBufferArgs,or=Lt.elements,Vr=Vt.invoke(Xt,vt),Zn=Xt.def("null"),ur=Xt.def(dn,"(",Vr,")"),tr=Vt.cond(ur).then(Zn,"=",or,".createStream(",Vr,");").else(Zn,"=",or,".getElements(",Vr,");");return Oe.optional(function(){Vt.assert(tr.else,"!"+Vr+"||"+Zn,"invalid elements")}),Xt.entry(tr),Xt.exit(Vt.cond(ur).then(or,".destroyStream(",Zn,");")),Vt.ELEMENTS=Zn,Zn})}return null}var Je=ht();function Xe(){if(Mc in We){var Ie=We[Mc];return Oe.commandParameter(Ie,se,"invalid primitve",we.commandStr),rs(function(vt,Vt){return se[Ie]})}else if(Mc in ut){var rt=ut[Mc];return Ea(rt,function(vt,Vt){var Xt=vt.constants.primTypes,Lt=vt.invoke(Vt,rt);return Oe.optional(function(){vt.assert(Vt,Lt+" in "+Xt,"invalid primitive, must be one of "+Object.keys(se))}),Vt.def(Xt,"[",Lt,"]")})}else if(Je)return yl(Je)?Je.value?rs(function(vt,Vt){return Vt.def(vt.ELEMENTS,".primType")}):rs(function(){return Vf}):new Fa(Je.thisDep,Je.contextDep,Je.propDep,function(vt,Vt){var Xt=vt.ELEMENTS;return Vt.def(Xt,"?",Xt,".primType:",Vf)});return null}function tt(Ie,rt){if(Ie in We){var vt=We[Ie]|0;return Oe.command(!rt||vt>=0,"invalid "+Ie,we.commandStr),rs(function(Xt,Lt){return rt&&(Xt.OFFSET=vt),vt})}else if(Ie in ut){var Vt=ut[Ie];return Ea(Vt,function(Xt,Lt){var dn=Xt.invoke(Lt,Vt);return rt&&(Xt.OFFSET=dn,Oe.optional(function(){Xt.assert(Lt,dn+">=0","invalid "+Ie)})),dn})}else if(rt&&Je)return rs(function(Xt,Lt){return Xt.OFFSET="0",0});return null}var Le=tt(kp,!0);function He(){if(ad in We){var Ie=We[ad]|0;return Oe.command(typeof Ie=="number"&&Ie>=0,"invalid vertex count",we.commandStr),rs(function(){return Ie})}else if(ad in ut){var rt=ut[ad];return Ea(rt,function(Xt,Lt){var dn=Xt.invoke(Lt,rt);return Oe.optional(function(){Xt.assert(Lt,"typeof "+dn+'==="number"&&'+dn+">=0&&"+dn+"===("+dn+"|0)","invalid vertex count")}),dn})}else if(Je)if(yl(Je)){if(Je)return Le?new Fa(Le.thisDep,Le.contextDep,Le.propDep,function(Xt,Lt){var dn=Lt.def(Xt.ELEMENTS,".vertCount-",Xt.OFFSET);return Oe.optional(function(){Xt.assert(Lt,dn+">=0","invalid vertex offset/element buffer too small")}),dn}):rs(function(Xt,Lt){return Lt.def(Xt.ELEMENTS,".vertCount")});var vt=rs(function(){return-1});return Oe.optional(function(){vt.MISSING=!0}),vt}else{var Vt=new Fa(Je.thisDep||Le.thisDep,Je.contextDep||Le.contextDep,Je.propDep||Le.propDep,function(Xt,Lt){var dn=Xt.ELEMENTS;return Xt.OFFSET?Lt.def(dn,"?",dn,".vertCount-",Xt.OFFSET,":-1"):Lt.def(dn,"?",dn,".vertCount:-1")});return Oe.optional(function(){Vt.DYNAMIC=!0}),Vt}return null}return{elements:Je,primitive:Xe(),count:He(),instances:tt(cu,!1),offset:Le}}function Xo(Ge,we){var We=Ge.static,ut=Ge.dynamic,ht={};return Wt.forEach(function(Je){var Xe=_n(Je);function tt(Le,He){if(Je in We){var Ie=Le(We[Je]);ht[Xe]=rs(function(){return Ie})}else if(Je in ut){var rt=ut[Je];ht[Xe]=Ea(rt,function(vt,Vt){return He(vt,Vt,vt.invoke(Vt,rt))})}}switch(Je){case Gh:case I0:case Tg:case Gf:case ua:case zh:case Fh:case kf:case Bl:case fl:return tt(function(Le){return Oe.commandType(Le,"boolean",Je,we.commandStr),Le},function(Le,He,Ie){return Oe.optional(function(){Le.assert(He,"typeof "+Ie+'==="boolean"',"invalid flag "+Je,Le.commandStr)}),Ie});case Ip:return tt(function(Le){return Oe.commandParameter(Le,rh,"invalid "+Je,we.commandStr),rh[Le]},function(Le,He,Ie){var rt=Le.constants.compareFuncs;return Oe.optional(function(){Le.assert(He,Ie+" in "+rt,"invalid "+Je+", must be one of "+Object.keys(rh))}),He.def(rt,"[",Ie,"]")});case Rp:return tt(function(Le){return Oe.command(Ei(Le)&&Le.length===2&&typeof Le[0]=="number"&&typeof Le[1]=="number"&&Le[0]<=Le[1],"depth range is 2d array",we.commandStr),Le},function(Le,He,Ie){Oe.optional(function(){Le.assert(He,Le.shared.isArrayLike+"("+Ie+")&&"+Ie+".length===2&&typeof "+Ie+'[0]==="number"&&typeof '+Ie+'[1]==="number"&&'+Ie+"[0]<="+Ie+"[1]","depth range must be a 2d array")});var rt=He.def("+",Ie,"[0]"),vt=He.def("+",Ie,"[1]");return[rt,vt]});case Rf:return tt(function(Le){Oe.commandType(Le,"object","blend.func",we.commandStr);var He="srcRGB"in Le?Le.srcRGB:Le.src,Ie="srcAlpha"in Le?Le.srcAlpha:Le.src,rt="dstRGB"in Le?Le.dstRGB:Le.dst,vt="dstAlpha"in Le?Le.dstAlpha:Le.dst;return Oe.commandParameter(He,ml,Xe+".srcRGB",we.commandStr),Oe.commandParameter(Ie,ml,Xe+".srcAlpha",we.commandStr),Oe.commandParameter(rt,ml,Xe+".dstRGB",we.commandStr),Oe.commandParameter(vt,ml,Xe+".dstAlpha",we.commandStr),Oe.command(Og.indexOf(He+", "+rt)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+He+", "+rt+")",we.commandStr),[ml[He],ml[rt],ml[Ie],ml[vt]]},function(Le,He,Ie){var rt=Le.constants.blendFuncs;Oe.optional(function(){Le.assert(He,Ie+"&&typeof "+Ie+'==="object"',"invalid blend func, must be an object")});function vt(Zn,ur){var tr=He.def('"',Zn,ur,'" in ',Ie,"?",Ie,".",Zn,ur,":",Ie,".",Zn);return Oe.optional(function(){Le.assert(He,tr+" in "+rt,"invalid "+Je+"."+Zn+ur+", must be one of "+Object.keys(ml))}),tr}var Vt=vt("src","RGB"),Xt=vt("dst","RGB");Oe.optional(function(){var Zn=Le.constants.invalidBlendCombinations;Le.assert(He,Zn+".indexOf("+Vt+'+", "+'+Xt+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Lt=He.def(rt,"[",Vt,"]"),dn=He.def(rt,"[",vt("src","Alpha"),"]"),or=He.def(rt,"[",Xt,"]"),Vr=He.def(rt,"[",vt("dst","Alpha"),"]");return[Lt,or,dn,Vr]});case Np:return tt(function(Le){if(typeof Le=="string")return Oe.commandParameter(Le,Rt,"invalid "+Je,we.commandStr),[Rt[Le],Rt[Le]];if(typeof Le=="object")return Oe.commandParameter(Le.rgb,Rt,Je+".rgb",we.commandStr),Oe.commandParameter(Le.alpha,Rt,Je+".alpha",we.commandStr),[Rt[Le.rgb],Rt[Le.alpha]];Oe.commandRaise("invalid blend.equation",we.commandStr)},function(Le,He,Ie){var rt=Le.constants.blendEquations,vt=He.def(),Vt=He.def(),Xt=Le.cond("typeof ",Ie,'==="string"');return Oe.optional(function(){function Lt(dn,or,Vr){Le.assert(dn,Vr+" in "+rt,"invalid "+or+", must be one of "+Object.keys(Rt))}Lt(Xt.then,Je,Ie),Le.assert(Xt.else,Ie+"&&typeof "+Ie+'==="object"',"invalid "+Je),Lt(Xt.else,Je+".rgb",Ie+".rgb"),Lt(Xt.else,Je+".alpha",Ie+".alpha")}),Xt.then(vt,"=",Vt,"=",rt,"[",Ie,"];"),Xt.else(vt,"=",rt,"[",Ie,".rgb];",Vt,"=",rt,"[",Ie,".alpha];"),He(Xt),[vt,Vt]});case nd:return tt(function(Le){return Oe.command(Ei(Le)&&Le.length===4,"blend.color must be a 4d array",we.commandStr),Jo(4,function(He){return+Le[He]})},function(Le,He,Ie){return Oe.optional(function(){Le.assert(He,Le.shared.isArrayLike+"("+Ie+")&&"+Ie+".length===4","blend.color must be a 4d array")}),Jo(4,function(rt){return He.def("+",Ie,"[",rt,"]")})});case zl:return tt(function(Le){return Oe.commandType(Le,"number",Xe,we.commandStr),Le|0},function(Le,He,Ie){return Oe.optional(function(){Le.assert(He,"typeof "+Ie+'==="number"',"invalid stencil.mask")}),He.def(Ie,"|0")});case pl:return tt(function(Le){Oe.commandType(Le,"object",Xe,we.commandStr);var He=Le.cmp||"keep",Ie=Le.ref||0,rt="mask"in Le?Le.mask:-1;return Oe.commandParameter(He,rh,Je+".cmp",we.commandStr),Oe.commandType(Ie,"number",Je+".ref",we.commandStr),Oe.commandType(rt,"number",Je+".mask",we.commandStr),[rh[He],Ie,rt]},function(Le,He,Ie){var rt=Le.constants.compareFuncs;Oe.optional(function(){function Lt(){Le.assert(He,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Lt(Ie+"&&typeof ",Ie,'==="object"'),Lt('!("cmp" in ',Ie,")||(",Ie,".cmp in ",rt,")")});var vt=He.def('"cmp" in ',Ie,"?",rt,"[",Ie,".cmp]",":",ds),Vt=He.def(Ie,".ref|0"),Xt=He.def('"mask" in ',Ie,"?",Ie,".mask|0:-1");return[vt,Vt,Xt]});case Yd:case Ul:return tt(function(Le){Oe.commandType(Le,"object",Xe,we.commandStr);var He=Le.fail||"keep",Ie=Le.zfail||"keep",rt=Le.zpass||"keep";return Oe.commandParameter(He,hs,Je+".fail",we.commandStr),Oe.commandParameter(Ie,hs,Je+".zfail",we.commandStr),Oe.commandParameter(rt,hs,Je+".zpass",we.commandStr),[Je===Ul?Ga:nh,hs[He],hs[Ie],hs[rt]]},function(Le,He,Ie){var rt=Le.constants.stencilOps;Oe.optional(function(){Le.assert(He,Ie+"&&typeof "+Ie+'==="object"',"invalid "+Je)});function vt(Vt){return Oe.optional(function(){Le.assert(He,'!("'+Vt+'" in '+Ie+")||("+Ie+"."+Vt+" in "+rt+")","invalid "+Je+"."+Vt+", must be one of "+Object.keys(hs))}),He.def('"',Vt,'" in ',Ie,"?",rt,"[",Ie,".",Vt,"]:",ds)}return[Je===Ul?Ga:nh,vt("fail"),vt("zfail"),vt("zpass")]});case Bh:return tt(function(Le){Oe.commandType(Le,"object",Xe,we.commandStr);var He=Le.factor|0,Ie=Le.units|0;return Oe.commandType(He,"number",Xe+".factor",we.commandStr),Oe.commandType(Ie,"number",Xe+".units",we.commandStr),[He,Ie]},function(Le,He,Ie){Oe.optional(function(){Le.assert(He,Ie+"&&typeof "+Ie+'==="object"',"invalid "+Je)});var rt=He.def(Ie,".factor|0"),vt=He.def(Ie,".units|0");return[rt,vt]});case rd:return tt(function(Le){var He=0;return Le==="front"?He=nh:Le==="back"&&(He=Ga),Oe.command(!!He,Xe,we.commandStr),He},function(Le,He,Ie){return Oe.optional(function(){Le.assert(He,Ie+'==="front"||'+Ie+'==="back"',"invalid cull.face")}),He.def(Ie,'==="front"?',nh,":",Ga)});case wa:return tt(function(Le){return Oe.command(typeof Le=="number"&&Le>=_t.lineWidthDims[0]&&Le<=_t.lineWidthDims[1],"invalid line width, must be a positive number between "+_t.lineWidthDims[0]+" and "+_t.lineWidthDims[1],we.commandStr),Le},function(Le,He,Ie){return Oe.optional(function(){Le.assert(He,"typeof "+Ie+'==="number"&&'+Ie+">="+_t.lineWidthDims[0]+"&&"+Ie+"<="+_t.lineWidthDims[1],"invalid line width")}),Ie});case id:return tt(function(Le){return Oe.commandParameter(Le,ih,Xe,we.commandStr),ih[Le]},function(Le,He,Ie){return Oe.optional(function(){Le.assert(He,Ie+'==="cw"||'+Ie+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),He.def(Ie+'==="cw"?'+du+":"+go)});case jc:return tt(function(Le){return Oe.command(Ei(Le)&&Le.length===4,"color.mask must be length 4 array",we.commandStr),Le.map(function(He){return!!He})},function(Le,He,Ie){return Oe.optional(function(){Le.assert(He,Le.shared.isArrayLike+"("+Ie+")&&"+Ie+".length===4","invalid color.mask")}),Jo(4,function(rt){return"!!"+Ie+"["+rt+"]"})});case Lf:return tt(function(Le){Oe.command(typeof Le=="object"&&Le,Xe,we.commandStr);var He="value"in Le?Le.value:1,Ie=!!Le.invert;return Oe.command(typeof He=="number"&&He>=0&&He<=1,"sample.coverage.value must be a number between 0 and 1",we.commandStr),[He,Ie]},function(Le,He,Ie){Oe.optional(function(){Le.assert(He,Ie+"&&typeof "+Ie+'==="object"',"invalid sample.coverage")});var rt=He.def('"value" in ',Ie,"?+",Ie,".value:1"),vt=He.def("!!",Ie,".invert");return[rt,vt]})}}),ht}function fs(Ge,we){var We=Ge.static,ut=Ge.dynamic,ht={};return Object.keys(We).forEach(function(Je){var Xe=We[Je],tt;if(typeof Xe=="number"||typeof Xe=="boolean")tt=rs(function(){return Xe});else if(typeof Xe=="function"){var Le=Xe._reglType;Le==="texture2d"||Le==="textureCube"?tt=rs(function(He){return He.link(Xe)}):Le==="framebuffer"||Le==="framebufferCube"?(Oe.command(Xe.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Je+'"',we.commandStr),tt=rs(function(He){return He.link(Xe.color[0])})):Oe.commandRaise('invalid data for uniform "'+Je+'"',we.commandStr)}else Ei(Xe)?tt=rs(function(He){var Ie=He.global.def("[",Jo(Xe.length,function(rt){return Oe.command(typeof Xe[rt]=="number"||typeof Xe[rt]=="boolean","invalid uniform "+Je,He.commandStr),Xe[rt]}),"]");return Ie}):Oe.commandRaise('invalid or missing data for uniform "'+Je+'"',we.commandStr);tt.value=Xe,ht[Je]=tt}),Object.keys(ut).forEach(function(Je){var Xe=ut[Je];ht[Je]=Ea(Xe,function(tt,Le){return tt.invoke(Le,Xe)})}),ht}function Kr(Ge,we){var We=Ge.static,ut=Ge.dynamic,ht={};return Object.keys(We).forEach(function(Je){var Xe=We[Je],tt=Pe.id(Je),Le=new ft;if(zp(Xe))Le.state=qs,Le.buffer=pt.getBuffer(pt.create(Xe,vl,!1,!0)),Le.type=0;else{var He=pt.getBuffer(Xe);if(He)Le.state=qs,Le.buffer=He,Le.type=0;else if(Oe.command(typeof Xe=="object"&&Xe,"invalid data for attribute "+Je,we.commandStr),"constant"in Xe){var Ie=Xe.constant;Le.buffer="null",Le.state=ec,typeof Ie=="number"?Le.x=Ie:(Oe.command(Ei(Ie)&&Ie.length>0&&Ie.length<=4,"invalid constant for attribute "+Je,we.commandStr),hl.forEach(function(or,Vr){Vr<Ie.length&&(Le[or]=Ie[Vr])}))}else{zp(Xe.buffer)?He=pt.getBuffer(pt.create(Xe.buffer,vl,!1,!0)):He=pt.getBuffer(Xe.buffer),Oe.command(!!He,'missing buffer for attribute "'+Je+'"',we.commandStr);var rt=Xe.offset|0;Oe.command(rt>=0,'invalid offset for attribute "'+Je+'"',we.commandStr);var vt=Xe.stride|0;Oe.command(vt>=0&&vt<256,'invalid stride for attribute "'+Je+'", must be integer betweeen [0, 255]',we.commandStr);var Vt=Xe.size|0;Oe.command(!("size"in Xe)||Vt>0&&Vt<=4,'invalid size for attribute "'+Je+'", must be 1,2,3,4',we.commandStr);var Xt=!!Xe.normalized,Lt=0;"type"in Xe&&(Oe.commandParameter(Xe.type,Ws,"invalid type for attribute "+Je,we.commandStr),Lt=Ws[Xe.type]);var dn=Xe.divisor|0;"divisor"in Xe&&(Oe.command(dn===0||fn,'cannot specify divisor for attribute "'+Je+'", instancing not supported',we.commandStr),Oe.command(dn>=0,'invalid divisor for attribute "'+Je+'"',we.commandStr)),Oe.optional(function(){var or=we.commandStr,Vr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Xe).forEach(function(Zn){Oe.command(Vr.indexOf(Zn)>=0,'unknown parameter "'+Zn+'" for attribute pointer "'+Je+'" (valid parameters are '+Vr+")",or)})}),Le.buffer=He,Le.state=qs,Le.size=Vt,Le.normalized=Xt,Le.type=Lt||He.dtype,Le.offset=rt,Le.stride=vt,Le.divisor=dn}}ht[Je]=rs(function(or,Vr){var Zn=or.attribCache;if(tt in Zn)return Zn[tt];var ur={isStream:!1};return Object.keys(Le).forEach(function(tr){ur[tr]=Le[tr]}),Le.buffer&&(ur.buffer=or.link(Le.buffer),ur.type=ur.type||ur.buffer+".dtype"),Zn[tt]=ur,ur})}),Object.keys(ut).forEach(function(Je){var Xe=ut[Je];function tt(Le,He){var Ie=Le.invoke(He,Xe),rt=Le.shared,vt=Le.constants,Vt=rt.isBufferArgs,Xt=rt.buffer;Oe.optional(function(){Le.assert(He,Ie+"&&(typeof "+Ie+'==="object"||typeof '+Ie+'==="function")&&('+Vt+"("+Ie+")||"+Xt+".getBuffer("+Ie+")||"+Xt+".getBuffer("+Ie+".buffer)||"+Vt+"("+Ie+'.buffer)||("constant" in '+Ie+"&&(typeof "+Ie+'.constant==="number"||'+rt.isArrayLike+"("+Ie+".constant))))",'invalid dynamic attribute "'+Je+'"')});var Lt={isStream:He.def(!1)},dn=new ft;dn.state=qs,Object.keys(dn).forEach(function(ur){Lt[ur]=He.def(""+dn[ur])});var or=Lt.buffer,Vr=Lt.type;He("if(",Vt,"(",Ie,")){",Lt.isStream,"=true;",or,"=",Xt,".createStream(",vl,",",Ie,");",Vr,"=",or,".dtype;","}else{",or,"=",Xt,".getBuffer(",Ie,");","if(",or,"){",Vr,"=",or,".dtype;",'}else if("constant" in ',Ie,"){",Lt.state,"=",ec,";","if(typeof "+Ie+'.constant === "number"){',Lt[hl[0]],"=",Ie,".constant;",hl.slice(1).map(function(ur){return Lt[ur]}).join("="),"=0;","}else{",hl.map(function(ur,tr){return Lt[ur]+"="+Ie+".constant.length>"+tr+"?"+Ie+".constant["+tr+"]:0;"}).join(""),"}}else{","if(",Vt,"(",Ie,".buffer)){",or,"=",Xt,".createStream(",vl,",",Ie,".buffer);","}else{",or,"=",Xt,".getBuffer(",Ie,".buffer);","}",Vr,'="type" in ',Ie,"?",vt.glTypes,"[",Ie,".type]:",or,".dtype;",Lt.normalized,"=!!",Ie,".normalized;");function Zn(ur){He(Lt[ur],"=",Ie,".",ur,"|0;")}return Zn("size"),Zn("offset"),Zn("stride"),Zn("divisor"),He("}}"),He.exit("if(",Lt.isStream,"){",Xt,".destroyStream(",or,");","}"),Lt}ht[Je]=Ea(Xe,tt)}),ht}function ps(Ge,we){var We=Ge.static,ut=Ge.dynamic;if(lu in We){var ht=We[lu];return ht!==null&&hn.getVAO(ht)===null&&(ht=hn.createVAO(ht)),rs(function(Xe){return Xe.link(hn.getVAO(ht))})}else if(lu in ut){var Je=ut[lu];return Ea(Je,function(Xe,tt){var Le=Xe.invoke(tt,Je);return tt.def(Xe.shared.vao+".getVAO("+Le+")")})}return null}function xo(Ge){var we=Ge.static,We=Ge.dynamic,ut={};return Object.keys(we).forEach(function(ht){var Je=we[ht];ut[ht]=rs(function(Xe,tt){return typeof Je=="number"||typeof Je=="boolean"?""+Je:Xe.link(Je)})}),Object.keys(We).forEach(function(ht){var Je=We[ht];ut[ht]=Ea(Je,function(Xe,tt){return Xe.invoke(tt,Je)})}),ut}function gs(Ge,we,We,ut,ht){var Je=Ge.static,Xe=Ge.dynamic;Oe.optional(function(){var Zn=[Hc,gc,Uh,sd,Mc,kp,ad,cu,Kd,lu].concat(Wt);function ur(tr){Object.keys(tr).forEach(function(Si){Oe.command(Zn.indexOf(Si)>=0,'unknown parameter "'+Si+'"',ht.commandStr)})}ur(Je),ur(Xe)});var tt=Dr(Ge,we),Le=qn(Ge,ht),He=si(Ge,Le,ht),Ie=Pi(Ge,ht),rt=Xo(Ge,ht),vt=Wr(Ge,ht,tt);function Vt(Zn){var ur=He[Zn];ur&&(rt[Zn]=ur)}Vt(Vl),Vt(_n(od));var Xt=Object.keys(rt).length>0,Lt={framebuffer:Le,draw:Ie,shader:vt,state:rt,dirty:Xt,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Lt.profile=Fr(Ge,ht),Lt.uniforms=fs(We,ht),Lt.drawVAO=Lt.scopeVAO=ps(Ge,ht),!Lt.drawVAO&&vt.program&&!tt&&ze.angle_instanced_arrays){var dn=!0,or=vt.program.attributes.map(function(Zn){var ur=we.static[Zn];return dn=dn&&!!ur,ur});if(dn&&or.length>0){var Vr=hn.getVAO(hn.createVAO(or));Lt.drawVAO=new Fa(null,null,null,function(Zn,ur){return Zn.link(Vr)}),Lt.useVAO=!0}}return tt?Lt.useVAO=!0:Lt.attributes=Kr(we,ht),Lt.context=xo(ut,ht),Lt}function Co(Ge,we,We){var ut=Ge.shared,ht=ut.context,Je=Ge.scope();Object.keys(We).forEach(function(Xe){we.save(ht,"."+Xe);var tt=We[Xe],Le=tt.append(Ge,we);Array.isArray(Le)?Je(ht,".",Xe,"=[",Le.join(),"];"):Je(ht,".",Xe,"=",Le,";")}),we(Je)}function Es(Ge,we,We,ut){var ht=Ge.shared,Je=ht.gl,Xe=ht.framebuffer,tt;Vn&&(tt=we.def(ht.extensions,".webgl_draw_buffers"));var Le=Ge.constants,He=Le.drawBuffer,Ie=Le.backBuffer,rt;We?rt=We.append(Ge,we):rt=we.def(Xe,".next"),ut||we("if(",rt,"!==",Xe,".cur){"),we("if(",rt,"){",Je,".bindFramebuffer(",$h,",",rt,".framebuffer);"),Vn&&we(tt,".drawBuffersWEBGL(",He,"[",rt,".colorAttachments.length]);"),we("}else{",Je,".bindFramebuffer(",$h,",null);"),Vn&&we(tt,".drawBuffersWEBGL(",Ie,");"),we("}",Xe,".cur=",rt,";"),ut||we("}")}function Ao(Ge,we,We){var ut=Ge.shared,ht=ut.gl,Je=Ge.current,Xe=Ge.next,tt=ut.current,Le=ut.next,He=Ge.cond(tt,".dirty");Wt.forEach(function(Ie){var rt=_n(Ie);if(!(rt in We.state)){var vt,Vt;if(rt in Xe){vt=Xe[rt],Vt=Je[rt];var Xt=Jo(tn[rt].length,function(dn){return He.def(vt,"[",dn,"]")});He(Ge.cond(Xt.map(function(dn,or){return dn+"!=="+Vt+"["+or+"]"}).join("||")).then(ht,".",nn[rt],"(",Xt,");",Xt.map(function(dn,or){return Vt+"["+or+"]="+dn}).join(";"),";"))}else{vt=He.def(Le,".",rt);var Lt=Ge.cond(vt,"!==",tt,".",rt);He(Lt),rt in An?Lt(Ge.cond(vt).then(ht,".enable(",An[rt],");").else(ht,".disable(",An[rt],");"),tt,".",rt,"=",vt,";"):Lt(ht,".",nn[rt],"(",vt,");",tt,".",rt,"=",vt,";")}}}),Object.keys(We.state).length===0&&He(tt,".dirty=false;"),we(He)}function is(Ge,we,We,ut){var ht=Ge.shared,Je=Ge.current,Xe=ht.current,tt=ht.gl;Pg(Object.keys(We)).forEach(function(Le){var He=We[Le];if(!(ut&&!ut(He))){var Ie=He.append(Ge,we);if(An[Le]){var rt=An[Le];yl(He)?Ie?we(tt,".enable(",rt,");"):we(tt,".disable(",rt,");"):we(Ge.cond(Ie).then(tt,".enable(",rt,");").else(tt,".disable(",rt,");")),we(Xe,".",Le,"=",Ie,";")}else if(Ei(Ie)){var vt=Je[Le];we(tt,".",nn[Le],"(",Ie,");",Ie.map(function(Vt,Xt){return vt+"["+Xt+"]="+Vt}).join(";"),";")}else we(tt,".",nn[Le],"(",Ie,");",Xe,".",Le,"=",Ie,";")}})}function Zo(Ge,we){fn&&(Ge.instancing=we.def(Ge.shared.extensions,".angle_instanced_arrays"))}function Br(Ge,we,We,ut,ht){var Je=Ge.shared,Xe=Ge.stats,tt=Je.current,Le=Je.timer,He=We.profile;function Ie(){return typeof performance>"u"?"Date.now()":"performance.now()"}var rt,vt;function Vt(Zn){rt=we.def(),Zn(rt,"=",Ie(),";"),typeof ht=="string"?Zn(Xe,".count+=",ht,";"):Zn(Xe,".count++;"),cn&&(ut?(vt=we.def(),Zn(vt,"=",Le,".getNumPendingQueries();")):Zn(Le,".beginQuery(",Xe,");"))}function Xt(Zn){Zn(Xe,".cpuTime+=",Ie(),"-",rt,";"),cn&&(ut?Zn(Le,".pushScopeStats(",vt,",",Le,".getNumPendingQueries(),",Xe,");"):Zn(Le,".endQuery();"))}function Lt(Zn){var ur=we.def(tt,".profile");we(tt,".profile=",Zn,";"),we.exit(tt,".profile=",ur,";")}var dn;if(He){if(yl(He)){He.enable?(Vt(we),Xt(we.exit),Lt("true")):Lt("false");return}dn=He.append(Ge,we),Lt(dn)}else dn=we.def(tt,".profile");var or=Ge.block();Vt(or),we("if(",dn,"){",or,"}");var Vr=Ge.block();Xt(Vr),we.exit("if(",dn,"){",Vr,"}")}function Vo(Ge,we,We,ut,ht){var Je=Ge.shared;function Xe(Le){switch(Le){case hd:case zf:case fd:return 2;case ws:case Hh:case Uf:return 3;case tc:case Ps:case vc:return 4;default:return 1}}function tt(Le,He,Ie){var rt=Je.gl,vt=we.def(Le,".location"),Vt=we.def(Je.attributes,"[",vt,"]"),Xt=Ie.state,Lt=Ie.buffer,dn=[Ie.x,Ie.y,Ie.z,Ie.w],or=["buffer","normalized","offset","stride"];function Vr(){we("if(!",Vt,".buffer){",rt,".enableVertexAttribArray(",vt,");}");var ur=Ie.type,tr;if(Ie.size?tr=we.def(Ie.size,"||",He):tr=He,we("if(",Vt,".type!==",ur,"||",Vt,".size!==",tr,"||",or.map(function(os){return Vt+"."+os+"!=="+Ie[os]}).join("||"),"){",rt,".bindBuffer(",vl,",",Lt,".buffer);",rt,".vertexAttribPointer(",[vt,tr,ur,Ie.normalized,Ie.stride,Ie.offset],");",Vt,".type=",ur,";",Vt,".size=",tr,";",or.map(function(os){return Vt+"."+os+"="+Ie[os]+";"}).join(""),"}"),fn){var Si=Ie.divisor;we("if(",Vt,".divisor!==",Si,"){",Ge.instancing,".vertexAttribDivisorANGLE(",[vt,Si],");",Vt,".divisor=",Si,";}")}}function Zn(){we("if(",Vt,".buffer){",rt,".disableVertexAttribArray(",vt,");",Vt,".buffer=null;","}if(",hl.map(function(ur,tr){return Vt+"."+ur+"!=="+dn[tr]}).join("||"),"){",rt,".vertexAttrib4f(",vt,",",dn,");",hl.map(function(ur,tr){return Vt+"."+ur+"="+dn[tr]+";"}).join(""),"}")}Xt===qs?Vr():Xt===ec?Zn():(we("if(",Xt,"===",qs,"){"),Vr(),we("}else{"),Zn(),we("}"))}ut.forEach(function(Le){var He=Le.name,Ie=We.attributes[He],rt;if(Ie){if(!ht(Ie))return;rt=Ie.append(Ge,we)}else{if(!ht(Up))return;var vt=Ge.scopeAttrib(He);Oe.optional(function(){Ge.assert(we,vt+".state","missing attribute "+He)}),rt={},Object.keys(new ft).forEach(function(Vt){rt[Vt]=we.def(vt,".",Vt)})}tt(Ge.link(Le),Xe(Le.info.type),rt)})}function Ii(Ge,we,We,ut,ht){for(var Je=Ge.shared,Xe=Je.gl,tt,Le=0;Le<ut.length;++Le){var He=ut[Le],Ie=He.name,rt=He.info.type,vt=We.uniforms[Ie],Vt=Ge.link(He),Xt=Vt+".location",Lt;if(vt){if(!ht(vt))continue;if(yl(vt)){var dn=vt.value;if(Oe.command(dn!==null&&typeof dn<"u",'missing uniform "'+Ie+'"',Ge.commandStr),rt===th||rt===pd){Oe.command(typeof dn=="function"&&(rt===th&&(dn._reglType==="texture2d"||dn._reglType==="framebuffer")||rt===pd&&(dn._reglType==="textureCube"||dn._reglType==="framebufferCube")),"invalid texture for uniform "+Ie,Ge.commandStr);var or=Ge.link(dn._texture||dn.color[0]._texture);we(Xe,".uniform1i(",Xt,",",or+".bind());"),we.exit(or,".unbind();")}else if(rt===La||rt===xi||rt===Ds){Oe.optional(function(){Oe.command(Ei(dn),"invalid matrix for uniform "+Ie,Ge.commandStr),Oe.command(rt===La&&dn.length===4||rt===xi&&dn.length===9||rt===Ds&&dn.length===16,"invalid length for matrix uniform "+Ie,Ge.commandStr)});var Vr=Ge.global.def("new Float32Array(["+Array.prototype.slice.call(dn)+"])"),Zn=2;rt===xi?Zn=3:rt===Ds&&(Zn=4),we(Xe,".uniformMatrix",Zn,"fv(",Xt,",false,",Vr,");")}else{switch(rt){case dd:Oe.commandType(dn,"number","uniform "+Ie,Ge.commandStr),tt="1f";break;case hd:Oe.command(Ei(dn)&&dn.length===2,"uniform "+Ie,Ge.commandStr),tt="2f";break;case ws:Oe.command(Ei(dn)&&dn.length===3,"uniform "+Ie,Ge.commandStr),tt="3f";break;case tc:Oe.command(Ei(dn)&&dn.length===4,"uniform "+Ie,Ge.commandStr),tt="4f";break;case Wn:Oe.commandType(dn,"boolean","uniform "+Ie,Ge.commandStr),tt="1i";break;case eh:Oe.commandType(dn,"number","uniform "+Ie,Ge.commandStr),tt="1i";break;case fd:Oe.command(Ei(dn)&&dn.length===2,"uniform "+Ie,Ge.commandStr),tt="2i";break;case zf:Oe.command(Ei(dn)&&dn.length===2,"uniform "+Ie,Ge.commandStr),tt="2i";break;case Uf:Oe.command(Ei(dn)&&dn.length===3,"uniform "+Ie,Ge.commandStr),tt="3i";break;case Hh:Oe.command(Ei(dn)&&dn.length===3,"uniform "+Ie,Ge.commandStr),tt="3i";break;case vc:Oe.command(Ei(dn)&&dn.length===4,"uniform "+Ie,Ge.commandStr),tt="4i";break;case Ps:Oe.command(Ei(dn)&&dn.length===4,"uniform "+Ie,Ge.commandStr),tt="4i";break}we(Xe,".uniform",tt,"(",Xt,",",Ei(dn)?Array.prototype.slice.call(dn):dn,");")}continue}else Lt=vt.append(Ge,we)}else{if(!ht(Up))continue;Lt=we.def(Je.uniforms,"[",Pe.id(Ie),"]")}rt===th?(Oe(!Array.isArray(Lt),"must specify a scalar prop for textures"),we("if(",Lt,"&&",Lt,'._reglType==="framebuffer"){',Lt,"=",Lt,".color[0];","}")):rt===pd&&(Oe(!Array.isArray(Lt),"must specify a scalar prop for cube maps"),we("if(",Lt,"&&",Lt,'._reglType==="framebufferCube"){',Lt,"=",Lt,".color[0];","}")),Oe.optional(function(){function rc(Qs,Ig){Ge.assert(we,Qs,'bad data or missing for uniform "'+Ie+'".  '+Ig)}function $f(Qs){Oe(!Array.isArray(Lt),"must not specify an array type for uniform"),rc("typeof "+Lt+'==="'+Qs+'"',"invalid type, expected "+Qs)}function mc(Qs,Ig){Array.isArray(Lt)?Oe(Lt.length===Qs,"must have length "+Qs):rc(Je.isArrayLike+"("+Lt+")&&"+Lt+".length==="+Qs,"invalid vector, should have length "+Qs,Ge.commandStr)}function Ng(Qs){Oe(!Array.isArray(Lt),"must not specify a value type"),rc("typeof "+Lt+'==="function"&&'+Lt+'._reglType==="texture'+(Qs===hi?"2d":"Cube")+'"',"invalid texture type",Ge.commandStr)}switch(rt){case eh:$f("number");break;case zf:mc(2,"number");break;case Hh:mc(3,"number");break;case Ps:mc(4,"number");break;case dd:$f("number");break;case hd:mc(2,"number");break;case ws:mc(3,"number");break;case tc:mc(4,"number");break;case Wn:$f("boolean");break;case fd:mc(2,"boolean");break;case Uf:mc(3,"boolean");break;case vc:mc(4,"boolean");break;case La:mc(4,"number");break;case xi:mc(9,"number");break;case Ds:mc(16,"number");break;case th:Ng(hi);break;case pd:Ng(Ff);break}});var ur=1;switch(rt){case th:case pd:var tr=we.def(Lt,"._texture");we(Xe,".uniform1i(",Xt,",",tr,".bind());"),we.exit(tr,".unbind();");continue;case eh:case Wn:tt="1i";break;case zf:case fd:tt="2i",ur=2;break;case Hh:case Uf:tt="3i",ur=3;break;case Ps:case vc:tt="4i",ur=4;break;case dd:tt="1f";break;case hd:tt="2f",ur=2;break;case ws:tt="3f",ur=3;break;case tc:tt="4f",ur=4;break;case La:tt="Matrix2fv";break;case xi:tt="Matrix3fv";break;case Ds:tt="Matrix4fv";break}if(we(Xe,".uniform",tt,"(",Xt,","),tt.charAt(0)==="M"){var Si=Math.pow(rt-La+2,2),os=Ge.global.def("new Float32Array(",Si,")");Array.isArray(Lt)?we("false,(",Jo(Si,function(rc){return os+"["+rc+"]="+Lt[rc]}),",",os,")"):we("false,(Array.isArray(",Lt,")||",Lt," instanceof Float32Array)?",Lt,":(",Jo(Si,function(rc){return os+"["+rc+"]="+Lt+"["+rc+"]"}),",",os,")")}else ur>1?we(Jo(ur,function(rc){return Array.isArray(Lt)?Lt[rc]:Lt+"["+rc+"]"})):(Oe(!Array.isArray(Lt),"uniform value must not be an array"),we(Lt));we(");")}}function mr(Ge,we,We,ut){var ht=Ge.shared,Je=ht.gl,Xe=ht.draw,tt=ut.draw;function Le(){var tr=tt.elements,Si,os=we;return tr?((tr.contextDep&&ut.contextDynamic||tr.propDep)&&(os=We),Si=tr.append(Ge,os)):Si=os.def(Xe,".",sd),Si&&os("if("+Si+")"+Je+".bindBuffer("+uu+","+Si+".buffer.buffer);"),Si}function He(){var tr=tt.count,Si,os=we;return tr?((tr.contextDep&&ut.contextDynamic||tr.propDep)&&(os=We),Si=tr.append(Ge,os),Oe.optional(function(){tr.MISSING&&Ge.assert(we,"false","missing vertex count"),tr.DYNAMIC&&Ge.assert(os,Si+">=0","missing vertex count")})):(Si=os.def(Xe,".",ad),Oe.optional(function(){Ge.assert(os,Si+">=0","missing vertex count")})),Si}var Ie=Le();function rt(tr){var Si=tt[tr];return Si?Si.contextDep&&ut.contextDynamic||Si.propDep?Si.append(Ge,We):Si.append(Ge,we):we.def(Xe,".",tr)}var vt=rt(Mc),Vt=rt(kp),Xt=He();if(typeof Xt=="number"){if(Xt===0)return}else We("if(",Xt,"){"),We.exit("}");var Lt,dn;fn&&(Lt=rt(cu),dn=Ge.instancing);var or=Ie+".type",Vr=tt.elements&&yl(tt.elements);function Zn(){function tr(){We(dn,".drawElementsInstancedANGLE(",[vt,Xt,or,Vt+"<<(("+or+"-"+Fl+")>>1)",Lt],");")}function Si(){We(dn,".drawArraysInstancedANGLE(",[vt,Vt,Xt,Lt],");")}Ie?Vr?tr():(We("if(",Ie,"){"),tr(),We("}else{"),Si(),We("}")):Si()}function ur(){function tr(){We(Je+".drawElements("+[vt,Xt,or,Vt+"<<(("+or+"-"+Fl+")>>1)"]+");")}function Si(){We(Je+".drawArrays("+[vt,Vt,Xt]+");")}Ie?Vr?tr():(We("if(",Ie,"){"),tr(),We("}else{"),Si(),We("}")):Si()}fn&&(typeof Lt!="number"||Lt>=0)?typeof Lt=="string"?(We("if(",Lt,">0){"),Zn(),We("}else if(",Lt,"<0){"),ur(),We("}")):Zn():ur()}function li(Ge,we,We,ut,ht){var Je=Cr(),Xe=Je.proc("body",ht);return Oe.optional(function(){Je.commandStr=we.commandStr,Je.command=Je.link(we.commandStr)}),fn&&(Je.instancing=Xe.def(Je.shared.extensions,".angle_instanced_arrays")),Ge(Je,Xe,We,ut),Je.compile().body}function Ci(Ge,we,We,ut){Zo(Ge,we),We.useVAO?We.drawVAO?we(Ge.shared.vao,".setVAO(",We.drawVAO.append(Ge,we),");"):we(Ge.shared.vao,".setVAO(",Ge.shared.vao,".targetVAO);"):(we(Ge.shared.vao,".setVAO(null);"),Vo(Ge,we,We,ut.attributes,function(){return!0})),Ii(Ge,we,We,ut.uniforms,function(){return!0}),mr(Ge,we,we,We)}function vs(Ge,we){var We=Ge.proc("draw",1);Zo(Ge,We),Co(Ge,We,we.context),Es(Ge,We,we.framebuffer),Ao(Ge,We,we),is(Ge,We,we.state),Br(Ge,We,we,!1,!0);var ut=we.shader.progVar.append(Ge,We);if(We(Ge.shared.gl,".useProgram(",ut,".program);"),we.shader.program)Ci(Ge,We,we,we.shader.program);else{We(Ge.shared.vao,".setVAO(null);");var ht=Ge.global.def("{}"),Je=We.def(ut,".id"),Xe=We.def(ht,"[",Je,"]");We(Ge.cond(Xe).then(Xe,".call(this,a0);").else(Xe,"=",ht,"[",Je,"]=",Ge.link(function(tt){return li(Ci,Ge,we,tt,1)}),"(",ut,");",Xe,".call(this,a0);"))}Object.keys(we.state).length>0&&We(Ge.shared.current,".dirty=true;")}function Hl(Ge,we,We,ut){Ge.batchId="a1",Zo(Ge,we);function ht(){return!0}Vo(Ge,we,We,ut.attributes,ht),Ii(Ge,we,We,ut.uniforms,ht),mr(Ge,we,we,We)}function sh(Ge,we,We,ut){Zo(Ge,we);var ht=We.contextDep,Je=we.def(),Xe="a0",tt="a1",Le=we.def();Ge.shared.props=Le,Ge.batchId=Je;var He=Ge.scope(),Ie=Ge.scope();we(He.entry,"for(",Je,"=0;",Je,"<",tt,";++",Je,"){",Le,"=",Xe,"[",Je,"];",Ie,"}",He.exit);function rt(or){return or.contextDep&&ht||or.propDep}function vt(or){return!rt(or)}if(We.needsContext&&Co(Ge,Ie,We.context),We.needsFramebuffer&&Es(Ge,Ie,We.framebuffer),is(Ge,Ie,We.state,rt),We.profile&&rt(We.profile)&&Br(Ge,Ie,We,!1,!0),ut)We.useVAO?We.drawVAO?rt(We.drawVAO)?Ie(Ge.shared.vao,".setVAO(",We.drawVAO.append(Ge,Ie),");"):He(Ge.shared.vao,".setVAO(",We.drawVAO.append(Ge,He),");"):He(Ge.shared.vao,".setVAO(",Ge.shared.vao,".targetVAO);"):(He(Ge.shared.vao,".setVAO(null);"),Vo(Ge,He,We,ut.attributes,vt),Vo(Ge,Ie,We,ut.attributes,rt)),Ii(Ge,He,We,ut.uniforms,vt),Ii(Ge,Ie,We,ut.uniforms,rt),mr(Ge,He,Ie,We);else{var Vt=Ge.global.def("{}"),Xt=We.shader.progVar.append(Ge,Ie),Lt=Ie.def(Xt,".id"),dn=Ie.def(Vt,"[",Lt,"]");Ie(Ge.shared.gl,".useProgram(",Xt,".program);","if(!",dn,"){",dn,"=",Vt,"[",Lt,"]=",Ge.link(function(or){return li(Hl,Ge,We,or,2)}),"(",Xt,");}",dn,".call(this,a0[",Je,"],",Je,");")}}function Be(Ge,we){var We=Ge.proc("batch",2);Ge.batchId="0",Zo(Ge,We);var ut=!1,ht=!0;Object.keys(we.context).forEach(function(Vt){ut=ut||we.context[Vt].propDep}),ut||(Co(Ge,We,we.context),ht=!1);var Je=we.framebuffer,Xe=!1;Je?(Je.propDep?ut=Xe=!0:Je.contextDep&&ut&&(Xe=!0),Xe||Es(Ge,We,Je)):Es(Ge,We,null),we.state.viewport&&we.state.viewport.propDep&&(ut=!0);function tt(Vt){return Vt.contextDep&&ut||Vt.propDep}Ao(Ge,We,we),is(Ge,We,we.state,function(Vt){return!tt(Vt)}),(!we.profile||!tt(we.profile))&&Br(Ge,We,we,!1,"a1"),we.contextDep=ut,we.needsContext=ht,we.needsFramebuffer=Xe;var Le=we.shader.progVar;if(Le.contextDep&&ut||Le.propDep)sh(Ge,We,we,null);else{var He=Le.append(Ge,We);if(We(Ge.shared.gl,".useProgram(",He,".program);"),we.shader.program)sh(Ge,We,we,we.shader.program);else{We(Ge.shared.vao,".setVAO(null);");var Ie=Ge.global.def("{}"),rt=We.def(He,".id"),vt=We.def(Ie,"[",rt,"]");We(Ge.cond(vt).then(vt,".call(this,a0,a1);").else(vt,"=",Ie,"[",rt,"]=",Ge.link(function(Vt){return li(sh,Ge,we,Vt,2)}),"(",He,");",vt,".call(this,a0,a1);"))}}Object.keys(we.state).length>0&&We(Ge.shared.current,".dirty=true;")}function Dt(Ge,we){var We=Ge.proc("scope",3);Ge.batchId="a2";var ut=Ge.shared,ht=ut.current;Co(Ge,We,we.context),we.framebuffer&&we.framebuffer.append(Ge,We),Pg(Object.keys(we.state)).forEach(function(Xe){var tt=we.state[Xe],Le=tt.append(Ge,We);Ei(Le)?Le.forEach(function(He,Ie){We.set(Ge.next[Xe],"["+Ie+"]",He)}):We.set(ut.next,"."+Xe,Le)}),Br(Ge,We,we,!0,!0),[sd,kp,ad,cu,Mc].forEach(function(Xe){var tt=we.draw[Xe];!tt||We.set(ut.draw,"."+Xe,""+tt.append(Ge,We))}),Object.keys(we.uniforms).forEach(function(Xe){var tt=we.uniforms[Xe].append(Ge,We);Array.isArray(tt)&&(tt="["+tt.join()+"]"),We.set(ut.uniforms,"["+Pe.id(Xe)+"]",tt)}),Object.keys(we.attributes).forEach(function(Xe){var tt=we.attributes[Xe].append(Ge,We),Le=Ge.scopeAttrib(Xe);Object.keys(new ft).forEach(function(He){We.set(Le,"."+He,tt[He])})}),we.scopeVAO&&We.set(ut.vao,".targetVAO",we.scopeVAO.append(Ge,We));function Je(Xe){var tt=we.shader[Xe];tt&&We.set(ut.shader,"."+Xe,tt.append(Ge,We))}Je(gc),Je(Uh),Object.keys(we.state).length>0&&(We(ht,".dirty=true;"),We.exit(ht,".dirty=true;")),We("a1(",Ge.shared.context,",a0,",Ge.batchId,");")}function Et(Ge){if(!(typeof Ge!="object"||Ei(Ge))){for(var we=Object.keys(Ge),We=0;We<we.length;++We)if(zi.isDynamic(Ge[we[We]]))return!0;return!1}}function $n(Ge,we,We){var ut=we.static[We];if(!ut||!Et(ut))return;var ht=Ge.global,Je=Object.keys(ut),Xe=!1,tt=!1,Le=!1,He=Ge.global.def("{}");Je.forEach(function(rt){var vt=ut[rt];if(zi.isDynamic(vt)){typeof vt=="function"&&(vt=ut[rt]=zi.unbox(vt));var Vt=Ea(vt,null);Xe=Xe||Vt.thisDep,Le=Le||Vt.propDep,tt=tt||Vt.contextDep}else{switch(ht(He,".",rt,"="),typeof vt){case"number":ht(vt);break;case"string":ht('"',vt,'"');break;case"object":Array.isArray(vt)&&ht("[",vt.join(),"]");break;default:ht(Ge.link(vt));break}ht(";")}});function Ie(rt,vt){Je.forEach(function(Vt){var Xt=ut[Vt];if(!!zi.isDynamic(Xt)){var Lt=rt.invoke(vt,Xt);vt(He,".",Vt,"=",Lt,";")}})}we.dynamic[We]=new zi.DynamicVariable(ed,{thisDep:Xe,contextDep:tt,propDep:Le,ref:He,append:Ie}),delete we.static[We]}function ti(Ge,we,We,ut,ht){var Je=Cr();Je.stats=Je.link(ht),Object.keys(we.static).forEach(function(tt){$n(Je,we,tt)}),Jd.forEach(function(tt){$n(Je,Ge,tt)});var Xe=gs(Ge,we,We,ut,Je);return vs(Je,Xe),Dt(Je,Xe),Be(Je,Xe),M(Je.compile(),{destroy:function(){Xe.shader.program.destroy()}})}return{next:zn,current:tn,procs:function(){var Ge=Cr(),we=Ge.proc("poll"),We=Ge.proc("refresh"),ut=Ge.block();we(ut),We(ut);var ht=Ge.shared,Je=ht.gl,Xe=ht.next,tt=ht.current;ut(tt,".dirty=false;"),Es(Ge,we),Es(Ge,We,null,!0);var Le;fn&&(Le=Ge.link(fn)),ze.oes_vertex_array_object&&We(Ge.link(ze.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var He=0;He<_t.maxAttributes;++He){var Ie=We.def(ht.attributes,"[",He,"]"),rt=Ge.cond(Ie,".buffer");rt.then(Je,".enableVertexAttribArray(",He,");",Je,".bindBuffer(",vl,",",Ie,".buffer.buffer);",Je,".vertexAttribPointer(",He,",",Ie,".size,",Ie,".type,",Ie,".normalized,",Ie,".stride,",Ie,".offset);").else(Je,".disableVertexAttribArray(",He,");",Je,".vertexAttrib4f(",He,",",Ie,".x,",Ie,".y,",Ie,".z,",Ie,".w);",Ie,".buffer=null;"),We(rt),fn&&We(Le,".vertexAttribDivisorANGLE(",He,",",Ie,".divisor);")}return We(Ge.shared.vao,".currentVAO=null;",Ge.shared.vao,".setVAO(",Ge.shared.vao,".targetVAO);"),Object.keys(An).forEach(function(vt){var Vt=An[vt],Xt=ut.def(Xe,".",vt),Lt=Ge.block();Lt("if(",Xt,"){",Je,".enable(",Vt,")}else{",Je,".disable(",Vt,")}",tt,".",vt,"=",Xt,";"),We(Lt),we("if(",Xt,"!==",tt,".",vt,"){",Lt,"}")}),Object.keys(nn).forEach(function(vt){var Vt=nn[vt],Xt=tn[vt],Lt,dn,or=Ge.block();if(or(Je,".",Vt,"("),Ei(Xt)){var Vr=Xt.length;Lt=Ge.global.def(Xe,".",vt),dn=Ge.global.def(tt,".",vt),or(Jo(Vr,function(Zn){return Lt+"["+Zn+"]"}),");",Jo(Vr,function(Zn){return dn+"["+Zn+"]="+Lt+"["+Zn+"];"}).join("")),we("if(",Jo(Vr,function(Zn){return Lt+"["+Zn+"]!=="+dn+"["+Zn+"]"}).join("||"),"){",or,"}")}else Lt=ut.def(Xe,".",vt),dn=ut.def(tt,".",vt),or(Lt,");",tt,".",vt,"=",Lt,";"),we("if(",Lt,"!==",dn,"){",or,"}");We(or)}),Ge.compile()}(),compile:ti}}function cm(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var jp=34918,vd=34919,Hp=35007,Sa=function(K,Pe){if(!Pe.ext_disjoint_timer_query)return null;var ze=[];function _t(){return ze.pop()||Pe.ext_disjoint_timer_query.createQueryEXT()}function pt(fn){ze.push(fn)}var Ct=[];function It(fn){var Vn=_t();Pe.ext_disjoint_timer_query.beginQueryEXT(Hp,Vn),Ct.push(Vn),cn(Ct.length-1,Ct.length,fn)}function en(){Pe.ext_disjoint_timer_query.endQueryEXT(Hp)}function un(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var hn=[];function rn(){return hn.pop()||new un}function on(fn){hn.push(fn)}var On=[];function cn(fn,Vn,tn){var zn=rn();zn.startQueryIndex=fn,zn.endQueryIndex=Vn,zn.sum=0,zn.stats=tn,On.push(zn)}var wn=[],ft=[];function Rt(){var fn,Vn,tn=Ct.length;if(tn!==0){ft.length=Math.max(ft.length,tn+1),wn.length=Math.max(wn.length,tn+1),wn[0]=0,ft[0]=0;var zn=0;for(fn=0,Vn=0;Vn<Ct.length;++Vn){var Wt=Ct[Vn];Pe.ext_disjoint_timer_query.getQueryObjectEXT(Wt,vd)?(zn+=Pe.ext_disjoint_timer_query.getQueryObjectEXT(Wt,jp),pt(Wt)):Ct[fn++]=Wt,wn[Vn+1]=zn,ft[Vn+1]=fn}for(Ct.length=fn,fn=0,Vn=0;Vn<On.length;++Vn){var An=On[Vn],nn=An.startQueryIndex,_n=An.endQueryIndex;An.sum+=wn[_n]-wn[nn];var dr=ft[nn],Pr=ft[_n];Pr===dr?(An.stats.gpuTime+=An.sum/1e6,on(An)):(An.startQueryIndex=dr,An.endQueryIndex=Pr,On[fn++]=An)}On.length=fn}}return{beginQuery:It,endQuery:en,pushScopeStats:cn,update:Rt,getNumPendingQueries:function(){return Ct.length},clear:function(){ze.push.apply(ze,Ct);for(var fn=0;fn<ze.length;fn++)Pe.ext_disjoint_timer_query.deleteQueryEXT(ze[fn]);Ct.length=0,ze.length=0},restore:function(){Ct.length=0,ze.length=0}}},nc=16384,hu=256,fu=1024,Hf=34962,Xh="webglcontextlost",k0="webglcontextrestored",Dg=1,L0=2,lm=3;function Ba(K,Pe){for(var ze=0;ze<K.length;++ze)if(K[ze]===Pe)return ze;return-1}function oh(K){var Pe=Bc(K);if(!Pe)return null;var ze=Pe.gl,_t=ze.getContextAttributes(),pt=ze.isContextLost(),Ct=Cc(ze,Pe);if(!Ct)return null;var It=Ar(),en=cm(),un=Ct.extensions,hn=Sa(ze,un),rn=Hr(),on=ze.drawingBufferWidth,On=ze.drawingBufferHeight,cn={tick:0,time:0,viewportWidth:on,viewportHeight:On,framebufferWidth:on,framebufferHeight:On,drawingBufferWidth:on,drawingBufferHeight:On,pixelRatio:Pe.pixelRatio},wn={},ft={elements:null,primitive:4,count:-1,offset:0,instances:-1},Rt=Ru(ze,un),fn=Ah(ze,en,Pe,tn),Vn=qi(ze,un,Rt,en,fn);function tn(mr){return Vn.destroyBuffer(mr)}var zn=fo(ze,un,fn,en),Wt=Dp(ze,It,en,Pe),An=zd(ze,un,Rt,function(){dr.procs.poll()},cn,en,Pe),nn=Nh(ze,un,Rt,en,Pe),_n=D0(ze,un,Rt,An,nn,en),dr=Vp(ze,It,un,Rt,fn,zn,An,_n,wn,Vn,Wt,ft,cn,hn,Pe),Pr=If(ze,_n,dr.procs.poll,cn,_t,un,Rt),Tn=dr.next,mn=ze.canvas,qt=[],Cr=[],Fr=[],qn=[Pe.onDestroy],si=null;function Dr(){if(qt.length===0){hn&&hn.update(),si=null;return}si=Lr.next(Dr),is();for(var mr=qt.length-1;mr>=0;--mr){var li=qt[mr];li&&li(cn,null,0)}ze.flush(),hn&&hn.update()}function Wr(){!si&&qt.length>0&&(si=Lr.next(Dr))}function Pi(){si&&(Lr.cancel(Dr),si=null)}function Xo(mr){mr.preventDefault(),pt=!0,Pi(),Cr.forEach(function(li){li()})}function fs(mr){ze.getError(),pt=!1,Ct.restore(),Wt.restore(),fn.restore(),An.restore(),nn.restore(),_n.restore(),Vn.restore(),hn&&hn.restore(),dr.procs.refresh(),Wr(),Fr.forEach(function(li){li()})}mn&&(mn.addEventListener(Xh,Xo,!1),mn.addEventListener(k0,fs,!1));function Kr(){qt.length=0,Pi(),mn&&(mn.removeEventListener(Xh,Xo),mn.removeEventListener(k0,fs)),Wt.clear(),_n.clear(),nn.clear(),An.clear(),zn.clear(),fn.clear(),Vn.clear(),hn&&hn.clear(),qn.forEach(function(mr){mr()})}function ps(mr){Oe(!!mr,"invalid args to regl({...})"),Oe.type(mr,"object","invalid args to regl({...})");function li(ht){var Je=M({},ht);delete Je.uniforms,delete Je.attributes,delete Je.context,delete Je.vao,"stencil"in Je&&Je.stencil.op&&(Je.stencil.opBack=Je.stencil.opFront=Je.stencil.op,delete Je.stencil.op);function Xe(tt){if(tt in Je){var Le=Je[tt];delete Je[tt],Object.keys(Le).forEach(function(He){Je[tt+"."+He]=Le[He]})}}return Xe("blend"),Xe("depth"),Xe("cull"),Xe("stencil"),Xe("polygonOffset"),Xe("scissor"),Xe("sample"),"vao"in ht&&(Je.vao=ht.vao),Je}function Ci(ht,Je){var Xe={},tt={};return Object.keys(ht).forEach(function(Le){var He=ht[Le];if(zi.isDynamic(He)){tt[Le]=zi.unbox(He,Le);return}else if(Je&&Array.isArray(He)){for(var Ie=0;Ie<He.length;++Ie)if(zi.isDynamic(He[Ie])){tt[Le]=zi.unbox(He,Le);return}}Xe[Le]=He}),{dynamic:tt,static:Xe}}var vs=Ci(mr.context||{},!0),Hl=Ci(mr.uniforms||{},!0),sh=Ci(mr.attributes||{},!1),Be=Ci(li(mr),!1),Dt={gpuTime:0,cpuTime:0,count:0},Et=dr.compile(Be,sh,Hl,vs,Dt),$n=Et.draw,ti=Et.batch,Ge=Et.scope,we=[];function We(ht){for(;we.length<ht;)we.push(null);return we}function ut(ht,Je){var Xe;if(pt&&Oe.raise("context lost"),typeof ht=="function")return Ge.call(this,null,ht,0);if(typeof Je=="function")if(typeof ht=="number")for(Xe=0;Xe<ht;++Xe)Ge.call(this,null,Je,Xe);else if(Array.isArray(ht))for(Xe=0;Xe<ht.length;++Xe)Ge.call(this,ht[Xe],Je,Xe);else return Ge.call(this,ht,Je,0);else if(typeof ht=="number"){if(ht>0)return ti.call(this,We(ht|0),ht|0)}else if(Array.isArray(ht)){if(ht.length)return ti.call(this,ht,ht.length)}else return $n.call(this,ht)}return M(ut,{stats:Dt,destroy:function(){Et.destroy()}})}var xo=_n.setFBO=ps({framebuffer:zi.define.call(null,Dg,"framebuffer")});function gs(mr,li){var Ci=0;dr.procs.poll();var vs=li.color;vs&&(ze.clearColor(+vs[0]||0,+vs[1]||0,+vs[2]||0,+vs[3]||0),Ci|=nc),"depth"in li&&(ze.clearDepth(+li.depth),Ci|=hu),"stencil"in li&&(ze.clearStencil(li.stencil|0),Ci|=fu),Oe(!!Ci,"called regl.clear with no buffer specified"),ze.clear(Ci)}function Co(mr){if(Oe(typeof mr=="object"&&mr,"regl.clear() takes an object as input"),"framebuffer"in mr)if(mr.framebuffer&&mr.framebuffer_reglType==="framebufferCube")for(var li=0;li<6;++li)xo(M({framebuffer:mr.framebuffer.faces[li]},mr),gs);else xo(mr,gs);else gs(null,mr)}function Es(mr){Oe.type(mr,"function","regl.frame() callback must be a function"),qt.push(mr);function li(){var Ci=Ba(qt,mr);Oe(Ci>=0,"cannot cancel a frame twice");function vs(){var Hl=Ba(qt,vs);qt[Hl]=qt[qt.length-1],qt.length-=1,qt.length<=0&&Pi()}qt[Ci]=vs}return Wr(),{cancel:li}}function Ao(){var mr=Tn.viewport,li=Tn.scissor_box;mr[0]=mr[1]=li[0]=li[1]=0,cn.viewportWidth=cn.framebufferWidth=cn.drawingBufferWidth=mr[2]=li[2]=ze.drawingBufferWidth,cn.viewportHeight=cn.framebufferHeight=cn.drawingBufferHeight=mr[3]=li[3]=ze.drawingBufferHeight}function is(){cn.tick+=1,cn.time=Br(),Ao(),dr.procs.poll()}function Zo(){An.refresh(),Ao(),dr.procs.refresh(),hn&&hn.update()}function Br(){return(Hr()-rn)/1e3}Zo();function Vo(mr,li){Oe.type(li,"function","listener callback must be a function");var Ci;switch(mr){case"frame":return Es(li);case"lost":Ci=Cr;break;case"restore":Ci=Fr;break;case"destroy":Ci=qn;break;default:Oe.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ci.push(li),{cancel:function(){for(var vs=0;vs<Ci.length;++vs)if(Ci[vs]===li){Ci[vs]=Ci[Ci.length-1],Ci.pop();return}}}}var Ii=M(ps,{clear:Co,prop:zi.define.bind(null,Dg),context:zi.define.bind(null,L0),this:zi.define.bind(null,lm),draw:ps({}),buffer:function(mr){return fn.create(mr,Hf,!1,!1)},elements:function(mr){return zn.create(mr,!1)},texture:An.create2D,cube:An.createCube,renderbuffer:nn.create,framebuffer:_n.create,framebufferCube:_n.createCube,vao:Vn.createVAO,attributes:_t,frame:Es,on:Vo,limits:Rt,hasExtension:function(mr){return Rt.extensions.indexOf(mr.toLowerCase())>=0},read:Pr,destroy:Kr,_gl:ze,_refresh:Zo,poll:function(){is(),hn&&hn.update()},now:Br,stats:en});return Pe.onDone(null,Ii),Ii}return oh})},94633:function(Ne){Ne.exports=function(J){return L(M(J),J)},Ne.exports.array=L;function L(J,z){var Z=J.length,te=new Array(Z),Q={},de=Z,oe=j(z),ie=R(J);for(z.forEach(function(he){if(!ie.has(he[0])||!ie.has(he[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});de--;)Q[de]||re(J[de],de,new Set);return te;function re(he,De,ue){if(ue.has(he)){var xe;try{xe=", node was:"+JSON.stringify(he)}catch{xe=""}throw new Error("Cyclic dependency"+xe)}if(!ie.has(he))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(he));if(!Q[De]){Q[De]=!0;var ae=oe.get(he)||new Set;if(ae=Array.from(ae),De=ae.length){ue.add(he);do{var ce=ae[--De];re(ce,ie.get(ce),ue)}while(De);ue.delete(he)}te[--Z]=he}}}function M(J){for(var z=new Set,Z=0,te=J.length;Z<te;Z++){var Q=J[Z];z.add(Q[0]),z.add(Q[1])}return Array.from(z)}function j(J){for(var z=new Map,Z=0,te=J.length;Z<te;Z++){var Q=J[Z];z.has(Q[0])||z.set(Q[0],new Set),z.has(Q[1])||z.set(Q[1],new Set),z.get(Q[0]).add(Q[1])}return z}function R(J){for(var z=new Map,Z=0,te=J.length;Z<te;Z++)z.set(J[Z],Z);return z}},65327:function(Ne){function L(M,j,R,J,z){var Z={};return Object.keys(J).forEach(function(te){Z[te]=J[te]}),Z.enumerable=!!Z.enumerable,Z.configurable=!!Z.configurable,("value"in Z||Z.initializer)&&(Z.writable=!0),Z=R.slice().reverse().reduce(function(te,Q){return Q(M,j,te)||te},Z),z&&Z.initializer!==void 0&&(Z.value=Z.initializer?Z.initializer.call(z):void 0,Z.initializer=void 0),Z.initializer===void 0&&(Object.defineProperty(M,j,Z),Z=null),Z}Ne.exports=L,Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports},55042:function(Ne){function L(M,j,R,J){!R||Object.defineProperty(M,j,{enumerable:R.enumerable,configurable:R.configurable,writable:R.writable,value:R.initializer?R.initializer.call(J):void 0})}Ne.exports=L,Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports},19020:function(Ne){function L(M,j){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}Ne.exports=L,Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports},22970:function(){"use strict"},31302:function(){"use strict"},17061:function(Ne,L,M){var j=M(18698).default;function R(){"use strict";Ne.exports=R=function(){return J},Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports;var J={},z=Object.prototype,Z=z.hasOwnProperty,te=typeof Symbol=="function"?Symbol:{},Q=te.iterator||"@@iterator",de=te.asyncIterator||"@@asyncIterator",oe=te.toStringTag||"@@toStringTag";function ie(ye,wt,Mn){return Object.defineProperty(ye,wt,{value:Mn,enumerable:!0,configurable:!0,writable:!0}),ye[wt]}try{ie({},"")}catch{ie=function(Mn,jt,En){return Mn[jt]=En}}function re(ye,wt,Mn,jt){var En=wt&&wt.prototype instanceof ue?wt:ue,Yn=Object.create(En.prototype),pn=new at(jt||[]);return Yn._invoke=function(lo,ji,Xn){var kr="suspendedStart";return function(lr,Qn){if(kr==="executing")throw new Error("Generator is already running");if(kr==="completed"){if(lr==="throw")throw Qn;return Hn()}for(Xn.method=lr,Xn.arg=Qn;;){var Oi=Xn.delegate;if(Oi){var zr=G(Oi,Xn);if(zr){if(zr===De)continue;return zr}}if(Xn.method==="next")Xn.sent=Xn._sent=Xn.arg;else if(Xn.method==="throw"){if(kr==="suspendedStart")throw kr="completed",Xn.arg;Xn.dispatchException(Xn.arg)}else Xn.method==="return"&&Xn.abrupt("return",Xn.arg);kr="executing";var Yr=he(lo,ji,Xn);if(Yr.type==="normal"){if(kr=Xn.done?"completed":"suspendedYield",Yr.arg===De)continue;return{value:Yr.arg,done:Xn.done}}Yr.type==="throw"&&(kr="completed",Xn.method="throw",Xn.arg=Yr.arg)}}}(ye,Mn,pn),Yn}function he(ye,wt,Mn){try{return{type:"normal",arg:ye.call(wt,Mn)}}catch(jt){return{type:"throw",arg:jt}}}J.wrap=re;var De={};function ue(){}function xe(){}function ae(){}var ce={};ie(ce,Q,function(){return this});var fe=Object.getPrototypeOf,Ee=fe&&fe(fe(Ft([])));Ee&&Ee!==z&&Z.call(Ee,Q)&&(ce=Ee);var pe=ae.prototype=ue.prototype=Object.create(ce);function Ae(ye){["next","throw","return"].forEach(function(wt){ie(ye,wt,function(Mn){return this._invoke(wt,Mn)})})}function nt(ye,wt){function Mn(En,Yn,pn,lo){var ji=he(ye[En],ye,Yn);if(ji.type!=="throw"){var Xn=ji.arg,kr=Xn.value;return kr&&j(kr)=="object"&&Z.call(kr,"__await")?wt.resolve(kr.__await).then(function(lr){Mn("next",lr,pn,lo)},function(lr){Mn("throw",lr,pn,lo)}):wt.resolve(kr).then(function(lr){Xn.value=lr,pn(Xn)},function(lr){return Mn("throw",lr,pn,lo)})}lo(ji.arg)}var jt;this._invoke=function(En,Yn){function pn(){return new wt(function(lo,ji){Mn(En,Yn,lo,ji)})}return jt=jt?jt.then(pn,pn):pn()}}function G(ye,wt){var Mn=ye.iterator[wt.method];if(Mn===void 0){if(wt.delegate=null,wt.method==="throw"){if(ye.iterator.return&&(wt.method="return",wt.arg=void 0,G(ye,wt),wt.method==="throw"))return De;wt.method="throw",wt.arg=new TypeError("The iterator does not provide a 'throw' method")}return De}var jt=he(Mn,ye.iterator,wt.arg);if(jt.type==="throw")return wt.method="throw",wt.arg=jt.arg,wt.delegate=null,De;var En=jt.arg;return En?En.done?(wt[ye.resultName]=En.value,wt.next=ye.nextLoc,wt.method!=="return"&&(wt.method="next",wt.arg=void 0),wt.delegate=null,De):En:(wt.method="throw",wt.arg=new TypeError("iterator result is not an object"),wt.delegate=null,De)}function Fe(ye){var wt={tryLoc:ye[0]};1 in ye&&(wt.catchLoc=ye[1]),2 in ye&&(wt.finallyLoc=ye[2],wt.afterLoc=ye[3]),this.tryEntries.push(wt)}function $e(ye){var wt=ye.completion||{};wt.type="normal",delete wt.arg,ye.completion=wt}function at(ye){this.tryEntries=[{tryLoc:"root"}],ye.forEach(Fe,this),this.reset(!0)}function Ft(ye){if(ye){var wt=ye[Q];if(wt)return wt.call(ye);if(typeof ye.next=="function")return ye;if(!isNaN(ye.length)){var Mn=-1,jt=function En(){for(;++Mn<ye.length;)if(Z.call(ye,Mn))return En.value=ye[Mn],En.done=!1,En;return En.value=void 0,En.done=!0,En};return jt.next=jt}}return{next:Hn}}function Hn(){return{value:void 0,done:!0}}return xe.prototype=ae,ie(pe,"constructor",ae),ie(ae,"constructor",xe),xe.displayName=ie(ae,oe,"GeneratorFunction"),J.isGeneratorFunction=function(ye){var wt=typeof ye=="function"&&ye.constructor;return!!wt&&(wt===xe||(wt.displayName||wt.name)==="GeneratorFunction")},J.mark=function(ye){return Object.setPrototypeOf?Object.setPrototypeOf(ye,ae):(ye.__proto__=ae,ie(ye,oe,"GeneratorFunction")),ye.prototype=Object.create(pe),ye},J.awrap=function(ye){return{__await:ye}},Ae(nt.prototype),ie(nt.prototype,de,function(){return this}),J.AsyncIterator=nt,J.async=function(ye,wt,Mn,jt,En){En===void 0&&(En=Promise);var Yn=new nt(re(ye,wt,Mn,jt),En);return J.isGeneratorFunction(wt)?Yn:Yn.next().then(function(pn){return pn.done?pn.value:Yn.next()})},Ae(pe),ie(pe,oe,"Generator"),ie(pe,Q,function(){return this}),ie(pe,"toString",function(){return"[object Generator]"}),J.keys=function(ye){var wt=[];for(var Mn in ye)wt.push(Mn);return wt.reverse(),function jt(){for(;wt.length;){var En=wt.pop();if(En in ye)return jt.value=En,jt.done=!1,jt}return jt.done=!0,jt}},J.values=Ft,at.prototype={constructor:at,reset:function(wt){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach($e),!wt)for(var Mn in this)Mn.charAt(0)==="t"&&Z.call(this,Mn)&&!isNaN(+Mn.slice(1))&&(this[Mn]=void 0)},stop:function(){this.done=!0;var wt=this.tryEntries[0].completion;if(wt.type==="throw")throw wt.arg;return this.rval},dispatchException:function(wt){if(this.done)throw wt;var Mn=this;function jt(Xn,kr){return pn.type="throw",pn.arg=wt,Mn.next=Xn,kr&&(Mn.method="next",Mn.arg=void 0),!!kr}for(var En=this.tryEntries.length-1;En>=0;--En){var Yn=this.tryEntries[En],pn=Yn.completion;if(Yn.tryLoc==="root")return jt("end");if(Yn.tryLoc<=this.prev){var lo=Z.call(Yn,"catchLoc"),ji=Z.call(Yn,"finallyLoc");if(lo&&ji){if(this.prev<Yn.catchLoc)return jt(Yn.catchLoc,!0);if(this.prev<Yn.finallyLoc)return jt(Yn.finallyLoc)}else if(lo){if(this.prev<Yn.catchLoc)return jt(Yn.catchLoc,!0)}else{if(!ji)throw new Error("try statement without catch or finally");if(this.prev<Yn.finallyLoc)return jt(Yn.finallyLoc)}}}},abrupt:function(wt,Mn){for(var jt=this.tryEntries.length-1;jt>=0;--jt){var En=this.tryEntries[jt];if(En.tryLoc<=this.prev&&Z.call(En,"finallyLoc")&&this.prev<En.finallyLoc){var Yn=En;break}}Yn&&(wt==="break"||wt==="continue")&&Yn.tryLoc<=Mn&&Mn<=Yn.finallyLoc&&(Yn=null);var pn=Yn?Yn.completion:{};return pn.type=wt,pn.arg=Mn,Yn?(this.method="next",this.next=Yn.finallyLoc,De):this.complete(pn)},complete:function(wt,Mn){if(wt.type==="throw")throw wt.arg;return wt.type==="break"||wt.type==="continue"?this.next=wt.arg:wt.type==="return"?(this.rval=this.arg=wt.arg,this.method="return",this.next="end"):wt.type==="normal"&&Mn&&(this.next=Mn),De},finish:function(wt){for(var Mn=this.tryEntries.length-1;Mn>=0;--Mn){var jt=this.tryEntries[Mn];if(jt.finallyLoc===wt)return this.complete(jt.completion,jt.afterLoc),$e(jt),De}},catch:function(wt){for(var Mn=this.tryEntries.length-1;Mn>=0;--Mn){var jt=this.tryEntries[Mn];if(jt.tryLoc===wt){var En=jt.completion;if(En.type==="throw"){var Yn=En.arg;$e(jt)}return Yn}}throw new Error("illegal catch attempt")},delegateYield:function(wt,Mn,jt){return this.delegate={iterator:Ft(wt),resultName:Mn,nextLoc:jt},this.method==="next"&&(this.arg=void 0),De}},J}Ne.exports=R,Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports},18698:function(Ne){function L(M){return Ne.exports=L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports,L(M)}Ne.exports=L,Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports},64687:function(Ne,L,M){var j=M(17061)();Ne.exports=j;try{regeneratorRuntime=j}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=j:Function("r","regeneratorRuntime = r")(j)}}}]);
