"use strict";(self.webpackChunkflowline_admin=self.webpackChunkflowline_admin||[]).push([[141],{64317:function(re,U,a){var x=a(1413),y=a(44925),S=a(85893),f=a(22270),D=a(67294),p=a(66758),Z=a(2123),r=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],C=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],O=D.forwardRef(function(i,V){var X=i.fieldProps,K=i.children,Q=i.params,N=i.proFieldProps,J=i.mode,M=i.valueEnum,z=i.request,$=i.showSearch,k=i.options,s=(0,y.Z)(i,r),L=(0,D.useContext)(p.Z);return(0,S.jsx)(Z.Z,(0,x.Z)((0,x.Z)({valueEnum:(0,f.h)(M),request:z,params:Q,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,x.Z)({options:k,mode:J,showSearch:$,getPopupContainer:L.getPopupContainer},X),ref:V,proFieldProps:N},s),{},{children:K}))}),B=D.forwardRef(function(i,V){var X=i.fieldProps,K=i.children,Q=i.params,N=i.proFieldProps,J=i.mode,M=i.valueEnum,z=i.request,$=i.options,k=(0,y.Z)(i,C),s=(0,x.Z)({options:$,mode:J||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},X),L=(0,D.useContext)(p.Z);return(0,S.jsx)(Z.Z,(0,x.Z)((0,x.Z)({valueEnum:(0,f.h)(M),request:z,params:Q,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,x.Z)({getPopupContainer:L.getPopupContainer},s),ref:V,proFieldProps:N},k),{},{children:K}))}),b=O,e=B,_=b;_.SearchSelect=e,_.displayName="ProFormComponent",U.Z=_},5966:function(re,U,a){var x=a(1413),y=a(44925),S=a(85893),f=a(2123),D=["fieldProps","proFieldProps"],p=["fieldProps","proFieldProps"],Z="text",r=function(b){var e=b.fieldProps,_=b.proFieldProps,i=(0,y.Z)(b,D);return(0,S.jsx)(f.Z,(0,x.Z)({valueType:Z,fieldProps:e,filedConfig:{valueType:Z},proFieldProps:_},i))},C=function(b){var e=b.fieldProps,_=b.proFieldProps,i=(0,y.Z)(b,p);return(0,S.jsx)(f.Z,(0,x.Z)({valueType:"password",fieldProps:e,proFieldProps:_,filedConfig:{valueType:Z}},i))},O=r;O.Password=C,O.displayName="ProFormComponent",U.Z=O},90672:function(re,U,a){var x=a(1413),y=a(44925),S=a(85893),f=a(67294),D=a(2123),p=["fieldProps","proFieldProps"],Z=function(C,O){var B=C.fieldProps,b=C.proFieldProps,e=(0,y.Z)(C,p);return(0,S.jsx)(D.Z,(0,x.Z)({ref:O,valueType:"textarea",fieldProps:B,proFieldProps:b},e))};U.Z=f.forwardRef(Z)},49299:function(re,U,a){a.r(U),a.d(U,{default:function(){return R}});var x=a(80164),y=a.n(x),S=a(74411),f=a.n(S),D=a(55559),p=a.n(D),Z=a(45223),r=a.n(Z),C=a(68564),O=a(49101),B=a(1413),b=a(44925),e=a(85893),_=a(67294),i=a(2123),V=["fieldProps","min","proFieldProps","max"],X=function(o,n){var h=o.fieldProps,E=o.min,t=o.proFieldProps,w=o.max,c=(0,b.Z)(o,V);return(0,e.jsx)(i.Z,(0,B.Z)({valueType:"digit",fieldProps:(0,B.Z)({min:E,max:w},h),ref:n,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:t},c))},K=_.forwardRef(X),Q=a(48705),N=a(51851),J=a(20761),M=a(5966),z=a(90672),$=a(64317),k=a(60415),s=a(95952),L=a(48086),H=a(71577),oe=a(25084),ae=a(63436),d=a(50146),l=function(o){var n=(0,s.useIntl)();return(0,e.jsx)(d.Z,{width:800,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:n.formatMessage({id:"pages.connectionList.form.connectionConfig",defaultMessage:"\u8FDE\u63A5\u7F16\u8F91"}),visible:o.updateModalVisible,onCancel:function(){o.onCancel()},footer:null,children:(0,e.jsxs)(ae.A,{initialValues:{name:o.values.name,describe:o.values.describe,type:o.values.type,host:o.values.host,schema:o.values.schema,login:o.values.login,password:o.values.password,port:o.values.port,extra:o.values.extra},title:n.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),onFinish:function(){var h=p()(r().mark(function E(t){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,o.onSubmit(f()(f()({},o.values),t));case 2:return c.abrupt("return",!0);case 3:case"end":return c.stop()}},E)}));return function(E){return h.apply(this,arguments)}}(),submitter:{submitButtonProps:{},render:function(E){return[(0,e.jsx)(H.Z,{type:"primary",onClick:function(){var w,c;return(w=E.form)===null||w===void 0||(c=w.submit)===null||c===void 0?void 0:c.call(w)},children:"\u63D0\u4EA4"},"submit"),(0,e.jsx)(H.Z,{type:"dashed",onClick:function(){var w;return(w=E.form)===null||w===void 0?void 0:w.resetFields()},children:"\u91CD\u7F6E"},"rest"),(0,e.jsx)(H.Z,{type:"dashed",onClick:function(){return o.onCancel()},children:"\u53D6\u6D88"},"cancel")]}},children:[(0,e.jsx)(M.Z,{rules:[{required:!0,message:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.ruleName",defaultMessage:"Connection name is required"})}],name:"name",placeholder:n.formatMessage({id:"pages.connectionList.form.name",defaultMessage:"Connection name"}),label:n.formatMessage({id:"pages.connectionList.form.name",defaultMessage:"Connection name"})}),(0,e.jsx)(z.Z,{name:"describe",placeholder:n.formatMessage({id:"pages.connectionList.form.describe",defaultMessage:"Connection describe"}),label:n.formatMessage({id:"pages.connectionList.form.describe",defaultMessage:"Connection describe"})}),(0,e.jsx)($.Z,{name:"type",placeholder:n.formatMessage({id:"pages.connectionList.form.type.placeholder",defaultMessage:"Connection type"}),label:n.formatMessage({id:"pages.connectionList.form.type",defaultMessage:"Connection type"}),valueEnum:{mysql:"MySQL",redis:"Redis",amazon_s3:"Amazon S3"},rules:[{required:!0,message:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.form.type.rule",defaultMessage:"Connection type"})}]}),(0,e.jsx)(M.Z,{name:"host",placeholder:n.formatMessage({id:"pages.connectionList.form.host.placeholder",defaultMessage:"Connection host"}),label:n.formatMessage({id:"pages.connectionList.form.host",defaultMessage:"Connection host"})}),(0,e.jsx)(M.Z,{name:"schema",placeholder:n.formatMessage({id:"pages.connectionList.form.schema.placeholder",defaultMessage:"Connection schema"}),label:n.formatMessage({id:"pages.connectionList.form.schema",defaultMessage:"Connection schema"})}),(0,e.jsx)(M.Z,{name:"login",placeholder:n.formatMessage({id:"pages.connectionList.form.login.placeholder",defaultMessage:"Connection login"}),label:n.formatMessage({id:"pages.connectionList.form.login",defaultMessage:"Connection login"})}),(0,e.jsx)(M.Z.Password,{name:"password",placeholder:n.formatMessage({id:"pages.connectionList.form.password.placeholder",defaultMessage:"Connection password"}),label:n.formatMessage({id:"pages.connectionList.form.password",defaultMessage:"Connection password"})}),(0,e.jsx)(K,{name:"port",placeholder:n.formatMessage({id:"pages.connectionList.form.port.placeholder",defaultMessage:"Connection port"}),label:n.formatMessage({id:"pages.connectionList.form.port",defaultMessage:"Connection port"})}),(0,e.jsx)(z.Z,{name:"extra",placeholder:n.formatMessage({id:"pages.connectionList.form.extra",defaultMessage:"Connection extra"}),label:n.formatMessage({id:"pages.connectionList.form.extra",defaultMessage:"Connection extra"})})]})})},j=l,u=function(){var Y=p()(r().mark(function o(n){var h,E,t;return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return h=L.ZP.loading("Adding"),c.prev=1,E="connection",t="v1",c.next=6,(0,C.ZH)(f()(f()({},n),{},{kind:E,apiVersion:t}));case 6:return h(),L.ZP.success("Added successfully"),c.abrupt("return",!0);case 11:return c.prev=11,c.t0=c.catch(1),h(),L.ZP.error("Adding failed, please try again!"),c.abrupt("return",!1);case 16:case"end":return c.stop()}},o,null,[[1,11]])}));return function(n){return Y.apply(this,arguments)}}(),m=function(){var Y=p()(r().mark(function o(n){var h;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h=L.ZP.loading("Updating"),t.prev=1,t.next=4,(0,C.r8)({uid:n.uid},n);case 4:return h(),L.ZP.success("Update is successful"),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(1),h(),L.ZP.error("Update failed, please try again!"),t.abrupt("return",!1);case 14:case"end":return t.stop()}},o,null,[[1,9]])}));return function(n){return Y.apply(this,arguments)}}(),G=function(){var Y=p()(r().mark(function o(n){var h;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(h=L.ZP.loading("deleting"),n){t.next=3;break}return t.abrupt("return",!0);case 3:return t.prev=3,t.next=6,(0,C.m9)({uid:"-"});case 6:return h(),L.ZP.success("Deleted successfully and will refresh soon"),t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t.catch(3),h(),L.ZP.error("Delete failed, please try again"),t.abrupt("return",!1);case 16:case"end":return t.stop()}},o,null,[[3,11]])}));return function(n){return Y.apply(this,arguments)}}(),P=function(){var o=(0,_.useState)(!1),n=y()(o,2),h=n[0],E=n[1],t=(0,_.useState)(!1),w=y()(t,2),c=w[0],se=w[1],fe=(0,_.useState)(!1),ie=y()(fe,2),le=ie[0],de=ie[1],q=(0,_.useRef)(),he=(0,_.useState)(),ue=y()(he,2),A=ue[0],ne=ue[1],ge=(0,_.useState)([]),ce=y()(ge,2),te=ce[0],pe=ce[1],I=(0,s.useIntl)(),me=[{title:(0,e.jsx)(s.FormattedMessage,{id:"pages.common.uid",defaultMessage:"UID"}),dataIndex:"uid",tip:"The uid is the unique key",render:function(g,v){return(0,e.jsx)("a",{onClick:function(){ne(v),de(!0)},children:g})}},{title:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.form.connectionName.nameLabel",defaultMessage:"Connection name"}),dataIndex:"name"},{title:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.titleDesc",defaultMessage:"Description"}),dataIndex:"describe",valueType:"textarea"},{title:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.form.type",defaultMessage:"connection type"}),dataIndex:"type"},{title:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.form.host",defaultMessage:"connection host"}),dataIndex:"host"},{title:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.form.schema",defaultMessage:"connection schema"}),dataIndex:"schema"},{title:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.form.login",defaultMessage:"connection login"}),dataIndex:"login"},{title:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.form.password",defaultMessage:"connection password"}),dataIndex:"password",valueType:"password"},{title:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.form.port",defaultMessage:"connection port"}),dataIndex:"port",hideInForm:!0},{title:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.form.extra",defaultMessage:"connection extra"}),dataIndex:"extra",hideInForm:!0},{title:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.titleCreatedAt",defaultMessage:"Created time"}),sorter:!0,dataIndex:"creationTimestamp",valueType:"dateTime"},{title:(0,e.jsx)(s.FormattedMessage,{id:"pages.common.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(g,v){return[(0,e.jsx)("a",{onClick:function(){se(!0),ne(v)},children:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.form.connectionConfig",defaultMessage:"Configuration"})},"config")]}}];return(0,e.jsxs)(Q._z,{children:[(0,e.jsx)(N.Z,{headerTitle:I.formatMessage({id:"pages.common.tableTitle",defaultMessage:"Enquiry form"}),actionRef:q,rowKey:"uid",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(H.Z,{type:"primary",onClick:function(){E(!0)},children:[(0,e.jsx)(O.Z,{})," ",(0,e.jsx)(s.FormattedMessage,{id:"pages.common.new",defaultMessage:"New"})]},"primary")]},request:p()(r().mark(function F(){var g;return r().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,C.Pb)();case 2:return g=T.sent,T.abrupt("return",{data:g.items,success:!0});case 4:case"end":return T.stop()}},F)})),columns:me,rowSelection:{onChange:function(g,v){pe(v)}}}),te?.length>0&&(0,e.jsx)(Q.Sc,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(s.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,e.jsx)("a",{style:{fontWeight:600},children:te.length})," ",(0,e.jsx)(s.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,e.jsx)(H.Z,{onClick:p()(r().mark(function F(){var g,v;return r().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,G(te);case 2:pe([]),(g=q.current)===null||g===void 0||(v=g.reloadAndRest)===null||v===void 0||v.call(g);case 4:case"end":return ee.stop()}},F)})),children:(0,e.jsx)(s.FormattedMessage,{id:"pages.common.batchDeletion",defaultMessage:"Batch deletion"})})}),(0,e.jsxs)(J.Y,{title:I.formatMessage({id:"pages.connectionList.form.newConnection",defaultMessage:"New connection"}),width:"400px",visible:h,onVisibleChange:E,onFinish:function(){var F=p()(r().mark(function g(v){var T;return r().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,u(v);case 2:T=W.sent,T&&(E(!1),q.current&&q.current.reload());case 4:case"end":return W.stop()}},g)}));return function(g){return F.apply(this,arguments)}}(),children:[(0,e.jsx)(M.Z,{rules:[{required:!0,message:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.ruleName",defaultMessage:"Connection name is required"})}],width:"md",name:"name",placeholder:I.formatMessage({id:"pages.connectionList.form.name",defaultMessage:"Connection name"})}),(0,e.jsx)(z.Z,{width:"md",name:"describe",placeholder:I.formatMessage({id:"pages.connectionList.form.describe",defaultMessage:"Connection describe"})}),(0,e.jsx)($.Z,{width:"md",name:"type",placeholder:I.formatMessage({id:"pages.connectionList.form.type.placeholder",defaultMessage:"Connection type"}),valueEnum:{mysql:"MySQL",redis:"Redis",amazon_s3:"Amazon S3"},rules:[{required:!0,message:(0,e.jsx)(s.FormattedMessage,{id:"pages.connectionList.form.type.rule",defaultMessage:"Connection type"})}]}),(0,e.jsx)(M.Z,{width:"md",name:"host",placeholder:I.formatMessage({id:"pages.connectionList.form.host.placeholder",defaultMessage:"Connection host"})}),(0,e.jsx)(M.Z,{width:"md",name:"schema",placeholder:I.formatMessage({id:"pages.connectionList.form.schema.placeholder",defaultMessage:"Connection schema"})}),(0,e.jsx)(M.Z,{width:"md",name:"login",placeholder:I.formatMessage({id:"pages.connectionList.form.login.placeholder",defaultMessage:"Connection login"})}),(0,e.jsx)(M.Z.Password,{width:"md",name:"password",placeholder:I.formatMessage({id:"pages.connectionList.form.password.placeholder",defaultMessage:"Connection password"})}),(0,e.jsx)(K,{width:"md",name:"port",placeholder:I.formatMessage({id:"pages.connectionList.form.port.placeholder",defaultMessage:"Connection port"})}),(0,e.jsx)(z.Z,{width:"md",name:"extra",placeholder:I.formatMessage({id:"pages.connectionList.form.extra",defaultMessage:"Connection extra"})})]}),(0,e.jsx)(j,{onSubmit:function(){var F=p()(r().mark(function g(v){var T;return r().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,m(v);case 2:T=W.sent,T&&(se(!1),ne(void 0),q.current&&q.current.reload());case 4:case"end":return W.stop()}},g)}));return function(g){return F.apply(this,arguments)}}(),onCancel:function(){se(!1),le||ne(void 0)},updateModalVisible:c,values:A||{}}),(0,e.jsx)(oe.Z,{width:600,visible:le,onClose:function(){ne(void 0),de(!1)},closable:!1,children:A?.uid&&(0,e.jsx)(k.vY,{column:2,title:A?.uid,request:p()(r().mark(function F(){return r().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",{data:A||{}});case 1:case"end":return v.stop()}},F)})),params:{id:A?.uid},columns:me})})]})},R=P},68564:function(re,U,a){a.d(U,{Pb:function(){return L},ZH:function(){return i},m9:function(){return J},r8:function(){return Q}});var x=a(56307),y=a.n(x),S=a(74411),f=a.n(S),D=a(55559),p=a.n(D),Z=a(45223),r=a.n(Z),C=a(95952),O=null,B=["uid"],b=["uid"],e=null,_=null;function i(d,l){return V.apply(this,arguments)}function V(){return V=p()(r().mark(function d(l,j){return r().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,C.request)("/api/apps/v1/connection",f()({method:"POST",headers:{"Content-Type":"application/json"},data:l},j||{})));case 1:case"end":return m.stop()}},d)})),V.apply(this,arguments)}function X(d,l){return K.apply(this,arguments)}function K(){return K=_asyncToGenerator(_regeneratorRuntime.mark(function d(l,j){var u,m;return _regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return u=l.uid,m=_objectWithoutProperties(l,O),P.abrupt("return",request("/api/apps/v1/connection/".concat(u),_objectSpread({method:"GET",params:_objectSpread({},m)},j||{})));case 2:case"end":return P.stop()}},d)})),K.apply(this,arguments)}function Q(d,l,j){return N.apply(this,arguments)}function N(){return N=p()(r().mark(function d(l,j,u){var m,G;return r().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return m=l.uid,G=y()(l,B),R.abrupt("return",(0,C.request)("/api/apps/v1/connection/".concat(m),f()({method:"PUT",headers:{"Content-Type":"application/json"},params:f()({},G),data:j},u||{})));case 2:case"end":return R.stop()}},d)})),N.apply(this,arguments)}function J(d,l){return M.apply(this,arguments)}function M(){return M=p()(r().mark(function d(l,j){var u,m;return r().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return u=l.uid,m=y()(l,b),P.abrupt("return",(0,C.request)("/api/apps/v1/connection/".concat(u),f()({method:"DELETE",params:f()({},m)},j||{})));case 2:case"end":return P.stop()}},d)})),M.apply(this,arguments)}function z(d,l,j){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime.mark(function d(l,j,u){var m,G;return _regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return m=l.uid,G=_objectWithoutProperties(l,e),R.abrupt("return",request("/api/apps/v1/connection/".concat(m),_objectSpread({method:"PATCH",headers:{"Content-Type":"application/merge-patch+json"},params:_objectSpread({},G),data:j},u||{})));case 2:case"end":return R.stop()}},d)})),$.apply(this,arguments)}function k(d,l){return s.apply(this,arguments)}function s(){return s=_asyncToGenerator(_regeneratorRuntime.mark(function d(l,j){var u,m;return _regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return u=l.uid,m=_objectWithoutProperties(l,_),P.abrupt("return",request("/api/apps/v1/connection/".concat(u,"/watch"),_objectSpread({method:"GET",params:_objectSpread({},m)},j||{})));case 2:case"end":return P.stop()}},d)})),s.apply(this,arguments)}function L(d){return H.apply(this,arguments)}function H(){return H=p()(r().mark(function d(l){return r().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,C.request)("/api/apps/v1/connection/list",f()({method:"GET"},l||{})));case 1:case"end":return u.stop()}},d)})),H.apply(this,arguments)}function oe(d){return ae.apply(this,arguments)}function ae(){return ae=_asyncToGenerator(_regeneratorRuntime.mark(function d(l){return _regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/apps/v1/connection/watch",_objectSpread({method:"GET"},l||{})));case 1:case"end":return u.stop()}},d)})),ae.apply(this,arguments)}}}]);
