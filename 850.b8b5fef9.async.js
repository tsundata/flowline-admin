(self.webpackChunkflowline_admin=self.webpackChunkflowline_admin||[]).push([[850],{97254:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}},{tag:"path",attrs:{d:"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6 25.4-25.5 60-39.8 96-39.8 36.2 0 70.3 14.1 96 39.8 1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 003 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6-107.4 0-195 85.1-199.4 191.7-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6-1.8 33.5-15.7 64.7-39.5 88.6-25.4 25.5-60 39.8-96 39.8-36.2 0-70.3-14.1-96-39.8-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 00-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6 107.4 0 195-85.1 199.4-191.7.2-4.5-3.4-8.3-8-8.3z"}}]},name:"cloud-sync",theme:"outlined"},z=q,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="CloudSyncOutlined";var Q=R.forwardRef(te)},73888:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},z=q,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="DatabaseOutlined";var Q=R.forwardRef(te)},18094:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 392c8.8 0 16-7.2 16-16V192c0-8.8-7.2-16-16-16H744c-8.8 0-16 7.2-16 16v56H296v-56c0-8.8-7.2-16-16-16H96c-8.8 0-16 7.2-16 16v184c0 8.8 7.2 16 16 16h56v240H96c-8.8 0-16 7.2-16 16v184c0 8.8 7.2 16 16 16h184c8.8 0 16-7.2 16-16v-56h432v56c0 8.8 7.2 16 16 16h184c8.8 0 16-7.2 16-16V648c0-8.8-7.2-16-16-16h-56V392h56zM792 240h88v88h-88v-88zm-648 88v-88h88v88h-88zm88 456h-88v-88h88v88zm648-88v88h-88v-88h88zm-80-64h-56c-8.8 0-16 7.2-16 16v56H296v-56c0-8.8-7.2-16-16-16h-56V392h56c8.8 0 16-7.2 16-16v-56h432v56c0 8.8 7.2 16 16 16h56v240z"}}]},name:"gateway",theme:"outlined"},z=q,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="GatewayOutlined";var Q=R.forwardRef(te)},36371:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M912 820.1V203.9c28-9.9 48-36.6 48-67.9 0-39.8-32.2-72-72-72-31.3 0-58 20-67.9 48H203.9C194 84 167.3 64 136 64c-39.8 0-72 32.2-72 72 0 31.3 20 58 48 67.9v616.2C84 830 64 856.7 64 888c0 39.8 32.2 72 72 72 31.3 0 58-20 67.9-48h616.2c9.9 28 36.6 48 67.9 48 39.8 0 72-32.2 72-72 0-31.3-20-58-48-67.9zM888 112c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 912c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-752c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm704 680H184V184h656v656zm48 72c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}},{tag:"path",attrs:{d:"M288 474h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64zm-56 420h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64z"}}]},name:"group",theme:"outlined"},z=q,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="GroupOutlined";var Q=R.forwardRef(te)},54034:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M442.3 677.6l199.4-156.7a11.3 11.3 0 000-17.7L442.3 346.4c-7.4-5.8-18.3-.6-18.3 8.8v313.5c0 9.4 10.9 14.7 18.3 8.9z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"play-square",theme:"outlined"},z=q,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="PlaySquareOutlined";var Q=R.forwardRef(te)},32779:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},z=q,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="RedoOutlined";var Q=R.forwardRef(te)},92104:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},z=q,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="SaveOutlined";var Q=R.forwardRef(te)},15360:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},z=q,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="StopOutlined";var Q=R.forwardRef(te)},50827:function(Ne,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),R=M(67294),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M736 550H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208 130c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zM736 266H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208-194c39.8 0 72-32.2 72-72s-32.2-72-72-72-72 32.2-72 72 32.2 72 72 72zm0-96c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 64c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0 656c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}}]},name:"ungroup",theme:"outlined"},z=q,Z=M(27029),te=function(oe,ie){return R.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};te.displayName="UngroupOutlined";var Q=R.forwardRef(te)},20499:function(){},64851:function(){},59518:function(){},26199:function(){},14156:function(){},71468:function(){},48871:function(){},9871:function(){},25612:function(){},92777:function(){},20159:function(){},61622:function(){},51446:function(Ne,L,M){"use strict";M.d(L,{e9:function(){return Ae},is:function(){return z},kS:function(){return os},Iw:function(){return q},kJ:function(){return so},Lu:function(){return Ei},NB:function(){return ys},DK:function(){return Lc},QK:function(){return j},y$:function(){return Nr},Bz:function(){return Ee},b2:function(){return ty},bn:function(){return pe},kf:function(){return R}});var j={};M.r(j),M.d(j,{applyMixins:function(){return Em},clone:function(){return Up},cloneDeep:function(){return zo},createClass:function(){return yc},defaults:function(){return Ug},defaultsDeep:function(){return wm},ensure:function(){return jp},extend:function(){return E1},flatten:function(){return jg},forIn:function(){return th},getBoolean:function(){return ux},getByPath:function(){return Xf},getNumber:function(){return wo},getValue:function(){return lx},has:function(){return dn},inherit:function(){return Kl},isEmpty:function(){return k0},isEqual:function(){return Zc},isMaliciousProp:function(){return Vg},isObject:function(){return xi},isPlainObject:function(){return Do},merge:function(){return Bo},pick:function(){return ts},setByPath:function(){return Uh},unsetByPath:function(){return Sm}});var R={};M.r(R),M.d(R,{camelCase:function(){return t2},constantCase:function(){return q0},dotCase:function(){return Rm},endsWith:function(){return Rb},escape:function(){return Tb},eval:function(){return qw},getSpellingSuggestion:function(){return KT},hashcode:function(){return cC},isString:function(){return hx},kebabCase:function(){return NE},lowerFirst:function(){return ZT},pad:function(){return Pr},padEnd:function(){return Ri},padStart:function(){return Ki},pascalCase:function(){return Yp},pathCase:function(){return YT},repeat:function(){return Zg},sanitizeHTML:function(){return lC},sentenceCase:function(){return pP},split:function(){return Ux},startsWith:function(){return Ib},template:function(){return Yg},titleCase:function(){return IE},toString:function(){return Wo},truncate:function(){return wt},unescape:function(){return vx},uniqueId:function(){return gt},upperFirst:function(){return fd},uuid:function(){return n2}});var q={};M.r(q),M.d(q,{apply:function(){return km},cacher:function(){return hC},call:function(){return er},debounce:function(){return i2},defer:function(){return dC},isAsync:function(){return Lm},isAsyncLike:function(){return iS},isFunction:function(){return ur},noop:function(){return S},once:function(){return sM},toAsyncBoolean:function(){return Q0},toDeferredBoolean:function(){return o2}});var z={};M.r(z),M.d(z,{KAPPA:function(){return Xm},MouseWheelHandle:function(){return O2},addClass:function(){return io},animate:function(){return DS},animateAlongPath:function(){return MC},animateTransform:function(){return T2},append:function(){return nv},appendTo:function(){return aS},attr:function(){return oo},bbox:function(){return CM},before:function(){return h2},breakText:function(){return E2},cancelAnimationFrame:function(){return m2},circleToPathData:function(){return ES},clearSelection:function(){return $m},contains:function(){return Um},createElement:function(){return l2},createElementNS:function(){return Fm},createSVGMatrix:function(){return nc},createSVGPoint:function(){return TS},createSVGTransform:function(){return Km},createSlicePathData:function(){return vM},createSvgDocument:function(){return tv},createSvgElement:function(){return Qc},createVector:function(){return P2},createVectors:function(){return i0},decomposeMatrix:function(){return OS},ellipseToPathData:function(){return SS},empty:function(){return Vm},ensureId:function(){return Gm},find:function(){return Qg},findOne:function(){return zm},findParentByClass:function(){return d2},getAttribute:function(){return gC},getBBox:function(){return rc},getBBoxByElementAttr:function(){return MP},getBoundingOffsetRect:function(){return OC},getClass:function(){return qp},getComputedStyle:function(){return mC},getIntersection:function(){return Jm},getMatrixByElementAttr:function(){return OP},getPointsFromSvgElement:function(){return Zm},getTransformToElement:function(){return El},getVendorPrefixedName:function(){return b2},hasClass:function(){return qf},hasScrollbars:function(){return yC},index:function(){return Bm},isHTMLElement:function(){return jm},isSVGGraphicsElement:function(){return Jp},isVector:function(){return Uo},kebablizeAttrs:function(){return t0},lineToPathData:function(){return uv},matrixToRotation:function(){return yM},matrixToScale:function(){return mM},matrixToTransformString:function(){return r0},matrixToTranslation:function(){return bM},mergeAttrs:function(){return g2},ns:function(){return Sa},parseTransformString:function(){return A2},parseXML:function(){return u2},polygonToPathData:function(){return xS},polylineToPathData:function(){return CS},prepend:function(){return sS},qualifyAttr:function(){return p2},rectToPathData:function(){return vd},rectangleToPathData:function(){return _S},remove:function(){return gd},removeAttribute:function(){return f2},removeClass:function(){return tu},requestAnimationFrame:function(){return v2},rotate:function(){return dv},sample:function(){return S2},scale:function(){return Xh},setAttribute:function(){return Hm},setAttributes:function(){return e0},setPrefixedStyle:function(){return _P},styleToObject:function(){return rv},svgVersion:function(){return ev},tagName:function(){return pC},text:function(){return w2},toGeometryShape:function(){return $h},toLocalPoint:function(){return TC},toPath:function(){return _2},toPathData:function(){return AS},toggleClass:function(){return c2},transform:function(){return eg},transformLine:function(){return xM},transformPoint:function(){return Hh},transformPolyline:function(){return PS},transformRectangle:function(){return nu},transformStringToMatrix:function(){return qm},translate:function(){return M2},translateAndAutoOrient:function(){return Qm},uniqueId:function(){return oS}});var Z={};M.r(Z),M.d(Z,{async:function(){return o_},block:function(){return qS},circle:function(){return LC},circlePlus:function(){return s_},classic:function(){return JS},cross:function(){return r_},diamond:function(){return e_},ellipse:function(){return c_},path:function(){return t_}});var te={};M.r(te),M.d(te,{annotations:function(){return zM},atConnectionLength:function(){return ep},atConnectionLengthIgnoreGradient:function(){return $M},atConnectionLengthKeepGradient:function(){return f_},atConnectionRatio:function(){return yd},atConnectionRatioIgnoreGradient:function(){return ry},atConnectionRatioKeepGradient:function(){return Kh},connection:function(){return HM},displayEmpty:function(){return VM},eol:function(){return UM},fill:function(){return LM},filter:function(){return YS},html:function(){return N2},lineHeight:function(){return ks},port:function(){return KS},ref:function(){return ny},refCx:function(){return _M},refCy:function(){return AM},refD:function(){return PM},refDKeepOffset:function(){return TM},refDResetOffset:function(){return BS},refDx:function(){return Un},refDy:function(){return kS},refHeight:function(){return GS},refHeight2:function(){return kM},refPoints:function(){return DM},refPointsKeepOffset:function(){return MM},refPointsResetOffset:function(){return zS},refR:function(){return OM},refRCircumscribed:function(){return SM},refRInscribed:function(){return FS},refRx:function(){return wM},refRy:function(){return EM},refWidth:function(){return LS},refWidth2:function(){return RM},refX:function(){return PC},refX2:function(){return NM},refY:function(){return Jf},refY2:function(){return IM},resetOffset:function(){return XS},sourceMarker:function(){return l_},stroke:function(){return GM},style:function(){return ZS},targetMarker:function(){return u_},text:function(){return HS},textPath:function(){return BM},textVerticalAnchor:function(){return PP},textWrap:function(){return FM},title:function(){return jM},vertexMarker:function(){return d_},xAlign:function(){return $S},yAlign:function(){return WS}});var Q={};M.r(Q),M.d(Q,{dot:function(){return iy},doubleMesh:function(){return o0},fixedDot:function(){return R2},mesh:function(){return qh}});var de={};M.r(de),M.d(de,{blur:function(){return p_},brightness:function(){return KM},contrast:function(){return m_},dropShadow:function(){return GC},grayScale:function(){return XM},highlight:function(){return WM},hueRotate:function(){return v_},invert:function(){return YM},outline:function(){return k2},saturate:function(){return g_},sepia:function(){return ZM}});var oe={};M.r(oe),M.d(oe,{flipX:function(){return y_},flipXY:function(){return b_},flipY:function(){return s0},watermark:function(){return qM}});var ie={};M.r(ie),M.d(ie,{className:function(){return JM},opacity:function(){return QM},stroke:function(){return tO}});var re={};M.r(re),M.d(re,{absolute:function(){return nO},bottom:function(){return uO},ellipse:function(){return rO},ellipseSpread:function(){return iO},left:function(){return aO},line:function(){return sO},right:function(){return cO},top:function(){return lO}});var he={};M.r(he),M.d(he,{bottom:function(){return gO},inside:function(){return E_},insideOriented:function(){return S_},left:function(){return hO},manual:function(){return DP},outside:function(){return vO},outsideOriented:function(){return zC},radial:function(){return mO},radialOriented:function(){return yO},right:function(){return fO},top:function(){return pO}});var De={};M.r(De),M.d(De,{noop:function(){return vv},pinAbsolute:function(){return tf},pinRelative:function(){return tp}});var ue={};M.r(ue),M.d(ue,{bottom:function(){return XC},bottomLeft:function(){return F_},bottomRight:function(){return MO},center:function(){return SO},left:function(){return L_},midSide:function(){return B_},nodeCenter:function(){return DO},orth:function(){return PO},right:function(){return AO},top:function(){return _O},topLeft:function(){return TO},topRight:function(){return G_}});var xe={};M.r(xe),M.d(xe,{closest:function(){return U_},length:function(){return IO},orth:function(){return V_},ratio:function(){return NO}});var ae={};M.r(ae),M.d(ae,{anchor:function(){return FO},bbox:function(){return YC},boundary:function(){return LO},rect:function(){return kO}});var ce={};M.r(ce),M.d(ce,{er:function(){return WO},loop:function(){return iA},manhattan:function(){return rA},metro:function(){return $O},normal:function(){return BO},oneSide:function(){return zO},orth:function(){return JC}});var fe={};M.r(fe),M.d(fe,{jumpover:function(){return YO},loop:function(){return sA},normal:function(){return oA},rounded:function(){return aA},smooth:function(){return cA}});var Ee={};M.r(Ee),M.d(Ee,{Attr:function(){return xc},Background:function(){return ms},ConnectionPoint:function(){return d0},ConnectionStrategy:function(){return Du},Connector:function(){return dg},EdgeAnchor:function(){return lg},EdgeTool:function(){return ag},Filter:function(){return Jh},Grid:function(){return Ls},Highlighter:function(){return Qh},Marker:function(){return Yh},NodeAnchor:function(){return cg},NodeTool:function(){return sg},PortLabelLayout:function(){return a0},PortLayout:function(){return og},Registry:function(){return Ss},Router:function(){return rf},create:function(){return hA}});var pe={};M.r(pe),M.d(pe,{kS:function(){return fw}});var Ae={};M.r(Ae),M.d(Ae,{q6:function(){return Iu}});var nt=M(19755),G=M.n(nt),Fe=M(50450);const He=navigator.userAgent;var et;if(function(l){l.IS_MAC=navigator.appVersion.indexOf("Mac")>0,l.IS_IOS=!!He.match(/(iPad|iPhone|iPod)/g),l.IS_WINDOWS=navigator.appVersion.indexOf("Win")>0,l.IS_IE=He.indexOf("MSIE")>=0,l.IS_IE11=!!He.match(/Trident\/7\./),l.IS_EDGE=!!He.match(/Edge\//),l.IS_NETSCAPE=He.indexOf("Mozilla/")>=0&&He.indexOf("MSIE")<0&&He.indexOf("Edge/")<0,l.IS_CHROME_APP=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,l.IS_CHROME=He.indexOf("Chrome/")>=0&&He.indexOf("Edge/")<0,l.IS_OPERA=He.indexOf("Opera/")>=0||He.indexOf("OPR/")>=0,l.IS_FIREFOX=He.indexOf("Firefox/")>=0,l.IS_SAFARI=He.indexOf("AppleWebKit/")>=0&&He.indexOf("Chrome/")<0&&He.indexOf("Edge/")<0,l.SUPPORT_TOUCH="ontouchstart"in document.documentElement,l.SUPPORT_POINTER=window.PointerEvent!=null&&!l.IS_MAC,l.SUPPORT_PASSIVE=!1;try{const e=Object.defineProperty({},"passive",{get(){l.SUPPORT_PASSIVE=!0}}),t=document.createElement("div");t.addEventListener&&t.addEventListener("click",()=>{},e)}catch{}l.NO_FOREIGNOBJECT=!document.createElementNS||`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`!="[object SVGForeignObjectElement]"||He.indexOf("Opera/")>=0,l.SUPPORT_FOREIGNOBJECT=!l.NO_FOREIGNOBJECT}(et||(et={})),function(l){function e(){const d=window.module;return d!=null&&d.hot!=null&&d.hot.status!=null?d.hot.status():"unkonwn"}l.getHMRStatus=e;function t(){return e()==="apply"}l.isApplyingHMR=t;const o={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function c(d){const f=document.createElement(o[d]||"div"),v=`on${d}`;let x=v in f;return x||(f.setAttribute(v,"return;"),x=typeof f[v]=="function"),x}l.isEventSupported=c}(et||(et={})),et.SUPPORT_PASSIVE){G().event.special.touchstart={setup(e,t,o){if(!this.addEventListener)return!1;this.addEventListener("touchstart",o,{passive:!0})}};const l=G().event.special.mousewheel;if(l){const e=l.setup;l.setup=function(){const t=this.addEventListener;if(!t)return!1;this.addEventListener=(o,c)=>{t.call(this,o,c,{passive:!0})},e.call(this),this.addEventListener=t}}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(l){l.forEach(e=>{Object.prototype.hasOwnProperty.call(e,"append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value(...t){const o=document.createDocumentFragment();t.forEach(c=>{const d=c instanceof Node;o.appendChild(d?c:document.createTextNode(String(c)))}),this.appendChild(o)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]);var Bt=Array.isArray,Mn=Bt,ye=typeof global=="object"&&global&&global.Object===Object&&global,Ct=ye,Pn=typeof self=="object"&&self&&self.Object===Object&&self,jt=Ct||Pn||Function("return this")(),cn=jt,qn=cn.Symbol,on=qn,lo=Object.prototype,Zi=lo.hasOwnProperty,Xn=lo.toString,Ar=on?on.toStringTag:void 0;function lr(l){var e=Zi.call(l,Ar),t=l[Ar];try{l[Ar]=void 0;var o=!0}catch{}var c=Xn.call(l);return o&&(e?l[Ar]=t:delete l[Ar]),c}var Ir=lr,Oi=Object.prototype,Bi=Oi.toString;function Kr(l){return Bi.call(l)}var eo=Kr,Ts="[object Null]",Ks="[object Undefined]",bs=on?on.toStringTag:void 0;function Zo(l){return l==null?l===void 0?Ks:Ts:bs&&bs in Object(l)?Ir(l):eo(l)}var oi=Zo;function Hi(l){var e=typeof l;return l!=null&&(e=="object"||e=="function")}var xi=Hi,F="[object AsyncFunction]",H="[object Function]",mf="[object GeneratorFunction]",Oe="[object Proxy]";function ac(l){if(!xi(l))return!1;var e=oi(l);return e==H||e==mf||e==F||e==Oe}var ur=ac,ua=9007199254740991;function il(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=ua}var Ro=il;function Wa(l){return l!=null&&Ro(l.length)&&!ur(l)}var At=Wa,Jt=cn["__core-js_shared__"],Mt=Jt,un=function(){var l=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}();function Qn(l){return!!un&&un in l}var zi=Qn,Lr=Function.prototype,jr=Lr.toString;function Sr(l){if(l!=null){try{return jr.call(l)}catch{}try{return l+""}catch{}}return""}var qr=Sr,Xr=/[\\^$.*+?()[\]{}|]/g,ko=/^\[object .+?Constructor\]$/,Bc=Function.prototype,Cg=Object.prototype,yf=Bc.toString,fh=Cg.hasOwnProperty,Sc=RegExp("^"+yf.call(fh).replace(Xr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xs(l){if(!xi(l)||zi(l))return!1;var e=ur(l)?Sc:ko;return e.test(qr(l))}var dp=xs;function Ed(l,e){return l?.[e]}var Yo=Ed;function ph(l,e){var t=Yo(l,e);return dp(t)?t:void 0}var Al=ph,hp=Al(Object,"create"),ou=hp;function $i(){this.__data__=ou?ou(null):{},this.size=0}var uo=$i;function ti(l){var e=this.has(l)&&delete this.__data__[l];return this.size-=e?1:0,e}var To=ti,Ms="__lodash_hash_undefined__",su=Object.prototype,fp=su.hasOwnProperty;function bf(l){var e=this.__data__;if(ou){var t=e[l];return t===Ms?void 0:t}return fp.call(e,l)?e[l]:void 0}var gh=bf,pp=Object.prototype,gp=pp.hasOwnProperty;function Sd(l){var e=this.__data__;return ou?e[l]!==void 0:gp.call(e,l)}var vp=Sd,Tl="__lodash_hash_undefined__";function mp(l,e){var t=this.__data__;return this.size+=this.has(l)?0:1,t[l]=ou&&e===void 0?Tl:e,this}var xf=mp;function _c(l){var e=-1,t=l==null?0:l.length;for(this.clear();++e<t;){var o=l[e];this.set(o[0],o[1])}}_c.prototype.clear=uo,_c.prototype.delete=To,_c.prototype.get=gh,_c.prototype.has=vp,_c.prototype.set=xf;var Ml=_c;function _d(){this.__data__=[],this.size=0}var Ad=_d;function wg(l,e){return l===e||l!==l&&e!==e}var Ol=wg;function da(l,e){for(var t=l.length;t--;)if(Ol(l[t][0],e))return t;return-1}var ol=da,Cs=Array.prototype,qs=Cs.splice;function Td(l){var e=this.__data__,t=ol(e,l);if(t<0)return!1;var o=e.length-1;return t==o?e.pop():qs.call(e,t,1),--this.size,!0}var Cf=Td;function S0(l){var e=this.__data__,t=ol(e,l);return t<0?void 0:e[t][1]}var _0=S0;function wf(l){return ol(this.__data__,l)>-1}var Md=wf;function Od(l,e){var t=this.__data__,o=ol(t,l);return o<0?(++this.size,t.push([l,e])):t[o][1]=e,this}var Ef=Od;function au(l){var e=-1,t=l==null?0:l.length;for(this.clear();++e<t;){var o=l[e];this.set(o[0],o[1])}}au.prototype.clear=Ad,au.prototype.delete=Cf,au.prototype.get=_0,au.prototype.has=Md,au.prototype.set=Ef;var sl=au,ha=Al(cn,"Map"),cu=ha;function zc(){this.size=0,this.__data__={hash:new Ml,map:new(cu||sl),string:new Ml}}var Eg=zc;function Sg(l){var e=typeof l;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?l!=="__proto__":l===null}var Pl=Sg;function ku(l,e){var t=l.__data__;return Pl(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Js=ku;function Ta(l){var e=Js(this,l).delete(l);return this.size-=e?1:0,e}var Lu=Ta;function Gu(l){return Js(this,l).get(l)}var Fu=Gu;function Pd(l){return Js(this,l).has(l)}var Bu=Pd;function yp(l,e){var t=Js(this,l),o=t.size;return t.set(l,e),this.size+=t.size==o?0:1,this}var zu=yp;function Ma(l){var e=-1,t=l==null?0:l.length;for(this.clear();++e<t;){var o=l[e];this.set(o[0],o[1])}}Ma.prototype.clear=Eg,Ma.prototype.delete=Lu,Ma.prototype.get=Fu,Ma.prototype.has=Bu,Ma.prototype.set=zu;var Uu=Ma,Sf="__lodash_hash_undefined__";function _g(l){return this.__data__.set(l,Sf),this}var bp=_g;function xp(l){return this.__data__.has(l)}var Cp=xp;function vh(l){var e=-1,t=l==null?0:l.length;for(this.__data__=new Uu;++e<t;)this.add(l[e])}vh.prototype.add=vh.prototype.push=bp,vh.prototype.has=Cp;var Dd=vh;function Us(l,e,t,o){for(var c=l.length,d=t+(o?1:-1);o?d--:++d<c;)if(e(l[d],d,l))return d;return-1}var al=Us;function Vu(l){return l!==l}var Dl=Vu;function mh(l,e,t){for(var o=t-1,c=l.length;++o<c;)if(l[o]===e)return o;return-1}var fa=mh;function yh(l,e,t){return e===e?fa(l,e,t):al(l,Dl,t)}var vo=yh;function ho(l,e){var t=l==null?0:l.length;return!!t&&vo(l,e,0)>-1}var ju=ho;function Nl(l,e,t){for(var o=-1,c=l==null?0:l.length;++o<c;)if(t(e,l[o]))return!0;return!1}var Il=Nl;function bh(l,e){return l.has(e)}var Rl=bh,wp=Al(cn,"Set"),lu=wp;function Hu(){}var S=Hu;function I(l){var e=-1,t=Array(l.size);return l.forEach(function(o){t[++e]=o}),t}var U=I,W=1/0,se=lu&&1/U(new lu([,-0]))[1]==W?function(l){return new lu(l)}:S,le=se,Ce=200;function Ke(l,e,t){var o=-1,c=ju,d=l.length,f=!0,v=[],x=v;if(t)f=!1,c=Il;else if(d>=Ce){var w=e?null:le(l);if(w)return U(w);f=!1,c=Rl,x=new Dd}else x=e?[]:v;e:for(;++o<d;){var _=l[o],A=e?e(_):_;if(_=t||_!==0?_:0,f&&A===A){for(var P=x.length;P--;)if(x[P]===A)continue e;e&&x.push(A),v.push(_)}else c(x,A,t)||(x!==v&&x.push(A),v.push(_))}return v}var Je=Ke;function mt(l){return l&&l.length?Je(l):[]}var zt=mt;function xn(l,e){for(var t=-1,o=e.length,c=l.length;++t<o;)l[c+t]=e[t];return l}var Nt=xn;function Yt(l){return l!=null&&typeof l=="object"}var Wn=Yt,ai="[object Arguments]";function mr(l){return Wn(l)&&oi(l)==ai}var mo=mr,Mo=Object.prototype,pa=Mo.hasOwnProperty,Gr=Mo.propertyIsEnumerable,Rr=mo(function(){return arguments}())?mo:function(l){return Wn(l)&&pa.call(l,"callee")&&!Gr.call(l,"callee")},fi=Rr,Ni=on?on.isConcatSpreadable:void 0;function Lo(l){return Mn(l)||fi(l)||!!(Ni&&l&&l[Ni])}var Oa=Lo;function kl(l,e,t,o,c){var d=-1,f=l.length;for(t||(t=Oa),c||(c=[]);++d<f;){var v=l[d];e>0&&t(v)?e>1?kl(v,e-1,t,o,c):Nt(c,v):o||(c[c.length]=v)}return c}var Fs=kl;function Pa(l){return l}var Vs=Pa;function Ko(l,e,t){switch(t.length){case 0:return l.call(e);case 1:return l.call(e,t[0]);case 2:return l.call(e,t[0],t[1]);case 3:return l.call(e,t[0],t[1],t[2])}return l.apply(e,t)}var Da=Ko,js=Math.max;function Uc(l,e,t){return e=js(e===void 0?l.length-1:e,0),function(){for(var o=arguments,c=-1,d=js(o.length-e,0),f=Array(d);++c<d;)f[c]=o[e+c];c=-1;for(var v=Array(e+1);++c<e;)v[c]=o[c];return v[e]=t(f),Da(l,this,v)}}var Oo=Uc;function Bs(l){return function(){return l}}var Xa=Bs,ao=function(){try{var l=Al(Object,"defineProperty");return l({},"",{}),l}catch{}}(),ws=ao,Ac=ws?function(l,e){return ws(l,"toString",{configurable:!0,enumerable:!1,value:Xa(e),writable:!0})}:Vs,cc=Ac,Ll=800,Os=16,$u=Date.now;function Na(l){var e=0,t=0;return function(){var o=$u(),c=Os-(o-t);if(t=o,c>0){if(++e>=Ll)return arguments[0]}else e=0;return l.apply(void 0,arguments)}}var uu=Na,qo=uu(cc),Wu=qo;function Gl(l,e){return Wu(Oo(l,e,Vs),l+"")}var cl=Gl;function xh(l){return Wn(l)&&At(l)}var Ia=xh,Za=cl(function(l){return Je(Fs(l,1,Ia,!0))}),du=Za,Xu="[object Symbol]";function ga(l){return typeof l=="symbol"||Wn(l)&&oi(l)==Xu}var Jo=ga,va=4294967295,hu=va-1,Zu=Math.floor,Fl=Math.min;function fo(l,e,t,o){var c=0,d=l==null?0:l.length;if(d===0)return 0;e=t(e);for(var f=e!==e,v=e===null,x=Jo(e),w=e===void 0;c<d;){var _=Zu((c+d)/2),A=t(l[_]),P=A!==void 0,V=A===null,J=A===A,ee=Jo(A);if(f)var ge=o||J;else w?ge=J&&(o||P):v?ge=J&&P&&(o||!V):x?ge=J&&P&&!V&&(o||!ee):V||ee?ge=!1:ge=o?A<=e:A<e;ge?c=_+1:d=_}return Fl(d,hu)}var Ya=fo,$o=4294967295,ma=$o>>>1;function Qs(l,e,t){var o=0,c=l==null?o:l.length;if(typeof e=="number"&&e===e&&c<=ma){for(;o<c;){var d=o+c>>>1,f=l[d];f!==null&&!Jo(f)&&(t?f<=e:f<e)?o=d+1:c=d}return c}return Ya(l,e,Vs,t)}var Ch=Qs;function Nd(l,e){return Ch(l,e)}var _f=Nd;function Af(){this.__data__=new sl,this.size=0}var lc=Af;function pt(l){var e=this.__data__,t=e.delete(l);return this.size=e.size,t}var Qt=pt;function Ft(l){return this.__data__.get(l)}var or=Ft;function Hr(l){return this.__data__.has(l)}var Yi=Hr,bo=200;function Ji(l,e){var t=this.__data__;if(t instanceof sl){var o=t.__data__;if(!cu||o.length<bo-1)return o.push([l,e]),this.size=++t.size,this;t=this.__data__=new Uu(o)}return t.set(l,e),this.size=t.size,this}var Id=Ji;function Yu(l){var e=this.__data__=new sl(l);this.size=e.size}Yu.prototype.clear=lc,Yu.prototype.delete=Qt,Yu.prototype.get=or,Yu.prototype.has=Yi,Yu.prototype.set=Id;var Te=Yu;function Ye(l,e){for(var t=-1,o=l==null?0:l.length;++t<o;)if(e(l[t],t,l))return!0;return!1}var lt=Ye,Tt=1,yt=2;function an(l,e,t,o,c,d){var f=t&Tt,v=l.length,x=e.length;if(v!=x&&!(f&&x>v))return!1;var w=d.get(l),_=d.get(e);if(w&&_)return w==e&&_==l;var A=-1,P=!0,V=t&yt?new Dd:void 0;for(d.set(l,e),d.set(e,l);++A<v;){var J=l[A],ee=e[A];if(o)var ge=f?o(ee,J,A,e,l,d):o(J,ee,A,l,e,d);if(ge!==void 0){if(ge)continue;P=!1;break}if(V){if(!lt(e,function(Se,Re){if(!Rl(V,Re)&&(J===Se||c(J,Se,t,o,d)))return V.push(Re)})){P=!1;break}}else if(!(J===ee||c(J,ee,t,o,d))){P=!1;break}}return d.delete(l),d.delete(e),P}var Ut=an,Bn=cn.Uint8Array,Zn=Bn;function wr(l){var e=-1,t=Array(l.size);return l.forEach(function(o,c){t[++e]=[c,o]}),t}var yr=wr,Tr=1,Ci=2,ci="[object Boolean]",br="[object Date]",xo="[object Error]",Ui="[object Map]",ea="[object Number]",Po="[object RegExp]",uc="[object Set]",ll="[object String]",Ra="[object Symbol]",Ka="[object ArrayBuffer]",Tc="[object DataView]",Vc=on?on.prototype:void 0,fu=Vc?Vc.valueOf:void 0;function li(l,e,t,o,c,d,f){switch(t){case Tc:if(l.byteLength!=e.byteLength||l.byteOffset!=e.byteOffset)return!1;l=l.buffer,e=e.buffer;case Ka:return!(l.byteLength!=e.byteLength||!d(new Zn(l),new Zn(e)));case ci:case br:case ea:return Ol(+l,+e);case xo:return l.name==e.name&&l.message==e.message;case Po:case ll:return l==e+"";case Ui:var v=yr;case uc:var x=o&Tr;if(v||(v=U),l.size!=e.size&&!x)return!1;var w=f.get(l);if(w)return w==e;o|=Ci,f.set(l,e);var _=Ut(v(l),v(e),o,c,d,f);return f.delete(l),_;case Ra:if(fu)return fu.call(l)==fu.call(e)}return!1}var pi=li;function wh(l,e,t){var o=e(l);return Mn(l)?o:Nt(o,t(l))}var pu=wh;function Eh(l,e){for(var t=-1,o=l==null?0:l.length,c=0,d=[];++t<o;){var f=l[t];e(f,t,l)&&(d[c++]=f)}return d}var Ag=Eh;function Tf(){return[]}var Ku=Tf,dc=Object.prototype,cs=dc.propertyIsEnumerable,Es=Object.getOwnPropertySymbols,A0=Es?function(l){return l==null?[]:(l=Object(l),Ag(Es(l),function(e){return cs.call(l,e)}))}:Ku,Ep=A0;function qu(l,e){for(var t=-1,o=Array(l);++t<l;)o[t]=e(t);return o}var Mf=qu;function Sp(){return!1}var ka=Sp,Rd=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Hs=Rd&&typeof module=="object"&&module&&!module.nodeType&&module,qa=Hs&&Hs.exports===Rd,Ju=qa?cn.Buffer:void 0,Sh=Ju?Ju.isBuffer:void 0,ta=Sh||ka,ul=ta,Qu=9007199254740991,kd=/^(?:0|[1-9]\d*)$/;function qv(l,e){var t=typeof l;return e=e??Qu,!!e&&(t=="number"||t!="symbol"&&kd.test(l))&&l>-1&&l%1==0&&l<e}var _h=qv,_p="[object Arguments]",Ah="[object Array]",Tg="[object Boolean]",Me="[object Date]",Th="[object Error]",Ld="[object Function]",La="[object Map]",Ai="[object Number]",Jv="[object Object]",ed="[object RegExp]",T0="[object Set]",td="[object String]",M0="[object WeakMap]",Bl="[object ArrayBuffer]",Mg="[object DataView]",Ap="[object Float32Array]",Og="[object Float64Array]",gu="[object Int8Array]",O0="[object Int16Array]",Qv="[object Int32Array]",Vy="[object Uint8Array]",nd="[object Uint8ClampedArray]",P0="[object Uint16Array]",zl="[object Uint32Array]",to={};to[Ap]=to[Og]=to[gu]=to[O0]=to[Qv]=to[Vy]=to[nd]=to[P0]=to[zl]=!0,to[_p]=to[Ah]=to[Bl]=to[Tg]=to[Mg]=to[Me]=to[Th]=to[Ld]=to[La]=to[Ai]=to[Jv]=to[ed]=to[T0]=to[td]=to[M0]=!1;function em(l){return Wn(l)&&Ro(l.length)&&!!to[oi(l)]}var Pg=em;function rd(l){return function(e){return l(e)}}var Gd=rd,Mc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mh=Mc&&typeof module=="object"&&module&&!module.nodeType&&module,Go=Mh&&Mh.exports===Mc,Vi=Go&&Ct.process,Oh=function(){try{var l=Mh&&Mh.require&&Mh.require("util").types;return l||Vi&&Vi.binding&&Vi.binding("util")}catch{}}(),hc=Oh,Of=hc&&hc.isTypedArray,Tp=Of?Gd(Of):Pg,Fd=Tp,Bd=Object.prototype,Oc=Bd.hasOwnProperty;function Pf(l,e){var t=Mn(l),o=!t&&fi(l),c=!t&&!o&&ul(l),d=!t&&!o&&!c&&Fd(l),f=t||o||c||d,v=f?Mf(l.length,String):[],x=v.length;for(var w in l)(e||Oc.call(l,w))&&!(f&&(w=="length"||c&&(w=="offset"||w=="parent")||d&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||_h(w,x)))&&v.push(w);return v}var dl=Pf,Df=Object.prototype;function Pc(l){var e=l&&l.constructor,t=typeof e=="function"&&e.prototype||Df;return l===t}var fc=Pc;function Dg(l,e){return function(t){return l(e(t))}}var jc=Dg,id=jc(Object.keys,Object),$s=id,od=Object.prototype,Hc=od.hasOwnProperty;function ya(l){if(!fc(l))return $s(l);var e=[];for(var t in Object(l))Hc.call(l,t)&&t!="constructor"&&e.push(t);return e}var zd=ya;function Ud(l){return At(l)?dl(l):zd(l)}var Dc=Ud;function sd(l){return pu(l,Dc,Ep)}var pc=sd,Ng=1,D0=Object.prototype,Nf=D0.hasOwnProperty;function Mp(l,e,t,o,c,d){var f=t&Ng,v=pc(l),x=v.length,w=pc(e),_=w.length;if(x!=_&&!f)return!1;for(var A=x;A--;){var P=v[A];if(!(f?P in e:Nf.call(e,P)))return!1}var V=d.get(l),J=d.get(e);if(V&&J)return V==e&&J==l;var ee=!0;d.set(l,e),d.set(e,l);for(var ge=f;++A<x;){P=v[A];var Se=l[P],Re=e[P];if(o)var _e=f?o(Re,Se,P,e,l,d):o(Se,Re,P,l,e,d);if(!(_e===void 0?Se===Re||c(Se,Re,t,o,d):_e)){ee=!1;break}ge||(ge=P=="constructor")}if(ee&&!ge){var Ue=l.constructor,Qe=e.constructor;Ue!=Qe&&"constructor"in l&&"constructor"in e&&!(typeof Ue=="function"&&Ue instanceof Ue&&typeof Qe=="function"&&Qe instanceof Qe)&&(ee=!1)}return d.delete(l),d.delete(e),ee}var Op=Mp,na=Al(cn,"DataView"),Ph=na,Pp=Al(cn,"Promise"),Nc=Pp,$c=Al(cn,"WeakMap"),Vd=$c,vu="[object Map]",Ig="[object Object]",ra="[object Promise]",If="[object Set]",jd="[object WeakMap]",Dh="[object DataView]",Ul=qr(Ph),Rf=qr(cu),kf=qr(Nc),Vl=qr(lu),mu=qr(Vd),Ic=oi;(Ph&&Ic(new Ph(new ArrayBuffer(1)))!=Dh||cu&&Ic(new cu)!=vu||Nc&&Ic(Nc.resolve())!=ra||lu&&Ic(new lu)!=If||Vd&&Ic(new Vd)!=jd)&&(Ic=function(l){var e=oi(l),t=e==Ig?l.constructor:void 0,o=t?qr(t):"";if(o)switch(o){case Ul:return Dh;case Rf:return vu;case kf:return ra;case Vl:return If;case mu:return jd}return e});var Rc=Ic,Nh=1,Hd="[object Arguments]",jl="[object Array]",Hl="[object Object]",hl=Object.prototype,gc=hl.hasOwnProperty;function Lf(l,e,t,o,c,d){var f=Mn(l),v=Mn(e),x=f?jl:Rc(l),w=v?jl:Rc(e);x=x==Hd?Hl:x,w=w==Hd?Hl:w;var _=x==Hl,A=w==Hl,P=x==w;if(P&&ul(l)){if(!ul(e))return!1;f=!0,_=!1}if(P&&!_)return d||(d=new Te),f||Fd(l)?Ut(l,e,t,o,c,d):pi(l,e,x,t,o,c,d);if(!(t&Nh)){var V=_&&gc.call(l,"__wrapped__"),J=A&&gc.call(e,"__wrapped__");if(V||J){var ee=V?l.value():l,ge=J?e.value():e;return d||(d=new Te),c(ee,ge,t,o,d)}}return P?(d||(d=new Te),Op(l,e,t,o,c,d)):!1}var $d=Lf;function vc(l,e,t,o,c){return l===e?!0:l==null||e==null||!Wn(l)&&!Wn(e)?l!==l&&e!==e:$d(l,e,t,o,vc,c)}var $l=vc,Dp=1,yu=2;function bu(l,e,t,o){var c=t.length,d=c,f=!o;if(l==null)return!d;for(l=Object(l);c--;){var v=t[c];if(f&&v[2]?v[1]!==l[v[0]]:!(v[0]in l))return!1}for(;++c<d;){v=t[c];var x=v[0],w=l[x],_=v[1];if(f&&v[2]){if(w===void 0&&!(x in l))return!1}else{var A=new Te;if(o)var P=o(w,_,x,l,e,A);if(!(P===void 0?$l(_,w,Dp|yu,o,A):P))return!1}}return!0}var Wd=bu;function Xd(l){return l===l&&!xi(l)}var kc=Xd;function Wl(l){for(var e=Dc(l),t=e.length;t--;){var o=e[t],c=l[o];e[t]=[o,c,kc(c)]}return e}var Gf=Wl;function Ff(l,e){return function(t){return t==null?!1:t[l]===e&&(e!==void 0||l in Object(t))}}var Rg=Ff;function Ih(l){var e=Gf(l);return e.length==1&&e[0][2]?Rg(e[0][0],e[0][1]):function(t){return t===l||Wd(t,l,e)}}var ad=Ih,Zd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xl=/^\w*$/;function Yd(l,e){if(Mn(l))return!1;var t=typeof l;return t=="number"||t=="symbol"||t=="boolean"||l==null||Jo(l)?!0:Xl.test(l)||!Zd.test(l)||e!=null&&l in Object(e)}var Rh=Yd,Kd="Expected a function";function ui(l,e){if(typeof l!="function"||e!=null&&typeof e!="function")throw new TypeError(Kd);var t=function(){var o=arguments,c=e?e.apply(this,o):o[0],d=t.cache;if(d.has(c))return d.get(c);var f=l.apply(this,o);return t.cache=d.set(c,f)||d,f};return t.cache=new(ui.Cache||Uu),t}ui.Cache=Uu;var Bf=ui,Np=500;function xu(l){var e=Bf(l,function(o){return t.size===Np&&t.clear(),o}),t=e.cache;return e}var zf=xu,Ip=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tm=/\\(\\)?/g,Wc=zf(function(l){var e=[];return l.charCodeAt(0)===46&&e.push(""),l.replace(Ip,function(t,o,c,d){e.push(c?d.replace(tm,"$1"):o||t)}),e}),Rp=Wc;function cd(l,e){for(var t=-1,o=l==null?0:l.length,c=Array(o);++t<o;)c[t]=e(l[t],t,l);return c}var fl=cd,ld=1/0,Cu=on?on.prototype:void 0,Ps=Cu?Cu.toString:void 0;function Ga(l){if(typeof l=="string")return l;if(Mn(l))return fl(l,Ga)+"";if(Jo(l))return Ps?Ps.call(l):"";var e=l+"";return e=="0"&&1/l==-ld?"-0":e}var pl=Ga;function Uf(l){return l==null?"":pl(l)}var Wo=Uf;function Ds(l,e){return Mn(l)?l:Rh(l,e)?[l]:Rp(Wo(l))}var Hn=Ds,ud=1/0;function Vf(l){if(typeof l=="string"||Jo(l))return l;var e=l+"";return e=="0"&&1/l==-ud?"-0":e}var ia=Vf;function Fa(l,e){e=Hn(e,l);for(var t=0,o=e.length;l!=null&&t<o;)l=l[ia(e[t++])];return t&&t==o?l:void 0}var vi=Fa;function Ba(l,e,t){var o=l==null?void 0:vi(l,e);return o===void 0?t:o}var qd=Ba;function Jd(l,e){return l!=null&&e in Object(l)}var kp=Jd;function kh(l,e,t){e=Hn(e,l);for(var o=-1,c=e.length,d=!1;++o<c;){var f=ia(e[o]);if(!(d=l!=null&&t(l,f)))break;l=l[f]}return d||++o!=c?d:(c=l==null?0:l.length,!!c&&Ro(c)&&_h(f,c)&&(Mn(l)||fi(l)))}var gl=kh;function wu(l,e){return l!=null&&gl(l,e,kp)}var Xc=wu,nm=1,jy=2;function rm(l,e){return Rh(l)&&kc(e)?Rg(ia(l),e):function(t){var o=qd(t,l);return o===void 0&&o===e?Xc(t,l):$l(e,o,nm|jy)}}var ls=rm;function Ja(l){return function(e){return e?.[l]}}var mc=Ja;function N0(l){return function(e){return vi(e,l)}}var im=N0;function Lh(l){return Rh(l)?mc(ia(l)):im(l)}var Gh=Lh;function vl(l){return typeof l=="function"?l:l==null?Vs:typeof l=="object"?Mn(l)?ls(l[0],l[1]):ad(l):Gh(l)}var jf=vl;function Fh(l,e,t){return Ya(l,e,jf(t,2))}var us=Fh;function Qd(l){return function(e,t,o){for(var c=-1,d=Object(e),f=o(e),v=f.length;v--;){var x=f[l?v:++c];if(t(d[x],x,d)===!1)break}return e}}var eh=Qd,Lp=eh(),Hf=Lp;function za(l,e){return l&&Hf(l,e,Dc)}var ml=za;function ds(l,e){return function(t,o){if(t==null)return t;if(!At(t))return l(t,o);for(var c=t.length,d=e?c:-1,f=Object(t);(e?d--:++d<c)&&o(f[d],d,f)!==!1;);return t}}var ba=ds,Gp=ba(ml),$f=Gp;function om(l,e){var t=-1,o=At(l)?Array(l.length):[];return $f(l,function(c,d,f){o[++t]=e(c,d,f)}),o}var Fp=om;function Bh(l,e){var t=l.length;for(l.sort(e);t--;)l[t]=l[t].value;return l}var Bp=Bh;function xa(l,e){if(l!==e){var t=l!==void 0,o=l===null,c=l===l,d=Jo(l),f=e!==void 0,v=e===null,x=e===e,w=Jo(e);if(!v&&!w&&!d&&l>e||d&&f&&x&&!v&&!w||o&&f&&x||!t&&x||!c)return 1;if(!o&&!d&&!w&&l<e||w&&t&&c&&!o&&!d||v&&t&&c||!f&&c||!x)return-1}return 0}var Qa=xa;function Eu(l,e,t){for(var o=-1,c=l.criteria,d=e.criteria,f=c.length,v=t.length;++o<f;){var x=Qa(c[o],d[o]);if(x){if(o>=v)return x;var w=t[o];return x*(w=="desc"?-1:1)}}return l.index-e.index}var Su=Eu;function kg(l,e,t){e.length?e=fl(e,function(d){return Mn(d)?function(f){return vi(f,d.length===1?d[0]:d)}:d}):e=[Vs];var o=-1;e=fl(e,Gd(jf));var c=Fp(l,function(d,f,v){var x=fl(e,function(w){return w(d)});return{criteria:x,index:++o,value:d}});return Bp(c,function(d,f){return Su(d,f,t)})}var zh=kg;function I0(l,e,t){if(!xi(t))return!1;var o=typeof e;return(o=="number"?At(t)&&_h(e,t.length):o=="string"&&e in t)?Ol(t[e],l):!1}var _u=I0,R0=cl(function(l,e){if(l==null)return[];var t=e.length;return t>1&&_u(l,e[0],e[1])?e=[]:t>2&&_u(e[0],e[1],e[2])&&(e=[e[0]]),zh(l,Fs(e,1),[])}),Lg=R0;function ec(l,e,t){e=="__proto__"&&ws?ws(l,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):l[e]=t}var Zl=ec;function K(l,e,t,o){for(var c=-1,d=l==null?0:l.length;++c<d;){var f=l[c];e(o,f,t(f),l)}return o}var Pe=K;function ze(l,e,t,o){return $f(l,function(c,d,f){e(o,c,t(c),f)}),o}var Et=ze;function ft(l,e){return function(t,o){var c=Mn(t)?Pe:Et,d=e?e():{};return c(t,l,jf(o,2),d)}}var xt=ft,It=Object.prototype,en=It.hasOwnProperty,hn=xt(function(l,e,t){en.call(l,t)?l[t].push(e):Zl(l,t,[e])}),pn=hn,fn=200;function sn(l,e,t,o){var c=-1,d=ju,f=!0,v=l.length,x=[],w=e.length;if(!v)return x;t&&(e=fl(e,Gd(t))),o?(d=Il,f=!1):e.length>=fn&&(d=Rl,f=!1,e=new Dd(e));e:for(;++c<v;){var _=l[c],A=t==null?_:t(_);if(_=o||_!==0?_:0,f&&A===A){for(var P=w;P--;)if(e[P]===A)continue e;x.push(_)}else d(e,A,o)||x.push(_)}return x}var Nn=sn,ln=cl(function(l,e){return Ia(l)?Nn(l,Fs(e,1,Ia,!0)):[]}),En=ln;function ht(l,e,t){for(var o=-1,c=l.length;++o<c;){var d=l[o],f=e(d);if(f!=null&&(v===void 0?f===f&&!Jo(f):t(f,v)))var v=f,x=d}return x}var Rt=ht;function vn(l,e){return l>e}var zn=vn;function tn(l){return l&&l.length?Rt(l,Vs,zn):void 0}var Fn=tn;function Wt(l,e,t){const o=_n(l,t),c=_n(e,t),d=c.free,f=o.keyIndex,v=c.keyIndex,x=[],w=[];let _=0,A,P,V=0;for(;_<l.length;){if(A=l[_],P=A[t],P)if(!v.hasOwnProperty(P))w.push(null);else{const Ue=v[P];w.push(e[Ue])}else{V+=1;const Ue=d[V];w.push(Ue||null)}_+=1}const J=w.slice(0);for(_=0;_<J.length;)J[_]===null?(Se(_),_e(_)):_+=1;let ee=_=0;for(;_<e.length;){A=e[_],P=A[t];const Ue=J[ee];if(Ue){const Qe=Ue[t];if(P===Qe)ee+=1;else if(!f.hasOwnProperty(P))Re(_,A);else{const bt=J[ee+1];bt&&(bt[t]===P?(Se(_),_e(ee),ee+=1):Re(_,A))}}else Re(_,A);_+=1}let ge=J.length-ee;for(;(ee+=1)<J.length;)ge-=1,Se(ge+_);function Se(Ue){const Qe={index:Ue,type:0,item:null};x.push(Qe)}function Re(Ue,Qe){const bt={index:Ue,item:Qe,type:1};x.push(bt)}function _e(Ue){J.splice(Ue,1)}return{moves:x}}function _n(l,e){const t={},o=[];for(let c=0,d=l.length;c<d;c+=1){const f=l[c],v=f[e];v?t[v]=c:o.push(f)}return{keyIndex:t,free:o}}var nn=Object.prototype,An=nn.hasOwnProperty;function hr(l,e){return l!=null&&An.call(l,e)}var Mr=hr;function Tn(l,e){return l!=null&&gl(l,e,Mr)}var dn=Tn,qt=Object.prototype,xr=qt.hasOwnProperty;function Fr(l,e,t){var o=l[e];(!(xr.call(l,e)&&Ol(o,t))||t===void 0&&!(e in l))&&Zl(l,e,t)}var Yn=Fr;function si(l,e,t,o){if(!xi(l))return l;e=Hn(e,l);for(var c=-1,d=e.length,f=d-1,v=l;v!=null&&++c<d;){var x=ia(e[c]),w=t;if(x==="__proto__"||x==="constructor"||x==="prototype")return l;if(c!=f){var _=v[x];w=o?o(_,x,v):void 0,w===void 0&&(w=xi(_)?_:_h(e[c+1])?[]:{})}Yn(v,x,w),v=v[x]}return l}var Dr=si;function $r(l,e,t){for(var o=-1,c=e.length,d={};++o<c;){var f=e[o],v=vi(l,f);t(v,f)&&Dr(d,Hn(f,l),v)}return d}var Ti=$r;function Qo(l,e){return Ti(l,e,function(t,o){return Xc(l,o)})}var hs=Qo;function Jr(l){var e=l==null?0:l.length;return e?Fs(l,1):[]}var fs=Jr;function yo(l){return Wu(Oo(l,void 0,fs),l+"")}var ps=yo,es=ps(function(l,e){return l==null?{}:hs(l,e)}),ts=es;function Co(l){return typeof l=="function"?l:Vs}var ns=Co;function gs(l){var e=[];if(l!=null)for(var t in Object(l))e.push(t);return e}var Br=gs,Fo=Object.prototype,Ii=Fo.hasOwnProperty;function gr(l){if(!xi(l))return Br(l);var e=fc(l),t=[];for(var o in l)o=="constructor"&&(e||!Ii.call(l,o))||t.push(o);return t}var di=gr;function wi(l){return At(l)?dl(l,!0):di(l)}var co=wi;function Yl(l,e){return l==null?l:Hf(l,ns(e),co)}var th=Yl;function Be(l,e,t){(t!==void 0&&!Ol(l[e],t)||t===void 0&&!(e in l))&&Zl(l,e,t)}var Dt=Be,St=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$n=St&&typeof module=="object"&&module&&!module.nodeType&&module,ni=$n&&$n.exports===St,Ge=ni?cn.Buffer:void 0,we=Ge?Ge.allocUnsafe:void 0;function We(l,e){if(e)return l.slice();var t=l.length,o=we?we(t):new l.constructor(t);return l.copy(o),o}var ut=We;function dt(l){var e=new l.constructor(l.byteLength);return new Zn(e).set(new Zn(l)),e}var qe=dt;function Xe(l,e){var t=e?qe(l.buffer):l.buffer;return new l.constructor(t,l.byteOffset,l.length)}var it=Xe;function Le(l,e){var t=-1,o=l.length;for(e||(e=Array(o));++t<o;)e[t]=l[t];return e}var $e=Le,Ie=Object.create,rt=function(){function l(){}return function(e){if(!xi(e))return{};if(Ie)return Ie(e);l.prototype=e;var t=new l;return l.prototype=void 0,t}}(),vt=rt,Vt=jc(Object.getPrototypeOf,Object),Ht=Vt;function Lt(l){return typeof l.constructor=="function"&&!fc(l)?vt(Ht(l)):{}}var gn=Lt,sr="[object Object]",zr=Function.prototype,Kn=Object.prototype,fr=zr.toString,tr=Kn.hasOwnProperty,Pi=fr.call(Object);function rs(l){if(!Wn(l)||oi(l)!=sr)return!1;var e=Ht(l);if(e===null)return!0;var t=tr.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&fr.call(t)==Pi}var Do=rs;function zp(l,e){if(!(e==="constructor"&&typeof l[e]=="function")&&e!="__proto__")return l[e]}var Ua=zp;function Gg(l,e,t,o){var c=!t;t||(t={});for(var d=-1,f=e.length;++d<f;){var v=e[d],x=o?o(t[v],l[v],v,t,l):void 0;x===void 0&&(x=l[v]),c?Zl(t,v,x):Yn(t,v,x)}return t}var Xo=Gg;function sm(l){return Xo(l,co(l))}var Hy=sm;function $y(l,e,t,o,c,d,f){var v=Ua(l,t),x=Ua(e,t),w=f.get(x);if(w){Dt(l,t,w);return}var _=d?d(v,x,t+"",l,e,f):void 0,A=_===void 0;if(A){var P=Mn(x),V=!P&&ul(x),J=!P&&!V&&Fd(x);_=x,P||V||J?Mn(v)?_=v:Ia(v)?_=$e(v):V?(A=!1,_=ut(x,!0)):J?(A=!1,_=it(x,!0)):_=[]:Do(x)||fi(x)?(_=v,fi(v)?_=Hy(v):(!xi(v)||ur(v))&&(_=gn(x))):A=!1}A&&(f.set(x,_),c(_,x,o,d,f),f.delete(x)),Dt(l,t,_)}var C1=$y;function am(l,e,t,o,c){l!==e&&Hf(e,function(d,f){if(c||(c=new Te),xi(d))C1(l,e,f,t,am,o,c);else{var v=o?o(Ua(l,f),d,f+"",l,e,c):void 0;v===void 0&&(v=d),Dt(l,f,v)}},co)}var cm=am;function Wy(l){return cl(function(e,t){var o=-1,c=t.length,d=c>1?t[c-1]:void 0,f=c>2?t[2]:void 0;for(d=l.length>3&&typeof d=="function"?(c--,d):void 0,f&&_u(t[0],t[1],f)&&(d=c<3?void 0:d,c=1),e=Object(e);++o<c;){var v=t[o];v&&l(e,v,o,d)}return e})}var Fg=Wy,Nw=Fg(function(l,e,t){cm(l,e,t)}),Bo=Nw,w1=Fg(function(l,e){Xo(e,co(e),l)}),E1=w1;function nh(l,e){return $l(l,e)}var Zc=nh,S1="[object Map]",Xy="[object Set]",lm=Object.prototype,Zy=lm.hasOwnProperty;function Yy(l){if(l==null)return!0;if(At(l)&&(Mn(l)||typeof l=="string"||typeof l.splice=="function"||ul(l)||Fd(l)||fi(l)))return!l.length;var e=Rc(l);if(e==S1||e==Xy)return!l.size;if(fc(l))return!zd(l).length;for(var t in l)if(Zy.call(l,t))return!1;return!0}var k0=Yy;function Ky(l,e){for(var t=-1,o=l==null?0:l.length;++t<o&&e(l[t],t,l)!==!1;);return l}var _1=Ky;function qy(l,e){return l&&Xo(e,Dc(e),l)}var Jy=qy;function L0(l,e){return l&&Xo(e,co(e),l)}var A1=L0;function T1(l,e){return Xo(l,Ep(l),e)}var Qy=T1,M1=Object.getOwnPropertySymbols,O1=M1?function(l){for(var e=[];l;)Nt(e,Ep(l)),l=Ht(l);return e}:Ku,eb=O1;function P1(l,e){return Xo(l,eb(l),e)}var D1=P1;function N1(l){return pu(l,co,eb)}var I1=N1,tb=Object.prototype,R1=tb.hasOwnProperty;function k1(l){var e=l.length,t=new l.constructor(e);return e&&typeof l[0]=="string"&&R1.call(l,"index")&&(t.index=l.index,t.input=l.input),t}var Iw=k1;function nb(l,e){var t=e?qe(l.buffer):l.buffer;return new l.constructor(t,l.byteOffset,l.byteLength)}var L1=nb,um=/\w*$/;function rb(l){var e=new l.constructor(l.source,um.exec(l));return e.lastIndex=l.lastIndex,e}var G1=rb,ib=on?on.prototype:void 0,dm=ib?ib.valueOf:void 0;function ob(l){return dm?Object(dm.call(l)):{}}var G0=ob,hm="[object Boolean]",F1="[object Date]",fm="[object Map]",sb="[object Number]",Rw="[object RegExp]",ab="[object Set]",B1="[object String]",kw="[object Symbol]",cb="[object ArrayBuffer]",z1="[object DataView]",U1="[object Float32Array]",F0="[object Float64Array]",V1="[object Int8Array]",j1="[object Int16Array]",lb="[object Int32Array]",ub="[object Uint8Array]",db="[object Uint8ClampedArray]",hb="[object Uint16Array]",fb="[object Uint32Array]";function pb(l,e,t){var o=l.constructor;switch(e){case cb:return qe(l);case hm:case F1:return new o(+l);case z1:return L1(l,t);case U1:case F0:case V1:case j1:case lb:case ub:case db:case hb:case fb:return it(l,t);case fm:return new o;case sb:case B1:return new o(l);case Rw:return G1(l);case ab:return new o;case kw:return G0(l)}}var H1=pb,$1="[object Map]";function gb(l){return Wn(l)&&Rc(l)==$1}var B0=gb,Bg=hc&&hc.isMap,vb=Bg?Gd(Bg):B0,W1=vb,pm="[object Set]";function mb(l){return Wn(l)&&Rc(l)==pm}var X1=mb,yb=hc&&hc.isSet,bb=yb?Gd(yb):X1,xb=bb,gm=1,Z1=2,Y1=4,z0="[object Arguments]",vm="[object Array]",K1="[object Boolean]",mm="[object Date]",Cb="[object Error]",Yc="[object Function]",ym="[object GeneratorFunction]",q1="[object Map]",rh="[object Number]",gi="[object Object]",bm="[object RegExp]",Kc="[object Set]",Ws="[object String]",J1="[object Symbol]",Wf="[object WeakMap]",Q1="[object ArrayBuffer]",ex="[object DataView]",Lw="[object Float32Array]",tx="[object Float64Array]",Gw="[object Int8Array]",xm="[object Int16Array]",nx="[object Int32Array]",ih="[object Uint8Array]",wb="[object Uint8ClampedArray]",U0="[object Uint16Array]",Ns="[object Uint32Array]",hi={};hi[z0]=hi[vm]=hi[Q1]=hi[ex]=hi[K1]=hi[mm]=hi[Lw]=hi[tx]=hi[Gw]=hi[xm]=hi[nx]=hi[q1]=hi[rh]=hi[gi]=hi[bm]=hi[Kc]=hi[Ws]=hi[J1]=hi[ih]=hi[wb]=hi[U0]=hi[Ns]=!0,hi[Cb]=hi[Yc]=hi[Wf]=!1;function zg(l,e,t,o,c,d){var f,v=e&gm,x=e&Z1,w=e&Y1;if(t&&(f=c?t(l,o,c,d):t(l)),f!==void 0)return f;if(!xi(l))return l;var _=Mn(l);if(_){if(f=Iw(l),!v)return $e(l,f)}else{var A=Rc(l),P=A==Yc||A==ym;if(ul(l))return ut(l,v);if(A==gi||A==z0||P&&!c){if(f=x||P?{}:gn(l),!v)return x?D1(l,A1(f,l)):Qy(l,Jy(f,l))}else{if(!hi[A])return c?l:{};f=H1(l,A,v)}}d||(d=new Te);var V=d.get(l);if(V)return V;d.set(l,f),xb(l)?l.forEach(function(ge){f.add(zg(ge,e,t,ge,l,d))}):W1(l)&&l.forEach(function(ge,Se){f.set(Se,zg(ge,e,t,Se,l,d))});var J=w?x?I1:pc:x?co:Dc,ee=_?void 0:J(l);return _1(ee||l,function(ge,Se){ee&&(Se=ge,ge=l[Se]),Yn(f,Se,zg(ge,e,t,Se,l,d))}),f}var V0=zg,rx=4;function Eb(l){return V0(l,rx)}var Up=Eb,ix=1,Cm=4;function Sb(l){return V0(l,ix|Cm)}var zo=Sb,j0=Object.prototype,ox=j0.hasOwnProperty,_b=cl(function(l,e){l=Object(l);var t=-1,o=e.length,c=o>2?e[2]:void 0;for(c&&_u(e[0],e[1],c)&&(o=1);++t<o;)for(var d=e[t],f=co(d),v=-1,x=f.length;++v<x;){var w=f[v],_=l[w];(_===void 0||Ol(_,j0[w])&&!ox.call(l,w))&&(l[w]=d[w])}return l}),Ug=_b;function qc(l,e,t,o,c,d){return xi(l)&&xi(e)&&(d.set(e,l),cm(l,e,void 0,qc,d),d.delete(e)),l}var Vp=qc,sx=Fg(function(l,e,t,o){cm(l,e,t,o)}),ax=sx,cx=cl(function(l){return l.push(void 0,Vp),Da(ax,void 0,l)}),wm=cx;function Em(l,...e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(o=>{o!=="constructor"&&Object.defineProperty(l.prototype,o,Object.getOwnPropertyDescriptor(t.prototype,o))})})}const H0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,e){l.__proto__=e}||function(l,e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(l[t]=e[t])};function Kl(l,e){H0(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}class Mi{}const $0=/^\s*class\s+/.test(`${Mi}`)||/^\s*class\s*\{/.test(`${class{}}`);function yc(l,e){let t;return $0?t=class extends e{}:(t=function(){return e.apply(this,arguments)},Kl(t,e)),Object.defineProperty(t,"name",{value:l}),t}function jp(l,e){return l??e}function lx(l,e,t){const o=l!=null?l[e]:null;return t!==void 0?jp(o,t):o}function wo(l,e,t){let o=l!=null?l[e]:null;return o==null||(o=+o,Number.isNaN(o)||!Number.isFinite(o))?t:o}function ux(l,e,t){const o=l!=null?l[e]:null;return o==null?t:!!o}function Vg(l){return l==="__proto__"}function Xf(l,e,t="/"){let o;const c=Array.isArray(e)?e:e.split(t);if(c.length)for(o=l;c.length;){const d=c.shift();if(Object(o)===o&&d&&d in o)o=o[d];else return}return o}function Uh(l,e,t,o="/"){const c=Array.isArray(e)?e:e.split(o),d=c.pop();if(d&&!Vg(d)){let f=l;c.forEach(v=>{Vg(v)||(f[v]==null&&(f[v]={}),f=f[v])}),f[d]=t}return l}function Sm(l,e,t="/"){const o=Array.isArray(e)?e.slice():e.split(t),c=o.pop();if(c)if(o.length>0){const d=Xf(l,o);d&&delete d[c]}else delete l[c];return l}function jg(l,e="/",t){const o={};Object.keys(l).forEach(c=>{const d=l[c];let f=typeof d=="object"||Array.isArray(d);if(f&&t&&t(d)&&(f=!1),f){const v=jg(d,e,t);Object.keys(v).forEach(x=>{o[c+e+x]=v[x]})}else o[c]=d});for(const c in l)Object.prototype.hasOwnProperty.call(l,c);return o}var dx="[object String]";function W0(l){return typeof l=="string"||!Mn(l)&&Wn(l)&&oi(l)==dx}var hx=W0;function yl(l){return function(e){return l?.[e]}}var _m=yl,fx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ab=_m(fx),X0=Ab,Am=/[&<>"']/g,px=RegExp(Am.source);function Z0(l){return l=Wo(l),l&&px.test(l)?l.replace(Am,X0):l}var Tb=Z0,Tm={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},gx=_m(Tm),Au=gx,ql=/&(?:amp|lt|gt|quot|#39);/g,Is=RegExp(ql.source);function Ca(l){return l=Wo(l),l&&Is.test(l)?l.replace(ql,Au):l}var vx=Ca;function mx(l,e,t){return l===l&&(t!==void 0&&(l=l<=t?l:t),e!==void 0&&(l=l>=e?l:e)),l}var Hg=mx,$g=/\s/;function Y0(l){for(var e=l.length;e--&&$g.test(l.charAt(e)););return e}var Hp=Y0,yx=/^\s+/;function Mb(l){return l&&l.slice(0,Hp(l)+1).replace(yx,"")}var bx=Mb,Ob=0/0,xx=/^[-+]0x[0-9a-f]+$/i,Pb=/^0b[01]+$/i,Db=/^0o[0-7]+$/i,Cx=parseInt;function wx(l){if(typeof l=="number")return l;if(Jo(l))return Ob;if(xi(l)){var e=typeof l.valueOf=="function"?l.valueOf():l;l=xi(e)?e+"":e}if(typeof l!="string")return l===0?l:+l;l=bx(l);var t=Pb.test(l);return t||Db.test(l)?Cx(l.slice(2),t?2:8):xx.test(l)?Ob:+l}var Zf=wx,Nb=1/0,$p=17976931348623157e292;function Ex(l){if(!l)return l===0?l:0;if(l=Zf(l),l===Nb||l===-Nb){var e=l<0?-1:1;return e*$p}return l===l?l:0}var Mm=Ex;function Sx(l){var e=Mm(l),t=e%1;return e===e?t?e-t:e:0}var dd=Sx;function _x(l,e,t){return l=Wo(l),t=t==null?0:Hg(dd(t),0,l.length),e=pl(e),l.slice(t,t+e.length)==e}var Ib=_x;function oa(l,e,t){l=Wo(l),e=pl(e);var o=l.length;t=t===void 0?o:Hg(dd(t),0,o);var c=t;return t-=e.length,t>=0&&l.slice(t,c)==e}var Rb=oa;function Ax(l,e,t){var o=-1,c=l.length;e<0&&(e=-e>c?0:c+e),t=t>c?c:t,t<0&&(t+=c),c=e>t?0:t-e>>>0,e>>>=0;for(var d=Array(c);++o<c;)d[o]=l[o+e];return d}var Qr=Ax;function Tx(l,e,t){var o=l.length;return t=t===void 0?o:t,!e&&t>=o?l:Qr(l,e,t)}var oh=Tx,kb="\\ud800-\\udfff",Mx="\\u0300-\\u036f",Ox="\\ufe20-\\ufe2f",Px="\\u20d0-\\u20ff",Dx=Mx+Ox+Px,Nx="\\ufe0e\\ufe0f",Lb="\\u200d",Ix=RegExp("["+Lb+kb+Dx+Nx+"]");function Rx(l){return Ix.test(l)}var Wp=Rx,kx="[object RegExp]";function Lx(l){return Wn(l)&&oi(l)==kx}var Er=Lx,dr=hc&&hc.isRegExp,Or=dr?Gd(dr):Er,Cr=Or;function Gx(l){return l.split("")}var cr=Gx,Wi="\\ud800-\\udfff",Fx="\\u0300-\\u036f",Om="\\ufe20-\\ufe2f",Tu="\\u20d0-\\u20ff",Vh=Fx+Om+Tu,Yf="\\ufe0e\\ufe0f",Xp="["+Wi+"]",rn="["+Vh+"]",Wg="\\ud83c[\\udffb-\\udfff]",Bx="(?:"+rn+"|"+Wg+")",Gb="[^"+Wi+"]",wa="(?:\\ud83c[\\udde6-\\uddff]){2}",Eo="[\\ud800-\\udbff][\\udc00-\\udfff]",no="\\u200d",Fb=Bx+"?",Bb="["+Yf+"]?",zx="(?:"+no+"(?:"+[Gb,wa,Eo].join("|")+")"+Bb+Fb+")*",zb=Bb+Fb+zx,Pm="(?:"+[Gb+rn+"?",rn,wa,Eo,Xp].join("|")+")",Ub=RegExp(Wg+"(?="+Wg+")|"+Pm+zb,"g");function K0(l){return l.match(Ub)||[]}var Vb=K0;function Dm(l){return Wp(l)?Vb(l):cr(l)}var Xg=Dm,jb=4294967295;function bl(l,e,t){return t&&typeof t!="number"&&_u(l,e,t)&&(e=t=void 0),t=t===void 0?jb:t>>>0,t?(l=Wo(l),l&&(typeof e=="string"||e!=null&&!Cr(e))&&(e=pl(e),!e&&Wp(l))?oh(Xg(l),0,t):l.split(e,t)):[]}var Ux=bl,Hb=9007199254740991,Vx=Math.floor;function kt(l,e){var t="";if(!l||e<1||e>Hb)return t;do e%2&&(t+=l),e=Vx(e/2),e&&(l+=l);while(e);return t}var is=kt;function Va(l,e,t){return(t?_u(l,e,t):e===void 0)?e=1:e=dd(e),is(Wo(l),e)}var Zg=Va,jx=mc("length"),$b=jx,Wb="\\ud800-\\udfff",Hx="\\u0300-\\u036f",$x="\\ufe20-\\ufe2f",Fw="\\u20d0-\\u20ff",Bw=Hx+$x+Fw,zw="\\ufe0e\\ufe0f",Uw="["+Wb+"]",Xb="["+Bw+"]",Zb="\\ud83c[\\udffb-\\udfff]",Vw="(?:"+Xb+"|"+Zb+")",Wx="[^"+Wb+"]",Yb="(?:\\ud83c[\\udde6-\\uddff]){2}",Xx="[\\ud800-\\udbff][\\udc00-\\udfff]",jw="\\u200d",Zx=Vw+"?",Kb="["+zw+"]?",Yx="(?:"+jw+"(?:"+[Wx,Yb,Xx].join("|")+")"+Kb+Zx+")*",m=Kb+Zx+Yx,C="(?:"+[Wx+Xb+"?",Xb,Yb,Xx,Uw].join("|")+")",D=RegExp(Zb+"(?="+Zb+")|"+C+m,"g");function Y(l){for(var e=D.lastIndex=0;D.test(l);)++e;return e}var ve=Y;function ke(l){return Wp(l)?ve(l):$b(l)}var Ze=ke,st=Math.ceil;function Ot(l,e){e=e===void 0?" ":pl(e);var t=e.length;if(t<2)return t?is(e,l):e;var o=is(e,st(l/Ze(e)));return Wp(e)?oh(Xg(o),0,l).join(""):o.slice(0,l)}var mn=Ot,Cn=Math.ceil,Dn=Math.floor;function nr(l,e,t){l=Wo(l),e=dd(e);var o=e?Ze(l):0;if(!e||o>=e)return l;var c=(e-o)/2;return mn(Dn(c),t)+l+mn(Cn(c),t)}var Pr=nr;function ri(l,e,t){l=Wo(l),e=dd(e);var o=e?Ze(l):0;return e&&o<e?l+mn(e-o,t):l}var Ri=ri;function ii(l,e,t){l=Wo(l),e=dd(e);var o=e?Ze(l):0;return e&&o<e?mn(e-o,t)+l:l}var Ki=ii,ro=30,Jl="...",Jc=/\w*$/;function Ea(l,e){var t=ro,o=Jl;if(xi(e)){var c="separator"in e?e.separator:c;t="length"in e?dd(e.length):t,o="omission"in e?pl(e.omission):o}l=Wo(l);var d=l.length;if(Wp(l)){var f=Xg(l);d=f.length}if(t>=d)return l;var v=t-Ze(o);if(v<1)return o;var x=f?oh(f,0,v).join(""):l.slice(0,v);if(c===void 0)return x+o;if(f&&(v+=x.length-v),Cr(c)){if(l.slice(v).search(c)){var w,_=x;for(c.global||(c=RegExp(c.source,Wo(Jc.exec(c))+"g")),c.lastIndex=0;w=c.exec(_);)var A=w.index;x=x.slice(0,A===void 0?v:A)}}else if(l.indexOf(pl(c),v)!=v){var P=x.lastIndexOf(c);P>-1&&(x=x.slice(0,P))}return x+o}var wt=Ea,ja=Fg(function(l,e,t,o){Xo(e,co(e),l,o)}),hd=ja,qb="[object DOMException]",sT="[object Error]";function aT(l){if(!Wn(l))return!1;var e=oi(l);return e==sT||e==qb||typeof l.message=="string"&&typeof l.name=="string"&&!Do(l)}var Hw=aT,cT=cl(function(l,e){try{return Da(l,void 0,e)}catch(t){return Hw(t)?t:new Error(t)}}),lT=cT;function uT(l,e){return fl(e,function(t){return l[t]})}var dT=uT,$w=Object.prototype,hT=$w.hasOwnProperty;function fT(l,e,t,o){return l===void 0||Ol(l,$w[t])&&!hT.call(o,t)?e:l}var Ww=fT,pT={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function gT(l){return"\\"+pT[l]}var vT=gT,mT=/<%=([\s\S]+?)%>/g,Xw=mT,yT=/<%-([\s\S]+?)%>/g,bT=yT,xT=/<%([\s\S]+?)%>/g,CT=xT,wT={escape:bT,evaluate:CT,interpolate:Xw,variable:"",imports:{_:{escape:Tb}}},Zw=wT,ET="Invalid `variable` option passed into `_.template`",Rs=/\b__p \+= '';/g,rP=/\b(__p \+=) '' \+/g,ST=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_T=/[()=,{}\[\]\/\s]/,AT=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Jb=/($^)/,TT=/['\n\r\u2028\u2029\\]/g,Yw=Object.prototype,Kx=Yw.hasOwnProperty;function Kw(l,e,t){var o=Zw.imports._.templateSettings||Zw;t&&_u(l,e,t)&&(e=void 0),l=Wo(l),e=hd({},e,o,Ww);var c=hd({},e.imports,o.imports,Ww),d=Dc(c),f=dT(c,d),v,x,w=0,_=e.interpolate||Jb,A="__p += '",P=RegExp((e.escape||Jb).source+"|"+_.source+"|"+(_===Xw?AT:Jb).source+"|"+(e.evaluate||Jb).source+"|$","g"),V=Kx.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+`
`:"";l.replace(P,function(ge,Se,Re,_e,Ue,Qe){return Re||(Re=_e),A+=l.slice(w,Qe).replace(TT,vT),Se&&(v=!0,A+=`' +
__e(`+Se+`) +
'`),Ue&&(x=!0,A+=`';
`+Ue+`;
__p += '`),Re&&(A+=`' +
((__t = (`+Re+`)) == null ? '' : __t) +
'`),w=Qe+ge.length,ge}),A+=`';
`;var J=Kx.call(e,"variable")&&e.variable;if(!J)A=`with (obj) {
`+A+`
}
`;else if(_T.test(J))throw new Error(ET);A=(x?A.replace(Rs,""):A).replace(rP,"$1").replace(ST,"$1;"),A="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(x?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+A+`return __p
}`;var ee=lT(function(){return Function(d,V+"return "+A).apply(void 0,f)});if(ee.source=A,Hw(ee))throw ee;return ee}var Yg=Kw,MT=0;function OT(l){var e=++MT;return Wo(l)+e}var gt=OT;function qw(l){let e=null;try{e=window.eval(l)}catch{}return e}function Jw(l,e,t,o){var c=-1,d=l==null?0:l.length;for(o&&d&&(t=l[++c]);++c<d;)t=e(t,l[c],c,l);return t}var Qw=Jw,eE={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Qb=_m(eE),tE=Qb,nE=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rE="\\u0300-\\u036f",PT="\\ufe20-\\ufe2f",iE="\\u20d0-\\u20ff",oE=rE+PT+iE,DT="["+oE+"]",NT=RegExp(DT,"g");function IT(l){return l=Wo(l),l&&l.replace(nE,tE).replace(NT,"")}var sE=IT,aE=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function cE(l){return l.match(aE)||[]}var lE=cE,uE=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Nm(l){return uE.test(l)}var dE=Nm,qx="\\ud800-\\udfff",hE="\\u0300-\\u036f",fE="\\ufe20-\\ufe2f",pE="\\u20d0-\\u20ff",gE=hE+fE+pE,vE="\\u2700-\\u27bf",mE="a-z\\xdf-\\xf6\\xf8-\\xff",RT="\\xac\\xb1\\xd7\\xf7",Jx="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kT="\\u2000-\\u206f",Qx=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yE="A-Z\\xc0-\\xd6\\xd8-\\xde",LT="\\ufe0e\\ufe0f",bE=RT+Jx+kT+Qx,xE="['\u2019]",Kf="["+bE+"]",GT="["+gE+"]",FT="\\d+",iP="["+vE+"]",BT="["+mE+"]",CE="[^"+qx+bE+FT+vE+mE+yE+"]",zT="\\ud83c[\\udffb-\\udfff]",oP="(?:"+GT+"|"+zT+")",wE="[^"+qx+"]",eC="(?:\\ud83c[\\udde6-\\uddff]){2}",tC="[\\ud800-\\udbff][\\udc00-\\udfff]",Kg="["+yE+"]",EE="\\u200d",nC="(?:"+BT+"|"+CE+")",SE="(?:"+Kg+"|"+CE+")",Zp="(?:"+xE+"(?:d|ll|m|re|s|t|ve))?",rC="(?:"+xE+"(?:D|LL|M|RE|S|T|VE))?",iC=oP+"?",oC="["+LT+"]?",_E="(?:"+EE+"(?:"+[wE,eC,tC].join("|")+")"+oC+iC+")*",AE="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",TE="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ME=oC+iC+_E,UT="(?:"+[iP,eC,tC].join("|")+")"+ME,OE=RegExp([Kg+"?"+BT+"+"+Zp+"(?="+[Kf,Kg,"$"].join("|")+")",SE+"+"+rC+"(?="+[Kf,Kg+nC,"$"].join("|")+")",Kg+"?"+nC+"+"+Zp,Kg+"+"+rC,TE,AE,FT,UT].join("|"),"g");function VT(l){return l.match(OE)||[]}var Ql=VT;function jT(l,e,t){return l=Wo(l),e=t?void 0:e,e===void 0?dE(l)?Ql(l):lE(l):l.match(e)||[]}var sC=jT,sP="['\u2019]",aP=RegExp(sP,"g");function PE(l){return function(e){return Qw(sC(sE(e).replace(aP,"")),l,"")}}var aC=PE;function e2(l){return function(e){e=Wo(e);var t=Wp(e)?Xg(e):void 0,o=t?t[0]:e.charAt(0),c=t?oh(t,1).join(""):e.slice(1);return o[l]()+c}}var HT=e2,cP=HT("toUpperCase"),fd=cP,Im=aC(function(l,e,t){return l+(t?" ":"")+fd(e)}),$T=Im;function lP(l){return fd(Wo(l).toLowerCase())}var WT=lP,XT=aC(function(l,e,t){return e=e.toLowerCase(),l+(t?WT(e):e)}),t2=XT,uP=aC(function(l,e,t){return l+(t?" ":"")+e.toUpperCase()}),dP=uP,hP=aC(function(l,e,t){return l+(t?" ":"")+e.toLowerCase()}),DE=hP,fP=HT("toLowerCase"),ZT=fP;const qg=l=>{const e=Object.create(null);return t=>e[t]||(e[t]=l(t))},NE=qg(l=>l.replace(/\B([A-Z])/g,"-$1").toLowerCase()),Yp=qg(l=>$T(t2(l)).replace(/ /g,"")),q0=qg(l=>dP(l).replace(/ /g,"_")),Rm=qg(l=>DE(l).replace(/ /g,".")),YT=qg(l=>DE(l).replace(/ /g,"/")),pP=qg(l=>fd(DE(l))),IE=qg(l=>$T(t2(l)));function cC(l){let e=2166136261,t=!1,o=l;for(let c=0,d=o.length;c<d;c+=1){let f=o.charCodeAt(c);f>127&&!t&&(o=unescape(encodeURIComponent(o)),f=o.charCodeAt(c),t=!0),e^=f,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}return e>>>0}function n2(){let l="";const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let t=0,o=e.length;t<o;t+=1){const c=e[t],d=Math.random()*16|0;l+=(c==="x"?d:c==="y"?d&3|8:c).toString(16)}return l}function lC(l,e={}){const t=G().parseHTML(l,null,!1);return t.forEach(o=>{const c=o;if(c){const d=c.attributes;if(d)for(let f=0,v=d.length;f<v;f+=1){const x=d.item(f);if(x){const w=x.value.toLowerCase(),_=x.name.toLowerCase();(_.startsWith("on")||w.startsWith("javascript:")||w.startsWith("data:")||w.startsWith("vbscript:"))&&c.removeAttribute(_)}}}}),e.raw?t:G()("<div/>").append(t).html()}function KT(l,e,t){const o=Math.min(2,Math.floor(l.length*.34));let c=Math.floor(l.length*.4)+1,d,f=!1;const v=l.toLowerCase();for(const x of e){const w=t(x);if(w!==void 0&&Math.abs(w.length-v.length)<=o){const _=w.toLowerCase();if(_===v){if(w===l)continue;return x}if(f||w.length<3)continue;const A=gP(v,_,c-1);if(A===void 0)continue;A<3?(f=!0,d=x):(c=A,d=x)}}return d}function gP(l,e,t){let o=new Array(e.length+1),c=new Array(e.length+1);const d=t+1;for(let v=0;v<=e.length;v+=1)o[v]=v;for(let v=1;v<=l.length;v+=1){const x=l.charCodeAt(v-1),w=v>t?v-t:1,_=e.length>t+v?t+v:e.length;c[0]=v;let A=v;for(let V=1;V<w;V+=1)c[V]=d;for(let V=w;V<=_;V+=1){const J=x===e.charCodeAt(V-1)?o[V-1]:Math.min(o[V]+1,c[V-1]+1,o[V-1]+2);c[V]=J,A=Math.min(A,J)}for(let V=_+1;V<=e.length;V+=1)c[V]=d;if(A>t)return;const P=o;o=c,c=P}const f=o[e.length];return f>t?void 0:f}var qT="[object Number]";function JT(l){return typeof l=="number"||Wn(l)&&oi(l)==qT}var RE=JT;function QT(l){return RE(l)&&l!=+l}var VD=QT,vP=cn.isFinite;function mP(l){return typeof l=="number"&&vP(l)}var jD=mP;function yP(l){return typeof l=="number"&&l==dd(l)}var bP=yP,eM=9007199254740991;function xP(l){return bP(l)&&l>=-eM&&l<=eM}var HD=xP;function CP(l,e,t){return t===void 0&&(t=e,e=void 0),t!==void 0&&(t=Zf(t),t=t===t?t:0),e!==void 0&&(e=Zf(e),e=e===e?e:0),Hg(Zf(l),e,t)}var eu=CP,kE=Math.max,LE=Math.min;function GE(l,e,t){return l>=LE(e,t)&&l<kE(e,t)}var FE=GE;function BE(l,e,t){return e=Mm(e),t===void 0?(t=e,e=0):t=Mm(t),l=Zf(l),FE(l,e,t)}var tM=BE,uC=9007199254740991;function zE(l){return l?Hg(dd(l),-uC,uC):l===0?l:0}var nM=zE,UE=/^\s+/,VE=cn.parseInt;function jE(l,e,t){return t||e==null?e=0:e&&(e=+e),VE(Wo(l).replace(UE,""),e||0)}var jh=jE;const rM=l=>l&&l===l.window,HE=l=>!Array.isArray(l)&&l-parseFloat(l)+1>=0;function iM(l,e){return(l%e+e)%e}function oM(l,e){if(e==null)e=l??1,l=0;else if(e<l){const t=l;l=e,e=t}return Math.floor(Math.random()*(e-l+1)+l)}function pd(l){return typeof l=="string"&&l.slice(-1)==="%"}function sh(l,e){if(l==null)return 0;let t;if(typeof l=="string"){if(t=parseFloat(l),pd(l)&&(t/=100,Number.isFinite(t)))return t*e}else t=l;return Number.isFinite(t)?t>0&&t<1?t*e:t:0}function $E(l,e){function t(f){const v=new RegExp(`(?:\\d+(?:\\.\\d+)*)(${f})$`).exec(l);return v?v[1]:null}const o=parseFloat(l);if(Number.isNaN(o))return null;let c;if(e==null)c="[A-Za-z]*";else if(Array.isArray(e)){if(e.length===0)return null;c=e.join("|")}else typeof e=="string"&&(c=e);const d=t(c);return d===null?null:{unit:d,value:o}}function xl(l){if(typeof l=="object"){let t=0,o=0,c=0,d=0;return l.vertical!=null&&Number.isFinite(l.vertical)&&(o=d=l.vertical),l.horizontal!=null&&Number.isFinite(l.horizontal)&&(c=t=l.horizontal),l.left!=null&&Number.isFinite(l.left)&&(t=l.left),l.top!=null&&Number.isFinite(l.top)&&(o=l.top),l.right!=null&&Number.isFinite(l.right)&&(c=l.right),l.bottom!=null&&Number.isFinite(l.bottom)&&(d=l.bottom),{top:o,right:c,bottom:d,left:t}}let e=0;return l!=null&&Number.isFinite(l)&&(e=l),{top:e,right:e,bottom:e,left:e}}var WE="Expected a function";function XE(l,e){var t;if(typeof e!="function")throw new TypeError(WE);return l=dd(l),function(){return--l>0&&(t=e.apply(this,arguments)),l<=1&&(e=void 0),t}}var ZE=XE;function r2(l){return ZE(2,l)}var sM=r2,YE=function(){return cn.Date.now()},Kp=YE,KE="Expected a function",qE=Math.max,JE=Math.min;function QE(l,e,t){var o,c,d,f,v,x,w=0,_=!1,A=!1,P=!0;if(typeof l!="function")throw new TypeError(KE);e=Zf(e)||0,xi(t)&&(_=!!t.leading,A="maxWait"in t,d=A?qE(Zf(t.maxWait)||0,e):d,P="trailing"in t?!!t.trailing:P);function V(bt){var Pt=o,Kt=c;return o=c=void 0,w=bt,f=l.apply(Kt,Pt),f}function J(bt){return w=bt,v=setTimeout(Se,e),_?V(bt):f}function ee(bt){var Pt=bt-x,Kt=bt-w,kn=e-Pt;return A?JE(kn,d-Kt):kn}function ge(bt){var Pt=bt-x,Kt=bt-w;return x===void 0||Pt>=e||Pt<0||A&&Kt>=d}function Se(){var bt=Kp();if(ge(bt))return Re(bt);v=setTimeout(Se,ee(bt))}function Re(bt){return v=void 0,P&&o?V(bt):(o=c=void 0,f)}function _e(){v!==void 0&&clearTimeout(v),w=0,o=x=c=v=void 0}function Ue(){return v===void 0?f:Re(Kp())}function Qe(){var bt=Kp(),Pt=ge(bt);if(o=arguments,c=this,x=bt,Pt){if(v===void 0)return J(x);if(A)return clearTimeout(v),v=setTimeout(Se,e),V(x)}return v===void 0&&(v=setTimeout(Se,e)),f}return Qe.cancel=_e,Qe.flush=Ue,Qe}var i2=QE,eS="Expected a function";function J0(l,e,t){if(typeof l!="function")throw new TypeError(eS);return setTimeout(function(){l.apply(void 0,t)},e)}var tS=J0,nS=cl(function(l,e){return tS(l,1,e)}),dC=nS;function km(l,e,t){if(t)switch(t.length){case 0:return l.call(e);case 1:return l.call(e,t[0]);case 2:return l.call(e,t[0],t[1]);case 3:return l.call(e,t[0],t[1],t[2]);case 4:return l.call(e,t[0],t[1],t[2],t[3]);case 5:return l.call(e,t[0],t[1],t[2],t[3],t[4]);case 6:return l.call(e,t[0],t[1],t[2],t[3],t[4],t[5]);default:return l.apply(e,t)}return l.call(e)}function er(l,e,...t){return km(l,e,t)}function rS(l,e){for(let t=0,o=l.length;t<o;t+=1)if(l[t]===e)return l.push(l.splice(t,1)[0])}function hC(l,e,t){const o=[],c={};return(...f)=>{let v=!1;const x=f.join("\u2400");return x in c?(v=!0,rS(o,x)):(o.length>=1e3&&delete c[o.shift()],o.push(x),c[x]=km(l,e||null,f)),t?t(c[x],v):c[x]}}function iS(l){return typeof l=="object"&&l.then&&typeof l.then=="function"}function Lm(l){return l!=null&&(l instanceof Promise||iS(l))}function Q0(...l){const e=[];if(l.forEach(o=>{Array.isArray(o)?e.push(...o):e.push(o)}),e.some(o=>Lm(o))){const o=e.map(c=>Lm(c)?c:Promise.resolve(c!==!1));return Promise.all(o).then(c=>c.reduce((d,f)=>f!==!1&&d,!0))}return e.every(o=>o!==!1)}function o2(...l){const e=Q0(l);return typeof e=="boolean"?Promise.resolve(e):e}const s2=/[\t\r\n\f]/g,a2=/\S+/g,Jg=l=>` ${l} `;function qp(l){return l&&l.getAttribute&&l.getAttribute("class")||""}function qf(l,e){if(l==null||e==null)return!1;const t=Jg(qp(l)),o=Jg(e);return l.nodeType===1?t.replace(s2," ").includes(o):!1}function io(l,e){if(!(l==null||e==null)){if(typeof e=="function")return io(l,e(qp(l)));if(typeof e=="string"&&l.nodeType===1){const t=e.match(a2)||[],o=Jg(qp(l)).replace(s2," ");let c=t.reduce((d,f)=>d.indexOf(Jg(f))<0?`${d}${f} `:d,o);c=c.trim(),o!==c&&l.setAttribute("class",c)}}}function tu(l,e){if(l!=null){if(typeof e=="function")return tu(l,e(qp(l)));if((!e||typeof e=="string")&&l.nodeType===1){const t=(e||"").match(a2)||[],o=Jg(qp(l)).replace(s2," ");let c=t.reduce((d,f)=>{const v=Jg(f);return d.indexOf(v)>-1?d.replace(v," "):d},o);c=e?c.trim():"",o!==c&&l.setAttribute("class",c)}}}function c2(l,e,t){if(!(l==null||e==null)){if(t!=null&&typeof e=="string"){t?io(l,e):tu(l,e);return}if(typeof e=="function")return c2(l,e(qp(l),t),t);typeof e=="string"&&(e.match(a2)||[]).forEach(c=>{qf(l,c)?tu(l,c):io(l,c)})}}let fC=0;function oS(){return fC+=1,`v${fC}`}function Gm(l){return(l.id==null||l.id==="")&&(l.id=oS()),l.id}function Jp(l){return l==null?!1:typeof l.getScreenCTM=="function"&&l instanceof SVGElement}const Sa={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},ev="1.1";function l2(l,e=document){return e.createElement(l)}function Fm(l,e=Sa.xhtml,t=document){return t.createElementNS(e,l)}function Qc(l,e=document){return Fm(l,Sa.svg,e)}function tv(l){if(l){const t=`<svg xmlns="${Sa.svg}" xmlns:xlink="${Sa.xlink}" version="${ev}">${l}</svg>`,{documentElement:o}=u2(t,{async:!1});return o}const e=document.createElementNS(Sa.svg,"svg");return e.setAttributeNS(Sa.xmlns,"xmlns:xlink",Sa.xlink),e.setAttribute("version",ev),e}function u2(l,e={}){let t;try{const o=new DOMParser;if(e.async!=null){const c=o;c.async=e.async}t=o.parseFromString(l,e.mimeType||"text/xml")}catch{t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${l}`);return t}function pC(l,e=!0){const t=l.nodeName;return e?t.toLowerCase():t.toUpperCase()}function Bm(l){let e=0,t=l.previousSibling;for(;t;)t.nodeType===1&&(e+=1),t=t.previousSibling;return e}function Qg(l,e){return l.querySelectorAll(e)}function zm(l,e){return l.querySelector(e)}function d2(l,e,t){const o=l.ownerSVGElement;let c=l.parentNode;for(;c&&c!==t&&c!==o;){if(qf(c,e))return c;c=c.parentNode}return null}function Um(l,e){const t=e&&e.parentNode;return l===t||!!(t&&t.nodeType===1&&l.compareDocumentPosition(t)&16)}function gd(l){l.parentNode&&l.parentNode.removeChild(l)}function Vm(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function nv(l,e){(Array.isArray(e)?e:[e]).forEach(o=>{o!=null&&l.appendChild(o)})}function sS(l,e){const t=l.firstChild;return t?h2(t,e):nv(l,e)}function h2(l,e){const t=l.parentNode;t&&(Array.isArray(e)?e:[e]).forEach(c=>{c!=null&&t.insertBefore(c,l)})}function aS(l,e){e?.appendChild(l)}function jm(l){try{return l instanceof HTMLElement}catch{return typeof l=="object"&&l.nodeType===1&&typeof l.style=="object"&&typeof l.ownerDocument=="object"}}const cS=["viewBox","attributeName","attributeType","repeatCount"];function gC(l,e){return l.getAttribute(e)}function f2(l,e){const t=p2(e);t.ns?l.hasAttributeNS(t.ns,t.local)&&l.removeAttributeNS(t.ns,t.local):l.hasAttribute(e)&&l.removeAttribute(e)}function Hm(l,e,t){if(t==null)return f2(l,e);const o=p2(e);o.ns&&typeof t=="string"?l.setAttributeNS(o.ns,e,t):e==="id"?l.id=`${t}`:l.setAttribute(e,`${t}`)}function e0(l,e){Object.keys(e).forEach(t=>{Hm(l,t,e[t])})}function oo(l,e,t){if(e==null){const o=l.attributes,c={};for(let d=0;d<o.length;d+=1)c[o[d].name]=o[d].value;return c}if(typeof e=="string"&&t===void 0)return l.getAttribute(e);typeof e=="object"?e0(l,e):Hm(l,e,t)}function p2(l){if(l.indexOf(":")!==-1){const e=l.split(":");return{ns:Sa[e[0]],local:e[1]}}return{ns:null,local:l}}function t0(l){const e={};return Object.keys(l).forEach(t=>{const o=cS.includes(t)?t:NE(t);e[o]=l[t]}),e}function rv(l){const e={};return l.split(";").forEach(o=>{const c=o.trim();if(c){const d=c.split("=");d.length&&(e[d[0].trim()]=d[1]?d[1].trim():"")}}),e}function g2(l,e){return Object.keys(e).forEach(t=>{if(t==="class")l[t]=l[t]?`${l[t]} ${e[t]}`:e[t];else if(t==="style"){const o=typeof l[t]=="object",c=typeof e[t]=="object";let d,f;o&&c?(d=l[t],f=e[t]):o?(d=l[t],f=rv(e[t])):c?(d=rv(l[t]),f=e[t]):(d=rv(l[t]),f=rv(e[t])),l[t]=g2(d,f)}else l[t]=e[t]}),l}function tc(l,e,t={}){const o=t.offset||0,c=[],d=[];let f,v,x=null;for(let w=0;w<l.length;w+=1){f=d[w]=l[w];for(let _=0,A=e.length;_<A;_+=1){const P=e[_],V=P.start+o,J=P.end+o;w>=V&&w<J&&(typeof f=="string"?f=d[w]={t:l[w],attrs:P.attrs}:f.attrs=g2(g2({},f.attrs),P.attrs),t.includeAnnotationIndices&&(f.annotations==null&&(f.annotations=[]),f.annotations.push(_)))}v=d[w-1],v?xi(f)&&xi(v)?(x=x,JSON.stringify(f.attrs)===JSON.stringify(v.attrs)?x.t+=f.t:(c.push(x),x=f)):xi(f)||xi(v)?(x=x,c.push(x),x=f):x=(x||"")+f:x=f}return x!=null&&c.push(x),c}function $D(l,e){return l?l.filter(t=>t.start<e&&e<=t.end):[]}function iv(l,e,t){return l?l.filter(o=>e>=o.start&&e<o.end||t>o.start&&t<=o.end||o.start>=e&&o.end<t):[]}function WD(l,e,t){return l&&l.forEach(o=>{o.start<e&&o.end>=e?o.end+=t:o.start>=e&&(o.start+=t,o.end+=t)}),l}function wP(l){return l.replace(/ /g,"\xA0")}var Mu;(function(l){l.emptyObject=Object.freeze({}),l.emptyArray=Object.freeze([]);function e(_){return _==null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"}l.isPrimitive=e;function t(_){return Array.isArray(_)}l.isArray=t;function o(_){return!e(_)&&!t(_)}l.isObject=o;function c(_,A){if(_===A)return!0;if(e(_)||e(A))return!1;const P=t(_),V=t(A);return P!==V?!1:P&&V?f(_,A):v(_,A)}l.deepEqual=c;function d(_){return e(_)?_:t(_)?x(_):w(_)}l.deepCopy=d;function f(_,A){if(_===A)return!0;if(_.length!==A.length)return!1;for(let P=0,V=_.length;P<V;P+=1)if(!c(_[P],A[P]))return!1;return!0}function v(_,A){if(_===A)return!0;for(const P in _)if(!(P in A))return!1;for(const P in A)if(!(P in _))return!1;for(const P in _)if(!c(_[P],A[P]))return!1;return!0}function x(_){const A=new Array(_.length);for(let P=0,V=_.length;P<V;P+=1)A[P]=d(_[P]);return A}function w(_){const A={};return Object.keys(_).forEach(P=>{A[P]=d(_[P])}),A}})(Mu||(Mu={}));var lS;(function(l){function e(w){const _="data:";return w.substr(0,_.length)===_}l.isDataUrl=e;function t(w,_){if(!w||e(w)){setTimeout(()=>_(null,w));return}const A=()=>{_(new Error(`Failed to load image: ${w}`))},P=window.FileReader?J=>{if(J.status===200){const ee=new FileReader;ee.onload=ge=>{const Se=ge.target.result;_(null,Se)},ee.onerror=A,ee.readAsDataURL(J.response)}else A()}:J=>{const ee=ge=>{const Re=[];for(let _e=0;_e<ge.length;_e+=32768)Re.push(String.fromCharCode.apply(null,ge.subarray(_e,_e+32768)));return Re.join("")};if(J.status===200){let ge=w.split(".").pop()||"png";ge==="svg"&&(ge="svg+xml");const Se=`data:image/${ge};base64,`,Re=new Uint8Array(J.response),_e=Se+btoa(ee(Re));_(null,_e)}else A()},V=new XMLHttpRequest;V.responseType=window.FileReader?"blob":"arraybuffer",V.open("GET",w,!0),V.addEventListener("error",A),V.addEventListener("load",()=>P(V)),V.send()}l.imageToDataUri=t;function o(w){let _=w.replace(/\s/g,"");_=decodeURIComponent(_);const A=_.indexOf(","),P=_.slice(0,A),V=P.split(":")[1].split(";")[0],J=_.slice(A+1);let ee;P.indexOf("base64")>=0?ee=atob(J):ee=unescape(encodeURIComponent(J));const ge=new Uint8Array(ee.length);for(let Se=0;Se<ee.length;Se+=1)ge[Se]=ee.charCodeAt(Se);return new Blob([ge],{type:V})}l.dataUriToBlob=o;function c(w,_){const A=window.navigator.msSaveBlob;if(A)A(w,_);else{const P=window.URL.createObjectURL(w),V=document.createElement("a");V.href=P,V.download=_,document.body.appendChild(V),V.click(),document.body.removeChild(V),window.URL.revokeObjectURL(P)}}l.downloadBlob=c;function d(w,_){const A=o(w);c(A,_)}l.downloadDataUri=d;function f(w){const _=w.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return _&&_[2]?_[2].replace(/\s+/," ").split(" "):null}function v(w){const _=parseFloat(w);return Number.isNaN(_)?null:_}function x(w,_={}){let A=null;const P=_e=>(A==null&&(A=f(w)),A!=null?v(A[_e]):null),V=_e=>{const Ue=w.match(_e);return Ue&&Ue[2]?v(Ue[2]):null};let J=_.width;if(J==null&&(J=V(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),J==null&&(J=P(2)),J==null)throw new Error("Can not parse width from svg string");let ee=_.height;if(ee==null&&(ee=V(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),ee==null&&(ee=P(3)),ee==null)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(w).replace(/'/g,"%27").replace(/"/g,"%22")}`}l.svgToDataUrl=x})(lS||(lS={}));let ov;const EP={px(l){return l},mm(l){return ov*l},cm(l){return ov*l*10},in(l){return ov*l*25.4},pt(l){return ov*(25.4*l/72)},pc(l){return ov*(25.4*l/6)}};var uS;(function(l){function e(o,c,d){const f=G()("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:o+(d||""),height:c+(d||"")}).appendTo(document.body),v={width:f.width()||0,height:f.height()||0};return f.remove(),v}l.measure=e;function t(o,c){ov==null&&(ov=e("1","1","mm").width);const d=c?EP[c]:null;return d?d(o):o}l.toPx=t})(uS||(uS={}));const v2=function(){let l;const e=window;if(e!=null&&(l=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame,l!=null&&(l=l.bind(e))),l==null){let t=0;l=o=>{const c=new Date().getTime(),d=Math.max(0,16-(c-t)),f=setTimeout(()=>{o(c+d)},d);return t=c+d,f}}return l}(),m2=function(){let l;const e=window;return e!=null&&(l=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.msCancelAnimationFrame||e.msCancelRequestAnimationFrame||e.oCancelAnimationFrame||e.oCancelRequestAnimationFrame||e.mozCancelAnimationFrame||e.mozCancelRequestAnimationFrame,l&&(l=l.bind(e))),l==null&&(l=clearTimeout),l}(),SP=/-(.)/g;function y2(l){return l.replace(SP,(e,t)=>t.toUpperCase())}const dS={},vC=["Webkit","ms","Moz","O"],aM=document?document.createElement("div").style:{};function cM(l){for(let e=0;e<vC.length;e+=1){const t=vC[e]+l;if(t in aM)return t}return null}function b2(l){const e=y2(l);if(dS[e]==null){const t=e.charAt(0).toUpperCase()+e.slice(1);dS[e]=e in aM?e:cM(t)}return dS[e]}function _P(l,e,t){const o=b2(e);o!=null&&(l[o]=t),l[e]=t}function mC(l,e){const t=l.ownerDocument&&l.ownerDocument.defaultView&&l.ownerDocument.defaultView.opener?l.ownerDocument.defaultView.getComputedStyle(l,null):window.getComputedStyle(l,null);return t&&e?t.getPropertyValue(e)||t[e]:t}function yC(l){const e=mC(l);return e!=null&&(e.overflow==="scroll"||e.overflow==="auto")}const $m=function(){const l=document;return l.selection?function(){l.selection.empty()}:window.getSelection?function(){const e=window.getSelection();e&&(e.empty?e.empty():e.removeAllRanges&&e.removeAllRanges())}:function(){}}();var ji;(function(l){function e(o){return 180*o/Math.PI%360}l.toDeg=e,l.toRad=function(o,c=!1){return(c?o:o%360)*Math.PI/180};function t(o){return o%360+(o<0?360:0)}l.normalize=t})(ji||(ji={}));function sv(l,e=0){return Number.isInteger(l)?l:+l.toFixed(e)}function hS(l,e){let t,o;if(e==null?(o=l??1,t=0):(o=e,t=l??0),o<t){const c=t;t=o,o=c}return Math.floor(Math.random()*(o-t+1)+t)}function av(l,e,t){return Number.isNaN(l)?NaN:Number.isNaN(e)||Number.isNaN(t)?0:e<t?l<e?e:l>t?t:l:l<t?t:l>e?e:l}function bC(l,e){return e*Math.round(l/e)}function lM(l,e){return e!=null&&l!=null&&e.x>=l.x&&e.x<=l.x+l.width&&e.y>=l.y&&e.y<=l.y+l.height}function uM(l,e){const t=l.x-e.x,o=l.y-e.y;return t*t+o*o}class n0{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class Ve extends n0{constructor(e,t){super(),this.x=e??0,this.y=t??0}get[Symbol.toStringTag](){return Ve.toStringTag}round(e=0){return this.x=sv(this.x,e),this.y=sv(this.y,e),this}add(e,t){const o=Ve.create(e,t);return this.x+=o.x,this.y+=o.y,this}update(e,t){const o=Ve.create(e,t);return this.x=o.x,this.y=o.y,this}translate(e,t){const o=Ve.create(e,t);return this.x+=o.x,this.y+=o.y,this}rotate(e,t){const o=Ve.rotate(this,e,t);return this.x=o.x,this.y=o.y,this}scale(e,t,o=new Ve){const c=Ve.create(o);return this.x=c.x+e*(this.x-c.x),this.y=c.y+t*(this.y-c.y),this}closest(e){if(e.length===1)return Ve.create(e[0]);let t=null,o=1/0;return e.forEach(c=>{const d=this.squaredDistance(c);d<o&&(t=c,o=d)}),t?Ve.create(t):null}distance(e){return Math.sqrt(this.squaredDistance(e))}squaredDistance(e){const t=Ve.create(e),o=this.x-t.x,c=this.y-t.y;return o*o+c*c}manhattanDistance(e){const t=Ve.create(e);return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(e=new Ve){const t=Ve.create(e),o=-(t.y-this.y),c=t.x-this.x;let d=Math.atan2(o,c);return d<0&&(d=2*Math.PI+d),180*d/Math.PI}angleBetween(e,t){if(this.equals(e)||this.equals(t))return NaN;let o=this.theta(t)-this.theta(e);return o<0&&(o+=360),o}vectorAngle(e){return new Ve(0,0).angleBetween(this,e)}toPolar(e){return this.update(Ve.toPolar(this,e)),this}changeInAngle(e,t,o=new Ve){return this.clone().translate(-e,-t).theta(o)-this.theta(o)}adhereToRect(e){return lM(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}bearing(e){const t=Ve.create(e),o=ji.toRad(this.y),c=ji.toRad(t.y),d=this.x,f=t.x,v=ji.toRad(f-d),x=Math.sin(v)*Math.cos(c),w=Math.cos(o)*Math.sin(c)-Math.sin(o)*Math.cos(c)*Math.cos(v),_=ji.toDeg(Math.atan2(x,w)),A=["NE","E","SE","S","SW","W","NW","N"];let P=_-22.5;return P<0&&(P+=360),P=parseInt(P/45,10),A[P]}cross(e,t){if(e!=null&&t!=null){const o=Ve.create(e),c=Ve.create(t);return(c.x-this.x)*(o.y-this.y)-(c.y-this.y)*(o.x-this.x)}return NaN}dot(e){const t=Ve.create(e);return this.x*t.x+this.y*t.y}diff(e,t){if(typeof e=="number")return new Ve(this.x-e,this.y-t);const o=Ve.create(e);return new Ve(this.x-o.x,this.y-o.y)}lerp(e,t){const o=Ve.create(e);return new Ve((1-t)*this.x+t*o.x,(1-t)*this.y+t*o.y)}normalize(e=1){const t=e/this.magnitude();return this.scale(t,t)}move(e,t){const o=Ve.create(e),c=ji.toRad(o.theta(this));return this.translate(Math.cos(c)*t,-Math.sin(c)*t)}reflection(e){return Ve.create(e).move(this,this.distance(e))}snapToGrid(e,t){return this.x=bC(this.x,e),this.y=bC(this.y,t??e),this}equals(e){const t=Ve.create(e);return t!=null&&t.x===this.x&&t.y===this.y}clone(){return Ve.clone(this)}toJSON(){return Ve.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.x=="number"&&typeof c.y=="number"&&typeof c.toPolar=="function"}l.isPoint=e})(Ve||(Ve={})),function(l){function e(o){return o!=null&&typeof o=="object"&&typeof o.x=="number"&&typeof o.y=="number"}l.isPointLike=e;function t(o){return o!=null&&Array.isArray(o)&&o.length===2&&typeof o[0]=="number"&&typeof o[1]=="number"}l.isPointData=t}(Ve||(Ve={})),function(l){function e(A,P){return A==null||typeof A=="number"?new l(A,P):t(A)}l.create=e;function t(A){return l.isPoint(A)?new l(A.x,A.y):Array.isArray(A)?new l(A[0],A[1]):new l(A.x,A.y)}l.clone=t;function o(A){return l.isPoint(A)?{x:A.x,y:A.y}:Array.isArray(A)?{x:A[0],y:A[1]}:{x:A.x,y:A.y}}l.toJSON=o;function c(A,P,V=new l){let J=Math.abs(A*Math.cos(P)),ee=Math.abs(A*Math.sin(P));const ge=t(V),Se=ji.normalize(ji.toDeg(P));return Se<90?ee=-ee:Se<180?(J=-J,ee=-ee):Se<270&&(J=-J),new l(ge.x+J,ge.y+ee)}l.fromPolar=c;function d(A,P=new l){const V=t(A),J=t(P),ee=V.x-J.x,ge=V.y-J.y;return new l(Math.sqrt(ee*ee+ge*ge),ji.toRad(J.theta(V)))}l.toPolar=d;function f(A,P){return A===P?!0:A!=null&&P!=null?A.x===P.x&&A.y===P.y:!1}l.equals=f;function v(A,P){if(A==null&&P!=null||A!=null&&P==null||A!=null&&P!=null&&A.length!==P.length)return!1;if(A!=null&&P!=null){for(let V=0,J=A.length;V<J;V+=1)if(!f(A[V],P[V]))return!1}return!0}l.equalPoints=v;function x(A,P,V,J){return new l(hS(A,P),hS(V,J))}l.random=x;function w(A,P,V){const J=ji.toRad(ji.normalize(-P)),ee=Math.sin(J),ge=Math.cos(J);return _(A,ge,ee,V)}l.rotate=w;function _(A,P,V,J=new l){const ee=t(A),ge=t(J),Se=ee.x-ge.x,Re=ee.y-ge.y,_e=Se*P-Re*V,Ue=Re*P+Se*V;return new l(_e+ge.x,Ue+ge.y)}l.rotateEx=_}(Ve||(Ve={}));class Ln extends n0{constructor(e,t,o,c){super(),this.x=e??0,this.y=t??0,this.width=o??0,this.height=c??0}get[Symbol.toStringTag](){return Ln.toStringTag}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new Ve(this.x,this.y)}get topLeft(){return new Ve(this.x,this.y)}get topCenter(){return new Ve(this.x+this.width/2,this.y)}get topRight(){return new Ve(this.x+this.width,this.y)}get center(){return new Ve(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new Ve(this.x,this.y+this.height)}get bottomCenter(){return new Ve(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new Ve(this.x+this.width,this.y+this.height)}get corner(){return new Ve(this.x+this.width,this.y+this.height)}get rightMiddle(){return new Ve(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new Ve(this.x,this.y+this.height/2)}get topLine(){return new rr(this.topLeft,this.topRight)}get rightLine(){return new rr(this.topRight,this.bottomRight)}get bottomLine(){return new rr(this.bottomLeft,this.bottomRight)}get leftLine(){return new rr(this.topLeft,this.bottomLeft)}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(e){if(!e)return this.clone();const t=ji.toRad(e),o=Math.abs(Math.sin(t)),c=Math.abs(Math.cos(t)),d=this.width*c+this.height*o,f=this.width*o+this.height*c;return new Ln(this.x+(this.width-d)/2,this.y+(this.height-f)/2,d,f)}round(e=0){return this.x=sv(this.x,e),this.y=sv(this.y,e),this.width=sv(this.width,e),this.height=sv(this.height,e),this}add(e,t,o,c){const d=Ln.create(e,t,o,c),f=Math.min(this.x,d.x),v=Math.min(this.y,d.y),x=Math.max(this.x+this.width,d.x+d.width),w=Math.max(this.y+this.height,d.y+d.height);return this.x=f,this.y=v,this.width=x-f,this.height=w-v,this}update(e,t,o,c){const d=Ln.create(e,t,o,c);return this.x=d.x,this.y=d.y,this.width=d.width,this.height=d.height,this}inflate(e,t){const o=e,c=t??e;return this.x-=o,this.y-=c,this.width+=2*o,this.height+=2*c,this}snapToGrid(e,t){const o=this.origin.snapToGrid(e,t),c=this.corner.snapToGrid(e,t);return this.x=o.x,this.y=o.y,this.width=c.x-o.x,this.height=c.y-o.y,this}translate(e,t){const o=Ve.create(e,t);return this.x+=o.x,this.y+=o.y,this}scale(e,t,o=new Ve){const c=this.origin.scale(e,t,o);return this.x=c.x,this.y=c.y,this.width*=e,this.height*=t,this}rotate(e,t=this.getCenter()){if(e!==0){const o=ji.toRad(e),c=Math.cos(o),d=Math.sin(o);let f=this.getOrigin(),v=this.getTopRight(),x=this.getBottomRight(),w=this.getBottomLeft();f=Ve.rotateEx(f,c,d,t),v=Ve.rotateEx(v,c,d,t),x=Ve.rotateEx(x,c,d,t),w=Ve.rotateEx(w,c,d,t);const _=new Ln(f.x,f.y,0,0);_.add(v.x,v.y,0,0),_.add(x.x,x.y,0,0),_.add(w.x,w.y,0,0),this.update(_)}return this}rotate90(){const e=(this.width-this.height)/2;this.x+=e,this.y-=e;const t=this.width;return this.width=this.height,this.height=t,this}moveAndExpand(e){const t=Ln.clone(e);return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this}getMaxScaleToFit(e,t=this.center){const o=Ln.clone(e),c=t.x,d=t.y;let f=1/0,v=1/0,x=1/0,w=1/0,_=1/0,A=1/0,P=1/0,V=1/0;const J=o.topLeft;J.x<c&&(f=(this.x-c)/(J.x-c)),J.y<d&&(_=(this.y-d)/(J.y-d));const ee=o.bottomRight;ee.x>c&&(v=(this.x+this.width-c)/(ee.x-c)),ee.y>d&&(A=(this.y+this.height-d)/(ee.y-d));const ge=o.topRight;ge.x>c&&(x=(this.x+this.width-c)/(ge.x-c)),ge.y<d&&(P=(this.y-d)/(ge.y-d));const Se=o.bottomLeft;return Se.x<c&&(w=(this.x-c)/(Se.x-c)),Se.y>d&&(V=(this.y+this.height-d)/(Se.y-d)),{sx:Math.min(f,v,x,w),sy:Math.min(_,A,P,V)}}getMaxUniformScaleToFit(e,t=this.center){const o=this.getMaxScaleToFit(e,t);return Math.min(o.sx,o.sy)}containsPoint(e,t){return lM(this,Ve.create(e,t))}containsRect(e,t,o,c){const d=Ln.create(e,t,o,c),f=this.x,v=this.y,x=this.width,w=this.height,_=d.x,A=d.y,P=d.width,V=d.height;return x===0||w===0||P===0||V===0?!1:_>=f&&A>=v&&_+P<=f+x&&A+V<=v+w}intersectsWithLine(e){const t=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],o=[],c=[];return t.forEach(d=>{const f=e.intersectsWithLine(d);f!==null&&c.indexOf(f.toString())<0&&(o.push(f),c.push(f.toString()))}),o.length>0?o:null}intersectsWithLineFromCenterToPoint(e,t){const o=Ve.clone(e),c=this.center;let d=null;t!=null&&t!==0&&o.rotate(t,c);const f=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],v=new rr(c,o);for(let x=f.length-1;x>=0;x-=1){const w=f[x].intersectsWithLine(v);if(w!==null){d=w;break}}return d&&t!=null&&t!==0&&d.rotate(-t,c),d}intersectsWithRect(e,t,o,c){const d=Ln.create(e,t,o,c);if(!this.isIntersectWithRect(d))return null;const f=this.origin,v=this.corner,x=d.origin,w=d.corner,_=Math.max(f.x,x.x),A=Math.max(f.y,x.y);return new Ln(_,A,Math.min(v.x,w.x)-_,Math.min(v.y,w.y)-A)}isIntersectWithRect(e,t,o,c){const d=Ln.create(e,t,o,c),f=this.origin,v=this.corner,x=d.origin,w=d.corner;return!(w.x<=f.x||w.y<=f.y||x.x>=v.x||x.y>=v.y)}normalize(){let e=this.x,t=this.y,o=this.width,c=this.height;return this.width<0&&(e=this.x+this.width,o=-this.width),this.height<0&&(t=this.y+this.height,c=-this.height),this.x=e,this.y=t,this.width=o,this.height=c,this}union(e){const t=Ln.clone(e),o=this.origin,c=this.corner,d=t.origin,f=t.corner,v=Math.min(o.x,d.x),x=Math.min(o.y,d.y),w=Math.max(c.x,f.x),_=Math.max(c.y,f.y);return new Ln(v,x,w-v,_-x)}getNearestSideToPoint(e){const t=Ve.clone(e),o=t.x-this.x,c=this.x+this.width-t.x,d=t.y-this.y,f=this.y+this.height-t.y;let v=o,x="left";return c<v&&(v=c,x="right"),d<v&&(v=d,x="top"),f<v&&(x="bottom"),x}getNearestPointToPoint(e){const t=Ve.clone(e);if(this.containsPoint(t))switch(this.getNearestSideToPoint(t)){case"right":return new Ve(this.x+this.width,t.y);case"left":return new Ve(this.x,t.y);case"bottom":return new Ve(t.x,this.y+this.height);case"top":return new Ve(t.x,this.y);default:break}return t.adhereToRect(this)}equals(e){return e!=null&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}clone(){return new Ln(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.x=="number"&&typeof c.y=="number"&&typeof c.width=="number"&&typeof c.height=="number"&&typeof c.inflate=="function"&&typeof c.moveAndExpand=="function"}l.isRectangle=e})(Ln||(Ln={})),function(l){function e(t){return t!=null&&typeof t=="object"&&typeof t.x=="number"&&typeof t.y=="number"&&typeof t.width=="number"&&typeof t.height=="number"}l.isRectangleLike=e}(Ln||(Ln={})),function(l){function e(f,v,x,w){return f==null||typeof f=="number"?new l(f,v,x,w):t(f)}l.create=e;function t(f){return l.isRectangle(f)?f.clone():Array.isArray(f)?new l(f[0],f[1],f[2],f[3]):new l(f.x,f.y,f.width,f.height)}l.clone=t;function o(f){return new l(0,0,f.width,f.height)}l.fromSize=o;function c(f,v){return new l(f.x,f.y,v.width,v.height)}l.fromPositionAndSize=c;function d(f){return new l(f.x-f.a,f.y-f.b,2*f.a,2*f.b)}l.fromEllipse=d}(Ln||(Ln={}));class rr extends n0{constructor(e,t,o,c){super(),typeof e=="number"&&typeof t=="number"?(this.start=new Ve(e,t),this.end=new Ve(o,c)):(this.start=Ve.create(e),this.end=Ve.create(t))}get[Symbol.toStringTag](){return rr.toStringTag}get center(){return new Ve((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}getCenter(){return this.center}round(e=0){return this.start.round(e),this.end.round(e),this}translate(e,t){return typeof e=="number"?(this.start.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.end.translate(e)),this}rotate(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this}scale(e,t,o){return this.start.scale(e,t,o),this.end.scale(e,t,o),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const e=this.start.x-this.end.x,t=this.start.y-this.end.y;return e*e+t*t}setLength(e){const t=this.length();if(!t)return this;const o=e/t;return this.scale(o,o,this.start)}parallel(e){const t=this.clone();if(!t.isDifferentiable())return t;const{start:o,end:c}=t,d=o.clone().rotate(270,c),f=c.clone().rotate(90,o);return o.move(f,e),c.move(d,e),t}vector(){return new Ve(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const e=new Ve(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)}bbox(){const e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),o=Math.max(this.start.x,this.end.x),c=Math.max(this.start.y,this.end.y);return new Ln(e,t,o-e,c-t)}bearing(){return this.start.bearing(this.end)}closestPoint(e){return this.pointAt(this.closestPointNormalizedLength(e))}closestPointLength(e){return this.closestPointNormalizedLength(e)*this.length()}closestPointTangent(e){return this.tangentAt(this.closestPointNormalizedLength(e))}closestPointNormalizedLength(e){const t=this.vector().dot(new rr(this.start,e).vector()),o=Math.min(1,Math.max(0,t/this.squaredLength()));return Number.isNaN(o)?0:o}pointAt(e){const t=this.start,o=this.end;return e<=0?t.clone():e>=1?o.clone():t.lerp(o,e)}pointAtLength(e){const t=this.start,o=this.end;let c=!0;e<0&&(c=!1,e=-e);const d=this.length();if(e>=d)return c?o.clone():t.clone();const f=(c?e:d-e)/d;return this.pointAt(f)}divideAt(e){const t=this.pointAt(e);return[new rr(this.start,t),new rr(t,this.end)]}divideAtLength(e){const t=this.pointAtLength(e);return[new rr(this.start,t),new rr(t,this.end)]}containsPoint(e){const t=this.start,o=this.end;if(t.cross(e,o)!==0)return!1;const c=this.length();return!(new rr(t,e).length()>c||new rr(e,o).length()>c)}intersect(e,t){const o=e.intersectsWithLine(this,t);return o?Array.isArray(o)?o:[o]:null}intersectsWithLine(e){const t=new Ve(this.end.x-this.start.x,this.end.y-this.start.y),o=new Ve(e.end.x-e.start.x,e.end.y-e.start.y),c=t.x*o.y-t.y*o.x,d=new Ve(e.start.x-this.start.x,e.start.y-this.start.y),f=d.x*o.y-d.y*o.x,v=d.x*t.y-d.y*t.x;if(c===0||f*c<0||v*c<0)return null;if(c>0){if(f>c||v>c)return null}else if(f<c||v<c)return null;return new Ve(this.start.x+f*t.x/c,this.start.y+f*t.y/c)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(e){const t=Ve.clone(e),o=this.start,c=this.end;return((c.x-o.x)*(t.y-o.y)-(c.y-o.y)*(t.x-o.x))/this.length()}pointSquaredDistance(e,t){const o=Ve.create(e,t);return this.closestPoint(o).squaredDistance(o)}pointDistance(e,t){const o=Ve.create(e,t);return this.closestPoint(o).distance(o)}tangentAt(e){if(!this.isDifferentiable())return null;const t=this.start,o=this.end,c=this.pointAt(e),d=new rr(t,o);return d.translate(c.x-t.x,c.y-t.y),d}tangentAtLength(e){if(!this.isDifferentiable())return null;const t=this.start,o=this.end,c=this.pointAtLength(e),d=new rr(t,o);return d.translate(c.x-t.x,c.y-t.y),d}relativeCcw(e,t){const o=Ve.create(e,t);let c=o.x-this.start.x,d=o.y-this.start.y;const f=this.end.x-this.start.x,v=this.end.y-this.start.y;let x=c*v-d*f;return x===0&&(x=c*f+d*v,x>0&&(c-=f,d-=v,x=c*f+d*v,x<0&&(x=0))),x<0?-1:x>0?1:0}equals(e){return e!=null&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y}clone(){return new rr(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;try{if((o==null||o===l.toStringTag)&&Ve.isPoint(c.start)&&Ve.isPoint(c.end)&&typeof c.vector=="function"&&typeof c.bearing=="function"&&typeof c.parallel=="function"&&typeof c.intersect=="function")return!0}catch{return!1}return!1}l.isLine=e})(rr||(rr={}));class ah extends n0{constructor(e,t,o,c){super(),this.x=e??0,this.y=t??0,this.a=o??0,this.b=c??0}get[Symbol.toStringTag](){return ah.toStringTag}get center(){return new Ve(this.x,this.y)}bbox(){return Ln.fromEllipse(this)}getCenter(){return this.center}inflate(e,t){const o=e,c=t??e;return this.a+=2*o,this.b+=2*c,this}normalizedDistance(e,t){const o=Ve.create(e,t),c=o.x-this.x,d=o.y-this.y,f=this.a,v=this.b;return c*c/(f*f)+d*d/(v*v)}containsPoint(e,t){return this.normalizedDistance(e,t)<=1}intersectsWithLine(e){const t=[],o=this.a,c=this.b,d=e.start,f=e.end,v=e.vector(),x=d.diff(new Ve(this.x,this.y)),w=new Ve(v.x/(o*o),v.y/(c*c)),_=new Ve(x.x/(o*o),x.y/(c*c)),A=v.dot(w),P=v.dot(_),V=x.dot(_)-1,J=P*P-A*V;if(J<0)return null;if(J>0){const ee=Math.sqrt(J),ge=(-P-ee)/A,Se=(-P+ee)/A;if((ge<0||ge>1)&&(Se<0||Se>1))return null;ge>=0&&ge<=1&&t.push(d.lerp(f,ge)),Se>=0&&Se<=1&&t.push(d.lerp(f,Se))}else{const ee=-P/A;if(ee>=0&&ee<=1)t.push(d.lerp(f,ee));else return null}return t}intersectsWithLineFromCenterToPoint(e,t=0){const o=Ve.clone(e);t&&o.rotate(t,this.getCenter());const c=o.x-this.x,d=o.y-this.y;let f;if(c===0)return f=this.bbox().getNearestPointToPoint(o),t?f.rotate(-t,this.getCenter()):f;const v=d/c,x=v*v,w=this.a*this.a,_=this.b*this.b;let A=Math.sqrt(1/(1/w+x/_));A=c<0?-A:A;const P=v*A;return f=new Ve(this.x+A,this.y+P),t?f.rotate(-t,this.getCenter()):f}tangentTheta(e){const t=Ve.clone(e),o=t.x,c=t.y,d=this.a,f=this.b,v=this.bbox().center,x=v.x,w=v.y,_=30,A=o>v.x+d/2,P=o<v.x-d/2;let V,J;return A||P?(J=o>v.x?c-_:c+_,V=d*d/(o-x)-d*d*(c-w)*(J-w)/(f*f*(o-x))+x):(V=c>v.y?o+_:o-_,J=f*f/(c-w)-f*f*(o-x)*(V-x)/(d*d*(c-w))+w),new Ve(V,J).theta(t)}scale(e,t){return this.a*=e,this.b*=t,this}rotate(e,t){const o=Ln.fromEllipse(this);o.rotate(e,t);const c=ah.fromRect(o);return this.a=c.a,this.b=c.b,this.x=c.x,this.y=c.y,this}translate(e,t){const o=Ve.create(e,t);return this.x+=o.x,this.y+=o.y,this}equals(e){return e!=null&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b}clone(){return new ah(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.x=="number"&&typeof c.y=="number"&&typeof c.a=="number"&&typeof c.b=="number"&&typeof c.inflate=="function"&&typeof c.normalizedDistance=="function"}l.isEllipse=e})(ah||(ah={})),function(l){function e(c,d,f,v){return c==null||typeof c=="number"?new l(c,d,f,v):t(c)}l.create=e;function t(c){return l.isEllipse(c)?c.clone():Array.isArray(c)?new l(c[0],c[1],c[2],c[3]):new l(c.x,c.y,c.a,c.b)}l.parse=t;function o(c){const d=c.center;return new l(d.x,d.y,c.width/2,c.height/2)}l.fromRect=o}(ah||(ah={}));class _a extends n0{constructor(e){if(super(),e!=null){if(typeof e=="string")return _a.parse(e);this.points=e.map(t=>Ve.create(t))}else this.points=[]}get[Symbol.toStringTag](){return _a.toStringTag}get start(){return this.points.length===0?null:this.points[0]}get end(){return this.points.length===0?null:this.points[this.points.length-1]}scale(e,t,o=new Ve){return this.points.forEach(c=>c.scale(e,t,o)),this}rotate(e,t){return this.points.forEach(o=>o.rotate(e,t)),this}translate(e,t){const o=Ve.create(e,t);return this.points.forEach(c=>c.translate(o.x,o.y)),this}bbox(){if(this.points.length===0)return new Ln;let e=1/0,t=-1/0,o=1/0,c=-1/0;const d=this.points;for(let f=0,v=d.length;f<v;f+=1){const x=d[f],w=x.x,_=x.y;w<e&&(e=w),w>t&&(t=w),_<o&&(o=_),_>c&&(c=_)}return new Ln(e,o,t-e,c-o)}closestPoint(e){const t=this.closestPointLength(e);return this.pointAtLength(t)}closestPointLength(e){const t=this.points,o=t.length;if(o===0||o===1)return 0;let c=0,d=0,f=1/0;for(let v=0,x=o-1;v<x;v+=1){const w=new rr(t[v],t[v+1]),_=w.length(),A=w.closestPointNormalizedLength(e),V=w.pointAt(A).squaredDistance(e);V<f&&(f=V,d=c+A*_),c+=_}return d}closestPointNormalizedLength(e){const t=this.closestPointLength(e);if(t===0)return 0;const o=this.length();return o===0?0:t/o}closestPointTangent(e){const t=this.closestPointLength(e);return this.tangentAtLength(t)}containsPoint(e){if(this.points.length===0)return!1;const t=Ve.clone(e),o=t.x,c=t.y,d=this.points,f=d.length;let v=f-1,x=0;for(let w=0;w<f;w+=1){const _=d[v],A=d[w];if(t.equals(_))return!0;const P=new rr(_,A);if(P.containsPoint(e))return!0;if(c<=_.y&&c>A.y||c>_.y&&c<=A.y){const V=_.x-o>A.x-o?_.x-o:A.x-o;if(V>=0){const J=new Ve(o+V,c),ee=new rr(e,J);P.intersectsWithLine(ee)&&(x+=1)}}v=w}return x%2===1}intersectsWithLine(e){const t=[];for(let o=0,c=this.points.length-1;o<c;o+=1){const d=this.points[o],f=this.points[o+1],v=e.intersectsWithLine(new rr(d,f));v&&t.push(v)}return t.length>0?t:null}isDifferentiable(){for(let e=0,t=this.points.length-1;e<t;e+=1){const o=this.points[e],c=this.points[e+1];if(new rr(o,c).isDifferentiable())return!0}return!1}length(){let e=0;for(let t=0,o=this.points.length-1;t<o;t+=1){const c=this.points[t],d=this.points[t+1];e+=c.distance(d)}return e}pointAt(e){const t=this.points,o=t.length;if(o===0)return null;if(o===1||e<=0)return t[0].clone();if(e>=1)return t[o-1].clone();const d=this.length()*e;return this.pointAtLength(d)}pointAtLength(e){const t=this.points,o=t.length;if(o===0)return null;if(o===1)return t[0].clone();let c=!0;e<0&&(c=!1,e=-e);let d=0;for(let v=0,x=o-1;v<x;v+=1){const w=c?v:x-1-v,_=t[w],A=t[w+1],P=new rr(_,A),V=_.distance(A);if(e<=d+V)return P.pointAtLength((c?1:-1)*(e-d));d+=V}return(c?t[o-1]:t[0]).clone()}tangentAt(e){const o=this.points.length;if(o===0||o===1)return null;e<0&&(e=0),e>1&&(e=1);const d=this.length()*e;return this.tangentAtLength(d)}tangentAtLength(e){const t=this.points,o=t.length;if(o===0||o===1)return null;let c=!0;e<0&&(c=!1,e=-e);let d,f=0;for(let v=0,x=o-1;v<x;v+=1){const w=c?v:x-1-v,_=t[w],A=t[w+1],P=new rr(_,A),V=_.distance(A);if(P.isDifferentiable()){if(e<=f+V)return P.tangentAtLength((c?1:-1)*(e-f));d=P}f+=V}if(d){const v=c?1:0;return d.tangentAt(v)}return null}simplify(e={}){const t=this.points;if(t.length<3)return this;const o=e.threshold||0;let c=0;for(;t[c+2];){const d=c,f=c+1,v=c+2,x=t[d],w=t[f],_=t[v];new rr(x,_).closestPoint(w).distance(w)<=o?t.splice(f,1):c+=1}return this}toHull(){const e=this.points,t=e.length;if(t===0)return new _a;let o=e[0];for(let P=1;P<t;P+=1)(e[P].y<o.y||e[P].y===o.y&&e[P].x>o.x)&&(o=e[P]);const c=[];for(let P=0;P<t;P+=1){let V=o.theta(e[P]);V===0&&(V=360),c.push([e[P],P,V])}if(c.sort((P,V)=>{let J=P[2]-V[2];return J===0&&(J=V[1]-P[1]),J}),c.length>2){const P=c[c.length-1];c.unshift(P)}const d={},f=[],v=P=>`${P[0].toString()}@${P[1]}`;for(;c.length!==0;){const P=c.pop(),V=P[0];if(d[v(P)])continue;let J=!1;for(;!J;)if(f.length<2)f.push(P),J=!0;else{const ee=f.pop(),ge=ee[0],Se=f.pop(),Re=Se[0],_e=Re.cross(ge,V);if(_e<0)f.push(Se),f.push(ee),f.push(P),J=!0;else if(_e===0){const Qe=ge.angleBetween(Re,V);Math.abs(Qe-180)<1e-10||ge.equals(V)||Re.equals(ge)?(d[v(ee)]=ge,f.push(Se)):Math.abs((Qe+1)%360-1)<1e-10&&(f.push(Se),c.push(ee))}else d[v(ee)]=ge,f.push(Se)}}f.length>2&&f.pop();let x,w=-1;for(let P=0,V=f.length;P<V;P+=1){const J=f[P][1];(x===void 0||J<x)&&(x=J,w=P)}let _=[];if(w>0){const P=f.slice(w),V=f.slice(0,w);_=P.concat(V)}else _=f;const A=[];for(let P=0,V=_.length;P<V;P+=1)A.push(_[P][0]);return new _a(A)}equals(e){return e==null||e.points.length!==this.points.length?!1:e.points.every((t,o)=>t.equals(this.points[o]))}clone(){return new _a(this.points.map(e=>e.clone()))}toJSON(){return this.points.map(e=>e.toJSON())}serialize(){return this.points.map(e=>`${e.x}, ${e.y}`).join(" ")}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.toHull=="function"&&typeof c.simplify=="function"}l.isPolyline=e})(_a||(_a={})),function(l){function e(t){const o=t.trim();if(o==="")return new l;const c=[],d=o.split(/\s*,\s*|\s+/);for(let f=0,v=d.length;f<v;f+=2)c.push({x:+d[f],y:+d[f+1]});return new l(c)}l.parse=e}(_a||(_a={}));class sa extends n0{constructor(e,t,o,c){super(),this.PRECISION=3,this.start=Ve.create(e),this.controlPoint1=Ve.create(t),this.controlPoint2=Ve.create(o),this.end=Ve.create(c)}get[Symbol.toStringTag](){return sa.toStringTag}bbox(){const e=this.start,t=this.controlPoint1,o=this.controlPoint2,c=this.end,d=e.x,f=e.y,v=t.x,x=t.y,w=o.x,_=o.y,A=c.x,P=c.y,V=[],J=[],ee=[[],[]];let ge,Se,Re,_e,Ue,Qe,bt,Pt;for(let kr=0;kr<2;kr+=1){if(kr===0?(Se=6*d-12*v+6*w,ge=-3*d+9*v-9*w+3*A,Re=3*v-3*d):(Se=6*f-12*x+6*_,ge=-3*f+9*x-9*_+3*P,Re=3*x-3*f),Math.abs(ge)<1e-12){if(Math.abs(Se)<1e-12)continue;_e=-Re/Se,_e>0&&_e<1&&J.push(_e);continue}bt=Se*Se-4*Re*ge,Pt=Math.sqrt(bt),!(bt<0)&&(Ue=(-Se+Pt)/(2*ge),Ue>0&&Ue<1&&J.push(Ue),Qe=(-Se-Pt)/(2*ge),Qe>0&&Qe<1&&J.push(Qe))}let Kt,kn,wn,Sn=J.length;const Vn=Sn;for(;Sn;)Sn-=1,_e=J[Sn],wn=1-_e,Kt=wn*wn*wn*d+3*wn*wn*_e*v+3*wn*_e*_e*w+_e*_e*_e*A,ee[0][Sn]=Kt,kn=wn*wn*wn*f+3*wn*wn*_e*x+3*wn*_e*_e*_+_e*_e*_e*P,ee[1][Sn]=kn,V[Sn]={X:Kt,Y:kn};J[Vn]=0,J[Vn+1]=1,V[Vn]={X:d,Y:f},V[Vn+1]={X:A,Y:P},ee[0][Vn]=d,ee[1][Vn]=f,ee[0][Vn+1]=A,ee[1][Vn+1]=P,J.length=Vn+2,ee[0].length=Vn+2,ee[1].length=Vn+2,V.length=Vn+2;const Ur=Math.min.apply(null,ee[0]),Wr=Math.min.apply(null,ee[1]),$t=Math.max.apply(null,ee[0]),On=Math.max.apply(null,ee[1]);return new Ln(Ur,Wr,$t-Ur,On-Wr)}closestPoint(e,t={}){return this.pointAtT(this.closestPointT(e,t))}closestPointLength(e,t={}){const o=this.getOptions(t);return this.lengthAtT(this.closestPointT(e,o),o)}closestPointNormalizedLength(e,t={}){const o=this.getOptions(t),c=this.closestPointLength(e,o);if(!c)return 0;const d=this.length(o);return d===0?0:c/d}closestPointT(e,t={}){const o=this.getPrecision(t),c=this.getDivisions(t),d=Math.pow(10,-o);let f=null,v=0,x=0,w=0,_=0,A=0,P=null;const V=c.length;let J=V>0?1/V:0;for(c.forEach((ee,ge)=>{const Se=ee.start.distance(e),Re=ee.end.distance(e),_e=Se+Re;(P==null||_e<P)&&(f=ee,v=ge*J,x=(ge+1)*J,w=Se,_=Re,P=_e,A=ee.endpointDistance())});;){const ee=w?Math.abs(w-_)/w:0,ge=_!=null?Math.abs(w-_)/_:0,Se=ee<d||ge<d,Re=w?w<A*d:!0,_e=_?_<A*d:!0;if(Se||(Re||_e))return w<=_?v:x;const Qe=f.divide(.5);J/=2;const bt=Qe[0].start.distance(e),Pt=Qe[0].end.distance(e),Kt=bt+Pt,kn=Qe[1].start.distance(e),wn=Qe[1].end.distance(e),Sn=kn+wn;Kt<=Sn?(f=Qe[0],x-=J,w=bt,_=Pt):(f=Qe[1],v+=J,w=kn,_=wn)}}closestPointTangent(e,t={}){return this.tangentAtT(this.closestPointT(e,t))}containsPoint(e,t={}){return this.toPolyline(t).containsPoint(e)}divideAt(e,t={}){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);const o=this.tAt(e,t);return this.divideAtT(o)}divideAtLength(e,t={}){const o=this.tAtLength(e,t);return this.divideAtT(o)}divide(e){return this.divideAtT(e)}divideAtT(e){const t=this.start,o=this.controlPoint1,c=this.controlPoint2,d=this.end;if(e<=0)return[new sa(t,t,t,t),new sa(t,o,c,d)];if(e>=1)return[new sa(t,o,c,d),new sa(d,d,d,d)];const f=this.getSkeletonPoints(e),v=f.startControlPoint1,x=f.startControlPoint2,w=f.divider,_=f.dividerControlPoint1,A=f.dividerControlPoint2;return[new sa(t,v,x,w),new sa(w,_,A,d)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(e){const t=this.start,o=this.controlPoint1,c=this.controlPoint2,d=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:c.clone()};if(e>=1)return{startControlPoint1:o.clone(),startControlPoint2:c.clone(),divider:d.clone(),dividerControlPoint1:d.clone(),dividerControlPoint2:d.clone()};const f=new rr(t,o).pointAt(e),v=new rr(o,c).pointAt(e),x=new rr(c,d).pointAt(e),w=new rr(f,v).pointAt(e),_=new rr(v,x).pointAt(e),A=new rr(w,_).pointAt(e);return{startControlPoint1:f,startControlPoint2:w,divider:A,dividerControlPoint1:_,dividerControlPoint2:x}}getSubdivisions(e={}){const t=this.getPrecision(e);let o=[new sa(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(t===0)return o;let c=this.endpointDistance();const d=Math.pow(10,-t);let f=0;for(;;){f+=1;const v=[];o.forEach(_=>{const A=_.divide(.5);v.push(A[0],A[1])});const x=v.reduce((_,A)=>_+A.endpointDistance(),0),w=x!==0?(x-c)/x:0;if(f>1&&w<d)return v;o=v,c=x}}length(e={}){return this.getDivisions(e).reduce((o,c)=>o+c.endpointDistance(),0)}lengthAtT(e,t={}){if(e<=0)return 0;const o=t.precision===void 0?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:o})}pointAt(e,t={}){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const o=this.tAt(e,t);return this.pointAtT(o)}pointAtLength(e,t={}){const o=this.tAtLength(e,t);return this.pointAtT(o)}pointAtT(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider}isDifferentiable(){const e=this.start,t=this.controlPoint1,o=this.controlPoint2,c=this.end;return!(e.equals(t)&&t.equals(o)&&o.equals(c))}tangentAt(e,t={}){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);const o=this.tAt(e,t);return this.tangentAtT(o)}tangentAtLength(e,t={}){if(!this.isDifferentiable())return null;const o=this.tAtLength(e,t);return this.tangentAtT(o)}tangentAtT(e){if(!this.isDifferentiable())return null;e<0&&(e=0),e>1&&(e=1);const t=this.getSkeletonPoints(e),o=t.startControlPoint2,c=t.dividerControlPoint1,d=t.divider,f=new rr(o,c);return f.translate(d.x-o.x,d.y-o.y),f}getPrecision(e={}){return e.precision==null?this.PRECISION:e.precision}getDivisions(e={}){if(e.subdivisions!=null)return e.subdivisions;const t=this.getPrecision(e);return this.getSubdivisions({precision:t})}getOptions(e={}){const t=this.getPrecision(e),o=this.getDivisions(e);return{precision:t,subdivisions:o}}tAt(e,t={}){if(e<=0)return 0;if(e>=1)return 1;const o=this.getOptions(t),d=this.length(o)*e;return this.tAtLength(d,o)}tAtLength(e,t={}){let o=!0;e<0&&(o=!1,e=-e);const c=this.getPrecision(t),d=this.getDivisions(t),f={precision:c,subdivisions:d};let v=null,x,w,_=0,A=0,P=0;const V=d.length;let J=V>0?1/V:0;for(let Se=0;Se<V;Se+=1){const Re=o?Se:V-1-Se,_e=d[Se],Ue=_e.endpointDistance();if(e<=P+Ue){v=_e,x=Re*J,w=(Re+1)*J,_=o?e-P:Ue+P-e,A=o?Ue+P-e:e-P;break}P+=Ue}if(v==null)return o?1:0;const ee=this.length(f),ge=Math.pow(10,-c);for(;;){let Se;if(Se=ee!==0?_/ee:0,Se<ge)return x;if(Se=ee!==0?A/ee:0,Se<ge)return w;let Re,_e;const Ue=v.divide(.5);J/=2;const Qe=Ue[0].endpointDistance(),bt=Ue[1].endpointDistance();_<=Qe?(v=Ue[0],w-=J,Re=_,_e=Qe-Re):(v=Ue[1],x+=J,Re=_-Qe,_e=bt-Re),_=Re,A=_e}}toPoints(e={}){const t=this.getDivisions(e),o=[t[0].start.clone()];return t.forEach(c=>o.push(c.end.clone())),o}toPolyline(e={}){return new _a(this.toPoints(e))}scale(e,t,o){return this.start.scale(e,t,o),this.controlPoint1.scale(e,t,o),this.controlPoint2.scale(e,t,o),this.end.scale(e,t,o),this}rotate(e,t){return this.start.rotate(e,t),this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?(this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return e!=null&&this.start.equals(e.start)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)&&this.end.equals(e.end)}clone(){return new sa(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;try{if((o==null||o===l.toStringTag)&&Ve.isPoint(c.start)&&Ve.isPoint(c.controlPoint1)&&Ve.isPoint(c.controlPoint2)&&Ve.isPoint(c.end)&&typeof c.toPoints=="function"&&typeof c.toPolyline=="function")return!0}catch{return!1}return!1}l.isCurve=e})(sa||(sa={})),function(l){function e(c){const d=c.length,f=[],v=[];let x=2;f[0]=c[0]/x;for(let w=1;w<d;w+=1)v[w]=1/x,x=(w<d-1?4:3.5)-v[w],f[w]=(c[w]-f[w-1])/x;for(let w=1;w<d;w+=1)f[d-w-1]-=v[d-w]*f[d-w];return f}function t(c){const d=c.map(P=>Ve.clone(P)),f=[],v=[],x=d.length-1;if(x===1)return f[0]=new Ve((2*d[0].x+d[1].x)/3,(2*d[0].y+d[1].y)/3),v[0]=new Ve(2*f[0].x-d[0].x,2*f[0].y-d[0].y),[f,v];const w=[];for(let P=1;P<x-1;P+=1)w[P]=4*d[P].x+2*d[P+1].x;w[0]=d[0].x+2*d[1].x,w[x-1]=(8*d[x-1].x+d[x].x)/2;const _=e(w);for(let P=1;P<x-1;P+=1)w[P]=4*d[P].y+2*d[P+1].y;w[0]=d[0].y+2*d[1].y,w[x-1]=(8*d[x-1].y+d[x].y)/2;const A=e(w);for(let P=0;P<x;P+=1)f.push(new Ve(_[P],A[P])),P<x-1?v.push(new Ve(2*d[P+1].x-_[P+1],2*d[P+1].y-A[P+1])):v.push(new Ve((d[x].x+_[x-1])/2,(d[x].y+A[x-1])/2));return[f,v]}function o(c){if(c==null||Array.isArray(c)&&c.length<2)throw new Error("At least 2 points are required");const d=t(c),f=[];for(let v=0,x=d[0].length;v<x;v+=1){const w=new Ve(d[0][v].x,d[0][v].y),_=new Ve(d[1][v].x,d[1][v].y);f.push(new l(c[v],w,_,c[v+1]))}return f}l.throughPoints=o}(sa||(sa={}));class xC extends n0{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(e,t){if(e<=0)return 0;const o=this.length();return e>=1?o:o*e}divideAtT(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class Cl extends xC{constructor(e,t){super(),rr.isLine(e)?this.endPoint=e.end.clone().round(2):this.endPoint=Ve.create(e,t).round(2)}get type(){return"L"}get line(){return new rr(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[new Cl(t[0]),new Cl(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[new Cl(t[0]),new Cl(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return this.previousSegment==null?!1:!this.start.equals(this.end)}clone(){return new Cl(this.end)}scale(e,t,o){return this.end.scale(e,t,o),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}(function(l){function e(...t){const o=t.length,c=t[0];if(rr.isLine(c))return new l(c);if(Ve.isPointLike(c))return o===1?new l(c):t.map(f=>new l(f));if(o===2)return new l(+t[0],+t[1]);const d=[];for(let f=0;f<o;f+=2){const v=+t[f],x=+t[f+1];d.push(new l(v,x))}return d}l.create=e})(Cl||(Cl={}));class cv extends xC{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new rr(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[t[1].isDifferentiable()?new Cl(t[0]):this.clone(),new Cl(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new Cl(t[0]):this.clone(),new Cl(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}scale(){return this}rotate(){return this}translate(){return this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}clone(){return new cv}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}(function(l){function e(){return new l}l.create=e})(cv||(cv={}));class lv extends xC{constructor(e,t){super(),this.isVisible=!1,this.isSubpathStart=!0,rr.isLine(e)||sa.isCurve(e)?this.endPoint=e.end.clone().round(2):this.endPoint=Ve.create(e,t).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(e,t,o){return this.end.scale(e,t,o),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}clone(){return new lv(this.end)}equals(e){return this.type===e.type&&this.end.equals(e.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}(function(l){function e(...t){const o=t.length,c=t[0];if(rr.isLine(c))return new l(c);if(sa.isCurve(c))return new l(c);if(Ve.isPointLike(c)){if(o===1)return new l(c);const f=[];for(let v=0;v<o;v+=1)v===0?f.push(new l(t[v])):f.push(new Cl(t[v]));return f}if(o===2)return new l(+t[0],+t[1]);const d=[];for(let f=0;f<o;f+=2){const v=+t[f],x=+t[f+1];f===0?d.push(new l(v,x)):d.push(new Cl(v,x))}return d}l.create=e})(lv||(lv={}));class Ou extends xC{constructor(e,t,o,c,d,f){super(),sa.isCurve(e)?(this.controlPoint1=e.controlPoint1.clone().round(2),this.controlPoint2=e.controlPoint2.clone().round(2),this.endPoint=e.end.clone().round(2)):typeof e=="number"?(this.controlPoint1=new Ve(e,t).round(2),this.controlPoint2=new Ve(o,c).round(2),this.endPoint=new Ve(d,f).round(2)):(this.controlPoint1=Ve.create(e).round(2),this.controlPoint2=Ve.create(t).round(2),this.endPoint=Ve.create(o).round(2))}get type(){return"C"}get curve(){return new sa(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(e){return this.curve.closestPoint(e)}closestPointLength(e){return this.curve.closestPointLength(e)}closestPointNormalizedLength(e){return this.curve.closestPointNormalizedLength(e)}closestPointTangent(e){return this.curve.closestPointTangent(e)}length(){return this.curve.length()}divideAt(e,t={}){const o=this.curve.divideAt(e,t);return[new Ou(o[0]),new Ou(o[1])]}divideAtLength(e,t={}){const o=this.curve.divideAtLength(e,t);return[new Ou(o[0]),new Ou(o[1])]}divideAtT(e){const t=this.curve.divideAtT(e);return[new Ou(t[0]),new Ou(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.curve.pointAt(e)}pointAtLength(e){return this.curve.pointAtLength(e)}tangentAt(e){return this.curve.tangentAt(e)}tangentAtLength(e){return this.curve.tangentAtLength(e)}isDifferentiable(){if(!this.previousSegment)return!1;const e=this.start,t=this.controlPoint1,o=this.controlPoint2,c=this.end;return!(e.equals(t)&&t.equals(o)&&o.equals(c))}scale(e,t,o){return this.controlPoint1.scale(e,t,o),this.controlPoint2.scale(e,t,o),this.end.scale(e,t,o),this}rotate(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}clone(){return new Ou(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.controlPoint1,t=this.controlPoint2,o=this.end;return[this.type,e.x,e.y,t.x,t.y,o.x,o.y].join(" ")}}(function(l){function e(...t){const o=t.length,c=t[0];if(sa.isCurve(c))return new l(c);if(Ve.isPointLike(c)){if(o===3)return new l(t[0],t[1],t[2]);const f=[];for(let v=0;v<o;v+=3)f.push(new l(t[v],t[v+1],t[v+2]));return f}if(o===6)return new l(t[0],t[1],t[2],t[3],t[4],t[5]);const d=[];for(let f=0;f<o;f+=6)d.push(new l(t[f],t[f+1],t[f+2],t[f+3],t[f+4],t[f+5]));return d}l.create=e})(Ou||(Ou={}));function x2(l,e,t){return{x:l*Math.cos(t)-e*Math.sin(t),y:l*Math.sin(t)+e*Math.cos(t)}}function CC(l,e,t,o,c,d){const f=.3333333333333333,v=2/3;return[f*l+v*t,f*e+v*o,f*c+v*t,f*d+v*o,c,d]}function wC(l,e,t,o,c,d,f,v,x,w){const _=Math.PI*120/180,A=Math.PI/180*(+c||0);let P=[],V,J,ee,ge,Se;if(w)J=w[0],ee=w[1],ge=w[2],Se=w[3];else{V=x2(l,e,-A),l=V.x,e=V.y,V=x2(v,x,-A),v=V.x,x=V.y;const Wr=(l-v)/2,$t=(e-x)/2;let On=Wr*Wr/(t*t)+$t*$t/(o*o);On>1&&(On=Math.sqrt(On),t=On*t,o=On*o);const kr=t*t,Vo=o*o,ss=(d===f?-1:1)*Math.sqrt(Math.abs((kr*Vo-kr*$t*$t-Vo*Wr*Wr)/(kr*$t*$t+Vo*Wr*Wr)));ge=ss*t*$t/o+(l+v)/2,Se=ss*-o*Wr/t+(e+x)/2,J=Math.asin((e-Se)/o),ee=Math.asin((x-Se)/o),J=l<ge?Math.PI-J:J,ee=v<ge?Math.PI-ee:ee,J<0&&(J=Math.PI*2+J),ee<0&&(ee=Math.PI*2+ee),f&&J>ee&&(J-=Math.PI*2),!f&&ee>J&&(ee-=Math.PI*2)}let Re=ee-J;if(Math.abs(Re)>_){const Wr=ee,$t=v,On=x;ee=J+_*(f&&ee>J?1:-1),v=ge+t*Math.cos(ee),x=Se+o*Math.sin(ee),P=wC(v,x,t,o,c,0,f,$t,On,[ee,Wr,ge,Se])}Re=ee-J;const _e=Math.cos(J),Ue=Math.sin(J),Qe=Math.cos(ee),bt=Math.sin(ee),Pt=Math.tan(Re/4),Kt=4/3*(t*Pt),kn=4/3*(o*Pt),wn=[l,e],Sn=[l+Kt*Ue,e-kn*_e],Vn=[v+Kt*bt,x-kn*Qe],Ur=[v,x];if(Sn[0]=2*wn[0]-Sn[0],Sn[1]=2*wn[1]-Sn[1],w)return[Sn,Vn,Ur].concat(P);{P=[Sn,Vn,Ur].concat(P).join().split(",");const Wr=[],$t=P.length;for(let On=0;On<$t;On+=1)Wr[On]=On%2?x2(+P[On-1],+P[On],A).y:x2(+P[On],+P[On+1],A).x;return Wr}}function fS(l){if(!l)return null;const e=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,t=new RegExp(`([a-z])[${e},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${e}]*,?[${e}]*)+)`,"ig"),o=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${e}]*,?[${e}]*`,"ig"),c={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},d=[];return l.replace(t,(f,v,x)=>{const w=[];let _=v.toLowerCase();x.replace(o,(P,V)=>(V&&w.push(+V),P)),_==="m"&&w.length>2&&(d.push([v,...w.splice(0,2)]),_="l",v=v==="m"?"l":"L");const A=c[_];for(;w.length>=A&&(d.push([v,...w.splice(0,A)]),!!A););return f}),d}function EC(l){const e=fS(l);if(!e||!e.length)return[["M",0,0]];let t=0,o=0,c=0,d=0;const f=[];for(let v=0,x=e.length;v<x;v+=1){const w=[];f.push(w);const _=e[v],A=_[0];if(A!==A.toUpperCase())switch(w[0]=A.toUpperCase(),w[0]){case"A":w[1]=_[1],w[2]=_[2],w[3]=_[3],w[4]=_[4],w[5]=_[5],w[6]=+_[6]+t,w[7]=+_[7]+o;break;case"V":w[1]=+_[1]+o;break;case"H":w[1]=+_[1]+t;break;case"M":c=+_[1]+t,d=+_[2]+o;for(let P=1,V=_.length;P<V;P+=1)w[P]=+_[P]+(P%2?t:o);break;default:for(let P=1,V=_.length;P<V;P+=1)w[P]=+_[P]+(P%2?t:o);break}else for(let P=0,V=_.length;P<V;P+=1)w[P]=_[P];switch(w[0]){case"Z":t=+c,o=+d;break;case"H":t=w[1];break;case"V":o=w[1];break;case"M":c=w[w.length-2],d=w[w.length-1],t=w[w.length-2],o=w[w.length-1];break;default:t=w[w.length-2],o=w[w.length-1];break}}return f}function pS(l){const e=EC(l),t={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function o(x,w,_){let A,P;if(!x)return["C",w.x,w.y,w.x,w.y,w.x,w.y];switch(x[0]in{T:1,Q:1}||(w.qx=null,w.qy=null),x[0]){case"M":w.X=x[1],w.Y=x[2];break;case"A":return parseFloat(x[1])===0||parseFloat(x[2])===0?["L",x[6],x[7]]:["C"].concat(wC.apply(0,[w.x,w.y].concat(x.slice(1))));case"S":return _==="C"||_==="S"?(A=w.x*2-w.bx,P=w.y*2-w.by):(A=w.x,P=w.y),["C",A,P].concat(x.slice(1));case"T":return _==="Q"||_==="T"?(w.qx=w.x*2-w.qx,w.qy=w.y*2-w.qy):(w.qx=w.x,w.qy=w.y),["C"].concat(CC(w.x,w.y,w.qx,w.qy,x[1],x[2]));case"Q":return w.qx=x[1],w.qy=x[2],["C"].concat(CC(w.x,w.y,x[1],x[2],x[3],x[4]));case"H":return["L"].concat(x[1],w.y);case"V":return["L"].concat(w.x,x[1]);case"L":break;case"Z":break;default:break}return x}function c(x,w){if(x[w].length>7){x[w].shift();const _=x[w];for(;_.length;)d[w]="A",w+=1,x.splice(w,0,["C"].concat(_.splice(0,6)));x.splice(w,1),v=e.length}}const d=[];let f="",v=e.length;for(let x=0;x<v;x+=1){let w="";e[x]&&(w=e[x][0]),w!=="C"&&(d[x]=w,x>0&&(f=d[x-1])),e[x]=o(e[x],t,f),d[x]!=="A"&&w==="C"&&(d[x]="C"),c(e,x);const _=e[x],A=_.length;t.x=_[A-2],t.y=_[A-1],t.bx=parseFloat(_[A-4])||t.x,t.by=parseFloat(_[A-3])||t.y}return(!e[0][0]||e[0][0]!=="M")&&e.unshift(["M",0,0]),e}function gS(l){return pS(l).map(e=>e.map(t=>typeof t=="string"?t:sv(t,2))).join(",").split(",").join(" ")}const dM=new RegExp("^[\\s\\dLMCZz,.]*$");function hM(l){return typeof l!="string"?!1:dM.test(l)}function SC(l,e){return(l%e+e)%e}function fM(l,e,t,o,c){const d=[],f=l[l.length-1],v=e!=null&&e>0,x=e||0;if(o&&v){l=l.slice();const A=l[0],P=new Ve(f.x+(A.x-f.x)/2,f.y+(A.y-f.y)/2);l.splice(0,0,P)}let w=l[0],_=1;for(t?d.push("M",w.x,w.y):d.push("L",w.x,w.y);_<(o?l.length:l.length-1);){let A=l[SC(_,l.length)],P=w.x-A.x,V=w.y-A.y;if(v&&(P!==0||V!==0)&&(c==null||c.indexOf(_-1)<0)){let J=Math.sqrt(P*P+V*V);const ee=P*Math.min(x,J/2)/J,ge=V*Math.min(x,J/2)/J,Se=A.x+ee,Re=A.y+ge;d.push("L",Se,Re);let _e=l[SC(_+1,l.length)];for(;_<l.length-2&&Math.round(_e.x-A.x)===0&&Math.round(_e.y-A.y)===0;)_e=l[SC(_+2,l.length)],_+=1;P=_e.x-A.x,V=_e.y-A.y,J=Math.max(1,Math.sqrt(P*P+V*V));const Ue=P*Math.min(x,J/2)/J,Qe=V*Math.min(x,J/2)/J,bt=A.x+Ue,Pt=A.y+Qe;d.push("Q",A.x,A.y,bt,Pt),A=new Ve(bt,Pt)}else d.push("L",A.x,A.y);w=A,_+=1}return o?d.push("Z"):d.push("L",f.x,f.y),d.map(A=>typeof A=="string"?A:+A.toFixed(3)).join(" ")}function _C(l,e={}){const t=[];return l&&l.length&&l.forEach(o=>{Array.isArray(o)?t.push({x:o[0],y:o[1]}):t.push({x:o.x,y:o.y})}),fM(t,e.round,e.initialMove==null||e.initialMove,e.close,e.exclude)}function Wm(l,e,t,o,c=0,d=0,f=0,v,x){if(t===0||o===0)return[];v-=l,x-=e,t=Math.abs(t),o=Math.abs(o);const w=-v/2,_=-x/2,A=Math.cos(c*Math.PI/180),P=Math.sin(c*Math.PI/180),V=A*w+P*_,J=-1*P*w+A*_,ee=V*V,ge=J*J,Se=t*t,Re=o*o,_e=ee/Se+ge/Re;let Ue;if(_e>1)t=Math.sqrt(_e)*t,o=Math.sqrt(_e)*o,Ue=0;else{let rl=1;d===f&&(rl=-1),Ue=rl*Math.sqrt((Se*Re-Se*ge-Re*ee)/(Se*ge+Re*ee))}const Qe=Ue*t*J/o,bt=-1*Ue*o*V/t,Pt=A*Qe-P*bt+v/2,Kt=P*Qe+A*bt+x/2;let kn=Math.atan2((J-bt)/o,(V-Qe)/t)-Math.atan2(0,1),wn=kn>=0?kn:2*Math.PI+kn;kn=Math.atan2((-J-bt)/o,(-V-Qe)/t)-Math.atan2((J-bt)/o,(V-Qe)/t);let Sn=kn>=0?kn:2*Math.PI+kn;f===0&&Sn>0?Sn-=2*Math.PI:f!==0&&Sn<0&&(Sn+=2*Math.PI);const Vn=Sn*2/Math.PI,Ur=Math.ceil(Vn<0?-1*Vn:Vn),Wr=Sn/Ur,$t=8/3*Math.sin(Wr/4)*Math.sin(Wr/4)/Math.sin(Wr/2),On=A*t,kr=A*o,Vo=P*t,ss=P*o;let ca=Math.cos(wn),zs=Math.sin(wn),x0=-$t*(On*zs+ss*ca),l1=-$t*(Vo*zs-kr*ca),mg=0,Lv=0;const ff=[];for(let rl=0;rl<Ur;rl+=1){wn+=Wr,ca=Math.cos(wn),zs=Math.sin(wn),mg=On*ca-ss*zs+Pt,Lv=Vo*ca+kr*zs+Kt;const AA=-$t*(On*zs+ss*ca),TA=-$t*(Vo*zs-kr*ca),yg=rl*6;ff[yg]=Number(x0+l),ff[yg+1]=Number(l1+e),ff[yg+2]=Number(mg-AA+l),ff[yg+3]=Number(Lv-TA+e),ff[yg+4]=Number(mg+l),ff[yg+5]=Number(Lv+e),x0=mg+AA,l1=Lv+TA}return ff.map(rl=>+rl.toFixed(2))}function vS(l,e,t,o,c=0,d=0,f=0,v,x){const w=[],_=Wm(l,e,t,o,c,d,f,v,x);if(_!=null)for(let A=0,P=_.length;A<P;A+=6)w.push("C",_[A],_[A+1],_[A+2],_[A+3],_[A+4],_[A+5]);return w.join(" ")}class Nr extends n0{constructor(e){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(e))if(rr.isLine(e[0])||sa.isCurve(e[0])){let t=null;e.forEach((c,d)=>{d===0&&this.appendSegment(Nr.createSegment("M",c.start)),t!=null&&!t.end.equals(c.start)&&this.appendSegment(Nr.createSegment("M",c.start)),rr.isLine(c)?this.appendSegment(Nr.createSegment("L",c.end)):sa.isCurve(c)&&this.appendSegment(Nr.createSegment("C",c.controlPoint1,c.controlPoint2,c.end)),t=c})}else e.forEach(o=>{o.isSegment&&this.appendSegment(o)});else e!=null&&(rr.isLine(e)?(this.appendSegment(Nr.createSegment("M",e.start)),this.appendSegment(Nr.createSegment("L",e.end))):sa.isCurve(e)?(this.appendSegment(Nr.createSegment("M",e.start)),this.appendSegment(Nr.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):_a.isPolyline(e)?e.points&&e.points.length&&e.points.forEach((t,o)=>{const c=o===0?Nr.createSegment("M",t):Nr.createSegment("L",t);this.appendSegment(c)}):e.isSegment&&this.appendSegment(e))}get[Symbol.toStringTag](){return Nr.toStringTag}get start(){const e=this.segments,t=e.length;if(t===0)return null;for(let o=0;o<t;o+=1){const c=e[o];if(c.isVisible)return c.start}return e[t-1].end}get end(){const e=this.segments,t=e.length;if(t===0)return null;for(let o=t-1;o>=0;o-=1){const c=e[o];if(c.isVisible)return c.end}return e[t-1].end}moveTo(...e){return this.appendSegment(lv.create.call(null,...e))}lineTo(...e){return this.appendSegment(Cl.create.call(null,...e))}curveTo(...e){return this.appendSegment(Ou.create.call(null,...e))}arcTo(e,t,o,c,d,f,v){const x=this.end||new Ve,w=typeof f=="number"?Wm(x.x,x.y,e,t,o,c,d,f,v):Wm(x.x,x.y,e,t,o,c,d,f.x,f.y);if(w!=null)for(let _=0,A=w.length;_<A;_+=6)this.curveTo(w[_],w[_+1],w[_+2],w[_+3],w[_+4],w[_+5]);return this}quadTo(e,t,o,c){const d=this.end||new Ve,f=["M",d.x,d.y];if(typeof e=="number")f.push("Q",e,t,o,c);else{const x=t;f.push("Q",e.x,e.y,x.x,x.y)}const v=Nr.parse(f.join(" "));return this.appendSegment(v.segments.slice(1)),this}close(){return this.appendSegment(cv.create())}drawPoints(e,t={}){const o=_C(e,t),c=Nr.parse(o);c&&c.segments&&this.appendSegment(c.segments)}bbox(){const e=this.segments,t=e.length;if(t===0)return null;let o;for(let d=0;d<t;d+=1){const f=e[d];if(f.isVisible){const v=f.bbox();v!=null&&(o=o?o.union(v):v)}}if(o!=null)return o;const c=e[t-1];return new Ln(c.end.x,c.end.y,0,0)}appendSegment(e){const t=this.segments.length;let o=t!==0?this.segments[t-1]:null,c;const d=null;if(Array.isArray(e))for(let f=0,v=e.length;f<v;f+=1){const x=e[f];c=this.prepareSegment(x,o,d),this.segments.push(c),o=c}else e!=null&&e.isSegment&&(c=this.prepareSegment(e,o,d),this.segments.push(c));return this}insertSegment(e,t){const o=this.segments.length;if(e<0&&(e=o+e+1),e>o||e<0)throw new Error("Index out of range.");let c,d=null,f=null;if(o!==0&&(e>=1?(d=this.segments[e-1],f=d.nextSegment):(d=null,f=this.segments[0])),!Array.isArray(t))c=this.prepareSegment(t,d,f),this.segments.splice(e,0,c);else for(let v=0,x=t.length;v<x;v+=1){const w=t[v];c=this.prepareSegment(w,d,f),this.segments.splice(e+v,0,c),d=c}return this}removeSegment(e){const t=this.fixIndex(e),o=this.segments.splice(t,1)[0],c=o.previousSegment,d=o.nextSegment;return c&&(c.nextSegment=d),d&&(d.previousSegment=c),o.isSubpathStart&&d&&this.updateSubpathStartSegment(d),o}replaceSegment(e,t){const o=this.fixIndex(e);let c;const d=this.segments[o];let f=d.previousSegment;const v=d.nextSegment;let x=d.isSubpathStart;if(!Array.isArray(t))c=this.prepareSegment(t,f,v),this.segments.splice(o,1,c),x&&c.isSubpathStart&&(x=!1);else{this.segments.splice(e,1);for(let w=0,_=t.length;w<_;w+=1){const A=t[w];c=this.prepareSegment(A,f,v),this.segments.splice(e+w,0,c),f=c,x&&c.isSubpathStart&&(x=!1)}}x&&v&&this.updateSubpathStartSegment(v)}getSegment(e){const t=this.fixIndex(e);return this.segments[t]}fixIndex(e){const t=this.segments.length;if(t===0)throw new Error("Path has no segments.");let o=e;for(;o<0;)o=t+o;if(o>=t||o<0)throw new Error("Index out of range.");return o}segmentAt(e,t={}){const o=this.segmentIndexAt(e,t);return o?this.getSegment(o):null}segmentAtLength(e,t={}){const o=this.segmentIndexAtLength(e,t);return o?this.getSegment(o):null}segmentIndexAt(e,t={}){if(this.segments.length===0)return null;const o=av(e,0,1),c=this.getOptions(t),f=this.length(c)*o;return this.segmentIndexAtLength(f,c)}segmentIndexAtLength(e,t={}){const o=this.segments.length;if(o===0)return null;let c=!0;e<0&&(c=!1,e=-e);const d=this.getPrecision(t),f=this.getSubdivisions(t);let v=0,x=null;for(let w=0;w<o;w+=1){const _=c?w:o-1-w,A=this.segments[_],P=f[_],V=A.length({precision:d,subdivisions:P});if(A.isVisible){if(e<=v+V)return _;x=_}v+=V}return x}getSegmentSubdivisions(e={}){const t=this.getPrecision(e),o=[];for(let c=0,d=this.segments.length;c<d;c+=1){const v=this.segments[c].getSubdivisions({precision:t});o.push(v)}return o}updateSubpathStartSegment(e){let t=e.previousSegment,o=e;for(;o&&!o.isSubpathStart;)t!=null?o.subpathStartSegment=t.subpathStartSegment:o.subpathStartSegment=null,t=o,o=o.nextSegment}prepareSegment(e,t,o){e.previousSegment=t,e.nextSegment=o,t!=null&&(t.nextSegment=e),o!=null&&(o.previousSegment=e);let c=e;return e.isSubpathStart&&(e.subpathStartSegment=e,c=o),c!=null&&this.updateSubpathStartSegment(c),e}closestPoint(e,t={}){const o=this.closestPointT(e,t);return o?this.pointAtT(o):null}closestPointLength(e,t={}){const o=this.getOptions(t),c=this.closestPointT(e,o);return c?this.lengthAtT(c,o):0}closestPointNormalizedLength(e,t={}){const o=this.getOptions(t),c=this.closestPointLength(e,o);if(c===0)return 0;const d=this.length(o);return d===0?0:c/d}closestPointT(e,t={}){if(this.segments.length===0)return null;const o=this.getPrecision(t),c=this.getSubdivisions(t);let d,f=1/0;for(let v=0,x=this.segments.length;v<x;v+=1){const w=this.segments[v],_=c[v];if(w.isVisible){const A=w.closestPointT(e,{precision:o,subdivisions:_}),P=w.pointAtT(A),V=uM(P,e);V<f&&(d={segmentIndex:v,value:A},f=V)}}return d||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(e,t={}){if(this.segments.length===0)return null;const o=this.getPrecision(t),c=this.getSubdivisions(t);let d,f=1/0;for(let v=0,x=this.segments.length;v<x;v+=1){const w=this.segments[v],_=c[v];if(w.isDifferentiable()){const A=w.closestPointT(e,{precision:o,subdivisions:_}),P=w.pointAtT(A),V=uM(P,e);V<f&&(d=w.tangentAtT(A),f=V)}}return d||null}containsPoint(e,t={}){const o=this.toPolylines(t);if(!o)return!1;let c=0;for(let d=0,f=o.length;d<f;d+=1)o[d].containsPoint(e)&&(c+=1);return c%2===1}pointAt(e,t={}){if(this.segments.length===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const o=this.getOptions(t),d=this.length(o)*e;return this.pointAtLength(d,o)}pointAtLength(e,t={}){if(this.segments.length===0)return null;if(e===0)return this.start.clone();let o=!0;e<0&&(o=!1,e=-e);const c=this.getPrecision(t),d=this.getSubdivisions(t);let f,v=0;for(let w=0,_=this.segments.length;w<_;w+=1){const A=o?w:_-1-w,P=this.segments[A],V=d[A],J=P.length({precision:c,subdivisions:V});if(P.isVisible){if(e<=v+J)return P.pointAtLength((o?1:-1)*(e-v),{precision:c,subdivisions:V});f=P}v+=J}return f?o?f.end:f.start:this.segments[this.segments.length-1].end.clone()}pointAtT(e){const t=this.segments,o=t.length;if(o===0)return null;const c=e.segmentIndex;if(c<0)return t[0].pointAtT(0);if(c>=o)return t[o-1].pointAtT(1);const d=av(e.value,0,1);return t[c].pointAtT(d)}divideAt(e,t={}){if(this.segments.length===0)return null;const o=av(e,0,1),c=this.getOptions(t),f=this.length(c)*o;return this.divideAtLength(f,c)}divideAtLength(e,t={}){if(this.segments.length===0)return null;let o=!0;e<0&&(o=!1,e=-e);const c=this.getPrecision(t),d=this.getSubdivisions(t);let f=0,v,x,w,_,A;for(let Qe=0,bt=this.segments.length;Qe<bt;Qe+=1){const Pt=o?Qe:bt-1-Qe,Kt=this.getSegment(Pt),kn=d[Pt],wn={precision:c,subdivisions:kn},Sn=Kt.length(wn);if(Kt.isDifferentiable()&&(w=Kt,_=Pt,e<=f+Sn)){x=Pt,v=Kt.divideAtLength((o?1:-1)*(e-f),wn);break}f+=Sn}if(!w)return null;v||(x=_,A=o?1:0,v=w.divideAtT(A));const P=this.clone(),V=x;P.replaceSegment(V,v);const J=V;let ee=V+1,ge=V+2;v[0].isDifferentiable()||(P.removeSegment(J),ee-=1,ge-=1);const Se=P.getSegment(ee).start;P.insertSegment(ee,Nr.createSegment("M",Se)),ge+=1,v[1].isDifferentiable()||(P.removeSegment(ge-1),ge-=1);const Re=ge-J-1;for(let Qe=ge,bt=P.segments.length;Qe<bt;Qe+=1){const Pt=this.getSegment(Qe-Re),Kt=P.getSegment(Qe);if(Kt.type==="Z"&&!Pt.subpathStartSegment.end.equals(Kt.subpathStartSegment.end)){const kn=Nr.createSegment("L",Pt.end);P.replaceSegment(Qe,kn)}}const _e=new Nr(P.segments.slice(0,ee)),Ue=new Nr(P.segments.slice(ee));return[_e,Ue]}intersectsWithLine(e,t={}){const o=this.toPolylines(t);if(o==null)return null;let c=null;for(let d=0,f=o.length;d<f;d+=1){const v=o[d],x=e.intersect(v);x&&(c==null&&(c=[]),Array.isArray(x)?c.push(...x):c.push(x))}return c}isDifferentiable(){for(let e=0,t=this.segments.length;e<t;e+=1)if(this.segments[e].isDifferentiable())return!0;return!1}isValid(){const e=this.segments;return e.length===0||e[0].type==="M"}length(e={}){if(this.segments.length===0)return 0;const t=this.getSubdivisions(e);let o=0;for(let c=0,d=this.segments.length;c<d;c+=1){const f=this.segments[c],v=t[c];o+=f.length({subdivisions:v})}return o}lengthAtT(e,t={}){const o=this.segments.length;if(o===0)return 0;let c=e.segmentIndex;if(c<0)return 0;let d=av(e.value,0,1);c>=o&&(c=o-1,d=1);const f=this.getPrecision(t),v=this.getSubdivisions(t);let x=0;for(let A=0;A<c;A+=1){const P=this.segments[A],V=v[A];x+=P.length({precision:f,subdivisions:V})}const w=this.segments[c],_=v[c];return x+=w.lengthAtT(d,{precision:f,subdivisions:_}),x}tangentAt(e,t={}){if(this.segments.length===0)return null;const o=av(e,0,1),c=this.getOptions(t),f=this.length(c)*o;return this.tangentAtLength(f,c)}tangentAtLength(e,t={}){if(this.segments.length===0)return null;let o=!0;e<0&&(o=!1,e=-e);const c=this.getPrecision(t),d=this.getSubdivisions(t);let f,v=0;for(let x=0,w=this.segments.length;x<w;x+=1){const _=o?x:w-1-x,A=this.segments[_],P=d[_],V=A.length({precision:c,subdivisions:P});if(A.isDifferentiable()){if(e<=v+V)return A.tangentAtLength((o?1:-1)*(e-v),{precision:c,subdivisions:P});f=A}v+=V}if(f){const x=o?1:0;return f.tangentAtT(x)}return null}tangentAtT(e){const t=this.segments.length;if(t===0)return null;const o=e.segmentIndex;if(o<0)return this.segments[0].tangentAtT(0);if(o>=t)return this.segments[t-1].tangentAtT(1);const c=av(e.value,0,1);return this.segments[o].tangentAtT(c)}getPrecision(e={}){return e.precision==null?this.PRECISION:e.precision}getSubdivisions(e={}){if(e.segmentSubdivisions==null){const t=this.getPrecision(e);return this.getSegmentSubdivisions({precision:t})}return e.segmentSubdivisions}getOptions(e={}){const t=this.getPrecision(e),o=this.getSubdivisions(e);return{precision:t,segmentSubdivisions:o}}toPoints(e={}){const t=this.segments,o=t.length;if(o===0)return null;const c=this.getSubdivisions(e),d=[];let f=[];for(let v=0;v<o;v+=1){const x=t[v];if(x.isVisible){const w=c[v];w.length>0?w.forEach(_=>f.push(_.start)):f.push(x.start)}else f.length>0&&(f.push(t[v-1].end),d.push(f),f=[])}return f.length>0&&(f.push(this.end),d.push(f)),d}toPolylines(e={}){const t=this.toPoints(e);return t?t.map(o=>new _a(o)):null}scale(e,t,o){return this.segments.forEach(c=>c.scale(e,t,o)),this}rotate(e,t){return this.segments.forEach(o=>o.rotate(e,t)),this}translate(e,t){return typeof e=="number"?this.segments.forEach(o=>o.translate(e,t)):this.segments.forEach(o=>o.translate(e)),this}clone(){const e=new Nr;return this.segments.forEach(t=>e.appendSegment(t.clone())),e}equals(e){if(e==null)return!1;const t=this.segments,o=e.segments,c=t.length;if(o.length!==c)return!1;for(let d=0;d<c;d+=1){const f=t[d],v=o[d];if(f.type!==v.type||!f.equals(v))return!1}return!0}toJSON(){return this.segments.map(e=>e.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(e=>e.serialize()).join(" ")}toString(){return this.serialize()}}(function(l){l.toStringTag=`X6.Geometry.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return!!((o==null||o===l.toStringTag)&&Array.isArray(c.segments)&&typeof c.moveTo=="function"&&typeof c.lineTo=="function"&&typeof c.curveTo=="function")}l.isPath=e})(Nr||(Nr={})),function(l){function e(o){if(!o)return new l;const c=new l,d=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,f=l.normalize(o).match(d);if(f!=null)for(let v=0,x=f.length;v<x;v+=1){const w=f[v],_=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,A=w.match(_);if(A!=null){const P=A[0],V=A.slice(1).map(ee=>+ee),J=t.call(null,P,...V);c.appendSegment(J)}}return c}l.parse=e;function t(o,...c){if(o==="M")return lv.create.call(null,...c);if(o==="L")return Cl.create.call(null,...c);if(o==="C")return Ou.create.call(null,...c);if(o==="z"||o==="Z")return cv.create();throw new Error(`Invalid path segment type "${o}"`)}l.createSegment=t}(Nr||(Nr={})),function(l){l.normalize=gS,l.isValid=hM,l.drawArc=vS,l.drawPoints=_C,l.arcToCurves=Wm}(Nr||(Nr={}));class ir{constructor(e,t,o){if(!e)throw new TypeError("Invalid element to create vector");let c;if(ir.isVector(e))c=e.node;else if(typeof e=="string")if(e.toLowerCase()==="svg")c=tv();else if(e[0]==="<"){const d=tv(e);c=document.importNode(d.firstChild,!0)}else c=document.createElementNS(Sa.svg,e);else c=e;this.node=c,t&&this.setAttributes(t),o&&this.append(o)}get[Symbol.toStringTag](){return ir.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(e){this.node.id=e}transform(e,t){return e==null?eg(this.node):(eg(this.node,e,t),this)}translate(e,t=0,o={}){return e==null?M2(this.node):(M2(this.node,e,t,o),this)}rotate(e,t,o,c={}){return e==null?dv(this.node):(dv(this.node,e,t,o,c),this)}scale(e,t){return e==null?Xh(this.node):(Xh(this.node,e,t),this)}getTransformToElement(e){const t=ir.toNode(e);return El(this.node,t)}removeAttribute(e){return f2(this.node,e),this}getAttribute(e){return gC(this.node,e)}setAttribute(e,t){return Hm(this.node,e,t),this}setAttributes(e){return e0(this.node,e),this}attr(e,t){return e==null?oo(this.node):typeof e=="string"&&t===void 0?oo(this.node,e):(typeof e=="object"?oo(this.node,e):oo(this.node,e,t),this)}svg(){return this.node instanceof SVGSVGElement?this:ir.create(this.node.ownerSVGElement)}defs(){const e=this.svg()||this,t=e.node.getElementsByTagName("defs")[0];return t?ir.create(t):ir.create("defs").appendTo(e)}text(e,t={}){return w2(this.node,e,t),this}tagName(){return pC(this.node)}clone(){return ir.create(this.node.cloneNode(!0))}remove(){return gd(this.node),this}empty(){return Vm(this.node),this}append(e){return nv(this.node,ir.toNodes(e)),this}appendTo(e){return aS(this.node,ir.isVector(e)?e.node:e),this}prepend(e){return sS(this.node,ir.toNodes(e)),this}before(e){return h2(this.node,ir.toNodes(e)),this}replace(e){return this.node.parentNode&&this.node.parentNode.replaceChild(ir.toNode(e),this.node),ir.create(e)}first(){return this.node.firstChild?ir.create(this.node.firstChild):null}last(){return this.node.lastChild?ir.create(this.node.lastChild):null}get(e){const t=this.node.childNodes[e];return t?ir.create(t):null}indexOf(e){return Array.prototype.slice.call(this.node.childNodes).indexOf(ir.toNode(e))}find(e){const t=[],o=Qg(this.node,e);if(o)for(let c=0,d=o.length;c<d;c+=1)t.push(ir.create(o[c]));return t}findOne(e){const t=zm(this.node,e);return t?ir.create(t):null}findParentByClass(e,t){const o=d2(this.node,e,t);return o?ir.create(o):null}matches(e){const t=this.node,o=this.node.matches,c=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return c&&c.call(t,e)}contains(e){return Um(this.node,ir.isVector(e)?e.node:e)}wrap(e){const t=ir.create(e),o=this.node.parentNode;return o?.insertBefore(t.node,this.node),t.append(this)}parent(e){let t=this;if(t.node.parentNode==null)return null;if(t=ir.create(t.node.parentNode),e==null)return t;do if(typeof e=="string"?t.matches(e):t instanceof e)return t;while(t=ir.create(t.node.parentNode));return t}children(){const e=this.node.childNodes,t=[];for(let o=0;o<e.length;o+=1)e[o].nodeType===1&&t.push(ir.create(e[o]));return t}eachChild(e,t){const o=this.children();for(let c=0,d=o.length;c<d;c+=1)e.call(o[c],o[c],c,o),t&&o[c].eachChild(e,t);return this}index(){return Bm(this.node)}hasClass(e){return qf(this.node,e)}addClass(e){return io(this.node,e),this}removeClass(e){return tu(this.node,e),this}toggleClass(e,t){return c2(this.node,e,t),this}toLocalPoint(e,t){return TC(this.node,e,t)}toGeometryShape(){return $h(this.node)}translateCenterToPoint(e){const o=this.getBBox({target:this.svg()}).getCenter();return this.translate(e.x-o.x,e.y-o.y),this}translateAndAutoOrient(e,t,o){return Qm(this.node,e,t,o),this}animate(e){return DS(this.node,e)}animateTransform(e){return T2(this.node,e)}animateAlongPath(e,t){return MC(this.node,e,t)}normalizePath(){return this.tagName()==="path"&&this.attr("d",Nr.normalize(this.attr("d"))),this}bbox(e,t){return CM(this.node,e,t)}getBBox(e={}){return rc(this.node,{recursive:e.recursive,target:e.target?ir.toNode(e.target):null})}sample(e=1){return this.node instanceof SVGPathElement?S2(this.node,e):[]}toPath(){return ir.create(_2(this.node))}toPathData(){return AS(this.node)}}(function(l){l.toStringTag=`X6.${l.name}`;function e(f){if(f==null)return!1;if(f instanceof l)return!0;const v=f[Symbol.toStringTag],x=f;return(v==null||v===l.toStringTag)&&x.node instanceof SVGElement&&typeof x.animate=="function"&&typeof x.sample=="function"&&typeof x.normalizePath=="function"&&typeof x.toPath=="function"}l.isVector=e;function t(f,v,x){return new l(f,v,x)}l.create=t;function o(f){if(f[0]==="<"){const v=tv(f),x=[];for(let w=0,_=v.childNodes.length;w<_;w+=1){const A=v.childNodes[w];x.push(t(document.importNode(A,!0)))}return x}return[t(f)]}l.createVectors=o;function c(f){return e(f)?f.node:f}l.toNode=c;function d(f){return Array.isArray(f)?f.map(v=>c(v)):[c(f)]}l.toNodes=d})(ir||(ir={}));function mS(l,e){const t=ir.create(e),o=ir.create("textPath"),c=l.d;if(c&&l["xlink:href"]===void 0){const d=ir.create("path").attr("d",c).appendTo(t.defs());o.attr("xlink:href",`#${d.id}`)}return typeof l=="object"&&o.attr(l),o.node}function yS(l,e,t){const o=t.eol,c=t.baseSize,d=t.lineHeight;let f=0,v;const x={},w=e.length-1;for(let _=0;_<=w;_+=1){let A=e[_],P=null;if(typeof A=="object"){const V=A.attrs,J=ir.create("tspan",V);v=J.node;let ee=A.t;o&&_===w&&(ee+=o),v.textContent=ee;const ge=V.class;ge&&J.addClass(ge),t.includeAnnotationIndices&&J.attr("annotations",A.annotations.join(",")),P=parseFloat(V["font-size"]),P===void 0&&(P=c),P&&P>f&&(f=P)}else o&&_===w&&(A+=o),v=document.createTextNode(A||" "),c&&c>f&&(f=c);l.appendChild(v)}return f&&(x.maxFontSize=f),d?x.lineHeight=d:f&&(x.lineHeight=f*1.2),x}const bS=/em$/;function C2(l,e){const t=parseFloat(l);return bS.test(l)?t*e:t}function pM(l,e,t,o){if(!Array.isArray(e))return 0;const c=e.length;if(!c)return 0;let d=e[0];const f=C2(d.maxFontSize,t)||t;let v=0;const x=C2(o,t);for(let A=1;A<c;A+=1)d=e[A],v+=C2(d.lineHeight,t)||x;const w=C2(d.maxFontSize,t)||t;let _;switch(l){case"middle":_=f/2-.15*w-v/2;break;case"bottom":_=-(.25*w)-v;break;default:case"top":_=.8*f;break}return _}function w2(l,e,t={}){e=wP(e);const o=t.eol;let c=t.textPath;const d=t.textVerticalAnchor,f=d==="middle"||d==="bottom"||d==="top";let v=t.x;v===void 0&&(v=l.getAttribute("x")||0);const x=t.includeAnnotationIndices;let w=t.annotations;w&&!Array.isArray(w)&&(w=[w]);const _=t.lineHeight,A=_==="auto",P=A?"1.5em":_||"1em";Vm(l),oo(l,{"xml:space":"preserve",display:e||t.displayEmpty?null:"none"});const V=oo(l,"font-size");let J=parseFloat(V);J||(J=16,(f||w)&&!V&&oo(l,"font-size",`${J}`));let ee;c?(typeof c=="string"&&(c={d:c}),ee=mS(c,l)):ee=document.createDocumentFragment();let ge,Se=0,Re;const _e=e.split(`
`),Ue=[],Qe=_e.length-1;for(let Pt=0;Pt<=Qe;Pt+=1){ge=P;let Kt="v-line";const kn=Qc("tspan");let wn,Sn=_e[Pt];if(Sn)if(w){const Vn=tc(Sn,w,{offset:-Se,includeAnnotationIndices:x});wn=yS(kn,Vn,{eol:Pt!==Qe&&o,baseSize:J,lineHeight:A?null:P,includeAnnotationIndices:x});const Ur=wn.lineHeight;Ur&&A&&Pt!==0&&(ge=Ur),Pt===0&&(Re=wn.maxFontSize*.8)}else o&&Pt!==Qe&&(Sn+=o),kn.textContent=Sn;else{kn.textContent="-",Kt+=" v-empty-line";const Vn=kn.style;Vn.fillOpacity=0,Vn.strokeOpacity=0,w&&(wn={})}wn&&Ue.push(wn),Pt>0&&kn.setAttribute("dy",ge),(Pt>0||c)&&kn.setAttribute("x",v),kn.className.baseVal=Kt,ee.appendChild(kn),Se+=Sn.length+1}if(f)if(w)ge=pM(d,Ue,J,P);else if(d==="top")ge="0.8em";else{let Pt;switch(Qe>0?(Pt=parseFloat(P)||1,Pt*=Qe,bS.test(P)||(Pt/=J)):Pt=0,d){case"middle":ge=`${.3-Pt/2}em`;break;case"bottom":ge=`${-Pt-.3}em`;break;default:break}}else d===0?ge="0em":d?ge=d:(ge=0,l.getAttribute("y")==null&&l.setAttribute("y",`${Re||"0.8em"}`));ee.firstChild.setAttribute("dy",ge),l.appendChild(ee)}function gM(l,e,t,o){const c=[],d=[];if(e!=null){const f=l.split(e);if(c.push(...f),typeof e=="string")for(let v=0,x=f.length-1;v<x;v+=1)d.push(e);else{const v=l.match(new RegExp(e,"g"));for(let x=0,w=f.length-1;x<w;x+=1)d.push(v?v[x]:"")}}else{let f="";for(let v=0,x=l.length;v<x;v+=1){const w=l[v];w===" "?(c.push(f),d.push(" "),f=""):w.match(/[^\x00-\xff]/)?(f.length&&(c.push(f),d.push("")),c.push(w),d.push(""),f=""):f+=w}f.length&&c.push(f)}for(let f=0;f<c.length;f+=1){const v=c[f];if(v.indexOf(t)>=0&&v.length>1){const x=v.split(t);for(let A=0,P=x.length-1;A<P;A+=1)x.splice(2*A+1,0,t);const w=x.filter(A=>A!=="");c.splice(f,1,...w);const _=w.map(()=>"");_.pop(),d.splice(f,0,..._)}}for(let f=0;f<c.length;f+=1){const v=c[f],x=v.search(o);x>0&&x<v.length-1&&(c.splice(f,1,v.substring(0,x+1),v.substring(x+1)),d.splice(f,0,""))}return{words:c,separators:d}}function E2(l,e,t={},o={}){const c=e.width,d=e.height,f=o.svgDocument||Qc("svg"),v=Qc("text"),x=Qc("tspan"),w=document.createTextNode("");oo(v,t),v.appendChild(x),v.style.opacity="0",v.style.display="block",x.style.display="block",x.appendChild(w),f.appendChild(v);const _=f.parentNode==null;_&&document.body.appendChild(f);const A=o.eol||`
`,P=o.separator||" ",V=o.hyphen?new RegExp(o.hyphen):/[^\w\d]/,J=o.breakWord!==!1,ee=[],ge={};let Se=[],Re,_e,Ue;const{words:Qe,separators:bt}=gM(l,o.separator,A,V);for(let Pt=0,Kt=0,kn=Qe.length;Pt<kn;Pt+=1){const wn=Qe[Pt];if(!!wn){if(wn===A){ee[Kt]=!0,Kt+=1,Se[Kt]="";continue}if(Se[Kt]!=null?(Ue=bt[Pt-1]||"",w.data=`${Se[Kt]}${Ue}${wn}`):w.data=wn,x.getComputedTextLength()<=c)Se[Kt]=w.data,ge[Kt]=bt[Pt],Re&&(ee[Kt]=!0,Kt+=1,Re=0);else{if(J){if(!Se[Kt]||Re){const Sn=!!Re,Vn=wn.length===1;if(Re=wn.length-1,Sn||Vn){if(Vn){if(!Se[Kt]){Se=[];break}Qe.splice(Pt,2,wn+Qe[Pt+1]),bt.splice(Pt+1,1),ee[Kt]=!0,Kt+=1,kn-=1,Pt-=1;continue}Qe[Pt]=wn.substring(0,Re),Qe[Pt+1]=wn.substring(Re)+Qe[Pt+1]}else Qe.splice(Pt,1,wn.substring(0,Re),wn.substring(Re)),bt.splice(Pt,0,""),kn+=1,Kt&&!ee[Kt-1]&&(Kt-=1);Pt-=1;continue}}else if(!Se[Kt]){Se[Kt]=wn,ee[Kt]=!0,Kt+=1;continue}Kt+=1,Pt-=1}if(d!=null){if(_e==null){let Sn;t.lineHeight==="auto"?Sn={value:1.5,unit:"em"}:Sn=$E(t.lineHeight,["em"])||{value:1,unit:"em"},_e=Sn.value,Sn.unit==="em"&&(et.IS_FIREFOX?_e*=x.getBBox().height:_e*=v.getBBox().height)}if(_e*Se.length>d){const Sn=Math.floor(d/_e)-1,Vn=Se[Sn],Ur=Se[Sn+1];if(Se.splice(Sn+1),Vn==null)break;let Wr=o.ellipsis;if(!Wr)break;typeof Wr!="string"&&(Wr="\u2026");let $t=Vn;Ur&&J&&($t+=Ue+Ur);let On=$t.length,kr,Vo;do{if(Vo=$t[On],kr=$t.substring(0,On),Vo?Vo.match(P)&&(kr+=Vo):kr+=ge[Sn],kr+=Wr,w.data=kr,x.getComputedTextLength()<=c){Se[Sn]=kr;break}On-=1}while(On>=0);break}}}}return gd(_?f:v),Se.join(A)}const Xm=.551784;function bc(l,e,t=NaN){const o=l.getAttribute(e);if(o==null)return t;const c=parseFloat(o);return Number.isNaN(c)?t:c}function S2(l,e=1){const t=l.getTotalLength(),o=[];let c=0,d;for(;c<t;)d=l.getPointAtLength(c),o.push({distance:c,x:d.x,y:d.y}),c+=e;return o}function uv(l){return["M",bc(l,"x1"),bc(l,"y1"),"L",bc(l,"x2"),bc(l,"y2")].join(" ")}function xS(l){const e=Zm(l);return e.length===0?null:`${wS(e)} Z`}function CS(l){const e=Zm(l);return e.length===0?null:wS(e)}function wS(l){return`M ${l.map(t=>`${t.x} ${t.y}`).join(" L")}`}function Zm(l){const e=[],t=l.points;if(t)for(let o=0,c=t.numberOfItems;o<c;o+=1)e.push(t.getItem(o));return e}function ES(l){const e=bc(l,"cx",0),t=bc(l,"cy",0),o=bc(l,"r"),c=o*Xm;return["M",e,t-o,"C",e+c,t-o,e+o,t-c,e+o,t,"C",e+o,t+c,e+c,t+o,e,t+o,"C",e-c,t+o,e-o,t+c,e-o,t,"C",e-o,t-c,e-c,t-o,e,t-o,"Z"].join(" ")}function SS(l){const e=bc(l,"cx",0),t=bc(l,"cy",0),o=bc(l,"rx"),c=bc(l,"ry")||o,d=o*Xm,f=c*Xm;return["M",e,t-c,"C",e+d,t-c,e+o,t-f,e+o,t,"C",e+o,t+f,e+d,t+c,e,t+c,"C",e-d,t+c,e-o,t+f,e-o,t,"C",e-o,t-f,e-d,t-c,e,t-c,"Z"].join(" ")}function _S(l){return vd({x:bc(l,"x",0),y:bc(l,"y",0),width:bc(l,"width",0),height:bc(l,"height",0),rx:bc(l,"rx",0),ry:bc(l,"ry",0)})}function vd(l){let e;const t=l.x,o=l.y,c=l.width,d=l.height,f=Math.min(l.rx||l["top-rx"]||0,c/2),v=Math.min(l.rx||l["bottom-rx"]||0,c/2),x=Math.min(l.ry||l["top-ry"]||0,d/2),w=Math.min(l.ry||l["bottom-ry"]||0,d/2);return f||v||x||w?e=["M",t,o+x,"v",d-x-w,"a",v,w,0,0,0,v,w,"h",c-2*v,"a",v,w,0,0,0,v,-w,"v",-(d-w-x),"a",f,x,0,0,0,-f,-x,"h",-(c-2*f),"a",f,x,0,0,0,-f,x,"Z"]:e=["M",t,o,"H",t+c,"V",o+d,"H",t,"V",o,"Z"],e.join(" ")}function _2(l){const e=Qc("path");oo(e,oo(l));const t=AS(l);return t&&e.setAttribute("d",t),e}function AS(l){const e=l.tagName.toLowerCase();switch(e){case"path":return l.getAttribute("d");case"line":return uv(l);case"polygon":return xS(l);case"polyline":return CS(l);case"ellipse":return SS(l);case"circle":return ES(l);case"rect":return _S(l);default:break}throw new Error(`"${e}" cannot be converted to svg path element.`)}function vM(l,e,t,o){const c=2*Math.PI-1e-6,d=l,f=e;let v=t,x=o;if(x<v){const ee=v;v=x,x=ee}const w=x-v,_=w<Math.PI?"0":"1",A=Math.cos(v),P=Math.sin(v),V=Math.cos(x),J=Math.sin(x);return w>=c?d?`M0,${f}A${f},${f} 0 1,1 0,${-f}A${f},${f} 0 1,1 0,${f}M0,${d}A${d},${d} 0 1,0 0,${-d}A${d},${d} 0 1,0 0,${d}Z`:`M0,${f}A${f},${f} 0 1,1 0,${-f}A${f},${f} 0 1,1 0,${f}Z`:d?`M${f*A},${f*P}A${f},${f} 0 ${_},1 ${f*V},${f*J}L${d*V},${d*J}A${d},${d} 0 ${_},0 ${d*A},${d*P}Z`:`M${f*A},${f*P}A${f},${f} 0 ${_},1 ${f*V},${f*J}L0,0Z`}const Ym=Qc("svg"),AC=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,wl=/[ ,]+/,AP=/^(\w+)\((.*)\)/;function TS(l,e){const t=Ym.createSVGPoint();return t.x=l,t.y=e,t}function nc(l){const e=Ym.createSVGMatrix();if(l!=null){const t=l,o=e;for(const c in t)o[c]=t[c]}return e}function Km(l){return l!=null?(l instanceof DOMMatrix||(l=nc(l)),Ym.createSVGTransformFromMatrix(l)):Ym.createSVGTransform()}function qm(l){let e=nc();const t=l!=null&&l.match(AC);if(!t)return e;for(let o=0,c=t.length;o<c;o+=1){const f=t[o].match(AP);if(f){let v,x,w,_,A,P=nc();const V=f[2].split(wl);switch(f[1].toLowerCase()){case"scale":v=parseFloat(V[0]),x=V[1]===void 0?v:parseFloat(V[1]),P=P.scaleNonUniform(v,x);break;case"translate":w=parseFloat(V[0]),_=parseFloat(V[1]),P=P.translate(w,_);break;case"rotate":A=parseFloat(V[0]),w=parseFloat(V[1])||0,_=parseFloat(V[2])||0,w!==0||_!==0?P=P.translate(w,_).rotate(A).translate(-w,-_):P=P.rotate(A);break;case"skewx":A=parseFloat(V[0]),P=P.skewX(A);break;case"skewy":A=parseFloat(V[0]),P=P.skewY(A);break;case"matrix":P.a=parseFloat(V[0]),P.b=parseFloat(V[1]),P.c=parseFloat(V[2]),P.d=parseFloat(V[3]),P.e=parseFloat(V[4]),P.f=parseFloat(V[5]);break;default:continue}e=e.multiply(P)}}return e}function r0(l){const e=l||{},t=e.a!=null?e.a:1,o=e.b!=null?e.b:0,c=e.c!=null?e.c:0,d=e.d!=null?e.d:1,f=e.e!=null?e.e:0,v=e.f!=null?e.f:0;return`matrix(${t},${o},${c},${d},${f},${v})`}function A2(l){let e,t,o;if(l){const d=wl;if(l.trim().indexOf("matrix")>=0){const f=qm(l),v=OS(f);e=[v.translateX,v.translateY],t=[v.rotation],o=[v.scaleX,v.scaleY];const x=[];(e[0]!==0||e[1]!==0)&&x.push(`translate(${e.join(",")})`),(o[0]!==1||o[1]!==1)&&x.push(`scale(${o.join(",")})`),t[0]!==0&&x.push(`rotate(${t[0]})`),l=x.join(" ")}else{const f=l.match(/translate\((.*?)\)/);f&&(e=f[1].split(d));const v=l.match(/rotate\((.*?)\)/);v&&(t=v[1].split(d));const x=l.match(/scale\((.*?)\)/);x&&(o=x[1].split(d))}}const c=o&&o[0]?parseFloat(o[0]):1;return{raw:l||"",translation:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotation:{angle:t&&t[0]?parseInt(t[0],10):0,cx:t&&t[1]?parseInt(t[1],10):void 0,cy:t&&t[2]?parseInt(t[2],10):void 0},scale:{sx:c,sy:o&&o[1]?parseFloat(o[1]):c}}}function MS(l,e){const t=e.x*l.a+e.y*l.c+0,o=e.x*l.b+e.y*l.d+0;return{x:t,y:o}}function OS(l){const e=MS(l,{x:0,y:1}),t=MS(l,{x:1,y:0}),o=180/Math.PI*Math.atan2(e.y,e.x)-90,c=180/Math.PI*Math.atan2(t.y,t.x);return{skewX:o,skewY:c,translateX:l.e,translateY:l.f,scaleX:Math.sqrt(l.a*l.a+l.b*l.b),scaleY:Math.sqrt(l.c*l.c+l.d*l.d),rotation:o}}function mM(l){let e,t,o,c;return l?(e=l.a==null?1:l.a,c=l.d==null?1:l.d,t=l.b,o=l.c):e=c=1,{sx:t?Math.sqrt(e*e+t*t):e,sy:o?Math.sqrt(o*o+c*c):c}}function yM(l){let e={x:0,y:1};return l&&(e=MS(l,e)),{angle:ji.normalize(ji.toDeg(Math.atan2(e.y,e.x))-90)}}function bM(l){return{tx:l&&l.e||0,ty:l&&l.f||0}}function Hh(l,e){const t=TS(l.x,l.y).matrixTransform(e);return new Ve(t.x,t.y)}function xM(l,e){return new rr(Hh(l.start,e),Hh(l.end,e))}function PS(l,e){let t=l instanceof _a?l.points:l;return Array.isArray(t)||(t=[]),new _a(t.map(o=>Hh(o,e)))}function nu(l,e){const t=Ym.createSVGPoint();t.x=l.x,t.y=l.y;const o=t.matrixTransform(e);t.x=l.x+l.width,t.y=l.y;const c=t.matrixTransform(e);t.x=l.x+l.width,t.y=l.y+l.height;const d=t.matrixTransform(e);t.x=l.x,t.y=l.y+l.height;const f=t.matrixTransform(e),v=Math.min(o.x,c.x,d.x,f.x),x=Math.max(o.x,c.x,d.x,f.x),w=Math.min(o.y,c.y,d.y,f.y),_=Math.max(o.y,c.y,d.y,f.y);return new Ln(v,w,x-v,_-w)}var TP=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};function CM(l,e,t){let o;const c=l.ownerSVGElement;if(!c)return new Ln(0,0,0,0);try{o=l.getBBox()}catch{o={x:l.clientLeft,y:l.clientTop,width:l.clientWidth,height:l.clientHeight}}if(e)return Ln.create(o);const d=El(l,t||c);return nu(o,d)}function rc(l,e={}){let t;if(!l.ownerSVGElement||!Jp(l)){if(jm(l)){const{left:f,top:v,width:x,height:w}=OC(l);return new Ln(f,v,x,w)}return new Ln(0,0,0,0)}let c=e.target;if(!e.recursive){try{t=l.getBBox()}catch{t={x:l.clientLeft,y:l.clientTop,width:l.clientWidth,height:l.clientHeight}}if(!c)return Ln.create(t);const f=El(l,c);return nu(t,f)}{const f=l.childNodes,v=f.length;if(v===0)return rc(l,{target:c});c||(c=l);for(let x=0;x<v;x+=1){const w=f[x];let _;w.childNodes.length===0?_=rc(w,{target:c}):_=rc(w,{target:c,recursive:!0}),t?t=t.union(_):t=_}return t}}function MP(l){let e=l,t=e?e.tagName.toLowerCase():"";for(;t==="g";)e=e.firstElementChild,t=e?e.tagName.toLowerCase():"";const o=f=>{const v=e.getAttribute(f),x=v?parseFloat(v):0;return Number.isNaN(x)?0:x};let c,d;switch(t){case"rect":d=new Ln(o("x"),o("y"),o("width"),o("height"));break;case"circle":c=o("r"),d=new Ln(o("cx")-c,o("cy")-c,2*c,2*c);break;default:break}return d}function OP(l,e){let t=nc();if(Jp(e)&&Jp(l)){let o=l;const c=[];for(;o&&o!==e;){const d=o.getAttribute("transform")||null,f=qm(d);c.push(f),o=o.parentNode}c.reverse().forEach(d=>{t=t.multiply(d)})}return t}function El(l,e){if(Jp(e)&&Jp(l)){const t=e.getScreenCTM(),o=l.getScreenCTM();if(t&&o)return t.inverse().multiply(o)}return nc()}function TC(l,e,t){const o=l instanceof SVGSVGElement?l:l.ownerSVGElement,c=o.createSVGPoint();c.x=e,c.y=t;try{const d=o.getScreenCTM(),f=c.matrixTransform(d.inverse()),v=El(l,o).inverse();return f.matrixTransform(v)}catch{return c}}function $h(l){const e=t=>{const o=l.getAttribute(t),c=o?parseFloat(o):0;return Number.isNaN(c)?0:c};switch(l instanceof SVGElement&&l.nodeName.toLowerCase()){case"rect":return new Ln(e("x"),e("y"),e("width"),e("height"));case"circle":return new ah(e("cx"),e("cy"),e("r"),e("r"));case"ellipse":return new ah(e("cx"),e("cy"),e("rx"),e("ry"));case"polyline":{const t=Zm(l);return new _a(t)}case"polygon":{const t=Zm(l);return t.length>1&&t.push(t[0]),new _a(t)}case"path":{let t=l.getAttribute("d");return Nr.isValid(t)||(t=Nr.normalize(t)),Nr.parse(t)}case"line":return new rr(e("x1"),e("y1"),e("x2"),e("y2"));default:break}return rc(l)}function Jm(l,e,t){const o=l instanceof SVGSVGElement?l:l.ownerSVGElement;t=t||o;const c=rc(t),d=c.getCenter();if(!c.intersectsWithLineFromCenterToPoint(e))return null;let f=null;const v=l.tagName.toLowerCase();if(v==="rect"){const x=new Ln(parseFloat(l.getAttribute("x")||"0"),parseFloat(l.getAttribute("y")||"0"),parseFloat(l.getAttribute("width")||"0"),parseFloat(l.getAttribute("height")||"0")),w=El(l,t),_=OS(w),A=o.createSVGTransform();A.setRotate(-_.rotation,d.x,d.y);const P=nu(x,A.matrix.multiply(w));f=Ln.create(P).intersectsWithLineFromCenterToPoint(e,_.rotation)}else if(v==="path"||v==="polygon"||v==="polyline"||v==="circle"||v==="ellipse"){const x=v==="path"?l:_2(l),w=S2(x);let _=1/0,A=[];for(let P=0,V=w.length;P<V;P+=1){const J=w[P];let ee=TS(J.x,J.y);ee=ee.matrixTransform(El(l,t));const ge=Ve.create(ee),Se=ge.distance(d),Re=ge.distance(e)*1.1,_e=Se+Re;_e<_?(_=_e,A=[{sample:J,refDistance:Re}]):_e<_+1&&A.push({sample:J,refDistance:Re})}A.sort((P,V)=>P.refDistance-V.refDistance),A[0]&&(f=Ve.create(A[0].sample))}return f}function DS(l,e){return Wh(l,e,"animate")}function T2(l,e){return Wh(l,e,"animateTransform")}function Wh(l,e,t){const o=Qc(t);l.appendChild(o);try{return Qp(o,e)}catch{}return()=>{}}function Qp(l,e){const{start:t,complete:o,repeat:c}=e,d=TP(e,["start","complete","repeat"]);oo(l,d),t&&l.addEventListener("beginEvent",t),o&&l.addEventListener("endEvent",o),c&&l.addEventListener("repeatEvent",c);const f=l;return f.beginElement(),()=>f.endElement()}function MC(l,e,t){const o=Gm(t),c=Qc("animateMotion"),d=Qc("mpath");oo(d,{"xlink:href":`#${o}`}),c.appendChild(d),l.appendChild(c);try{return Qp(c,e)}catch{if(document.documentElement.getAttribute("smiling")==="fake"){const v=c;v.animators=[];const x=window,w=v.getAttribute("id");w&&(x.id2anim[w]=v);const _=x.getTargets(v);for(let A=0,P=_.length;A<P;A+=1){const V=_[A],J=new x.Animator(v,V,A);x.animators.push(J),v.animators[A]=J,J.register()}}}return()=>{}}function OC(l){let e=0,t=0,o=0,c=0;if(l){let d=l;for(;d;)e+=d.offsetLeft,t+=d.offsetTop,d=d.offsetParent,d&&(e+=parseInt(mC(d,"borderLeft"),10),t+=parseInt(mC(d,"borderTop"),10));o=l.offsetWidth,c=l.offsetHeight}return{left:e,top:t,width:o,height:c}}function eg(l,e,t={}){if(e==null)return qm(oo(l,"transform"));if(t.absolute){l.setAttribute("transform",r0(e));return}const o=l.transform,c=Km(e);o.baseVal.appendItem(c)}function M2(l,e,t=0,o={}){let c=oo(l,"transform");const d=A2(c);if(e==null)return d.translation;c=d.raw,c=c.replace(/translate\([^)]*\)/g,"").trim();const f=o.absolute?e:d.translation.tx+e,v=o.absolute?t:d.translation.ty+t,x=`translate(${f},${v})`;l.setAttribute("transform",`${x} ${c}`.trim())}function dv(l,e,t,o,c={}){let d=oo(l,"transform");const f=A2(d);if(e==null)return f.rotation;d=f.raw,d=d.replace(/rotate\([^)]*\)/g,"").trim(),e%=360;const v=c.absolute?e:f.rotation.angle+e,x=t!=null&&o!=null?`,${t},${o}`:"",w=`rotate(${v}${x})`;l.setAttribute("transform",`${d} ${w}`.trim())}function Xh(l,e,t){let o=oo(l,"transform");const c=A2(o);if(e==null)return c.scale;t=t??e,o=c.raw,o=o.replace(/scale\([^)]*\)/g,"").trim();const d=`scale(${e},${t})`;l.setAttribute("transform",`${o} ${d}`.trim())}function Qm(l,e,t,o){const c=Ve.create(e),d=Ve.create(t);o||(o=l instanceof SVGSVGElement?l:l.ownerSVGElement);const f=Xh(l);l.setAttribute("transform","");const v=rc(l,{target:o}).scale(f.sx,f.sy),x=Km();x.setTranslate(-v.x-v.width/2,-v.y-v.height/2);const w=Km(),_=c.angleBetween(d,c.clone().translate(1,0));_&&w.setRotate(_,0,0);const A=Km(),P=c.clone().move(d,v.width/2);A.setTranslate(2*c.x-P.x,2*c.y-P.y);const V=El(l,o),J=Km();J.setMatrix(A.matrix.multiply(w.matrix.multiply(x.matrix.multiply(V.scale(f.sx,f.sy))))),l.setAttribute("transform",r0(J.matrix))}class O2{constructor(e,t,o){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=et.isEventSupported("wheel")?"wheel":"mousewheel",this.target=e,this.onWheelCallback=t,this.onWheelGuard=o,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){et.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.onWheel,{passive:!1}):G()(this.target).on("mousewheel",this.onWheel)}disable(){et.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.onWheel):G()(this.target).off("mousewheel")}onWheel(e){if(this.onWheelGuard!=null&&!this.onWheelGuard(e))return;this.deltaX+=e.deltaX,this.deltaY+=e.deltaY,e.preventDefault();let t;(this.deltaX!==0||this.deltaY!==0)&&(e.stopPropagation(),t=!0),t===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(e)}))}didWheel(e){this.animationFrameId=0,this.onWheelCallback(e,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}const Uo=ir.isVector,P2=ir.create,i0=ir.createVectors;function Zh(l,e=60){let t=null;return(...o)=>{t&&clearTimeout(t),t=window.setTimeout(()=>{l.apply(this,o)},e)}}function tg(l){let e=null,t=[];const o=()=>{if(getComputedStyle(l).position==="static"){const w=l.style;w.position="relative"}const x=document.createElement("object");return x.onload=()=>{x.contentDocument.defaultView.addEventListener("resize",c),c()},x.style.display="block",x.style.position="absolute",x.style.top="0",x.style.left="0",x.style.height="100%",x.style.width="100%",x.style.overflow="hidden",x.style.pointerEvents="none",x.style.zIndex="-1",x.style.opacity="0",x.setAttribute("tabindex","-1"),x.type="text/html",l.appendChild(x),x.data="about:blank",x},c=Zh(()=>{t.forEach(x=>x(l))}),d=x=>{e||(e=o()),t.indexOf(x)===-1&&t.push(x)},f=()=>{e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",c),e.parentNode.removeChild(e),e=null,t=[])};return{element:l,bind:d,destroy:f,unbind:x=>{const w=t.indexOf(x);w!==-1&&t.splice(w,1),t.length===0&&e&&f()}}}function NS(l){let e=null,t=[];const o=Zh(()=>{t.forEach(x=>{x(l)})}),c=()=>{const x=new ResizeObserver(o);return x.observe(l),o(),x},d=x=>{e||(e=c()),t.indexOf(x)===-1&&t.push(x)},f=()=>{e&&(e.disconnect(),t=[],e=null)};return{element:l,bind:d,destroy:f,unbind:x=>{const w=t.indexOf(x);w!==-1&&t.splice(w,1),t.length===0&&e&&f()}}}const IS=typeof ResizeObserver<"u"?NS:tg;var ey;(function(l){const e=new WeakMap;function t(c){let d=e.get(c);return d||(d=IS(c),e.set(c,d),d)}function o(c){c.destroy(),e.delete(c.element)}l.bind=(c,d)=>{const f=t(c);return f.bind(d),()=>f.unbind(d)},l.clear=c=>{const d=t(c);o(d)}})(ey||(ey={}));var ty;(function(l){const e=[],t=16.666666666666668,o=[];let c=0;const d=()=>performance.now(),f=_=>_[0],v=_=>o.push(_)===1&&x(),x=(()=>{const _=()=>o.splice(0,o.length).forEach(A=>A());if(typeof MessageChannel<"u"){const{port1:A,port2:P}=new MessageChannel;return A.onmessage=_,()=>P.postMessage(null)}return()=>setTimeout(_)})(),w=()=>{c=d()+t;let _=f(e);for(;_&&!l.shouldYield();){const{callback:A,data:P}=_;_.callback=null;const V=A&&A(P);V?_.callback=V:e.shift(),_=f(e)}_&&v(w)};l.scheduleTask=(_,A)=>{const P={callback:_,data:A};e.push(P),v(w)},l.shouldYield=()=>{var _,A;return((A=(_=navigator)===null||_===void 0?void 0:_.scheduling)===null||A===void 0?void 0:A.isInputPending())||d()>=c}})(ty||(ty={}));class Ss{constructor(e){this.options=Object.assign({},e),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(e,t,o=!1){if(typeof e=="object"){Object.keys(e).forEach(f=>{this.register(f,e[f],t)});return}this.exist(e)&&!o&&!et.isApplyingHMR()&&this.onDuplicated(e);const c=this.options.process,d=c?er(c,this,e,t):t;return this.data[e]=d,d}unregister(e){const t=e?this.data[e]:null;return delete this.data[e],t}get(e){return e?this.data[e]:null}exist(e){return e?this.data[e]!=null:!1}onDuplicated(e){try{throw this.options.onConflict&&er(this.options.onConflict,this,e),new Error(`${fd(this.options.type)} with name '${e}' already registered.`)}catch(t){throw t}}onNotFound(e,t){throw new Error(this.getSpellingSuggestion(e,t))}getSpellingSuggestion(e,t){const o=this.getSpellingSuggestionForName(e),c=t?`${t} ${ZT(this.options.type)}`:this.options.type;return`${fd(c)} with name '${e}' does not exist.${o?` Did you mean '${o}'?`:""}`}getSpellingSuggestionForName(e){return KT(e,Object.keys(this.data),t=>t)}}(function(l){function e(t){return new l(t)}l.create=e})(Ss||(Ss={}));const RS={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},ny={},PC={position:D2("x","width","origin")},Jf={position:D2("y","height","origin")},Un={position:D2("x","width","corner")},kS={position:D2("y","height","corner")},LS={set:ng("width","width")},GS={set:ng("height","height")},wM={set:ng("rx","width")},EM={set:ng("ry","height")},FS={set:(l=>{const e=ng(l,"width"),t=ng(l,"height");return function(o,c){const d=c.refBBox,f=d.height>d.width?e:t;return er(f,this,o,c)}})("r")},SM={set(l,{refBBox:e}){let t=parseFloat(l);const o=pd(l);o&&(t/=100);const c=Math.sqrt(e.height*e.height+e.width*e.width);let d;return Number.isFinite(t)&&(o||t>=0&&t<=1?d=t*c:d=Math.max(t+c,0)),{r:d}}},_M={set:ng("cx","width")},AM={set:ng("cy","height")},BS={set:VS({resetOffset:!0})},TM={set:VS({resetOffset:!1})},zS={set:jS({resetOffset:!0})},MM={set:jS({resetOffset:!1})},OM=FS,PM=BS,DM=zS,NM=PC,IM=Jf,RM=LS,kM=GS;function D2(l,e,t){return(o,{refBBox:c})=>{if(o==null)return null;let d=parseFloat(o);const f=pd(o);f&&(d/=100);let v;if(Number.isFinite(d)){const w=c[t];f||d>0&&d<1?v=w[l]+c[e]*d:v=w[l]+d}const x=new Ve;return x[l]=v||0,x}}function ng(l,e){return function(t,{refBBox:o}){let c=parseFloat(t);const d=pd(t);d&&(c/=100);const f={};if(Number.isFinite(c)){const v=d||c>=0&&c<=1?c*o[e]:Math.max(c+o[e],0);f[l]=v}return f}}function US(l,e){const t="x6-shape",o=e&&e.resetOffset;return function(c,{view:d,elem:f,refBBox:v}){const x=d.$(f);let w=x.data(t);if(!w||w.value!==c){const Se=l(c);w={value:c,shape:Se,shapeBBox:Se.bbox()},x.data(t,w)}const _=w.shape.clone(),A=w.shapeBBox.clone(),P=A.getOrigin(),V=v.getOrigin();A.x=V.x,A.y=V.y;const J=v.getMaxScaleToFit(A,V),ee=A.width===0||v.width===0?1:J.sx,ge=A.height===0||v.height===0?1:J.sy;return _.scale(ee,ge,P),o&&_.translate(-P.x,-P.y),_}}function VS(l){function e(o){return Nr.parse(o)}const t=US(e,l);return(o,c)=>({d:t(o,c).serialize()})}function jS(l){const e=US(t=>new _a(t),l);return(t,o)=>({points:e(t,o).serialize()})}const LM={qualify:Do,set(l,{view:e}){return`url(#${e.graph.defineGradient(l)})`}},GM={qualify:Do,set(l,{view:e}){const t=e.cell,o=Object.assign({},l);if(t.isEdge()&&o.type==="linearGradient"){const c=e,d=c.sourcePoint,f=c.targetPoint;o.id=`gradient-${o.type}-${t.id}`,o.attrs=Object.assign(Object.assign({},o.attrs),{x1:d.x,y1:d.y,x2:f.x,y2:f.y,gradientUnits:"userSpaceOnUse"}),e.graph.defs.remove(o.id)}return`url(#${e.graph.defineGradient(o)})`}},HS={qualify(l,{attrs:e}){return e.textWrap==null||!Do(e.textWrap)},set(l,{view:e,elem:t,attrs:o}){const c="x6-text",d=e.$(t),f=d.data(c),v=A=>{try{return JSON.parse(A)}catch{return A}},x={x:o.x,eol:o.eol,annotations:v(o.annotations),textPath:v(o["text-path"]||o.textPath),textVerticalAnchor:o["text-vertical-anchor"]||o.textVerticalAnchor,displayEmpty:(o["display-empty"]||o.displayEmpty)==="true",lineHeight:o["line-height"]||o.lineHeight},w=o["font-size"]||o.fontSize,_=JSON.stringify([l,x]);if(w&&t.setAttribute("font-size",w),f==null||f!==_){const A=x.textPath;if(A!=null&&typeof A=="object"){const P=A.selector;if(typeof P=="string"){const V=e.find(P)[0];V instanceof SVGPathElement&&(Gm(V),x.textPath=Object.assign({"xlink:href":`#${V.id}`},A))}}w2(t,`${l}`,x),d.data(c,_)}}},FM={qualify:Do,set(l,{view:e,elem:t,attrs:o,refBBox:c}){const d=l,f=d.width||0;pd(f)?c.width*=parseFloat(f)/100:f<=0?c.width+=f:c.width=f;const v=d.height||0;pd(v)?c.height*=parseFloat(v)/100:v<=0?c.height+=v:c.height=v;let x,w=d.text;w==null&&(w=o.text),w!=null?x=E2(`${w}`,c,{"font-weight":o["font-weight"]||o.fontWeight,"font-size":o["font-size"]||o.fontSize,"font-family":o["font-family"]||o.fontFamily,lineHeight:o.lineHeight},{svgDocument:e.graph.view.svg,ellipsis:d.ellipsis,hyphen:d.hyphen,breakWord:d.breakWord}):x="",er(HS.set,this,x,{view:e,elem:t,attrs:o,refBBox:c,cell:e.cell})}},hv=(l,{attrs:e})=>e.text!==void 0,ks={qualify:hv},PP={qualify:hv},BM={qualify:hv},zM={qualify:hv},UM={qualify:hv},VM={qualify:hv},jM={qualify(l,{elem:e}){return e instanceof SVGElement},set(l,{view:e,elem:t}){const o="x6-title",c=`${l}`,d=e.$(t),f=d.data(o);if(f==null||f!==c){d.data(o,c);const v=t.firstChild;if(v&&v.tagName.toUpperCase()==="TITLE"){const x=v;x.textContent=c}else{const x=document.createElementNS(t.namespaceURI,"title");x.textContent=c,t.insertBefore(x,v)}}}},$S={offset:DC("x","width","right")},WS={offset:DC("y","height","bottom")},XS={offset(l,{refBBox:e}){return l?{x:-e.x,y:-e.y}:{x:0,y:0}}};function DC(l,e,t){return(o,{refBBox:c})=>{const d=new Ve;let f;return o==="middle"?f=c[e]/2:o===t?f=c[e]:typeof o=="number"&&Number.isFinite(o)?f=o>-1&&o<1?-c[e]*o:-o:pd(o)?f=c[e]*parseFloat(o)/100:f=0,d[l]=-(c[l]+f),d}}const ZS={qualify:Do,set(l,{view:e,elem:t}){e.$(t).css(l)}},N2={set(l,{view:e,elem:t}){e.$(t).html(`${l}`)}},YS={qualify:Do,set(l,{view:e}){return`url(#${e.graph.defineFilter(l)})`}},KS={set(l){return l!=null&&typeof l=="object"&&l.id?l.id:l}};function Qf(l,e,t){let o,c;typeof e=="object"?(o=e.x,c=e.y):(o=e,c=t);const d=Nr.parse(l),f=d.bbox();if(f){let v=-f.height/2-f.y,x=-f.width/2-f.x;typeof o=="number"&&(x-=o),typeof c=="number"&&(v-=c),d.translate(x,v)}return d.serialize()}var NC=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const qS=l=>{var{size:e,width:t,height:o,offset:c,open:d}=l,f=NC(l,["size","width","height","offset","open"]);return IC({size:e,width:t,height:o,offset:c},d===!0,!0,void 0,f)},JS=l=>{var{size:e,width:t,height:o,offset:c,factor:d}=l,f=NC(l,["size","width","height","offset","factor"]);return IC({size:e,width:t,height:o,offset:c},!1,!1,d,f)};function IC(l,e,t,o=3/4,c={}){const d=l.size||10,f=l.width||d,v=l.height||d,x=new Nr,w={};if(e)x.moveTo(f,0).lineTo(0,v/2).lineTo(f,v),w.fill="none";else{if(x.moveTo(0,v/2),x.lineTo(f,0),!t){const _=eu(o,0,1);x.lineTo(f*_,v/2)}x.lineTo(f,v),x.close()}return Object.assign(Object.assign(Object.assign({},w),c),{tagName:"path",d:Qf(x.serialize(),{x:l.offset!=null?l.offset:-f/2})})}var QS=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const e_=l=>{var{size:e,width:t,height:o,offset:c}=l,d=QS(l,["size","width","height","offset"]);const f=e||10,v=t||f,x=o||f,w=new Nr;return w.moveTo(0,x/2).lineTo(v/2,0).lineTo(v,x/2).lineTo(v/2,x).close(),Object.assign(Object.assign({},d),{tagName:"path",d:Qf(w.serialize(),c??-v/2)})};var RC=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const t_=l=>{var{d:e,offsetX:t,offsetY:o}=l,c=RC(l,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},c),{tagName:"path",d:Qf(e,t,o)})};var n_=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const r_=l=>{var{size:e,width:t,height:o,offset:c}=l,d=n_(l,["size","width","height","offset"]);const f=e||10,v=t||f,x=o||f,w=new Nr;return w.moveTo(0,0).lineTo(v,x).moveTo(0,x).lineTo(v,0),Object.assign(Object.assign({},d),{tagName:"path",fill:"none",d:Qf(w.serialize(),c||-v/2)})};var i_=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const o_=l=>{var{width:e,height:t,offset:o,open:c,flip:d}=l,f=i_(l,["width","height","offset","open","flip"]);let v=t||6;const x=e||10,w=c===!0,_=d===!0,A=Object.assign(Object.assign({},f),{tagName:"path"});_&&(v=-v);const P=new Nr;return P.moveTo(0,v).lineTo(x,0),w?A.fill="none":(P.lineTo(x,v),P.close()),A.d=Qf(P.serialize(),{x:o||-x/2,y:v/2}),A};var kC=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const LC=l=>{var{r:e}=l,t=kC(l,["r"]);const o=e||5;return Object.assign(Object.assign({cx:o},t),{tagName:"circle",r:o})},s_=l=>{var{r:e}=l,t=kC(l,["r"]);const o=e||5,c=new Nr;return c.moveTo(o,0).lineTo(o,o*2),c.moveTo(0,o).lineTo(o*2,o),{children:[Object.assign(Object.assign({},LC({r:o})),{fill:"none"}),Object.assign(Object.assign({},t),{tagName:"path",d:Qf(c.serialize(),-o)})]}};var a_=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const c_=l=>{var{rx:e,ry:t}=l,o=a_(l,["rx","ry"]);const c=e||5,d=t||5;return Object.assign(Object.assign({cx:c},o),{tagName:"ellipse",rx:c,ry:d})};var Yh;(function(l){l.presets=Z,l.registry=Ss.create({type:"marker"}),l.registry.register(l.presets,!0)})(Yh||(Yh={})),function(l){l.normalize=Qf}(Yh||(Yh={}));var fv=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};function I2(l){return typeof l=="string"||Do(l)}const l_={qualify:I2,set(l,{view:e,attrs:t}){return pv("marker-start",l,e,t)}},u_={qualify:I2,set(l,{view:e,attrs:t}){return pv("marker-end",l,e,t,{transform:"rotate(180)"})}},d_={qualify:I2,set(l,{view:e,attrs:t}){return pv("marker-mid",l,e,t)}};function pv(l,e,t,o,c={}){const d=typeof e=="string"?{name:e}:e,{name:f,args:v}=d,x=fv(d,["name","args"]);let w=x;if(f&&typeof f=="string"){const A=Yh.registry.get(f);if(A)w=A(Object.assign(Object.assign({},x),v));else return Yh.registry.onNotFound(f)}const _=Object.assign(Object.assign(Object.assign({},h_(o,l)),c),w);return{[l]:`url(#${t.graph.defineMarker(_)})`}}function h_(l,e){const t={},o=l.stroke;typeof o=="string"&&(t.stroke=o,t.fill=o);let c=l.strokeOpacity;if(c==null&&(c=l["stroke-opacity"]),c==null&&(c=l.opacity),c!=null&&(t["stroke-opacity"]=c,t["fill-opacity"]=c),e!=="marker-mid"){const d=parseFloat(l.strokeWidth||l["stroke-width"]);if(Number.isFinite(d)&&d>1){const f=Math.ceil(d/2);t.refX=e==="marker-start"?f:-f}}return t}const md=(l,{view:e})=>e.cell.isEdge(),HM={qualify:md,set(l,e){var t,o,c,d;const f=e.view,v=l.reverse||!1,x=l.stubs||0;let w;if(Number.isFinite(x)&&x!==0)if(v){let _,A;const P=f.getConnectionLength()||0;x<0?(_=(P+x)/2,A=-x):(_=x,A=P-x*2);const V=f.getConnection();w=(d=(c=(o=(t=V?.divideAtLength(_))===null||t===void 0?void 0:t[1])===null||o===void 0?void 0:o.divideAtLength(A))===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.serialize()}else{let _;x<0?_=((f.getConnectionLength()||0)+x)/2:_=x;const A=f.getConnection();if(A){const P=A.divideAtLength(_),V=A.divideAtLength(-_);P&&V&&(w=`${P[0].serialize()} ${V[1].serialize()}`)}}return{d:w||f.getConnectionPathData()}}},f_={qualify:md,set:rg("getTangentAtLength",{rotate:!0})},$M={qualify:md,set:rg("getTangentAtLength",{rotate:!1})},Kh={qualify:md,set:rg("getTangentAtRatio",{rotate:!0})},ry={qualify:md,set:rg("getTangentAtRatio",{rotate:!1})},ep=f_,yd=Kh;function rg(l,e){const t={x:1,y:0};return(o,c)=>{let d,f;const v=c.view,x=v[l](Number(o));return x?(f=e.rotate?x.vector().vectorAngle(t):0,d=x.start):(d=v.path.start,f=0),f===0?{transform:`translate(${d.x},${d.y}')`}:{transform:`translate(${d.x},${d.y}') rotate(${f})`}}}var xc;(function(l){function e(t,o,c){return!!(t!=null&&(typeof t=="string"||typeof t.qualify!="function"||er(t.qualify,this,o,c)))}l.isValidDefinition=e})(xc||(xc={})),function(l){l.presets=Object.assign(Object.assign({},RS),te),l.registry=Ss.create({type:"attribute definition"}),l.registry.register(l.presets,!0)}(xc||(xc={}));const iy={color:"#aaaaaa",thickness:1,markup:"rect",update(l,e){const t=e.thickness*e.sx,o=e.thickness*e.sy;oo(l,{width:t,height:o,rx:t,ry:o,fill:e.color})}},R2={color:"#aaaaaa",thickness:1,markup:"rect",update(l,e){const t=e.sx<=1?e.thickness*e.sx:e.thickness;oo(l,{width:t,height:t,rx:t,ry:t,fill:e.color})}},qh={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(l,e){let t;const o=e.width,c=e.height,d=e.thickness;o-d>=0&&c-d>=0?t=["M",o,0,"H0 M0 0 V0",c].join(" "):t="M 0 0 0 0",oo(l,{d:t,stroke:e.color,"stroke-width":e.thickness})}},o0=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(l,e){let t;const o=e.width,c=e.height,d=e.thickness;o-d>=0&&c-d>=0?t=["M",o,0,"H0 M0 0 V0",c].join(" "):t="M 0 0 0 0",oo(l,{d:t,stroke:e.color,"stroke-width":e.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(l,e){let t;const o=e.factor||1,c=e.width*o,d=e.height*o,f=e.thickness;c-f>=0&&d-f>=0?t=["M",c,0,"H0 M0 0 V0",d].join(" "):t="M 0 0 0 0",e.width=c,e.height=d,oo(l,{d:t,stroke:e.color,"stroke-width":e.thickness})}}];class Ls{constructor(){this.patterns={},this.root=ir.create(tv(),{width:"100%",height:"100%"},[Qc("defs")]).node}add(e,t){const o=this.root.childNodes[0];o&&o.appendChild(t),this.patterns[e]=t,ir.create("rect",{width:"100%",height:"100%",fill:`url(#${e})`}).appendTo(this.root)}get(e){return this.patterns[e]}has(e){return this.patterns[e]!=null}}(function(l){l.presets=Q,l.registry=Ss.create({type:"grid"}),l.registry.register(l.presets,!0)})(Ls||(Ls={}));function bd(l,e){return l??e}function vs(l,e){return l!=null&&Number.isFinite(l)?l:e}function k2(l={}){const e=bd(l.color,"blue"),t=vs(l.width,1),o=vs(l.margin,2),c=vs(l.opacity,1),d=o,f=o+t;return`
    <filter>
      <feFlood flood-color="${e}" flood-opacity="${c}" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${f}" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${d}" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `.trim()}function WM(l={}){const e=bd(l.color,"red"),t=vs(l.blur,0),o=vs(l.width,1),c=vs(l.opacity,1);return`
      <filter>
        <feFlood flood-color="${e}" flood-opacity="${c}" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${o}"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="${t}"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `.trim()}function p_(l={}){const e=vs(l.x,2);return`
    <filter>
      <feGaussianBlur stdDeviation="${l.y!=null&&Number.isFinite(l.y)?[e,l.y]:e}"/>
    </filter>
  `.trim()}function GC(l={}){const e=vs(l.dx,0),t=vs(l.dy,0),o=bd(l.color,"black"),c=vs(l.blur,4),d=vs(l.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="${c}" dx="${e}" dy="${t}" flood-color="${o}" flood-opacity="${d}" />
       </filter>`.trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="${c}" />
         <feOffset dx="${e}" dy="${t}" result="offsetblur" />
         <feFlood flood-color="${o}" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="${d}" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`.trim()}function XM(l={}){const e=vs(l.amount,1),t=.2126+.7874*(1-e),o=.7152-.7152*(1-e),c=.0722-.0722*(1-e),d=.2126-.2126*(1-e),f=.7152+.2848*(1-e),v=.0722-.0722*(1-e),x=.2126-.2126*(1-e),w=.0722+.9278*(1-e);return`
    <filter>
      <feColorMatrix type="matrix" values="${t} ${o} ${c} 0 0 ${d} ${f} ${v} 0 0 ${x} ${o} ${w} 0 0 0 0 0 1 0"/>
    </filter>
  `.trim()}function ZM(l={}){const e=vs(l.amount,1),t=.393+.607*(1-e),o=.769-.769*(1-e),c=.189-.189*(1-e),d=.349-.349*(1-e),f=.686+.314*(1-e),v=.168-.168*(1-e),x=.272-.272*(1-e),w=.534-.534*(1-e),_=.131+.869*(1-e);return`
      <filter>
        <feColorMatrix type="matrix" values="${t} ${o} ${c} 0 0 ${d} ${f} ${v} 0 0 ${x} ${w} ${_} 0 0 0 0 0 1 0"/>
      </filter>
    `.trim()}function g_(l={}){const e=vs(l.amount,1);return`
      <filter>
        <feColorMatrix type="saturate" values="${1-e}"/>
      </filter>
    `.trim()}function v_(l={}){return`
      <filter>
        <feColorMatrix type="hueRotate" values="${vs(l.angle,0)}"/>
      </filter>
    `.trim()}function YM(l={}){const e=vs(l.amount,1),t=1-e;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="${e} ${t}"/>
          <feFuncG type="table" tableValues="${e} ${t}"/>
          <feFuncB type="table" tableValues="${e} ${t}"/>
        </feComponentTransfer>
      </filter>
    `.trim()}function KM(l={}){const e=vs(l.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="${e}"/>
        <feFuncG type="linear" slope="${e}"/>
        <feFuncB type="linear" slope="${e}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}function m_(l={}){const e=vs(l.amount,1),t=.5-e/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="${e}" intercept="${t}"/>
        <feFuncG type="linear" slope="${e}" intercept="${t}"/>
        <feFuncB type="linear" slope="${e}" intercept="${t}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}var Jh;(function(l){l.presets=de,l.registry=Ss.create({type:"filter"}),l.registry.register(l.presets,!0)})(Jh||(Jh={}));const y_=function(l){const e=document.createElement("canvas"),t=l.width,o=l.height;e.width=t*2,e.height=o;const c=e.getContext("2d");return c.drawImage(l,0,0,t,o),c.translate(2*t,0),c.scale(-1,1),c.drawImage(l,0,0,t,o),e},s0=function(l){const e=document.createElement("canvas"),t=l.width,o=l.height;e.width=t,e.height=o*2;const c=e.getContext("2d");return c.drawImage(l,0,0,t,o),c.translate(0,2*o),c.scale(1,-1),c.drawImage(l,0,0,t,o),e},b_=function(l){const e=document.createElement("canvas"),t=l.width,o=l.height;e.width=2*t,e.height=2*o;const c=e.getContext("2d");return c.drawImage(l,0,0,t,o),c.setTransform(-1,0,0,-1,e.width,e.height),c.drawImage(l,0,0,t,o),c.setTransform(-1,0,0,1,e.width,0),c.drawImage(l,0,0,t,o),c.setTransform(1,0,0,-1,0,e.height),c.drawImage(l,0,0,t,o),e},qM=function(l,e){const t=l.width,o=l.height,c=document.createElement("canvas");c.width=t*3,c.height=o*3;const d=c.getContext("2d"),f=e.angle!=null?-e.angle:-20,v=ji.toRad(f),x=c.width/4,w=c.height/4;for(let _=0;_<4;_+=1)for(let A=0;A<4;A+=1)(_+A)%2>0&&(d.setTransform(1,0,0,1,(2*_-1)*x,(2*A-1)*w),d.rotate(v),d.drawImage(l,-t/2,-o/2,t,o));return c};var ms;(function(l){l.presets=Object.assign({},oe),l.presets["flip-x"]=y_,l.presets["flip-y"]=s0,l.presets["flip-xy"]=b_,l.registry=Ss.create({type:"background pattern"}),l.registry.register(l.presets,!0)})(ms||(ms={}));const el={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!1,trackInfo:{},track(l){el.trackable=l}};var aa;(function(l){l.snapToGrid=bC,l.normalizeMarker=Qf;function e(t){return`${el.prefixCls}-${t}`}l.prefix=e})(aa||(aa={})),function(l){function e(t,o,c,d=[]){const f=typeof o.children=="function"?o.children(t):t[o.children||"children"];return c||(c=o.createNode(t),d.push(c)),Array.isArray(f)&&f.forEach(v=>{const x=o.createNode(v),w=o.createEdge(c,x);d.push(x,w),this.makeTree(v,o,x,d)}),d}l.makeTree=e}(aa||(aa={}));const x_=aa.prefix("highlighted"),JM={highlight(l,e,t){const o=t&&t.className||x_;io(e,o)},unhighlight(l,e,t){const o=t&&t.className||x_;tu(e,o)}},C_=aa.prefix("highlight-opacity"),QM={highlight(l,e){io(e,C_)},unhighlight(l,e){tu(e,C_)}},eO={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},tO={highlight(l,e,t){const o=ig.getHighlighterId(e,t);if(ig.hasCache(o))return;t=wm({},t,eO);const c=ir.create(e);let d,f;try{d=c.toPathData()}catch{f=c.bbox(!0),d=vd(Object.assign(Object.assign({},t),f))}const v=Qc("path");if(oo(v,Object.assign({d,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},t.attrs?t0(t.attrs):null)),l.isEdgeElement(e))oo(v,"d",l.getConnectionPathData());else{let _=c.getTransformToElement(l.container);const A=t.padding;if(A){f==null&&(f=c.bbox(!0));const P=f.x+f.width/2,V=f.y+f.height/2;f=nu(f,_);const J=Math.max(f.width,1),ee=Math.max(f.height,1),ge=(J+A)/J,Se=(ee+A)/ee,Re=nc({a:ge,b:0,c:0,d:Se,e:P-ge*P,f:V-Se*V});_=_.multiply(Re)}eg(v,_)}io(v,aa.prefix("highlight-stroke"));const x=l.cell,w=()=>ig.removeHighlighter(o);x.on("removed",w),x.model&&x.model.on("reseted",w),l.container.appendChild(v),ig.setCache(o,v)},unhighlight(l,e,t){ig.removeHighlighter(ig.getHighlighterId(e,t))}};var ig;(function(l){function e(f,v){return Gm(f),f.id+JSON.stringify(v)}l.getHighlighterId=e;const t={};function o(f,v){t[f]=v}l.setCache=o;function c(f){return t[f]!=null}l.hasCache=c;function d(f){const v=t[f];v&&(gd(v),delete t[f])}l.removeHighlighter=d})(ig||(ig={}));var Qh;(function(l){function e(t,o){if(typeof o.highlight!="function")throw new Error(`Highlighter '${t}' is missing required \`highlight()\` method`);if(typeof o.unhighlight!="function")throw new Error(`Highlighter '${t}' is missing required \`unhighlight()\` method`)}l.check=e})(Qh||(Qh={})),function(l){l.presets=ie,l.registry=Ss.create({type:"highlighter"}),l.registry.register(l.presets,!0)}(Qh||(Qh={}));function FC(l,e={}){return new Ve(sh(e.x,l.width),sh(e.y,l.height))}function BC(l,e,t){return Object.assign({angle:e,position:l.toJSON()},t)}const nO=(l,e)=>l.map(({x:t,y:o,angle:c})=>BC(FC(e,{x:t,y:o}),c||0)),rO=(l,e,t)=>{const o=t.start||0,c=t.step||20;return w_(l,e,o,(d,f)=>(d+.5-f/2)*c)},iO=(l,e,t)=>{const o=t.start||0,c=t.step||360/l.length;return w_(l,e,o,d=>d*c)};function w_(l,e,t,o){const c=e.getCenter(),d=e.getTopCenter(),f=e.width/e.height,v=ah.fromRect(e),x=l.length;return l.map((w,_)=>{const A=t+o(_,x),P=d.clone().rotate(-A,c).scale(f,1,c),V=w.compensateRotate?-v.tangentTheta(P):0;return(w.dx||w.dy)&&P.translate(w.dx||0,w.dy||0),w.dr&&P.move(c,w.dr),BC(P.round(),V,w)})}var oO=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const sO=(l,e,t)=>{const o=FC(e,t.start||e.getOrigin()),c=FC(e,t.end||e.getCorner());return oy(l,o,c,t)},aO=(l,e,t)=>oy(l,e.getTopLeft(),e.getBottomLeft(),t),cO=(l,e,t)=>oy(l,e.getTopRight(),e.getBottomRight(),t),lO=(l,e,t)=>oy(l,e.getTopLeft(),e.getTopRight(),t),uO=(l,e,t)=>oy(l,e.getBottomLeft(),e.getBottomRight(),t);function oy(l,e,t,o){const c=new rr(e,t),d=l.length;return l.map((f,v)=>{var{strict:x}=f,w=oO(f,["strict"]);const _=x||o.strict?(v+1)/(d+1):(v+.5)/d,A=c.pointAt(_);return(w.dx||w.dy)&&A.translate(w.dx||0,w.dy||0),BC(A.round(),0,w)})}var og;(function(l){l.presets=re,l.registry=Ss.create({type:"port layout"}),l.registry.register(l.presets,!0)})(og||(og={}));const dO={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function So(l,e){const{x:t,y:o,angle:c,attrs:d}=e||{};return wm({},{angle:c,attrs:d,position:{x:t,y:o}},l,dO)}const DP=(l,e,t)=>So({position:e.getTopLeft()},t),hO=(l,e,t)=>So({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},t),fO=(l,e,t)=>So({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},t),pO=(l,e,t)=>So({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},t),gO=(l,e,t)=>So({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},t),vO=(l,e,t)=>__(l,e,!1,t),zC=(l,e,t)=>__(l,e,!0,t),E_=(l,e,t)=>UC(l,e,!1,t),S_=(l,e,t)=>UC(l,e,!0,t);function __(l,e,t,o){const c=o.offset!=null?o.offset:15,d=e.getCenter().theta(l),f=sy(e);let v,x,w,_,A=0;return d<f[1]||d>f[2]?(v=".3em",x=c,w=0,_="start"):d<f[0]?(v="0",x=0,w=-c,t?(A=-90,_="start"):_="middle"):d<f[3]?(v=".3em",x=-c,w=0,_="end"):(v=".6em",x=0,w=c,t?(A=90,_="start"):_="middle"),So({position:{x:Math.round(x),y:Math.round(w)},angle:A,attrs:{".":{y:v,"text-anchor":_}}},o)}function UC(l,e,t,o){const c=o.offset!=null?o.offset:15,d=e.getCenter().theta(l),f=sy(e);let v,x,w,_,A=0;return d<f[1]||d>f[2]?(v=".3em",x=-c,w=0,_="end"):d<f[0]?(v=".6em",x=0,w=c,t?(A=90,_="start"):_="middle"):d<f[3]?(v=".3em",x=c,w=0,_="start"):(v="0em",x=0,w=-c,t?(A=-90,_="start"):_="middle"),So({position:{x:Math.round(x),y:Math.round(w)},angle:A,attrs:{".":{y:v,"text-anchor":_}}},o)}function sy(l){const e=l.getCenter(),t=e.theta(l.getTopLeft()),o=e.theta(l.getBottomLeft()),c=e.theta(l.getBottomRight()),d=e.theta(l.getTopRight());return[t,d,c,o]}const mO=(l,e,t)=>A_(l.diff(e.getCenter()),!1,t),yO=(l,e,t)=>A_(l.diff(e.getCenter()),!0,t);function A_(l,e,t){const o=t.offset!=null?t.offset:20,c=new Ve(0,0),d=-l.theta(c),f=l.clone().move(c,o).diff(l).round();let v=".3em",x,w=d;return(d+90)%180===0?(x=e?"end":"middle",!e&&d===-270&&(v="0em")):d>-270&&d<-90?(x="start",w=d-180):x="end",So({position:f.round().toJSON(),angle:e?w:0,attrs:{".":{y:v,"text-anchor":x}}},t)}var a0;(function(l){l.presets=he,l.registry=Ss.create({type:"port label layout"}),l.registry.register(l.presets,!0)})(a0||(a0={}));class Pu{constructor(e,t,o,c){if(e==null)return this.set(255,255,255,1);if(typeof e=="number")return this.set(e,t,o,c);if(typeof e=="string")return Pu.fromString(e)||this;if(Array.isArray(e))return this.set(e);this.set(e.r,e.g,e.b,e.a==null?1:e.a)}blend(e,t,o){this.set(e.r+(t.r-e.r)*o,e.g+(t.g-e.g)*o,e.b+(t.b-e.b)*o,e.a+(t.a-e.a)*o)}lighten(e){const t=Pu.lighten(this.toArray(),e);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}darken(e){this.lighten(-e)}set(e,t,o,c){const d=Array.isArray(e)?e[0]:e,f=Array.isArray(e)?e[1]:t,v=Array.isArray(e)?e[2]:o,x=Array.isArray(e)?e[3]:c;return this.r=Math.round(eu(d,0,255)),this.g=Math.round(eu(f,0,255)),this.b=Math.round(eu(v,0,255)),this.a=x==null?1:eu(x,0,1),this}toHex(){return`#${["r","g","b"].map(t=>{const o=this[t].toString(16);return o.length<2?`0${o}`:o}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return Pu.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(e){const t=`${this.r},${this.g},${this.b},`;return e?`rgb(${t})`:`rgba(${t},${this.a})`}toGrey(){return Pu.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(l){function e(_e){return new l(_e)}l.fromArray=e;function t(_e){return new l([...J(_e),1])}l.fromHex=t;function o(_e){const Ue=_e.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(Ue){const Qe=Ue[1].split(/\s*,\s*/).map(bt=>parseInt(bt,10));return new l(Qe)}return null}l.fromRGBA=o;function c(_e,Ue,Qe){Qe<0&&++Qe,Qe>1&&--Qe;const bt=6*Qe;return bt<1?_e+(Ue-_e)*bt:2*Qe<1?Ue:3*Qe<2?_e+(Ue-_e)*(2/3-Qe)*6:_e}function d(_e){const Ue=_e.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(Ue){const Qe=Ue[2].split(/\s*,\s*/),bt=(parseFloat(Qe[0])%360+360)%360/360,Pt=parseFloat(Qe[1])/100,Kt=parseFloat(Qe[2])/100,kn=Qe[3]==null?1:parseInt(Qe[3],10);return new l(w(bt,Pt,Kt,kn))}return null}l.fromHSLA=d;function f(_e){if(_e.startsWith("#"))return t(_e);if(_e.startsWith("rgb"))return o(_e);const Ue=l.named[_e];return Ue?t(Ue):d(_e)}l.fromString=f;function v(_e,Ue){return l.fromArray([_e,_e,_e,Ue])}l.makeGrey=v;function x(_e,Ue,Qe,bt){const Pt=Array.isArray(_e)?_e[0]:_e,Kt=Array.isArray(_e)?_e[1]:Ue,kn=Array.isArray(_e)?_e[2]:Qe,wn=Array.isArray(_e)?_e[3]:bt,Sn=Math.max(Pt,Kt,kn),Vn=Math.min(Pt,Kt,kn),Ur=(Sn+Vn)/2;let Wr=0,$t=0;if(Vn!==Sn){const On=Sn-Vn;switch($t=Ur>.5?On/(2-Sn-Vn):On/(Sn+Vn),Sn){case Pt:Wr=(Kt-kn)/On+(Kt<kn?6:0);break;case Kt:Wr=(kn-Pt)/On+2;break;case kn:Wr=(Pt-Kt)/On+4;break;default:break}Wr/=6}return[Wr,$t,Ur,wn??1]}l.rgba2hsla=x;function w(_e,Ue,Qe,bt){const Pt=Array.isArray(_e)?_e[0]:_e,Kt=Array.isArray(_e)?_e[1]:Ue,kn=Array.isArray(_e)?_e[2]:Qe,wn=Array.isArray(_e)?_e[3]:bt,Sn=kn<=.5?kn*(Kt+1):kn+Kt-kn*Kt,Vn=2*kn-Sn;return[c(Vn,Sn,Pt+1/3)*256,c(Vn,Sn,Pt)*256,c(Vn,Sn,Pt-1/3)*256,wn??1]}l.hsla2rgba=w;function _(_e){return new l(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),_e?void 0:parseFloat(Math.random().toFixed(2)))}l.random=_;function A(){const _e="0123456789ABCDEF";let Ue="#";for(let Qe=0;Qe<6;Qe+=1)Ue+=_e[Math.floor(Math.random()*16)];return Ue}l.randomHex=A;function P(_e){return _(_e).toString()}l.randomRGBA=P;function V(_e,Ue){if(typeof _e=="string"){const kn=_e[0]==="#",[wn,Sn,Vn]=J(_e);return Ue?wn*.299+Sn*.587+Vn*.114>186?"#000000":"#ffffff":`${kn?"#":""}${ee(255-wn,255-Sn,255-Vn)}`}const Qe=_e[0],bt=_e[1],Pt=_e[2],Kt=_e[3];return Ue?Qe*.299+bt*.587+Pt*.114>186?[0,0,0,Kt]:[255,255,255,Kt]:[255-Qe,255-bt,255-Pt,Kt]}l.invert=V;function J(_e){const Ue=_e.indexOf("#")===0?_e:`#${_e}`;let Qe=Number(`0x${Ue.substr(1)}`);if(!(Ue.length===4||Ue.length===7)||Number.isNaN(Qe))throw new Error("Invalid hex color.");const bt=Ue.length===4?4:8,Pt=(1<<bt)-1,Kt=["b","g","r"].map(()=>{const kn=Qe&Pt;return Qe>>=bt,bt===4?17*kn:kn});return[Kt[2],Kt[1],Kt[0]]}function ee(_e,Ue,Qe){const bt=Pt=>Pt.length<2?`0${Pt}`:Pt;return`${bt(_e.toString(16))}${bt(Ue.toString(16))}${bt(Qe.toString(16))}`}function ge(_e,Ue){return Re(_e,Ue)}l.lighten=ge;function Se(_e,Ue){return Re(_e,-Ue)}l.darken=Se;function Re(_e,Ue){if(typeof _e=="string"){const Pt=_e[0]==="#",Kt=parseInt(Pt?_e.substr(1):_e,16),kn=eu((Kt>>16)+Ue,0,255),wn=eu((Kt>>8&255)+Ue,0,255),Sn=eu((Kt&255)+Ue,0,255);return`${Pt?"#":""}${(Sn|wn<<8|kn<<16).toString(16)}`}const Qe=ee(_e[0],_e[1],_e[2]),bt=J(Re(Qe,Ue));return[bt[0],bt[1],bt[2],_e[3]]}})(Pu||(Pu={})),function(l){l.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(Pu||(Pu={}));class VC{constructor(){this.listeners={}}on(e,t,o){return t==null?this:(this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t,o),this)}once(e,t,o){const c=(...d)=>(this.off(e,c),gv.call([t,o],d));return this.on(e,c,this)}off(e,t,o){if(!(e||t||o))return this.listeners={},this;const c=this.listeners;return(e?[e]:Object.keys(c)).forEach(f=>{const v=c[f];if(!!v){if(!(t||o)){delete c[f];return}for(let x=v.length-2;x>=0;x-=2)t&&v[x]!==t||o&&v[x+1]!==o||v.splice(x,2)}}),this}trigger(e,...t){let o=!0;if(e!=="*"){const d=this.listeners[e];d!=null&&(o=gv.call([...d],t))}const c=this.listeners["*"];return c!=null?Q0([o,gv.call([...c],[e,...t])]):o}emit(e,...t){return this.trigger(e,...t)}}var gv;(function(l){function e(t,o){const c=[];for(let d=0;d<t.length;d+=2){const f=t[d],v=t[d+1],x=Array.isArray(o)?o:[o],w=km(f,v,x);c.push(w)}return Q0(c)}l.call=e})(gv||(gv={}));class tl{get disposed(){return this._disposed===!0}dispose(){this._disposed=!0}}(function(l){function e(){return(t,o,c)=>{const d=c.value,f=t.__proto__;c.value=function(){this.disposed||(d.call(this),f.dispose.call(this))}}}l.dispose=e})(tl||(tl={}));class NP{constructor(e){this.callback=e}get disposed(){return!this.callback}dispose(){if(!this.callback)return;const e=this.callback;this.callback=null,e()}}class T_{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(e=>{e.dispose()}),this.items.clear())}contains(e){return this.items.has(e)}add(e){this.items.add(e)}remove(e){this.items.delete(e)}clear(){this.items.clear()}}(function(l){function e(t){const o=new l;return t.forEach(c=>{o.add(c)}),o}l.from=e})(T_||(T_={}));class Cc extends VC{}(function(l){l.dispose=tl.dispose})(Cc||(Cc={})),Em(Cc,tl);class jC extends Cc{get disabled(){return this._disabled===!0}enable(){delete this._disabled}disable(){this._disabled=!0}}var M_=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class L2 extends tl{constructor(){super(),this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(e){return this.map.has(e)}get(e){return this.map.get(e)}set(e,t){this.map.set(e,t),this.arr.push(e)}delete(e){const t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);const o=this.map.get(e);return this.map.delete(e),o}each(e){this.arr.forEach(t=>{const o=this.map.get(t);e(o,t)})}dispose(){this.clear()}}M_([tl.dispose()],L2.prototype,"dispose",null);class ay{constructor(e={}){this.comparator=e.comparator||ay.defaultComparator,this.index={},this.data=e.data||[],this.heapify()}isEmpty(){return this.data.length===0}insert(e,t,o){const c={priority:e,value:t},d=this.data.length-1;return o&&(c.id=o,this.index[o]=d),this.data.push(c),this.bubbleUp(d),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(e,t){const o=this.index[e];if(typeof o>"u")throw new Error(`Node with id '${e}' was not found in the heap.`);const c=this.data,d=c[o].priority,f=this.comparator(t,d);f<0?(c[o].priority=t,this.bubbleUp(o)):f>0&&(c[o].priority=t,this.bubbleDown(o))}remove(){const e=this.data,t=e[0],o=e.pop();return delete this.index[e.length],e.length>0&&(e[0]=o,o.id&&(this.index[o.id]=0),this.bubbleDown(0)),t?t.value:null}heapify(){for(let e=0;e<this.data.length;e+=1)this.bubbleUp(e)}bubbleUp(e){const t=this.data;let o,c,d=e;for(;d>0&&(c=d-1>>>1,this.comparator(t[d].priority,t[c].priority)<0);){o=t[c],t[c]=t[d];let f=t[d].id;f!=null&&(this.index[f]=c),t[d]=o,f=t[d].id,f!=null&&(this.index[f]=d),d=c}}bubbleDown(e){const t=this.data,o=t.length-1;let c=e;for(;;){const d=(c<<1)+1,f=d+1;let v=c;if(d<=o&&this.comparator(t[d].priority,t[v].priority)<0&&(v=d),f<=o&&this.comparator(t[f].priority,t[v].priority)<0&&(v=f),v!==c){const x=t[v];t[v]=t[c];let w=t[c].id;w!=null&&(this.index[w]=v),t[c]=x,w=t[c].id,w!=null&&(this.index[w]=c),c=v}else break}}}(function(l){l.defaultComparator=(e,t)=>e-t})(ay||(ay={}));var HC;(function(l){function e(t,o,c=(d,f)=>1){const d={},f={},v={},x=new ay;for(d[o]=0,Object.keys(t).forEach(w=>{w!==o&&(d[w]=1/0),x.insert(d[w],w,w)});!x.isEmpty();){const w=x.remove();v[w]=!0;const _=t[w]||[];for(let A=0;A<_.length;A+=1){const P=_[A];if(!v[P]){const V=d[w]+c(w,P);V<d[P]&&(d[P]=V,f[P]=w,x.updatePriority(P,V))}}}return f}l.run=e})(HC||(HC={}));var c0;(function(l){l.linear=e=>e,l.quad=e=>e*e,l.cubic=e=>e*e*e,l.inout=e=>{if(e<=0)return 0;if(e>=1)return 1;const t=e*e,o=t*e;return 4*(e<.5?o:3*(e-t)+o-.75)},l.exponential=e=>Math.pow(2,10*(e-1)),l.bounce=e=>{for(let t=0,o=1;;t+=o,o/=2)if(e>=(7-4*t)/11){const c=(11-6*t-11*e)/4;return-c*c+o*o}}})(c0||(c0={})),function(l){l.decorators={reverse(e){return t=>1-e(1-t)},reflect(e){return t=>.5*(t<.5?e(2*t):2-e(2-2*t))},clamp(e,t=0,o=1){return c=>{const d=e(c);return d<t?t:d>o?o:d}},back(e=1.70158){return t=>t*t*((e+1)*t-e)},elastic(e=1.5){return t=>Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}}(c0||(c0={})),function(l){function e($t){return-1*Math.cos($t*(Math.PI/2))+1}l.easeInSine=e;function t($t){return Math.sin($t*(Math.PI/2))}l.easeOutSine=t;function o($t){return-.5*(Math.cos(Math.PI*$t)-1)}l.easeInOutSine=o;function c($t){return $t*$t}l.easeInQuad=c;function d($t){return $t*(2-$t)}l.easeOutQuad=d;function f($t){return $t<.5?2*$t*$t:-1+(4-2*$t)*$t}l.easeInOutQuad=f;function v($t){return $t*$t*$t}l.easeInCubic=v;function x($t){const On=$t-1;return On*On*On+1}l.easeOutCubic=x;function w($t){return $t<.5?4*$t*$t*$t:($t-1)*(2*$t-2)*(2*$t-2)+1}l.easeInOutCubic=w;function _($t){return $t*$t*$t*$t}l.easeInQuart=_;function A($t){const On=$t-1;return 1-On*On*On*On}l.easeOutQuart=A;function P($t){const On=$t-1;return $t<.5?8*$t*$t*$t*$t:1-8*On*On*On*On}l.easeInOutQuart=P;function V($t){return $t*$t*$t*$t*$t}l.easeInQuint=V;function J($t){const On=$t-1;return 1+On*On*On*On*On}l.easeOutQuint=J;function ee($t){const On=$t-1;return $t<.5?16*$t*$t*$t*$t*$t:1+16*On*On*On*On*On}l.easeInOutQuint=ee;function ge($t){return $t===0?0:Math.pow(2,10*($t-1))}l.easeInExpo=ge;function Se($t){return $t===1?1:-Math.pow(2,-10*$t)+1}l.easeOutExpo=Se;function Re($t){if($t===0||$t===1)return $t;const On=$t*2,kr=On-1;return On<1?.5*Math.pow(2,10*kr):.5*(-Math.pow(2,-10*kr)+2)}l.easeInOutExpo=Re;function _e($t){const On=$t/1;return-1*(Math.sqrt(1-On*$t)-1)}l.easeInCirc=_e;function Ue($t){const On=$t-1;return Math.sqrt(1-On*On)}l.easeOutCirc=Ue;function Qe($t){const On=$t*2,kr=On-2;return On<1?-.5*(Math.sqrt(1-On*On)-1):.5*(Math.sqrt(1-kr*kr)+1)}l.easeInOutCirc=Qe;function bt($t,On=1.70158){return $t*$t*((On+1)*$t-On)}l.easeInBack=bt;function Pt($t,On=1.70158){const kr=$t/1-1;return kr*kr*((On+1)*kr+On)+1}l.easeOutBack=Pt;function Kt($t,On=1.70158){const kr=$t*2,Vo=kr-2,ss=On*1.525;return kr<1?.5*kr*kr*((ss+1)*kr-ss):.5*(Vo*Vo*((ss+1)*Vo+ss)+2)}l.easeInOutBack=Kt;function kn($t,On=.7){if($t===0||$t===1)return $t;const Vo=$t/1-1,ss=1-On,ca=ss/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*Vo)*Math.sin((Vo-ca)*(2*Math.PI)/ss))}l.easeInElastic=kn;function wn($t,On=.7){const kr=1-On,Vo=$t*2;if($t===0||$t===1)return $t;const ss=kr/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*Vo)*Math.sin((Vo-ss)*(2*Math.PI)/kr)+1}l.easeOutElastic=wn;function Sn($t,On=.65){const kr=1-On;if($t===0||$t===1)return $t;const Vo=$t*2,ss=Vo-1,ca=kr/(2*Math.PI)*Math.asin(1);return Vo<1?-.5*(Math.pow(2,10*ss)*Math.sin((ss-ca)*(2*Math.PI)/kr)):Math.pow(2,-10*ss)*Math.sin((ss-ca)*(2*Math.PI)/kr)*.5+1}l.easeInOutElastic=Sn;function Vn($t){const On=$t/1;if(On<1/2.75)return 7.5625*On*On;if(On<2/2.75){const kr=On-.5454545454545454;return 7.5625*kr*kr+.75}if(On<2.5/2.75){const kr=On-.8181818181818182;return 7.5625*kr*kr+.9375}{const kr=On-.9545454545454546;return 7.5625*kr*kr+.984375}}l.easeOutBounce=Vn;function Ur($t){return 1-Vn(1-$t)}l.easeInBounce=Ur;function Wr($t){return $t<.5?Ur($t*2)*.5:Vn($t*2-1)*.5+.5}l.easeInOutBounce=Wr}(c0||(c0={}));var ef;(function(l){l.number=(e,t)=>{const o=t-e;return c=>e+o*c},l.object=(e,t)=>{const o=Object.keys(e);return c=>{const d={};for(let f=o.length-1;f!==-1;f-=1){const v=o[f];d[v]=e[v]+(t[v]-e[v])*c}return d}},l.unit=(e,t)=>{const o=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,c=o.exec(e),d=o.exec(t),f=d?d[1]:"",v=c?+c[1]:0,x=d?+d[1]:0,w=f.indexOf("."),_=w>0?f[1].length-w-1:0,A=x-v,P=c?c[2]:"";return V=>(v+A*V).toFixed(_)+P},l.color=(e,t)=>{const o=parseInt(e.slice(1),16),c=parseInt(t.slice(1),16),d=o&255,f=(c&255)-d,v=o&65280,x=(c&65280)-v,w=o&16711680,_=(c&16711680)-w;return A=>{const P=d+f*A&255,V=v+x*A&65280,J=w+_*A&16711680;return`#${(1<<24|P|V|J).toString(16).slice(1)}`}}})(ef||(ef={}));var O_;(function(l){const e=`${el.prefixCls}.storage`;function t(A,P,V){const J=P.id||gt("doc-"),ee=x(A);ee.keys.push(J),f(w(A,J),P),f(_(A),ee),d(V,null,Object.assign(Object.assign({},P),{id:J}))}l.insert=t;function o(A,P,V){const J=x(A),ee=[];if(P==null)J.keys.forEach(ge=>{const Se=v(w(A,ge));Se?ee.push(Se):d(V,new Error(`No document found for an ID '${ge}' from index.`))}),d(V,null,ee);else if(P.id){const ge=v(w(A,P.id));d(V,null,ge?[ge]:[])}else d(V,null,[])}l.find=o;function c(A,P,V){const J=x(A);if(P==null)J.keys.forEach(ee=>{localStorage.removeItem(w(A,ee))}),localStorage.removeItem(_(A)),d(V,null);else if(P.id){const ee=J.keys.indexOf(P.id);ee>=0&&J.keys.splice(ee,1),localStorage.removeItem(w(A,P.id)),f(_(A),J),d(V,null)}}l.remove=c;function d(A,P,V){A&&dC(()=>{A(P,V)})}function f(A,P){localStorage.setItem(A,JSON.stringify(P))}function v(A){const P=localStorage.getItem(A);return P?JSON.parse(P):null}function x(A){const P=v(_(A));return P?(P.keys==null&&(P.keys=[]),P):{keys:[]}}function w(A,P){return`${e}.${A}.docs.${P}`}function _(A){return`${e}.${A}.index`}})(O_||(O_={}));class Di extends Cc{constructor(){super(),this.cid=$C.uniqueId(),Di.views[this.cid]=this}get priority(){return 2}confirmUpdate(e,t){return 0}$(e){return Di.$(e)}empty(e=this.container){return this.$(e).empty(),this}unmount(e=this.container){return this.$(e).remove(),this}remove(e=this.container){return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete Di.views[this.cid]),this.unmount(e),this}onRemove(){}setClass(e,t=this.container){t.classList.value=Array.isArray(e)?e.join(" "):e}addClass(e,t=this.container){return this.$(t).addClass(Array.isArray(e)?e.join(" "):e),this}removeClass(e,t=this.container){return this.$(t).removeClass(Array.isArray(e)?e.join(" "):e),this}setStyle(e,t=this.container){return this.$(t).css(e),this}setAttrs(e,t=this.container){return e!=null&&t!=null&&(t instanceof SVGElement?oo(t,e):this.$(t).attr(e)),this}findAttr(e,t=this.container){let o=t;for(;o&&o.nodeType===1;){const c=o.getAttribute(e);if(c!=null)return c;if(o===this.container)return null;o=o.parentNode}return null}find(e,t=this.container,o=this.selectors){return Di.find(e,t,o).elems}findOne(e,t=this.container,o=this.selectors){const c=this.find(e,t,o);return c.length>0?c[0]:null}findByAttr(e,t=this.container){let o=t;for(;o&&o.getAttribute;){const c=o.getAttribute(e);if((c!=null||o===this.container)&&c!=="false")return o;o=o.parentNode}return null}getSelector(e,t){let o;if(e===this.container)return typeof t=="string"&&(o=`> ${t}`),o;if(e){const c=Bm(e)+1;o=`${e.tagName.toLowerCase()}:nth-child(${c})`,t&&(o+=` > ${t}`),o=this.getSelector(e.parentNode,o)}return o}prefixClassName(e){return aa.prefix(e)}delegateEvents(e,t){if(e==null)return this;t||this.undelegateEvents();const o=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(c=>{const d=c.match(o);if(d==null)return;const f=this.getEventHandler(e[c]);typeof f=="function"&&this.delegateEvent(d[1],d[2],f)}),this}undelegateEvents(){return this.$(this.container).off(this.getEventNamespace()),this}delegateDocumentEvents(e,t){return this.addEventListeners(document,e,t),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(e,t,o){return this.$(this.container).on(e+this.getEventNamespace(),t,o),this}undelegateEvent(e,t,o){const c=e+this.getEventNamespace();return t==null?this.$(this.container).off(c):typeof t=="string"?this.$(this.container).off(c,t,o):this.$(this.container).off(c,t),this}addEventListeners(e,t,o){if(t==null)return this;const c=this.getEventNamespace(),d=this.$(e);return Object.keys(t).forEach(f=>{const v=this.getEventHandler(t[f]);typeof v=="function"&&d.on(f+c,o,v)}),this}removeEventListeners(e){return e!=null&&this.$(e).off(this.getEventNamespace()),this}getEventNamespace(){return`.${el.prefixCls}-event-${this.cid}`}getEventHandler(e){let t;if(typeof e=="string"){const o=this[e];typeof o=="function"&&(t=(...c)=>o.call(this,...c))}else t=(...o)=>e.call(this,...o);return t}getEventTarget(e,t={}){const{target:o,type:c,clientX:d=0,clientY:f=0}=e;return t.fromPoint||c==="touchmove"||c==="touchend"?document.elementFromPoint(d,f):o}stopPropagation(e){return this.setEventData(e,{propagationStopped:!0}),this}isPropagationStopped(e){return this.getEventData(e).propagationStopped===!0}getEventData(e){return this.eventData(e)}setEventData(e,t){return this.eventData(e,t)}eventData(e,t){if(e==null)throw new TypeError("Event object required");let o=e.data;const c=`__${this.cid}__`;return t==null?o==null?{}:o[c]||{}:(o==null&&(o=e.data={}),o[c]==null?o[c]=Object.assign({},t):o[c]=Object.assign(Object.assign({},o[c]),t),o[c])}normalizeEvent(e){return Di.normalizeEvent(e)}}(function(l){function e(d){return G()(d)}l.$=e;function t(d,f){return f?Qc(d||"g"):Fm(d||"div")}l.createElement=t;function o(d,f,v){if(!d||d===".")return{elems:[f]};if(v){const x=v[d];if(x)return{elems:Array.isArray(x)?x:[x]}}return el.useCSSSelector?{isCSSSelector:!0,elems:e(f).find(d).toArray()}:{elems:[]}}l.find=o;function c(d){let f=d;const v=d.originalEvent,x=v&&v.changedTouches&&v.changedTouches[0];if(x){for(const _ in d)x[_]===void 0&&(x[_]=d[_]);f=x}const w=f.target;if(w){const _=w.correspondingUseElement;_&&(f.target=_)}return f}l.normalizeEvent=c})(Di||(Di={})),function(l){l.views={};function e(t){return l.views[t]||null}l.getView=e}(Di||(Di={}));var $C;(function(l){let e=0;function t(){const o=`v${e}`;return e+=1,o}l.uniqueId=t})($C||($C={}));const vv=l=>l;function P_(l,e){return e===0?"0%":`${Math.round(l/e*100)}%`}function D_(l){return(t,o,c,d)=>o.isEdgeElement(c)?xO(l,t,o,c,d):bO(l,t,o,c,d)}function bO(l,e,t,o,c){const d=t.cell,f=d.getAngle(),v=t.getUnrotatedBBoxOfElement(o),x=d.getBBox().getCenter(),w=Ve.create(c).rotate(f,x);let _=w.x-v.x,A=w.y-v.y;return l&&(_=P_(_,v.width),A=P_(A,v.height)),e.anchor={name:"topLeft",args:{dx:_,dy:A,rotate:!0}},e}function xO(l,e,t,o,c){const d=t.getConnection();if(!d)return e;const f=d.closestPointLength(c);if(l){const v=d.length();e.anchor={name:"ratio",args:{ratio:f/v}}}else e.anchor={name:"length",args:{length:f}};return e}const tp=D_(!0),tf=D_(!1);var Du;(function(l){l.presets=De,l.registry=Ss.create({type:"connection strategy"}),l.registry.register(l.presets,!0)})(Du||(Du={}));class Sl{constructor(e){this.view=e,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new L2,this.pathCache={}}get(e){return this.elemCache.has(e)||this.elemCache.set(e,{}),this.elemCache.get(e)}getData(e){const t=this.get(e);return t.data||(t.data={}),t.data}getMatrix(e){const t=this.get(e);if(t.matrix==null){const o=this.view.rotatableNode||this.view.container;t.matrix=El(e,o)}return nc(t.matrix)}getShape(e){const t=this.get(e);return t.shape==null&&(t.shape=$h(e)),t.shape.clone()}getBoundingRect(e){const t=this.get(e);return t.boundingRect==null&&(t.boundingRect=rc(e)),t.boundingRect.clone()}}var Ei;(function(l){function e(_){return _!=null&&!t(_)}l.isJSONMarkup=e;function t(_){return _!=null&&typeof _=="string"}l.isStringMarkup=t;function o(_){return _==null||t(_)?_:zo(_)}l.clone=o;function c(_){return`${_}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}l.sanitize=c;function d(_){const A=document.createDocumentFragment(),P={},V={},J=c(_);return lC(J,{raw:!0}).forEach(ge=>{A.appendChild(ge)}),{fragment:A,selectors:V,groups:P}}l.parseStringMarkup=d;function f(_,A={ns:Sa.svg}){const P=document.createDocumentFragment(),V={},J={},ee=[{markup:Array.isArray(_)?_:[_],parent:P,ns:A.ns}];for(;ee.length>0;){const ge=ee.pop();let Se=ge.ns||Sa.svg;const Re=ge.markup,_e=ge.parent;Re.forEach(Ue=>{const Qe=Ue.tagName;if(!Qe)throw new TypeError("Invalid tagName");Ue.ns&&(Se=Ue.ns);const bt=Se===Sa.svg,Pt=Se?Fm(Qe,Se):l2(Qe),Kt=Ue.attrs;Kt&&(bt?oo(Pt,t0(Kt)):G()(Pt).attr(Kt));const kn=Ue.style;kn&&G()(Pt).css(kn);const wn=Ue.className;wn!=null&&Pt.setAttribute("class",Array.isArray(wn)?wn.join(" "):wn),Ue.textContent&&(Pt.textContent=Ue.textContent);const Sn=Ue.selector;if(Sn!=null){if(J[Sn])throw new TypeError("Selector must be unique");J[Sn]=Pt}if(Ue.groupSelector){let Ur=Ue.groupSelector;Array.isArray(Ur)||(Ur=[Ur]),Ur.forEach(Wr=>{V[Wr]||(V[Wr]=[]),V[Wr].push(Pt)})}_e.appendChild(Pt);const Vn=Ue.children;Array.isArray(Vn)&&ee.push({ns:Se,markup:Vn,parent:Pt})})}return Object.keys(V).forEach(ge=>{if(J[ge])throw new Error("Ambiguous group selector");J[ge]=V[ge]}),{fragment:P,selectors:J,groups:V}}l.parseJSONMarkup=f;function v(_){return _ instanceof SVGElement?Qc("g"):l2("div")}function x(_){if(t(_)){const J=ir.createVectors(_),ee=J.length;if(ee===1)return{elem:J[0].node};if(ee>1){const ge=v(J[0].node);return J.forEach(Se=>{ge.appendChild(Se.node)}),{elem:ge}}return{}}const A=f(_),P=A.fragment;let V=null;return P.childNodes.length>1?(V=v(P.firstChild),V.appendChild(P)):V=P.firstChild,{elem:V,selectors:A.selectors}}l.renderMarkup=x;function w(_){const A=ir.createVectors(_),P=document.createDocumentFragment();for(let V=0,J=A.length;V<J;V+=1){const ee=A[V].node;P.appendChild(ee)}return{fragment:P,selectors:{}}}l.parseLabelStringMarkup=w})(Ei||(Ei={})),function(l){function e(c,d,f){if(c!=null){let v;const x=c.tagName.toLowerCase();if(c===d)return typeof f=="string"?v=`> ${x} > ${f}`:v=`> ${x}`,v;const w=c.parentNode;if(w&&w.childNodes.length>1){const _=Bm(c)+1;v=`${x}:nth-child(${_})`}else v=x;return f&&(v+=` > ${f}`),e(c.parentNode,d,v)}return f}l.getSelector=e;function t(c,d,f){if(c.nodeName==="#text")return null;let v=null,x=null,w=null,_=!1;const A={tagName:c.tagName};if(c.attributes){w={};for(let P=0,V=c.attributes.length;P<V;P+=1){const J=c.attributes[P],ee=J.nodeName,ge=J.nodeValue;ee==="selector"?v=ge:ee==="groupSelector"?x=ge:ee==="class"?A.attrs={class:ge}:w[ee]=ge}}return v==null&&(_=!0,v=e(c,d)),c.namespaceURI&&(A.ns=c.namespaceURI),A.ns==null&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(c.tagName)?A.ns=Sa.xhtml:f&&(A.ns=f)),v&&(A.selector=v),x!=null&&(A.groupSelector=x),{markup:A,attrs:w,isCSSSelector:_}}function o(c){const d=l.sanitize(c),f=u2(d,{mimeType:"image/svg+xml"}),v=Array.prototype.slice.call(f.childNodes),x={},w=new WeakMap,_=(P,V,J)=>{const ee=t(P,V,J);if(ee==null){const ge=w.get(P.parentNode);ge&&P.textContent&&(ge.textContent=P.textContent)}else{const{markup:ge,attrs:Se,isCSSSelector:Re}=ee;if(w.set(P,ge),ge.selector&&Se!=null&&(Object.keys(Se).length&&(x[ge.selector]=Se),Re&&delete ge.selector),P.childNodes&&P.childNodes.length>0)for(let _e=0,Ue=P.childNodes.length;_e<Ue;_e+=1){const Qe=P.childNodes[_e],bt=_(Qe,V,ge.ns);bt&&(ge.children==null&&(ge.children=[]),ge.children.push(bt))}return ge}};return{markup:v.map(P=>_(P,P)).filter(P=>P!=null),attrs:x}}l.xml2json=o}(Ei||(Ei={})),function(l){function e(){return"g"}l.getPortContainerMarkup=e;function t(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}l.getPortMarkup=t;function o(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}l.getPortLabelMarkup=o}(Ei||(Ei={})),function(l){function e(){return l.sanitize(`
    <path class="connection" stroke="black" d="M 0 0 0 0"/>
    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="connection-wrap" d="M 0 0 0 0"/>
    <g class="labels"/>
    <g class="vertices"/>
    <g class="arrowheads"/>
    <g class="tools"/>
  `)}l.getEdgeMarkup=e;function t(){return l.sanitize(`
    <g class="edge-tool">
      <g class="tool-remove" event="edge:remove">
        <circle r="11" />
        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />
        <title>Remove edge.</title>
      </g>
      <g class="tool-options" event="edge:options">
        <circle r="11" transform="translate(25)"/>
        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>
        <title>Edge options.</title>
      </g>
    </g>
  `)}l.getEdgeToolMarkup=t;function o(){return l.sanitize(`
    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">
      <circle class="vertex" data-index="<%= index %>" r="10" />
      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>
      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">
      <title>Remove vertex.</title>
      </path>
    </g>
  `)}l.getEdgeVertexMarkup=o;function c(){return l.sanitize(`
    <g class="arrowhead-group arrowhead-group-<%= end %>">
      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />
    </g>
  `)}l.getEdgeArrowheadMarkup=c}(Ei||(Ei={})),function(l){function e(t=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:Sa.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:Sa.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:t?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}l.getForeignObjectMarkup=e}(Ei||(Ei={}));class nf{constructor(e){this.view=e}get cell(){return this.view.cell}getDefinition(e){return this.cell.getAttrDefinition(e)}processAttrs(e,t){let o,c,d,f,v;const x=[];return Object.keys(t).forEach(w=>{const _=t[w],A=this.getDefinition(w),P=er(xc.isValidDefinition,this.view,A,_,{elem:e,attrs:t,cell:this.cell,view:this.view});if(A&&P)typeof A=="string"?(o==null&&(o={}),o[A]=_):_!==null&&x.push({name:w,definition:A});else{o==null&&(o={});const V=nf.CASE_SENSITIVE_ATTR.includes(w)?w:NE(w);o[V]=_}}),x.forEach(({name:w,definition:_})=>{const A=t[w];typeof _.set=="function"&&(!jm(e)&&nf.DELAY_ATTRS.includes(w)?(v==null&&(v={}),v[w]=A):(c==null&&(c={}),c[w]=A)),typeof _.offset=="function"&&(d==null&&(d={}),d[w]=A),typeof _.position=="function"&&(f==null&&(f={}),f[w]=A)}),{raw:t,normal:o,set:c,offset:d,position:f,delay:v}}mergeProcessedAttrs(e,t){e.set=Object.assign(Object.assign({},e.set),t.set),e.position=Object.assign(Object.assign({},e.position),t.position),e.offset=Object.assign(Object.assign({},e.offset),t.offset);const o=e.normal&&e.normal.transform;o!=null&&t.normal&&(t.normal.transform=o),e.normal=t.normal}findAttrs(e,t,o,c){const d=[],f=new L2;return Object.keys(e).forEach(v=>{const x=e[v];if(!Do(x))return;const{isCSSSelector:w,elems:_}=Di.find(v,t,c);o[v]=_;for(let A=0,P=_.length;A<P;A+=1){const V=_[A],J=c&&c[v]===V,ee=f.get(V);if(ee){ee.array||(d.push(V),ee.array=!0,ee.attrs=[ee.attrs],ee.priority=[ee.priority]);const ge=ee.attrs,Se=ee.priority;if(J)ge.unshift(x),Se.unshift(-1);else{const Re=_f(Se,w?-1:P);ge.splice(Re,0,x),Se.splice(Re,0,P)}}else f.set(V,{elem:V,attrs:x,priority:J?-1:P,array:!1})}}),d.forEach(v=>{const x=f.get(v),w=x.attrs;x.attrs=w.reduceRight((_,A)=>Bo(_,A),{})}),f}updateRelativeAttrs(e,t,o,c){const d=t.raw||{};let f=t.normal||{};const v=t.set,x=t.position,w=t.offset,_=t.delay,A=()=>({elem:e,cell:this.cell,view:this.view,attrs:d,refBBox:o.clone()});if(v!=null&&Object.keys(v).forEach(Qe=>{const bt=v[Qe],Pt=this.getDefinition(Qe);if(Pt!=null){const Kt=er(Pt.set,this.view,bt,A());typeof Kt=="object"?f=Object.assign(Object.assign({},f),Kt):Kt!=null&&(f[Qe]=Kt)}}),jm(e)){this.view.setAttrs(f,e);return}const P=f.transform,V=P?`${P}`:null,J=qm(V),ee=new Ve(J.e,J.f);P&&(delete f.transform,J.e=0,J.f=0);let ge=1,Se=1;if(x||w){const Qe=this.view.getScaleOfElement(e,c.scalableNode);ge=Qe.sx,Se=Qe.sy}let Re=!1;x!=null&&Object.keys(x).forEach(Qe=>{const bt=x[Qe],Pt=this.getDefinition(Qe);if(Pt!=null){const Kt=er(Pt.position,this.view,bt,A());Kt!=null&&(Re=!0,ee.translate(Ve.create(Kt).scale(ge,Se)))}}),this.view.setAttrs(f,e);let _e=!1;if(w!=null){const Qe=this.view.getBoundingRectOfElement(e);if(Qe.width>0&&Qe.height>0){const bt=nu(Qe,J).scale(1/ge,1/Se);Object.keys(w).forEach(Pt=>{const Kt=w[Pt],kn=this.getDefinition(Pt);if(kn!=null){const wn=er(kn.offset,this.view,Kt,{elem:e,cell:this.cell,view:this.view,attrs:d,refBBox:bt});wn!=null&&(_e=!0,ee.translate(Ve.create(wn).scale(ge,Se)))}})}}(P!=null||Re||_e)&&(ee.round(1),J.e=ee.x,J.f=ee.y,e.setAttribute("transform",r0(J)));const Ue=()=>{_!=null&&Object.keys(_).forEach(Qe=>{const bt=_[Qe],Pt=this.getDefinition(Qe);if(Pt!=null){const Kt=er(Pt.set,this.view,bt,A());typeof Kt=="object"?this.view.setAttrs(Kt,e):Kt!=null&&this.view.setAttrs({[Qe]:Kt},e)}})};c.forceSync?Ue():ty.scheduleTask(Ue)}update(e,t,o){const c={},d=this.findAttrs(o.attrs||t,e,c,o.selectors),f=o.attrs?this.findAttrs(t,e,c,o.selectors):d,v=[];d.each(_=>{const A=_.elem,P=_.attrs,V=this.processAttrs(A,P);if(V.set==null&&V.position==null&&V.offset==null&&V.delay==null)this.view.setAttrs(V.normal,A);else{const J=f.get(A),ee=J?J.attrs:null,ge=ee&&P.ref==null?ee.ref:P.ref;let Se;if(ge){if(Se=(c[ge]||this.view.find(ge,e,o.selectors))[0],!Se)throw new Error(`"${ge}" reference does not exist.`)}else Se=null;const Re={node:A,refNode:Se,attributes:ee,processedAttributes:V},_e=v.findIndex(Ue=>Ue.refNode===A);_e>-1?v.splice(_e,0,Re):v.push(Re)}});const x=new L2;let w;v.forEach(_=>{const A=_.node,P=_.refNode;let V;const J=P!=null&&o.rotatableNode!=null&&Um(o.rotatableNode,P);if(P&&(V=x.get(P)),!V){const Re=J?o.rotatableNode:e;V=P?rc(P,{target:Re}):o.rootBBox,P&&x.set(P,V)}let ee;o.attrs&&_.attributes?(ee=this.processAttrs(A,_.attributes),this.mergeProcessedAttrs(ee,_.processedAttributes)):ee=_.processedAttributes;let ge=V;J&&o.rotatableNode!=null&&!o.rotatableNode.contains(A)&&(w||(w=qm(oo(o.rotatableNode,"transform"))),ge=nu(V,w)),v.find(Re=>Re.refNode===A)&&(o.forceSync=!0),this.updateRelativeAttrs(A,ee,ge,o)})}}(function(l){l.CASE_SENSITIVE_ATTR=["viewBox"],l.DELAY_ATTRS=["text","textWrap","sourceMarker","targetMarker"]})(nf||(nf={}));class mv{constructor(e,t,o=[]){this.view=e;const c={},d={};let f=0;Object.keys(t).forEach(x=>{let w=t[x];Array.isArray(w)||(w=[w]),w.forEach(_=>{let A=c[_];A||(f+=1,A=c[_]=1<<f),d[x]|=A})});let v=o;if(Array.isArray(v)||(v=[v]),v.forEach(x=>{c[x]||(f+=1,c[x]=1<<f)}),f>25)throw new Error("Maximum number of flags exceeded.");this.flags=c,this.attrs=d,this.bootstrap=o}get cell(){return this.view.cell}getFlag(e){const t=this.flags;return t==null?0:Array.isArray(e)?e.reduce((o,c)=>o|t[c],0):t[e]|0}hasAction(e,t){return e&this.getFlag(t)}removeAction(e,t){return e^e&this.getFlag(t)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let e=0;return this.attrs&&Object.keys(this.attrs).forEach(t=>{this.cell.hasChanged(t)&&(e|=this.attrs[t])}),e}}var CO=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class Gs extends Di{constructor(e,t={}){super(),this.cell=e,this.options=this.ensureOptions(t),this.graph=this.options.graph,this.attr=new nf(this),this.flag=new mv(this,this.options.actions,this.options.bootstrap),this.cache=new Sl(this),this.setContainer(this.ensureContainer()),this.setup(),this.$(this.container).data("view",this),this.init()}static getDefaults(){return this.defaults}static config(e){this.defaults=this.getOptions(e)}static getOptions(e){const t=(w,_)=>_!=null?zt([...Array.isArray(w)?w:[w],...Array.isArray(_)?_:[_]]):Array.isArray(w)?[...w]:[w],o=zo(this.getDefaults()),{bootstrap:c,actions:d,events:f,documentEvents:v}=e,x=CO(e,["bootstrap","actions","events","documentEvents"]);return c&&(o.bootstrap=t(o.bootstrap,c)),d&&Object.keys(d).forEach(w=>{const _=d[w],A=o.actions[w];_&&A?o.actions[w]=t(A,_):_&&(o.actions[w]=t(_))}),f&&(o.events=Object.assign(Object.assign({},o.events),f)),e.documentEvents&&(o.documentEvents=Object.assign(Object.assign({},o.documentEvents),v)),Bo(o,x)}get[Symbol.toStringTag](){return Gs.toStringTag}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(e){return this.getConstructor().getOptions(e)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return Di.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(e){if(this.container!==e){this.undelegateEvents(),this.container=e,this.options.events!=null&&this.delegateEvents(this.options.events);const t=this.getContainerAttrs();t!=null&&this.setAttrs(t,e);const o=this.getContainerStyle();o!=null&&this.setStyle(o,e);const c=this.getContainerClassName();c!=null&&this.addClass(c,e)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(e,t={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(e){return this.flag.getFlag(e)}hasAction(e,t){return this.flag.hasAction(e,t)}removeAction(e,t){return this.flag.removeAction(e,t)}handleAction(e,t,o,c){if(this.hasAction(e,t)){o();const d=[t];return c&&(typeof c=="string"?d.push(c):d.push(...c)),this.removeAction(e,d)}return e}setup(){this.cell.on("changed",({options:e})=>this.onAttrsChange(e))}onAttrsChange(e){let t=this.flag.getChangedFlag();e.updated||!t||(e.dirty&&this.hasAction(t,"update")&&(t|=this.getFlag("render")),e.toolId&&(e.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,t,this.priority,e))}parseJSONMarkup(e,t){const o=Ei.parseJSONMarkup(e),c=o.selectors,d=this.rootSelector;if(t&&d){if(c[d])throw new Error("Invalid root selector");c[d]=t}return o}can(e){let t=this.graph.options.interacting;if(typeof t=="function"&&(t=er(t,this.graph,this)),typeof t=="object"){let o=t[e];return typeof o=="function"&&(o=er(o,this.graph,this)),o!==!1}return typeof t=="boolean"?t:!1}cleanCache(){return this.cache.clean(),this}getCache(e){return this.cache.get(e)}getDataOfElement(e){return this.cache.getData(e)}getMatrixOfElement(e){return this.cache.getMatrix(e)}getShapeOfElement(e){return this.cache.getShape(e)}getScaleOfElement(e,t){let o,c;if(t&&t.contains(e)){const d=Xh(t);o=1/d.sx,c=1/d.sy}else o=1,c=1;return{sx:o,sy:c}}getBoundingRectOfElement(e){return this.cache.getBoundingRect(e)}getBBoxOfElement(e){const t=this.getBoundingRectOfElement(e),o=this.getMatrixOfElement(e),c=this.getRootRotatedMatrix(),d=this.getRootTranslatedMatrix();return nu(t,d.multiply(c).multiply(o))}getUnrotatedBBoxOfElement(e){const t=this.getBoundingRectOfElement(e),o=this.getMatrixOfElement(e),c=this.getRootTranslatedMatrix();return nu(t,c.multiply(o))}getBBox(e={}){let t;if(e.useCellGeometry){const o=this.cell,c=o.isNode()?o.getAngle():0;t=o.getBBox().bbox(c)}else t=this.getBBoxOfElement(this.container);return this.graph.localToGraph(t)}getRootTranslatedMatrix(){const e=this.cell,t=e.isNode()?e.getPosition():{x:0,y:0};return nc().translate(t.x,t.y)}getRootRotatedMatrix(){let e=nc();const t=this.cell,o=t.isNode()?t.getAngle():0;if(o){const c=t.getBBox(),d=c.width/2,f=c.height/2;e=e.translate(d,f).rotate(o).translate(-d,-f)}return e}findMagnet(e=this.container){return this.findByAttr("magnet",e)}updateAttrs(e,t,o={}){o.rootBBox==null&&(o.rootBBox=new Ln),o.selectors==null&&(o.selectors=this.selectors),this.attr.update(e,t,o)}isEdgeElement(e){return this.cell.isEdge()&&(e==null||e===this.container)}prepareHighlight(e,t={}){const o=e&&this.$(e)[0]||this.container;return t.partial=o===this.container,o}highlight(e,t={}){const o=this.prepareHighlight(e,t);return this.notify("cell:highlight",{magnet:o,options:t,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:o,options:t,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:o,options:t,view:this,node:this.cell,cell:this.cell}),this}unhighlight(e,t={}){const o=this.prepareHighlight(e,t);return this.notify("cell:unhighlight",{magnet:o,options:t,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:o,options:t,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:o,options:t,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(e,t){}getEdgeTerminal(e,t,o,c,d){const f=this.cell,v=this.findAttr("port",e),x=e.getAttribute("data-selector"),w={cell:f.id};return x!=null&&(w.magnet=x),v!=null?(w.port=v,f.isNode()&&!f.hasPort(v)&&x==null&&(w.selector=this.getSelector(e))):x==null&&this.container!==e&&(w.selector=this.getSelector(e)),this.customizeEdgeTerminal(w,e,t,o,c,d)}customizeEdgeTerminal(e,t,o,c,d,f){const v=d.getStrategy()||this.graph.options.connecting.strategy;if(v){const x=typeof v=="string"?v:v.name,w=typeof v=="string"?{}:v.args||{},_=Du.registry;if(x){const A=_.get(x);if(A==null)return _.onNotFound(x);const P=er(A,this.graph,e,this,t,new Ve(o,c),d,f,w);if(P)return P}}return e}getMagnetFromEdgeTerminal(e){const t=this.cell,o=this.container,c=e.port;let d=e.magnet,f;return c!=null&&t.isNode()&&t.hasPort(c)?f=this.findPortElem(c,d)||o:(d||(d=e.selector),!d&&c!=null&&(d=`[port="${c}"]`),f=this.findOne(d,o,this.selectors)),f}animate(e,t){const o=typeof e=="string"?this.findOne(e):e;if(o==null)throw new Error("Invalid animation element.");const c=o.parentNode,d=()=>{c||gd(o)},f=ir.create(o);c||f.appendTo(this.graph.view.stage);const v=t.complete;return t.complete=x=>{d(),v&&v(x)},f.animate(t)}animateTransform(e,t){const o=typeof e=="string"?this.findOne(e):e;if(o==null)throw new Error("Invalid animation element.");const c=o.parentNode,d=()=>{c||gd(o)},f=ir.create(o);c||f.appendTo(this.graph.view.stage);const v=t.complete;return t.complete=x=>{d(),v&&v(x)},f.animateTransform(t)}hasTools(e){const t=this.tools;return t==null?!1:e==null?!0:t.name===e}addTools(e){if(!this.can("toolsAddable"))return this;if(this.removeTools(),e){const t=Aa.isToolsView(e)?e:new Aa(e);this.tools=t,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),t.config({view:this}),t.mount()}return this}updateTools(e={}){return this.tools&&this.tools.update(e),this}removeTools(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const e=this.cell.getTools();return this.addTools(e),this}notify(e,t){return this.trigger(e,t),this.graph.trigger(e,t),this}getEventArgs(e,t,o){const c=this,d=c.cell;return t==null||o==null?{e,view:c,cell:d}:{e,x:t,y:o,view:c,cell:d}}onClick(e,t,o){this.notify("cell:click",this.getEventArgs(e,t,o))}onDblClick(e,t,o){this.notify("cell:dblclick",this.getEventArgs(e,t,o))}onContextMenu(e,t,o){this.notify("cell:contextmenu",this.getEventArgs(e,t,o))}onMouseDown(e,t,o){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(e,t,o))}onMouseUp(e,t,o){this.notify("cell:mouseup",this.getEventArgs(e,t,o)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(e,t,o){this.notify("cell:mousemove",this.getEventArgs(e,t,o))}onMouseOver(e){this.notify("cell:mouseover",this.getEventArgs(e))}onMouseOut(e){this.notify("cell:mouseout",this.getEventArgs(e))}onMouseEnter(e){this.notify("cell:mouseenter",this.getEventArgs(e))}onMouseLeave(e){this.notify("cell:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,o,c){this.notify("cell:mousewheel",Object.assign({delta:c},this.getEventArgs(e,t,o)))}onCustomEvent(e,t,o,c){this.notify("cell:customevent",Object.assign({name:t},this.getEventArgs(e,o,c))),this.notify(t,Object.assign({},this.getEventArgs(e,o,c)))}onMagnetMouseDown(e,t,o,c){}onMagnetDblClick(e,t,o,c){}onMagnetContextMenu(e,t,o,c){}onLabelMouseDown(e,t,o){}checkMouseleave(e){const t=this.graph;t.renderer.isAsync()&&t.renderer.dumpView(this);const o=this.getEventTarget(e,{fromPoint:!0}),c=t.renderer.findViewByElem(o);c!==this&&(this.onMouseLeave(e),c&&c.onMouseEnter(e))}}Gs.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},function(l){l.Flag=mv,l.Attr=nf}(Gs||(Gs={})),function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.isNodeView=="function"&&typeof c.isEdgeView=="function"&&typeof c.confirmUpdate=="function"}l.isCellView=e}(Gs||(Gs={})),function(l){function e(o){return function(c){c.config({priority:o})}}l.priority=e;function t(o){return function(c){c.config({bootstrap:o})}}l.bootstrap=t}(Gs||(Gs={})),function(l){l.registry=Ss.create({type:"view"})}(Gs||(Gs={}));class Aa extends Di{constructor(e={}){super(),this.svgContainer=this.createContainer(!0,e),this.htmlContainer=this.createContainer(!1,e),this.config(e)}get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return Aa.toStringTag}createContainer(e,t){const o=e?Di.createElement("g",!0):Di.createElement("div",!1);return io(o,this.prefixClassName("cell-tools")),t.className&&io(o,t.className),o}config(e){if(this.options=Object.assign(Object.assign({},this.options),e),!Gs.isCellView(e.view)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?(io(this.svgContainer,this.prefixClassName("edge-tools")),io(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(io(this.svgContainer,this.prefixClassName("node-tools")),io(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const t=this.options.items;if(!Array.isArray(t))return this;this.tools=[];const o=[];t.forEach(c=>{Aa.ToolItem.isToolItem(c)?c.name==="vertices"?o.unshift(c):o.push(c):(typeof c=="object"?c.name:c)==="vertices"?o.unshift(c):o.push(c)});for(let c=0;c<o.length;c+=1){const d=o[c];let f;if(Aa.ToolItem.isToolItem(d))f=d;else{const v=typeof d=="object"?d.name:d,x=typeof d=="object"?d.args||{}:{};if(v){if(this.cell.isNode()){const w=sg.registry.get(v);if(w)f=new w(x);else return sg.registry.onNotFound(v)}else if(this.cell.isEdge()){const w=ag.registry.get(v);if(w)f=new w(x);else return ag.registry.onNotFound(v)}}}f&&(f.config(this.cellView,this),f.render(),(f.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer).appendChild(f.container),this.tools.push(f))}return this}update(e={}){const t=this.tools;return t&&t.forEach(o=>{e.toolId!==o.cid&&o.isVisible()&&o.update()}),this}focus(e){const t=this.tools;return t&&t.forEach(o=>{e===o?o.show():o.hide()}),this}blur(e){const t=this.tools;return t&&t.forEach(o=>{o!==e&&!o.isVisible()&&(o.show(),o.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const e=this.tools;return e&&(e.forEach(t=>t.remove()),this.tools=null),gd(this.svgContainer),gd(this.htmlContainer),super.remove()}mount(){const e=this.tools,t=this.cellView;if(t&&e){const o=e.some(d=>d.options.isSVGElement!==!1),c=e.some(d=>d.options.isSVGElement===!1);o&&(this.options.local?t.container:t.graph.view.decorator).appendChild(this.svgContainer),c&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&c.graph!=null&&c.cell!=null&&typeof c.config=="function"&&typeof c.update=="function"&&typeof c.focus=="function"&&typeof c.blur=="function"&&typeof c.show=="function"&&typeof c.hide=="function"}l.isToolsView=e})(Aa||(Aa={})),function(l){class e extends Di{constructor(o={}){super(),this.visible=!0,this.options=this.getOptions(o),this.container=Di.createElement(this.options.tagName||"g",this.options.isSVGElement!==!1),io(this.container,this.prefixClassName("cell-tool")),typeof this.options.className=="string"&&io(this.container,this.options.className),this.init()}static getDefaults(){return this.defaults}static config(o){this.defaults=this.getOptions(o)}static getOptions(o){return Bo(zo(this.getDefaults()),o)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return e.toStringTag}init(){}getOptions(o){return this.constructor.getOptions(o)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(o,c){return this.cellView=o,this.parent=c,this.stamp(this.container),this.cell.isEdge()?io(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&io(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const o=this.options.markup;if(o){const c=Ei.isStringMarkup(o)?Ei.parseStringMarkup(o):Ei.parseJSONMarkup(o);this.container.appendChild(c.fragment),this.childNodes=c.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(o=this.container){o&&o.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return!!this.visible}focus(){const o=this.options.focusOpacity;return o!=null&&Number.isFinite(o)&&(this.container.style.opacity=`${o}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(o){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(o,this.cellView)}}e.defaults={isSVGElement:!0,tagName:"g"},l.ToolItem=e,function(t){let o=0;function c(f){return f?Yp(f):(o+=1,`CustomTool${o}`)}function d(f){const v=yc(c(f.name),this);return v.config(f),v}t.define=d}(e=l.ToolItem||(l.ToolItem={})),function(t){t.toStringTag=`X6.${t.name}`;function o(c){if(c==null)return!1;if(c instanceof t)return!0;const d=c[Symbol.toStringTag],f=c;return(d==null||d===t.toStringTag)&&f.graph!=null&&f.cell!=null&&typeof f.config=="function"&&typeof f.update=="function"&&typeof f.focus=="function"&&typeof f.blur=="function"&&typeof f.show=="function"&&typeof f.hide=="function"&&typeof f.isVisible=="function"}t.isToolItem=o}(e=l.ToolItem||(l.ToolItem={}))}(Aa||(Aa={}));function cy(l,e,t,o){return er(Du.presets.pinRelative,this.graph,{},e,t,l,this.cell,o,{}).anchor}function N_(l,e){return e?l.cell.getBBox():l.cell.isEdge()?l.getConnection().bbox():l.getUnrotatedBBoxOfElement(l.container)}class np extends Aa.ToolItem{onRender(){io(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();eg(this.container,t,{absolute:!0})}getNodeMatrix(){const e=this.cellView,t=this.options;let{x:o=0,y:c=0}=t;const{offset:d,useCellGeometry:f,rotate:v}=t;let x=N_(e,f);const w=e.cell.getAngle();v||(x=x.bbox(w));let _=0,A=0;typeof d=="number"?(_=d,A=d):typeof d=="object"&&(_=d.x,A=d.y),o=sh(o,x.width),c=sh(c,x.height);let P=nc().translate(x.x+x.width/2,x.y+x.height/2);return v&&(P=P.rotate(w)),P=P.translate(o+_-x.width/2,c+A-x.height/2),P}getEdgeMatrix(){const e=this.cellView,t=this.options,{offset:o=0,distance:c=0,rotate:d}=t;let f,v,x;pd(c)?f=e.getTangentAtRatio(parseFloat(c)/100):f=e.getTangentAtLength(c),f?(v=f.start,x=f.vector().vectorAngle(new Ve(1,0))||0):(v=e.getConnection().start,x=0);let w=nc().translate(v.x,v.y).rotate(x);return typeof o=="object"?w=w.translate(o.x||0,o.y||0):w=w.translate(0,o),d||(w=w.rotate(-x)),w}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.options.onClick;typeof t=="function"&&er(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(l){l.config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(np||(np={})),function(l){l.Remove=l.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick({view:e,btn:t}){t.parent.remove(),e.cell.remove({ui:!0,toolId:t.cid})}})}(np||(np={}));var WC=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class G2 extends Aa.ToolItem{onRender(){if(io(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const e=this.options.attrs,{class:t}=e,o=WC(e,["class"]);oo(this.container,t0(o)),t&&io(this.container,t)}this.update()}update(){const e=this.cellView,t=this.options,{useCellGeometry:o,rotate:c}=t,d=xl(t.padding);let f=N_(e,o).moveAndExpand({x:-d.left,y:-d.top,width:d.left+d.right,height:d.top+d.bottom});const v=e.cell;if(v.isNode()){const x=v.getAngle();if(x)if(c){const w=v.getBBox().getCenter();dv(this.container,x,w.x,w.y,{absolute:!0})}else f=f.bbox(x)}return oo(this.container,f.toJSON()),this}}(function(l){l.config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(G2||(G2={}));class ly extends Aa.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}renderHandles(){const e=this.vertices;for(let t=0,o=e.length;t<o;t+=1){const c=e[t],d=this.options.createHandle,f=this.options.processHandle,v=d({index:t,graph:this.graph,guard:x=>this.guard(x),attrs:this.options.attrs||{}});f&&f(v),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:v}),v.updatePosition(c.x,c.y),this.stamp(v.container),this.container.appendChild(v.container),this.handles.push(v),this.startHandleListening(v)}}updateHandles(){const e=this.vertices;for(let t=0,o=e.length;t<o;t+=1){const c=e[t],d=this.handles[t];d&&d.updatePosition(c.x,c.y)}}updatePath(){const e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}stopHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}getNeighborPoints(e){const t=this.cellView,o=this.vertices,c=e>0?o[e-1]:t.sourceAnchor,d=e<o.length-1?o[e+1]:t.targetAnchor;return{prev:Ve.create(c),next:Ve.create(d)}}getMouseEventArgs(e){const t=this.normalizeEvent(e),{x:o,y:c}=this.graph.snapToGrid(t.clientX,t.clientY);return{e:t,x:o,y:c}}onHandleChange({e}){this.focus();const t=this.cellView;if(t.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:o,x:c,y:d}=this.getMouseEventArgs(e);t.notifyMouseDown(o,c,d)}}onHandleChanging({handle:e,e:t}){const o=this.cellView,c=e.options.index,{e:d,x:f,y:v}=this.getMouseEventArgs(t),x={x:f,y:v};this.snapVertex(x,c),o.cell.setVertexAt(c,x,{ui:!0,toolId:this.cid}),e.updatePosition(x.x,x.y),this.options.stopPropagation||o.notifyMouseMove(d,f,v)}onHandleChanged({e}){const t=this.options,o=this.cellView;if(t.addable&&this.updatePath(),!t.removeRedundancies)return;o.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),o.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(e).vertexAdded&&o.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});const{e:d,x:f,y:v}=this.getMouseEventArgs(e);this.options.stopPropagation||o.notifyMouseUp(d,f,v),o.checkMouseleave(d),t.onChanged&&t.onChanged({edge:o.cell,edgeView:o})}snapVertex(e,t){const o=this.options.snapRadius||0;if(o>0){const c=this.getNeighborPoints(t),d=c.prev,f=c.next;Math.abs(e.x-d.x)<o?e.x=d.x:Math.abs(e.x-f.x)<o&&(e.x=f.x),Math.abs(e.y-d.y)<o?e.y=c.prev.y:Math.abs(e.y-f.y)<o&&(e.y=f.y)}}onHandleRemove({handle:e,e:t}){if(this.options.removable){const o=e.options.index,c=this.cellView;c.cell.removeVertexAt(o,{ui:!0}),this.options.addable&&this.updatePath(),c.checkMouseleave(this.normalizeEvent(t))}}onPathMouseDown(e){const t=this.cellView;if(this.guard(e)||!this.options.addable||!t.can("vertexAddable"))return;e.stopPropagation(),e.preventDefault();const o=this.normalizeEvent(e),c=this.graph.snapToGrid(o.clientX,o.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const d=t.getVertexIndex(c.x,c.y);this.snapVertex(c,d),t.cell.insertVertex(c,d,{ui:!0,toolId:this.cid}),this.render();const f=this.handles[d];this.eventData(o,{vertexAdded:!0}),f.onMouseDown(o)}onRemove(){this.resetHandles()}}(function(l){class e extends Di{constructor(o){super(),this.options=o,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}get graph(){return this.options.graph}render(){this.container=Di.createElement("circle",!0);const o=this.options.attrs;if(typeof o=="function"){const c=l.getDefaults();this.setAttrs(Object.assign(Object.assign({},c.attrs),o(this)))}else this.setAttrs(o);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(o,c){this.setAttrs({cx:o,cy:c})}onMouseDown(o){this.options.guard(o)||(o.stopPropagation(),o.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},o.data),this.emit("change",{e:o,handle:this}))}onMouseMove(o){this.emit("changing",{e:o,handle:this})}onMouseUp(o){this.emit("changed",{e:o,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(o){this.emit("remove",{e:o,handle:this})}}l.Handle=e})(ly||(ly={})),function(l){const e=aa.prefix("edge-tool-vertex-path");l.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:t=>new l.Handle(t),markup:[{tagName:"path",selector:"connection",className:e,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${e}`]:"onPathMouseDown",[`touchstart .${e}`]:"onPathMouseDown"}})}(ly||(ly={}));class uy extends Aa.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){io(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const e=this.cellView,t=[...this.vertices];t.unshift(e.sourcePoint),t.push(e.targetPoint);for(let o=0,c=t.length;o<c-1;o+=1){const d=t[o],f=t[o+1],v=this.renderHandle(d,f,o);this.stamp(v.container),this.handles.push(v)}return this}renderHandle(e,t,o){const c=this.options.createHandle({index:o,graph:this.graph,guard:d=>this.guard(d),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(c),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:c}),this.updateHandle(c,e,t),this.container.appendChild(c.container),this.startHandleListening(c),c}startHandleListening(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}stopHandleListening(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}shiftHandleIndexes(e){const t=this.handles;for(let o=0,c=t.length;o<c;o+=1)t[o].options.index+=e}resetAnchor(e,t){const o=this.cellView.cell,c={ui:!0,toolId:this.cid};t?o.prop([e,"anchor"],t,c):o.removeProp([e,"anchor"],c)}snapHandle(e,t,o){const c=e.options.axis,d=e.options.index,x=this.cellView.cell.getVertices(),w=x[d-2]||o.sourceAnchor,_=x[d+1]||o.targetAnchor,A=this.options.snapRadius;return Math.abs(t[c]-w[c])<A?t[c]=w[c]:Math.abs(t[c]-_[c])<A&&(t[c]=_[c]),t}onHandleChanging({handle:e,e:t}){const o=this.graph,c=this.options,d=this.cellView,f=c.anchor,v=e.options.axis,x=e.options.index-1,w=this.getEventData(t),_=this.normalizeEvent(t),A=o.snapToGrid(_.clientX,_.clientY),P=this.snapHandle(e,A.clone(),w),V=zo(this.vertices);let J=V[x],ee=V[x+1];const ge=d.sourceView,Se=d.sourceBBox;let Re=!1,_e=!1;if(J?x===0?Se.containsPoint(J)?(V.shift(),this.shiftHandleIndexes(-1),Re=!0):(J[v]=P[v],_e=!0):J[v]=P[v]:(J=d.sourceAnchor.toJSON(),J[v]=P[v],Se.containsPoint(J)?Re=!0:(V.unshift(J),this.shiftHandleIndexes(1),_e=!0)),typeof f=="function"&&ge){if(Re){const Kt=w.sourceAnchor.clone();Kt[v]=P[v];const kn=er(f,d,Kt,ge,d.sourceMagnet||ge.container,"source",d,this);this.resetAnchor("source",kn)}_e&&this.resetAnchor("source",w.sourceAnchorDef)}const Ue=d.targetView,Qe=d.targetBBox;let bt=!1,Pt=!1;if(ee?x===V.length-2?Qe.containsPoint(ee)?(V.pop(),bt=!0):(ee[v]=P[v],Pt=!0):ee[v]=P[v]:(ee=d.targetAnchor.toJSON(),ee[v]=P[v],Qe.containsPoint(ee)?bt=!0:(V.push(ee),Pt=!0)),typeof f=="function"&&Ue){if(bt){const Kt=w.targetAnchor.clone();Kt[v]=P[v];const kn=er(f,d,Kt,Ue,d.targetMagnet||Ue.container,"target",d,this);this.resetAnchor("target",kn)}Pt&&this.resetAnchor("target",w.targetAnchorDef)}Ve.equalPoints(V,this.vertices)||this.cellView.cell.setVertices(V,{ui:!0,toolId:this.cid}),this.updateHandle(e,J,ee,0),c.stopPropagation||d.notifyMouseMove(_,A.x,A.y)}onHandleChange({handle:e,e:t}){const o=this.options,c=this.handles,d=this.cellView,f=e.options.index;if(!!Array.isArray(c)){for(let v=0,x=c.length;v<x;v+=1)v!==f&&c[v].hide();if(this.focus(),this.setEventData(t,{sourceAnchor:d.sourceAnchor.clone(),targetAnchor:d.targetAnchor.clone(),sourceAnchorDef:zo(this.cell.prop(["source","anchor"])),targetAnchorDef:zo(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!o.stopPropagation){const v=this.normalizeEvent(t),x=this.graph.snapToGrid(v.clientX,v.clientY);d.notifyMouseDown(v,x.x,x.y)}}}onHandleChanged({e}){const t=this.options,o=this.cellView;t.removeRedundancies&&o.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const c=this.normalizeEvent(e),d=this.graph.snapToGrid(c.clientX,c.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),t.stopPropagation||o.notifyMouseUp(c,d.x,d.y),o.checkMouseleave(c),t.onChanged&&t.onChanged({edge:o.cell,edgeView:o})}updateHandle(e,t,o,c=0){const d=this.options.precision||0,f=Math.abs(t.x-o.x)<d,v=Math.abs(t.y-o.y)<d;if(f||v){const x=new rr(t,o);if(x.length()<this.options.threshold)e.hide();else{const _=x.getCenter(),A=f?"x":"y";_[A]+=c||0;const P=x.vector().vectorAngle(new Ve(1,0));e.updatePosition(_.x,_.y,P,this.cellView),e.show(),e.options.axis=A}}else e.hide()}onRemove(){this.resetHandles()}}(function(l){class e extends Di{constructor(o){super(),this.options=o,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=Di.createElement("rect",!0);const o=this.options.attrs;if(typeof o=="function"){const c=l.getDefaults();this.setAttrs(Object.assign(Object.assign({},c.attrs),o(this)))}else this.setAttrs(o);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(o,c,d,f){const v=f.getClosestPoint(new Ve(o,c))||new Ve(o,c);let x=nc().translate(v.x,v.y);if(v.equals({x:o,y:c}))x=x.rotate(d);else{let _=new rr(o,c,v.x,v.y).vector().vectorAngle(new Ve(1,0));_!==0&&(_+=90),x=x.rotate(_)}this.setAttrs({transform:r0(x),cursor:d%180===0?"row-resize":"col-resize"})}onMouseDown(o){this.options.guard(o)||(this.trigger("change",{e:o,handle:this}),o.stopPropagation(),o.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},o.data))}onMouseMove(o){this.emit("changing",{e:o,handle:this})}onMouseUp(o){this.emit("changed",{e:o,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}l.Handle=e})(uy||(uy={})),function(l){l.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:e=>new l.Handle(e),anchor:cy})}(uy||(uy={}));class dy extends Aa.ToolItem{get type(){return this.options.type}onRender(){io(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){const e=this.type;return this.cellView.getTerminalView(e)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const e=this.childNodes;if(!e)return;const t=e.anchor;if(!t)return;const o=this.type,c=this.cellView,d=this.options,f=c.getTerminalAnchor(o),v=c.cell.prop([o,"anchor"]);t.setAttribute("transform",`translate(${f.x}, ${f.y})`);const x=v?d.customAnchorAttrs:d.defaultAnchorAttrs;x&&Object.keys(x).forEach(w=>{t.setAttribute(w,x[w])})}updateArea(){const e=this.childNodes;if(!e)return;const t=e.area;if(!t)return;const o=this.type,c=this.cellView,d=c.getTerminalView(o);if(d){const f=d.cell,v=c.getTerminalMagnet(o);let x=this.options.areaPadding||0;Number.isFinite(x)||(x=0);let w,_,A;d.isEdgeElement(v)?(w=d.getBBox(),_=0,A=w.getCenter()):(w=d.getUnrotatedBBoxOfElement(v),_=f.getAngle(),A=w.getCenter(),_&&A.rotate(-_,f.getBBox().getCenter())),w.inflate(x),oo(t,{x:-w.width/2,y:-w.height/2,width:w.width,height:w.height,transform:`translate(${A.x}, ${A.y}) rotate(${_})`})}}toggleArea(e){if(this.childNodes){const t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}onMouseDown(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(e){const t=this.type,o=this.cell;e?o.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):o.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(e){const t=this.type,o=this.cellView,c=o.getTerminalView(t);if(c==null)return;const d=this.normalizeEvent(e),f=c.cell,v=o.getTerminalMagnet(t);let x=this.graph.clientToLocal(d.clientX,d.clientY);const w=this.options.snap;if(typeof w=="function"){const P=er(w,o,x,c,v,t,o,this);x=Ve.create(P)}if(this.options.restrictArea)if(c.isEdgeElement(v)){const P=c.getClosestPoint(x);P&&(x=P)}else{const P=c.getUnrotatedBBoxOfElement(v),V=f.getAngle(),J=f.getBBox().getCenter(),ee=x.clone().rotate(V,J);P.containsPoint(ee)||(x=P.getNearestPointToPoint(ee).rotate(-V,J))}let _;const A=this.options.anchor;typeof A=="function"&&(_=er(A,o,x,c,v,t,o,this)),this.resetAnchor(_),this.update()}onMouseUp(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);const t=this.cellView;this.options.removeRedundancies&&t.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const e=this.options.resetAnchor;e&&this.resetAnchor(e===!0?void 0:e),this.update()}}(function(l){l.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:cy,snap(e,t,o,c,d,f){const v=f.options.snapRadius||0,x=c==="source",w=x?0:-1,_=this.cell.getVertexAt(w)||this.getTerminalAnchor(x?"target":"source");return _&&(Math.abs(_.x-e.x)<v&&(e.x=_.x),Math.abs(_.y-e.y)<v&&(e.y=_.y)),e}})})(dy||(dy={}));const yv=dy.define({name:"source-anchor",type:"source"}),wO=dy.define({name:"target-anchor",type:"target"});var EO=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class F2 extends Aa.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const e=this.options.attrs,{class:t}=e,o=EO(e,["class"]);this.setAttrs(o,this.container),t&&io(this.container,t)}}onRender(){io(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const e=this.ratio,t=this.cellView,o=t.getTangentAtRatio(e),c=o?o.start:t.getPointAtRatio(e),d=o&&o.vector().vectorAngle(new Ve(1,0))||0;if(!c)return this;const f=nc().translate(c.x,c.y).rotate(d);return eg(this.container,f,{absolute:!0}),this}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const o=this.graph.snapToGrid(e.clientX,e.clientY),c=t.prepareArrowheadDragging(this.type,{x:o.x,y:o.y,options:{toolId:this.cid}});this.cellView.setEventData(e,c),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(e){const t=this.normalizeEvent(e),o=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,o.x,o.y),this.update()}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),o=this.cellView,c=this.graph.snapToGrid(t.clientX,t.clientY);o.onMouseUp(t,c.x,c.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",o.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}(function(l){l.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(F2||(F2={}));const I_=F2.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),R_=F2.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class l0 extends Aa.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5}render(){return this.createElement(),this.update(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this}createElement(){const{cell:e}=this,t=[this.prefixClassName(`${e.isEdge()?"edge":"node"}-tool-editor`),this.prefixClassName("cell-tool-editor")];this.editor=Aa.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}update(){const{graph:e,cell:t,editor:o}=this,c=o.style;let d=new Ve,f=20;if(t.isNode())d=t.getBBox().center,f=t.size().width-4;else if(t.isEdge()){const A=this.options.event,P=A.target,V=P.parentElement;if(V&&qf(V,this.prefixClassName("edge-label"))){const ee=V.getAttribute("data-index")||"0";this.labelIndex=parseInt(ee,10);const ge=V.getAttribute("transform"),{translation:Se}=A2(ge);d=new Ve(Se.tx,Se.ty),f=rc(P).width}else{if(!this.options.labelAddable)return this;d=e.clientToLocal(Ve.create(A.clientX,A.clientY));const ge=this.cellView.path.closestPointLength(d);this.distance=ge}}d=e.localToGraph(d),c.left=`${d.x}px`,c.top=`${d.y}px`,c.minWidth=`${f}px`;const v=e.scale();c.transform=`scale(${v.sx}, ${v.sy}) translate(-50%, -50%)`;const x=this.options.attrs;c.fontSize=`${x.fontSize}px`,c.fontFamily=x.fontFamily,c.color=x.color,c.backgroundColor=x.backgroundColor;const w=this.options.getText;let _;return typeof w=="function"&&(_=er(w,this.cellView,{cell:this.cell,index:this.labelIndex})),o.innerText=_||"",this}onDocumentMouseDown(e){if(e.target!==this.editor){const t=this.cell,o=this.editor.innerText.replace(/\n$/,"")||"",c=this.options.setText;typeof c=="function"&&er(c,this.cellView,{cell:this.cell,value:o,index:this.labelIndex,distance:this.distance}),t.removeTool(t.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}}onDblClick(e){e.stopPropagation()}onMouseDown(e){e.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor.focus(),this.selectText()})}selectText(){if(window.getSelection){const e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}}(function(l){l.config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(l0||(l0={})),function(l){l.NodeEditor=l.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText({cell:e}){return e.attr("text/text")},setText({cell:e,value:t}){e.attr("text/text",t)}}),l.EdgeEditor=l.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText({cell:e,index:t}){return t===-1?"":e.prop(`labels/${t}/attrs/label/text`)},setText({cell:e,value:t,index:o,distance:c}){const d=e;o===-1?d.appendLabel({position:{distance:c},attrs:{label:{text:t}}}):t?d.prop(`labels/${o}/attrs/label/text`,t):typeof o=="number"&&d.removeLabelAt(o)}})}(l0||(l0={}));var k_=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t},sg;(function(l){l.presets={boundary:G2,button:np,"button-remove":np.Remove,"node-editor":l0.NodeEditor},l.registry=Ss.create({type:"node tool",process(e,t){if(typeof t=="function")return t;let o=Aa.ToolItem;const{inherit:c}=t,d=k_(t,["inherit"]);if(c){const f=this.get(c);f==null?this.onNotFound(c,"inherited"):o=f}return d.name==null&&(d.name=e),o.define.call(o,d)}}),l.registry.register(l.presets,!0)})(sg||(sg={}));var ag;(function(l){l.presets={boundary:G2,vertices:ly,segments:uy,button:np,"button-remove":np.Remove,"source-anchor":yv,"target-anchor":wO,"source-arrowhead":I_,"target-arrowhead":R_,"edge-editor":l0.EdgeEditor},l.registry=Ss.create({type:"edge tool",process(e,t){if(typeof t=="function")return t;let o=Aa.ToolItem;const{inherit:c}=t,d=k_(t,["inherit"]);if(c){const f=this.get(c);f==null?this.onNotFound(c,"inherited"):o=f}return d.name==null&&(d.name=e),o.define.call(o,d)}}),l.registry.register(l.presets,!0)})(ag||(ag={}));const SO=rp("center"),_O=rp("topCenter"),XC=rp("bottomCenter"),L_=rp("leftMiddle"),AO=rp("rightMiddle"),TO=rp("topLeft"),G_=rp("topRight"),F_=rp("bottomLeft"),MO=rp("bottomRight");function rp(l){return function(e,t,o,c={}){const d=c.rotate?e.getUnrotatedBBoxOfElement(t):e.getBBoxOfElement(t),f=d[l];f.x+=sh(c.dx,d.width),f.y+=sh(c.dy,d.height);const v=e.cell;return c.rotate?f.rotate(-v.getAngle(),v.getBBox().getCenter()):f}}function B2(l){return function(e,t,o,c){if(o instanceof Element){const d=this.graph.renderer.findViewByElem(o);let f;if(d)if(d.isEdgeElement(o)){const v=c.fixedAt!=null?c.fixedAt:"50%";f=ZC(d,v)}else f=d.getBBoxOfElement(o).getCenter();else f=new Ve;return l.call(this,e,t,f,c)}return l.apply(this,arguments)}}function ZC(l,e){const t=pd(e),o=typeof e=="string"?parseFloat(e):e;return t?l.getPointAtRatio(o/100):l.getPointAtLength(o)}const PO=B2(function(l,e,t,o){const c=l.cell.getAngle(),d=l.getBBoxOfElement(e),f=d.getCenter(),v=d.getTopLeft(),x=d.getBottomRight();let w=o.padding;if(Number.isFinite(w)||(w=0),v.y+w<=t.y&&t.y<=x.y-w){const _=t.y-f.y;f.x+=c===0||c===180?0:_*1/Math.tan(ji.toRad(c)),f.y+=_}else if(v.x+w<=t.x&&t.x<=x.x-w){const _=t.x-f.x;f.y+=c===90||c===270?0:_*Math.tan(ji.toRad(c)),f.x+=_}return f}),DO=function(l,e,t,o,c){const d=l.cell.getConnectionPoint(this.cell,c);return(o.dx||o.dy)&&d.translate(o.dx||0,o.dy||0),d},B_=B2(function(l,e,t,o){let c,d=0,f;const v=l.cell;o.rotate?(c=l.getUnrotatedBBoxOfElement(e),f=v.getBBox().getCenter(),d=v.getAngle()):c=l.getBBoxOfElement(e);const x=o.padding;x!=null&&Number.isFinite(x)&&c.inflate(x),o.rotate&&t.rotate(d,f);const w=c.getNearestSideToPoint(t);let _;switch(w){case"left":_=c.getLeftMiddle();break;case"right":_=c.getRightMiddle();break;case"top":_=c.getTopCenter();break;case"bottom":_=c.getBottomCenter();break;default:break}const A=o.direction;return A==="H"?(w==="top"||w==="bottom")&&(t.x<=c.x+c.width?_=c.getLeftMiddle():_=c.getRightMiddle()):A==="V"&&(t.y<=c.y+c.height?_=c.getTopCenter():_=c.getBottomCenter()),o.rotate?_.rotate(-d,f):_});var cg;(function(l){l.presets=ue,l.registry=Ss.create({type:"node endpoint"}),l.registry.register(l.presets,!0)})(cg||(cg={}));const NO=function(l,e,t,o){let c=o.ratio!=null?o.ratio:.5;return c>1&&(c/=100),l.getPointAtRatio(c)},IO=function(l,e,t,o){const c=o.length!=null?o.length:20;return l.getPointAtLength(c)},z_=function(l,e,t,o){const c=l.getClosestPoint(t);return c??new Ve},U_=B2(z_),V_=B2(function(l,e,t,o){const d=l.getConnection(),f=l.getConnectionSubdivisions(),v=new rr(t.clone().translate(0,1e6),t.clone().translate(0,-1e6)),x=new rr(t.clone().translate(1e6,0),t.clone().translate(-1e6,0)),w=v.intersect(d,{segmentSubdivisions:f}),_=x.intersect(d,{segmentSubdivisions:f}),A=[];return w&&A.push(...w),_&&A.push(..._),A.length>0?t.closest(A):o.fallbackAt!=null?ZC(l,o.fallbackAt):er(z_,this,l,e,t,o)});var lg;(function(l){l.presets=xe,l.registry=Ss.create({type:"edge endpoint"}),l.registry.register(l.presets,!0)})(lg||(lg={}));function u0(l,e,t){let o;if(typeof t=="object"){if(Number.isFinite(t.y)){const d=new rr(e,l),{start:f,end:v}=d.parallel(t.y);e=f,l=v}o=t.x}else o=t;if(o==null||!Number.isFinite(o))return l;const c=l.distance(e);return o===0&&c>0?l:l.move(e,-Math.min(o,c-1))}function hy(l){const e=l.getAttribute("stroke-width");return e===null?0:parseFloat(e)||0}function j_(l){if(l==null)return null;let e=l;do{let t=e.tagName;if(typeof t!="string")return null;if(t=t.toUpperCase(),t==="G")e=e.firstElementChild;else if(t==="TITLE")e=e.nextElementSibling;else break}while(e);return e}const YC=function(l,e,t,o){const c=e.getBBoxOfElement(t);o.stroked&&c.inflate(hy(t)/2);const d=l.intersect(c),f=d&&d.length?l.start.closest(d):l.end;return u0(f,l.start,o.offset)},kO=function(l,e,t,o,c){const d=e.cell,f=d.isNode()?d.getAngle():0;if(f===0)return er(YC,this,l,e,t,o,c);const v=e.getUnrotatedBBoxOfElement(t);o.stroked&&v.inflate(hy(t)/2);const x=v.getCenter(),w=l.clone().rotate(f,x),_=w.setLength(1e6).intersect(v),A=_&&_.length?w.start.closest(_).rotate(-f,x):l.end;return u0(A,l.start,o.offset)},LO=function(l,e,t,o){let c,d;const f=l.end,v=o.selector;if(typeof v=="string"?c=e.findOne(v):Array.isArray(v)?c=Xf(t,v):c=j_(t),!Jp(c)){if(c===t||!Jp(t))return f;c=t}const x=e.getShapeOfElement(c),w=e.getMatrixOfElement(c),_=e.getRootTranslatedMatrix(),A=e.getRootRotatedMatrix(),P=_.multiply(A).multiply(w),V=P.inverse(),J=xM(l,V),ee=J.start.clone(),ge=e.getDataOfElement(c);if(o.insideout===!1){ge.shapeBBox==null&&(ge.shapeBBox=x.bbox());const Ue=ge.shapeBBox;if(Ue!=null&&Ue.containsPoint(ee))return f}o.extrapolate===!0&&J.setLength(1e6);let Se;if(Nr.isPath(x)){const Ue=o.precision||2;ge.segmentSubdivisions==null&&(ge.segmentSubdivisions=x.getSegmentSubdivisions({precision:Ue})),Se={precision:Ue,segmentSubdivisions:ge.segmentSubdivisions},d=J.intersect(x,Se)}else d=J.intersect(x);d?Array.isArray(d)&&(d=ee.closest(d)):o.sticky===!0&&(Ln.isRectangle(x)?d=x.getNearestPointToPoint(ee):ah.isEllipse(x)?d=x.intersectsWithLineFromCenterToPoint(ee):d=x.closestPoint(ee,Se));const Re=d?Hh(d,P):f;let _e=o.offset||0;return o.stroked!==!1&&(typeof _e=="object"?(_e=Object.assign({},_e),_e.x==null&&(_e.x=0),_e.x+=hy(c)/2):_e+=hy(c)/2),u0(Re,l.start,_e)};function GO(l,e,t=0){const{start:o,end:c}=l;let d,f,v,x;switch(e){case"left":x="x",d=c,f=o,v=-1;break;case"right":x="x",d=o,f=c,v=1;break;case"top":x="y",d=c,f=o,v=-1;break;case"bottom":x="y",d=o,f=c,v=1;break;default:return}o[x]<c[x]?d[x]=f[x]:f[x]=d[x],Number.isFinite(t)&&(d[x]+=v*t,f[x]+=v*t)}const FO=function(l,e,t,o){const{alignOffset:c,align:d}=o;return d&&GO(l,d,c),u0(l.end,l.start,o.offset)};var d0;(function(l){l.presets=ae,l.registry=Ss.create({type:"connection point"}),l.registry.register(l.presets,!0)})(d0||(d0={}));const BO=function(l){return[...l]},zO=function(l,e,t){const o=e.side||"bottom",c=xl(e.padding||40),d=t.sourceBBox,f=t.targetBBox,v=d.getCenter(),x=f.getCenter();let w,_,A;switch(o){case"top":A=-1,w="y",_="height";break;case"left":A=-1,w="x",_="width";break;case"right":A=1,w="x",_="width";break;case"bottom":default:A=1,w="y",_="height";break}return v[w]+=A*(d[_]/2+c[o]),x[w]+=A*(f[_]/2+c[o]),A*(v[w]-x[w])>0?x[w]=v[w]:v[w]=x[w],[v.toJSON(),...l,x.toJSON()]};function fy(l){return new Ln(l.x,l.y,0,0)}function py(l={}){const e=xl(l.padding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function KC(l,e={}){return l.sourceBBox.clone().moveAndExpand(py(e))}function qC(l,e={}){return l.targetBBox.clone().moveAndExpand(py(e))}function H_(l,e={}){return l.sourceAnchor?l.sourceAnchor:KC(l,e).getCenter()}function $_(l,e={}){return l.targetAnchor?l.targetAnchor:qC(l,e).getCenter()}const JC=function(l,e,t){let o=KC(t,e),c=qC(t,e);const d=H_(t,e),f=$_(t,e);o=o.union(fy(d)),c=c.union(fy(f));const v=l.map(_=>Ve.create(_));v.unshift(d),v.push(f);let x=null;const w=[];for(let _=0,A=v.length-1;_<A;_+=1){let P=null;const V=v[_],J=v[_+1],ee=nl.getBearing(V,J)!=null;if(_===0)_+1===A?o.intersectsWithRect(c.clone().inflate(1))?P=nl.insideNode(V,J,o,c):ee||(P=nl.nodeToNode(V,J,o,c)):o.containsPoint(J)?P=nl.insideNode(V,J,o,fy(J).moveAndExpand(py(e))):ee||(P=nl.nodeToVertex(V,J,o));else if(_+1===A){const ge=ee&&nl.getBearing(J,V)===x;c.containsPoint(V)||ge?P=nl.insideNode(V,J,fy(V).moveAndExpand(py(e)),c,x):ee||(P=nl.vertexToNode(V,J,c,x))}else ee||(P=nl.vertexToVertex(V,J,x));P?(w.push(...P.points),x=P.direction):x=nl.getBearing(V,J),_+1<A&&w.push(J)}return w};var nl;(function(l){const e={N:"S",S:"N",E:"W",W:"E"},t={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function o(A,P,V){let J=new Ve(A.x,P.y);return V.containsPoint(J)&&(J=new Ve(P.x,A.y)),J}function c(A,P){return A[P==="W"||P==="E"?"width":"height"]}l.getBBoxSize=c;function d(A,P){return A.x===P.x?A.y>P.y?"N":"S":A.y===P.y?A.x>P.x?"W":"E":null}l.getBearing=d;function f(A,P,V){const J=new Ve(A.x,P.y),ee=new Ve(P.x,A.y),ge=d(A,J),Se=d(A,ee),Re=V?e[V]:null,_e=ge===V||ge!==Re&&(Se===Re||Se!==V)?J:ee;return{points:[_e],direction:d(_e,P)}}l.vertexToVertex=f;function v(A,P,V){const J=o(A,P,V);return{points:[J],direction:d(J,P)}}l.nodeToVertex=v;function x(A,P,V,J){const ee=[new Ve(A.x,P.y),new Ve(P.x,A.y)],ge=ee.filter(_e=>!V.containsPoint(_e)),Se=ge.filter(_e=>d(_e,A)!==J);let Re;if(Se.length>0)return Re=Se.filter(_e=>d(A,_e)===J).pop(),Re=Re||Se[0],{points:[Re],direction:d(Re,P)};{Re=En(ee,ge)[0];const _e=Ve.create(P).move(Re,-c(V,J)/2);return{points:[o(_e,A,V),_e],direction:d(_e,P)}}}l.vertexToNode=x;function w(A,P,V,J){let ee=v(P,A,J);const ge=ee.points[0];if(V.containsPoint(ge)){ee=v(A,P,V);const Se=ee.points[0];if(J.containsPoint(Se)){const Re=Ve.create(A).move(Se,-c(V,d(A,Se))/2),_e=Ve.create(P).move(ge,-c(J,d(P,ge))/2),Ue=new rr(Re,_e).getCenter(),Qe=v(A,Ue,V),bt=f(Ue,P,Qe.direction);ee.points=[Qe.points[0],bt.points[0]],ee.direction=bt.direction}}return ee}l.nodeToNode=w;function _(A,P,V,J,ee){const ge=V.union(J).inflate(1),Se=ge.getCenter(),Re=Se.distance(P)>Se.distance(A),_e=Re?P:A,Ue=Re?A:P;let Qe,bt,Pt;ee?(Qe=Ve.fromPolar(ge.width+ge.height,t[ee],_e),Qe=ge.getNearestPointToPoint(Qe).move(Qe,-1)):Qe=ge.getNearestPointToPoint(_e).move(_e,1),bt=o(Qe,Ue,ge);let Kt;Qe.round().equals(bt.round())?(bt=Ve.fromPolar(ge.width+ge.height,ji.toRad(Qe.theta(_e))+Math.PI/2,Ue),bt=ge.getNearestPointToPoint(bt).move(Ue,1).round(),Pt=o(Qe,bt,ge),Kt=Re?[bt,Pt,Qe]:[Qe,Pt,bt]):Kt=Re?[bt,Qe]:[Qe,bt];const kn=d(Re?Qe:bt,P);return{points:Kt,direction:kn}}l.insideNode=_})(nl||(nl={}));const W_={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],excludeNodes:[],excludeHiddenNodes:!1,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return ip(this.step,this)},directions(){const l=ip(this.step,this),e=ip(this.cost,this);return[{cost:e,offsetX:l,offsetY:0},{cost:e,offsetX:-l,offsetY:0},{cost:e,offsetX:0,offsetY:l},{cost:e,offsetX:0,offsetY:-l}]},penalties(){const l=ip(this.step,this);return{0:0,45:l/2,90:l/2}},paddingBox(){const l=ip(this.step,this);return{x:-l,y:-l,width:2*l,height:2*l}},fallbackRouter:JC,draggingRouter:null};function ip(l,e){return typeof l=="function"?l.call(e):l}function X_(l){const e=Object.keys(l).reduce((t,o)=>{const c=t;return o==="fallbackRouter"||o==="draggingRouter"||o==="fallbackRoute"?c[o]=l[o]:c[o]=ip(l[o],l),t},{});if(e.padding){const t=xl(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}return e.directions.forEach(t=>{const o=new Ve(0,0),c=new Ve(t.offsetX,t.offsetY);t.angle=ji.normalize(o.theta(c))}),e}const QC=1,Z_=2;class UO{constructor(){this.items=[],this.hash={},this.values={}}add(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=QC,this.values[e]=t;const o=us(this.items,e,c=>this.values[c]);this.items.splice(o,0,e)}pop(){const e=this.items.shift();return e&&(this.hash[e]=Z_),e}isOpen(e){return this.hash[e]===QC}isClose(e){return this.hash[e]===Z_}isEmpty(){return this.items.length===0}}class VO{constructor(e){this.options=e,this.mapGridSize=100,this.map={}}build(e,t){const o=this.options,c=o.excludeTerminals.reduce((w,_)=>{const A=t[_];if(A){const P=e.getCell(A.cell);P&&w.push(P)}return w},[]);let d=[];const f=e.getCell(t.getSourceCellId());f&&(d=du(d,f.getAncestors().map(w=>w.id)));const v=e.getCell(t.getTargetCellId());v&&(d=du(d,v.getAncestors().map(w=>w.id)));const x=this.mapGridSize;return e.getNodes().reduce((w,_)=>{const A=_.shape,P=o.excludeShapes,V=A?P.includes(A):!1,J=c.some(_e=>_e.id===_.id),ee=o.excludeNodes.includes(_),ge=d.includes(_.id),Se=o.excludeHiddenNodes&&!_.isVisible();if(!(V||J||ee||ge||Se)){const _e=_.getBBox().moveAndExpand(o.paddingBox),Ue=_e.getOrigin().snapToGrid(x),Qe=_e.getCorner().snapToGrid(x);for(let bt=Ue.x;bt<=Qe.x;bt+=x)for(let Pt=Ue.y;Pt<=Qe.y;Pt+=x){const Kt=new Ve(bt,Pt).toString();w[Kt]==null&&(w[Kt]=[]),w[Kt].push(_e)}}return w},this.map),this}isAccessible(e){const t=e.clone().snapToGrid(this.mapGridSize).toString(),o=this.map[t];return o?o.every(c=>!c.containsPoint(e)):!0}}function Y_(l,e){const t=l.sourceBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function K_(l,e){const t=l.targetBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function gy(l,e){return l.sourceAnchor?l.sourceAnchor:Y_(l,e).getCenter()}function h0(l,e){return l.targetAnchor?l.targetAnchor:K_(l,e).getCenter()}function bv(l,e,t,o,c){const d=360/t,f=l.theta(vy(l,e,o,c)),v=ji.normalize(f+d/2);return d*Math.floor(v/d)}function vy(l,e,t,o){const c=o.step,d=e.x-l.x,f=e.y-l.y,v=d/t.x,x=f/t.y,w=v*c,_=x*c;return new Ve(l.x+w,l.y+_)}function q_(l,e){const t=Math.abs(l-e);return t>180?360-t:t}function J_(l,e){const t=e.step;return e.directions.forEach(o=>{o.gridOffsetX=o.offsetX/t*l.x,o.gridOffsetY=o.offsetY/t*l.y}),e.directions}function Q_(l,e,t){return{source:e.clone(),x:ew(t.x-e.x,l),y:ew(t.y-e.y,l)}}function ew(l,e){if(!l)return e;const t=Math.abs(l),o=Math.round(t/e);if(!o)return t;const c=o*e,f=(t-c)/o;return e+f}function eA(l,e){const t=e.source,o=aa.snapToGrid(l.x-t.x,e.x)+t.x,c=aa.snapToGrid(l.y-t.y,e.y)+t.y;return new Ve(o,c)}function xv(l,e){return l.round(e)}function my(l,e,t){return xv(eA(l.clone(),e),t)}function Cv(l){return l.toString()}function f0(l){return new Ve(l.x===0?0:Math.abs(l.x)/l.x,l.y===0?0:Math.abs(l.y)/l.y)}function tw(l,e){let t=1/0;for(let o=0,c=e.length;o<c;o+=1){const d=l.manhattanDistance(e[o]);d<t&&(t=d)}return t}function nw(l,e,t,o,c){const d=c.precision,f=c.directionMap,v=l.diff(e.getCenter()),x=Object.keys(f).reduce((w,_)=>{if(t.includes(_)){const A=f[_],P=new Ve(l.x+A.x*(Math.abs(v.x)+e.width),l.y+A.y*(Math.abs(v.y)+e.height)),J=new rr(l,P).intersect(e)||[];let ee,ge=null;for(let Se=0;Se<J.length;Se+=1){const Re=J[Se],_e=l.squaredDistance(Re);(ee==null||_e>ee)&&(ee=_e,ge=Re)}if(ge){let Se=my(ge,o,d);e.containsPoint(Se)&&(Se=my(Se.translate(A.x*o.x,A.y*o.y),o,d)),w.push(Se)}}return w},[]);return e.containsPoint(l)||x.push(my(l,o,d)),x}function tA(l,e,t,o,c){const d=[];let f=f0(c.diff(t)),v=Cv(t),x=l[v],w;for(;x;){w=e[v];const P=f0(w.diff(x));P.equals(f)||(d.unshift(w),f=P),v=Cv(x),x=l[v]}const _=e[v];return f0(_.diff(o)).equals(f)||d.unshift(_),d}function nA(l,e,t,o,c){const d=c.precision;let f,v;Ln.isRectangle(e)?f=xv(gy(l,c).clone(),d):f=xv(e.clone(),d),Ln.isRectangle(t)?v=xv(h0(l,c).clone(),d):v=xv(t.clone(),d);const x=Q_(c.step,f,v),w=f,_=v;let A,P;if(Ln.isRectangle(e)?A=nw(w,e,c.startDirections,x,c):A=[w],Ln.isRectangle(t)?P=nw(v,t,c.endDirections,x,c):P=[_],A=A.filter(V=>o.isAccessible(V)),P=P.filter(V=>o.isAccessible(V)),A.length>0&&P.length>0){const V=new UO,J={},ee={},ge={};for(let wn=0,Sn=A.length;wn<Sn;wn+=1){const Vn=A[wn],Ur=Cv(Vn);V.add(Ur,tw(Vn,P)),J[Ur]=Vn,ge[Ur]=0}const Se=c.previousDirectionAngle,Re=Se===void 0;let _e,Ue;const Qe=J_(x,c),bt=Qe.length,Pt=P.reduce((wn,Sn)=>{const Vn=Cv(Sn);return wn.push(Vn),wn},[]),Kt=Ve.equalPoints(A,P);let kn=c.maxLoopCount;for(;!V.isEmpty()&&kn>0;){const wn=V.pop(),Sn=J[wn],Vn=ee[wn],Ur=ge[wn],Wr=Sn.equals(w),$t=Vn==null;let On;if($t?Re?Wr?On=null:On=bv(w,Sn,bt,x,c):On=Se:On=bv(Vn,Sn,bt,x,c),!($t&&Kt)&&Pt.indexOf(wn)>=0)return c.previousDirectionAngle=On,tA(ee,J,Sn,w,_);for(let Vo=0;Vo<bt;Vo+=1){_e=Qe[Vo];const ss=_e.angle;if(Ue=q_(On,ss),!(Re&&Wr)&&Ue>c.maxDirectionChange)continue;const ca=my(Sn.clone().translate(_e.gridOffsetX||0,_e.gridOffsetY||0),x,d),zs=Cv(ca);if(V.isClose(zs)||!o.isAccessible(ca))continue;if(Pt.indexOf(zs)>=0&&!ca.equals(_)){const ff=bv(ca,_,bt,x,c);if(q_(ss,ff)>c.maxDirectionChange)continue}const x0=_e.cost,l1=Wr?0:c.penalties[Ue],mg=Ur+x0+l1;(!V.isOpen(zs)||mg<ge[zs])&&(J[zs]=ca,ee[zs]=Sn,ge[zs]=mg,V.add(zs,mg+tw(ca,P)))}kn-=1}}return c.fallbackRoute?er(c.fallbackRoute,this,w,_,c):null}const jO=function(l,e,t){const o=X_(e),c=Y_(t,o),d=K_(t,o),f=gy(t,o),v=new VO(o).build(t.graph.model,t.cell),x=l.map(V=>Ve.create(V)),w=[];let _=f,A,P;for(let V=0,J=x.length;V<=J;V+=1){let ee=null;if(A=P||c,P=x[V],P==null){P=d;const Se=t.cell;if((Se.getSourceCellId()==null||Se.getTargetCellId()==null)&&typeof o.draggingRouter=="function"){const _e=A===c?f:A,Ue=P.getOrigin();ee=er(o.draggingRouter,t,_e,Ue,o)}}if(ee==null&&(ee=nA(t,A,P,v,o)),ee===null)return er(o.fallbackRouter,this,l,o,t);const ge=ee[0];ge&&ge.equals(_)&&ee.shift(),_=ee[ee.length-1]||_,w.push(...ee)}return w},rA=function(l,e,t){return er(jO,this,l,Object.assign(Object.assign({},W_),e),t)},HO={maxDirectionChange:45,directions(){const l=ip(this.step,this),e=ip(this.cost,this),t=Math.ceil(Math.sqrt(l*l<<1));return[{cost:e,offsetX:l,offsetY:0},{cost:t,offsetX:l,offsetY:l},{cost:e,offsetX:0,offsetY:l},{cost:t,offsetX:-l,offsetY:l},{cost:e,offsetX:-l,offsetY:0},{cost:t,offsetX:-l,offsetY:-l},{cost:e,offsetX:0,offsetY:-l},{cost:t,offsetX:l,offsetY:-l}]},fallbackRoute(l,e,t){const o=l.theta(e),c=[];let d={x:e.x,y:l.y},f={x:l.x,y:e.y};if(o%180>90){const _e=d;d=f,f=_e}const v=o%90<45?d:f,x=new rr(l,v),w=90*Math.ceil(o/90),_=Ve.fromPolar(x.squaredLength(),ji.toRad(w+135),v),A=new rr(e,_),P=x.intersectsWithLine(A),V=P||e,J=P?V:l,ee=360/t.directions.length,ge=J.theta(e),Se=ji.normalize(ge+ee/2),Re=ee*Math.floor(Se/ee);return t.previousDirectionAngle=Re,V&&c.push(V.round()),c.push(e),c}},$O=function(l,e,t){return er(rA,this,l,Object.assign(Object.assign({},HO),e),t)},WO=function(l,e,t){const o=e.offset||32,c=e.min==null?16:e.min;let d=0,f=e.direction;const v=t.sourceBBox,x=t.targetBBox,w=v.getCenter(),_=x.getCenter();if(typeof o=="number"&&(d=o),f==null){let Se=x.left-v.right,Re=x.top-v.bottom;Se>=0&&Re>=0?f=Se>=Re?"L":"T":Se<=0&&Re>=0?(Se=v.left-x.right,Se>=0?f=Se>=Re?"R":"T":f="T"):Se>=0&&Re<=0?(Re=v.top-x.bottom,Re>=0?f=Se>=Re?"L":"B":f="L"):(Se=v.left-x.right,Re=v.top-x.bottom,Se>=0&&Re>=0?f=Se>=Re?"R":"B":Se<=0&&Re>=0?f="B":Se>=0&&Re<=0?f="R":f=Math.abs(Se)>Math.abs(Re)?"R":"B")}f==="H"?f=_.x-w.x>=0?"L":"R":f==="V"&&(f=_.y-w.y>=0?"T":"B"),o==="center"&&(f==="L"?d=(x.left-v.right)/2:f==="R"?d=(v.left-x.right)/2:f==="T"?d=(x.top-v.bottom)/2:f==="B"&&(d=(v.top-x.bottom)/2));let A,P,V;const J=f==="L"||f==="R";if(J){if(_.y===w.y)return[...l];V=f==="L"?1:-1,A="x",P="width"}else{if(_.x===w.x)return[...l];V=f==="T"?1:-1,A="y",P="height"}const ee=w.clone(),ge=_.clone();if(ee[A]+=V*(v[P]/2+d),ge[A]-=V*(x[P]/2+d),J){const Se=ee.x,Re=ge.x,_e=v.width/2+c,Ue=x.width/2+c;_.x>w.x?Re<=Se&&(ee.x=Math.max(Re,w.x+_e),ge.x=Math.min(Se,_.x-Ue)):Re>=Se&&(ee.x=Math.min(Re,w.x-_e),ge.x=Math.max(Se,_.x+Ue))}else{const Se=ee.y,Re=ge.y,_e=v.height/2+c,Ue=x.height/2+c;_.y>w.y?Re<=Se&&(ee.y=Math.max(Re,w.y+_e),ge.y=Math.min(Se,_.y-Ue)):Re>=Se&&(ee.y=Math.min(Re,w.y-_e),ge.y=Math.max(Se,_.y+Ue))}return[ee.toJSON(),...l,ge.toJSON()]};function wv(l,e){if(e!=null&&e!==!1){const t=typeof e=="boolean"?0:e;if(t>0){const o=Ve.create(l[1]).move(l[2],t),c=Ve.create(l[1]).move(l[0],t);return[o.toJSON(),...l,c.toJSON()]}{const o=l[1];return[Object.assign({},o),...l,Object.assign({},o)]}}return l}const iA=function(l,e,t){const o=e.width||50,d=(e.height||80)/2,f=e.angle||"auto",v=t.sourceAnchor,x=t.targetAnchor,w=t.sourceBBox,_=t.targetBBox;if(v.equals(x)){const A=Se=>{const Re=ji.toRad(Se),_e=Math.sin(Re),Ue=Math.cos(Re),Qe=new Ve(v.x+Ue*o,v.y+_e*o),bt=new Ve(Qe.x-Ue*d,Qe.y-_e*d),Pt=bt.clone().rotate(-90,Qe),Kt=bt.clone().rotate(90,Qe);return[Pt.toJSON(),Qe.toJSON(),Kt.toJSON()]},P=Se=>{const Re=v.clone().move(Se,-1),_e=new rr(Re,Se);return!w.containsPoint(Se)&&!w.intersectsWithLine(_e)},V=[0,90,180,270,45,135,225,315];if(typeof f=="number")return wv(A(f),e.merge);const J=w.getCenter();if(J.equals(v))return wv(A(0),e.merge);const ee=J.angleBetween(v,J.clone().translate(1,0));let ge=A(ee);if(P(ge[1]))return wv(ge,e.merge);for(let Se=1,Re=V.length;Se<Re;Se+=1)if(ge=A(ee+V[Se]),P(ge[1]))return wv(ge,e.merge);return wv(ge,e.merge)}{const A=new rr(v,x);let P=A.parallel(-o),V=P.getCenter(),J=P.start.clone().move(P.end,d),ee=P.end.clone().move(P.start,d);const ge=A.parallel(-1),Se=new rr(ge.start,V),Re=new rr(ge.end,V);if((w.containsPoint(V)||_.containsPoint(V)||w.intersectsWithLine(Se)||w.intersectsWithLine(Re)||_.intersectsWithLine(Se)||_.intersectsWithLine(Re))&&(P=A.parallel(o),V=P.getCenter(),J=P.start.clone().move(P.end,d),ee=P.end.clone().move(P.start,d)),e.merge){const _e=new rr(v,x),Ue=new rr(V,_e.center).setLength(Number.MAX_SAFE_INTEGER),Qe=w.intersectsWithLine(Ue),bt=_.intersectsWithLine(Ue),Pt=Qe?Array.isArray(Qe)?Qe:[Qe]:[];bt&&(Array.isArray(bt)?Pt.push(...bt):Pt.push(bt));const Kt=_e.center.closest(Pt);Kt?(t.sourceAnchor=Kt.clone(),t.targetAnchor=Kt.clone()):(t.sourceAnchor=_e.center.clone(),t.targetAnchor=_e.center.clone())}return wv([J.toJSON(),V.toJSON(),ee.toJSON()],e.merge)}};var rf;(function(l){l.presets=ce,l.registry=Ss.create({type:"router"}),l.registry.register(l.presets,!0)})(rf||(rf={}));const oA=function(l,e,t,o={}){const c=[l,...t,e],d=new _a(c),f=new Nr(d);return o.raw?f:f.serialize()},sA=function(l,e,t,o={}){const c=t.length===3?0:1,d=Ve.create(t[0+c]),f=Ve.create(t[2+c]),v=Ve.create(t[1+c]);if(!Ve.equals(l,e)){const w=new Ve((l.x+e.x)/2,(l.y+e.y)/2),_=w.angleBetween(Ve.create(l).rotate(90,w),v);_>1&&(d.rotate(180-_,w),f.rotate(180-_,w),v.rotate(180-_,w))}const x=`
     M ${l.x} ${l.y}
     Q ${d.x} ${d.y} ${v.x} ${v.y}
     Q ${f.x} ${f.y} ${e.x} ${e.y}
  `;return o.raw?Nr.parse(x):x},aA=function(l,e,t,o={}){const c=new Nr;c.appendSegment(Nr.createSegment("M",l));const d=1/3,f=2/3,v=o.radius||10;let x,w;for(let _=0,A=t.length;_<A;_+=1){const P=Ve.create(t[_]),V=t[_-1]||l,J=t[_+1]||e;x=w||P.distance(V)/2,w=P.distance(J)/2;const ee=-Math.min(v,x),ge=-Math.min(v,w),Se=P.clone().move(V,ee).round(),Re=P.clone().move(J,ge).round(),_e=new Ve(d*Se.x+f*P.x,f*P.y+d*Se.y),Ue=new Ve(d*Re.x+f*P.x,f*P.y+d*Re.y);c.appendSegment(Nr.createSegment("L",Se)),c.appendSegment(Nr.createSegment("C",_e,Ue,Re))}return c.appendSegment(Nr.createSegment("L",e)),o.raw?c:c.serialize()},cA=function(l,e,t,o={}){let c,d=o.direction;if(t&&t.length!==0){const f=[l,...t,e],v=sa.throughPoints(f);c=new Nr(v)}else if(c=new Nr,c.appendSegment(Nr.createSegment("M",l)),d||(d=Math.abs(l.x-e.x)>=Math.abs(l.y-e.y)?"H":"V"),d==="H"){const f=(l.x+e.x)/2;c.appendSegment(Nr.createSegment("C",f,l.y,f,e.y,e.x,e.y))}else{const f=(l.y+e.y)/2;c.appendSegment(Nr.createSegment("C",l.x,f,e.x,f,e.x,e.y))}return o.raw?c:c.serialize()},rw=1,ug=1/3,yy=2/3;function lA(l){let e=l.graph._jumpOverUpdateList;if(e==null&&(e=l.graph._jumpOverUpdateList=[],l.graph.on("cell:mouseup",()=>{const t=l.graph._jumpOverUpdateList;for(let o=0;o<t.length;o+=1)t[o].update()}),l.graph.on("model:reseted",()=>{e=l.graph._jumpOverUpdateList=[]})),e.indexOf(l)<0){e.push(l);const t=()=>e.splice(e.indexOf(l),1);l.cell.once("change:connector",t),l.cell.once("removed",t)}}function z2(l,e,t=[]){const o=[l,...t,e],c=[];return o.forEach((d,f)=>{const v=o[f+1];v!=null&&c.push(new rr(d,v))}),c}function uA(l,e){const t=[];return e.forEach(o=>{const c=l.intersectsWithLine(o);c&&t.push(c)}),t}function iw(l,e){return new rr(l,e).squaredLength()}function XO(l,e,t){return e.reduce((o,c,d)=>{if(U2.includes(c))return o;const f=o.pop()||l,v=Ve.create(c).move(f.start,-t);let x=Ve.create(c).move(f.start,+t);const w=e[d+1];if(w!=null){const P=x.distance(w);P<=t&&(x=w.move(f.start,P),U2.push(w))}else if(v.distance(f.end)<t*2+rw)return o.push(f),o;if(x.distance(f.start)<t*2+rw)return o.push(f),o;const A=new rr(v,x);return by.push(A),o.push(new rr(f.start,v),A,new rr(x,f.end)),o},[])}function dA(l,e,t,o){const c=new Nr;let d;return d=Nr.createSegment("M",l[0].start),c.appendSegment(d),l.forEach((f,v)=>{if(by.includes(f)){let x,w,_,A;if(t==="arc"){x=-90,w=f.start.diff(f.end),(w.x<0||w.x===0&&w.y<0)&&(x+=180);const V=f.getCenter(),J=new rr(V,f.end).rotate(x,V);let ee;ee=new rr(f.start,V),_=ee.pointAt(2/3).rotate(x,f.start),A=J.pointAt(1/3).rotate(-x,J.end),d=Nr.createSegment("C",_,A,J.end),c.appendSegment(d),ee=new rr(V,f.end),_=J.pointAt(1/3).rotate(x,J.end),A=ee.pointAt(1/3).rotate(-x,f.end),d=Nr.createSegment("C",_,A,f.end),c.appendSegment(d)}else if(t==="gap")d=Nr.createSegment("M",f.end),c.appendSegment(d);else if(t==="cubic"){x=f.start.theta(f.end);const P=e*.6;let V=e*1.35;w=f.start.diff(f.end),(w.x<0||w.x===0&&w.y<0)&&(V*=-1),_=new Ve(f.start.x+P,f.start.y+V).rotate(x,f.start),A=new Ve(f.end.x-P,f.end.y+V).rotate(x,f.end),d=Nr.createSegment("C",_,A,f.end),c.appendSegment(d)}}else{const x=l[v+1];o===0||!x||by.includes(x)?(d=Nr.createSegment("L",f.end),c.appendSegment(d)):ZO(o,c,f.end,f.start,x.end)}}),c}function ZO(l,e,t,o,c){const d=t.distance(o)/2,f=t.distance(c)/2,v=-Math.min(l,d),x=-Math.min(l,f),w=t.clone().move(o,v).round(),_=t.clone().move(c,x).round(),A=new Ve(ug*w.x+yy*t.x,yy*t.y+ug*w.y),P=new Ve(ug*_.x+yy*t.x,yy*t.y+ug*_.y);let V;V=Nr.createSegment("L",w),e.appendSegment(V),V=Nr.createSegment("C",A,P,_),e.appendSegment(V)}let by,U2;const YO=function(l,e,t,o={}){by=[],U2=[],lA(this);const c=o.size||5,d=o.type||"arc",f=o.radius||0,v=o.ignoreConnectors||["smooth"],x=this.graph,_=x.model.getEdges();if(_.length===1)return dA(z2(l,e,t),c,d,f);const A=this.cell,P=_.indexOf(A),V=x.options.connecting.connector||{},J=_.filter((Ue,Qe)=>{const bt=Ue.getConnector()||V;return v.includes(bt.name)?!1:Qe>P?bt.name!=="jumpover":!0}),ee=J.map(Ue=>x.renderer.findViewByCell(Ue)),ge=z2(l,e,t),Se=ee.map(Ue=>Ue==null?[]:Ue===this?ge:z2(Ue.sourcePoint,Ue.targetPoint,Ue.routePoints)),Re=[];ge.forEach(Ue=>{const Qe=J.reduce((bt,Pt,Kt)=>{if(Pt!==A){const kn=uA(Ue,Se[Kt]);bt.push(...kn)}return bt},[]).sort((bt,Pt)=>iw(Ue.start,bt)-iw(Ue.start,Pt));Qe.length>0?Re.push(...XO(Ue,Qe,c)):Re.push(Ue)});const _e=dA(Re,c,d,f);return by=[],U2=[],o.raw?_e:_e.serialize()};var dg;(function(l){l.presets=fe,l.registry=Ss.create({type:"connector"}),l.registry.register(l.presets,!0)})(dg||(dg={}));const hA=Ss.create;class Ev{constructor(e){this.cell=e,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(e,t,o={},c="/"){const d=this.cell.getPropByPath(e),f=Ug(o,Ev.defaultOptions),v=this.getTiming(f.timing),x=this.getInterp(f.interp,d,t);let w=0;const _=Array.isArray(e)?e.join(c):e,A=Array.isArray(e)?e:e.split(c),P=()=>{const V=new Date().getTime();w===0&&(w=V);let ee=(V-w)/f.duration;ee<1?this.ids[_]=v2(P):ee=1;const ge=x(v(ee));this.cell.setPropByPath(A,ge),o.progress&&o.progress(Object.assign({progress:ee,currentValue:ge},this.getArgs(_))),ee===1&&(this.cell.notify("transition:end",this.getArgs(_)),this.cell.notify("transition:complete",this.getArgs(_)),o.complete&&o.complete(this.getArgs(_)),this.cell.notify("transition:finish",this.getArgs(_)),o.finish&&o.finish(this.getArgs(_)),this.clean(_))};return setTimeout(()=>{this.stop(e,void 0,c),this.cache[_]={startValue:d,targetValue:t,options:f},this.ids[_]=v2(P),this.cell.notify("transition:begin",this.getArgs(_)),this.cell.notify("transition:start",this.getArgs(_)),o.start&&o.start(this.getArgs(_))},o.delay),this.stop.bind(this,e,c,o)}stop(e,t={},o="/"){const c=Array.isArray(e)?e:e.split(o);return Object.keys(this.ids).filter(d=>Zc(c,d.split(o).slice(0,c.length))).forEach(d=>{m2(this.ids[d]);const f=this.cache[d],v=this.getArgs(d),x=Object.assign(Object.assign({},f.options),t),w=x.jumpedToEnd;w&&f.targetValue!=null&&(this.cell.setPropByPath(d,f.targetValue),this.cell.notify("transition:end",Object.assign({},v)),this.cell.notify("transition:complete",Object.assign({},v)),x.complete&&x.complete(Object.assign({},v)));const _=Object.assign({jumpedToEnd:w},v);this.cell.notify("transition:stop",Object.assign({},_)),x.stop&&x.stop(Object.assign({},_)),this.cell.notify("transition:finish",Object.assign({},v)),x.finish&&x.finish(Object.assign({},v)),this.clean(d)}),this}clean(e){delete this.ids[e],delete this.cache[e]}getTiming(e){return typeof e=="string"?c0[e]:e}getInterp(e,t,o){return e?e(t,o):typeof o=="number"?ef.number(t,o):typeof o=="string"?o[0]==="#"?ef.color(t,o):ef.unit(t,o):ef.object(t,o)}getArgs(e){const t=this.cache[e];return{path:e,startValue:t.startValue,targetValue:t.targetValue,cell:this.cell}}}(function(l){l.defaultOptions={delay:10,duration:100,timing:"linear"}})(Ev||(Ev={}));var fA=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class ow extends Cc{constructor(e={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(zo(e)),this.changed={}}mutate(e,t={}){const o=t.unset===!0,c=t.silent===!0,d=[],f=this.changing;this.changing=!0,f||(this.previous=zo(this.data),this.changed={});const v=this.data,x=this.previous,w=this.changed;if(Object.keys(e).forEach(_=>{const A=_,P=e[A];Zc(v[A],P)||d.push(A),Zc(x[A],P)?delete w[A]:w[A]=P,o?delete v[A]:v[A]=P}),!c&&d.length>0&&(this.pending=!0,this.pendingOptions=t,d.forEach(_=>{this.emit("change:*",{key:_,options:t,store:this,current:v[_],previous:x[_]})})),f)return this;if(!c)for(;this.pending;)this.pending=!1,this.emit("changed",{current:v,previous:x,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(e,t){if(e==null)return this.data;const o=this.data[e];return o??t}getPrevious(e){if(this.previous){const t=this.previous[e];return t??void 0}}set(e,t,o){return e!=null&&(typeof e=="object"?this.mutate(e,t):this.mutate({[e]:t},o)),this}remove(e,t){const c={};let d;if(typeof e=="string")c[e]=void 0,d=t;else if(Array.isArray(e))e.forEach(f=>c[f]=void 0),d=t;else{for(const f in this.data)c[f]=void 0;d=e}return this.mutate(c,Object.assign(Object.assign({},d),{unset:!0})),this}getByPath(e){return Xf(this.data,e,"/")}setByPath(e,t,o={}){const c="/",d=Array.isArray(e)?[...e]:e.split(c),f=Array.isArray(e)?e.join(c):e,v=d[0],x=d.length;if(o.propertyPath=f,o.propertyValue=t,o.propertyPathArray=d,x===1)this.set(v,t,o);else{const w={};let _=w,A=v;for(let J=1;J<x;J+=1){const ee=d[J],ge=Number.isFinite(Number(ee));_=_[A]=ge?[]:{},A=ee}Uh(w,d,t,c);const P=zo(this.data);o.rewrite&&Sm(P,e,c);const V=Bo(P,w);this.set(v,V[v],o)}return this}removeByPath(e,t){const o=Array.isArray(e)?e:e.split("/"),c=o[0];if(o.length===1)this.remove(c,t);else{const d=o.slice(1),f=zo(this.get(c));f&&Sm(f,d),this.set(c,f,t)}return this}hasChanged(e){return e==null?Object.keys(this.changed).length>0:e in this.changed}getChanges(e){if(e==null)return this.hasChanged()?zo(this.changed):null;const t=this.changing?this.previous:this.data,o={};let c;for(const d in e){const f=e[d];Zc(t[d],f)||(o[d]=f,c=!0)}return c?zo(o):null}toJSON(){return zo(this.data)}clone(){const e=this.constructor;return new e(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}fA([Cc.dispose()],ow.prototype,"dispose",null);var pA=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},Sv=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class ki extends Cc{constructor(e={}){super();const o=this.constructor.getDefaults(!0),c=Bo({},this.preprocess(o),this.preprocess(e));this.id=c.id||n2(),this.store=new ow(c),this.animation=new Ev(this),this.setup(),this.init(),this.postprocess(e)}static config(e){const{markup:t,propHooks:o,attrHooks:c}=e,d=Sv(e,["markup","propHooks","attrHooks"]);t!=null&&(this.markup=t),o&&(this.propHooks=this.propHooks.slice(),Array.isArray(o)?this.propHooks.push(...o):typeof o=="function"?this.propHooks.push(o):Object.keys(o).forEach(f=>{const v=o[f];typeof v=="function"&&this.propHooks.push(v)})),c&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),c)),this.defaults=Bo({},this.defaults,d)}static getMarkup(){return this.markup}static getDefaults(e){return e?this.defaults:zo(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(e,t){return this.propHooks.reduce((o,c)=>c?er(c,e,o):o,t)}get[Symbol.toStringTag](){return ki.toStringTag}init(){}get model(){return this._model}set model(e){this._model!==e&&(this._model=e)}preprocess(e,t){const o=e.id,d=this.constructor.applyPropHooks(this,e);return o==null&&t!==!0&&(d.id=n2()),d}postprocess(e){}setup(){this.store.on("change:*",e=>{const{key:t,current:o,previous:c,options:d}=e;this.notify("change:*",{key:t,options:d,current:o,previous:c,cell:this}),this.notify(`change:${t}`,{options:d,current:o,previous:c,cell:this});const f=t;(f==="source"||f==="target")&&this.notify("change:terminal",{type:f,current:o,previous:c,options:d,cell:this})}),this.store.on("changed",({options:e})=>this.notify("changed",{options:e,cell:this}))}notify(e,t){this.trigger(e,t);const o=this.model;return o&&(o.notify(`cell:${e}`,t),this.isNode()?o.notify(`node:${e}`,Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&o.notify(`edge:${e}`,Object.assign(Object.assign({},t),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(e){return this.store===e.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(e,t){return e==null?this.store.get():this.store.get(e,t)}setProp(e,t,o){if(typeof e=="string")this.store.set(e,t,o);else{const c=this.preprocess(e,!0);this.store.set(Bo({},this.getProp(),c),t),this.postprocess(e)}return this}removeProp(e,t){return typeof e=="string"||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}hasChanged(e){return e==null?this.store.hasChanged():this.store.hasChanged(e)}getPropByPath(e){return this.store.getByPath(e)}setPropByPath(e,t,o={}){return this.model&&(e==="children"?this._children=t?t.map(c=>this.model.getCell(c)).filter(c=>c!=null):null:e==="parent"&&(this._parent=t?this.model.getCell(t):null)),this.store.setByPath(e,t,o),this}removePropByPath(e,t={}){const o=Array.isArray(e)?e:e.split("/");return o[0]==="attrs"&&(t.dirty=!0),this.store.removeByPath(o,t),this}prop(e,t,o){return e==null?this.getProp():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getPropByPath(e):t==null?this.removePropByPath(e,o||{}):this.setPropByPath(e,t,o||{}):this.setProp(e,t||{})}previous(e){return this.store.getPrevious(e)}get zIndex(){return this.getZIndex()}set zIndex(e){e==null?this.removeZIndex():this.setZIndex(e)}getZIndex(){return this.store.get("zIndex")}setZIndex(e,t={}){return this.store.set("zIndex",e,t),this}removeZIndex(e={}){return this.store.remove("zIndex",e),this}toFront(e={}){const t=this.model;if(t){let o=t.getMaxZIndex(),c;e.deep?(c=this.getDescendants({deep:!0,breadthFirst:!0}),c.unshift(this)):c=[this],o=o-c.length+1;const d=t.total();let f=t.indexOf(this)!==d-c.length;f||(f=c.some((v,x)=>v.getZIndex()!==o+x)),f&&this.batchUpdate("to-front",()=>{o+=c.length,c.forEach((v,x)=>{v.setZIndex(o+x,e)})})}return this}toBack(e={}){const t=this.model;if(t){let o=t.getMinZIndex(),c;e.deep?(c=this.getDescendants({deep:!0,breadthFirst:!0}),c.unshift(this)):c=[this];let d=t.indexOf(this)!==0;d||(d=c.some((f,v)=>f.getZIndex()!==o+v)),d&&this.batchUpdate("to-back",()=>{o-=c.length,c.forEach((f,v)=>{f.setZIndex(o+v,e)})})}return this}get markup(){return this.getMarkup()}set markup(e){e==null?this.removeMarkup():this.setMarkup(e)}getMarkup(){let e=this.store.get("markup");return e==null&&(e=this.constructor.getMarkup()),e}setMarkup(e,t={}){return this.store.set("markup",e,t),this}removeMarkup(e={}){return this.store.remove("markup",e),this}get attrs(){return this.getAttrs()}set attrs(e){e==null?this.removeAttrs():this.setAttrs(e)}getAttrs(){const e=this.store.get("attrs");return e?Object.assign({},e):{}}setAttrs(e,t={}){if(e==null)this.removeAttrs(t);else{const o=c=>this.store.set("attrs",c,t);if(t.overwrite===!0)o(e);else{const c=this.getAttrs();t.deep===!1?o(Object.assign(Object.assign({},c),e)):o(Bo({},c,e))}}return this}replaceAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}removeAttrs(e={}){return this.store.remove("attrs",e),this}getAttrDefinition(e){if(!e)return null;const o=this.constructor.getAttrHooks()||{};let c=o[e]||xc.registry.get(e);if(!c){const d=t2(e);c=o[d]||xc.registry.get(d)}return c||null}getAttrByPath(e){return e==null||e===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}setAttrByPath(e,t,o={}){return this.setPropByPath(this.prefixAttrPath(e),t,o),this}removeAttrByPath(e,t={}){return this.removePropByPath(this.prefixAttrPath(e),t),this}prefixAttrPath(e){return Array.isArray(e)?["attrs"].concat(e):`attrs/${e}`}attr(e,t,o){return e==null?this.getAttrByPath():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getAttrByPath(e):t==null?this.removeAttrByPath(e,o||{}):this.setAttrByPath(e,t,o||{}):this.setAttrs(e,t||{})}get visible(){return this.isVisible()}set visible(e){this.setVisible(e)}setVisible(e,t={}){return this.store.set("visible",e,t),this}isVisible(){return this.store.get("visible")!==!1}show(e={}){return this.isVisible()||this.setVisible(!0,e),this}hide(e={}){return this.isVisible()&&this.setVisible(!1,e),this}toggleVisible(e,t={}){const o=typeof e=="boolean"?e:!this.isVisible(),c=typeof e=="boolean"?t:e;return o?this.show(c):this.hide(c),this}get data(){return this.getData()}set data(e){this.setData(e)}getData(){return this.store.get("data")}setData(e,t={}){if(e==null)this.removeData(t);else{const o=c=>this.store.set("data",c,t);if(t.overwrite===!0)o(e);else{const c=this.getData();t.deep===!1?o(typeof e=="object"?Object.assign(Object.assign({},c),e):e):o(Bo({},c,e))}}return this}replaceData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}removeData(e={}){return this.store.remove("data",e),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const e=this.getParentId();if(e&&this.model){const t=this.model.getCell(e);return this._parent=t,t}return null}getChildren(){const e=this.store.get("children");if(e&&e.length&&this.model){const t=e.map(o=>{var c;return(c=this.model)===null||c===void 0?void 0:c.getCell(o)}).filter(o=>o!=null);return this._children=t,[...t]}return null}hasParent(){return this.parent!=null}isParentOf(e){return e!=null&&e.getParent()===this}isChildOf(e){return e!=null&&this.getParent()===e}eachChild(e,t){return this.children&&this.children.forEach(e,t),this}filterChild(e,t){return this.children?this.children.filter(e,t):[]}getChildCount(){return this.children==null?0:this.children.length}getChildIndex(e){return this.children==null?-1:this.children.indexOf(e)}getChildAt(e){return this.children!=null&&e>=0?this.children[e]:null}getAncestors(e={}){const t=[];let o=this.getParent();for(;o;)t.push(o),o=e.deep!==!1?o.getParent():null;return t}getDescendants(e={}){if(e.deep!==!1){if(e.breadthFirst){const t=[],o=this.getChildren()||[];for(;o.length>0;){const c=o.shift(),d=c.getChildren();t.push(c),d&&o.push(...d)}return t}{const t=this.getChildren()||[];return t.forEach(o=>{t.push(...o.getDescendants(e))}),t}}return this.getChildren()||[]}isDescendantOf(e,t={}){if(e==null)return!1;if(t.deep!==!1){let o=this.getParent();for(;o;){if(o===e)return!0;o=o.getParent()}return!1}return this.isChildOf(e)}isAncestorOf(e,t={}){return e==null?!1:e.isDescendantOf(this,t)}contains(e){return this.isAncestorOf(e)}getCommonAncestor(...e){return ki.getCommonAncestor(this,...e)}setParent(e,t={}){return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}setChildren(e,t={}){return this._children=e,e!=null?this.store.set("children",e.map(o=>o.id),t):this.store.remove("children",t),this}unembed(e,t={}){const o=this.children;if(o!=null&&e!=null){const c=this.getChildIndex(e);c!==-1&&(o.splice(c,1),e.setParent(null,t),this.setChildren(o,t))}return this}embed(e,t={}){return e.addTo(this,t),this}addTo(e,t={}){return ki.isCell(e)?e.addChild(this,t):e.addCell(this,t),this}insertTo(e,t,o={}){return e.insertChild(this,t,o),this}addChild(e,t={}){return this.insertChild(e,void 0,t)}insertChild(e,t,o={}){if(e!=null&&e!==this){const c=e.getParent(),d=this!==c;let f=t;if(f==null&&(f=this.getChildCount(),d||(f-=1)),c){const x=c.getChildren();if(x){const w=x.indexOf(e);w>=0&&(e.setParent(null,o),x.splice(w,1),c.setChildren(x,o))}}let v=this.children;if(v==null?(v=[],v.push(e)):v.splice(f,0,e),e.setParent(this,o),this.setChildren(v,o),d&&this.model){const x=this.model.getIncomingEdges(this),w=this.model.getOutgoingEdges(this);x&&x.forEach(_=>_.updateParent(o)),w&&w.forEach(_=>_.updateParent(o))}this.model&&this.model.addCell(e,o)}return this}removeFromParent(e={}){const t=this.getParent();if(t!=null){const o=t.getChildIndex(this);t.removeChildAt(o,e)}return this}removeChild(e,t={}){const o=this.getChildIndex(e);return this.removeChildAt(o,t)}removeChildAt(e,t={}){const o=this.getChildAt(e);return this.children!=null&&o!=null&&(this.unembed(o,t),o.remove(t)),o}remove(e={}){return this.batchUpdate("remove",()=>{const t=this.getParent();t&&t.removeChild(this,e),e.deep!==!1&&this.eachChild(o=>o.remove(e)),this.model&&this.model.removeCell(this,e)}),this}transition(e,t,o={},c="/"){return this.animation.start(e,t,o,c)}stopTransition(e,t,o="/"){return this.animation.stop(e,t,o),this}getTransitions(){return this.animation.get()}translate(e,t,o){return this}scale(e,t,o,c){return this}addTools(e,t,o){const c=Array.isArray(e)?e:[e],d=typeof t=="string"?t:null,f=typeof t=="object"?t:typeof o=="object"?o:{};if(f.reset)return this.setTools({name:d,items:c,local:f.local},f);let v=zo(this.getTools());if(v==null||d==null||v.name===d)return v==null&&(v={}),v.items||(v.items=[]),v.name=d,v.items=[...v.items,...c],this.setTools(Object.assign({},v),f)}setTools(e,t={}){return e==null?this.removeTools():this.store.set("tools",ki.normalizeTools(e),t),this}getTools(){return this.store.get("tools")}removeTools(e={}){return this.store.remove("tools",e),this}hasTools(e){const t=this.getTools();return t==null?!1:e==null?!0:t.name===e}hasTool(e){const t=this.getTools();return t==null?!1:t.items.some(o=>typeof o=="string"?o===e:o.name===e)}removeTool(e,t={}){const o=zo(this.getTools());if(o){let c=!1;const d=o.items.slice(),f=v=>{d.splice(v,1),c=!0};if(typeof e=="number")f(e);else for(let v=d.length-1;v>=0;v-=1){const x=d[v];(typeof x=="string"?x===e:x.name===e)&&f(v)}c&&(o.items=d,this.setTools(o,t))}return this}getBBox(e){return new Ln}getConnectionPoint(e,t){return new Ve}toJSON(e={}){const t=Object.assign({},this.store.get()),o=Object.prototype.toString,c=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!t.shape){const J=this.constructor;throw new Error(`Unable to serialize ${c} missing "shape" prop, check the ${c} "${J.name||o.call(J)}"`)}const d=this.constructor,f=e.diff===!0,v=t.attrs||{},x=d.getDefaults(!0),w=f?this.preprocess(x,!0):x,_=w.attrs||{},A={};Object.keys(t).forEach(J=>{const ee=t[J];if(ee!=null&&!Array.isArray(ee)&&typeof ee=="object"&&!Do(ee))throw new Error(`Can only serialize ${c} with plain-object props, but got a "${o.call(ee)}" type of key "${J}" on ${c} "${this.id}"`);if(J!=="attrs"&&J!=="shape"&&f){const ge=w[J];Zc(ee,ge)&&delete t[J]}}),Object.keys(v).forEach(J=>{const ee=v[J],ge=_[J];Object.keys(ee).forEach(Se=>{const Re=ee[Se],_e=ge?ge[Se]:null;Re!=null&&typeof Re=="object"&&!Array.isArray(Re)?Object.keys(Re).forEach(Ue=>{const Qe=Re[Ue];if(ge==null||_e==null||!xi(_e)||!Zc(_e[Ue],Qe)){A[J]==null&&(A[J]={}),A[J][Se]==null&&(A[J][Se]={});const bt=A[J][Se];bt[Ue]=Qe}}):(ge==null||!Zc(_e,Re))&&(A[J]==null&&(A[J]={}),A[J][Se]=Re)})});const P=Object.assign(Object.assign({},t),{attrs:k0(A)?void 0:A});P.attrs==null&&delete P.attrs;const V=P;return V.angle===0&&delete V.angle,zo(V)}clone(e={}){if(!e.deep){const o=Object.assign({},this.store.get());e.keepId||delete o.id,delete o.parent,delete o.children;const c=this.constructor;return new c(o)}return ki.deepClone(this)[this.id]}findView(e){return e.renderer.findViewByCell(this)}startBatch(e,t={},o=this.model){return this.notify("batch:start",{name:e,data:t,cell:this}),o&&o.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}stopBatch(e,t={},o=this.model){return o&&o.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this.notify("batch:stop",{name:e,data:t,cell:this}),this}batchUpdate(e,t,o){const c=this.model;this.startBatch(e,o,c);const d=t();return this.stopBatch(e,o,c),d}dispose(){this.removeFromParent(),this.store.dispose()}}ki.defaults={},ki.attrHooks={},ki.propHooks=[],pA([Cc.dispose()],ki.prototype,"dispose",null),function(l){function e(t){return typeof t=="string"?{items:[t]}:Array.isArray(t)?{items:t}:t.items?t:{items:[t]}}l.normalizeTools=e}(ki||(ki={})),function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.isNode=="function"&&typeof c.isEdge=="function"&&typeof c.prop=="function"&&typeof c.attr=="function"}l.isCell=e}(ki||(ki={})),function(l){function e(...d){const f=d.filter(x=>x!=null).map(x=>x.getAncestors()).sort((x,w)=>x.length-w.length);return f.shift().find(x=>f.every(w=>w.includes(x)))||null}l.getCommonAncestor=e;function t(d,f={}){let v=null;for(let x=0,w=d.length;x<w;x+=1){const _=d[x];let A=_.getBBox(f);if(A){if(_.isNode()){const P=_.getAngle();P!=null&&P!==0&&(A=A.bbox(P))}v=v==null?A:v.union(A)}}return v}l.getCellsBBox=t;function o(d){const f=[d,...d.getDescendants({deep:!0})];return l.cloneCells(f)}l.deepClone=o;function c(d){const f=zt(d),v=f.reduce((x,w)=>(x[w.id]=w.clone(),x),{});return f.forEach(x=>{const w=v[x.id];if(w.isEdge()){const P=w.getSourceCellId(),V=w.getTargetCellId();P&&v[P]&&w.setSource(Object.assign(Object.assign({},w.getSource()),{cell:v[P].id})),V&&v[V]&&w.setTarget(Object.assign(Object.assign({},w.getTarget()),{cell:v[V].id}))}const _=x.getParent();_&&v[_.id]&&w.setParent(v[_.id]);const A=x.getChildren();if(A&&A.length){const P=A.reduce((V,J)=>(v[J.id]&&V.push(v[J.id]),V),[]);P.length>0&&w.setChildren(P)}}),v}l.cloneCells=c}(ki||(ki={})),function(l){l.config({propHooks(e){var{tools:t}=e,o=Sv(e,["tools"]);return t&&(o.tools=l.normalizeTools(t)),o}})}(ki||(ki={}));var p0;(function(l){let e,t;function o(f,v){return v?e!=null&&e.exist(f):t!=null&&t.exist(f)}l.exist=o;function c(f){e=f}l.setEdgeRegistry=c;function d(f){t=f}l.setNodeRegistry=d})(p0||(p0={}));class gA{constructor(e){this.ports=[],this.groups={},this.init(zo(e))}getPorts(){return this.ports}getGroup(e){return e!=null?this.groups[e]:null}getPortsByGroup(e){return this.ports.filter(t=>t.group===e||t.group==null&&e==null)}getPortsLayoutByGroup(e,t){const o=this.getPortsByGroup(e),c=e?this.getGroup(e):null,d=c?c.position:null,f=d?d.name:null;let v;if(f!=null){const A=og.registry.get(f);if(A==null)return og.registry.onNotFound(f);v=A}else v=og.presets.left;const x=o.map(A=>A&&A.position&&A.position.args||{}),w=d&&d.args||{};return v(x,t,w).map((A,P)=>{const V=o[P];return{portLayout:A,portId:V.id,portSize:V.size,portAttrs:V.attrs,labelSize:V.label.size,labelLayout:this.getPortLabelLayout(V,Ve.create(A.position),t)}})}init(e){const{groups:t,items:o}=e;t!=null&&Object.keys(t).forEach(c=>{this.groups[c]=this.parseGroup(t[c])}),Array.isArray(o)&&o.forEach(c=>{this.ports.push(this.parsePort(c))})}parseGroup(e){return Object.assign(Object.assign({},e),{label:this.getLabel(e,!0),position:this.getPortPosition(e.position,!0)})}parsePort(e){const t=Object.assign({},e),o=this.getGroup(e.group)||{};return t.markup=t.markup||o.markup,t.attrs=Bo({},o.attrs,t.attrs),t.position=this.createPosition(o,t),t.label=Bo({},o.label,this.getLabel(t)),t.zIndex=this.getZIndex(o,t),t.size=Object.assign(Object.assign({},o.size),t.size),t}getZIndex(e,t){return typeof t.zIndex=="number"?t.zIndex:typeof e.zIndex=="number"||e.zIndex==="auto"?e.zIndex:"auto"}createPosition(e,t){return Bo({name:"left",args:{}},e.position,{args:t.args})}getPortPosition(e,t=!1){if(e==null){if(t)return{name:"left",args:{}}}else{if(typeof e=="string")return{name:e,args:{}};if(Array.isArray(e))return{name:"absolute",args:{x:e[0],y:e[1]}};if(typeof e=="object")return e}return{args:{}}}getPortLabelPosition(e,t=!1){if(e==null){if(t)return{name:"left",args:{}}}else{if(typeof e=="string")return{name:e,args:{}};if(typeof e=="object")return e}return{args:{}}}getLabel(e,t=!1){const o=e.label||{};return o.position=this.getPortLabelPosition(o.position,t),o}getPortLabelLayout(e,t,o){const c=e.label.position.name||"left",d=e.label.position.args||{},f=a0.registry.get(c)||a0.presets.left;return f?f(t,o,d):null}}var xy=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class ys extends ki{constructor(e={}){super(e),this.initPorts()}get[Symbol.toStringTag](){return ys.toStringTag}preprocess(e,t){const{x:o,y:c,width:d,height:f}=e,v=xy(e,["x","y","width","height"]);if(o!=null||c!=null){const x=v.position;v.position=Object.assign(Object.assign({},x),{x:o??(x?x.x:0),y:c??(x?x.y:0)})}if(d!=null||f!=null){const x=v.size;v.size=Object.assign(Object.assign({},x),{width:d??(x?x.width:0),height:f??(x?x.height:0)})}return super.preprocess(v,t)}isNode(){return!0}size(e,t,o){return e===void 0?this.getSize():typeof e=="number"?this.setSize(e,t,o):this.setSize(e,t)}getSize(){const e=this.store.get("size");return e?Object.assign({},e):{width:1,height:1}}setSize(e,t,o){return typeof e=="object"?this.resize(e.width,e.height,t):this.resize(e,t,o),this}resize(e,t,o={}){this.startBatch("resize",o);const c=o.direction;if(c){const d=this.getSize();switch(c){case"left":case"right":t=d.height;break;case"top":case"bottom":e=d.width;break;default:break}let v={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[c];const x=ji.normalize(this.getAngle()||0);o.absolute&&(v+=Math.floor((x+45)/90),v%=4);const w=this.getBBox();let _;v===0?_=w.getBottomLeft():v===1?_=w.getCorner():v===2?_=w.getTopRight():_=w.getOrigin();const A=_.clone().rotate(-x,w.getCenter()),P=Math.sqrt(e*e+t*t)/2;let V=v*Math.PI/2;V+=Math.atan(v%2===0?t/e:e/t),V-=ji.toRad(x);const ee=Ve.fromPolar(P,V,A).clone().translate(e/-2,t/-2);this.store.set("size",{width:e,height:t},o),this.setPosition(ee.x,ee.y,o)}else this.store.set("size",{width:e,height:t},o);return this.stopBatch("resize",o),this}scale(e,t,o,c={}){const d=this.getBBox().scale(e,t,o??void 0);return this.startBatch("scale",c),this.setPosition(d.x,d.y,c),this.resize(d.width,d.height,c),this.stopBatch("scale"),this}position(e,t,o){return typeof e=="number"?this.setPosition(e,t,o):this.getPosition(e)}getPosition(e={}){if(e.relative){const o=this.getParent();if(o!=null&&o.isNode()){const c=this.getPosition(),d=o.getPosition();return{x:c.x-d.x,y:c.y-d.y}}}const t=this.store.get("position");return t?Object.assign({},t):{x:0,y:0}}setPosition(e,t,o={}){let c,d,f;if(typeof e=="object"?(c=e.x,d=e.y,f=t||{}):(c=e,d=t,f=o||{}),f.relative){const v=this.getParent();if(v!=null&&v.isNode()){const x=v.getPosition();c+=x.x,d+=x.y}}if(f.deep){const v=this.getPosition();this.translate(c-v.x,d-v.y,f)}else this.store.set("position",{x:c,y:d},f);return this}translate(e=0,t=0,o={}){if(e===0&&t===0)return this;o.translateBy=o.translateBy||this.id;const c=this.getPosition();if(o.restrict!=null&&o.translateBy===this.id){const f=this.getBBox({deep:!0}),v=o.restrict,x=c.x-f.x,w=c.y-f.y,_=Math.max(v.x+x,Math.min(v.x+v.width+x-f.width,c.x+e)),A=Math.max(v.y+w,Math.min(v.y+v.height+w-f.height,c.y+t));e=_-c.x,t=A-c.y}const d={x:c.x+e,y:c.y+t};return o.tx=e,o.ty=t,o.transition?(typeof o.transition!="object"&&(o.transition={}),this.transition("position",d,Object.assign(Object.assign({},o.transition),{interp:ef.object})),this.eachChild(f=>{var v;((v=o.exclude)===null||v===void 0?void 0:v.includes(f))||f.translate(e,t,o)})):(this.startBatch("translate",o),this.store.set("position",d,o),this.eachChild(f=>{var v;((v=o.exclude)===null||v===void 0?void 0:v.includes(f))||f.translate(e,t,o)}),this.stopBatch("translate",o)),this}angle(e,t){return e==null?this.getAngle():this.rotate(e,t)}getAngle(){return this.store.get("angle",0)}rotate(e,t={}){const o=this.getAngle();if(t.center){const c=this.getSize(),d=this.getPosition(),f=this.getBBox().getCenter();f.rotate(o-e,t.center);const v=f.x-c.width/2-d.x,x=f.y-c.height/2-d.y;this.startBatch("rotate",{angle:e,options:t}),this.setPosition(d.x+v,d.y+x,t),this.rotate(e,Object.assign(Object.assign({},t),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",t.absolute?e:(o+e)%360,t);return this}getBBox(e={}){if(e.deep){const t=this.getDescendants({deep:!0,breadthFirst:!0});return t.push(this),ki.getCellsBBox(t)}return Ln.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(e,t){const o=this.getBBox(),c=o.getCenter(),d=e.getTerminal(t);if(d==null)return c;const f=d.port;if(!f||!this.hasPort(f))return c;const v=this.getPort(f);if(!v||!v.group)return c;const w=this.getPortsPosition(v.group)[f].position,_=Ve.create(w).translate(o.getOrigin()),A=this.getAngle();return A&&_.rotate(-A,c),_}fit(e={}){const o=(this.getChildren()||[]).filter(w=>w.isNode());if(o.length===0)return this;this.startBatch("fit-embeds",e),e.deep&&o.forEach(w=>w.fit(e));let{x:c,y:d,width:f,height:v}=ki.getCellsBBox(o);const x=xl(e.padding);return c-=x.left,d-=x.top,f+=x.left+x.right,v+=x.bottom+x.top,this.store.set({position:{x:c,y:d},size:{width:f,height:v}},e),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(e){this.setPortContainerMarkup(e)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||Ei.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(e,t={}){return this.store.set("portContainerMarkup",Ei.clone(e),t),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(e){this.setPortMarkup(e)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||Ei.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(e,t={}){return this.store.set("portMarkup",Ei.clone(e),t),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(e){this.setPortLabelMarkup(e)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||Ei.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(e,t={}){return this.store.set("portLabelMarkup",Ei.clone(e),t),this}get ports(){const e=this.store.get("ports",{items:[]});return e.items==null&&(e.items=[]),e}getPorts(){return zo(this.ports.items)}getPortsByGroup(e){return this.getPorts().filter(t=>t.group===e)}getPort(e){return zo(this.ports.items.find(t=>t.id&&t.id===e))}getPortAt(e){return this.ports.items[e]||null}hasPorts(){return this.ports.items.length>0}hasPort(e){return this.getPortIndex(e)!==-1}getPortIndex(e){const t=typeof e=="string"?e:e.id;return t!=null?this.ports.items.findIndex(o=>o.id===t):-1}getPortsPosition(e){const t=this.getSize();return this.port.getPortsLayoutByGroup(e,new Ln(0,0,t.width,t.height)).reduce((c,d)=>{const f=d.portLayout;return c[d.portId]={position:Object.assign({},f.position),angle:f.angle||0},c},{})}getPortProp(e,t){return this.getPropByPath(this.prefixPortPath(e,t))}setPortProp(e,t,o,c){if(typeof t=="string"||Array.isArray(t)){const v=this.prefixPortPath(e,t),x=o;return this.setPropByPath(v,x,c)}const d=this.prefixPortPath(e),f=t;return this.setPropByPath(d,f,o)}removePortProp(e,t,o){return typeof t=="string"||Array.isArray(t)?this.removePropByPath(this.prefixPortPath(e,t),o):this.removePropByPath(this.prefixPortPath(e),t)}portProp(e,t,o,c){return t==null?this.getPortProp(e):typeof t=="string"||Array.isArray(t)?arguments.length===2?this.getPortProp(e,t):o==null?this.removePortProp(e,t,c):this.setPortProp(e,t,o,c):this.setPortProp(e,t,o)}prefixPortPath(e,t){const o=this.getPortIndex(e);if(o===-1)throw new Error(`Unable to find port with id: "${e}"`);return t==null||t===""?["ports","items",`${o}`]:Array.isArray(t)?["ports","items",`${o}`,...t]:`ports/items/${o}/${t}`}addPort(e,t){const o=[...this.ports.items];return o.push(e),this.setPropByPath("ports/items",o,t),this}addPorts(e,t){return this.setPropByPath("ports/items",[...this.ports.items,...e],t),this}insertPort(e,t,o){const c=[...this.ports.items];return c.splice(e,0,t),this.setPropByPath("ports/items",c,o),this}removePort(e,t={}){return this.removePortAt(this.getPortIndex(e),t)}removePortAt(e,t={}){if(e>=0){const o=[...this.ports.items];o.splice(e,1),t.rewrite=!0,this.setPropByPath("ports/items",o,t)}return this}removePorts(e,t){let o;if(Array.isArray(e)){if(o=t||{},e.length){o.rewrite=!0;const d=[...this.ports.items].filter(f=>!e.some(v=>{const x=typeof v=="string"?v:v.id;return f.id===x}));this.setPropByPath("ports/items",d,o)}}else o=e||{},o.rewrite=!0,this.setPropByPath("ports/items",[],o);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(e,t){return this.port.getPortsLayoutByGroup(e,t)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const e=this.ports,t={};e.items.forEach(f=>{f.id&&(t[f.id]=!0)});const o={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(f=>{f.id&&!t[f.id]&&(o[f.id]=!0)});const d=this.model;d&&!k0(o)&&(d.getConnectedEdges(this,{incoming:!0}).forEach(x=>{const w=x.getTargetPortId();w&&o[w]&&x.remove()}),d.getConnectedEdges(this,{outgoing:!0}).forEach(x=>{const w=x.getSourcePortId();w&&o[w]&&x.remove()}))}validatePorts(){const e={},t=[];return this.ports.items.forEach(o=>{typeof o!="object"&&t.push(`Invalid port ${o}.`),o.id==null&&(o.id=this.generatePortId()),e[o.id]&&t.push("Duplicitied port id."),e[o.id]=!0}),t}generatePortId(){return n2()}updatePortData(){const e=this.validatePorts();if(e.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(e.join(" "));const t=this.port?this.port.getPorts():null;this.port=new gA(this.ports);const o=this.port.getPorts(),c=t?o.filter(f=>t.find(v=>v.id===f.id)?null:f):[...o],d=t?t.filter(f=>o.find(v=>v.id===f.id)?null:f):[];c.length>0&&this.notify("ports:added",{added:c,cell:this,node:this}),d.length>0&&this.notify("ports:removed",{removed:d,cell:this,node:this})}}ys.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.isNode=="function"&&typeof c.isEdge=="function"&&typeof c.prop=="function"&&typeof c.attr=="function"&&typeof c.size=="function"&&typeof c.position=="function"}l.isNode=e}(ys||(ys={})),function(l){l.config({propHooks(e){var{ports:t}=e,o=xy(e,["ports"]);return t&&(o.ports=Array.isArray(t)?{items:t}:t),o}})}(ys||(ys={})),function(l){l.registry=Ss.create({type:"node",process(e,t){if(p0.exist(e,!0))throw new Error(`Node with name '${e}' was registered by anthor Edge`);if(typeof t=="function")return t.config({shape:e}),t;let o=l;const{inherit:c}=t,d=xy(t,["inherit"]);if(c)if(typeof c=="string"){const v=this.get(c);v==null?this.onNotFound(c,"inherited"):o=v}else o=c;d.constructorName==null&&(d.constructorName=e);const f=o.define.call(o,d);return f.config({shape:e}),f}}),p0.setNodeRegistry(l.registry)}(ys||(ys={})),function(l){let e=0;function t(d){return d?Yp(d):(e+=1,`CustomNode${e}`)}function o(d){const{constructorName:f,overwrite:v}=d,x=xy(d,["constructorName","overwrite"]),w=yc(t(f||x.shape),this);return w.config(x),x.shape&&l.registry.register(x.shape,w,v),w}l.define=o;function c(d){const f=d.shape||"rect",v=l.registry.get(f);return v?new v(d):l.registry.onNotFound(f)}l.create=c}(ys||(ys={}));var KO=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class ic extends ys{get label(){return this.getLabel()}set label(e){this.setLabel(e)}getLabel(){return this.getAttrByPath("text/text")}setLabel(e,t){return e==null?this.removeLabel():this.setAttrByPath("text/text",e,t),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}(function(l){l.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},l.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},l.config({attrs:{text:Object.assign({},l.labelAttr)},propHooks(e){const{label:t}=e,o=KO(e,["label"]);return t&&Uh(o,"attrs/text/text",t),o},visible:!0})})(ic||(ic={}));var qO=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};function JO(l,e=!1){return`<g class="rotatable"><g class="scalable"><${l}/></g>${e?"":"<text/>"}</g>`}function sw(l){return`basic.${l}`}function Cy(l="xlink:href"){return t=>{const{imageUrl:o,imageWidth:c,imageHeight:d}=t,f=qO(t,["imageUrl","imageWidth","imageHeight"]);if(o!=null||c!=null||d!=null){const v=()=>{if(f.attrs){const x=f.attrs.image;o!=null&&(x[l]=o),c!=null&&(x.width=c),d!=null&&(x.height=d),f.attrs.image=x}};f.attrs?(f.attrs.image==null&&(f.attrs.image={}),v()):(f.attrs={image:{}},v())}return f}}function of(l,e,t={}){const o=sw(l),c={constructorName:o,attrs:{".":{fill:"#ffffff",stroke:"none"},[l]:{fill:"#ffffff",stroke:"#000000"}}};return t.ignoreMarkup||(c.markup=JO(l,t.noText===!0)),(t.parent||ic).define(Bo(c,e,{shape:o}))}const QO=of("rect",{attrs:{rect:{width:100,height:60}}}),e3=of("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),t3=of("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),n3=of("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),r3=of("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),i3=of("image",{attrs:{text:{refY:null,refDy:16}},propHooks:Cy()});var vA=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const aw=of("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks(l){const{d:e}=l,t=vA(l,["d"]);return e!=null&&Uh(t,"attrs/path/d",e),t}}),o3=of("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:aw,ignoreMarkup:!0}),s3=of("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:aw,ignoreMarkup:!0});var wy=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class os extends ki{constructor(e={}){super(e)}get[Symbol.toStringTag](){return os.toStringTag}preprocess(e,t){const{source:o,sourceCell:c,sourcePort:d,sourcePoint:f,target:v,targetCell:x,targetPort:w,targetPoint:_}=e,P=wy(e,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),V=J=>typeof J=="string"||typeof J=="number";if(o!=null)if(ki.isCell(o))P.source={cell:o.id};else if(V(o))P.source={cell:o};else if(Ve.isPoint(o))P.source=o.toJSON();else if(Array.isArray(o))P.source={x:o[0],y:o[1]};else{const J=o.cell;ki.isCell(J)?P.source=Object.assign(Object.assign({},o),{cell:J.id}):P.source=o}if(c!=null||d!=null){let J=P.source;if(c!=null){const ee=V(c)?c:c.id;J?J.cell=ee:J=P.source={cell:ee}}d!=null&&J&&(J.port=d)}else f!=null&&(P.source=Ve.create(f).toJSON());if(v!=null)if(ki.isCell(v))P.target={cell:v.id};else if(V(v))P.target={cell:v};else if(Ve.isPoint(v))P.target=v.toJSON();else if(Array.isArray(v))P.target={x:v[0],y:v[1]};else{const J=v.cell;ki.isCell(J)?P.target=Object.assign(Object.assign({},v),{cell:J.id}):P.target=v}if(x!=null||w!=null){let J=P.target;if(x!=null){const ee=V(x)?x:x.id;J?J.cell=ee:J=P.target={cell:ee}}w!=null&&J&&(J.port=w)}else _!=null&&(P.target=Ve.create(_).toJSON());return super.preprocess(P,t)}setup(){super.setup(),this.on("change:labels",e=>this.onLabelsChanged(e)),this.on("change:vertices",e=>this.onVertexsChanged(e))}isEdge(){return!0}disconnect(e={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},e),this}get source(){return this.getSource()}set source(e){this.setSource(e)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(e,t,o={}){return this.setTerminal("source",e,t,o)}get target(){return this.getTarget()}set target(e){this.setTarget(e)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(e,t,o={}){return this.setTerminal("target",e,t,o)}getTerminal(e){return Object.assign({},this.store.get(e))}setTerminal(e,t,o,c={}){if(ki.isCell(t))return this.store.set(e,Bo({},o,{cell:t.id}),c),this;const d=t;return Ve.isPoint(t)||d.x!=null&&d.y!=null?(this.store.set(e,Bo({},o,{x:d.x,y:d.y}),c),this):(this.store.set(e,zo(t),c),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(e){const t=this[e];if(Ve.isPointLike(t))return Ve.create(t);const o=this.getTerminalCell(e);return o?o.getConnectionPoint(this,e):new Ve}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(e){if(this.model){const t=e==="source"?this.getSourceCellId():this.getTargetCellId();if(t)return this.model.getCell(t)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(e){let t=this;const o={};for(;t&&t.isEdge();){if(o[t.id])return null;o[t.id]=!0,t=t.getTerminalCell(e)}return t&&t.isNode()?t:null}get router(){return this.getRouter()}set router(e){e==null?this.removeRouter():this.setRouter(e)}getRouter(){return this.store.get("router")}setRouter(e,t,o){return typeof e=="object"?this.store.set("router",e,t):this.store.set("router",{name:e,args:t},o),this}removeRouter(e={}){return this.store.remove("router",e),this}get connector(){return this.getConnector()}set connector(e){e==null?this.removeConnector():this.setConnector(e)}getConnector(){return this.store.get("connector")}setConnector(e,t,o){return typeof e=="object"?this.store.set("connector",e,t):this.store.set("connector",{name:e,args:t},o),this}removeConnector(e={}){return this.store.remove("connector",e)}get strategy(){return this.getStrategy()}set strategy(e){e==null?this.removeStrategy():this.setStrategy(e)}getStrategy(){return this.store.get("strategy")}setStrategy(e,t,o){return typeof e=="object"?this.store.set("strategy",e,t):this.store.set("strategy",{name:e,args:t},o),this}removeStrategy(e={}){return this.store.remove("strategy",e)}getDefaultLabel(){const e=this.constructor,t=this.store.get("defaultLabel")||e.defaultLabel||{};return zo(t)}get labels(){return this.getLabels()}set labels(e){this.setLabels(e)}getLabels(){return[...this.store.get("labels",[])].map(e=>this.parseLabel(e))}setLabels(e,t={}){return this.store.set("labels",Array.isArray(e)?e:[e],t),this}insertLabel(e,t,o={}){const c=this.getLabels(),d=c.length;let f=t!=null&&Number.isFinite(t)?t:d;return f<0&&(f=d+f+1),c.splice(f,0,this.parseLabel(e)),this.setLabels(c,o)}appendLabel(e,t={}){return this.insertLabel(e,-1,t)}getLabelAt(e){const t=this.getLabels();return e!=null&&Number.isFinite(e)?this.parseLabel(t[e]):null}setLabelAt(e,t,o={}){if(e!=null&&Number.isFinite(e)){const c=this.getLabels();c[e]=this.parseLabel(t),this.setLabels(c,o)}return this}removeLabelAt(e,t={}){const o=this.getLabels(),c=e!=null&&Number.isFinite(e)?e:-1,d=o.splice(c,1);return this.setLabels(o,t),d.length?d[0]:null}parseLabel(e){return typeof e=="string"?this.constructor.parseStringLabel(e):e}onLabelsChanged({previous:e,current:t}){const o=e&&t?t.filter(d=>e.find(f=>d===f||Zc(d,f))?null:d):t?[...t]:[],c=e&&t?e.filter(d=>t.find(f=>d===f||Zc(d,f))?null:d):e?[...e]:[];o.length>0&&this.notify("labels:added",{added:o,cell:this,edge:this}),c.length>0&&this.notify("labels:removed",{removed:c,cell:this,edge:this})}get vertexMarkup(){return this.getVertexMarkup()}set vertexMarkup(e){this.setVertexMarkup(e)}getDefaultVertexMarkup(){return this.store.get("defaultVertexMarkup")||Ei.getEdgeVertexMarkup()}getVertexMarkup(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()}setVertexMarkup(e,t={}){return this.store.set("vertexMarkup",Ei.clone(e),t),this}get vertices(){return this.getVertices()}set vertices(e){this.setVertices(e)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(e,t={}){const o=Array.isArray(e)?e:[e];return this.store.set("vertices",o.map(c=>Ve.toJSON(c)),t),this}insertVertex(e,t,o={}){const c=this.getVertices(),d=c.length;let f=t!=null&&Number.isFinite(t)?t:d;return f<0&&(f=d+f+1),c.splice(f,0,Ve.toJSON(e)),this.setVertices(c,o)}appendVertex(e,t={}){return this.insertVertex(e,-1,t)}getVertexAt(e){return e!=null&&Number.isFinite(e)?this.getVertices()[e]:null}setVertexAt(e,t,o={}){if(e!=null&&Number.isFinite(e)){const c=this.getVertices();c[e]=t,this.setVertices(c,o)}return this}removeVertexAt(e,t={}){const o=this.getVertices(),c=e!=null&&Number.isFinite(e)?e:-1;return o.splice(c,1),this.setVertices(o,t)}onVertexsChanged({previous:e,current:t}){const o=e&&t?t.filter(d=>e.find(f=>Ve.equals(d,f))?null:d):t?[...t]:[],c=e&&t?e.filter(d=>t.find(f=>Ve.equals(d,f))?null:d):e?[...e]:[];o.length>0&&this.notify("vertexs:added",{added:o,cell:this,edge:this}),c.length>0&&this.notify("vertexs:removed",{removed:c,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||Ei.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}get toolMarkup(){return this.getToolMarkup()}set toolMarkup(e){this.setToolMarkup(e)}getDefaultToolMarkup(){return this.store.get("defaultToolMarkup")||Ei.getEdgeToolMarkup()}getToolMarkup(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()}setToolMarkup(e,t={}){return this.store.set("toolMarkup",e,t),this}get doubleToolMarkup(){return this.getDoubleToolMarkup()}set doubleToolMarkup(e){this.setDoubleToolMarkup(e)}getDefaultDoubleToolMarkup(){return this.store.get("defaultDoubleToolMarkup")}getDoubleToolMarkup(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()}setDoubleToolMarkup(e,t={}){return this.store.set("doubleToolMarkup",e,t),this}get arrowheadMarkup(){return this.getArrowheadMarkup()}set arrowheadMarkup(e){this.setArrowheadMarkup(e)}getDefaultArrowheadMarkup(){return this.store.get("defaultArrowheadMarkup")||Ei.getEdgeArrowheadMarkup()}getArrowheadMarkup(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()}setArrowheadMarkup(e,t={}){return this.store.set("arrowheadMarkup",e,t),this}translate(e,t,o={}){return o.translateBy=o.translateBy||this.id,o.tx=e,o.ty=t,this.applyToPoints(c=>({x:(c.x||0)+e,y:(c.y||0)+t}),o)}scale(e,t,o,c={}){return this.applyToPoints(d=>Ve.create(d).scale(e,t,o).toJSON(),c)}applyToPoints(e,t={}){const o={},c=this.getSource(),d=this.getTarget();Ve.isPointLike(c)&&(o.source=e(c)),Ve.isPointLike(d)&&(o.target=e(d));const f=this.getVertices();return f.length>0&&(o.vertices=f.map(e)),this.store.set(o,t),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const e=[this.getSourcePoint(),...this.getVertices().map(t=>Ve.create(t)),this.getTargetPoint()];return new _a(e)}updateParent(e){let t=null;const o=this.getSourceCell(),c=this.getTargetCell(),d=this.getParent();return o&&c&&(o===c||o.isDescendantOf(c)?t=c:c.isDescendantOf(o)?t=o:t=ki.getCommonAncestor(o,c)),d&&(!t||t.id!==d.id)&&d.unembed(this,e),t&&t.embed(this,e),t}hasLoop(e={}){const t=this.getSource(),o=this.getTarget(),c=t.cell,d=o.cell;if(!c||!d)return!1;let f=c===d;if(!f&&e.deep&&this._model){const v=this.getSourceCell(),x=this.getTargetCell();v&&x&&(f=v.isAncestorOf(x,e)||x.isAncestorOf(v,e))}return f}getFragmentAncestor(){const e=[this,this.getSourceNode(),this.getTargetNode()].filter(t=>t!=null);return this.getCommonAncestor(...e)}isFragmentDescendantOf(e){const t=this.getFragmentAncestor();return!!t&&(t.id===e.id||t.isDescendantOf(e))}}os.defaults={},function(l){function e(t,o){const c=t,d=o;return c.cell===d.cell?c.port===d.port||c.port==null&&d.port==null:!1}l.equalTerminals=e}(os||(os={})),function(l){l.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function e(t){return{attrs:{label:{text:t}}}}l.parseStringLabel=e}(os||(os={})),function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.isNode=="function"&&typeof c.isEdge=="function"&&typeof c.prop=="function"&&typeof c.attr=="function"&&typeof c.disconnect=="function"&&typeof c.getSource=="function"&&typeof c.getTarget=="function"}l.isEdge=e}(os||(os={})),function(l){l.registry=Ss.create({type:"edge",process(e,t){if(p0.exist(e,!1))throw new Error(`Edge with name '${e}' was registered by anthor Node`);if(typeof t=="function")return t.config({shape:e}),t;let o=l;const{inherit:c="edge"}=t,d=wy(t,["inherit"]);if(typeof c=="string"){const v=this.get(c||"edge");v==null&&c?this.onNotFound(c,"inherited"):o=v}else o=c;d.constructorName==null&&(d.constructorName=e);const f=o.define.call(o,d);return f.config({shape:e}),f}}),p0.setEdgeRegistry(l.registry)}(os||(os={})),function(l){let e=0;function t(d){return d?Yp(d):(e+=1,`CustomEdge${e}`)}function o(d){const{constructorName:f,overwrite:v}=d,x=wy(d,["constructorName","overwrite"]),w=yc(t(f||x.shape),this);return w.config(x),x.shape&&l.registry.register(x.shape,w,v),w}l.define=o;function c(d){const f=d.shape||"edge",v=l.registry.get(f);return v?new v(d):l.registry.onNotFound(f)}l.create=c}(os||(os={})),function(l){const e="basic.edge";l.config({shape:e,propHooks(t){const{label:o,vertices:c}=t,d=wy(t,["label","vertices"]);if(o){d.labels==null&&(d.labels=[]);const f=typeof o=="string"?l.parseStringLabel(o):o;d.labels.push(f)}return c&&Array.isArray(c)&&(d.vertices=c.map(f=>Ve.create(f).toJSON())),d}}),l.registry.register(e,l)}(os||(os={}));var mA=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class xd extends Gs{constructor(){super(...arguments),this.POINT_ROUNDING=2,this.markerCache={}}get[Symbol.toStringTag](){return xd.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const e=this.sourceView;if(!e){const o=this.cell.getSource();return new Ln(o.x,o.y)}const t=this.sourceMagnet;return e.isEdgeElement(t)?new Ln(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(t||e.container)}get targetBBox(){const e=this.targetView;if(!e){const o=this.cell.getTarget();return new Ln(o.x,o.y)}const t=this.targetMagnet;return e.isEdgeElement(t)?new Ln(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(t||e.container)}isEdgeView(){return!0}confirmUpdate(e,t={}){let o=e;if(this.hasAction(o,"source")){if(!this.updateTerminalProperties("source"))return o;o=this.removeAction(o,"source")}if(this.hasAction(o,"target")){if(!this.updateTerminalProperties("target"))return o;o=this.removeAction(o,"target")}const c=this.graph,d=this.sourceView,f=this.targetView;return c&&(d&&!c.renderer.isViewMounted(d)||f&&!c.renderer.isViewMounted(f))?o:this.hasAction(o,"render")?(this.render(),o=this.removeAction(o,["render","update","vertices","labels","tools","widget"]),o):(o=this.handleAction(o,"vertices",()=>this.renderVertexMarkers()),o=this.handleAction(o,"update",()=>this.update(null,t)),o=this.handleAction(o,"labels",()=>this.onLabelsChange(t)),o=this.handleAction(o,"tools",()=>{this.renderTools(),this.updateToolsPosition()}),o=this.handleAction(o,"widget",()=>this.renderExternalTools()),o)}onLabelsChange(e={}){this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(e={}){const t=this.cell.previous("labels");if(t==null)return!0;if("propertyPathArray"in e&&"propertyValue"in e){const o=e.propertyPathArray||[],c=o.length;if(c>1){const d=o[1];if(t[d]){if(c===2)return typeof e.propertyValue=="object"&&dn(e.propertyValue,"markup");if(o[2]!=="markup")return!1}}}return!0}render(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this.renderExternalTools(),this}renderMarkup(){const e=this.cell.markup;if(e)return typeof e=="string"?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid edge markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}renderStringMarkup(e){const t=this.containers,o=ir.createVectors(e);o.forEach(c=>{const d=c.attr("class");d&&(t[t2(d)]=c.node)}),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),nv(this.container,o.map(c=>c.node))}renderLabels(){const e=this.cell,t=e.getLabels(),o=t.length;let c=this.containers.labels;if(this.labelCache={},this.labelSelectors={},o<=0)return c&&c.parentNode&&c.parentNode.removeChild(c),this;c?this.empty(c):(c=Qc("g"),this.addClass(this.prefixClassName("edge-labels"),c),this.containers.labels=c);for(let d=0,f=t.length;d<f;d+=1){const v=t[d],x=this.normalizeLabelMarkup(this.parseLabelMarkup(v.markup));let w,_;if(x)w=x.node,_=x.selectors;else{const P=e.getDefaultLabel(),V=this.normalizeLabelMarkup(this.parseLabelMarkup(P.markup));w=V.node,_=V.selectors}w.setAttribute("data-index",`${d}`),c.appendChild(w);const A=this.rootSelector;if(_[A])throw new Error("Ambiguous label root selector.");_[A]=w,this.labelCache[d]=w,this.labelSelectors[d]=_}return c.parentNode==null&&this.container.appendChild(c),this.updateLabels(),this.customizeLabels(),this}parseLabelMarkup(e){return e?typeof e=="string"?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}parseLabelStringMarkup(e){const t=ir.createVectors(e),o=document.createDocumentFragment();for(let c=0,d=t.length;c<d;c+=1){const f=t[c].node;o.appendChild(f)}return{fragment:o,selectors:{}}}normalizeLabelMarkup(e){if(e==null)return;const t=e.fragment;if(!(t instanceof DocumentFragment)||!t.hasChildNodes())throw new Error("Invalid label markup.");let o;const c=t.childNodes;return c.length>1||c[0].nodeName.toUpperCase()!=="G"?o=ir.create("g").append(t):o=ir.create(c[0]),o.addClass(this.prefixClassName("edge-label")),{node:o.node,selectors:e.selectors}}updateLabels(){if(this.containers.labels){const e=this.cell,t=e.labels,o=this.can("edgeLabelMovable"),c=e.getDefaultLabel();for(let d=0,f=t.length;d<f;d+=1){const v=this.labelCache[d],x=this.labelSelectors[d];v.setAttribute("cursor",o?"move":"default");const w=t[d],_=Bo({},c.attrs,w.attrs);this.updateAttrs(v,_,{selectors:x,rootBBox:w.size?Ln.fromSize(w.size):void 0})}}}mergeLabelAttrs(e,t,o){if(t===null)return null;if(t===void 0)return o===null?null:o===void 0?void 0:e?o:Bo({},o);if(e)return Bo({},o,t)}customizeLabels(){if(this.containers.labels){const e=this.cell,t=e.labels;for(let o=0,c=t.length;o<c;o+=1){const d=t[o],f=this.labelCache[o],v=this.labelSelectors[o];this.graph.hook.onEdgeLabelRendered({edge:e,label:d,container:f,selectors:v})}}}renderTools(){const e=this.containers.tools;if(e==null)return this;const t=this.cell.toolMarkup,o=this.$(e).empty();if(Ei.isStringMarkup(t)){let c=Yg(t);const d=ir.create(c());if(o.append(d.node),this.toolCache=d.node,this.options.doubleTools){let f;const v=this.cell.doubleToolMarkup;Ei.isStringMarkup(v)?(c=Yg(v),f=ir.create(c())):f=d.clone(),o.append(f.node),this.tool2Cache=f.node}}return this}renderExternalTools(){const e=this.cell.getTools();return this.addTools(e),this}renderVertexMarkers(){const e=this.containers.vertices;if(e==null)return this;const t=this.cell.vertexMarkup,o=this.$(e).empty();if(Ei.isStringMarkup(t)){const c=Yg(t);this.cell.getVertices().forEach((d,f)=>{o.append(ir.create(c(Object.assign({index:f},d))).node)})}return this}renderArrowheadMarkers(){const e=this.containers.arrowheads;if(e==null)return this;const t=this.cell.arrowheadMarkup,o=this.$(e).empty();if(Ei.isStringMarkup(t)){const c=Yg(t),d=ir.create(c({end:"source"})).node,f=ir.create(c({end:"target"})).node;this.containers.sourceArrowhead=d,this.containers.targetArrowhead=f,o.append(d,f)}return this}update(e,t={}){this.cleanCache(),this.updateConnection(t);const o=this.cell.getAttrs();return o!=null&&this.updateAttrs(this.container,o,{attrs:e===o?null:e,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(t),this}removeRedundantLinearVertices(e={}){const t=this.cell,o=t.getVertices(),c=[this.sourceAnchor,...o,this.targetAnchor],d=c.length,f=new _a(c);f.simplify({threshold:.01});const v=f.points.map(w=>w.toJSON()),x=v.length;return d===x?0:(t.setVertices(v.slice(1,x-1),e),d-x)}updateConnectionPath(){const e=this.containers;if(e.connection){const t=this.getConnectionPathData();e.connection.setAttribute("d",t)}if(e.connectionWrap){const t=this.getConnectionPathData();e.connectionWrap.setAttribute("d",t)}e.sourceMarker&&e.targetMarker&&this.translateAndAutoOrientArrows(e.sourceMarker,e.targetMarker)}getTerminalView(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalAnchor(e){switch(e){case"source":return Ve.create(this.sourceAnchor);case"target":return Ve.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalConnectionPoint(e){switch(e){case"source":return Ve.create(this.sourcePoint);case"target":return Ve.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalMagnet(e,t={}){switch(e){case"source":{if(t.raw)return this.sourceMagnet;const o=this.sourceView;return o?this.sourceMagnet||o.container:null}case"target":{if(t.raw)return this.targetMagnet;const o=this.targetView;return o?this.targetMagnet||o.container:null}default:throw new Error(`Unknown terminal type '${e}'`)}}updateConnection(e={}){const t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){const o=e.tx||0,c=e.ty||0;this.routePoints=new _a(this.routePoints).translate(o,c).points,this.translateConnectionPoints(o,c),this.path.translate(o,c)}else{const o=t.getVertices(),c=this.findAnchors(o);this.sourceAnchor=c.source,this.targetAnchor=c.target,this.routePoints=this.findRoutePoints(o);const d=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=d.source,this.targetPoint=d.target;const f=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,f.source||this.sourcePoint,f.target||this.targetPoint)}this.cleanCache()}findAnchors(e){const t=this.cell,o=t.source,c=t.target,d=e[0],f=e[e.length-1];return c.priority&&!o.priority?this.findAnchorsOrdered("target",f,"source",d):this.findAnchorsOrdered("source",d,"target",f)}findAnchorsOrdered(e,t,o,c){let d,f;const v=this.cell,x=v[e],w=v[o],_=this.getTerminalView(e),A=this.getTerminalView(o),P=this.getTerminalMagnet(e),V=this.getTerminalMagnet(o);if(_){let J;t?J=Ve.create(t):A?J=V:J=Ve.create(w),d=this.getAnchor(x.anchor,_,P,J,e)}else d=Ve.create(x);if(A){const J=Ve.create(c||d);f=this.getAnchor(w.anchor,A,V,J,o)}else f=Ve.isPointLike(w)?Ve.create(w):new Ve;return{[e]:d,[o]:f}}getAnchor(e,t,o,c,d){const f=t.isEdgeElement(o),v=this.graph.options.connecting;let x=typeof e=="string"?{name:e}:e;if(!x){const A=f?(d==="source"?v.sourceEdgeAnchor:v.targetEdgeAnchor)||v.edgeAnchor:(d==="source"?v.sourceAnchor:v.targetAnchor)||v.anchor;x=typeof A=="string"?{name:A}:A}if(!x)throw new Error("Anchor should be specified.");let w;const _=x.name;if(f){const A=lg.registry.get(_);if(typeof A!="function")return lg.registry.onNotFound(_);w=er(A,this,t,o,c,x.args||{},d)}else{const A=cg.registry.get(_);if(typeof A!="function")return cg.registry.onNotFound(_);w=er(A,this,t,o,c,x.args||{},d)}return w?w.round(this.POINT_ROUNDING):new Ve}findRoutePoints(e=[]){const t=this.graph.options.connecting.router||rf.presets.normal,o=this.cell.getRouter()||t;let c;if(typeof o=="function")c=er(o,this,e,{},this);else{const d=typeof o=="string"?o:o.name,f=typeof o=="string"?{}:o.args||{},v=d?rf.registry.get(d):rf.presets.normal;if(typeof v!="function")return rf.registry.onNotFound(d);c=er(v,this,e,f,this)}return c==null?e.map(d=>Ve.create(d)):c.map(d=>Ve.create(d))}findConnectionPoints(e,t,o){const c=this.cell,d=this.graph.options.connecting,f=c.getSource(),v=c.getTarget(),x=this.sourceView,w=this.targetView,_=e[0],A=e[e.length-1];let P;if(x&&!x.isEdgeElement(this.sourceMagnet)){const J=this.sourceMagnet||x.container,ee=_||o,ge=new rr(ee,t),Se=f.connectionPoint||d.sourceConnectionPoint||d.connectionPoint;P=this.getConnectionPoint(Se,x,J,ge,"source")}else P=t;let V;if(w&&!w.isEdgeElement(this.targetMagnet)){const J=this.targetMagnet||w.container,ee=v.connectionPoint||d.targetConnectionPoint||d.connectionPoint,ge=A||t,Se=new rr(ge,o);V=this.getConnectionPoint(ee,w,J,Se,"target")}else V=o;return{source:P,target:V}}getConnectionPoint(e,t,o,c,d){const f=c.end;if(e==null)return f;const v=typeof e=="string"?e:e.name,x=typeof e=="string"?{}:e.args,w=d0.registry.get(v);if(typeof w!="function")return d0.registry.onNotFound(v);const _=er(w,this,c,t,o,x||{},d);return _?_.round(this.POINT_ROUNDING):f}updateMarkerAttr(e){const t=this.cell.getAttrs(),o=`.${e}-marker`,c=t&&t[o];c&&this.updateAttrs(this.container,{},{attrs:{[o]:c},selectors:this.selectors})}findMarkerPoints(e,t,o){const c=P=>{const V=this.cell.getAttrs(),J=Object.keys(V);for(let ee=0,ge=J.length;ee<ge;ee+=1){const Se=V[J[ee]];if(Se[`${P}Marker`]||Se[`${P}-marker`]){const Re=Se.strokeWidth||Se["stroke-width"];if(Re)return parseFloat(Re);break}}return null},d=e[0],f=e[e.length-1],v=this.containers.sourceMarker,x=this.containers.targetMarker,w=this.markerCache;let _,A;if(v){if(this.updateMarkerAttr("source"),w.sourceBBox=w.sourceBBox||rc(v),w.sourceBBox.width>0){const P=Xh(v);_=t.clone().move(d||o,w.sourceBBox.width*P.sx*-1)}}else{const P=c("source");P&&(_=t.clone().move(d||o,-P))}if(x){if(this.updateMarkerAttr("target"),w.targetBBox=w.targetBBox||rc(x),w.targetBBox.width>0){const P=Xh(x);A=o.clone().move(f||t,w.targetBBox.width*P.sx*-1)}}else{const P=c("target");P&&(A=o.clone().move(f||t,-P))}return w.sourcePoint=_||t.clone(),w.targetPoint=A||o.clone(),{source:_,target:A}}findPath(e,t,o){const c=this.cell.getConnector()||this.graph.options.connecting.connector;let d,f,v;if(typeof c=="string"?d=c:(d=c.name,f=c.args),d){const w=dg.registry.get(d);if(typeof w!="function")return dg.registry.onNotFound(d);v=w}else v=dg.presets.normal;const x=er(v,this,t,o,e,Object.assign(Object.assign({},f),{raw:!0}),this);return typeof x=="string"?Nr.parse(x):x}translateConnectionPoints(e,t){const o=this.markerCache;o.sourcePoint&&o.sourcePoint.translate(e,t),o.targetPoint&&o.targetPoint.translate(e,t),this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t)}updateLabelPositions(){if(this.containers.labels==null)return this;if(!this.path)return this;const t=this.cell,o=t.getLabels();if(o.length===0)return this;const c=t.getDefaultLabel(),d=this.normalizeLabelPosition(c.position);for(let f=0,v=o.length;f<v;f+=1){const x=o[f],w=this.normalizeLabelPosition(x.position),_=Bo({},d,w),A=this.getLabelTransformationMatrix(_);this.labelCache[f].setAttribute("transform",r0(A))}return this}updateToolsPosition(){if(this.containers.tools==null)return this;let e="",t=this.options.toolsOffset;const o=this.getConnectionLength();if(o!=null){o<this.options.shortLength&&(e="scale(.5)",t/=2);let c=this.getPointAtLength(t);if(c!=null&&oo(this.toolCache,"transform",`translate(${c.x},${c.y}) ${e}`),this.options.doubleTools&&o>=this.options.longLength){const d=this.options.doubleToolsOffset||t;c=this.getPointAtLength(o-d),c!=null&&oo(this.tool2Cache,"transform",`translate(${c.x},${c.y}) ${e}`),oo(this.tool2Cache,"visibility","visible")}else this.options.doubleTools&&oo(this.tool2Cache,"visibility","hidden")}return this}updateArrowheadMarkers(){const e=this.containers.arrowheads;if(e==null)return this;if(e.style.display==="none")return this;const t=this.containers.sourceArrowhead,o=this.containers.targetArrowhead;if(t&&o){const d=(this.getConnectionLength()||0)<this.options.shortLength?.5:1;Xh(t,d),Xh(o,d),this.translateAndAutoOrientArrows(t,o)}return this}updateTerminalProperties(e){const t=this.cell,o=this.graph,c=t[e],d=c&&c.cell,f=`${e}View`;if(!d)return this[f]=null,this.updateTerminalMagnet(e),!0;const v=o.getCellById(d);if(!v)throw new Error(`Edge's ${e} node with id "${d}" not exists`);const x=v.findView(o);return x?(this[f]=x,this.updateTerminalMagnet(e),!0):!1}updateTerminalMagnet(e){const t=`${e}Magnet`,o=this.getTerminalView(e);if(o){let c=o.getMagnetFromEdgeTerminal(this.cell[e]);c===o.container&&(c=null),this[t]=c}else this[t]=null}translateAndAutoOrientArrows(e,t){const o=this.routePoints;e&&Qm(e,this.sourcePoint,o[0]||this.targetPoint,this.graph.view.stage),t&&Qm(t,this.targetPoint,o[o.length-1]||this.sourcePoint,this.graph.view.stage)}getLabelPositionAngle(e){const t=this.cell.getLabelAt(e);return t&&t.position&&typeof t.position=="object"&&t.position.angle||0}getLabelPositionArgs(e){const t=this.cell.getLabelAt(e);if(t&&t.position&&typeof t.position=="object")return t.position.options}getDefaultLabelPositionArgs(){const e=this.cell.getDefaultLabel();if(e&&e.position&&typeof e.position=="object")return e.position.options}mergeLabelPositionArgs(e,t){return e===null?null:e===void 0?t===null?null:t:Bo({},t,e)}addLabel(e,t,o,c){let d,f,v=0,x;typeof e!="number"?(d=e.x,f=e.y,typeof t=="number"?(v=t,x=o):x=t):(d=e,f=t,typeof o=="number"?(v=o,x=c):x=o);const w=this.getDefaultLabelPositionArgs(),_=x,A=this.mergeLabelPositionArgs(_,w),P={position:this.getLabelPosition(d,f,v,A)},V=-1;return this.cell.insertLabel(P,V,x),V}addVertex(e,t,o){const c=typeof e!="number",d=c?e.x:e,f=c?e.y:t,v=c?t:o,x={x:d,y:f},w=this.getVertexIndex(d,f);return this.cell.insertVertex(x,w,v),w}sendToken(e,t,o){let c,d,f,v,x="linear";typeof t=="object"?(c=t.duration,d=t.reversed===!0,f=t.selector,t.rotate===!1?v="":t.rotate===!0?v="auto":t.rotate!=null&&(v=`${t.rotate}`),t.timing&&(x=t.timing)):(c=t,d=!1,f=null),c=c||1e3;const w={dur:`${c}ms`,repeatCount:"1",calcMode:x,fill:"freeze"};if(v&&(w.rotate=v),d&&(w.keyPoints="1;0",w.keyTimes="0;1"),typeof t=="object"){const{duration:Se,reversed:Re,selector:_e,rotate:Ue,timing:Qe}=t,bt=mA(t,["duration","reversed","selector","rotate","timing"]);Object.keys(bt).forEach(Pt=>{w[Pt]=bt[Pt]})}let _;if(typeof f=="string"?_=this.findOne(f,this.container,this.selectors):_=this.containers.connection?this.containers.connection:this.container.querySelector("path"),!(_ instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");const A=typeof e=="string"?this.findOne(e):e;if(A==null)throw new Error("Token animation requires a valid token element.");const P=A.parentNode,V=()=>{P||gd(A)},J=ir.create(A);P||J.appendTo(this.graph.view.stage);const ee=w.complete;w.complete=Se=>{V(),o&&o(),ee&&ee(Se)};const ge=J.animateAlongPath(w,_);return()=>{V(),ge()}}getConnection(){return this.path!=null?this.path.clone():null}getConnectionPathData(){if(this.path==null)return"";const e=this.cache.pathCache;return dn(e,"data")||(e.data=this.path.serialize()),e.data||""}getConnectionSubdivisions(){if(this.path==null)return null;const e=this.cache.pathCache;return dn(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}getConnectionLength(){if(this.path==null)return 0;const e=this.cache.pathCache;return dn(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}getPointAtLength(e){return this.path==null?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(e){return this.path==null?null:(pd(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(e){return this.path==null?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(e){return this.path==null?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(e){return this.path==null?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(e){return this.path==null?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(e){return this.path==null?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(e,t,o,c){const d={distance:0};let f=0,v;typeof o=="number"?(f=o,v=c):v=o,v!=null&&(d.options=v);const x=v&&v.absoluteOffset,w=!(v&&v.absoluteDistance),_=v&&v.absoluteDistance&&v.reverseDistance,A=this.path,P={segmentSubdivisions:this.getConnectionSubdivisions()},V=new Ve(e,t),J=A.closestPointT(V,P),ee=this.getConnectionLength()||0;let ge=A.lengthAtT(J,P);w&&(ge=ee>0?ge/ee:0),_&&(ge=-1*(ee-ge)||1),d.distance=ge;let Se;x||(Se=A.tangentAtT(J));let Re;if(Se)Re=Se.pointOffset(V);else{const _e=A.pointAtT(J),Ue=V.diff(_e);Re={x:Ue.x,y:Ue.y}}return d.offset=Re,d.angle=f,d}normalizeLabelPosition(e){return typeof e=="number"?{distance:e}:e}getLabelTransformationMatrix(e){const t=this.normalizeLabelPosition(e),o=t.options||{},c=t.angle||0,d=t.distance,f=d>0&&d<=1;let v=0;const x={x:0,y:0},w=t.offset;w&&(typeof w=="number"?v=w:(w.x!=null&&(x.x=w.x),w.y!=null&&(x.y=w.y)));const _=x.x!==0||x.y!==0||v===0,A=o.keepGradient,P=o.ensureLegibility,V=this.path,J={segmentSubdivisions:this.getConnectionSubdivisions()},ee=f?d*this.getConnectionLength():d,ge=V.tangentAtLength(ee,J);let Se,Re=c;if(ge){if(_)Se=ge.start,Se.translate(x);else{const _e=ge.clone();_e.rotate(-90,ge.start),_e.setLength(v),Se=_e.end}A&&(Re=ge.angle()+c,P&&(Re=ji.normalize((Re+90)%180-90)))}else Se=V.start,_&&Se.translate(x);return nc().translate(Se.x,Se.y).rotate(Re)}getLabelCoordinates(e){const t=this.getLabelTransformationMatrix(e);return new Ve(t.e,t.f)}getVertexIndex(e,t){const c=this.cell.getVertices(),d=this.getClosestPointLength(new Ve(e,t));let f=0;if(d!=null)for(const v=c.length;f<v;f+=1){const x=c[f],w=this.getClosestPointLength(x);if(w!=null&&d<w)break}return f}getEventArgs(e,t,o){const c=this,d=c.cell,f=d;return t==null||o==null?{e,view:c,edge:d,cell:f}:{e,x:t,y:o,view:c,edge:d,cell:f}}notifyUnhandledMouseDown(e,t,o){this.notify("edge:unhandled:mousedown",{e,x:t,y:o,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(e,t,o){super.onMouseDown(e,t,o),this.notify("edge:mousedown",this.getEventArgs(e,t,o))}notifyMouseMove(e,t,o){super.onMouseMove(e,t,o),this.notify("edge:mousemove",this.getEventArgs(e,t,o))}notifyMouseUp(e,t,o){super.onMouseUp(e,t,o),this.notify("edge:mouseup",this.getEventArgs(e,t,o))}onClick(e,t,o){super.onClick(e,t,o),this.notify("edge:click",this.getEventArgs(e,t,o))}onDblClick(e,t,o){super.onDblClick(e,t,o),this.notify("edge:dblclick",this.getEventArgs(e,t,o))}onContextMenu(e,t,o){super.onContextMenu(e,t,o),this.notify("edge:contextmenu",this.getEventArgs(e,t,o))}onMouseDown(e,t,o){switch(this.notifyMouseDown(e,t,o),e.target.getAttribute("class")){case"vertex":{this.startVertexDragging(e,t,o);return}case"vertex-remove":case"vertex-remove-area":{this.handleVertexRemoving(e,t,o);return}case"connection":case"connection-wrap":{this.handleVertexAdding(e,t,o);return}case"arrowhead":{this.startArrowheadDragging(e,t,o);return}case"source-marker":case"target-marker":{this.notifyUnhandledMouseDown(e,t,o);return}default:break}this.startEdgeDragging(e,t,o)}onMouseMove(e,t,o){const c=this.getEventData(e);switch(c.action){case"drag-vertex":{this.dragVertex(e,t,o);break}case"drag-label":{this.dragLabel(e,t,o);break}case"drag-arrowhead":{this.dragArrowhead(e,t,o);break}case"drag-edge":{this.dragEdge(e,t,o);break}default:break}return this.notifyMouseMove(e,t,o),c}onMouseUp(e,t,o){const c=this.getEventData(e);switch(c.action){case"drag-vertex":{this.stopVertexDragging(e,t,o);break}case"drag-label":{this.stopLabelDragging(e,t,o);break}case"drag-arrowhead":{this.stopArrowheadDragging(e,t,o);break}case"drag-edge":{this.stopEdgeDragging(e,t,o);break}default:break}return this.notifyMouseUp(e,t,o),this.checkMouseleave(e),c}onMouseOver(e){super.onMouseOver(e),this.notify("edge:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("edge:mouseout",this.getEventArgs(e))}onMouseEnter(e){super.onMouseEnter(e),this.notify("edge:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("edge:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,o,c){super.onMouseWheel(e,t,o,c),this.notify("edge:mousewheel",Object.assign({delta:c},this.getEventArgs(e,t,o)))}onCustomEvent(e,t,o,c){if(d2(e.target,"edge-tool",this.container)){if(e.stopPropagation(),this.can("useEdgeTools")){if(t==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,o,c)))}this.notifyMouseDown(e,o,c)}else this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,o,c))),super.onCustomEvent(e,t,o,c)}onLabelMouseDown(e,t,o){this.notifyMouseDown(e,t,o),this.startLabelDragging(e,t,o),this.getEventData(e).stopPropagation&&e.stopPropagation()}startEdgeDragging(e,t,o){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(e,t,o);return}this.setEventData(e,{x:t,y:o,moving:!1,action:"drag-edge"})}dragEdge(e,t,o){const c=this.getEventData(e);c.moving||(c.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e,x:t,y:o,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-c.x,o-c.y,{ui:!0}),this.setEventData(e,{x:t,y:o}),this.notify("edge:moving",{e,x:t,y:o,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(e,t,o){const c=this.getEventData(e);c.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e,x:t,y:o,view:this,cell:this.cell,edge:this.cell})),c.moving=!1}prepareArrowheadDragging(e,t){const o=this.getTerminalMagnet(e),c={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:t.isNewEdge===!0,terminalType:e,initialMagnet:o,initialTerminal:Up(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(c),c}createValidateConnectionArgs(e){const t=[];t[4]=e,t[5]=this;let o,c=0,d=0;e==="source"?(c=2,o="target"):(d=2,o="source");const f=this.cell[o],v=f.cell;if(v){let x;const w=t[c]=this.graph.renderer.findViewByCell(v);w&&(x=w.getMagnetFromEdgeTerminal(f),x===w.container&&(x=void 0)),t[c+1]=x}return(x,w)=>(t[d]=x,t[d+1]=x.container===w?void 0:w,t)}beforeArrowheadDragging(e){e.zIndex=this.cell.zIndex,this.cell.toFront();const t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}afterArrowheadDragging(e){e.zIndex!=null&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null);const t=this.container;t.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}arrowheadDragging(e,t,o,c){c.x=t,c.y=o,c.currentTarget!==e&&(c.currentMagnet&&c.currentView&&c.currentView.unhighlight(c.currentMagnet,{type:"magnetAdsorbed"}),c.currentView=this.graph.renderer.findViewByElem(e),c.currentView?(c.currentMagnet=c.currentView.findMagnet(e),c.currentMagnet&&this.graph.hook.validateConnection(...c.getValidateConnectionArgs(c.currentView,c.currentMagnet),c.currentView.getEdgeTerminal(c.currentMagnet,t,o,this.cell,c.terminalType))?c.currentView.highlight(c.currentMagnet,{type:"magnetAdsorbed"}):c.currentMagnet=null):c.currentMagnet=null),c.currentTarget=e,this.cell.prop(c.terminalType,{x:t,y:o},Object.assign(Object.assign({},c.options),{ui:!0}))}arrowheadDragged(e,t,o){const c=e.currentView,d=e.currentMagnet;if(!d||!c)return;c.unhighlight(d,{type:"magnetAdsorbed"});const f=e.terminalType,v=c.getEdgeTerminal(d,t,o,this.cell,f);this.cell.setTerminal(f,v,{ui:!0})}snapArrowhead(e,t,o){const c=this.graph,{snap:d,allowEdge:f}=c.options.connecting,v=typeof d=="object"&&d.radius||50,x={x:e-v,y:t-v,width:2*v,height:2*v},w=c.renderer.findViewsInArea(x);if(f){const Ue=c.renderer.findEdgeViewsInArea(x).filter(Qe=>Qe!==this);w.push(...Ue)}const _=o.closestView||null,A=o.closestMagnet||null;o.closestView=null,o.closestMagnet=null;let P,V=Number.MAX_SAFE_INTEGER;const J=new Ve(e,t);w.forEach(Ue=>{Ue.container.getAttribute("magnet")!=="false"&&(P=Ue.cell.getBBox().getCenter().distance(J),P<v&&P<V&&(A===Ue.container||c.hook.validateConnection(...o.getValidateConnectionArgs(Ue,null),Ue.getEdgeTerminal(Ue.container,e,t,this.cell,o.terminalType)))&&(V=P,o.closestView=Ue,o.closestMagnet=Ue.container)),Ue.container.querySelectorAll("[magnet]").forEach(Qe=>{if(Qe.getAttribute("magnet")!=="false"){const bt=Ue.getBBoxOfElement(Qe);P=J.distance(bt.getCenter()),P<v&&P<V&&(A===Qe||c.hook.validateConnection(...o.getValidateConnectionArgs(Ue,Qe),Ue.getEdgeTerminal(Qe,e,t,this.cell,o.terminalType)))&&(V=P,o.closestView=Ue,o.closestMagnet=Qe)}})});let ee;const ge=o.terminalType,Se=o.closestView,Re=o.closestMagnet,_e=A!==Re;if(_&&_e&&_.unhighlight(A,{type:"magnetAdsorbed"}),Se){if(!_e)return;Se.highlight(Re,{type:"magnetAdsorbed"}),ee=Se.getEdgeTerminal(Re,e,t,this.cell,ge)}else ee={x:e,y:t};this.cell.setTerminal(ge,ee,{},Object.assign(Object.assign({},o.options),{ui:!0}))}snapArrowheadEnd(e){const t=e.closestView,o=e.closestMagnet;t&&o&&(t.unhighlight(o,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(o)),e.closestView=null,e.closestMagnet=null}finishEmbedding(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}fallbackConnection(e){switch(e.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0});break}}notifyConnectionEvent(e,t){const o=e.terminalType,c=e.initialTerminal,d=this.cell[o];if(d&&!os.equalTerminals(c,d)){const v=this.graph,x=c,w=x.cell?v.getCellById(x.cell):null,_=x.port,A=w?v.findViewByCell(w):null,P=w||e.isNewEdge?null:Ve.create(c).toJSON(),V=d,J=V.cell?v.getCellById(V.cell):null,ee=V.port,ge=J?v.findViewByCell(J):null,Se=J?null:Ve.create(d).toJSON();this.notify("edge:connected",{e:t,previousCell:w,previousPort:_,previousView:A,previousPoint:P,currentCell:J,currentView:ge,currentPort:ee,currentPoint:Se,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:o,isNew:e.isNewEdge})}}highlightAvailableMagnets(e){const t=this.graph,o=t.model.getCells();e.marked={};for(let c=0,d=o.length;c<d;c+=1){const f=t.renderer.findViewByCell(o[c]);if(!f)continue;const v=Array.prototype.slice.call(f.container.querySelectorAll("[magnet]"));f.container.getAttribute("magnet")!=="false"&&v.push(f.container);const x=v.filter(w=>t.hook.validateConnection(...e.getValidateConnectionArgs(f,w),f.getEdgeTerminal(w,e.x,e.y,this.cell,e.terminalType)));if(x.length>0){for(let w=0,_=x.length;w<_;w+=1)f.highlight(x[w],{type:"magnetAvailable"});f.highlight(null,{type:"nodeAvailable"}),e.marked[f.cell.id]=x}}}unhighlightAvailableMagnets(e){const t=e.marked||{};Object.keys(t).forEach(o=>{const c=this.graph.renderer.findViewByCell(o);c&&(t[o].forEach(f=>{c.unhighlight(f,{type:"magnetAvailable"})}),c.unhighlight(null,{type:"nodeAvailable"}))}),e.marked=null}startArrowheadDragging(e,t,o){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(e,t,o);return}const d=e.target.getAttribute("data-terminal"),f=this.prepareArrowheadDragging(d,{x:t,y:o});this.setEventData(e,f)}dragArrowhead(e,t,o){const c=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,o,c):this.arrowheadDragging(this.getEventTarget(e),t,o,c)}stopArrowheadDragging(e,t,o){const c=this.graph,d=this.getEventData(e);c.options.connecting.snap?this.snapArrowheadEnd(d):this.arrowheadDragged(d,t,o),c.hook.validateEdge(this.cell,d.terminalType,d.initialTerminal)?(this.finishEmbedding(d),this.notifyConnectionEvent(d,e)):this.fallbackConnection(d),this.afterArrowheadDragging(d)}startLabelDragging(e,t,o){if(this.can("edgeLabelMovable")){const c=e.currentTarget,d=parseInt(c.getAttribute("data-index"),10),f=this.getLabelPositionAngle(d),v=this.getLabelPositionArgs(d),x=this.getDefaultLabelPositionArgs(),w=this.mergeLabelPositionArgs(v,x);this.setEventData(e,{index:d,positionAngle:f,positionArgs:w,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}dragLabel(e,t,o){const c=this.getEventData(e),d=this.cell.getLabelAt(c.index),f=Bo({},d,{position:this.getLabelPosition(t,o,c.positionAngle,c.positionArgs)});this.cell.setLabelAt(c.index,f)}stopLabelDragging(e,t,o){}handleVertexAdding(e,t,o){if(!this.can("vertexAddable")){this.notifyUnhandledMouseDown(e,t,o);return}const c=this.addVertex({x:t,y:o},{ui:!0});this.setEventData(e,{index:c,action:"drag-vertex"})}handleVertexRemoving(e,t,o){if(!this.can("vertexDeletable")){this.notifyUnhandledMouseDown(e,t,o);return}const c=e.target,d=parseInt(c.getAttribute("idx"),10);this.cell.removeVertexAt(d)}startVertexDragging(e,t,o){if(!this.can("vertexMovable")){this.notifyUnhandledMouseDown(e,t,o);return}const c=e.target,d=parseInt(c.getAttribute("idx"),10);this.setEventData(e,{index:d,action:"drag-vertex"})}dragVertex(e,t,o){const c=this.getEventData(e);this.cell.setVertexAt(c.index,{x:t,y:o},{ui:!0})}stopVertexDragging(e,t,o){}}(function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.isNodeView=="function"&&typeof c.isEdgeView=="function"&&typeof c.confirmUpdate=="function"&&typeof c.update=="function"&&typeof c.getConnection=="function"}l.isEdgeView=e})(xd||(xd={})),xd.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),xd.registry.register("edge",xd,!0);class Lc extends Gs{constructor(){super(...arguments),this.scalableNode=null,this.rotatableNode=null,this.scalableSelector="scalable",this.rotatableSelector="rotatable",this.defaultPortMarkup=Ei.getPortMarkup(),this.defaultPortLabelMarkup=Ei.getPortLabelMarkup(),this.defaultPortContainerMarkup=Ei.getPortContainerMarkup(),this.portsCache={}}get[Symbol.toStringTag](){return Lc.toStringTag}getContainerClassName(){const e=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||e.push(this.prefixClassName("node-immovable")),e.join(" ")}updateClassName(e){const t=e.target;if(t.hasAttribute("magnet")){const o=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?tu(t,o):io(t,o)}else{const o=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(o):this.addClass(o)}}isNodeView(){return!0}confirmUpdate(e,t={}){let o=e;return this.hasAction(o,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(o,"render")?(this.render(),o=this.removeAction(o,["render","update","resize","translate","rotate","ports","tools"])):(o=this.handleAction(o,"resize",()=>this.resize(t),"update"),o=this.handleAction(o,"update",()=>this.update(),el.useCSSSelector?"ports":null),o=this.handleAction(o,"translate",()=>this.translate()),o=this.handleAction(o,"rotate",()=>this.rotate()),o=this.handleAction(o,"ports",()=>this.renderPorts()),o=this.handleAction(o,"tools",()=>this.renderTools())),o}update(e){this.cleanCache(),el.useCSSSelector&&this.removePorts();const t=this.cell,o=t.getSize(),c=t.getAttrs();this.updateAttrs(this.container,c,{attrs:e===c?null:e,rootBBox:new Ln(0,0,o.width,o.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),el.useCSSSelector&&this.renderPorts()}renderMarkup(){const e=this.cell.markup;if(e)return typeof e=="string"?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid node markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container),o=c=>Array.isArray(c)?c[0]:c;this.selectors=t.selectors,this.rotatableNode=o(this.selectors[this.rotatableSelector]),this.scalableNode=o(this.selectors[this.scalableSelector]),this.container.appendChild(t.fragment)}renderStringMarkup(e){nv(this.container,ir.toNodes(ir.createVectors(e))),this.rotatableNode=zm(this.container,`.${this.rotatableSelector}`),this.scalableNode=zm(this.container,`.${this.scalableSelector}`),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)}render(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),el.useCSSSelector||this.renderPorts(),this.renderTools(),this}resize(e={}){if(this.scalableNode)return this.updateSize(e);this.cell.getAngle()&&this.rotate(),this.update()}translate(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()}rotate(){if(this.rotatableNode){this.updateRotation(),this.update();return}this.updateTransform()}getTranslationString(){const e=this.cell.getPosition();return`translate(${e.x},${e.y})`}getRotationString(){const e=this.cell.getAngle();if(e){const t=this.cell.getSize();return`rotate(${e},${t.width/2},${t.height/2})`}}updateTransform(){let e=this.getTranslationString();const t=this.getRotationString();t&&(e+=` ${t}`),this.container.setAttribute("transform",e)}updateRotation(){if(this.rotatableNode!=null){const e=this.getRotationString();e!=null?this.rotatableNode.setAttribute("transform",e):this.rotatableNode.removeAttribute("transform")}}updateTranslation(){this.container.setAttribute("transform",this.getTranslationString())}updateSize(e={}){const t=this.cell,o=t.getSize(),c=t.getAngle(),d=this.scalableNode;let f=!1;d.getElementsByTagName("path").length>0&&(f=!0);const v=rc(d,{recursive:f}),x=o.width/(v.width||1),w=o.height/(v.height||1);d.setAttribute("transform",`scale(${x},${w})`);const _=this.rotatableNode;if(_!=null){const A=_.getAttribute("transform");if(A){_.setAttribute("transform",`${A} rotate(${-c},${o.width/2},${o.height/2})`);const P=rc(d,{target:this.graph.view.stage});t.prop("position",{x:P.x,y:P.y},Object.assign({updated:!0},e)),this.translate(),this.rotate()}}this.update()}findPortElem(e,t){const o=e?this.portsCache[e]:null;if(!o)return null;const c=o.portContentElement,d=o.portContentSelectors||{};return this.findOne(t,c,d)}initializePorts(){this.cleanPortsCache()}refreshPorts(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()}cleanPortsCache(){this.portsCache={}}removePorts(){Object.keys(this.portsCache).forEach(e=>{const t=this.portsCache[e];gd(t.portElement)})}renderPorts(){const e=this.getPortsContainer(),t=[];e.childNodes.forEach(d=>{t.push(d)});const o=pn(this.cell.getParsedPorts(),"zIndex"),c="auto";o[c]&&o[c].forEach(d=>{const f=this.getPortElement(d);e.append(f),t.push(f)}),Object.keys(o).forEach(d=>{if(d!==c){const f=parseInt(d,10);this.appendPorts(o[d],f,t)}}),this.updatePorts()}getPortsContainer(){return this.rotatableNode||this.container}appendPorts(e,t,o){const c=e.map(d=>this.getPortElement(d));o[t]||t<0?h2(o[Math.max(t,0)],c):nv(this.getPortsContainer(),c)}getPortElement(e){const t=this.portsCache[e.id];return t?t.portElement:this.createPortElement(e)}createPortElement(e){let t=Ei.renderMarkup(this.getPortContainerMarkup());const o=t.elem;if(o==null)throw new Error("Invalid port container markup.");t=Ei.renderMarkup(this.getPortMarkup(e));const c=t.elem,d=t.selectors;if(c==null)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},c),t=Ei.renderMarkup(this.getPortLabelMarkup(e.label));const f=t.elem,v=t.selectors;if(f==null)throw new Error("Invalid port label markup.");let x;if(d&&v){for(const _ in v)if(d[_]&&_!==this.rootSelector)throw new Error("Selectors within port must be unique.");x=Object.assign(Object.assign({},d),v)}else x=d||v;let w="x6-port";return e.group&&(w+=` x6-port-${e.group}`),io(o,w),io(c,"x6-port-body"),io(f,"x6-port-label"),o.appendChild(c),o.appendChild(f),this.portsCache[e.id]={portElement:o,portSelectors:x,portLabelElement:f,portLabelSelectors:v,portContentElement:c,portContentSelectors:d},this.graph.hook.onPortRendered({port:e,node:this.cell,container:o,selectors:x,labelContainer:f,labelSelectors:v,contentContainer:c,contentSelectors:d}),o}updatePorts(){this.updatePortGroup();const e=this.cell.getParsedGroups();Object.keys(e).forEach(t=>this.updatePortGroup(t))}updatePortGroup(e){const t=Ln.fromSize(this.cell.getSize()),o=this.cell.getPortsLayoutByGroup(e,t);for(let c=0,d=o.length;c<d;c+=1){const f=o[c],v=f.portId,x=this.portsCache[v]||{},w=f.portLayout;if(this.applyPortTransform(x.portElement,w),f.portAttrs!=null){const A={selectors:x.portSelectors||{}};f.portSize&&(A.rootBBox=Ln.fromSize(f.portSize)),this.updateAttrs(x.portElement,f.portAttrs,A)}const _=f.labelLayout;if(_&&(this.applyPortTransform(x.portLabelElement,_,-(w.angle||0)),_.attrs)){const A={selectors:x.portLabelSelectors||{}};f.labelSize&&(A.rootBBox=Ln.fromSize(f.labelSize)),this.updateAttrs(x.portLabelElement,_.attrs,A)}}}applyPortTransform(e,t,o=0){const c=t.angle,d=t.position,f=nc().rotate(o).translate(d.x||0,d.y||0).rotate(c||0);eg(e,f,{absolute:!0})}getPortContainerMarkup(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup}getPortMarkup(e){return e.markup||this.cell.portMarkup||this.defaultPortMarkup}getPortLabelMarkup(e){return e.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup}getEventArgs(e,t,o){const c=this,d=c.cell,f=d;return t==null||o==null?{e,view:c,node:d,cell:f}:{e,x:t,y:o,view:c,node:d,cell:f}}notifyMouseDown(e,t,o){super.onMouseDown(e,t,o),this.notify("node:mousedown",this.getEventArgs(e,t,o))}notifyMouseMove(e,t,o){super.onMouseMove(e,t,o),this.notify("node:mousemove",this.getEventArgs(e,t,o))}notifyMouseUp(e,t,o){super.onMouseUp(e,t,o),this.notify("node:mouseup",this.getEventArgs(e,t,o))}onClick(e,t,o){super.onClick(e,t,o),this.notify("node:click",this.getEventArgs(e,t,o))}onDblClick(e,t,o){super.onDblClick(e,t,o),this.notify("node:dblclick",this.getEventArgs(e,t,o))}onContextMenu(e,t,o){super.onContextMenu(e,t,o),this.notify("node:contextmenu",this.getEventArgs(e,t,o))}onMouseDown(e,t,o){this.isPropagationStopped(e)||(this.notifyMouseDown(e,t,o),this.startNodeDragging(e,t,o))}onMouseMove(e,t,o){const c=this.getEventData(e),d=c.action;if(d==="magnet")this.dragMagnet(e,t,o);else{if(d==="move"){const v=c.targetView||this;v.dragNode(e,t,o),v.notify("node:moving",{e,x:t,y:o,view:v,cell:v.cell,node:v.cell})}this.notifyMouseMove(e,t,o)}this.setEventData(e,c)}onMouseUp(e,t,o){const c=this.getEventData(e),d=c.action;d==="magnet"?this.stopMagnetDragging(e,t,o):(this.notifyMouseUp(e,t,o),d==="move"&&(c.targetView||this).stopNodeDragging(e,t,o));const f=c.targetMagnet;f&&this.onMagnetClick(e,f,t,o),this.checkMouseleave(e)}onMouseOver(e){super.onMouseOver(e),this.notify("node:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("node:mouseout",this.getEventArgs(e))}onMouseEnter(e){this.updateClassName(e),super.onMouseEnter(e),this.notify("node:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("node:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,o,c){super.onMouseWheel(e,t,o,c),this.notify("node:mousewheel",Object.assign({delta:c},this.getEventArgs(e,t,o)))}onMagnetClick(e,t,o,c){this.graph.view.getMouseMovedCount(e)>this.graph.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:t},this.getEventArgs(e,o,c)))}onMagnetDblClick(e,t,o,c){this.notify("node:magnet:dblclick",Object.assign({magnet:t},this.getEventArgs(e,o,c)))}onMagnetContextMenu(e,t,o,c){this.notify("node:magnet:contextmenu",Object.assign({magnet:t},this.getEventArgs(e,o,c)))}onMagnetMouseDown(e,t,o,c){this.startMagnetDragging(e,o,c)}onCustomEvent(e,t,o,c){this.notify("node:customevent",Object.assign({name:t},this.getEventArgs(e,o,c))),super.onCustomEvent(e,t,o,c)}prepareEmbedding(e){const o=this.getEventData(e).cell||this.cell,c=this.graph.findViewByCell(o),d=this.graph.snapToGrid(e.clientX,e.clientY);this.notify("node:embed",{e,node:o,view:c,cell:o,x:d.x,y:d.y,currentParent:o.getParent()})}processEmbedding(e,t){const o=t.cell||this.cell,c=t.graph||this.graph,d=c.options.embedding,f=d.findParent;let v=typeof f=="function"?er(f,c,{view:this,node:this.cell}).filter(P=>ki.isCell(P)&&this.cell.id!==P.id&&!P.isDescendantOf(this.cell)):c.model.getNodesUnderNode(o,{by:f});if(d.frontOnly&&v.length>0){const P=pn(v,"zIndex"),V=Fn(Object.keys(P));V&&(v=P[V])}v=v.filter(P=>P.visible);let x=null;const w=t.candidateEmbedView,_=d.validate;for(let P=v.length-1;P>=0;P-=1){const V=v[P];if(w&&w.cell.id===V.id){x=w;break}else{const J=V.findView(c);if(er(_,c,{child:this.cell,parent:J.cell,childView:this,parentView:J})){x=J;break}}}this.clearEmbedding(t),x&&x.highlight(null,{type:"embedding"}),t.candidateEmbedView=x;const A=c.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e,cell:o,node:o,view:c.findViewByCell(o),x:A.x,y:A.y,currentParent:o.getParent(),candidateParent:x?x.cell:null})}clearEmbedding(e){const t=e.candidateEmbedView;t&&(t.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null)}finalizeEmbedding(e,t){const o=t.cell||this.cell,c=t.graph||this.graph,d=c.findViewByCell(o),f=o.getParent(),v=t.candidateEmbedView;if(v?(v.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null,(f==null||f.id!==v.cell.id)&&v.cell.insertChild(o,void 0,{ui:!0})):f&&f.unembed(o,{ui:!0}),c.model.getConnectedEdges(o,{deep:!0}).forEach(x=>{x.updateParent({ui:!0})}),d&&v){const x=c.snapToGrid(e.clientX,e.clientY);d.notify("node:embedded",{e,cell:o,x:x.x,y:x.y,node:o,view:c.findViewByCell(o),previousParent:f,currentParent:o.getParent()})}}getDelegatedView(){let e=this.cell,t=this;for(;t&&!e.isEdge();){if(!e.hasParent()||t.can("stopDelegateOnDragging"))return t;e=e.getParent(),t=this.graph.renderer.findViewByCell(e)}return null}startMagnetDragging(e,t,o){if(!this.can("magnetConnectable"))return;e.stopPropagation();const c=e.currentTarget,d=this.graph;this.setEventData(e,{targetMagnet:c}),d.hook.validateMagnet(this,c,e)?(d.options.magnetThreshold<=0&&this.startConnectting(e,c,t,o),this.setEventData(e,{action:"magnet"}),this.stopPropagation(e)):((qf(c,"x6-port-body")||G()(c).closest(".x6-port-body").length>0)&&this.stopPropagation(e),this.onMouseDown(e,t,o)),d.view.delegateDragEvents(e,this)}startConnectting(e,t,o,c){this.graph.model.startBatch("add-edge");const d=this.createEdgeFromMagnet(t,o,c);d.notifyMouseDown(e,o,c),d.setEventData(e,d.prepareArrowheadDragging("target",{x:o,y:c,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(e,{edgeView:d})}createEdgeFromMagnet(e,t,o){const c=this.graph,d=c.model,f=c.hook.getDefaultEdge(this,e);return f.setSource(Object.assign(Object.assign({},f.getSource()),this.getEdgeTerminal(e,t,o,f,"source"))),f.setTarget(Object.assign(Object.assign({},f.getTarget()),{x:t,y:o})),f.addTo(d,{async:!1,ui:!0}),f.findView(c)}dragMagnet(e,t,o){const c=this.getEventData(e),d=c.edgeView;if(d)d.onMouseMove(e,t,o),this.autoScrollGraph(e.clientX,e.clientY);else{const f=this.graph,v=f.options.magnetThreshold,x=this.getEventTarget(e),w=c.targetMagnet;if(v==="onleave"){if(w===x||w.contains(x))return}else if(f.view.getMouseMovedCount(e)<=v)return;this.startConnectting(e,w,t,o)}}stopMagnetDragging(e,t,o){const d=this.eventData(e).edgeView;d&&(d.onMouseUp(e,t,o),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(e,t,o){this.notify("node:unhandled:mousedown",{e,x:t,y:o,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(e,t,o,c,d){let f=[d];const v=this.graph.selection.widget;if(v&&v.options.movable){const x=this.graph.getSelectedCells();x.includes(d)&&(f=x.filter(w=>w.isNode()))}f.forEach(x=>{this.notify(e,{e:t,x:o,y:c,cell:x,node:x,view:x.findView(this.graph)})})}startNodeDragging(e,t,o){const c=this.getDelegatedView();if(c==null||!c.can("nodeMovable"))return this.notifyUnhandledMouseDown(e,t,o);this.setEventData(e,{targetView:c,action:"move"});const d=Ve.create(c.cell.getPosition());c.setEventData(e,{moving:!1,offset:d.diff(t,o),restrict:this.graph.hook.getRestrictArea(c)})}dragNode(e,t,o){const c=this.cell,d=this.graph,f=d.getGridSize(),v=this.getEventData(e),x=v.offset,w=v.restrict;v.moving||(v.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",e,t,o,this.cell)),this.autoScrollGraph(e.clientX,e.clientY);const _=aa.snapToGrid(t+x.x,f),A=aa.snapToGrid(o+x.y,f);c.setPosition(_,A,{restrict:w,deep:!0,ui:!0}),d.options.embedding.enabled&&(v.embedding||(this.prepareEmbedding(e),v.embedding=!0),this.processEmbedding(e,v))}stopNodeDragging(e,t,o){const c=this.getEventData(e);c.embedding&&this.finalizeEmbedding(e,c),c.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",e,t,o,this.cell)),c.moving=!1,c.embedding=!1}autoScrollGraph(e,t){const o=this.graph.scroller.widget;o&&o.autoScroll(e,t)}}(function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.isNodeView=="function"&&typeof c.isEdgeView=="function"&&typeof c.confirmUpdate=="function"&&typeof c.update=="function"&&typeof c.findPortElem=="function"&&typeof c.resize=="function"&&typeof c.rotate=="function"&&typeof c.translate=="function"}l.isNodeView=e})(Lc||(Lc={})),Lc.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),Lc.registry.register("node",Lc,!0);const cw=sw("text");class lw extends of("text",{view:cw,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0}){}(function(l){class e extends Lc{confirmUpdate(o,c={}){let d=super.confirmUpdate(o,c);return this.hasAction(d,"scale")&&(this.resize(),d=this.removeAction(d,"scale")),d}}l.View=e,e.config({actions:{attrs:["scale"]}}),Lc.registry.register(cw,e)})(lw||(lw={}));class uw extends Cc{constructor(e,t={}){super(),this.length=0,this.comparator=t.comparator||"zIndex",this.clean(),e&&this.reset(e,{silent:!0})}toJSON(){return this.cells.map(e=>e.toJSON())}add(e,t,o){let c,d;typeof t=="number"?(c=t,d=Object.assign({merge:!1},o)):(c=this.length,d=Object.assign({merge:!1},t)),c>this.length&&(c=this.length),c<0&&(c+=this.length+1);const f=Array.isArray(e)?e:[e],v=this.comparator&&typeof t!="number"&&d.sort!==!1,x=this.comparator||null;let w=!1;const _=[],A=[];return f.forEach(P=>{const V=this.get(P);V?d.merge&&!P.isSameStore(V)&&(V.setProp(P.getProp(),o),A.push(V),v&&!w&&(x==null||typeof x=="function"?w=V.hasChanged():typeof x=="string"?w=V.hasChanged(x):w=x.some(J=>V.hasChanged(J)))):(_.push(P),this.reference(P))}),_.length&&(v&&(w=!0),this.cells.splice(c,0,..._),this.length=this.cells.length),w&&this.sort({silent:!0}),d.silent||(_.forEach((P,V)=>{const J={cell:P,index:c+V,options:d};this.trigger("added",J),d.dryrun||P.notify("added",Object.assign({},J))}),w&&this.trigger("sorted"),(_.length||A.length)&&this.trigger("updated",{added:_,merged:A,removed:[],options:d})),this}remove(e,t={}){const o=Array.isArray(e)?e:[e],c=this.removeCells(o,t);return!t.silent&&c.length>0&&this.trigger("updated",{options:t,removed:c,added:[],merged:[]}),Array.isArray(e)?c:c[0]}removeCells(e,t){const o=[];for(let c=0;c<e.length;c+=1){const d=this.get(e[c]);if(d==null)continue;const f=this.cells.indexOf(d);this.cells.splice(f,1),this.length-=1,delete this.map[d.id],o.push(d),this.unreference(d),t.dryrun||d.remove(),t.silent||(this.trigger("removed",{cell:d,index:f,options:t}),t.dryrun||d.notify("removed",{cell:d,index:f,options:t}))}return o}reset(e,t={}){const o=this.cells.slice();if(o.forEach(c=>this.unreference(c)),this.clean(),this.add(e,Object.assign({silent:!0},t)),!t.silent){const c=this.cells.slice();this.trigger("reseted",{options:t,previous:o,current:c});const d=[],f=[];c.forEach(v=>{o.some(w=>w.id===v.id)||d.push(v)}),o.forEach(v=>{c.some(w=>w.id===v.id)||f.push(v)}),this.trigger("updated",{options:t,added:d,removed:f,merged:[]})}return this}push(e,t){return this.add(e,this.length,t)}pop(e){const t=this.at(this.length-1);return this.remove(t,e)}unshift(e,t){return this.add(e,0,t)}shift(e){const t=this.at(0);return this.remove(t,e)}get(e){if(e==null)return null;const t=typeof e=="string"||typeof e=="number"?e:e.id;return this.map[t]||null}has(e){return this.get(e)!=null}at(e){return e<0&&(e+=this.length),this.cells[e]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(e){return this.cells.indexOf(e)}toArray(){return this.cells.slice()}sort(e={}){return this.comparator!=null&&(this.cells=Lg(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}clone(){const e=this.constructor;return new e(this.cells.slice(),{comparator:this.comparator})}reference(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}unreference(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}notifyCellEvent(e,t){const o=t.cell;this.trigger(`cell:${e}`,t),o&&(o.isNode()?this.trigger(`node:${e}`,Object.assign(Object.assign({},t),{node:o})):o.isEdge()&&this.trigger(`edge:${e}`,Object.assign(Object.assign({},t),{edge:o})))}clean(){this.length=0,this.cells=[],this.map={}}}class wc extends Cc{constructor(e=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new uw(e),this.setup()}get[Symbol.toStringTag](){return wc.toStringTag}notify(e,t){this.trigger(e,t);const o=this.graph;return o&&(e==="sorted"||e==="reseted"||e==="updated"?o.trigger(`model:${e}`,t):o.trigger(e,t)),this}setup(){const e=this.collection;e.on("sorted",()=>this.notify("sorted",null)),e.on("updated",t=>this.notify("updated",t)),e.on("cell:change:zIndex",()=>this.sortOnChangeZ()),e.on("added",({cell:t})=>{this.onCellAdded(t)}),e.on("removed",t=>{const o=t.cell;this.onCellRemoved(o,t.options),this.notify("cell:removed",t),o.isNode()?this.notify("node:removed",Object.assign(Object.assign({},t),{node:o})):o.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},t),{edge:o}))}),e.on("reseted",t=>{this.onReset(t.current),this.notify("reseted",t)}),e.on("edge:change:source",({edge:t})=>this.onEdgeTerminalChanged(t,"source")),e.on("edge:change:target",({edge:t})=>{this.onEdgeTerminalChanged(t,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(e){const t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}onCellRemoved(e,t){const o=e.id;if(e.isEdge()){delete this.edges[o];const c=e.getSource(),d=e.getTarget();if(c&&c.cell){const f=this.outgoings[c.cell],v=f?f.indexOf(o):-1;v>=0&&(f.splice(v,1),f.length===0&&delete this.outgoings[c.cell])}if(d&&d.cell){const f=this.incomings[d.cell],v=f?f.indexOf(o):-1;v>=0&&(f.splice(v,1),f.length===0&&delete this.incomings[d.cell])}}else delete this.nodes[o];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}onReset(e){this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach(t=>this.onCellAdded(t))}onEdgeTerminalChanged(e,t){const o=t==="source"?this.outgoings:this.incomings,c=e.previous(t);if(c&&c.cell){const f=o[c.cell],v=f?f.indexOf(e.id):-1;v>=0&&(f.splice(v,1),f.length===0&&delete o[c.cell])}const d=e.getTerminal(t);if(d&&d.cell){const f=o[d.cell]||[];f.indexOf(e.id)===-1&&f.push(e.id),o[d.cell]=f}}prepareCell(e,t){return!e.model&&(!t||!t.dryrun)&&(e.model=this),e.zIndex==null&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}resetCells(e,t={}){return e.map(o=>this.prepareCell(o,Object.assign(Object.assign({},t),{dryrun:!0}))),this.collection.reset(e,t),e.map(o=>this.prepareCell(o,{options:t})),this}clear(e={}){const t=this.getCells();if(t.length===0)return this;const o=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",()=>{const c=t.sort((d,f)=>{const v=d.isEdge()?1:2,x=f.isEdge()?1:2;return v-x});for(;c.length>0;){const d=c.shift();d&&d.remove(o)}},o),this}addNode(e,t={}){const o=ys.isNode(e)?e:this.createNode(e);return this.addCell(o,t),o}createNode(e){return ys.create(e)}addEdge(e,t={}){const o=os.isEdge(e)?e:this.createEdge(e);return this.addCell(o,t),o}createEdge(e){return os.create(e)}addCell(e,t={}){return Array.isArray(e)?this.addCells(e,t):(!this.collection.has(e)&&!this.addings.has(e)&&(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,t),t),e.eachChild(o=>this.addCell(o,t)),this.addings.delete(e)),this)}addCells(e,t={}){const o=e.length;if(o===0)return this;const c=Object.assign(Object.assign({},t),{position:o-1,maxPosition:o-1});return this.startBatch("add",Object.assign(Object.assign({},c),{cells:e})),e.forEach(d=>{this.addCell(d,c),c.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},c),{cells:e})),this}removeCell(e,t={}){const o=typeof e=="string"?this.getCell(e):e;return o&&this.has(o)?this.collection.remove(o,t):null}updateCellId(e,t){this.startBatch("update",{id:t}),e.prop("id",t);const o=e.clone({keepId:!0});return this.addCell(o),this.getConnectedEdges(e).forEach(d=>{const f=d.getSourceCell(),v=d.getTargetCell();f===e&&d.setSource(Object.assign(Object.assign({},d.getSource()),{cell:t})),v===e&&d.setTarget(Object.assign(Object.assign({},d.getTarget()),{cell:t}))}),this.removeCell(e),this.stopBatch("update",{id:t}),o}removeCells(e,t={}){return e.length?this.batchUpdate("remove",()=>e.map(o=>this.removeCell(o,t))):[]}removeConnectedEdges(e,t={}){const o=this.getConnectedEdges(e);return o.forEach(c=>{c.remove(t)}),o}disconnectConnectedEdges(e,t={}){const o=typeof e=="string"?e:e.id;this.getConnectedEdges(e).forEach(c=>{const d=c.getSourceCell(),f=c.getTargetCell();d&&d.id===o&&c.setSource({x:0,y:0},t),f&&f.id===o&&c.setTarget({x:0,y:0},t)})}has(e){return this.collection.has(e)}total(){return this.collection.length}indexOf(e){return this.collection.indexOf(e)}getCell(e){return this.collection.get(e)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const e=this.collection.first();return e&&e.getZIndex()||0}getMaxZIndex(){const e=this.collection.last();return e&&e.getZIndex()||0}getCellsFromCache(e){return e?Object.keys(e).map(t=>this.getCell(t)).filter(t=>t!=null):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(e){const t=typeof e=="string"?e:e.id,o=this.outgoings[t];return o?o.map(c=>this.getCell(c)).filter(c=>c&&c.isEdge()):null}getIncomingEdges(e){const t=typeof e=="string"?e:e.id,o=this.incomings[t];return o?o.map(c=>this.getCell(c)).filter(c=>c&&c.isEdge()):null}getConnectedEdges(e,t={}){const o=[],c=typeof e=="string"?this.getCell(e):e;if(c==null)return o;const d={},f=t.indirect;let v=t.incoming,x=t.outgoing;v==null&&x==null&&(v=x=!0);const w=(_,A)=>{const P=A?this.getOutgoingEdges(_):this.getIncomingEdges(_);if(P?.forEach(V=>{d[V.id]||(o.push(V),d[V.id]=!0,f&&(v&&w(V,!1),x&&w(V,!0)))}),f&&_.isEdge()){const V=A?_.getTargetCell():_.getSourceCell();V&&V.isEdge()&&(d[V.id]||(o.push(V),w(V,A)))}};if(x&&w(c,!0),v&&w(c,!1),t.deep){const _=c.getDescendants({deep:!0}),A={};_.forEach(V=>{V.isNode()&&(A[V.id]=!0)});const P=(V,J)=>{const ee=J?this.getOutgoingEdges(V.id):this.getIncomingEdges(V.id);ee?.forEach(ge=>{if(!d[ge.id]){const Se=ge.getSourceCell(),Re=ge.getTargetCell();if(!t.enclosed&&Se&&A[Se.id]&&Re&&A[Re.id])return;o.push(ge),d[ge.id]=!0}})};_.forEach(V=>{V.isEdge()||(x&&P(V,!0),v&&P(V,!1))})}return o}isBoundary(e,t){const o=typeof e=="string"?this.getCell(e):e,c=t?this.getIncomingEdges(o):this.getOutgoingEdges(o);return c==null||c.length===0}getBoundaryNodes(e){const t=[];return Object.keys(this.nodes).forEach(o=>{if(this.isBoundary(o,e)){const c=this.getCell(o);c&&t.push(c)}}),t}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(e){return this.isBoundary(e,!0)}isLeaf(e){return this.isBoundary(e,!1)}getNeighbors(e,t={}){let o=t.incoming,c=t.outgoing;o==null&&c==null&&(o=c=!0);const f=this.getConnectedEdges(e,t).reduce((v,x)=>{const w=x.hasLoop(t),_=x.getSourceCell(),A=x.getTargetCell();return o&&_&&_.isNode()&&!v[_.id]&&(w||_!==e&&(!t.deep||!_.isDescendantOf(e)))&&(v[_.id]=_),c&&A&&A.isNode()&&!v[A.id]&&(w||A!==e&&(!t.deep||!A.isDescendantOf(e)))&&(v[A.id]=A),v},{});if(e.isEdge()){if(o){const v=e.getSourceCell();v&&v.isNode()&&!f[v.id]&&(f[v.id]=v)}if(c){const v=e.getTargetCell();v&&v.isNode()&&!f[v.id]&&(f[v.id]=v)}}return Object.keys(f).map(v=>f[v])}isNeighbor(e,t,o={}){let c=o.incoming,d=o.outgoing;return c==null&&d==null&&(c=d=!0),this.getConnectedEdges(e,o).some(f=>{const v=f.getSourceCell(),x=f.getTargetCell();return!!(c&&v&&v.id===t.id||d&&x&&x.id===t.id)})}getSuccessors(e,t={}){const o=[];return this.search(e,(c,d)=>{c!==e&&this.matchDistance(d,t.distance)&&o.push(c)},Object.assign(Object.assign({},t),{outgoing:!0})),o}isSuccessor(e,t,o={}){let c=!1;return this.search(e,(d,f)=>{if(d===t&&d!==e&&this.matchDistance(f,o.distance))return c=!0,!1},Object.assign(Object.assign({},o),{outgoing:!0})),c}getPredecessors(e,t={}){const o=[];return this.search(e,(c,d)=>{c!==e&&this.matchDistance(d,t.distance)&&o.push(c)},Object.assign(Object.assign({},t),{incoming:!0})),o}isPredecessor(e,t,o={}){let c=!1;return this.search(e,(d,f)=>{if(d===t&&d!==e&&this.matchDistance(f,o.distance))return c=!0,!1},Object.assign(Object.assign({},o),{incoming:!0})),c}matchDistance(e,t){return t==null?!0:typeof t=="function"?t(e):Array.isArray(t)&&t.includes(e)?!0:e===t}getCommonAncestor(...e){const t=[];return e.forEach(o=>{o&&(Array.isArray(o)?t.push(...o):t.push(o))}),ki.getCommonAncestor(...t)}getSubGraph(e,t={}){const o=[],c={},d=[],f=[],v=x=>{c[x.id]||(o.push(x),c[x.id]=x,x.isEdge()&&f.push(x),x.isNode()&&d.push(x))};return e.forEach(x=>{v(x),t.deep&&x.getDescendants({deep:!0}).forEach(_=>v(_))}),f.forEach(x=>{const w=x.getSourceCell(),_=x.getTargetCell();w&&!c[w.id]&&(o.push(w),c[w.id]=w,w.isNode()&&d.push(w)),_&&!c[_.id]&&(o.push(_),c[_.id]=_,_.isNode()&&d.push(_))}),d.forEach(x=>{this.getConnectedEdges(x,t).forEach(_=>{const A=_.getSourceCell(),P=_.getTargetCell();!c[_.id]&&A&&c[A.id]&&P&&c[P.id]&&(o.push(_),c[_.id]=_)})}),o}cloneSubGraph(e,t={}){const o=this.getSubGraph(e,t);return this.cloneCells(o)}cloneCells(e){return ki.cloneCells(e)}getNodesFromPoint(e,t){const o=typeof e=="number"?{x:e,y:t||0}:e;return this.getNodes().filter(c=>c.getBBox().containsPoint(o))}getNodesInArea(e,t,o,c,d){const f=typeof e=="number"?new Ln(e,t,o,c):Ln.create(e),v=typeof e=="number"?d:t,x=v&&v.strict;return this.getNodes().filter(w=>{const _=w.getBBox();return x?f.containsRect(_):f.isIntersectWithRect(_)})}getEdgesInArea(e,t,o,c,d){const f=typeof e=="number"?new Ln(e,t,o,c):Ln.create(e),v=typeof e=="number"?d:t,x=v&&v.strict;return this.getEdges().filter(w=>{const _=w.getBBox();return _.width===0?_.inflate(1,0):_.height===0&&_.inflate(0,1),x?f.containsRect(_):f.isIntersectWithRect(_)})}getNodesUnderNode(e,t={}){const o=e.getBBox();return(t.by==null||t.by==="bbox"?this.getNodesInArea(o):this.getNodesFromPoint(o[t.by])).filter(d=>e.id!==d.id&&!d.isDescendantOf(e))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(e,t={}){return ki.getCellsBBox(e,t)}search(e,t,o={}){o.breadthFirst?this.breadthFirstSearch(e,t,o):this.depthFirstSearch(e,t,o)}breadthFirstSearch(e,t,o={}){const c=[],d={},f={};for(c.push(e),f[e.id]=0;c.length>0;){const v=c.shift();if(v==null||d[v.id]||(d[v.id]=!0,er(t,this,v,f[v.id])===!1))continue;this.getNeighbors(v,o).forEach(w=>{f[w.id]=f[v.id]+1,c.push(w)})}}depthFirstSearch(e,t,o={}){const c=[],d={},f={};for(c.push(e),f[e.id]=0;c.length>0;){const v=c.pop();if(v==null||d[v.id]||(d[v.id]=!0,er(t,this,v,f[v.id])===!1))continue;const x=this.getNeighbors(v,o),w=c.length;x.forEach(_=>{f[_.id]=f[v.id]+1,c.splice(w,0,_)})}}getShortestPath(e,t,o={}){const c={};this.getEdges().forEach(w=>{const _=w.getSourceCellId(),A=w.getTargetCellId();_&&A&&(c[_]||(c[_]=[]),c[A]||(c[A]=[]),c[_].push(A),o.directed||c[A].push(_))});const d=typeof e=="string"?e:e.id,f=HC.run(c,d,o.weight),v=[];let x=typeof t=="string"?t:t.id;for(f[x]&&v.push(x);x=f[x];)v.unshift(x);return v}translate(e,t,o){return this.getCells().filter(c=>!c.hasParent()).forEach(c=>c.translate(e,t,o)),this}resize(e,t,o){return this.resizeCells(e,t,this.getCells(),o)}resizeCells(e,t,o,c={}){const d=this.getCellsBBox(o);if(d){const f=Math.max(e/d.width,0),v=Math.max(t/d.height,0),x=d.getOrigin();o.forEach(w=>w.scale(f,v,x,c))}return this}toJSON(e={}){return wc.toJSON(this.getCells(),e)}parseJSON(e){return wc.fromJSON(e)}fromJSON(e,t={}){const o=this.parseJSON(e);return this.resetCells(o,t),this}startBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}stopBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}batchUpdate(e,t,o={}){this.startBatch(e,o);const c=t();return this.stopBatch(e,o),c}hasActiveBatch(e=Object.keys(this.batches)){return(Array.isArray(e)?e:[e]).some(o=>this.batches[o]>0)}}(function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&typeof c.addNode=="function"&&typeof c.addEdge=="function"&&c.collection!=null}l.isModel=e})(wc||(wc={})),function(l){function e(o,c={}){return{cells:o.map(d=>d.toJSON(c))}}l.toJSON=e;function t(o){const c=[];return Array.isArray(o)?c.push(...o):(o.cells&&c.push(...o.cells),o.nodes&&o.nodes.forEach(d=>{d.shape==null&&(d.shape="rect"),c.push(d)}),o.edges&&o.edges.forEach(d=>{d.shape==null&&(d.shape="edge"),c.push(d)})),c.map(d=>{const f=d.shape;if(f){if(ys.registry.exist(f))return ys.create(d);if(os.registry.exist(f))return os.create(d)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}l.fromJSON=t}(wc||(wc={}));const ch=".text-block-content",Ey=sw("text-block");class Sy extends ys{get content(){return this.getContent()}set content(e){this.setContent(e)}getContent(){return this.store.get("content","")}setContent(e,t={}){this.store.set("content",e,t)}setup(){super.setup(),this.store.on("change:*",e=>{const t=e.key;t==="content"?this.updateContent(this.getContent()):t==="size"&&this.updateSize(this.getSize())}),this.updateSize(this.getSize()),this.updateContent(this.getContent())}updateSize(e){et.SUPPORT_FOREIGNOBJECT&&this.setAttrs({foreignObject:Object.assign({},e),[ch]:{style:Object.assign({},e)}})}updateContent(e){et.SUPPORT_FOREIGNOBJECT?this.setAttrs({[ch]:{html:e?lC(e):""}}):this.setAttrs({[ch]:{text:e}})}}(function(l){l.config({type:Ey,view:Ey,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',et.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">',`<div class="${ch.substr(1)}" />`,"</body>","</foreignObject>"].join(""):`<text class="${ch.substr(1)}"/>`,"</g>"].join(""),attrs:{".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}},[ch]:{refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}}}}),ys.registry.register(Ey,l)})(Sy||(Sy={})),function(l){const e="content";class t extends Lc{confirmUpdate(c,d={}){let f=super.confirmUpdate(c,d);return this.hasAction(f,e)&&(this.updateContent(),f=this.removeAction(f,e)),f}update(c){if(et.SUPPORT_FOREIGNOBJECT)super.update(c);else{const d=this.cell,f=Object.assign({},c||d.getAttrs());delete f[ch],super.update(f),(!c||dn(c,ch))&&this.updateContent(c)}}updateContent(c){if(et.SUPPORT_FOREIGNOBJECT)super.update(c);else{const d=this.cell,f=(c||d.getAttrs())[ch],v=E2(d.getContent(),d.getSize(),f,{svgDocument:this.graph.view.svg}),x={[ch]:Bo({},f,{text:v})};super.update(x)}}}l.View=t,function(o){o.config({bootstrap:["render",e],actions:et.SUPPORT_FOREIGNOBJECT?{}:{size:e,content:e}}),Lc.registry.register(Ey,o)}(t=l.View||(l.View={}))}(Sy||(Sy={}));const a3=ic.define({shape:"empty"});function yA(l,e="body"){return[{tagName:l,selector:e},{tagName:"text",selector:"label"}]}function lh(l,e,t={}){const o={constructorName:l,markup:yA(l,t.selector),attrs:{[l]:Object.assign({},ic.bodyAttr)}};return(t.parent||ic).define(Bo(o,e,{shape:l}))}const c3=lh("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),l3=ys.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:Object.assign(Object.assign({},ic.bodyAttr),{refWidth:"100%",refHeight:"100%"}),header:Object.assign(Object.assign({},ic.bodyAttr),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:Object.assign(Object.assign({},ic.labelAttr),{refX:"50%",refY:15,fontSize:16}),bodyText:Object.assign(Object.assign({},ic.labelAttr),{refY2:15})}}),u3=lh("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),V2=10,d3=ic.define({shape:"cylinder",overwrite:!0,markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:Object.assign(Object.assign({},ic.bodyAttr),{lateral:V2}),top:Object.assign(Object.assign({},ic.bodyAttr),{refCx:"50%",refRx:"50%",cy:V2,ry:V2})},attrHooks:{lateral:{set(l,{refBBox:e}){const t=pd(l);t&&(l=parseFloat(l)/100);const o=e.x,c=e.y,d=e.width,f=e.height,v=d/2,x=t?f*l:l,w=.551784,_=w*v,A=w*x,P=o,V=o+d/2,J=o+d,ee=c+x,ge=ee-x,Se=c+f-x,Re=c+f;return{d:["M",P,ee,"L",P,Se,"C",o,Se+A,V-_,Re,V,Re,"C",V+_,Re,J,Se+A,J,Se,"L",J,ee,"C",J,ee-A,V+_,ge,V,ge,"C",V-_,ge,P,ee-A,P,ee,"Z"].join(" ")}}}},knob:{enabled:!0,position({node:l}){const e=l.attr("body/lateral");return{x:0,y:e}},onMouseMove({node:l,data:e,deltaY:t}){if(t!==0){const o=l.getBBox(),c=l.attr("body/lateral");e.round==null&&(e.round=c);const d=0,f=o.height/2,v=eu(e.round+t,d,f);v!==c&&l.attr({body:{lateral:v},top:{cy:v,ry:v}})}}}}),h3=lh("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});var dw=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class g0 extends ic{get points(){return this.getPoints()}set points(e){this.setPoints(e)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(e,t){return e==null?this.removePoints():this.setAttrByPath("body/refPoints",g0.pointsToString(e),t),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}(function(l){function e(t){return typeof t=="string"?t:t.map(o=>Array.isArray(o)?o.join(","):Ve.isPointLike(o)?`${o.x}, ${o.y}`:"").join(" ")}l.pointsToString=e,l.config({propHooks(t){const{points:o}=t,c=dw(t,["points"]);if(o){const d=e(o);d&&Uh(c,"attrs/body/refPoints",d)}return c}})})(g0||(g0={}));const f3=lh("polygon",{},{parent:g0}),p3=lh("polyline",{},{parent:g0});var g3=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const hw=ic.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(l){const{path:e}=l,t=g3(l,["path"]);return e&&Uh(t,"attrs/body/refD",e),t}});var _v=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};const RP=ic.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},et.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:Sa.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},ic.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(l){const{text:e}=l,t=_v(l,["text"]);return e&&Uh(t,"attrs/label/text",e),t},attrHooks:{text:{set(l,{cell:e,view:t,refBBox:o,elem:c,attrs:d}){if(c instanceof HTMLElement)c.textContent=l;else{const f=d.style||{},v={text:l,width:-5,height:"100%"},x=Object.assign({textVerticalAnchor:"middle"},f),w=xc.presets.textWrap;return er(w.set,this,v,{cell:e,view:t,elem:c,refBBox:o,attrs:x}),{fill:f.color||null}}},position(l,{refBBox:e,elem:t}){if(t instanceof SVGElement)return e.getCenter()}}}}),kP=lh("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:Cy()},{selector:"image"}),LP=lh("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:Cy()}),v3=lh("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:Cy()}),XD=lh("image-inscribed",{propHooks:Cy(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}}),fw=os.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),ZD=os.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),GP=os.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}});class Nu extends ic{get html(){return this.getHTML()}set html(e){this.setHTML(e)}getHTML(){return this.store.get("html")}setHTML(e,t={}){return e==null?this.removeHTML(t):this.store.set("html",e,t),this}removeHTML(e={}){return this.store.remove("html",e)}}(function(l){class e extends Lc{init(){super.init(),this.cell.on("change:*",()=>{this.graph.hook.shouldUpdateHTMLComponent(this.cell)&&this.renderHTMLComponent()})}confirmUpdate(o){const c=super.confirmUpdate(o);return this.handleAction(c,e.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const o=this.selectors.foContent;if(o){const c=this.$(o).empty(),d=this.graph.hook.getHTMLComponent(this.cell);d&&(typeof d=="string"?c.html(d):c.append(d))}}}l.View=e,function(t){t.action="html",t.config({bootstrap:[t.action],actions:{html:t.action}}),Lc.registry.register("html-view",t)}(e=l.View||(l.View={}))})(Nu||(Nu={})),function(l){l.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Ei.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),ys.registry.register("html",l)}(Nu||(Nu={})),function(l){l.componentRegistry=Ss.create({type:"html componnet"})}(Nu||(Nu={}));var m3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class j2 extends jC{constructor(e){super(),this.delay=10,this.throttle=2,this.threshold=5,this.changeCount=0,this.timestamp=0,this.options=Object.assign(Object.assign({},j2.defaultOptions),e),this.graph.model.on("cell:change:*",this.onModelChanged,this)}get graph(){return this.options.graph}onModelChanged(){if(this.disabled)return;const t=(new Date().getTime()-this.timestamp)/1e3;t>this.delay||this.changeCount>=this.threshold&&t>this.throttle?(this.save(),this.reset()):this.changeCount+=1}save(){this.trigger("save")}reset(){this.changeCount=0,this.timestamp=new Date().getTime()}dispose(){this.graph.model.off("cell:change:*",this.onModelChanged,this)}}m3([jC.dispose()],j2.prototype,"dispose",null),function(l){l.defaultOptions={delay:10,throttle:2,threshold:5}}(j2||(j2={}));class No extends tl{constructor(e){super(),this.graph=e,this.init()}get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}init(){}}var FP=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class uh extends Di{constructor(e){super(),this.graph=e;const{selectors:t,fragment:o}=Ei.parseJSONMarkup(uh.markup);this.background=t.background,this.grid=t.grid,this.svg=t.svg,this.defs=t.defs,this.viewport=t.viewport,this.primer=t.primer,this.stage=t.stage,this.decorator=t.decorator,this.overlay=t.overlay,this.container=this.options.container,this.restore=uh.snapshoot(this.container),this.$(this.container).addClass(this.prefixClassName("graph")).append(o),this.delegateEvents()}get model(){return this.graph.model}get options(){return this.graph.options}delegateEvents(){const e=this.constructor;return super.delegateEvents(e.events),this}guard(e,t){return e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t)?!0:e.data&&e.data.guarded!==void 0?e.data.guarded:!(t&&t.cell&&ki.isCell(t.cell)||this.svg===e.target||this.container===e.target||G().contains(this.svg,e.target))}findView(e){return this.graph.renderer.findViewByElem(e)}onDblClick(e){this.options.preventDefaultDblClick&&e.preventDefault();const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const c=this.graph.snapToGrid(t.clientX,t.clientY);o?o.onDblClick(t,c.x,c.y):this.graph.trigger("blank:dblclick",{e:t,x:c.x,y:c.y})}onClick(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const c=this.graph.snapToGrid(t.clientX,t.clientY);o?o.onClick(t,c.x,c.y):this.graph.trigger("blank:click",{e:t,x:c.x,y:c.y})}}onContextMenu(e){this.options.preventDefaultContextMenu&&e.preventDefault();const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const c=this.graph.snapToGrid(t.clientX,t.clientY);o?o.onContextMenu(t,c.x,c.y):this.graph.trigger("blank:contextmenu",{e:t,x:c.x,y:c.y})}delegateDragEvents(e,t){e.data==null&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}});const o=this.constructor;this.delegateDocumentEvents(o.documentEvents,e.data),this.undelegateEvents()}getMouseMovedCount(e){return this.getEventData(e).mouseMovedCount||0}onMouseDown(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;this.options.preventDefaultMouseDown&&t.preventDefault();const c=this.graph.snapToGrid(t.clientX,t.clientY);o?o.onMouseDown(t,c.x,c.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:c.x,y:c.y})),this.delegateDragEvents(t,o)}onMouseMove(e){const t=this.getEventData(e),o=t.startPosition;if(o&&o.x===e.clientX&&o.y===e.clientY||(t.mouseMovedCount==null&&(t.mouseMovedCount=0),t.mouseMovedCount+=1,t.mouseMovedCount<=this.options.moveThreshold))return;const d=this.normalizeEvent(e),f=this.graph.snapToGrid(d.clientX,d.clientY),v=t.currentView;v?v.onMouseMove(d,f.x,f.y):this.graph.trigger("blank:mousemove",{e:d,x:f.x,y:f.y}),this.setEventData(d,t)}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),o=this.graph.snapToGrid(t.clientX,t.clientY),d=this.getEventData(e).currentView;d?d.onMouseUp(t,o.x,o.y):this.graph.trigger("blank:mouseup",{e:t,x:o.x,y:o.y}),e.isPropagationStopped()||this.onClick(G().Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(!this.guard(t,o))if(o)o.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}onMouseOut(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(!this.guard(t,o))if(o)o.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}onMouseEnter(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const c=this.graph.renderer.findViewByElem(t.relatedTarget);if(o){if(c===o)return;o.onMouseEnter(t)}else{if(c)return;this.graph.trigger("graph:mouseenter",{e:t})}}onMouseLeave(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const c=this.graph.renderer.findViewByElem(t.relatedTarget);if(o){if(c===o)return;o.onMouseLeave(t)}else{if(c)return;this.graph.trigger("graph:mouseleave",{e:t})}}onMouseWheel(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const c=t.originalEvent,d=this.graph.snapToGrid(c.clientX,c.clientY),f=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail));o?o.onMouseWheel(t,d.x,d.y,f):this.graph.trigger("blank:mousewheel",{e:t,delta:f,x:d.x,y:d.y})}onCustomEvent(e){const t=e.currentTarget,o=t.getAttribute("event")||t.getAttribute("data-event");if(o){const c=this.findView(t);if(c){const d=this.normalizeEvent(e);if(this.guard(d,c))return;const f=this.graph.snapToGrid(d.clientX,d.clientY);c.onCustomEvent(d,o,f.x,f.y)}}}handleMagnetEvent(e,t){const o=e.currentTarget,c=o.getAttribute("magnet");if(c&&c.toLowerCase()!=="false"){const d=this.findView(o);if(d){const f=this.normalizeEvent(e);if(this.guard(f,d))return;const v=this.graph.snapToGrid(f.clientX,f.clientY);er(t,this.graph,d,f,o,v.x,v.y)}}}onMagnetMouseDown(e){this.handleMagnetEvent(e,(t,o,c,d,f)=>{t.onMagnetMouseDown(o,c,d,f)})}onMagnetDblClick(e){this.handleMagnetEvent(e,(t,o,c,d,f)=>{t.onMagnetDblClick(o,c,d,f)})}onMagnetContextMenu(e){this.options.preventDefaultContextMenu&&e.preventDefault(),this.handleMagnetEvent(e,(t,o,c,d,f)=>{t.onMagnetContextMenu(o,c,d,f)})}onLabelMouseDown(e){const t=e.currentTarget,o=this.findView(t);if(o){const c=this.normalizeEvent(e);if(this.guard(c,o))return;const d=this.graph.snapToGrid(c.clientX,c.clientY);o.onLabelMouseDown(c,d.x,d.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}FP([Di.dispose()],uh.prototype,"dispose",null),function(l){const e=`${el.prefixCls}-graph`;l.markup=[{ns:Sa.xhtml,tagName:"div",selector:"background",className:`${e}-background`},{ns:Sa.xhtml,tagName:"div",selector:"grid",className:`${e}-grid`},{ns:Sa.svg,tagName:"svg",selector:"svg",className:`${e}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":Sa.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${e}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${e}-svg-primer`},{tagName:"g",selector:"stage",className:`${e}-svg-stage`},{tagName:"g",selector:"decorator",className:`${e}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${e}-svg-overlay`}]}]}];function t(o){const c=o.cloneNode();return o.childNodes.forEach(d=>c.appendChild(d)),()=>{for(Vm(o);o.attributes.length>0;)o.removeAttribute(o.attributes[0].name);for(let d=0,f=c.attributes.length;d<f;d+=1){const v=c.attributes[d];o.setAttribute(v.name,v.value)}c.childNodes.forEach(d=>o.appendChild(d))}}l.snapshoot=t}(uh||(uh={})),function(l){const e=el.prefixCls;l.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${e}-cell`]:"onMouseEnter",[`mouseleave  .${e}-cell`]:"onMouseLeave",[`mouseenter  .${e}-cell-tools`]:"onMouseEnter",[`mouseleave  .${e}-cell-tools`]:"onMouseLeave",[`mousedown   .${e}-cell [event]`]:"onCustomEvent",[`touchstart  .${e}-cell [event]`]:"onCustomEvent",[`mousedown   .${e}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${e}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${e}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${e}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${e}-cell image`]:"onImageDragStart",[`mousedown   .${e}-edge .${e}-edge-label`]:"onLabelMouseDown",[`touchstart  .${e}-edge .${e}-edge-label`]:"onLabelMouseDown"},l.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(uh||(uh={}));var ru;(function(l){function e(t,o){return(c,d,f)=>{const v=f.value;f.value=function(...x){if(this.scroller.widget==null){const _=`Shoule enable scroller to use method '${d}'`;if(t!==!1)throw console.error(_),new Error(_);return o!==!1&&console.warn(_),this}return v.call(this,...x)}}}l.checkScroller=e})(ru||(ru={}));const y3=`.x6-graph {
  position: relative;
  outline: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
@keyframes halo-pie-visibility {
  0% {
    visibility: hidden;
  }
  100% {
    visibility: visible;
  }
}
@keyframes halo-pie-opening {
  0% {
    transform: scale(0.4) rotate(-20deg);
  }
  100% {
    transform: scale(1) rotate(0);
  }
}
.x6-widget-handle {
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  background-size: 20px 20px;
  cursor: pointer;
  user-select: none;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle.hidden {
  display: none;
}
.x6-widget-handle-selected {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}
.x6-widget-handle-remove {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: pointer;
}
.x6-widget-handle-remove:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-rotate {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-rotate:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-resize {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
  cursor: se-resize;
}
.x6-widget-handle-resize:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-clone {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-clone:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-link {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
.x6-widget-handle-link:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-fork {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-fork:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-direction {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-direction:hover {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {
  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;
}
.x6-widget-handle-surround .x6-widget-handle-pos-se {
  right: -25px;
  bottom: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-nw {
  top: -21px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-n {
  top: -22px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-e {
  top: -webkit-calc(40%);
  top: calc(50% - 10px);
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-ne {
  top: -21px;
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-w {
  top: 50%;
  left: -25px;
  margin-top: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-sw {
  bottom: -25px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-s {
  bottom: -24px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {
  width: 15px;
  height: 15px;
  font-size: 15px;
  background-size: 15px 15px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {
  right: -19px;
  bottom: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {
  top: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {
  top: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {
  top: -webkit-calc(42%);
  top: calc(50% - 8px);
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {
  top: -19px;
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {
  left: -19px;
  margin-top: -8px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {
  bottom: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {
  bottom: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {
  width: 10px;
  height: 10px;
  font-size: 10px;
  background-size: 10px 10px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {
  right: -15px;
  bottom: -13px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {
  top: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {
  top: -13px;
  margin-left: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {
  top: -webkit-calc(45%);
  top: calc(50% - 5px);
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {
  top: -13px;
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {
  left: -15px;
  margin-top: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {
  bottom: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {
  bottom: -13px;
  margin-left: -5px;
}
.x6-widget-handle-toolbar {
  position: absolute;
  top: -50px;
  display: table-row;
  padding: 7px 5px;
}
.x6-widget-handle-toolbar::after {
  position: absolute;
  top: 100%;
  left: 10px;
  width: 0;
  height: 0;
  margin-top: 4px;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  content: '';
}
.x6-widget-handle-toolbar .x6-widget-handle {
  position: relative;
  display: table-cell;
  min-width: 20px;
  margin: 0 2px;
  background-position: 3px 3px;
  background-size: 16px 16px;
}
.x6-widget-handle-toolbar .x6-widget-handle::after {
  position: absolute;
  bottom: -11px;
  width: 100%;
  content: '';
}
.x6-widget-handle-pie {
  position: absolute;
  top: -webkit-calc(0%);
  top: calc(50% - 50px);
  right: -50px;
  z-index: 1;
  display: none;
  width: 100px;
  height: 100px;
  margin: -2px -2px 0 0;
  border-radius: 50%;
  cursor: default;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie .x6-widget-handle {
  width: 1px;
  height: auto;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie-slice-svg {
  width: 100%;
  height: 100%;
  overflow: visible !important;
}
.x6-widget-handle-pie-slice-img,
.x6-widget-handle-pie-slice-txt {
  display: none;
  pointer-events: none;
}
.x6-widget-handle-pie[data-pie-toggle-position='e'] {
  top: calc(50% - 50px);
  right: -50px;
  left: auto;
}
.x6-widget-handle-pie[data-pie-toggle-position='w'] {
  top: calc(50% - 50px);
  right: auto;
  left: -52px;
}
.x6-widget-handle-pie[data-pie-toggle-position='n'] {
  top: -50px;
  right: auto;
  bottom: auto;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie[data-pie-toggle-position='s'] {
  top: auto;
  right: auto;
  bottom: -52px;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie-opened {
  display: block;
  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;
  animation-timing-function: step-end, ease;
  animation-delay: 0s, 0.1s;
}
.x6-widget-handle-pie-toggle {
  position: absolute;
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  z-index: 2;
  display: block;
  box-sizing: border-box;
  width: 30px;
  height: 30px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 20px 20px;
  border-radius: 50%;
  cursor: pointer;
  user-select: none;
  pointer-events: visiblePainted;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle-pie-toggle-pos-e {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  bottom: auto;
  left: auto;
}
.x6-widget-handle-pie-toggle-pos-w {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: auto;
  bottom: auto;
  left: -15px;
}
.x6-widget-handle-pie-toggle-pos-n {
  top: -15px;
  right: auto;
  bottom: auto;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-pos-s {
  top: auto;
  right: auto;
  bottom: -15px;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-opened {
  transition: 0.1s background-image;
}
.x6-widget-handle-toolbar {
  position: static;
  display: inline-block;
  margin-top: -50px;
  margin-left: 45px;
  white-space: nowrap;
  vertical-align: top;
  background-color: #f5f5f5;
  border-bottom: 3px solid #333;
  border-radius: 5px;
  box-shadow: 0 1px 2px #222;
}
.x6-widget-handle-toolbar::after {
  top: -12px;
  left: 55px;
  margin-top: 0;
  border-top: 6px solid #333;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
}
.x6-widget-handle-toolbar .x6-widget-handle {
  display: inline-block;
  vertical-align: top;
}
.x6-widget-handle-toolbar .x6-widget-handle:hover::after {
  border-bottom: 4px solid #fc6cb8;
}
.x6-widget-handle-toolbar .x6-widget-handle-rotate {
  position: absolute;
  top: 100%;
  right: 100%;
  margin-top: 3px;
  margin-right: 6px;
}
.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,
.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {
  border-bottom: none;
}
.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {
  margin-left: 4px;
}
.x6-widget-handle-pie {
  box-sizing: content-box;
  background-color: #f5f5f5;
  border: 2px solid #404040;
}
.x6-widget-handle-pie-slice {
  fill: transparent;
  stroke: #e9e9e9;
  stroke-width: 1;
}
.x6-widget-handle-pie-slice:hover {
  fill: #fff;
}
.x6-widget-handle-pie-slice-img {
  display: block;
}
.x6-widget-handle-selected .x6-widget-handle-pie-slice {
  fill: #fff;
}
.x6-widget-handle-pie-toggle {
  background-color: #f6f6f6;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  background-size: 16px 16px;
  border: 2px solid #3b425f;
}
.x6-widget-handle-pie-toggle:hover {
  background-color: #fff;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  border-color: #fd6eb6;
}
.x6-widget-handle-pie-toggle-opened {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-pie-toggle-opened:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 999999;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-halo {
  position: absolute;
  pointer-events: none;
}
.x6-widget-halo-content {
  position: absolute;
  top: 100%;
  padding: 6px;
  font-size: 10px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-halo-handles + .x6-widget-halo-content {
  right: -20px;
  left: -20px;
  margin-top: 30px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 25px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 20px;
}
.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {
  right: 0;
  left: 0;
  margin-top: 10px;
}
.x6-widget-halo-content {
  color: #fff;
  background-color: #6a6b8a;
}
.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {
  position: absolute;
  right: 100%;
  bottom: 100%;
  margin-right: 6px;
  margin-bottom: 3px;
}
.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {
  background-color: #fff;
  border-radius: 50%;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar {
  margin-top: -60px;
  margin-left: -18px;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {
  top: -22px;
  left: -9px;
}
.x6-widget-minimap {
  position: relative;
  display: table-cell;
  box-sizing: border-box;
  overflow: hidden;
  text-align: center;
  vertical-align: middle;
  background-color: #fff;
  user-select: none;
}
.x6-widget-minimap .x6-graph {
  display: inline-block;
  box-shadow: 0 0 4px 0 #eee;
  cursor: pointer;
}
.x6-widget-minimap .x6-graph > svg {
  pointer-events: none;
  shape-rendering: optimizeSpeed;
}
.x6-widget-minimap .x6-graph .x6-node * {
  /* stylelint-disable-next-line */
  vector-effect: initial;
}
.x6-widget-minimap-viewport {
  position: absolute;
  box-sizing: content-box !important;
  margin: -2px 0 0 -2px;
  border: 2px solid #31d0c6;
  cursor: move;
}
.x6-widget-minimap-viewport-zoom {
  position: absolute;
  right: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 12px;
  height: 12px;
  margin: 0 -6px -6px 0;
  background-color: #fff;
  border: 2px solid #31d0c6;
  border-radius: 50%;
  cursor: nwse-resize;
}
.x6-graph-scroller {
  position: relative;
  box-sizing: border-box;
  overflow: scroll;
  outline: none;
}
.x6-graph-scroller-content {
  position: relative;
}
.x6-graph-scroller-background {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-scroller .x6-graph {
  position: absolute;
  display: inline-block;
  margin: 0;
  box-shadow: none;
}
.x6-graph-scroller .x6-graph > svg {
  display: block;
}
.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {
  box-shadow: 0 0 4px 0 #eee;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-graph-pagebreak {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-pagebreak-vertical {
  position: absolute;
  top: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 1px;
  border-left: 1px dashed #bdbdbd;
}
.x6-graph-pagebreak-horizontal {
  position: absolute;
  right: 0;
  left: 0;
  box-sizing: border-box;
  height: 1px;
  border-top: 1px dashed #bdbdbd;
}
.x6-widget-selection {
  position: absolute;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
.x6-widget-snapline {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  pointer-events: none;
}
.x6-widget-snapline-vertical,
.x6-widget-snapline-horizontal {
  stroke: #2ecc71;
  stroke-width: 1px;
}
.x6-widget-stencil {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-widget-stencil::after {
  position: absolute;
  top: 0;
  display: block;
  width: 100%;
  height: 20px;
  padding: 8px 0;
  line-height: 20px;
  text-align: center;
  opacity: 0;
  transition: top 0.1s linear, opacity 0.1s linear;
  content: ' ';
  pointer-events: none;
}
.x6-widget-stencil-content {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  height: auto;
  overflow-x: hidden;
  overflow-y: auto;
}
.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {
  pointer-events: none;
}
.x6-widget-stencil-group {
  padding: 0;
  padding-bottom: 8px;
  overflow: hidden;
  user-select: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  padding-bottom: 0;
}
.x6-widget-stencil-group-title {
  position: relative;
  margin-top: 0;
  margin-bottom: 0;
  padding: 4px;
  cursor: pointer;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  user-select: none;
}
.x6-widget-stencil .unmatched {
  opacity: 0.3;
}
.x6-widget-stencil .x6-node.unmatched {
  display: none;
}
.x6-widget-stencil-group.unmatched {
  display: none;
}
.x6-widget-stencil-search-text {
  position: relative;
  z-index: 1;
  box-sizing: border-box;
  width: 100%;
  height: 30px;
  max-height: 30px;
  line-height: 30px;
  outline: 0;
}
.x6-widget-stencil.not-found::after {
  opacity: 1;
  content: attr(data-not-found-text);
}
.x6-widget-stencil.not-found.searchable::after {
  top: 30px;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 50px;
}
.x6-widget-stencil {
  color: #333;
  background: #f5f5f5;
}
.x6-widget-stencil-content {
  position: absolute;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-content {
  top: 32px;
}
.x6-widget-stencil.searchable > .x6-widget-stencil-content {
  top: 80px;
}
.x6-widget-stencil.not-found::after {
  position: absolute;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 80px;
}
.x6-widget-stencil.not-found.searchable::after {
  top: 60px;
}
.x6-widget-stencil-group {
  height: auto;
  margin-bottom: 1px;
  padding: 0;
  transition: none;
}
.x6-widget-stencil-group .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  max-height: 31px;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  position: relative;
  left: 0;
  box-sizing: border-box;
  width: 100%;
  height: 32px;
  padding: 0 5px 0 8px;
  color: #666;
  font-weight: 700;
  font-size: 12px;
  line-height: 32px;
  cursor: default;
  transition: all 0.3;
}
.x6-widget-stencil-title:hover,
.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {
  color: #444;
}
.x6-widget-stencil-title {
  background: #e9e9e9;
}
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  background: #ededed;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {
  padding-left: 32px;
  cursor: pointer;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  position: absolute;
  top: 6px;
  left: 8px;
  display: block;
  width: 18px;
  height: 18px;
  margin: 0;
  padding: 0;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  border: none;
  content: ' ';
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');
  opacity: 0.4;
  transition: all 0.3s;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');
  opacity: 0.4;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil input[type='search'] {
  -webkit-appearance: textfield;
}
.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,
.x6-widget-stencil input[type='search']::-webkit-search-decoration {
  -webkit-appearance: none;
}
.x6-widget-stencil-search-text {
  display: block;
  width: 90%;
  margin: 8px 5%;
  padding-left: 8px;
  color: #333;
  background: #fff;
  border: 1px solid #e9e9e9;
  border-radius: 12px;
  outline: 0;
}
.x6-widget-stencil-search-text:focus {
  outline: 0;
}
.x6-widget-stencil::after {
  color: #808080;
  font-weight: 600;
  font-size: 12px;
  background: 0 0;
}
.x6-widget-transform {
  position: absolute;
  box-sizing: content-box !important;
  margin: -5px 0 0 -5px;
  padding: 4px;
  border: 1px dashed #000;
  border-radius: 5px;
  user-select: none;
  pointer-events: none;
}
.x6-widget-transform > div {
  position: absolute;
  box-sizing: border-box;
  background-color: #fff;
  border: 1px solid #000;
  transition: background-color 0.2s;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-transform > div:hover {
  background-color: #d3d3d3;
}
.x6-widget-transform-cursor-n {
  cursor: n-resize;
}
.x6-widget-transform-cursor-s {
  cursor: s-resize;
}
.x6-widget-transform-cursor-e {
  cursor: e-resize;
}
.x6-widget-transform-cursor-w {
  cursor: w-resize;
}
.x6-widget-transform-cursor-ne {
  cursor: ne-resize;
}
.x6-widget-transform-cursor-nw {
  cursor: nw-resize;
}
.x6-widget-transform-cursor-se {
  cursor: se-resize;
}
.x6-widget-transform-cursor-sw {
  cursor: sw-resize;
}
.x6-widget-transform-resize {
  width: 10px;
  height: 10px;
  border-radius: 6px;
}
.x6-widget-transform-resize[data-position='top-left'] {
  top: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='top-right'] {
  top: -5px;
  right: -5px;
}
.x6-widget-transform-resize[data-position='bottom-left'] {
  bottom: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='bottom-right'] {
  right: -5px;
  bottom: -5px;
}
.x6-widget-transform-resize[data-position='top'] {
  top: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='bottom'] {
  bottom: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='left'] {
  top: 50%;
  left: -5px;
  margin-top: -5px;
}
.x6-widget-transform-resize[data-position='right'] {
  top: 50%;
  right: -5px;
  margin-top: -5px;
}
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {
  display: none;
}
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {
  display: none;
}
.x6-widget-transform.no-resize .x6-widget-transform-resize {
  display: none;
}
.x6-widget-transform-rotate {
  top: -20px;
  left: -20px;
  width: 12px;
  height: 12px;
  border-radius: 6px;
  cursor: crosshair;
}
.x6-widget-transform.no-rotate .x6-widget-transform-rotate {
  display: none;
}
.x6-widget-transform-active {
  border-color: transparent;
  pointer-events: all;
}
.x6-widget-transform-active > div {
  display: none;
}
.x6-widget-transform-active > .x6-widget-transform-active-handle {
  display: block;
  background-color: #808080;
}
.x6-widget-knob {
  position: absolute;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  margin-top: -8px;
  margin-left: -8px;
  cursor: pointer;
  user-select: none;
}
.x6-widget-knob::before,
.x6-widget-knob::after {
  position: absolute;
  transform: rotate(45deg);
  content: '';
}
.x6-widget-knob::before {
  top: 4px;
  left: 4px;
  box-sizing: border-box;
  width: 8px;
  height: 8px;
  background-color: #fff;
}
.x6-widget-knob::after {
  top: 5px;
  left: 5px;
  box-sizing: border-box;
  width: 6px;
  height: 6px;
  background-color: #fca000;
}
.x6-graph-print {
  position: relative;
}
.x6-graph-print .x6-graph-print-ready {
  display: none;
}
.x6-graph-print .x6-graph-print-preview {
  overflow: hidden !important;
  background: #fff !important;
}
@media print {
  html,
  html > body.x6-graph-printing {
    position: relative !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  html > body.x6-graph-printing > * {
    display: none !important;
  }
  html > body.x6-graph-printing > .x6-graph-print {
    display: block !important;
  }
  .x6-graph-print {
    top: 0 !important;
    left: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    page-break-after: always;
    background: #fff !important;
  }
  .x6-graph-print .x6-graph-print-ready {
    display: none;
  }
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`;var b3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class sf extends No{init(){el.autoInsertCSS&&sf.ensure()}dispose(){sf.clean()}}b3([sf.dispose()],sf.prototype,"dispose",null),function(l){let e,t=0;function o(){if(t+=1,!(t>1)&&!et.isApplyingHMR()){e=document.createElement("style"),e.setAttribute("type","text/css"),e.textContent=y3;const d=document.querySelector("head");d&&d.insertBefore(e,d.firstChild)}}l.ensure=o;function c(){t-=1,!(t>0)&&(e&&e.parentNode&&e.parentNode.removeChild(e),e=null)}l.clean=c}(sf||(sf={}));var Av=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class Cd{get handleClassName(){return Io.handle}get pie(){return Object.assign(Object.assign({},Cd.defaultPieOptions),this.handleOptions.pie)}initHandles(){if(this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach(e=>this.addHandle(e)),this.handleOptions.type==="pie"){if(this.pie.toggles){const e=Io.pieToggle;this.$pieToggles={},this.pie.toggles.forEach(t=>{const o=this.$("<div/>");this.applyAttrs(o,t.attrs),o.addClass(e).addClass(`${e}-pos-${t.position||"e"}`).attr("data-name",t.name).appendTo(this.container),this.$pieToggles[t.name]=o})}this.setPieIcons()}if(this.$handleContainer){const e=this.handleOptions.type||"surround";this.$handleContainer.addClass(Io.wrap).addClass(Io.animate).addClass(`${Io.handle}-${e}`)}this.delegateEvents({[`mousedown .${Io.handle}`]:"onHandleMouseDown",[`touchstart .${Io.handle}`]:"onHandleMouseDown",[`mousedown .${Io.pieToggle}`]:"onPieToggleMouseDown",[`touchstart .${Io.pieToggle}`]:"onPieToggleMouseDown"})}onHandleMouseDown(e){const t=this.$(e.currentTarget).closest(`.${Io.handle}`).attr("data-action");t&&(e.preventDefault(),e.stopPropagation(),this.setEventData(e,{action:t,clientX:e.clientX,clientY:e.clientY,startX:e.clientX,startY:e.clientY}),e.type==="mousedown"&&e.button===2?this.triggerHandleAction(t,"contextmenu",e):(this.triggerHandleAction(t,"mousedown",e),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},e.data)))}onHandleMouseMove(e){const o=this.getEventData(e).action;o&&this.triggerHandleAction(o,"mousemove",e)}onHandleMouseUp(e){const o=this.getEventData(e).action;o&&(this.triggerHandleAction(o,"mouseup",e),this.undelegateDocumentEvents())}triggerHandleAction(e,t,o,c){o.preventDefault(),o.stopPropagation();const d=this.normalizeEvent(o),f=this.getEventData(d),v=this.graph.snapToGrid(d.clientX,d.clientY),x=this.graph.snapToGrid(f.clientX,f.clientY),w=v.x-x.x,_=v.y-x.y;this.trigger(`action:${e}:${t}`,Object.assign({e:d,dx:w,dy:_,x:v.x,y:v.y,offsetX:o.clientX-f.startX,offsetY:o.clientY-f.startY},c)),f.clientX=o.clientX,f.clientY=o.clientY}onPieToggleMouseDown(e){e.stopPropagation();const t=this.$(e.target).closest(`.${Io.pieToggle}`).attr("data-name");this.isOpen(t)||this.isOpen()&&this.toggleState(),this.toggleState(t)}setPieIcons(){this.handleOptions.type==="pie"&&this.$handleContainer.find(`.${Io.handle}`).each((e,t)=>{const o=this.$(t),c=o.attr("data-action"),d=Io.pieSlice,f=this.getHandle(c);if(!f||!f.icon){const v=window.getComputedStyle(t,":before").getPropertyValue("content");if(v&&v!=="none"){const w=o.find(`.${d}-txt`);w.length&&ir.create(w[0]).text(v.replace(/['"]/g,""))}const x=o.css("background-image");if(x){const w=x.match(/url\(['"]?([^'"]+)['"]?\)/);if(w){const _=w[1],A=o.find(`.${d}-img`);A.length>0&&ir.create(A[0]).attr("xlink:href",_)}}}})}getHandleIdx(e){return this.handles.findIndex(t=>t.name===e)}hasHandle(e){return this.getHandleIdx(e)>=0}getHandle(e){return this.handles.find(t=>t.name===e)}renderHandle(e){const t=this.$("<div/>").addClass(`${Io.handle} ${Io.handle}-${e.name}`).attr("data-action",e.name).prop("draggable",!1);if(this.handleOptions.type==="pie"){const o=this.getHandleIdx(e.name),c=this.pie,d=c.outerRadius,f=c.innerRadius,v=(d+f)/2,x=new Ve(d,d),w=ji.toRad(c.sliceAngle),_=o*w+ji.toRad(c.startAngle),A=_+w,P=vM(f,d,_,A),V=ir.create("svg").addClass(`${Io.pieSlice}-svg`),J=ir.create("path").addClass(Io.pieSlice).attr("d",P).translate(d,d),ee=Ve.fromPolar(v,-_-w/2,x).toJSON(),ge=c.iconSize,Se=ir.create("image").attr(ee).addClass(`${Io.pieSlice}-img`);ee.y=ee.y+ge-2;const Re=ir.create("text",{"font-size":ge}).attr(ee).addClass(`${Io.pieSlice}-txt`);Se.attr({width:ge,height:ge}),Se.translate(-ge/2,-ge/2),Re.translate(-ge/2,-ge/2),V.append([J,Se,Re]),t.append(V.node)}else t.addClass(`${Io.handle}-pos-${e.position}`),e.content&&(typeof e.content=="string"?t.html(e.content):t.append(e.content));return this.updateHandleIcon(t,e.icon),this.applyAttrs(t,e.attrs),t}addHandle(e){if(!this.hasHandle(e.name)){this.handles.push(e);const t=e.events;t&&Object.keys(t).forEach(o=>{const c=t[o],d=`action:${e.name}:${o}`;typeof c=="string"?this.on(d,this[c],this):this.on(d,c)}),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(e))}return this}addHandles(e){return e.forEach(t=>this.addHandle(t)),this}removeHandles(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this}removeHandle(e){const t=this.getHandleIdx(e),o=this.handles[t];return o&&(o.events&&Object.keys(o.events).forEach(c=>{this.off(`action:${e}:${c}`)}),this.getHandleElem(e).remove(),this.handles.splice(t,1)),this}changeHandle(e,t){const o=this.getHandle(e);return o&&(this.removeHandle(e),this.addHandle(Object.assign(Object.assign({},o),t))),this}toggleHandle(e,t){const o=this.getHandle(e);if(o){const c=this.getHandleElem(e),d=`${Io.handle}-selected`;t===void 0&&(t=!c.hasClass(d)),c.toggleClass(d,t);const f=t?o.iconSelected:o.icon;f&&this.updateHandleIcon(c,f)}return this}selectHandle(e){return this.toggleHandle(e,!0)}deselectHandle(e){return this.toggleHandle(e,!1)}deselectAllHandles(){return this.handles.forEach(e=>this.deselectHandle(e.name)),this}getHandleElem(e){return this.$handleContainer.find(`.${Io.handle}-${e}`)}updateHandleIcon(e,t){if(this.handleOptions.type==="pie"){const o=e.find(`.${Io.pieSliceImg}`);this.$(o[0]).attr("xlink:href",t||"")}else e.css("background-image",t?`url(${t})`:"")}isRendered(){return this.$handleContainer!=null}isOpen(e){return this.isRendered()?e?this.$pieToggles[e].hasClass(Io.pieToggleOpened):this.$handleContainer.hasClass(`${Io.pieOpended}`):!1}toggleState(e){if(this.isRendered()){const t=this.$handleContainer;if(Object.keys(this.$pieToggles).forEach(o=>{this.$pieToggles[o].removeClass(Io.pieToggleOpened)}),this.isOpen())this.trigger("pie:close",{name:e}),t.removeClass(Io.pieOpended);else{if(this.trigger("pie:open",{name:e}),e){const o=this.pie.toggles,c=o&&o.find(d=>d.name===e);c&&t.attr({"data-pie-toggle-name":c.name,"data-pie-toggle-position":c.position}),this.$pieToggles[e].addClass(Io.pieToggleOpened)}t.addClass(Io.pieOpended)}}}applyAttrs(e,t){if(t){const o=Di.$(e);Object.keys(t).forEach(c=>{const d=o.find(c).addBack().filter(c),f=t[c],{class:v}=f,x=Av(f,["class"]);v&&d.addClass(v),d.attr(x)})}}}(function(l){l.defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]}})(Cd||(Cd={}));var Io;(function(l){l.handle=Di.prototype.prefixClassName("widget-handle"),l.wrap=`${l.handle}-wrap`,l.animate=`${l.handle}-animate`,l.pieOpended=`${l.handle}-pie-opened`,l.pieToggle=`${l.handle}-pie-toggle`,l.pieToggleOpened=`${l.handle}-pie-toggle-opened`,l.pieSlice=`${l.handle}-pie-slice`,l.pieSliceImg=`${l.handle}-pie-slice-img`})(Io||(Io={}));var op=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},x3=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class Tv extends Di{constructor(e){super();const t=e,{view:o,cell:c,node:d,edge:f,graph:v}=t,x=x3(t,["view","cell","node","edge","graph"]);o?(this.view=o,this.cell=o.cell,this.graph=o.graph,this.model=this.graph.model):(c||f||d)&&v&&(this.cell=d||f||c,this.view=v.renderer.findViewByCell(this.cell),this.graph=v,this.model=this.graph.model);const w=this.constructor;e.clearAll!==!1&&w.removeInstances(this.graph),w.register(this),this.init(x)}static ensureCache(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)}static register(e,t){t==null&&(t=e.graph);const o=this.ensureCache();let c=o[t.view.cid];c==null&&(c=o[t.view.cid]={}),c[e.cid]=e}static unregister(e,t){t==null&&(t=e.graph);const o=this.ensureCache();o[t.view.cid]&&delete o[t.view.cid][e.cid]}static removeInstances(e){const o=this.ensureCache()[e.view.cid];o&&Object.keys(o).forEach(c=>{const d=o[c];d&&d.remove()})}static getInstances(e){return this.ensureCache()[e.view.cid]||{}}init(e){}render(){return this}startListening(){this.options.clearOnBlankMouseDown!==!1&&this.graph.on("blank:mousedown",this.remove,this)}stopListening(){this.options.clearOnBlankMouseDown!==!1&&this.graph.off("blank:mousedown",this.remove,this)}remove(){return this.stopListening(),this.constructor.unregister(this),super.remove()}dispose(){this.remove()}}Tv.instanceCache=new WeakMap,op([Di.dispose()],Tv.prototype,"dispose",null);class pw extends Tv{get node(){return this.cell}get metadata(){const e=this.cell.prop("knob");return Array.isArray(e)?this.options.index!=null?e[this.options.index]:null:e}init(e){this.options=Object.assign({},e),this.render(),this.startListening()}startListening(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.view.on("node:resize:mousedown",this.onTransform,this),this.view.on("node:rotate:mousedown",this.onTransform,this),this.view.on("node:resize:mouseup",this.onTransformed,this),this.view.on("node:rotate:mouseup",this.onTransformed,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),super.startListening()}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.view.off("node:resize:mousedown",this.onTransform,this),this.view.off("node:rotate:mousedown",this.onTransform,this),this.view.off("node:resize:mouseup",this.onTransformed,this),this.view.off("node:rotate:mouseup",this.onTransformed,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),super.stopListening()}render(){return this.container=document.createElement("div"),io(this.container,this.prefixClassName("widget-knob")),this.options.className&&io(this.container,this.options.className),this.view.addClass(af.KNOB),this.graph.container.appendChild(this.container),this.update(),this}remove(){return this.view.removeClass(af.KNOB),super.remove()}update(){if(this.metadata){const{update:e,position:t}=this.metadata,o={knob:this,cell:this.cell,node:this.node};if(t){const c=t.call(this.graph,Object.assign({},o));if(c){const d=this.graph.matrix(),f=this.node.getBBox(),v=ji.normalize(this.node.getAngle()),x=Ve.create(c);v!==0&&x.rotate(-v,{x:f.width/2,y:f.height/2}),x.translate(f).scale(d.a,d.d).translate(d.e,d.f),this.container.style.left=`${x.x}px`,this.container.style.top=`${x.y}px`}}e&&e.call(this.graph,Object.assign({},o))}}hide(){this.container.style.display="none"}show(){this.container.style.display=""}onTransform(){this.hide()}onTransformed(){this.show()}onKnobMouseDown({knob:e}){this.cid!==e.cid&&this.hide()}onKnobMouseUp(){this.show()}notify(e,t){if(this.view){const o=this.view.normalizeEvent(t),c=this.graph.snapToGrid(o.clientX,o.clientY);this.view.notify(`cell:${e}`,{e:o,view:this.view,node:this.node,cell:this.cell,x:c.x,y:c.y,knob:this}),this.cell.isNode()?this.view.notify(`node:${e}`,{e:o,view:this.view,node:this.node,cell:this.cell,x:c.x,y:c.y,knob:this}):this.cell.isEdge()&&this.view.notify(`edge:${e}`,{e:o,view:this.view,edge:this.cell,cell:this.cell,x:c.x,y:c.y,knob:this})}}onMouseDown(e){e.stopPropagation(),this.setEventData(e,{knobbing:!1,originX:e.clientX,originY:e.clientY,clientX:e.clientX,clientY:e.clientY}),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(af.documentEvents,e.data),this.metadata&&this.metadata.onMouseDown&&this.metadata.onMouseDown.call(this.graph,{e,data:this.getEventData(e),knob:this,cell:this.cell,node:this.node}),this.notify("knob:mousedown",e)}onMouseMove(e){const t=this.getEventData(e),o=this.graph.findViewByCell(this.node);if(t.knobbing||(t.knobbing=!0,o&&(o.addClass(af.KNOBBING),this.notify("knob",e)),this.model.startBatch("knob",{cid:this.cid})),t.clientX=e.clientX,t.clientY=e.clientY,this.metadata&&this.metadata.onMouseMove){const c=this.graph.matrix(),d=(e.clientX-t.originX)/c.a,f=(e.clientY-t.originY)/c.d,v=this.node.getAngle(),x=new Ve(d,f).rotate(v);this.metadata.onMouseMove.call(this.graph,{e,data:t,deltaX:x.x,deltaY:x.y,knob:this,cell:this.cell,node:this.node})}this.notify("knobbing",e),this.notify("knob:mousemove",e)}onMouseUp(e){this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const t=this.getEventData(e),o=this.graph.findViewByCell(this.node);t.knobbing&&(o&&o.removeClass(af.KNOBBING),this.metadata&&this.metadata.onMouseUp&&this.metadata.onMouseUp.call(this.graph,{e,data:t,knob:this,cell:this.cell,node:this.node}),this.model.stopBatch("knob",{cid:this.cid}),this.notify("knobbed",e)),this.notify("knob:mouseup",e)}}var af;(function(l){l.KNOB="has-widget-knob",l.KNOBBING="node-knobbing",l.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"}})(af||(af={}));var _y=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},Mv;(function(l){l.root="widget-minimap",l.viewport=`${l.root}-viewport`,l.zoom=`${l.viewport}-zoom`})(Mv||(Mv={}));class H2 extends Di{constructor(e){super(),this.options=Object.assign(Object.assign({},$2.defaultOptions),e),this.updateViewport=i2(this.updateViewport.bind(this),0),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(Mv.root));const t=document.createElement("div");this.container.appendChild(t),this.$viewport=this.$("<div>").addClass(this.prefixClassName(Mv.viewport)),this.options.scalable&&(this.zoomHandle=this.$("<div>").addClass(this.prefixClassName(Mv.zoom)).appendTo(this.$viewport).get(0)),this.$container.append(this.$viewport).css({width:this.options.width,height:this.options.height,padding:this.options.padding}),this.options.container&&this.options.container.appendChild(this.container),this.sourceGraph=this.graph;const o=Object.assign(Object.assign({},this.options.graphOptions),{container:t,model:this.sourceGraph.model,frozen:!0,async:this.sourceGraph.isAsync(),interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});this.targetGraph=this.options.createGraph?this.options.createGraph(o):new so(o),this.targetGraph.renderer.unfreeze(),this.updatePaper(this.sourceGraph.options.width,this.sourceGraph.options.height),this.startListening()}get graph(){return this.options.graph}get scroller(){return this.graph.scroller.widget}get graphContainer(){return this.scroller?this.scroller.container:this.graph.container}get $graphContainer(){return this.scroller?this.scroller.$container:this.$(this.graph.container)}startListening(){this.scroller?this.$graphContainer.on(`scroll${this.getEventNamespace()}`,this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents({mousedown:"startAction",touchstart:"startAction",[`mousedown .${this.prefixClassName("graph")}`]:"scrollTo",[`touchstart .${this.prefixClassName("graph")}`]:"scrollTo"})}stopListening(){this.scroller?this.$graphContainer.off(this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}onRemove(){this.targetGraph.view.remove(),this.stopListening(),this.targetGraph.dispose()}onTransform(e){(e.ui||this.targetGraphTransforming)&&this.updateViewport()}onModelUpdated(){this.targetGraph.zoomToFit()}updatePaper(e,t){let o,c;typeof e=="object"?(o=e.width,c=e.height):(o=e,c=t);const d=this.sourceGraph.options,f=this.sourceGraph.transform.getScale(),v=this.options.width-2*this.options.padding,x=this.options.height-2*this.options.padding;o/=f.sx,c/=f.sy,this.ratio=Math.min(v/o,x/c);const w=this.ratio,_=d.x*w/f.sx,A=d.y*w/f.sy;return o*=w,c*=w,this.targetGraph.resizeGraph(o,c),this.targetGraph.translate(_,A),this.scroller?this.targetGraph.scale(w,w):this.targetGraph.zoomToFit(),this.updateViewport(),this}updateViewport(){const e=this.sourceGraph.transform.getScale(),t=this.targetGraph.transform.getScale();let o=null;this.scroller?o=this.scroller.clientToLocalPoint(0,0):o=this.graph.graphToLocal(0,0);const c=this.$(this.targetGraph.container).position(),d=this.targetGraph.translate();d.ty=d.ty||0,this.geometry={top:c.top+o.y*t.sy+d.ty,left:c.left+o.x*t.sx+d.tx,width:this.$graphContainer.innerWidth()*t.sx/e.sx,height:this.$graphContainer.innerHeight()*t.sy/e.sy},this.$viewport.css(this.geometry)}startAction(e){const t=this.normalizeEvent(e),o=t.target===this.zoomHandle?"zooming":"panning",{tx:c,ty:d}=this.sourceGraph.translate(),f={action:o,clientX:t.clientX,clientY:t.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:c,translateY:d};this.targetGraphTransforming=!0,this.delegateDocumentEvents($2.documentEvents,f)}doAction(e){const t=this.normalizeEvent(e),o=t.clientX,c=t.clientY,d=t.data;switch(d.action){case"panning":{const f=this.sourceGraph.transform.getScale(),v=(o-d.clientX)*f.sx,x=(c-d.clientY)*f.sy;this.scroller?(this.graphContainer.scrollLeft=d.scrollLeft+v/this.ratio,this.graphContainer.scrollTop=d.scrollTop+x/this.ratio):this.sourceGraph.translate(d.translateX-v/this.ratio,d.translateY-x/this.ratio);break}case"zooming":{const f=d.scale,v=d.geometry,x=1+(d.clientX-o)/v.width/f.sx;d.frameId&&cancelAnimationFrame(d.frameId),d.frameId=requestAnimationFrame(()=>{this.sourceGraph.zoom(x*d.zoom,{absolute:!0,minScale:this.options.minScale,maxScale:this.options.maxScale})});break}default:break}}stopAction(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1}scrollTo(e){const t=this.normalizeEvent(e);let o,c;const d=this.targetGraph.translate();if(d.ty=d.ty||0,t.offsetX==null){const x=this.$(this.targetGraph.container).offset();o=t.pageX-x.left,c=t.pageY-x.top}else o=t.offsetX,c=t.offsetY;const f=(o-d.tx)/this.ratio,v=(c-d.ty)/this.ratio;this.sourceGraph.centerPoint(f,v)}dispose(){this.remove()}}_y([Di.dispose()],H2.prototype,"dispose",null);var $2;(function(l){l.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:e=>new so(e)},l.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}})($2||($2={}));var C3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},W2=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class bA extends Di{constructor(e){super();const{graph:t}=e,o=W2(e,["graph"]);this.graph=t,this.options=Object.assign({tolerance:10},o),this.offset={x:0,y:0},this.render(),this.parseFilter(),this.disabled||this.startListening()}get model(){return this.graph.model}get containerClassName(){return this.prefixClassName("widget-snapline")}get verticalClassName(){return`${this.containerClassName}-vertical`}get horizontalClassName(){return`${this.containerClassName}-horizontal`}get disabled(){return this.options.enabled!==!0||this.graph.options.snapline.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())}setFilter(e){this.options.filter=e,this.parseFilter()}render(){const e=this.containerWrapper=new ir("svg"),t=this.horizontal=new ir("path"),o=this.vertical=new ir("path");e.addClass(this.containerClassName),t.addClass(this.horizontalClassName),o.addClass(this.verticalClassName),e.setAttribute("width","100%"),e.setAttribute("height","100%"),t.setAttribute("display","none"),o.setAttribute("display","none"),e.append([t,o]),this.options.className&&e.addClass(this.options.className),this.container=this.containerWrapper.node}startListening(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}stopListening(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}parseFilter(){this.filterShapes={},this.filterCells={},this.filterFunction=null;const e=this.options.filter;Array.isArray(e)?e.forEach(t=>{typeof t=="string"?this.filterShapes[t]=!0:this.filterCells[t.id]=!0}):typeof e=="function"&&(this.filterFunction=e)}onBatchStop({name:e,data:t}){e==="resize"&&this.snapOnResizing(t.cell,t)}captureCursorOffset({view:e,x:t,y:o}){const c=e.getDelegatedView();if(c&&this.isNodeMovable(c)){const d=e.cell.getPosition();this.offset={x:t-d.x,y:o-d.y}}}isNodeMovable(e){return e&&e.cell.isNode()&&e.can("nodeMovable")}snapOnResizing(e,t){if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){const o=this.graph.renderer.findViewByCell(e);if(o&&o.cell.isNode()){const c=e.getBBox(),d=c.bbox(e.getAngle()),f=d.getTopLeft(),v=d.getBottomRight(),x=ji.normalize(e.getAngle()),w=this.options.tolerance||0;let _,A,P,V,J,ee;const ge={vertical:0,horizontal:0},Se=t.direction,Re=t.trueDirection,_e=t.relativeDirection;Re.indexOf("right")!==-1?ge.vertical=v.x:ge.vertical=f.x,Re.indexOf("bottom")!==-1?ge.horizontal=v.y:ge.horizontal=f.y,this.model.getNodes().some(Vn=>{if(this.isIgnored(e,Vn))return!1;const Ur=Vn.getBBox().bbox(Vn.getAngle()),Wr=Ur.getTopLeft(),$t=Ur.getBottomRight(),On={vertical:[Wr.x,$t.x],horizontal:[Wr.y,$t.y]},kr={};return Object.keys(On).forEach(Vo=>{const ss=Vo,ca=On[ss].map(zs=>({position:zs,distance:Math.abs(zs-ge[ss])})).filter(zs=>zs.distance<=w);kr[ss]=Lg(ca,zs=>zs.distance)}),_==null&&kr.vertical.length>0&&(_=kr.vertical[0].position,A=Math.min(d.y,Ur.y),P=Math.max(v.y,$t.y)-A),V==null&&kr.horizontal.length>0&&(V=kr.horizontal[0].position,J=Math.min(d.x,Ur.x),ee=Math.max(v.x,$t.x)-J),_!=null&&V!=null}),this.hide();let Ue=0,Qe=0;(V!=null||_!=null)&&(_!=null&&(Ue=Re.indexOf("right")!==-1?_-v.x:f.x-_),V!=null&&(Qe=Re.indexOf("bottom")!==-1?V-v.y:f.y-V));let bt=0,Pt=0;if(x%90===0)x===90||x===270?(bt=Qe,Pt=Ue):(bt=Ue,Pt=Qe);else{const Vn=x>=0&&x<90?1:x>=90&&x<180?4:x>=180&&x<270?3:2;V!=null&&_!=null&&(Ue<Qe?(Qe=0,V=void 0):(Ue=0,_=void 0));const Ur=ji.toRad(x%90);Ue&&(bt=Vn===3?Ue/Math.cos(Ur):Ue/Math.sin(Ur)),Qe&&(Pt=Vn===3?Qe/Math.cos(Ur):Qe/Math.sin(Ur));const Wr=Vn===1||Vn===3;switch(_e){case"top":case"bottom":Pt=Qe?Qe/(Wr?Math.cos(Ur):Math.sin(Ur)):Ue/(Wr?Math.sin(Ur):Math.cos(Ur));break;case"left":case"right":bt=Ue?Ue/(Wr?Math.cos(Ur):Math.sin(Ur)):Qe/(Wr?Math.sin(Ur):Math.cos(Ur));break;default:break}}switch(_e){case"top":case"bottom":bt=0;break;case"left":case"right":Pt=0;break;default:break}const Kt=this.graph.getGridSize();let kn=Math.max(c.width+bt,Kt),wn=Math.max(c.height+Pt,Kt);t.minWidth&&t.minWidth>Kt&&(kn=Math.max(kn,t.minWidth)),t.minHeight&&t.minHeight>Kt&&(wn=Math.max(wn,t.minHeight)),t.maxWidth&&(kn=Math.min(kn,t.maxWidth)),t.maxHeight&&(wn=Math.min(wn,t.maxHeight)),t.preserveAspectRatio&&(Pt<bt?wn=kn*(c.height/c.width):kn=wn*(c.width/c.height)),(kn!==c.width||wn!==c.height)&&(e.resize(kn,wn,{direction:Se,relativeDirection:_e,trueDirection:Re,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(o)}),P&&(P+=wn-c.height),ee&&(ee+=kn-c.width));const Sn=e.getBBox().bbox(x);_&&Math.abs(Sn.x-_)>1&&Math.abs(Sn.width+Sn.x-_)>1&&(_=void 0),V&&Math.abs(Sn.y-V)>1&&Math.abs(Sn.height+Sn.y-V)>1&&(V=void 0),this.update({verticalLeft:_,verticalTop:A,verticalHeight:P,horizontalTop:V,horizontalLeft:J,horizontalWidth:ee})}}}snapOnMoving({view:e,e:t,x:o,y:c}){const d=e.getEventData(t).delegatedView||e;if(!this.isNodeMovable(d))return;const f=d.cell,v=f.getSize(),x=f.getPosition(),w=new Ln(o-this.offset.x,c-this.offset.y,v.width,v.height),_=f.getAngle(),A=w.getCenter(),P=w.bbox(_),V=P.getTopLeft(),J=P.getBottomRight(),ee=this.options.tolerance||0;let ge,Se,Re,_e,Ue,Qe,bt=0,Pt=0;if(this.model.getNodes().some(Kt=>{if(this.isIgnored(f,Kt))return!1;const kn=Kt.getBBox().bbox(Kt.getAngle()),wn=kn.getCenter(),Sn=kn.getTopLeft(),Vn=kn.getBottomRight();return ge==null&&(Math.abs(wn.x-A.x)<ee?(ge=wn.x,bt=.5):Math.abs(Sn.x-V.x)<ee?(ge=Sn.x,bt=0):Math.abs(Sn.x-J.x)<ee?(ge=Sn.x,bt=1):Math.abs(Vn.x-J.x)<ee?(ge=Vn.x,bt=1):Math.abs(Vn.x-V.x)<ee&&(ge=Vn.x),ge!=null&&(Se=Math.min(P.y,kn.y),Re=Math.max(J.y,Vn.y)-Se)),_e==null&&(Math.abs(wn.y-A.y)<ee?(_e=wn.y,Pt=.5):Math.abs(Sn.y-V.y)<ee?_e=Sn.y:Math.abs(Sn.y-J.y)<ee?(_e=Sn.y,Pt=1):Math.abs(Vn.y-J.y)<ee?(_e=Vn.y,Pt=1):Math.abs(Vn.y-V.y)<ee&&(_e=Vn.y),_e!=null&&(Ue=Math.min(P.x,kn.x),Qe=Math.max(J.x,Vn.x)-Ue)),ge!=null&&_e!=null}),this.hide(),_e!=null||ge!=null){_e!=null&&(P.y=_e-Pt*P.height),ge!=null&&(P.x=ge-bt*P.width);const Kt=P.getCenter(),kn=Kt.x-w.width/2,wn=Kt.y-w.height/2,Sn=kn-x.x,Vn=wn-x.y;(Sn!==0||Vn!==0)&&(f.translate(Sn,Vn,{snapped:!0,restrict:this.graph.hook.getRestrictArea(d)}),Qe&&(Qe+=Sn),Re&&(Re+=Vn)),this.update({verticalLeft:ge,verticalTop:Se,verticalHeight:Re,horizontalTop:_e,horizontalLeft:Ue,horizontalWidth:Qe})}}isIgnored(e,t){return t.id===e.id||t.isDescendantOf(e)||this.filterShapes[t.shape]||this.filterCells[t.id]||this.filterFunction&&er(this.filterFunction,this.graph,t)}update(e){if(e.horizontalTop){const t=this.graph.localToGraph(new Ve(e.horizontalLeft,e.horizontalTop)),o=this.graph.localToGraph(new Ve(e.horizontalLeft+e.horizontalWidth,e.horizontalTop));this.horizontal.setAttributes({d:`M ${t.x},${t.y} L ${o.x},${o.y}`,display:"inherit"})}else this.horizontal.setAttribute("display","none");if(e.verticalLeft){const t=this.graph.localToGraph(new Ve(e.verticalLeft,e.verticalTop)),o=this.graph.localToGraph(new Ve(e.verticalLeft,e.verticalTop+e.verticalHeight));this.vertical.setAttributes({d:`M ${t.x},${t.y} L ${o.x},${o.y}`,display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}resetTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}show(){return this.resetTimer(),this.container.parentNode==null&&this.graph.container.appendChild(this.container),this}hide(){this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");const e=this.options.clean,t=typeof e=="number"?e:e!==!1?3e3:0;return t>0&&(this.timer=window.setTimeout(()=>{this.container.parentNode!==null&&this.unmount()},t)),this}onRemove(){this.stopListening(),this.hide()}dispose(){this.remove()}}C3([Di.dispose()],bA.prototype,"dispose",null);var w3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Qi extends No{init(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()}startListening(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}resetUpdates(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}}onSortModel(){this.model.hasActiveBatch(Qi.SORT_DELAYING_BATCHES)||this.sortViews()}onModelReseted({options:e}){this.removeZPivots(),this.resetViews(this.model.getCells(),e)}onBatchStop({name:e,data:t}){if(this.isFrozen())return;const o=this.model;if(!this.isAsync()){const d=Qi.UPDATE_DELAYING_BATCHES;d.includes(e)&&!o.hasActiveBatch(d)&&this.updateViews(t)}const c=Qi.SORT_DELAYING_BATCHES;c.includes(e)&&!o.hasActiveBatch(c)&&this.sortViews()}onCellAdded({cell:e,options:t}){const o=t.position;this.isAsync()||typeof o!="number"?this.renderView(e,t):(t.maxPosition===o&&this.freeze({key:"addCells"}),this.renderView(e,t),o===0&&this.unfreeze({key:"addCells"}))}onCellRemoved({cell:e,options:t}){const o=this.findViewByCell(e);o&&this.requestViewUpdate(o,Qi.FLAG_REMOVE,o.priority,t)}onCellZIndexChanged({cell:e,options:t}){if(this.options.sorting==="approx"){const o=this.findViewByCell(e);o&&this.requestViewUpdate(o,Qi.FLAG_INSERT,o.priority,t)}}onCellVisibleChanged({cell:e,current:t,options:o}){t||this.processEdgeOnTerminalVisibleChanged(e,!1);const c=this.findViewByCell(e);!t&&c?this.removeView(e):t&&c==null&&this.renderView(e,o),t&&this.processEdgeOnTerminalVisibleChanged(e,!0)}processEdgeOnTerminalVisibleChanged(e,t){const o=(c,d)=>c.getSourceCellId()!==d.id?c.getSourceCell():c.getTargetCellId()!==d.id?c.getTargetCell():null;this.model.getConnectedEdges(e).forEach(c=>{const d=o(c,e);(d==null||d.isVisible())&&(t?c.show():c.hide())})}isEdgeTerminalVisible(e,t){const o=t==="source"?e.getSourceCellId():e.getTargetCellId(),c=o?this.model.getCell(o):null;return!(c&&!c.isVisible())}requestConnectedEdgesUpdate(e,t={}){if(Gs.isCellView(e)){const o=e.cell,c=this.model.getConnectedEdges(o);for(let d=0,f=c.length;d<f;d+=1){const v=c[d],x=this.findViewByCell(v);if(!x)continue;const w=["update"];v.getTargetCell()===o&&w.push("target"),v.getSourceCell()===o&&w.push("source"),this.scheduleViewUpdate(x,x.getFlag(w),x.priority,t)}}}forcePostponedViewUpdate(e,t){if(!e||!Gs.isCellView(e))return!1;const o=e.cell;if(o.isNode())return!1;const c=e;if(o.isEdge()&&(t&e.getFlag(["source","target"]))===0){let d=0;const f=this.findViewByCell(o.getSourceCell());f&&!this.isViewMounted(f)&&(d=this.dumpView(f),c.updateTerminalMagnet("source"));let v=0;const x=this.findViewByCell(o.getTargetCell());if(x&&!this.isViewMounted(x)&&(v=this.dumpView(x),c.updateTerminalMagnet("target")),d===0&&v===0)return!this.dumpView(c)}return!1}scheduleViewUpdate(e,t,o,c={}){const d=e.cid,f=this.updates;let v=f.priorities[o];v||(v=f.priorities[o]={});const x=v[d]||0;(x&t)!==t&&(x||(f.count+=1),t&Qi.FLAG_REMOVE&&x&Qi.FLAG_INSERT?v[d]^=Qi.FLAG_INSERT:t&Qi.FLAG_INSERT&&x&Qi.FLAG_REMOVE&&(v[d]^=Qi.FLAG_REMOVE),v[d]|=t,this.graph.hook.onViewUpdated(e,t,c))}requestViewUpdate(e,t,o,c={}){this.scheduleViewUpdate(e,t,o,c);const d=this.isAsync();if(this.isFrozen()||d&&c.async!==!1||this.model.hasActiveBatch(Qi.UPDATE_DELAYING_BATCHES))return;const f=this.updateViews(c);d&&this.graph.trigger("render:done",{stats:f,options:c})}dumpView(e,t={}){if(e==null)return 0;const o=e.cid,d=this.updates.priorities[e.priority],f=this.registerMountedView(e)|d[o];return delete d[o],f?this.updateView(e,f,t):0}dumpViews(e={}){this.checkView(e),this.updateViews(e)}requireView(e,t={}){const o=this.findViewByCell(e);return o==null?null:(this.dumpView(o,t),o)}updateView(e,t,o={}){if(e==null)return 0;if(Gs.isCellView(e)){if(t&Qi.FLAG_REMOVE)return this.removeView(e.cell),0;t&Qi.FLAG_INSERT&&(this.insertView(e),t^=Qi.FLAG_INSERT)}return t?e.confirmUpdate(t,o):0}updateViews(e={}){let t,o=0,c=0,d=Qi.MIN_PRIORITY;do t=this.updateViewsBatch(e),o+=1,c+=t.updatedCount,d=Math.min(t.priority,d);while(!t.empty);return{priority:d,batchCount:o,updatedCount:c}}updateViewsBatch(e={}){const t=this.updates,o=t.priorities,c=e.batchSize||Qi.UPDATE_BATCH_SIZE;let d=!0,f=Qi.MIN_PRIORITY,v=0,x=0,w=0,_=0,A=e.checkView||this.options.checkView;typeof A!="function"&&(A=null);e:for(let P=0,V=o.length;P<V;P+=1){const J=o[P];for(const ee in J){if(w>=c){d=!1;break e}const ge=Di.views[ee];if(!ge){delete J[ee];continue}let Se=J[ee];if((Se&Qi.FLAG_REMOVE)===0){const Ue=ee in t.unmounted;if(A&&!er(A,this.graph,{view:ge,unmounted:Ue})){Ue||(this.registerUnmountedView(ge),ge.unmount()),t.unmounted[ee]|=Se,delete J[ee],x+=1;continue}Ue&&(Se|=Qi.FLAG_INSERT,v+=1),Se|=this.registerMountedView(ge)}const Re=ge;let _e=this.updateView(ge,Se,e);if(_e>0){const Ue=Re.cell;Ue&&Ue.isEdge()&&(Re.hasAction(_e,"source")&&!this.isEdgeTerminalVisible(Ue,"source")&&(_e=Re.removeAction(_e,"source"),_e|=Qi.FLAG_REMOVE),Re.hasAction(_e,"target")&&!this.isEdgeTerminalVisible(Ue,"target")&&(_e=Re.removeAction(_e,"target"),_e|=Qi.FLAG_REMOVE))}if(_e>0&&(J[ee]=_e,!this.graph.hook.onViewPostponed(Re,_e,e)||J[ee])){_+=1,d=!1;continue}f>P&&(f=P),w+=1,delete J[ee]}}return{empty:d,priority:f,mountedCount:v,unmountedCount:x,updatedCount:w,postponedCount:_}}updateViewsAsync(e={},t={processed:0,priority:Qi.MIN_PRIORITY}){const o=this.updates,c=o.animationId;if(c){if(m2(c),t.processed===0){const P=e.before;typeof P=="function"&&er(P,this.graph,this.graph)}const d=this.updateViewsBatch(e),f=this.checkViewImpl({checkView:e.checkView,mountedBatchSize:Qi.MOUNT_BATCH_SIZE-d.mountedCount,unmountedBatchSize:Qi.MOUNT_BATCH_SIZE-d.unmountedCount});let v=t.processed;const x=o.count,w=f.mountedCount,_=f.unmountedCount;d.updatedCount>0&&(v+=d.updatedCount+d.unmountedCount,t.priority=Math.min(d.priority,t.priority),d.empty&&w===0?(d.priority=t.priority,d.mountedCount+=w,d.unmountedCount+=_,this.graph.trigger("render:done",{stats:d,options:e}),t.processed=0,o.count=0):t.processed=v);const A=e.progress;if(x&&typeof A=="function"&&er(A,this.graph,{total:x,done:d.empty,current:v}),o.animationId!==c)return}o.animationId=v2(()=>{this.updateViewsAsync(e,t)})}registerMountedView(e){const t=e.cid,o=this.updates;if(t in o.mounted)return 0;o.mounted[t]=!0,o.mountedCids.push(t);const c=o.unmounted[t]||0;return delete o.unmounted[t],c}registerUnmountedView(e){const t=e.cid,o=this.updates;if(t in o.unmounted)return 0;o.unmounted[t]|=Qi.FLAG_INSERT;const c=o.unmounted[t];return o.unmountedCids.push(t),delete o.mounted[t],c}isViewMounted(e){return e==null?!1:e.cid in this.updates.mounted}getMountedViews(){return Object.keys(this.updates.mounted).map(e=>Gs.views[e])}getUnmountedViews(){return Object.keys(this.updates.unmounted).map(e=>Gs.views[e])}checkMountedViews(e,t){let o=0;if(typeof e!="function")return o;const c=this.updates,d=c.mounted,f=c.mountedCids,v=t==null?f.length:Math.min(f.length,t);for(let x=0;x<v;x+=1){const w=f[x];if(!(w in d))continue;const _=Gs.views[w];if(_==null)continue;if(er(e,this.graph,{view:_,unmounted:!0})){f.push(w);continue}o+=1,this.registerUnmountedView(_)&&_.unmount()}return f.splice(0,v),o}checkUnmountedViews(e,t){let o=0;typeof e!="function"&&(e=null);const c=this.updates,d=c.unmounted,f=c.unmountedCids,v=t==null?f.length:Math.min(f.length,t);for(let x=0;x<v;x+=1){const w=f[x];if(!(w in d))continue;const _=Gs.views[w];if(_==null)continue;if(e&&!er(e,this.graph,{view:_,unmounted:!1})){f.push(w);continue}o+=1;const A=this.registerMountedView(_);A&&this.scheduleViewUpdate(_,A,_.priority,{mounting:!0})}return f.splice(0,v),o}checkViewImpl(e={mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER}){const t=e.checkView||this.options.checkView,o=this.checkMountedViews(t,e.unmountedBatchSize);return{mountedCount:this.checkUnmountedViews(t,o>0?Math.min(this.updates.unmountedCids.length-o,e.mountedBatchSize):e.mountedBatchSize),unmountedCount:o}}checkView(e={}){return this.checkViewImpl(e)}isFrozen(){return!!this.options.frozen}freeze(e={}){const t=e.key,o=this.updates,c=this.options.frozen,d=o.freezeKey;if(t&&t!==d){if(c&&d)return;o.frozen=c,o.freezeKey=t}this.options.frozen=!0;const f=o.animationId;o.animationId=null,this.isAsync()&&f!=null&&m2(f),this.graph.trigger("freeze",{key:t})}unfreeze(e={}){const t=e.key,o=this.updates,c=o.freezeKey;if(t&&c&&t!==c||(o.freezeKey=null,t&&t===c&&o.frozen))return;const d=()=>{this.options.frozen=o.frozen=!1,o.sort&&(this.sortViews(),o.sort=!1);const f=e.after;f&&er(f,this.graph,this.graph),this.graph.trigger("unfreeze",{key:t})};if(this.isAsync()){this.freeze();const f=e.progress;this.updateViewsAsync(Object.assign(Object.assign({},e),{progress:({done:v,current:x,total:w})=>{f&&er(f,this.graph,{done:v,current:x,total:w}),v&&d()}}))}else this.updateViews(e),d()}isAsync(){return!!this.options.async}setAsync(e){this.options.async=e}onRemove(){this.freeze(),this.removeViews()}resetViews(e=[],t={}){this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(let o=0,c=e.length;o<c;o+=1)this.renderView(e[o],t);this.unfreeze({key:"reset"}),this.sortViews()}removeView(e){const t=this.views[e.id];if(t){const o=t.cid,c=this.updates,d=c.mounted,f=c.unmounted;t.remove(),delete this.views[e.id],delete d[o],delete f[o]}return t}removeViews(){this.views&&Object.keys(this.views).forEach(e=>{const t=this.views[e];t&&this.removeView(t.cell)}),this.views={}}renderView(e,t={}){const o=e.id,c=this.views;let d=0,f=c[o];if(!!e.isVisible()&&!(e.isEdge()&&(!this.isEdgeTerminalVisible(e,"source")||!this.isEdgeTerminalVisible(e,"target")))){if(f)d=Qi.FLAG_INSERT;else{const v=this.graph.hook.createCellView(e);v&&(f=c[e.id]=v,f.graph=this.graph,d=this.registerUnmountedView(f)|f.getBootstrapFlag())}f&&this.requestViewUpdate(f,d,f.priority,t)}}isExactSorting(){return this.options.sorting==="exact"}sortViews(){if(!!this.isExactSorting()){if(this.isFrozen()){this.updates.sort=!0;return}this.sortViewsExact()}}sortElements(e,t){const o=e.map(c=>{const d=c.parentNode,f=d.insertBefore(document.createTextNode(""),c.nextSibling);return v=>{if(d===v)throw new Error("You can't sort elements if any one is a descendant of another.");d.insertBefore(v,f),d.removeChild(f)}});e.sort(t).forEach((c,d)=>o[d](c))}sortViewsExact(){const e=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),t=this.model;this.sortElements(e,(o,c)=>{const d=t.getCell(o.getAttribute("data-cell-id")||""),f=t.getCell(c.getAttribute("data-cell-id")||""),v=d.getZIndex()||0,x=f.getZIndex()||0;return v===x?0:v<x?-1:1})}addZPivot(e=0){this.zPivots==null&&(this.zPivots={});const t=this.zPivots;let o=t[e];if(o)return o;o=t[e]=document.createComment(`z-index:${e+1}`);let c=-1/0;for(const f in t){const v=+f;v<e&&v>c&&(c=v,e-1)}const d=this.view.stage;if(c!==-1/0){const f=t[c];d.insertBefore(o,f.nextSibling)}else d.insertBefore(o,d.firstChild);return o}removeZPivots(){this.zPivots&&Object.keys(this.zPivots).forEach(e=>{const t=this.zPivots[e];t&&t.parentNode&&t.parentNode.removeChild(t)}),this.zPivots={}}insertView(e){const t=this.view.stage;switch(this.options.sorting){case"approx":{const o=e.cell.getZIndex(),c=this.addZPivot(o);t.insertBefore(e.container,c);break}case"exact":default:t.appendChild(e.container);break}}findViewByCell(e){if(e==null)return null;const t=ki.isCell(e)?e.id:e;return this.views[t]}findViewByElem(e){if(e==null)return null;const t=typeof e=="string"?this.view.stage.querySelector(e):e instanceof Element?e:e[0];if(t){const o=this.view.findAttr("data-cell-id",t);if(o)return this.views[o]}return null}findViewsFromPoint(e){const t={x:e.x,y:e.y};return this.model.getCells().map(o=>this.findViewByCell(o)).filter(o=>o!=null?rc(o.container,{target:this.view.stage}).containsPoint(t):!1)}findEdgeViewsInArea(e,t={}){const o=Ln.create(e);return this.model.getEdges().map(c=>this.findViewByCell(c)).filter(c=>{if(c){const d=rc(c.container,{target:this.view.stage});return d.width===0?d.inflate(1,0):d.height===0&&d.inflate(0,1),t.strict?o.containsRect(d):o.isIntersectWithRect(d)}return!1})}findViewsInArea(e,t={}){const o=Ln.create(e);return this.model.getNodes().map(c=>this.findViewByCell(c)).filter(c=>{if(c){const d=rc(c.container,{target:this.view.stage});return t.strict?o.containsRect(d):o.isIntersectWithRect(d)}return!1})}dispose(){this.resetUpdates(),this.stopListening()}}w3([No.dispose()],Qi.prototype,"dispose",null),function(l){l.FLAG_INSERT=1<<30,l.FLAG_REMOVE=1<<29,l.MOUNT_BATCH_SIZE=1e3,l.UPDATE_BATCH_SIZE=1e3,l.MIN_PRIORITY=2,l.SORT_DELAYING_BATCHES=["add","to-front","to-back"],l.UPDATE_DELAYING_BATCHES=["translate"]}(Qi||(Qi={}));var xA=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class X2 extends No{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(e={}){let t=e.size||"auto auto",o=e.position||"center";const c=this.graph.transform.getScale(),d=this.graph.translate();if(typeof o=="object"){const f=d.tx+c.sx*(o.x||0),v=d.ty+c.sy*(o.y||0);o=`${f}px ${v}px`}typeof t=="object"&&(t=Ln.fromSize(t).scale(c.sx,c.sy),t=`${t.width}px ${t.height}px`),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=o}drawBackgroundImage(e,t={}){if(!(e instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}const o=this.optionsCache;if(o&&o.image!==t.image)return;let c;const d=t.opacity,f=t.size;let v=t.repeat||"no-repeat";const x=ms.registry.get(v);if(typeof x=="function"){const _=t.quality||1;e.width*=_,e.height*=_;const A=x(e,t);if(!(A instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");c=A.toDataURL("image/png"),t.repeat&&v!==t.repeat?v=t.repeat:v="repeat",typeof f=="object"?(f.width*=A.width/e.width,f.height*=A.height/e.height):f===void 0&&(t.size={width:A.width/_,height:A.height/_})}else c=e.src,f===void 0&&(t.size={width:e.width,height:e.height});o!=null&&typeof t.size=="object"&&t.image===o.image&&t.repeat===o.repeat&&t.quality===o.quality&&(o.size=Up(t.size));const w=this.elem.style;w.backgroundImage=`url(${c})`,w.backgroundRepeat=v,w.opacity=d==null||d>=1?"":`${d}`,this.updateBackgroundImage(t)}updateBackgroundColor(e){this.elem.style.backgroundColor=e||""}updateBackgroundOptions(e){this.graph.options.background=e}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(e){const t=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(t.color),t.image){this.optionsCache=Up(t);const o=document.createElement("img");o.onload=()=>this.drawBackgroundImage(o,e),o.setAttribute("crossorigin","anonymous"),o.src=t.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}xA([No.dispose()],X2.prototype,"dispose",null);var E3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},CA=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class v0 extends Di{constructor(e){super(),this.padding={left:0,top:0,right:0,bottom:0},this.options=wd.getOptions(e);const t=this.graph.transform.getScale();this.sx=t.sx,this.sy=t.sy;const o=this.options.width||this.graph.options.width,c=this.options.height||this.graph.options.height;this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(wd.containerClass)).css({width:o,height:c}),this.options.pageVisible&&this.$container.addClass(this.prefixClassName(wd.pagedClass)),this.options.className&&this.$container.addClass(this.options.className);const d=this.graph.container;d.parentNode&&this.$container.insertBefore(d);const f=d.getAttribute("style");if(f){const v={};f.split(";").forEach(w=>{const _=w.trim();if(_){const A=_.split(":");A.length&&(v[A[0].trim()]=A[1]?A[1].trim():"")}}),Object.keys(v).forEach(w=>{w==="width"||w==="height"||(d.style[w]="",this.container.style[w]=v[w])})}this.content=document.createElement("div"),this.$content=this.$(this.content).addClass(this.prefixClassName(wd.contentClass)).css({width:this.graph.options.width,height:this.graph.options.height}),this.background=document.createElement("div"),this.$background=this.$(this.background).addClass(this.prefixClassName(wd.backgroundClass)),this.$content.append(this.background),this.options.pageVisible||this.$content.append(this.graph.view.grid),this.$content.append(d),this.$content.appendTo(this.container),this.startListening(),this.options.pageVisible||this.graph.grid.update(),this.backgroundManager=new v0.Background(this),this.options.autoResize||this.update()}get graph(){return this.options.graph}get model(){return this.graph.model}startListening(){const e=this.graph,t=this.model;e.on("scale",this.onScale,this),e.on("resize",this.onResize,this),e.on("before:print",this.storeScrollPosition,this),e.on("before:export",this.storeScrollPosition,this),e.on("after:print",this.restoreScrollPosition,this),e.on("after:export",this.restoreScrollPosition,this),e.on("render:done",this.onRenderDone,this),e.on("unfreeze",this.onUpdate,this),t.on("reseted",this.onUpdate,this),t.on("cell:added",this.onUpdate,this),t.on("cell:removed",this.onUpdate,this),t.on("cell:changed",this.onUpdate,this),t.on("batch:stop",this.onBatchStop,this),this.delegateBackgroundEvents()}stopListening(){const e=this.graph,t=this.model;e.off("scale",this.onScale,this),e.off("resize",this.onResize,this),e.off("beforeprint",this.storeScrollPosition,this),e.off("beforeexport",this.storeScrollPosition,this),e.off("afterprint",this.restoreScrollPosition,this),e.off("afterexport",this.restoreScrollPosition,this),e.off("render:done",this.onRenderDone,this),e.off("unfreeze",this.onUpdate,this),t.off("reseted",this.onUpdate,this),t.off("cell:added",this.onUpdate,this),t.off("cell:removed",this.onUpdate,this),t.off("cell:changed",this.onUpdate,this),t.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()}enableAutoResize(){this.options.autoResize=!0}disableAutoResize(){this.options.autoResize=!1}onUpdate(){this.graph.isAsync()||!this.options.autoResize||this.update()}onBatchStop(e){this.graph.isAsync()||!this.options.autoResize||Qi.UPDATE_DELAYING_BATCHES.includes(e.name)&&this.update()}delegateBackgroundEvents(e){const t=e||uh.events;this.delegatedHandlers=Object.keys(t).reduce((o,c)=>{const d=t[c];if(c.indexOf(" ")===-1)if(typeof d=="function")o[c]=d;else{let f=this.graph.view[d];typeof f=="function"&&(f=f.bind(this.graph.view),o[c]=f)}return o},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(o=>{this.delegateEvent(o,{guarded:!1},this.onBackgroundEvent)})}undelegateBackgroundEvents(){Object.keys(this.delegatedHandlers).forEach(e=>{this.undelegateEvent(e,this.onBackgroundEvent)})}onBackgroundEvent(e){let t=!1;const o=e.target;if(this.options.pageVisible)this.options.background?t=this.background===o:t=this.content===o;else{const c=this.graph.view;t=c.background===o||c.grid===o}if(t){const c=this.delegatedHandlers[e.type];typeof c=="function"&&c.apply(this.graph,arguments)}}onRenderDone({stats:e}){this.options.autoResize&&e.priority<2&&this.update()}onResize(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}onScale({sx:e,sy:t,ox:o,oy:c}){this.updateScale(e,t),(o||c)&&(this.centerPoint(o,c),this.updatePageBreak()),typeof(this.options.autoResizeOptions||this.options.fitTocontentOptions)=="function"&&this.update()}storeScrollPosition(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}restoreScrollPosition(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}storeClientSize(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}}restoreClientSize(){this.cachedClientSize=null}beforeManipulation(){(et.IS_IE||et.IS_EDGE)&&this.$container.css("visibility","hidden")}afterManipulation(){(et.IS_IE||et.IS_EDGE)&&this.$container.css("visibility","visible")}updatePageSize(e,t){e!=null&&(this.options.pageWidth=e),t!=null&&(this.options.pageHeight=t),this.updatePageBreak()}updatePageBreak(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){const e=this.graph.options.width,t=this.graph.options.height,o=this.options.pageWidth*this.sx,c=this.options.pageHeight*this.sy;if(e>o||t>c){let d=!1;const f=document.createElement("div");for(let v=1,x=Math.floor(e/o);v<x;v+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:v*o}).appendTo(f),d=!0;for(let v=1,x=Math.floor(t/c);v<x;v+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:v*c}).appendTo(f),d=!0;d&&(io(f,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(f),this.pageBreak=f)}}}update(){const e=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(e.width/2,e.height/2);let t=this.options.autoResizeOptions||this.options.fitTocontentOptions;typeof t=="function"&&(t=er(t,this,this));const o=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative"},t);this.graph.fitToContent(this.getFitToContentOptions(o))}getFitToContentOptions(e){const t=this.sx,o=this.sy;return e.gridWidth&&(e.gridWidth*=t),e.gridHeight&&(e.gridHeight*=o),e.minWidth&&(e.minWidth*=t),e.minHeight&&(e.minHeight*=o),typeof e.padding=="object"?e.padding={left:(e.padding.left||0)*t,right:(e.padding.right||0)*t,top:(e.padding.top||0)*o,bottom:(e.padding.bottom||0)*o}:typeof e.padding=="number"&&(e.padding*=t),this.options.autoResize||(e.contentArea=Ln.create()),e}updateScale(e,t){const o=this.graph.options,c=e/this.sx,d=t/this.sy;this.sx=e,this.sy=t,this.graph.translate(o.x*c,o.y*d),this.graph.resizeGraph(o.width*c,o.height*d)}scrollbarPosition(e,t,o){if(e==null&&t==null)return{left:this.container.scrollLeft,top:this.container.scrollTop};const c={};return typeof e=="number"&&(c.scrollLeft=e),typeof t=="number"&&(c.scrollTop=t),o&&o.animation?this.$container.animate(c,o.animation):this.$container.prop(c),this}scrollToPoint(e,t,o){const c=this.getClientSize(),d=this.graph.matrix(),f={};return typeof e=="number"&&(f.scrollLeft=e-c.width/2+d.e+(this.padding.left||0)),typeof t=="number"&&(f.scrollTop=t-c.height/2+d.f+(this.padding.top||0)),o&&o.animation?this.$container.animate(f,o.animation):this.$container.prop(f),this}scrollToContent(e){const t=this.sx,o=this.sy,c=this.graph.getContentArea().getCenter();return this.scrollToPoint(c.x*t,c.y*o,e)}scrollToCell(e,t){const o=this.sx,c=this.sy,d=e.getBBox().getCenter();return this.scrollToPoint(d.x*o,d.y*c,t)}center(e){return this.centerPoint(e)}centerPoint(e,t,o){const c=this.graph.matrix(),d=c.a,f=c.d,v=-c.e,x=-c.f,w=v+this.graph.options.width,_=x+this.graph.options.height;let A;if(this.storeClientSize(),typeof e=="number"||typeof t=="number"){A=o;const Qe=this.getVisibleArea().getCenter();typeof e=="number"?e*=d:e=Qe.x,typeof t=="number"?t*=f:t=Qe.y}else A=e,e=(v+w)/2,t=(x+_)/2;if(A&&A.padding)return this.positionPoint({x:e,y:t},"50%","50%",A);const P=this.getPadding(),V=this.getClientSize(),J=V.width/2,ee=V.height/2,ge=J-P.left-e+v,Se=J-P.right+e-w,Re=ee-P.top-t+x,_e=ee-P.bottom+t-_;this.addPadding(Math.max(ge,0),Math.max(Se,0),Math.max(Re,0),Math.max(_e,0));const Ue=this.scrollToPoint(e,t,A||void 0);return this.restoreClientSize(),Ue}centerContent(e){return this.positionContent("center",e)}centerCell(e,t){return this.positionCell(e,"center",t)}positionContent(e,t){const o=this.graph.getContentArea(t);return this.positionRect(o,e,t)}positionCell(e,t,o){const c=e.getBBox();return this.positionRect(c,t,o)}positionRect(e,t,o){const c=Ln.create(e);switch(t){case"center":return this.positionPoint(c.getCenter(),"50%","50%",o);case"top":return this.positionPoint(c.getTopCenter(),"50%",0,o);case"top-right":return this.positionPoint(c.getTopRight(),"100%",0,o);case"right":return this.positionPoint(c.getRightMiddle(),"100%","50%",o);case"bottom-right":return this.positionPoint(c.getBottomRight(),"100%","100%",o);case"bottom":return this.positionPoint(c.getBottomCenter(),"50%","100%",o);case"bottom-left":return this.positionPoint(c.getBottomLeft(),0,"100%",o);case"left":return this.positionPoint(c.getLeftMiddle(),0,"50%",o);case"top-left":return this.positionPoint(c.getTopLeft(),0,0,o);default:return this}}positionPoint(e,t,o,c={}){const{padding:d}=c,f=CA(c,["padding"]),v=xl(d),x=Ln.fromSize(this.getClientSize()),w=x.clone().moveAndExpand({x:v.left,y:v.top,width:-v.right-v.left,height:-v.top-v.bottom});t=sh(t,Math.max(0,w.width)),t<0&&(t=w.width+t),o=sh(o,Math.max(0,w.height)),o<0&&(o=w.height+o);const _=w.getTopLeft().translate(t,o),A=x.getCenter().diff(_),P=this.zoom(),V=A.scale(1/P,1/P),J=Ve.create(e).translate(V);return this.centerPoint(J.x,J.y,f)}zoom(e,t){if(e==null)return this.sx;t=t||{};let o,c;const d=this.getClientSize(),f=this.clientToLocalPoint(d.width/2,d.height/2);let v=e,x=e;if(t.absolute||(v+=this.sx,x+=this.sy),t.scaleGrid&&(v=Math.round(v/t.scaleGrid)*t.scaleGrid,x=Math.round(x/t.scaleGrid)*t.scaleGrid),t.maxScale&&(v=Math.min(t.maxScale,v),x=Math.min(t.maxScale,x)),t.minScale&&(v=Math.max(t.minScale,v),x=Math.max(t.minScale,x)),v=this.graph.transform.clampScale(v),x=this.graph.transform.clampScale(x),t.center){const w=v/this.sx,_=x/this.sy;o=t.center.x-(t.center.x-f.x)/w,c=t.center.y-(t.center.y-f.y)/_}else o=f.x,c=f.y;return this.beforeManipulation(),this.graph.transform.scale(v,x),this.centerPoint(o,c),this.afterManipulation(),this}zoomToRect(e,t={}){const o=Ln.create(e),c=this.graph;t.contentArea=o,t.viewportArea==null&&(t.viewportArea={x:c.options.x,y:c.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),c.transform.scaleContentToFitImpl(t,!1);const d=o.getCenter();return this.centerPoint(d.x,d.y),this.afterManipulation(),this}zoomToFit(e={}){return this.zoomToRect(this.graph.getContentArea(e),e)}transitionToPoint(e,t,o){typeof e=="object"?(o=t,t=e.y,e=e.x):t=t,o==null&&(o={});let c,d;const f=this.sx,v=Math.max(o.scale||f,1e-6),x=this.getClientSize(),w=new Ve(e,t),_=this.clientToLocalPoint(x.width/2,x.height/2);if(f===v){const P=_.diff(w).scale(f,f).round();c=`translate(${P.x}px,${P.y}px)`}else{const P=v/(f-v)*w.distance(_),V=_.clone().move(w,P),J=this.localToBackgroundPoint(V).round();c=`scale(${v/f})`,d=`${J.x}px ${J.y}px`}const A=o.onTransitionEnd;return this.$container.addClass(wd.transitionClassName),this.$content.off(wd.transitionEventName).on(wd.transitionEventName,P=>{this.syncTransition(v,{x:e,y:t}),typeof A=="function"&&er(A,this,P.originalEvent)}).css({transform:c,transformOrigin:d,transition:"transform",transitionDuration:o.duration||"1s",transitionDelay:o.delay,transitionTimingFunction:o.timing}),this}syncTransition(e,t){return this.beforeManipulation(),this.graph.scale(e),this.removeTransition(),this.centerPoint(t.x,t.y),this.afterManipulation(),this}removeTransition(){return this.$container.removeClass(wd.transitionClassName),this.$content.off(wd.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}transitionToRect(e,t={}){const o=Ln.create(e),c=t.maxScale||1/0,d=t.minScale||Number.MIN_VALUE,f=t.scaleGrid||null,v=t.visibility||1,x=t.center?Ve.create(t.center):o.getCenter(),w=this.getClientSize(),_=w.width*v,A=w.height*v;let P=new Ln(x.x-_/2,x.y-A/2,_,A).getMaxUniformScaleToFit(o,x);return P=Math.min(P,c),f&&(P=Math.floor(P/f)*f),P=Math.max(d,P),this.transitionToPoint(x,Object.assign({scale:P},t))}startPanning(e){const t=this.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.normalizeEvent(e),o=t.clientX-this.clientX,c=t.clientY-this.clientY;this.container.scrollTop-=c,this.container.scrollLeft-=o,this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("panning",{e:t})}stopPanning(e){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e})}clientToLocalPoint(e,t){let o=typeof e=="object"?e.x:e,c=typeof e=="object"?e.y:t;const d=this.graph.matrix();return o+=this.container.scrollLeft-this.padding.left-d.e,c+=this.container.scrollTop-this.padding.top-d.f,new Ve(o/d.a,c/d.d)}localToBackgroundPoint(e,t){const o=typeof e=="object"?Ve.create(e):new Ve(e,t),c=this.graph.matrix(),d=this.padding;return Hh(o,c).translate(d.left,d.top)}resize(e,t){let o=e??this.container.offsetWidth,c=t??this.container.offsetHeight;typeof o=="number"&&(o=Math.round(o)),typeof c=="number"&&(c=Math.round(c)),this.options.width=o,this.options.height=c,this.$container.css({width:o,height:c}),this.update()}getClientSize(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}}autoScroll(e,t){const c=this.container,d=c.getBoundingClientRect();let f=0,v=0;return e<=d.left+10&&(f=-10),t<=d.top+10&&(v=-10),e>=d.right-10&&(f=10),t>=d.bottom-10&&(v=10),f!==0&&(c.scrollLeft+=f),v!==0&&(c.scrollTop+=v),{scrollerX:f,scrollerY:v}}addPadding(e,t,o,c){let d=this.getPadding();this.padding={left:Math.round(d.left+(e||0)),top:Math.round(d.top+(o||0)),bottom:Math.round(d.bottom+(c||0)),right:Math.round(d.right+(t||0))},d=this.padding,this.$content.css({width:d.left+this.graph.options.width+d.right,height:d.top+this.graph.options.height+d.bottom});const f=this.graph.container;return f.style.left=`${this.padding.left}px`,f.style.top=`${this.padding.top}px`,this}getPadding(){const e=this.options.padding;return xl(typeof e=="function"?er(e,this,this):e)}getVisibleArea(){const e=this.graph.matrix(),t=this.getClientSize(),o={x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:t.width,height:t.height},c=nu(o,e.inverse());return c.x-=(this.padding.left||0)/this.sx,c.y-=(this.padding.top||0)/this.sy,c}isCellVisible(e,t={}){const o=e.getBBox(),c=this.getVisibleArea();return t.strict?c.containsRect(o):c.isIntersectWithRect(o)}isPointVisible(e){return this.getVisibleArea().containsPoint(e)}lock(){return this.$container.css("overflow","hidden"),this}unlock(){return this.$container.css("overflow","scroll"),this}onRemove(){this.stopListening()}dispose(){this.$(this.graph.container).insertBefore(this.$container),this.remove()}}E3([Di.dispose()],v0.prototype,"dispose",null),function(l){class e extends X2{constructor(o){super(o.graph),this.scroller=o,o.options.background&&this.draw(o.options.background)}get elem(){return this.scroller.background}init(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}updateBackgroundOptions(o){this.scroller.options.background=o}}l.Background=e}(v0||(v0={}));var wd;(function(l){l.containerClass="graph-scroller",l.panningClass=`${l.containerClass}-panning`,l.pannableClass=`${l.containerClass}-pannable`,l.pagedClass=`${l.containerClass}-paged`,l.contentClass=`${l.containerClass}-content`,l.backgroundClass=`${l.containerClass}-background`,l.transitionClassName="transition-in-progress",l.transitionEventName="transitionend.graph-scroller-transition",l.defaultOptions={padding(){const t=this.getClientSize(),o=Math.max(this.options.minVisibleWidth||0,1)||1,c=Math.max(this.options.minVisibleHeight||0,1)||1,d=Math.max(t.width-o,0),f=Math.max(t.height-c,0);return{left:d,top:f,right:d,bottom:f}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0};function e(t){const o=Bo({},l.defaultOptions,t);return o.pageWidth==null&&(o.pageWidth=t.graph.options.width),o.pageHeight==null&&(o.pageHeight=t.graph.options.height),o}l.getOptions=e})(wd||(wd={}));function Ha(l,e,t,o={}){if(t){const c=t.graph,d=c.view.normalizeEvent(e),f=c.snapToGrid(d.clientX,d.clientY);t.notify(l,Object.assign({e:d,view:t,node:t.cell,cell:t.cell,x:f.x,y:f.y},o))}}var wA=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class gw extends Di{constructor(e){super(),this.options=Bo({},_l.defaultOptions,e),this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new uw([],{comparator:_l.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.initHandles(),this.startListening()}get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName(_l.classNames.box)}get $boxes(){return this.$container.children(`.${this.boxClassName}`)}get handleOptions(){return this.options}startListening(){const e=this.graph,t=this.collection;this.delegateEvents({[`mousedown .${this.boxClassName}`]:"onSelectionBoxMouseDown",[`touchstart .${this.boxClassName}`]:"onSelectionBoxMouseDown"},!0),e.on("scale",this.onGraphTransformed,this),e.on("translate",this.onGraphTransformed,this),e.model.on("updated",this.onModelUpdated,this),t.on("added",this.onCellAdded,this),t.on("removed",this.onCellRemoved,this),t.on("reseted",this.onReseted,this),t.on("updated",this.onCollectionUpdated,this),t.on("node:change:position",this.onNodePositionChanged,this),t.on("cell:changed",this.onCellChanged,this)}stopListening(){const e=this.graph,t=this.collection;this.undelegateEvents(),e.off("scale",this.onGraphTransformed,this),e.off("translate",this.onGraphTransformed,this),e.model.off("updated",this.onModelUpdated,this),t.off("added",this.onCellAdded,this),t.off("removed",this.onCellRemoved,this),t.off("reseted",this.onReseted,this),t.off("updated",this.onCollectionUpdated,this),t.off("node:change:position",this.onNodePositionChanged,this),t.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes({async:!1})}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged({node:e,options:t}){const{showNodeSelectionBox:o,pointerEvents:c}=this.options,{ui:d,selection:f,translateBy:v}=t;let x=!this.translating;if(x=x&&(o!==!0||c==="none"),x=x&&d&&!f,x=x&&v&&e.id===v,x){this.translating=!0;const w=e.position(),_=e.previous("position"),A=w.x-_.x,P=w.y-_.y;(A!==0||P!==0)&&this.translateSelectedNodes(A,P,e,t),this.translating=!1}}onModelUpdated({removed:e}){e&&e.length&&this.unselect(e)}isEmpty(){return this.length<=0}isSelected(e){return this.collection.has(e)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(e,t={}){t.dryrun=!0;const o=this.filter(Array.isArray(e)?e:[e]);return this.collection.add(o,t),this}unselect(e,t={}){return t.dryrun=!0,this.collection.remove(Array.isArray(e)?e:[e],t),this}reset(e,t={}){if(e){if(t.batch){const w=this.filter(Array.isArray(e)?e:[e]);return this.collection.reset(w,Object.assign(Object.assign({},t),{ui:!0})),this}const o=this.cells,c=this.filter(Array.isArray(e)?e:[e]),d={},f={};o.forEach(w=>d[w.id]=w),c.forEach(w=>f[w.id]=w);const v=[],x=[];return c.forEach(w=>{d[w.id]||v.push(w)}),o.forEach(w=>{f[w.id]||x.push(w)}),x.length&&this.unselect(x,Object.assign(Object.assign({},t),{ui:!0})),v.length&&this.select(v,Object.assign(Object.assign({},t),{ui:!0})),x.length===0&&v.length===0&&this.updateContainer(),this}return this.clean(t)}clean(e={}){return this.length&&(e.batch===!1?this.unselect(this.cells,e):this.collection.reset([],Object.assign(Object.assign({},e),{ui:!0}))),this}setFilter(e){this.options.filter=e}setContent(e){this.options.content=e}startSelecting(e){e=this.normalizeEvent(e),this.clean();let t,o;const c=this.graph.container;if(e.offsetX!=null&&e.offsetY!=null&&c.contains(e.target))t=e.offsetX,o=e.offsetY;else{const d=this.$(c).offset(),f=c.scrollLeft,v=c.scrollTop;t=e.clientX-d.left+window.pageXOffset+f,o=e.clientY-d.top+window.pageYOffset+v}this.$container.css({top:o,left:t,width:1,height:1}),this.setEventData(e,{action:"selecting",clientX:e.clientX,clientY:e.clientY,offsetX:t,offsetY:o,scrollerX:0,scrollerY:0}),this.delegateDocumentEvents(_l.documentEvents,e.data)}filter(e){const t=this.options.filter;return Array.isArray(t)?e.filter(o=>!t.includes(o)&&!t.includes(o.shape)):typeof t=="function"?e.filter(o=>er(t,this.graph,o)):e}stopSelecting(e){const t=this.graph,o=this.getEventData(e);switch(o.action){case"selecting":{let d=this.$container.width(),f=this.$container.height();const v=this.$container.offset(),x=t.pageToLocal(v.left,v.top),w=t.transform.getScale();d/=w.sx,f/=w.sy;const _=new Ln(x.x,x.y,d,f),A=this.getCellViewsInArea(_).map(P=>P.cell);this.reset(A,{batch:!0}),this.hideRubberband();break}case"translating":{const d=t.snapToGrid(e.clientX,e.clientY);if(!this.options.following){const f=o;this.updateSelectedNodesPosition({dx:f.clientX-f.originX,dy:f.clientY-f.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",e,d.x,d.y);break}default:{this.clean();break}}}onMouseUp(e){this.getEventData(e).action&&(this.stopSelecting(e),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(e){this.options.following||e.stopPropagation();const t=this.normalizeEvent(e);this.options.movable&&this.startTranslating(t);const o=this.getCellViewFromElem(t.target);this.setEventData(t,{activeView:o});const c=this.graph.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mousedown",t,c.x,c.y),this.delegateDocumentEvents(_l.documentEvents,t.data)}startTranslating(e){this.graph.model.startBatch("move-selection");const t=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{action:"translating",clientX:t.x,clientY:t.y,originX:t.x,originY:t.y})}getSelectionOffset(e,t){let o=e.x-t.clientX,c=e.y-t.clientY;const d=this.graph.hook.getRestrictArea();if(d){const f=this.collection.toArray(),v=ki.getCellsBBox(f,{deep:!0})||Ln.create(),x=d.x-v.x,w=d.y-v.y,_=d.x+d.width-(v.x+v.width),A=d.y+d.height-(v.y+v.height);if(o<x&&(o=x),c<w&&(c=w),_<o&&(o=_),A<c&&(c=A),!this.options.following){const P=e.x-t.originX,V=e.y-t.originY;o=P<=x||P>=_?0:o,c=V<=w||V>=A?0:c}}return{dx:o,dy:c}}updateSelectedNodesPosition(e){const{dx:t,dy:o}=e;if(t||o)if(this.translateSelectedNodes(t,o),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const c=this.graph.transform.getScale();this.$boxes.add(this.$selectionContainer).css({left:`+=${t*c.sx}`,top:`+=${o*c.sy}`})}}autoScrollGraph(e,t){const o=this.graph.scroller.widget;return o?o.autoScroll(e,t):{scrollerX:0,scrollerY:0}}adjustSelection(e){const t=this.normalizeEvent(e),o=this.getEventData(t);switch(o.action){case"selecting":{const d=o;d.moving!==!0&&(this.$container.appendTo(this.graph.container),this.showRubberband(),d.moving=!0);const{scrollerX:f,scrollerY:v}=this.autoScrollGraph(t.clientX,t.clientY);d.scrollerX+=f,d.scrollerY+=v;const x=t.clientX-d.clientX+d.scrollerX,w=t.clientY-d.clientY+d.scrollerY,_=parseInt(this.$container.css("left"),10),A=parseInt(this.$container.css("top"),10);this.$container.css({left:x<0?d.offsetX+x:_,top:w<0?d.offsetY+w:A,width:Math.abs(x),height:Math.abs(w)});break}case"translating":{const d=this.graph.snapToGrid(t.clientX,t.clientY),f=o,v=this.getSelectionOffset(d,f);this.options.following?this.updateSelectedNodesPosition(v):this.updateContainerPosition(v),v.dx&&(f.clientX=d.x),v.dy&&(f.clientY=d.y),this.notifyBoxEvent("box:mousemove",e,d.x,d.y);break}default:break}this.boxesUpdated=!1}translateSelectedNodes(e,t,o,c){const d={},f=[];if(o&&(d[o.id]=!0),this.collection.toArray().forEach(v=>{v.getDescendants({deep:!0}).forEach(x=>{d[x.id]=!0})}),c&&c.translateBy){const v=this.graph.getCellById(c.translateBy);v&&(d[v.id]=!0,v.getDescendants({deep:!0}).forEach(x=>{d[x.id]=!0}),f.push(v))}this.collection.toArray().forEach(v=>{if(!d[v.id]){const x=Object.assign(Object.assign({},c),{selection:this.cid,exclude:f});v.translate(e,t,x),this.graph.model.getConnectedEdges(v).forEach(w=>{d[w.id]||(w.translate(e,t,x),d[w.id]=!0)})}})}getCellViewsInArea(e){const t=this.graph,o={strict:this.options.strict};let c=[];return this.options.rubberNode&&(this.options.useCellGeometry?c=c.concat(t.model.getNodesInArea(e,o).map(d=>t.renderer.findViewByCell(d)).filter(d=>d!=null)):c=c.concat(t.renderer.findViewsInArea(e,o))),this.options.rubberEdge&&(this.options.useCellGeometry?c=c.concat(t.model.getEdgesInArea(e,o).map(d=>t.renderer.findViewByCell(d)).filter(d=>d!=null)):c=c.concat(t.renderer.findEdgeViewsInArea(e,o))),c}notifyBoxEvent(e,t,o,c){const f=this.getEventData(t).activeView;this.trigger(e,{e:t,view:f,x:o,y:c,cell:f.cell})}getSelectedClassName(e){return this.prefixClassName(`${e.isNode()?"node":"edge"}-selected`)}addCellSelectedClassName(e){const t=this.graph.renderer.findViewByCell(e);t&&t.addClass(this.getSelectedClassName(e))}removeCellUnSelectedClassName(e){const t=this.graph.renderer.findViewByCell(e);t&&t.removeClass(this.getSelectedClassName(e))}destroySelectionBox(e){this.removeCellUnSelectedClassName(e),this.canShowSelectionBox(e)&&(this.$container.find(`[data-cell-id="${e.id}"]`).remove(),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(e){e.forEach(t=>this.removeCellUnSelectedClassName(t)),this.hide(),this.$boxes.remove(),this.boxCount=0}hide(){this.$container.removeClass(this.prefixClassName(_l.classNames.rubberband)).removeClass(this.prefixClassName(_l.classNames.selected))}showRubberband(){this.$container.addClass(this.prefixClassName(_l.classNames.rubberband))}hideRubberband(){this.$container.removeClass(this.prefixClassName(_l.classNames.rubberband))}showSelected(){this.$container.removeAttr("style").addClass(this.prefixClassName(_l.classNames.selected))}createContainer(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(_l.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(_l.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(_l.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer}updateContainerPosition(e){(e.dx||e.dy)&&this.$selectionContainer.css({left:`+=${e.dx}`,top:`+=${e.dy}`})}updateContainer(){const e={x:1/0,y:1/0},t={x:0,y:0};this.collection.toArray().filter(d=>this.canShowSelectionBox(d)).forEach(d=>{const f=this.graph.renderer.findViewByCell(d);if(f){const v=f.getBBox({useCellGeometry:this.options.useCellGeometry});e.x=Math.min(e.x,v.x),e.y=Math.min(e.y,v.y),t.x=Math.max(t.x,v.x+v.width),t.y=Math.max(t.y,v.y+v.height)}}),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:e.x,top:e.y,width:t.x-e.x,height:t.y-e.y}).attr("data-selection-length",this.collection.length);const c=this.options.content;if(c)if(typeof c=="function"){const d=er(c,this.graph,this,this.$selectionContent[0]);d&&this.$selectionContent.html(d)}else this.$selectionContent.html(c);this.collection.length>0&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(e){return e.isNode()&&this.options.showNodeSelectionBox===!0||e.isEdge()&&this.options.showEdgeSelectionBox===!0}createSelectionBox(e){if(this.addCellSelectedClassName(e),this.canShowSelectionBox(e)){const t=this.graph.renderer.findViewByCell(e);if(t){const o=t.getBBox({useCellGeometry:this.options.useCellGeometry}),c=this.boxClassName;this.$("<div/>").addClass(c).addClass(`${c}-${e.isNode()?"node":"edge"}`).attr("data-cell-id",e.id).css({position:"absolute",left:o.x,top:o.y,width:o.width,height:o.height,pointerEvents:this.options.pointerEvents||"auto"}).appendTo(this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(e={}){this.collection.length>0&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,e))}confirmUpdate(){return this.boxCount&&(this.hide(),this.$boxes.each((e,t)=>{const o=this.$(t).remove().attr("data-cell-id"),c=this.collection.get(o);c&&this.createSelectionBox(c)}),this.updateContainer()),0}getCellViewFromElem(e){const t=e.getAttribute("data-cell-id");if(t){const o=this.collection.get(t);if(o)return this.graph.renderer.findViewByCell(o)}return null}onCellRemoved({cell:e}){this.destroySelectionBox(e),this.updateContainer()}onReseted({previous:e,current:t}){this.destroyAllSelectionBoxes(e),t.forEach(o=>{this.listenCellRemoveEvent(o),this.createSelectionBox(o)}),this.updateContainer()}onCellAdded({cell:e}){this.listenCellRemoveEvent(e),this.createSelectionBox(e),this.updateContainer()}listenCellRemoveEvent(e){e.off("removed",this.onCellRemoved,this),e.on("removed",this.onCellRemoved,this)}onCollectionUpdated({added:e,removed:t,options:o}){e.forEach(d=>{this.trigger("cell:selected",{cell:d,options:o}),this.graph.trigger("cell:selected",{cell:d,options:o}),d.isNode()?(this.trigger("node:selected",{cell:d,options:o,node:d}),this.graph.trigger("node:selected",{cell:d,options:o,node:d})):d.isEdge()&&(this.trigger("edge:selected",{cell:d,options:o,edge:d}),this.graph.trigger("edge:selected",{cell:d,options:o,edge:d}))}),t.forEach(d=>{this.trigger("cell:unselected",{cell:d,options:o}),this.graph.trigger("cell:unselected",{cell:d,options:o}),d.isNode()?(this.trigger("node:unselected",{cell:d,options:o,node:d}),this.graph.trigger("node:unselected",{cell:d,options:o,node:d})):d.isEdge()&&(this.trigger("edge:unselected",{cell:d,options:o,edge:d}),this.graph.trigger("edge:unselected",{cell:d,options:o,edge:d}))});const c={added:e,removed:t,options:o,selected:this.cells};this.trigger("selection:changed",c),this.graph.trigger("selection:changed",c)}deleteSelectedCells(){const e=this.collection.toArray();this.clean(),this.graph.model.removeCells(e,{selection:this.cid})}startRotate({e}){const t=this.collection.toArray(),o=ki.getCellsBBox(t).getCenter(),c=this.graph.snapToGrid(e.clientX,e.clientY),d=t.reduce((f,v)=>(f[v.id]=ji.normalize(v.getAngle()),f),{});this.setEventData(e,{center:o,angles:d,start:c.theta(o)})}doRotate({e}){const t=this.getEventData(e),o=this.graph.options.rotating.grid,c=typeof o=="function"?er(o,this.graph,null):o,d=this.graph.snapToGrid(e.clientX,e.clientY),f=t.start-d.theta(t.center);t.rotated||(t.rotated=!0),Math.abs(f)>.001&&(this.collection.toArray().forEach(v=>{const x=aa.snapToGrid(t.angles[v.id]+f,c||15);v.rotate(x,{absolute:!0,center:t.center,selection:this.cid})}),this.updateSelectionBoxes())}stopRotate({e}){const t=this.getEventData(e);t.rotated&&(t.rotated=!1,this.collection.toArray().forEach(o=>{Ha("node:rotated",e,this.graph.findViewByCell(o))}))}startResize({e}){const t=this.graph.getGridSize(),o=this.collection.toArray(),c=ki.getCellsBBox(o),d=o.map(x=>x.getBBox()),f=d.reduce((x,w)=>w.width<x?w.width:x,1/0),v=d.reduce((x,w)=>w.height<x?w.height:x,1/0);this.setEventData(e,{bbox:c,cells:this.graph.model.getSubGraph(o),minWidth:t*c.width/f,minHeight:t*c.height/v})}doResize({e,dx:t,dy:o}){const c=this.eventData(e),d=c.bbox,f=d.width,v=d.height,x=Math.max(f+t,c.minWidth),w=Math.max(v+o,c.minHeight);c.resized||(c.resized=!0),(Math.abs(f-x)>.001||Math.abs(v-w)>.001)&&(this.graph.model.resizeCells(x,w,c.cells,{selection:this.cid}),d.width=x,d.height=w,this.updateSelectionBoxes())}stopResize({e}){const t=this.eventData(e);t.resized&&(t.resized=!1,this.collection.toArray().forEach(o=>{Ha("node:resized",e,this.graph.findViewByCell(o))}))}dispose(){this.clean(),this.remove()}}wA([Di.dispose()],gw.prototype,"dispose",null),Em(gw,Cd);var _l;(function(l){const e="widget-selection";l.classNames={root:e,inner:`${e}-inner`,box:`${e}-box`,content:`${e}-content`,rubberband:`${e}-rubberband`,selected:`${e}-selected`},l.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},l.defaultOptions={movable:!0,following:!0,strict:!1,useCellGeometry:!1,content(o){return Yg('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:o.length})},handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]};function t(o){return o.getAncestors().length}l.depthComparator=t})(_l||(_l={}));class EA extends Tv{get node(){return this.cell}get containerClassName(){return this.prefixClassName("widget-transform")}get resizeClassName(){return`${this.containerClassName}-resize`}get rotateClassName(){return`${this.containerClassName}-rotate`}init(e){this.options=Object.assign(Object.assign({},oc.defaultOptions),e),this.render(),this.startListening()}startListening(){this.delegateEvents({[`mousedown .${this.resizeClassName}`]:"startResizing",[`touchstart .${this.resizeClassName}`]:"startResizing",[`mousedown .${this.rotateClassName}`]:"startRotating",[`touchstart .${this.rotateClassName}`]:"startRotating"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),super.startListening()}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),super.stopListening()}renderHandles(){this.container=document.createElement("div"),this.$container=this.$(this.container);const e=this.$("<div/>").prop("draggable",!1),t=e.clone().addClass(this.rotateClassName),o=oc.POSITIONS.map(c=>e.clone().addClass(this.resizeClassName).attr("data-position",c));this.empty(),this.$container.append(o,t)}render(){return this.renderHandles(),this.view.addClass(oc.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()}update(){const e=this.graph.matrix(),t=this.node.getBBox();t.x*=e.a,t.x+=e.e,t.y*=e.d,t.y+=e.f,t.width*=e.a,t.height*=e.d;const o=ji.normalize(this.node.getAngle()),c=o!==0?`rotate(${o}deg)`:"";return this.$container.css({transform:c,width:t.width,height:t.height,left:t.x,top:t.y}),this.updateResizerDirections(),this}remove(){return this.view.removeClass(oc.NODE_CLS),super.remove()}onKnobMouseDown(){this.startHandle()}onKnobMouseUp(){this.stopHandle()}updateResizerDirections(){const e=ji.normalize(this.node.getAngle()),t=Math.floor(e*(oc.DIRECTIONS.length/360));if(t!==this.prevShift){const o=oc.DIRECTIONS.slice(t).concat(oc.DIRECTIONS.slice(0,t)),c=d=>`${this.containerClassName}-cursor-${d}`;this.$container.find(`.${this.resizeClassName}`).removeClass(oc.DIRECTIONS.map(d=>c(d)).join(" ")).each((d,f)=>{this.$(f).addClass(c(o[d]))}),this.prevShift=t}}getTrueDirection(e){const t=ji.normalize(this.node.getAngle());let o=oc.POSITIONS.indexOf(e);return o+=Math.floor(t*(oc.POSITIONS.length/360)),o%=oc.POSITIONS.length,oc.POSITIONS[o]}toValidResizeDirection(e){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[e]||e}startResizing(e){e.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});const t=this.$(e.target).attr("data-position"),o=this.graph.findViewByCell(this.node);this.prepareResizing(e,t),this.startAction(e),Ha("node:resize:mousedown",e,o)}prepareResizing(e,t){const o=this.getTrueDirection(t);let c=0,d=0;t.split("-").forEach(w=>{c={left:-1,right:1}[w]||c,d={top:-1,bottom:1}[w]||d});const f=this.toValidResizeDirection(t),v={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[f],x=ji.normalize(this.node.getAngle());this.setEventData(e,{selector:v,direction:f,trueDirection:o,relativeDirection:t,angle:x,resizeX:c,resizeY:d,action:"resizing"})}startRotating(e){e.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});const t=this.graph.findViewByCell(this.node),o=this.node.getBBox().getCenter(),c=this.normalizeEvent(e),d=this.graph.snapToGrid(c.clientX,c.clientY);this.setEventData(e,{center:o,action:"rotating",angle:ji.normalize(this.node.getAngle()),start:Ve.create(d).theta(o)}),this.startAction(e),Ha("node:rotate:mousedown",e,t)}onMouseMove(e){const t=this.graph.findViewByCell(this.node);let o=this.getEventData(e);if(o.action){const c=this.normalizeEvent(e);let d=c.clientX,f=c.clientY;const v=this.graph.scroller.widget,x=this.options.restrictedResizing;if(x===!0||typeof x=="number"){const V=x===!0?0:x,J=v?Math.max(V,8):V,ee=this.graph.container.getBoundingClientRect();d=eu(d,ee.left+J,ee.right-J),f=eu(f,ee.top+J,ee.bottom-J)}else this.options.autoScrollOnResizing&&v&&v.autoScroll(d,f);const w=this.graph.snapToGrid(d,f),_=this.graph.getGridSize(),A=this.node,P=this.options;if(o.action==="resizing"){o=o,o.resized||(t&&(t.addClass("node-resizing"),Ha("node:resize",e,t)),o.resized=!0);const V=A.getBBox(),J=Ve.create(w).rotate(o.angle,V.getCenter()).diff(V[o.selector]);let ee=o.resizeX?J.x*o.resizeX:V.width,ge=o.resizeY?J.y*o.resizeY:V.height;const Se=ee,Re=ge;if(ee=aa.snapToGrid(ee,_),ge=aa.snapToGrid(ge,_),ee=Math.max(ee,P.minWidth||_),ge=Math.max(ge,P.minHeight||_),ee=Math.min(ee,P.maxWidth||1/0),ge=Math.min(ge,P.maxHeight||1/0),P.preserveAspectRatio){const Ue=V.width*ge/V.height,Qe=V.height*ee/V.width;ee<Ue?ge=Qe:ee=Ue}const _e=o.relativeDirection;if(P.allowReverse&&(Se<=-ee||Re<=-ge)){let Ue;_e==="left"?Se<=-ee&&(Ue="right"):_e==="right"?Se<=-ee&&(Ue="left"):_e==="top"?Re<=-ge&&(Ue="bottom"):_e==="bottom"?Re<=-ge&&(Ue="top"):_e==="top-left"?Se<=-ee&&Re<=-ge?Ue="bottom-right":Se<=-ee?Ue="top-right":Re<=-ge&&(Ue="bottom-left"):_e==="top-right"?Se<=-ee&&Re<=-ge?Ue="bottom-left":Se<=-ee?Ue="top-left":Re<=-ge&&(Ue="bottom-right"):_e==="bottom-left"?Se<=-ee&&Re<=-ge?Ue="top-right":Se<=-ee?Ue="bottom-right":Re<=-ge&&(Ue="top-left"):_e==="bottom-right"&&(Se<=-ee&&Re<=-ge?Ue="top-left":Se<=-ee?Ue="bottom-left":Re<=-ge&&(Ue="top-right"));const Qe=Ue;this.stopHandle();const bt=this.$container.find(`.${this.resizeClassName}[data-position="${Qe}"]`);this.startHandle(bt[0]),this.prepareResizing(e,Qe),this.onMouseMove(e)}if(V.width!==ee||V.height!==ge){const Ue={ui:!0,direction:o.direction,relativeDirection:o.relativeDirection,trueDirection:o.trueDirection,minWidth:P.minWidth,minHeight:P.minHeight,maxWidth:P.maxWidth,maxHeight:P.maxHeight,preserveAspectRatio:P.preserveAspectRatio===!0};A.resize(ee,ge,Ue),Ha("node:resizing",e,t)}Ha("node:resize:mousemove",e,t)}else if(o.action==="rotating"){o=o,o.rotated||(t&&(t.addClass("node-rotating"),Ha("node:rotate",e,t)),o.rotated=!0);const V=A.getAngle(),J=o.start-Ve.create(w).theta(o.center);let ee=o.angle+J;P.rotateGrid&&(ee=aa.snapToGrid(ee,P.rotateGrid)),ee=ji.normalize(ee),V!==ee&&(A.rotate(ee,{absolute:!0}),Ha("node:rotating",e,t)),Ha("node:rotate:mousemove",e,t)}}}onMouseUp(e){const t=this.graph.findViewByCell(this.node),o=this.getEventData(e);o.action&&(this.stopAction(e),this.model.stopBatch(o.action==="resizing"?"resize":"rotate",{cid:this.cid}),o.action==="resizing"?Ha("node:resize:mouseup",e,t):o.action==="rotating"&&Ha("node:rotate:mouseup",e,t))}startHandle(e){if(this.handle=e||null,this.$container.addClass(`${this.containerClassName}-active`),e){this.$(e).addClass(`${this.containerClassName}-active-handle`);const t=e.getAttribute("data-position");if(t){const o=oc.DIRECTIONS[oc.POSITIONS.indexOf(t)];this.$container.addClass(`${this.containerClassName}-cursor-${o}`)}}}stopHandle(){if(this.$container.removeClass(`${this.containerClassName}-active`),this.handle){this.$(this.handle).removeClass(`${this.containerClassName}-active-handle`);const e=this.handle.getAttribute("data-position");if(e){const t=oc.DIRECTIONS[oc.POSITIONS.indexOf(e)];this.$container.removeClass(`${this.containerClassName}-cursor-${t}`)}this.handle=null}}startAction(e){this.startHandle(e.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(oc.documentEvents,e.data)}stopAction(e){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const t=this.graph.findViewByCell(this.node),o=this.getEventData(e);t&&(t.removeClass(`node-${o.action}`),o.action==="resizing"&&o.resized?Ha("node:resized",e,t):o.action==="rotating"&&o.rotated&&Ha("node:rotated",e,t))}}var oc;(function(l){l.NODE_CLS="has-widget-transform",l.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],l.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],l.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},l.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}})(oc||(oc={}));var S3=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t},cf;(function(l){function e(t,o,c){const d={};return Object.keys(c||{}).forEach(f=>{const v=c[f];d[f]=typeof v=="function"?v.call(t,o):v}),d}l.parseOptionGroup=e})(cf||(cf={})),function(l){function e(t){const{grid:o,panning:c,selecting:d,embedding:f,snapline:v,resizing:x,rotating:w,knob:_,clipboard:A,history:P,scroller:V,minimap:J,keyboard:ee,mousewheel:ge}=t,Se=S3(t,["grid","panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"]),Re=t.container;if(Re!=null)Se.width==null&&(Se.width=Re.clientWidth),Se.height==null&&(Se.height=Re.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");const _e=Bo({},l.defaults,Se),Ue={size:10,visible:!1};return typeof o=="number"?_e.grid={size:o,visible:!1}:typeof o=="boolean"?_e.grid=Object.assign(Object.assign({},Ue),{visible:o}):_e.grid=Object.assign(Object.assign({},Ue),o),["panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"].forEach(bt=>{const Pt=t[bt];typeof Pt=="boolean"?_e[bt].enabled=Pt:_e[bt]=Object.assign(Object.assign({},_e[bt]),Pt)}),_e.background&&_e.scroller.enabled&&_e.scroller.background==null&&(_e.scroller.background=_e.background,delete _e.background),_e}l.get=e}(cf||(cf={})),function(l){l.defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:aa.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:aa.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection({type:e,sourceView:t,targetView:o}){return(e==="target"?o:t)!=null},createEdge(){return new fw}},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1,allowReverse:!0},rotating:{enabled:!1,grid:15},translating:{restrict:!1},knob:{enabled:!1,clearAll:!0,clearOnBlankMouseDown:!0},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},selecting:{enabled:!1,rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1,eventTypes:["leftMouseDown"]},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:()=>!1}}(cf||(cf={}));var SA=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class Ay extends No{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(e){return this.svg.getElementById(e)!=null}filter(e){let t=e.id;const o=e.name;if(t||(t=`filter-${o}-${this.cid}-${cC(JSON.stringify(e))}`),!this.isDefined(t)){const c=Jh.registry.get(o);if(c==null)return Jh.registry.onNotFound(o);const d=c(e.args||{}),f=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});ir.create(Ei.sanitize(d),f).appendTo(this.defs)}return t}gradient(e){let t=e.id;const o=e.type;if(t||(t=`gradient-${o}-${this.cid}-${cC(JSON.stringify(e))}`),!this.isDefined(t)){const d=e.stops.map(x=>{const w=x.opacity!=null&&Number.isFinite(x.opacity)?x.opacity:1;return`<stop offset="${x.offset}" stop-color="${x.color}" stop-opacity="${w}"/>`}),f=`<${o}>${d.join("")}</${o}>`,v=Object.assign({id:t},e.attrs);ir.create(f,v).appendTo(this.defs)}return t}marker(e){const{id:t,refX:o,refY:c,markerUnits:d,markerOrient:f,tagName:v,children:x}=e,w=SA(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let _=t;if(_||(_=`marker-${this.cid}-${cC(JSON.stringify(e))}`),!this.isDefined(_)){v!=="path"&&delete w.d;const A=ir.create("marker",{refX:o,refY:c,id:_,overflow:"visible",orient:f??"auto",markerUnits:d||"userSpaceOnUse"},x?x.map(P=>{var{tagName:V}=P,J=SA(P,["tagName"]);return ir.create(`${V}`||"path",t0(Object.assign(Object.assign({},w),J)))}):[ir.create(v||"path",t0(w))]);this.defs.appendChild(A.node)}return _}remove(e){const t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}var Ty=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},Z2=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class Ov extends No{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}getGridSize(){return this.grid.size}setGridSize(e){this.grid.size=Math.max(e,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}update(e={}){const t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();const o=this.graph.matrix(),c=this.getInstance(),d=Array.isArray(e)?e:[e];this.patterns.forEach((x,w)=>{const _=`pattern_${w}`,A=o.a||1,P=o.d||1,{update:V,markup:J}=x,ee=Z2(x,["update","markup"]),ge=Object.assign(Object.assign(Object.assign({},ee),d[w]),{sx:A,sy:P,ox:o.e||0,oy:o.f||0,width:t*A,height:t*P});c.has(_)||c.add(_,ir.create("pattern",{id:_,patternUnits:"userSpaceOnUse"},ir.createVectors(J)).node);const Se=c.get(_);typeof V=="function"&&V(Se.childNodes[0],ge);let Re=ge.ox%ge.width;Re<0&&(Re+=ge.width);let _e=ge.oy%ge.height;_e<0&&(_e+=ge.height),oo(Se,{x:Re,y:_e,width:ge.width,height:ge.height})});const f=new XMLSerializer().serializeToString(c.root),v=`url(data:image/svg+xml;base64,${btoa(f)})`;this.elem.style.backgroundImage=v}getInstance(){return this.instance||(this.instance=new Ls),this.instance}resolveGrid(e){if(!e)return[];const t=e.type;if(t==null)return[Object.assign(Object.assign({},Ls.presets.dot),e.args)];const o=Ls.registry.get(t);if(o){let c=e.args||[];return Array.isArray(c)||(c=[c]),Array.isArray(o)?o.map((d,f)=>Object.assign(Object.assign({},d),c[f])):[Object.assign(Object.assign({},o),c[0])]}return Ls.registry.onNotFound(t)}dispose(){this.stopListening(),this.clear()}}Ty([No.dispose()],Ov.prototype,"dispose",null);class Pv extends No{getClientMatrix(){return nc(this.view.stage.getScreenCTM())}getClientOffset(){const e=this.view.svg.getBoundingClientRect();return new Ve(e.left,e.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(e,t){return(typeof e=="number"?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(e,t){const o=Ve.create(e,t);return Hh(o,this.graph.matrix())}localToClientPoint(e,t){const o=Ve.create(e,t);return Hh(o,this.getClientMatrix())}localToPagePoint(e,t){return(typeof e=="number"?this.localToGraphPoint(e,t):this.localToGraphPoint(e)).translate(this.getPageOffset())}localToGraphRect(e,t,o,c){const d=Ln.create(e,t,o,c);return nu(d,this.graph.matrix())}localToClientRect(e,t,o,c){const d=Ln.create(e,t,o,c);return nu(d,this.getClientMatrix())}localToPageRect(e,t,o,c){return(typeof e=="number"?this.localToGraphRect(e,t,o,c):this.localToGraphRect(e)).translate(this.getPageOffset())}graphToLocalPoint(e,t){const o=Ve.create(e,t);return Hh(o,this.graph.matrix().inverse())}clientToLocalPoint(e,t){const o=Ve.create(e,t);return Hh(o,this.getClientMatrix().inverse())}clientToGraphPoint(e,t){const o=Ve.create(e,t);return Hh(o,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(e,t){const c=Ve.create(e,t).diff(this.getPageOffset());return this.graphToLocalPoint(c)}graphToLocalRect(e,t,o,c){const d=Ln.create(e,t,o,c);return nu(d,this.graph.matrix().inverse())}clientToLocalRect(e,t,o,c){const d=Ln.create(e,t,o,c);return nu(d,this.getClientMatrix().inverse())}clientToGraphRect(e,t,o,c){const d=Ln.create(e,t,o,c);return nu(d,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(e,t,o,c){const d=Ln.create(e,t,o,c),f=this.getPageOffset();return d.x-=f.x,d.y-=f.y,this.graphToLocalRect(d)}}var Y2=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class m0 extends No{constructor(){super(...arguments),this.widget=this.graph.hook.createSnapline()}dispose(){this.widget.dispose()}}Y2([No.dispose()],m0.prototype,"dispose",null);var dh;(function(l){function e(c){const d=[],f=[];return Array.isArray(c)?d.push(...c):c.split("|").forEach(v=>{v.indexOf("&")===-1?d.push(v):f.push(...v.split("&"))}),{or:d,and:f}}l.parse=e;function t(c,d){if(c!=null&&d!=null){const f=e(c),v=e(d),x=f.or.sort(),w=v.or.sort(),_=f.and.sort(),A=v.and.sort(),P=(V,J)=>V.length===J.length&&(V.length===0||V.every((ee,ge)=>ee===J[ge]));return P(x,w)&&P(_,A)}return c==null&&d==null}l.equals=t;function o(c,d,f){if(d==null||Array.isArray(d)&&d.length===0)return f?c.altKey!==!0&&c.ctrlKey!==!0&&c.metaKey!==!0&&c.shiftKey!==!0:!0;const{or:v,and:x}=e(d),w=_=>{const A=`${_.toLowerCase()}Key`;return c[A]===!0};return v.some(_=>w(_))&&x.every(_=>w(_))}l.isMatch=o})(dh||(dh={}));var My=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class y0 extends No{get widgetOptions(){return this.options.scroller}get pannable(){return this.widgetOptions?typeof this.widgetOptions.pannable=="object"?this.widgetOptions.pannable.enabled:!!this.widgetOptions.pannable:!1}init(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()}startListening(){let e=[];const t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.widget.container).on("mousedown",this.onRightMouseDown))}stopListening(){let e=[];const t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.widget.container).off("mousedown",this.onRightMouseDown)}onRightMouseDown(e){e.button===2&&this.allowPanning(e,!0)&&this.widget&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",()=>this.updateClassName(!1)))}preparePanning({e}){this.widget&&(this.allowPanning(e,!0)||this.allowPanning(e)&&!this.graph.selection.allowRubberband(e,!0))&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",()=>this.updateClassName(!1)))}allowPanning(e,t){return this.widget&&this.pannable&&dh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}updateClassName(e){if(this.widget==null)return;const t=this.widget.container,o=this.view.prefixClassName("graph-scroller-pannable");this.pannable?(io(t,o),t.dataset.panning=(!!e).toString()):tu(t,o)}enablePanning(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())}lock(){this.widget&&this.widget.lock()}unlock(){this.widget&&this.widget.unlock()}update(){this.widget&&this.widget.update()}enableAutoResize(){this.widget&&this.widget.enableAutoResize()}disableAutoResize(){this.widget&&this.widget.disableAutoResize()}resize(e,t){this.widget&&this.widget.resize(e,t)}dispose(){this.widget&&this.widget.dispose(),this.stopListening()}}My([No.dispose()],y0.prototype,"dispose",null);var Oy=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},K2=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class Dv extends No{get commonOptions(){const e=this.instanceOptions,{enabled:t}=e;return K2(e,["enabled"])}get instanceOptions(){return this.options.clipboard}get cells(){return this.widget.cells}get disabled(){return this.instanceOptions.enabled!==!0}init(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)}enable(){this.disabled&&(this.instanceOptions.enabled=!0)}disable(){this.disabled||(this.instanceOptions.enabled=!1)}copy(e,t={}){this.disabled||(this.widget.copy(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}cut(e,t={}){this.disabled||(this.widget.cut(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}paste(e={},t=this.graph){return this.disabled?[]:this.widget.paste(t,Object.assign(Object.assign({},this.commonOptions),e))}clean(e){(!this.disabled||e)&&(this.widget.clean(),this.graph.trigger("clipboard:changed",{cells:[]}))}isEmpty(){return this.widget.isEmpty()}dispose(){this.clean(!0)}}Oy([No.dispose()],Dv.prototype,"dispose",null);var _3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class hg extends No{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:e,magnet:t,options:o={}}){const c=this.resolveHighlighter(o);if(!c)return;const d=this.getHighlighterId(t,c);if(!this.highlights[d]){const f=c.highlighter;f.highlight(e,t,Object.assign({},c.args)),this.highlights[d]={cellView:e,magnet:t,highlighter:f,args:c.args}}}onCellUnhighlight({magnet:e,options:t={}}){const o=this.resolveHighlighter(t);if(!o)return;const c=this.getHighlighterId(e,o);this.unhighlight(c)}resolveHighlighter(e){const t=this.options;let o=e.highlighter;if(o==null){const v=e.type;o=v&&t.highlighting[v]||t.highlighting.default}if(o==null)return null;const c=typeof o=="string"?{name:o}:o,d=c.name,f=Qh.registry.get(d);return f==null?Qh.registry.onNotFound(d):(Qh.check(d,f),{name:d,highlighter:f,args:c.args||{}})}getHighlighterId(e,t){return Gm(e),t.name+e.id+JSON.stringify(t.args)}unhighlight(e){const t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}dispose(){Object.keys(this.highlights).forEach(e=>this.unhighlight(e)),this.stopListening()}}_3([hg.dispose()],hg.prototype,"dispose",null);var Py=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class b0 extends No{constructor(){super(...arguments),this.widgets=new Map}get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get isSelectionEnabled(){return this.options.selecting.enabled===!0}init(){this.startListening(),this.resize()}startListening(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}stopListening(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}onNodeMouseUp({node:e}){if(!this.isSelectionEnabled){const t=this.graph.hook.createTransform(e,{clearAll:!0});t&&this.widgets.set(e,t)}}onNodeSelected({node:e}){if(this.isSelectionEnabled){const t=this.graph.hook.createTransform(e,{clearAll:!1});t&&this.widgets.set(e,t)}}onNodeUnSelected({node:e}){if(this.isSelectionEnabled){const t=this.widgets.get(e);t&&t.dispose(),this.widgets.delete(e)}}getMatrix(){const e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),nc(this.viewportMatrix)}setMatrix(e){const t=nc(e),o=r0(t);this.viewport.setAttribute("transform",o),this.viewportMatrix=t,this.viewportTransformString=o}resize(e,t){let o=e===void 0?this.options.width:e,c=t===void 0?this.options.height:t;this.options.width=o,this.options.height=c,typeof o=="number"&&(o=Math.round(o)),typeof c=="number"&&(c=Math.round(c)),this.container.style.width=o==null?"":`${o}px`,this.container.style.height=c==null?"":`${c}px`;const d=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},d)),this}getComputedSize(){let e=this.options.width,t=this.options.height;return RE(e)||(e=this.container.clientWidth),RE(t)||(t=this.container.clientHeight),{width:e,height:t}}getScale(){return mM(this.getMatrix())}scale(e,t=e,o=0,c=0,d={}){if(e=this.clampScale(e),t=this.clampScale(t),o||c){const v=this.getTranslation(),x=v.tx-o*(e-1),w=v.ty-c*(t-1);(x!==v.tx||w!==v.ty)&&this.translate(x,w)}const f=this.getMatrix();return f.a=e,f.d=t,this.setMatrix(f),this.graph.trigger("scale",Object.assign({sx:e,sy:t,ox:o,oy:c},d)),this}clampScale(e){const t=this.graph.options.scaling;return eu(e,t.min||.01,t.max||16)}getZoom(){return this.getScale().sx}zoom(e,t){t=t||{};let o=e,c=e;const d=this.getScale(),f=this.getComputedSize();let v=f.width/2,x=f.height/2;if(t.absolute||(o+=d.sx,c+=d.sy),t.scaleGrid&&(o=Math.round(o/t.scaleGrid)*t.scaleGrid,c=Math.round(c/t.scaleGrid)*t.scaleGrid),t.maxScale&&(o=Math.min(t.maxScale,o),c=Math.min(t.maxScale,c)),t.minScale&&(o=Math.max(t.minScale,o),c=Math.max(t.minScale,c)),t.center&&(v=t.center.x,x=t.center.y),o=this.clampScale(o),c=this.clampScale(c),v||x){const w=this.getTranslation(),_=v-(v-w.tx)*(o/d.sx),A=x-(x-w.ty)*(c/d.sy);(_!==w.tx||A!==w.ty)&&this.translate(_,A,{ui:t.ui})}return this.scale(o,c,0,0,{ui:t.ui}),this}getRotation(){return yM(this.getMatrix())}rotate(e,t,o){if(t==null||o==null){const d=rc(this.graph.view.stage);t=d.width/2,o=d.height/2}const c=this.getMatrix().translate(t,o).rotate(e).translate(-t,-o);return this.setMatrix(c),this}getTranslation(){return bM(this.getMatrix())}translate(e,t,o={}){const c=this.getMatrix();c.e=e||0,c.f=t||0,this.setMatrix(c);const d=this.getTranslation();return this.options.x=d.tx,this.options.y=d.ty,this.graph.trigger("translate",Object.assign(Object.assign({},d),o)),this}setOrigin(e,t){return this.translate(e||0,t||0)}fitToContent(e,t,o,c){if(typeof e=="object"){const _e=e;e=_e.gridWidth||1,t=_e.gridHeight||1,o=_e.padding||0,c=_e}else e=e||1,t=t||1,o=o||0,c==null&&(c={});const d=xl(o),f=c.border||0,v=c.contentArea?Ln.create(c.contentArea):this.getContentArea(c);f>0&&v.inflate(f);const x=this.getScale(),w=this.getTranslation(),_=x.sx,A=x.sy;v.x*=_,v.y*=A,v.width*=_,v.height*=A;let P=Math.max(Math.ceil((v.width+v.x)/e),1)*e,V=Math.max(Math.ceil((v.height+v.y)/t),1)*t,J=0,ee=0;(c.allowNewOrigin==="negative"&&v.x<0||c.allowNewOrigin==="positive"&&v.x>=0||c.allowNewOrigin==="any")&&(J=Math.ceil(-v.x/e)*e,J+=d.left,P+=J),(c.allowNewOrigin==="negative"&&v.y<0||c.allowNewOrigin==="positive"&&v.y>=0||c.allowNewOrigin==="any")&&(ee=Math.ceil(-v.y/t)*t,ee+=d.top,V+=ee),P+=d.right,V+=d.bottom,P=Math.max(P,c.minWidth||0),V=Math.max(V,c.minHeight||0),P=Math.min(P,c.maxWidth||Number.MAX_SAFE_INTEGER),V=Math.min(V,c.maxHeight||Number.MAX_SAFE_INTEGER);const ge=this.getComputedSize(),Se=P!==ge.width||V!==ge.height;return(J!==w.tx||ee!==w.ty)&&this.translate(J,ee),Se&&this.resize(P,V),new Ln(-J/_,-ee/A,P/_,V/A)}scaleContentToFit(e={}){this.scaleContentToFitImpl(e)}scaleContentToFitImpl(e={},t=!0){let o,c;if(e.contentArea){const Se=e.contentArea;o=this.graph.localToGraph(Se),c=Ve.create(Se)}else o=this.getContentBBox(e),c=this.graph.graphToLocal(o);if(!o.width||!o.height)return;const d=xl(e.padding),f=e.minScale||0,v=e.maxScale||Number.MAX_SAFE_INTEGER,x=e.minScaleX||f,w=e.maxScaleX||v,_=e.minScaleY||f,A=e.maxScaleY||v;let P;if(e.viewportArea)P=e.viewportArea;else{const Se=this.getComputedSize(),Re=this.getTranslation();P={x:Re.tx,y:Re.ty,width:Se.width,height:Se.height}}P=Ln.create(P).moveAndExpand({x:d.left,y:d.top,width:-d.left-d.right,height:-d.top-d.bottom});const V=this.getScale();let J=P.width/o.width*V.sx,ee=P.height/o.height*V.sy;e.preserveAspectRatio!==!1&&(J=ee=Math.min(J,ee));const ge=e.scaleGrid;if(ge&&(J=ge*Math.floor(J/ge),ee=ge*Math.floor(ee/ge)),J=eu(J,x,w),ee=eu(ee,_,A),this.scale(J,ee),t){const Se=this.options,Re=P.x-c.x*J-Se.x,_e=P.y-c.y*ee-Se.y;this.translate(Re,_e)}}getContentArea(e={}){return e.useCellGeometry?this.model.getAllCellsBBox()||new Ln:rc(this.graph.view.stage)}getContentBBox(e={}){return this.graph.localToGraph(this.getContentArea(e))}getGraphArea(){const e=Ln.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}zoomToRect(e,t={}){const o=Ln.create(e),c=this.graph;t.contentArea=o,t.viewportArea==null&&(t.viewportArea={x:c.options.x,y:c.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);const d=o.getCenter();return this.centerPoint(d.x,d.y),this}zoomToFit(e={}){return this.zoomToRect(this.getContentArea(e),e)}centerPoint(e,t){const o=this.getComputedSize(),c=this.getScale(),d=this.getTranslation(),f=o.width/2,v=o.height/2;e=typeof e=="number"?e:f,t=typeof t=="number"?t:v,e=f-e*c.sx,t=v-t*c.sy,(d.tx!==e||d.ty!==t)&&this.translate(e,t)}centerContent(e){const o=this.graph.getContentArea(e).getCenter();this.centerPoint(o.x,o.y)}centerCell(e){return this.positionCell(e,"center")}positionPoint(e,t,o){const c=this.getComputedSize();t=sh(t,Math.max(0,c.width)),t<0&&(t=c.width+t),o=sh(o,Math.max(0,c.height)),o<0&&(o=c.height+o);const d=this.getTranslation(),f=this.getScale(),v=t-e.x*f.sx,x=o-e.y*f.sy;(d.tx!==v||d.ty!==x)&&this.translate(v,x)}positionRect(e,t){const o=Ln.create(e);switch(t){case"center":return this.positionPoint(o.getCenter(),"50%","50%");case"top":return this.positionPoint(o.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(o.getTopRight(),"100%",0);case"right":return this.positionPoint(o.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(o.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(o.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(o.getBottomLeft(),0,"100%");case"left":return this.positionPoint(o.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(o.getTopLeft(),0,0);default:return this}}positionCell(e,t){const o=e.getBBox();return this.positionRect(o,t)}positionContent(e,t){const o=this.graph.getContentArea(t);return this.positionRect(o,e)}dispose(){this.widgets.forEach(e=>e.dispose()),this.widgets.clear(),this.stopListening()}}Py([b0.dispose()],b0.prototype,"dispose",null);var q2=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class fg extends No{constructor(){super(...arguments),this.movedMap=new WeakMap,this.unselectMap=new WeakMap}get widgetOptions(){return this.options.selecting}get rubberbandDisabled(){return this.widgetOptions.enabled!==!0||this.widgetOptions.rubberband!==!0}get disabled(){return this.widgetOptions.enabled!==!0}get length(){return this.widget.length}get cells(){return this.widget.cells}init(){this.widget=this.graph.hook.createSelection(),this.startListening()}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown({e}){(this.allowRubberband(e,!0)||this.allowRubberband(e)&&!this.graph.scroller.allowPanning(e,!0)&&!this.graph.panning.allowPanning(e,!0))&&this.startRubberband(e)}onBlankClick(){this.clean()}allowRubberband(e,t){return!this.rubberbandDisabled&&dh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowRubberband(e)}allowMultipleSelection(e){return this.isMultiple()&&dh.isMatch(e,this.widgetOptions.multipleSelectionModifiers)}onCellMouseMove({cell:e}){this.movedMap.set(e,!0)}onCellMouseUp({e,cell:t}){const o=this.widgetOptions;let c=this.disabled;!c&&this.movedMap.has(t)&&(c=o.selectCellOnMoved===!1,c||(c=o.selectNodeOnMoved===!1&&t.isNode()),c||(c=o.selectEdgeOnMoved===!1&&t.isEdge())),c||(this.allowMultipleSelection(e)?this.unselectMap.has(t)?this.unselectMap.delete(t):this.isSelected(t)?this.unselect(t):this.select(t):this.reset(t)),this.movedMap.delete(t)}onBoxMouseDown({e,cell:t}){this.disabled||this.allowMultipleSelection(e)&&(this.unselect(t),this.unselectMap.set(t,!0))}isEmpty(){return this.length<=0}isSelected(e){return this.widget.isSelected(e)}getCells(e){return(Array.isArray(e)?e:[e]).map(t=>typeof t=="string"?this.graph.getCellById(t):t).filter(t=>t!=null)}select(e,t={}){const o=this.getCells(e);return o.length&&(this.isMultiple()?this.widget.select(o,t):this.reset(o.slice(0,1),t)),this}unselect(e,t={}){return this.widget.unselect(this.getCells(e),t),this}reset(e,t={}){return this.widget.reset(e?this.getCells(e):[],t),this}clean(e={}){return this.widget.clean(e),this}enable(){return this.disabled&&(this.widgetOptions.enabled=!0),this}disable(){return this.disabled||(this.widgetOptions.enabled=!1),this}startRubberband(e){return this.rubberbandDisabled||this.widget.startSelecting(e),this}enableRubberband(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this}isMultiple(){return this.widgetOptions.multiple!==!1}enableMultiple(){return this.widgetOptions.multiple=!0,this}disableMultiple(){return this.widgetOptions.multiple=!1,this}setModifiers(e){return this.widgetOptions.modifiers=e,this}setContent(e){return this.widget.setContent(e),this}setFilter(e){return this.widget.setFilter(e),this}dispose(){this.stopListening(),this.widget.dispose()}}q2([No.dispose()],fg.prototype,"dispose",null);var Dy=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},Ny=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t};class lf extends Cc{constructor(e){super(),this.batchCommands=null,this.batchLevel=0,this.lastBatchIndex=-1,this.freezed=!1,this.handlers=[],this.graph=e.graph,this.model=e.graph.model,this.options=_s.getOptions(e),this.validator=new lf.Validator({history:this,cancelInvalid:this.options.cancelInvalid}),this.clean(),this.startListening()}get disabled(){return this.options.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}undo(e={}){if(!this.disabled){const t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack.push(t),this.notify("undo",t,e))}return this}redo(e={}){if(!this.disabled){const t=this.redoStack.pop();t&&(this.applyCommand(t,e),this.undoStack.push(t),this.notify("redo",t,e))}return this}cancel(e={}){if(!this.disabled){const t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack=[],this.notify("cancel",t,e))}return this}clean(e={}){return this.undoStack=[],this.redoStack=[],this.notify("clean",null,e),this}canUndo(){return!this.disabled&&this.undoStack.length>0}canRedo(){return!this.disabled&&this.redoStack.length>0}validate(e,...t){return this.validator.validate(e,...t),this}dispose(){this.validator.dispose(),this.clean(),this.stopListening()}startListening(){this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach((e,t)=>{this.handlers[t]=this.addCommand.bind(this,e),this.model.on(e,this.handlers[t])}),this.validator.on("invalid",e=>this.trigger("invalid",e))}stopListening(){this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach((e,t)=>{this.model.off(e,this.handlers[t])}),this.handlers.length=0),this.validator.off("invalid")}createCommand(e){return{batch:e?e.batch:!1,data:{}}}revertCommand(e,t){this.freezed=!0;const o=Array.isArray(e)?_s.sortBatchCommands(e):[e];for(let c=o.length-1;c>=0;c-=1){const d=o[c],f=Object.assign(Object.assign({},t),ts(d.options,this.options.revertOptionsList||[]));this.executeCommand(d,!0,f)}this.freezed=!1}applyCommand(e,t){this.freezed=!0;const o=Array.isArray(e)?_s.sortBatchCommands(e):[e];for(let c=0;c<o.length;c+=1){const d=o[c],f=Object.assign(Object.assign({},t),ts(d.options,this.options.applyOptionsList||[]));this.executeCommand(d,!1,f)}this.freezed=!1}executeCommand(e,t,o){const c=this.model,d=c.getCell(e.data.id),f=e.event;if(_s.isAddEvent(f)&&t||_s.isRemoveEvent(f)&&!t)d.remove(o);else if(_s.isAddEvent(f)&&!t||_s.isRemoveEvent(f)&&t){const v=e.data;v.node?c.addNode(v.props,o):v.edge&&c.addEdge(v.props,o)}else if(_s.isChangeEvent(f)){const v=e.data,x=v.key;if(x){const w=t?v.prev[x]:v.next[x];d.prop(x,w,o)}}else{const v=this.options.executeCommand;v&&er(v,this,e,t,o)}}addCommand(e,t){if(this.freezed||this.disabled)return;const o=t,c=o.options||{};if(c.dryrun||_s.isAddEvent(e)&&this.options.ignoreAdd||_s.isRemoveEvent(e)&&this.options.ignoreRemove||_s.isChangeEvent(e)&&this.options.ignoreChange)return;const d=this.options.beforeAddCommand;if(d!=null&&er(d,this,e,t)===!1)return;e==="cell:change:*"&&(e=`cell:change:${o.key}`);const f=o.cell,v=wc.isModel(f);let x;if(this.batchCommands){x=this.batchCommands[Math.max(this.lastBatchIndex,0)];const _=v&&!x.modelChange||x.data.id!==f.id,A=x.event!==e;if(this.lastBatchIndex>=0&&(_||A)){const P=this.batchCommands.findIndex(V=>(v&&V.modelChange||V.data.id===f.id)&&V.event===e);P<0||_s.isAddEvent(e)||_s.isRemoveEvent(e)?x=this.createCommand({batch:!0}):(x=this.batchCommands[P],this.batchCommands.splice(P,1)),this.batchCommands.push(x),this.lastBatchIndex=this.batchCommands.length-1}}else x=this.createCommand({batch:!1});if(_s.isAddEvent(e)||_s.isRemoveEvent(e)){const _=x.data;return x.event=e,x.options=c,_.id=f.id,_.props=zo(f.toJSON()),f.isEdge()?_.edge=!0:f.isNode()&&(_.node=!0),this.push(x,c)}if(_s.isChangeEvent(e)){const _=t.key,A=x.data;return(!x.batch||!x.event)&&(x.event=e,x.options=c,A.key=_,A.prev==null&&(A.prev={}),A.prev[_]=Up(f.previous(_)),v?x.modelChange=!0:A.id=f.id),A.next==null&&(A.next={}),A.next[_]=Up(f.prop(_)),this.push(x,c)}const w=this.options.afterAddCommand;w&&er(w,this,e,t,x),this.push(x,c)}initBatchCommand(e){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}storeBatchCommand(e){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){const t=this.filterBatchCommand(this.batchCommands);t.length>0&&(this.redoStack=[],this.undoStack.push(t),this.notify("add",t,e)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}filterBatchCommand(e){let t=e.slice();const o=[];for(;t.length>0;){const c=t.shift(),d=c.event,f=c.data.id;if(d!=null&&(f!=null||c.modelChange)){if(_s.isAddEvent(d)){const v=t.findIndex(x=>_s.isRemoveEvent(x.event)&&x.data.id===f);if(v>=0){t=t.filter((x,w)=>v<w||x.data.id!==f);continue}}else if(_s.isRemoveEvent(d)){const v=t.findIndex(x=>_s.isAddEvent(x.event)&&x.data.id===f);if(v>=0){t.splice(v,1);continue}}else if(_s.isChangeEvent(d)){const v=c.data;if(Zc(v.prev,v.next))continue}o.push(c)}}return o}notify(e,t,o){const c=t==null?null:Array.isArray(t)?t:[t];this.emit(e,{cmds:c,options:o}),this.emit("change",{cmds:c,options:o})}push(e,t){this.redoStack=[],e.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:e,options:t})):(this.undoStack.push(e),this.notify("add",e,t))}}Dy([Cc.dispose()],lf.prototype,"dispose",null),function(l){class e extends Cc{constructor(o){super(),this.map={},this.command=o.history,this.cancelInvalid=o.cancelInvalid!==!1,this.command.on("add",this.onCommandAdded,this)}onCommandAdded({cmds:o}){return Array.isArray(o)?o.every(c=>this.isValidCommand(c)):this.isValidCommand(o)}isValidCommand(o){if(o.options&&o.options.validation===!1)return!0;const c=o.event&&this.map[o.event]||[];let d=null;return c.forEach(f=>{let v=0;const x=w=>{const _=f[v];v+=1;try{if(_)_(w,o,x);else{d=w;return}}catch(A){x(A)}};x(d)}),d?(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:d}),!1):!0}validate(o,...c){const d=Array.isArray(o)?o:o.split(/\s+/);return c.forEach(f=>{if(typeof f!="function")throw new Error(`${d.join(" ")} requires callback functions.`)}),d.forEach(f=>{this.map[f]==null&&(this.map[f]=[]),this.map[f].push(c)}),this}dispose(){this.command.off("add",this.onCommandAdded,this)}}Dy([Cc.dispose()],e.prototype,"dispose",null),l.Validator=e}(lf||(lf={}));var _s;(function(l){function e(f){return f==="cell:added"}l.isAddEvent=e;function t(f){return f==="cell:removed"}l.isRemoveEvent=t;function o(f){return f!=null&&f.startsWith("cell:change:")}l.isChangeEvent=o;function c(f){const{graph:v}=f,x=Ny(f,["graph"]),w=["cell:added","cell:removed","cell:change:*"],_=["batch:start","batch:stop"],A=f.eventNames?f.eventNames.filter(P=>!(l.isChangeEvent(P)||w.includes(P)||_.includes(P))):w;return Object.assign(Object.assign({},x),{eventNames:A,applyOptionsList:f.applyOptionsList||["propertyPath"],revertOptionsList:f.revertOptionsList||["propertyPath"]})}l.getOptions=c;function d(f){const v=[];for(let x=0,w=f.length;x<w;x+=1){const _=f[x];let A=null;if(l.isAddEvent(_.event)){const P=_.data.id;for(let V=0;V<x;V+=1)if(f[V].data.id===P){A=V;break}}A!==null?v.splice(A,0,_):v.push(_)}return v}l.sortBatchCommands=d})(_s||(_s={}));var J2=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Nv extends No{get widgetOptions(){return this.options.minimap}init(){this.widget=this.graph.hook.createMiniMap()}dispose(){this.widget&&this.widget.dispose()}}J2([No.dispose()],Nv.prototype,"dispose",null);var Q2=M(42441),e1=M.n(Q2),t1=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class uf extends tl{constructor(e){super(),this.options=e;const t=this.graph.scroller.widget;this.container=t?t.container:this.graph.container,e.global?this.target=document:(this.target=this.container,this.disabled||this.target.setAttribute("tabindex","-1"),this.graph.on("cell:mouseup",this.focus,this),this.graph.on("blank:mouseup",this.focus,this)),this.mousetrap=uf.createMousetrap(this)}get graph(){return this.options.graph}get disabled(){return this.options.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}on(e,t,o){this.mousetrap.bind(this.getKeys(e),t,o)}off(e,t){this.mousetrap.unbind(this.getKeys(e),t)}focus(e){if(this.isInputEvent(e.e))return;this.target.focus({preventScroll:!0})}getKeys(e){return(Array.isArray(e)?e:[e]).map(t=>this.formatkey(t))}formatkey(e){const t=e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),o=this.options.format;return o?er(o,this.graph,t):t}isGraphEvent(e){const t=e.srcElement||e.target,o=e.currentTarget;return t?t===this.target||o===this.target||t===document.body?!0:Um(this.container,t):!1}isInputEvent(e){const t=e.target,o=t&&t.tagName.toLowerCase();return["input","textarea"].includes(o)}isEnabledForEvent(e){const t=!this.disabled&&this.isGraphEvent(e),o=this.isInputEvent(e);if(t){const c=e.keyCode||e.which;if(o&&(c===8||c===46))return!1;if(this.options.guard)return er(this.options.guard,this.graph,e)}return t}dispose(){this.mousetrap.reset()}}t1([tl.dispose()],uf.prototype,"dispose",null),function(l){function e(t){const o=new(e1())(t.target),c=o.stopCallback;return o.stopCallback=(d,f,v)=>t.isEnabledForEvent(d)?c?c.call(o,d,f,v):!1:!0,o}l.createMousetrap=e}(uf||(uf={}));var n1=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Iv extends tl{constructor(e){super(),this.options=e,this.cumulatedFactor=1;const t=this.graph.scroller.widget;this.container=t?t.container:this.graph.container,this.target=this.options.global?document:this.container,this.mousewheelHandle=new O2(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.options.enabled&&this.enable(!0)}get graph(){return this.options.graph}get disabled(){return this.options.enabled!==!0}enable(e){(this.disabled||e)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(e){const t=e.originalEvent||e,o=this.options.guard;return(o==null||o.call(this.graph,t))&&dh.isMatch(t,this.options.modifiers)}onMouseWheel(e){const t=e.originalEvent||e,o=this.options.guard;if((o==null||o.call(this.graph,t))&&dh.isMatch(t,this.options.modifiers)){const c=this.options.factor||1.2;this.currentScale==null&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx),e.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*c*20)/20/this.currentScale:this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*(1/c)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const f=this.graph.scroller.widget,v=this.currentScale;let x=this.graph.transform.clampScale(v*this.cumulatedFactor);const w=this.options.minScale||Number.MIN_SAFE_INTEGER,_=this.options.maxScale||Number.MAX_SAFE_INTEGER;if(x=eu(x,w,_),x!==v)if(f)if(this.options.zoomAtMousePosition){const A=this.graph.coord.clientToLocalPoint(this.startPos);f.zoom(x,{absolute:!0,center:A.clone()})}else f.zoom(x,{absolute:!0});else if(this.options.zoomAtMousePosition){const A=this.graph.coord.clientToGraphPoint(this.startPos);this.graph.transform.zoom(x,{absolute:!0,center:A.clone(),ui:!0})}else this.graph.transform.zoom(x,{absolute:!0,ui:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}n1([tl.dispose()],Iv.prototype,"dispose",null);var r1=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class df extends No{show(e={}){const t=Object.assign(Object.assign({},df.defaultOptions),e),o=this.createPrintPages(t);t.ready(o,c=>this.showPrintWindow(c,t),{sheetSize:this.getSheetSize(t)})}get className(){return this.view.prefixClassName("graph-print")}showPrintWindow(e,t){if(e){const o=G()(document.body),c=G()(this.view.container),d=this.view.prefixClassName("graph-printing");o.addClass(d);const f=c.children().detach();e.forEach(w=>{w.removeClass(`${this.className}-preview`).addClass(`${this.className}-ready`).appendTo(o)});let v=!1;const x=()=>{v||(v=!0,o.removeClass(d),e.forEach(w=>w.remove()),c.append(f),G()(`#${this.styleSheetId}`).remove(),this.graph.trigger("after:print",t),G()(window).off("afterprint",x))};G()(window).one("afterprint",x),setTimeout(x,200),window.print()}}createPrintPage(e,t){this.graph.trigger("before:print",t);const o=G()("<div/>").addClass(this.className),c=G()("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");t.size&&o.addClass(`${this.className}-size-${t.size}`);const d=ir.create(this.view.svg).clone(),f=d.findOne(`.${this.view.prefixClassName("graph-svg-stage")}`);c.append(d.node);const v=this.getSheetSize(t),x=this.graph.transform.getGraphArea(),w=this.graph.transform.getScale(),_=this.graph.translate(),A=nc().translate(_.tx/w.sx,_.ty/w.sy),P=this.getPageInfo(x,e,v),V=P.scale,J=P.bbox;return c.css({left:0,top:0}),d.attr({width:J.width*V,height:J.height*V,style:"position:relative",viewBox:[J.x,J.y,J.width,J.height].join(" ")}),f.attr("transform",r0(A)),o.append(c),o.addClass(`${this.className}-preview`),{$page:o,sheetSize:v}}createPrintPages(e){let t;const o=this.getPrintArea(e),c=[];if(e.page){const d=this.getPageSize(o,e.page);this.getPageAreas(o,d).forEach(v=>{t=this.createPrintPage(v,e),c.push(t.$page)})}else t=this.createPrintPage(o,e),c.push(t.$page);if(t){const d={width:t.sheetSize.cssWidth,height:t.sheetSize.cssHeight};this.updatePrintStyle(d,e)}return c}get styleSheetId(){return this.view.prefixClassName("graph-print-style")}updatePrintStyle(e,t){const o=Object.keys(e).reduce((_,A)=>`${_} ${A}:${e[A]};`,""),c=xl(t.margin),d=t.marginUnit||"",f=t.sheetUnit||"",v=`
      @media print {
        .${this.className}.${this.className}-ready {
          ${o}
        }

        @page {
          margin:
          ${[c.top+d,c.right+d,c.bottom+d,c.left+d].join(" ")};
          size: ${t.sheet.width+f} ${t.sheet.height+f};

        .${this.className}.${this.className}-preview {
          ${o}
        }
      }`,x=this.styleSheetId,w=G()(`#${x}`);w.length?w.html(v):G()("head").append(`'<style type="text/css" id="${x}">${v}</style>'`)}getPrintArea(e){let t=e.area;if(!t){const o=xl(e.padding);t=this.graph.getContentArea().moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom})}return t}getPageSize(e,t){if(typeof t=="object"){const o=t,c={width:o.width,height:o.height};return c.width==null&&(c.width=Math.ceil(e.width/(o.columns||1))),c.height==null&&(c.height=Math.ceil(e.height/(o.rows||1))),c}return{width:e.width,height:e.height}}getPageAreas(e,t){const o=[],c=t.width,d=t.height;for(let f=0,v=0;f<e.height&&v<200;f+=d,v+=1)for(let x=0,w=0;x<e.width&&w<200;x+=c,w+=1)o.push(new Ln(e.x+x,e.y+f,c,d));return o}getSheetSize(e){const t=e.sheet,o=xl(e.margin),c=e.marginUnit||"",d=e.sheetUnit||"",f=`calc(${t.width}${d} - ${o.left+o.right}${c})`,v=`calc(${t.height}${d} - ${o.top+o.bottom}${c})`,x=uS.measure(f,v);return{cssWidth:f,cssHeight:v,width:x.width,height:x.height}}getPageInfo(e,t,o){const c=new Ln(t.x-e.x,t.y-e.y,t.width,t.height),d=c.width/c.height,f=o.width/o.height;return{bbox:c,scale:f<d?o.width/c.width:o.height/c.height,fitHorizontal:f<d}}dispose(){}}r1([No.dispose()],df.prototype,"dispose",null),function(l){l.defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:(e,t)=>t(e)}}(df||(df={}));class Iy extends No{toSVG(e,t={}){this.graph.trigger("before:export",t);const o=this.view.svg,c=ir.create(o).clone();let d=c.node;const f=c.findOne(`.${this.view.prefixClassName("graph-svg-stage")}`),v=t.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),x=t.preserveDimensions;if(x){const A=typeof x=="boolean"?v:x;c.attr({width:A.width,height:A.height})}if(c.removeAttribute("style").attr("viewBox",[v.x,v.y,v.width,v.height].join(" ")),f.removeAttribute("transform"),t.copyStyles!==!1){const A=o.ownerDocument,P=Array.from(o.querySelectorAll("*")),V=Array.from(d.querySelectorAll("*")),J=A.styleSheets.length,ee=[];for(let Re=J-1;Re>=0;Re-=1)ee[Re]=A.styleSheets[Re],A.styleSheets[Re].disabled=!0;const ge={};P.forEach((Re,_e)=>{const Ue=window.getComputedStyle(Re,null),Qe={};Object.keys(Ue).forEach(bt=>{Qe[bt]=Ue.getPropertyValue(bt)}),ge[_e]=Qe}),J!==A.styleSheets.length&&ee.forEach((Re,_e)=>{A.styleSheets[_e]=Re});for(let Re=0;Re<J;Re+=1)A.styleSheets[Re].disabled=!1;const Se={};P.forEach((Re,_e)=>{const Ue=window.getComputedStyle(Re,null),Qe=ge[_e],bt={};Object.keys(Ue).forEach(Pt=>{!HE(Pt)&&Ue.getPropertyValue(Pt)!==Qe[Pt]&&(bt[Pt]=Ue.getPropertyValue(Pt))}),Se[_e]=bt}),V.forEach((Re,_e)=>{G()(Re).css(Se[_e])})}const w=t.stylesheet;if(typeof w=="string"){const A=o.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(w);c.prepend(ir.create("style",{type:"text/css"},[A]))}const _=()=>{const A=t.beforeSerialize;if(typeof A=="function"){const V=er(A,this.graph,d);V instanceof SVGSVGElement&&(d=V)}const P=new XMLSerializer().serializeToString(d).replace(/&nbsp;/g,"\xA0");this.graph.trigger("after:export",t),e(P)};if(t.serializeImages){const A=c.find("image").map(P=>new Promise(V=>{const J=P.attr("xlink:href")||P.attr("href");lS.imageToDataUri(J,(ee,ge)=>{!ee&&ge&&P.attr("xlink:href",ge),V()})}));Promise.all(A).then(_)}else _()}toDataURL(e,t){let o=t.viewBox||this.graph.getContentBBox();const c=xl(t.padding);t.width&&t.height&&(c.left+c.right>=t.width&&(c.left=c.right=0),c.top+c.bottom>=t.height&&(c.top=c.bottom=0));const d=new Ln(-c.left,-c.top,c.left+c.right,c.top+c.bottom);if(t.width&&t.height){const _=o.width+c.left+c.right,A=o.height+c.top+c.bottom;d.scale(_/t.width,A/t.height)}o=Ln.create(o).moveAndExpand(d);const f=typeof t.width=="number"&&typeof t.height=="number"?{width:t.width,height:t.height}:o;let v=t.ratio?parseFloat(t.ratio):1;(!Number.isFinite(v)||v===0)&&(v=1);const x={width:Math.max(Math.round(f.width*v),1),height:Math.max(Math.round(f.height*v),1)};{const _=document.createElement("canvas"),A=_.getContext("2d");_.width=x.width,_.height=x.height;const P=x.width-1,V=x.height-1;A.fillStyle="rgb(1,1,1)",A.fillRect(P,V,1,1);const J=A.getImageData(P,V,1,1).data;if(J[0]!==1||J[1]!==1||J[2]!==1)throw new Error("size exceeded")}const w=new Image;w.onload=()=>{const _=document.createElement("canvas");_.width=x.width,_.height=x.height;const A=_.getContext("2d");A.fillStyle=t.backgroundColor||"white",A.fillRect(0,0,x.width,x.height);try{A.drawImage(w,0,0,x.width,x.height);const P=_.toDataURL(t.type,t.quality);e(P)}catch{}},this.toSVG(_=>{w.src=`data:image/svg+xml,${encodeURIComponent(_)}`},Object.assign(Object.assign({},t),{viewBox:o,serializeImages:!0,preserveDimensions:Object.assign({},x)}))}toPNG(e,t={}){this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/png"}))}toJPEG(e,t={}){this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/jpeg"}))}}class Ry extends No{constructor(){super(...arguments),this.widgets=new Map}get isSelectionEnabled(){return this.options.selecting.enabled===!0}init(){this.startListening()}startListening(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}stopListening(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}onNodeMouseUp({node:e}){if(!this.isSelectionEnabled){const t=this.graph.hook.createKnob(e,{clearAll:!0});t&&this.widgets.set(e,t)}}onNodeSelected({node:e}){if(this.isSelectionEnabled){const t=this.graph.hook.createKnob(e,{clearAll:!1});t&&this.widgets.set(e,t)}}onNodeUnSelected({node:e}){if(this.isSelectionEnabled){const t=this.widgets.get(e);t&&t.forEach(o=>o.dispose()),this.widgets.delete(e)}}}var i1=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Rv extends No{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&this.widgetOptions.enabled===!0}init(){this.startListening(),this.updateClassName()}startListening(){const e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.graph.container).on("mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new O2(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}stopListening(){const e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.graph.container).off("mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}preparePanning({e}){(this.allowPanning(e,!0)||this.allowPanning(e)&&!this.graph.selection.allowRubberband(e,!0))&&this.startPanning(e)}allowPanning(e,t){return this.pannable&&dh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}startPanning(e){const t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.view.normalizeEvent(e),o=t.clientX-this.clientX,c=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY;const d=this.graph.transform.getTranslation(),f=d.tx+o,v=d.ty+c;this.graph.transform.translate(f,v,{ui:!0})}stopPanning(e){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")}updateClassName(){const e=this.view.container,t=this.view.prefixClassName("graph-panning"),o=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(io(e,t),tu(e,o)):(tu(e,t),io(e,o)):(tu(e,t),tu(e,o))}onRightMouseDown(e){e.button===2&&this.allowPanning(e,!0)&&this.startPanning(e)}allowMouseWheel(e){return this.pannable&&!e.ctrlKey}onMouseWheel(e,t,o){e.ctrlKey||this.graph.translateBy(-t,-o)}autoPanning(e,t){const c=this.graph.getGraphArea();let d=0,f=0;e<=c.left+10&&(d=-10),t<=c.top+10&&(f=-10),e>=c.right-10&&(d=10),t>=c.bottom-10&&(f=10),(d!==0||f!==0)&&this.graph.translateBy(-d,-f)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}i1([No.dispose()],Rv.prototype,"dispose",null);var A3=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class _A extends No{hasScroller(){return this.graph.scroller.widget!=null}getContainer(){return this.hasScroller()?this.graph.scroller.widget.container:this.graph.container}init(){const e=this.options.autoResize;if(e){const t=typeof e=="boolean"?this.getContainer():e;ey.bind(t,()=>{const o=this.getContainer(),c=o.offsetWidth,d=o.offsetHeight;this.resize(c,d)})}}resize(e,t){this.hasScroller()?this.resizeScroller(e,t):this.resizeGraph(e,t)}resizeGraph(e,t){this.graph.transform.resize(e,t)}resizeScroller(e,t){this.graph.scroller.resize(e,t)}resizePage(e,t){const o=this.graph.scroller.widget;o&&o.updatePageSize(e,t)}dispose(){ey.clear(this.getContainer())}}A3([No.dispose()],_A.prototype,"dispose",null);var Si=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d},ky=function(l,e){var t={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&e.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(l);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(l,o[c])&&(t[o[c]]=l[o[c]]);return t},ei;(function(l){function e(o,c){return(d,f,v)=>{const x=v.value,w=c||f;v.value=function(..._){const A=this.options[w];if(A!=null){this.getNativeValue=x.bind(this,..._);const P=er(A,this.graph,..._);if(this.getNativeValue=null,P!=null||o===!0&&P===null)return P}return x.call(this,..._)}}}l.hook=e;function t(o){return(c,d,f)=>{const v=f.value,x=o||d;f.value=function(...w){let _=v.call(this,...w);const A=this.options[x];return A!=null&&(_=er(A,this.graph,...w)&&_),_}}}l.after=t})(ei||(ei={}));class bi extends No{createModel(){if(this.options.model)return this.options.model;const e=new wc;return e.graph=this.graph,e}createView(){return new uh(this.graph)}createRenderer(){return new Qi(this.graph)}createDefsManager(){return new Ay(this.graph)}createGridManager(){return new Ov(this.graph)}createCoordManager(){return new Pv(this.graph)}createKnobManager(){return new Ry(this.graph)}createTransform(e,t){const o=this.getTransformOptions(e);return o.resizable||o.rotatable?new EA(Object.assign(Object.assign({node:e,graph:this.graph},o),t)):(o.clearAll&&EA.removeInstances(this.graph),null)}createKnob(e,t){const o=cf.parseOptionGroup(this.graph,e,this.options.knob),c=Object.assign(Object.assign({},o),t);c.clearAll&&pw.removeInstances(this.graph),c.clearAll=!1;const d=e.prop("knob"),f=[];return(Array.isArray(d)?d:[d]).forEach((x,w)=>{if(x){if(x.enabled===!1||typeof x.enabled=="function"&&x.enabled.call(this.graph,e)===!1)return}else return;o.enabled&&f.push(new pw(Object.assign({node:e,index:w,graph:this.graph},c)))}),f}getTransformOptions(e){const t=cf.parseOptionGroup(this.graph,e,this.options.resizing),o=cf.parseOptionGroup(this.graph,e,this.options.rotating),c=cf.parseOptionGroup(this.graph,e,this.options.transforming);return Object.assign(Object.assign({},c),{resizable:t.enabled,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,orthogonalResizing:t.orthogonal,restrictedResizing:t.restrict!=null?t.restrict:t.restricted,autoScrollOnResizing:t.autoScroll,preserveAspectRatio:t.preserveAspectRatio,allowReverse:t.allowReverse,rotatable:o.enabled,rotateGrid:o.grid})}createTransformManager(){return new b0(this.graph)}createHighlightManager(){return new hg(this.graph)}createBackgroundManager(){return new X2(this.graph)}createClipboard(){return new kv}createClipboardManager(){return new Dv(this.graph)}createSnapline(){return new bA(Object.assign({graph:this.graph},this.options.snapline))}createSnaplineManager(){return new m0(this.graph)}createSelection(){return new gw(Object.assign({graph:this.graph},this.options.selecting))}createSelectionManager(){return new fg(this.graph)}allowRubberband(e){return!0}createHistoryManager(){return new lf(Object.assign({graph:this.graph},this.options.history))}createScroller(){return this.options.scroller.enabled?new v0(Object.assign({graph:this.graph},this.options.scroller)):null}createScrollerManager(){return new y0(this.graph)}allowPanning(e){return!0}createMiniMap(){const e=this.options.minimap,{enabled:t}=e,o=ky(e,["enabled"]);return t?new H2(Object.assign({graph:this.graph},o)):null}createMiniMapManager(){return new Nv(this.graph)}createKeyboard(){return new uf(Object.assign({graph:this.graph},this.options.keyboard))}createMouseWheel(){return new Iv(Object.assign({graph:this.graph},this.options.mousewheel))}createPrintManager(){return new df(this.graph)}createFormatManager(){return new Iy(this.graph)}createPanningManager(){return new Rv(this.graph)}createSizeManager(){return new _A(this.graph)}allowConnectToBlank(e){const t=this.options.connecting,o=t.allowBlank!=null?t.allowBlank:t.dangling;if(typeof o!="function")return!!o;const c=this.graph.findViewByCell(e),d=e.getSourceCell(),f=e.getTargetCell(),v=this.graph.findViewByCell(d),x=this.graph.findViewByCell(f);return er(o,this.graph,{edge:e,edgeView:c,sourceCell:d,targetCell:f,sourceView:v,targetView:x,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:c.sourceMagnet,targetMagnet:c.targetMagnet})}validateEdge(e,t,o){if(!this.allowConnectToBlank(e)){const d=e.getSourceCellId(),f=e.getTargetCellId();if(!(d&&f))return!1}const c=this.options.connecting.validateEdge;return c?er(c,this.graph,{edge:e,type:t,previous:o}):!0}validateMagnet(e,t,o){if(t.getAttribute("magnet")!=="passive"){const c=this.options.connecting.validateMagnet;return c?er(c,this.graph,{e:o,magnet:t,view:e,cell:e.cell}):!0}return!1}getDefaultEdge(e,t){let o;const c=this.options.connecting.createEdge;return c&&(o=er(c,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),o==null&&(o=new fw),o}validateConnection(e,t,o,c,d,f,v){const x=this.options.connecting,w=x.allowLoop,_=x.allowNode,A=x.allowEdge,P=x.allowPort,V=x.allowMulti!=null?x.allowMulti:x.multi,J=x.validateConnection,ee=f?f.cell:null,ge=d==="target"?o:e,Se=d==="target"?c:t;let Re=!0;const _e=Ue=>{const Qe=d==="source"?v?v.port:null:ee?ee.getSourcePortId():null,bt=d==="target"?v?v.port:null:ee?ee.getTargetPortId():null;return er(Ue,this.graph,{edge:ee,edgeView:f,sourceView:e,targetView:o,sourcePort:Qe,targetPort:bt,sourceMagnet:t,targetMagnet:c,sourceCell:e?e.cell:null,targetCell:o?o.cell:null,type:d})};if(w!=null&&(typeof w=="boolean"?!w&&e===o&&(Re=!1):Re=_e(w)),Re&&P!=null&&(typeof P=="boolean"?!P&&Se&&(Re=!1):Re=_e(P)),Re&&A!=null&&(typeof A=="boolean"?!A&&xd.isEdgeView(ge)&&(Re=!1):Re=_e(A)),Re&&_!=null&&Se==null&&(typeof _=="boolean"?!_&&Lc.isNodeView(ge)&&(Re=!1):Re=_e(_)),Re&&V!=null&&f){const Ue=f.cell,Qe=d==="source"?v:Ue.getSource(),bt=d==="target"?v:Ue.getTarget(),Pt=v?this.graph.getCellById(v.cell):null;if(Qe&&bt&&Qe.cell&&bt.cell&&Pt)if(typeof V=="function")Re=_e(V);else{const Kt=this.model.getConnectedEdges(Pt,{outgoing:d==="source",incoming:d==="target"});Kt.length&&(V==="withPort"?Kt.some(wn=>{const Sn=wn.getSource(),Vn=wn.getTarget();return Sn&&Vn&&Sn.cell===Qe.cell&&Vn.cell===bt.cell&&Sn.port!=null&&Sn.port===Qe.port&&Vn.port!=null&&Vn.port===bt.port})&&(Re=!1):V||Kt.some(wn=>{const Sn=wn.getSource(),Vn=wn.getTarget();return Sn&&Vn&&Sn.cell===Qe.cell&&Vn.cell===bt.cell})&&(Re=!1))}}return Re&&J!=null&&(Re=_e(J)),Re}getRestrictArea(e){const t=this.options.translating.restrict,o=typeof t=="function"?er(t,this.graph,e):t;return typeof o=="number"?this.graph.transform.getGraphArea().inflate(o):o===!0?this.graph.transform.getGraphArea():o||null}onViewUpdated(e,t,o){t&Qi.FLAG_INSERT||o.mounting||this.graph.renderer.requestConnectedEdgesUpdate(e,o)}onViewPostponed(e,t,o){return this.graph.renderer.forcePostponedViewUpdate(e,t)}getCellView(e){return null}createCellView(e){const t={graph:this.graph},o=this.getCellView(e);if(o)return new o(e,t);const c=e.view;if(c!=null&&typeof c=="string"){const d=Gs.registry.get(c);return d?new d(e,t):Gs.registry.onNotFound(c)}return e.isNode()?new Lc(e,t):e.isEdge()?new xd(e,t):null}getHTMLComponent(e){let t=e.getHTML();return typeof t=="string"&&(t=Nu.componentRegistry.get(t)||t),Do(t)&&(t=t.render),typeof t=="function"?er(t,this.graph,e):t}shouldUpdateHTMLComponent(e){let t=e.getHTML();if(typeof t=="string"&&(t=Nu.componentRegistry.get(t)||t),Do(t)){const o=t.shouldComponentUpdate;return typeof o=="function"?er(o,this.graph,e):!!o}return!1}onEdgeLabelRendered(e){}onPortRendered(e){}onToolItemCreated(e){}}Si([ei.hook()],bi.prototype,"createModel",null),Si([ei.hook()],bi.prototype,"createView",null),Si([ei.hook()],bi.prototype,"createRenderer",null),Si([ei.hook()],bi.prototype,"createDefsManager",null),Si([ei.hook()],bi.prototype,"createGridManager",null),Si([ei.hook()],bi.prototype,"createCoordManager",null),Si([ei.hook()],bi.prototype,"createKnobManager",null),Si([ei.hook()],bi.prototype,"createTransform",null),Si([ei.hook()],bi.prototype,"createKnob",null),Si([ei.hook()],bi.prototype,"createTransformManager",null),Si([ei.hook()],bi.prototype,"createHighlightManager",null),Si([ei.hook()],bi.prototype,"createBackgroundManager",null),Si([ei.hook()],bi.prototype,"createClipboard",null),Si([ei.hook()],bi.prototype,"createClipboardManager",null),Si([ei.hook()],bi.prototype,"createSnapline",null),Si([ei.hook()],bi.prototype,"createSnaplineManager",null),Si([ei.hook()],bi.prototype,"createSelection",null),Si([ei.hook()],bi.prototype,"createSelectionManager",null),Si([ei.hook()],bi.prototype,"allowRubberband",null),Si([ei.hook()],bi.prototype,"createHistoryManager",null),Si([ei.hook()],bi.prototype,"createScroller",null),Si([ei.hook()],bi.prototype,"createScrollerManager",null),Si([ei.hook()],bi.prototype,"allowPanning",null),Si([ei.hook()],bi.prototype,"createMiniMap",null),Si([ei.hook()],bi.prototype,"createMiniMapManager",null),Si([ei.hook()],bi.prototype,"createKeyboard",null),Si([ei.hook()],bi.prototype,"createMouseWheel",null),Si([ei.hook()],bi.prototype,"createPrintManager",null),Si([ei.hook()],bi.prototype,"createFormatManager",null),Si([ei.hook()],bi.prototype,"createPanningManager",null),Si([ei.hook()],bi.prototype,"createSizeManager",null),Si([ei.after()],bi.prototype,"onViewUpdated",null),Si([ei.after()],bi.prototype,"onViewPostponed",null),Si([ei.hook()],bi.prototype,"getCellView",null),Si([ei.hook(!0)],bi.prototype,"createCellView",null),Si([ei.hook()],bi.prototype,"getHTMLComponent",null),Si([ei.hook()],bi.prototype,"shouldUpdateHTMLComponent",null),Si([ei.hook()],bi.prototype,"onEdgeLabelRendered",null),Si([ei.hook()],bi.prototype,"onPortRendered",null),Si([ei.hook()],bi.prototype,"onToolItemCreated",null);var hh=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class so extends Cc{constructor(e){super(),this.options=cf.get(e),this.css=new sf(this),this.hook=new bi(this),this.view=this.hook.createView(),this.defs=this.hook.createDefsManager(),this.coord=this.hook.createCoordManager(),this.transform=this.hook.createTransformManager(),this.knob=this.hook.createKnobManager(),this.highlight=this.hook.createHighlightManager(),this.grid=this.hook.createGridManager(),this.background=this.hook.createBackgroundManager(),this.model=this.hook.createModel(),this.renderer=this.hook.createRenderer(),this.clipboard=this.hook.createClipboardManager(),this.snapline=this.hook.createSnaplineManager(),this.selection=this.hook.createSelectionManager(),this.history=this.hook.createHistoryManager(),this.scroller=this.hook.createScrollerManager(),this.minimap=this.hook.createMiniMapManager(),this.keyboard=this.hook.createKeyboard(),this.mousewheel=this.hook.createMouseWheel(),this.print=this.hook.createPrintManager(),this.format=this.hook.createFormatManager(),this.panning=this.hook.createPanningManager(),this.size=this.hook.createSizeManager()}get container(){return this.view.container}get[Symbol.toStringTag](){return so.toStringTag}isNode(e){return e.isNode()}isEdge(e){return e.isEdge()}resetCells(e,t={}){return this.model.resetCells(e,t),this}clearCells(e={}){return this.model.clear(e),this}toJSON(e={}){return this.model.toJSON(e)}parseJSON(e){return this.model.parseJSON(e)}fromJSON(e,t={}){return this.model.fromJSON(e,t),this}getCellById(e){return this.model.getCell(e)}addNode(e,t={}){return this.model.addNode(e,t)}addNodes(e,t={}){return this.addCell(e.map(o=>ys.isNode(o)?o:this.createNode(o)),t)}createNode(e){return this.model.createNode(e)}removeNode(e,t={}){return this.model.removeCell(e,t)}addEdge(e,t={}){return this.model.addEdge(e,t)}addEdges(e,t={}){return this.addCell(e.map(o=>os.isEdge(o)?o:this.createEdge(o)),t)}removeEdge(e,t={}){return this.model.removeCell(e,t)}createEdge(e){return this.model.createEdge(e)}addCell(e,t={}){return this.model.addCell(e,t),this}removeCell(e,t={}){return this.model.removeCell(e,t)}removeCells(e,t={}){return this.model.removeCells(e,t)}removeConnectedEdges(e,t={}){return this.model.removeConnectedEdges(e,t)}disconnectConnectedEdges(e,t={}){return this.model.disconnectConnectedEdges(e,t),this}hasCell(e){return this.model.has(e)}getCell(e){return this.model.getCell(e)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(e){return this.model.getOutgoingEdges(e)}getIncomingEdges(e){return this.model.getIncomingEdges(e)}getConnectedEdges(e,t={}){return this.model.getConnectedEdges(e,t)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(e){return this.model.isRoot(e)}isLeafNode(e){return this.model.isLeaf(e)}getNeighbors(e,t={}){return this.model.getNeighbors(e,t)}isNeighbor(e,t,o={}){return this.model.isNeighbor(e,t,o)}getSuccessors(e,t={}){return this.model.getSuccessors(e,t)}isSuccessor(e,t,o={}){return this.model.isSuccessor(e,t,o)}getPredecessors(e,t={}){return this.model.getPredecessors(e,t)}isPredecessor(e,t,o={}){return this.model.isPredecessor(e,t,o)}getCommonAncestor(...e){return this.model.getCommonAncestor(...e)}getSubGraph(e,t={}){return this.model.getSubGraph(e,t)}cloneSubGraph(e,t={}){return this.model.cloneSubGraph(e,t)}cloneCells(e){return this.model.cloneCells(e)}getNodesFromPoint(e,t){return this.model.getNodesFromPoint(e,t)}getNodesInArea(e,t,o,c,d){return this.model.getNodesInArea(e,t,o,c,d)}getNodesUnderNode(e,t={}){return this.model.getNodesUnderNode(e,t)}searchCell(e,t,o={}){return this.model.search(e,t,o),this}getShortestPath(e,t,o={}){return this.model.getShortestPath(e,t,o)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(e,t={}){return this.model.getCellsBBox(e,t)}startBatch(e,t={}){this.model.startBatch(e,t)}stopBatch(e,t={}){this.model.stopBatch(e,t)}batchUpdate(e,t,o){const c=typeof e=="string"?e:"update",d=typeof e=="string"?t:e,f=typeof t=="function"?o:t;this.startBatch(c,f);const v=d();return this.stopBatch(c,f),v}updateCellId(e,t){return this.model.updateCellId(e,t)}isFrozen(){return this.renderer.isFrozen()}freeze(e={}){return this.renderer.freeze(e),this}unfreeze(e={}){return this.renderer.unfreeze(e),this}isAsync(){return this.renderer.isAsync()}setAsync(e){return this.renderer.setAsync(e),this}findView(e){return ki.isCell(e)?this.findViewByCell(e):this.findViewByElem(e)}findViews(e){return Ln.isRectangleLike(e)?this.findViewsInArea(e):Ve.isPointLike(e)?this.findViewsFromPoint(e):[]}findViewByCell(e){return this.renderer.findViewByCell(e)}findViewByElem(e){return this.renderer.findViewByElem(e)}findViewsFromPoint(e,t){const o=typeof e=="number"?{x:e,y:t}:e;return this.renderer.findViewsFromPoint(o)}findViewsInArea(e,t,o,c,d){const f=typeof e=="number"?{x:e,y:t,width:o,height:c}:e,v=typeof e=="number"?d:t;return this.renderer.findViewsInArea(f,v)}isViewMounted(e){return this.renderer.isViewMounted(e)}getMountedViews(){return this.renderer.getMountedViews()}getUnmountedViews(){return this.renderer.getUnmountedViews()}matrix(e){return typeof e>"u"?this.transform.getMatrix():(this.transform.setMatrix(e),this)}resize(e,t){return this.size.resize(e,t),this}resizeGraph(e,t){return this.size.resizeGraph(e,t),this}resizeScroller(e,t){return this.size.resizeScroller(e,t),this}resizePage(e,t){return this.size.resizePage(e,t),this}scale(e,t=e,o=0,c=0){return typeof e>"u"?this.transform.getScale():(this.transform.scale(e,t,o,c),this)}zoom(e,t){const o=this.scroller.widget;if(o){if(typeof e>"u")return o.zoom();o.zoom(e,t)}else{if(typeof e>"u")return this.transform.getZoom();this.transform.zoom(e,t)}return this}zoomTo(e,t={}){const o=this.scroller.widget;return o?o.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})):this.transform.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})),this}zoomToRect(e,t={}){const o=this.scroller.widget;return o?o.zoomToRect(e,t):this.transform.zoomToRect(e,t),this}zoomToFit(e={}){const t=this.scroller.widget;return t?t.zoomToFit(e):this.transform.zoomToFit(e),this}rotate(e,t,o){return typeof e>"u"?this.transform.getRotation():(this.transform.rotate(e,t,o),this)}translate(e,t){return typeof e>"u"?this.transform.getTranslation():(this.transform.translate(e,t),this)}translateBy(e,t){const o=this.translate(),c=o.tx+e,d=o.ty+t;return this.translate(c,d)}getArea(){return this.transform.getGraphArea()}getGraphArea(){return this.transform.getGraphArea()}getContentArea(e={}){return this.transform.getContentArea(e)}getContentBBox(e={}){return this.transform.getContentBBox(e)}fitToContent(e,t,o,c){return this.transform.fitToContent(e,t,o,c)}scaleContentToFit(e={}){return this.transform.scaleContentToFit(e),this}center(e){return this.centerPoint(e)}centerPoint(e,t,o){const c=this.scroller.widget;return c?c.centerPoint(e,t,o):this.transform.centerPoint(e,t),this}centerContent(e){const t=this.scroller.widget;return t?t.centerContent(e):this.transform.centerContent(e),this}centerCell(e,t){const o=this.scroller.widget;return o?o.centerCell(e,t):this.transform.centerCell(e),this}positionPoint(e,t,o,c={}){const d=this.scroller.widget;return d?d.positionPoint(e,t,o,c):this.transform.positionPoint(e,t,o),this}positionRect(e,t,o){const c=this.scroller.widget;return c?c.positionRect(e,t,o):this.transform.positionRect(e,t),this}positionCell(e,t,o){const c=this.scroller.widget;return c?c.positionCell(e,t,o):this.transform.positionCell(e,t),this}positionContent(e,t){const o=this.scroller.widget;return o?o.positionContent(e,t):this.transform.positionContent(e,t),this}getClientMatrix(){return this.coord.getClientMatrix()}getClientOffset(){return this.coord.getClientOffset()}getPageOffset(){return this.coord.getPageOffset()}snapToGrid(e,t){return this.coord.snapToGrid(e,t)}pageToLocal(e,t,o,c){return Ln.isRectangleLike(e)?this.coord.pageToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.pageToLocalRect(e,t,o,c):this.coord.pageToLocalPoint(e,t)}localToPage(e,t,o,c){return Ln.isRectangleLike(e)?this.coord.localToPageRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.localToPageRect(e,t,o,c):this.coord.localToPagePoint(e,t)}clientToLocal(e,t,o,c){return Ln.isRectangleLike(e)?this.coord.clientToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.clientToLocalRect(e,t,o,c):this.coord.clientToLocalPoint(e,t)}localToClient(e,t,o,c){return Ln.isRectangleLike(e)?this.coord.localToClientRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.localToClientRect(e,t,o,c):this.coord.localToClientPoint(e,t)}localToGraph(e,t,o,c){return Ln.isRectangleLike(e)?this.coord.localToGraphRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.localToGraphRect(e,t,o,c):this.coord.localToGraphPoint(e,t)}graphToLocal(e,t,o,c){return Ln.isRectangleLike(e)?this.coord.graphToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.graphToLocalRect(e,t,o,c):this.coord.graphToLocalPoint(e,t)}clientToGraph(e,t,o,c){return Ln.isRectangleLike(e)?this.coord.clientToGraphRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof c=="number"?this.coord.clientToGraphRect(e,t,o,c):this.coord.clientToGraphPoint(e,t)}defineFilter(e){return this.defs.filter(e)}defineGradient(e){return this.defs.gradient(e)}defineMarker(e){return this.defs.marker(e)}getGridSize(){return this.grid.getGridSize()}setGridSize(e){return this.grid.setGridSize(e),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(e){return this.grid.draw(e),this}updateBackground(){return this.background.update(),this}drawBackground(e,t){const o=this.scroller.widget;return o!=null&&(this.options.background==null||!t)?o.backgroundManager.draw(e):this.background.draw(e),this}clearBackground(e){const t=this.scroller.widget;return t!=null&&(this.options.background==null||!e)?t.backgroundManager.clear():this.background.clear(),this}isClipboardEnabled(){return!this.clipboard.disabled}enableClipboard(){return this.clipboard.enable(),this}disableClipboard(){return this.clipboard.disable(),this}toggleClipboard(e){return e!=null?e!==this.isClipboardEnabled()&&(e?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this}isClipboardEmpty(){return this.clipboard.isEmpty()}getCellsInClipboard(){return this.clipboard.cells}cleanClipboard(){return this.clipboard.clean(),this}copy(e,t={}){return this.clipboard.copy(e,t),this}cut(e,t={}){return this.clipboard.cut(e,t),this}paste(e={},t=this){return this.clipboard.paste(e,t)}isHistoryEnabled(){return!this.history.disabled}enableHistory(){return this.history.enable(),this}disableHistory(){return this.history.disable(),this}toggleHistory(e){return e!=null?e!==this.isHistoryEnabled()&&(e?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this}undo(e={}){return this.history.undo(e),this}undoAndCancel(e={}){return this.history.cancel(e),this}redo(e={}){return this.history.redo(e),this}canUndo(){return this.history.canUndo()}canRedo(){return this.history.canRedo()}cleanHistory(e={}){this.history.clean(e)}isKeyboardEnabled(){return!this.keyboard.disabled}enableKeyboard(){return this.keyboard.enable(),this}disableKeyboard(){return this.keyboard.disable(),this}toggleKeyboard(e){return e!=null?e!==this.isKeyboardEnabled()&&(e?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this}bindKey(e,t,o){return this.keyboard.on(e,t,o),this}unbindKey(e,t){return this.keyboard.off(e,t),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(e){return e==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():e?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){return this.scroller.widget?this.scroller.pannable:this.panning.pannable}enablePanning(){return this.scroller.widget?this.scroller.enablePanning():this.panning.enablePanning(),this}disablePanning(){return this.scroller.widget?this.scroller.disablePanning():this.panning.disablePanning(),this}togglePanning(e){return e==null?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}lockScroller(){var e;(e=this.scroller.widget)===null||e===void 0||e.lock()}unlockScroller(){var e;(e=this.scroller.widget)===null||e===void 0||e.unlock()}updateScroller(){var e;(e=this.scroller.widget)===null||e===void 0||e.update()}getScrollbarPosition(){return this.scroller.widget.scrollbarPosition()}setScrollbarPosition(e,t,o){return this.scroller.widget.scrollbarPosition(e,t,o),this}scrollToPoint(e,t,o){return this.scroller.widget.scrollToPoint(e,t,o),this}scrollToContent(e){return this.scroller.widget.scrollToContent(e),this}scrollToCell(e,t){return this.scroller.widget.scrollToCell(e,t),this}transitionToPoint(e,t,o){return this.scroller.widget.transitionToPoint(e,t,o),this}transitionToRect(e,t={}){return this.scroller.widget.transitionToRect(e,t),this}isSelectionEnabled(){return!this.selection.disabled}enableSelection(){return this.selection.enable(),this}disableSelection(){return this.selection.disable(),this}toggleSelection(e){return e!=null?e!==this.isSelectionEnabled()&&(e?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this}isMultipleSelection(){return this.selection.isMultiple()}enableMultipleSelection(){return this.selection.enableMultiple(),this}disableMultipleSelection(){return this.selection.disableMultiple(),this}toggleMultipleSelection(e){return e!=null?e!==this.isMultipleSelection()&&(e?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return this.selection.widget.options.movable!==!1}enableSelectionMovable(){return this.selection.widget.options.movable=!0,this}disableSelectionMovable(){return this.selection.widget.options.movable=!1,this}toggleSelectionMovable(e){return e!=null?e!==this.isSelectionMovable()&&(e?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.selection.rubberbandDisabled}enableRubberband(){return this.selection.enableRubberband(),this}disableRubberband(){return this.selection.disableRubberband(),this}toggleRubberband(e){return e!=null?e!==this.isRubberbandEnabled()&&(e?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return this.selection.widget.options.strict===!0}enableStrictRubberband(){return this.selection.widget.options.strict=!0,this}disableStrictRubberband(){return this.selection.widget.options.strict=!1,this}toggleStrictRubberband(e){return e!=null?e!==this.isStrictRubberband()&&(e?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(e){this.selection.setModifiers(e)}setSelectionFilter(e){return this.selection.setFilter(e),this}setSelectionDisplayContent(e){return this.selection.setContent(e),this}isSelectionEmpty(){return this.selection.isEmpty()}cleanSelection(e){return this.selection.clean(e),this}resetSelection(e,t){return this.selection.reset(e,t),this}getSelectedCells(){return this.selection.cells}getSelectedCellCount(){return this.selection.length}isSelected(e){return this.selection.isSelected(e)}select(e,t){return this.selection.select(e,t),this}unselect(e,t){return this.selection.unselect(e,t),this}isSnaplineEnabled(){return!this.snapline.widget.disabled}enableSnapline(){return this.snapline.widget.enable(),this}disableSnapline(){return this.snapline.widget.disable(),this}toggleSnapline(e){if(e!=null)e!==this.isSnaplineEnabled()&&(e?this.enableSnapline():this.disableSnapline());else return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this}hideSnapline(){return this.snapline.widget.hide(),this}setSnaplineFilter(e){return this.snapline.widget.setFilter(e),this}isSnaplineOnResizingEnabled(){return this.snapline.widget.options.resizing===!0}enableSnaplineOnResizing(){return this.snapline.widget.options.resizing=!0,this}disableSnaplineOnResizing(){return this.snapline.widget.options.resizing=!1,this}toggleSnaplineOnResizing(e){return e!=null?e!==this.isSnaplineOnResizingEnabled()&&(e?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this}isSharpSnapline(){return this.snapline.widget.options.sharp===!0}enableSharpSnapline(){return this.snapline.widget.options.sharp=!0,this}disableSharpSnapline(){return this.snapline.widget.options.sharp=!1,this}toggleSharpSnapline(e){return e!=null?e!==this.isSharpSnapline()&&(e?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this}getSnaplineTolerance(){return this.snapline.widget.options.tolerance}setSnaplineTolerance(e){return this.snapline.widget.options.tolerance=e,this}removeTools(){return this.emit("tools:remove"),this}hideTools(){return this.emit("tools:hide"),this}showTools(){return this.emit("tools:show"),this}toSVG(e,t={}){this.format.toSVG(e,t)}toDataURL(e,t){this.format.toDataURL(e,t)}toPNG(e,t={}){this.format.toPNG(e,t)}toJPEG(e,t={}){this.format.toJPEG(e,t)}printPreview(e){this.print.show(e)}dispose(){this.clearCells(),this.off(),this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.knob.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose(),this.size.dispose()}}hh([ru.checkScroller()],so.prototype,"lockScroller",null),hh([ru.checkScroller()],so.prototype,"unlockScroller",null),hh([ru.checkScroller()],so.prototype,"updateScroller",null),hh([ru.checkScroller()],so.prototype,"getScrollbarPosition",null),hh([ru.checkScroller()],so.prototype,"setScrollbarPosition",null),hh([ru.checkScroller()],so.prototype,"scrollToPoint",null),hh([ru.checkScroller()],so.prototype,"scrollToContent",null),hh([ru.checkScroller()],so.prototype,"scrollToCell",null),hh([ru.checkScroller()],so.prototype,"transitionToPoint",null),hh([ru.checkScroller()],so.prototype,"transitionToRect",null),hh([Cc.dispose()],so.prototype,"dispose",null),function(l){l.View=uh,l.Hook=bi,l.Renderer=Qi,l.Keyboard=uf,l.MouseWheel=Iv,l.BaseManager=No,l.DefsManager=Ay,l.GridManager=Ov,l.CoordManager=Pv,l.PrintManager=df,l.FormatManager=Iy,l.MiniMapManager=Nv,l.HistoryManager=lf,l.SnaplineManager=m0,l.ScrollerManager=y0,l.ClipboardManager=Dv,l.TransformManager=b0,l.HighlightManager=hg,l.BackgroundManager=X2,l.SelectionManager=fg}(so||(so={})),function(l){l.toStringTag=`X6.${l.name}`;function e(t){if(t==null)return!1;if(t instanceof l)return!0;const o=t[Symbol.toStringTag],c=t;return(o==null||o===l.toStringTag)&&c.hook!=null&&c.view!=null&&c.model!=null}l.isGraph=e}(so||(so={})),function(l){function e(t,o){const c=t instanceof HTMLElement?new l({container:t}):new l(t);return o!=null&&c.fromJSON(o),c}l.render=e}(so||(so={})),function(l){l.registerNode=ys.registry.register,l.registerEdge=os.registry.register,l.registerView=Gs.registry.register,l.registerAttr=xc.registry.register,l.registerGrid=Ls.registry.register,l.registerFilter=Jh.registry.register,l.registerNodeTool=sg.registry.register,l.registerEdgeTool=ag.registry.register,l.registerBackground=ms.registry.register,l.registerHighlighter=Qh.registry.register,l.registerPortLayout=og.registry.register,l.registerPortLabelLayout=a0.registry.register,l.registerMarker=Yh.registry.register,l.registerRouter=rf.registry.register,l.registerConnector=dg.registry.register,l.registerAnchor=cg.registry.register,l.registerEdgeAnchor=lg.registry.register,l.registerConnectionPoint=d0.registry.register,l.registerConnectionStrategy=Du.registry.register,l.registerHTMLComponent=Nu.componentRegistry.register}(so||(so={})),function(l){l.unregisterNode=ys.registry.unregister,l.unregisterEdge=os.registry.unregister,l.unregisterView=Gs.registry.unregister,l.unregisterAttr=xc.registry.unregister,l.unregisterGrid=Ls.registry.unregister,l.unregisterFilter=Jh.registry.unregister,l.unregisterNodeTool=sg.registry.unregister,l.unregisterEdgeTool=ag.registry.unregister,l.unregisterBackground=ms.registry.unregister,l.unregisterHighlighter=Qh.registry.unregister,l.unregisterPortLayout=og.registry.unregister,l.unregisterPortLabelLayout=a0.registry.unregister,l.unregisterMarker=Yh.registry.unregister,l.unregisterRouter=rf.registry.unregister,l.unregisterConnector=dg.registry.unregister,l.unregisterAnchor=cg.registry.unregister,l.unregisterEdgeAnchor=lg.registry.unregister,l.unregisterConnectionPoint=d0.registry.unregister,l.unregisterConnectionStrategy=Du.registry.unregister,l.unregisterHTMLComponent=Nu.componentRegistry.unregister}(so||(so={}));class kv{constructor(){this.cells=[]}copy(e,t,o={}){this.options=Object.assign({},o);const d=(wc.isModel(t)?t:t.model).cloneSubGraph(e,o);this.cells=Lg(Object.keys(d).map(f=>d[f]),f=>f.isEdge()?2:1),this.serialize(o)}cut(e,t,o={}){this.copy(e,t,o),(so.isGraph(t)?t.model:t).batchUpdate("cut",()=>{e.forEach(d=>d.remove())})}paste(e,t={}){const o=Object.assign(Object.assign({},this.options),t),{offset:c,edgeProps:d,nodeProps:f}=o;let v=20,x=20;c&&(v=typeof c=="number"?c:c.dx,x=typeof c=="number"?c:c.dy),this.deserialize(o);const w=this.cells;w.forEach(A=>{A.model=null,A.removeProp("zIndex"),(v||x)&&A.translate(v,x),f&&A.isNode()&&A.prop(f),d&&A.isEdge()&&A.prop(d)});const _=so.isGraph(e)?e.model:e;return _.batchUpdate("paste",()=>{_.addCells(this.cells)}),this.copy(w,e,t),w}serialize(e){e.useLocalStorage!==!1&&sp.save(this.cells)}deserialize(e){if(e.useLocalStorage){const t=sp.fetch();t&&(this.cells=t)}}isEmpty(){return this.cells.length<=0}clean(){this.options={},this.cells=[],sp.clean()}}var sp;(function(l){const e=`${el.prefixCls}.clipboard.cells`;function t(d){if(window.localStorage){const f=d.map(v=>v.toJSON());localStorage.setItem(e,JSON.stringify(f))}}l.save=t;function o(){if(window.localStorage){const d=localStorage.getItem(e),f=d?JSON.parse(d):[];if(f)return wc.fromJSON(f)}}l.fetch=o;function c(){window.localStorage&&localStorage.removeItem(e)}l.clean=c})(sp||(sp={}));class o1{constructor(e){this.halo=e}get options(){return this.halo.options}get graph(){return this.halo.graph}get model(){return this.halo.model}get view(){return this.halo.view}get cell(){return this.halo.cell}get node(){return this.cell}getPresets(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox(e){return this.options.useCellGeometry?e.cell.getBBox():e.getBBox()},content(e){const t=Yg("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),o=e.cell,c=o.getBBox();return t({x:Math.floor(c.x),y:Math.floor(c.y),width:Math.floor(c.width),height:Math.floor(c.height),angle:Math.floor(o.getAngle())})},magnet(e){return e.container},tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}}removeCell(){this.model.removeConnectedEdges(this.cell),this.cell.remove()}startLink({x:e,y:t}){this.halo.startBatch();const o=this.graph,c=this.createEdgeConnectedToSource();c.setTarget({x:e,y:t}),this.model.addEdge(c,{validation:!1,halo:this.halo.cid,async:!1}),o.view.undelegateEvents(),this.edgeView=o.renderer.findViewByCell(c),this.edgeView.prepareArrowheadDragging("target",{x:e,y:t,fallbackAction:"remove"})}createEdgeConnectedToSource(){const e=this.getMagnet(this.view,"source"),t=this.getEdgeTerminal(this.view,e),o=this.graph.hook.getDefaultEdge(this.view,e);return o.setSource(t),o}getMagnet(e,t){const o=this.options.magnet;if(typeof o=="function"){const c=er(o,this.halo,e,t);if(c instanceof SVGElement)return c}throw new Error("`magnet()` has to return an SVGElement")}getEdgeTerminal(e,t){const o={cell:e.cell.id};if(t!==e.container){const c=t.getAttribute("port");c?o.port=c:o.selector=e.getSelector(t)}return o}doLink({e,x:t,y:o}){this.edgeView&&this.edgeView.onMouseMove(e,t,o)}stopLink({e,x:t,y:o}){const c=this.edgeView;if(c){c.onMouseUp(e,t,o);const d=c.cell;d.hasLoop()&&this.makeLoopEdge(d),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:d}),this.edgeView=null}this.graph.view.delegateEvents()}makeLoopEdge(e){let t=null,o=null;const c=this.options.loopEdgeWidth,d=this.graph.options,f=new Ln(0,0,d.width,d.height),v=this.graph.graphToLocal(this.view.getBBox());[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some(w=>{let _=null,A=0,P=0;switch(w){case"top":_=new Ve(v.x+v.width/2,v.y-c),A=c/2;break;case"bottom":_=new Ve(v.x+v.width/2,v.y+v.height+c),A=c/2;break;case"left":_=new Ve(v.x-c,v.y+v.height/2),P=c/2;break;case"right":_=new Ve(v.x+v.width+c,v.y+v.height/2),P=c/2;break;default:break}return _?(t=_.translate(-A,-P),o=_.translate(A,P),f.containsPoint(t)&&f.containsPoint(o)):!1})&&t&&o&&e.setVertices([t,o])}startResize({e}){this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(ji.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),Ha("node:resize",e,this.view)}doResize({e,dx:t,dy:o}){const c=this.node.getSize(),d=Math.max(c.width+(this.flip?t:o),1),f=Math.max(c.height+(this.flip?o:t),1);this.node.resize(d,f,{absolute:!0}),Ha("node:resizing",e,this.view)}stopResize({e}){this.view.removeClass("node-resizing"),Ha("node:resized",e,this.view),this.halo.stopBatch()}startClone({e,x:t,y:o}){this.halo.startBatch();const d=this.options.clone(this.cell,{clone:!0});if(!ki.isCell(d))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(d,t,o),this.model.addCell(d,{halo:this.halo.cid,async:!1});const f=this.graph.renderer.findViewByCell(d);f.onMouseDown(e,t,o),this.halo.setEventData(e,{cloneView:f})}centerNodeAtCursor(e,t,o){const c=e.getBBox().getCenter(),d=t-c.x,f=o-c.y;e.translate(d,f)}doClone({e,x:t,y:o}){const c=this.halo.getEventData(e).cloneView;c&&c.onMouseMove(e,t,o)}stopClone({e,x:t,y:o}){const c=this.halo.getEventData(e).cloneView;c&&c.onMouseUp(e,t,o),this.halo.stopBatch()}startFork({e,x:t,y:o}){this.halo.startBatch();const c=this.options.clone(this.cell,{fork:!0});if(!ki.isCell(c))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(c,t,o),this.model.addCell(c,{halo:this.halo.cid,async:!1});const d=this.createEdgeConnectedToSource(),f=this.graph.renderer.findViewByCell(c),v=this.getMagnet(f,"target"),x=this.getEdgeTerminal(f,v);d.setTarget(x),this.model.addEdge(d,{halo:this.halo.cid,async:!1}),f.onMouseDown(e,t,o),this.halo.setEventData(e,{cloneView:f})}doFork({e,x:t,y:o}){const c=this.halo.getEventData(e).cloneView;c&&c.onMouseMove(e,t,o)}stopFork({e,x:t,y:o}){const c=this.halo.getEventData(e).cloneView;c&&c.onMouseUp(e,t,o),this.halo.stopBatch()}startRotate({e,x:t,y:o}){this.halo.startBatch();const c=this.node.getBBox().getCenter(),d=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce((f,v)=>(v.isNode()&&f.push(v),f),d),this.halo.setEventData(e,{center:c,nodes:d,rotateStartAngles:d.map(f=>f.getAngle()),clientStartAngle:new Ve(t,o).theta(c)}),d.forEach(f=>{const v=this.graph.findViewByCell(f);v&&(v.addClass("node-rotating"),Ha("node:rotate",e,v))})}doRotate({e,x:t,y:o}){const c=this.halo.getEventData(e),d=c.clientStartAngle-new Ve(t,o).theta(c.center);c.nodes.forEach((f,v)=>{const x=c.rotateStartAngles[v],w=aa.snapToGrid(x+d,this.options.rotateGrid);f.rotate(w,{absolute:!0,center:c.center,halo:this.halo.cid}),Ha("node:rotating",e,this.graph.findViewByCell(f))})}stopRotate({e}){this.halo.getEventData(e).nodes.forEach(o=>{const c=this.graph.findViewByCell(o);c.removeClass("node-rotating"),Ha("node:rotated",e,c)}),this.halo.stopBatch()}unlink(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()}}class Ly{constructor(e){this.halo=e}get options(){return this.halo.options}get graph(){return this.halo.graph}get model(){return this.halo.model}get view(){return this.halo.view}get cell(){return this.halo.cell}get edge(){return this.cell}getPresets(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox(e){return e.graph.localToGraph(e.getPointAtRatio(.5))},tinyThreshold:-1,smallThreshold:-1}}removeEdge(){this.cell.remove()}directionSwap(){const e=this.edge.getSource(),t=this.edge.getTarget();this.edge.prop({source:t,target:e})}}class pg extends Tv{get type(){return this.options.type||"surround"}get handleOptions(){return this.options}init(e){this.options=Bo(pg.defaultOptions,this.cell.isNode()?new o1(this).getPresets():this.cell.isEdge()?new Ly(this).getPresets():null,e),this.render(),this.initHandles(),this.update(),this.startListening()}startListening(){const e=this.model,t=this.graph;this.view.cell.on("removed",this.remove,this),e.on("reseted",this.remove,this),t.on("halo:destroy",this.remove,this),e.on("*",this.update,this),t.on("scale",this.update,this),t.on("translate",this.update,this),super.startListening()}stopListening(){const e=this.model,t=this.graph,o=this.view.cell;this.undelegateEvents(),o.off("removed",this.remove,this),e.off("reseted",this.remove,this),t.off("halo:destroy",this.remove,this),e.off("*",this.update,this),t.off("scale",this.update,this),t.off("translate",this.update,this),super.stopListening()}render(){const e=this.options,t=this.prefixClassName("widget-halo");return this.view.addClass(gg.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(t).attr("data-shape",this.view.cell.shape),e.className&&this.$container.addClass(e.className),this.$handleContainer=this.$("<div/>").addClass(`${t}-handles`).appendTo(this.container),this.$content=this.$("<div/>").addClass(`${t}-content`).appendTo(this.container),this.$container.appendTo(this.graph.container),this}remove(){return this.stopBatch(),this.view.removeClass(gg.NODE_CLS),super.remove()}update(){if(this.isRendered()){this.updateContent();const e=this.getBBox(),t=this.options.tinyThreshold||0,o=this.options.smallThreshold||0;this.$handleContainer.toggleClass(`${this.handleClassName}-tiny`,e.width<t&&e.height<t);const c=`${this.handleClassName}-small`;this.$handleContainer.toggleClass(c,!this.$handleContainer.hasClass(c)&&e.width<o&&e.height<o),this.$container.css({width:e.width,height:e.height,left:e.x,top:e.y}),this.hasHandle("unlink")&&this.toggleUnlink(),(this.type==="surround"||this.type==="toolbar")&&this.hasHandle("fork")&&this.toggleFork()}}updateContent(){const e=this.options.content;if(typeof e=="function"){const t=er(e,this,this.view,this.$content[0]);t&&this.$content.html(t)}else e?this.$content.html(e):this.$content.remove()}getBBox(){const e=this.view,t=this.options.bbox,o=typeof t=="function"?er(t,this,e):t;return Ln.create(Object.assign({x:0,y:0,width:1,height:1},o))}removeCell(){this.cell.remove()}toggleFork(){const e=this.view.cell.clone(),t=this.graph.hook.createCellView(e),o=this.graph.hook.validateConnection(this.view,null,t,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!o),t.remove()}toggleUnlink(){const e=this.model.getConnectedEdges(this.view.cell).length>0;this.$handleContainer.children(".unlink").toggleClass("hidden",!e)}startBatch(){this.model.startBatch("halo",{halo:this.cid})}stopBatch(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})}}(function(l){l.defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:e=>e.clone().removeZIndex()}})(pg||(pg={})),Object.getOwnPropertyNames(Cd.prototype).forEach(l=>{l!=="constructor"&&Object.defineProperty(pg.prototype,l,Object.getOwnPropertyDescriptor(Cd.prototype,l))});var gg;(function(l){l.NODE_CLS="has-widget-halo"})(gg||(gg={}));var s1=function(l,e,t,o){var c=arguments.length,d=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,e,t,o);else for(var v=l.length-1;v>=0;v--)(f=l[v])&&(d=(c<3?f(d):c>3?f(e,t,d):f(e,t))||d);return c>3&&d&&Object.defineProperty(e,t,d),d};class Iu extends Di{constructor(e){super(),this.options=Object.assign(Object.assign({},Iu.defaults),e),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName("widget-dnd")),this.draggingGraph=new so(Object.assign(Object.assign({},this.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),this.$container.append(this.draggingGraph.container)}get targetScroller(){const e=this.options.target;return so.isGraph(e)?e.scroller.widget:e}get targetGraph(){const e=this.options.target;return so.isGraph(e)?e:e.graph}get targetModel(){return this.targetGraph.model}get snapline(){return this.targetGraph.snapline.widget}start(e,t){const o=t;o.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(this.options.containerParent||document.body),this.sourceNode=e,this.prepareDragging(e,o.clientX,o.clientY);const c=this.updateNodePosition(o.clientX,o.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:o,node:e,cell:e,view:this.draggingView,x:c.x,y:c.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(Iu.documentEvents,o.data)}isSnaplineEnabled(){return this.snapline&&!this.snapline.disabled}prepareDragging(e,t,o){const c=this.draggingGraph,d=c.model,f=this.options.getDragNode(e,{sourceNode:e,draggingGraph:c,targetGraph:this.targetGraph});f.position(0,0);let v=5;if(this.isSnaplineEnabled()&&(v+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){const _=this.targetGraph.transform.getScale();c.scale(_.sx,_.sy),v*=Math.max(_.sx,_.sy)}else c.scale(1,1);this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),d.resetCells([f]);const x=c.findViewByCell(f);x.undelegateEvents(),x.cell.off("changed"),c.fitToContent({padding:v,allowNewOrigin:"any"});const w=x.getBBox();this.geometryBBox=x.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(w.getTopLeft()),this.draggingNode=f,this.draggingView=x,this.draggingBBox=f.getBBox(),this.padding=v,this.originOffset=this.updateGraphPosition(t,o)}updateGraphPosition(e,t){const o=document.body.scrollTop||document.documentElement.scrollTop,c=this.delta,d=this.geometryBBox,f=this.padding||5,v={left:e-c.x-d.width/2-f,top:t-c.y-d.height/2-f+o};return this.draggingGraph&&this.$container.offset(v),v}updateNodePosition(e,t){const o=this.targetGraph.clientToLocal(e,t),c=this.draggingBBox;return o.x-=c.width/2,o.y-=c.height/2,this.draggingNode.position(o.x,o.y),o}snap({cell:e,current:t,options:o}){const c=e;if(o.snapped){const d=this.draggingBBox;c.position(d.x+o.tx,d.y+o.ty,{silent:!0}),this.draggingView.translate(),c.position(t.x,t.y,{silent:!0}),this.snapOffset={x:o.tx,y:o.ty}}else this.snapOffset=null}onDragging(e){const t=this.draggingView;if(t){e.preventDefault();const o=this.normalizeEvent(e),c=o.clientX,d=o.clientY;this.updateGraphPosition(c,d);const f=this.updateNodePosition(c,d),v=this.targetGraph.options.embedding.enabled,x=(v||this.isSnaplineEnabled())&&this.isInsideValidArea({x:c,y:d});if(v){t.setEventData(o,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});const w=t.getEventData(o);x?t.processEmbedding(o,w):t.clearEmbedding(w),this.candidateEmbedView=w.candidateEmbedView}this.isSnaplineEnabled()&&(x?this.snapline.snapOnMoving({e:o,view:t,x:f.x,y:f.y}):this.snapline.hide())}}onDragEnd(e){const t=this.draggingNode;if(t){const o=this.normalizeEvent(e),c=this.draggingView,d=this.draggingBBox,f=this.snapOffset;let v=d.x,x=d.y;f&&(v+=f.x,x+=f.y),t.position(v,x,{silent:!0});const w=this.drop(t,{x:o.clientX,y:o.clientY}),_=A=>{A?(this.onDropped(t),this.targetGraph.options.embedding.enabled&&c&&(c.setEventData(o,{cell:A,graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView}),c.finalizeEmbedding(o,c.getEventData(o)))):this.onDropInvalid(),this.candidateEmbedView=null,this.targetModel.stopBatch("dnd")};Lm(w)?(this.undelegateDocumentEvents(),w.then(_)):_(w)}}clearDragging(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}onDropped(e){this.draggingNode===e&&(this.clearDragging(),this.$container.removeClass("dragging").remove())}onDropInvalid(){const e=this.draggingNode;if(e){const t=this.options.animation;if(t){const o=typeof t=="object"&&t.duration||150,c=typeof t=="object"&&t.easing||"swing";this.draggingView=null,this.$container.animate(this.originOffset,o,c,()=>this.onDropped(e))}else this.onDropped(e)}}isInsideValidArea(e){let t;const o=this.targetGraph,c=this.targetScroller;if(c)if(c.options.autoResize)t=this.getDropArea(c.container);else{const d=this.getDropArea(c.container);t=this.getDropArea(o.container).intersectsWithRect(d)}else t=this.getDropArea(o.container);return t&&t.containsPoint(e)}getDropArea(e){const t=this.$(e),o=t.offset(),c=document.body.scrollTop||document.documentElement.scrollTop,d=document.body.scrollLeft||document.documentElement.scrollLeft;return Ln.create({x:o.left+parseInt(t.css("border-left-width"),10)-d,y:o.top+parseInt(t.css("border-top-width"),10)-c,width:t.innerWidth(),height:t.innerHeight()})}drop(e,t){if(this.isInsideValidArea(t)){const o=this.targetGraph,c=o.model,d=o.clientToLocal(t),f=this.sourceNode,v=this.options.getDropNode(e,{sourceNode:f,draggingNode:e,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),x=v.getBBox();d.x+=x.x-x.width/2,d.y+=x.y-x.height/2;const w=this.snapOffset?1:o.getGridSize();v.position(aa.snapToGrid(d.x,w),aa.snapToGrid(d.y,w)),v.removeZIndex();const _=this.options.validateNode,A=_?_(v,{sourceNode:f,draggingNode:e,droppingNode:v,targetGraph:o,draggingGraph:this.draggingGraph}):!0;return typeof A=="boolean"?A?(c.addCell(v,{stencil:this.cid}),v):null:o2(A).then(P=>P?(c.addCell(v,{stencil:this.cid}),v):null)}return null}onRemove(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}dispose(){this.remove()}}s1([Di.dispose()],Iu.prototype,"dispose",null),function(l){l.defaults={animation:!1,getDragNode:e=>e.clone(),getDropNode:e=>e.clone()},l.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(Iu||(Iu={}));function T3(l,e={}){const t=wc.isModel(l)?l:new wc().resetCells(l,{sort:!1,dryrun:!0}),o=t.getNodes(),c=e.columns||1,d=Math.ceil(o.length/c),f=e.dx||0,v=e.dy||0,x=e.center!==!1,w=e.resizeToFit===!0,_=e.marginX||0,A=e.marginY||0,P=[];let V=e.columnWidth;if(V==="compact")for(let Re=0;Re<c;Re+=1){const _e=hf.getNodesInColumn(o,Re,c);P.push(hf.getMaxDim(_e,"width")+f)}else{(V==null||V==="auto")&&(V=hf.getMaxDim(o,"width")+f);for(let Re=0;Re<c;Re+=1)P.push(V)}const J=hf.accumulate(P,_),ee=[];let ge=e.rowHeight;if(ge==="compact")for(let Re=0;Re<d;Re+=1){const _e=hf.getNodesInRow(o,Re,c);ee.push(hf.getMaxDim(_e,"height")+v)}else{(ge==null||ge==="auto")&&(ge=hf.getMaxDim(o,"height")+v);for(let Re=0;Re<d;Re+=1)ee.push(ge)}const Se=hf.accumulate(ee,A);t.startBatch("layout"),o.forEach((Re,_e)=>{const Ue=_e%c,Qe=Math.floor(_e/c),bt=P[Ue],Pt=ee[Qe];let Kt=0,kn=0,wn=Re.getSize();if(w){let Sn=bt-2*f,Vn=Pt-2*v;const Ur=wn.height*(wn.width?Sn/wn.width:1),Wr=wn.width*(wn.height?Vn/wn.height:1);Pt<Ur?Sn=Wr:Vn=Ur,wn={width:Sn,height:Vn},Re.setSize(wn,e)}x&&(Kt=(bt-wn.width)/2,kn=(Pt-wn.height)/2),Re.position(J[Ue]+f+Kt,Se[Qe]+v+kn,e)}),t.stopBatch("layout")}var hf;(function(l){function e(d,f){return d.reduce((v,x)=>Math.max(x.getSize()[f],v),0)}l.getMaxDim=e;function t(d,f,v){const x=[];for(let w=v*f,_=w+v;w<_;w+=1)x.push(d[w]);return x}l.getNodesInRow=t;function o(d,f,v){const x=[];for(let w=f,_=d.length;w<_;w+=v)x.push(d[w]);return x}l.getNodesInColumn=o;function c(d,f){return d.reduce((v,x,w)=>(v.push(v[w]+x),v),[f||0])}l.accumulate=c})(hf||(hf={}));class ap extends Di{constructor(e){super(),this.graphs={},this.$groups={},this.options=Object.assign(Object.assign({},ap.defaultOptions),e),this.dnd=new Iu(this.options),this.onSearch=i2(this.onSearch,200),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(Gc.base)).attr("data-not-found-text",this.options.notFoundText||"No matches found"),this.options.collapsable=e.collapsable&&e.groups&&e.groups.some(o=>o.collapsable!==!1),this.options.collapsable&&(this.$container.addClass("collapsable"),e.groups&&e.groups.every(c=>c.collapsed||c.collapsable===!1)&&this.$container.addClass("collapsed")),this.$("<div/>").addClass(this.prefixClassName(Gc.title)).html(this.options.title).appendTo(this.$container),e.search&&this.$container.addClass("searchable").append(this.renderSearch()),this.$content=this.$("<div/>").addClass(this.prefixClassName(Gc.content)).appendTo(this.$container);const t=e.stencilGraphOptions||{};if(e.groups&&e.groups.length)e.groups.forEach(o=>{const c=this.$("<div/>").addClass(this.prefixClassName(Gc.group)).attr("data-name",o.name);(o.collapsable==null&&e.collapsable||o.collapsable!==!1)&&c.addClass("collapsable"),c.toggleClass("collapsed",o.collapsed===!0);const d=this.$("<h3/>").addClass(this.prefixClassName(Gc.groupTitle)).html(o.title||o.name),f=this.$("<div/>").addClass(this.prefixClassName(Gc.groupContent)),v=o.graphOptions,x=new so(Object.assign(Object.assign(Object.assign({},t),v),{container:document.createElement("div"),model:t.model||new wc,width:o.graphWidth||e.stencilGraphWidth,height:o.graphHeight||e.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));f.append(x.container),c.append(d,f).appendTo(this.$content),this.$groups[o.name]=c,this.graphs[o.name]=x});else{const o=new so(Object.assign(Object.assign({},t),{container:document.createElement("div"),model:t.model||new wc,width:e.stencilGraphWidth,height:e.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));this.$content.append(o.container),this.graphs[vg.defaultGroupName]=o}return this.startListening(),this}get targetScroller(){const e=this.options.target;return so.isGraph(e)?e.scroller.widget:e}get targetGraph(){const e=this.options.target;return so.isGraph(e)?e:e.graph}get targetModel(){return this.targetGraph.model}renderSearch(){return this.$("<div/>").addClass(this.prefixClassName(Gc.search)).append(this.$("<input/>").attr({type:"search",placeholder:this.options.placeholder||"Search"}).addClass(this.prefixClassName(Gc.searchText)))}startListening(){const e=this.prefixClassName(Gc.title),t=this.prefixClassName(Gc.searchText),o=this.prefixClassName(Gc.groupTitle);this.delegateEvents({[`click .${e}`]:"onTitleClick",[`touchstart .${e}`]:"onTitleClick",[`click .${o}`]:"onGroupTitleClick",[`touchstart .${o}`]:"onGroupTitleClick",[`input .${t}`]:"onSearch",[`focusin .${t}`]:"onSearchFocusIn",[`focusout .${t}`]:"onSearchFocusOut"}),Object.keys(this.graphs).forEach(c=>{this.graphs[c].on("cell:mousedown",this.onDragStart,this)})}stopListening(){this.undelegateEvents(),Object.keys(this.graphs).forEach(e=>{this.graphs[e].off("cell:mousedown",this.onDragStart,this)})}load(e,t){return Array.isArray(e)?this.loadGroup(e,t):this.options.groups&&Object.keys(this.options.groups).forEach(o=>{e[o]&&this.loadGroup(e[o],o)}),this}loadGroup(e,t){const o=this.getModel(t);if(o){const v=e.map(x=>ys.isNode(x)?x:ys.create(x));o.resetCells(v)}const c=this.getGroup(t);let d=this.options.stencilGraphHeight;c&&c.graphHeight!=null&&(d=c.graphHeight);const f=c&&c.layout||this.options.layout;if(f&&o&&er(f,this,o,c),!d){const v=this.getGraph(t);v.fitToContent({minWidth:v.options.width,gridHeight:1,padding:c&&c.graphPadding||this.options.stencilGraphPadding||10})}return this}onDragStart(e){const{e:t,node:o}=e;this.dnd.start(o,t)}filter(e,t){const o=Object.keys(this.graphs).reduce((c,d)=>{const f=this.graphs[d],v=d===vg.defaultGroupName?null:d,x=f.model.getNodes().filter(P=>{let V=!1;typeof t=="function"?V=er(t,this,P,e,v,this):typeof t=="boolean"?V=t:V=this.isCellMatched(P,e,t,e.toLowerCase()!==e);const J=f.renderer.findViewByCell(P);return J&&J.$(J.container).toggleClass("unmatched",!V),V}),w=x.length>0,_=this.options,A=new wc;return A.resetCells(x),_.layout&&er(_.layout,this,A,this.getGroup(d)),this.$groups[d]&&this.$groups[d].toggleClass("unmatched",!w),f.fitToContent({gridWidth:1,gridHeight:1,padding:_.stencilGraphPadding||10}),c||w},!1);this.$container.toggleClass("not-found",!o)}isCellMatched(e,t,o,c){return t&&o?Object.keys(o).some(d=>{if(d==="*"||e.shape===d){const f=o[d];return typeof f=="boolean"?f:(Array.isArray(f)?f:[f]).some(x=>{let w=e.getPropByPath(x);return w!=null?(w=`${w}`,c||(w=w.toLowerCase()),w.indexOf(t)>=0):!1})}return!1}):!0}onSearch(e){this.filter(e.target.value,this.options.search)}onSearchFocusIn(){this.$container.addClass("is-focused")}onSearchFocusOut(){this.$container.removeClass("is-focused")}onTitleClick(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())}onGroupTitleClick(e){const t=this.$(e.target).closest(`.${this.prefixClassName(Gc.group)}`);this.toggleGroup(t.attr("data-name")||"");const o=Object.keys(this.$groups).every(c=>{const d=this.getGroup(c),f=this.$groups[c];return d&&d.collapsable===!1||f.hasClass("collapsed")});this.$container.toggleClass("collapsed",o)}getModel(e){const t=this.getGraph(e);return t?t.model:null}getGraph(e){return this.graphs[e||vg.defaultGroupName]}getGroup(e){const t=this.options.groups;return e!=null&&t&&t.length?t.find(o=>o.name===e):null}toggleGroup(e){return this.isGroupCollapsed(e)?this.expandGroup(e):this.collapseGroup(e),this}collapseGroup(e){if(this.isGroupCollapsable(e)){const t=this.$groups[e];t&&!this.isGroupCollapsed(e)&&(this.trigger("group:collapse",{name:e}),t.addClass("collapsed"))}return this}expandGroup(e){if(this.isGroupCollapsable(e)){const t=this.$groups[e];t&&this.isGroupCollapsed(e)&&(this.trigger("group:expand",{name:e}),t.removeClass("collapsed"))}return this}isGroupCollapsable(e){return this.$groups[e].hasClass("collapsable")}isGroupCollapsed(e){const t=this.$groups[e];return t&&t.hasClass("collapsed")}collapseGroups(){return Object.keys(this.$groups).forEach(e=>this.collapseGroup(e)),this}expandGroups(){return Object.keys(this.$groups).forEach(e=>this.expandGroup(e)),this}resizeGroup(e,t){const o=this.graphs[e];return o&&o.resize(t.width,t.height),this}onRemove(){Object.keys(this.graphs).forEach(e=>{this.graphs[e].view.remove(),delete this.graphs[e]}),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}}(function(l){l.defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout(e,t){const o={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};T3(e,Object.assign(Object.assign(Object.assign({},o),this.options.layoutOptions),t?t.layoutOptions:{}))}},Iu.defaults)})(ap||(ap={}));var Gc;(function(l){l.base="widget-stencil",l.title=`${l.base}-title`,l.search=`${l.base}-search`,l.searchText=`${l.search}-text`,l.content=`${l.base}-content`,l.group=`${l.base}-group`,l.groupTitle=`${l.group}-title`,l.groupContent=`${l.group}-content`})(Gc||(Gc={}));var vg;(function(l){l.defaultGroupName="__default__"})(vg||(vg={}));const a1="1.32.12-beta";function c1(){if(el.trackable){const l="https://kcart.alipay.com/web/bi.do",e=new Image,t=Object.assign(Object.assign({},el.trackInfo),{version:a1,pg:document.URL,r:new Date().getTime(),x6:!0,page_type:"syslog"}),o=encodeURIComponent(JSON.stringify([t]));e.src=`${l}?BIProfile=merge&d=${o}`}}el.trackable&&setTimeout(c1,3e3)},59070:function(Ne,L,M){"use strict";M.d(L,{g8:function(){return PN},w5:function(){return sN},It:function(){return KN},XS:function(){return nN},xZ:function(){return QP},ce:function(){return oR},BH:function(){return Qn},K4:function(){return un},Gn:function(){return zv},KV:function(){return pi},ko:function(){return bg},Ip:function(){return nR},G7:function(){return YD},dX:function(){return R},Nf:function(){return j},UI:function(){return Ur},zl:function(){return OI},Ak:function(){return xi},yc:function(){return pf},g:function(){return kr},n1:function(){return hl},ho:function(){return GA},$b:function(){return uo},Gv:function(){return ti},dV:function(){return Ms},cE:function(){return $i},s4:function(){return ge},Kd:function(){return DN},vD:function(){return Ap},zg:function(){return KD},HJ:function(){return Op},iR:function(){return eD},XZ:function(){return Yo},k$:function(){return Sc}});var j={};M.r(j),M.d(j,{Container:function(){return Ir},Contribution:function(){return Hi},DefaultContributionProvider:function(){return eo},GlobalContainer:function(){return Oi},Module:function(){return Zo},OptionSymbol:function(){return Zi},Provider:function(){return Kr},Syringe:function(){return pe},SyringeModule:function(){return bs},Utils:function(){return Ae},contrib:function(){return oi},decorate:function(){return z.GW},inject:function(){return on},injectable:function(){return jt},named:function(){return lo},optional:function(){return z.jt},postConstruct:function(){return z.zY},register:function(){return Bi},registerSideOption:function(){return Xn},singleton:function(){return cn},transient:function(){return qn},unmanaged:function(){return z.NT}});var R={};M.r(R),M.d(R,{COMMAND_GLOBALS:function(){return ya},COMMAND_REDOABLE:function(){return od},COMMAND_UNDOABLE:function(){return Hc},CONTEXTMENU_EDGE:function(){return Dg},CONTEXTMENU_NODE:function(){return fc},CONTEXTMENU_TARGET:function(){return jc},GRAPH_ENABLE_MULTI_SELECT:function(){return Oh},GRAPH_FULLSCREEN:function(){return hc},GRAPH_META:function(){return id},GRAPH_SCALE:function(){return $s},HISTORY_REDOABLE:function(){return Ud},HISTORY_UNDOABLE:function(){return zd},IS_GROUP_SELECTED:function(){return Tp},IS_NODE_SELECTED:function(){return Of},IS_NORMAL_NODES_SELECTED:function(){return Fd},SELECTED_CELL:function(){return Bd},SELECTED_CELLS:function(){return Oc},SELECTED_EDGES:function(){return Df},SELECTED_GROUPS:function(){return Pc},SELECTED_NODE:function(){return Pf},SELECTED_NODES:function(){return dl},getModelUtil:function(){return Go},isModelExistUtil:function(){return Mh},useModelValueUtil:function(){return Vi}});var q={};M.r(q),M.d(q,{ConnectorNode:function(){return _R},DataIONode:function(){return AR},DatabaseNode:function(){return MR},DecisionNode:function(){return SR},DelayNode:function(){return BR},DisplayNode:function(){return UR},DocumentNode:function(){return DR},ExtractNode:function(){return RR},HardDiskNode:function(){return OR},InternalStorageNode:function(){return $R},ManualInputNode:function(){return GR},ManualOperationNode:function(){return zR},MergeNode:function(){return kR},MultiDocumentNode:function(){return NR},NoteLeftNode:function(){return jR},NoteRightNode:function(){return HR},OffPageLinkNode:function(){return VR},OrNode:function(){return LR},PredefinedProcessNode:function(){return IR},PreparationNode:function(){return FR},ProcessNode:function(){return ER},StroedDataNode:function(){return PR},TerminalNode:function(){return TR},TextNode:function(){return WR}});var z=M(86700),Z=M(34155);function te(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function Q(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?te(Object(i),!0).forEach(function(s){he(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):te(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function de(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?de=function(r){return typeof r}:de=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},de(n)}function oe(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ie(n,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}function re(n,r,i){return r&&ie(n.prototype,r),i&&ie(n,i),n}function he(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function De(n){return ue(n)||xe(n)||ae(n)||fe()}function ue(n){if(Array.isArray(n))return ce(n)}function xe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ae(n,r){if(!!n){if(typeof n=="string")return ce(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ce(n,r)}}function ce(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}function fe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ee;(function(n){(function(r){var i=typeof M.g=="object"?M.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),s=a(n);typeof i.Reflect>"u"?i.Reflect=n:s=a(i.Reflect,s),r(s);function a(u,h){return function(p,g){typeof u[p]!="function"&&Object.defineProperty(u,p,{configurable:!0,writable:!0,value:g}),h&&h(p,g)}}})(function(r){var i=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",a=s&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",u=s&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",h=typeof Object.create=="function",p={__proto__:[]}instanceof Array,g=!h&&!p,y={create:h?function(){return $v(Object.create(null))}:p?function(){return $v({__proto__:null})}:function(){return $v({})},has:g?function(Gt,bn){return i.call(Gt,bn)}:function(Gt,bn){return bn in Gt},get:g?function(Gt,bn){return i.call(Gt,bn)?Gt[bn]:void 0}:function(Gt,bn){return Gt[bn]}},b=Object.getPrototypeOf(Function),E=typeof Z=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",T=!E&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:iu(),O=!E&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:By(),N=!E&&typeof WeakMap=="function"?WeakMap:v1(),k=new N;function B(Gt,bn,jn,ar){if(yi(jn)){if(!Ys(Gt))throw new TypeError;if(!Ho(bn))throw new TypeError;return _t(Gt,bn)}else{if(!Ys(Gt))throw new TypeError;if(!In(bn))throw new TypeError;if(!In(ar)&&!yi(ar)&&!Zs(ar))throw new TypeError;return Zs(ar)&&(ar=void 0),jn=Yr(jn),Zt(Gt,bn,jn,ar)}}r("decorate",B);function $(Gt,bn){function jn(ar,Vr){if(!In(ar))throw new TypeError;if(!yi(Vr)&&!gf(Vr))throw new TypeError;Gi(Gt,bn,ar,Vr)}return jn}r("metadata",$);function X(Gt,bn,jn,ar){if(!In(jn))throw new TypeError;return yi(ar)||(ar=Yr(ar)),Gi(Gt,bn,jn,ar)}r("defineMetadata",X);function ne(Gt,bn,jn){if(!In(bn))throw new TypeError;return yi(jn)||(jn=Yr(jn)),Gn(Gt,bn,jn)}r("hasMetadata",ne);function be(Gt,bn,jn){if(!In(bn))throw new TypeError;return yi(jn)||(jn=Yr(jn)),Rn(Gt,bn,jn)}r("hasOwnMetadata",be);function me(Gt,bn,jn){if(!In(bn))throw new TypeError;return yi(jn)||(jn=Yr(jn)),Jn(Gt,bn,jn)}r("getMetadata",me);function je(Gt,bn,jn){if(!In(bn))throw new TypeError;return yi(jn)||(jn=Yr(jn)),Li(Gt,bn,jn)}r("getOwnMetadata",je);function ot(Gt,bn){if(!In(Gt))throw new TypeError;return yi(bn)||(bn=Yr(bn)),Zr(Gt,bn)}r("getMetadataKeys",ot);function ct(Gt,bn){if(!In(Gt))throw new TypeError;return yi(bn)||(bn=Yr(bn)),jo(Gt,bn)}r("getOwnMetadataKeys",ct);function Xt(Gt,bn,jn){if(!In(bn))throw new TypeError;yi(jn)||(jn=Yr(jn));var ar=at(bn,jn,!1);if(yi(ar)||!ar.delete(Gt))return!1;if(ar.size>0)return!0;var Vr=k.get(bn);return Vr.delete(jn),Vr.size>0||k.delete(bn),!0}r("deleteMetadata",Xt);function _t(Gt,bn){for(var jn=Gt.length-1;jn>=0;--jn){var ar=Gt[jn],Vr=ar(bn);if(!yi(Vr)&&!Zs(Vr)){if(!Ho(Vr))throw new TypeError;bn=Vr}}return bn}function Zt(Gt,bn,jn,ar){for(var Vr=Gt.length-1;Vr>=0;--Vr){var pr=Gt[Vr],_i=pr(bn,jn,ar);if(!yi(_i)&&!Zs(_i)){if(!In(_i))throw new TypeError;ar=_i}}return ar}function at(Gt,bn,jn){var ar=k.get(Gt);if(yi(ar)){if(!jn)return;ar=new T,k.set(Gt,ar)}var Vr=ar.get(bn);if(yi(Vr)){if(!jn)return;Vr=new T,ar.set(bn,Vr)}return Vr}function Gn(Gt,bn,jn){var ar=Rn(Gt,bn,jn);if(ar)return!0;var Vr=Fy(bn);return Zs(Vr)?!1:Gn(Gt,Vr,jn)}function Rn(Gt,bn,jn){var ar=at(bn,jn,!1);return yi(ar)?!1:Xi(ar.has(Gt))}function Jn(Gt,bn,jn){var ar=Rn(Gt,bn,jn);if(ar)return Li(Gt,bn,jn);var Vr=Fy(bn);if(!Zs(Vr))return Jn(Gt,Vr,jn)}function Li(Gt,bn,jn){var ar=at(bn,jn,!1);if(!yi(ar))return ar.get(Gt)}function Gi(Gt,bn,jn,ar){var Vr=at(jn,ar,!0);Vr.set(Gt,bn)}function Zr(Gt,bn){var jn=jo(Gt,bn),ar=Fy(Gt);if(ar===null)return jn;var Vr=Zr(ar,bn);if(Vr.length<=0)return jn;if(jn.length<=0)return Vr;for(var pr=new O,_i=[],qi=0,_r=jn;qi<_r.length;qi++){var _o=_r[qi],go=pr.has(_o);go||(pr.add(_o),_i.push(_o))}for(var sc=0,Wv=Vr;sc<Wv.length;sc++){var _o=Wv[sc],go=pr.has(_o);go||(pr.add(_o),_i.push(_o))}return _i}function jo(Gt,bn){var jn=[],ar=at(Gt,bn,!1);if(yi(ar))return jn;for(var Vr=ar.keys(),pr=jv(Vr),_i=0;;){var qi=Hv(pr);if(!qi)return jn.length=_i,jn;var _r=E0(qi);try{jn[_i]=_r}catch(_o){try{Tw(pr)}finally{throw _o}}_i++}}function Xs(Gt){if(Gt===null)return 1;switch(typeof Gt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Gt===null?1:6;default:return 6}}function yi(Gt){return Gt===void 0}function Zs(Gt){return Gt===null}function $a(Gt){return typeof Gt=="symbol"}function In(Gt){return typeof Gt=="object"?Gt!==null:typeof Gt=="function"}function vr(Gt,bn){switch(Xs(Gt)){case 0:return Gt;case 1:return Gt;case 2:return Gt;case 3:return Gt;case 4:return Gt;case 5:return Gt}var jn=bn===3?"string":bn===5?"number":"default",ar=vf(Gt,a);if(ar!==void 0){var Vr=ar.call(Gt,jn);if(In(Vr))throw new TypeError;return Vr}return Fi(Gt,jn==="default"?"number":jn)}function Fi(Gt,bn){if(bn==="string"){var jn=Gt.toString;if(Fc(jn)){var ar=jn.call(Gt);if(!In(ar))return ar}var Vr=Gt.valueOf;if(Fc(Vr)){var ar=Vr.call(Gt);if(!In(ar))return ar}}else{var Vr=Gt.valueOf;if(Fc(Vr)){var ar=Vr.call(Gt);if(!In(ar))return ar}var pr=Gt.toString;if(Fc(pr)){var ar=pr.call(Gt);if(!In(ar))return ar}}throw new TypeError}function Xi(Gt){return!!Gt}function po(Gt){return""+Gt}function Yr(Gt){var bn=vr(Gt,3);return $a(bn)?bn:po(bn)}function Ys(Gt){return Array.isArray?Array.isArray(Gt):Gt instanceof Object?Gt instanceof Array:Object.prototype.toString.call(Gt)==="[object Array]"}function Fc(Gt){return typeof Gt=="function"}function Ho(Gt){return typeof Gt=="function"}function gf(Gt){switch(Xs(Gt)){case 3:return!0;case 4:return!0;default:return!1}}function vf(Gt,bn){var jn=Gt[bn];if(jn!=null){if(!Fc(jn))throw new TypeError;return jn}}function jv(Gt){var bn=vf(Gt,u);if(!Fc(bn))throw new TypeError;var jn=bn.call(Gt);if(!In(jn))throw new TypeError;return jn}function E0(Gt){return Gt.value}function Hv(Gt){var bn=Gt.next();return bn.done?!1:bn}function Tw(Gt){var bn=Gt.return;bn&&bn.call(Gt)}function Fy(Gt){var bn=Object.getPrototypeOf(Gt);if(typeof Gt!="function"||Gt===b||bn!==b)return bn;var jn=Gt.prototype,ar=jn&&Object.getPrototypeOf(jn);if(ar==null||ar===Object.prototype)return bn;var Vr=ar.constructor;return typeof Vr!="function"||Vr===Gt?bn:Vr}function iu(){var Gt={},bn=[],jn=function(){function _i(qi,_r,_o){this._index=0,this._keys=qi,this._values=_r,this._selector=_o}return _i.prototype["@@iterator"]=function(){return this},_i.prototype[u]=function(){return this},_i.prototype.next=function(){var qi=this._index;if(qi>=0&&qi<this._keys.length){var _r=this._selector(this._keys[qi],this._values[qi]);return qi+1>=this._keys.length?(this._index=-1,this._keys=bn,this._values=bn):this._index++,{value:_r,done:!1}}return{value:void 0,done:!0}},_i.prototype.throw=function(qi){throw this._index>=0&&(this._index=-1,this._keys=bn,this._values=bn),qi},_i.prototype.return=function(qi){return this._index>=0&&(this._index=-1,this._keys=bn,this._values=bn),{value:qi,done:!0}},_i}();return function(){function _i(){this._keys=[],this._values=[],this._cacheKey=Gt,this._cacheIndex=-2}return Object.defineProperty(_i.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),_i.prototype.has=function(qi){return this._find(qi,!1)>=0},_i.prototype.get=function(qi){var _r=this._find(qi,!1);return _r>=0?this._values[_r]:void 0},_i.prototype.set=function(qi,_r){var _o=this._find(qi,!0);return this._values[_o]=_r,this},_i.prototype.delete=function(qi){var _r=this._find(qi,!1);if(_r>=0){for(var _o=this._keys.length,go=_r+1;go<_o;go++)this._keys[go-1]=this._keys[go],this._values[go-1]=this._values[go];return this._keys.length--,this._values.length--,qi===this._cacheKey&&(this._cacheKey=Gt,this._cacheIndex=-2),!0}return!1},_i.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Gt,this._cacheIndex=-2},_i.prototype.keys=function(){return new jn(this._keys,this._values,ar)},_i.prototype.values=function(){return new jn(this._keys,this._values,Vr)},_i.prototype.entries=function(){return new jn(this._keys,this._values,pr)},_i.prototype["@@iterator"]=function(){return this.entries()},_i.prototype[u]=function(){return this.entries()},_i.prototype._find=function(qi,_r){return this._cacheKey!==qi&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=qi)),this._cacheIndex<0&&_r&&(this._cacheIndex=this._keys.length,this._keys.push(qi),this._values.push(void 0)),this._cacheIndex},_i}();function ar(_i,qi){return _i}function Vr(_i,qi){return qi}function pr(_i,qi){return[_i,qi]}}function By(){return function(){function Gt(){this._map=new T}return Object.defineProperty(Gt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Gt.prototype.has=function(bn){return this._map.has(bn)},Gt.prototype.add=function(bn){return this._map.set(bn,bn),this},Gt.prototype.delete=function(bn){return this._map.delete(bn)},Gt.prototype.clear=function(){this._map.clear()},Gt.prototype.keys=function(){return this._map.keys()},Gt.prototype.values=function(){return this._map.values()},Gt.prototype.entries=function(){return this._map.entries()},Gt.prototype["@@iterator"]=function(){return this.keys()},Gt.prototype[u]=function(){return this.keys()},Gt}()}function v1(){var Gt=16,bn=y.create(),jn=ar();return function(){function _r(){this._key=ar()}return _r.prototype.has=function(_o){var go=Vr(_o,!1);return go!==void 0?y.has(go,this._key):!1},_r.prototype.get=function(_o){var go=Vr(_o,!1);return go!==void 0?y.get(go,this._key):void 0},_r.prototype.set=function(_o,go){var sc=Vr(_o,!0);return sc[this._key]=go,this},_r.prototype.delete=function(_o){var go=Vr(_o,!1);return go!==void 0?delete go[this._key]:!1},_r.prototype.clear=function(){this._key=ar()},_r}();function ar(){var _r;do _r="@@WeakMap@@"+qi();while(y.has(bn,_r));return bn[_r]=!0,_r}function Vr(_r,_o){if(!i.call(_r,jn)){if(!_o)return;Object.defineProperty(_r,jn,{value:y.create()})}return _r[jn]}function pr(_r,_o){for(var go=0;go<_o;++go)_r[go]=Math.random()*255|0;return _r}function _i(_r){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(_r)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(_r)):pr(new Uint8Array(_r),_r):pr(new Array(_r),_r)}function qi(){var _r=_i(Gt);_r[6]=_r[6]&79|64,_r[8]=_r[8]&191|128;for(var _o="",go=0;go<Gt;++go){var sc=_r[go];(go===4||go===6||go===8)&&(_o+="-"),sc<16&&(_o+="0"),_o+=sc.toString(16).toLowerCase()}return _o}}function $v(Gt){return Gt.__=void 0,delete Gt.__,Gt}})})(Ee||(Ee={}));var pe;(function(n){n.defineToken=function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{multiple:!0};return new n.DefinedToken(a,u)};var r=function a(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};oe(this,a),this.prototype={},this.name=void 0,this.multiple=void 0,this.symbol=void 0;var p=h.multiple,g=p===void 0?!1:p;this.name=u,this.symbol=Symbol(this.name),this.multiple=g};n.DefinedToken=r;function i(a){return!!a&&de(a)==="object"&&"id"in a&&"registry"in a}n.isModule=i;var s;(function(a){a.singleton="singleton",a.transient="transient"})(s=n.Lifecycle||(n.Lifecycle={})),n.ClassOptionSymbol=Symbol("SyringeClassOptionSymbol"),n.DefaultOption={lifecycle:s.transient}})(pe||(pe={}));var Ae;(function(n){function r(p){return p instanceof Array?p:p!==void 0?[p]:[]}n.maybeArrayToArray=r;function i(p){return!!(p&&typeof p=="function"&&"prototype"in p)}n.isClass=i;function s(p){return!!(p&&de(p)==="object"&&"symbol"in p&&"multiple"in p)}n.isDefinedToken=s;function a(p){return!!(p&&de(p)==="object"&&"token"in p)}n.isInjectOption=a;function u(p){return!!(p&&de(p)==="object"&&"token"in p&&"named"in p)}n.isNamedToken=u;function h(p){return n.isDefinedToken(p)&&p.multiple}n.isMultipleEnabled=h})(Ae||(Ae={}));function nt(n){return n.inSingletonScope()}function G(n){return n.inTransientScope()}function Fe(n,r){return r.lifecycle===pe.Lifecycle.singleton?nt(n):G(n)}function He(n,r){n.whenTargetNamed(ye(r))}function et(n,r){return r.container.bind(Ct(n))}function Bt(n,r){var i=r.container.parent,s=i&&i.isBound(Ct(n));return r.container.isBound(Ct(n))&&!s?r.container.rebind(Ct(n)):r.container.bind(Ct(n))}function Mn(n){return n&&de(n)==="object"&&"container"in n&&"inversify"in n}function ye(n){return Ae.isDefinedToken(n)?n.symbol:n}function Ct(n){return Ae.isDefinedToken(n)?n.symbol:n}var Pn=new z.W2;function jt(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=(0,z.b2)();return function(i){Reflect.defineMetadata(pe.ClassOptionSymbol,Q(Q({},n),{},{target:i}),i),r(i)}}function cn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return jt(Q(Q({},n),{},{lifecycle:pe.Lifecycle.singleton}))}function qn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return jt(Q(Q({},n),{},{lifecycle:pe.Lifecycle.transient}))}function on(n){return(0,z.f3)(Ct(n))}function lo(n){return(0,z.t6)(ye(n))}var Zi=Symbol("SyringeOptionSymbol"),Xn=function(r,i){Reflect.defineMetadata(Zi,r,i)};function Ar(n){var r=Ae.maybeArrayToArray(n.token),i=Ae.maybeArrayToArray(n.useClass),s=Ae.maybeArrayToArray(n.useDynamic),a=Ae.maybeArrayToArray(n.useFactory),u=Ae.maybeArrayToArray(n.contrib),h=n.lifecycle||pe.Lifecycle.transient,p={token:r,useClass:i,lifecycle:u.length>0?pe.Lifecycle.singleton:h,contrib:u,useDynamic:s,useFactory:a};return"useValue"in n&&(p.useValue=n.useValue),p}var lr=function(){function n(r,i,s){oe(this,n),this.token=void 0,this.rawToken=void 0,this.named=void 0,this.generalToken=void 0,this.option=void 0,this.context=void 0,this.mutiple=void 0,this.context=r,this.token=i,this.option=s,this.rawToken=Ae.isNamedToken(i)?i.token:i,this.named=Ae.isNamedToken(i)?i.named:void 0,this.mutiple=!!this.named||Ae.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}return re(n,[{key:"resolve",value:function(){var i=this,s=this.context;!Mn(s)||(this.mutiple?this.resolveMutilple(s):(this.resolveMono(s),!this.named&&this.option.contrib.length>0&&this.option.contrib.forEach(function(a){Ae.isMultipleEnabled(a)?et(a,s).toService(i.generalToken):Bt(a,s).toService(i.generalToken)})))}},{key:"resolveMono",value:function(i){var s=this;if("useValue"in this.option)return Bt(this.generalToken,i).toConstantValue(this.option.useValue);if(this.option.useDynamic.length>0){var a=this.option.useDynamic[this.option.useDynamic.length-1];return Fe(Bt(this.generalToken,i).toDynamicValue(function(){return a({container:s.context})}),this.option)}if(this.option.useFactory.length>0){var u=this.option.useFactory[this.option.useFactory.length-1];return Bt(this.generalToken,i).toFactory(function(){return u({container:s.context})})}if(this.option.useClass.length>0){var h=this.option.useClass[this.option.useClass.length-1];return Fe(Bt(this.generalToken,i).to(h),this.option)}}},{key:"resolveMutilple",value:function(i){var s=this,a=this.option.useClass.map(function(g){return Fe(et(s.generalToken,i).to(g),s.option)}),u=this.option.useDynamic.map(function(g){return Fe(et(s.generalToken,i).toDynamicValue(function(){return g({container:s.context})}),s.option)}),h=this.option.useFactory.map(function(g){return et(s.generalToken,i).toFactory(function(){return g({container:s.context})})}),p="useValue"in this.option?et(this.generalToken,i).toConstantValue(this.option.useValue):void 0;this.named&&(a.forEach(function(g){return s.named&&He(g,s.named)}),u.forEach(function(g){return s.named&&He(g,s.named)}),h.forEach(function(g){return s.named&&He(g,s.named)}),p&&He(p,this.named))}}],[{key:"resolveTarget",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{try{var u=Reflect.getMetadata(Zi,s);u&&n.resolveOption(i,u)}catch{}if(Ae.isClass(s))if(!a.useClass)a.useClass=[s];else{var h=Ae.maybeArrayToArray(a.useClass);h.unshift(s),a.useClass=h}var p;try{p=Reflect.getMetadata(pe.ClassOptionSymbol,s)}catch{}if(p=Q(Q({},p||{}),a),!p.token)p.token=[s];else{var g=Ae.maybeArrayToArray(p.token);g.unshift(s),p.token=g}n.resolveOption(i,p)}catch{}}},{key:"resolveOption",value:function(i,s){var a=Ar(Q(Q({},n.globalConfig),s));a.useClass.length===0&&a.useDynamic.length===0&&a.useFactory.length===0&&!("useValue"in a)||a.token.forEach(function(u){var h=new n(i,u,Q({},a));h.resolve()})}}]),n}();lr.globalConfig=pe.DefaultOption;var Ir=function(){function n(r){oe(this,n),this.loadedModules=[],this.container=void 0,this.inversify=!0,this.parent=void 0,r?this.container=r:this.container=new z.W2}return re(n,[{key:"load",value:function(i,s){(s||!this.loadedModules.includes(i.id))&&(i.registry(this.register.bind(this),this.resolveContext()),this.loadedModules.push(i.id))}},{key:"remove",value:function(i){return this.container.unbind(Ct(i))}},{key:"get",value:function(i){return this.container.get(Ct(i))}},{key:"getNamed",value:function(i,s){return this.container.getNamed(Ct(i),ye(s))}},{key:"getAll",value:function(i){return this.container.getAll(Ct(i))}},{key:"getAllNamed",value:function(i,s){return this.container.getAllNamed(Ct(i),ye(s))}},{key:"isBound",value:function(i){return this.container.isBound(Ct(i))}},{key:"isBoundNamed",value:function(i,s){return this.container.isBoundNamed(Ct(i),ye(s))}},{key:"createChild",value:function(){var i=this.container.createChild(),s=new n(i);return s.parent=this,s}},{key:"register",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ae.isInjectOption(i)?lr.resolveOption(this,i):lr.resolveTarget(this,i,s)}},{key:"resolveContext",value:function(){return{container:this}}}],[{key:"config",value:function(i){lr.globalConfig=i}}]),n}(),Oi=new Ir(Pn),Bi=Oi.register.bind(Oi),Kr=pe.defineToken("ContributionProvider"),eo=function(){function n(r,i,s){oe(this,n),this.option={recursive:!1,cache:!0},this.services=void 0,this.serviceIdentifier=void 0,this.container=void 0,this.container=i,this.serviceIdentifier=r,s&&(this.option=Q(Q({},this.option),s))}return re(n,[{key:"setServices",value:function(i){for(var s=[],a=this.container;a;){if(a.isBound(this.serviceIdentifier)){var u=a.getAll(this.serviceIdentifier);s.push.apply(s,De(u))}a=i?a.parent:void 0}return s}},{key:"getContributions",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Q(Q({},this.option),i),a=s.cache,u=s.recursive;return(!a||this.services===void 0)&&(this.services=this.setServices(!!u)),this.services}}]),n}();function Ts(n,r){return{token:{token:Kr,named:n},useDynamic:function(s){return new eo(n,s.container,r)},lifecycle:pe.Lifecycle.singleton}}function Ks(n,r,i){n({token:{token:Kr,named:r},useDynamic:function(a){return new eo(r,a.container,i)},lifecycle:pe.Lifecycle.singleton})}var bs=function(){function n(r){oe(this,n),this.id=void 0,this.baseRegistry=void 0,this.optionCollection=void 0,n.moduleId+=1,this.id=n.moduleId,this.baseRegistry=r}return re(n,[{key:"registry",get:function(){var i=this;return function(s,a){i.baseRegistry&&i.baseRegistry(s,a),i.optionCollection&&i.optionCollection.forEach(function(u){return s(u)})}}},{key:"options",get:function(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}},{key:"register",value:function(){for(var i=this,s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return a.forEach(function(h){return i.options.push(h)}),this}},{key:"contribution",value:function(){for(var i=this,s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return a.forEach(function(h){return i.options.push(Ts(h))}),this}}]),n}();bs.moduleId=0;function Zo(n){return new bs(n)}var oi=function(r){return function(i,s,a){lo(r)(i,s,a),on(Kr)(i,s,a)}},Hi;(function(n){n.Provider=Kr,n.register=Ks})(Hi||(Hi={}));var xi;(function(n){let r;(function(s){s.TOP="top",s.BOTTOM="bottom",s.RIGHT="right",s.LEFT="left"})(r=n.AnchorGroup||(n.AnchorGroup={}));let i;(function(s){s.INPUT="input",s.OUTPUT="output"})(i=n.AnchorType||(n.AnchorType={}))})(xi||(xi={}));var F=M(70655),H=M(67294),mf=M(94184),Oe=M.n(mf),ac=M(28660),ur=M(51446),ua=M(73935),il;(function(n){function r(s){return!!s&&typeof s=="object"&&"dispose"in s&&typeof s.dispose=="function"}n.is=r;function i(s){return{dispose:s}}n.create=i,n.NONE=i(()=>{})})(il||(il={}));let Ro;var Wa;(function(n){n.None=()=>il.NONE;function r(i,s){return(a,u)=>i(h=>a.call(u,s(h)),void 0)}n.map=r})(Wa||(Wa={})),Ro=Symbol.iterator;class At{constructor(r=!1){this.mono=void 0,this._callbacks=void 0,this.mono=r}get callbacks(){return this._callbacks||(this._callbacks=[]),this._callbacks}get length(){return this.callbacks.length}add(r,i=void 0){this.callbacks.push([r,i])}remove(r,i=void 0){if(this.isEmpty())return;let s=!1;for(let a=0;a<this.length;a+=1)if(this.callbacks[a][0]===r){if(this.callbacks[a][1]===i){this.callbacks.splice(a,1);return}s=!0}if(s)throw new Error("You should remove it with the same context you add it")}[Ro](){return this.isEmpty()?[][Symbol.iterator]():this.callbacks.slice(0).map(i=>(...s)=>i[0].apply(i[1],s))[Symbol.iterator]()}invoke(...r){const i=[];for(const s of this)try{i.push(s(...r))}catch(a){console.error(a)}return i}isEmpty(){return this.callbacks.length===0}dispose(){this._callbacks=void 0}}class Jt{constructor(r={}){this.options=void 0,this._event=void 0,this._callbacks=void 0,this.disposed=!1,this.options=r}get callbacks(){return this._callbacks||(this._callbacks=new At),this._callbacks}get event(){return this._event||(this._event=(r,i)=>{this.options.onFirstListenerAdd&&this.callbacks.isEmpty()&&this.options.onFirstListenerAdd(this),this.callbacks.add(r,i);const s={dispose:()=>{s.dispose=Jt.noop,this.disposed||(this.callbacks.remove(r,i),s.dispose=Jt.noop,this.options.onLastListenerRemove&&this.callbacks.isEmpty()&&this.options.onLastListenerRemove(this))}};return s}),this._event}fire(r){!this._callbacks||this.callbacks.invoke(r)}async sequence(r){for(const i of this.callbacks)if(!await r(i))break}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0),this.disposed=!0}}Jt.noop=()=>{};var Mt;(function(n){function r(s){return!!s&&typeof s=="object"&&"dispose"in s&&typeof s.dispose=="function"}n.is=r;function i(s){return{dispose:s}}n.create=i,n.NULL=i(()=>{})})(Mt||(Mt={}));class un{constructor(...r){this.disposables=[],this.onDisposeEmitter=new Jt,this.disposingElements=!1,r.forEach(i=>this.push(i))}get onDispose(){return this.onDisposeEmitter.event}checkDisposed(){this.disposed&&!this.disposingElements&&(this.onDisposeEmitter.fire(void 0),this.onDisposeEmitter.dispose())}get disposed(){return this.disposables.length===0}dispose(){return(0,F.mG)(this,void 0,void 0,function*(){if(!(this.disposed||this.disposingElements)){for(this.disposingElements=!0;!this.disposed;)try{yield this.disposables.pop().dispose()}catch(r){console.error(r)}this.disposingElements=!1,this.checkDisposed()}})}push(r){const{disposables:i}=this;i.push(r);const s=r.dispose.bind(r),a=Mt.create(()=>{const u=i.indexOf(r);u!==-1&&i.splice(u,1),this.checkDisposed()});return r.dispose=()=>{a.dispose(),s()},a}pushAll(r){return r.map(i=>this.push(i))}}class Qn{constructor(){this.isResolved=!1,this.isRejected=!1,this.promise=new Promise((r,i)=>{this.resolve=(...s)=>{this.isResolved=!0,r(...s)},this.reject=(...s)=>{this.isRejected=!0,i(...s)}})}}const zi="X6_NODE_PORTAL_NODE_VIEW",Lr="xflow",jr=.01,Sr=1.5,qr="XFLOW_DEFAULT_NODE",Xr="XFLOW_DEFAULT_GROUP_NODE",ko="XFLOW_DEFAULT_EDGE",Bc="XFLOW_COPY_ITEMS",fh={width:180,height:36};function Sc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const r=Math.random()*16|0;return(n=="x"?r:r&3|8).toString(16)})}var xs=M(18267),dp=M(18095);const Ed=H.createContext(null);Ed.displayName="XFlowAppContext";const Yo=()=>{const n=H.useContext(Ed);return n&&n.getApp?n.getApp():null},ph=()=>H.useContext(Ed);class Al{constructor(r=!1){this.cache=null,this.setApp=i=>{this.cache=i,this.onAppChangeCallback&&this.onAppChangeCallback(i)},this.isUserDefined=()=>this.isUserDefinedFlag,this.getApp=()=>this.cache,this.onAppChange=i=>{this.onAppChangeCallback=i},this.dispose=()=>{this.cache=null},this.isUserDefinedFlag=r}}const hp=n=>{const r=ph(),[,i]=H.useState(null),s=H.useMemo(()=>r&&r.isUserDefined()?r:new Al(!1),[]);return s.isUserDefined()||s.onAppChange(()=>i(0)),H.useEffect(()=>{n.app&&s.setApp(n.app)},[n.app]),s.isUserDefined()?H.createElement(H.Fragment,null,n.children):H.createElement(Ed.Provider,{value:Object.assign({},s)},n.children)};hp.displayName="XFlowAppInternalProvider";const ou=({children:n})=>{const[,r]=H.useState(null),i=H.useMemo(()=>new Al(!0),[]);return i.onAppChange(()=>r(0)),H.createElement(Ed.Provider,{value:Object.assign({},i)},n)};ou.displayName="XFlowAppProvider";var $i;(function(n){const r="\u8282\u70B9\u64CD\u4F5C";n.ADD_NODE={id:"xflow:add-node",label:"\u6DFB\u52A0\u8282\u70B9",category:r},n.DEL_NODE={id:"xflow:del-node",label:"\u5220\u9664\u8282\u70B9",category:r},n.UPDATE_NODE_PORT={id:"xflow:update-node-port",label:"\u5220\u9664\u8FDE\u63A5\u6869",category:r},n.UPDATE_NODE={id:"xflow:update-node",label:"\u66F4\u65B0\u8282\u70B9",category:r},n.HIGHLIGHT_NODE={id:"xflow:highlight-node",label:"\u9AD8\u4EAE\u8282\u70B9",category:r},n.SELECT_NODE={id:"xflow:select-node",label:"\u9009\u4E2D\u8282\u70B9",category:r},n.MOVE_NODE={id:"xflow:move-node",label:"Move Node",category:r},n.CENTER_NODE={id:"xflow:center-node",label:"\u5C45\u4E2D\u8282\u70B9",category:r},n.FRONT_NODE={id:"xflow:front-node",label:"\u524D\u7F6E\u8282\u70B9",category:r},n.BACK_NODE={id:"xflow:back-node",label:"\u540E\u7F6E\u8282\u70B9",category:r}})($i||($i={}));var uo;(function(n){const r="\u8FB9\u64CD\u4F5C";n.ADD_EDGE={id:"xflow:add-edge",label:"\u6DFB\u52A0\u8FB9",category:r},n.DEL_EDGE={id:"xflow:del-edge",label:"\u5220\u9664\u8FB9",category:r},n.UPDATE_EDGE={id:"xflow:update-edge",label:"\u66F4\u65B0\u8FB9",category:r},n.HIGHLIGHT_EDGE={id:"xflow:highlight-edge",label:"\u9AD8\u4EAE\u8FB9",category:r},n.FRONT_EDGE={id:"xflow:front-edge",label:"\u524D\u7F6E\u53D8",category:r},n.BACK_EDGE={id:"xflow:back-edge",label:"\u540E\u7F6E\u8FB9",category:r}})(uo||(uo={}));var ti;(function(n){const r="\u753B\u5E03\u64CD\u4F5C";n.LOAD_META={id:"xflow:load-meta",label:"\u83B7\u53D6\u5143\u6570\u636E",category:r},n.LOAD_DATA={id:"xflow:load-data",label:"\u83B7\u53D6\u56FE\u6570\u636E",category:r},n.SAVE_GRAPH_DATA={id:"xflow:save-graph-data",label:"\u4FDD\u5B58",category:r},n.GRAPH_LAYOUT={id:"xflow:layout",label:"\u8BA1\u7B97\u5E03\u5C40",category:r},n.GRAPH_RENDER={id:"xflow:graph-render",label:"\u6E32\u67D3\u753B\u5E03",category:r},n.UNDO_CMD={id:"xflow:undo-cmd",label:"\u64A4\u9500",category:r},n.REDO_CMD={id:"xflow:redo-cmd",label:"\u91CD\u505A",category:r},n.GRAPH_INSTANCE_COMMAND={id:"xflow:graph-instacne-cmd",label:"Graph\u901A\u7528Command",category:r},n.GRAPH_ZOOM={id:"xflow:graph-zoom",label:"\u7F29\u653E\u753B\u5E03",category:r},n.GRAPH_FULLSCREEN={id:"xflow:graph-fullscreen",label:"\u5168\u5C4F",category:r},n.GRAPH_RESIZE={id:"xflow:graph-resize",label:"\u8C03\u6574\u7A97\u53E3\u5927\u5C0F",category:r},n.GRAPH_COPY={id:"xflow:graph-copy-selection",label:"\u590D\u5236",category:r},n.GRAPH_PASTE={id:"xflow:graph-paste-selection",label:"\u7C98\u8D34",category:r},n.GRAPH_TOGGLE_MULTI_SELECT={id:"xflow:graph-toggle-multi-select",label:"\u542F\u7528\u6846\u9009",category:r},n.GRAPH_ADD_TOOL={id:"xflow:add-tool",label:"\u6DFB\u52A0\u5DE5\u5177",category:r},n.GRAPH_DEL_TOOL={id:"xflow:del-tool",label:"\u5220\u9664\u5DE5\u5177",category:r},n.GRAPH_HISTORY_UNDO={id:"xflow:history-undo",label:"history undo",category:r},n.GRAPH_HISTORY_REDO={id:"xflow:history-redo",label:"history redo",category:r},n.GRAPH_HISTORY_RESET={id:"xflow:history-reset",label:"history reset",category:r},n.GRAPH_HISTORY_TOGGLE={id:"xflow:history-toggle",label:"history toggle",category:r}})(ti||(ti={}));var To;(function(n){const r="\u72B6\u6001\u64CD\u4F5C";n.UPDATE_MODEL={id:"xflow:update-model",label:"\u8BBE\u7F6E\u72B6\u6001\u503C",category:r}})(To||(To={}));var Ms;(function(n){const r="\u7FA4\u7EC4\u64CD\u4F5C";n.INIT_GROUP={id:"xflow:init-group",label:"\u521D\u59CB\u5316\u7FA4\u7EC4",category:r},n.ADD_GROUP={id:"xflow:add-group",label:"\u65B0\u5EFA\u7FA4\u7EC4",category:r},n.DEL_GROUP={id:"xflow:del-group",label:"\u89E3\u6563\u7FA4\u7EC4",category:r},n.COLLAPSE_GROUP={id:"xflow:collapse-group",label:"\u6298\u53E0\u7FA4\u7EC4",category:r}})(Ms||(Ms={}));const su=n=>{const{cell:r}=n,i=Yo(),s=n.data.isCollapsed||!1,a=h=>{h.preventDefault(),i.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!1})},u=h=>{h.preventDefault(),i.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!0,gap:3})};return H.createElement("div",{className:"xflow-default-group-node"},H.createElement("div",{className:"xflow-group-header"},H.createElement("div",{className:"header-left"},n.data.label),H.createElement("div",{className:"header-right"},s&&H.createElement(xs.Z,{onClick:a}),!s&&H.createElement(dp.Z,{onClick:u}))))};su.displayName="XFlowDefaultGroupNode";var fp=M(32779),bf=M(73218),gh=M(15873),pp=M(57119),gp=M(68628),Sd=M(73888);const vp={fontSize:"16px",color:"#3057e3"};var Tl;(function(n){n.SUCCESS="success",n.PROCESSING="processing",n.ERROR="error",n.DEFAULT="default",n.WARNING="warning"})(Tl||(Tl={}));const mp=n=>{if(n.hide)return null;switch(n.status){case Tl.PROCESSING:return H.createElement(fp.Z,{spin:!0,style:{color:"#c1cdf7",fontSize:"16px"}});case Tl.ERROR:return H.createElement(bf.Z,{style:{color:"#ff4d4f",fontSize:"16px"}});case Tl.SUCCESS:return H.createElement(gh.Z,{style:{color:"#39ca74cc",fontSize:"16px"}});case Tl.WARNING:return H.createElement(pp.Z,{style:{color:"#faad14",fontSize:"16px"}});case Tl.DEFAULT:return H.createElement(gp.Z,{style:{color:"#d9d9d9",fontSize:"16px"}});default:return null}},xf=n=>{const r=H.isValidElement(n.data.icon)?n.data.icon:H.createElement(Sd.Z,{style:vp});return H.createElement("div",{className:`xflow-default-node ${n.isNodeTreePanel?"panel-node":""}`},H.createElement("span",{className:"icon"},r),H.createElement("span",{className:"label"},n.data.label),H.createElement("span",{className:"status"},H.createElement(mp,{status:n.data&&n.data.status,hide:n.isNodeTreePanel})))};xf.displayName="XFlowDefaultNode";var _c;(function(n){n.CONFIG_TYPE="GraphConfig",n.defaultNodeTypeParser=r=>r.renderKey,n.defaultEdgeTypeParser=r=>r.renderKey,n.defaultNodeMapValue=[[qr,xf],[Xr,su]]})(_c||(_c={}));class Ml{constructor(){this.CONFIG_TYPE=_c.CONFIG_TYPE,this.x6Options=new Qn,this.rootContainer=new Qn,this.graphContainer=new Qn,this.nodeRender=new Map(_c.defaultNodeMapValue),this.edgeRender=new Map,this.nodeTypeParser=_c.defaultNodeTypeParser,this.edgeTypeParser=_c.defaultEdgeTypeParser,this.events=[],this.mergeX6Config=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=yield this.getX6Config();return Object.assign(i,r)}),this.getX6Config=()=>(0,F.mG)(this,void 0,void 0,function*(){return yield this.x6Options.promise}),this.setX6Config=r=>{var i;const s=this.getDefaultGraphOptions();(i=this.x6Options)===null||i===void 0||i.resolve(Object.assign(Object.assign({},s),r))},this.setAppContainer=r=>{this.appContainer=r},this.setRootContainer=r=>{r&&(this===null||this===void 0||this.rootContainer.resolve(r))},this.setGraphContainer=r=>{var i;r&&((i=this.graphContainer)===null||i===void 0||i.resolve(r))},this.setEvents=r=>{this.events=r},this.setDefaultNodeRender=r=>{this.nodeRender.set(qr,r)},this.setDefaultEdgeRender=r=>{this.edgeRender.set(ko,r)},this.setNodeRender=(r,i)=>{this.nodeRender.set(r,i)},this.setEdgeRender=(r,i)=>{this.edgeRender.set(r,i)},this.setNodeTypeParser=r=>{this.nodeTypeParser=r},this.setEdgeTypeParser=r=>{this.edgeTypeParser=r},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){const[r,i,s]=yield Promise.all([this.rootContainer.promise,this.graphContainer.promise,this.x6Options.promise]);return{xflowInstanceId:this.xflowInstanceId,graphId:this.graphId,nodeViewId:this.graphId,appContainer:this.appContainer,rootContainer:r,graphContainer:i,x6Options:s,events:this.events,nodeRender:this.nodeRender,edgeRender:this.edgeRender,nodeTypeParser:this.nodeTypeParser,edgeTypeParser:this.edgeTypeParser}}),this.getDefaultGraphOptions=()=>({rotating:!1,resizing:!1,connecting:{snap:!0,dangling:!1,highlight:!1,connectionPoint:"rect",router:{name:"er"},connector:{name:"rounded",args:{radius:15}}},background:{},grid:{visible:!0},selecting:{strict:!0,enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},snapline:{enabled:!1},history:{enabled:!1},clipboard:{enabled:!0,useLocalStorage:!0},scroller:{enabled:!1},mousewheel:{enabled:!0,minScale:jr,maxScale:Sr,factor:1.1,modifiers:["ctrl","meta"]},panning:{enabled:!0},scaling:{min:jr,max:Sr},keyboard:{enabled:!0},interacting:{nodeMovable:!0,edgeLabelMovable:!1},async:!1}),this.dispose=()=>{this.rootContainer=new Qn,this.graphContainer=new Qn,this.x6Options=new Qn},this.graphId=Sc()}}const _d=Symbol("IGraphOptionProvider"),Ad=(n,r)=>{n(_d,{lifecycle:pe.Lifecycle.singleton,useDynamic:()=>({getOptions:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.getConfig()})})})},wg=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new Ml;return n(a,i),a},[i])};var Ol=M(41017),da=M.n(Ol);var ol=function(r,i){return ol=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var u in a)a.hasOwnProperty(u)&&(s[u]=a[u])},ol(r,i)};function Cs(n,r){ol(n,r);function i(){this.constructor=n}n.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var qs=function(){return qs=Object.assign||function(i){for(var s,a=1,u=arguments.length;a<u;a++){s=arguments[a];for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(i[h]=s[h])}return i},qs.apply(this,arguments)};function Td(n,r){var i={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&r.indexOf(s)<0&&(i[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)r.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(i[s[a]]=n[s[a]]);return i}function Cf(n,r,i,s){var a=arguments.length,u=a<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,i):s,h;if((typeof Reflect>"u"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,r,i,s);else for(var p=n.length-1;p>=0;p--)(h=n[p])&&(u=(a<3?h(u):a>3?h(r,i,u):h(r,i))||u);return a>3&&u&&Object.defineProperty(r,i,u),u}function S0(n,r){return function(i,s){r(i,s,n)}}function _0(n,r){if((typeof Reflect>"u"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,r)}function wf(n,r,i,s){function a(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(b){try{y(s.next(b))}catch(E){h(E)}}function g(b){try{y(s.throw(b))}catch(E){h(E)}}function y(b){b.done?u(b.value):a(b.value).then(p,g)}y((s=s.apply(n,r||[])).next())})}function Md(n,r){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,a,u,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(y){return function(b){return g([y,b])}}function g(y){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,a&&(u=y[0]&2?a.return:y[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,y[1])).done)return u;switch(a=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return i.label++,{value:y[1],done:!1};case 5:i.label++,a=y[1],y=[0];continue;case 7:y=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){i=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){i.label=y[1];break}if(y[0]===6&&i.label<u[1]){i.label=u[1],u=y;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(y);break}u[2]&&i.ops.pop(),i.trys.pop();continue}y=r.call(n,i)}catch(b){y=[6,b],a=0}finally{s=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function Od(n,r,i,s){s===void 0&&(s=i),n[s]=r[i]}function Ef(n,r){for(var i in n)i!=="default"&&!r.hasOwnProperty(i)&&(r[i]=n[i])}function au(n){var r=typeof Symbol=="function"&&Symbol.iterator,i=r&&n[r],s=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function sl(n,r){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var s=i.call(n),a,u=[],h;try{for(;(r===void 0||r-- >0)&&!(a=s.next()).done;)u.push(a.value)}catch(p){h={error:p}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(h)throw h.error}}return u}function ha(){for(var n=[],r=0;r<arguments.length;r++)n=n.concat(sl(arguments[r]));return n}function cu(){for(var n=0,r=0,i=arguments.length;r<i;r++)n+=arguments[r].length;for(var s=Array(n),a=0,r=0;r<i;r++)for(var u=arguments[r],h=0,p=u.length;h<p;h++,a++)s[a]=u[h];return s}function zc(n){return this instanceof zc?(this.v=n,this):new zc(n)}function Eg(n,r,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(n,r||[]),a,u=[];return a={},h("next"),h("throw"),h("return"),a[Symbol.asyncIterator]=function(){return this},a;function h(T){s[T]&&(a[T]=function(O){return new Promise(function(N,k){u.push([T,O,N,k])>1||p(T,O)})})}function p(T,O){try{g(s[T](O))}catch(N){E(u[0][3],N)}}function g(T){T.value instanceof zc?Promise.resolve(T.value.v).then(y,b):E(u[0][2],T)}function y(T){p("next",T)}function b(T){p("throw",T)}function E(T,O){T(O),u.shift(),u.length&&p(u[0][0],u[0][1])}}function Sg(n){var r,i;return r={},s("next"),s("throw",function(a){throw a}),s("return"),r[Symbol.iterator]=function(){return this},r;function s(a,u){r[a]=n[a]?function(h){return(i=!i)?{value:zc(n[a](h)),done:a==="return"}:u?u(h):h}:u}}function Pl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n[Symbol.asyncIterator],i;return r?r.call(n):(n=typeof au=="function"?au(n):n[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(u){i[u]=n[u]&&function(h){return new Promise(function(p,g){h=n[u](h),a(p,g,h.done,h.value)})}}function a(u,h,p,g){Promise.resolve(g).then(function(y){u({value:y,done:p})},h)}}function ku(n,r){return Object.defineProperty?Object.defineProperty(n,"raw",{value:r}):n.raw=r,n}function Js(n){if(n&&n.__esModule)return n;var r={};if(n!=null)for(var i in n)Object.hasOwnProperty.call(n,i)&&(r[i]=n[i]);return r.default=n,r}function Ta(n){return n&&n.__esModule?n:{default:n}}function Lu(n,r){if(!r.has(n))throw new TypeError("attempted to get private field on non-instance");return r.get(n)}function Gu(n,r,i){if(!r.has(n))throw new TypeError("attempted to set private field on non-instance");return r.set(n,i),i}var Fu=function(){return Array.isArray||function(n){return n&&typeof n.length=="number"}}();function Pd(n){return n!==null&&typeof n=="object"}function Bu(n){return typeof n=="function"}var yp=function(){function n(r){return Error.call(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(i,s){return s+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r,this}return n.prototype=Object.create(Error.prototype),n}(),zu=yp,Ma=function(){function n(r){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,r&&(this._ctorUnsubscribe=!0,this._unsubscribe=r)}return n.prototype.unsubscribe=function(){var r;if(!this.closed){var i=this,s=i._parentOrParents,a=i._ctorUnsubscribe,u=i._unsubscribe,h=i._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,s instanceof n)s.remove(this);else if(s!==null)for(var p=0;p<s.length;++p){var g=s[p];g.remove(this)}if(Bu(u)){a&&(this._unsubscribe=void 0);try{u.call(this)}catch(E){r=E instanceof zu?Uu(E.errors):[E]}}if(Fu(h))for(var p=-1,y=h.length;++p<y;){var b=h[p];if(Pd(b))try{b.unsubscribe()}catch(T){r=r||[],T instanceof zu?r=r.concat(Uu(T.errors)):r.push(T)}}if(r)throw new zu(r)}},n.prototype.add=function(r){var i=r;if(!r)return n.EMPTY;switch(typeof r){case"function":i=new n(r);case"object":if(i===this||i.closed||typeof i.unsubscribe!="function")return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof n)){var s=i;i=new n,i._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}var a=i._parentOrParents;if(a===null)i._parentOrParents=this;else if(a instanceof n){if(a===this)return i;i._parentOrParents=[a,this]}else if(a.indexOf(this)===-1)a.push(this);else return i;var u=this._subscriptions;return u===null?this._subscriptions=[i]:u.push(i),i},n.prototype.remove=function(r){var i=this._subscriptions;if(i){var s=i.indexOf(r);s!==-1&&i.splice(s,1)}},n.EMPTY=function(r){return r.closed=!0,r}(new n),n}();function Uu(n){return n.reduce(function(r,i){return r.concat(i instanceof zu?i.errors:i)},[])}var Sf=function(n){Cs(r,n);function r(i,s){return n.call(this)||this}return r.prototype.schedule=function(i,s){return s===void 0&&(s=0),this},r}(Ma),_g=function(n){Cs(r,n);function r(i,s){var a=n.call(this,i,s)||this;return a.scheduler=i,a.work=s,a.pending=!1,a}return r.prototype.schedule=function(i,s){if(s===void 0&&(s=0),this.closed)return this;this.state=i;var a=this.id,u=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(u,a,s)),this.pending=!0,this.delay=s,this.id=this.id||this.requestAsyncId(u,this.id,s),this},r.prototype.requestAsyncId=function(i,s,a){return a===void 0&&(a=0),setInterval(i.flush.bind(i,this),a)},r.prototype.recycleAsyncId=function(i,s,a){if(a===void 0&&(a=0),a!==null&&this.delay===a&&this.pending===!1)return s;clearInterval(s)},r.prototype.execute=function(i,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(i,s);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(i,s){var a=!1,u=void 0;try{this.work(i)}catch(h){a=!0,u=!!h&&h||new Error(h)}if(a)return this.unsubscribe(),u},r.prototype._unsubscribe=function(){var i=this.id,s=this.scheduler,a=s.actions,u=a.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,u!==-1&&a.splice(u,1),i!=null&&(this.id=this.recycleAsyncId(s,i,null)),this.delay=null},r}(Sf),bp=function(){function n(r,i){i===void 0&&(i=n.now),this.SchedulerAction=r,this.now=i}return n.prototype.schedule=function(r,i,s){return i===void 0&&(i=0),new this.SchedulerAction(this,r).schedule(s,i)},n.now=function(){return Date.now()},n}(),xp=function(n){Cs(r,n);function r(i,s){s===void 0&&(s=bp.now);var a=n.call(this,i,function(){return r.delegate&&r.delegate!==a?r.delegate.now():s()})||this;return a.actions=[],a.active=!1,a.scheduled=void 0,a}return r.prototype.schedule=function(i,s,a){return s===void 0&&(s=0),r.delegate&&r.delegate!==this?r.delegate.schedule(i,s,a):n.prototype.schedule.call(this,i,s,a)},r.prototype.flush=function(i){var s=this.actions;if(this.active){s.push(i);return}var a;this.active=!0;do if(a=i.execute(i.state,i.delay))break;while(i=s.shift());if(this.active=!1,a){for(;i=s.shift();)i.unsubscribe();throw a}},r}(bp),Cp=new xp(_g),vh=Cp,Dd=!1,Us={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){var r=new Error;""+r.stack}Dd=n},get useDeprecatedSynchronousErrorHandling(){return Dd}};function al(n){setTimeout(function(){throw n},0)}var Vu={closed:!0,next:function(n){},error:function(n){if(Us.useDeprecatedSynchronousErrorHandling)throw n;al(n)},complete:function(){}},Dl=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),mh=null,fa=function(n){Cs(r,n);function r(i,s,a){var u=n.call(this)||this;switch(u.syncErrorValue=null,u.syncErrorThrown=!1,u.syncErrorThrowable=!1,u.isStopped=!1,arguments.length){case 0:u.destination=Vu;break;case 1:if(!i){u.destination=Vu;break}if(typeof i=="object"){i instanceof r?(u.syncErrorThrowable=i.syncErrorThrowable,u.destination=i,i.add(u)):(u.syncErrorThrowable=!0,u.destination=new yh(u,i));break}default:u.syncErrorThrowable=!0,u.destination=new yh(u,i,s,a);break}return u}return r.prototype[Dl]=function(){return this},r.create=function(i,s,a){var u=new r(i,s,a);return u.syncErrorThrowable=!1,u},r.prototype.next=function(i){this.isStopped||this._next(i)},r.prototype.error=function(i){this.isStopped||(this.isStopped=!0,this._error(i))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this))},r.prototype._next=function(i){this.destination.next(i)},r.prototype._error=function(i){this.destination.error(i),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var i=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=i,this},r}(Ma),yh=function(n){Cs(r,n);function r(i,s,a,u){var h=n.call(this)||this;h._parentSubscriber=i;var p,g=h;return Bu(s)?p=s:s&&(p=s.next,a=s.error,u=s.complete,s!==Vu&&(g=Object.create(s),Bu(g.unsubscribe)&&h.add(g.unsubscribe.bind(g)),g.unsubscribe=h.unsubscribe.bind(h))),h._context=g,h._next=p,h._error=a,h._complete=u,h}return r.prototype.next=function(i){if(!this.isStopped&&this._next){var s=this._parentSubscriber;!Us.useDeprecatedSynchronousErrorHandling||!s.syncErrorThrowable?this.__tryOrUnsub(this._next,i):this.__tryOrSetError(s,this._next,i)&&this.unsubscribe()}},r.prototype.error=function(i){if(!this.isStopped){var s=this._parentSubscriber,a=Us.useDeprecatedSynchronousErrorHandling;if(this._error)!a||!s.syncErrorThrowable?(this.__tryOrUnsub(this._error,i),this.unsubscribe()):(this.__tryOrSetError(s,this._error,i),this.unsubscribe());else if(s.syncErrorThrowable)a?(s.syncErrorValue=i,s.syncErrorThrown=!0):al(i),this.unsubscribe();else{if(this.unsubscribe(),a)throw i;al(i)}}},r.prototype.complete=function(){var i=this;if(!this.isStopped){var s=this._parentSubscriber;if(this._complete){var a=function(){return i._complete.call(i._context)};!Us.useDeprecatedSynchronousErrorHandling||!s.syncErrorThrowable?(this.__tryOrUnsub(a),this.unsubscribe()):(this.__tryOrSetError(s,a),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(i,s){try{i.call(this._context,s)}catch(a){if(this.unsubscribe(),Us.useDeprecatedSynchronousErrorHandling)throw a;al(a)}},r.prototype.__tryOrSetError=function(i,s,a){if(!Us.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{s.call(this._context,a)}catch(u){return Us.useDeprecatedSynchronousErrorHandling?(i.syncErrorValue=u,i.syncErrorThrown=!0,!0):(al(u),!0)}return!1},r.prototype._unsubscribe=function(){var i=this._parentSubscriber;this._context=null,this._parentSubscriber=null,i.unsubscribe()},r}(fa);function vo(n){for(;n;){var r=n,i=r.closed,s=r.destination,a=r.isStopped;if(i||a)return!1;s&&s instanceof fa?n=s:n=null}return!0}function ho(n,r,i){if(n){if(n instanceof fa)return n;if(n[Dl])return n[Dl]()}return!n&&!r&&!i?new fa(Vu):new fa(n,r,i)}var ju=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Nl(n){return n}function Il(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return bh(n)}function bh(n){return n.length===0?Nl:n.length===1?n[0]:function(i){return n.reduce(function(s,a){return a(s)},i)}}var Rl=function(){function n(r){this._isScalar=!1,r&&(this._subscribe=r)}return n.prototype.lift=function(r){var i=new n;return i.source=this,i.operator=r,i},n.prototype.subscribe=function(r,i,s){var a=this.operator,u=ho(r,i,s);if(a?u.add(a.call(u,this.source)):u.add(this.source||Us.useDeprecatedSynchronousErrorHandling&&!u.syncErrorThrowable?this._subscribe(u):this._trySubscribe(u)),Us.useDeprecatedSynchronousErrorHandling&&u.syncErrorThrowable&&(u.syncErrorThrowable=!1,u.syncErrorThrown))throw u.syncErrorValue;return u},n.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(i){Us.useDeprecatedSynchronousErrorHandling&&(r.syncErrorThrown=!0,r.syncErrorValue=i),vo(r)?r.error(i):console.warn(i)}},n.prototype.forEach=function(r,i){var s=this;return i=wp(i),new i(function(a,u){var h;h=s.subscribe(function(p){try{r(p)}catch(g){u(g),h&&h.unsubscribe()}},u,a)})},n.prototype._subscribe=function(r){var i=this.source;return i&&i.subscribe(r)},n.prototype[ju]=function(){return this},n.prototype.pipe=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return r.length===0?this:bh(r)(this)},n.prototype.toPromise=function(r){var i=this;return r=wp(r),new r(function(s,a){var u;i.subscribe(function(h){return u=h},function(h){return a(h)},function(){return s(u)})})},n.create=function(r){return new n(r)},n}();function wp(n){if(n||(n=Us.Promise||Promise),!n)throw new Error("no Promise impl found");return n}var lu=function(){function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n}(),Hu=lu,S=function(n){Cs(r,n);function r(i,s){var a=n.call(this)||this;return a.subject=i,a.subscriber=s,a.closed=!1,a}return r.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var i=this.subject,s=i.observers;if(this.subject=null,!(!s||s.length===0||i.isStopped||i.closed)){var a=s.indexOf(this.subscriber);a!==-1&&s.splice(a,1)}}},r}(Ma),I=function(n){Cs(r,n);function r(i){var s=n.call(this,i)||this;return s.destination=i,s}return r}(fa),U=function(n){Cs(r,n);function r(){var i=n.call(this)||this;return i.observers=[],i.closed=!1,i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return r.prototype[Dl]=function(){return new I(this)},r.prototype.lift=function(i){var s=new W(this,this);return s.operator=i,s},r.prototype.next=function(i){if(this.closed)throw new Hu;if(!this.isStopped)for(var s=this.observers,a=s.length,u=s.slice(),h=0;h<a;h++)u[h].next(i)},r.prototype.error=function(i){if(this.closed)throw new Hu;this.hasError=!0,this.thrownError=i,this.isStopped=!0;for(var s=this.observers,a=s.length,u=s.slice(),h=0;h<a;h++)u[h].error(i);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new Hu;this.isStopped=!0;for(var i=this.observers,s=i.length,a=i.slice(),u=0;u<s;u++)a[u].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(i){if(this.closed)throw new Hu;return n.prototype._trySubscribe.call(this,i)},r.prototype._subscribe=function(i){if(this.closed)throw new Hu;return this.hasError?(i.error(this.thrownError),Ma.EMPTY):this.isStopped?(i.complete(),Ma.EMPTY):(this.observers.push(i),new S(this,i))},r.prototype.asObservable=function(){var i=new Rl;return i.source=this,i},r.create=function(i,s){return new W(i,s)},r}(Rl),W=function(n){Cs(r,n);function r(i,s){var a=n.call(this)||this;return a.destination=i,a.source=s,a}return r.prototype.next=function(i){var s=this.destination;s&&s.next&&s.next(i)},r.prototype.error=function(i){var s=this.destination;s&&s.error&&this.destination.error(i)},r.prototype.complete=function(){var i=this.destination;i&&i.complete&&this.destination.complete()},r.prototype._subscribe=function(i){var s=this.source;return s?this.source.subscribe(i):Ma.EMPTY},r}(U),se=function(n){Cs(r,n);function r(i){var s=n.call(this)||this;return s._value=i,s}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(i){var s=n.prototype._subscribe.call(this,i);return s&&!s.closed&&i.next(this._value),s},r.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Hu;return this._value},r.prototype.next=function(i){n.prototype.next.call(this,this._value=i)},r}(U);function le(n,r){return function(i){return i.lift(new Ce(n,r))}}var Ce=function(){function n(r,i){this.compare=r,this.keySelector=i}return n.prototype.call=function(r,i){return i.subscribe(new Ke(r,this.compare,this.keySelector))},n}(),Ke=function(n){Cs(r,n);function r(i,s,a){var u=n.call(this,i)||this;return u.keySelector=a,u.hasKey=!1,typeof s=="function"&&(u.compare=s),u}return r.prototype.compare=function(i,s){return i===s},r.prototype._next=function(i){var s;try{var a=this.keySelector;s=a?a(i):i}catch(p){return this.destination.error(p)}var u=!1;if(this.hasKey)try{var h=this.compare;u=h(this.key,s)}catch(p){return this.destination.error(p)}else this.hasKey=!0;u||(this.key=s,this.destination.next(i))},r}(fa);function Je(n,r){return function(s){return s.lift(new mt(n,r))}}var mt=function(){function n(r,i){this.predicate=r,this.thisArg=i}return n.prototype.call=function(r,i){return i.subscribe(new zt(r,this.predicate,this.thisArg))},n}(),zt=function(n){Cs(r,n);function r(i,s,a){var u=n.call(this,i)||this;return u.predicate=s,u.thisArg=a,u.count=0,u}return r.prototype._next=function(i){var s;try{s=this.predicate.call(this.thisArg,i,this.count++)}catch(a){this.destination.error(a);return}s&&this.destination.next(i)},r}(fa),xn=function(n){return function(r){for(var i=0,s=n.length;i<s&&!r.closed;i++)r.next(n[i]);r.complete()}},Nt=function(n){return function(r){return n.then(function(i){r.closed||(r.next(i),r.complete())},function(i){return r.error(i)}).then(null,al),r}};function Yt(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wn=Yt(),ai=null,mr=function(n){return function(r){var i=n[Wn]();do{var s=void 0;try{s=i.next()}catch(a){return r.error(a),r}if(s.done){r.complete();break}if(r.next(s.value),r.closed)break}while(!0);return typeof i.return=="function"&&r.add(function(){i.return&&i.return()}),r}},mo=function(n){return function(r){var i=n[ju]();if(typeof i.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return i.subscribe(r)}},Mo=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function pa(n){return!!n&&typeof n.subscribe!="function"&&typeof n.then=="function"}var Gr=function(n){if(!!n&&typeof n[ju]=="function")return mo(n);if(Mo(n))return xn(n);if(pa(n))return Nt(n);if(!!n&&typeof n[Wn]=="function")return mr(n);var r=Pd(n)?"an invalid object":"'"+n+"'",i="You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(i)},Rr=function(n){Cs(r,n);function r(i){var s=n.call(this)||this;return s.parent=i,s}return r.prototype._next=function(i){this.parent.notifyNext(i)},r.prototype._error=function(i){this.parent.notifyError(i),this.unsubscribe()},r.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},r}(fa),fi=function(n){Cs(r,n);function r(i,s,a){var u=n.call(this)||this;return u.parent=i,u.outerValue=s,u.outerIndex=a,u}return r.prototype._next=function(i){this.parent.notifyNext(this.outerValue,i,this.outerIndex,this)},r.prototype._error=function(i){this.parent.notifyError(i),this.unsubscribe()},r.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},r}(fa),Ni=function(n){Cs(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.notifyNext=function(i){this.destination.next(i)},r.prototype.notifyError=function(i){this.destination.error(i)},r.prototype.notifyComplete=function(){this.destination.complete()},r}(fa),Lo=function(n){Cs(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.notifyNext=function(i,s,a,u){this.destination.next(s)},r.prototype.notifyError=function(i){this.destination.error(i)},r.prototype.notifyComplete=function(i){this.destination.complete()},r}(fa);function Oa(n,r){if(!r.closed){if(n instanceof Rl)return n.subscribe(r);var i;try{i=Gr(n)(r)}catch(s){r.error(s)}return i}}var kl={leading:!0,trailing:!1};function Fs(n,r){return r===void 0&&(r=kl),function(i){return i.lift(new Pa(n,!!r.leading,!!r.trailing))}}var Pa=null,Vs=function(n){Cs(r,n);function r(i,s,a,u){var h=n.call(this,i)||this;return h.destination=i,h.durationSelector=s,h._leading=a,h._trailing=u,h._hasValue=!1,h}return r.prototype._next=function(i){this._hasValue=!0,this._sendValue=i,this._throttled||(this._leading?this.send():this.throttle(i))},r.prototype.send=function(){var i=this,s=i._hasValue,a=i._sendValue;s&&(this.destination.next(a),this.throttle(a)),this._hasValue=!1,this._sendValue=void 0},r.prototype.throttle=function(i){var s=this.tryDurationSelector(i);s&&this.add(this._throttled=Oa(s,new Rr(this)))},r.prototype.tryDurationSelector=function(i){try{return this.durationSelector(i)}catch(s){return this.destination.error(s),null}},r.prototype.throttlingDone=function(){var i=this,s=i._throttled,a=i._trailing;s&&s.unsubscribe(),this._throttled=void 0,a&&this.send()},r.prototype.notifyNext=function(){this.throttlingDone()},r.prototype.notifyComplete=function(){this.throttlingDone()},r}(Ni);function Ko(n,r,i){return r===void 0&&(r=vh),i===void 0&&(i=kl),function(s){return s.lift(new Da(n,r,i.leading,i.trailing))}}var Da=function(){function n(r,i,s,a){this.duration=r,this.scheduler=i,this.leading=s,this.trailing=a}return n.prototype.call=function(r,i){return i.subscribe(new js(r,this.duration,this.scheduler,this.leading,this.trailing))},n}(),js=function(n){Cs(r,n);function r(i,s,a,u,h){var p=n.call(this,i)||this;return p.duration=s,p.scheduler=a,p.leading=u,p.trailing=h,p._hasTrailingValue=!1,p._trailingValue=null,p}return r.prototype._next=function(i){this.throttled?this.trailing&&(this._trailingValue=i,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Uc,this.duration,{subscriber:this})),this.leading?this.destination.next(i):this.trailing&&(this._trailingValue=i,this._hasTrailingValue=!0))},r.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},r.prototype.clearThrottle=function(){var i=this.throttled;i&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),i.unsubscribe(),this.remove(i),this.throttled=null)},r}(fa);function Uc(n){var r=n.subscriber;r.clearThrottle()}function Oo(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(!1)var a,u;throw Error("[Immer] minified error nr: "+n+(i.length?" "+i.map(function(h){return"'"+h+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Bs(n){return!!n&&!!n[Tt]}function Xa(n){return!!n&&(function(r){if(!r||typeof r!="object")return!1;var i=Object.getPrototypeOf(r);if(i===null)return!0;var s=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===Ut}(n)||Array.isArray(n)||!!n[lt]||!!n.constructor[lt]||Na(n)||uu(n))}function ao(n){return Bs(n)||Oo(23,n),n[Tt].t}function ws(n,r,i){i===void 0&&(i=!1),Ac(n)===0?(i?Object.keys:Bn)(n).forEach(function(s){i&&typeof s=="symbol"||r(s,n[s],n)}):n.forEach(function(s,a){return r(a,s,n)})}function Ac(n){var r=n[Tt];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:Na(n)?2:uu(n)?3:0}function cc(n,r){return Ac(n)===2?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function Ll(n,r){return Ac(n)===2?n.get(r):n[r]}function Os(n,r,i){var s=Ac(n);s===2?n.set(r,i):s===3?(n.delete(r),n.add(i)):n[r]=i}function $u(n,r){return n===r?n!==0||1/n==1/r:n!=n&&r!=r}function Na(n){return Id&&n instanceof Map}function uu(n){return Yu&&n instanceof Set}function qo(n){return n.o||n.t}function Wu(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=Zn(n);delete r[Tt];for(var i=Bn(r),s=0;s<i.length;s++){var a=i[s],u=r[a];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[a]={configurable:!0,writable:!0,enumerable:u.enumerable,value:n[a]})}return Object.create(Object.getPrototypeOf(n),r)}function Gl(n,r){return r===void 0&&(r=!1),xh(n)||Bs(n)||!Xa(n)||(Ac(n)>1&&(n.set=n.add=n.clear=n.delete=cl),Object.freeze(n),r&&ws(n,function(i,s){return Gl(s,!0)},!0)),n}function cl(){Oo(2)}function xh(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function Ia(n){var r=wr[n];return r||Oo(18,n),r}function Za(n,r){wr[n]||(wr[n]=r)}function du(){return bo}function Xu(n,r){r&&(Ia("Patches"),n.u=[],n.s=[],n.v=r)}function ga(n){Jo(n),n.p.forEach(hu),n.p=null}function Jo(n){n===bo&&(bo=n.l)}function va(n){return bo={p:[],l:bo,h:n,m:!0,_:0}}function hu(n){var r=n[Tt];r.i===0||r.i===1?r.j():r.O=!0}function Zu(n,r){r._=r.p.length;var i=r.p[0],s=n!==void 0&&n!==i;return r.h.g||Ia("ES5").S(r,n,s),s?(i[Tt].P&&(ga(r),Oo(4)),Xa(n)&&(n=Fl(r,n),r.l||Ya(r,n)),r.u&&Ia("Patches").M(i[Tt].t,n,r.u,r.s)):n=Fl(r,i,[]),ga(r),r.u&&r.v(r.u,r.s),n!==Ye?n:void 0}function Fl(n,r,i){if(xh(r))return r;var s=r[Tt];if(!s)return ws(r,function(u,h){return fo(n,s,r,u,h,i)},!0),r;if(s.A!==n)return r;if(!s.P)return Ya(n,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var a=s.i===4||s.i===5?s.o=Wu(s.k):s.o;ws(s.i===3?new Set(a):a,function(u,h){return fo(n,s,a,u,h,i)}),Ya(n,a,!1),i&&n.u&&Ia("Patches").R(s,i,n.u,n.s)}return s.o}function fo(n,r,i,s,a,u){if(Bs(a)){var h=Fl(n,a,u&&r&&r.i!==3&&!cc(r.D,s)?u.concat(s):void 0);if(Os(i,s,h),!Bs(h))return;n.m=!1}if(Xa(a)&&!xh(a)){if(!n.h.F&&n._<1)return;Fl(n,a),r&&r.A.l||Ya(n,a)}}function Ya(n,r,i){i===void 0&&(i=!1),n.h.F&&n.m&&Gl(r,i)}function $o(n,r){var i=n[Tt];return(i?qo(i):n)[r]}function ma(n,r){if(r in n)for(var i=Object.getPrototypeOf(n);i;){var s=Object.getOwnPropertyDescriptor(i,r);if(s)return s;i=Object.getPrototypeOf(i)}}function Qs(n){n.P||(n.P=!0,n.l&&Qs(n.l))}function Ch(n){n.o||(n.o=Wu(n.t))}function Nd(n,r,i){var s=Na(r)?Ia("MapSet").N(r,i):uu(r)?Ia("MapSet").T(r,i):n.g?function(a,u){var h=Array.isArray(a),p={i:h?1:0,A:u?u.A:du(),P:!1,I:!1,D:{},l:u,t:a,k:null,o:null,j:null,C:!1},g=p,y=yr;h&&(g=[p],y=Tr);var b=Proxy.revocable(g,y),E=b.revoke,T=b.proxy;return p.k=T,p.j=E,T}(r,i):Ia("ES5").J(r,i);return(i?i.A:du()).p.push(s),s}function _f(n){return Bs(n)||Oo(22,n),function r(i){if(!Xa(i))return i;var s,a=i[Tt],u=Ac(i);if(a){if(!a.P&&(a.i<4||!Ia("ES5").K(a)))return a.t;a.I=!0,s=Af(i,u),a.I=!1}else s=Af(i,u);return ws(s,function(h,p){a&&Ll(a.t,h)===p||Os(s,h,r(p))}),u===3?new Set(s):s}(n)}function Af(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return Wu(n)}function lc(){function n(h,p){var g=u[h];return g?g.enumerable=p:u[h]=g={configurable:!0,enumerable:p,get:function(){var y=this[Tt];return yr.get(y,h)},set:function(y){var b=this[Tt];yr.set(b,h,y)}},g}function r(h){for(var p=h.length-1;p>=0;p--){var g=h[p][Tt];if(!g.P)switch(g.i){case 5:s(g)&&Qs(g);break;case 4:i(g)&&Qs(g)}}}function i(h){for(var p=h.t,g=h.k,y=Bn(g),b=y.length-1;b>=0;b--){var E=y[b];if(E!==Tt){var T=p[E];if(T===void 0&&!cc(p,E))return!0;var O=g[E],N=O&&O[Tt];if(N?N.t!==T:!$u(O,T))return!0}}var k=!!p[Tt];return y.length!==Bn(p).length+(k?0:1)}function s(h){var p=h.k;if(p.length!==h.t.length)return!0;var g=Object.getOwnPropertyDescriptor(p,p.length-1);if(g&&!g.get)return!0;for(var y=0;y<p.length;y++)if(!p.hasOwnProperty(y))return!0;return!1}function a(h){h.O&&Oo(3,JSON.stringify(qo(h)))}var u={};Za("ES5",{J:function(h,p){var g=Array.isArray(h),y=function(E,T){if(E){for(var O=Array(T.length),N=0;N<T.length;N++)Object.defineProperty(O,""+N,n(N,!0));return O}var k=Zn(T);delete k[Tt];for(var B=Bn(k),$=0;$<B.length;$++){var X=B[$];k[X]=n(X,E||!!k[X].enumerable)}return Object.create(Object.getPrototypeOf(T),k)}(g,h),b={i:g?5:4,A:p?p.A:du(),P:!1,I:!1,D:{},l:p,t:h,k:y,o:null,O:!1,C:!1};return Object.defineProperty(y,Tt,{value:b,writable:!0}),y},S:function(h,p,g){g?Bs(p)&&p[Tt].A===h&&r(h.p):(h.u&&function y(b){if(b&&typeof b=="object"){var E=b[Tt];if(E){var T=E.t,O=E.k,N=E.D,k=E.i;if(k===4)ws(O,function(be){be!==Tt&&(T[be]!==void 0||cc(T,be)?N[be]||y(O[be]):(N[be]=!0,Qs(E)))}),ws(T,function(be){O[be]!==void 0||cc(O,be)||(N[be]=!1,Qs(E))});else if(k===5){if(s(E)&&(Qs(E),N.length=!0),O.length<T.length)for(var B=O.length;B<T.length;B++)N[B]=!1;else for(var $=T.length;$<O.length;$++)N[$]=!0;for(var X=Math.min(O.length,T.length),ne=0;ne<X;ne++)O.hasOwnProperty(ne)||(N[ne]=!0),N[ne]===void 0&&y(O[ne])}}}}(h.p[0]),r(h.p))},K:function(h){return h.i===4?i(h):s(h)}})}function pt(){function n(s){if(!Xa(s))return s;if(Array.isArray(s))return s.map(n);if(Na(s))return new Map(Array.from(s.entries()).map(function(h){return[h[0],n(h[1])]}));if(uu(s))return new Set(Array.from(s).map(n));var a=Object.create(Object.getPrototypeOf(s));for(var u in s)a[u]=n(s[u]);return cc(s,lt)&&(a[lt]=s[lt]),a}function r(s){return Bs(s)?n(s):s}var i="add";Za("Patches",{$:function(s,a){return a.forEach(function(u){for(var h=u.path,p=u.op,g=s,y=0;y<h.length-1;y++){var b=Ac(g),E=""+h[y];b!==0&&b!==1||E!=="__proto__"&&E!=="constructor"||Oo(24),typeof g=="function"&&E==="prototype"&&Oo(24),typeof(g=Ll(g,E))!="object"&&Oo(15,h.join("/"))}var T=Ac(g),O=n(u.value),N=h[h.length-1];switch(p){case"replace":switch(T){case 2:return g.set(N,O);case 3:Oo(16);default:return g[N]=O}case i:switch(T){case 1:return N==="-"?g.push(O):g.splice(N,0,O);case 2:return g.set(N,O);case 3:return g.add(O);default:return g[N]=O}case"remove":switch(T){case 1:return g.splice(N,1);case 2:return g.delete(N);case 3:return g.delete(u.value);default:return delete g[N]}default:Oo(17,p)}}),s},R:function(s,a,u,h){switch(s.i){case 0:case 4:case 2:return function(p,g,y,b){var E=p.t,T=p.o;ws(p.D,function(O,N){var k=Ll(E,O),B=Ll(T,O),$=N?cc(E,O)?"replace":i:"remove";if(k!==B||$!=="replace"){var X=g.concat(O);y.push($==="remove"?{op:$,path:X}:{op:$,path:X,value:B}),b.push($===i?{op:"remove",path:X}:$==="remove"?{op:i,path:X,value:r(k)}:{op:"replace",path:X,value:r(k)})}})}(s,a,u,h);case 5:case 1:return function(p,g,y,b){var E=p.t,T=p.D,O=p.o;if(O.length<E.length){var N=[O,E];E=N[0],O=N[1];var k=[b,y];y=k[0],b=k[1]}for(var B=0;B<E.length;B++)if(T[B]&&O[B]!==E[B]){var $=g.concat([B]);y.push({op:"replace",path:$,value:r(O[B])}),b.push({op:"replace",path:$,value:r(E[B])})}for(var X=E.length;X<O.length;X++){var ne=g.concat([X]);y.push({op:i,path:ne,value:r(O[X])})}E.length<O.length&&b.push({op:"replace",path:g.concat(["length"]),value:E.length})}(s,a,u,h);case 3:return function(p,g,y,b){var E=p.t,T=p.o,O=0;E.forEach(function(N){if(!T.has(N)){var k=g.concat([O]);y.push({op:"remove",path:k,value:N}),b.unshift({op:i,path:k,value:N})}O++}),O=0,T.forEach(function(N){if(!E.has(N)){var k=g.concat([O]);y.push({op:i,path:k,value:N}),b.unshift({op:"remove",path:k,value:N})}O++})}(s,a,u,h)}},M:function(s,a,u,h){u.push({op:"replace",path:[],value:a===Ye?void 0:a}),h.push({op:"replace",path:[],value:s})}})}function Qt(){function n(p,g){function y(){this.constructor=p}a(p,g),p.prototype=(y.prototype=g.prototype,new y)}function r(p){p.o||(p.D=new Map,p.o=new Map(p.t))}function i(p){p.o||(p.o=new Set,p.t.forEach(function(g){if(Xa(g)){var y=Nd(p.A.h,g,p);p.p.set(g,y),p.o.add(y)}else p.o.add(g)}))}function s(p){p.O&&Oo(3,JSON.stringify(qo(p)))}var a=function(p,g){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var E in b)b.hasOwnProperty(E)&&(y[E]=b[E])})(p,g)},u=function(){function p(y,b){return this[Tt]={i:2,l:b,A:b?b.A:du(),P:!1,I:!1,o:void 0,D:void 0,t:y,k:this,C:!1,O:!1},this}n(p,Map);var g=p.prototype;return Object.defineProperty(g,"size",{get:function(){return qo(this[Tt]).size}}),g.has=function(y){return qo(this[Tt]).has(y)},g.set=function(y,b){var E=this[Tt];return s(E),qo(E).has(y)&&qo(E).get(y)===b||(r(E),Qs(E),E.D.set(y,!0),E.o.set(y,b),E.D.set(y,!0)),this},g.delete=function(y){if(!this.has(y))return!1;var b=this[Tt];return s(b),r(b),Qs(b),b.t.has(y)?b.D.set(y,!1):b.D.delete(y),b.o.delete(y),!0},g.clear=function(){var y=this[Tt];s(y),qo(y).size&&(r(y),Qs(y),y.D=new Map,ws(y.t,function(b){y.D.set(b,!1)}),y.o.clear())},g.forEach=function(y,b){var E=this;qo(this[Tt]).forEach(function(T,O){y.call(b,E.get(O),O,E)})},g.get=function(y){var b=this[Tt];s(b);var E=qo(b).get(y);if(b.I||!Xa(E)||E!==b.t.get(y))return E;var T=Nd(b.A.h,E,b);return r(b),b.o.set(y,T),T},g.keys=function(){return qo(this[Tt]).keys()},g.values=function(){var y,b=this,E=this.keys();return(y={})[yt]=function(){return b.values()},y.next=function(){var T=E.next();return T.done?T:{done:!1,value:b.get(T.value)}},y},g.entries=function(){var y,b=this,E=this.keys();return(y={})[yt]=function(){return b.entries()},y.next=function(){var T=E.next();if(T.done)return T;var O=b.get(T.value);return{done:!1,value:[T.value,O]}},y},g[yt]=function(){return this.entries()},p}(),h=function(){function p(y,b){return this[Tt]={i:3,l:b,A:b?b.A:du(),P:!1,I:!1,o:void 0,t:y,k:this,p:new Map,O:!1,C:!1},this}n(p,Set);var g=p.prototype;return Object.defineProperty(g,"size",{get:function(){return qo(this[Tt]).size}}),g.has=function(y){var b=this[Tt];return s(b),b.o?!!b.o.has(y)||!(!b.p.has(y)||!b.o.has(b.p.get(y))):b.t.has(y)},g.add=function(y){var b=this[Tt];return s(b),this.has(y)||(i(b),Qs(b),b.o.add(y)),this},g.delete=function(y){if(!this.has(y))return!1;var b=this[Tt];return s(b),i(b),Qs(b),b.o.delete(y)||!!b.p.has(y)&&b.o.delete(b.p.get(y))},g.clear=function(){var y=this[Tt];s(y),qo(y).size&&(i(y),Qs(y),y.o.clear())},g.values=function(){var y=this[Tt];return s(y),i(y),y.o.values()},g.entries=function(){var y=this[Tt];return s(y),i(y),y.o.entries()},g.keys=function(){return this.values()},g[yt]=function(){return this.values()},g.forEach=function(y,b){for(var E=this.values(),T=E.next();!T.done;)y.call(b,T.value,T.value,this),T=E.next()},p}();Za("MapSet",{N:function(p,g){return new u(p,g)},T:function(p,g){return new h(p,g)}})}function Ft(){lc(),Qt(),pt()}function or(n){return n}function Hr(n){return n}var Yi,bo,Ji=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Id=typeof Map<"u",Yu=typeof Set<"u",Te=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Ye=Ji?Symbol.for("immer-nothing"):((Yi={})["immer-nothing"]=!0,Yi),lt=Ji?Symbol.for("immer-draftable"):"__$immer_draftable",Tt=Ji?Symbol.for("immer-state"):"__$immer_state",yt=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",an={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(n){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+n},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(n){return"Cannot apply patch, path doesn't resolve: "+n},16:'Sets cannot have "replace" patches.',17:function(n){return"Unsupported patch operation: "+n},18:function(n){return"The plugin for '"+n+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+n+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(n){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+n+"'"},22:function(n){return"'current' expects a draft, got: "+n},23:function(n){return"'original' expects a draft, got: "+n},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Ut=""+Object.prototype.constructor,Bn=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,Zn=Object.getOwnPropertyDescriptors||function(n){var r={};return Bn(n).forEach(function(i){r[i]=Object.getOwnPropertyDescriptor(n,i)}),r},wr={},yr={get:function(n,r){if(r===Tt)return n;var i=qo(n);if(!cc(i,r))return function(a,u,h){var p,g=ma(u,h);return g?"value"in g?g.value:(p=g.get)===null||p===void 0?void 0:p.call(a.k):void 0}(n,i,r);var s=i[r];return n.I||!Xa(s)?s:s===$o(n.t,r)?(Ch(n),n.o[r]=Nd(n.A.h,s,n)):s},has:function(n,r){return r in qo(n)},ownKeys:function(n){return Reflect.ownKeys(qo(n))},set:function(n,r,i){var s=ma(qo(n),r);if(s?.set)return s.set.call(n.k,i),!0;if(!n.P){var a=$o(qo(n),r),u=a?.[Tt];if(u&&u.t===i)return n.o[r]=i,n.D[r]=!1,!0;if($u(i,a)&&(i!==void 0||cc(n.t,r)))return!0;Ch(n),Qs(n)}return n.o[r]===i&&typeof i!="number"&&(i!==void 0||r in n.o)||(n.o[r]=i,n.D[r]=!0,!0)},deleteProperty:function(n,r){return $o(n.t,r)!==void 0||r in n.t?(n.D[r]=!1,Ch(n),Qs(n)):delete n.D[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var i=qo(n),s=Reflect.getOwnPropertyDescriptor(i,r);return s&&{writable:!0,configurable:n.i!==1||r!=="length",enumerable:s.enumerable,value:i[r]}},defineProperty:function(){Oo(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){Oo(12)}},Tr={};ws(yr,function(n,r){Tr[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}}),Tr.deleteProperty=function(n,r){return Tr.set.call(this,n,r,void 0)},Tr.set=function(n,r,i){return yr.set.call(this,n[0],r,i,n[0])};var Ci=function(){function n(i){var s=this;this.g=Te,this.F=!0,this.produce=function(a,u,h){if(typeof a=="function"&&typeof u!="function"){var p=u;u=a;var g=s;return function(k){var B=this;k===void 0&&(k=p);for(var $=arguments.length,X=Array($>1?$-1:0),ne=1;ne<$;ne++)X[ne-1]=arguments[ne];return g.produce(k,function(be){var me;return(me=u).call.apply(me,[B,be].concat(X))})}}var y;if(typeof u!="function"&&Oo(6),h!==void 0&&typeof h!="function"&&Oo(7),Xa(a)){var b=va(s),E=Nd(s,a,void 0),T=!0;try{y=u(E),T=!1}finally{T?ga(b):Jo(b)}return typeof Promise<"u"&&y instanceof Promise?y.then(function(k){return Xu(b,h),Zu(k,b)},function(k){throw ga(b),k}):(Xu(b,h),Zu(y,b))}if(!a||typeof a!="object"){if((y=u(a))===void 0&&(y=a),y===Ye&&(y=void 0),s.F&&Gl(y,!0),h){var O=[],N=[];Ia("Patches").M(a,y,O,N),h(O,N)}return y}Oo(21,a)},this.produceWithPatches=function(a,u){if(typeof a=="function")return function(y){for(var b=arguments.length,E=Array(b>1?b-1:0),T=1;T<b;T++)E[T-1]=arguments[T];return s.produceWithPatches(y,function(O){return a.apply(void 0,[O].concat(E))})};var h,p,g=s.produce(a,u,function(y,b){h=y,p=b});return typeof Promise<"u"&&g instanceof Promise?g.then(function(y){return[y,h,p]}):[g,h,p]},typeof i?.useProxies=="boolean"&&this.setUseProxies(i.useProxies),typeof i?.autoFreeze=="boolean"&&this.setAutoFreeze(i.autoFreeze)}var r=n.prototype;return r.createDraft=function(i){Xa(i)||Oo(8),Bs(i)&&(i=_f(i));var s=va(this),a=Nd(this,i,void 0);return a[Tt].C=!0,Jo(s),a},r.finishDraft=function(i,s){var a=i&&i[Tt],u=a.A;return Xu(u,s),Zu(void 0,u)},r.setAutoFreeze=function(i){this.F=i},r.setUseProxies=function(i){i&&!Te&&Oo(20),this.g=i},r.applyPatches=function(i,s){var a;for(a=s.length-1;a>=0;a--){var u=s[a];if(u.path.length===0&&u.op==="replace"){i=u.value;break}}a>-1&&(s=s.slice(a+1));var h=Ia("Patches").$;return Bs(i)?h(i,s):this.produce(i,function(p){return h(p,s)})},n}(),ci=new Ci,br=ci.produce,xo=ci.produceWithPatches.bind(ci),Ui=ci.setAutoFreeze.bind(ci),ea=ci.setUseProxies.bind(ci),Po=ci.applyPatches.bind(ci),uc=ci.createDraft.bind(ci),ll=ci.finishDraft.bind(ci),Ra=null;Qt(),Ui(!1);var Ka;(function(n){n.EMPTY_VALUE=Symbol("EMPTY_MODEL_VALUE");function r(s){return s!==n.EMPTY_VALUE}n.isValidValue=r;function i(s){return s.pipe(le(),Je(a=>r(a)),Ko(17,Cp,{leading:!1,trailing:!0}))}n.defaultPipeFunction=i})(Ka||(Ka={}));class Tc{constructor(r=Ka.EMPTY_VALUE,i=30){this.toDispose=new un,this.watch=(s,a=Ka.defaultPipeFunction)=>{this.subject$.observers.length+1>this.maxSubscription&&console.warn(`${this.subject$} reach maxSubscription limitation, please check`);const h=(a?a(this.subject$):this.subject$).subscribe(s);return Mt.create(()=>{h.unsubscribe()})},this.getValue=()=>this.subject$.getValue(),this.setValue=s=>{if(!!this.subject$){if(typeof s=="function"){const a=this.subject$.getValue(),u=br(a,h=>{s(h)});Ka.isValidValue(u)&&this.setValue(u);return}this.subject$.next(s)}},this.hasValidValue=()=>{const s=this.getValue();return Ka.isValidValue(s)},this.getValidValue=()=>(0,F.mG)(this,void 0,void 0,function*(){const s=new Qn;if(this.hasValidValue())return this.getValue();const a=this.watch(u=>{Ka.isValidValue(u)&&(s.resolve(u),a.dispose())});return s.promise}),this.dispose=()=>{this.toDispose.dispose()},this.subject$=new se(r||Ka.EMPTY_VALUE),this.maxSubscription=i,this.toDispose.push(Mt.create(()=>{this.subject$.complete(),this.subject$.unsubscribe(),this.subject$=null}))}}const Vc=pe.defineToken("IFrontendApplicationContribution"),fu=Symbol("IGraphCommandService"),li=pe.defineToken("ICommandHandler"),pi=Symbol("ICommandContextProvider"),wh=Symbol("IGraphCommandFactory"),pu=pe.defineToken("IGraphCommandContribution");var Eh;(function(n){function r(a){return!!a&&a===Object(a)&&"id"in a}n.is=r;function i(a,u){if(a.label&&u.label){const h=(a.category?`${a.category}: ${a.label}`:a.label).toLowerCase(),p=(u.category?`${u.category}: ${u.label}`:u.label).toLowerCase();return h.localeCompare(p)}else return 0}n.compareCommands=i;function s(a,u){return a.id===u.id&&a.label===u.label&&a.iconName===u.iconName&&a.category===u.category}n.equals=s})(Eh||(Eh={}));let Ag=class{constructor(r){this.contributionProvider=r,this.redoStack=[],this.undoStack=[],this.commands=new Map,this.factories=new Map,this.disposables=new Map,this.cmdChangeEvent=new Tc(null),this.Globals=new Tc(new Map),this.setGlobal=(i,s)=>{this.Globals.setValue(a=>{a.set(i,s)})},this.getGlobal=i=>this.Globals.getValue().get(i),this.undoCommand=()=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.undoStack.pop();if(!i){console.error("empty undo stack");return}yield i.undo(),this.redoStack.push(i),this.cmdChangeEvent.setValue(null)}),this.redoCommand=()=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.redoStack.pop();if(!i){console.error("empty undo stack");return}yield i.redo(),this.undoStack.push(i),this.cmdChangeEvent.setValue(null)}),this.registerDisposableCommand=i=>{const s=new un;return i({registerCommand:(u,h)=>{const p=this.registerCommand(u,h);return s.push(p),p}}),s}}get watchChange(){return this.cmdChangeEvent.watch}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerGraphCommands(this)}executeCommandPipeline(r){return(0,F.mG)(this,void 0,void 0,function*(){let i=null;for(const s of r){const a=i?.contextProvider(),{args:u,hooks:h}=yield s?.getCommandOption(a);i=yield this.executeCommand(s?.commandId,u,h)}return this.cmdChangeEvent.setValue(null),i})}executeCommand(r,i,s=[]){return(0,F.mG)(this,void 0,void 0,function*(){const a=this.getFactory(r);if(a){const u=yield a.createCommand(r,i,s);return yield u.execute(),u.isUndoable()&&this.undoStack.push(u),this.cmdChangeEvent.setValue(null),u}throw Object.assign(new Error(`The command '${r}' cannot be executed. There are no active handlers available for the command.`),{code:"NO_ACTIVE_HANDLER"})})}executeUndoCommand(r,i,s=[]){return(0,F.mG)(this,void 0,void 0,function*(){const a=this.getFactory(r);if(a){const u=yield a.createCommand(r,i,s);return yield u.execute(),u}throw Object.assign(new Error(`The command '${r}' cannot be executed. There are no active handlers available for the command.`),{code:"NO_ACTIVE_HANDLER"})})}createCommand(r,i,s=[]){return(0,F.mG)(this,void 0,void 0,function*(){const a=this.getFactory(r);if(a)return yield a.createCommand(r,i,s);throw Object.assign(new Error(`The command '${r}' cannot be executed. There are no active handlers available for the command.`),{code:"NO_ACTIVE_HANDLER"})})}get isUndoable(){return this.undoStack.length>0}get isRedoable(){return this.redoStack.length>0}hasCommand(r){return this.commands.has(r)}getCommand(r){return this.commands.get(r)}registerCommand(r,i){if(this.factories.has(r.id))return console.warn(`A command ${r.id} is already registered.`),Mt.NULL;const s=new un(this.doRegisterCommand(r),this.registerFactory(r.id,i),Mt.create(()=>this.disposables.delete(r.id)));return this.disposables.set(r.id,s),s}doRegisterCommand(r){return this.commands.set(r.id,r),Mt.create(()=>this.disposables.delete(r.id))}unregisterCommand(r){const i=Eh.is(r)?r.id:r,s=this.disposables.get(i);s&&s.dispose()}hasFactory(r){return!!this.factories.get(r)}getFactory(r){return this.factories.get(r)}registerFactory(r,i,s=!1){return this.hasFactory(r)&&s===!1&&console.error("cannot register command:",r),this.factories.set(r,i),Mt.create(()=>{this.factories.delete(r)})}getAllFactories(){return Array.from(this.factories.entries())}};Ag=(0,F.gn)([cn({contrib:[Vc,fu]}),(0,F.fM)(0,oi(pu)),(0,F.w6)("design:paramtypes",[Object])],Ag);const Tf=Zo(n=>{Hi.register(n,pu),n(Ag)}),Ku=pe.defineToken("IModelService"),dc=pe.defineToken("IModelContribution"),cs=Symbol("IModelOptionProvider");var Es;(function(n){n.ASYNC_SRRIES="ASYNC_SRRIES",n.ASYNC_PARALLEL="ASYNC_PARALLEL"})(Es||(Es={}));var A0=M(94633),Ep=M.n(A0),qu;(function(n){let r;(function(a){a.INVALID_HOOK_BEFORE="INVALID_HOOK_BEFORE",a.INVALID_HOOK_AFTER="INVALID_HOOK_AFTER",a.INVALID_HOOK_ARGS_LENGTH="INVALID_HOOK_ARGS_LENGTH"})(r=n.ErrorEnum||(n.ErrorEnum={}));class i extends Error{constructor(u,h,...p){Array.isArray(h)&&(h=h.filter(function(g){return!!g}).join(" ")),super(`${u}: ${h}`),Error.captureStackTrace&&Error.captureStackTrace(this,i),this.code=u,this.contexts={},p.forEach(g=>{typeof g=="object"&&Object.entries(g).forEach(y=>{const[b,E]=y;b!=="key"&&E&&(this.contexts[b]=JSON.parse(JSON.stringify(E)))})})}toString(){return`${this.code}: ${this.message}`}}n.HookError=i;const s=(a,u,...h)=>new i(a,u,...h);n.HookBeforeError=()=>s(r.INVALID_HOOK_BEFORE,["hook require a before dependency but not exist in hookmap"]),n.HookAfterError=()=>s(r.INVALID_HOOK_AFTER,["hook require a after dependency but not exist in hookmap"]),n.InvalidHookArguments=a=>s(r.INVALID_HOOK_ARGS_LENGTH,["hook handlers must have 0 to 2 arguments",`but got ${a.handler.length}`])})(qu||(qu={}));var Mf;(function(n){n.normalize=(r=[],i)=>{const s=Array.isArray(r)?r:[r],a=[];return i.forEach(u=>{a.push(u)}),[...a,...s].filter(u=>u&&!!u.handler)},n.sort=(r=[],i)=>{const s=[];return r.forEach(u=>{if(u.before){if(!i.has(u.before))throw qu.HookBeforeError();const h=[u,i.get(u.before)];s.push(h)}if(u.after){if(!i.has(u.after))throw qu.HookBeforeError();const h=[i.get(u.after),u];s.push(h)}}),Ep().array(r,s)}})(Mf||(Mf={}));class Sp{constructor(){this.isResolved=!1,this.isRejected=!1,this.promise=new Promise((r,i)=>{this.resolve=s=>{this.isResolved=!0,r(s)},this.reject=s=>{this.isRejected=!0,i(s)}})}}class ka{constructor(r){this.scheduleType=Es.ASYNC_SRRIES,this.hasHook=i=>this.hookMap.has(i),this.getHooks=(i=[],s=!0)=>{const a=Mf.normalize(i,this.hookMap);return s?Mf.sort(a,this.hookMap):a},this.registerHook=i=>(this.hookMap.has(i.name)&&console.error(`${i.name} is duplicated in hookmap`),this.hookMap.set(i.name,i),{dispose:()=>{this.hookMap.delete(i.name)}}),this.call=(i,s=u=>(0,F.mG)(this,void 0,void 0,function*(){return u}),a=[])=>(0,F.mG)(this,void 0,void 0,function*(){const u=this.getHooks(a,!0);return this.schedulers[this.scheduleType](i,s,u)}),this.schedulers={[Es.ASYNC_SRRIES]:(i,s,a=[])=>(0,F.mG)(this,void 0,void 0,function*(){let u=s;for(const h of a){if([0,1].includes(h.handler.length)){yield h.handler.call(this,i);continue}if([2].includes(h.handler.length)&&u!==null){const g=yield h.handler.call(this,i,u);if(g===null){u=null;break}else if(typeof g=="function"){u=g;continue}}throw qu.InvalidHookArguments(h)}if(u)return yield u.call(this,i)}),[Es.ASYNC_PARALLEL]:(i,s,a=[])=>(0,F.mG)(this,void 0,void 0,function*(){const u=a.map(p=>{if([0,1].includes(p.handler.length))return p.handler.call(this,i);if([2].includes(p.handler.length))return p.handler.call(this,i,s);throw qu.InvalidHookArguments(p)}),h=new Sp;if(Promise.all(u).then(p=>h.resolve(p)),s)return yield s.call(this,h)})},this.hookMap=new Map,r&&r.type&&(this.scheduleType=r.type)}}const Rd=pe.defineToken("IHookService"),Hs=pe.defineToken("IHookContribution"),qa=()=>({graphOptions:new ka,reactNodeRender:new ka,reactEdgeLabelRender:new ka,afterGraphInit:new ka,beforeGraphDestroy:new ka,x6Events:new ka}),Ju=()=>({dispose:()=>{}});var Sh;(function(n){n.CONFIG_TYPE="XFlowHook"})(Sh||(Sh={}));class ta{constructor(){this.CONFIG_TYPE=Sh.CONFIG_TYPE,this.time=Date.now(),this.setRegisterHook=r=>{this.hookRegisterFunc=r},this.setRegisterHookhub=r=>{this.hookhubRegisterFn=r},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return{CONFIG_TYPE:this.CONFIG_TYPE,hookRegisterFn:this.hookRegisterFunc||Ju,hookhubRegisterFn:this.hookhubRegisterFn||Ju}}),this.dispose=()=>{}}}let ul=class{constructor(){this.toDispose=new un,this.hookProvider=()=>this.hooks,this.registerHook=r=>r(this.hooks),this.registerHookHub=(r,i)=>(this.hooks[r]=i,{dispose:()=>{delete this.hooks[r]}}),this.onStart=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerHookHub(this);for(const i of r)i.registerHook(this.hooks)}),this.hooks=qa()}onStop(){this.toDispose.dispose()}};(0,F.gn)([oi(Hs),(0,F.w6)("design:type",Object)],ul.prototype,"contributionProvider",void 0),ul=(0,F.gn)([cn({contrib:[Vc,Rd]}),(0,F.w6)("design:paramtypes",[])],ul);var Qu;(function(n){n.pluginId="GraphEventPlugin"})(Qu||(Qu={}));let kd=class{constructor(){this.toDispose=new un,this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const{hookRegisterFn:i}=yield this.hookConfig.getConfig(),s=i(r);return Mt.create(()=>{s.dispose()})}),this.registerHookHub=r=>(0,F.mG)(this,void 0,void 0,function*(){const{hookhubRegisterFn:i}=yield this.hookConfig.getConfig(),s=i(r);return Mt.create(()=>{s.dispose()})})}};(0,F.gn)([on(ta),(0,F.w6)("design:type",ta)],kd.prototype,"hookConfig",void 0),kd=(0,F.gn)([cn({contrib:Hs})],kd);const _h={dispose:()=>null};function _p(n,r){let i;return()=>{clearTimeout(i),i=window.setTimeout(n,r)}}function Ah(n){let r;return()=>{r||(r=requestAnimationFrame(()=>{r=null,n()}))}}const Tg=n=>{const r=document.createElement("style");return r.setAttribute("type","text/css"),document.head.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),r};function Me(n){return typeof n=="function"&&!!n.prototype.isReactComponent}function Th(n){return typeof n=="function"&&String(n).includes("return React.createElement")}function Ld(n){return Me(n)||Th(n)}var La;(function(n){n.pluginId="base-graph-events"})(La||(La={}));let Ai=class{constructor(){this.toDispose=new un,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return Mt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new un,s=[r.x6Events.registerHook({name:La.pluginId,handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{events:u}=yield this.graphOptions.getOptions();u.forEach(h=>{a.push(h)})})}),r.afterGraphInit.registerHook({name:La.pluginId,handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:u,modelService:h,graph:p}=a,g=yield r.x6Events.call([],y=>(0,F.mG)(this,void 0,void 0,function*(){return y.map(b=>{const E=T=>{b.callback(T,u,h,p)};return p.on(b.eventName,E),{dispose:()=>{p.off(b.eventName,E)}}})}));i.pushAll(g)})}),r.afterGraphInit.registerHook({name:"add auto resize event",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:u,options:h,graph:p}=a,g=Ah(()=>{u.executeCommand(ti.GRAPH_RESIZE.id,{})});window.addEventListener("resize",g);const{rootContainer:y}=h,b=new ResizeObserver(()=>p.resize(y.clientWidth));y&&b.observe(y),i.push(Mt.create(()=>{window.removeEventListener("resize",g)}))})}),r.beforeGraphDestroy.registerHook({name:La.pluginId,handler:()=>(0,F.mG)(this,void 0,void 0,function*(){i.dispose()})})];return i.pushAll(s),i})}};(0,F.gn)([on(_d),(0,F.w6)("design:type",Object)],Ai.prototype,"graphOptions",void 0),Ai=(0,F.gn)([cn({contrib:Hs})],Ai);const Jv=n=>Zo(r=>{Hi.register(r,Hs),r(kd),r(Ai),r(ul),r(ta,{useValue:n})});var ed=M(96486);class T0{constructor(){this.extensions=[],this.containerClassNames=new Set,this.addCoreModule=r=>(this.extensions.unshift(r),Mt.create(()=>{this.removeExtension(r)})),this.addExtension=r=>(this.extensions.push(r),Mt.create(()=>{this.removeExtension(r)})),this.getExtension=r=>(0,ed.find)(this.extensions,i=>(0,ed.get)(i,"config.CONFIG_TYPE")===r),this.removeExtension=r=>{const i=this.extensions.indexOf(r);i>-1&&this.extensions.splice(i,1)},this.getInstanceId=()=>this.instanceId,this.addContainerClassNames=r=>this.containerClassNames.add(r),this.getContainerClassNames=()=>Array.from(this.containerClassNames),this.getAllExtensions=()=>this.extensions,this.getAllExtensionConfigs=()=>this.extensions.map(r=>r.config),this.instanceId=Sc()}has(r){return this.extensions.some(i=>i.config.CONFIG_TYPE===r)}}const td=()=>H.useMemo(()=>new T0,[]),M0=H.createContext({}),Bl=()=>H.useContext(M0),Mg=n=>{const r=Bl(),i=H.useMemo(()=>n.config?n.config:new ta,[]);return H.useEffect(()=>{const s=r.addCoreModule({config:i,createModule:Jv});return()=>{s.dispose(),i.dispose()}},[r,i]),null},Ap=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new ta;return n(a,i),a},[i])},Og=H.createContext({cell:null,x6Graph:null,commands:null,modelService:null}),gu=()=>React.useContext(Og);function O0(n,r,i){return function(s){const a=this,u=s?.getData(),h=s?.getSize(),p=s?.getPosition(),g=()=>H.createElement(Og.Provider,{value:{cell:s,x6Graph:a,commands:r,modelService:i}},H.createElement(n,{cell:s,data:u,size:h,position:p}));return H.createElement(g,null)}}function Qv(n,r,i){return function(s){const a=this,u=s?.getData(),h=()=>H.createElement(Og.Provider,{value:{cell:s,x6Graph:a,commands:r,modelService:i}},H.createElement(n,{data:u,cell:s}));return H.createElement(h,null)}}const Vy=()=>{const[n,r]=React.useState(!1),{x6Graph:i,cell:s}=gu();return React.useEffect(()=>{const a=({added:u,removed:h})=>{if(u.filter(y=>y.isNode()).some(y=>{y.id,s.id})){s.setData(Object.assign(Object.assign({},s.getData()),{isNodeSelected:!0})),r(!0);return}if(h.filter(y=>y.isNode()).some(y=>{y.id,s.id})){s.setData(Object.assign(Object.assign({},s.getData()),{isNodeSelected:!1})),r(!1);return}};return i.on("selection:changed",a),()=>{i.off("selection:changed",a)}},[i]),[n]},nd=Symbol("IGraphProvider"),P0=Symbol("ICommandServiceProvider"),zl=Symbol("IModelServiceProvider");let to=class{constructor(){this.toDispose=new un,this.graphMap=new Map,this.getGraph=r=>(0,F.mG)(this,void 0,void 0,function*(){let i=this.graphMap.get(r);if(!i){i=new Qn,this.graphMap.set(r,i);const s=yield this.optionProvider.getOptions(),a=this.hookService.hookProvider(),u=yield a.graphOptions.call(s.x6Options),{graphContainer:h,edgeRender:p,nodeRender:g,edgeTypeParser:y}=s,b=yield a.reactEdgeLabelRender.call(p);yield a.reactNodeRender.call(g);const{clientHeight:E,clientWidth:T}=h,O=yield this.commandServiceProvider.getCommandService(),N=yield this.modelServiceProvider.getModelService(),k=new ur.kJ(Object.assign(Object.assign({container:h,width:T,height:E},u),{onEdgeLabelRendered:B=>{const{edge:$,container:X}=B;this.renderEdgeReactLabel({edge:$,container:X,edgeRenderMap:b,edgeTypeParser:y,modelService:N,commandService:O})}}));yield a.afterGraphInit.call({graph:k,commandService:O,modelService:N,options:s}),i.resolve(k),k.on("node:moved",({node:B})=>{const $=B.getData(),X=B.position();B.setData(Object.assign(Object.assign({},$),{x:X?.x,y:X?.y}))}),k.on("node:resized",({node:B})=>{const $=B.getData(),X=B.size();B.setData(Object.assign(Object.assign({},$),{width:X?.width,height:X?.height}))}),this.toDispose.push(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){yield a.beforeGraphDestroy.call({graph:k,commandService:O,modelService:N,options:s}),this.graphMap.delete(r),k.dispose()})))}return i.promise}),this.renderEdgeReactLabel=r=>(0,F.mG)(this,void 0,void 0,function*(){const{container:i,edgeTypeParser:s,edge:a,edgeRenderMap:u,commandService:h,modelService:p}=r,g=s(a?.data)||ko,y=u.get(g);if(!!y&&a&&a?.data&&y){const b=this.edgeAppendForeignObject(a,i),E=Qv(y,h,p)(a);ua.render(E,b)}})}edgeAppendForeignObject(r,i){const s=ur.is.createSvgElement("foreignObject"),a=ur.is.createElementNS("body",ur.is.ns.xhtml),u=ur.is.createElementNS("div",ur.is.ns.xhtml),h=r?.data,p=h?.edgeContentWidth||100,g=h?.edgeContentHeight||30;return s.setAttribute("width",`${p}`),s.setAttribute("height",`${g}`),s.setAttribute("x",`${-1*p/2}`),s.setAttribute("y",`${-1*g/2}`),a.setAttribute("xhtmls",ur.is.ns.xhtml),a.style.width="100%",a.style.height="100%",a.style.padding="0",a.style.margin="0",a.style.background="unset",a.style.overflow="visible",a.className="xflow-edge-label-body",u.style.width="100%",u.style.height="100%",a.appendChild(u),s.appendChild(a),i.appendChild(s),u}dispose(){this.toDispose.dispose()}};(0,F.gn)([on(_d),(0,F.w6)("design:type",Object)],to.prototype,"optionProvider",void 0),(0,F.gn)([on(Rd),(0,F.w6)("design:type",Object)],to.prototype,"hookService",void 0),(0,F.gn)([on(P0),(0,F.w6)("design:type",Object)],to.prototype,"commandServiceProvider",void 0),(0,F.gn)([on(zl),(0,F.w6)("design:type",Object)],to.prototype,"modelServiceProvider",void 0),to=(0,F.gn)([cn()],to);const em=n=>{n(to),n(nd,{lifecycle:pe.Lifecycle.singleton,useDynamic:r=>({getGraphInstance:()=>(0,F.mG)(void 0,void 0,void 0,function*(){const i=r.container.get(to),s=r.container.get(_d),a=yield s?.getOptions();return yield i?.getGraph(a.graphId)}),getGraphOptions:()=>(0,F.mG)(void 0,void 0,void 0,function*(){const i=r.container.get(_d);return i?.getOptions()})})}),n(P0,{lifecycle:pe.Lifecycle.singleton,useDynamic:r=>({getCommandService:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.container.get(fu)})})}),n(zl,{lifecycle:pe.Lifecycle.singleton,useDynamic:r=>({getModelService:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.container.get(Ku)})})})};var Pg;(function(n){n.CONFIG_TYPE="MODEL_SERVICE_CONFIG"})(Pg||(Pg={}));const rd=()=>Mt.create(()=>{});class Gd{constructor(){this.CONFIG_TYPE=Pg.CONFIG_TYPE,this.registerModelFn=rd,this.isMounted=new Qn,this.registerModel=r=>{this.registerModelFn=r},this.setMountState=()=>{this.isMounted.resolve(!0)},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return yield this.isMounted.promise,{CONFIG_TYPE:this.CONFIG_TYPE,modelRegisterFunc:this.registerModelFn||rd}}),this.dispose=()=>{this.registerModelFn=rd,this.isMounted=new Qn}}}let Mc=class{constructor(){this.toDispose=new un,this.deferredModelMap=new Map,this.registerModel=r=>{const{id:i,getInitialValue:s,modelFactory:a}=r,u=new un,h=this.ensureModel(i);if(h.isResolved){console.error(r,"model has been registerd");return}const p=s?s():Ka.EMPTY_VALUE,g=a?a():new Tc(p);return Ka.isValidValue(p)&&h.resolve(g),r.watchChange&&r.watchChange(g,this).then(y=>{h.isResolved||h.resolve(g),this.toDispose.pushAll([y,u]),u.push(y)}),u},this.findDeferredModel=r=>this.deferredModelMap.get(r),this.awaitModel=r=>this.ensureModel(r).promise,this.registerRuntimeModel=()=>(0,F.mG)(this,void 0,void 0,function*(){const{modelRegisterFunc:r}=yield this.modelOptionProvider.getOption(),i=yield this.graphProvider.getGraphInstance();r&&r(this,i)}),this.ensureModel=r=>{const i=this.deferredModelMap.get(r);if(i)return i;const s=new Qn;return this.deferredModelMap.set(r,s),this.toDispose.push(Mt.create(()=>this.deferredModelMap.delete(r))),s}}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerModel(this);this.registerRuntimeModel()}onStop(){this.toDispose.dispose()}};(0,F.gn)([oi(dc),(0,F.w6)("design:type",Object)],Mc.prototype,"contributionProvider",void 0),(0,F.gn)([on(cs),(0,F.w6)("design:type",Object)],Mc.prototype,"modelOptionProvider",void 0),(0,F.gn)([on(nd),(0,F.w6)("design:type",Object)],Mc.prototype,"graphProvider",void 0),Mc=(0,F.gn)([cn({contrib:[Vc,Ku]})],Mc);const Mh=n=>r=>{const i=r.findDeferredModel(n);return!!(i&&i.promise)},Go=n=>r=>(0,F.mG)(void 0,void 0,void 0,function*(){return yield r.awaitModel(n)}),Vi=n=>r=>(0,F.mG)(void 0,void 0,void 0,function*(){return(yield r.awaitModel(n)).getValidValue()});var Oh;(function(n){n.id="GRAPH_ENABLE_MULTI_SELECT",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(Oh||(Oh={}));var hc;(function(n){n.id="GRAPH_FULLSCREEN",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(hc||(hc={}));var Of;(function(n){n.id="IS_NODE_SELECTED",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(Of||(Of={}));var Tp;(function(n){n.id="IS_GROUP_SELECTED",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(Tp||(Tp={}));var Fd;(function(n){n.id="IS_NORMAL_NODES_SELECTED",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(Fd||(Fd={}));var Bd;(function(n){n.id="LAST_SELECTED_CELL",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(Bd||(Bd={}));var Oc;(function(n){n.id="SELECTED_CELLS",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(Oc||(Oc={}));var Pf;(function(n){n.id="LAST_SELECTED_NODE",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(Pf||(Pf={}));var dl;(function(n){n.id="SELECTED_NODES",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(dl||(dl={}));var Df;(function(n){n.id="SELECTED_EDGES",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(Df||(Df={}));var Pc;(function(n){n.id="SELECTED_GROUPS",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(Pc||(Pc={}));var fc;(function(n){n.id="CONTEXTMENU_NODE",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(fc||(fc={}));var Dg;(function(n){n.id="CONTEXTMENU_EDGE",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(Dg||(Dg={}));var jc;(function(n){n.id="CONTEXTMENU_TARGET",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(jc||(jc={}));var id;(function(n){n.id="GRAPH_META",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(id||(id={}));var $s;(function(n){n.id="GRAPH_SCALE",n.getModel=Go(n.id),n.useValue=Vi(n.id)})($s||($s={}));var od;(function(n){n.id="COMMAND_REDOABLE",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(od||(od={}));var Hc;(function(n){n.id="COMMAND_UNDOABLE",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(Hc||(Hc={}));var ya;(function(n){n.id="COMMAND_GLOBALS",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(ya||(ya={}));var zd;(function(n){n.id="HISTORY_UNDOABLE",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(zd||(zd={}));var Ud;(function(n){n.id="HISTORY_REDOABLE",n.getModel=Go(n.id),n.useValue=Vi(n.id)})(Ud||(Ud={}));let Dc=class{registerModel(r){r.registerModel({id:od.id,getInitialValue:()=>this.commands.isRedoable,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){return this.commands.watchChange(()=>{i.setValue(this.commands.isRedoable)})})}),r.registerModel({id:Hc.id,getInitialValue:()=>this.commands.isUndoable,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){return this.commands.watchChange(()=>{i.setValue(this.commands.isUndoable)})})}),r.registerModel({id:ya.id,modelFactory:()=>this.commands.Globals})}};(0,F.gn)([on(fu),(0,F.w6)("design:type",Object)],Dc.prototype,"commands",void 0),Dc=(0,F.gn)([cn({contrib:dc})],Dc);const sd=(n,r,i)=>(n.on(r,i),Mt.create(()=>{n.off(r,i)}));let pc=class{constructor(){this.getGraphInstance=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=yield this.graphProvider.getGraphInstance(),i=yield this.graphProvider.getGraphOptions();return{graph:r,config:i}})}registerModel(r){r.registerModel({id:id.id,getInitialValue:()=>({flowId:"-1"}),watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){return Mt.create(()=>{i.setValue({flowId:"-1"})})})}),r.registerModel({id:Oh.id,getInitialValue:()=>({isEnable:!1}),watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){return Mt.create(()=>{i.setValue({isEnable:!1})})})}),r.registerModel({id:hc.id,getInitialValue:()=>!1,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){const a=()=>(0,F.mG)(this,void 0,void 0,function*(){const u=!!document.fullscreenElement;(yield hc.getModel(s)).setValue(u)});return document.addEventListener("fullscreenchange",a,!1),Mt.create(()=>{document.removeEventListener("fullscreenchange",a),i.setValue(!1)})})}),r.registerModel({id:Oc.id,getInitialValue:()=>[],watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s}=yield this.getGraphInstance(),a=u=>{const{selected:h}=u;i.setValue(h)};return s.on("selection:changed",a),Mt.create(()=>s.off("selection:changed",a))})}),r.registerModel({id:Bd.id,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Oc.getModel(s)).watch((u=[])=>{i.setValue([...u].pop()||null)})})}),r.registerModel({id:dl.id,getInitialValue:()=>[],watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Oc.getModel(s)).watch((u=[])=>{const h=u.filter(p=>p.isNode());i.setValue(h)})})}),r.registerModel({id:Pf.id,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield dl.getModel(s)).watch(h=>{i.setValue([...h].pop()||null)})})}),r.registerModel({id:Of.id,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield dl.getModel(s)).watch(h=>{i.setValue(h.length>0)})})}),r.registerModel({id:Tp.id,getInitialValue:()=>!1,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Oc.getModel(s)).watch(h=>{const p=h.every(g=>g&&g.getProp("isGroup")===!0);i.setValue(p)})})}),r.registerModel({id:Pc.id,getInitialValue:()=>[],watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield dl.getModel(s)).watch(h=>{const p=h.filter(g=>g&&g.getProp("isGroup")===!0);i.setValue(p)})})}),r.registerModel({id:Fd.id,getInitialValue:()=>!1,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Oc.getModel(s)).watch(h=>{const p=h.every(y=>{const b=!(y&&y.getProp("isGroup")),E=!(y&&y.getProp("group"));return b&&E}),g=h.length>0&&p;i.setValue(g)})})}),r.registerModel({id:$s.id,getInitialValue:()=>({zoomFactor:-1}),watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s}=yield this.getGraphInstance(),a=u=>{const h=s.zoom();i.setValue(Object.assign(Object.assign({},u),{zoomFactor:h}))};return s.on("scale",a),Mt.create(()=>s.off("scale",a))})}),r.registerModel({id:jc.id,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s,config:a}=yield this.getGraphInstance(),u=p=>g=>{const{x:y,y:b}=g,E=s.localToClient({x:y,y:b}),T=a.rootContainer.getBoundingClientRect(),O={x:E.x-(T?.x||0),y:E.y-(T?.y||0)};i.setValue({type:p,anchor:O,data:g,cell:g.cell})},h=new un;return h.pushAll([sd(s,"node:contextmenu",u("node")),sd(s,"edge:contextmenu",u("edge")),sd(s,"blank:contextmenu",u("blank"))]),h})}),r.registerModel({id:Ud.id,getInitialValue:()=>!1,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s}=yield this.getGraphInstance(),a=()=>{const u=s.history.canRedo();i.setValue(u)};return s.history&&s.history.on("change",a),Mt.create(()=>s.history.off("change",a))})}),r.registerModel({id:zd.id,getInitialValue:()=>!1,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s}=yield this.getGraphInstance(),a=()=>{const u=s.history.canUndo();i.setValue(u)};return s.history&&s.history.on("change",a),Mt.create(()=>s.history.off("change",a))})})}};(0,F.gn)([on(nd),(0,F.w6)("design:type",Object)],pc.prototype,"graphProvider",void 0),pc=(0,F.gn)([cn({contrib:dc})],pc);const Ng=Zo(n=>{Hi.register(n,dc),n(Mc),n(pc),n(Dc)}),D0=(n,r)=>{n({token:cs,useDynamic:()=>({getOption:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.getConfig()})}),lifecycle:pe.Lifecycle.singleton})},Nf=n=>Zo(r=>{D0(r,n)}),Mp=n=>{const{config:r}=n,i=Bl(),s=H.useMemo(()=>r||new Gd,[]);return H.useEffect(()=>{const a=i.addCoreModule({config:s,createModule:Nf});return s.setMountState(),()=>{a.dispose(),s.dispose()}},[]),null};Mp.defaultProps={XFlowModuleType:"ModelServiceConfig"};const Op=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new Gd;return n(a,i),a},[i])},na=n=>{const r=n.getChildren(),i=n.getSize(),s=n.getData()||{},a=n.getPosition(),u=n.getParentId(),{isCollapsed:h}=s,p=s.groupCollapsedSize||(h?i:null);return Object.assign(Object.assign({},s),{id:n.id,width:i.width,height:i.height,x:a.x,y:a.y,group:u,groupChildren:r?r.map(g=>g.id):null,groupCollapsedSize:p})},Ph=n=>{const r=n.getData()||{};return Object.assign({id:n.id},r)},Pp=n=>{const r=[],i=[],s=a=>{a.isNode()&&r.push(na(a)),a.isEdge()&&i.push(Ph(a))};return n.map(a=>s(a)),{nodes:r,edges:i}},Nc=100;let $c=class{constructor(){this.getGraphInstance=()=>this.graphProvider.getGraphInstance(),this.getGraphConfig=()=>this.graphProvider.getGraphOptions(),this.getGraphData=()=>(0,F.mG)(this,void 0,void 0,function*(){const i=(yield this.graphProvider.getGraphInstance()).getCells();return Pp(i)}),this.getAllNodes=()=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.graphProvider.getGraphInstance()).getNodes()}),this.getNodeById=r=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.graphProvider.getGraphInstance()).getCellById(r)}),this.getAllEdges=()=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.graphProvider.getGraphInstance()).getEdges()}),this.getEdgeById=r=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.graphProvider.getGraphInstance()).getCellById(r)}),this.updateNodeAttrs=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){r instanceof ur.NB?r.setAttrs(i):(yield this.getNodeById(r)).setAttrs(i)}),this.updateEdgeAttrs=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){r instanceof ur.kS?r.setAttrs(i):(yield this.getEdgeById(r)).setAttrs(i)}),this.translateGraph=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){const s=yield this.graphProvider.getGraphInstance(),a=s.translate();s.translate(a.tx+r,a.ty+i)})}start(){return(0,F.mG)(this,void 0,void 0,function*(){yield this.startContributions(),this.registerEventListeners()})}executeCommand(r,i,s=[]){return this.commandService.executeCommand(r,i,s)}executeCommandPipeline(r){return this.commandService.executeCommandPipeline(r)}registerEventListeners(){window.addEventListener("unload",()=>{this.stopContributions()})}startContributions(){return(0,F.mG)(this,void 0,void 0,function*(){console.log(this.contributions.getContributions());for(const r of this.contributions.getContributions())if(r.onStart)try{yield this.measure(`${r.constructor.name}.onStart`,()=>r.onStart(this))}catch(i){console.error("Could not start contribution",i)}})}stopContributions(){console.info(">>> Stopping frontend contributions...");for(const r of this.contributions.getContributions())if(r.onStop)try{r.onStop(this)}catch(i){console.error("Could not stop contribution",i)}console.info("<<< All frontend contributions have been stopped.")}measure(r,i){return(0,F.mG)(this,void 0,void 0,function*(){const s=`${r}-start`,a=`${r}-end`;performance.mark(s);const u=yield i();performance.mark(a),performance.measure(r,s,a);for(const h of performance.getEntriesByName(r)){const p=`Frontend ${h.name}`;h.duration>Nc?console.warn(`${p} is slow, took: ${h.duration.toFixed(1)} ms`):console.debug(`${p} took: ${h.duration.toFixed(1)} ms`)}return performance.clearMeasures(r),u})}};(0,F.gn)([oi(Vc),(0,F.w6)("design:type",Object)],$c.prototype,"contributions",void 0),(0,F.gn)([on(nd),(0,F.w6)("design:type",Object)],$c.prototype,"graphProvider",void 0),(0,F.gn)([on(fu),(0,F.w6)("design:type",Object)],$c.prototype,"commandService",void 0),(0,F.gn)([on(Ku),(0,F.w6)("design:type",Object)],$c.prototype,"modelService",void 0),$c=(0,F.gn)([cn()],$c);const Vd=Zo(n=>{Hi.register(n,Vc),n($c)}),vu=n=>{const r=n.getAllExtensions(),i=new Ir,s=r.map(u=>{const{createModule:h,config:p}=u;return h(p)});return i.load(Vd),i.load(Tf),i.load(Ng),s.forEach(u=>{i.load(u)}),i.get($c)};class Ig{constructor(){this.xflowPrefixCls=XFLOW_PREFIX_CLS,this.getXflowPrefixCls=r=>`${this.xflowPrefixCls}-${r}`,this.setXflowPrefixCls=r=>this.xflowPrefixCls=r}}const ra=H.createContext({configProvider:null}),If=()=>H.useContext(ra),jd=n=>{const r=If();return H.useMemo(()=>r.configProvider?r.configProvider.getXflowPrefixCls(n):`${Lr}-${n}`,[n])};function Dh(n){const{createModule:r,children:i}=n,s=Bl(),a=H.useMemo(()=>n.config||{CONFIG_TYPE:"",getConfig:()=>(0,F.mG)(this,void 0,void 0,function*(){return{}})},[]);return H.useEffect(()=>{const u=s.addExtension({config:a,createModule:r});return()=>{u.dispose()}},[]),Array.isArray(i)||H.isValidElement(i)?H.createElement(H.Fragment,null," ",i," "):null}const Ul=(n={})=>(0,H.useMemo)(()=>{const r=Object.entries(n),i=r.length>0?{position:"absolute"}:{};return r.forEach(([s,a=0])=>{i[s]=`${a}px`}),i},[n]),Rf=n=>Zo(r=>{em(r),Ad(r,n)}),kf=ur.Bz.create({type:"react componnet"});ur.kJ.registerReactComponent=kf.register,ur.kJ.unregisterReactComponent=kf.unregister,ur.kJ.Hook.prototype.getReactComponent=function(n){const r=this.options.getReactComponent;if(typeof r=="function"){const s=ur.Iw.call(r,this.graph,n);if(s!=null)return s}let i=n.getComponent();if(typeof i=="string"){const s=kf.get(i);if(s==null)return kf.onNotFound(i);i=s}return i};class Vl extends ur.NB{get component(){return this.getComponent()}set component(r){this.setComponent(r)}getComponent(){return this.store.get("component")}setComponent(r,i={}){return r==null?this.removeComponent(i):this.store.set("component",r,i),this}removeComponent(r={}){return this.store.remove("component",r),this}}(function(n){function r(i,s,a="rect"){const u=[],h=s?ur.Lu.getForeignObjectMarkup():{tagName:"g",selector:"content"};return i?u.push(h):u.push({tagName:a,selector:"body"},h,{tagName:"text",selector:"label"}),u}n.config({view:"react-shape-view",markup:r(!1,!0),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"},label:{fontSize:14,fill:"#333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"}},propHooks(i){if(i.markup==null){const s=i.primer,a=i.useForeignObject!==!1;if(s&&s!=="rect"){i.markup=r(!1,a,s);let u={};s==="circle"?u={refCx:"50%",refCy:"50%",refR:"50%"}:s==="ellipse"&&(u={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}),i.attrs=ur.QK.merge({},{body:Object.assign({refWidth:null,refHeight:null},u)},i.attrs||{})}else i.simple&&(i.markup=r(!0,a),i.attrs=ur.QK.merge({},{body:null,label:null},i.attrs||{}))}return i}}),ur.NB.registry.register("react-shape",n,!0)})(Vl||(Vl={}));var mu;(function(n){let r=!1,i;const s=(g,y)=>{const b=y.payload;switch(y.type){case"add":{const E=g.findIndex(T=>T.id===b.id);return E>=0?(g[E]=b,[...g]):[...g,b]}case"remove":{const E=g.findIndex(T=>T.id===b.id);if(E>=0){const T=[...g];return T.splice(E,1),T}break}default:break}return g};function a(g,y){r&&i({type:"add",payload:{id:g,portal:y}})}n.connect=a;function u(g){r&&i({type:"remove",payload:{id:g}})}n.disconnect=u;function h(){return r}n.isActive=h;function p(){return()=>{r=!0;const[g,y]=(0,H.useReducer)(s,[]);return i=y,H.createElement(H.Fragment,{children:g.map(b=>b.portal)})}}n.getProvider=p})(mu||(mu={}));class Ic extends H.PureComponent{constructor(r){super(r),this.scheduledAnimationFrame=!1,this.throttleUpdateFunc=()=>{this.scheduledAnimationFrame||(this.scheduledAnimationFrame=!0,window.requestAnimationFrame(()=>{this.setState(i=>(this.scheduledAnimationFrame=!1,{tick:i.tick+1}))}))},this.onChange=i=>{if(Ic.throttleChangeTypes.includes(i.key)){this.throttleUpdateFunc();return}this.setState({tick:this.state.tick+1})},this.state={tick:0}}componentDidMount(){this.props.node.on("change:*",this.onChange)}componentWillUnmount(){this.props.node.off("change:*",this.onChange)}clone(r){const{node:i}=this.props;return typeof r.type=="string"?H.cloneElement(r):H.cloneElement(r,{node:i})}render(){const{graph:r,node:i,component:s}=this.props;if(H.isValidElement(s))return this.clone(s);if(typeof s=="function"){const a=ur.Iw.call(s,r,i);if(H.isValidElement(a))return this.clone(a)}return s}}Ic.throttleChangeTypes=["position","size"];class Rc extends ur.DK{init(){super.init(),this.cell.on("removed",()=>{mu.disconnect(this.cell.id)})}getComponentContainer(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent}confirmUpdate(r){const i=super.confirmUpdate(r);return this.handleAction(i,Rc.action,()=>{ur.b2?ur.b2.scheduleTask(()=>{this.renderReactComponent()}):this.renderReactComponent()})}renderReactComponent(){this.unmountReactComponent();const r=this.getComponentContainer(),i=this.cell,s=this.graph;if(r){const a=this.graph.hook.getReactComponent(i),u=H.createElement(Ic,{graph:s,node:i,component:a});mu.isActive()?mu.connect(this.cell.id,ua.createPortal(u,r)):ua.render(u,r)}}unmountReactComponent(){const r=this.getComponentContainer();return r&&ua.unmountComponentAtNode(r),r}onMouseDown(r,i,s){const a=r.target;if(a.tagName.toLowerCase()==="input"){const h=a.getAttribute("type");if(h==null||["text","password","number","email","search","tel","url"].includes(h))return}super.onMouseDown(r,i,s)}unmount(){return mu.disconnect(this.cell.id),this.unmountReactComponent(),super.unmount(),this}}(function(n){n.action="react",n.config({bootstrap:[n.action],actions:{component:n.action}}),ur.DK.registry.register("react-shape-view",n,!0)})(Rc||(Rc={}));var Nh=function(n,r,i,s){var a=arguments.length,u=a<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,i):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,r,i,s);else for(var p=n.length-1;p>=0;p--)(h=n[p])&&(u=(a<3?h(u):a>3?h(r,i,u):h(r,i))||u);return a>3&&u&&Object.defineProperty(r,i,u),u};const Hd="react";function jl(n){const r={current:()=>{}},i=y=>{r.current(y)};let s,a;function u(y,b){s({id:y,portal:b})}function h(y){a(y)}const p=()=>{const[y,b]=(0,H.useState)([]),[E,T]=(0,H.useState)(),O=(0,H.useRef)([]),N=(0,H.useRef)([]);r.current=T,s=(0,H.useCallback)(ne=>{const{id:be}=ne;if(O.current.includes(be)){const me=N.current,je=me.findIndex(ot=>ot.id===be);je>-1?me[je]=ne:me.push(ne),N.current=me}else b(me=>{const je=[...me],ot=je.findIndex(ct=>ct.id===be);return ot>-1?je[ot]=ne:je.push(ne),je})},[]),a=(0,H.useCallback)(ne=>{O.current.includes(ne)&&(O.current=O.current.filter(be=>be!==ne)),N.current.map(be=>be.id).includes(ne)&&(N.current=N.current.filter(be=>be.id!==ne)),b(be=>be.filter(me=>me.id!==ne))},[]);const $=(0,H.useCallback)(ne=>{const{name:be,data:me}=ne,{cells:je=[]}=me||{};if(be==="add"){const ot=je.filter(ct=>ct.isNode()).map(ct=>ct.id);O.current=Array.from(new Set([...O.current,...ot]))}},[]),X=(0,H.useCallback)(({name:ne})=>{if(ne==="add"){const be=N.current;if(be.length){const me=be.map(je=>je.id);O.current=O.current.filter(je=>!me.includes(je)),N.current=[],b(je=>{const ot=[...je];return be.forEach(ct=>{const Xt=ot.findIndex(_t=>_t.id===ct.id);Xt>-1?ot[Xt]=ct:ot.push(ct)}),ot})}}},[]);return(0,H.useLayoutEffect)(()=>(E&&(E.on("batch:start",$),E.on("batch:stop",X)),()=>{E&&(E.off("batch:start",$),E.off("batch:stop",X),b([]),O.current=[],N.current=[])}),[E,$,X]),H.createElement(H.Fragment,null,...y.map(ne=>ne.portal))};class g extends ur.DK{init(){super.init(),this.cell.on("removed",()=>{h(this.cell.id)})}getComponentContainer(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent}confirmUpdate(b){const E=super.confirmUpdate(b);return this.handleAction(E,Hd,()=>this.renderReactComponent())}renderReactComponent(){this.unmountReactComponent();const b=this.getComponentContainer(),E=this.cell,T=this.graph;if(b){const O=this.graph.hook.getReactComponent(E),N=H.createElement(Ic,{graph:T,node:E,component:O});u(this.cell.id,ua.createPortal(N,b))}}unmountReactComponent(){const b=this.getComponentContainer();return b&&ua.unmountComponentAtNode(b),b}onMouseDown(b,E,T){const O=b.target;if(O.tagName.toLowerCase()==="input"){const k=O.getAttribute("type");if(k==null||["text","password","number","email","search","tel","url"].includes(k))return}super.onMouseDown(b,E,T)}dispose(){h(this.cell.id),this.unmountReactComponent()}}return Nh([ur.DK.dispose()],g.prototype,"dispose",null),g.config({bootstrap:[Hd],actions:{component:Hd}}),ur.DK.registry.register(n,g,!0),{Portal:p,setGraph:i}}function Hl(n){const r=(0,H.useRef)(!1),[i]=(0,H.useState)(()=>r.current?{}:(r.current=!0,jl(n)));return[i.Portal,i.setGraph]}const hl=n=>{const r=Yo(),i=H.useRef(null),s=H.useRef(null),a=Bl(),u=H.useMemo(()=>{const E=n.config?n.config:new Ml;return E.setX6Config(),E},[]),[h,p]=Hl(u.graphId);H.useEffect(()=>{r&&r.getGraphInstance().then(E=>{p(E)})},[r,p]),H.useEffect(()=>{u.setRootContainer(i.current),u.setGraphContainer(s.current),u.xflowInstanceId=a.getInstanceId(),a.addCoreModule({config:u,createModule:Rf});const E=()=>(0,F.mG)(void 0,void 0,void 0,function*(){u.dispose()});return()=>{E()}},[]);const g=Ul(n.position),y=jd("canvas-root"),b=jd("x6-canvas");return H.createElement(H.Fragment,null,H.createElement("div",{ref:i,className:y,style:g,id:u.graphId,tabIndex:0},H.createElement("div",{ref:s,className:b}),n.children),H.createElement(h,null))};hl.defaultProps={isXFlowCanvas:!0};let gc=class{constructor(){this.toDispose=new un,this.runtimeHooks=[],this.getX6Graph=()=>(0,F.mG)(this,void 0,void 0,function*(){if(this.graph)return this.graph;const r=yield this.graphProvider.getGraphInstance();return this.graph=r,r}),this.getGraphConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.graphProvider.getGraphOptions()}),this.getGraphMeta=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.getModelService();return this.graphMeta||(yield id.useValue(r))}),this.setArgs=(r,i=[])=>(this.args=r,this.runtimeHooks=i,{args:r,hooks:i}),this.getArgs=()=>({args:Object.assign(Object.assign({},this.args),{modelService:this.getModelService(),commandService:this.getCommands(),getGraphMeta:this.getGraphMeta,getX6Graph:this.getX6Graph,getGraphConfig:this.getGraphConfig}),hooks:this.runtimeHooks}),this.setResult=r=>(this.result=r,this.result),this.getResult=()=>this.result,this.getHooks=()=>this.hookService.hookProvider(),this.getCommands=()=>this.commandService,this.getModelService=()=>this.modelService,this.addUndo=r=>{if(!Array.isArray(r))return this.addUndo([r]);this.toDispose.pushAll(r)},this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){yield this.toDispose.dispose()}),this.isUndoable=()=>!this.toDispose.disposed,this.getDisposables=()=>this.toDispose,this.setGlobal=(r,i)=>{this.commandService.setGlobal(r,i)},this.getGlobal=r=>this.commandService.getGlobal(r)}init(){this.getGraphMeta().then(r=>{this.graphMeta=r})}};(0,F.gn)([on(nd),(0,F.w6)("design:type",Object)],gc.prototype,"graphProvider",void 0),(0,F.gn)([on(Rd),(0,F.w6)("design:type",Object)],gc.prototype,"hookService",void 0),(0,F.gn)([on(fu),(0,F.w6)("design:type",Object)],gc.prototype,"commandService",void 0),(0,F.gn)([on(Ku),(0,F.w6)("design:type",Object)],gc.prototype,"modelService",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],gc.prototype,"init",null),gc=(0,F.gn)([jt()],gc);const Lf="CommandConfig",$d=()=>[];class vc{constructor(){this.setCommandContributions=r=>{this.getContributions=r},this.getCommandContributions=()=>this.getContributions(),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){return this.registerHookFn?this.registerHookFn(r):_h}),this.registerHookHub=r=>(0,F.mG)(this,void 0,void 0,function*(){return this.registerHookHubFn?this.registerHookHubFn(r):_h}),this.CONFIG_TYPE=Lf,this.setRegisterHookFn=r=>{this.registerHookFn=r},this.setRegisterHookHubFn=r=>{this.registerHookHubFn=r},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return{registerHookFn:this.registerHookFn,getContributions:this.getContributions,CONFIG_TYPE:this.CONFIG_TYPE}}),this.getContributions=$d}}const $l=()=>new vc,Dp=(n,r)=>{n({token:vc,contrib:[Hs],lifecycle:pe.Lifecycle.singleton,useDynamic:()=>r})};var yu;(function(n){n.command=$i.ADD_NODE,n.hookKey="addNode"})(yu||(yu={}));let bu=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().addNode.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{createNodeService:p,cellFactory:g,commandService:y,options:b}=h,E=yield r.getX6Graph();let T=h.nodeConfig;if(p){const B=yield p(h);if(typeof B=="boolean")return{err:"createNodeService rejected"};T=B}const O=yield this.processNodeConfig(T);let N;const k=Object.assign(Object.assign({},b),{isCommand:!0});if(g){const B=yield g(O,this);N=E.addNode(B,k)}else N=E.addNode(O,k);return r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){const B=Object.assign({id:N.id},N.getData());y.executeCommand($i.DEL_NODE.id,{nodeConfig:B})}))),{nodeConfig:O,nodeCell:N}}),s);return r.setResult(u),this}),this.processNodeConfig=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.contextProvider();if(r.data=Object.assign({},r),r.shape)return r;if(!r.view){const s=yield i.getGraphConfig();r.view=s.graphId}if(!r.component){const s=yield this.getNodeReactComponent(r),a=i.getCommands(),u=i.getModelService();r.shape="react-shape",r.component=O0(s,a,u)}return r}),this.getNodeReactComponent=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.contextProvider(),s=i.getHooks(),a=yield i.getGraphConfig(),u=yield s.reactNodeRender.call(a.nodeRender),h=a.nodeTypeParser(r)||qr,p=u.get(h);return p||console.error("react node component is missing:",a.nodeRender,h,p),p}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],bu.prototype,"contextProvider",void 0),bu=(0,F.gn)([jt({token:{token:li,named:yu.command.id}})],bu);var Wd;(function(n){n.command=$i.DEL_NODE,n.hookKey="delNode",n.createHook=()=>new ka})(Wd||(Wd={}));let Xd=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().delNode.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:p,deleteNodeService:g,options:y}=h,b=yield r.getX6Graph();if(g&&!(yield g(h)))return{err:" service rejected"};const E=(h.x6Node||h.nodeConfig).id,T=b.getCellById(E);if(T&&T.isNode()){const O=[...b.getIncomingEdges(T)||[],...b.getOutgoingEdges(T)||[]];yield Promise.all(O.map(k=>p.executeCommand(uo.DEL_EDGE.id,{x6Edge:k})));const N=T.getData();return T.remove(Object.assign(Object.assign({},y),{isCommand:!0})),r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){yield p.executeCommand($i.ADD_NODE.id,{nodeConfig:N})}))),{err:null,nodeConfig:N}}return{err:"node is not exist"}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()&&this.contextProvider().undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Xd.prototype,"contextProvider",void 0),Xd=(0,F.gn)([jt({token:{token:li,named:Wd.command.id}})],Xd);var kc;(function(n){n.command=$i.SELECT_NODE,n.hookKey="selectNode"})(kc||(kc={}));let Wl=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().selectNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),p=h.getSelectedCells().map(E=>E.id),{nodeIds:g,resetSelection:y,commandService:b}=u;return y?h.resetSelection(g):h.select(g),this.ctx.addUndo({dispose:()=>{b.executeUndoCommand($i.SELECT_NODE.id,{nodeIds:p,resetSelection:!0})}}),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Wl.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Wl.prototype,"init",null),Wl=(0,F.gn)([jt({token:{token:li,named:kc.command.id}})],Wl);var Gf;(function(n){n.command=$i.MOVE_NODE,n.hookKey="moveNode",n.createHook=()=>new ka})(Gf||(Gf={}));let Ff=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().moveNode.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{nodePositionService:p}=h;if(p&&!(yield p(h)))return{err:"service rejected"};const{dx:g=0,dy:y=0,x:b,y:E,duration:T=150}=h.position,N=(yield r.getX6Graph()).getCellById(h.id);if(N){let k=b,B=E;const{x:$,y:X}=N.position();let ne=()=>{N.position($,X,{silent:!1})};return g||y?(k=g+$,B=y+X,N.translate(g,y,{transition:{duration:T}}),ne=()=>N.translate(-g,-y,{transition:{duration:T}})):N.position(k,B,{silent:!1}),r.addUndo(Mt.create(()=>{ne()})),{err:null,nextX:k,nextY:B}}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Ff.prototype,"contextProvider",void 0),Ff=(0,F.gn)([jt({token:{token:li,named:Gf.command.id}})],Ff);var Rg=M(51584),Ih=M.n(Rg),ad;(function(n){n.command=$i.UPDATE_NODE,n.hookKey="updateNode",n.XFlowNodeSetOptions={overwrite:!0},n.NODE_WIDTH=200,n.NODE_HEIGHT=40})(ad||(ad={}));let Zd=class{constructor(){this.setNodeConfig=(r,i,s)=>{r.setData(i,s),r.setPosition(i?.x||0,i?.y||0),r.setSize(i?.width||ad.NODE_WIDTH,i?.height||ad.NODE_HEIGHT),r.angle(i?.angle||0,{absolute:!0}),Ih()(i?.visible)&&r.setVisible(i?.visible),!(r instanceof Vl)&&!!r.getAttrByPath("text/text")&&r.setAttrByPath("text/text",i.label),i.attrs&&r.setAttrs(i.attrs),Array.isArray(i.ports)&&r.setPropByPath("ports/items",i.ports,Object.assign({rewrite:!0},s))},this.getNodeConfig=r=>{const i=r.getData(),s=r.getPosition(),a=r.getSize();return Object.assign(Object.assign(Object.assign({},i),s),a)},this.getNodeCell=(r,i)=>{const{nodeConfig:s,setNodeConfig:a}=i;let u="";if(a&&a.node&&typeof a.node=="string"?u=a.node:s&&s.id&&typeof s.id=="string"&&(u=s.id),u)return r?.getCellById(u);if(a&&a.node instanceof ur.NB)return a.node},this.getNextNodeConfig=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){if(r&&r.setNodeConfig&&r.setNodeConfig.callback){const s=this.getNodeConfig(i);return r.setNodeConfig.callback(s)}return r.nodeConfig}),this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().updateNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{options:h=ad.XFlowNodeSetOptions}=u,p=yield this.ctx.getX6Graph(),g=this.getNodeCell(p,u),y=yield this.getNextNodeConfig(u,g);return this.setNodeConfig(g,y,h),{nodeConfig:y,nodeCell:g}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Zd.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Zd.prototype,"init",null),Zd=(0,F.gn)([jt({token:{token:li,named:ad.command.id}})],Zd);var Xl;(function(n){n.command=$i.CENTER_NODE,n.hookKey="centerNode"})(Xl||(Xl={}));let Yd=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().centerNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{nodeConfig:p}=u,g=h?.getCellById(p?.id);return h?.centerCell(g),{x6Node:g}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Yd.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Yd.prototype,"init",null),Yd=(0,F.gn)([jt({token:{token:li,named:Xl.command.id}})],Yd);var Rh;(function(n){n.command=$i.FRONT_NODE,n.hookKey="frontNode"})(Rh||(Rh={}));let Kd=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().frontNode.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield this.ctx.getX6Graph(),{nodeId:g}=h,y=p?.getCellById(g);return y?(y.toFront(),r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){h.commandService.executeCommand($i.BACK_NODE.id,{nodeId:g})})))):console.error(g,"this nodeId is not exist"),{}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Kd.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Kd.prototype,"init",null),Kd=(0,F.gn)([jt({token:{token:li,named:Rh.command.id}})],Kd);var ui;(function(n){n.command=$i.BACK_NODE,n.hookKey="backNode"})(ui||(ui={}));let Bf=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().backNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{nodeId:p}=u,g=h?.getCellById(p);return g?(g.toBack(),this.ctx.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){u.commandService.executeCommand($i.FRONT_NODE.id,{nodeId:p})})))):console.error(p,"this nodeId is not exist"),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Bf.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Bf.prototype,"init",null),Bf=(0,F.gn)([jt({token:{token:li,named:ui.command.id}})],Bf);var Np;(function(n){n.command=$i.HIGHLIGHT_NODE,n.hookKey="highlightNode"})(Np||(Np={}));let xu=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().highlightNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{nodeId:p,stroke:g,strokeWidth:y}=u,b=h?.getCellById(p);if(b){if(b?.setAttrs({body:{stroke:g||"#7c68fc",strokeWidth:y||2}}),u?.isHighlightRelatedLines){const{edgeStroke:E,edgeStrokeWidth:T}=u;(h?.getEdges()).forEach(N=>{const k=N?.getData();u?.commandService.executeCommand(uo.HIGHLIGHT_EDGE.id,{edgeId:k?.id,strokeColor:E,strokeWidth:T})})}}else return console.error(p,"this nodeId is not exist"),{err:"this nodeId is not exist"};return{err:null}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],xu.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],xu.prototype,"init",null),xu=(0,F.gn)([jt({token:{token:li,named:Np.command.id}})],xu);var zf;(function(n){n.command=$i.UPDATE_NODE_PORT,n.hookKey="updateNodePort"})(zf||(zf={}));let Ip=class{constructor(){this.getCell=(r,i)=>typeof i=="string"?r.getCellById(i):i,this.getNodeConfig=r=>{const i=r.getData(),s=r.getPosition(),a=r.getSize();return Object.assign(Object.assign(Object.assign({},i),s),a)},this.updatePortsOfNodeConfig=(r,i,s)=>{const a=this.getNodeConfig(r);this.isNodeAnchors(a.ports)&&(a.ports=[...i]),this.isPortMetaData(a.ports)&&(a.ports.items=[...i]),r.setData(a,s)},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),a=r.getHooks(),u=yield r.getX6Graph(),h=yield a.updateNodePort.call(i,p=>(0,F.mG)(this,void 0,void 0,function*(){const{node:g,updatePorts:y,options:b,commandService:E}=p,T=this.getCell(u,g);if(!T||T.isEdge())return console.error("node_is _not_exsit",g),{err:"node_is _not_exsit"};const O=T.getPorts(),N=yield y([...O],T,u);return N===!1?{err:"service rejected"}:(T.setPropByPath("ports/items",N,Object.assign({rewrite:!0},b)),this.updatePortsOfNodeConfig(T,N,b),r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){E.executeCommand($i.UPDATE_NODE_PORT.id,{node:g,updatePorts:()=>(0,F.mG)(this,void 0,void 0,function*(){return O})})}))),{ports:N})}),s);return r.setResult(h),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isNodeAnchors(r){return Array.isArray(r)}isPortMetaData(r){return r.items&&Array.isArray(r.items)}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Ip.prototype,"contextProvider",void 0),Ip=(0,F.gn)([jt({token:{token:li,named:zf.command.id}})],Ip);const tm=n=>{n(bu),n(Xd),n(Wl),n(Ff),n(Zd),n(Yd),n(Kd),n(Bf),n(xu),n(Ip)},Wc=[yu,Wd,kc,Gf,ad,Xl,Rh,ui,Np,zf];var Rp;(function(n){n.command=ti.LOAD_META,n.hookKey="graphMeta"})(Rp||(Rp={}));let cd=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().graphMeta.call(r,p=>(0,F.mG)(this,void 0,void 0,function*(){const{graphMetaService:g}=p,y=g?yield g(p):Object.assign({},p?.meta);return Object.assign({flowId:y?.flowId},y)}),i),u=this.ctx.getModelService();return(yield id.getModel(u)).setValue(a),this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],cd.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],cd.prototype,"init",null),cd=(0,F.gn)([jt({token:{token:li,named:Rp.command.id}})],cd);var fl;(function(n){n.command=ti.SAVE_GRAPH_DATA,n.hookKey="saveGraphData"})(fl||(fl={}));let ld=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.ctx,i=r.getArgs();return yield r.getHooks().saveGraphData.call(i.args,a=>(0,F.mG)(this,void 0,void 0,function*(){const{saveGraphDataService:u,includeAttrs:h}=a,p=yield r.getX6Graph(),g=p.getNodes(),y=p.getEdges(),b=g.map(N=>{const k=N.getData(),B=N.position(),$=N.size(),X=Object.assign(Object.assign(Object.assign({id:N.id},k),B),$);return h&&(X.attrs=N.getAttrs()),X}),E=y.map(N=>{const k=N.getData(),B=Object.assign({id:N.id},k);return h&&(B.attrs=N.getAttrs()),B}),T={nodes:b,edges:E},O=yield this.ctx.getGraphMeta();if(u){const N=yield u(O,T);N&&this.ctx.setResult(N)}return{}}),i.hooks),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],ld.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],ld.prototype,"init",null),ld=(0,F.gn)([jt({token:{token:li,named:fl.command.id}})],ld);var Cu;(function(n){n.command=ti.LOAD_DATA,n.hookKey="loadData",n.createHook=()=>new ka})(Cu||(Cu={}));let Ps=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().loadData.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{loadDataService:h}=u,p=yield this.ctx.getGraphMeta();return{graphData:yield h(p)}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Ps.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Ps.prototype,"init",null),Ps=(0,F.gn)([jt({token:{token:li,named:Cu.command.id}})],Ps);const Ga=n=>typeof n=="string",pl=n=>{const r=Object.create(null);return i=>r[i]||(r[i]=n(i))},Uf=/-(\w)/g,Wo=pl(n=>n.replace(Uf,(r,i)=>i?i.toUpperCase():"")),Ds=Array.isArray,Hn=n=>typeof n=="number",ud=n=>Number.isNaN(Number(n)),Vf=n=>{const r=parseFloat(n);return ud(r)?n:r},ia=n=>n!==null&&typeof n=="object",Fa=n=>{if(n===null)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array){const r=[];return n.forEach(i=>{r.push(i)}),r.map(i=>Fa(i))}if(typeof n=="object"&&n!=={}){const r=Object.assign({},n);return Object.keys(r).forEach(i=>{r[i]=Fa(r[i])}),r}return n},vi=(n,r)=>{const i=n[r];return ia(i)?i.cell:i},Ba=(n,r,i)=>{const s=[];for(let a=0;a<n;a++)s[a]=0;return i&&i.forEach(a=>{const u=vi(a,"source"),h=vi(a,"target");u&&(s[r[u]]+=1),h&&(s[r[h]]+=1)}),s},qd=n=>{const r=[],i=n.length;for(let s=0;s<i;s+=1){r[s]=[];for(let a=0;a<i;a+=1)s===a?r[s][a]=0:n[s][a]===0||!n[s][a]?r[s][a]=1/0:r[s][a]=n[s][a]}for(let s=0;s<i;s+=1)for(let a=0;a<i;a+=1)for(let u=0;u<i;u+=1)r[a][u]>r[a][s]+r[s][u]&&(r[a][u]=r[a][s]+r[s][u]);return r},Jd=(n,r)=>{const{nodes:i,edges:s}=n,a=[],u={};if(!i)throw new Error("invalid nodes data!");return i&&i.forEach((h,p)=>{u[h.id]=p;const g=[];a.push(g)}),s&&s.forEach(h=>{const p=vi(h,"source"),g=vi(h,"target"),y=u[p],b=u[g];a[y][b]=1,r||(a[b][y]=1)}),a},kp=(n,r)=>{const i=[];return n.forEach(s=>{const a=[];s.forEach(u=>{a.push(u*r)}),i.push(a)}),i},kh=(n,r)=>{if(n&&n.children){for(let i=n.children.length-1;i>=0;i--)if(!kh(n.children[i],r))return}return!!r(n)},gl=(n,r)=>{typeof r=="function"&&kh(n,r)},wu=n=>typeof n=="function",Xc=new Map,nm=(n,r)=>{if(Xc.get(n)&&console.warn(`The layout with the name ${n} exists already, it will be overridden`),isObject(r)){class i extends Base{constructor(a){super();const u=this,h={},p=u.getDefaultCfg();Object.assign(h,p,r,a),Object.keys(h).forEach(g=>{const y=h[g];u[g]=y})}}Xc.set(n,i)}else Xc.set(n,r);return Xc.get(n)},jy=n=>{Xc.has(n)&&Xc.delete(n)},rm=n=>Xc.has(n)?Xc.get(n):null;class ls{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(r){return this.init(r),this.execute(!0)}init(r){this.nodes=r.nodes||[],this.edges=r.edges||[],this.combos=r.combos||[]}execute(r){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(r){r&&Object.assign(this,r)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}class Ja extends ls{constructor(r){super(),this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodeSize=30,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const r=this,i=r.nodes,s=r.edges,a=i.length,u=r.begin;if(a===0)return r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s};if(a===1)return i[0].x=u[0],i[0].y=u[1],r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s};const h=[];i.forEach(b=>{h.push(b)});const p={};if(h.forEach((b,E)=>{p[b.id]=E}),(r.sortBy==="degree"||!Ga(r.sortBy)||h[0][r.sortBy]===void 0)&&(r.sortBy="degree",ud(i[0].degree))){const b=Ba(h.length,p,s);h.forEach((E,T)=>{E.degree=b[T]})}h.sort((b,E)=>E[r.sortBy]-b[r.sortBy]),!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight);const g=r.rows,y=r.cols!=null?r.cols:r.columns;if(r.cells=a,g!=null&&y!=null?(r.rows=g,r.cols=y):g!=null&&y==null?(r.rows=g,r.cols=Math.ceil(r.cells/r.rows)):g==null&&y!=null?(r.cols=y,r.rows=Math.ceil(r.cells/r.cols)):(r.splits=Math.sqrt(r.cells*r.height/r.width),r.rows=Math.round(r.splits),r.cols=Math.round(r.width/r.height*r.splits)),r.cols*r.rows>r.cells){const b=r.small(),E=r.large();(b-1)*E>=r.cells?r.small(b-1):(E-1)*b>=r.cells&&r.large(E-1)}else for(;r.cols*r.rows<r.cells;){const b=r.small(),E=r.large();(E+1)*b>=r.cells?r.large(E+1):r.small(b+1)}r.cellWidth=r.width/r.cols,r.cellHeight=r.height/r.rows,r.condense&&(r.cellWidth=0,r.cellHeight=0),r.preventOverlap&&h.forEach(b=>{(!b.x||!b.y)&&(b.x=0,b.y=0);let E,T;Ds(b.size)?(E=b.size[0],T=b.size[1]):Hn(b.size)?(E=b.size,T=b.size):ia(b.size)&&(E=b.size.width,T=b.size.height),(E===void 0||T===void 0)&&(Ds(r.nodeSize)?(E=r.nodeSize[0],T=r.nodeSize[1]):Hn(r.nodeSize)?(E=r.nodeSize,T=r.nodeSize):(E=30,T=30));const O=r.preventOverlapPadding,N=E+O,k=T+O;r.cellWidth=Math.max(r.cellWidth,N),r.cellHeight=Math.max(r.cellHeight,k)}),r.cellUsed={},r.row=0,r.col=0,r.id2manPos={};for(let b=0;b<h.length;b++){const E=h[b];let T;if(r.position&&(T=r.position(E)),T&&(T.row!==void 0||T.col!==void 0)){const O={row:T.row,col:T.col};if(O.col===void 0)for(O.col=0;r.used(O.row,O.col);)O.col++;else if(O.row===void 0)for(O.row=0;r.used(O.row,O.col);)O.row++;r.id2manPos[E.id]=O,r.use(O.row,O.col)}r.getPos(E)}return r.onLayoutEnd&&r.onLayoutEnd(),{edges:s,nodes:h}}small(r){const i=this;let s;const a=i.rows||5,u=i.cols||5;return r==null?s=Math.min(a,u):Math.min(a,u)===i.rows?i.rows=r:i.cols=r,s}large(r){const i=this;let s;const a=i.rows||5,u=i.cols||5;return r==null?s=Math.max(a,u):Math.max(a,u)===i.rows?i.rows=r:i.cols=r,s}used(r,i){return this.cellUsed[`c-${r}-${i}`]||!1}use(r,i){const s=this;s.cellUsed[`c-${r}-${i}`]=!0}moveToNextCell(){const r=this,i=r.cols||5;r.col++,r.col>=i&&(r.col=0,r.row++)}getPos(r){const i=this,s=i.begin,a=i.cellWidth,u=i.cellHeight;let h,p;const g=i.id2manPos[r.id];if(g)h=g.col*a+a/2+s[0],p=g.row*u+u/2+s[1];else{for(;i.used(i.row,i.col);)i.moveToNextCell();h=i.col*a+a/2+s[0],p=i.row*u+u/2+s[1],i.use(i.row,i.col),i.moveToNextCell()}r.x=h,r.y=p}getType(){return"grid"}}const mc=(n,r)=>{let i;return n?Hn(n)?i=s=>n:i=n:i=s=>r||1,i};class N0 extends ls{constructor(r){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0}}execute(){var r,i;const s=this,a=s.nodes;if(s.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(s.timeInterval),!a||a.length===0){(r=s.onLayoutEnd)===null||r===void 0||r.call(s);return}!s.width&&typeof window<"u"&&(s.width=window.innerWidth),!s.height&&typeof window<"u"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);const u=s.center;if(a.length===1){a[0].x=u[0],a[0].y=u[1],(i=s.onLayoutEnd)===null||i===void 0||i.call(s);return}const h={},p={};a.forEach((E,T)=>{Hn(E.x)||(E.x=Math.random()*s.width),Hn(E.y)||(E.y=Math.random()*s.height),h[E.id]=E,p[E.id]=T}),s.nodeMap=h,s.nodeIdxMap=p,s.linkDistance=mc(s.linkDistance,1),s.nodeStrength=mc(s.nodeStrength,1),s.edgeStrength=mc(s.edgeStrength,1);const g=s.nodeSize;let y;if(s.preventOverlap){const E=s.nodeSpacing;let T;Hn(E)?T=()=>E:wu(E)?T=E:T=()=>0,g?Ds(g)?y=O=>(g[0]>g[1]?g[0]:g[1])+T(O):y=O=>g+T(O):y=O=>O.size?Ds(O.size)?(O.size[0]>O.size[1]?O.size[0]:O.size[1])+T(O):ia(O.size)?(O.size.width>O.size.height?O.size.width:O.size.height)+T(O):O.size+T(O):10+T(O)}s.nodeSize=y;const b=s.edges;s.degrees=Ba(a.length,s.nodeIdxMap,b),s.getMass||(s.getMass=E=>s.degrees[s.nodeIdxMap[E.id]]||1),s.run()}run(){var r;const i=this,{maxIteration:s,nodes:a,workerEnabled:u,minMovement:h}=i;if(!!a)if(u){for(let p=0;p<s;p++){const g=i.runOneStep(p);if(i.reachMoveThreshold(a,g,h))break}(r=i.onLayoutEnd)===null||r===void 0||r.call(i)}else{if(typeof window>"u")return;let p=0;this.timeInterval=window.setInterval(()=>{var g,y;if(!a)return;const b=i.runOneStep(p)||[];i.reachMoveThreshold(a,b,h)&&((g=i.onLayoutEnd)===null||g===void 0||g.call(i),window.clearInterval(i.timeInterval)),p++,p>=s&&((y=i.onLayoutEnd)===null||y===void 0||y.call(i),window.clearInterval(i.timeInterval))},0)}}reachMoveThreshold(r,i,s){let a=0;return r.forEach((u,h)=>{const p=u.x-i[h].x,g=u.y-i[h].y;a+=Math.sqrt(p*p+g*g)}),a/=r.length,a<s}runOneStep(r){var i;const s=this,{nodes:a,edges:u}=s,h=[],p=[];if(!a)return;a.forEach((b,E)=>{h[2*E]=0,h[2*E+1]=0,p[2*E]=0,p[2*E+1]=0}),s.calRepulsive(h,a),u&&s.calAttractive(h,u),s.calGravity(h,a);const g=Math.max(.02,s.interval-r*.002);s.updateVelocity(h,p,g,a);const y=[];return a.forEach(b=>{y.push({x:b.x,y:b.y})}),s.updatePosition(p,g,a),(i=s.tick)===null||i===void 0||i.call(s),y}calRepulsive(r,i){const s=this,a=s.getMass,u=s.nodeStrength,h=s.factor,p=s.coulombDisScale,g=s.preventOverlap,y=s.nodeSize;i.forEach((b,E)=>{const T=a?a(b):1;i.forEach((O,N)=>{if(E>=N)return;const k=b.x-O.x,B=b.y-O.y,$=Math.sqrt(k*k+B*B)+.01,X=($+.1)*p,ne=k/$,be=B/$,me=(u(b)+u(O))/2*h/(X*X),je=a?a(O):1;if(r[2*E]+=ne*me,r[2*E+1]+=be*me,r[2*N]-=ne*me,r[2*N+1]-=be*me,g&&$<(y(b)+y(O))/2){const ot=(u(b)+u(O))/2/($*$);r[2*E]+=ne*ot/T,r[2*E+1]+=be*ot/T,r[2*N]-=ne*ot/je,r[2*N+1]-=be*ot/je}})})}calAttractive(r,i){const s=this,a=s.nodeMap,u=s.nodeIdxMap,h=s.linkDistance,p=s.edgeStrength,g=s.getMass;i.forEach((y,b)=>{const E=vi(y,"source"),T=vi(y,"target"),O=a[E],N=a[T],k=N.x-O.x,B=N.y-O.y,$=Math.sqrt(k*k+B*B)+.01,X=k/$,ne=B/$,je=((h(y)||1)-$)*p(y),ot=u[E],ct=u[T],Xt=g?g(O):1,_t=g?g(N):1;r[2*ot]-=X*je/Xt,r[2*ot+1]-=ne*je/Xt,r[2*ct]+=X*je/_t,r[2*ct+1]+=ne*je/_t})}calGravity(r,i){const s=this,a=s.center,u=s.gravity,h=s.degrees,p=i.length;for(let g=0;g<p;g++){const y=i[g];let b=y.x-a[0],E=y.y-a[1],T=u;if(s.getCenter){const O=s.getCenter(y,h[g]);O&&Hn(O[0])&&Hn(O[1])&&Hn(O[2])&&(b=y.x-O[0],E=y.y-O[1],T=O[2])}!T||(r[2*g]-=T*b,r[2*g+1]-=T*E)}}updateVelocity(r,i,s,a){const u=this,h=s*u.damping;a.forEach((p,g)=>{let y=r[2*g]*h||.01,b=r[2*g+1]*h||.01;const E=Math.sqrt(y*y+b*b);if(E>u.maxSpeed){const T=u.maxSpeed/E;y=T*y,b=T*b}i[2*g]=y,i[2*g+1]=b})}updatePosition(r,i,s){s.forEach((a,u)=>{if(Hn(a.fx)&&Hn(a.fy)){a.x=a.fx,a.y=a.fy;return}const h=r[2*u]*i,p=r[2*u+1]*i;a.x+=h,a.y+=p})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)}destroy(){const r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0}getType(){return"gForce"}}function im(n){const r=+this._x.call(null,n),i=+this._y.call(null,n);return Lh(this.cover(r,i),r,i,n)}function Lh(n,r,i,s){if(isNaN(r)||isNaN(i))return n;var a,u=n._root,h={data:s},p=n._x0,g=n._y0,y=n._x1,b=n._y1,E,T,O,N,k,B,$,X;if(!u)return n._root=h,n;for(;u.length;)if((k=r>=(E=(p+y)/2))?p=E:y=E,(B=i>=(T=(g+b)/2))?g=T:b=T,a=u,!(u=u[$=B<<1|k]))return a[$]=h,n;if(O=+n._x.call(null,u.data),N=+n._y.call(null,u.data),r===O&&i===N)return h.next=u,a?a[$]=h:n._root=h,n;do a=a?a[$]=new Array(4):n._root=new Array(4),(k=r>=(E=(p+y)/2))?p=E:y=E,(B=i>=(T=(g+b)/2))?g=T:b=T;while(($=B<<1|k)===(X=(N>=T)<<1|O>=E));return a[X]=u,a[$]=h,n}function Gh(n){var r,i,s=n.length,a,u,h=new Array(s),p=new Array(s),g=1/0,y=1/0,b=-1/0,E=-1/0;for(i=0;i<s;++i)isNaN(a=+this._x.call(null,r=n[i]))||isNaN(u=+this._y.call(null,r))||(h[i]=a,p[i]=u,a<g&&(g=a),a>b&&(b=a),u<y&&(y=u),u>E&&(E=u));if(g>b||y>E)return this;for(this.cover(g,y).cover(b,E),i=0;i<s;++i)Lh(this,h[i],p[i],n[i]);return this}function vl(n,r){if(isNaN(n=+n)||isNaN(r=+r))return this;var i=this._x0,s=this._y0,a=this._x1,u=this._y1;if(isNaN(i))a=(i=Math.floor(n))+1,u=(s=Math.floor(r))+1;else{for(var h=a-i||1,p=this._root,g,y;i>n||n>=a||s>r||r>=u;)switch(y=(r<s)<<1|n<i,g=new Array(4),g[y]=p,p=g,h*=2,y){case 0:a=i+h,u=s+h;break;case 1:i=a-h,u=s+h;break;case 2:a=i+h,s=u-h;break;case 3:i=a-h,s=u-h;break}this._root&&this._root.length&&(this._root=p)}return this._x0=i,this._y0=s,this._x1=a,this._y1=u,this}function jf(){var n=[];return this.visit(function(r){if(!r.length)do n.push(r.data);while(r=r.next)}),n}function Fh(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function us(n,r,i,s,a){this.node=n,this.x0=r,this.y0=i,this.x1=s,this.y1=a}function Qd(n,r,i){var s,a=this._x0,u=this._y0,h,p,g,y,b=this._x1,E=this._y1,T=[],O=this._root,N,k;for(O&&T.push(new us(O,a,u,b,E)),i==null?i=1/0:(a=n-i,u=r-i,b=n+i,E=r+i,i*=i);N=T.pop();)if(!(!(O=N.node)||(h=N.x0)>b||(p=N.y0)>E||(g=N.x1)<a||(y=N.y1)<u))if(O.length){var B=(h+g)/2,$=(p+y)/2;T.push(new us(O[3],B,$,g,y),new us(O[2],h,$,B,y),new us(O[1],B,p,g,$),new us(O[0],h,p,B,$)),(k=(r>=$)<<1|n>=B)&&(N=T[T.length-1],T[T.length-1]=T[T.length-1-k],T[T.length-1-k]=N)}else{var X=n-+this._x.call(null,O.data),ne=r-+this._y.call(null,O.data),be=X*X+ne*ne;if(be<i){var me=Math.sqrt(i=be);a=n-me,u=r-me,b=n+me,E=r+me,s=O.data}}return s}function eh(n){if(isNaN(b=+this._x.call(null,n))||isNaN(E=+this._y.call(null,n)))return this;var r,i=this._root,s,a,u,h=this._x0,p=this._y0,g=this._x1,y=this._y1,b,E,T,O,N,k,B,$;if(!i)return this;if(i.length)for(;;){if((N=b>=(T=(h+g)/2))?h=T:g=T,(k=E>=(O=(p+y)/2))?p=O:y=O,r=i,!(i=i[B=k<<1|N]))return this;if(!i.length)break;(r[B+1&3]||r[B+2&3]||r[B+3&3])&&(s=r,$=B)}for(;i.data!==n;)if(a=i,!(i=i.next))return this;return(u=i.next)&&delete i.next,a?(u?a.next=u:delete a.next,this):r?(u?r[B]=u:delete r[B],(i=r[0]||r[1]||r[2]||r[3])&&i===(r[3]||r[2]||r[1]||r[0])&&!i.length&&(s?s[$]=i:this._root=i),this):(this._root=u,this)}function Lp(n){for(var r=0,i=n.length;r<i;++r)this.remove(n[r]);return this}function Hf(){return this._root}function za(){var n=0;return this.visit(function(r){if(!r.length)do++n;while(r=r.next)}),n}function ml(n){var r=[],i,s=this._root,a,u,h,p,g;for(s&&r.push(new us(s,this._x0,this._y0,this._x1,this._y1));i=r.pop();)if(!n(s=i.node,u=i.x0,h=i.y0,p=i.x1,g=i.y1)&&s.length){var y=(u+p)/2,b=(h+g)/2;(a=s[3])&&r.push(new us(a,y,b,p,g)),(a=s[2])&&r.push(new us(a,u,b,y,g)),(a=s[1])&&r.push(new us(a,y,h,p,b)),(a=s[0])&&r.push(new us(a,u,h,y,b))}return this}function ds(n){var r=[],i=[],s;for(this._root&&r.push(new us(this._root,this._x0,this._y0,this._x1,this._y1));s=r.pop();){var a=s.node;if(a.length){var u,h=s.x0,p=s.y0,g=s.x1,y=s.y1,b=(h+g)/2,E=(p+y)/2;(u=a[0])&&r.push(new us(u,h,p,b,E)),(u=a[1])&&r.push(new us(u,b,p,g,E)),(u=a[2])&&r.push(new us(u,h,E,b,y)),(u=a[3])&&r.push(new us(u,b,E,g,y))}i.push(s)}for(;s=i.pop();)n(s.node,s.x0,s.y0,s.x1,s.y1);return this}function ba(n){return n[0]}function Gp(n){return arguments.length?(this._x=n,this):this._x}function $f(n){return n[1]}function om(n){return arguments.length?(this._y=n,this):this._y}function Fp(n,r,i){var s=new Bh(r??ba,i??$f,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function Bh(n,r,i,s,a,u){this._x=n,this._y=r,this._x0=i,this._y0=s,this._x1=a,this._y1=u,this._root=void 0}function Bp(n){for(var r={data:n.data},i=r;n=n.next;)i=i.next={data:n.data};return r}var xa=Fp.prototype=Bh.prototype;xa.copy=function(){var n=new Bh(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,i,s;if(!r)return n;if(!r.length)return n._root=Bp(r),n;for(i=[{source:r,target:n._root=new Array(4)}];r=i.pop();)for(var a=0;a<4;++a)(s=r.source[a])&&(s.length?i.push({source:s,target:r.target[a]=new Array(4)}):r.target[a]=Bp(s));return n},xa.add=im,xa.addAll=Gh,xa.cover=vl,xa.data=jf,xa.extent=Fh,xa.find=Qd,xa.remove=eh,xa.removeAll=Lp,xa.root=Hf,xa.size=za,xa.visit=ml,xa.visitAfter=ds,xa.x=Gp,xa.y=om;function Qa(n){return function(){return n}}function Eu(n){return(n()-.5)*1e-6}var Su={value:function(){}};function kg(){for(var n=0,r=arguments.length,i={},s;n<r;++n){if(!(s=arguments[n]+"")||s in i||/[\s.]/.test(s))throw new Error("illegal type: "+s);i[s]=[]}return new zh(i)}function zh(n){this._=n}function I0(n,r){return n.trim().split(/^|\s+/).map(function(i){var s="",a=i.indexOf(".");if(a>=0&&(s=i.slice(a+1),i=i.slice(0,a)),i&&!r.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:s}})}zh.prototype=kg.prototype={constructor:zh,on:function(r,i){var s=this._,a=I0(r+"",s),u,h=-1,p=a.length;if(arguments.length<2){for(;++h<p;)if((u=(r=a[h]).type)&&(u=_u(s[u],r.name)))return u;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++h<p;)if(u=(r=a[h]).type)s[u]=R0(s[u],r.name,i);else if(i==null)for(u in s)s[u]=R0(s[u],r.name,null);return this},copy:function(){var r={},i=this._;for(var s in i)r[s]=i[s].slice();return new zh(r)},call:function(r,i){if((u=arguments.length-2)>0)for(var s=new Array(u),a=0,u,h;a<u;++a)s[a]=arguments[a+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(h=this._[r],a=0,u=h.length;a<u;++a)h[a].value.apply(i,s)},apply:function(r,i,s){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var a=this._[r],u=0,h=a.length;u<h;++u)a[u].value.apply(i,s)}};function _u(n,r){for(var i=0,s=n.length,a;i<s;++i)if((a=n[i]).name===r)return a.value}function R0(n,r,i){for(var s=0,a=n.length;s<a;++s)if(n[s].name===r){n[s]=Su,n=n.slice(0,s).concat(n.slice(s+1));break}return i!=null&&n.push({name:r,value:i}),n}var Lg=kg,ec=0,Zl=0,K=0,Pe=1e3,ze,Et,ft=0,xt=0,It=0,en=typeof performance=="object"&&performance.now?performance:Date,hn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function pn(){return xt||(hn(fn),xt=en.now()+It)}function fn(){xt=0}function sn(){this._call=this._time=this._next=null}sn.prototype=Nn.prototype={constructor:sn,restart:function(n,r,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?pn():+i)+(r==null?0:+r),!this._next&&Et!==this&&(Et?Et._next=this:ze=this,Et=this),this._call=n,this._time=i,vn()},stop:function(){this._call&&(this._call=null,this._time=1/0,vn())}};function Nn(n,r,i){var s=new sn;return s.restart(n,r,i),s}function ln(){pn(),++ec;for(var n=ze,r;n;)(r=xt-n._time)>=0&&n._call.call(null,r),n=n._next;--ec}function En(){xt=(ft=en.now())+It,ec=Zl=0;try{ln()}finally{ec=0,Rt(),xt=0}}function ht(){var n=en.now(),r=n-ft;r>Pe&&(It-=r,ft=n)}function Rt(){for(var n,r=ze,i,s=1/0;r;)r._call?(s>r._time&&(s=r._time),n=r,r=r._next):(i=r._next,r._next=null,r=n?n._next=i:ze=i);Et=n,vn(s)}function vn(n){if(!ec){Zl&&(Zl=clearTimeout(Zl));var r=n-xt;r>24?(n<1/0&&(Zl=setTimeout(En,n-en.now()-It)),K&&(K=clearInterval(K))):(K||(ft=en.now(),K=setInterval(ht,Pe)),ec=1,hn(En))}}var zn=1664525,tn=1013904223,Fn=4294967296;function Wt(){var n=1;return function(){return(n=(zn*n+tn)%Fn)/Fn}}function _n(n){return n.x}function nn(n){return n.y}var An=10,hr=Math.PI*(3-Math.sqrt(5));function Mr(n){var r,i=1,s=.001,a=1-Math.pow(s,1/300),u=0,h=.6,p=new Map,g=Nn(E),y=Lg("tick","end"),b=Wt();n==null&&(n=[]);function E(){T(),y.call("tick",r),i<s&&(g.stop(),y.call("end",r))}function T(k){var B,$=n.length,X;k===void 0&&(k=1);for(var ne=0;ne<k;++ne)for(i+=(u-i)*a,p.forEach(function(be){be(i)}),B=0;B<$;++B)X=n[B],X.fx==null?X.x+=X.vx*=h:(X.x=X.fx,X.vx=0),X.fy==null?X.y+=X.vy*=h:(X.y=X.fy,X.vy=0);return r}function O(){for(var k=0,B=n.length,$;k<B;++k){if($=n[k],$.index=k,$.fx!=null&&($.x=$.fx),$.fy!=null&&($.y=$.fy),isNaN($.x)||isNaN($.y)){var X=An*Math.sqrt(.5+k),ne=k*hr;$.x=X*Math.cos(ne),$.y=X*Math.sin(ne)}(isNaN($.vx)||isNaN($.vy))&&($.vx=$.vy=0)}}function N(k){return k.initialize&&k.initialize(n,b),k}return O(),r={tick:T,restart:function(){return g.restart(E),r},stop:function(){return g.stop(),r},nodes:function(B){return arguments.length?(n=B,O(),p.forEach(N),r):n},alpha:function(B){return arguments.length?(i=+B,r):i},alphaMin:function(B){return arguments.length?(s=+B,r):s},alphaDecay:function(B){return arguments.length?(a=+B,r):+a},alphaTarget:function(B){return arguments.length?(u=+B,r):u},velocityDecay:function(B){return arguments.length?(h=1-B,r):1-h},randomSource:function(B){return arguments.length?(b=B,p.forEach(N),r):b},force:function(B,$){return arguments.length>1?($==null?p.delete(B):p.set(B,N($)),r):p.get(B)},find:function(B,$,X){var ne=0,be=n.length,me,je,ot,ct,Xt;for(X==null?X=1/0:X*=X,ne=0;ne<be;++ne)ct=n[ne],me=B-ct.x,je=$-ct.y,ot=me*me+je*je,ot<X&&(Xt=ct,X=ot);return Xt},on:function(B,$){return arguments.length>1?(y.on(B,$),r):y.on(B)}}}function Tn(){var n,r,i,s,a=Qa(-30),u,h=1,p=1/0,g=.81;function y(O){var N,k=n.length,B=Fp(n,_n,nn).visitAfter(E);for(s=O,N=0;N<k;++N)r=n[N],B.visit(T)}function b(){if(!!n){var O,N=n.length,k;for(u=new Array(N),O=0;O<N;++O)k=n[O],u[k.index]=+a(k,O,n)}}function E(O){var N=0,k,B,$=0,X,ne,be;if(O.length){for(X=ne=be=0;be<4;++be)(k=O[be])&&(B=Math.abs(k.value))&&(N+=k.value,$+=B,X+=B*k.x,ne+=B*k.y);O.x=X/$,O.y=ne/$}else{k=O,k.x=k.data.x,k.y=k.data.y;do N+=u[k.data.index];while(k=k.next)}O.value=N}function T(O,N,k,B){if(!O.value)return!0;var $=O.x-r.x,X=O.y-r.y,ne=B-N,be=$*$+X*X;if(ne*ne/g<be)return be<p&&($===0&&($=Eu(i),be+=$*$),X===0&&(X=Eu(i),be+=X*X),be<h&&(be=Math.sqrt(h*be)),r.vx+=$*O.value*s/be,r.vy+=X*O.value*s/be),!0;if(O.length||be>=p)return;(O.data!==r||O.next)&&($===0&&($=Eu(i),be+=$*$),X===0&&(X=Eu(i),be+=X*X),be<h&&(be=Math.sqrt(h*be)));do O.data!==r&&(ne=u[O.data.index]*s/be,r.vx+=$*ne,r.vy+=X*ne);while(O=O.next)}return y.initialize=function(O,N){n=O,i=N,b()},y.strength=function(O){return arguments.length?(a=typeof O=="function"?O:Qa(+O),b(),y):a},y.distanceMin=function(O){return arguments.length?(h=O*O,y):Math.sqrt(h)},y.distanceMax=function(O){return arguments.length?(p=O*O,y):Math.sqrt(p)},y.theta=function(O){return arguments.length?(g=O*O,y):Math.sqrt(g)},y}function dn(n,r){var i,s=1;n==null&&(n=0),r==null&&(r=0);function a(){var u,h=i.length,p,g=0,y=0;for(u=0;u<h;++u)p=i[u],g+=p.x,y+=p.y;for(g=(g/h-n)*s,y=(y/h-r)*s,u=0;u<h;++u)p=i[u],p.x-=g,p.y-=y}return a.initialize=function(u){i=u},a.x=function(u){return arguments.length?(n=+u,a):n},a.y=function(u){return arguments.length?(r=+u,a):r},a.strength=function(u){return arguments.length?(s=+u,a):s},a}function qt(n){return n.index}function xr(n,r){var i=n.get(r);if(!i)throw new Error("node not found: "+r);return i}function Fr(n){var r=qt,i=E,s,a=Qa(30),u,h,p,g,y,b=1;n==null&&(n=[]);function E(B){return 1/Math.min(p[B.source.index],p[B.target.index])}function T(B){for(var $=0,X=n.length;$<b;++$)for(var ne=0,be,me,je,ot,ct,Xt,_t;ne<X;++ne)be=n[ne],me=be.source,je=be.target,ot=je.x+je.vx-me.x-me.vx||Eu(y),ct=je.y+je.vy-me.y-me.vy||Eu(y),Xt=Math.sqrt(ot*ot+ct*ct),Xt=(Xt-u[ne])/Xt*B*s[ne],ot*=Xt,ct*=Xt,je.vx-=ot*(_t=g[ne]),je.vy-=ct*_t,me.vx+=ot*(_t=1-_t),me.vy+=ct*_t}function O(){if(!!h){var B,$=h.length,X=n.length,ne=new Map(h.map(function(me,je){return[r(me,je,h),me]})),be;for(B=0,p=new Array($);B<X;++B)be=n[B],be.index=B,da()(be.source)!=="object"&&(be.source=xr(ne,be.source)),da()(be.target)!=="object"&&(be.target=xr(ne,be.target)),p[be.source.index]=(p[be.source.index]||0)+1,p[be.target.index]=(p[be.target.index]||0)+1;for(B=0,g=new Array(X);B<X;++B)be=n[B],g[B]=p[be.source.index]/(p[be.source.index]+p[be.target.index]);s=new Array(X),N(),u=new Array(X),k()}}function N(){if(!!h)for(var B=0,$=n.length;B<$;++B)s[B]=+i(n[B],B,n)}function k(){if(!!h)for(var B=0,$=n.length;B<$;++B)u[B]=+a(n[B],B,n)}return T.initialize=function(B,$){h=B,y=$,O()},T.links=function(B){return arguments.length?(n=B,O(),T):n},T.id=function(B){return arguments.length?(r=B,T):r},T.iterations=function(B){return arguments.length?(b=+B,T):b},T.strength=function(B){return arguments.length?(i=typeof B=="function"?B:Qa(+B),N(),T):i},T.distance=function(B){return arguments.length?(a=typeof B=="function"?B:Qa(+B),k(),T):a},T}function Yn(n){return n.x+n.vx}function si(n){return n.y+n.vy}function Dr(n){var r,i,s,a=1,u=1;typeof n!="function"&&(n=Qa(n==null?1:+n));function h(){for(var y,b=r.length,E,T,O,N,k,B,$=0;$<u;++$)for(E=Fp(r,Yn,si).visitAfter(p),y=0;y<b;++y)T=r[y],k=i[T.index],B=k*k,O=T.x+T.vx,N=T.y+T.vy,E.visit(X);function X(ne,be,me,je,ot){var ct=ne.data,Xt=ne.r,_t=k+Xt;if(ct){if(ct.index>T.index){var Zt=O-ct.x-ct.vx,at=N-ct.y-ct.vy,Gn=Zt*Zt+at*at;Gn<_t*_t&&(Zt===0&&(Zt=Eu(s),Gn+=Zt*Zt),at===0&&(at=Eu(s),Gn+=at*at),Gn=(_t-(Gn=Math.sqrt(Gn)))/Gn*a,T.vx+=(Zt*=Gn)*(_t=(Xt*=Xt)/(B+Xt)),T.vy+=(at*=Gn)*_t,ct.vx-=Zt*(_t=1-_t),ct.vy-=at*_t)}return}return be>O+_t||je<O-_t||me>N+_t||ot<N-_t}}function p(y){if(y.data)return y.r=i[y.data.index];for(var b=y.r=0;b<4;++b)y[b]&&y[b].r>y.r&&(y.r=y[b].r)}function g(){if(!!r){var y,b=r.length,E;for(i=new Array(b),y=0;y<b;++y)E=r[y],i[E.index]=+n(E,y,r)}}return h.initialize=function(y,b){r=y,s=b,g()},h.iterations=function(y){return arguments.length?(u=+y,h):u},h.strength=function(y){return arguments.length?(a=+y,h):a},h.radius=function(y){return arguments.length?(n=typeof y=="function"?y:Qa(+y),g(),h):n},h}function $r(n){var r=Qa(.1),i,s,a;typeof n!="function"&&(n=Qa(n==null?0:+n));function u(p){for(var g=0,y=i.length,b;g<y;++g)b=i[g],b.vx+=(a[g]-b.x)*s[g]*p}function h(){if(!!i){var p,g=i.length;for(s=new Array(g),a=new Array(g),p=0;p<g;++p)s[p]=isNaN(a[p]=+n(i[p],p,i))?0:+r(i[p],p,i)}}return u.initialize=function(p){i=p,h()},u.strength=function(p){return arguments.length?(r=typeof p=="function"?p:Qa(+p),h(),u):r},u.x=function(p){return arguments.length?(n=typeof p=="function"?p:Qa(+p),h(),u):n},u}function Ti(n){var r=Qa(.1),i,s,a;typeof n!="function"&&(n=Qa(n==null?0:+n));function u(p){for(var g=0,y=i.length,b;g<y;++g)b=i[g],b.vy+=(a[g]-b.y)*s[g]*p}function h(){if(!!i){var p,g=i.length;for(s=new Array(g),a=new Array(g),p=0;p<g;++p)s[p]=isNaN(a[p]=+n(i[p],p,i))?0:+r(i[p],p,i)}}return u.initialize=function(p){i=p,h()},u.strength=function(p){return arguments.length?(r=typeof p=="function"?p:Qa(+p),h(),u):r},u.y=function(p){return arguments.length?(n=typeof p=="function"?p:Qa(+p),h(),u):n},u}function Qo(){function n(In){return()=>In}let r=In=>In.cluster,i=n(1),s=n(-1),a=n(100),u=n(.1),h=[0,0],p=[],g={},y=[],b=100,E=100,T={none:{x:0,y:0}},O=[],N,k="force",B=!0,$=.1;function X(In){if(!B)return X;N.tick(),ct();for(let vr=0,Fi=p.length,Xi,po=In*$;vr<Fi;++vr)Xi=p[vr],Xi.vx+=(T[r(Xi)].x-Xi.x)*po,Xi.vy+=(T[r(Xi)].y-Xi.y)*po}function ne(){!p||be()}function be(){if(!p||!p.length)return;if(r(p[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const In=me();N=Mr(In.nodes).force("x",$r(b).strength(.1)).force("y",Ti(E).strength(.1)).force("collide",Dr(vr=>vr.r).iterations(4)).force("charge",Tn().strength(s)).force("links",Fr(In.nodes.length?In.links:[]).distance(a).strength(u)),O=N.nodes(),ct()}function me(){const In=[],vr=[],Fi={};let Xi=[],po={},Yr=[];return po=je(p),Yr=ot(y),Xi=Object.keys(po),Xi.forEach((Ys,Fc)=>{const Ho=po[Ys];In.push({id:Ys,size:Ho.count,r:Math.sqrt(Ho.sumforceNodeSize/Math.PI)}),Fi[Ys]=Fc}),Yr.forEach(Ys=>{const Fc=vi(Ys,"source"),Ho=vi(Ys,"target"),gf=Fi[Fc],vf=Fi[Ho];gf!==void 0&&vf!==void 0&&vr.push({source:gf,target:vf,count:Ys.count})}),{nodes:In,links:vr}}function je(In){const vr={};return In.forEach(Fi=>{const Xi=r(Fi);vr[Xi]||(vr[Xi]={count:0,sumforceNodeSize:0})}),In.forEach(Fi=>{const Xi=r(Fi),po=i(Fi),Yr=vr[Xi];Yr.count=Yr.count+1,Yr.sumforceNodeSize=Yr.sumforceNodeSize+Math.PI*(po*po)*1.3,vr[Xi]=Yr}),vr}function ot(In){const vr={},Fi=[];return In.forEach(po=>{const Yr=Xt(po);let Ys=0;vr[Yr]!==void 0&&(Ys=vr[Yr]),Ys+=1,vr[Yr]=Ys}),Object.entries(vr).forEach(([po,Yr])=>{const Ys=po.split("~")[0],Fc=po.split("~")[1];Ys!==void 0&&Fc!==void 0&&Fi.push({source:Ys,target:Fc,count:Yr})}),Fi}function ct(){return T={none:{x:0,y:0}},O.forEach(In=>{T[In.id]={x:In.x-h[0],y:In.y-h[1]}}),T}function Xt(In){const vr=vi(In,"source"),Fi=vi(In,"target"),Xi=r(g[vr]),po=r(g[Fi]);return Xi<=po?`${Xi}~${po}`:`${po}~${Xi}`}function _t(In){g={},In.forEach(vr=>{g[vr.id]=vr})}function Zt(In){return arguments.length?(k=In,ne(),X):k}function at(In){return arguments.length?typeof In=="string"?(r=vr=>vr[In],X):(r=In,X):r}function Gn(In){return arguments.length?(B=In,X):B}function Rn(In){return arguments.length?($=In,X):$}function Jn(In){return arguments.length?(b=In,X):b}function Li(In){return arguments.length?(E=In,X):E}function Gi(In){return arguments.length?(_t(In||[]),p=In||[],X):p}function Zr(In){return arguments.length?(y=In||[],ne(),X):y}function jo(In){return arguments.length?(typeof In=="function"?i=In:i=n(+In),ne(),X):i}function Xs(In){return arguments.length?(typeof In=="function"?s=In:s=n(+In),ne(),X):s}function yi(In){return arguments.length?(typeof In=="function"?a=In:a=n(+In),ne(),X):a}function Zs(In){return arguments.length?(typeof In=="function"?u=In:u=n(+In),ne(),X):u}function $a(In){return arguments.length?(h=In,X):h}return X.initialize=In=>{p=In,ne()},X.template=Zt,X.groupBy=at,X.enableGrouping=Gn,X.strength=Rn,X.centerX=Jn,X.centerY=Li,X.nodes=Gi,X.links=Zr,X.forceNodeSize=jo,X.nodeSize=X.forceNodeSize,X.forceCharge=Xs,X.forceLinkDistance=yi,X.forceLinkStrength=Zs,X.offset=$a,X.getFocis=ct,X}const hs={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};class Jr extends ls{constructor(r){super(),this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,r&&this.updateCfg(r)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(r){const i=this;i.nodes=r.nodes||[];const s=r.edges||[];i.edges=s.map(a=>{const u={},h=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(a).forEach(p=>{h.indexOf(p)>-1||(u[p]=a[p])}),u}),i.ticking=!1}execute(r){const i=this,s=i.nodes,a=i.edges;if(i.ticking)return;let u=i.forceSimulation;const h=i.alphaMin,p=i.alphaDecay,g=i.alpha;if(u){if(r){if(i.clustering&&i.clusterForce&&(i.clusterForce.nodes(s),i.clusterForce.links(a)),u.nodes(s),a&&i.edgeForce)i.edgeForce.links(a);else if(a&&!i.edgeForce){const y=Fr().id(b=>b.id).links(a);i.edgeStrength&&y.strength(i.edgeStrength),i.linkDistance&&y.distance(i.linkDistance),i.edgeForce=y,u.force("link",y)}}i.preventOverlap&&i.overlapProcess(u),u.alpha(g).restart(),this.ticking=!0}else try{const y=Tn();if(i.nodeStrength&&y.strength(i.nodeStrength),u=Mr().nodes(s),i.clustering){const b=Qo();b.centerX(i.center[0]).centerY(i.center[1]).template("force").strength(i.clusterFociStrength),a&&b.links(a),s&&b.nodes(s),b.forceLinkDistance(i.clusterEdgeDistance).forceLinkStrength(i.clusterEdgeStrength).forceCharge(i.clusterNodeStrength).forceNodeSize(i.clusterNodeSize),i.clusterForce=b,u.force("group",b)}if(u.force("center",dn(i.center[0],i.center[1])).force("charge",y).alpha(g).alphaDecay(p).alphaMin(h),i.preventOverlap&&i.overlapProcess(u),a){const b=Fr().id(E=>E.id).links(a);i.edgeStrength&&b.strength(i.edgeStrength),i.linkDistance&&b.distance(i.linkDistance),i.edgeForce=b,u.force("link",b)}if(i.workerEnabled&&!yo()&&(i.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!i.workerEnabled)u.on("tick",()=>{i.tick()}).on("end",()=>{i.ticking=!1,i.onLayoutEnd&&i.onLayoutEnd()}),i.ticking=!0;else{u.stop();const b=fs(u);for(let E=1;E<=b;E++)u.tick(),postMessage({nodes:s,currentTick:E,totalTicks:b,type:hs.TICK},void 0);i.ticking=!1}i.forceSimulation=u,i.ticking=!0}catch(y){i.ticking=!1,console.warn(y)}}overlapProcess(r){const i=this,s=i.nodeSize,a=i.nodeSpacing;let u,h;const p=i.collideStrength;if(Hn(a)?h=()=>a:wu(a)?h=a:h=()=>0,!s)u=g=>g.size?Ds(g.size)?(g.size[0]>g.size[1]?g.size[0]:g.size[1])/2+h(g):ia(g.size)?(g.size.width>g.size.height?g.size.width:g.size.height)/2+h(g):g.size/2+h(g):10+h(g);else if(wu(s))u=g=>s(g)+h(g);else if(Ds(s)){const y=(s[0]>s[1]?s[0]:s[1])/2;u=b=>y+h(b)}else if(Hn(s)){const g=s/2;u=y=>g+h(y)}else u=()=>10;r.force("collisionForce",Dr(u).strength(p))}updateCfg(r){const i=this;i.ticking&&(i.forceSimulation.stop(),i.ticking=!1),i.forceSimulation=null,Object.assign(i,r)}destroy(){const r=this;r.ticking&&(r.forceSimulation.stop(),r.ticking=!1),r.nodes=null,r.edges=null,r.destroyed=!0}}function fs(n){const r=n.alphaMin(),i=n.alphaTarget(),s=n.alpha(),a=Math.log((r-i)/(s-i))/Math.log(1-n.alphaDecay());return Math.ceil(a)}function yo(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function ps(n,r,i,s){n.forEach((a,u)=>{n[u].children=[],n[u].parent=[]}),s?r.forEach(a=>{const u=vi(a,"source"),h=vi(a,"target");let p=0;u&&(p=i[u]);let g=0;h&&(g=i[h]);const y=n[p].children,b=n[g].parent;y.push(n[g].id),b.push(n[p].id)}):r.forEach(a=>{const u=vi(a,"source"),h=vi(a,"target");let p=0;u&&(p=i[u]);let g=0;h&&(g=i[h]);const y=n[p].children,b=n[g].children;y.push(n[g].id),b.push(n[p].id)})}function es(n,r,i){const s=i.length;for(let a=0;a<s;a++){const u=vi(i[a],"source"),h=vi(i[a],"target");if(n.id===u&&r.id===h||r.id===u&&n.id===h)return!0}return!1}function ts(n,r){const i=n.degree,s=r.degree;return i<s?-1:i>s?1:0}class Co extends ls{constructor(r){super(),this.radius=null,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(r)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){const r=this,i=r.nodes,s=r.edges,a=i.length;if(a===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const u=r.center;if(a===1){i[0].x=u[0],i[0].y=u[1],r.onLayoutEnd&&r.onLayoutEnd();return}let h=r.radius,p=r.startRadius,g=r.endRadius;const y=r.divisions,b=r.startAngle,E=r.endAngle,T=(E-b)/a,O={};i.forEach((me,je)=>{O[me.id]=je}),r.nodeMap=O;const N=Ba(i.length,O,s);r.degrees=N,!h&&!p&&!g?h=r.height>r.width?r.width/2:r.height/2:!p&&g?p=g:p&&!g&&(g=p);const k=r.angleRatio,B=T*k,$=r.ordering;let X=[];$==="topology"?X=r.topologyOrdering():$==="topology-directed"?X=r.topologyOrdering(!0):$==="degree"?X=r.degreeOrdering():X=i;const ne=r.clockwise,be=Math.ceil(a/y);for(let me=0;me<a;++me){let je=h;!je&&p!==null&&g!==null&&(je=p+me*(g-p)/(a-1)),je||(je=10+me*100/(a-1));let ot=b+me%be*B+2*Math.PI/y*Math.floor(me/be);ne||(ot=E-me%be*B-2*Math.PI/y*Math.floor(me/be)),X[me].x=u[0]+Math.cos(ot)*je,X[me].y=u[1]+Math.sin(ot)*je,X[me].weight=N[me]}return r.onLayoutEnd&&r.onLayoutEnd(),{nodes:X,edges:this.edges}}topologyOrdering(r=!1){const i=this,s=i.degrees,a=i.edges,u=i.nodes,h=Fa(u),p=i.nodeMap,g=[h[0]],y=[u[0]],b=[],E=u.length;b[0]=!0,ps(h,a,p,r);let T=0;return h.forEach((O,N)=>{if(N!==0)if((N===E-1||s[N]!==s[N+1]||es(g[T],O,a))&&!b[N])g.push(O),y.push(u[p[O.id]]),b[N]=!0,T++;else{const k=g[T].children;let B=!1;for(let X=0;X<k.length;X++){const ne=p[k[X]];if(s[ne]===s[N]&&!b[ne]){g.push(h[ne]),y.push(u[p[h[ne].id]]),b[ne]=!0,B=!0;break}}let $=0;for(;!B&&(b[$]||(g.push(h[$]),y.push(u[p[h[$].id]]),b[$]=!0,B=!0),$++,$!==E););}}),y}degreeOrdering(){const r=this,i=r.nodes,s=[],a=r.degrees;return i.forEach((u,h)=>{u.degree=a[h],s.push(u)}),s.sort(ts),s}getType(){return"circular"}}var ns=M(85788),gs=M.n(ns);let Br=gs();!Br&&typeof window<"u"&&(Br=window.graphlib),Array.prototype.flat||(Array.prototype.flat=function(n){let r=n||1;if(!isFinite(r))return;const i=this.length;let s=[];if(this.length===0)return this;for(;r--;){const a=[];let u=!1;if(s.length===0){u=!0;for(let h=0;h<i;h++)this[h]instanceof Array?s.push(...this[h]):s.push(this[h])}else{for(let h=0;h<s.length;h++)s[h]instanceof Array?(u=!0,a.push(...s[h])):a.push(s[h]);s=a}if(!u&&r===1/0)break}return s});var Fo=Br;const Ii=n=>{n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev},gr=(n,r)=>{if(n!=="_next"&&n!=="_prev")return r};class di{constructor(){const r={};r._next=r._prev=r,this.isentinel=r}dequeue(){const r=this.isentinel,i=r._prev;if(i!==r)return Ii(i),i}enqueue(){const r=this.isentinel,i=r._prev;if(i!==r)return Ii(i),i}toString(){const r=[],i=this.isentinel;let s=i._prev;for(;s!==i;)r.push(JSON.stringify(s,gr)),s=s._prev;return`[${r.join(", ")}]`}}var wi=di;const co=Fo.Graph,Yl=()=>1,th=(n,r)=>{var i;if(n.nodeCount()<=1)return[];const s=St(n,r||Yl);return(i=Be(s.graph,s.buckets,s.zeroIdx).map(u=>n.outEdges(u.v,u.w)))===null||i===void 0?void 0:i.flat()},Be=(n,r,i)=>{let s=[];const a=r[r.length-1],u=r[0];let h;for(;n.nodeCount();){for(;h=u.dequeue();)Dt(n,r,i,h);for(;h=a.dequeue();)Dt(n,r,i,h);if(n.nodeCount()){for(let p=r.length-2;p>0;--p)if(h=r[p].dequeue(),h){s=s.concat(Dt(n,r,i,h,!0));break}}}return s},Dt=(n,r,i,s,a)=>{var u,h;const p=a?[]:void 0;return(u=n.inEdges(s.v))===null||u===void 0||u.forEach(g=>{const y=n.edge(g),b=n.node(g.v);a&&p.push({v:g.v,w:g.w}),b.out===void 0&&(b.out=0),b.out-=y,$n(r,i,b)}),(h=n.outEdges(s.v))===null||h===void 0||h.forEach(g=>{const y=n.edge(g),b=g.w,E=n.node(b);E.in===void 0&&(E.in=0),E.in-=y,$n(r,i,E)}),n.removeNode(s.v),p},St=(n,r)=>{const i=new co;let s=0,a=0;n.nodes().forEach(g=>{i.setNode(g,{v:g,in:0,out:0})}),n.edges().forEach(g=>{const y=i.edge(g.v,g.w)||0,b=r?.(g),E=y+b;i.setEdge(g.v,g.w,E),a=Math.max(a,i.node(g.v).out+=b),s=Math.max(s,i.node(g.w).in+=b)});const u=[],h=a+s+3;for(let g=0;g<h;g++)u.push(new wi);const p=s+1;return i.nodes().forEach(g=>{$n(u,p,i.node(g))}),{buckets:u,zeroIdx:p,graph:i}},$n=(n,r,i)=>{i.out?i.in?n[i.out-i.in+r].enqueue(i):n[n.length-1].enqueue(i):n[0].enqueue(i)};var ni=th;const Ge=n=>{const r=s=>a=>s.edge(a).weight,i=n.graph().acyclicer==="greedy"?ni(n,r(n)):we(n);i?.forEach(s=>{const a=n.edge(s);n.removeEdge(s),a.forwardName=s.name,a.reversed=!0,n.setEdge(s.w,s.v,a,`rev-${Math.random()}`)})},we=n=>{const r=[],i={},s={},a=u=>{var h;s.hasOwnProperty(u)||(s[u]=!0,i[u]=!0,(h=n.outEdges(u))===null||h===void 0||h.forEach(p=>{i.hasOwnProperty(p.w)?r.push(p):a(p.w)}),delete i[u])};return n.nodes().forEach(a),r};var ut={run:Ge,undo:n=>{n.edges().forEach(r=>{const i=n.edge(r);if(i.reversed){n.removeEdge(r);const s=i.forwardName;delete i.reversed,delete i.forwardName,n.setEdge(r.w,r.v,i,s)}})}};const dt=Fo.Graph,qe=(n,r,i,s)=>{let a;do a=`${s}${Math.random()}`;while(n.hasNode(a));return i.dummy=r,n.setNode(a,i),a},Xe=n=>{const r=new dt().setGraph(n.graph());return n.nodes().forEach(i=>{r.setNode(i,n.node(i))}),n.edges().forEach(i=>{const s=r.edge(i.v,i.w)||{weight:0,minlen:1},a=n.edge(i);r.setEdge(i.v,i.w,{weight:s.weight+a.weight,minlen:Math.max(s.minlen,a.minlen)})}),r},it=n=>{const r=new dt({multigraph:n.isMultigraph()}).setGraph(n.graph());return n.nodes().forEach(i=>{var s;!((s=n.children(i))===null||s===void 0)&&s.length||r.setNode(i,n.node(i))}),n.edges().forEach(i=>r.setEdge(i,n.edge(i))),r},Le=(n,r)=>{const i={};return n?.forEach((s,a)=>{i[s]=r[a]}),i},$e=n=>{const r=n.nodes().map(i=>{var s;const a={};return(s=n.outEdges(i))===null||s===void 0||s.forEach(u=>{a[u.w]=(a[u.w]||0)+n.edge(u).weight}),a});return Le(n.nodes(),r)},Ie=n=>{const r=n.nodes().map(i=>{var s;const a={};return(s=n.inEdges(i))===null||s===void 0||s.forEach(u=>{a[u.v]=(a[u.v]||0)+n.edge(u).weight}),a});return Le(n.nodes(),r)},rt=(n,r)=>{const i=n.x,s=n.y,a=r.x-i,u=r.y-s;let h=n.width/2,p=n.height/2;if(!a&&!u)return{x:0,y:0};let g,y;return Math.abs(u)*h>Math.abs(a)*p?(u<0&&(p=-p),g=p*a/u,y=p):(a<0&&(h=-h),g=h,y=h*u/a),{x:i+g,y:s+y}},vt=n=>{const r=[],i=[],s=gn(n)+1;for(let a=0;a<s;a++)r.push([]),i.push([]);return n.nodes().forEach(a=>{const h=n.node(a).rank;h!==void 0&&r[h]&&i[h].push(a)}),i?.forEach((a,u)=>{a?.sort((h,p)=>{var g,y;return((g=n.node(h))===null||g===void 0?void 0:g.order)-((y=n.node(p))===null||y===void 0?void 0:y.order)}),a.forEach(h=>{r[u].push(h)})}),r},Vt=n=>{const r=n.nodes().filter(s=>n.node(s).rank!==void 0).map(s=>n.node(s).rank),i=Math.min(...r);n.nodes().forEach(s=>{const a=n.node(s);a.hasOwnProperty("rank")&&(a.rank||(a.rank=0),a.rank-=i)})},Ht=n=>{const r=n.nodes().filter(h=>n.node(h).rank!==void 0).map(h=>n.node(h).rank),i=Math.min(...r),s=[];n.nodes().forEach(h=>{var p;const g=(((p=n.node(h))===null||p===void 0?void 0:p.rank)||0)-i;s[g]||(s[g]=[]),s[g].push(h)});let a=0;const u=n.graph().nodeRankFactor||0;for(let h=0;h<s.length;h++){const p=s[h];p===void 0&&h%u!==0?--a:a&&p?.forEach(g=>{n.node(g).rank||(n.node(g).rank=0),n.node(g).rank+=a})}},Lt=(n,r,i,s)=>{const a={width:0,height:0};return Hn(i)&&Hn(s)&&(a.rank=i,a.order=s),qe(n,"border",a,r)},gn=n=>{const r=n.nodes().map(i=>{const s=n.node(i).rank;return s!==void 0?s:-1/0});return Math.max(...r)},sr=(n,r)=>{const i={lhs:[],rhs:[]};return n?.forEach(s=>{r(s)?i.lhs.push(s):i.rhs.push(s)}),i},zr=(n,r)=>{const i=Date.now();try{return r()}finally{console.log(`${n} time: ${Date.now()-i}ms`)}},Kn=(n,r)=>r(),fr=(n,r)=>{let i=1/0,s;return n?.forEach(a=>{const u=r(a);i>u&&(i=u,s=a)}),s};var tr={addDummyNode:qe,simplify:Xe,asNonCompoundGraph:it,successorWeights:$e,predecessorWeights:Ie,intersectRect:rt,buildLayerMatrix:vt,normalizeRanks:Vt,removeEmptyRanks:Ht,addBorderNode:Lt,maxRank:gn,partition:sr,time:zr,notime:Kn,zipObject:Le,minBy:fr};const Pi=n=>{n.graph().dummyChains=[],n.edges().forEach(r=>rs(n,r))},rs=(n,r)=>{var i,s;let a=r.v,u=n.node(a).rank;const h=r.w,p=n.node(h).rank,g=r.name,y=n.edge(r),b=y.labelRank;if(p===u+1)return;n.removeEdge(r);let E,T,O;for(O=0,++u;u<p;++O,++u)y.points=[],T={edgeLabel:y,width:0,height:0,edgeObj:r,rank:u},E=tr.addDummyNode(n,"edge",T,"_d"),u===b&&(T.width=y.width,T.height=y.height,T.dummy="edge-label",T.labelpos=y.labelpos),n.setEdge(a,E,{weight:y.weight},g),O===0&&(n.graph().dummyChains||(n.graph().dummyChains=[]),(s=(i=n.graph())===null||i===void 0?void 0:i.dummyChains)===null||s===void 0||s.push(E)),a=E;n.setEdge(a,h,{weight:y.weight},g)};var zp={run:Pi,undo:n=>{var r;(r=n.graph().dummyChains)===null||r===void 0||r.forEach(i=>{var s;let a=n.node(i);const u=a.edgeLabel;let h;a.edgeObj&&n.setEdge(a.edgeObj,u);let p=i;for(;a.dummy;)h=(s=n.successors(p))===null||s===void 0?void 0:s[0],n.removeNode(p),u.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(u.x=a.x,u.y=a.y,u.width=a.width,u.height=a.height),p=h,a=n.node(p)})}};const Ua=n=>{var r;const i={},s=a=>{var u;const h=n.node(a);if(i.hasOwnProperty(a))return h.rank;i[a]=!0;const p=(u=n.outEdges(a))===null||u===void 0?void 0:u.map(y=>s(y.w)-n.edge(y).minlen||1/0);let g=Math.min(...p);return(g===Number.POSITIVE_INFINITY||g===void 0||g===null)&&(g=0),h.rank=g,g};(r=n.sources())===null||r===void 0||r.forEach(a=>s(a))},Gg=n=>{var r;const i={};let s=0;const a=h=>{var p;const g=n.node(h);if(i.hasOwnProperty(h))return g.rank;i[h]=!0;const y=(p=n.outEdges(h))===null||p===void 0?void 0:p.map(E=>a(E.w)-n.edge(E).minlen||1/0);let b=Math.min(...y);return(b===Number.POSITIVE_INFINITY||b===void 0||b===null)&&(b=0),g.rank=b,s=Math.min(g.rank,s),g.rank};(r=n.sources())===null||r===void 0||r.forEach(h=>a(h)),s+=1;const u=(h,p)=>{var g;const y=n.node(h),b=isNaN(y.layer)?p:y.layer;(y.rank===void 0||y.rank<b)&&(y.rank=b),(g=n.outEdges(h))===null||g===void 0||g.map(E=>{u(E.w,b+n.edge(E).minlen)})};n.nodes().forEach(h=>{const p=n.node(h);isNaN(p.layer)?p.rank-=s:u(h,p.layer)})},Xo=(n,r)=>n.node(r.w).rank-n.node(r.v).rank-n.edge(r).minlen;var sm={longestPath:Ua,longestPathWithLayer:Gg,slack:Xo};const Hy=Fo.Graph,$y=n=>{const r=new Hy({directed:!1}),i=n.nodes()[0],s=n.nodeCount();r.setNode(i,{});let a,u;for(;C1(r,n)<s;)a=Wy(r,n),u=r.hasNode(a.v)?Xo(n,a):-Xo(n,a),Fg(r,n,u);return r},C1=(n,r)=>{const i=s=>{r.nodeEdges(s).forEach(a=>{const u=a.v,h=s===u?a.w:u;!n.hasNode(h)&&!Xo(r,a)&&(n.setNode(h,{}),n.setEdge(s,h,{}),i(h))})};return n.nodes().forEach(i),n.nodeCount()},am=n=>{const r=new Hy({directed:!1}),i=n.nodes()[0],s=n.nodeCount();r.setNode(i,{});let a,u;for(;cm(r,n)<s;)a=Wy(r,n),u=r.hasNode(a.v)?Xo(n,a):-Xo(n,a),Fg(r,n,u);return r},cm=(n,r)=>{const i=s=>{var a;(a=r.nodeEdges(s))===null||a===void 0||a.forEach(u=>{const h=u.v,p=s===h?u.w:h;!n.hasNode(p)&&(r.node(p).layer!==void 0||!Xo(r,u))&&(n.setNode(p,{}),n.setEdge(s,p,{}),i(p))})};return n.nodes().forEach(i),n.nodeCount()},Wy=(n,r)=>fr(r.edges(),i=>n.hasNode(i.v)!==n.hasNode(i.w)?Xo(r,i):1/0),Fg=(n,r,i)=>{n.nodes().forEach(s=>{r.node(s).rank||(r.node(s).rank=0),r.node(s).rank+=i})};var Nw={feasibleTree:$y,feasibleTreeWithLayer:am};const Bo=Fo.alg,{preorder:w1,postorder:E1}=Bo,nh=n=>{n=Xe(n),Ua(n);const r=$y(n);lm(r),Zc(r,n);let i,s;for(;i=Yy(r);)s=k0(r,n,i),Ky(r,n,i,s)},Zc=(n,r)=>{let i=E1(n,n.nodes());i=i?.slice(0,i?.length-1),i?.forEach(s=>{S1(n,r,s)})},S1=(n,r,i)=>{const a=n.node(i).parent;n.edge(i,a).cutvalue=Xy(n,r,i)},Xy=(n,r,i)=>{var s;const u=n.node(i).parent;let h=!0,p=r.edge(i,u),g=0;return p||(h=!1,p=r.edge(u,i)),g=p.weight,(s=r.nodeEdges(i))===null||s===void 0||s.forEach(y=>{const b=y.v===i,E=b?y.w:y.v;if(E!==u){const T=b===h,O=r.edge(y).weight;if(g+=T?O:-O,qy(n,i,E)){const N=n.edge(i,E).cutvalue;g+=T?-N:N}}}),g},lm=(n,r)=>{r!==void 0&&(r=n.nodes()[0]),Zy(n,{},1,r)},Zy=(n,r,i,s,a)=>{var u;const h=i;let p=i;const g=n.node(s);return r[s]=!0,(u=n.neighbors(s))===null||u===void 0||u.forEach(y=>{r.hasOwnProperty(y)||(p=Zy(n,r,p,y,s))}),g.low=h,g.lim=p++,a?g.parent=a:delete g.parent,p},Yy=n=>n.edges().find(r=>n.edge(r).cutvalue<0),k0=(n,r,i)=>{let s=i.v,a=i.w;r.hasEdge(s,a)||(s=i.w,a=i.v);const u=n.node(s),h=n.node(a);let p=u,g=!1;u.lim>h.lim&&(p=h,g=!0);const y=r.edges().filter(b=>g===Jy(n,n.node(b.v),p)&&g!==Jy(n,n.node(b.w),p));return fr(y,b=>Xo(r,b))},Ky=(n,r,i,s)=>{const a=i.v,u=i.w;n.removeEdge(a,u),n.setEdge(s.v,s.w,{}),lm(n),Zc(n,r),_1(n,r)},_1=(n,r)=>{const i=n.nodes().find(a=>!r.node(a).parent);let s=w1(n,i);s=s?.slice(1),s?.forEach(a=>{const u=n.node(a).parent;let h=r.edge(a,u),p=!1;h||(h=r.edge(u,a),p=!0),r.node(a).rank=r.node(u).rank+(p?h.minlen:-h.minlen)})},qy=(n,r,i)=>n.hasEdge(r,i),Jy=(n,r,i)=>i.low<=r.lim&&r.lim<=i.lim;nh.initLowLimValues=lm,nh.initCutValues=Zc,nh.calcCutValue=Xy,nh.leaveEdge=Yy,nh.enterEdge=k0,nh.exchangeEdges=Ky;var L0=nh;const A1=n=>{switch(n.graph().ranker){case"network-simplex":M1(n);break;case"tight-tree":Qy(n);break;case"longest-path":T1(n);break;default:Qy(n)}},T1=Ua,Qy=n=>{Gg(n),am(n)},M1=n=>{L0(n)};var O1=A1;const eb=n=>{var r;const i=D1(n);(r=n.graph().dummyChains)===null||r===void 0||r.forEach(s=>{var a,u;let h=n.node(s);const p=h.edgeObj;if(!p)return;const g=P1(n,i,p.v,p.w),y=g.path,b=g.lca;let E=0,T=y[E],O=!0;for(;s!==p.w;){if(h=n.node(s),O){for(;(T=y[E])!==b&&n.node(T).maxRank<h.rank;)E++;T===b&&(O=!1)}if(!O){for(;E<y.length-1&&((a=n.node(T=y[E+1]))===null||a===void 0?void 0:a.minRank)<=h.rank;)E++;T=y[E]}n.setParent(s,T),s=(u=n.successors(s))===null||u===void 0?void 0:u[0]}})},P1=(n,r,i,s)=>{const a=[],u=[],h=Math.min(r[i].low,r[s].low),p=Math.max(r[i].lim,r[s].lim);let g,y;g=i;do g=n.parent(g),a.push(g);while(g&&(r[g].low>h||p>r[g].lim));for(y=g,g=s;(g=n.parent(g))!==y;)u.push(g);return{lca:y,path:a.concat(u.reverse())}},D1=n=>{var r;const i={};let s=0;const a=u=>{var h;const p=s;(h=n.children(u))===null||h===void 0||h.forEach(a),i[u]={low:p,lim:s++}};return(r=n.children())===null||r===void 0||r.forEach(a),i};var N1=eb;const I1=n=>{var r;const i=tr.addDummyNode(n,"root",{},"_root"),s=R1(n),a=Math.max(...Object.values(s))-1,u=2*a+1;n.graph().nestingRoot=i,n.edges().forEach(p=>{n.edge(p).minlen*=u});const h=k1(n)+1;(r=n.children())===null||r===void 0||r.forEach(p=>{tb(n,i,u,h,a,s,p)}),n.graph().nodeRankFactor=u},tb=(n,r,i,s,a,u,h)=>{const p=n.children(h);if(!p?.length){h!==r&&n.setEdge(r,h,{weight:0,minlen:i});return}const g=tr.addBorderNode(n,"_bt"),y=tr.addBorderNode(n,"_bb"),b=n.node(h);n.setParent(g,h),b.borderTop=g,n.setParent(y,h),b.borderBottom=y,p?.forEach(E=>{tb(n,r,i,s,a,u,E);const T=n.node(E),O=T.borderTop?T.borderTop:E,N=T.borderBottom?T.borderBottom:E,k=T.borderTop?s:2*s,B=O!==N?1:a-u[h]+1;n.setEdge(g,O,{minlen:B,weight:k,nestingEdge:!0}),n.setEdge(N,y,{minlen:B,weight:k,nestingEdge:!0})}),n.parent(h)||n.setEdge(r,g,{weight:0,minlen:a+u[h]})},R1=n=>{var r;const i={},s=(a,u)=>{const h=n.children(a);h?.forEach(p=>s(p,u+1)),i[a]=u};return(r=n.children())===null||r===void 0||r.forEach(a=>s(a,1)),i},k1=n=>{let r=0;return n.edges().forEach(i=>{r+=n.edge(i).weight}),r};var nb={run:I1,cleanup:n=>{const r=n.graph();r.nestingRoot&&n.removeNode(r.nestingRoot),delete r.nestingRoot,n.edges().forEach(i=>{n.edge(i).nestingEdge&&n.removeEdge(i)})}};const L1=n=>{var r;const i=s=>{const a=n.children(s),u=n.node(s);if(a?.length&&a.forEach(h=>i(h)),u.hasOwnProperty("minRank")){u.borderLeft=[],u.borderRight=[];for(let h=u.minRank,p=u.maxRank+1;h<p;++h)um(n,"borderLeft","_bl",s,u,h),um(n,"borderRight","_br",s,u,h)}};(r=n.children())===null||r===void 0||r.forEach(s=>i(s))},um=(n,r,i,s,a,u)=>{const h={rank:u,width:0,height:0,borderType:r},p=a[r][u-1],g=tr.addDummyNode(n,"border",h,i);a[r][u]=g,n.setParent(g,s),p&&n.setEdge(p,g,{weight:1})};var rb=L1;const G1=n=>{var r;const i=(r=n.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(i==="lr"||i==="rl")&&dm(n)},ib=n=>{var r;const i=(r=n.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(i==="bt"||i==="rl")&&G0(n),(i==="lr"||i==="rl")&&(F1(n),dm(n))},dm=n=>{n.nodes().forEach(r=>{ob(n.node(r))}),n.edges().forEach(r=>{ob(n.edge(r))})},ob=n=>{const r=n.width;n.width=n.height,n.height=r},G0=n=>{n.nodes().forEach(r=>{hm(n.node(r))}),n.edges().forEach(r=>{var i;const s=n.edge(r);(i=s.points)===null||i===void 0||i.forEach(a=>hm(a)),s.hasOwnProperty("y")&&hm(s)})},hm=n=>{n.y=-n.y},F1=n=>{n.nodes().forEach(r=>{fm(n.node(r))}),n.edges().forEach(r=>{var i;const s=n.edge(r);(i=s.points)===null||i===void 0||i.forEach(a=>fm(a)),s.hasOwnProperty("x")&&fm(s)})},fm=n=>{const r=n.x;n.x=n.y,n.y=r};var sb={adjust:G1,undo:ib},ab=n=>{const r={},i=n.nodes().filter(b=>{var E;return!(!((E=n.children(b))===null||E===void 0)&&E.length)}),s=i.map(b=>n.node(b).rank),a=Math.max(...s),u=[];for(let b=0;b<a+1;b++)u.push([]);const h=b=>{var E;if(r.hasOwnProperty(b))return;r[b]=!0;const T=n.node(b);isNaN(T.rank)||u[T.rank].push(b),(E=n.successors(b))===null||E===void 0||E.forEach(O=>h(O))},p=i.sort((b,E)=>n.node(b).rank-n.node(E).rank),y=p.filter(b=>n.node(b).fixorder!==void 0).sort((b,E)=>n.node(b).fixorder-n.node(E).fixorder);return y?.forEach(b=>{isNaN(n.node(b).rank)||u[n.node(b).rank].push(b),r[b]=!0}),p?.forEach(h),u};const B1=(n,r,i)=>{const s=Le(i,i.map((b,E)=>E)),u=r.map(b=>{var E;const T=(E=n.outEdges(b))===null||E===void 0?void 0:E.map(O=>({pos:s[O.w]||0,weight:n.edge(O).weight}));return T?.sort((O,N)=>O.pos-N.pos)}).flat().filter(b=>b!==void 0);let h=1;for(;h<i.length;)h<<=1;const p=2*h-1;h-=1;const g=Array(p).fill(0,0,p);let y=0;return u?.forEach(b=>{let E=b.pos+h;g[E]+=b.weight;let T=0;for(;E>0;)E%2&&(T+=g[E+1]),E=E-1>>1,g[E]+=b.weight;y+=b.weight*T}),y};var cb=(n,r)=>{let i=0;for(let s=1;s<r?.length;++s)i+=B1(n,r[s-1],r[s]);return i};const z1=Fo.Graph,U1=(n,r,i)=>{const s=F0(n),a=new z1({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(u=>n.node(u));return n.nodes().forEach(u=>{const h=n.node(u),p=n.parent(u);(h.rank===r||h.minRank<=r&&r<=h.maxRank)&&(a.setNode(u),a.setParent(u,p||s),n[i](u).forEach(g=>{const y=g.v===u?g.w:g.v,b=a.edge(y,u),E=b!==void 0?b.weight:0;a.setEdge(y,u,{weight:n.edge(g).weight+E})}),h.hasOwnProperty("minRank")&&a.setNode(u,{borderLeft:h.borderLeft[r],borderRight:h.borderRight[r]}))}),a},F0=n=>{let r;for(;n.hasNode(r=`_root${Math.random()}`););return r};var V1=U1,lb=(n,r,i)=>{const s={};let a;i?.forEach(u=>{let h=n.parent(u),p,g;for(;h;){if(p=n.parent(h),p?(g=s[p],s[p]=h):(g=a,a=h),g&&g!==h){r.setEdge(g,h);return}h=p}})},db=(n,r)=>r.map(i=>{const s=n.inEdges(i);if(!s?.length)return{v:i};{const a={sum:0,weight:0};return s?.forEach(u=>{const h=n.edge(u),p=n.node(u.v);a.sum+=h.weight*p.order,a.weight+=h.weight}),{v:i,barycenter:a.sum/a.weight,weight:a.weight}}});const hb=(n,r)=>{var i,s,a;const u={};n?.forEach((p,g)=>{const y=u[p.v]={i:g,indegree:0,in:[],out:[],vs:[p.v]};p.barycenter!==void 0&&(y.barycenter=p.barycenter,y.weight=p.weight)}),(i=r.edges())===null||i===void 0||i.forEach(p=>{const g=u[p.v],y=u[p.w];g!==void 0&&y!==void 0&&(y.indegree++,g.out.push(u[p.w]))});const h=(a=(s=Object.values(u)).filter)===null||a===void 0?void 0:a.call(s,p=>!p.indegree);return fb(h)},fb=n=>{var r,i;const s=[],a=g=>y=>{y.merged||(y.barycenter===void 0||g.barycenter===void 0||y.barycenter>=g.barycenter)&&pb(g,y)},u=g=>y=>{y.in.push(g),--y.indegree===0&&n.push(y)};for(;n?.length;){const g=n.pop();s.push(g),(r=g.in.reverse())===null||r===void 0||r.forEach(y=>a(g)(y)),(i=g.out)===null||i===void 0||i.forEach(y=>u(g)(y))}const h=s.filter(g=>!g.merged),p=["vs","i","barycenter","weight"];return h.map(g=>{const y={};return p?.forEach(b=>{g[b]!==void 0&&(y[b]=g[b])}),y})},pb=(n,r)=>{var i;let s=0,a=0;n.weight&&(s+=n.barycenter*n.weight,a+=n.weight),r.weight&&(s+=r.barycenter*r.weight,a+=r.weight),n.vs=(i=r.vs)===null||i===void 0?void 0:i.concat(n.vs),n.barycenter=s/a,n.weight=a,n.i=Math.min(r.i,n.i),r.merged=!0};var H1=hb;const $1=(n,r,i)=>{const s=tr.partition(n,E=>E.hasOwnProperty("fixorder")&&!isNaN(E.fixorder)||E.hasOwnProperty("barycenter")),a=s.lhs,u=s.rhs.sort((E,T)=>-E.i- -T.i),h=[];let p=0,g=0,y=0;a?.sort(B0(!!r,!!i)),y=gb(h,u,y),a?.forEach(E=>{var T;y+=(T=E.vs)===null||T===void 0?void 0:T.length,h.push(E.vs),p+=E.barycenter*E.weight,g+=E.weight,y=gb(h,u,y)});const b={vs:h.flat()};return g&&(b.barycenter=p/g,b.weight=g),b},gb=(n,r,i)=>{let s=i,a;for(;r.length&&(a=r[r.length-1]).i<=s;)r.pop(),n?.push(a.vs),s++;return s},B0=(n,r)=>(i,s)=>{if(i.fixorder!==void 0&&s.fixorder!==void 0)return i.fixorder-s.fixorder;if(i.barycenter<s.barycenter)return-1;if(i.barycenter>s.barycenter)return 1;if(r&&i.order!==void 0&&s.order!==void 0){if(i.order<s.order)return-1;if(i.order>s.order)return 1}return n?s.i-i.i:i.i-s.i};var Bg=$1;const vb=(n,r,i,s,a)=>{var u,h,p,g;let y=n.children(r);const b=n.node(r),E=b?b.borderLeft:void 0,T=b?b.borderRight:void 0,O={};E&&(y=y?.filter($=>$!==E&&$!==T));const N=db(n,y||[]);N?.forEach($=>{var X;if(!((X=n.children($.v))===null||X===void 0)&&X.length){const ne=vb(n,$.v,i,s);O[$.v]=ne,ne.hasOwnProperty("barycenter")&&pm($,ne)}});const k=H1(N,i);W1(k,O),(u=k.filter($=>{var X;return!!$.vs||((X=$.vs)===null||X===void 0?void 0:X.length)>0}))===null||u===void 0||u.forEach($=>{const X=n.node($.vs[0]);$.fixorder=X.fixorder,$.order=X.order});const B=Bg(k,s,a);if(E&&(B.vs=[E,B.vs,T].flat(),!((h=n.predecessors(E))===null||h===void 0)&&h.length)){const $=n.node(((p=n.predecessors(E))===null||p===void 0?void 0:p[0])||{}),X=n.node(((g=n.predecessors(T))===null||g===void 0?void 0:g[0])||{});B.hasOwnProperty("barycenter")||(B.barycenter=0,B.weight=0),B.barycenter=(B.barycenter*B.weight+$.order+X.order)/(B.weight+2),B.weight+=2}return B},W1=(n,r)=>{n?.forEach(i=>{var s;const a=(s=i.vs)===null||s===void 0?void 0:s.map(u=>r[u]?r[u].vs:u);i.vs=a.flat()})},pm=(n,r)=>{n.barycenter!==void 0?(n.barycenter=(n.barycenter*n.weight+r.barycenter*r.weight)/(n.weight+r.weight),n.weight+=r.weight):(n.barycenter=r.barycenter,n.weight=r.weight)};var mb=vb;const X1=Fo.Graph,yb=n=>{const r=tr.maxRank(n),i=[],s=[];for(let y=1;y<r+1;y++)i.push(y);for(let y=r-1;y>-1;y--)s.push(y);const a=bb(n,i,"inEdges"),u=bb(n,s,"outEdges");let h=ab(n);gm(n,h);let p=Number.POSITIVE_INFINITY,g;for(let y=0,b=0;b<4;++y,++b){xb(y%2?a:u,y%4>=2),h=tr.buildLayerMatrix(n);const E=cb(n,h);E<p&&(b=0,g=Fa(h),p=E)}h=ab(n),gm(n,h);for(let y=0,b=0;b<4;++y,++b){xb(y%2?a:u,y%4>=2,!0),h=tr.buildLayerMatrix(n);const E=cb(n,h);E<p&&(b=0,g=Fa(h),p=E)}gm(n,g)},bb=(n,r,i)=>r.map(s=>V1(n,s,i)),xb=(n,r,i)=>{const s=new X1;n?.forEach(a=>{var u;const h=a.graph().root,p=mb(a,h,s,r,i);for(let g=0;g<((u=p.vs)===null||u===void 0?void 0:u.length);g++)a.node(p.vs[g]).order=g;lb(a,s,p.vs)})},gm=(n,r)=>{r?.forEach(i=>{i?.forEach((s,a)=>{n.node(s).order=a})})};var Z1=yb;const Y1=Fo.Graph,z0=(n,r)=>{const i={},s=(a,u)=>{let h=0,p=0;const g=a.length,y=u?.[u?.length-1];return u?.forEach((b,E)=>{var T;const O=K1(n,b),N=O?n.node(O).order:g;(O||b===y)&&((T=u.slice(p,E+1))===null||T===void 0||T.forEach(k=>{var B;(B=n.predecessors(k))===null||B===void 0||B.forEach($=>{const X=n.node($),ne=X.order;(ne<h||N<ne)&&!(X.dummy&&n.node(k).dummy)&&mm(i,$,k)})}),p=E+1,h=N)}),u};return r?.length&&r.reduce(s),i},vm=(n,r)=>{const i={},s=(u,h,p,g,y)=>{let b;const E=[];for(let T=h;T<p;T++)E.push(T);E.forEach(T=>{var O;b=u[T],n.node(b).dummy&&((O=n.predecessors(b))===null||O===void 0||O.forEach(N=>{const k=n.node(N);k.dummy&&(k.order<g||k.order>y)&&mm(i,N,b)}))})},a=(u,h)=>{let p=-1,g,y=0;return h?.forEach((b,E)=>{if(n.node(b).dummy==="border"){const T=n.predecessors(b)||[];T.length&&(g=n.node(T[0]).order,s(h,y,E,p,g),y=E,p=g)}s(h,y,h.length,g,u.length)}),h};return r?.length&&r.reduce(a),i},K1=(n,r)=>{var i;if(n.node(r).dummy)return(i=n.predecessors(r))===null||i===void 0?void 0:i.find(s=>n.node(s).dummy)},mm=(n,r,i)=>{let s=r,a=i;if(s>a){const h=s;s=a,a=h}let u=n[s];u||(n[s]=u={}),u[a]=!0},Cb=(n,r,i)=>{let s=r,a=i;if(s>a){const u=r;s=a,a=u}return n[s]&&n[s].hasOwnProperty(a)},Yc=(n,r,i,s)=>{const a={},u={},h={};return r?.forEach(p=>{p?.forEach((g,y)=>{a[g]=g,u[g]=g,h[g]=y})}),r?.forEach(p=>{let g=-1;p?.forEach(y=>{let b=s(y);if(b.length){b=b.sort((T,O)=>h[T]-h[O]);const E=(b.length-1)/2;for(let T=Math.floor(E),O=Math.ceil(E);T<=O;++T){const N=b[T];u[y]===y&&g<h[N]&&!Cb(i,y,N)&&(u[N]=y,u[y]=a[y]=a[N],g=h[N])}}})}),{root:a,align:u}},ym=(n,r,i,s,a)=>{var u;const h={},p=q1(n,r,i,a),g=a?"borderLeft":"borderRight",y=(T,O)=>{let N=p.nodes(),k=N.pop();const B={};for(;k;)B[k]?T(k):(B[k]=!0,N.push(k),N=N.concat(O(k))),k=N.pop()},b=T=>{h[T]=(p.inEdges(T)||[]).reduce((O,N)=>Math.max(O,(h[N.v]||0)+p.edge(N)),0)},E=T=>{const O=(p.outEdges(T)||[]).reduce((k,B)=>Math.min(k,(h[B.w]||0)-p.edge(B)),Number.POSITIVE_INFINITY),N=n.node(T);O!==Number.POSITIVE_INFINITY&&N.borderType!==g&&(h[T]=Math.max(h[T],O))};return y(b,p.predecessors.bind(p)),y(E,p.successors.bind(p)),(u=Object.values(s))===null||u===void 0||u.forEach(T=>{h[T]=h[i[T]]}),h},q1=(n,r,i,s)=>{const a=new Y1,u=n.graph(),h=Ws(u.nodesep,u.edgesep,s);return r?.forEach(p=>{let g;p?.forEach(y=>{const b=i[y];if(a.setNode(b),g){const E=i[g],T=a.edge(E,b);a.setEdge(E,b,Math.max(h(n,y,g),T||0))}g=y})}),a},rh=(n,r)=>tr.minBy(Object.values(r),i=>{var s;let a=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;return(s=Object.keys(i))===null||s===void 0||s.forEach(h=>{const p=i[h],g=J1(n,h)/2;a=Math.max(p+g,a),u=Math.min(p-g,u)}),a-u});function gi(n,r){const i=Object.values(r),s=Math.min(...i),a=Math.max(...i);["u","d"].forEach(u=>{["l","r"].forEach(h=>{const p=u+h,g=n[p];let y;if(g===r)return;const b=Object.values(g);y=h==="l"?s-Math.min(...b):a-Math.max(...b),y&&(n[p]={},Object.keys(g).forEach(E=>{n[p][E]=g[E]+y}))})})}const bm=(n,r)=>{const i={};return Object.keys(n.ul).forEach(s=>{if(r)i[s]=n[r.toLowerCase()][s];else{const u=Object.values(n).map(h=>h[s]).sort((h,p)=>h-p);i[s]=(u[1]+u[2])/2}}),i},Kc=n=>{const r=tr.buildLayerMatrix(n),i=Object.assign(z0(n,r),vm(n,r)),s={};let a;["u","d"].forEach(h=>{a=h==="u"?r:Object.values(r).reverse(),["l","r"].forEach(p=>{p==="r"&&(a=a.map(E=>Object.values(E).reverse()));const g=(h==="u"?n.predecessors:n.successors).bind(n),y=Yc(n,a,i,g);let b=ym(n,a,y.root,y.align,p==="r");p==="r"&&(b=Object.values(b).map(E=>-E)),s[h+p]=b})});const u=rh(n,s);return gi(s,u),bm(s,n.graph().align)},Ws=(n,r,i)=>(s,a,u)=>{const h=s.node(a),p=s.node(u);let g=0,y;if(g+=h.width/2,h.hasOwnProperty("labelpos"))switch((h.labelpos||"").toLowerCase()){case"l":y=-h.width/2;break;case"r":y=h.width/2;break}if(y&&(g+=i?y:-y),y=0,g+=(h.dummy?r:n)/2,g+=(p.dummy?r:n)/2,g+=p.width/2,p.hasOwnProperty("labelpos"))switch((p.labelpos||"").toLowerCase()){case"l":y=p.width/2;break;case"r":y=-p.width/2;break}return y&&(g+=i?y:-y),y=0,g},J1=(n,r)=>{var i;return((i=n.node(r))===null||i===void 0?void 0:i.width)||0};var Wf={positionX:Kc,findType1Conflicts:z0,findType2Conflicts:vm,addConflict:mm,hasConflict:Cb,verticalAlignment:Yc,horizontalCompaction:ym,alignCoordinates:gi,findSmallestWidthAlignment:rh,balance:bm};const Q1=n=>{const r=tr.buildLayerMatrix(n),i=n.graph().ranksep;let s=0;r?.forEach(a=>{const u=a.map(p=>n.node(p).height),h=Math.max(...u);a?.forEach(p=>{n.node(p).y=s+h/2}),s+=h+i})},ex=n=>{const r=tr.buildLayerMatrix(n),i=Object.assign(z0(n,r),vm(n,r)),s={};let a;["u","d"].forEach(h=>{a=h==="u"?r:Object.values(r).reverse(),["l","r"].forEach(p=>{p==="r"&&(a=a.map(E=>Object.values(E).reverse()));const g=(h==="u"?n.predecessors:n.successors).bind(n),y=Yc(n,a,i,g),b=ym(n,a,y.root,y.align,p==="r");p==="r"&&Object.keys(b).forEach(E=>b[E]=-b[E]),s[h+p]=b})});const u=rh(n,s);return u&&gi(s,u),bm(s,n.graph().align)};var tx=n=>{var r;n=tr.asNonCompoundGraph(n),Q1(n);const i=ex(n);(r=Object.keys(i))===null||r===void 0||r.forEach(s=>{n.node(s).x=i[s]})},xm=(n,r)=>{const s=n.nodes().filter(h=>{var p;return!(!((p=n.children(h))===null||p===void 0)&&p.length)}).map(h=>n.node(h).rank),a=Math.max(...s),u=[];for(let h=0;h<a+1;h++)u.push([]);r?.forEach(h=>{const p=n.node(h);!p||p.dummy||isNaN(p.rank)||(p.fixorder=u[p.rank].length,u[p.rank].push(h))})};const nx=Fo.Graph,ih=(n,r)=>{const i=r&&r.debugTiming?tr.time:tr.notime;i("layout",()=>{r&&!r.keepNodeOrder&&r.prevGraph&&i("  inheritOrder",()=>{U0(n,r.prevGraph)});const s=i("  buildLayoutGraph",()=>Sb(n));r&&r.edgeLabelSpace===!1||i("  makeSpaceForEdgeLabels",()=>{zo(s)});try{i("  runLayout",()=>{wb(s,i,r)})}catch(a){if(a.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,a);return}throw a}i("  updateInputGraph",()=>{Ns(n,s)})})},wb=(n,r,i)=>{r("    removeSelfEdges",()=>{cx(n)}),r("    acyclic",()=>{ut.run(n)}),r("    nestingGraph.run",()=>{nb.run(n)}),r("    rank",()=>{O1(tr.asNonCompoundGraph(n))}),r("    injectEdgeLabelProxies",()=>{j0(n)}),r("    removeEmptyRanks",()=>{Ht(n)}),r("    nestingGraph.cleanup",()=>{nb.cleanup(n)}),r("    normalizeRanks",()=>{Vt(n)}),r("    assignRankMinMax",()=>{ox(n)}),r("    removeEdgeLabelProxies",()=>{_b(n)}),r("    normalize.run",()=>{zp.run(n)}),r("    parentDummyChains",()=>{N1(n)}),r("    addBorderSegments",()=>{rb(n)}),i&&i.keepNodeOrder&&r("    initDataOrder",()=>{xm(n,i.nodeOrder)}),r("    order",()=>{Z1(n)}),r("    insertSelfEdges",()=>{wm(n)}),r("    adjustCoordinateSystem",()=>{sb.adjust(n)}),r("    position",()=>{tx(n)}),r("    positionSelfEdges",()=>{Em(n)}),r("    removeBorderNodes",()=>{ax(n)}),r("    normalize.undo",()=>{zp.undo(n)}),r("    fixupEdgeLabelCoords",()=>{Vp(n)}),r("    undoCoordinateSystem",()=>{sb.undo(n)}),r("    translateGraph",()=>{Ug(n)}),r("    assignNodeIntersects",()=>{qc(n)}),r("    reversePoints",()=>{sx(n)}),r("    acyclic.undo",()=>{ut.undo(n)})},U0=(n,r)=>{const i=r._nodes||{};n.nodes().forEach(s=>{const a=n.node(s);i[s]!==void 0?(a.fixorder=i[s]._order,delete i[s]._order):delete a.fixorder})},Ns=(n,r)=>{n.nodes().forEach(i=>{var s;const a=n.node(i),u=r.node(i);a&&(a.x=u.x,a.y=u.y,a._order=u.order,a._rank=u.rank,!((s=r.children(i))===null||s===void 0)&&s.length&&(a.width=u.width,a.height=u.height))}),n.edges().forEach(i=>{const s=n.edge(i),a=r.edge(i);s.points=a.points,a.hasOwnProperty("x")&&(s.x=a.x,s.y=a.y)}),n.graph().width=r.graph().width,n.graph().height=r.graph().height},hi=["nodesep","edgesep","ranksep","marginx","marginy"],zg={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},V0=["acyclicer","ranker","rankdir","align"],rx=["width","height","layer","fixorder"],Eb={width:0,height:0},Up=["minlen","weight","width","height","labeloffset"],ix={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Cm=["labelpos"],Sb=n=>{const r=new nx({multigraph:!0,compound:!0}),i=Kl(n.graph()),s={};return V0?.forEach(a=>{i[a]!==void 0&&(s[a]=i[a])}),r.setGraph(Object.assign({},zg,H0(i,hi),s)),n.nodes().forEach(a=>{const u=Kl(n.node(a)),h=H0(u,rx);Object.keys(Eb).forEach(p=>{h[p]===void 0&&(h[p]=Eb[p])}),r.setNode(a,h),r.setParent(a,n.parent(a))}),n.edges().forEach(a=>{const u=Kl(n.edge(a)),h={};Cm?.forEach(p=>{u[p]!==void 0&&(h[p]=u[p])}),r.setEdge(a,Object.assign({},ix,H0(u,Up),h))}),r},zo=n=>{const r=n.graph();r.ranksep||(r.ranksep=0),r.ranksep/=2,n.nodes().forEach(i=>{const s=n.node(i);isNaN(s.layer)||(s.layer?s.layer*=2:s.layer=0)}),n.edges().forEach(i=>{var s;const a=n.edge(i);a.minlen*=2,((s=a.labelpos)===null||s===void 0?void 0:s.toLowerCase())!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?a.width+=a.labeloffset:a.height+=a.labeloffset)})},j0=n=>{n.edges().forEach(r=>{const i=n.edge(r);if(i.width&&i.height){const s=n.node(r.v),a=n.node(r.w),u={e:r,rank:(a.rank-s.rank)/2+s.rank};tr.addDummyNode(n,"edge-proxy",u,"_ep")}})},ox=n=>{let r=0;n.nodes().forEach(i=>{const s=n.node(i);s.borderTop&&(s.minRank=n.node(s.borderTop).rank,s.maxRank=n.node(s.borderBottom).rank,r=Math.max(r,s.maxRank||-1/0))}),n.graph().maxRank=r},_b=n=>{n.nodes().forEach(r=>{const i=n.node(r);i.dummy==="edge-proxy"&&(n.edge(i.e).labelRank=i.rank,n.removeNode(r))})},Ug=n=>{let r=Number.POSITIVE_INFINITY,i=0,s=Number.POSITIVE_INFINITY,a=0;const u=n.graph(),h=u.marginx||0,p=u.marginy||0,g=y=>{if(!y)return;const b=y.x,E=y.y,T=y.width,O=y.height;!isNaN(b)&&!isNaN(T)&&(r=Math.min(r,b-T/2),i=Math.max(i,b+T/2)),!isNaN(E)&&!isNaN(O)&&(s=Math.min(s,E-O/2),a=Math.max(a,E+O/2))};n.nodes().forEach(y=>{g(n.node(y))}),n.edges().forEach(y=>{const b=n.edge(y);b.hasOwnProperty("x")&&g(b)}),r-=h,s-=p,n.nodes().forEach(y=>{const b=n.node(y);b.x-=r,b.y-=s}),n.edges().forEach(y=>{var b;const E=n.edge(y);(b=E.points)===null||b===void 0||b.forEach(T=>{T.x-=r,T.y-=s}),E.hasOwnProperty("x")&&(E.x-=r),E.hasOwnProperty("y")&&(E.y-=s)}),u.width=i-r+h,u.height=a-s+p},qc=n=>{n.edges().forEach(r=>{const i=n.edge(r),s=n.node(r.v),a=n.node(r.w);let u,h;i.points?(u=i.points[0],h=i.points[i.points.length-1]):(i.points=[],u=a,h=s),i.points.unshift(tr.intersectRect(s,u)),i.points.push(tr.intersectRect(a,h))})},Vp=n=>{n.edges().forEach(r=>{const i=n.edge(r);if(i.hasOwnProperty("x"))switch((i.labelpos==="l"||i.labelpos==="r")&&(i.width-=i.labeloffset),i.labelpos){case"l":i.x-=i.width/2+i.labeloffset;break;case"r":i.x+=i.width/2+i.labeloffset;break}})},sx=n=>{n.edges().forEach(r=>{const i=n.edge(r);i.reversed&&i.points.reverse()})},ax=n=>{n.nodes().forEach(r=>{var i,s,a;if(!((i=n.children(r))===null||i===void 0)&&i.length){const u=n.node(r),h=n.node(u.borderTop),p=n.node(u.borderBottom),g=n.node(u.borderLeft[((s=u.borderLeft)===null||s===void 0?void 0:s.length)-1]),y=n.node(u.borderRight[((a=u.borderRight)===null||a===void 0?void 0:a.length)-1]);u.width=Math.abs(y?.x-g?.x)||10,u.height=Math.abs(p?.y-h?.y)||10,u.x=(g?.x||0)+u.width/2,u.y=(h?.y||0)+u.height/2}}),n.nodes().forEach(r=>{n.node(r).dummy==="border"&&n.removeNode(r)})},cx=n=>{n.edges().forEach(r=>{if(r.v===r.w){const i=n.node(r.v);i.selfEdges||(i.selfEdges=[]),i.selfEdges.push({e:r,label:n.edge(r)}),n.removeEdge(r)}})},wm=n=>{const r=tr.buildLayerMatrix(n);r?.forEach(i=>{let s=0;i?.forEach((a,u)=>{var h;const p=n.node(a);p.order=u+s,(h=p.selfEdges)===null||h===void 0||h.forEach(g=>{tr.addDummyNode(n,"selfedge",{width:g.label.width,height:g.label.height,rank:p.rank,order:u+ ++s,e:g.e,label:g.label},"_se")}),delete p.selfEdges})})},Em=n=>{n.nodes().forEach(r=>{const i=n.node(r);if(i.dummy==="selfedge"){const s=n.node(i.e.v),a=s.x+s.width/2,u=s.y,h=i.x-a,p=s.height/2;n.setEdge(i.e,i.label),n.removeNode(r),i.label.points=[{x:a+2*h/3,y:u-p},{x:a+5*h/6,y:u-p},{y:u,x:a+h},{x:a+5*h/6,y:u+p},{x:a+2*h/3,y:u+p}],i.label.x=i.x,i.label.y=i.y}})},H0=(n,r)=>{const i={};return r?.forEach(s=>{n[s]!==void 0&&(i[s]=+n[s])}),i},Kl=n=>{const r={};return Object.keys(n).forEach(i=>{const s=n[i];r[i.toLowerCase()]=s}),r};var Mi=ih,$0={graphlib:Fo,layout:Mi,util:{time:zr,notime:Kn}};class yc extends ls{constructor(r){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=i=>{const s=this,{nodes:a}=s,u=a.find(h=>h.id===i);return u?u.layout!==!1:!0},this.updateCfg(r)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}execute(){const r=this,{nodes:i,nodeSize:s,rankdir:a,combos:u,begin:h}=r;if(!i)return;const p=r.edges||[],g=new $0.graphlib.Graph({multigraph:!0,compound:!0});let y;s?Ds(s)?y=()=>s:y=()=>[s,s]:y=k=>k.size?Ds(k.size)?k.size:ia(k.size)?[k.size.width||40,k.size.height||40]:[k.size,k.size]:[40,40];let b=jp(r.nodesepFunc,r.nodesep,50),E=jp(r.ranksepFunc,r.ranksep,50);(a==="LR"||a==="RL")&&(b=jp(r.ranksepFunc,r.ranksep,50),E=jp(r.nodesepFunc,r.nodesep,50)),g.setDefaultEdgeLabel(()=>({})),g.setGraph(r);const T={};i.filter(k=>k.layout!==!1).forEach(k=>{const B=y(k),$=E(k),X=b(k),ne=B[0]+2*X,be=B[1]+2*$,me=k.layer;Hn(me)?g.setNode(k.id,{width:ne,height:be,layer:me}):g.setNode(k.id,{width:ne,height:be}),this.sortByCombo&&k.comboId&&(T[k.comboId]||(T[k.comboId]=!0,g.setNode(k.comboId,{})),g.setParent(k.id,k.comboId))}),this.sortByCombo&&u&&u.forEach(k=>{!k.parentId||(T[k.parentId]||(T[k.parentId]=!0,g.setNode(k.parentId,{})),g.setParent(k.id,k.parentId))}),p.forEach(k=>{const B=vi(k,"source"),$=vi(k,"target");this.layoutNode(B)&&this.layoutNode($)&&g.setEdge(B,$,{weight:k.weight||1})});let O;r.preset&&(O=new $0.graphlib.Graph({multigraph:!0,compound:!0}),r.preset.nodes.forEach(k=>{O?.setNode(k.id,k)})),$0.layout(g,{prevGraph:O,edgeLabelSpace:r.edgeLabelSpace,keepNodeOrder:Boolean(!!r.nodeOrder),nodeOrder:r.nodeOrder});const N=[0,0];if(h){let k=1/0,B=1/0;g.nodes().forEach($=>{const X=g.node($);k>X.x&&(k=X.x),B>X.y&&(B=X.y)}),g.edges().forEach($=>{g.edge($).points.forEach(ne=>{k>ne.x&&(k=ne.x),B>ne.y&&(B=ne.y)})}),N[0]=h[0]-k,N[1]=h[1]-B}return g.nodes().forEach(k=>{const B=g.node(k),$=i.findIndex(X=>X.id===k);!i[$]||(i[$].x=B.x+N[0],i[$].y=B.y+N[1],i[$]._order=B._order)}),g.edges().forEach(k=>{const B=g.edge(k),$=p.findIndex(X=>{const ne=vi(X,"source"),be=vi(X,"target");return ne===k.v&&be===k.w});r.edgeLabelSpace&&r.controlPoints&&p[$].type!=="loop"&&(p[$].controlPoints=B.points.slice(1,B.points.length-1),p[$].controlPoints.forEach(X=>{X.x+=N[0],X.y+=N[1]}))}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:p}}getType(){return"dagre"}}function jp(n,r,i){let s;return n?s=n:Hn(r)?s=()=>r:s=()=>i,s}var lx=M(40271),wo=M.n(lx),ux=M(80069),Vg=M.n(ux),Xf=M(80866),Uh=M.n(Xf),Sm=M(6411),jg=M.n(Sm),dx=M(82675),W0=M.n(dx);const hx=Object.prototype.toString;function yl(n){return hx.call(n).endsWith("Array]")}function _m(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!yl(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var i=r.fromIndex,s=i===void 0?0:i,a=r.toIndex,u=a===void 0?n.length:a;if(s<0||s>=n.length||!Number.isInteger(s))throw new Error("fromIndex must be a positive integer smaller than length");if(u<=s||u>n.length||!Number.isInteger(u))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var h=n[s],p=s+1;p<u;p++)n[p]>h&&(h=n[p]);return h}function fx(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!yl(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var i=r.fromIndex,s=i===void 0?0:i,a=r.toIndex,u=a===void 0?n.length:a;if(s<0||s>=n.length||!Number.isInteger(s))throw new Error("fromIndex must be a positive integer smaller than length");if(u<=s||u>n.length||!Number.isInteger(u))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var h=n[s],p=s+1;p<u;p++)n[p]<h&&(h=n[p]);return h}function Ab(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(yl(n)){if(n.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var i;if(r.output!==void 0){if(!yl(r.output))throw new TypeError("output option must be an array if specified");i=r.output}else i=new Array(n.length);var s=fx(n),a=_m(n);if(s===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var u=r.min,h=u===void 0?r.autoMinMax?s:0:u,p=r.max,g=p===void 0?r.autoMinMax?a:1:p;if(h>=g)throw new RangeError("min option must be smaller than max option");for(var y=(g-h)/(a-s),b=0;b<n.length;b++)i[b]=(n[b]-s)*y+h;return i}var X0=" ".repeat(2),Am=" ".repeat(4);function px(){return Z0(this)}function Z0(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.maxRows,s=i===void 0?15:i,a=r.maxColumns,u=a===void 0?10:a,h=r.maxNumSize,p=h===void 0?8:h;return"".concat(n.constructor.name,` {
`).concat(X0,`[
`).concat(Am).concat(Tb(n,s,u,p),`
`).concat(X0,`]
`).concat(X0,"rows: ").concat(n.rows,`
`).concat(X0,"columns: ").concat(n.columns,`
}`)}function Tb(n,r,i,s){for(var a=n.rows,u=n.columns,h=Math.min(a,r),p=Math.min(u,i),g=[],y=0;y<h;y++){for(var b=[],E=0;E<p;E++)b.push(Tm(n.get(y,E),s));g.push("".concat(b.join(" ")))}return p!==u&&(g[g.length-1]+=" ... ".concat(u-i," more columns")),h!==a&&g.push("... ".concat(a-r," more rows")),g.join(`
`.concat(Am))}function Tm(n,r){var i=String(n);if(i.length<=r)return i.padEnd(r," ");var s=n.toPrecision(r-2);if(s.length<=r)return s;var a=n.toExponential(r-2),u=a.indexOf("e"),h=a.slice(u);return a.slice(0,r-h.length)+h}function gx(n,r){n.prototype.add=function(s){return typeof s=="number"?this.addS(s):this.addM(s)},n.prototype.addS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)+s);return this},n.prototype.addM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)+s.get(a,u));return this},n.add=function(s,a){var u=new r(s);return u.add(a)},n.prototype.sub=function(s){return typeof s=="number"?this.subS(s):this.subM(s)},n.prototype.subS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)-s);return this},n.prototype.subM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)-s.get(a,u));return this},n.sub=function(s,a){var u=new r(s);return u.sub(a)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(s){return typeof s=="number"?this.mulS(s):this.mulM(s)},n.prototype.mulS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)*s);return this},n.prototype.mulM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)*s.get(a,u));return this},n.mul=function(s,a){var u=new r(s);return u.mul(a)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(s){return typeof s=="number"?this.divS(s):this.divM(s)},n.prototype.divS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)/s);return this},n.prototype.divM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)/s.get(a,u));return this},n.div=function(s,a){var u=new r(s);return u.div(a)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(s){return typeof s=="number"?this.modS(s):this.modM(s)},n.prototype.modS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)%s);return this},n.prototype.modM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)%s.get(a,u));return this},n.mod=function(s,a){var u=new r(s);return u.mod(a)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(s){return typeof s=="number"?this.andS(s):this.andM(s)},n.prototype.andS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)&s);return this},n.prototype.andM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)&s.get(a,u));return this},n.and=function(s,a){var u=new r(s);return u.and(a)},n.prototype.or=function(s){return typeof s=="number"?this.orS(s):this.orM(s)},n.prototype.orS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)|s);return this},n.prototype.orM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)|s.get(a,u));return this},n.or=function(s,a){var u=new r(s);return u.or(a)},n.prototype.xor=function(s){return typeof s=="number"?this.xorS(s):this.xorM(s)},n.prototype.xorS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)^s);return this},n.prototype.xorM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)^s.get(a,u));return this},n.xor=function(s,a){var u=new r(s);return u.xor(a)},n.prototype.leftShift=function(s){return typeof s=="number"?this.leftShiftS(s):this.leftShiftM(s)},n.prototype.leftShiftS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)<<s);return this},n.prototype.leftShiftM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)<<s.get(a,u));return this},n.leftShift=function(s,a){var u=new r(s);return u.leftShift(a)},n.prototype.signPropagatingRightShift=function(s){return typeof s=="number"?this.signPropagatingRightShiftS(s):this.signPropagatingRightShiftM(s)},n.prototype.signPropagatingRightShiftS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>s);return this},n.prototype.signPropagatingRightShiftM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>s.get(a,u));return this},n.signPropagatingRightShift=function(s,a){var u=new r(s);return u.signPropagatingRightShift(a)},n.prototype.rightShift=function(s){return typeof s=="number"?this.rightShiftS(s):this.rightShiftM(s)},n.prototype.rightShiftS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>>s);return this},n.prototype.rightShiftM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>>s.get(a,u));return this},n.rightShift=function(s,a){var u=new r(s);return u.rightShift(a)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,~this.get(s,a));return this},n.not=function(s){var a=new r(s);return a.not()},n.prototype.abs=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.abs(this.get(s,a)));return this},n.abs=function(s){var a=new r(s);return a.abs()},n.prototype.acos=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.acos(this.get(s,a)));return this},n.acos=function(s){var a=new r(s);return a.acos()},n.prototype.acosh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.acosh(this.get(s,a)));return this},n.acosh=function(s){var a=new r(s);return a.acosh()},n.prototype.asin=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.asin(this.get(s,a)));return this},n.asin=function(s){var a=new r(s);return a.asin()},n.prototype.asinh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.asinh(this.get(s,a)));return this},n.asinh=function(s){var a=new r(s);return a.asinh()},n.prototype.atan=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.atan(this.get(s,a)));return this},n.atan=function(s){var a=new r(s);return a.atan()},n.prototype.atanh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.atanh(this.get(s,a)));return this},n.atanh=function(s){var a=new r(s);return a.atanh()},n.prototype.cbrt=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.cbrt(this.get(s,a)));return this},n.cbrt=function(s){var a=new r(s);return a.cbrt()},n.prototype.ceil=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.ceil(this.get(s,a)));return this},n.ceil=function(s){var a=new r(s);return a.ceil()},n.prototype.clz32=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.clz32(this.get(s,a)));return this},n.clz32=function(s){var a=new r(s);return a.clz32()},n.prototype.cos=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.cos(this.get(s,a)));return this},n.cos=function(s){var a=new r(s);return a.cos()},n.prototype.cosh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.cosh(this.get(s,a)));return this},n.cosh=function(s){var a=new r(s);return a.cosh()},n.prototype.exp=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.exp(this.get(s,a)));return this},n.exp=function(s){var a=new r(s);return a.exp()},n.prototype.expm1=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.expm1(this.get(s,a)));return this},n.expm1=function(s){var a=new r(s);return a.expm1()},n.prototype.floor=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.floor(this.get(s,a)));return this},n.floor=function(s){var a=new r(s);return a.floor()},n.prototype.fround=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.fround(this.get(s,a)));return this},n.fround=function(s){var a=new r(s);return a.fround()},n.prototype.log=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log(this.get(s,a)));return this},n.log=function(s){var a=new r(s);return a.log()},n.prototype.log1p=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log1p(this.get(s,a)));return this},n.log1p=function(s){var a=new r(s);return a.log1p()},n.prototype.log10=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log10(this.get(s,a)));return this},n.log10=function(s){var a=new r(s);return a.log10()},n.prototype.log2=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log2(this.get(s,a)));return this},n.log2=function(s){var a=new r(s);return a.log2()},n.prototype.round=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.round(this.get(s,a)));return this},n.round=function(s){var a=new r(s);return a.round()},n.prototype.sign=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sign(this.get(s,a)));return this},n.sign=function(s){var a=new r(s);return a.sign()},n.prototype.sin=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sin(this.get(s,a)));return this},n.sin=function(s){var a=new r(s);return a.sin()},n.prototype.sinh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sinh(this.get(s,a)));return this},n.sinh=function(s){var a=new r(s);return a.sinh()},n.prototype.sqrt=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sqrt(this.get(s,a)));return this},n.sqrt=function(s){var a=new r(s);return a.sqrt()},n.prototype.tan=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.tan(this.get(s,a)));return this},n.tan=function(s){var a=new r(s);return a.tan()},n.prototype.tanh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.tanh(this.get(s,a)));return this},n.tanh=function(s){var a=new r(s);return a.tanh()},n.prototype.trunc=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.trunc(this.get(s,a)));return this},n.trunc=function(s){var a=new r(s);return a.trunc()},n.pow=function(s,a){var u=new r(s);return u.pow(a)},n.prototype.pow=function(s){return typeof s=="number"?this.powS(s):this.powM(s)},n.prototype.powS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,Math.pow(this.get(a,u),s));return this},n.prototype.powM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,Math.pow(this.get(a,u),s.get(a,u)));return this}}function Au(n,r,i){var s=i?n.rows:n.rows-1;if(r<0||r>s)throw new RangeError("Row index out of range")}function ql(n,r,i){var s=i?n.columns:n.columns-1;if(r<0||r>s)throw new RangeError("Column index out of range")}function Is(n,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function Ca(n,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function vx(n,r){if(!yl(r))throw new TypeError("row indices must be an array");for(var i=0;i<r.length;i++)if(r[i]<0||r[i]>=n.rows)throw new RangeError("row indices are out of range")}function mx(n,r){if(!yl(r))throw new TypeError("column indices must be an array");for(var i=0;i<r.length;i++)if(r[i]<0||r[i]>=n.columns)throw new RangeError("column indices are out of range")}function Hg(n,r,i,s,a){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Y0("startRow",r),Y0("endRow",i),Y0("startColumn",s),Y0("endColumn",a),r>i||s>a||r<0||r>=n.rows||i<0||i>=n.rows||s<0||s>=n.columns||a<0||a>=n.columns)throw new RangeError("Submatrix indices are out of range")}function $g(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=[],s=0;s<n;s++)i.push(r);return i}function Y0(n,r){if(typeof r!="number")throw new TypeError("".concat(n," must be a number"))}function Hp(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function yx(n){for(var r=$g(n.rows),i=0;i<n.rows;++i)for(var s=0;s<n.columns;++s)r[i]+=n.get(i,s);return r}function Mb(n){for(var r=$g(n.columns),i=0;i<n.rows;++i)for(var s=0;s<n.columns;++s)r[s]+=n.get(i,s);return r}function bx(n){for(var r=0,i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)r+=n.get(i,s);return r}function Ob(n){for(var r=$g(n.rows,1),i=0;i<n.rows;++i)for(var s=0;s<n.columns;++s)r[i]*=n.get(i,s);return r}function xx(n){for(var r=$g(n.columns,1),i=0;i<n.rows;++i)for(var s=0;s<n.columns;++s)r[s]*=n.get(i,s);return r}function Pb(n){for(var r=1,i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)r*=n.get(i,s);return r}function Db(n,r,i){for(var s=n.rows,a=n.columns,u=[],h=0;h<s;h++){for(var p=0,g=0,y=0,b=0;b<a;b++)y=n.get(h,b)-i[h],p+=y,g+=y*y;r?u.push((g-p*p/a)/(a-1)):u.push((g-p*p/a)/a)}return u}function Cx(n,r,i){for(var s=n.rows,a=n.columns,u=[],h=0;h<a;h++){for(var p=0,g=0,y=0,b=0;b<s;b++)y=n.get(b,h)-i[h],p+=y,g+=y*y;r?u.push((g-p*p/s)/(s-1)):u.push((g-p*p/s)/s)}return u}function wx(n,r,i){for(var s=n.rows,a=n.columns,u=s*a,h=0,p=0,g=0,y=0;y<s;y++)for(var b=0;b<a;b++)g=n.get(y,b)-i,h+=g,p+=g*g;return r?(p-h*h/u)/(u-1):(p-h*h/u)/u}function Zf(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)-r[i])}function Nb(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)-r[s])}function $p(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)-r)}function Ex(n){for(var r=[],i=0;i<n.rows;i++){for(var s=0,a=0;a<n.columns;a++)s+=Math.pow(n.get(i,a),2)/(n.columns-1);r.push(Math.sqrt(s))}return r}function Mm(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)/r[i])}function Sx(n){for(var r=[],i=0;i<n.columns;i++){for(var s=0,a=0;a<n.rows;a++)s+=Math.pow(n.get(a,i),2)/(n.rows-1);r.push(Math.sqrt(s))}return r}function dd(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)/r[s])}function _x(n){for(var r=n.size-1,i=0,s=0;s<n.columns;s++)for(var a=0;a<n.rows;a++)i+=Math.pow(n.get(a,s),2)/r;return Math.sqrt(i)}function Ib(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)/r)}var oa=function(){function n(){jg()(this,n)}return W0()(n,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(i){if(typeof i!="function")throw new TypeError("callback must be a function");for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i.call(this,s,a);return this}},{key:"to1DArray",value:function(){for(var i=[],s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i.push(this.get(s,a));return i}},{key:"to2DArray",value:function(){for(var i=[],s=0;s<this.rows;s++){i.push([]);for(var a=0;a<this.columns;a++)i[s].push(this.get(s,a))}return i}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var i=0;i<this.rows;i++)for(var s=0;s<=i;s++)if(this.get(i,s)!==this.get(s,i))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var i=0,s=0,a=-1,u=!0,h=!1;i<this.rows&&u;){for(s=0,h=!1;s<this.columns&&h===!1;)this.get(i,s)===0?s++:this.get(i,s)===1&&s>a?(h=!0,a=s):(u=!1,h=!0);i++}return u}},{key:"isReducedEchelonForm",value:function(){for(var i=0,s=0,a=-1,u=!0,h=!1;i<this.rows&&u;){for(s=0,h=!1;s<this.columns&&h===!1;)this.get(i,s)===0?s++:this.get(i,s)===1&&s>a?(h=!0,a=s):(u=!1,h=!0);for(var p=s+1;p<this.rows;p++)this.get(i,p)!==0&&(u=!1);i++}return u}},{key:"echelonForm",value:function(){for(var i=this.clone(),s=0,a=0;s<i.rows&&a<i.columns;){for(var u=s,h=s;h<i.rows;h++)i.get(h,a)>i.get(u,a)&&(u=h);if(i.get(u,a)===0)a++;else{i.swapRows(s,u);for(var p=i.get(s,a),g=a;g<i.columns;g++)i.set(s,g,i.get(s,g)/p);for(var y=s+1;y<i.rows;y++){var b=i.get(y,a)/i.get(s,a);i.set(y,a,0);for(var E=a+1;E<i.columns;E++)i.set(y,E,i.get(y,E)-i.get(s,E)*b)}s++,a++}}return i}},{key:"reducedEchelonForm",value:function(){for(var i=this.echelonForm(),s=i.columns,a=i.rows,u=a-1;u>=0;)if(i.maxRow(u)===0)u--;else{for(var h=0,p=!1;h<a&&p===!1;)i.get(u,h)===1?p=!0:h++;for(var g=0;g<u;g++)for(var y=i.get(g,h),b=h;b<s;b++){var E=i.get(g,b)-y*i.get(u,b);i.set(g,b,E)}u--}return i}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(da()(i)!=="object")throw new TypeError("options must be an object");var s=i.rows,a=s===void 0?1:s,u=i.columns,h=u===void 0?1:u;if(!Number.isInteger(a)||a<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(h)||h<=0)throw new TypeError("columns must be a positive integer");for(var p=new Qr(this.rows*a,this.columns*h),g=0;g<a;g++)for(var y=0;y<h;y++)p.setSubMatrix(this,this.rows*g,this.columns*y);return p}},{key:"fill",value:function(i){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,i);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(i){Au(this,i);for(var s=[],a=0;a<this.columns;a++)s.push(this.get(i,a));return s}},{key:"getRowVector",value:function(i){return Qr.rowVector(this.getRow(i))}},{key:"setRow",value:function(i,s){Au(this,i),s=Is(this,s);for(var a=0;a<this.columns;a++)this.set(i,a,s[a]);return this}},{key:"swapRows",value:function(i,s){Au(this,i),Au(this,s);for(var a=0;a<this.columns;a++){var u=this.get(i,a);this.set(i,a,this.get(s,a)),this.set(s,a,u)}return this}},{key:"getColumn",value:function(i){ql(this,i);for(var s=[],a=0;a<this.rows;a++)s.push(this.get(a,i));return s}},{key:"getColumnVector",value:function(i){return Qr.columnVector(this.getColumn(i))}},{key:"setColumn",value:function(i,s){ql(this,i),s=Ca(this,s);for(var a=0;a<this.rows;a++)this.set(a,i,s[a]);return this}},{key:"swapColumns",value:function(i,s){ql(this,i),ql(this,s);for(var a=0;a<this.rows;a++){var u=this.get(a,i);this.set(a,i,this.get(a,s)),this.set(a,s,u)}return this}},{key:"addRowVector",value:function(i){i=Is(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)+i[a]);return this}},{key:"subRowVector",value:function(i){i=Is(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)-i[a]);return this}},{key:"mulRowVector",value:function(i){i=Is(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)*i[a]);return this}},{key:"divRowVector",value:function(i){i=Is(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)/i[a]);return this}},{key:"addColumnVector",value:function(i){i=Ca(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)+i[s]);return this}},{key:"subColumnVector",value:function(i){i=Ca(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)-i[s]);return this}},{key:"mulColumnVector",value:function(i){i=Ca(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)*i[s]);return this}},{key:"divColumnVector",value:function(i){i=Ca(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)/i[s]);return this}},{key:"mulRow",value:function(i,s){Au(this,i);for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*s);return this}},{key:"mulColumn",value:function(i,s){ql(this,i);for(var a=0;a<this.rows;a++)this.set(a,i,this.get(a,i)*s);return this}},{key:"max",value:function(i){if(this.isEmpty())return NaN;switch(i){case"row":{for(var s=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)>s[a]&&(s[a]=this.get(a,u));return s}case"column":{for(var h=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),p=0;p<this.rows;p++)for(var g=0;g<this.columns;g++)this.get(p,g)>h[g]&&(h[g]=this.get(p,g));return h}case void 0:{for(var y=this.get(0,0),b=0;b<this.rows;b++)for(var E=0;E<this.columns;E++)this.get(b,E)>y&&(y=this.get(b,E));return y}default:throw new Error("invalid option: ".concat(i))}}},{key:"maxIndex",value:function(){Hp(this);for(var i=this.get(0,0),s=[0,0],a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)>i&&(i=this.get(a,u),s[0]=a,s[1]=u);return s}},{key:"min",value:function(i){if(this.isEmpty())return NaN;switch(i){case"row":{for(var s=new Array(this.rows).fill(Number.POSITIVE_INFINITY),a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)<s[a]&&(s[a]=this.get(a,u));return s}case"column":{for(var h=new Array(this.columns).fill(Number.POSITIVE_INFINITY),p=0;p<this.rows;p++)for(var g=0;g<this.columns;g++)this.get(p,g)<h[g]&&(h[g]=this.get(p,g));return h}case void 0:{for(var y=this.get(0,0),b=0;b<this.rows;b++)for(var E=0;E<this.columns;E++)this.get(b,E)<y&&(y=this.get(b,E));return y}default:throw new Error("invalid option: ".concat(i))}}},{key:"minIndex",value:function(){Hp(this);for(var i=this.get(0,0),s=[0,0],a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)<i&&(i=this.get(a,u),s[0]=a,s[1]=u);return s}},{key:"maxRow",value:function(i){if(Au(this,i),this.isEmpty())return NaN;for(var s=this.get(i,0),a=1;a<this.columns;a++)this.get(i,a)>s&&(s=this.get(i,a));return s}},{key:"maxRowIndex",value:function(i){Au(this,i),Hp(this);for(var s=this.get(i,0),a=[i,0],u=1;u<this.columns;u++)this.get(i,u)>s&&(s=this.get(i,u),a[1]=u);return a}},{key:"minRow",value:function(i){if(Au(this,i),this.isEmpty())return NaN;for(var s=this.get(i,0),a=1;a<this.columns;a++)this.get(i,a)<s&&(s=this.get(i,a));return s}},{key:"minRowIndex",value:function(i){Au(this,i),Hp(this);for(var s=this.get(i,0),a=[i,0],u=1;u<this.columns;u++)this.get(i,u)<s&&(s=this.get(i,u),a[1]=u);return a}},{key:"maxColumn",value:function(i){if(ql(this,i),this.isEmpty())return NaN;for(var s=this.get(0,i),a=1;a<this.rows;a++)this.get(a,i)>s&&(s=this.get(a,i));return s}},{key:"maxColumnIndex",value:function(i){ql(this,i),Hp(this);for(var s=this.get(0,i),a=[0,i],u=1;u<this.rows;u++)this.get(u,i)>s&&(s=this.get(u,i),a[0]=u);return a}},{key:"minColumn",value:function(i){if(ql(this,i),this.isEmpty())return NaN;for(var s=this.get(0,i),a=1;a<this.rows;a++)this.get(a,i)<s&&(s=this.get(a,i));return s}},{key:"minColumnIndex",value:function(i){ql(this,i),Hp(this);for(var s=this.get(0,i),a=[0,i],u=1;u<this.rows;u++)this.get(u,i)<s&&(s=this.get(u,i),a[0]=u);return a}},{key:"diag",value:function(){for(var i=Math.min(this.rows,this.columns),s=[],a=0;a<i;a++)s.push(this.get(a,a));return s}},{key:"norm",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",s=0;if(i==="max")return this.max();if(i==="frobenius"){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)s=s+this.get(a,u)*this.get(a,u);return Math.sqrt(s)}else throw new RangeError("unknown norm type: ".concat(i))}},{key:"cumulativeSum",value:function(){for(var i=0,s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i+=this.get(s,a),this.set(s,a,i);return this}},{key:"dot",value:function(i){n.isMatrix(i)&&(i=i.to1DArray());var s=this.to1DArray();if(s.length!==i.length)throw new RangeError("vectors do not have the same size");for(var a=0,u=0;u<s.length;u++)a+=s[u]*i[u];return a}},{key:"mmul",value:function(i){i=Qr.checkMatrix(i);for(var s=this.rows,a=this.columns,u=i.columns,h=new Qr(s,u),p=new Float64Array(a),g=0;g<u;g++){for(var y=0;y<a;y++)p[y]=i.get(y,g);for(var b=0;b<s;b++){for(var E=0,T=0;T<a;T++)E+=this.get(b,T)*p[T];h.set(b,g,E)}}return h}},{key:"strassen2x2",value:function(i){i=Qr.checkMatrix(i);var s=new Qr(2,2),a=this.get(0,0),u=i.get(0,0),h=this.get(0,1),p=i.get(0,1),g=this.get(1,0),y=i.get(1,0),b=this.get(1,1),E=i.get(1,1),T=(a+b)*(u+E),O=(g+b)*u,N=a*(p-E),k=b*(y-u),B=(a+h)*E,$=(g-a)*(u+p),X=(h-b)*(y+E),ne=T+k-B+X,be=N+B,me=O+k,je=T-O+N+$;return s.set(0,0,ne),s.set(0,1,be),s.set(1,0,me),s.set(1,1,je),s}},{key:"strassen3x3",value:function(i){i=Qr.checkMatrix(i);var s=new Qr(3,3),a=this.get(0,0),u=this.get(0,1),h=this.get(0,2),p=this.get(1,0),g=this.get(1,1),y=this.get(1,2),b=this.get(2,0),E=this.get(2,1),T=this.get(2,2),O=i.get(0,0),N=i.get(0,1),k=i.get(0,2),B=i.get(1,0),$=i.get(1,1),X=i.get(1,2),ne=i.get(2,0),be=i.get(2,1),me=i.get(2,2),je=(a+u+h-p-g-E-T)*$,ot=(a-p)*(-N+$),ct=g*(-O+N+B-$-X-ne+me),Xt=(-a+p+g)*(O-N+$),_t=(p+g)*(-O+N),Zt=a*O,at=(-a+b+E)*(O-k+X),Gn=(-a+b)*(k-X),Rn=(b+E)*(-O+k),Jn=(a+u+h-g-y-b-E)*X,Li=E*(-O+k+B-$-X-ne+be),Gi=(-h+E+T)*($+ne-be),Zr=(h-T)*($-be),jo=h*ne,Xs=(E+T)*(-ne+be),yi=(-h+g+y)*(X+ne-me),Zs=(h-y)*(X-me),$a=(g+y)*(-ne+me),In=u*B,vr=y*be,Fi=p*k,Xi=b*N,po=T*me,Yr=Zt+jo+In,Ys=je+Xt+_t+Zt+Gi+jo+Xs,Fc=Zt+at+Rn+Jn+jo+yi+$a,Ho=ot+ct+Xt+Zt+jo+yi+Zs,gf=ot+Xt+_t+Zt+vr,vf=jo+yi+Zs+$a+Fi,jv=Zt+at+Gn+Li+Gi+Zr+jo,E0=Gi+Zr+jo+Xs+Xi,Hv=Zt+at+Gn+Rn+po;return s.set(0,0,Yr),s.set(0,1,Ys),s.set(0,2,Fc),s.set(1,0,Ho),s.set(1,1,gf),s.set(1,2,vf),s.set(2,0,jv),s.set(2,1,E0),s.set(2,2,Hv),s}},{key:"mmulStrassen",value:function(i){i=Qr.checkMatrix(i);var s=this.clone(),a=s.rows,u=s.columns,h=i.rows,p=i.columns;u!==h&&console.warn("Multiplying ".concat(a," x ").concat(u," and ").concat(h," x ").concat(p," matrix: dimensions do not match."));function g(T,O,N){var k=T.rows,B=T.columns;if(k===O&&B===N)return T;var $=n.zeros(O,N);return $=$.setSubMatrix(T,0,0),$}var y=Math.max(a,h),b=Math.max(u,p);s=g(s,y,b),i=g(i,y,b);function E(T,O,N,k){if(N<=512||k<=512)return T.mmul(O);N%2===1&&k%2===1?(T=g(T,N+1,k+1),O=g(O,N+1,k+1)):N%2===1?(T=g(T,N+1,k),O=g(O,N+1,k)):k%2===1&&(T=g(T,N,k+1),O=g(O,N,k+1));var B=parseInt(T.rows/2,10),$=parseInt(T.columns/2,10),X=T.subMatrix(0,B-1,0,$-1),ne=O.subMatrix(0,B-1,0,$-1),be=T.subMatrix(0,B-1,$,T.columns-1),me=O.subMatrix(0,B-1,$,O.columns-1),je=T.subMatrix(B,T.rows-1,0,$-1),ot=O.subMatrix(B,O.rows-1,0,$-1),ct=T.subMatrix(B,T.rows-1,$,T.columns-1),Xt=O.subMatrix(B,O.rows-1,$,O.columns-1),_t=E(n.add(X,ct),n.add(ne,Xt),B,$),Zt=E(n.add(je,ct),ne,B,$),at=E(X,n.sub(me,Xt),B,$),Gn=E(ct,n.sub(ot,ne),B,$),Rn=E(n.add(X,be),Xt,B,$),Jn=E(n.sub(je,X),n.add(ne,me),B,$),Li=E(n.sub(be,ct),n.add(ot,Xt),B,$),Gi=n.add(_t,Gn);Gi.sub(Rn),Gi.add(Li);var Zr=n.add(at,Rn),jo=n.add(Zt,Gn),Xs=n.sub(_t,Zt);Xs.add(at),Xs.add(Jn);var yi=n.zeros(2*Gi.rows,2*Gi.columns);return yi=yi.setSubMatrix(Gi,0,0),yi=yi.setSubMatrix(Zr,Gi.rows,0),yi=yi.setSubMatrix(jo,0,Gi.columns),yi=yi.setSubMatrix(Xs,Gi.rows,Gi.columns),yi.subMatrix(0,N-1,0,k-1)}return E(s,i,y,b)}},{key:"scaleRows",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(da()(i)!=="object")throw new TypeError("options must be an object");var s=i.min,a=s===void 0?0:s,u=i.max,h=u===void 0?1:u;if(!Number.isFinite(a))throw new TypeError("min must be a number");if(!Number.isFinite(h))throw new TypeError("max must be a number");if(a>=h)throw new RangeError("min must be smaller than max");for(var p=new Qr(this.rows,this.columns),g=0;g<this.rows;g++){var y=this.getRow(g);y.length>0&&Ab(y,{min:a,max:h,output:y}),p.setRow(g,y)}return p}},{key:"scaleColumns",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(da()(i)!=="object")throw new TypeError("options must be an object");var s=i.min,a=s===void 0?0:s,u=i.max,h=u===void 0?1:u;if(!Number.isFinite(a))throw new TypeError("min must be a number");if(!Number.isFinite(h))throw new TypeError("max must be a number");if(a>=h)throw new RangeError("min must be smaller than max");for(var p=new Qr(this.rows,this.columns),g=0;g<this.columns;g++){var y=this.getColumn(g);y.length&&Ab(y,{min:a,max:h,output:y}),p.setColumn(g,y)}return p}},{key:"flipRows",value:function(){for(var i=Math.ceil(this.columns/2),s=0;s<this.rows;s++)for(var a=0;a<i;a++){var u=this.get(s,a),h=this.get(s,this.columns-1-a);this.set(s,a,h),this.set(s,this.columns-1-a,u)}return this}},{key:"flipColumns",value:function(){for(var i=Math.ceil(this.rows/2),s=0;s<this.columns;s++)for(var a=0;a<i;a++){var u=this.get(a,s),h=this.get(this.rows-1-a,s);this.set(a,s,h),this.set(this.rows-1-a,s,u)}return this}},{key:"kroneckerProduct",value:function(i){i=Qr.checkMatrix(i);for(var s=this.rows,a=this.columns,u=i.rows,h=i.columns,p=new Qr(s*u,a*h),g=0;g<s;g++)for(var y=0;y<a;y++)for(var b=0;b<u;b++)for(var E=0;E<h;E++)p.set(u*g+b,h*y+E,this.get(g,y)*i.get(b,E));return p}},{key:"kroneckerSum",value:function(i){if(i=Qr.checkMatrix(i),!this.isSquare()||!i.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var s=this.rows,a=i.rows,u=this.kroneckerProduct(Qr.eye(a,a)),h=Qr.eye(s,s).kroneckerProduct(i);return u.add(h)}},{key:"transpose",value:function(){for(var i=new Qr(this.columns,this.rows),s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i.set(a,s,this.get(s,a));return i}},{key:"sortRows",value:function(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rb,s=0;s<this.rows;s++)this.setRow(s,this.getRow(s).sort(i));return this}},{key:"sortColumns",value:function(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rb,s=0;s<this.columns;s++)this.setColumn(s,this.getColumn(s).sort(i));return this}},{key:"subMatrix",value:function(i,s,a,u){Hg(this,i,s,a,u);for(var h=new Qr(s-i+1,u-a+1),p=i;p<=s;p++)for(var g=a;g<=u;g++)h.set(p-i,g-a,this.get(p,g));return h}},{key:"subMatrixRow",value:function(i,s,a){if(s===void 0&&(s=0),a===void 0&&(a=this.columns-1),s>a||s<0||s>=this.columns||a<0||a>=this.columns)throw new RangeError("Argument out of range");for(var u=new Qr(i.length,a-s+1),h=0;h<i.length;h++)for(var p=s;p<=a;p++){if(i[h]<0||i[h]>=this.rows)throw new RangeError("Row index out of range: ".concat(i[h]));u.set(h,p-s,this.get(i[h],p))}return u}},{key:"subMatrixColumn",value:function(i,s,a){if(s===void 0&&(s=0),a===void 0&&(a=this.rows-1),s>a||s<0||s>=this.rows||a<0||a>=this.rows)throw new RangeError("Argument out of range");for(var u=new Qr(a-s+1,i.length),h=0;h<i.length;h++)for(var p=s;p<=a;p++){if(i[h]<0||i[h]>=this.columns)throw new RangeError("Column index out of range: ".concat(i[h]));u.set(p-s,h,this.get(p,i[h]))}return u}},{key:"setSubMatrix",value:function(i,s,a){if(i=Qr.checkMatrix(i),i.isEmpty())return this;var u=s+i.rows-1,h=a+i.columns-1;Hg(this,s,u,a,h);for(var p=0;p<i.rows;p++)for(var g=0;g<i.columns;g++)this.set(s+p,a+g,i.get(p,g));return this}},{key:"selection",value:function(i,s){vx(this,i),mx(this,s);for(var a=new Qr(i.length,s.length),u=0;u<i.length;u++)for(var h=i[u],p=0;p<s.length;p++){var g=s[p];a.set(u,p,this.get(h,g))}return a}},{key:"trace",value:function(){for(var i=Math.min(this.rows,this.columns),s=0,a=0;a<i;a++)s+=this.get(a,a);return s}},{key:"clone",value:function(){for(var i=new Qr(this.rows,this.columns),s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i.set(s,a,this.get(s,a));return i}},{key:"sum",value:function(i){switch(i){case"row":return yx(this);case"column":return Mb(this);case void 0:return bx(this);default:throw new Error("invalid option: ".concat(i))}}},{key:"product",value:function(i){switch(i){case"row":return Ob(this);case"column":return xx(this);case void 0:return Pb(this);default:throw new Error("invalid option: ".concat(i))}}},{key:"mean",value:function(i){var s=this.sum(i);switch(i){case"row":{for(var a=0;a<this.rows;a++)s[a]/=this.columns;return s}case"column":{for(var u=0;u<this.columns;u++)s[u]/=this.rows;return s}case void 0:return s/this.size;default:throw new Error("invalid option: ".concat(i))}}},{key:"variance",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(da()(i)==="object"&&(s=i,i=void 0),da()(s)!=="object")throw new TypeError("options must be an object");var a=s,u=a.unbiased,h=u===void 0?!0:u,p=a.mean,g=p===void 0?this.mean(i):p;if(typeof h!="boolean")throw new TypeError("unbiased must be a boolean");switch(i){case"row":{if(!yl(g))throw new TypeError("mean must be an array");return Db(this,h,g)}case"column":{if(!yl(g))throw new TypeError("mean must be an array");return Cx(this,h,g)}case void 0:{if(typeof g!="number")throw new TypeError("mean must be a number");return wx(this,h,g)}default:throw new Error("invalid option: ".concat(i))}}},{key:"standardDeviation",value:function(i,s){da()(i)==="object"&&(s=i,i=void 0);var a=this.variance(i,s);if(i===void 0)return Math.sqrt(a);for(var u=0;u<a.length;u++)a[u]=Math.sqrt(a[u]);return a}},{key:"center",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(da()(i)==="object"&&(s=i,i=void 0),da()(s)!=="object")throw new TypeError("options must be an object");var a=s,u=a.center,h=u===void 0?this.mean(i):u;switch(i){case"row":{if(!yl(h))throw new TypeError("center must be an array");return Zf(this,h),this}case"column":{if(!yl(h))throw new TypeError("center must be an array");return Nb(this,h),this}case void 0:{if(typeof h!="number")throw new TypeError("center must be a number");return $p(this,h),this}default:throw new Error("invalid option: ".concat(i))}}},{key:"scale",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(da()(i)==="object"&&(s=i,i=void 0),da()(s)!=="object")throw new TypeError("options must be an object");var a=s.scale;switch(i){case"row":{if(a===void 0)a=Ex(this);else if(!yl(a))throw new TypeError("scale must be an array");return Mm(this,a),this}case"column":{if(a===void 0)a=Sx(this);else if(!yl(a))throw new TypeError("scale must be an array");return dd(this,a),this}case void 0:{if(a===void 0)a=_x(this);else if(typeof a!="number")throw new TypeError("scale must be a number");return Ib(this,a),this}default:throw new Error("invalid option: ".concat(i))}}},{key:"toString",value:function(i){return Z0(this,i)}}],[{key:"from1DArray",value:function(i,s,a){var u=i*s;if(u!==a.length)throw new RangeError("data length does not match given dimensions");for(var h=new Qr(i,s),p=0;p<i;p++)for(var g=0;g<s;g++)h.set(p,g,a[p*s+g]);return h}},{key:"rowVector",value:function(i){for(var s=new Qr(1,i.length),a=0;a<i.length;a++)s.set(0,a,i[a]);return s}},{key:"columnVector",value:function(i){for(var s=new Qr(i.length,1),a=0;a<i.length;a++)s.set(a,0,i[a]);return s}},{key:"zeros",value:function(i,s){return new Qr(i,s)}},{key:"ones",value:function(i,s){return new Qr(i,s).fill(1)}},{key:"rand",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(da()(a)!=="object")throw new TypeError("options must be an object");for(var u=a.random,h=u===void 0?Math.random:u,p=new Qr(i,s),g=0;g<i;g++)for(var y=0;y<s;y++)p.set(g,y,h());return p}},{key:"randInt",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(da()(a)!=="object")throw new TypeError("options must be an object");var u=a.min,h=u===void 0?0:u,p=a.max,g=p===void 0?1e3:p,y=a.random,b=y===void 0?Math.random:y;if(!Number.isInteger(h))throw new TypeError("min must be an integer");if(!Number.isInteger(g))throw new TypeError("max must be an integer");if(h>=g)throw new RangeError("min must be smaller than max");for(var E=g-h,T=new Qr(i,s),O=0;O<i;O++)for(var N=0;N<s;N++){var k=h+Math.round(b()*E);T.set(O,N,k)}return T}},{key:"eye",value:function(i,s,a){s===void 0&&(s=i),a===void 0&&(a=1);for(var u=Math.min(i,s),h=this.zeros(i,s),p=0;p<u;p++)h.set(p,p,a);return h}},{key:"diag",value:function(i,s,a){var u=i.length;s===void 0&&(s=u),a===void 0&&(a=s);for(var h=Math.min(u,s,a),p=this.zeros(s,a),g=0;g<h;g++)p.set(g,g,i[g]);return p}},{key:"min",value:function(i,s){i=this.checkMatrix(i),s=this.checkMatrix(s);for(var a=i.rows,u=i.columns,h=new Qr(a,u),p=0;p<a;p++)for(var g=0;g<u;g++)h.set(p,g,Math.min(i.get(p,g),s.get(p,g)));return h}},{key:"max",value:function(i,s){i=this.checkMatrix(i),s=this.checkMatrix(s);for(var a=i.rows,u=i.columns,h=new this(a,u),p=0;p<a;p++)for(var g=0;g<u;g++)h.set(p,g,Math.max(i.get(p,g),s.get(p,g)));return h}},{key:"checkMatrix",value:function(i){return n.isMatrix(i)?i:new Qr(i)}},{key:"isMatrix",value:function(i){return i!=null&&i.klass==="Matrix"}}]),n}();oa.prototype.klass="Matrix",typeof Symbol<"u"&&(oa.prototype[Symbol.for("nodejs.util.inspect.custom")]=px);function Rb(n,r){return n-r}function Ax(n){return n.every(function(r){return typeof r=="number"})}oa.random=oa.rand,oa.randomInt=oa.randInt,oa.diagonal=oa.diag,oa.prototype.diagonal=oa.prototype.diag,oa.identity=oa.eye,oa.prototype.negate=oa.prototype.neg,oa.prototype.tensorProduct=oa.prototype.kroneckerProduct;var Qr=function(n){Vg()(i,n);var r=Uh()(i);function i(s,a){var u;if(jg()(this,i),u=r.call(this),i.isMatrix(s))return wo()(u,s.clone());if(Number.isInteger(s)&&s>=0)if(u.data=[],Number.isInteger(a)&&a>=0)for(var h=0;h<s;h++)u.data.push(new Float64Array(a));else throw new TypeError("nColumns must be a positive integer");else if(yl(s)){var p=s;if(s=p.length,a=s?p[0].length:0,typeof a!="number")throw new TypeError("Data must be a 2D array with at least one element");u.data=[];for(var g=0;g<s;g++){if(p[g].length!==a)throw new RangeError("Inconsistent array dimensions");if(!Ax(p[g]))throw new TypeError("Input data contains non-numeric values");u.data.push(Float64Array.from(p[g]))}}else throw new TypeError("First argument must be a positive number or an array");return u.rows=s,u.columns=a,u}return W0()(i,[{key:"set",value:function(a,u,h){return this.data[a][u]=h,this}},{key:"get",value:function(a,u){return this.data[a][u]}},{key:"removeRow",value:function(a){return Au(this,a),this.data.splice(a,1),this.rows-=1,this}},{key:"addRow",value:function(a,u){return u===void 0&&(u=a,a=this.rows),Au(this,a,!0),u=Float64Array.from(Is(this,u)),this.data.splice(a,0,u),this.rows+=1,this}},{key:"removeColumn",value:function(a){ql(this,a);for(var u=0;u<this.rows;u++){for(var h=new Float64Array(this.columns-1),p=0;p<a;p++)h[p]=this.data[u][p];for(var g=a+1;g<this.columns;g++)h[g-1]=this.data[u][g];this.data[u]=h}return this.columns-=1,this}},{key:"addColumn",value:function(a,u){typeof u>"u"&&(u=a,a=this.columns),ql(this,a,!0),u=Ca(this,u);for(var h=0;h<this.rows;h++){for(var p=new Float64Array(this.columns+1),g=0;g<a;g++)p[g]=this.data[h][g];for(p[g++]=u[h];g<this.columns+1;g++)p[g]=this.data[h][g-1];this.data[h]=p}return this.columns+=1,this}}]),i}(oa);gx(oa,Qr);var Tx=function(n){Vg()(i,n);var r=Uh()(i);function i(s){var a;return jg()(this,i),a=r.call(this),a.data=s,a.rows=s.length,a.columns=s[0].length,a}return W0()(i,[{key:"set",value:function(a,u,h){return this.data[a][u]=h,this}},{key:"get",value:function(a,u){return this.data[a][u]}}]),i}(oa);function oh(n,r){var i=0;return Math.abs(n)>Math.abs(r)?(i=r/n,Math.abs(n)*Math.sqrt(1+i*i)):r!==0?(i=n/r,Math.abs(r)*Math.sqrt(1+i*i)):0}var kb=function(){function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(jg()(this,n),r=Tx.checkMatrix(r),r.isEmpty())throw new Error("Matrix must be non-empty");var s=r.rows,a=r.columns,u=i.computeLeftSingularVectors,h=u===void 0?!0:u,p=i.computeRightSingularVectors,g=p===void 0?!0:p,y=i.autoTranspose,b=y===void 0?!1:y,E=Boolean(h),T=Boolean(g),O=!1,N;if(s<a)if(!b)N=r.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{N=r.transpose(),s=N.rows,a=N.columns,O=!0;var k=E;E=T,T=k}else N=r.clone();for(var B=Math.min(s,a),$=Math.min(s+1,a),X=new Float64Array($),ne=new Qr(s,B),be=new Qr(a,a),me=new Float64Array(a),je=new Float64Array(s),ot=new Float64Array($),ct=0;ct<$;ct++)ot[ct]=ct;for(var Xt=Math.min(s-1,a),_t=Math.max(0,Math.min(a-2,s)),Zt=Math.max(Xt,_t),at=0;at<Zt;at++){if(at<Xt){X[at]=0;for(var Gn=at;Gn<s;Gn++)X[at]=oh(X[at],N.get(Gn,at));if(X[at]!==0){N.get(at,at)<0&&(X[at]=-X[at]);for(var Rn=at;Rn<s;Rn++)N.set(Rn,at,N.get(Rn,at)/X[at]);N.set(at,at,N.get(at,at)+1)}X[at]=-X[at]}for(var Jn=at+1;Jn<a;Jn++){if(at<Xt&&X[at]!==0){for(var Li=0,Gi=at;Gi<s;Gi++)Li+=N.get(Gi,at)*N.get(Gi,Jn);Li=-Li/N.get(at,at);for(var Zr=at;Zr<s;Zr++)N.set(Zr,Jn,N.get(Zr,Jn)+Li*N.get(Zr,at))}me[Jn]=N.get(at,Jn)}if(E&&at<Xt)for(var jo=at;jo<s;jo++)ne.set(jo,at,N.get(jo,at));if(at<_t){me[at]=0;for(var Xs=at+1;Xs<a;Xs++)me[at]=oh(me[at],me[Xs]);if(me[at]!==0){me[at+1]<0&&(me[at]=0-me[at]);for(var yi=at+1;yi<a;yi++)me[yi]/=me[at];me[at+1]+=1}if(me[at]=-me[at],at+1<s&&me[at]!==0){for(var Zs=at+1;Zs<s;Zs++)je[Zs]=0;for(var $a=at+1;$a<s;$a++)for(var In=at+1;In<a;In++)je[$a]+=me[In]*N.get($a,In);for(var vr=at+1;vr<a;vr++)for(var Fi=-me[vr]/me[at+1],Xi=at+1;Xi<s;Xi++)N.set(Xi,vr,N.get(Xi,vr)+Fi*je[Xi])}if(T)for(var po=at+1;po<a;po++)be.set(po,at,me[po])}}var Yr=Math.min(a,s+1);if(Xt<a&&(X[Xt]=N.get(Xt,Xt)),s<Yr&&(X[Yr-1]=0),_t+1<Yr&&(me[_t]=N.get(_t,Yr-1)),me[Yr-1]=0,E){for(var Ys=Xt;Ys<B;Ys++){for(var Fc=0;Fc<s;Fc++)ne.set(Fc,Ys,0);ne.set(Ys,Ys,1)}for(var Ho=Xt-1;Ho>=0;Ho--)if(X[Ho]!==0){for(var gf=Ho+1;gf<B;gf++){for(var vf=0,jv=Ho;jv<s;jv++)vf+=ne.get(jv,Ho)*ne.get(jv,gf);vf=-vf/ne.get(Ho,Ho);for(var E0=Ho;E0<s;E0++)ne.set(E0,gf,ne.get(E0,gf)+vf*ne.get(E0,Ho))}for(var Hv=Ho;Hv<s;Hv++)ne.set(Hv,Ho,-ne.get(Hv,Ho));ne.set(Ho,Ho,1+ne.get(Ho,Ho));for(var Tw=0;Tw<Ho-1;Tw++)ne.set(Tw,Ho,0)}else{for(var Fy=0;Fy<s;Fy++)ne.set(Fy,Ho,0);ne.set(Ho,Ho,1)}}if(T)for(var iu=a-1;iu>=0;iu--){if(iu<_t&&me[iu]!==0)for(var By=iu+1;By<a;By++){for(var v1=0,$v=iu+1;$v<a;$v++)v1+=be.get($v,iu)*be.get($v,By);v1=-v1/be.get(iu+1,iu);for(var Gt=iu+1;Gt<a;Gt++)be.set(Gt,By,be.get(Gt,By)+v1*be.get(Gt,iu))}for(var bn=0;bn<a;bn++)be.set(bn,iu,0);be.set(iu,iu,1)}for(var jn=Yr-1,ar=0,Vr=Number.EPSILON;Yr>0;){var pr=void 0,_i=void 0;for(pr=Yr-2;pr>=-1&&pr!==-1;pr--){var qi=Number.MIN_VALUE+Vr*Math.abs(X[pr]+Math.abs(X[pr+1]));if(Math.abs(me[pr])<=qi||Number.isNaN(me[pr])){me[pr]=0;break}}if(pr===Yr-2)_i=4;else{var _r=void 0;for(_r=Yr-1;_r>=pr&&_r!==pr;_r--){var _o=(_r!==Yr?Math.abs(me[_r]):0)+(_r!==pr+1?Math.abs(me[_r-1]):0);if(Math.abs(X[_r])<=Vr*_o){X[_r]=0;break}}_r===pr?_i=3:_r===Yr-1?_i=1:(_i=2,pr=_r)}switch(pr++,_i){case 1:{var go=me[Yr-2];me[Yr-2]=0;for(var sc=Yr-2;sc>=pr;sc--){var Wv=oh(X[sc],go),q3=X[sc]/Wv,J3=go/Wv;if(X[sc]=Wv,sc!==pr&&(go=-J3*me[sc-1],me[sc-1]=q3*me[sc-1]),T)for(var Xv=0;Xv<a;Xv++)Wv=q3*be.get(Xv,sc)+J3*be.get(Xv,Yr-1),be.set(Xv,Yr-1,-J3*be.get(Xv,sc)+q3*be.get(Xv,Yr-1)),be.set(Xv,sc,Wv)}break}case 2:{var Q3=me[pr-1];me[pr-1]=0;for(var cp=pr;cp<Yr;cp++){var Mw=oh(X[cp],Q3),eP=X[cp]/Mw,tP=Q3/Mw;if(X[cp]=Mw,Q3=-tP*me[cp],me[cp]=eP*me[cp],E)for(var Zv=0;Zv<s;Zv++)Mw=eP*ne.get(Zv,cp)+tP*ne.get(Zv,pr-1),ne.set(Zv,pr-1,-tP*ne.get(Zv,cp)+eP*ne.get(Zv,pr-1)),ne.set(Zv,cp,Mw)}break}case 3:{var Ow=Math.max(Math.abs(X[Yr-1]),Math.abs(X[Yr-2]),Math.abs(me[Yr-2]),Math.abs(X[pr]),Math.abs(me[pr])),m1=X[Yr-1]/Ow,UD=X[Yr-2]/Ow,rT=me[Yr-2]/Ow,nP=X[pr]/Ow,Mk=me[pr]/Ow,zy=((UD+m1)*(UD-m1)+rT*rT)/2,iT=m1*rT*(m1*rT),Pw=0;(zy!==0||iT!==0)&&(zy<0?Pw=0-Math.sqrt(zy*zy+iT):Pw=Math.sqrt(zy*zy+iT),Pw=iT/(zy+Pw));for(var Uy=(nP+m1)*(nP-m1)+Pw,y1=nP*Mk,Ao=pr;Ao<Yr-1;Ao++){var Ru=oh(Uy,y1);Ru===0&&(Ru=Number.MIN_VALUE);var lp=Uy/Ru,up=y1/Ru;if(Ao!==pr&&(me[Ao-1]=Ru),Uy=lp*X[Ao]+up*me[Ao],me[Ao]=lp*me[Ao]-up*X[Ao],y1=up*X[Ao+1],X[Ao+1]=lp*X[Ao+1],T)for(var Yv=0;Yv<a;Yv++)Ru=lp*be.get(Yv,Ao)+up*be.get(Yv,Ao+1),be.set(Yv,Ao+1,-up*be.get(Yv,Ao)+lp*be.get(Yv,Ao+1)),be.set(Yv,Ao,Ru);if(Ru=oh(Uy,y1),Ru===0&&(Ru=Number.MIN_VALUE),lp=Uy/Ru,up=y1/Ru,X[Ao]=Ru,Uy=lp*me[Ao]+up*X[Ao+1],X[Ao+1]=-up*me[Ao]+lp*X[Ao+1],y1=up*me[Ao+1],me[Ao+1]=lp*me[Ao+1],E&&Ao<s-1)for(var Kv=0;Kv<s;Kv++)Ru=lp*ne.get(Kv,Ao)+up*ne.get(Kv,Ao+1),ne.set(Kv,Ao+1,-up*ne.get(Kv,Ao)+lp*ne.get(Kv,Ao+1)),ne.set(Kv,Ao,Ru)}me[Yr-2]=Uy,ar=ar+1;break}case 4:{if(X[pr]<=0&&(X[pr]=X[pr]<0?-X[pr]:0,T))for(var oT=0;oT<=jn;oT++)be.set(oT,pr,-be.get(oT,pr));for(;pr<jn&&!(X[pr]>=X[pr+1]);){var Dw=X[pr];if(X[pr]=X[pr+1],X[pr+1]=Dw,T&&pr<a-1)for(var b1=0;b1<a;b1++)Dw=be.get(b1,pr+1),be.set(b1,pr+1,be.get(b1,pr)),be.set(b1,pr,Dw);if(E&&pr<s-1)for(var x1=0;x1<s;x1++)Dw=ne.get(x1,pr+1),ne.set(x1,pr+1,ne.get(x1,pr)),ne.set(x1,pr,Dw);pr++}ar=0,Yr--;break}}}if(O){var Ok=be;be=ne,ne=Ok}this.m=s,this.n=a,this.s=X,this.U=ne,this.V=be}return W0()(n,[{key:"solve",value:function(i){for(var s=i,a=this.threshold,u=this.s.length,h=Qr.zeros(u,u),p=0;p<u;p++)Math.abs(this.s[p])<=a?h.set(p,p,0):h.set(p,p,1/this.s[p]);for(var g=this.U,y=this.rightSingularVectors,b=y.mmul(h),E=y.rows,T=g.rows,O=Qr.zeros(E,T),N=0;N<E;N++)for(var k=0;k<T;k++){for(var B=0,$=0;$<u;$++)B+=b.get(N,$)*g.get(k,$);O.set(N,k,B)}return O.mmul(s)}},{key:"solveForDiagonal",value:function(i){return this.solve(Qr.diag(i))}},{key:"inverse",value:function(){for(var i=this.V,s=this.threshold,a=i.rows,u=i.columns,h=new Qr(a,this.s.length),p=0;p<a;p++)for(var g=0;g<u;g++)Math.abs(this.s[g])>s&&h.set(p,g,i.get(p,g)/this.s[g]);for(var y=this.U,b=y.rows,E=y.columns,T=new Qr(a,b),O=0;O<a;O++)for(var N=0;N<b;N++){for(var k=0,B=0;B<E;B++)k+=h.get(O,B)*y.get(N,B);T.set(O,N,k)}return T}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var i=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,s=0,a=this.s,u=0,h=a.length;u<h;u++)a[u]>i&&s++;return s}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Qr.diag(this.s)}}]),n}();class Mx{constructor(r){this.distances=r.distances,this.dimension=r.dimension||2,this.linkDistance=r.linkDistance}layout(){const r=this,{dimension:i,distances:s,linkDistance:a}=r;try{const u=Qr.mul(Qr.pow(s,2),-.5),h=u.mean("row"),p=u.mean("column"),g=u.mean();u.add(g).subRowVector(h).subColumnVector(p);const y=new kb(u),b=Qr.sqrt(y.diagonalMatrix).diagonal();return y.leftSingularVectors.toJSON().map(E=>Qr.mul([E],[b]).toJSON()[0].splice(0,i))}catch{const h=[];for(let p=0;p<s.length;p++){const g=Math.random()*a,y=Math.random()*a;h.push([g,y])}return h}}}const Ox=800;class Px{constructor(r){this.disp=[],this.positions=r.positions,this.adjMatrix=r.adjMatrix,this.focusID=r.focusID,this.radii=r.radii,this.iterations=r.iterations||10,this.height=r.height||10,this.width=r.width||10,this.speed=r.speed||100,this.gravity=r.gravity||10,this.nodeSizeFunc=r.nodeSizeFunc,this.k=r.k||5,this.strictRadial=r.strictRadial,this.nodes=r.nodes}layout(){const r=this,i=r.positions,s=[],a=r.iterations,u=r.width/10;r.maxDisplace=u,r.disp=s;for(let h=0;h<a;h++)i.forEach((p,g)=>{s[g]={x:0,y:0}}),r.getRepulsion(),r.updatePositions();return i}getRepulsion(){const r=this,i=r.positions,s=r.nodes,a=r.disp,u=r.k,h=r.radii||[];i.forEach((p,g)=>{a[g]={x:0,y:0},i.forEach((y,b)=>{if(g===b||h[g]!==h[b])return;let E=p[0]-y[0],T=p[1]-y[1],O=Math.sqrt(E*E+T*T);if(O===0){O=1;const N=g>b?1:-1;E=.01*N,T=.01*N}if(O<r.nodeSizeFunc(s[g])/2+r.nodeSizeFunc(s[b])/2){const N=u*u/O;a[g].x+=E/O*N,a[g].y+=T/O*N}})})}updatePositions(){const r=this,i=r.positions,s=r.disp,a=r.speed,u=r.strictRadial,h=r.focusID,p=r.maxDisplace||r.width/10;u&&s.forEach((y,b)=>{const E=i[b][0]-i[h][0],T=i[b][1]-i[h][1],O=Math.sqrt(E*E+T*T);let N=T/O,k=-E/O;const B=Math.sqrt(y.x*y.x+y.y*y.y);let $=Math.acos((N*y.x+k*y.y)/B);$>Math.PI/2&&($-=Math.PI/2,N*=-1,k*=-1);const X=Math.cos($)*B;y.x=N*X,y.y=k*X});const g=r.radii;i.forEach((y,b)=>{if(b===h)return;const E=Math.sqrt(s[b].x*s[b].x+s[b].y*s[b].y);if(E>0&&b!==h){const T=Math.min(p*(a/Ox),E);if(y[0]+=s[b].x/E*T,y[1]+=s[b].y/E*T,u){let O=y[0]-i[h][0],N=y[1]-i[h][1];const k=Math.sqrt(O*O+N*N);O=O/k*g[b],N=N/k*g[b],y[0]=i[h][0]+O,y[1]=i[h][1]+N}}})}}function Dx(n){const r=n.length,i=n[0].length,s=[];for(let a=0;a<r;a++){const u=[];for(let h=0;h<i;h++)n[a][h]!==0?u.push(1/(n[a][h]*n[a][h])):u.push(0);s.push(u)}return s}function Nx(n,r){let i=-1;return n.forEach((s,a)=>{s.id===r&&(i=a)}),i}function Lb(n,r){return Math.sqrt((n[0]-r[0])*(n[0]-r[0])+(n[1]-r[1])*(n[1]-r[1]))}class Ix extends ls{constructor(r){super(),this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(r)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const r=this,i=r.nodes,s=r.edges||[];if(!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const a=r.center;if(i.length===1){i[0].x=a[0],i[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd();return}const u=r.linkDistance;let h=null;if(Ga(r.focusNode)){let Zt=!1;for(let at=0;at<i.length;at++)i[at].id===r.focusNode&&(h=i[at],r.focusNode=h,Zt=!0,at=i.length);Zt||(h=null)}else h=r.focusNode;h||(h=i[0],r.focusNode=h);const p=Nx(i,h.id);r.focusIndex=p;const g=Jd({nodes:i,edges:s},!1),y=qd(g),b=r.maxToFocus(y,p);r.handleInfinity(y,p,b+1),r.distances=y;const E=y[p],T=r.width||500,O=r.height||500;let N=T-a[0]>a[0]?a[0]:T-a[0],k=O-a[1]>a[1]?a[1]:O-a[1];N===0&&(N=T/2),k===0&&(k=O/2);const B=k>N?N:k,$=Math.max(...E),X=[];E.forEach((Zt,at)=>{r.unitRadius||(r.unitRadius=B/$),X[at]=Zt*r.unitRadius}),r.radii=X;const ne=r.eIdealDisMatrix();r.eIdealDistances=ne;const be=Dx(ne);r.weights=be;let je=new Mx({linkDistance:u,distances:ne}).layout();je.forEach(Zt=>{ud(Zt[0])&&(Zt[0]=Math.random()*u),ud(Zt[1])&&(Zt[1]=Math.random()*u)}),r.positions=je,je.forEach((Zt,at)=>{i[at].x=Zt[0]+a[0],i[at].y=Zt[1]+a[1]}),je.forEach(Zt=>{Zt[0]-=je[p][0],Zt[1]-=je[p][1]}),r.run();const ot=r.preventOverlap,ct=r.nodeSize;let Xt;const _t=r.strictRadial;if(ot){const Zt=r.nodeSpacing;let at;Hn(Zt)?at=()=>Zt:wu(Zt)?at=Zt:at=()=>0,ct?Ds(ct)?Xt=Jn=>(ct[0]>ct[1]?ct[0]:ct[1])+at(Jn):Xt=Jn=>ct+at(Jn):Xt=Jn=>Jn.size?Ds(Jn.size)?(Jn.size[0]>Jn.size[1]?Jn.size[0]:Jn.size[1])+at(Jn):ia(Jn.size)?(Jn.size.width>Jn.size.height?Jn.size.width:Jn.size.height)+at(Jn):Jn.size+at(Jn):10+at(Jn);const Gn={nodes:i,nodeSizeFunc:Xt,adjMatrix:g,positions:je,radii:X,height:O,width:T,strictRadial:_t,focusID:p,iterations:r.maxPreventOverlapIteration||200,k:je.length/4.5};je=new Px(Gn).layout()}return je.forEach((Zt,at)=>{i[at].x=Zt[0]+a[0],i[at].y=Zt[1]+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s}}run(){const r=this,i=r.maxIteration,s=r.positions||[],a=r.weights||[],u=r.eIdealDistances||[],h=r.radii||[];for(let p=0;p<=i;p++){const g=p/i;r.oneIteration(g,s,h,u,a)}}oneIteration(r,i,s,a,u){const h=this,p=1-r,g=h.focusIndex;i.forEach((y,b)=>{const E=Lb(y,[0,0]),T=E===0?0:1/E;if(b===g)return;let O=0,N=0,k=0;i.forEach(($,X)=>{if(b===X)return;const ne=Lb(y,$),be=ne===0?0:1/ne,me=a[X][b];k+=u[b][X],O+=u[b][X]*($[0]+me*(y[0]-$[0])*be),N+=u[b][X]*($[1]+me*(y[1]-$[1])*be)});const B=s[b]===0?0:1/s[b];k*=p,k+=r*B*B,O*=p,O+=r*B*y[0]*T,y[0]=O/k,N*=p,N+=r*B*y[1]*T,y[1]=N/k})}eIdealDisMatrix(){const r=this,i=r.nodes;if(!i)return[];const s=r.distances,a=r.linkDistance,u=r.radii||[],h=r.unitRadius||50,p=[];return s&&s.forEach((g,y)=>{const b=[];g.forEach((E,T)=>{if(y===T)b.push(0);else if(u[y]===u[T])if(r.sortBy==="data")b.push(E*(Math.abs(y-T)*r.sortStrength)/(u[y]/h));else if(r.sortBy){let O=i[y][r.sortBy]||0,N=i[T][r.sortBy]||0;Ga(O)&&(O=O.charCodeAt(0)),Ga(N)&&(N=N.charCodeAt(0)),b.push(E*(Math.abs(O-N)*r.sortStrength)/(u[y]/h))}else b.push(E*a/(u[y]/h));else{const O=(a+h)/2;b.push(E*O)}}),p.push(b)}),p}handleInfinity(r,i,s){const a=r.length;for(let u=0;u<a;u++)if(r[i][u]===1/0){r[i][u]=s,r[u][i]=s;for(let h=0;h<a;h++)r[u][h]!==1/0&&r[i][h]===1/0&&(r[i][h]=s+r[u][h],r[h][i]=s+r[u][h])}for(let u=0;u<a;u++)if(u!==i){for(let h=0;h<a;h++)if(r[u][h]===1/0){let p=Math.abs(r[i][u]-r[i][h]);p=p===0?1:p,r[u][h]=p}}}maxToFocus(r,i){let s=0;for(let a=0;a<r[i].length;a++)r[i][a]!==1/0&&(s=r[i][a]>s?r[i][a]:s);return s}getType(){return"radial"}}class Rx extends ls{constructor(r){super(),this.nodeSize=30,this.minNodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){const r=this,i=r.nodes,s=r.edges,a=i.length;if(a===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const u=r.center;if(a===1){i[0].x=u[0],i[0].y=u[1],r.onLayoutEnd&&r.onLayoutEnd();return}const h=[];let p;Ds(r.nodeSize)?p=Math.max(r.nodeSize[0],r.nodeSize[1]):p=r.nodeSize,i.forEach(N=>{h.push(N);let k=p;Ds(N.size)?k=Math.max(N.size[0],N.size[1]):Hn(N.size)?k=N.size:ia(N.size)&&(k=Math.max(N.size.width,N.size.height)),p=Math.max(p,k)}),r.clockwise=r.counterclockwise!==void 0?!r.counterclockwise:r.clockwise;const g={},y={};if(h.forEach((N,k)=>{g[N.id]=N,y[N.id]=k}),(r.sortBy==="degree"||!Ga(r.sortBy)||h[0][r.sortBy]===void 0)&&(r.sortBy="degree",!Hn(i[0].degree))){const N=Ba(i.length,y,s);h.forEach((k,B)=>{k.degree=N[B]})}h.sort((N,k)=>k[r.sortBy]-N[r.sortBy]),r.maxValueNode=h[0],r.maxLevelDiff=r.maxLevelDiff||r.maxValueNode[r.sortBy]/4;const b=[[]];let E=b[0];h.forEach(N=>{if(E.length>0){const k=Math.abs(E[0][r.sortBy]-N[r.sortBy]);r.maxLevelDiff&&k>=r.maxLevelDiff&&(E=[],b.push(E))}E.push(N)});let T=p+r.minNodeSpacing;if(!r.preventOverlap){const N=b.length>0&&b[0].length>1,B=(Math.min(r.width,r.height)/2-T)/(b.length+(N?1:0));T=Math.min(T,B)}let O=0;if(b.forEach(N=>{let k=r.sweep;k===void 0&&(k=2*Math.PI-2*Math.PI/N.length);const B=N.dTheta=k/Math.max(1,N.length-1);if(N.length>1&&r.preventOverlap){const $=Math.cos(B)-Math.cos(0),X=Math.sin(B)-Math.sin(0),ne=Math.sqrt(T*T/($*$+X*X));O=Math.max(ne,O)}N.r=O,O+=T}),r.equidistant){let N=0,k=0;for(let B=0;B<b.length;B++){const X=b[B].r-k;N=Math.max(N,X)}k=0,b.forEach((B,$)=>{$===0&&(k=B.r),B.r=k,k+=N})}return b.forEach(N=>{const k=N.dTheta,B=N.r;N.forEach(($,X)=>{const ne=r.startAngle+(r.clockwise?1:-1)*k*X;$.x=u[0]+B*Math.cos(ne),$.y=u[1]+B*Math.sin(ne)})}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s}}getType(){return"concentric"}}class Wp extends ls{constructor(r){super(),this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const r=this,{nodes:i,edges:s=[]}=r,a=r.center;if(!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(i.length===1){i[0].x=a[0],i[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd();return}const u=r.linkDistance,h=Jd({nodes:i,edges:s},!1),p=qd(h);r.handleInfinity(p);const g=kp(p,u);r.scaledDistances=g;const y=r.runMDS();return r.positions=y,y.forEach((b,E)=>{i[E].x=b[0]+a[0],i[E].y=b[1]+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s}}runMDS(){const r=this,i=2,s=r.scaledDistances,a=Qr.mul(Qr.pow(s,2),-.5),u=a.mean("row"),h=a.mean("column"),p=a.mean();a.add(p).subRowVector(u).subColumnVector(h);const g=new kb(a),y=Qr.sqrt(g.diagonalMatrix).diagonal();return g.leftSingularVectors.toJSON().map(b=>Qr.mul([b],[y]).toJSON()[0].splice(0,i))}handleInfinity(r){let i=-999999;r.forEach(s=>{s.forEach(a=>{a!==1/0&&i<a&&(i=a)})}),r.forEach((s,a)=>{s.forEach((u,h)=>{u===1/0&&(r[a][h]=i)})})}getType(){return"mds"}}const kx=800;class Lx extends ls{constructor(r){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){var r,i;const s=this,a=s.nodes;if(s.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(s.timeInterval),!a||a.length===0){(r=s.onLayoutEnd)===null||r===void 0||r.call(s);return}!s.width&&typeof window<"u"&&(s.width=window.innerWidth),!s.height&&typeof window<"u"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);const u=s.center;if(a.length===1){a[0].x=u[0],a[0].y=u[1],(i=s.onLayoutEnd)===null||i===void 0||i.call(s);return}const h={},p={};return a.forEach((g,y)=>{Hn(g.x)||(g.x=Math.random()*this.width),Hn(g.y)||(g.y=Math.random()*this.height),h[g.id]=g,p[g.id]=y}),s.nodeMap=h,s.nodeIdxMap=p,s.run()}run(){var r;const i=this,s=i.nodes;if(!s)return;const{edges:a,maxIteration:u,workerEnabled:h,clustering:p}=i,g={};if(p&&s.forEach(y=>{g[y.cluster]===void 0&&(g[y.cluster]={name:y.cluster,cx:0,cy:0,count:0})}),h){for(let y=0;y<u;y++)i.runOneStep(g);(r=i.onLayoutEnd)===null||r===void 0||r.call(i)}else{if(typeof window>"u")return;let y=0;this.timeInterval=window.setInterval(()=>{var b;i.runOneStep(g),y++,y>=u&&((b=i.onLayoutEnd)===null||b===void 0||b.call(i),window.clearInterval(i.timeInterval))},0)}return{nodes:s,edges:a}}runOneStep(r){var i;const s=this,a=s.nodes;if(!a)return;const{edges:u,center:h,gravity:p,speed:g,clustering:y}=s,b=s.height*s.width,E=Math.sqrt(b)/10,T=b/(a.length+1),O=Math.sqrt(T),N=[];if(a.forEach((k,B)=>{N[B]={x:0,y:0}}),s.applyCalculate(a,u,N,O,T),y){for(const B in r)r[B].cx=0,r[B].cy=0,r[B].count=0;a.forEach(B=>{const $=r[B.cluster];Hn(B.x)&&($.cx+=B.x),Hn(B.y)&&($.cy+=B.y),$.count++});for(const B in r)r[B].cx/=r[B].count,r[B].cy/=r[B].count;const k=s.clusterGravity||p;a.forEach((B,$)=>{if(!Hn(B.x)||!Hn(B.y))return;const X=r[B.cluster],ne=Math.sqrt((B.x-X.cx)*(B.x-X.cx)+(B.y-X.cy)*(B.y-X.cy)),be=O*k;N[$].x-=be*(B.x-X.cx)/ne,N[$].y-=be*(B.y-X.cy)/ne})}a.forEach((k,B)=>{if(!Hn(k.x)||!Hn(k.y))return;const $=.01*O*p;N[B].x-=$*(k.x-h[0]),N[B].y-=$*(k.y-h[1])}),a.forEach((k,B)=>{if(Hn(k.fx)&&Hn(k.fy)){k.x=k.fx,k.y=k.fy;return}if(!Hn(k.x)||!Hn(k.y))return;const $=Math.sqrt(N[B].x*N[B].x+N[B].y*N[B].y);if($>0){const X=Math.min(E*(g/kx),$);k.x+=N[B].x/$*X,k.y+=N[B].y/$*X}}),(i=s.tick)===null||i===void 0||i.call(s)}applyCalculate(r,i,s,a,u){const h=this;h.calRepulsive(r,s,u),i&&h.calAttractive(i,s,a)}calRepulsive(r,i,s){r.forEach((a,u)=>{i[u]={x:0,y:0},r.forEach((h,p)=>{if(u===p||!Hn(a.x)||!Hn(h.x)||!Hn(a.y)||!Hn(h.y))return;let g=a.x-h.x,y=a.y-h.y,b=g*g+y*y;if(b===0){b=1;const T=u>p?1:-1;g=.01*T,y=.01*T}const E=s/b;i[u].x+=g*E,i[u].y+=y*E})})}calAttractive(r,i,s){r.forEach(a=>{const u=vi(a,"source"),h=vi(a,"target");if(!u||!h)return;const p=this.nodeIdxMap[u],g=this.nodeIdxMap[h];if(p===g)return;const y=this.nodeMap[u],b=this.nodeMap[h];if(!Hn(b.x)||!Hn(y.x)||!Hn(b.y)||!Hn(y.y))return;const E=b.x-y.x,T=b.y-y.y,O=Math.sqrt(E*E+T*T),N=O*O/s;i[g].x-=E/O*N,i[g].y-=T/O*N,i[p].x+=E/O*N,i[p].y+=T/O*N})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)}destroy(){const r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0}getType(){return"fruchterman"}}function Er(n,r,i,s){!i||Object.defineProperty(n,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}var dr=M(15671),Or=M(43144);function Cr(n,r,i,s,a){var u={};return Object.keys(s).forEach(function(h){u[h]=s[h]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=i.slice().reverse().reduce(function(h,p){return p(n,r,h)||h},u),a&&u.initializer!==void 0&&(u.value=u.initializer?u.initializer.call(a):void 0,u.initializer=void 0),u.initializer===void 0&&(Object.defineProperty(n,r,u),u=null),u}var Gx=M(64687),cr=M.n(Gx),Wi=M(15861),Fx=-1,Om=1;function Tu(){return Om++}var Vh=function n(r){(0,dr.Z)(this,n)},Yf=function(){function n(r){(0,dr.Z)(this,n),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=r}return(0,Or.Z)(n,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(i){return this.lookup[i]>-1}},{key:"create",value:function(i,s){this.lookup[i]=this.components.length;var a=new this.clazz(s||{});return this.components.push(a),this.entities.push(i),a}},{key:"remove",value:function(i){var s=this.lookup[i];s>-1&&s<this.components.length-1&&(this.components[s]=this.components[this.components.length-1],this.entities[s]=this.entities[this.entities.length-1],this.lookup[this.entities[s]]=s),this.components.pop(),this.entities.pop(),delete this.lookup[i]}},{key:"removeKeepSorted",value:function(i){var s=this.lookup[i];if(s>-1){var a=this.entities[s];if(s<this.components.length-1){for(var u=s+1;u<this.components.length;++u)this.components[u-1]=this.components[u];for(var h=s+1;h<this.entities.length;++h)this.entities[h-1]=this.entities[h],this.lookup[this.entities[h-1]]=h-1}this.components.pop(),this.entities.pop(),delete this.lookup[a]}}},{key:"moveItem",value:function(i,s){if(i!==s){for(var a=this.components[i],u=this.entities[i],h=i<s?1:-1,p=i;p!==s;p+=h){var g=p+h;this.components[p]=this.components[g],this.entities[p]=this.entities[g],this.lookup[this.entities[p]]=p}this.components[s]=a,this.entities[s]=u,this.lookup[u]=s}}},{key:"getEntity",value:function(i){return this.entities[i]}},{key:"getComponent",value:function(i){return this.components[i]}},{key:"getComponentByEntity",value:function(i){var s=this.lookup[i];return s>-1?this.components[s]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(i){for(var s=0,a=Object.keys(this.lookup);s<a.length;s++){var u=a[s],h=Number(u);if(this.lookup[h]===i)return h}return Fx}},{key:"find",value:function(i){for(var s=0;s<this.getCount();s++){var a=this.getComponent(s);if(i(a,s))return a}return null}},{key:"findIndex",value:function(i){for(var s=0;s<this.getCount();s++){var a=this.getComponent(s);if(i(a,s))return s}return-1}},{key:"forEach",value:function(i){for(var s=0,a=Object.keys(this.lookup);s<a.length;s++){var u=a[s],h=Number(u),p=this.lookup[h];i(h,this.getComponent(p))}}},{key:"forEachAsync",value:function(){var r=(0,Wi.Z)(cr().mark(function s(a){var u,h,p,g,y;return cr().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:u=0,h=Object.keys(this.lookup);case 1:if(!(u<h.length)){E.next=10;break}return p=h[u],g=Number(p),y=this.lookup[g],E.next=7,a(g,this.getComponent(y));case 7:u++,E.next=1;break;case 10:case"end":return E.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"map",value:function(i){for(var s=[],a=0,u=Object.keys(this.lookup);a<u.length;a++){var h=u[a],p=Number(h),g=this.lookup[p];s.push(i(p,this.getComponent(g)))}return s}}]),n}(),Xp=M(29439),rn={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Wg=function n(){(0,dr.Z)(this,n),this.index=void 0},Bx=function n(){(0,dr.Z)(this,n),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},Gb=function(){function n(){(0,dr.Z)(this,n),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return(0,Or.Z)(n,[{key:"read",value:function(i){return this.reads.find(function(s){return s.index===i.index})||this.reads.push(i),i}},{key:"sample",value:function(i){return this.read(i),i}},{key:"write",value:function(i,s){var a=this.writes.find(function(g){return g.index===s.index});if(a)return s;var u=i.getResourceNode(s);u.resource.version++,u.resource.imported&&(this.hasSideEffect=!0);var h=i.createResourceNode(u.resource),p=i.getResourceNode(h);return p.writer=this,this.writes.push(h),h}}]),n}(),wa=M(79340),Eo=M(82963),no=M(61120),Fb=function n(){(0,dr.Z)(this,n),this.first=void 0,this.last=void 0};function Bb(n){var r=zx();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function zx(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var zb=function(n){(0,wa.Z)(i,n);var r=Bb(i);function i(){var s;(0,dr.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),s.version=0,s.refs=0,s.name=void 0,s.imported=void 0,s.priority=void 0,s.discardStart=!0,s.discardEnd=!1,s.descriptor=void 0,s.resource=void 0,s}return(0,Or.Z)(i,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),i}(Fb),Pm=function n(){(0,dr.Z)(this,n),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},Ub,K0,Vb,Dm,Xg,jb;function bl(n,r){var i;if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=Ux(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function Ux(n,r){if(!!n){if(typeof n=="string")return Hb(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Hb(n,r)}}function Hb(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var Vx=(Ub=(0,z.b2)(),K0=(0,z.f3)(rn.RenderEngine),Ub(Vb=(Dm=(jb=function(){function n(){(0,dr.Z)(this,n),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],Er(this,"engine",Xg,this)}return(0,Or.Z)(n,[{key:"execute",value:function(){var r=(0,Wi.Z)(cr().mark(function s(a){return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return this.compile(),h.next=3,this.executePassNodes(a);case 3:case"end":return h.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(i){i.tearDown&&i.tearDown()}),this.reset()}},{key:"addPass",value:function(i,s,a,u){var h=new Bx;h.execute=a,u&&(h.tearDown=u),h.name=i;var p=new Gb;return p.name=i,this.passNodes.push(p),this.frameGraphPasses.push(h),s(this,p,h),h}},{key:"getPass",value:function(i){return this.frameGraphPasses.find(function(s){return s.name===i})}},{key:"compile",value:function(){var i=this,s=bl(this.passNodes),a;try{for(s.s();!(a=s.n()).done;){var u=a.value;u.refCount=u.writes.length+(u.hasSideEffect?1:0),u.reads.forEach(function(Zr){i.resourceNodes[Zr.index].readerCount++})}}catch(Zr){s.e(Zr)}finally{s.f()}var h=[],p=bl(this.resourceNodes),g;try{for(p.s();!(g=p.n()).done;){var y=g.value;y.readerCount===0&&h.push(y)}}catch(Zr){p.e(Zr)}finally{p.f()}for(;h.length;){var b=h.pop(),E=b&&b.writer;if(E&&--E.refCount===0){var T=bl(E.reads),O;try{for(T.s();!(O=T.n()).done;){var N=O.value,k=this.resourceNodes[N.index];--k.readerCount===0&&h.push(k)}}catch(Zr){T.e(Zr)}finally{T.f()}}}this.resourceNodes.forEach(function(Zr){Zr.resource.refs+=Zr.readerCount});var B=bl(this.passNodes),$;try{for(B.s();!($=B.n()).done;){var X=$.value;if(!!X.refCount){var ne=bl(X.reads),be;try{for(ne.s();!(be=ne.n()).done;){var me=be.value,je=this.resourceNodes[me.index].resource;je.first=je.first?je.first:X,je.last=X}}catch(Zr){ne.e(Zr)}finally{ne.f()}var ot=bl(X.writes),ct;try{for(ot.s();!(ct=ot.n()).done;){var Xt=ct.value,_t=this.resourceNodes[Xt.index].resource;_t.first=_t.first?_t.first:X,_t.last=X}}catch(Zr){ot.e(Zr)}finally{ot.f()}}}}catch(Zr){B.e(Zr)}finally{B.f()}for(var Zt=0;Zt<2;Zt++){var at=bl(this.resourceNodes),Gn;try{for(at.s();!(Gn=at.n()).done;){var Rn=Gn.value,Jn=Rn.resource;if(Jn.priority===Zt&&Jn.refs){var Li=Jn.first,Gi=Jn.last;Li&&Gi&&(Li.devirtualize.push(Jn),Gi.destroy.push(Jn))}}}catch(Zr){at.e(Zr)}finally{at.f()}}}},{key:"executePassNodes",value:function(){var r=(0,Wi.Z)(cr().mark(function s(a){var u,h,p,g,y,b,E,T,O,N,k,B,$,X,ne,be,me;return cr().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:u=bl(this.passNodes.entries()),ot.prev=1,u.s();case 3:if((h=u.n()).done){ot.next=18;break}if(p=(0,Xp.Z)(h.value,2),g=p[0],y=p[1],!y.refCount){ot.next=16;break}b=bl(y.devirtualize);try{for(b.s();!(E=b.n()).done;)T=E.value,T.preExecuteDevirtualize(this.engine)}catch(ct){b.e(ct)}finally{b.f()}O=bl(y.destroy);try{for(O.s();!(N=O.n()).done;)k=N.value,k.preExecuteDestroy(this.engine)}catch(ct){O.e(ct)}finally{O.f()}return ot.next=12,this.frameGraphPasses[g].execute(this,this.frameGraphPasses[g],a);case 12:B=bl(y.devirtualize);try{for(B.s();!($=B.n()).done;)X=$.value,X.postExecuteDevirtualize(this.engine)}catch(ct){B.e(ct)}finally{B.f()}ne=bl(y.destroy);try{for(ne.s();!(be=ne.n()).done;)me=be.value,me.postExecuteDestroy(this.engine)}catch(ct){ne.e(ct)}finally{ne.f()}case 16:ot.next=3;break;case 18:ot.next=23;break;case 20:ot.prev=20,ot.t0=ot.catch(1),u.e(ot.t0);case 23:return ot.prev=23,u.f(),ot.finish(23);case 26:this.reset();case 27:case"end":return ot.stop()}},s,this,[[1,20,23,26]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(i){return this.resourceNodes[i.index]}},{key:"createResourceNode",value:function(i){var s=new Pm;s.resource=i,s.version=i.version,this.resourceNodes.push(s);var a=new Wg;return a.index=this.resourceNodes.length-1,a}},{key:"createTexture",value:function(i,s,a){var u=new zb;return u.name=s,u.descriptor=a,this.createResourceNode(u)}},{key:"createRenderTarget",value:function(i,s,a){var u=new zb;return u.name=s,u.descriptor=a,this.createResourceNode(u)}},{key:"present",value:function(i){this.addPass("Present",function(s,a){a.read(i),a.hasSideEffect=!0},(0,Wi.Z)(cr().mark(function s(){return cr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},s)})))}}]),n}(),jb),Xg=Cr(Dm.prototype,"engine",[K0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dm))||Vb),kt=M(4942),is=M(97326),Va=M(49685);function Zg(){var n=new Va.WT(4);return Va.WT!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function jx(n){var r=new Va.WT(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}function $b(n,r,i,s){var a=new Va.WT(4);return a[0]=n,a[1]=r,a[2]=i,a[3]=s,a}function Wb(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n}function Hx(n,r,i,s,a){return n[0]=r,n[1]=i,n[2]=s,n[3]=a,n}function $x(n,r,i){return n[0]=r[0]+i[0],n[1]=r[1]+i[1],n[2]=r[2]+i[2],n[3]=r[3]+i[3],n}function Fw(n,r,i){return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n[2]=r[2]-i[2],n[3]=r[3]-i[3],n}function Bw(n,r,i){return n[0]=r[0]*i[0],n[1]=r[1]*i[1],n[2]=r[2]*i[2],n[3]=r[3]*i[3],n}function zw(n,r,i){return n[0]=r[0]/i[0],n[1]=r[1]/i[1],n[2]=r[2]/i[2],n[3]=r[3]/i[3],n}function Uw(n,r){return n[0]=Math.ceil(r[0]),n[1]=Math.ceil(r[1]),n[2]=Math.ceil(r[2]),n[3]=Math.ceil(r[3]),n}function Xb(n,r){return n[0]=Math.floor(r[0]),n[1]=Math.floor(r[1]),n[2]=Math.floor(r[2]),n[3]=Math.floor(r[3]),n}function Zb(n,r,i){return n[0]=Math.min(r[0],i[0]),n[1]=Math.min(r[1],i[1]),n[2]=Math.min(r[2],i[2]),n[3]=Math.min(r[3],i[3]),n}function Vw(n,r,i){return n[0]=Math.max(r[0],i[0]),n[1]=Math.max(r[1],i[1]),n[2]=Math.max(r[2],i[2]),n[3]=Math.max(r[3],i[3]),n}function Wx(n,r){return n[0]=Math.round(r[0]),n[1]=Math.round(r[1]),n[2]=Math.round(r[2]),n[3]=Math.round(r[3]),n}function Yb(n,r,i){return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n}function Xx(n,r,i,s){return n[0]=r[0]+i[0]*s,n[1]=r[1]+i[1]*s,n[2]=r[2]+i[2]*s,n[3]=r[3]+i[3]*s,n}function jw(n,r){var i=r[0]-n[0],s=r[1]-n[1],a=r[2]-n[2],u=r[3]-n[3];return Math.hypot(i,s,a,u)}function Zx(n,r){var i=r[0]-n[0],s=r[1]-n[1],a=r[2]-n[2],u=r[3]-n[3];return i*i+s*s+a*a+u*u}function Kb(n){var r=n[0],i=n[1],s=n[2],a=n[3];return Math.hypot(r,i,s,a)}function Yx(n){var r=n[0],i=n[1],s=n[2],a=n[3];return r*r+i*i+s*s+a*a}function m(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=-r[3],n}function C(n,r){return n[0]=1/r[0],n[1]=1/r[1],n[2]=1/r[2],n[3]=1/r[3],n}function D(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=i*i+s*s+a*a+u*u;return h>0&&(h=1/Math.sqrt(h)),n[0]=i*h,n[1]=s*h,n[2]=a*h,n[3]=u*h,n}function Y(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]+n[3]*r[3]}function ve(n,r,i,s){var a=i[0]*s[1]-i[1]*s[0],u=i[0]*s[2]-i[2]*s[0],h=i[0]*s[3]-i[3]*s[0],p=i[1]*s[2]-i[2]*s[1],g=i[1]*s[3]-i[3]*s[1],y=i[2]*s[3]-i[3]*s[2],b=r[0],E=r[1],T=r[2],O=r[3];return n[0]=E*y-T*g+O*p,n[1]=-(b*y)+T*h-O*u,n[2]=b*g-E*h+O*a,n[3]=-(b*p)+E*u-T*a,n}function ke(n,r,i,s){var a=r[0],u=r[1],h=r[2],p=r[3];return n[0]=a+s*(i[0]-a),n[1]=u+s*(i[1]-u),n[2]=h+s*(i[2]-h),n[3]=p+s*(i[3]-p),n}function Ze(n,r){r=r||1;var i,s,a,u,h,p;do i=glMatrix.RANDOM()*2-1,s=glMatrix.RANDOM()*2-1,h=i*i+s*s;while(h>=1);do a=glMatrix.RANDOM()*2-1,u=glMatrix.RANDOM()*2-1,p=a*a+u*u;while(p>=1);var g=Math.sqrt((1-h)/p);return n[0]=r*i,n[1]=r*s,n[2]=r*a*g,n[3]=r*u*g,n}function st(n,r,i){var s=r[0],a=r[1],u=r[2],h=r[3];return n[0]=i[0]*s+i[4]*a+i[8]*u+i[12]*h,n[1]=i[1]*s+i[5]*a+i[9]*u+i[13]*h,n[2]=i[2]*s+i[6]*a+i[10]*u+i[14]*h,n[3]=i[3]*s+i[7]*a+i[11]*u+i[15]*h,n}function Ot(n,r,i){var s=r[0],a=r[1],u=r[2],h=i[0],p=i[1],g=i[2],y=i[3],b=y*s+p*u-g*a,E=y*a+g*s-h*u,T=y*u+h*a-p*s,O=-h*s-p*a-g*u;return n[0]=b*y+O*-h+E*-g-T*-p,n[1]=E*y+O*-p+T*-h-b*-g,n[2]=T*y+O*-g+b*-p-E*-h,n[3]=r[3],n}function mn(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}function Cn(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}function Dn(n,r){return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]}function nr(n,r){var i=n[0],s=n[1],a=n[2],u=n[3],h=r[0],p=r[1],g=r[2],y=r[3];return Math.abs(i-h)<=Va.Ib*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-p)<=Va.Ib*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(a-g)<=Va.Ib*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-y)<=Va.Ib*Math.max(1,Math.abs(u),Math.abs(y))}var Pr=null,ri=null,Ri=null,ii=null,Ki=null,ro=null,Jl=null,Jc=function(){var n=Zg();return function(r,i,s,a,u,h){var p,g;for(i||(i=4),s||(s=0),a?g=Math.min(a*i+s,r.length):g=r.length,p=s;p<g;p+=i)n[0]=r[p],n[1]=r[p+1],n[2]=r[p+2],n[3]=r[p+3],u(n,n,h),r[p]=n[0],r[p+1]=n[1],r[p+2]=n[2],r[p+3]=n[3];return r}}(),Ea=M(35600),wt=M(77160),ja=M(71002),hd=9007199254740991,qb="[object Arguments]",sT="[object Array]",aT="[object Boolean]",Hw="[object Date]",cT="[object Error]",lT="[object Function]",uT="[object Map]",dT="[object Number]",$w="[object Object]",hT="[object RegExp]",fT="[object Set]",Ww="[object String]",pT="[object WeakMap]",gT="[object ArrayBuffer]",vT="[object DataView]",mT="[object Float32Array]",Xw="[object Float64Array]",yT="[object Int8Array]",bT="[object Int16Array]",xT="[object Int32Array]",CT="[object Uint8Array]",wT="[object Uint8ClampedArray]",Zw="[object Uint16Array]",ET="[object Uint32Array]",Rs={};Rs[mT]=Rs[Xw]=Rs[yT]=Rs[bT]=Rs[xT]=Rs[CT]=Rs[wT]=Rs[Zw]=Rs[ET]=!0,Rs[qb]=Rs[sT]=Rs[gT]=Rs[aT]=Rs[vT]=Rs[Hw]=Rs[cT]=Rs[lT]=Rs[uT]=Rs[dT]=Rs[$w]=Rs[hT]=Rs[fT]=Rs[Ww]=Rs[pT]=!1;function rP(n){return function(r){return n(r)}}var ST=Object.prototype,_T=ST.toString;function AT(n){return TT(n)&&Jb(n.length)&&!!Rs[_T.call(n)]}function Jb(n){return typeof n=="number"&&n>-1&&n%1===0&&n<=hd}function TT(n){return!!n&&(0,ja.Z)(n)==="object"}var Yw=AT;function Kx(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function Kw(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Kx(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Kx(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function Yg(n){var r=MT();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function MT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var OT=function(n){(0,wa.Z)(i,n);var r=Yg(i);function i(s){var a;return(0,dr.Z)(this,i),a=r.call(this,s),a.dirty=!0,a.attributes=[],a.indices=void 0,a.indicesBuffer=void 0,a.vertexCount=0,a.maxInstancedCount=void 0,a.aabb=void 0,a.entity=void 0,Object.assign((0,is.Z)(a),s),a}return(0,Or.Z)(i,[{key:"setAttribute",value:function(a,u,h,p){var g=this.attributes.find(function(y){return y.name===a});return g?(g.data=u,g.dirty=!0):this.attributes.push(Kw(Kw({dirty:!0,name:a,data:u},h),{},{bufferGetter:p})),this.dirty=!0,this}},{key:"setIndex",value:function(a){return this.indices=new Uint32Array(a.buffer?a.buffer:a),this.dirty=!0,this}},{key:"applyMatrix",value:function(a){var u=this.attributes.find(function(T){var O=T.name;return O==="position"}),h=this.attributes.find(function(T){var O=T.name;return O==="normal"});if(u&&(u.dirty=!0,u.data&&u.data.length))for(var p=0;p<u.data.length;p+=3){var g=$b(u.data[p],u.data[p+1],u.data[p+2],1);st(g,g,a),Yw(u.data)?u.data.set([g[0],g[1],g[2]],p):(u.data[p]=g[0],u.data[p+1]=g[1],u.data[p+2]=g[2])}if(h){var y=Ea.XL(Ea.Ue(),a);if(h.data&&h.data.length)for(var b=0;b<h.data.length;b+=3){var E=wt.al(h.data[b],h.data[b+1],h.data[b+2]);wt.kK(E,E,y),wt.Fv(E,E),Yw(h.data)?h.data.set([E[0],E[1],E[2]],b):(h.data[b]=E[0],h.data[b+1]=E[1],h.data[b+2]=E[2])}}}}]),i}(Vh),gt;(function(n){n[n.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",n[n.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",n[n.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n[n.ZERO=0]="ZERO",n[n.ONE=1]="ONE",n[n.SRC_COLOR=768]="SRC_COLOR",n[n.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",n[n.SRC_ALPHA=770]="SRC_ALPHA",n[n.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",n[n.DST_ALPHA=772]="DST_ALPHA",n[n.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",n[n.DST_COLOR=774]="DST_COLOR",n[n.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",n[n.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",n[n.FUNC_ADD=32774]="FUNC_ADD",n[n.BLEND_EQUATION=32777]="BLEND_EQUATION",n[n.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",n[n.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",n[n.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",n[n.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",n[n.MAX_EXT=32776]="MAX_EXT",n[n.MIN_EXT=32775]="MIN_EXT",n[n.BLEND_DST_RGB=32968]="BLEND_DST_RGB",n[n.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",n[n.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",n[n.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",n[n.CONSTANT_COLOR=32769]="CONSTANT_COLOR",n[n.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",n[n.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",n[n.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",n[n.BLEND_COLOR=32773]="BLEND_COLOR",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",n[n.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",n[n.STREAM_DRAW=35040]="STREAM_DRAW",n[n.STATIC_DRAW=35044]="STATIC_DRAW",n[n.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",n[n.BUFFER_SIZE=34660]="BUFFER_SIZE",n[n.BUFFER_USAGE=34661]="BUFFER_USAGE",n[n.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",n[n.FRONT=1028]="FRONT",n[n.BACK=1029]="BACK",n[n.FRONT_AND_BACK=1032]="FRONT_AND_BACK",n[n.CULL_FACE=2884]="CULL_FACE",n[n.BLEND=3042]="BLEND",n[n.DITHER=3024]="DITHER",n[n.STENCIL_TEST=2960]="STENCIL_TEST",n[n.DEPTH_TEST=2929]="DEPTH_TEST",n[n.SCISSOR_TEST=3089]="SCISSOR_TEST",n[n.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",n[n.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",n[n.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",n[n.NO_ERROR=0]="NO_ERROR",n[n.INVALID_ENUM=1280]="INVALID_ENUM",n[n.INVALID_VALUE=1281]="INVALID_VALUE",n[n.INVALID_OPERATION=1282]="INVALID_OPERATION",n[n.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",n[n.CW=2304]="CW",n[n.CCW=2305]="CCW",n[n.LINE_WIDTH=2849]="LINE_WIDTH",n[n.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",n[n.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",n[n.CULL_FACE_MODE=2885]="CULL_FACE_MODE",n[n.FRONT_FACE=2886]="FRONT_FACE",n[n.DEPTH_RANGE=2928]="DEPTH_RANGE",n[n.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",n[n.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",n[n.DEPTH_FUNC=2932]="DEPTH_FUNC",n[n.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",n[n.STENCIL_FUNC=2962]="STENCIL_FUNC",n[n.STENCIL_FAIL=2964]="STENCIL_FAIL",n[n.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",n[n.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",n[n.STENCIL_REF=2967]="STENCIL_REF",n[n.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",n[n.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",n[n.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",n[n.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",n[n.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",n[n.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",n[n.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",n[n.VIEWPORT=2978]="VIEWPORT",n[n.SCISSOR_BOX=3088]="SCISSOR_BOX",n[n.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",n[n.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",n[n.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",n[n.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",n[n.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",n[n.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",n[n.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",n[n.RED_BITS=3410]="RED_BITS",n[n.GREEN_BITS=3411]="GREEN_BITS",n[n.BLUE_BITS=3412]="BLUE_BITS",n[n.ALPHA_BITS=3413]="ALPHA_BITS",n[n.DEPTH_BITS=3414]="DEPTH_BITS",n[n.STENCIL_BITS=3415]="STENCIL_BITS",n[n.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",n[n.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",n[n.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",n[n.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",n[n.SAMPLES=32937]="SAMPLES",n[n.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",n[n.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",n[n.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",n[n.DONT_CARE=4352]="DONT_CARE",n[n.FASTEST=4353]="FASTEST",n[n.NICEST=4354]="NICEST",n[n.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.INT=5124]="INT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.ALPHA=6406]="ALPHA",n[n.RGB=6407]="RGB",n[n.RGBA=6408]="RGBA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",n[n.VERTEX_SHADER=35633]="VERTEX_SHADER",n[n.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",n[n.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",n[n.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",n[n.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",n[n.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",n[n.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",n[n.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",n[n.SHADER_TYPE=35663]="SHADER_TYPE",n[n.DELETE_STATUS=35712]="DELETE_STATUS",n[n.LINK_STATUS=35714]="LINK_STATUS",n[n.VALIDATE_STATUS=35715]="VALIDATE_STATUS",n[n.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",n[n.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",n[n.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",n[n.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",n[n.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",n[n.NEVER=512]="NEVER",n[n.LESS=513]="LESS",n[n.EQUAL=514]="EQUAL",n[n.LEQUAL=515]="LEQUAL",n[n.GREATER=516]="GREATER",n[n.NOTEQUAL=517]="NOTEQUAL",n[n.GEQUAL=518]="GEQUAL",n[n.ALWAYS=519]="ALWAYS",n[n.KEEP=7680]="KEEP",n[n.REPLACE=7681]="REPLACE",n[n.INCR=7682]="INCR",n[n.DECR=7683]="DECR",n[n.INVERT=5386]="INVERT",n[n.INCR_WRAP=34055]="INCR_WRAP",n[n.DECR_WRAP=34056]="DECR_WRAP",n[n.VENDOR=7936]="VENDOR",n[n.RENDERER=7937]="RENDERER",n[n.VERSION=7938]="VERSION",n[n.NEAREST=9728]="NEAREST",n[n.LINEAR=9729]="LINEAR",n[n.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",n[n.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",n[n.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",n[n.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",n[n.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",n[n.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",n[n.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",n[n.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE=5890]="TEXTURE",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n[n.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",n[n.TEXTURE0=33984]="TEXTURE0",n[n.TEXTURE1=33985]="TEXTURE1",n[n.TEXTURE2=33986]="TEXTURE2",n[n.TEXTURE3=33987]="TEXTURE3",n[n.TEXTURE4=33988]="TEXTURE4",n[n.TEXTURE5=33989]="TEXTURE5",n[n.TEXTURE6=33990]="TEXTURE6",n[n.TEXTURE7=33991]="TEXTURE7",n[n.TEXTURE8=33992]="TEXTURE8",n[n.TEXTURE9=33993]="TEXTURE9",n[n.TEXTURE10=33994]="TEXTURE10",n[n.TEXTURE11=33995]="TEXTURE11",n[n.TEXTURE12=33996]="TEXTURE12",n[n.TEXTURE13=33997]="TEXTURE13",n[n.TEXTURE14=33998]="TEXTURE14",n[n.TEXTURE15=33999]="TEXTURE15",n[n.TEXTURE16=34e3]="TEXTURE16",n[n.TEXTURE17=34001]="TEXTURE17",n[n.TEXTURE18=34002]="TEXTURE18",n[n.TEXTURE19=34003]="TEXTURE19",n[n.TEXTURE20=34004]="TEXTURE20",n[n.TEXTURE21=34005]="TEXTURE21",n[n.TEXTURE22=34006]="TEXTURE22",n[n.TEXTURE23=34007]="TEXTURE23",n[n.TEXTURE24=34008]="TEXTURE24",n[n.TEXTURE25=34009]="TEXTURE25",n[n.TEXTURE26=34010]="TEXTURE26",n[n.TEXTURE27=34011]="TEXTURE27",n[n.TEXTURE28=34012]="TEXTURE28",n[n.TEXTURE29=34013]="TEXTURE29",n[n.TEXTURE30=34014]="TEXTURE30",n[n.TEXTURE31=34015]="TEXTURE31",n[n.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",n[n.REPEAT=10497]="REPEAT",n[n.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n[n.FLOAT_VEC2=35664]="FLOAT_VEC2",n[n.FLOAT_VEC3=35665]="FLOAT_VEC3",n[n.FLOAT_VEC4=35666]="FLOAT_VEC4",n[n.INT_VEC2=35667]="INT_VEC2",n[n.INT_VEC3=35668]="INT_VEC3",n[n.INT_VEC4=35669]="INT_VEC4",n[n.BOOL=35670]="BOOL",n[n.BOOL_VEC2=35671]="BOOL_VEC2",n[n.BOOL_VEC3=35672]="BOOL_VEC3",n[n.BOOL_VEC4=35673]="BOOL_VEC4",n[n.FLOAT_MAT2=35674]="FLOAT_MAT2",n[n.FLOAT_MAT3=35675]="FLOAT_MAT3",n[n.FLOAT_MAT4=35676]="FLOAT_MAT4",n[n.SAMPLER_2D=35678]="SAMPLER_2D",n[n.SAMPLER_CUBE=35680]="SAMPLER_CUBE",n[n.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",n[n.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",n[n.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",n[n.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",n[n.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",n[n.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",n[n.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",n[n.COMPILE_STATUS=35713]="COMPILE_STATUS",n[n.LOW_FLOAT=36336]="LOW_FLOAT",n[n.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",n[n.HIGH_FLOAT=36338]="HIGH_FLOAT",n[n.LOW_INT=36339]="LOW_INT",n[n.MEDIUM_INT=36340]="MEDIUM_INT",n[n.HIGH_INT=36341]="HIGH_INT",n[n.FRAMEBUFFER=36160]="FRAMEBUFFER",n[n.RENDERBUFFER=36161]="RENDERBUFFER",n[n.RGBA4=32854]="RGBA4",n[n.RGB5_A1=32855]="RGB5_A1",n[n.RGB565=36194]="RGB565",n[n.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",n[n.STENCIL_INDEX=6401]="STENCIL_INDEX",n[n.STENCIL_INDEX8=36168]="STENCIL_INDEX8",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n[n.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",n[n.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",n[n.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",n[n.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",n[n.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",n[n.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",n[n.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",n[n.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",n[n.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",n[n.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",n[n.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",n[n.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",n[n.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",n[n.NONE=0]="NONE",n[n.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",n[n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",n[n.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",n[n.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",n[n.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",n[n.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",n[n.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",n[n.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",n[n.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",n[n.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",n[n.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",n[n.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",n[n.COPY_SRC=1]="COPY_SRC",n[n.COPY_DST=2]="COPY_DST",n[n.SAMPLED=4]="SAMPLED",n[n.STORAGE=8]="STORAGE",n[n.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(gt||(gt={}));var qw,Jw,Qw,eE,Qb,tE,nE,rE,PT=(qw=(0,z.b2)(),Jw=(0,z.f3)(rn.GeometryComponentManager),Qw=(0,z.f3)(rn.RenderEngine),qw(eE=(Qb=(rE=function(){function n(){(0,dr.Z)(this,n),Er(this,"geometry",tE,this),Er(this,"engine",nE,this)}return(0,Or.Z)(n,[{key:"execute",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){var a=this;return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:this.geometry.forEach(function(p,g){g.dirty&&(g.attributes.forEach(function(y){if(y.dirty&&y.data){if(!y.buffer)y.buffer=a.engine.createBuffer({data:y.data,type:gt.FLOAT});else{var b;(b=y.buffer)===null||b===void 0||b.subData({data:y.data,offset:0})}y.dirty=!1}}),g.indices&&(g.indicesBuffer?g.indicesBuffer.subData({data:g.indices,offset:0}):g.indicesBuffer=a.engine.createElements({data:g.indices,count:g.indices.length,type:gt.UNSIGNED_INT,usage:gt.STATIC_DRAW})),g.dirty=!1)});case 1:case"end":return h.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.geometry.forEach(function(i,s){s.indicesBuffer&&s.indicesBuffer.destroy(),s.attributes.forEach(function(a){a.buffer&&a.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},s=i.vertexCount,a=Tu();return this.geometry.create(a,{vertexCount:s})}},{key:"createInstancedBufferGeometry",value:function(i){var s=i.maxInstancedCount,a=i.vertexCount,u=Tu();return this.geometry.create(u,{maxInstancedCount:s,vertexCount:a})}}]),n}(),rE),tE=Cr(Qb.prototype,"geometry",[Jw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nE=Cr(Qb.prototype,"engine",[Qw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qb))||eE);function iE(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function oE(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?iE(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):iE(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function DT(n){var r=NT();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function NT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var IT=function(n){(0,wa.Z)(i,n);var r=DT(i);function i(s){var a;return(0,dr.Z)(this,i),a=r.call(this,s),a.vertexShaderGLSL=void 0,a.fragmentShaderGLSL=void 0,a.defines={},a.dirty=!0,a.uniforms=[],a.cull={enable:!0,face:gt.BACK},a.depth={enable:!0},a.blend=void 0,a.entity=void 0,a.type=void 0,Object.assign((0,is.Z)(a),s),a}return(0,Or.Z)(i,[{key:"setDefines",value:function(a){return this.defines=oE(oE({},this.defines),a),this}},{key:"setCull",value:function(a){return this.cull=a,this}},{key:"setDepth",value:function(a){return this.depth=a,this}},{key:"setBlend",value:function(a){return this.blend=a,this}},{key:"setUniform",value:function(a,u){var h=this;if(typeof a!="string")return Object.keys(a).forEach(function(g){return h.setUniform(g,a[g])}),this;var p=this.uniforms.find(function(g){return g.name===a});return p?(p.dirty=!0,p.data=u):this.uniforms.push({name:a,dirty:!0,data:u}),this.dirty=!0,this}}]),i}(Vh),sE,aE,cE,lE,uE,Nm,dE,qx,hE,fE;function pE(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function gE(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?pE(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):pE(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var vE=(sE=(0,z.b2)(),aE=(0,z.f3)(rn.MaterialComponentManager),cE=(0,z.f3)(rn.RenderEngine),lE=(0,z.f3)(rn.ShaderModuleService),sE(uE=(Nm=(fE=function(){function n(){(0,dr.Z)(this,n),Er(this,"material",dE,this),Er(this,"engine",qx,this),Er(this,"shaderModule",hE,this)}return(0,Or.Z)(n,[{key:"execute",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){return cr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},s)}));function i(){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(i){var s=Tu(),a=i.vertexShader,u=i.fragmentShader,h=[];if(!this.engine.supportWebGPU){var p="material-".concat(s);this.shaderModule.registerModule(p,{vs:i.vertexShader,fs:i.fragmentShader});var g=this.shaderModule.getModule(p);a=g.vs,u=g.fs,g.uniforms&&(h=Object.keys(g.uniforms).map(function(y){return{dirty:!0,name:y,data:g.uniforms[y]}}))}return this.material.create(s,gE(gE({vertexShaderGLSL:a,fragmentShaderGLSL:u},i),{},{uniforms:h}))}}]),n}(),fE),dE=Cr(Nm.prototype,"material",[aE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qx=Cr(Nm.prototype,"engine",[cE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hE=Cr(Nm.prototype,"shaderModule",[lE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nm))||uE);function mE(n){var r=RT();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function RT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var Jx;(function(n){n[n.Standard=0]="Standard"})(Jx||(Jx={}));var kT=function(n){(0,wa.Z)(i,n);var r=mE(i);function i(s){var a;return(0,dr.Z)(this,i),a=r.call(this,s),a.strategy=Jx.Standard,a.visibilityPlaneMask=0,a.visible=!1,Object.assign((0,is.Z)(a),s),a}return i}(Vh),Qx=function(){function n(r,i){(0,dr.Z)(this,n),this.center=void 0,this.halfExtents=void 0,this.min=wt.Ue(),this.max=wt.Ue(),this.update(r,i)}return(0,Or.Z)(n,[{key:"update",value:function(i,s){this.center=i||wt.Ue(),this.halfExtents=s||wt.al(.5,.5,.5),this.min=wt.lu(this.min,this.center,this.halfExtents),this.max=wt.IH(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(i,s){wt.IH(this.center,s,i),wt.bA(this.center,this.center,.5),wt.lu(this.halfExtents,s,i),wt.bA(this.halfExtents,this.halfExtents,.5),wt.JG(this.min,i),wt.JG(this.max,s)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(i){var s=this.center,a=s[0],u=s[1],h=s[2],p=this.halfExtents,g=p[0],y=p[1],b=p[2],E=a-g,T=a+g,O=u-y,N=u+y,k=h-b,B=h+b,$=i.center,X=$[0],ne=$[1],be=$[2],me=i.halfExtents,je=me[0],ot=me[1],ct=me[2],Xt=X-je,_t=X+je,Zt=ne-ot,at=ne+ot,Gn=be-ct,Rn=be+ct;Xt<E&&(E=Xt),_t>T&&(T=_t),Zt<O&&(O=Zt),at>N&&(N=at),Gn<k&&(k=Gn),Rn>B&&(B=Rn),s[0]=(E+T)*.5,s[1]=(O+N)*.5,s[2]=(k+B)*.5,p[0]=(T-E)*.5,p[1]=(N-O)*.5,p[2]=(B-k)*.5,this.min[0]=E,this.min[1]=O,this.min[2]=k,this.max[0]=T,this.max[1]=N,this.max[2]=B}},{key:"intersects",value:function(i){var s=this.getMax(),a=this.getMin(),u=i.getMax(),h=i.getMin();return a[0]<=u[0]&&s[0]>=h[0]&&a[1]<=u[1]&&s[1]>=h[1]&&a[2]<=u[2]&&s[2]>=h[2]}},{key:"containsPoint",value:function(i){var s=this.getMin(),a=this.getMax();return!(i[0]<s[0]||i[0]>a[0]||i[1]<s[1]||i[1]>a[1]||i[2]<s[2]||i[2]>a[2])}},{key:"getNegativeFarPoint",value:function(i){return i.pnVertexFlag===273?wt.JG(wt.Ue(),this.min):i.pnVertexFlag===272?wt.al(this.min[0],this.min[1],this.max[2]):i.pnVertexFlag===257?wt.al(this.min[0],this.max[1],this.min[2]):i.pnVertexFlag===256?wt.al(this.min[0],this.max[1],this.max[2]):i.pnVertexFlag===17?wt.al(this.max[0],this.min[1],this.min[2]):i.pnVertexFlag===16?wt.al(this.max[0],this.min[1],this.max[2]):i.pnVertexFlag===1?wt.al(this.max[0],this.max[1],this.min[2]):wt.al(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(i){return i.pnVertexFlag===273?wt.JG(wt.Ue(),this.max):i.pnVertexFlag===272?wt.al(this.max[0],this.max[1],this.min[2]):i.pnVertexFlag===257?wt.al(this.max[0],this.min[1],this.max[2]):i.pnVertexFlag===256?wt.al(this.max[0],this.min[1],this.min[2]):i.pnVertexFlag===17?wt.al(this.min[0],this.max[1],this.max[2]):i.pnVertexFlag===16?wt.al(this.min[0],this.max[1],this.min[2]):i.pnVertexFlag===1?wt.al(this.min[0],this.min[1],this.max[2]):wt.al(this.min[0],this.min[1],this.min[2])}}]),n}();function yE(n){var r=LT();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function LT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var bE=function(n){(0,wa.Z)(i,n);var r=yE(i);function i(s){var a;return(0,dr.Z)(this,i),a=r.call(this,s),a.material=void 0,a.geometry=void 0,a.aabb=new Qx,a.aabbDirty=!0,a.model=void 0,a.visible=!0,a.children=[],Object.assign((0,is.Z)(a),s),a}return i}(Vh),xE=function(){function n(r,i){(0,dr.Z)(this,n),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=r||0,this.normal=i||wt.al(0,1,0),this.updatePNVertexFlag()}return(0,Or.Z)(n,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(i){return wt.AK(i,this.normal)-this.distance}},{key:"normalize",value:function(){var i=1/wt.Zh(this.normal);wt.bA(this.normal,this.normal,i),this.distance*=i}},{key:"intersectsLine",value:function(i,s,a){var u=this.distanceToPoint(i),h=this.distanceToPoint(s),p=u/(u-h),g=p>=0&&p<=1;return g&&a&&wt.t7(a,i,s,p),g}}]),n}(),Kf;(function(n){n[n.OUTSIDE=4294967295]="OUTSIDE",n[n.INSIDE=0]="INSIDE",n[n.INDETERMINATE=2147483647]="INDETERMINATE"})(Kf||(Kf={}));var GT=function(){function n(r){if((0,dr.Z)(this,n),this.planes=[],r)this.planes=r;else for(var i=0;i<6;i++)this.planes.push(new xE)}return(0,Or.Z)(n,[{key:"extractFromVPMatrix",value:function(i){var s=(0,Xp.Z)(i,16),a=s[0],u=s[1],h=s[2],p=s[3],g=s[4],y=s[5],b=s[6],E=s[7],T=s[8],O=s[9],N=s[10],k=s[11],B=s[12],$=s[13],X=s[14],ne=s[15];wt.t8(this.planes[0].normal,p-a,E-g,k-T),this.planes[0].distance=-(ne-B),wt.t8(this.planes[1].normal,p+a,E+g,k+T),this.planes[1].distance=-(ne+B),wt.t8(this.planes[2].normal,p+u,E+y,k+O),this.planes[2].distance=-(ne+$),wt.t8(this.planes[3].normal,p-u,E-y,k-O),this.planes[3].distance=-(ne-$),wt.t8(this.planes[4].normal,p-h,E-b,k-N),this.planes[4].distance=-(ne-X),wt.t8(this.planes[5].normal,p+h,E+b,k+N),this.planes[5].distance=-(ne+X),this.planes.forEach(function(be){be.normalize(),be.updatePNVertexFlag()})}}]),n}();function FT(n){return typeof n=="number"}function iP(n){return n===void 0?0:n>360||n<-360?n%360:n}function BT(n,r,i){return isNumber(n)?vec3.fromValues(n,r,i):n.length===3?vec3.clone(n):vec3.fromValues(n[0],n[1],n[2])}function CE(n,r){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[4],r[4]=n[5],r[5]=n[6],r[6]=n[8],r[7]=n[9],r[8]=n[10],r}function zT(n){var r=(0,Xp.Z)(n,3),i=r[0],s=r[1],a=r[2],u=i+s*256+a*65536-1;return u}function oP(n){return[n+1&255,n+1>>8&255,n+1>>8>>8&255]}var wE,eC,tC,Kg,EE,nC,SE,Zp,rC,iC,oC,_E,AE,TE;function ME(n,r){var i;if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=UT(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function UT(n,r){if(!!n){if(typeof n=="string")return OE(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return OE(n,r)}}function OE(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var VT=(wE=(0,z.b2)(),eC=(0,z.f3)(rn.MeshComponentManager),tC=(0,z.f3)(rn.CullableComponentManager),Kg=(0,z.f3)(rn.GeometryComponentManager),EE=(0,z.f3)(rn.HierarchyComponentManager),nC=(0,z.f3)(rn.TransformComponentManager),wE(SE=(Zp=(TE=function(){function n(){(0,dr.Z)(this,n),Er(this,"mesh",rC,this),Er(this,"cullable",iC,this),Er(this,"geometry",oC,this),Er(this,"hierarchy",_E,this),Er(this,"transform",AE,this),this.planes=void 0}return(0,Or.Z)(n,[{key:"setFrustumPlanes",value:function(i){this.planes=i}},{key:"execute",value:function(){var r=(0,Wi.Z)(cr().mark(function s(a){var u,h,p,g,y,b,E,T,O,N,k,B,$,X,ne,be,me,je,ot,ct,Xt;return cr().wrap(function(Zt){for(;;)switch(Zt.prev=Zt.next){case 0:u=ME(a);try{for(u.s();!(h=u.n()).done;){p=h.value,g=p.getScene(),y=p.getCamera(),b=ME(g.getEntities());try{for(b.s();!(E=b.n()).done;)T=E.value,O=this.mesh.getComponentByEntity(T),O&&(N=this.hierarchy.getComponentByEntity(T),k=this.cullable.getComponentByEntity(T),B=O.geometry,$=this.transform.getComponentByEntity(T),B&&B.aabb&&$&&O.aabbDirty&&(X=$.worldTransform,ne=B.aabb,be=ne.center,me=ne.halfExtents,je=wt.fF(wt.Ue(),be,X),ot=CE(X,Ea.Ue()),ct=wt.kK(wt.Ue(),me,ot),O.aabb.update(je,ct),O.aabbDirty=!1),k&&B&&(Xt=this.cullable.getComponentByEntity(N?.parentID||-1),k.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(O.aabb,Xt?.visibilityPlaneMask||Kf.INDETERMINATE,this.planes||y.getFrustum().planes),k.visible=k.visibilityPlaneMask!==Kf.OUTSIDE))}catch(at){b.e(at)}finally{b.f()}}}catch(at){u.e(at)}finally{u.f()}case 2:case"end":return Zt.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(i,s,a){if(s===Kf.OUTSIDE||s===Kf.INSIDE)return s;for(var u=Kf.INSIDE,h=0,p=a.length;h<p;++h){var g=h<31?1<<h:0;if(!(h<31&&(s&g)===0)){var y=a[h],b=y.normal,E=y.distance;if(wt.AK(b,i.getNegativeFarPoint(a[h]))+E>0)return Kf.OUTSIDE;wt.AK(b,i.getPositiveFarPoint(a[h]))+E>0&&(u|=g)}}return u}}]),n}(),TE),rC=Cr(Zp.prototype,"mesh",[eC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iC=Cr(Zp.prototype,"cullable",[tC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oC=Cr(Zp.prototype,"geometry",[Kg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_E=Cr(Zp.prototype,"hierarchy",[EE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AE=Cr(Zp.prototype,"transform",[nC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zp))||SE);function Ql(){var n=new Va.WT(16);return Va.WT!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function jT(n){var r=new Va.WT(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}function sC(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n}function sP(n,r,i,s,a,u,h,p,g,y,b,E,T,O,N,k){var B=new glMatrix.ARRAY_TYPE(16);return B[0]=n,B[1]=r,B[2]=i,B[3]=s,B[4]=a,B[5]=u,B[6]=h,B[7]=p,B[8]=g,B[9]=y,B[10]=b,B[11]=E,B[12]=T,B[13]=O,B[14]=N,B[15]=k,B}function aP(n,r,i,s,a,u,h,p,g,y,b,E,T,O,N,k,B){return n[0]=r,n[1]=i,n[2]=s,n[3]=a,n[4]=u,n[5]=h,n[6]=p,n[7]=g,n[8]=y,n[9]=b,n[10]=E,n[11]=T,n[12]=O,n[13]=N,n[14]=k,n[15]=B,n}function PE(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function aC(n,r){if(n===r){var i=r[1],s=r[2],a=r[3],u=r[6],h=r[7],p=r[11];n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=i,n[6]=r[9],n[7]=r[13],n[8]=s,n[9]=u,n[11]=r[14],n[12]=a,n[13]=h,n[14]=p}else n[0]=r[0],n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=r[1],n[5]=r[5],n[6]=r[9],n[7]=r[13],n[8]=r[2],n[9]=r[6],n[10]=r[10],n[11]=r[14],n[12]=r[3],n[13]=r[7],n[14]=r[11],n[15]=r[15];return n}function e2(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=r[4],p=r[5],g=r[6],y=r[7],b=r[8],E=r[9],T=r[10],O=r[11],N=r[12],k=r[13],B=r[14],$=r[15],X=i*p-s*h,ne=i*g-a*h,be=i*y-u*h,me=s*g-a*p,je=s*y-u*p,ot=a*y-u*g,ct=b*k-E*N,Xt=b*B-T*N,_t=b*$-O*N,Zt=E*B-T*k,at=E*$-O*k,Gn=T*$-O*B,Rn=X*Gn-ne*at+be*Zt+me*_t-je*Xt+ot*ct;return Rn?(Rn=1/Rn,n[0]=(p*Gn-g*at+y*Zt)*Rn,n[1]=(a*at-s*Gn-u*Zt)*Rn,n[2]=(k*ot-B*je+$*me)*Rn,n[3]=(T*je-E*ot-O*me)*Rn,n[4]=(g*_t-h*Gn-y*Xt)*Rn,n[5]=(i*Gn-a*_t+u*Xt)*Rn,n[6]=(B*be-N*ot-$*ne)*Rn,n[7]=(b*ot-T*be+O*ne)*Rn,n[8]=(h*at-p*_t+y*ct)*Rn,n[9]=(s*_t-i*at-u*ct)*Rn,n[10]=(N*je-k*be+$*X)*Rn,n[11]=(E*be-b*je-O*X)*Rn,n[12]=(p*Xt-h*Zt-g*ct)*Rn,n[13]=(i*Zt-s*Xt+a*ct)*Rn,n[14]=(k*ne-N*me-B*X)*Rn,n[15]=(b*me-E*ne+T*X)*Rn,n):null}function HT(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=r[4],p=r[5],g=r[6],y=r[7],b=r[8],E=r[9],T=r[10],O=r[11],N=r[12],k=r[13],B=r[14],$=r[15];return n[0]=p*(T*$-O*B)-E*(g*$-y*B)+k*(g*O-y*T),n[1]=-(s*(T*$-O*B)-E*(a*$-u*B)+k*(a*O-u*T)),n[2]=s*(g*$-y*B)-p*(a*$-u*B)+k*(a*y-u*g),n[3]=-(s*(g*O-y*T)-p*(a*O-u*T)+E*(a*y-u*g)),n[4]=-(h*(T*$-O*B)-b*(g*$-y*B)+N*(g*O-y*T)),n[5]=i*(T*$-O*B)-b*(a*$-u*B)+N*(a*O-u*T),n[6]=-(i*(g*$-y*B)-h*(a*$-u*B)+N*(a*y-u*g)),n[7]=i*(g*O-y*T)-h*(a*O-u*T)+b*(a*y-u*g),n[8]=h*(E*$-O*k)-b*(p*$-y*k)+N*(p*O-y*E),n[9]=-(i*(E*$-O*k)-b*(s*$-u*k)+N*(s*O-u*E)),n[10]=i*(p*$-y*k)-h*(s*$-u*k)+N*(s*y-u*p),n[11]=-(i*(p*O-y*E)-h*(s*O-u*E)+b*(s*y-u*p)),n[12]=-(h*(E*B-T*k)-b*(p*B-g*k)+N*(p*T-g*E)),n[13]=i*(E*B-T*k)-b*(s*B-a*k)+N*(s*T-a*E),n[14]=-(i*(p*B-g*k)-h*(s*B-a*k)+N*(s*g-a*p)),n[15]=i*(p*T-g*E)-h*(s*T-a*E)+b*(s*g-a*p),n}function cP(n){var r=n[0],i=n[1],s=n[2],a=n[3],u=n[4],h=n[5],p=n[6],g=n[7],y=n[8],b=n[9],E=n[10],T=n[11],O=n[12],N=n[13],k=n[14],B=n[15],$=r*h-i*u,X=r*p-s*u,ne=r*g-a*u,be=i*p-s*h,me=i*g-a*h,je=s*g-a*p,ot=y*N-b*O,ct=y*k-E*O,Xt=y*B-T*O,_t=b*k-E*N,Zt=b*B-T*N,at=E*B-T*k;return $*at-X*Zt+ne*_t+be*Xt-me*ct+je*ot}function fd(n,r,i){var s=r[0],a=r[1],u=r[2],h=r[3],p=r[4],g=r[5],y=r[6],b=r[7],E=r[8],T=r[9],O=r[10],N=r[11],k=r[12],B=r[13],$=r[14],X=r[15],ne=i[0],be=i[1],me=i[2],je=i[3];return n[0]=ne*s+be*p+me*E+je*k,n[1]=ne*a+be*g+me*T+je*B,n[2]=ne*u+be*y+me*O+je*$,n[3]=ne*h+be*b+me*N+je*X,ne=i[4],be=i[5],me=i[6],je=i[7],n[4]=ne*s+be*p+me*E+je*k,n[5]=ne*a+be*g+me*T+je*B,n[6]=ne*u+be*y+me*O+je*$,n[7]=ne*h+be*b+me*N+je*X,ne=i[8],be=i[9],me=i[10],je=i[11],n[8]=ne*s+be*p+me*E+je*k,n[9]=ne*a+be*g+me*T+je*B,n[10]=ne*u+be*y+me*O+je*$,n[11]=ne*h+be*b+me*N+je*X,ne=i[12],be=i[13],me=i[14],je=i[15],n[12]=ne*s+be*p+me*E+je*k,n[13]=ne*a+be*g+me*T+je*B,n[14]=ne*u+be*y+me*O+je*$,n[15]=ne*h+be*b+me*N+je*X,n}function Im(n,r,i){var s=i[0],a=i[1],u=i[2],h,p,g,y,b,E,T,O,N,k,B,$;return r===n?(n[12]=r[0]*s+r[4]*a+r[8]*u+r[12],n[13]=r[1]*s+r[5]*a+r[9]*u+r[13],n[14]=r[2]*s+r[6]*a+r[10]*u+r[14],n[15]=r[3]*s+r[7]*a+r[11]*u+r[15]):(h=r[0],p=r[1],g=r[2],y=r[3],b=r[4],E=r[5],T=r[6],O=r[7],N=r[8],k=r[9],B=r[10],$=r[11],n[0]=h,n[1]=p,n[2]=g,n[3]=y,n[4]=b,n[5]=E,n[6]=T,n[7]=O,n[8]=N,n[9]=k,n[10]=B,n[11]=$,n[12]=h*s+b*a+N*u+r[12],n[13]=p*s+E*a+k*u+r[13],n[14]=g*s+T*a+B*u+r[14],n[15]=y*s+O*a+$*u+r[15]),n}function $T(n,r,i){var s=i[0],a=i[1],u=i[2];return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=r[3]*s,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=r[7]*a,n[8]=r[8]*u,n[9]=r[9]*u,n[10]=r[10]*u,n[11]=r[11]*u,n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n}function lP(n,r,i,s){var a=s[0],u=s[1],h=s[2],p=Math.hypot(a,u,h),g,y,b,E,T,O,N,k,B,$,X,ne,be,me,je,ot,ct,Xt,_t,Zt,at,Gn,Rn,Jn;return p<glMatrix.EPSILON?null:(p=1/p,a*=p,u*=p,h*=p,g=Math.sin(i),y=Math.cos(i),b=1-y,E=r[0],T=r[1],O=r[2],N=r[3],k=r[4],B=r[5],$=r[6],X=r[7],ne=r[8],be=r[9],me=r[10],je=r[11],ot=a*a*b+y,ct=u*a*b+h*g,Xt=h*a*b-u*g,_t=a*u*b-h*g,Zt=u*u*b+y,at=h*u*b+a*g,Gn=a*h*b+u*g,Rn=u*h*b-a*g,Jn=h*h*b+y,n[0]=E*ot+k*ct+ne*Xt,n[1]=T*ot+B*ct+be*Xt,n[2]=O*ot+$*ct+me*Xt,n[3]=N*ot+X*ct+je*Xt,n[4]=E*_t+k*Zt+ne*at,n[5]=T*_t+B*Zt+be*at,n[6]=O*_t+$*Zt+me*at,n[7]=N*_t+X*Zt+je*at,n[8]=E*Gn+k*Rn+ne*Jn,n[9]=T*Gn+B*Rn+be*Jn,n[10]=O*Gn+$*Rn+me*Jn,n[11]=N*Gn+X*Rn+je*Jn,r!==n&&(n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n)}function WT(n,r,i){var s=Math.sin(i),a=Math.cos(i),u=r[4],h=r[5],p=r[6],g=r[7],y=r[8],b=r[9],E=r[10],T=r[11];return r!==n&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[4]=u*a+y*s,n[5]=h*a+b*s,n[6]=p*a+E*s,n[7]=g*a+T*s,n[8]=y*a-u*s,n[9]=b*a-h*s,n[10]=E*a-p*s,n[11]=T*a-g*s,n}function XT(n,r,i){var s=Math.sin(i),a=Math.cos(i),u=r[0],h=r[1],p=r[2],g=r[3],y=r[8],b=r[9],E=r[10],T=r[11];return r!==n&&(n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=u*a-y*s,n[1]=h*a-b*s,n[2]=p*a-E*s,n[3]=g*a-T*s,n[8]=u*s+y*a,n[9]=h*s+b*a,n[10]=p*s+E*a,n[11]=g*s+T*a,n}function t2(n,r,i){var s=Math.sin(i),a=Math.cos(i),u=r[0],h=r[1],p=r[2],g=r[3],y=r[4],b=r[5],E=r[6],T=r[7];return r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=u*a+y*s,n[1]=h*a+b*s,n[2]=p*a+E*s,n[3]=g*a+T*s,n[4]=y*a-u*s,n[5]=b*a-h*s,n[6]=E*a-p*s,n[7]=T*a-g*s,n}function uP(n,r){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function dP(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=r[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function hP(n,r,i){var s=i[0],a=i[1],u=i[2],h=Math.hypot(s,a,u),p,g,y;return h<glMatrix.EPSILON?null:(h=1/h,s*=h,a*=h,u*=h,p=Math.sin(r),g=Math.cos(r),y=1-g,n[0]=s*s*y+g,n[1]=a*s*y+u*p,n[2]=u*s*y-a*p,n[3]=0,n[4]=s*a*y-u*p,n[5]=a*a*y+g,n[6]=u*a*y+s*p,n[7]=0,n[8]=s*u*y+a*p,n[9]=a*u*y-s*p,n[10]=u*u*y+g,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}function DE(n,r){var i=Math.sin(r),s=Math.cos(r);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=i,n[7]=0,n[8]=0,n[9]=-i,n[10]=s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function fP(n,r){var i=Math.sin(r),s=Math.cos(r);return n[0]=s,n[1]=0,n[2]=-i,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=i,n[9]=0,n[10]=s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function ZT(n,r){var i=Math.sin(r),s=Math.cos(r);return n[0]=s,n[1]=i,n[2]=0,n[3]=0,n[4]=-i,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function qg(n,r,i){var s=r[0],a=r[1],u=r[2],h=r[3],p=s+s,g=a+a,y=u+u,b=s*p,E=s*g,T=s*y,O=a*g,N=a*y,k=u*y,B=h*p,$=h*g,X=h*y;return n[0]=1-(O+k),n[1]=E+X,n[2]=T-$,n[3]=0,n[4]=E-X,n[5]=1-(b+k),n[6]=N+B,n[7]=0,n[8]=T+$,n[9]=N-B,n[10]=1-(b+O),n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n}function NE(n,r){var i=new glMatrix.ARRAY_TYPE(3),s=-r[0],a=-r[1],u=-r[2],h=r[3],p=r[4],g=r[5],y=r[6],b=r[7],E=s*s+a*a+u*u+h*h;return E>0?(i[0]=(p*h+b*s+g*u-y*a)*2/E,i[1]=(g*h+b*a+y*s-p*u)*2/E,i[2]=(y*h+b*u+p*a-g*s)*2/E):(i[0]=(p*h+b*s+g*u-y*a)*2,i[1]=(g*h+b*a+y*s-p*u)*2,i[2]=(y*h+b*u+p*a-g*s)*2),qg(n,r,i),n}function Yp(n,r){return n[0]=r[12],n[1]=r[13],n[2]=r[14],n}function q0(n,r){var i=r[0],s=r[1],a=r[2],u=r[4],h=r[5],p=r[6],g=r[8],y=r[9],b=r[10];return n[0]=Math.hypot(i,s,a),n[1]=Math.hypot(u,h,p),n[2]=Math.hypot(g,y,b),n}function Rm(n,r){var i=new Va.WT(3);q0(i,r);var s=1/i[0],a=1/i[1],u=1/i[2],h=r[0]*s,p=r[1]*a,g=r[2]*u,y=r[4]*s,b=r[5]*a,E=r[6]*u,T=r[8]*s,O=r[9]*a,N=r[10]*u,k=h+b+N,B=0;return k>0?(B=Math.sqrt(k+1)*2,n[3]=.25*B,n[0]=(E-O)/B,n[1]=(T-g)/B,n[2]=(p-y)/B):h>b&&h>N?(B=Math.sqrt(1+h-b-N)*2,n[3]=(E-O)/B,n[0]=.25*B,n[1]=(p+y)/B,n[2]=(T+g)/B):b>N?(B=Math.sqrt(1+b-h-N)*2,n[3]=(T-g)/B,n[0]=(p+y)/B,n[1]=.25*B,n[2]=(E+O)/B):(B=Math.sqrt(1+N-h-b)*2,n[3]=(p-y)/B,n[0]=(T+g)/B,n[1]=(E+O)/B,n[2]=.25*B),n}function YT(n,r,i,s){var a=r[0],u=r[1],h=r[2],p=r[3],g=a+a,y=u+u,b=h+h,E=a*g,T=a*y,O=a*b,N=u*y,k=u*b,B=h*b,$=p*g,X=p*y,ne=p*b,be=s[0],me=s[1],je=s[2];return n[0]=(1-(N+B))*be,n[1]=(T+ne)*be,n[2]=(O-X)*be,n[3]=0,n[4]=(T-ne)*me,n[5]=(1-(E+B))*me,n[6]=(k+$)*me,n[7]=0,n[8]=(O+X)*je,n[9]=(k-$)*je,n[10]=(1-(E+N))*je,n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n}function pP(n,r,i,s,a){var u=r[0],h=r[1],p=r[2],g=r[3],y=u+u,b=h+h,E=p+p,T=u*y,O=u*b,N=u*E,k=h*b,B=h*E,$=p*E,X=g*y,ne=g*b,be=g*E,me=s[0],je=s[1],ot=s[2],ct=a[0],Xt=a[1],_t=a[2],Zt=(1-(k+$))*me,at=(O+be)*me,Gn=(N-ne)*me,Rn=(O-be)*je,Jn=(1-(T+$))*je,Li=(B+X)*je,Gi=(N+ne)*ot,Zr=(B-X)*ot,jo=(1-(T+k))*ot;return n[0]=Zt,n[1]=at,n[2]=Gn,n[3]=0,n[4]=Rn,n[5]=Jn,n[6]=Li,n[7]=0,n[8]=Gi,n[9]=Zr,n[10]=jo,n[11]=0,n[12]=i[0]+ct-(Zt*ct+Rn*Xt+Gi*_t),n[13]=i[1]+Xt-(at*ct+Jn*Xt+Zr*_t),n[14]=i[2]+_t-(Gn*ct+Li*Xt+jo*_t),n[15]=1,n}function IE(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=i+i,p=s+s,g=a+a,y=i*h,b=s*h,E=s*p,T=a*h,O=a*p,N=a*g,k=u*h,B=u*p,$=u*g;return n[0]=1-E-N,n[1]=b+$,n[2]=T-B,n[3]=0,n[4]=b-$,n[5]=1-y-N,n[6]=O+k,n[7]=0,n[8]=T+B,n[9]=O-k,n[10]=1-y-E,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function cC(n,r,i,s,a,u,h){var p=1/(i-r),g=1/(a-s),y=1/(u-h);return n[0]=u*2*p,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u*2*g,n[6]=0,n[7]=0,n[8]=(i+r)*p,n[9]=(a+s)*g,n[10]=(h+u)*y,n[11]=-1,n[12]=0,n[13]=0,n[14]=h*u*2*y,n[15]=0,n}function n2(n,r,i,s,a){var u=1/Math.tan(r/2),h;return n[0]=u/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,a!=null&&a!==1/0?(h=1/(s-a),n[10]=(a+s)*h,n[14]=2*a*s*h):(n[10]=-1,n[14]=-2*s),n}var lC=n2;function KT(n,r,i,s,a){var u=1/Math.tan(r/2),h;return n[0]=u/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,a!=null&&a!==1/0?(h=1/(s-a),n[10]=a*h,n[14]=a*s*h):(n[10]=-1,n[14]=-s),n}function gP(n,r,i,s){var a=Math.tan(r.upDegrees*Math.PI/180),u=Math.tan(r.downDegrees*Math.PI/180),h=Math.tan(r.leftDegrees*Math.PI/180),p=Math.tan(r.rightDegrees*Math.PI/180),g=2/(h+p),y=2/(a+u);return n[0]=g,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=y,n[6]=0,n[7]=0,n[8]=-((h-p)*g*.5),n[9]=(a-u)*y*.5,n[10]=s/(i-s),n[11]=-1,n[12]=0,n[13]=0,n[14]=s*i/(i-s),n[15]=0,n}function qT(n,r,i,s,a,u,h){var p=1/(r-i),g=1/(s-a),y=1/(u-h);return n[0]=-2*p,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*g,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*y,n[11]=0,n[12]=(r+i)*p,n[13]=(a+s)*g,n[14]=(h+u)*y,n[15]=1,n}var JT=qT;function RE(n,r,i,s,a,u,h){var p=1/(r-i),g=1/(s-a),y=1/(u-h);return n[0]=-2*p,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*g,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=y,n[11]=0,n[12]=(r+i)*p,n[13]=(a+s)*g,n[14]=u*y,n[15]=1,n}function QT(n,r,i,s){var a,u,h,p,g,y,b,E,T,O,N=r[0],k=r[1],B=r[2],$=s[0],X=s[1],ne=s[2],be=i[0],me=i[1],je=i[2];return Math.abs(N-be)<Va.Ib&&Math.abs(k-me)<Va.Ib&&Math.abs(B-je)<Va.Ib?PE(n):(b=N-be,E=k-me,T=B-je,O=1/Math.hypot(b,E,T),b*=O,E*=O,T*=O,a=X*T-ne*E,u=ne*b-$*T,h=$*E-X*b,O=Math.hypot(a,u,h),O?(O=1/O,a*=O,u*=O,h*=O):(a=0,u=0,h=0),p=E*h-T*u,g=T*a-b*h,y=b*u-E*a,O=Math.hypot(p,g,y),O?(O=1/O,p*=O,g*=O,y*=O):(p=0,g=0,y=0),n[0]=a,n[1]=p,n[2]=b,n[3]=0,n[4]=u,n[5]=g,n[6]=E,n[7]=0,n[8]=h,n[9]=y,n[10]=T,n[11]=0,n[12]=-(a*N+u*k+h*B),n[13]=-(p*N+g*k+y*B),n[14]=-(b*N+E*k+T*B),n[15]=1,n)}function VD(n,r,i,s){var a=r[0],u=r[1],h=r[2],p=s[0],g=s[1],y=s[2],b=a-i[0],E=u-i[1],T=h-i[2],O=b*b+E*E+T*T;O>0&&(O=1/Math.sqrt(O),b*=O,E*=O,T*=O);var N=g*T-y*E,k=y*b-p*T,B=p*E-g*b;return O=N*N+k*k+B*B,O>0&&(O=1/Math.sqrt(O),N*=O,k*=O,B*=O),n[0]=N,n[1]=k,n[2]=B,n[3]=0,n[4]=E*B-T*k,n[5]=T*N-b*B,n[6]=b*k-E*N,n[7]=0,n[8]=b,n[9]=E,n[10]=T,n[11]=0,n[12]=a,n[13]=u,n[14]=h,n[15]=1,n}function vP(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}function mP(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}function jD(n,r,i){return n[0]=r[0]+i[0],n[1]=r[1]+i[1],n[2]=r[2]+i[2],n[3]=r[3]+i[3],n[4]=r[4]+i[4],n[5]=r[5]+i[5],n[6]=r[6]+i[6],n[7]=r[7]+i[7],n[8]=r[8]+i[8],n[9]=r[9]+i[9],n[10]=r[10]+i[10],n[11]=r[11]+i[11],n[12]=r[12]+i[12],n[13]=r[13]+i[13],n[14]=r[14]+i[14],n[15]=r[15]+i[15],n}function yP(n,r,i){return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n[2]=r[2]-i[2],n[3]=r[3]-i[3],n[4]=r[4]-i[4],n[5]=r[5]-i[5],n[6]=r[6]-i[6],n[7]=r[7]-i[7],n[8]=r[8]-i[8],n[9]=r[9]-i[9],n[10]=r[10]-i[10],n[11]=r[11]-i[11],n[12]=r[12]-i[12],n[13]=r[13]-i[13],n[14]=r[14]-i[14],n[15]=r[15]-i[15],n}function bP(n,r,i){return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n[4]=r[4]*i,n[5]=r[5]*i,n[6]=r[6]*i,n[7]=r[7]*i,n[8]=r[8]*i,n[9]=r[9]*i,n[10]=r[10]*i,n[11]=r[11]*i,n[12]=r[12]*i,n[13]=r[13]*i,n[14]=r[14]*i,n[15]=r[15]*i,n}function eM(n,r,i,s){return n[0]=r[0]+i[0]*s,n[1]=r[1]+i[1]*s,n[2]=r[2]+i[2]*s,n[3]=r[3]+i[3]*s,n[4]=r[4]+i[4]*s,n[5]=r[5]+i[5]*s,n[6]=r[6]+i[6]*s,n[7]=r[7]+i[7]*s,n[8]=r[8]+i[8]*s,n[9]=r[9]+i[9]*s,n[10]=r[10]+i[10]*s,n[11]=r[11]+i[11]*s,n[12]=r[12]+i[12]*s,n[13]=r[13]+i[13]*s,n[14]=r[14]+i[14]*s,n[15]=r[15]+i[15]*s,n}function xP(n,r){return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]&&n[4]===r[4]&&n[5]===r[5]&&n[6]===r[6]&&n[7]===r[7]&&n[8]===r[8]&&n[9]===r[9]&&n[10]===r[10]&&n[11]===r[11]&&n[12]===r[12]&&n[13]===r[13]&&n[14]===r[14]&&n[15]===r[15]}function HD(n,r){var i=n[0],s=n[1],a=n[2],u=n[3],h=n[4],p=n[5],g=n[6],y=n[7],b=n[8],E=n[9],T=n[10],O=n[11],N=n[12],k=n[13],B=n[14],$=n[15],X=r[0],ne=r[1],be=r[2],me=r[3],je=r[4],ot=r[5],ct=r[6],Xt=r[7],_t=r[8],Zt=r[9],at=r[10],Gn=r[11],Rn=r[12],Jn=r[13],Li=r[14],Gi=r[15];return Math.abs(i-X)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(X))&&Math.abs(s-ne)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(ne))&&Math.abs(a-be)<=glMatrix.EPSILON*Math.max(1,Math.abs(a),Math.abs(be))&&Math.abs(u-me)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(me))&&Math.abs(h-je)<=glMatrix.EPSILON*Math.max(1,Math.abs(h),Math.abs(je))&&Math.abs(p-ot)<=glMatrix.EPSILON*Math.max(1,Math.abs(p),Math.abs(ot))&&Math.abs(g-ct)<=glMatrix.EPSILON*Math.max(1,Math.abs(g),Math.abs(ct))&&Math.abs(y-Xt)<=glMatrix.EPSILON*Math.max(1,Math.abs(y),Math.abs(Xt))&&Math.abs(b-_t)<=glMatrix.EPSILON*Math.max(1,Math.abs(b),Math.abs(_t))&&Math.abs(E-Zt)<=glMatrix.EPSILON*Math.max(1,Math.abs(E),Math.abs(Zt))&&Math.abs(T-at)<=glMatrix.EPSILON*Math.max(1,Math.abs(T),Math.abs(at))&&Math.abs(O-Gn)<=glMatrix.EPSILON*Math.max(1,Math.abs(O),Math.abs(Gn))&&Math.abs(N-Rn)<=glMatrix.EPSILON*Math.max(1,Math.abs(N),Math.abs(Rn))&&Math.abs(k-Jn)<=glMatrix.EPSILON*Math.max(1,Math.abs(k),Math.abs(Jn))&&Math.abs(B-Li)<=glMatrix.EPSILON*Math.max(1,Math.abs(B),Math.abs(Li))&&Math.abs($-Gi)<=glMatrix.EPSILON*Math.max(1,Math.abs($),Math.abs(Gi))}var CP=null,eu=null,kE,LE,GE,FE,BE,tM,uC,zE,nM,UE,VE,jE,jh,rM,HE,iM,oM,pd,sh,$E,xl,WE,XE,ZE;function r2(n,r){var i;if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=sM(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function sM(n,r){if(!!n){if(typeof n=="string")return YE(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return YE(n,r)}}function YE(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var Kp=(kE=(0,z.b2)(),LE=(0,z.f3)(rn.MeshComponentManager),GE=(0,z.f3)(rn.GeometryComponentManager),FE=(0,z.f3)(rn.MaterialComponentManager),BE=(0,z.f3)(rn.CullableComponentManager),tM=(0,z.f3)(rn.TransformComponentManager),uC=(0,z.f3)(rn.HierarchyComponentManager),zE=(0,z.f3)(rn.Systems),nM=(0,z.t6)(rn.FrameGraphSystem),UE=(0,z.f3)(rn.RenderEngine),VE=(0,z.f3)(rn.ResourcePool),kE(jE=(jh=(ZE=XE=function(){function n(){var r=this;(0,dr.Z)(this,n),Er(this,"mesh",rM,this),Er(this,"geometry",HE,this),Er(this,"material",iM,this),Er(this,"cullable",oM,this),Er(this,"transform",pd,this),Er(this,"hierarchy",sh,this),Er(this,"frameGraphSystem",$E,this),Er(this,"engine",xl,this),Er(this,"resourcePool",WE,this),this.modelCache={},this.setup=function(i,s,a){var u=i.createRenderTarget(s,"color buffer",{width:1,height:1,usage:gt.RENDER_ATTACHMENT|gt.SAMPLED|gt.COPY_SRC});a.data={output:s.write(i,u)}},this.execute=function(){var i=(0,Wi.Z)(cr().mark(function s(a,u,h){var p,g,y,b,E,T;return cr().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:p=a.getResourceNode(u.data.output),g=r.resourcePool.getOrCreateResource(p.resource),y=r2(h),N.prev=3,y.s();case 5:if((b=y.n()).done){N.next=11;break}return E=b.value,N.next=9,r.initView(E);case 9:N.next=5;break;case 11:N.next=16;break;case 13:N.prev=13,N.t0=N.catch(3),y.e(N.t0);case 16:return N.prev=16,y.f(),N.finish(16);case 19:T=r.engine.getCanvas(),g.resize({width:T.width,height:T.height}),r.engine.setScissor({enable:!1}),r.engine.clear({framebuffer:g,color:h[0].getClearColor(),depth:1}),r.engine.useFramebuffer(g,function(){var k=r2(h),B;try{for(k.s();!(B=k.n()).done;){var $=B.value;r.renderView($)}}catch(X){k.e(X)}finally{k.f()}});case 24:case"end":return N.stop()}},s,null,[[3,13,16,19]])}));return function(s,a,u){return i.apply(this,arguments)}}()}return(0,Or.Z)(n,[{key:"renderView",value:function(i){var s=i.getScene(),a=i.getCamera(),u=a.getViewTransform(),h=fd(Ql(),a.getPerspective(),u);a.getFrustum().extractFromVPMatrix(h);var p=i.getViewport(),g=p.x,y=p.y,b=p.width,E=p.height;this.engine.viewport({x:g,y,width:b,height:E});var T=r2(s.getEntities()),O;try{for(T.s();!(O=T.n()).done;){var N=O.value;this.renderMesh(N,{camera:a,view:i,viewMatrix:u})}}catch(k){T.e(k)}finally{T.f()}}},{key:"renderMesh",value:function(i,s){var a=s.camera,u=s.view,h=s.viewMatrix,p=this.mesh.getComponentByEntity(i);if(!(!p||!p.visible)){var g=p.material,y=p.geometry;if(!(!y||y.dirty||!g)){var b=this.transform.getComponentByEntity(i),E=fd(Ql(),h,b.worldTransform),T=u.getViewport(),O=T.width,N=T.height;g.setUniform({projectionMatrix:a.getPerspective(),modelViewMatrix:E,modelMatrix:b.worldTransform,viewMatrix:h,cameraPosition:a.getPosition(),u_viewport:[O,N]}),p.model&&(p.model.draw({uniforms:g.uniforms.reduce(function(k,B){return k[B.name]=B.data,k},{})}),g.uniforms.forEach(function(k){k.dirty=!1}),g.dirty=!1)}}}},{key:"initMesh",value:function(){var r=(0,Wi.Z)(cr().mark(function s(a,u){var h,p,g,y,b,E,T,O;return cr().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(h=this.mesh.getComponentByEntity(a),h){k.next=3;break}return k.abrupt("return");case 3:if(p=h.material,g=h.geometry,!(!g||g.dirty||!p)){k.next=7;break}return k.abrupt("return");case 7:if(h.model){k.next=24;break}if(y="m-".concat(p.entity,"-g-").concat(g.entity),!this.modelCache[y]){k.next=12;break}return h.model=this.modelCache[y],k.abrupt("return");case 12:return p.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),b=this.engine,E=b.createModel,T=b.createAttribute,O={vs:p.vertexShaderGLSL,fs:p.fragmentShaderGLSL,defines:p.defines,attributes:g.attributes.reduce(function(B,$){return $.data&&$.buffer&&(B[$.name]=T({buffer:$.buffer,attributes:$.attributes,arrayStride:$.arrayStride,stepMode:$.stepMode,divisor:$.stepMode==="vertex"?0:1})),B},{}),uniforms:p.uniforms.reduce(function(B,$){return B[$.name]=$.data,B},{}),scissor:{enable:!0,box:function(){return u.getViewport()}}},p.cull&&(O.cull=p.cull),p.depth&&(O.depth=p.depth),p.blend&&(O.blend=p.blend),g.indicesBuffer&&(O.elements=g.indicesBuffer),g.maxInstancedCount&&(O.instances=g.maxInstancedCount,O.count=g.vertexCount||3),k.next=22,E(O);case 22:h.model=k.sent,this.modelCache[y]=h.model;case 24:case"end":return k.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"initView",value:function(){var r=(0,Wi.Z)(cr().mark(function s(a){var u,h,p,g;return cr().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:u=a.getScene(),h=r2(u.getEntities()),b.prev=2,h.s();case 4:if((p=h.n()).done){b.next=10;break}return g=p.value,b.next=8,this.initMesh(g,a);case 8:b.next=4;break;case 10:b.next=15;break;case 12:b.prev=12,b.t0=b.catch(2),h.e(b.t0);case 15:return b.prev=15,h.f(),b.finish(15);case 18:case"end":return b.stop()}},s,this,[[2,12,15,18]])}));function i(s){return r.apply(this,arguments)}return i}()}]),n}(),XE.IDENTIFIER="Render Pass",ZE),rM=Cr(jh.prototype,"mesh",[LE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),HE=Cr(jh.prototype,"geometry",[GE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iM=Cr(jh.prototype,"material",[FE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oM=Cr(jh.prototype,"cullable",[BE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pd=Cr(jh.prototype,"transform",[tM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sh=Cr(jh.prototype,"hierarchy",[uC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$E=Cr(jh.prototype,"frameGraphSystem",[zE,nM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xl=Cr(jh.prototype,"engine",[UE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),WE=Cr(jh.prototype,"resourcePool",[VE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jh))||jE),KE,qE,JE,QE,i2,eS,J0,tS,nS,dC,km,er,rS;function hC(n,r){var i;if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=iS(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function iS(n,r){if(!!n){if(typeof n=="string")return Lm(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Lm(n,r)}}function Lm(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var Q0={NONE:0,ENCODE:1,HIGHLIGHT:2},o2=(KE=(0,z.b2)(),qE=(0,z.f3)(rn.RenderEngine),JE=(0,z.f3)(rn.ResourcePool),QE=(0,z.f3)(rn.RenderPassFactory),i2=(0,z.f3)(rn.MeshComponentManager),KE(eS=(J0=(rS=er=function(){function n(){var r=this;(0,dr.Z)(this,n),Er(this,"engine",tS,this),Er(this,"resourcePool",nS,this),Er(this,"renderPassFactory",dC,this),Er(this,"mesh",km,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(i,s,a){var u=i.createRenderTarget(s,"picking fbo",{width:1,height:1});a.data={output:s.write(i,u)},s.hasSideEffect=!0},this.execute=function(){var i=(0,Wi.Z)(cr().mark(function s(a,u,h){var p,g,y;return cr().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(r.views=h,!r.alreadyInRendering){E.next=3;break}return E.abrupt("return");case 3:p=hC(h);try{for(y=function(){var O=g.value,N=O.getViewport(),k=N.width,B=N.height;r.alreadyInRendering=!0;var $=a.getResourceNode(u.data.output);r.pickingFBO=r.resourcePool.getOrCreateResource($.resource),r.pickingFBO.resize({width:k,height:B}),r.engine.useFramebuffer(r.pickingFBO,function(){r.engine.clear({framebuffer:r.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var X=r.renderPassFactory(Kp.IDENTIFIER),ne=[],be=O.getScene(),me=hC(be.getEntities()),je;try{for(me.s();!(je=me.n()).done;){var ot=je.value,ct=r.mesh.getComponentByEntity(ot),Xt=ct.material;Xt.setUniform("u_PickingStage",Q0.ENCODE),ne.push(ct)}}catch(_t){me.e(_t)}finally{me.f()}X.renderView(O),ne.forEach(function(_t){var Zt=_t.material;Zt.setUniform("u_PickingStage",Q0.HIGHLIGHT)}),r.alreadyInRendering=!1})},p.s();!(g=p.n()).done;)y()}catch(T){p.e(T)}finally{p.f()}case 5:case"end":return E.stop()}},s)}));return function(s,a,u){return i.apply(this,arguments)}}(),this.pick=function(i,s){var a=i.x,u=i.y,h=r.engine,p=h.readPixels,g=h.useFramebuffer,y=s.getViewport(),b=y.width,E=y.height,T=a*window.devicePixelRatio,O=u*window.devicePixelRatio;if(!(T>b||T<0||O>E||O<0)){var N,k;return g(r.pickingFBO,function(){N=p({x:Math.round(T),y:Math.round(E-(u+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:r.pickingFBO}),(N[0]!==0||N[1]!==0||N[2]!==0)&&(k=zT(N),r.highlightEnabled&&r.highlightPickedFeature(N,s))}),k}}}return(0,Or.Z)(n,[{key:"enableHighlight",value:function(i){this.highlightEnabled=i}},{key:"setHighlightColor",value:function(i){this.highlightColor=i}},{key:"highlightPickedFeature",value:function(i,s){if(i){var a=hC(s.getScene().getEntities()),u;try{for(a.s();!(u=a.n()).done;){var h=u.value,p=this.mesh.getComponentByEntity(h),g=p.material;g.setUniform("u_PickingStage",Q0.HIGHLIGHT),g.setUniform("u_PickingColor",[i[0],i[1],i[2]]),g.setUniform("u_HighlightColor",this.highlightColor)}}catch(y){a.e(y)}finally{a.f()}}}}]),n}(),er.IDENTIFIER="PixelPicking Pass",rS),tS=Cr(J0.prototype,"engine",[qE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nS=Cr(J0.prototype,"resourcePool",[JE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dC=Cr(J0.prototype,"renderPassFactory",[QE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),km=Cr(J0.prototype,"mesh",[i2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J0))||eS),s2,a2,Jg,qp,qf,io,tu,c2,fC,oS=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Gm=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Jp=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,Sa=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ev=(s2=(0,z.b2)(),a2=(0,z.f3)(rn.RenderEngine),Jg=(0,z.f3)(rn.ResourcePool),s2(qp=(qf=(fC=c2=function n(){var r=this;(0,dr.Z)(this,n),Er(this,"engine",io,this),Er(this,"resourcePool",tu,this),this.model=void 0,this.setup=function(i,s,a){var u=i.getPass(Kp.IDENTIFIER);if(u){var h=i.createRenderTarget(s,"render to screen",{width:1,height:1});a.data={input:s.read(u.data.output),output:s.write(i,h)}}},this.execute=function(){var i=(0,Wi.Z)(cr().mark(function s(a,u){var h,p,g,y,b,E,T;return cr().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(h=r.engine,p=h.createModel,g=h.createAttribute,y=h.createBuffer,r.model){N.next=6;break}return N.next=4,p({vs:r.engine.supportWebGPU?Sa:Gm,fs:r.engine.supportWebGPU?Jp:oS,attributes:{a_Position:g({buffer:y({data:[-4,-4,4,-4,0,4],type:gt.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:b=N.sent,r.model=b;case 6:E=a.getResourceNode(u.data.input),T=r.resourcePool.getOrCreateResource(E.resource),r.engine.useFramebuffer(null,function(){r.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),r.model.draw({uniforms:{u_Texture:T}})});case 9:case"end":return N.stop()}},s)}));return function(s,a){return i.apply(this,arguments)}}(),this.tearDown=function(){r.model=void 0}},c2.IDENTIFIER="Copy Pass",fC),io=Cr(qf.prototype,"engine",[a2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tu=Cr(qf.prototype,"resourcePool",[Jg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qf))||qp),l2,Fm,Qc,tv,u2,pC,Bm,Qg,zm,d2,Um,gd,Vm,nv=(l2=(0,z.b2)(),Fm=(0,z.f3)(rn.Systems),Qc=(0,z.t6)(rn.FrameGraphSystem),tv=(0,z.f3)(rn.RenderPassFactory),u2=(0,z.f3)(rn.ConfigService),pC=(0,z.f3)(rn.ResourcePool),l2(Bm=(Qg=(Vm=function(){function n(){(0,dr.Z)(this,n),Er(this,"frameGraphSystem",zm,this),Er(this,"renderPassFactory",d2,this),Er(this,"configService",Um,this),Er(this,"resourcePool",gd,this)}return(0,Or.Z)(n,[{key:"execute",value:function(){var r=(0,Wi.Z)(cr().mark(function s(a){var u,h,p,g,y,b,E,T,O;return cr().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:u=this.renderPassFactory(Kp.IDENTIFIER),h=u.setup,p=u.execute,g=this.frameGraphSystem.addPass(Kp.IDENTIFIER,h,p),y=this.renderPassFactory(ev.IDENTIFIER),b=y.setup,E=y.execute,T=y.tearDown,O=this.frameGraphSystem.addPass(ev.IDENTIFIER,b,E,T),this.frameGraphSystem.present(O.data.output);case 5:case"end":return k.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(i,s){var a=this.renderPassFactory(o2.IDENTIFIER);return a.pick(i,s)}}]),n}(),Vm),zm=Cr(Qg.prototype,"frameGraphSystem",[Fm,Qc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d2=Cr(Qg.prototype,"renderPassFactory",[tv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Um=Cr(Qg.prototype,"configService",[u2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gd=Cr(Qg.prototype,"resourcePool",[pC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qg))||Bm);function sS(n){var r=h2();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function h2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var aS=function(n){(0,wa.Z)(i,n);var r=sS(i);function i(s){var a;return(0,dr.Z)(this,i),a=r.call(this,s),a.parentID=void 0,Object.assign((0,is.Z)(a),s),a}return i}(Vh),jm,cS,gC,f2,Hm,e0,oo,p2,t0,rv,g2=(jm=(0,z.b2)(),cS=(0,z.f3)(rn.HierarchyComponentManager),gC=(0,z.f3)(rn.TransformComponentManager),f2=(0,z.f3)(rn.MeshComponentManager),jm(Hm=(e0=(rv=function(){function n(){(0,dr.Z)(this,n),Er(this,"hierarchy",oo,this),Er(this,"transform",p2,this),Er(this,"mesh",t0,this)}return(0,Or.Z)(n,[{key:"execute",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){return cr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return u.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var i=this;this.transform.forEach(function(s,a){(a.isDirty()||a.isLocalDirty())&&(i.setMeshAABBDirty(i.mesh.getComponentByEntity(s)),a.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var i=this;this.hierarchy.forEach(function(s,a){var u=i.transform.getComponentByEntity(s),h=i.transform.getComponentByEntity(a.parentID);u!==null&&h!==null&&u.updateTransformWithParent(h)})}},{key:"attach",value:function(i,s,a){this.hierarchy.contains(i)&&this.detach(i),this.hierarchy.create(i,{parentID:s});var u=this.mesh.getComponentByEntity(s);if(this.setMeshAABBDirty(u),u&&u.children.indexOf(i)===-1&&u.children.push(i),this.hierarchy.getCount()>1)for(var h=this.hierarchy.getCount()-1;h>0;--h)for(var p=this.hierarchy.getEntity(h),g=0;g<h;++g){var y=this.hierarchy.getComponent(g);if(y.parentID===p){this.hierarchy.moveItem(h,g),++h;break}}var b=this.hierarchy.getComponentByEntity(i),E=this.transform.getComponentByEntity(s);E===null&&(E=this.transform.create(s));var T=this.transform.getComponentByEntity(i);T===null&&(T=this.transform.create(i),E=this.transform.getComponentByEntity(s)),T.parent=E,!a&&E&&(T.matrixTransform(e2(Ql(),E.worldTransform)),T.updateTransform()),E&&T.updateTransformWithParent(E)}},{key:"detach",value:function(i){var s=this.hierarchy.getComponentByEntity(i);if(s!==null){var a=this.transform.getComponentByEntity(i);a!==null&&(a.parent=null,a.applyTransform()),this.hierarchy.removeKeepSorted(i);var u=this.mesh.getComponentByEntity(s.parentID);if(u){var h=u.children.indexOf(i);u.children.splice(h,1)}this.setMeshAABBDirty(u)}}},{key:"detachChildren",value:function(i){var s=this.mesh.getComponentByEntity(i);s&&(s.children=[]);for(var a=0;a<this.hierarchy.getCount();){var u;if(((u=this.hierarchy.getComponent(a))===null||u===void 0?void 0:u.parentID)===i){var h=this.hierarchy.getEntity(a);this.detach(h)}else++a}}},{key:"setMeshAABBDirty",value:function(i){i&&(i.aabbDirty=!0)}}]),n}(),rv),oo=Cr(e0.prototype,"hierarchy",[cS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p2=Cr(e0.prototype,"transform",[gC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t0=Cr(e0.prototype,"mesh",[f2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e0))||Hm);function tc(){var n=new Va.WT(4);return Va.WT!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function $D(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function iv(n,r,i){i=i*.5;var s=Math.sin(i);return n[0]=s*r[0],n[1]=s*r[1],n[2]=s*r[2],n[3]=Math.cos(i),n}function WD(n,r){var i=Math.acos(r[3])*2,s=Math.sin(i/2);return s>glMatrix.EPSILON?(n[0]=r[0]/s,n[1]=r[1]/s,n[2]=r[2]/s):(n[0]=1,n[1]=0,n[2]=0),i}function wP(n,r){var i=bC(n,r);return Math.acos(2*i*i-1)}function Mu(n,r,i){var s=r[0],a=r[1],u=r[2],h=r[3],p=i[0],g=i[1],y=i[2],b=i[3];return n[0]=s*b+h*p+a*y-u*g,n[1]=a*b+h*g+u*p-s*y,n[2]=u*b+h*y+s*g-a*p,n[3]=h*b-s*p-a*g-u*y,n}function lS(n,r,i){i*=.5;var s=r[0],a=r[1],u=r[2],h=r[3],p=Math.sin(i),g=Math.cos(i);return n[0]=s*g+h*p,n[1]=a*g+u*p,n[2]=u*g-a*p,n[3]=h*g-s*p,n}function ov(n,r,i){i*=.5;var s=r[0],a=r[1],u=r[2],h=r[3],p=Math.sin(i),g=Math.cos(i);return n[0]=s*g-u*p,n[1]=a*g+h*p,n[2]=u*g+s*p,n[3]=h*g-a*p,n}function EP(n,r,i){i*=.5;var s=r[0],a=r[1],u=r[2],h=r[3],p=Math.sin(i),g=Math.cos(i);return n[0]=s*g+a*p,n[1]=a*g-s*p,n[2]=u*g+h*p,n[3]=h*g-u*p,n}function uS(n,r){var i=r[0],s=r[1],a=r[2];return n[0]=i,n[1]=s,n[2]=a,n[3]=Math.sqrt(Math.abs(1-i*i-s*s-a*a)),n}function v2(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=Math.sqrt(i*i+s*s+a*a),p=Math.exp(u),g=h>0?p*Math.sin(h)/h:0;return n[0]=i*g,n[1]=s*g,n[2]=a*g,n[3]=p*Math.cos(h),n}function m2(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=Math.sqrt(i*i+s*s+a*a),p=h>0?Math.atan2(h,u)/h:0;return n[0]=i*p,n[1]=s*p,n[2]=a*p,n[3]=.5*Math.log(i*i+s*s+a*a+u*u),n}function SP(n,r,i){return m2(n,r),av(n,n,i),v2(n,n),n}function y2(n,r,i,s){var a=r[0],u=r[1],h=r[2],p=r[3],g=i[0],y=i[1],b=i[2],E=i[3],T,O,N,k,B;return O=a*g+u*y+h*b+p*E,O<0&&(O=-O,g=-g,y=-y,b=-b,E=-E),1-O>Va.Ib?(T=Math.acos(O),N=Math.sin(T),k=Math.sin((1-s)*T)/N,B=Math.sin(s*T)/N):(k=1-s,B=s),n[0]=k*a+B*g,n[1]=k*u+B*y,n[2]=k*h+B*b,n[3]=k*p+B*E,n}function dS(n){var r=glMatrix.RANDOM(),i=glMatrix.RANDOM(),s=glMatrix.RANDOM(),a=Math.sqrt(1-r),u=Math.sqrt(r);return n[0]=a*Math.sin(2*Math.PI*i),n[1]=a*Math.cos(2*Math.PI*i),n[2]=u*Math.sin(2*Math.PI*s),n[3]=u*Math.cos(2*Math.PI*s),n}function vC(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=i*i+s*s+a*a+u*u,p=h?1/h:0;return n[0]=-i*p,n[1]=-s*p,n[2]=-a*p,n[3]=u*p,n}function aM(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=r[3],n}function cM(n,r){var i=r[0]+r[4]+r[8],s;if(i>0)s=Math.sqrt(i+1),n[3]=.5*s,s=.5/s,n[0]=(r[5]-r[7])*s,n[1]=(r[6]-r[2])*s,n[2]=(r[1]-r[3])*s;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[a*3+a]&&(a=2);var u=(a+1)%3,h=(a+2)%3;s=Math.sqrt(r[a*3+a]-r[u*3+u]-r[h*3+h]+1),n[a]=.5*s,s=.5/s,n[3]=(r[u*3+h]-r[h*3+u])*s,n[u]=(r[u*3+a]+r[a*3+u])*s,n[h]=(r[h*3+a]+r[a*3+h])*s}return n}function b2(n,r,i,s){var a=.5*Math.PI/180;r*=a,i*=a,s*=a;var u=Math.sin(r),h=Math.cos(r),p=Math.sin(i),g=Math.cos(i),y=Math.sin(s),b=Math.cos(s);return n[0]=u*g*b-h*p*y,n[1]=h*p*b+u*g*y,n[2]=h*g*y-u*p*b,n[3]=h*g*b+u*p*y,n}function _P(n){return"quat("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}var mC=jx,yC=$b,$m=Wb,ji=Hx,sv=$x,hS=Mu,av=Yb,bC=Y,lM=ke,uM=Kb,n0=null,Ve=Yx,Ln=null,rr=D,ah=Dn,_a=nr,sa=function(){var n=wt.Ue(),r=wt.al(1,0,0),i=wt.al(0,1,0);return function(s,a,u){var h=wt.AK(a,u);return h<-.999999?(wt.kC(n,r,a),wt.Zh(n)<1e-6&&wt.kC(n,i,a),wt.Fv(n,n),iv(s,n,Math.PI),s):h>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(wt.kC(n,a,u),s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=1+h,rr(s,s))}}(),xC=function(){var n=tc(),r=tc();return function(i,s,a,u,h,p){return y2(n,s,h,p),y2(r,a,u,p),y2(i,n,r,2*p*(1-p)),i}}(),Cl=function(){var n=Ea.Ue();return function(r,i,s,a){return n[0]=s[0],n[3]=s[1],n[6]=s[2],n[1]=a[0],n[4]=a[1],n[7]=a[2],n[2]=-i[0],n[5]=-i[1],n[8]=-i[2],rr(r,cM(r,n))}}();function cv(n){var r=lv();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function lv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var Ou=function(n){(0,wa.Z)(i,n);var r=cv(i);function i(s){var a;return(0,dr.Z)(this,i),a=r.call(this,s),a.dirtyFlag=void 0,a.localDirtyFlag=void 0,a.parent=null,a.localPosition=wt.al(0,0,0),a.localRotation=yC(0,0,0,1),a.localScale=wt.al(1,1,1),a.localTransform=Ql(),a.position=wt.al(0,0,0),a.rotation=yC(0,0,0,1),a.scaling=wt.al(1,1,1),a.worldTransform=Ql(),a.matrixTransform=function(){var u=Ql();return function(h){fd(u,a.getLocalTransform(),h),q0(a.localScale,u),Yp(a.localPosition,u),Rm(a.localRotation,u)}}(),a.rotateRollPitchYaw=function(){var u=tc(),h=tc(),p=tc();return function(g,y,b){a.setDirty(),b2(u,g,0,0),b2(h,0,y,0),b2(p,0,0,b),Mu(a.localRotation,u,a.localRotation),Mu(a.localRotation,a.localRotation,h),Mu(a.localRotation,p,a.localRotation),rr(a.localRotation,a.localRotation)}}(),a.lerp=function(){var u=wt.Ue(),h=tc(),p=wt.Ue(),g=wt.Ue(),y=tc(),b=wt.Ue();return function(E,T,O){a.setDirty(),q0(u,E.worldTransform),Yp(p,E.worldTransform),Rm(h,E.worldTransform),q0(g,T.worldTransform),Yp(b,T.worldTransform),Rm(y,T.worldTransform),wt.t7(a.localScale,u,g,O),y2(a.localRotation,h,y,O),wt.t7(a.localPosition,p,b,O)}}(),a.translate=function(){var u=wt.Ue();return function(h){return wt.IH(u,a.getPosition(),h),a.setPosition(u),a.setDirty(!0),(0,is.Z)(a)}}(),a.translateLocal=function(){return function(u){return wt.VC(u,u,a.localRotation),wt.IH(a.localPosition,a.localPosition,u),a.setLocalDirty(!0),(0,is.Z)(a)}}(),a.setPosition=function(){var u=Ql();return function(h){return a.position=h,a.setLocalDirty(!0),a.parent===null?wt.JG(a.localPosition,h):(sC(u,a.parent.worldTransform),e2(u,u),wt.fF(a.localPosition,h,u)),(0,is.Z)(a)}}(),a.rotate=function(){var u=tc();return function(h){if(a.parent===null)Mu(a.localRotation,a.localRotation,h),rr(a.localRotation,a.localRotation);else{var p=a.getRotation(),g=a.parent.getRotation();$m(u,g),vC(u,u),Mu(u,u,h),Mu(a.localRotation,h,p),rr(a.localRotation,a.localRotation)}return a.setLocalDirty(),(0,is.Z)(a)}}(),a.rotateLocal=function(){return function(u){return Mu(a.localRotation,a.localRotation,u),rr(a.localRotation,a.localRotation),a.setLocalDirty(!0),(0,is.Z)(a)}}(),a.setRotation=function(){var u=tc();return function(h){return a.parent===null?$m(a.localRotation,h):($m(u,a.parent.getRotation()),vC(u,u),$m(a.localRotation,u),hS(a.localRotation,a.localRotation,h)),a.setLocalDirty(!0),(0,is.Z)(a)}}(),a}return(0,Or.Z)(i,[{key:"setLocalPosition",value:function(a){wt.JG(this.localPosition,a),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(a){wt.JG(this.localScale,a),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(a){return $m(this.localRotation,a),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;a?this.dirtyFlag|=i.DIRTY:this.dirtyFlag&=~i.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;a?(this.localDirtyFlag|=i.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~i.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(sC(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(a){fd(this.worldTransform,a.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),q0(this.localScale,this.worldTransform),Yp(this.localPosition,this.worldTransform),Rm(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=wt.al(0,0,0),this.localRotation=yC(0,0,0,1),this.localScale=wt.al(1,1,1)}},{key:"scaleLocal",value:function(a){return this.setLocalDirty(),wt.Jp(this.localScale,this.localScale,a),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(YT(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return Yp(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return Rm(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return q0(this.scaling,this.worldTransform),this.scaling}}]),i}(Vh);Ou.DIRTY=1<<0;var x2=M(84879),CC,wC,fS,EC,pS,gS,dM=(CC=(0,z.b2)(),wC=(0,z.f3)(rn.RenderEngine),CC(fS=(EC=(gS=function(){function n(){(0,dr.Z)(this,n),Er(this,"engine",pS,this),this.resourcePool={}}return(0,Or.Z)(n,[{key:"getOrCreateResource",value:function(i){if(!this.resourcePool[i.name]){var s=i.descriptor,a=s.width,u=s.height,h=s.usage;this.resourcePool[i.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:a,height:u,wrapS:gt.CLAMP_TO_EDGE,wrapT:gt.CLAMP_TO_EDGE,usage:h})})}return this.resourcePool[i.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),n}(),gS),pS=Cr(EC.prototype,"engine",[wC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),EC))||fS);function hM(n){var r=SC();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function SC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var fM=function(n){(0,wa.Z)(i,n);var r=hM(i);function i(s){var a;return(0,dr.Z)(this,i),a=r.call(this,s),a.name=void 0,a.name=s.name||"",a}return i}(Vh),_C,Wm,vS,Nr=(_C=(0,z.b2)(),_C(Wm=(vS=function(){function n(){(0,dr.Z)(this,n),this.config=void 0}return(0,Or.Z)(n,[{key:"get",value:function(){return this.config}},{key:"set",value:function(i){this.config=i}}]),n}(),vS))||Wm),ir,mS,yS;(function(n){n.PANSTART="PANSTART",n.PANEND="PANEND",n.PANMOVE="PANMOVE",n.PINCH="PINCH",n.KEYDOWN="KEYDOWN",n.KEYUP="KEYUP",n.HOVER="HOVER"})(yS||(yS={}));var bS=(ir=(0,z.b2)(),ir(mS=function(){function n(){(0,dr.Z)(this,n)}return(0,Or.Z)(n,[{key:"listen",value:function(i){}},{key:"on",value:function(i,s){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),n}())||mS);function C2(n){var r=0;switch(n){case"vec2":case"ivec2":r=2;break;case"vec3":case"ivec3":r=3;break;case"vec4":case"ivec4":case"mat2":r=4;break;case"mat3":r=9;break;case"mat4":r=16;break;default:}return r}var pM=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function w2(n){var r={};return n=n.replace(pM,function(i,s,a){var u=a.split(":"),h=u[0].trim(),p="";switch(u.length>1&&(p=u[1].trim()),s){case"bool":p=p==="true";break;case"float":case"int":p=Number(p);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":p?p=p.replace("[","").replace("]","").split(",").reduce(function(g,y){return g.push(Number(y.trim())),g},[]):p=new Array(C2(s)).fill(0);break;default:}return r[h]=p,"uniform ".concat(s," ").concat(h,`;
`)}),{content:n,uniforms:r}}function gM(n){return n.filter(function(r,i,s){return s.indexOf(r)===i})}var E2,Xm,bc;function S2(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function uv(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?S2(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):S2(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var xS=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,CS=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,wS=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,Zm=/precision\s+(high|low|medium)p\s+float/,ES=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,SS=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,_S=(E2=(0,z.b2)(),E2(Xm=(bc=function(){function n(){(0,dr.Z)(this,n),this.moduleCache={},this.rawContentCache={}}return(0,Or.Z)(n,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:CS,fs:xS}),this.registerModule("sdf2d",{vs:"",fs:wS})}},{key:"registerModule",value:function(i,s){if(!this.rawContentCache[i]){var a=s.vs,u=a===void 0?"":a,h=s.fs,p=h===void 0?"":h,g=s.uniforms,y=w2(u),b=y.content,E=y.uniforms,T=w2(p),O=T.content,N=T.uniforms;this.rawContentCache[i]={fs:O,uniforms:uv(uv(uv({},E),N),g),vs:b}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(i){var s=this;if(this.moduleCache[i])return this.moduleCache[i];var a=this.rawContentCache[i].vs||"",u=this.rawContentCache[i].fs||"",h=this.processModule(a,[],"vs"),p=h.content,g=h.includeList,y=this.processModule(u,[],"fs"),b=y.content,E=y.includeList,T=b,O=gM(g.concat(E).concat(i)).reduce(function(N,k){return uv(uv({},N),s.rawContentCache[k].uniforms)},{});return Zm.test(b)||(T=ES+b),this.moduleCache[i]={fs:T.trim(),uniforms:O,vs:p.trim()},this.moduleCache[i]}},{key:"processModule",value:function(i,s,a){var u=this,h=i.replace(SS,function(p,g){var y=g.split(" "),b=y[0].replace(/"/g,"");if(s.indexOf(b)>-1)return"";var E=u.rawContentCache[b][a];s.push(b);var T=u.processModule(E||"",s,a),O=T.content;return O});return{content:h,includeList:s}}}]),n}(),bc))||Xm),vd=new z.W2,_2=(0,x2.Z)(vd,!1),AS=function(r){var i=_2.lazyInject(r);return function(s,a,u){i.call(this,s,a),u&&(u.initializer=function(){return s[a]})}},vM=function(r){var i=_2.lazyMultiInject(r);return function(s,a,u){i.call(this,s,a),u&&(u.initializer=function(){return s[a]})}};vd.bind(rn.ShaderModuleService).to(_S).inSingletonScope(),vd.bind(rn.NameComponentManager).toConstantValue(new Yf(fM)),vd.bind(rn.HierarchyComponentManager).toConstantValue(new Yf(aS)),vd.bind(rn.TransformComponentManager).toConstantValue(new Yf(Ou)),vd.bind(rn.MeshComponentManager).toConstantValue(new Yf(bE)),vd.bind(rn.CullableComponentManager).toConstantValue(new Yf(kT)),vd.bind(rn.GeometryComponentManager).toConstantValue(new Yf(OT)),vd.bind(rn.MaterialComponentManager).toConstantValue(new Yf(IT));function Ym(){var n=new z.W2;return n.parent=vd,n.bind(rn.Systems).to(g2).inSingletonScope().whenTargetNamed(rn.SceneGraphSystem),n.bind(rn.Systems).to(Vx).inSingletonScope().whenTargetNamed(rn.FrameGraphSystem),n.bind(rn.Systems).to(VT).inSingletonScope().whenTargetNamed(rn.MeshSystem),n.bind(rn.Systems).to(PT).inSingletonScope().whenTargetNamed(rn.GeometrySystem),n.bind(rn.Systems).to(vE).inSingletonScope().whenTargetNamed(rn.MaterialSystem),n.bind(rn.Systems).to(nv).inSingletonScope().whenTargetNamed(rn.RendererSystem),n.bind(rn.ResourcePool).to(dM).inSingletonScope(),n.bind(rn.ConfigService).to(Nr).inSingletonScope(),n.bind(rn.InteractorService).to(bS).inSingletonScope(),n.bind(rn.RenderPass).to(Kp).inSingletonScope().whenTargetNamed(Kp.IDENTIFIER),n.bind(rn.RenderPass).to(ev).inSingletonScope().whenTargetNamed(ev.IDENTIFIER),n.bind(rn.RenderPass).to(o2).inSingletonScope().whenTargetNamed(o2.IDENTIFIER),n.bind(rn.RenderPassFactory).toFactory(function(r){return function(i){return r.container.getNamed(rn.RenderPass,i)}}),n}function AC(n){for(var r=new Qx,i=wt.al(n[0],n[1],n[2]),s=wt.al(n[0],n[1],n[2]),a=3;a<n.length;){var u=n[a++],h=n[a++],p=n[a++];u<i[0]&&(i[0]=u),h<i[1]&&(i[1]=h),p<i[2]&&(i[2]=p),u>s[0]&&(s[0]=u),h>s[1]&&(s[1]=h),p>s[2]&&(s[2]=p)}return r.setMinMax(i,s),r}var wl=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),AP=wt.Ue(),TS=null,nc=wt.Ue(),Km=wt.Ue(),qm=wt.Ue(),r0=wt.Ue(),A2=wt.Ue(),MS=null,OS=M(59518),mM=M(26199),yM=M(14156),bM=M(71468),Hh=M(48871),xM=M(9871),PS;(function(n){n.Normal="normal",n.PostProcessing="post-processing"})(PS||(PS={}));var nu=M(25612),TP=M(92777),CM=M(20159),rc=M(61622),MP=M(20499),OP=M(64851),El;(function(n){n.Void="Void",n.Boolean="Boolean",n.Float="Float",n.Uint32="Uint32",n.Int32="Int32",n.Vector="Vector",n.Vector2Float="vec2<f32>",n.Vector3Float="vec3<f32>",n.Vector4Float="vec4<f32>",n.Vector2Boolean="vec2<bool>",n.Vector3Boolean="vec3<bool>",n.Vector4Boolean="vec4<bool>",n.Vector2Uint="vec2<u32>",n.Vector3Uint="vec3<u32>",n.Vector4Uint="vec4<u32>",n.Vector2Int="vec2<i32>",n.Vector3Int="vec3<i32>",n.Vector4Int="vec4<i32>",n.Matrix="Matrix",n.Matrix3x3Float="mat3x3<f32>",n.Matrix4x4Float="mat4x4<i32>",n.Struct="Struct",n.FloatArray="Float[]",n.Vector4FloatArray="vec4<f32>[]"})(El||(El={}));var TC;(function(n){n.Program="Program",n.Identifier="Identifier",n.VariableDeclaration="VariableDeclaration",n.BlockStatement="BlockStatement",n.ReturnStatement="ReturnStatement",n.FunctionDeclaration="FunctionDeclaration",n.VariableDeclarator="VariableDeclarator",n.AssignmentExpression="AssignmentExpression",n.LogicalExpression="LogicalExpression",n.BinaryExpression="BinaryExpression",n.ArrayExpression="ArrayExpression",n.UnaryExpression="UnaryExpression",n.UpdateExpression="UpdateExpression",n.FunctionExpression="FunctionExpression",n.MemberExpression="MemberExpression",n.ConditionalExpression="ConditionalExpression",n.ExpressionStatement="ExpressionStatement",n.CallExpression="CallExpression",n.NumThreadStatement="NumThreadStatement",n.StorageStatement="StorageStatement",n.DoWhileStatement="DoWhileStatement",n.WhileStatement="WhileStatement",n.ForStatement="ForStatement",n.BreakStatement="BreakStatement",n.ContinueStatement="ContinueStatement",n.IfStatement="IfStatement",n.ImportedFunctionStatement="ImportedFunctionStatement"})(TC||(TC={}));var $h;(function(n){n.Input="Input",n.Output="Output",n.Uniform="Uniform",n.Workgroup="Workgroup",n.UniformConstant="UniformConstant",n.Image="Image",n.StorageBuffer="StorageBuffer",n.Private="Private",n.Function="Function"})($h||($h={}));var Jm;(function(n){n.GLSL100="GLSL100",n.GLSL450="GLSL450",n.WGSL="WGSL"})(Jm||(Jm={}));var DS="__DefineValuePlaceholder__";function T2(n){return typeof n=="number"}function Wh(n){return n===void 0?0:n>360||n<-360?n%360:n}function Qp(n,r,i){return T2(n)?wt.al(n,r,i):n.length===3?wt.d9(n):wt.al(n[0],n[1],n[2])}var MC=function(){function n(r,i){(0,dr.Z)(this,n),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=r,this.matrix=jT(i.matrix),this.right=wt.d9(i.right),this.up=wt.d9(i.up),this.forward=wt.d9(i.forward),this.position=wt.d9(i.position),this.focalPoint=wt.d9(i.focalPoint),this.distanceVector=wt.d9(i.distanceVector),this.azimuth=i.azimuth,this.elevation=i.elevation,this.roll=i.roll,this.relAzimuth=i.relAzimuth,this.relElevation=i.relElevation,this.relRoll=i.relRoll,this.dollyingStep=i.dollyingStep,this.distance=i.distance}return(0,Or.Z)(n,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(i){i.matrix=sC(i.matrix,this.matrix),i.right=wt.JG(i.right,this.right),i.up=wt.JG(i.up,this.up),i.forward=wt.JG(i.forward,this.forward),i.position=wt.JG(i.position,this.position),i.focalPoint=wt.JG(i.focalPoint,this.focalPoint),i.distanceVector=wt.JG(i.distanceVector,this.distanceVector),i.azimuth=this.azimuth,i.elevation=this.elevation,i.roll=this.roll,i.relAzimuth=this.relAzimuth,i.relElevation=this.relElevation,i.relRoll=this.relRoll,i.dollyingStep=this.dollyingStep,i.distance=this.distance}}]),n}(),OC,eg,M2,dv,Xh,Qm,O2,Uo;(function(n){n.ORBITING="ORBITING",n.EXPLORING="EXPLORING",n.TRACKING="TRACKING"})(Uo||(Uo={}));var P2;(function(n){n.DEFAULT="DEFAULT",n.ROTATIONAL="ROTATIONAL",n.TRANSLATIONAL="TRANSLATIONAL",n.CINEMATIC="CINEMATIC"})(P2||(P2={}));var i0;(function(n){n.ORTHOGRAPHIC="ORTHOGRAPHIC",n.PERSPECTIVE="PERSPECTIVE"})(i0||(i0={}));var Zh=Math.PI/180,tg=180/Math.PI,NS=(OC=(0,z.b2)(),eg=(0,z.f3)(rn.InteractorService),OC(M2=(dv=(O2=Qm=function(){function n(){(0,dr.Z)(this,n),this.matrix=Ql(),this.right=wt.al(1,0,0),this.up=wt.al(0,1,0),this.forward=wt.al(0,0,1),this.position=wt.al(0,0,1),this.focalPoint=wt.al(0,0,0),this.distanceVector=wt.al(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,Er(this,"interactor",Xh,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Ql(),this.view=void 0,this.following=void 0,this.type=Uo.EXPLORING,this.trackingMode=P2.DEFAULT,this.projectionMode=i0.PERSPECTIVE,this.frustum=new GT,this.landmarks=[],this.landmarkAnimationID=void 0}return(0,Or.Z)(n,[{key:"clone",value:function(){var i=new n;return i.setType(this.type,void 0),i.interactor=this.interactor,i}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(i,s){return this.type=i,this.type===Uo.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Uo.TRACKING&&s!==void 0&&this.setTrackingMode(s),this}},{key:"setProjectionMode",value:function(i){return this.projectionMode=i,this}},{key:"setTrackingMode",value:function(i){if(this.type!==Uo.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=i,this}},{key:"setWorldRotation",value:function(i){this.rotateWorld=i,this._getAngles()}},{key:"getViewTransform",value:function(){return e2(Ql(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(i){return this.matrix=i,this._update(),this}},{key:"setAspect",value:function(i){return this.setPerspective(this.near,this.far,this.fov,i),this}},{key:"setViewOffset",value:function(i,s,a,u,h,p){return this.aspect=i/s,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=i,this.view.fullHeight=s,this.view.offsetX=a,this.view.offsetY=u,this.view.width=h,this.view.height=p,this.projectionMode===i0.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===i0.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(i,s,a,u){return this.projectionMode=i0.PERSPECTIVE,this.fov=a,this.near=i,this.far=s,this.aspect=u,lC(this.perspective,this.fov*Zh,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(i,s,a,u,h,p){this.projectionMode=i0.ORTHOGRAPHIC,this.rright=s,this.left=i,this.top=a,this.bottom=u,this.near=h,this.far=p;var g=(this.rright-this.left)/(2*this.zoom),y=(this.top-this.bottom)/(2*this.zoom),b=(this.rright+this.left)/2,E=(this.top+this.bottom)/2,T=b-g,O=b+g,N=E+y,k=E-y;if(this.view!==void 0&&this.view.enabled){var B=(this.rright-this.left)/this.view.fullWidth/this.zoom,$=(this.top-this.bottom)/this.view.fullHeight/this.zoom;T+=B*this.view.offsetX,O=T+B*this.view.width,N-=$*this.view.offsetY,k=N-$*this.view.height}return JT(this.perspective,T,O,N,k,h,p),this}},{key:"setPosition",value:function(i,s,a){return this._setPosition(i,s,a),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(i,s,a){var u=wt.al(0,1,0);if(this.focalPoint=Qp(i,s,a),this.trackingMode===P2.CINEMATIC){var h=wt.$X(wt.Ue(),this.focalPoint,this.position);i=h[0],s=h[1],a=h[2];var p=wt.kE(h),g=Math.asin(s/p)*tg,y=90+Math.atan2(a,i)*tg,b=Ql();XT(b,b,y*Zh),WT(b,b,g*Zh),u=wt.fF(wt.Ue(),[0,1,0],b)}return e2(this.matrix,QT(Ql(),this.position,this.focalPoint,u)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(i){if(!(this.distance===i||i<0)){this.distance=i,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var s=wt.Ue();i=this.distance;var a=this.forward,u=this.focalPoint;return s[0]=i*a[0]+u[0],s[1]=i*a[1]+u[1],s[2]=i*a[2]+u[2],this._setPosition(s),this}}},{key:"setMaxDistance",value:function(i){return this.maxDistance=i,this}},{key:"setMinDistance",value:function(i){return this.minDistance=i,this}},{key:"changeAzimuth",value:function(i){return this.setAzimuth(this.azimuth+i),this}},{key:"changeElevation",value:function(i){return this.setElevation(this.elevation+i),this}},{key:"changeRoll",value:function(i){return this.setRoll(this.roll+i),this}},{key:"setAzimuth",value:function(i){return this.azimuth=Wh(i),this.computeMatrix(),this._getAxes(),this.type===Uo.ORBITING||this.type===Uo.EXPLORING?this._getPosition():this.type===Uo.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(i){return this.elevation=Wh(i),this.computeMatrix(),this._getAxes(),this.type===Uo.ORBITING||this.type===Uo.EXPLORING?this._getPosition():this.type===Uo.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(i){return this.roll=Wh(i),this.computeMatrix(),this._getAxes(),this.type===Uo.ORBITING||this.type===Uo.EXPLORING?this._getPosition():this.type===Uo.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(i,s,a){if(this.type===Uo.EXPLORING){i=Wh(i),s=Wh(s),a=Wh(a);var u=iv(tc(),[1,0,0],(this.rotateWorld?1:-1)*s*Zh),h=iv(tc(),[0,1,0],(this.rotateWorld?1:-1)*i*Zh),p=iv(tc(),[0,0,1],a*Zh),g=Mu(tc(),h,u);g=Mu(tc(),g,p);var y=IE(Ql(),g);Im(this.matrix,this.matrix,[0,0,-this.distance]),fd(this.matrix,this.matrix,y),Im(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+s)>90)return;this.relElevation=Wh(s),this.relAzimuth=Wh(i),this.relRoll=Wh(a),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Uo.ORBITING||this.type===Uo.EXPLORING?this._getPosition():this.type===Uo.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(i,s){var a=Qp(i,s,0),u=wt.d9(this.position);return wt.IH(u,u,wt.bA(wt.Ue(),this.right,a[0])),wt.IH(u,u,wt.bA(wt.Ue(),this.up,a[1])),this._setPosition(u),this}},{key:"dolly",value:function(i){var s=this.forward,a=wt.d9(this.position),u=i*this.dollyingStep,h=this.distance+i*this.dollyingStep;return u=Math.max(Math.min(h,this.maxDistance),this.minDistance)-this.distance,a[0]+=u*s[0],a[1]+=u*s[1],a[2]+=u*s[2],this._setPosition(a),this.type===Uo.ORBITING||this.type===Uo.EXPLORING?this._getDistance():this.type===Uo.TRACKING&&wt.IH(this.focalPoint,a,this.distanceVector),this}},{key:"createLandmark",value:function(i,s){var a=this.clone();a.setPosition(s.position),a.setFocalPoint(s.focalPoint),s.roll!==void 0&&a.setRoll(s.roll);var u=new MC(i,a);return this.landmarks.push(u),u}},{key:"setLandmark",value:function(i){var s=new MC(i,this);return this.landmarks.push(s),this}},{key:"gotoLandmark",value:function(i){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,u=this.landmarks.find(function(E){return E.name===i});if(u){if(a===0){u.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var h=u.getPosition(),p=u.getFocalPoint(),g=u.getRoll(),y,b=function E(T){y===void 0&&(y=T);var O=T-y,N=(1-Math.cos(O/a*Math.PI))/2,k=wt.Ue(),B=wt.Ue(),$=0;wt.t7(k,s.focalPoint,p,N),wt.t7(B,s.position,h,N),$=s.roll*(1-N)+g*N,s.setFocalPoint(k),s.setPosition(B),s.setRoll($),s.computeMatrix();var X=wt.TK(k,p)+wt.TK(B,h);if(!(X>.01)){s.setFocalPoint(k),s.setPosition(B),s.setRoll($),s.computeMatrix(),s.interactor.connect();return}O<a&&(s.landmarkAnimationID=window.requestAnimationFrame(E))};window.requestAnimationFrame(b)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var i,s,a=iv(tc(),[0,0,1],this.roll*Zh);PE(this.matrix),i=iv(tc(),[1,0,0],(this.rotateWorld&&this.type!==Uo.TRACKING||this.type===Uo.TRACKING?1:-1)*this.elevation*Zh),s=iv(tc(),[0,1,0],(this.rotateWorld&&this.type!==Uo.TRACKING||this.type===Uo.TRACKING?1:-1)*this.azimuth*Zh);var u=Mu(tc(),s,i);u=Mu(tc(),u,a);var h=IE(Ql(),u);this.type===Uo.ORBITING||this.type===Uo.EXPLORING?(Im(this.matrix,this.matrix,this.focalPoint),fd(this.matrix,this.matrix,h),Im(this.matrix,this.matrix,[0,0,this.distance])):this.type===Uo.TRACKING&&(Im(this.matrix,this.matrix,this.position),fd(this.matrix,this.matrix,h))}},{key:"_setPosition",value:function(i,s,a){this.position=Qp(i,s,a);var u=this.matrix;u[12]=this.position[0],u[13]=this.position[1],u[14]=this.position[2],u[15]=1}},{key:"_getAxes",value:function(){wt.JG(this.right,Qp(st(Zg(),[1,0,0,0],this.matrix))),wt.JG(this.up,Qp(st(Zg(),[0,1,0,0],this.matrix))),wt.JG(this.forward,Qp(st(Zg(),[0,0,1,0],this.matrix))),wt.Fv(this.right,this.right),wt.Fv(this.up,this.up),wt.Fv(this.forward,this.forward)}},{key:"_getAngles",value:function(){var i=this.distanceVector[0],s=this.distanceVector[1],a=this.distanceVector[2],u=wt.kE(this.distanceVector);if(u===0){this.elevation=0,this.azimuth=0;return}this.type===Uo.TRACKING?(this.elevation=Math.asin(s/u)*tg,this.azimuth=Math.atan2(-i,-a)*tg):this.rotateWorld?(this.elevation=Math.asin(s/u)*tg,this.azimuth=Math.atan2(-i,-a)*tg):(this.elevation=-Math.asin(s/u)*tg,this.azimuth=-Math.atan2(-i,-a)*tg)}},{key:"_getPosition",value:function(){wt.JG(this.position,Qp(st(Zg(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){wt.kK(this.distanceVector,[0,0,-this.distance],Ea.xO(Ea.Ue(),this.matrix)),wt.IH(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=wt.$X(wt.Ue(),this.focalPoint,this.position),this.distance=wt.kE(this.distanceVector),this.dollyingStep=this.distance/100}}]),n}(),Qm.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},O2),Xh=Cr(dv.prototype,"interactor",[eg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dv))||M2),IS,ey,ty,Ss,RS,ny,PC,Jf=(IS=(0,z.b2)(),ey=(0,z.f3)(rn.GeometryComponentManager),IS(ty=(Ss=(PC=ny=function(){function n(){(0,dr.Z)(this,n),this.config=void 0,Er(this,"geometry",RS,this),this.entity=void 0,this.component=void 0}return(0,Or.Z)(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(i){this.config=i}},{key:"setEntity",value:function(i){this.entity=i,this.component=this.geometry.create(i),this.component.entity=i,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),n}(),ny.BOX="box",ny.SPHERE="sphere",ny.PLANE="plane",ny.MERGED="merged",PC),RS=Cr(Ss.prototype,"geometry",[ey],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ss))||ty),Un=M(49469);function kS(){if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var LS={}.toString,GS=function(r,i){return LS.call(r)==="[object "+i+"]"},wM=GS,EM=function(n){return Array.isArray?Array.isArray(n):wM(n,"Array")},FS=9007199254740991,SM="[object Arguments]",_M="[object Array]",AM="[object Boolean]",BS="[object Date]",TM="[object Error]",zS="[object Function]",MM="[object Map]",OM="[object Number]",PM="[object Object]",DM="[object RegExp]",NM="[object Set]",IM="[object String]",RM="[object WeakMap]",kM="[object ArrayBuffer]",D2="[object DataView]",ng="[object Float32Array]",US="[object Float64Array]",VS="[object Int8Array]",jS="[object Int16Array]",LM="[object Int32Array]",GM="[object Uint8Array]",HS="[object Uint8ClampedArray]",FM="[object Uint16Array]",hv="[object Uint32Array]",ks={};ks[ng]=ks[US]=ks[VS]=ks[jS]=ks[LM]=ks[GM]=ks[HS]=ks[FM]=ks[hv]=!0,ks[SM]=ks[_M]=ks[kM]=ks[AM]=ks[D2]=ks[BS]=ks[TM]=ks[zS]=ks[MM]=ks[OM]=ks[PM]=ks[DM]=ks[NM]=ks[IM]=ks[RM]=!1;function PP(n){return function(r){return n(r)}}var BM=Object.prototype,zM=BM.toString;function UM(n){return jM(n)&&VM(n.length)&&!!ks[zM.call(n)]}function VM(n){return typeof n=="number"&&n>-1&&n%1===0&&n<=FS}function jM(n){return!!n&&(0,ja.Z)(n)==="object"}var $S=UM,WS,XS,DC,ZS,N2,YS,KS,Qf;function NC(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function qS(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?NC(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):NC(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var JS=(WS=(0,z.b2)(),XS=(0,z.f3)(rn.RenderEngine),DC=(0,z.f3)(rn.ConfigService),WS(ZS=(N2=(Qf=function(){function n(){(0,dr.Z)(this,n),Er(this,"engine",YS,this),Er(this,"configService",KS,this),this.entity=Tu(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,Or.Z)(n,[{key:"init",value:function(){var i=this.configService.get(),s=i.canvas,a=i.engineOptions;this.initPromise=this.engine.init(qS({canvas:s||kS(),swapChainFormat:Un.EV.BGRA8Unorm,antialiasing:!1},a))}},{key:"setBundle",value:function(i){this.compiledBundle=JSON.parse(JSON.stringify(i))}},{key:"setDispatch",value:function(i){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=i),this}},{key:"setMaxIteration",value:function(i){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=i),this}},{key:"setBinding",value:function(i,s){var a=this;if(typeof i=="string"){var u=T2(s)||$S(s)||EM(s);if(this.compiledBundle&&this.compiledBundle.context){var h=this.compiledBundle.context.defines.find(function(g){return g.name===i});if(h)return h.value=s,this;var p=this.compiledBundle.context.uniforms.find(function(g){return g.name===i});p&&(u?(p.data=s,p.isReferer=!1,p.storageClass===$h.Uniform?this.model&&this.model.updateUniform(i,s):this.model&&this.model.updateBuffer(i,s)):(p.isReferer=!0,p.data=s))}}else Object.keys(i).forEach(function(g){a.setBinding(g,i[g])});return this}},{key:"execute",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){var a=this,u,h,p=arguments;return cr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(u=p.length>0&&p[0]!==void 0?p[0]:1,!this.dirty){y.next=6;break}return this.compiledBundle.context&&(u>1?this.compiledBundle.context.maxIteration=u:this.compiledBundle.context.maxIteration++),y.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(b){var E=b.isReferer;return E}).forEach(function(b){var E=b.data,T=b.name;a.model.confirmInput(E.model,T)}),h=0;h<u;h++)this.model.run();return this.engine.endFrame(),y.abrupt("return",this);case 12:case"end":return y.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"getOutput",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){return cr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.model.readData());case 1:case"end":return u.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"compile",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){var a,u,h;return cr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.initPromise;case 2:return a=qS({},this.compiledBundle.context),u=this.engine.supportWebGPU?this.engine.useWGSL?Jm.WGSL:Jm.GLSL450:Jm.GLSL100,h=this.compiledBundle.shaders[u],a.defines.filter(function(y){return y.runtime}).forEach(function(y){var b="".concat(DS).concat(y.name);h=h.replace(b,"".concat(y.value))}),a.shader=h,a.uniforms.forEach(function(y){if(!y.data&&y.storageClass===$h.StorageBuffer){var b=1;y.type===El.FloatArray?b=1:y.type===El.Vector4FloatArray&&(b=4),y.data=new Float32Array(a.output.length*b).fill(0)}}),this.compiledBundle.context=a,g.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=g.sent;case 12:case"end":return g.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()}]),n}(),Qf),YS=Cr(N2.prototype,"engine",[XS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KS=Cr(N2.prototype,"configService",[DC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N2))||ZS),IC,QS,e_,RC,t_,n_,r_,i_=(IC=(0,z.b2)(),QS=(0,z.f3)(rn.MaterialComponentManager),IC(e_=(RC=(r_=n_=function(){function n(){(0,dr.Z)(this,n),this.config=void 0,Er(this,"material",t_,this),this.entity=void 0,this.component=void 0}return(0,Or.Z)(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(i){this.config=i}},{key:"setEntity",value:function(i,s){this.entity=i,this.component=this.material.create(i),this.component.entity=i,this.component.type=s,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),n}(),n_.BASIC="basic",r_),t_=Cr(RC.prototype,"material",[QS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),RC))||e_),o_,kC,LC,s_,a_,c_,Yh,fv,I2,l_,u_,d_,pv,h_,md=(o_=(0,z.b2)(),kC=(0,z.f3)(rn.MeshComponentManager),LC=(0,z.f3)(rn.CullableComponentManager),s_=(0,z.f3)(rn.TransformComponentManager),a_=(0,z.f3)(rn.Systems),c_=(0,z.t6)(rn.SceneGraphSystem),o_(Yh=(fv=(h_=pv=function(){function n(){(0,dr.Z)(this,n),this.attributes={},this.config=void 0,Er(this,"mesh",I2,this),Er(this,"cullable",l_,this),Er(this,"transform",u_,this),Er(this,"sceneGraphSystem",d_,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return(0,Or.Z)(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(i){this.config=i}},{key:"setEntity",value:function(i){this.entity=i,this.cullable.create(i),this.meshComponent=this.mesh.create(i),this.transformComponent=this.transform.create(i),this.onEntityCreated()}},{key:"setMaterial",value:function(i){return this.meshComponent.material=i,this}},{key:"setGeometry",value:function(i){return this.meshComponent.geometry=i,this}},{key:"setAttributes",value:function(i){var s=this;Object.keys(i).forEach(function(a){i[a]!==void 0&&i[a]!==s.attributes[a]&&(s.onAttributeChanged({name:a,data:i[a]}),s.attributes[a]=i[a])})}},{key:"setVisible",value:function(i){var s=this;return this.meshComponent.visible=i,this.meshComponent.children.forEach(function(a){var u=s.mesh.getComponentByEntity(a);u&&(u.visible=i)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(i){return this.sceneGraphSystem.attach(this.entity,i.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(i){var s=i.name,a=i.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(s),a)}},{key:"convertAttributeName2UniformName",value:function(i){return i}}]),n}(),pv.POINT="point",pv.LINE="line",pv.GRID="grid",h_),I2=Cr(fv.prototype,"mesh",[kC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l_=Cr(fv.prototype,"cullable",[LC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u_=Cr(fv.prototype,"transform",[s_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d_=Cr(fv.prototype,"sceneGraphSystem",[a_,c_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fv))||Yh),HM=M(81550),f_=M.n(HM),$M=function(){function n(r,i){(0,dr.Z)(this,n),this.attribute=void 0,this.buffer=void 0;var s=i.buffer,a=i.offset,u=i.stride,h=i.normalized,p=i.size,g=i.divisor;this.buffer=s,this.attribute={buffer:s.get(),offset:a||0,stride:u||0,normalized:h||!1,divisor:g||0},p&&(this.attribute.size=p)}return(0,Or.Z)(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(i){this.buffer.subData(i)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),Kh,ry,ep,yd,rg,xc,iy,R2,qh,o0,Ls,bd,vs,k2,WM=(Kh={},(0,kt.Z)(Kh,gt.POINTS,"points"),(0,kt.Z)(Kh,gt.LINES,"lines"),(0,kt.Z)(Kh,gt.LINE_LOOP,"line loop"),(0,kt.Z)(Kh,gt.LINE_STRIP,"line strip"),(0,kt.Z)(Kh,gt.TRIANGLES,"triangles"),(0,kt.Z)(Kh,gt.TRIANGLE_FAN,"triangle fan"),(0,kt.Z)(Kh,gt.TRIANGLE_STRIP,"triangle strip"),Kh),p_=(ry={},(0,kt.Z)(ry,gt.STATIC_DRAW,"static"),(0,kt.Z)(ry,gt.DYNAMIC_DRAW,"dynamic"),(0,kt.Z)(ry,gt.STREAM_DRAW,"stream"),ry),GC=(ep={},(0,kt.Z)(ep,gt.BYTE,"int8"),(0,kt.Z)(ep,gt.UNSIGNED_INT,"int16"),(0,kt.Z)(ep,gt.INT,"int32"),(0,kt.Z)(ep,gt.UNSIGNED_BYTE,"uint8"),(0,kt.Z)(ep,gt.UNSIGNED_SHORT,"uint16"),(0,kt.Z)(ep,gt.UNSIGNED_INT,"uint32"),(0,kt.Z)(ep,gt.FLOAT,"float"),ep),XM=(yd={},(0,kt.Z)(yd,gt.ALPHA,"alpha"),(0,kt.Z)(yd,gt.LUMINANCE,"luminance"),(0,kt.Z)(yd,gt.LUMINANCE_ALPHA,"luminance alpha"),(0,kt.Z)(yd,gt.RGB,"rgb"),(0,kt.Z)(yd,gt.RGBA,"rgba"),(0,kt.Z)(yd,gt.RGBA4,"rgba4"),(0,kt.Z)(yd,gt.RGB5_A1,"rgb5 a1"),(0,kt.Z)(yd,gt.RGB565,"rgb565"),(0,kt.Z)(yd,gt.DEPTH_COMPONENT,"depth"),(0,kt.Z)(yd,gt.DEPTH_STENCIL,"depth stencil"),yd),ZM=(rg={},(0,kt.Z)(rg,gt.DONT_CARE,"dont care"),(0,kt.Z)(rg,gt.NICEST,"nice"),(0,kt.Z)(rg,gt.FASTEST,"fast"),rg),g_=(xc={},(0,kt.Z)(xc,gt.NEAREST,"nearest"),(0,kt.Z)(xc,gt.LINEAR,"linear"),(0,kt.Z)(xc,gt.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,kt.Z)(xc,gt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,kt.Z)(xc,gt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,kt.Z)(xc,gt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),xc),v_=(iy={},(0,kt.Z)(iy,gt.REPEAT,"repeat"),(0,kt.Z)(iy,gt.CLAMP_TO_EDGE,"clamp"),(0,kt.Z)(iy,gt.MIRRORED_REPEAT,"mirror"),iy),YM=(R2={},(0,kt.Z)(R2,gt.NONE,"none"),(0,kt.Z)(R2,gt.BROWSER_DEFAULT_WEBGL,"browser"),R2),KM=(qh={},(0,kt.Z)(qh,gt.NEVER,"never"),(0,kt.Z)(qh,gt.ALWAYS,"always"),(0,kt.Z)(qh,gt.LESS,"less"),(0,kt.Z)(qh,gt.LEQUAL,"lequal"),(0,kt.Z)(qh,gt.GREATER,"greater"),(0,kt.Z)(qh,gt.GEQUAL,"gequal"),(0,kt.Z)(qh,gt.EQUAL,"equal"),(0,kt.Z)(qh,gt.NOTEQUAL,"notequal"),qh),m_=(o0={},(0,kt.Z)(o0,gt.FUNC_ADD,"add"),(0,kt.Z)(o0,gt.MIN_EXT,"min"),(0,kt.Z)(o0,gt.MAX_EXT,"max"),(0,kt.Z)(o0,gt.FUNC_SUBTRACT,"subtract"),(0,kt.Z)(o0,gt.FUNC_REVERSE_SUBTRACT,"reverse subtract"),o0),Jh=(Ls={},(0,kt.Z)(Ls,gt.ZERO,"zero"),(0,kt.Z)(Ls,gt.ONE,"one"),(0,kt.Z)(Ls,gt.SRC_COLOR,"src color"),(0,kt.Z)(Ls,gt.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,kt.Z)(Ls,gt.SRC_ALPHA,"src alpha"),(0,kt.Z)(Ls,gt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,kt.Z)(Ls,gt.DST_COLOR,"dst color"),(0,kt.Z)(Ls,gt.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,kt.Z)(Ls,gt.DST_ALPHA,"dst alpha"),(0,kt.Z)(Ls,gt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,kt.Z)(Ls,gt.CONSTANT_COLOR,"constant color"),(0,kt.Z)(Ls,gt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,kt.Z)(Ls,gt.CONSTANT_ALPHA,"constant alpha"),(0,kt.Z)(Ls,gt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,kt.Z)(Ls,gt.SRC_ALPHA_SATURATE,"src alpha saturate"),Ls),y_=(bd={},(0,kt.Z)(bd,gt.NEVER,"never"),(0,kt.Z)(bd,gt.ALWAYS,"always"),(0,kt.Z)(bd,gt.LESS,"less"),(0,kt.Z)(bd,gt.LEQUAL,"lequal"),(0,kt.Z)(bd,gt.GREATER,"greater"),(0,kt.Z)(bd,gt.GEQUAL,"gequal"),(0,kt.Z)(bd,gt.EQUAL,"equal"),(0,kt.Z)(bd,gt.NOTEQUAL,"notequal"),bd),s0=(vs={},(0,kt.Z)(vs,gt.ZERO,"zero"),(0,kt.Z)(vs,gt.KEEP,"keep"),(0,kt.Z)(vs,gt.REPLACE,"replace"),(0,kt.Z)(vs,gt.INVERT,"invert"),(0,kt.Z)(vs,gt.INCR,"increment"),(0,kt.Z)(vs,gt.DECR,"decrement"),(0,kt.Z)(vs,gt.INCR_WRAP,"increment wrap"),(0,kt.Z)(vs,gt.DECR_WRAP,"decrement wrap"),vs),b_=(k2={},(0,kt.Z)(k2,gt.FRONT,"front"),(0,kt.Z)(k2,gt.BACK,"back"),k2),qM=function(){function n(r,i){(0,dr.Z)(this,n),this.buffer=void 0;var s=i.data,a=i.usage,u=i.type;this.buffer=r.buffer({data:s,usage:p_[a||gt.STATIC_DRAW],type:GC[u||gt.UNSIGNED_BYTE]})}return(0,Or.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(i){var s=i.data,a=i.offset;this.buffer.subdata(s,a)}}]),n}(),ms=M(93433),el=9007199254740991,aa="[object Arguments]",x_="[object Array]",JM="[object Boolean]",C_="[object Date]",QM="[object Error]",eO="[object Function]",tO="[object Map]",ig="[object Number]",Qh="[object Object]",FC="[object RegExp]",BC="[object Set]",nO="[object String]",rO="[object WeakMap]",iO="[object ArrayBuffer]",w_="[object DataView]",oO="[object Float32Array]",sO="[object Float64Array]",aO="[object Int8Array]",cO="[object Int16Array]",lO="[object Int32Array]",uO="[object Uint8Array]",oy="[object Uint8ClampedArray]",og="[object Uint16Array]",dO="[object Uint32Array]",So={};So[oO]=So[sO]=So[aO]=So[cO]=So[lO]=So[uO]=So[oy]=So[og]=So[dO]=!0,So[aa]=So[x_]=So[iO]=So[JM]=So[w_]=So[C_]=So[QM]=So[eO]=So[tO]=So[ig]=So[Qh]=So[FC]=So[BC]=So[nO]=So[rO]=!1;function DP(n){return function(r){return n(r)}}var hO=Object.prototype,fO=hO.toString;function pO(n){return vO(n)&&gO(n.length)&&!!So[fO.call(n)]}function gO(n){return typeof n=="number"&&n>-1&&n%1===0&&n<=el}function vO(n){return!!n&&(0,ja.Z)(n)==="object"}var zC=pO;function E_(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function S_(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?E_(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):E_(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var __=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,UC=0,sy=!1,mO=function(){function n(r,i){var s=this;(0,dr.Z)(this,n),this.reGl=r,this.context=i,this.entity=Tu(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var a={};this.context.uniforms.forEach(function(y){var b=y.name,E=y.type,T=y.data,O=y.isReferer,N=y.storageClass;if(N===$h.StorageBuffer){if(O)s.textureCache[b]={data:void 0},a["".concat(b,"Size")]=function(){return T.compiledBundle.context.output.textureSize};else{s.textureCache[b]=s.calcDataTexture(b,E,T);var k=s.textureCache[b],B=k.textureWidth,$=k.isOutput;a["".concat(b,"Size")]=[B,B],$&&(s.outputTextureName=b,s.context.needPingpong&&(s.outputTextureName="".concat(b,"Output"),s.textureCache[s.outputTextureName]=s.calcDataTexture(b,E,T)))}a[b]=function(){return sy&&console.log("[".concat(s.entity,"]: ").concat(b," ").concat(s.textureCache[b].id)),s.textureCache[b].texture}}else if(N===$h.Uniform){if(T&&(Array.isArray(T)||zC(T))&&T.length>16)throw new Error("invalid data type ".concat(E));a[b]=function(){return y.data}}});var u=this.getOuputDataTexture(),h=u.textureWidth,p=u.texelCount;a.u_OutputTextureSize=[h,h],a.u_OutputTexelCount=p,this.context.output.textureSize=[h,h];var g={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:a,vert:__,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(g)}return(0,Or.Z)(n,[{key:"run",value:function(){var i=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){i.computeCommand()}),sy&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){var a=this,u,h,p,g,y,b,E,T;return cr().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){u=a.reGl.read()}),!u){N.next=6;break}if(h=this.getOuputDataTexture(),p=h.originalDataLength,g=h.elementsPerTexel,y=h.typedArrayConstructor,b=y===void 0?Float32Array:y,E=[],g!==4)for(T=0;T<u.length;T+=4)g===1?E.push(u[T]):g===2?E.push(u[T],u[T+1]):E.push(u[T],u[T+1],u[T+2]);else E=u;return N.abrupt("return",new b(E.slice(0,p)));case 6:return N.abrupt("return",new Float32Array);case 7:case"end":return N.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"confirmInput",value:function(i,s){var a;this.entity===i.entity?(this.dynamicPingpong=!0,a=this):a=i,this.textureCache[s].id=a.getOuputDataTexture().id,this.textureCache[s].texture=a.getOuputDataTexture().texture,sy&&console.log("[".concat(this.entity,"]: confirm input ").concat(s," from model ").concat(a.entity,", ").concat(a.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=this.context.uniforms.find(function(y){var b=y.name;return b===i});if(u){var h=this.calcDataTexture(i,u.type,s),p=h.texture,g=h.data;this.textureCache[i].data=g,this.textureCache[i].texture=p}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var i=this.context.output.name;this.textureCache[i].id=this.getOuputDataTexture().id,this.textureCache[i].texture=this.getOuputDataTexture().texture}var s=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=s,sy&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var i=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=i}},{key:"cloneDataTexture",value:function(i){var s=i.data,a=i.textureWidth;return S_(S_({},i),{},{id:UC++,texture:this.reGl.texture({width:a,height:a,data:s,type:"float"})})}},{key:"calcDataTexture",value:function(i,s,a){var u=1;s===El.Vector4FloatArray&&(u=4);for(var h=[],p=0;p<a.length;p+=u)u===1?h.push(a[p],0,0,0):u===2?h.push(a[p],a[p+1],0,0):u===3?h.push(a[p],a[p+1],a[p+2],0):u===4&&h.push(a[p],a[p+1],a[p+2],a[p+3]);var g=a.length,y=Math.ceil(g/u),b=Math.ceil(Math.sqrt(y)),E=b*b;y<E&&h.push.apply(h,(0,ms.Z)(new Array((E-y)*4).fill(0)));var T=this.reGl.texture({width:b,height:b,data:h,type:"float"});return{id:UC++,data:h,originalDataLength:g,typedArrayConstructor:zC(a)?a.constructor:void 0,textureWidth:b,texture:T,texelCount:y,elementsPerTexel:u,isOutput:i===this.context.output.name}}}]),n}(),yO=function(){function n(r,i){(0,dr.Z)(this,n),this.elements=void 0;var s=i.data,a=i.usage,u=i.type,h=i.count;this.elements=r.elements({data:s,usage:p_[a||gt.STATIC_DRAW],type:GC[u||gt.UNSIGNED_BYTE],count:h})}return(0,Or.Z)(n,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(i){var s=i.data;this.elements.subdata(s)}},{key:"destroy",value:function(){this.elements.destroy()}}]),n}(),A_=function(){function n(r,i){(0,dr.Z)(this,n),this.framebuffer=void 0;var s=i.width,a=i.height,u=i.color,h=i.colors,p=i.depth,g=i.stencil,y={width:s,height:a};Array.isArray(h)&&(y.colors=h.map(function(b){return b.get()})),u&&typeof u!="boolean"&&(y.color=u.get()),this.framebuffer=r.framebuffer(y)}return(0,Or.Z)(n,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(i){var s=i.width,a=i.height;this.framebuffer.resize(s,a)}}]),n}();function a0(n){var r=(0,ja.Z)(n);return n!=null&&(r==="object"||r==="function")}function Pu(n){var r={};return Object.keys(n).forEach(function(i){VC(i,n[i],r,"")}),r}function VC(n,r,i,s){if(r===null||typeof r=="number"||typeof r=="boolean"||Array.isArray(r)&&typeof r[0]=="number"||zC(r)||r===""||r.resize!==void 0){i["".concat(s&&s+".").concat(n)]=r;return}a0(r)&&Object.keys(r).forEach(function(a){VC(a,r[a],i,"".concat(s&&s+".").concat(n))}),Array.isArray(r)&&r.forEach(function(a,u){Object.keys(a).forEach(function(h){VC(h,a[h],i,"".concat(s&&s+".").concat(n,"[").concat(u,"]"))})})}function gv(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function tl(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?gv(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):gv(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var NP=function(){function n(r,i){(0,dr.Z)(this,n),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=r;var s=i.vs,a=i.fs,u=i.defines,h=i.attributes,p=i.uniforms,g=i.primitive,y=i.count,b=i.elements,E=i.depth,T=i.blend,O=i.stencil,N=i.cull,k=i.instances,B=i.scissor,$=i.viewport,X={};p&&(this.uniforms=Pu(p),Object.keys(p).forEach(function(je){X[je]=r.prop(je)}));var ne={};Object.keys(h).forEach(function(je){ne[je]=h[je].get()});var be=u&&this.generateDefines(u)||"",me={attributes:ne,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(be,`
`).concat(a),uniforms:X,vert:`
`.concat(be,`
`).concat(s),primitive:WM[g===void 0?gt.TRIANGLES:g]};k&&(me.instances=k),y&&(me.count=y),b&&(me.elements=b.get()),B&&(me.scissor=B),$&&(me.viewport=$),this.initDepthDrawParams({depth:E},me),this.initBlendDrawParams({blend:T},me),this.initStencilDrawParams({stencil:O},me),this.initCullDrawParams({cull:N},me),this.drawCommand=r(me)}return(0,Or.Z)(n,[{key:"addUniforms",value:function(i){this.uniforms=tl(tl({},this.uniforms),Pu(i))}},{key:"draw",value:function(i){var s=tl(tl({},this.uniforms),Pu(i.uniforms||{})),a={};Object.keys(s).forEach(function(u){var h=(0,ja.Z)(s[u]);h==="boolean"||h==="number"||Array.isArray(s[u])||s[u].BYTES_PER_ELEMENT?a[u]=s[u]:h==="string"||(a[u]=s[u].get())}),this.drawCommand(a)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(i,s){var a=i.depth;a&&(s.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:KM[a.func||gt.LESS],range:a.range||[0,1]})}},{key:"initBlendDrawParams",value:function(i,s){var a=i.blend;if(a){var u=a.enable,h=a.func,p=a.equation,g=a.color,y=g===void 0?[0,0,0,0]:g;s.blend={enable:!!u,func:{srcRGB:Jh[h&&h.srcRGB||gt.SRC_ALPHA],srcAlpha:Jh[h&&h.srcAlpha||gt.SRC_ALPHA],dstRGB:Jh[h&&h.dstRGB||gt.ONE_MINUS_SRC_ALPHA],dstAlpha:Jh[h&&h.dstAlpha||gt.ONE_MINUS_SRC_ALPHA]},equation:{rgb:m_[p&&p.rgb||gt.FUNC_ADD],alpha:m_[p&&p.alpha||gt.FUNC_ADD]},color:y}}}},{key:"initStencilDrawParams",value:function(i,s){var a=i.stencil;if(a){var u=a.enable,h=a.mask,p=h===void 0?-1:h,g=a.func,y=g===void 0?{cmp:gt.ALWAYS,ref:0,mask:-1}:g,b=a.opFront,E=b===void 0?{fail:gt.KEEP,zfail:gt.KEEP,zpass:gt.KEEP}:b,T=a.opBack,O=T===void 0?{fail:gt.KEEP,zfail:gt.KEEP,zpass:gt.KEEP}:T;s.stencil={enable:!!u,mask:p,func:tl(tl({},y),{},{cmp:y_[y.cmp]}),opFront:{fail:s0[E.fail],zfail:s0[E.zfail],zpass:s0[E.zpass]},opBack:{fail:s0[O.fail],zfail:s0[O.zfail],zpass:s0[O.zpass]}}}}},{key:"initCullDrawParams",value:function(i,s){var a=i.cull;if(a){var u=a.enable,h=a.face,p=h===void 0?gt.BACK:h;s.cull={enable:!!u,face:b_[p]}}}},{key:"generateDefines",value:function(i){return Object.keys(i).map(function(s){return"#define ".concat(s," ").concat(Number(i[s]))}).join(`
`)}}]),n}(),T_=function(){function n(r,i){(0,dr.Z)(this,n),this.texture=void 0,this.width=void 0,this.height=void 0;var s=i.data,a=i.type,u=a===void 0?gt.UNSIGNED_BYTE:a,h=i.width,p=i.height,g=i.flipY,y=g===void 0?!1:g,b=i.format,E=b===void 0?gt.RGBA:b,T=i.mipmap,O=T===void 0?!1:T,N=i.wrapS,k=N===void 0?gt.CLAMP_TO_EDGE:N,B=i.wrapT,$=B===void 0?gt.CLAMP_TO_EDGE:B,X=i.aniso,ne=X===void 0?0:X,be=i.alignment,me=be===void 0?1:be,je=i.premultiplyAlpha,ot=je===void 0?!1:je,ct=i.mag,Xt=ct===void 0?gt.NEAREST:ct,_t=i.min,Zt=_t===void 0?gt.NEAREST:_t,at=i.colorSpace,Gn=at===void 0?gt.BROWSER_DEFAULT_WEBGL:at;this.width=h,this.height=p;var Rn={width:h,height:p,type:GC[u],format:XM[E],wrapS:v_[k],wrapT:v_[$],mag:g_[Xt],min:g_[Zt],alignment:me,flipY:y,colorSpace:YM[Gn],premultiplyAlpha:ot,aniso:ne};s&&(Rn.data=s),typeof O=="number"?Rn.mipmap=ZM[O]:typeof O=="boolean"&&(Rn.mipmap=O),this.texture=r.texture(Rn)}return(0,Or.Z)(n,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(i){var s=i.width,a=i.height;this.texture.resize(s,a),this.width=s,this.height=a}},{key:"destroy",value:function(){this.texture.destroy()}}]),n}(),Cc,jC,M_,L2=(Cc=(0,z.b2)(),Cc(jC=(M_=function(){function n(){var r=this;(0,dr.Z)(this,n),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var i=(0,Wi.Z)(cr().mark(function s(a){return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!a.uniforms){h.next=3;break}return h.next=3,Promise.all(Object.keys(a.uniforms).map(function(){var p=(0,Wi.Z)(cr().mark(function g(y){var b;return cr().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!(a.uniforms[y]&&a.uniforms[y].load!==void 0)){T.next=5;break}return T.next=3,a.uniforms[y].load();case 3:b=T.sent,a.uniforms[y]=b;case 5:case"end":return T.stop()}},g)}));return function(g){return p.apply(this,arguments)}}()));case 3:return h.abrupt("return",new NP(r.gl,a));case 4:case"end":return h.stop()}},s)}));return function(s){return i.apply(this,arguments)}}(),this.createAttribute=function(i){return new $M(r.gl,i)},this.createBuffer=function(i){return new qM(r.gl,i)},this.createElements=function(i){return new yO(r.gl,i)},this.createTexture2D=function(i){return new T_(r.gl,i)},this.createFramebuffer=function(i){return new A_(r.gl,i)},this.useFramebuffer=function(i,s){r.gl({framebuffer:i?i.get():null})(s)},this.createComputeModel=function(){var i=(0,Wi.Z)(cr().mark(function s(a){return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",new mO(r.gl,a));case 1:case"end":return h.stop()}},s)}));return function(s){return i.apply(this,arguments)}}(),this.clear=function(i){var s=i.color,a=i.depth,u=i.stencil,h=i.framebuffer,p=h===void 0?null:h,g={color:s,depth:a,stencil:u};g.framebuffer=p===null?p:p.get(),r.gl.clear(g)},this.setScissor=function(i){r.gl&&r.gl._gl&&(i.enable&&i.box?(r.gl._gl.enable(gt.SCISSOR_TEST),r.gl._gl.scissor(i.box.x,i.box.y,i.box.width,i.box.height)):r.gl._gl.disable(gt.SCISSOR_TEST),r.gl._refresh())},this.viewport=function(i){var s=i.x,a=i.y,u=i.width,h=i.height;r.gl&&r.gl._gl&&(r.gl._gl.viewport(s,a,u,h),r.gl._refresh())},this.readPixels=function(i){var s=i.framebuffer,a=i.x,u=i.y,h=i.width,p=i.height,g={x:a,y:u,width:h,height:p};return s&&(g.framebuffer=s.get()),r.gl.read(g)},this.getCanvas=function(){return r.$canvas},this.getGLContext=function(){return r.gl._gl},this.destroy=function(){r.gl&&(r.gl.destroy(),r.inited=!1)}}return(0,Or.Z)(n,[{key:"init",value:function(){var r=(0,Wi.Z)(cr().mark(function s(a){return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.inited){h.next=2;break}return h.abrupt("return");case 2:return this.$canvas=a.canvas,h.next=5,new Promise(function(p,g){f_()({canvas:a.canvas,attributes:{alpha:!0,antialias:a.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(b,E){(b||!E)&&g(b),p(E)}})});case 5:this.gl=h.sent,this.inited=!0;case 7:case"end":return h.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),n}(),M_))||jC);function ay(){return typeof window<"u"}function HC(n,r,i,s){if(!!ay()){var a=document.getElementsByTagName("head")[0],u=document.createElement("script");u.setAttribute("type","text/javascript"),u.setAttribute("src",n),s&&(u.id=s),u.onload=function(){r&&r()},u.onerror=function(h){i&&i("Unable to load script '".concat(n,"'"),h)},a.appendChild(u)}}function c0(n,r){return new Promise(function(i,s){HC(n,function(){i()},function(a,u){s(u)})})}var ef;function O_(){return Di.apply(this,arguments)}function Di(){return Di=(0,Wi.Z)(cr().mark(function n(){return cr().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!ef){i.next=2;break}return i.abrupt("return",ef);case 2:return i.next=4,c0("https://preview.babylonjs.com/glslang/glslang.js");case 4:return ef=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),i.abrupt("return",ef);case 6:case"end":return i.stop()}},n)})),Di.apply(this,arguments)}var $C=function(){function n(r,i){(0,dr.Z)(this,n),this.engine=r,this.options=i,this.attribute=void 0,this.buffer=void 0;var s=i,a=s.buffer,u=s.offset,h=s.stride,p=s.normalized,g=s.size,y=s.divisor,b=s.arrayStride,E=s.attributes,T=s.stepMode;this.buffer=a,this.attribute={buffer:a.get(),offset:u||0,stride:h||0,normalized:p||!1,divisor:y||0,arrayStride:b||0,attributes:E,stepMode:T||"vertex"},g&&(this.attribute.size=g)}return(0,Or.Z)(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(i){this.buffer.subData(i)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),vv=function(){function n(r,i){(0,dr.Z)(this,n),this.engine=r,this.options=i,this.buffer=void 0;var s=i,a=s.data,u=s.usage,h=s.type;this.buffer=this.createBuffer(a instanceof Array?new Float32Array(a):a,u||Un.FB.Vertex|Un.FB.CopyDst)}return(0,Or.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(i){var s=i.data,a=i.offset;this.setSubData(this.buffer,a,s instanceof Array?new Float32Array(s):s)}},{key:"createBuffer",value:function(i,s){var a=i.byteLength%4,u={size:i.byteLength+a,usage:s},h=this.engine.device.createBuffer(u);return this.setSubData(h,0,i),h}},{key:"setSubData",value:function(i,s,a){var u=wl?this.engine.device.getQueue():this.engine.device.defaultQueue;u.writeBuffer(i,s,a)}}]),n}();function P_(n){return typeof n=="number"}var D_=function(){function n(r,i){(0,dr.Z)(this,n),this.engine=r,this.context=i,this.entity=Tu(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return(0,Or.Z)(n,[{key:"init",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){var a=this,u,h,p,g,y,b,E;return cr().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:u=O.sent,h=u.computeStage,p=this.context.uniforms.filter(function(N){return N.storageClass===$h.StorageBuffer}),g=this.context.uniforms.filter(function(N){return N.storageClass===$h.Uniform}),y=g.length?1:0,this.bindGroupEntries=[],y&&(b=0,E=[],g.forEach(function(N){if(P_(N.data))a.uniformGPUBufferLayout.push({name:N.name,offset:b}),b+=4,E.push(N.data);else{var k,B=((k=N.data)===null||k===void 0?void 0:k.length)||1;B===3&&(B=4,N.data.push(0));var $=b/4%4;if($>0){var X=4-$;if(B>1&&B<=X)B===2&&(X===3&&(b+=4,E.push(0)),E.push.apply(E,(0,ms.Z)(N.data)),a.uniformGPUBufferLayout.push({name:N.name,offset:b}));else{for(var ne=0;ne<X;ne++)b+=4,E.push(0);E.push.apply(E,(0,ms.Z)(N.data)),a.uniformGPUBufferLayout.push({name:N.name,offset:b})}}b+=4*B}}),this.uniformBuffer=new vv(this.engine,{data:E instanceof Array?new Float32Array(E):E,usage:Un.FB.Uniform|Un.FB.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),p.forEach(function(N){if(N.data!==null&&(N.type===El.Vector4FloatArray||N.type===El.FloatArray)){var k;N.name===a.context.output.name?(k=new vv(a.engine,{data:isFinite(Number(N.data))?[N.data]:N.data,usage:Un.FB.Storage|Un.FB.CopyDst|Un.FB.CopySrc}),a.outputBuffer=k,a.context.output={name:N.name,length:isFinite(Number(N.data))?1:N.data.length,typedArrayConstructor:Float32Array,gpuBuffer:k.get()}):N.isReferer?N.data.model&&N.data.model.outputBuffer&&(k=N.data.model.outputBuffer):k=new vv(a.engine,{data:isFinite(Number(N.data))?[N.data]:N.data,usage:Un.FB.Storage|Un.FB.CopyDst|Un.FB.CopySrc}),a.vertexBuffers[N.name]=k,a.bindGroupEntries.push({binding:y,resource:{name:N.name,refer:k?void 0:N.data,buffer:k?k.get():void 0}}),y++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:h}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return O.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"destroy",value:function(){var i=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(s){return i.vertexBuffers[s].destroy()})}},{key:"readData",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){var a,u,h,p,g,y,b,E,T,O;return cr().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(a=this.context.output,!a){k.next=16;break}if(u=a.length,h=a.typedArrayConstructor,p=a.gpuBuffer,!p){k.next=16;break}return g=u*h.BYTES_PER_ELEMENT,y=this.engine.device.createBuffer({size:g,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),b=this.engine.device.createCommandEncoder(),b.copyBufferToBuffer(p,0,y,0,g),E=wl?this.engine.device.getQueue():this.engine.device.defaultQueue,E.submit([b.finish()]),k.next=12,y.mapAsync(Un.gc.Read);case 12:return T=y.getMappedRange(),O=new h(T.slice(0)),y.unmap(),k.abrupt("return",O);case 16:return k.abrupt("return",new Float32Array);case 17:case"end":return k.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"run",value:function(){if(this.engine.currentComputePass){var i;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(i=this.engine.currentComputePass).dispatch.apply(i,(0,ms.Z)(this.context.dispatch))}}},{key:"updateBuffer",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=this.vertexBuffers[i];u&&u.subData({data:s,offset:a})}},{key:"updateUniform",value:function(i,s){var a=this.uniformGPUBufferLayout.find(function(u){return u.name===i});a&&this.uniformBuffer.subData({data:Number.isFinite(s)?new Float32Array([s]):new Float32Array(s),offset:a.offset})}},{key:"confirmInput",value:function(i,s){var a=this.vertexBuffers[s],u=i.outputBuffer;if(a&&u&&a!==u){var h=this.engine.device.createCommandEncoder(),p=i.context.output,g=p.length,y=p.typedArrayConstructor,b=g*y.BYTES_PER_ELEMENT;h.copyBufferToBuffer(u.get(),0,a.get(),0,b);var E=wl?this.engine.device.getQueue():this.engine.device.defaultQueue;E.submit([h.finish()])}}},{key:"compileShaderToSpirV",value:function(i,s,a){return this.compileRawShaderToSpirV(a+i,s)}},{key:"compileRawShaderToSpirV",value:function(i,s){return this.engine.glslang.compileGLSL(i,s)}},{key:"compileComputePipelineStageDescriptor",value:function(){var r=(0,Wi.Z)(cr().mark(function s(a){var u,h;return cr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(u=a,h=`#version 450
`,this.engine.options.useWGSL){g.next=6;break}return g.next=5,this.compileShaderToSpirV(a,"compute",h);case 5:u=g.sent;case 6:return g.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:u,isWHLSL:wl}),entryPoint:"main"}});case 7:case"end":return g.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()}]),n}(),bO=function(){function n(r,i){(0,dr.Z)(this,n),this.engine=r,this.options=i,this.indexCount=void 0,this.buffer=void 0;var s=i,a=s.data,u=s.usage,h=s.type,p=s.count;this.indexCount=p||0,this.buffer=new vv(r,{data:a instanceof Array?new Uint16Array(a):a,usage:Un.FB.Index|Un.FB.CopyDst})}return(0,Or.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(i){this.buffer.subData(i)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),xO=function(){function n(r,i){(0,dr.Z)(this,n),this.engine=r,this.options=i,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var s=i,a=s.width,u=s.height,h=s.color,p=s.colors,g=s.depth,y=s.stencil;h&&(this.colorTexture=h),g&&(this.depthTexture=g)}return(0,Or.Z)(n,[{key:"get",value:function(){var i,s;return{color:(i=this.colorTexture)===null||i===void 0?void 0:i.get(),depth:(s=this.depthTexture)===null||s===void 0?void 0:s.get()}}},{key:"destroy",value:function(){var i,s;(i=this.colorTexture)===null||i===void 0||i.destroy(),(s=this.depthTexture)===null||s===void 0||s.destroy()}},{key:"resize",value:function(i){var s=i.width,a=i.height;if(s!==this.width||a!==this.height){var u,h;(u=this.colorTexture)===null||u===void 0||u.resize({width:s,height:a}),(h=this.depthTexture)===null||h===void 0||h.resize({width:s,height:a})}this.width=s,this.height=a}}]),n}(),tp,tf,Du,Sl,Ei,nf,mv,CO=(tp={},(0,kt.Z)(tp,gt.POINTS,Un.YV.PointList),(0,kt.Z)(tp,gt.LINES,Un.YV.LineList),(0,kt.Z)(tp,gt.LINE_LOOP,Un.YV.LineList),(0,kt.Z)(tp,gt.LINE_STRIP,Un.YV.LineStrip),(0,kt.Z)(tp,gt.TRIANGLES,Un.YV.TriangleList),(0,kt.Z)(tp,gt.TRIANGLE_FAN,Un.YV.TriangleList),(0,kt.Z)(tp,gt.TRIANGLE_STRIP,Un.YV.TriangleStrip),tp),Gs=(tf={},(0,kt.Z)(tf,gt.NEVER,Un.wb.Never),(0,kt.Z)(tf,gt.ALWAYS,Un.wb.Always),(0,kt.Z)(tf,gt.LESS,Un.wb.Less),(0,kt.Z)(tf,gt.LEQUAL,Un.wb.LessEqual),(0,kt.Z)(tf,gt.GREATER,Un.wb.Greater),(0,kt.Z)(tf,gt.GEQUAL,Un.wb.GreaterEqual),(0,kt.Z)(tf,gt.EQUAL,Un.wb.Equal),(0,kt.Z)(tf,gt.NOTEQUAL,Un.wb.NotEqual),tf),Aa=(Du={},(0,kt.Z)(Du,gt.FUNC_ADD,Un.db.Add),(0,kt.Z)(Du,gt.MIN_EXT,Un.db.Min),(0,kt.Z)(Du,gt.MAX_EXT,Un.db.Max),(0,kt.Z)(Du,gt.FUNC_SUBTRACT,Un.db.Subtract),(0,kt.Z)(Du,gt.FUNC_REVERSE_SUBTRACT,Un.db.ReverseSubtract),Du),cy=(Sl={},(0,kt.Z)(Sl,gt.ZERO,Un.zi.Zero),(0,kt.Z)(Sl,gt.ONE,Un.zi.One),(0,kt.Z)(Sl,gt.SRC_COLOR,Un.zi.SrcColor),(0,kt.Z)(Sl,gt.ONE_MINUS_SRC_COLOR,Un.zi.OneMinusSrcColor),(0,kt.Z)(Sl,gt.SRC_ALPHA,Un.zi.SrcAlpha),(0,kt.Z)(Sl,gt.ONE_MINUS_SRC_ALPHA,Un.zi.OneMinusSrcAlpha),(0,kt.Z)(Sl,gt.DST_COLOR,Un.zi.DstColor),(0,kt.Z)(Sl,gt.ONE_MINUS_DST_COLOR,Un.zi.OneMinusDstColor),(0,kt.Z)(Sl,gt.DST_ALPHA,Un.zi.DstAlpha),(0,kt.Z)(Sl,gt.ONE_MINUS_DST_ALPHA,Un.zi.OneMinusDstAlpha),(0,kt.Z)(Sl,gt.CONSTANT_COLOR,Un.zi.BlendColor),(0,kt.Z)(Sl,gt.ONE_MINUS_CONSTANT_COLOR,Un.zi.OneMinusBlendColor),(0,kt.Z)(Sl,gt.SRC_ALPHA_SATURATE,Un.zi.SrcAlphaSaturated),Sl),N_=(Ei={},(0,kt.Z)(Ei,gt.ALPHA,"r8unorm"),(0,kt.Z)(Ei,gt.RGBA,"rgba8unorm"),(0,kt.Z)(Ei,gt.DEPTH_COMPONENT,"depth32float"),(0,kt.Z)(Ei,gt.DEPTH_STENCIL,"depth24plus-stencil8"),Ei),np=(nf={},(0,kt.Z)(nf,gt.NEAREST,"nearest"),(0,kt.Z)(nf,gt.LINEAR,"linear"),nf),WC=(mv={},(0,kt.Z)(mv,gt.REPEAT,"repeat"),(0,kt.Z)(mv,gt.CLAMP_TO_EDGE,"clamp-to-edge"),(0,kt.Z)(mv,gt.MIRRORED_REPEAT,"mirror-repeat"),mv);function G2(n){var r=n.cull;if(!r||!r.enable)return Un.Wf.None;if(r.face)return r.face===gt.FRONT?Un.Wf.Front:Un.Wf.Back}function ly(n){var r=n.depth,i=n.stencil,s={compare:Un.wb.Always,depthFailOp:Un.xS.Keep,failOp:Un.xS.Keep,passOp:Un.xS.Keep};return{depthWriteEnabled:r&&r.enable,depthCompare:Gs[r?.func||gt.ALWAYS],format:Un.EV.Depth24PlusStencil8,stencilFront:s,stencilBack:s,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function uy(n,r){var i=n.blend;return[{format:r,alphaBlend:{srcFactor:cy[i&&i.func&&i.func.srcAlpha||gt.ONE],dstFactor:cy[i&&i.func&&i.func.dstAlpha||gt.ZERO],operation:Aa[i&&i.equation&&i.equation.alpha||gt.FUNC_ADD]},colorBlend:{srcFactor:cy[i&&i.func&&i.func.srcRGB||gt.ONE],dstFactor:cy[i&&i.func&&i.func.dstRGB||gt.ZERO],operation:Aa[i&&i.equation&&i.equation.rgb||gt.FUNC_ADD]},writeMask:Un.Yw.All}]}function dy(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function yv(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?dy(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):dy(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function wO(n){for(var r=0,i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];for(var u=0,h=s;u<h.length;u++){var p=h[u];r+=p.length}for(var g=new n(r),y=0,b=0,E=s;b<E.length;b++){var T=E[b];g.set(T,y),y+=T.length}return g}var EO=function(){function n(r,i){(0,dr.Z)(this,n),this.engine=r,this.options=i,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return(0,Or.Z)(n,[{key:"init",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){var a=this,u,h,p,g,y,b,E,T,O,N,k,B,$,X,ne,be,me,je;return cr().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return u=this.options,h=u.vs,p=u.fs,g=u.attributes,y=u.uniforms,b=u.primitive,E=u.count,T=u.elements,O=u.depth,N=u.blend,k=u.stencil,B=u.cull,$=u.instances,ct.next=3,this.compilePipelineStageDescriptor(h,p,null);case 3:X=ct.sent,ne=X.vertexStage,be=X.fragmentStage,y&&this.buildUniformBindGroup(y),T&&(this.indexBuffer=T.get(),this.indexCount=T.indexCount),me={vertexBuffers:Object.keys(g).map(function(Xt,_t){var Zt=g[Xt],at=Zt.get(),Gn=at.arrayStride,Rn=at.stepMode,Jn=at.attributes;return a.attributeCache[Xt]=Zt,{arrayStride:Gn,stepMode:Rn,attributes:Jn}})},je={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:CO[b||gt.TRIANGLES],rasterizationState:yv(yv({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:G2({cull:B})}),depthStencilState:ly({depth:O,stencil:k}),colorStates:uy({blend:N},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:ne,fragmentStage:be,vertexState:me},this.renderPipeline=this.engine.device.createRenderPipeline(je);case 11:case"end":return ct.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"addUniforms",value:function(i){this.uniforms=yv(yv({},this.uniforms),Pu(i))}},{key:"draw",value:function(i){var s=this,a=this.engine.getCurrentRenderPass(),u=yv(yv({},this.uniforms),Pu(i.uniforms||{})),h=[];Object.keys(u).forEach(function(p){var g=(0,ja.Z)(u[p]);if(g==="boolean"||g==="number"||Array.isArray(u[p])||u[p].BYTES_PER_ELEMENT){var y,b=(y=s.uniformGPUBufferLayout.find(function($){var X=$.name;return X===p}))===null||y===void 0?void 0:y.offset;b!==null&&s.uniformBuffer.subData({data:u[p],offset:b})}else{var E,T=(E=s.uniformGPUBufferLayout.find(function($){var X=$.name;return X===p}))===null||E===void 0?void 0:E.offset;if(T!==null){var O=u[p].get(),N=O.color||O,k=N.texture,B=N.sampler;B&&(h.push({binding:T,resource:B}),T++),h.push({binding:T,resource:k.createView()})}}}),this.uniformBuffer&&(h[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:h}),this.renderPipeline&&a.setPipeline(this.renderPipeline),a.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&a.setIndexBuffer(this.indexBuffer.get(),Un.iD.Uint32,0),Object.keys(this.attributeCache).forEach(function(p,g){a.setVertexBuffer(0+g,s.attributeCache[p].get().buffer,0)}),this.indexBuffer?a.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):a.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var r=(0,Wi.Z)(cr().mark(function s(a,u,h){var p,g,y;return cr().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(p=`#version 450
`,g=a,y=u,this.engine.options.useWGSL){E.next=10;break}return E.next=6,this.compileShaderToSpirV(a,"vertex",p);case 6:return g=E.sent,E.next=9,this.compileShaderToSpirV(u,"fragment",p);case 9:y=E.sent;case 10:return E.abrupt("return",this.createPipelineStageDescriptor(g,y));case 11:case"end":return E.stop()}},s,this)}));function i(s,a,u){return r.apply(this,arguments)}return i}()},{key:"compileShaderToSpirV",value:function(i,s,a){return this.compileRawShaderToSpirV(a+i,s)}},{key:"compileRawShaderToSpirV",value:function(i,s){return this.engine.glslang.compileGLSL(i,s)}},{key:"createPipelineStageDescriptor",value:function(i,s){return{vertexStage:{module:this.engine.device.createShaderModule({code:i,isWHLSL:wl}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:s,isWHLSL:wl}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:Un.zX.CCW,cullMode:Un.Wf.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(i){var s=this,a=0,u=wO.apply(void 0,[Float32Array].concat((0,ms.Z)(Object.keys(i).map(function(g){return i[g]?(s.uniformGPUBufferLayout.push({name:g,offset:a}),a+=(i[g].length||1)*4,i[g]):[]})))),h=[],p=!1;u.length&&(p=!0,h.push({binding:0,visibility:Un.$X.Fragment|Un.$X.Vertex,type:Un.$l.UniformBuffer})),Object.keys(i).filter(function(g){return i[g]===null}).forEach(function(g,y){s.uniformGPUBufferLayout.push({name:g,offset:y*2+(p?1:0)}),h.push({binding:y*2+(p?1:0),visibility:Un.$X.Fragment,type:Un.$l.Sampler},{binding:y*2+(p?1:0)+1,visibility:Un.$X.Fragment,type:Un.$l.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:h}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),p&&(this.uniformBuffer=new vv(this.engine,{data:u instanceof Array?new Float32Array(u):u,usage:Un.FB.Uniform|Un.FB.CopyDst}))}}]),n}(),F2=function(){function n(r,i){(0,dr.Z)(this,n),this.engine=r,this.options=i,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return(0,Or.Z)(n,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(i){var s=i.width,a=i.height;(s!==this.width||a!==this.height)&&(this.destroy(),this.createTexture()),this.width=s,this.height=a}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var i=this.options,s=i.data,a=i.type,u=a===void 0?gt.UNSIGNED_BYTE:a,h=i.width,p=i.height,g=i.flipY,y=g===void 0?!1:g,b=i.format,E=b===void 0?gt.RGBA:b,T=i.mipmap,O=T===void 0?!1:T,N=i.wrapS,k=N===void 0?gt.CLAMP_TO_EDGE:N,B=i.wrapT,$=B===void 0?gt.CLAMP_TO_EDGE:B,X=i.aniso,ne=X===void 0?0:X,be=i.alignment,me=be===void 0?1:be,je=i.premultiplyAlpha,ot=je===void 0?!1:je,ct=i.mag,Xt=ct===void 0?gt.NEAREST:ct,_t=i.min,Zt=_t===void 0?gt.NEAREST:_t,at=i.colorSpace,Gn=at===void 0?gt.BROWSER_DEFAULT_WEBGL:at,Rn=i.usage;this.width=h,this.height=p,this.texture=this.engine.device.createTexture({size:[h,p,1],mipLevelCount:1,sampleCount:1,dimension:Un.kd.E2d,format:N_[E],usage:Rn||Un.v2.Sampled|Un.v2.CopyDst}),(!Rn||Rn&Un.v2.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:WC[k],addressModeV:WC[$],addressModeW:WC[k],magFilter:np[Xt],minFilter:np[Zt],maxAnisotropy:ne}))}}]),n}(),I_,R_,l0,k_=(I_=(0,z.b2)(),I_(R_=(l0=function(){function n(){var r=this;(0,dr.Z)(this,n),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(i){var s=i.framebuffer,a=i.color,u=i.depth,h=i.stencil;r.options.supportCompute&&r.startComputePass(),r.currentRenderTarget?(r.currentRenderPass&&r.endRenderTargetRenderPass(),r.startRenderTargetRenderPass(r.currentRenderTarget,a||null,!!u,!!h)):(r.mainColorAttachments[0].loadValue=a||Un.Ws.Load,r.mainDepthAttachment.depthLoadValue=u||Un.Ws.Load,r.mainDepthAttachment.stencilLoadValue=h?r.clearStencilValue:Un.Ws.Load,r.mainRenderPass&&r.endMainRenderPass(),r.startMainRenderPass())},this.createModel=function(){var i=(0,Wi.Z)(cr().mark(function s(a){var u;return cr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u=new EO(r,a),p.next=3,u.init();case 3:return p.abrupt("return",u);case 4:case"end":return p.stop()}},s)}));return function(s){return i.apply(this,arguments)}}(),this.createAttribute=function(i){return new $C(r,i)},this.createBuffer=function(i){return new vv(r,i)},this.createElements=function(i){return new bO(r,i)},this.createTexture2D=function(i){return new F2(r,i)},this.createFramebuffer=function(i){return new xO(r,i)},this.useFramebuffer=function(i,s){r.currentRenderTarget&&r.unbindFramebuffer(r.currentRenderTarget),r.currentRenderTarget=i,r.currentRenderTargetViewDescriptor={dimension:Un.p_.E2d,arrayLayerCount:1,aspect:Un.H7.All},r.currentRenderPass=null,s()},this.createComputeModel=function(){var i=(0,Wi.Z)(cr().mark(function s(a){var u;return cr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u=new D_(r,a),p.next=3,u.init();case 3:return p.abrupt("return",u);case 4:case"end":return p.stop()}},s)}));return function(s){return i.apply(this,arguments)}}(),this.getCanvas=function(){return r.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(i){var s=i.x,a=i.y,u=i.width,h=i.height;if(!r.currentRenderPass)r.transientViewport={x:s,y:a,width:u,height:h};else if(r.transientViewport.x!==1/0){var p=r.getCurrentRenderPass();p.setViewport(r.transientViewport.x,r.transientViewport.y,r.transientViewport.width,r.transientViewport.height,0,1)}else if(s!==r.cachedViewport.x||a!==r.cachedViewport.y||u!==r.cachedViewport.width||h!==r.cachedViewport.height){r.cachedViewport={x:s,y:a,width:u,height:h};var g=r.getCurrentRenderPass();g.setViewport(s,a,u,h,0,1)}},this.readPixels=function(i){throw new Error("Method not implemented.")}}return(0,Or.Z)(n,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var r=(0,Wi.Z)(cr().mark(function s(a){return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return this.canvas=a.canvas,this.options=a,this.useWGSL=!!a.useWGSL,this.mainPassSampleCount=a.antialiasing?this.defaultSampleCount:1,h.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return h.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setScissor",value:function(i){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(i){return i.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),wl?this.device.getQueue().submit(this.commandBuffers.filter(function(i){return i})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(i){return i}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){var a,u;return cr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,O_();case 2:return this.glslang=p.sent,p.next=5,(a=navigator)===null||a===void 0||(u=a.gpu)===null||u===void 0?void 0:u.requestAdapter();case 5:return this.adapter=p.sent,p.next=8,this.adapter.requestDevice();case 8:this.device=p.sent;case 9:case"end":return p.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(wl?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Un.v2.OutputAttachment|Un.v2.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var i={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Un.kd.E2d,format:Un.EV.BGRA8Unorm,usage:Un.v2.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(i),this.mainColorAttachments=[{attachment:wl?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Un.EG.Store}]}else this.mainColorAttachments=[{attachment:wl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Un.EG.Store}];var s={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Un.kd.E2d,format:wl?"depth32float-stencil8":Un.EV.Depth24PlusStencil8,usage:Un.v2.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(s),this.mainDepthAttachment={attachment:wl?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Un.EG.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Un.EG.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=wl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=wl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(i,s,a){var u,h,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,g=(u=i.get().color)===null||u===void 0?void 0:u.texture,y;g&&(y=g.createView(this.currentRenderTargetViewDescriptor));var b=(h=i.get().depth)===null||h===void 0?void 0:h.texture,E;b&&(E=b.createView());var T=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:y,loadValue:s!==null?s:Un.Ws.Load,storeOp:Un.EG.Store}],depthStencilAttachment:b&&E?{attachment:E,depthLoadValue:a?this.clearDepthValue:Un.Ws.Load,depthStoreOp:Un.EG.Store,stencilLoadValue:p?this.clearStencilValue:Un.Ws.Load,stencilStoreOp:Un.EG.Store}:void 0});this.currentRenderPass=T,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(i){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),n}(),l0))||R_),sg,ag;function SO(n){var r=_O();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function _O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var XC=4/64,L_=1-XC*2,AO=(sg=(0,z.b2)(),sg(ag=function(n){(0,wa.Z)(i,n);var r=SO(i);function i(){return(0,dr.Z)(this,i),r.apply(this,arguments)}return(0,Or.Z)(i,[{key:"onEntityCreated",value:function(){var a=this.config,u=a.widthSegments,h=u===void 0?1:u,p=a.heightSegments,g=p===void 0?1:p,y=a.depthSegments,b=y===void 0?1:y,E=a.halfExtents,T=E===void 0?wt.al(.5,.5,.5):E,O=h,N=g,k=b,B=(0,Xp.Z)(T,3),$=B[0],X=B[1],ne=B[2],be=[wt.al(-$,-X,ne),wt.al($,-X,ne),wt.al($,X,ne),wt.al(-$,X,ne),wt.al($,-X,-ne),wt.al(-$,-X,-ne),wt.al(-$,X,-ne),wt.al($,X,-ne)],me=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],je=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],ot={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},ct=[],Xt=[],_t=[],Zt=[],at=[],Gn=0,Rn=function(Zr,jo,Xs){var yi,Zs,$a,In;for($a=0;$a<=jo;$a++)for(In=0;In<=Xs;In++){var vr=wt.Ue(),Fi=wt.Ue(),Xi=wt.Ue(),po=wt.Ue();wt.t7(vr,be[me[Zr][0]],be[me[Zr][1]],$a/jo),wt.t7(Fi,be[me[Zr][0]],be[me[Zr][2]],In/Xs),wt.lu(Xi,Fi,be[me[Zr][0]]),wt.IH(po,vr,Xi),yi=$a/jo,Zs=In/Xs,ct.push(po[0],po[1],po[2]),Xt.push(je[Zr][0],je[Zr][1],je[Zr][2]),_t.push(yi,Zs),yi/=3,Zs/=3,yi=yi*L_+XC,Zs=Zs*L_+XC,yi+=Zr%3/3,Zs+=Math.floor(Zr/3)/3,Zt.push(yi,Zs),$a<jo&&In<Xs&&(at.push(Gn+Xs+1,Gn+1,Gn),at.push(Gn+Xs+1,Gn+Xs+2,Gn+1)),Gn++}};Rn(ot.FRONT,O,N),Rn(ot.BACK,O,N),Rn(ot.TOP,O,k),Rn(ot.BOTTOM,O,k),Rn(ot.RIGHT,k,N),Rn(ot.LEFT,k,N);var Jn=AC(ct),Li=this.getComponent();Li.indices=Uint32Array.from(at),Li.aabb=Jn,Li.vertexCount=Gn,Li.attributes=[{dirty:!0,name:"position",data:Float32Array.from(ct),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(Xt),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(_t),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),i}(Jf))||ag);function TO(n,r){if(!n&&!r)throw new Error("Please specify valid arguments for parameters a and b.");if(!r||r.length===0)return n;if(!n||n.length===0)return r;if(Object.prototype.toString.call(n)!==Object.prototype.toString.call(r))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var i=new n.constructor(n.length+r.length);return i.set(n),i.set(r,n.length),i}var G_,F_;function MO(n){var r=rp();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function rp(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var B2=(G_=(0,z.b2)(),G_(F_=function(n){(0,wa.Z)(i,n);var r=MO(i);function i(){return(0,dr.Z)(this,i),r.apply(this,arguments)}return(0,Or.Z)(i,[{key:"onEntityCreated",value:function(){var a=this.config.geometries,u=a===void 0?[]:a,h=this.getComponent();h.aabb=new Qx;var p=[],g=[],y=0;u.forEach(function(b){var E=b.aabb,T=b.indices,O=b.vertexCount,N=b.attributes;h.aabb.add(E),h.vertexCount+=O,T&&g.push.apply(g,(0,ms.Z)(T.map(function(k){return k+y}))),y+=O,N.forEach(function(k,B){p[B]?k.data&&(T2(k.data)?p[B].push(k.data):$S(k.data)?p[B].data=TO(p[B].data,k.data):p[B].data=p[B].data.concat(k.data)):(p[B]=k,p[B].dirty=!0)})}),h.attributes=p,h.indices=Uint32Array.from(g),h.dirty=!0}}]),i}(Jf))||F_),ZC,OO;function PO(n){var r=DO();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function DO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var IP=(ZC=(0,z.b2)(),ZC(OO=function(n){(0,wa.Z)(i,n);var r=PO(i);function i(){return(0,dr.Z)(this,i),r.apply(this,arguments)}return(0,Or.Z)(i,[{key:"onEntityCreated",value:function(){for(var a=this.config,u=a.halfExtents,h=u===void 0?[.5,.5]:u,p=a.widthSegments,g=p===void 0?5:p,y=a.lengthSegments,b=y===void 0?5:y,E=[],T=[],O=[],N=[],k=0,B=0;B<=g;B++)for(var $=0;$<=b;$++){var X=-h[0]+2*h[0]*B/g,ne=0,be=-(-h[1]+2*h[1]*$/b),me=B/g,je=$/b;E.push(X,ne,be),T.push(0,1,0),O.push(me,je),B<g&&$<b&&(N.push(k+b+1,k+1,k),N.push(k+b+1,k+b+2,k+1)),k++}var ot=AC(E),ct=this.getComponent();ct.indices=Uint32Array.from(N),ct.aabb=ot,ct.vertexCount=k,ct.attributes=[{dirty:!0,name:"position",data:Float32Array.from(E),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(T),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(O),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),i}(Jf))||OO),B_,cg;function NO(n){var r=IO();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function IO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var z_=(B_=(0,z.b2)(),B_(cg=function(n){(0,wa.Z)(i,n);var r=NO(i);function i(){return(0,dr.Z)(this,i),r.apply(this,arguments)}return(0,Or.Z)(i,[{key:"onEntityCreated",value:function(){for(var a=this.config,u=a.radius,h=u===void 0?.5:u,p=a.latitudeBands,g=p===void 0?16:p,y=a.longitudeBands,b=y===void 0?16:y,E=[],T=[],O=[],N=[],k=0;k<=g;k++)for(var B=k*Math.PI/g,$=Math.sin(B),X=Math.cos(B),ne=0;ne<=b;ne++){var be=ne*2*Math.PI/b-Math.PI/2,me=Math.sin(be),je=Math.cos(be),ot=je*$,ct=X,Xt=me*$,_t=1-ne/b,Zt=1-k/g;E.push(ot*h,ct*h,Xt*h),T.push(ot,ct,Xt),O.push(_t,Zt)}for(var at=0;at<g;++at)for(var Gn=0;Gn<b;++Gn){var Rn=at*(b+1)+Gn,Jn=Rn+b+1;N.push(Rn+1,Jn,Rn),N.push(Rn+1,Jn+1,Jn)}var Li=AC(E),Gi=this.getComponent();Gi.indices=Uint32Array.from(N),Gi.aabb=Li,Gi.vertexCount=E.length/3,Gi.attributes=[{dirty:!0,name:"position",data:Float32Array.from(E),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(T),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(O),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),i}(Jf))||cg),U_,RO,V_,lg,u0,hy,j_,YC;function kO(n){var r=LO();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function LO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var GO=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,FO=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,d0=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,BO=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,zO=(U_=(0,z.b2)(),RO=(0,z.f3)(rn.RenderEngine),V_=(0,z.f3)(rn.ShaderModuleService),U_(lg=(u0=(YC=function(n){(0,wa.Z)(i,n);var r=kO(i);function i(){var s;(0,dr.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),Er(s,"engine",hy,(0,is.Z)(s)),Er(s,"shaderModuleService",j_,(0,is.Z)(s)),s}return(0,Or.Z)(i,[{key:"onEntityCreated",value:function(){var a=this.getComponent(),u=this.engine.supportWebGPU?BO:FO,h=this.engine.supportWebGPU?d0:GO;this.shaderModuleService.registerModule("material-basic",{vs:u,fs:h});var p=this.shaderModuleService.getModule("material-basic"),g=p.vs,y=p.fs,b=p.uniforms;a.vertexShaderGLSL=g,a.fragmentShaderGLSL=y,a.setUniform(b),this.config.map&&(a.setDefines({USE_UV:1,USE_MAP:1}),a.setUniform({map:this.config.map,uvTransform:Ea.Ue()}))}}]),i}(i_),YC),hy=Cr(u0.prototype,"engine",[RO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j_=Cr(u0.prototype,"shaderModuleService",[V_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u0))||lg),fy,py,KC,qC,H_,$_,JC,nl,W_,ip,X_,QC;function Z_(n){var r=UO();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function UO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var VO=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,Y_=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,K_=(fy=(0,z.b2)(),py=(0,z.f3)(rn.Systems),KC=(0,z.t6)(rn.MaterialSystem),qC=(0,z.f3)(rn.Systems),H_=(0,z.t6)(rn.GeometrySystem),$_=(0,z.f3)(rn.ShaderModuleService),fy(JC=(nl=(QC=function(n){(0,wa.Z)(i,n);var r=Z_(i);function i(){var s;(0,dr.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),Er(s,"materialSystem",W_,(0,is.Z)(s)),Er(s,"geometrySystem",ip,(0,is.Z)(s)),Er(s,"shaderModuleService",X_,(0,is.Z)(s)),s}return(0,Or.Z)(i,[{key:"onAttributeChanged",value:function(a){var u=a.name,h=a.data,p=this.getMeshComponent();p&&p.material&&(u==="gridColor"?(p.material.setUniform("u_GridColor",h),p.material.setUniform("u_GridColor2",h)):u==="gridSize"&&(p.material.setUniform("u_GridSize",h),p.material.setUniform("u_GridSize2",h)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:Y_,fs:VO});var a=this.shaderModuleService.getModule("grid"),u=a.vs,h=a.fs,p=a.uniforms,g=this.materialSystem.createShaderMaterial({vertexShader:u,fragmentShader:h});this.setMaterial(g);var y=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(y),g.setCull({enable:!1,face:gt.BACK}).setDepth({enable:!0,func:gt.LESS}),g.setUniform(p),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),y.setIndex([0,3,2,2,1,0]),y.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),i}(md),QC),W_=Cr(nl.prototype,"materialSystem",[py,KC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ip=Cr(nl.prototype,"geometrySystem",[qC,H_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X_=Cr(nl.prototype,"shaderModuleService",[$_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nl))||JC),gy=M(32644),h0=M(40582);function bv(n,r,i,s,a){vy(r,s,-a),vy(r,s,a),n.push(i),n.push(i)}function vy(n,r,i){n.push([[r[0],r[1]],i])}function q_(n,r,i){var s=[0,0],a=[0,0],u=[0,0],h=[0,0],p=-1,g=!1,y=null,b=(0,gy.create)(),E=i||0,T=3,O=[],N=[],k=[],B=[0,0];r&&(n=n.slice(),n.push(n[0]));for(var $=n.length,X=1;X<$;X++){var ne=E,be=n[X-1],me=n[X],je=X<n.length-1?n[X+1]:null;if(B.push(X/$,X/$),(0,h0.o7)(s,me,be),y||(y=[0,0],(0,h0.mJ)(y,s)),g||(g=!0,bv(N,O,be,y,1)),k.push([ne+0,ne+1,ne+2]),!je)(0,h0.mJ)(y,s),bv(N,O,me,y,1),k.push(p===1?[ne,ne+2,ne+3]:[ne+2,ne+1,ne+3]),E+=2;else{(0,h0.o7)(a,je,me);var ot=(0,h0.x7)(u,h,s,a,1),ct=(0,gy.dot)(u,y)<0?-1:1,Xt=ot>T;if(!isFinite(ot)){(0,h0.mJ)(y,s),bv(N,O,me,y,1),k.push(p===1?[ne,ne+2,ne+3]:[ne+2,ne+1,ne+3]),E+=2,p=ct;continue}Xt?(ot=T,B.push(X/$),vy(O,y,-ct),N.push(me),vy(O,h,ot*ct),N.push(me),k.push(p!==-ct?[ne,ne+2,ne+3]:[ne+2,ne+1,ne+3]),k.push([ne+2,ne+3,ne+4]),(0,h0.mJ)(b,a),(0,gy.copy)(y,b),vy(O,y,-ct),N.push(me),E+=3):(bv(N,O,me,h,ot),k.push(p===1?[ne,ne+2,ne+3]:[ne+2,ne+1,ne+3]),ct=-1,(0,gy.copy)(y,h),E+=2),p=ct}}return{normals:O,attrIndex:k,attrPos:N,attrCounters:B}}var J_,Q_,ew,eA,xv,my,Cv,f0,tw,nw,tA,nA;function jO(n){var r=rA();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function rA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var HO=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,$O=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,WO=(J_=(0,z.b2)(),Q_=(0,z.f3)(rn.Systems),ew=(0,z.t6)(rn.MaterialSystem),eA=(0,z.f3)(rn.Systems),xv=(0,z.t6)(rn.GeometrySystem),my=(0,z.f3)(rn.ShaderModuleService),J_(Cv=(f0=(nA=function(n){(0,wa.Z)(i,n);var r=jO(i);function i(){var s;(0,dr.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),Er(s,"materialSystem",tw,(0,is.Z)(s)),Er(s,"geometrySystem",nw,(0,is.Z)(s)),Er(s,"shaderModuleService",tA,(0,is.Z)(s)),s.vertexCount=void 0,s}return(0,Or.Z)(i,[{key:"onAttributeChanged",value:function(a){var u=a.name,h=a.data,p=this.getMeshComponent();if(p&&p.material)switch(u){case"dashArray":p.material.setUniform("u_dash_array",h);break;case"dashOffset":p.material.setUniform("u_dash_offset",h);break;case"dashRatio":p.material.setUniform("u_dash_ratio",h);break;case"thickness":p.material.setUniform("u_thickness",h);break;case"color":var g=new Array(this.vertexCount).fill(void 0).map(function(){return h}).reduce(function(y,b){return[].concat((0,ms.Z)(y),(0,ms.Z)(b))},[]);p.geometry.setAttribute("a_color",Float32Array.from(g),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var a=this;this.shaderModuleService.registerModule("line",{vs:$O,fs:HO});var u=this.shaderModuleService.getModule("line"),h=u.vs,p=u.fs,g=u.uniforms,y=this.materialSystem.createShaderMaterial({vertexShader:h,fragmentShader:p}),b=q_(this.config.points,!1),E=b.normals,T=b.attrIndex,O=b.attrPos,N=b.attrCounters,k=O.length;this.vertexCount=k;var B=this.geometrySystem.createBufferGeometry({vertexCount:k});this.setMaterial(y),this.setGeometry(B),y.setCull({enable:!1,face:gt.BACK}).setUniform(g),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var $=[],X=[];E.forEach(function(be){var me=be[0],je=be[1];$.push([me[0],me[1]]),X.push(je)}),B.setIndex(T.reduce(function(be,me){return[].concat((0,ms.Z)(be),(0,ms.Z)(me))},[])),B.setAttribute("a_pos",Float32Array.from(O.reduce(function(be,me){return[].concat((0,ms.Z)(be),(0,ms.Z)(me))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var ne=new Array(k).fill(void 0).map(function(){return(0,ms.Z)(a.config.color)}).reduce(function(be,me){return[].concat((0,ms.Z)(be),(0,ms.Z)(me))},[]);B.setAttribute("a_color",Float32Array.from(ne),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),B.setAttribute("a_line_miter",Float32Array.from(X),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),B.setAttribute("a_line_normal",Float32Array.from($.reduce(function(be,me){return[].concat((0,ms.Z)(be),(0,ms.Z)(me))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),B.setAttribute("a_counters",Float32Array.from(N),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),i}(md),nA),tw=Cr(f0.prototype,"materialSystem",[Q_,ew],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nw=Cr(f0.prototype,"geometrySystem",[eA,xv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tA=Cr(f0.prototype,"shaderModuleService",[my],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f0))||Cv);function wv(n){return[n+1&255,n+1>>8&255,n+1>>8>>8&255]}var iA,rf,oA,sA,aA,cA,rw,ug,yy,lA,z2,uA;function iw(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function XO(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?iw(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):iw(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function dA(n){var r=ZO();return function(){var s=(0,no.Z)(n),a;if(r){var u=(0,no.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,Eo.Z)(this,a)}}function ZO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}var by=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,U2=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,YO=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],dg=(iA=(0,z.b2)(),rf=(0,z.f3)(rn.Systems),oA=(0,z.t6)(rn.MaterialSystem),sA=(0,z.f3)(rn.Systems),aA=(0,z.t6)(rn.GeometrySystem),cA=(0,z.f3)(rn.ShaderModuleService),iA(rw=(ug=(uA=function(n){(0,wa.Z)(i,n);var r=dA(i);function i(){var s;(0,dr.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),Er(s,"materialSystem",yy,(0,is.Z)(s)),Er(s,"geometrySystem",lA,(0,is.Z)(s)),Er(s,"shaderModuleService",z2,(0,is.Z)(s)),s}return(0,Or.Z)(i,[{key:"onAttributeChanged",value:function(a){var u=a.name,h=a.data,p=this.getMeshComponent();p&&p.material&&(u==="strokeWidth"?p.material.setUniform("u_stroke_width",h):u==="strokeColor"?p.material.setUniform("u_stroke_color",h):u==="strokeOpacity"?p.material.setUniform("u_stroke_opacity",h):u==="opacity"?p.material.setUniform("u_opacity",h):u==="blur"&&p.material.setUniform("u_blur",h))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:U2,fs:by});var a=this.shaderModuleService.getModule("grid"),u=a.vs,h=a.fs,p=a.uniforms,g=this.materialSystem.createShaderMaterial({vertexShader:u,fragmentShader:h,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:gt.SRC_ALPHA,dstRGB:gt.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});g.setUniform(XO({u_device_pixel_ratio:window.devicePixelRatio},p));var y=this.buildAttributes(),b=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:y.instancedOffsets.length/2,vertexCount:6});b.setIndex([0,2,1,0,3,2]),b.setAttribute("position",Float32Array.from(y.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),b.setAttribute("offset",Float32Array.from(y.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),b.setAttribute("color",Float32Array.from(y.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),b.setAttribute("size",Float32Array.from(y.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),b.setAttribute("shape",Float32Array.from(y.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),b.setAttribute("a_PickingColor",Float32Array.from(y.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(g),this.setGeometry(b)}},{key:"buildAttribute",value:function(a,u,h){var p,g,y,b;(p=u.instancedPickingColors).push.apply(p,(0,ms.Z)(wv(a.id||h))),u.instancedShapes.push(YO.indexOf(a.shape||"circle")),(g=u.instancedColors).push.apply(g,(0,ms.Z)(a.color||[1,0,0,1])),(y=u.instancedOffsets).push.apply(y,(0,ms.Z)(a.position||[0,0])),(b=u.instancedSizes).push.apply(b,(0,ms.Z)(a.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var a=this,u={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(h,p){a.buildAttribute(h,u,p)}):this.buildAttribute(this.config,u,0),u}}]),i}(md),uA),yy=Cr(ug.prototype,"materialSystem",[rf,oA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lA=Cr(ug.prototype,"geometrySystem",[sA,aA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z2=Cr(ug.prototype,"shaderModuleService",[cA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ug))||rw),hA,Ev,fA,ow,pA,Sv,ki,p0,gA,xy;function ys(n,r){var i;if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=KO(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function KO(n,r){if(!!n){if(typeof n=="string")return ic(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ic(n,r)}}function ic(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var qO=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,JO=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,sw=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,Cy=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,of=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,QO=(hA=(0,z.b2)(),Ev=(0,z.f3)(rn.RenderEngine),fA=(0,z.f3)(rn.ShaderModuleService),ow=(0,z.f3)(rn.ConfigService),hA(pA=(Sv=(xy=function(){function n(){(0,dr.Z)(this,n),this.container=void 0,Er(this,"engine",ki,this),Er(this,"shaderModule",p0,this),Er(this,"configService",gA,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return(0,Or.Z)(n,[{key:"init",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){var a,u,h,p,g;return cr().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:Cy}),this.shaderModule.registerModule("uv.vert.main",{vs:of}),this.shaderModule.registerModule("uv.frag.declaration",{fs:sw}),this.shaderModule.registerModule("map.frag.declaration",{fs:qO}),this.shaderModule.registerModule("map.frag.main",{fs:JO}),a=this.container.getAll(rn.Systems),u=this.configService.get(),!u.canvas){b.next=30;break}return b.next=11,this.engine.init({canvas:u.canvas,swapChainFormat:Un.EV.BGRA8Unorm,antialiasing:!1});case 11:h=ys(a),b.prev=12,h.s();case 14:if((p=h.n()).done){b.next=21;break}if(g=p.value,!g.initialize){b.next=19;break}return b.next=19,g.initialize();case 19:b.next=14;break;case 21:b.next=26;break;case 23:b.prev=23,b.t0=b.catch(12),h.e(b.t0);case 26:return b.prev=26,h.f(),b.finish(26);case 29:this.inited=!0;case 30:case"end":return b.stop()}},s,this,[[12,23,26,29]])}));function i(){return r.apply(this,arguments)}return i}()},{key:"render",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){var a,u,h,p,g,y,b,E=arguments;return cr().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(!this.inited||this.rendering)){O.next=2;break}return O.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(N){N()}),this.rendering=!0,this.engine.beginFrame(),a=this.container.getAll(rn.Systems),u=E.length,h=new Array(u),p=0;p<u;p++)h[p]=E[p];g=ys(a),O.prev=8,g.s();case 10:if((y=g.n()).done){O.next=17;break}if(b=y.value,!b.execute){O.next=15;break}return O.next=15,b.execute(h);case 15:O.next=10;break;case 17:O.next=22;break;case 19:O.prev=19,O.t0=O.catch(8),g.e(O.t0);case 22:return O.prev=22,g.f(),O.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return O.stop()}},s,this,[[8,19,22,25]])}));function i(){return r.apply(this,arguments)}return i}()},{key:"clear",value:function(i){var s=this;return this.inited?this.engine.clear(i):this.pendings.unshift(function(){s.engine.clear(i),s.pendings.shift()}),this}},{key:"setSize",value:function(i){var s=i.width,a=i.height,u=this.engine.getCanvas();return this.size={width:s,height:a},u.width=s,u.height=a,this}},{key:"getSize",value:function(){return this.size}}]),n}(),xy),ki=Cr(Sv.prototype,"engine",[Ev],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p0=Cr(Sv.prototype,"shaderModule",[fA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gA=Cr(Sv.prototype,"configService",[ow],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sv))||pA),e3,t3,n3,r3=(e3=(0,z.b2)(),e3(t3=(n3=function(){function n(){(0,dr.Z)(this,n),this.entities=[]}return(0,Or.Z)(n,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(i){return this.addEntity(i.getEntity()),this}},{key:"removeRenderable",value:function(i){return this.removeEntity(i.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(i){return this.entities.indexOf(i)===-1&&this.entities.push(i),this}},{key:"removeEntity",value:function(i){var s=this.entities.indexOf(i);return this.entities.splice(s,1),this}}]),n}(),n3))||t3),i3,vA,aw,o3=(i3=(0,z.b2)(),i3(vA=(aw=function(){function n(){(0,dr.Z)(this,n),this.cache={}}return(0,Or.Z)(n,[{key:"get",value:function(i){return this.cache[i]}},{key:"set",value:function(i,s){this.cache[i]=s}}]),n}(),aw))||vA),s3,wy,os,mA,xd,Lc,cw,lw;function uw(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function wc(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?uw(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):uw(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var ch=(s3=(0,z.b2)(),wy=(0,z.f3)(o3),os=(0,z.f3)(rn.RenderEngine),s3(mA=(xd=(lw=function(){function n(){(0,dr.Z)(this,n),Er(this,"textureCache",Lc,this),Er(this,"engine",cw,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return(0,Or.Z)(n,[{key:"setConfig",value:function(i){this.config=i}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){var a=this;return cr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.config.url){h.next=4;break}return h.abrupt("return",new Promise(function(p,g){var y=a.textureCache.get(a.config.url);if(y)p(y);else{var b=new Image;b.crossOrigin="Anonymous",b.src=a.config.url,b.onload=function(){var E=a.engine.createTexture2D(wc(wc({},a.config),{},{data:b,width:b.width,height:b.height,flipY:!0}));a.textureCache.set(a.config.url,E),a.texture=E,a.loaded=!0,p(E)},b.onerror=function(){g()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),h.abrupt("return",this.texture);case 7:case"end":return h.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()}]),n}(),lw),Lc=Cr(xd.prototype,"textureCache",[wy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cw=Cr(xd.prototype,"engine",[os],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xd))||mA),Ey,Sy,a3,yA,lh,c3,l3,u3=(Ey=(0,z.b2)(),Sy=(0,z.f3)(rn.Systems),a3=(0,z.t6)(rn.RendererSystem),Ey(yA=(lh=(l3=function(){function n(){(0,dr.Z)(this,n),Er(this,"rendererSystem",c3,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return(0,Or.Z)(n,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(i){return this.camera=i,this}},{key:"setScene",value:function(i){return this.scene=i,this}},{key:"setViewport",value:function(i){return this.viewport=i,this}},{key:"setClearColor",value:function(i){return this.clearColor=i,this}},{key:"pick",value:function(i){return this.rendererSystem.pick(i,this)}}]),n}(),l3),c3=Cr(lh.prototype,"rendererSystem",[Sy,a3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lh))||yA),V2,d3,h3,dw,g0,f3;function p3(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function g3(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?p3(Object(i),!0).forEach(function(s){(0,kt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):p3(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var hw=(V2=(0,z.b2)(),d3=(0,z.f3)(rn.ConfigService),V2(h3=(dw=(f3=function(){function n(){(0,dr.Z)(this,n),Er(this,"configService",g0,this),this.container=void 0}return(0,Or.Z)(n,[{key:"getEngine",value:function(){var r=(0,Wi.Z)(cr().mark(function s(){var a,u,h,p;return cr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return a=this.container.get(rn.RenderEngine),u=this.configService.get(),h=u.canvas,p=u.engineOptions,y.next=4,a.init(g3({canvas:h||kS(),swapChainFormat:Un.EV.BGRA8Unorm,antialiasing:!1},p));case 4:return y.abrupt("return",a);case 5:case"end":return y.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"getTransformComponent",value:function(i){var s=this.container.get(rn.TransformComponentManager);return s.getComponentByEntity(i)}},{key:"getMeshComponent",value:function(i){var s=this.container.get(rn.MeshComponentManager);return s.getComponentByEntity(i)}},{key:"setConfig",value:function(i){this.configService.set(i)}},{key:"setContainer",value:function(i){this.container=i}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Tu()}},{key:"createScene",value:function(){return this.container.get(r3)}},{key:"createCamera",value:function(){return this.container.get(NS)}},{key:"createView",value:function(){return this.container.get(u3)}},{key:"createRenderable",value:function(i,s){var a=i?this.container.getNamed(rn.Renderable,i):this.container.get(md),u=Tu();return a.setConfig(s||{}),a.setEntity(u),a}},{key:"createGeometry",value:function(i,s){var a=this.container.getNamed(rn.Geometry,i),u=Tu();return a.setConfig(s||{}),a.setEntity(u),a.getComponent()}},{key:"createMaterial",value:function(i,s){var a=this.container.getNamed(rn.Material,i),u=Tu();return a.setConfig(s||{}),a.setEntity(u,i),a.getComponent()}},{key:"createTexture2D",value:function(i){var s=this.container.get(ch);return s.setConfig(i),s}},{key:"createBufferGeometry",value:function(i){var s=this.container.getNamed(rn.Systems,rn.GeometrySystem);return s.createBufferGeometry(i)}},{key:"createInstancedBufferGeometry",value:function(i){var s=this.container.getNamed(rn.Systems,rn.GeometrySystem);return s.createInstancedBufferGeometry(i)}},{key:"createShaderMaterial",value:function(i){var s=this.container.getNamed(rn.Systems,rn.MaterialSystem);return s.createShaderMaterial(i)}},{key:"createKernel",value:function(i){var s=this.container.get(JS);return typeof i=="string"?s.setBundle(JSON.parse(i)):s.setBundle(i),s.init(),s}},{key:"createRenderer",value:function(){var i=this.container.get(QO);return i.container=this.container,i.init(),i}},{key:"destroy",value:function(){var i=this.container.getAll(rn.Systems);i.forEach(function(u){u.tearDown&&u.tearDown()});var s=this.container.get(rn.RenderEngine);s.destroy();var a=this.container.get(rn.InteractorService);a.destroy()}}],[{key:"create",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Ym(),a=navigator.gpu?k_:L2;s.isBound(rn.RenderEngine)||s.bind(rn.RenderEngine).to(a).inSingletonScope(),s.bind(QO).toSelf(),s.bind(JS).toSelf(),s.bind(md).toSelf(),s.bind(u3).toSelf(),s.bind(NS).toSelf(),s.bind(r3).toSelf(),s.bind(n).toSelf(),s.bind(o3).toSelf(),s.bind(ch).toSelf(),s.bind(rn.Geometry).to(AO).whenTargetNamed(Jf.BOX),s.bind(rn.Geometry).to(z_).whenTargetNamed(Jf.SPHERE),s.bind(rn.Geometry).to(IP).whenTargetNamed(Jf.PLANE),s.bind(rn.Geometry).to(B2).whenTargetNamed(Jf.MERGED),s.bind(rn.Material).to(zO).whenTargetNamed(i_.BASIC),s.bind(rn.Renderable).to(dg).whenTargetNamed(md.POINT),s.bind(rn.Renderable).to(WO).whenTargetNamed(md.LINE),s.bind(rn.Renderable).to(K_).whenTargetNamed(md.GRID);var u=s.get(n);return u.setContainer(s),u.setConfig(i),u}}]),n}(),f3),g0=Cr(dw.prototype,"configService",[d3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dw))||h3);const _v=(n,r)=>{let i;return n?Hn(n)?i=()=>n:i=n:i=()=>r||1,i},RP=(n,r)=>{const i=[],s=[],a={};let u=0;for(u=0;u<n.length;u++){const p=n[u];a[p.id]=u,i.push(p.x),i.push(p.y),i.push(0),i.push(0),s.push([])}for(u=0;u<r.length;u++){const p=r[u],g=vi(p,"source"),y=vi(p,"target");s[a[g]].push(a[y]),s[a[y]].push(a[g])}let h=0;for(u=0;u<n.length;u++){const p=i.length,g=s[u],y=g.length;i[u*4+2]=p,i[u*4+3]=g.length,h=Math.max(h,g.length);for(let b=0;b<y;++b){const E=g[b];i.push(+E)}}for(;i.length%4!==0;)i.push(0);return{maxEdgePerVetex:h,array:new Float32Array(i)}},kP=(n,r,i,s)=>{const a=[],u=[],h={};let p=0;for(p=0;p<n.length;p++){const y=n[p];h[y.id]=p,a.push(y.x),a.push(y.y),a.push(0),a.push(0),u.push([])}for(p=0;p<r.length;p++){const y=r[p],b=vi(y,"source"),E=vi(y,"target");u[h[b]].push(h[E]),u[h[b]].push(i(y)),u[h[b]].push(s(y)),u[h[b]].push(0),u[h[E]].push(h[b]),u[h[E]].push(i(y)),u[h[E]].push(s(y)),u[h[E]].push(0)}let g=0;for(p=0;p<n.length;p++){const y=a.length,b=u[p],E=b.length;a[p*4+2]=y+1048576*E/4,a[p*4+3]=0,g=Math.max(g,E/4);for(let T=0;T<E;++T){const O=b[T];a.push(+O)}}for(;a.length%4!==0;)a.push(0);return{maxEdgePerVetex:g,array:new Float32Array(a)}},LP=(n,r)=>{const i=[],s=n.length,a={};return r.forEach(u=>{n.forEach((h,p)=>{if(a[u[h]]===void 0&&(a[u[h]]=Object.keys(a).length),i.push(a[u[h]]),p===s-1)for(;i.length%4!==0;)i.push(0)})}),{array:new Float32Array(i),count:Object.keys(a).length}},v3=n=>{const r=[],i=n.length,s=n[0].length;for(let a=0;a<s;a++)n.forEach((u,h)=>{if(r.push(u[a]),h===i-1)for(;r.length%4!==0;)r.push(0)});return new Float32Array(r)},XD=null,fw='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',ZD=null,GP='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var Nu=function(n,r,i,s){function a(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(b){try{y(s.next(b))}catch(E){h(E)}}function g(b){try{y(s.throw(b))}catch(E){h(E)}}function y(b){b.done?u(b.value):a(b.value).then(p,g)}y((s=s.apply(n,r||[])).next())})};class m3 extends ls{constructor(r){super(),this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return Nu(this,void 0,void 0,function*(){const r=this,i=r.nodes;if(!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const s=r.center;if(i.length===1){i[0].x=s[0],i[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}const a={},u={};i.forEach((h,p)=>{Hn(h.x)||(h.x=Math.random()*this.width),Hn(h.y)||(h.y=Math.random()*this.height),a[h.id]=h,u[h.id]=p}),r.nodeMap=a,r.nodeIdxMap=u,yield r.run()})}executeWithWorker(r,i){return Nu(this,void 0,void 0,function*(){const s=this,a=s.nodes,u=s.center;if(!a||a.length===0)return;if(a.length===1){a[0].x=u[0],a[0].y=u[1];return}const h={},p={};a.forEach((g,y)=>{Hn(g.x)||(g.x=Math.random()*this.width),Hn(g.y)||(g.y=Math.random()*this.height),h[g.id]=g,p[g.id]=y}),s.nodeMap=h,s.nodeIdxMap=p,yield s.run(r,i)})}run(r,i){return Nu(this,void 0,void 0,function*(){const s=this,a=s.nodes,u=s.edges,h=s.maxIteration,p=s.center,g=s.height*s.width;let y=Math.sqrt(g)/10;const b=g/(a.length+1),E=Math.sqrt(b),T=s.speed,O=s.clustering,{array:N,count:k}=LP([s.clusterField],a);a.forEach((_t,Zt)=>{let at=0,Gn=0;Hn(_t.fx)&&Hn(_t.fy)&&(at=_t.fx||.001,Gn=_t.fy||.001),N[4*Zt+1]=at,N[4*Zt+2]=Gn});const B=a.length,{maxEdgePerVetex:$,array:X}=RP(a,u),ne=s.workerEnabled;let be;ne?be=hw.create({canvas:r,engineOptions:{supportCompute:!0}}):be=hw.create({engineOptions:{supportCompute:!0}});const me=s.onLayoutEnd,je=[];for(let _t=0;_t<k;_t++)je.push(0,0,0,0);const ot=be.createKernel(fw).setDispatch([B,1,1]).setBinding({u_Data:X,u_K:E,u_K2:b,u_Gravity:s.gravity,u_ClusterGravity:s.clusterGravity||s.gravity||1,u_Speed:T,u_MaxDisplace:y,u_Clustering:O?1:0,u_Center:p,u_AttributeArray:N,u_ClusterCenters:je,MAX_EDGE_PER_VERTEX:$,VERTEX_COUNT:B});let ct;O&&(ct=be.createKernel(GP).setDispatch([k,1,1]).setBinding({u_Data:X,u_NodeAttributes:N,u_ClusterCenters:je,VERTEX_COUNT:B,CLUSTER_COUNT:k})),yield(()=>Nu(this,void 0,void 0,function*(){for(let Zt=0;Zt<h;Zt++)yield ot.execute(),O&&(ct.setBinding({u_Data:ot}),yield ct.execute(),ot.setBinding({u_ClusterCenters:ct})),ot.setBinding({u_MaxDisplace:y*=.99});const _t=yield ot.getOutput();r?i.postMessage({type:hs.GPUEND,vertexEdgeData:_t}):a.forEach((Zt,at)=>{const Gn=_t[4*at],Rn=_t[4*at+1];Zt.x=Gn,Zt.y=Rn}),me&&me()}))()})}getType(){return"fruchterman-gpu"}}const j2=null,No='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',FP=null,uh='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var ru=function(n,r,i,s){function a(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(b){try{y(s.next(b))}catch(E){h(E)}}function g(b){try{y(s.throw(b))}catch(E){h(E)}}function y(b){b.done?u(b.value):a(b.value).then(p,g)}y((s=s.apply(n,r||[])).next())})};class y3 extends ls{constructor(r){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return ru(this,void 0,void 0,function*(){const r=this,i=r.nodes;if(!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const s=r.center;if(i.length===1){i[0].x=s[0],i[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}const a={},u={};i.forEach((h,p)=>{Hn(h.x)||(h.x=Math.random()*r.width),Hn(h.y)||(h.y=Math.random()*r.height),a[h.id]=h,u[h.id]=p}),r.nodeMap=a,r.nodeIdxMap=u,r.nodeStrength=_v(r.nodeStrength,1),r.edgeStrength=_v(r.edgeStrength,1),yield r.run()})}executeWithWorker(r,i){const s=this,a=s.nodes,u=s.center;if(!a||a.length===0)return;if(a.length===1){a[0].x=u[0],a[0].y=u[1];return}const h={},p={};a.forEach((g,y)=>{Hn(g.x)||(g.x=Math.random()*s.width),Hn(g.y)||(g.y=Math.random()*s.height),h[g.id]=g,p[g.id]=y}),s.nodeMap=h,s.nodeIdxMap=p,s.nodeStrength=_v(s.nodeStrength,1),s.edgeStrength=_v(s.edgeStrength,1),s.run(r,i)}run(r,i){return ru(this,void 0,void 0,function*(){const s=this,a=s.nodes,u=s.edges,h=s.maxIteration;!s.width&&typeof window<"u"&&(s.width=window.innerWidth),!s.height&&typeof window<"u"&&(s.height=window.innerHeight);const p=a.length;s.linkDistance=_v(s.linkDistance),s.edgeStrength=_v(s.edgeStrength);const{maxEdgePerVetex:g,array:y}=kP(a,u,s.linkDistance,s.edgeStrength);s.degrees=Ba(a.length,s.nodeIdxMap,u);const b=[],E=[],T=[],O=[],N=[],k=[],B=[];s.getMass||(s.getMass=at=>s.degrees[s.nodeIdxMap[at.id]]||1);const $=s.gravity,X=s.center;a.forEach((at,Gn)=>{b.push(s.getMass(at)),E.push(s.nodeStrength(at)),s.degrees[Gn]||(s.degrees[Gn]=0);let Rn=[X[0],X[1],$];if(s.getCenter){const Jn=s.getCenter(at,s.degrees[Gn]);Jn&&Hn(Jn[0])&&Hn(Jn[1])&&Hn(Jn[2])&&(Rn=Jn)}T.push(Rn[0]),O.push(Rn[1]),N.push(Rn[2]),Hn(at.fx)&&Hn(at.fy)?(k.push(at.fx||.001),B.push(at.fy||.001)):(k.push(0),B.push(0))});const ne=v3([b,s.degrees,E,k]),be=v3([T,O,N,B]),me=s.workerEnabled;let je;me?je=hw.create({canvas:r,engineOptions:{supportCompute:!0}}):je=hw.create({engineOptions:{supportCompute:!0}});const ot=s.onLayoutEnd,ct=[];y.forEach(at=>{ct.push(at)});for(let at=0;at<4;at++)ct.push(0);const Xt=je.createKernel(No).setDispatch([p,1,1]).setBinding({u_Data:y,u_damping:s.damping,u_maxSpeed:s.maxSpeed,u_minMovement:s.minMovement,u_coulombDisScale:s.coulombDisScale,u_factor:s.factor,u_NodeAttributeArray1:ne,u_NodeAttributeArray2:be,MAX_EDGE_PER_VERTEX:g,VERTEX_COUNT:p,u_AveMovement:ct,u_interval:s.interval}),_t=je.createKernel(uh).setDispatch([1,1,1]).setBinding({u_Data:y,VERTEX_COUNT:p,u_AveMovement:[0,0,0,0]});yield(()=>ru(this,void 0,void 0,function*(){for(let Gn=0;Gn<h;Gn++){yield Xt.execute(),_t.setBinding({u_Data:Xt}),yield _t.execute();const Rn=Math.max(.02,s.interval-Gn*.002);Xt.setBinding({u_interval:Rn,u_AveMovement:_t})}const at=yield Xt.getOutput();r?i.postMessage({type:hs.GPUEND,vertexEdgeData:at}):a.forEach((Gn,Rn)=>{const Jn=at[4*Rn],Li=at[4*Rn+1];Gn.x=Jn,Gn.y=Li}),ot&&ot()}))()})}getType(){return"gForce-gpu"}}class b3 extends ls{constructor(r){super(),this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(r)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const r=this,i=r.nodes,s=r.center;if(r.comboTree={id:"comboTreeRoot",depth:-1,children:r.comboTrees},!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(i.length===1){i[0].x=s[0],i[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}r.initVals(),r.run(),r.onLayoutEnd&&r.onLayoutEnd()}run(){const r=this,i=r.nodes,s=r.previousLayouted?r.maxIteration/5:r.maxIteration;!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight);const a=r.center,u=r.velocityDecay,h=r.comboMap;r.previousLayouted||r.initPos(h);for(let y=0;y<s;y++){const b=[];i.forEach((E,T)=>{b[T]={x:0,y:0}}),r.applyCalculate(b),r.applyComboCenterForce(b),i.forEach((E,T)=>{!Hn(E.x)||!Hn(E.y)||(E.x+=b[T].x*u,E.y+=b[T].y*u)}),r.alpha+=(r.alphaTarget-r.alpha)*r.alphaDecay,r.onTick()}const p=[0,0];i.forEach(y=>{!Hn(y.x)||!Hn(y.y)||(p[0]+=y.x,p[1]+=y.y)}),p[0]/=i.length,p[1]/=i.length;const g=[a[0]-p[0],a[1]-p[1]];i.forEach((y,b)=>{!Hn(y.x)||!Hn(y.y)||(y.x+=g[0],y.y+=g[1])}),r.combos.forEach(y=>{const b=h[y.id];b&&b.empty&&(y.x=b.cx||y.x,y.y=b.cy||y.y)}),r.previousLayouted=!0}initVals(){const r=this,i=r.edges,s=r.nodes,a=r.combos,u={},h={},p={};s.forEach((_t,Zt)=>{h[_t.id]=_t,p[_t.id]=Zt}),r.nodeMap=h,r.indexMap=p;const g={};a.forEach(_t=>{g[_t.id]=_t}),r.oriComboMap=g,r.comboMap=r.getComboMap();const y=r.preventOverlap;r.preventComboOverlap=r.preventComboOverlap||y,r.preventNodeOverlap=r.preventNodeOverlap||y;const b=r.collideStrength;b&&(r.comboCollideStrength=b,r.nodeCollideStrength=b),r.comboCollideStrength=r.comboCollideStrength?r.comboCollideStrength:0,r.nodeCollideStrength=r.nodeCollideStrength?r.nodeCollideStrength:0;for(let _t=0;_t<i.length;++_t){const Zt=vi(i[_t],"source"),at=vi(i[_t],"target");u[Zt]?u[Zt]++:u[Zt]=1,u[at]?u[at]++:u[at]=1}const E=[];for(let _t=0;_t<i.length;++_t){const Zt=vi(i[_t],"source"),at=vi(i[_t],"target");E[_t]=u[Zt]/(u[Zt]+u[at])}this.bias=E;const T=r.nodeSize,O=r.nodeSpacing;let N,k;if(Hn(O)?k=()=>O:wu(O)?k=O:k=()=>0,this.nodeSpacing=k,!T)N=_t=>_t.size?Ds(_t.size)?(_t.size[0]>_t.size[1]?_t.size[0]:_t.size[1])/2:ia(_t.size)?(_t.size.width>_t.size.height?_t.size.width:_t.size.height)/2:_t.size/2:10;else if(wu(T))N=_t=>T(_t);else if(Ds(T)){const Zt=(T[0]>T[1]?T[0]:T[1])/2;N=at=>Zt}else{const _t=T/2;N=Zt=>_t}this.nodeSize=N;const B=r.comboSpacing;let $;Hn(B)?$=()=>B:wu(B)?$=B:$=()=>0,this.comboSpacing=$;const X=r.comboPadding;let ne;Hn(X)?ne=()=>X:Ds(X)?ne=()=>Math.max.apply(null,X):wu(X)?ne=X:ne=()=>0,this.comboPadding=ne;let be=this.linkDistance,me;be||(be=10),Hn(be)?me=_t=>be:me=be,this.linkDistance=me;let je=this.edgeStrength,ot;je||(je=1),Hn(je)?ot=_t=>je:ot=je,this.edgeStrength=ot;let ct=this.nodeStrength,Xt;ct||(ct=30),Hn(ct)?Xt=_t=>ct:Xt=ct,this.nodeStrength=Xt}initPos(r){this.nodes.forEach((a,u)=>{const h=a.comboId,p=r[h];h&&p?(a.x=p.cx+100/(u+1),a.y=p.cy+100/(u+1)):(a.x=100/(u+1),a.y=100/(u+1))})}getComboMap(){const r=this,i=r.nodeMap,s=r.comboTrees,a=r.oriComboMap,u={};return(s||[]).forEach(h=>{const p=[];gl(h,g=>{if(g.itemType==="node"||!a[g.id])return!0;if(u[g.id]===void 0){const E={id:g.id,name:g.id,cx:0,cy:0,count:0,depth:r.oriComboMap[g.id].depth||0,children:[]};u[g.id]=E}const y=g.children;y&&y.forEach(E=>{if(!u[E.id]&&!i[E.id])return!0;p.push(E)});const b=u[g.id];if(b.cx=0,b.cy=0,p.length===0){b.empty=!0;const E=a[g.id];b.cx=E.x,b.cy=E.y}return p.forEach(E=>{if(b.count++,E.itemType!=="node"){const O=u[E.id];Hn(O.cx)&&(b.cx+=O.cx),Hn(O.cy)&&(b.cy+=O.cy);return}const T=i[E.id];!T||(Hn(T.x)&&(b.cx+=T.x),Hn(T.y)&&(b.cy+=T.y))}),b.cx/=b.count||1,b.cy/=b.count||1,b.children=p,!0})}),u}applyComboCenterForce(r){const i=this,s=i.gravity,a=i.comboGravity||s,u=this.alpha,h=i.comboTrees,p=i.indexMap,g=i.nodeMap,y=i.comboMap;(h||[]).forEach(b=>{gl(b,E=>{if(E.itemType==="node"||!y[E.id])return!0;const O=y[E.id],N=(O.depth+1)/10*.5,k=O.cx,B=O.cy;return O.cx=0,O.cy=0,O.children.forEach($=>{if($.itemType!=="node"){const ct=y[$.id];ct&&Hn(ct.cx)&&(O.cx+=ct.cx),ct&&Hn(ct.cy)&&(O.cy+=ct.cy);return}const X=g[$.id],ne=X.x-k||.005,be=X.y-B||.005,me=Math.sqrt(ne*ne+be*be),je=p[X.id],ot=a*u/me*N;r[je].x-=ne*ot,r[je].y-=be*ot,Hn(X.x)&&(O.cx+=X.x),Hn(X.y)&&(O.cy+=X.y)}),O.cx/=O.count||1,O.cy/=O.count||1,!0})})}applyCalculate(r){const i=this,s=i.comboMap,a=i.nodes,u={};a.forEach((p,g)=>{a.forEach((y,b)=>{if(g<b)return;const E=p.x-y.x||.005,T=p.y-y.y||.005;let O=E*E+T*T;const N=Math.sqrt(O);O<1&&(O=N),u[`${p.id}-${y.id}`]={vx:E,vy:T,vl2:O,vl:N},u[`${y.id}-${p.id}`]={vl2:O,vl:N,vx:-E,vy:-T}})}),i.updateComboSizes(s),i.calRepulsive(r,u),i.calAttractive(r,u),i.preventComboOverlap&&i.comboNonOverlapping(r,s)}updateComboSizes(r){const i=this,s=i.comboTrees,a=i.nodeMap,u=i.nodeSize,h=i.comboSpacing,p=i.comboPadding;(s||[]).forEach(g=>{const y=[];gl(g,b=>{if(b.itemType==="node")return!0;const E=r[b.id];if(!E)return!1;const T=b.children;T&&T.forEach(k=>{!r[k.id]&&!a[k.id]||y.push(k)}),E.minX=1/0,E.minY=1/0,E.maxX=-1/0,E.maxY=-1/0,y.forEach(k=>{if(k.itemType!=="node")return!0;const B=a[k.id];if(!B)return!0;const $=u(B),X=B.x-$,ne=B.y-$,be=B.x+$,me=B.y+$;E.minX>X&&(E.minX=X),E.minY>ne&&(E.minY=ne),E.maxX<be&&(E.maxX=be),E.maxY<me&&(E.maxY=me)});let O=i.oriComboMap[b.id].size||10;Ds(O)&&(O=O[0]);const N=Math.max(E.maxX-E.minX,E.maxY-E.minY,O);return E.r=N/2+h(E)/2+p(E),!0})})}comboNonOverlapping(r,i){const s=this,a=s.comboTree,u=s.comboCollideStrength,h=s.indexMap,p=s.nodeMap;gl(a,g=>{if(!i[g.id]&&!p[g.id]&&g.id!=="comboTreeRoot")return!1;const y=g.children;return y&&y.length>1&&y.forEach((b,E)=>{if(b.itemType==="node")return!1;const T=i[b.id];!T||y.forEach((O,N)=>{if(E<=N||O.itemType==="node")return!1;const k=i[O.id];if(!k)return!1;const B=T.cx-k.cx||.005,$=T.cy-k.cy||.005,X=B*B+$*$,ne=T.r||1,be=k.r||1,me=ne+be,je=be*be,ot=ne*ne;if(X<me*me){const ct=b.children;if(!ct||ct.length===0)return!1;const Xt=O.children;if(!Xt||Xt.length===0)return!1;const _t=Math.sqrt(X),Zt=(me-_t)/_t*u,at=B*Zt,Gn=$*Zt,Rn=je/(ot+je),Jn=1-Rn;ct.forEach(Li=>{if(Li.itemType!=="node")return!1;if(!p[Li.id])return;const Gi=h[Li.id];Xt.forEach(Zr=>{if(Zr.itemType!=="node"||!p[Zr.id])return!1;const jo=h[Zr.id];r[Gi].x+=at*Rn,r[Gi].y+=Gn*Rn,r[jo].x-=at*Jn,r[jo].y-=Gn*Jn})})}})}),!0})}calRepulsive(r,i){const s=this,a=s.nodes,u=s.width*s.optimizeRangeFactor,h=s.nodeStrength,p=s.alpha,g=s.nodeCollideStrength,y=s.preventNodeOverlap,b=s.nodeSize,E=s.nodeSpacing,T=s.depthRepulsiveForceScale,O=s.center;a.forEach((N,k)=>{if(!(!N.x||!N.y)){if(O){const B=s.gravity,$=N.x-O[0]||.005,X=N.y-O[1]||.005,ne=Math.sqrt($*$+X*X);r[k].x-=$*B*p/ne,r[k].y-=X*B*p/ne}a.forEach((B,$)=>{if(k===$||!B.x||!B.y)return;const{vl2:X,vl:ne}=i[`${N.id}-${B.id}`];if(ne>u)return;const{vx:be,vy:me}=i[`${N.id}-${B.id}`];let je=Math.log(Math.abs(B.depth-N.depth)/10)+1||1;je=je<1?1:je,B.comboId!==N.comboId&&(je+=1);const ot=je?Math.pow(T,je):1,ct=h(B)*p/X*ot;if(r[k].x+=be*ct,r[k].y+=me*ct,k<$&&y){const Xt=b(N)+E(N)||1,_t=b(B)+E(B)||1,Zt=Xt+_t;if(X<Zt*Zt){const at=(Zt-ne)/ne*g,Gn=_t*_t;let Rn=Gn/(Xt*Xt+Gn);const Jn=be*at,Li=me*at;r[k].x+=Jn*Rn,r[k].y+=Li*Rn,Rn=1-Rn,r[$].x-=Jn*Rn,r[$].y-=Li*Rn}}})}})}calAttractive(r,i){const s=this,a=s.edges,u=s.linkDistance,h=s.alpha,p=s.edgeStrength,g=s.bias,y=s.depthAttractiveForceScale;a.forEach((b,E)=>{const T=vi(b,"source"),O=vi(b,"target");if(!T||!O||T===O)return;const N=s.indexMap[T],k=s.indexMap[O],B=s.nodeMap[T],$=s.nodeMap[O];if(!B||!$)return;let X=B.depth===$.depth?0:Math.log(Math.abs(B.depth-$.depth)/10);B.comboId===$.comboId&&(X=X/2);let ne=X?Math.pow(y,X):1;if(B.comboId!==$.comboId&&ne===1?ne=y/2:B.comboId===$.comboId&&(ne=2),!Hn($.x)||!Hn(B.x)||!Hn($.y)||!Hn(B.y))return;const{vl:be,vx:me,vy:je}=i[`${O}-${T}`],ot=(be-u(b))/be*h*p(b)*ne,ct=me*ot,Xt=je*ot,_t=g[E];r[k].x-=ct*_t,r[k].y-=Xt*_t,r[N].x+=ct*(1-_t),r[N].y+=Xt*(1-_t)})}getType(){return"comboForce"}}class sf{constructor(r){this.id=r.id||0,this.rx=r.rx,this.ry=r.ry,this.fx=0,this.fy=0,this.mass=r.mass,this.degree=r.degree,this.g=r.g||0}distanceTo(r){const i=this.rx-r.rx,s=this.ry-r.ry;return Math.hypot(i,s)}setPos(r,i){this.rx=r,this.ry=i}resetForce(){this.fx=0,this.fy=0}addForce(r){const i=r.rx-this.rx,s=r.ry-this.ry;let a=Math.hypot(i,s);a=a<1e-4?1e-4:a;const u=this.g*(this.degree+1)*(r.degree+1)/a;this.fx+=u*i/a,this.fy+=u*s/a}in(r){return r.contains(this.rx,this.ry)}add(r){const i=this.mass+r.mass,s=(this.rx*this.mass+r.rx*r.mass)/i,a=(this.ry*this.mass+r.ry*r.mass)/i,u=this.degree+r.degree,h={rx:s,ry:a,mass:i,degree:u};return new sf(h)}}class Av{constructor(r){this.xmid=r.xmid,this.ymid=r.ymid,this.length=r.length,this.massCenter=r.massCenter||[0,0],this.mass=r.mass||1}getLength(){return this.length}contains(r,i){const s=this.length/2;return r<=this.xmid+s&&r>=this.xmid-s&&i<=this.ymid+s&&i>=this.ymid-s}NW(){const r=this.xmid-this.length/4,i=this.ymid+this.length/4,s=this.length/2,a={xmid:r,ymid:i,length:s};return new Av(a)}NE(){const r=this.xmid+this.length/4,i=this.ymid+this.length/4,s=this.length/2,a={xmid:r,ymid:i,length:s};return new Av(a)}SW(){const r=this.xmid-this.length/4,i=this.ymid-this.length/4,s=this.length/2,a={xmid:r,ymid:i,length:s};return new Av(a)}SE(){const r=this.xmid+this.length/4,i=this.ymid-this.length/4,s=this.length/2,a={xmid:r,ymid:i,length:s};return new Av(a)}}class Cd{constructor(r){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,r!=null&&(this.quad=r)}insert(r){if(this.body==null){this.body=r;return}this._isExternal()?(this.quad&&(this.NW=new Cd(this.quad.NW()),this.NE=new Cd(this.quad.NE()),this.SW=new Cd(this.quad.SW()),this.SE=new Cd(this.quad.SE())),this._putBody(this.body),this._putBody(r),this.body=this.body.add(r)):(this.body=this.body.add(r),this._putBody(r))}_putBody(r){!this.quad||(r.in(this.quad.NW())&&this.NW?this.NW.insert(r):r.in(this.quad.NE())&&this.NE?this.NE.insert(r):r.in(this.quad.SW())&&this.SW?this.SW.insert(r):r.in(this.quad.SE())&&this.SE&&this.SE.insert(r))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(r){if(!(this.body==null||r===this.body))if(this._isExternal())r.addForce(this.body);else{const i=this.quad?this.quad.getLength():0,s=this.body.distanceTo(r);i/s<this.theta?r.addForce(this.body):(this.NW&&this.NW.updateForce(r),this.NE&&this.NE.updateForce(r),this.SW&&this.SW.updateForce(r),this.SE&&this.SE.updateForce(r))}}}class Io extends ls{constructor(r){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(r)}getDefaultCfg(){return{}}execute(){const r=this,{nodes:i,onLayoutEnd:s,prune:a}=r;let u=r.maxIteration;!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight);const h=[],p=i.length;for(let g=0;g<p;g+=1){const y=i[g];let b=10,E=10;Hn(y.size)&&(b=y.size,E=y.size),Ds(y.size)?(isNaN(y.size[0])||(b=y.size[0]),isNaN(y.size[1])||(E=y.size[1])):ia(y.size)&&(b=y.size.width,E=y.size.height),r.getWidth&&!isNaN(r.getWidth(y))&&(E=r.getWidth(y)),r.getHeight&&!isNaN(r.getHeight(y))&&(b=r.getHeight(y));const T=Math.max(b,E);h.push(T)}r.barnesHut===void 0&&p>250&&(r.barnesHut=!0),r.prune===void 0&&p>100&&(r.prune=!0),this.maxIteration===0&&!r.prune?(u=250,p<=200&&p>100?u=1e3:p>200&&(u=1200),this.maxIteration=u):this.maxIteration===0&&a&&(u=100,p<=200&&p>100?u=500:p>200&&(u=950),this.maxIteration=u),r.kr||(r.kr=50,p>100&&p<=500?r.kr=20:p>500&&(r.kr=1)),r.kg||(r.kg=20,p>100&&p<=500?r.kg=10:p>500&&(r.kg=1)),this.nodes=r.updateNodesByForces(h),s()}updateNodesByForces(r){const i=this,{edges:s,maxIteration:a}=i;let u=i.nodes;const h=s.filter(N=>{const k=vi(N,"source"),B=vi(N,"target");return k!==B}),p=u.length,g=h.length,y=[],b={},E={},T=[];for(let N=0;N<p;N+=1)b[u[N].id]=N,y[N]=0,(u[N].x===void 0||isNaN(u[N].x))&&(u[N].x=Math.random()*1e3),(u[N].y===void 0||isNaN(u[N].y))&&(u[N].y=Math.random()*1e3),T.push({x:u[N].x,y:u[N].y});for(let N=0;N<g;N+=1){let k,B,$=0,X=0;for(let ne=0;ne<p;ne+=1){const be=vi(h[N],"source"),me=vi(h[N],"target");u[ne].id===be?(k=u[ne],$=ne):u[ne].id===me&&(B=u[ne],X=ne),E[N]={sourceIdx:$,targetIdx:X}}k&&(y[b[k.id]]+=1),B&&(y[b[B.id]]+=1)}let O=a;if(u=this.iterate(O,b,E,g,y,r),i.prune){for(let N=0;N<g;N+=1)y[E[N].sourceIdx]<=1?(u[E[N].sourceIdx].x=u[E[N].targetIdx].x,u[E[N].sourceIdx].y=u[E[N].targetIdx].y):y[E[N].targetIdx]<=1&&(u[E[N].targetIdx].x=u[E[N].sourceIdx].x,u[E[N].targetIdx].y=u[E[N].sourceIdx].y);i.prune=!1,i.barnesHut=!1,O=100,u=this.iterate(O,b,E,g,y,r)}return u}iterate(r,i,s,a,u,h){const p=this;let{nodes:g}=p;const{kr:y,preventOverlap:b}=p,{barnesHut:E}=p,T=g.length;let O=0;const N=100;let k=r;const B=50;let $=[];const X=[],ne=[];for(let be=0;be<T;be+=1)if($[2*be]=0,$[2*be+1]=0,E){const me={id:be,rx:g[be].x,ry:g[be].y,mass:1,g:y,degree:u[be]};ne[be]=new sf(me)}for(;k>0;){for(let me=0;me<T;me+=1)X[2*me]=$[2*me],X[2*me+1]=$[2*me+1],$[2*me]=0,$[2*me+1]=0;$=this.getAttrForces(k,B,a,i,s,u,h,$),E&&(b&&k>B||!b)?$=this.getOptRepGraForces($,ne,u):$=this.getRepGraForces(k,B,$,N,h,u);const be=this.updatePos($,X,O,u);g=be.nodes,O=be.sg,k--,p.tick&&p.tick()}return g}getAttrForces(r,i,s,a,u,h,p,g){const y=this,{nodes:b,preventOverlap:E,dissuadeHubs:T,mode:O,prune:N}=y;for(let k=0;k<s;k+=1){const B=b[u[k].sourceIdx],$=u[k].sourceIdx,X=b[u[k].targetIdx],ne=u[k].targetIdx;if(N&&(h[$]<=1||h[ne]<=1))continue;const be=[X.x-B.x,X.y-B.y];let me=Math.hypot(be[0],be[1]);me=me<1e-4?1e-4:me,be[0]=be[0]/me,be[1]=be[1]/me,E&&r<i&&(me=me-p[$]-p[ne]);let je=me,ot=je;O==="linlog"&&(je=Math.log(1+me),ot=je),T&&(je=me/h[$],ot=me/h[ne]),E&&r<i&&me<=0?(je=0,ot=0):E&&r<i&&me>0&&(je=me,ot=me),g[2*a[B.id]]+=je*be[0],g[2*a[X.id]]-=ot*be[0],g[2*a[B.id]+1]+=je*be[1],g[2*a[X.id]+1]-=ot*be[1]}return g}getRepGraForces(r,i,s,a,u,h){const p=this,{nodes:g,preventOverlap:y,kr:b,kg:E,center:T,prune:O}=p,N=g.length;for(let k=0;k<N;k+=1){for(let ne=k+1;ne<N;ne+=1){if(O&&(h[k]<=1||h[ne]<=1))continue;const be=[g[ne].x-g[k].x,g[ne].y-g[k].y];let me=Math.hypot(be[0],be[1]);me=me<1e-4?1e-4:me,be[0]=be[0]/me,be[1]=be[1]/me,y&&r<i&&(me=me-u[k]-u[ne]);let je=b*(h[k]+1)*(h[ne]+1)/me;y&&r<i&&me<0?je=a*(h[k]+1)*(h[ne]+1):y&&r<i&&me===0?je=0:y&&r<i&&me>0&&(je=b*(h[k]+1)*(h[ne]+1)/me),s[2*k]-=je*be[0],s[2*ne]+=je*be[0],s[2*k+1]-=je*be[1],s[2*ne+1]+=je*be[1]}const B=[g[k].x-T[0],g[k].y-T[1]],$=Math.hypot(B[0],B[1]);B[0]=B[0]/$,B[1]=B[1]/$;const X=E*(h[k]+1);s[2*k]-=X*B[0],s[2*k+1]-=X*B[1]}return s}getOptRepGraForces(r,i,s){const a=this,{nodes:u,kg:h,center:p,prune:g}=a,y=u.length;let b=9e10,E=-9e10,T=9e10,O=-9e10;for(let X=0;X<y;X+=1)g&&s[X]<=1||(i[X].setPos(u[X].x,u[X].y),u[X].x>=E&&(E=u[X].x),u[X].x<=b&&(b=u[X].x),u[X].y>=O&&(O=u[X].y),u[X].y<=T&&(T=u[X].y));const N=Math.max(E-b,O-T),k={xmid:(E+b)/2,ymid:(O+T)/2,length:N,massCenter:p,mass:y},B=new Av(k),$=new Cd(B);for(let X=0;X<y;X+=1)g&&s[X]<=1||i[X].in(B)&&$.insert(i[X]);for(let X=0;X<y;X+=1){if(g&&s[X]<=1)continue;i[X].resetForce(),$.updateForce(i[X]),r[2*X]-=i[X].fx,r[2*X+1]-=i[X].fy;const ne=[u[X].x-p[0],u[X].y-p[1]];let be=Math.hypot(ne[0],ne[1]);be=be<1e-4?1e-4:be,ne[0]=ne[0]/be,ne[1]=ne[1]/be;const me=h*(s[X]+1);r[2*X]-=me*ne[0],r[2*X+1]-=me*ne[1]}return r}updatePos(r,i,s,a){const u=this,{nodes:h,ks:p,tao:g,prune:y,ksmax:b}=u,E=h.length,T=[],O=[];let N=0,k=0;for(let $=0;$<E;$+=1){if(y&&a[$]<=1)continue;const X=[r[2*$]-i[2*$],r[2*$+1]-i[2*$+1]],ne=Math.hypot(X[0],X[1]),be=[r[2*$]+i[2*$],r[2*$+1]+i[2*$+1]],me=Math.hypot(be[0],be[1]);T[$]=ne,O[$]=me/2,N+=(a[$]+1)*T[$],k+=(a[$]+1)*O[$]}const B=s;s=g*k/N,B!==0&&(s=s>1.5*B?1.5*B:s);for(let $=0;$<E;$+=1){if(y&&a[$]<=1)continue;let X=p*s/(1+s*Math.sqrt(T[$])),ne=Math.hypot(r[2*$],r[2*$+1]);ne=ne<1e-4?1e-4:ne;const be=b/ne;X=X>be?be:X;const me=X*r[2*$],je=X*r[2*$+1];h[$].x+=me,h[$].y+=je}return{nodes:h,sg:s}}}class op{constructor(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}init(r,i,s){this.cells=[],this.CELL_W=s.CELL_W||op.DEFAULT_CELL_W,this.CELL_H=s.CELL_H||op.DEFAULT_CELL_H,this.columnNum=Math.ceil(r/this.CELL_W),this.rowNum=Math.ceil(i/this.CELL_H),op.MIN_DIST=Math.pow(r,2)+Math.pow(i,2);for(let a=0;a<this.columnNum;a++){const u=[];for(let h=0;h<this.rowNum;h++){const p={dx:a,dy:h,x:a*this.CELL_W,y:h*this.CELL_H,occupied:!1};u.push(p)}this.cells.push(u)}}findGridByNodeId(r){var i,s;for(let a=0;a<this.columnNum;a++)for(let u=0;u<this.rowNum;u++)if(this.cells[a][u].node&&((s=(i=this.cells[a][u])===null||i===void 0?void 0:i.node)===null||s===void 0?void 0:s.id)===r)return{column:a,row:u};return null}sqdist(r,i){return Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)}occupyNearest(r){let i=op.MIN_DIST,s,a=null;for(let u=0;u<this.columnNum;u++)for(let h=0;h<this.rowNum;h++)!this.cells[u][h].occupied&&(s=this.sqdist(r,this.cells[u][h]))<i&&(i=s,a=this.cells[u][h]);return a&&(a.occupied=!0),a}insertColumn(r,i){if(!(i<=0)){for(let s=0;s<i;s++){this.cells[s+this.columnNum]=[];for(let a=0;a<this.rowNum;a++)this.cells[s+this.columnNum][a]={dx:s,dy:a,x:s*this.CELL_W,y:a*this.CELL_H,occupied:!1,node:null}}for(let s=this.columnNum-1;s>r;s--)for(let a=0;a<this.rowNum;a++)this.cells[s+i][a]=Object.assign(Object.assign({},this.cells[s][a]),{x:(s+i)*this.CELL_W,y:a*this.CELL_H}),this.cells[s][a]={x:s*this.CELL_W,y:a*this.CELL_H,occupied:!0,node:null};for(let s=0;s<this.additionColumn.length;s++)this.additionColumn[s]>=r&&(this.additionColumn[s]+=i);for(let s=0;s<i;s++)this.additionColumn.push(r+s+1);this.columnNum+=i}}insertRow(r,i){if(!(i<=0)){for(let s=0;s<i;s++)for(let a=0;a<this.columnNum;a++)this.cells[a][s+this.rowNum]={dx:a,dy:s,x:a*this.CELL_W,y:s*this.CELL_H,occupied:!1,node:null};for(let s=0;s<this.columnNum;s++)for(let a=this.rowNum-1;a>r;a--)this.cells[s][a+i]=Object.assign(Object.assign({},this.cells[s][a]),{dx:s,dy:a+i,x:s*this.CELL_W,y:(a+i)*this.CELL_H}),this.cells[s][a]={dx:s,dy:a,x:s*this.CELL_W,y:a*this.CELL_H,occupied:!1,node:null};for(let s=0;s<this.additionRow.length;s++)this.additionRow[s]>=r&&(this.additionRow[s]+=i);for(let s=0;s<i;s++)this.additionRow.push(r+s+1);this.rowNum+=i}}getNodes(){const r=[];for(let i=0;i<this.columnNum;i++)for(let s=0;s<this.rowNum;s++)this.cells[i][s].node&&r.push(this.cells[i][s]);return r}}op.MIN_DIST=50,op.DEFAULT_CELL_W=80,op.DEFAULT_CELL_H=80;function x3(n,r){if(!n.nodes||n.nodes.length===0)return n;const i=r.width,s=r.height,a=r.nodeMinGap;let u=1e4,h=1e4;n.nodes.forEach(g=>{const y=g.size[0]||50,b=g.size[1]||50;u=Math.min(y,u),h=Math.min(b,h)});const p=new op;p.init(i,s,{CELL_H:h,CELL_W:u}),n.nodes.forEach(g=>{const y=p.occupyNearest(g);y&&(y.node={id:g.id,size:g.size},g.x=y.x,g.y=y.y,g.dx=y.dx,g.dy=y.dy)});for(let g=0;g<n.nodes.length;g++){const y=n.nodes[g],b=p.findGridByNodeId(y.id);if(!b)throw new Error("can not find node cell");const{column:E,row:T}=b;if(y.size[0]+a>u){const O=Math.ceil((y.size[0]+a)/u)-1;let N=O;for(let k=0;k<O&&(p.additionColumn.indexOf(E+k+1)>-1&&!p.cells[E+k+1][T].node);k++)N--;p.insertColumn(E,N)}if(y.size[1]+a>h){const O=Math.ceil((y.size[1]+a)/h)-1;let N=O;for(let k=0;k<O&&(p.additionRow.indexOf(T+k+1)>-1&&!p.cells[E][T+k+1].node);k++)N--;p.insertRow(T,N)}}for(let g=0;g<p.columnNum;g++)for(let y=0;y<p.rowNum;y++){const b=p.cells[g][y];if(b.node){const E=n.nodes.find(T=>{var O;return T.id===((O=b?.node)===null||O===void 0?void 0:O.id)});E&&(E.x=b.x+E.size[0]/2,E.y=b.y+E.size[1]/2)}}}const Tv=1200,pw=800,af=1e7,_y=10,Mv=3.141592653589793,H2=1.5707963267948966,$2=Mv*.375,C3=Mv*.625,W2=new Map,bA=10,w3=10;let Qi=.8;const xA=.1,X2=.5;function E3(n,r,i){const s=n.x-n.size[0]/2,a=n.y-n.size[1]/2,u=n.x+n.size[0]/2,h=n.y+n.size[1]/2,p=r.x-r.size[0]/2,g=r.y-r.size[1]/2,y=r.x+r.size[0]/2,b=r.y+r.size[1]/2,E=n.x,T=n.y,O=r.x,N=r.y,k=O-E,B=Math.atan2(k,N-T);let $=0,X=0,ne=0,be=0;B>H2?(X=a-b,$=p-u,ne=parseFloat(X?(X/Math.cos(B)).toFixed(2):$.toFixed(2)),be=parseFloat($?($/Math.sin(B)).toFixed(2):X.toFixed(2))):0<B&&B<=H2?(X=g-h,$=p-u,X>$?ne=be=parseFloat(X?(X/Math.cos(B)).toFixed(2):$.toFixed(2)):ne=be=parseFloat($?($/Math.sin(B)).toFixed(2):X.toFixed(2))):B<-H2?(X=a-b,$=-(y-s),X>$?ne=be=parseFloat(X?(X/Math.cos(B)).toFixed(2):$.toFixed(2)):ne=be=parseFloat($?($/Math.sin(B)).toFixed(2):X.toFixed(2))):(X=g-h,Math.abs(k)>(u-s)/2?$=s-y:$=k,X>$?ne=be=parseFloat(X?(X/Math.cos(B)).toFixed(2):$.toFixed(2)):ne=be=parseFloat($&&B!==0?($/Math.sin(B)).toFixed(2):X.toFixed(2)));const me=parseFloat(B.toFixed(2));let je=i;return i&&(je=$2<me&&me<C3),{distance:Math.abs(ne<be?ne:be),isHoriz:je}}function CA(n,r){const s=(W2.get(n.id)||[]).find(ot=>ot.source===r.id||ot.target===r.id),a=n.size[0]*n.size[1],u=r.size[0]*r.size[1],h=a>u?r:n,p=a>u?n:r,g=h.x-h.size[0]/2,y=h.y-h.size[1]/2,b=h.x+h.size[0]/2,E=h.y+h.size[1]/2,T=p.x-p.size[0]/2,O=p.y-p.size[1]/2,N=p.x+p.size[0]/2,k=p.y+p.size[1]/2,B=h.x,$=h.y,X=p.x,ne=p.y,be=b>=T&&N>=g&&E>=O&&k>=y;let me=0,je=0;if(be){je=Math.sqrt(Math.pow(X-B,2)+Math.pow(ne-$,2));const ot=g>T?g:T,ct=y>O?y:O,Xt=b<N?b:N,_t=E<k?E:k,Zt=Xt-ot,at=_t-ct,Gn=Zt*at;je===0&&(je=1e-7),me=_y*1/je*100+Gn,me*=af}else{let ot=!1;const ct=E3(h,p,ot);je=ct.distance,ot=ct.isHoriz,je<=_y?je!==0?s?me+=_y+af*1/je:me+=_y+af*_y/je:me+=af:(me+=je,s&&(me+=je*je))}return me}function v0(n){let r=0;for(let i=0;i<n.length;i++){const s=n[i];(s.x<0||s.y<0||s.x>Tv||s.y>pw)&&(r+=1e12);for(let a=i+1;a<n.length;a++)r+=CA(s,n[a])}return r}function wd(n,r,i,s){const a=new Map;i.forEach((g,y)=>{a.set(g.id,g)});const u=s.filter(g=>g.source===n.id||g.target===n.id)||[],h=[];u.forEach(g=>{const y=g.source===n.id?g.target:g.source,b=a.get(y);b&&h.push(b)});let p=!0;for(let g=0;g<h.length;g++){const y=h[g],b=Math.atan((n.y-y.y)/(y.x-n.y))*180,E=Math.atan((r.y-y.y)/(y.x-r.y))*180,T=b<30||b>150,O=E<30||E>150,N=b>70&&b<110,k=E>70&&E<110;if(T&&!O||b*E<0){p=!1;break}else if(N&&!k||b*E<0){p=!1;break}else if((y.x-n.x)*(y.x-r.x)<0){p=!1;break}else if((y.y-n.y)*(y.y-r.y)<0){p=!1;break}}return p}function Ha(n,r){let i=!1;const s=1,a=bA*s,u=w3*s,h=[a,-a,0,0],p=[0,0,u,-u];for(let g=0;g<n.length;++g){const y=n[g];let b=wA(y,n);for(let E=0;E<h.length;E++)if(wd(y,{x:y.x+h[E],y:y.y+p[E]},n,r)){y.x+=h[E],y.y+=p[E];const O=wA(y,n),N=Math.random();O<b||N<Qi&&N>xA?(b=O,i=!0):(y.x-=h[E],y.y-=p[E])}}return Qi>xA&&(Qi*=X2),i?v0(n):0}function wA(n,r){let i=0;(n.x<0||n.y<0||n.x+n.size[0]+20>Tv||n.y+n.size[1]+20>pw)&&(i+=1e12);for(let s=0;s<r.length;++s)n.id!==r[s].id&&(i+=CA(n,r[s]));return i}function gw(n,r){if(n.length===0)return{nodes:n,edges:r};n.forEach(g=>{const y=r.filter(b=>b.source===g.id||b.target===g.id);W2.set(g,y)}),n.sort((g,y)=>{var b,E;return((b=W2.get(g.id))===null||b===void 0?void 0:b.length)-((E=W2.get(y.id))===null||E===void 0?void 0:E.length)});let i=v0(n),s=20,a=1,u=0;const h=50;let p=0;for(;s>0&&(p++,!(p>=h));){const g=Ha(n,r);g!==0&&(u=g),a=u-i,i=u,a===0?--s:s=20}return n.forEach(g=>{g.x=g.x-g.size[0]/2,g.y=g.y-g.size[1]/2}),{nodes:n,edges:r}}var _l=gw;function EA(n,r){const{nodes:i,edges:s}=n,a=r.width,u=r.height;if(!i?.length)return Promise.resolve();const h=[];i.forEach(N=>{if(s.filter(B=>B.source===N.id||B.target===N.id).length>1){const B=Object.assign({},N);delete B.size,h.push(B)}});const p=[];s.forEach(N=>{const k=h.find($=>$.id===N.source),B=h.find($=>$.id===N.target);k&&B&&p.push(N)});const g=new yc({type:"dagre",ranksep:r.nodeMinGap,nodesep:r.nodeMinGap}),{nodes:y}=g.layout({nodes:h,edges:p});i.forEach(N=>{const k=(y||[]).find(B=>B.id===N.id);N.x=k?.x||a/2,N.y=k?.y||u/2});const b=JSON.parse(JSON.stringify(i)),E=JSON.parse(JSON.stringify(s)),T=Mr().nodes(b).force("link",Fr(E).id(N=>N.id).distance(N=>p.find(B=>B.source===N.source&&B.target===N.target)?30:20)).force("charge",Tn()).force("center",dn(a/2,u/2)).force("x",$r(a/2)).force("y",Ti(u/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(N=>{T.on("end",()=>{i.forEach(me=>{const je=b.find(ot=>ot.id===me.id);je&&(me.x=je.x,me.y=je.y)});const k=Math.min(...i.map(me=>me.x)),B=Math.max(...i.map(me=>me.x)),$=Math.min(...i.map(me=>me.y)),X=Math.max(...i.map(me=>me.y)),ne=a/(B-k),be=u/(X-$);i.forEach(me=>{me.x!==void 0&&ne<1&&(me.x=(me.x-k)*ne),me.y!==void 0&&be<1&&(me.y=(me.y-$)*be)}),i.forEach(me=>{me.sizeTemp=me.size,me.size=[10,10]}),_l(i,s),i.forEach(me=>{me.size=me.sizeTemp||[],delete me.sizeTemp}),x3({nodes:i,edges:s},r),N()})})}class oc extends ls{constructor(r){super(),this.width=300,this.height=300,this.nodeMinGap=50,this.onLayoutEnd=()=>{},r&&this.updateCfg(r)}getDefaultCfg(){return{width:300,height:300,nodeMinGap:50}}execute(){const r=this,i=r.nodes,s=r.edges;return i?.forEach(a=>{a.size||(a.size=[50,50])}),EA({nodes:i,edges:s},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(()=>{r.onLayoutEnd&&r.onLayoutEnd()})}getType(){return"er"}}class S3 extends ls{constructor(r){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const r=this,i=r.nodes,s=.9,a=r.center;return!r.width&&typeof window<"u"&&(r.width=window.innerWidth),!r.height&&typeof window<"u"&&(r.height=window.innerHeight),i&&i.forEach(u=>{u.x=(Math.random()-.5)*s*r.width+a[0],u.y=(Math.random()-.5)*s*r.height+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:this.edges}}getType(){return"random"}}class cf{constructor(r){const i=getLayoutByName(r.type);this.layoutInstance=new i(r)}layout(r){return this.layoutInstance.layout(r)}updateCfg(r){this.layoutInstance.updateCfg(r)}init(r){this.layoutInstance.init(r)}execute(){this.layoutInstance.execute()}getDefaultCfg(){return this.layoutInstance.getDefaultCfg()}destroy(){return this.layoutInstance.destroy()}}const SA={force:Jr,fruchterman:Lx,forceAtlas2:Io,gForce:N0,dagre:yc,circular:Co,radial:Ix,concentric:Rx,grid:Ja,mds:Wp,comboForce:b3,random:S3,"gForce-gpu":y3,"fruchterman-gpu":m3,er:oc};var Ay;(function(n){n.command=ti.GRAPH_LAYOUT,n.hookKey="graphLayout"})(Ay||(Ay={}));let Ty=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().graphLayout.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{layoutType:h,layoutOptions:p,customLayout:g}=u;return yield(g||(E=>{const T=SA[h];return new T(Object.assign({},p)).layout(E)}))(u.graphData),{graphData:u.graphData}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Ty.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Ty.prototype,"init",null),Ty=(0,F.gn)([jt({token:{token:li,named:Ay.command.id}})],Ty);var Z2;(function(n){function r(s,a){return(0,ed.isEqual)(s,a)}n.isNodeEqual=r;function i(s,a){return(0,ed.isEqual)(s,a)}n.isEdgeEqual=i})(Z2||(Z2={}));var Ov;(function(n){n.command=ti.GRAPH_RENDER,n.hookKey="graphRender"})(Ov||(Ov={}));let Pv=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().graphRender.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),p=yield this.ctx.getGraphMeta(),{beforeRender:g,graphData:y,isNodeEqual:b,isEdgeEqual:E,afterRender:T}=u;return g&&g(p),yield this.doLoadGraph(h,y,b,E),T&&T(y,p),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this}),this.doLoadGraph=(r,i,s,a)=>(0,F.mG)(this,void 0,void 0,function*(){r?.isFrozen()||r?.freeze();const u=this.ctx.getCommands(),{addNodeConfigs:h,addEdgeConfigs:p,removeNodes:g,removeEdges:y,updateNodes:b,updateEdges:E}=this.graphDataDiff(r,i,s,a);for(const T of b){const O=T?.getData();yield u.executeCommand($i.UPDATE_NODE.id,{nodeConfig:O})}for(const T of E){const O=T?.getData();yield u.executeCommand(uo.UPDATE_EDGE.id,{edgeConfig:O})}for(const T of h)yield u.executeCommand($i.ADD_NODE.id,{nodeConfig:T,options:{isRenderGraph:!0}},{name:"remove servcie",handler:O=>(0,F.mG)(this,void 0,void 0,function*(){delete O.createNodeService})});yield u.executeCommand(Ms.INIT_GROUP.id,{graphData:{nodes:h,edges:[]}});for(const T of p)yield u.executeCommand(uo.ADD_EDGE.id,{edgeConfig:T,options:{isRenderGraph:!0}},{name:"remove servcie",handler:O=>(0,F.mG)(this,void 0,void 0,function*(){delete O.createEdgeService})});for(const T of g){const O=T?.getData();O.isGroup?yield u.executeCommand(Ms.DEL_GROUP.id,{nodeConfig:O}):yield u.executeCommand($i.DEL_NODE.id,{nodeConfig:O})}for(const T of y){const O=T?.getData();yield u.executeCommand(uo.DEL_EDGE.id,{edgeConfig:O})}r?.isFrozen()&&r?.unfreeze()})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}graphDataDiff(r,i,s,a){const{nodes:u,edges:h}=i,p=[];u.forEach($=>{r.getCellById($?.id)||p.push($)});const g=[],y=[],b=[];r.getNodes().forEach($=>{const X=u.find(ne=>ne?.id===$?.id);if(!X)b.push($);else{let ne=!0;s?ne=s($?.data,X):$?.data&&X&&(ne=Z2.isNodeEqual($?.data,X)),ne||$.setData(X,{deep:!1}),ne===!0?g.push($):y.push($)}});const T=[];h.forEach($=>{r.getCellById($?.id)||T.push($)});const O=[],N=[],k=[];return r.getEdges().forEach($=>{const X=h.find(ne=>ne?.id===$?.id);if(!X)k.push($);else{let ne=!0;a?ne=a($?.data,X):$?.data&&X&&(ne=Z2.isEdgeEqual($?.data,X)),ne||$.setData(X,{deep:!1}),ne===!0?O.push($):N.push($)}}),{addNodeConfigs:p,addEdgeConfigs:T,retainNodes:g,retainEdges:O,removeNodes:b,removeEdges:k,updateNodes:y,updateEdges:N}}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Pv.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Pv.prototype,"init",null),Pv=(0,F.gn)([jt({token:{token:li,named:Ov.command.id}})],Pv);var Y2;(function(n){n.command=ti.GRAPH_RESIZE,n.hookKey="graphResize"})(Y2||(Y2={}));let m0=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),s=this.ctx.getHooks(),a=yield this.ctx.getGraphConfig(),u=a.rootContainer.clientHeight,h=a.rootContainer.clientWidth,p=yield s.graphResize.call(r,g=>(0,F.mG)(this,void 0,void 0,function*(){const y=yield this.ctx.getX6Graph(),{width:b=h,height:E=u}=g;return y?.resize(b,E),{}}),i);return this.ctx.setResult(p),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],m0.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],m0.prototype,"init",null),m0=(0,F.gn)([jt({token:{token:li,named:Y2.command.id}})],m0);var dh;(function(n){n.command=ti.GRAPH_FULLSCREEN,n.hookKey="graphFullscreen"})(dh||(dh={}));let My=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),s=this.ctx.getHooks(),a=yield this.ctx.getGraphConfig(),{appContainer:u}=a;if(!u)return;const h=yield s.graphFullscreen.call(r,()=>(0,F.mG)(this,void 0,void 0,function*(){var p,g;let y=!1;return document.fullscreenElement?(g=document.exitFullscreen)===null||g===void 0||g.call(document):((p=u.requestFullscreen)===null||p===void 0||p.call(u),y=!0),{fulllscreen:y}}),i);return this.ctx.setResult(h),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],My.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],My.prototype,"init",null),My=(0,F.gn)([jt({token:{token:li,named:dh.command.id}})],My);var y0;(function(n){n.command=ti.GRAPH_ZOOM,n.MAX_SCALE=1.5,n.MIN_SCALE=.05,n.defaultZoomOptions={maxScale:n.MAX_SCALE,minScale:n.MIN_SCALE},n.hookKey="graphZoom"})(y0||(y0={}));let Oy=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().graphZoom.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{factor:p,zoomFitPadding:g=12,zoomOptions:y=y0.defaultZoomOptions}=u;return typeof p=="number"?h?.zoom(p,y||{}):p==="fit"?h?.zoomToFit(Object.assign(Object.assign({},y),{padding:g})):p==="real"&&(h?.scale(1),h?.centerContent()),{factor:p,zoomFitPadding:g,zoomOptions:y}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Oy.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Oy.prototype,"init",null),Oy=(0,F.gn)([jt({token:{token:li,named:y0.command.id}})],Oy);var K2;(function(n){n.command=ti.GRAPH_COPY,n.hookKey="graphCopySelection"})(K2||(K2={}));let Dv=class{constructor(){this.parseCells=r=>{r.forEach(u=>{const h=u.getData();u.isNode()&&h.isGroup&&u.getChildren().forEach(g=>{r.push(g)})});const i=r.filter(u=>u.isNode()).map(u=>u.id),s=r.reduce((u,h)=>{if(h.isEdge()){const p=h.getSourceCellId(),g=h.getTargetCellId();p&&g&&i.includes(p)&&i.includes(g)&&u.set(h.id,h)}else u.set(h.id,h);return u},new Map),a=Array.from(s.values());return Pp(a)},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().graphCopySelection.call(i,()=>(0,F.mG)(this,void 0,void 0,function*(){const p=(yield r.getX6Graph()).getSelectedCells(),g=this.parseCells(p),y=window.localStorage.getItem(Bc);return window.localStorage.setItem(Bc,JSON.stringify(g)),r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){window.localStorage.setItem(Bc,y)}))),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Dv.prototype,"contextProvider",void 0),Dv=(0,F.gn)([jt({token:{token:li,named:K2.command.id}})],Dv);function _3(n,r=null){try{return JSON.parse(n)||r}catch(i){return console.error(i),r}}let hg=class{constructor(){this.groupNodeMap=new Map,this.nodeMap=new Map,this.nodeMappingRecord=new Map,this.portMap=new Map,this.portMappingRecord=new Map,this.edgeMap=new Map,this.edgeMappingRecord=new Map,this.getNodesByType=r=>r.reduce((i,s)=>(s.isGroup?i.groupNodes.push(s):i.normalNodes.push(s),i),{normalNodes:[],groupNodes:[]}),this.getNodePorts=r=>Array.isArray(r.ports)?r.ports:r.ports&&Array.isArray(r.ports.items)?r.ports.items:[],this.addNodes=r=>{r.forEach(i=>{if(i.isGroup)this.groupNodeMap.set(i.id,i);else{const s=this.getNodePorts(i);this.nodeMap.set(i.id,i),s.forEach(a=>{this.portMap.set(a.id,a)})}})},this.addEdge=r=>{r.forEach(i=>{this.edgeMap.set(i.id,i)})},this.buildNodeMapping=(r,i)=>{const s=r.id||r.originId,a=i.id;this.nodeMappingRecord.set(s,a),this.getNodePorts(r).forEach((h,p)=>{const g=i.ports[p];g&&(this.portMap.set(g.id,g),this.portMappingRecord.set(h.id,g.id))})},this.createEdgeBetweenNodes=r=>{const{source:i,sourcePortId:s,target:a,targetPortId:u}=r;return Object.assign(Object.assign({},r),{source:this.nodeMappingRecord.get(i),target:this.nodeMappingRecord.get(a),sourcePortId:this.portMappingRecord.get(s),targetPortId:this.portMappingRecord.get(u)})},this.buildGroupRelations=r=>{const{groupChildren:i}=r,s=i.map(a=>this.nodeMappingRecord.get(a));return Object.assign(Object.assign({},r),{groupChildren:s})}}};hg=(0,F.gn)([jt()],hg);var Py,b0;(function(n){n.command=ti.GRAPH_PASTE,n.hookKey="graphPasteSelection"})(b0||(b0={}));function q2(n,r=0){return Math.floor(Math.random()*(n-r)+r)}let fg=Py=class{constructor(){this.updateNodeCopiedProps=(r,i)=>{let s=q2(100),a=q2(100);return r&&(s=i.x-r.x+q2(30),a=i.y-r.y+q2(30)),i.x+=s,i.y+=a,i.originId=i.id,delete i.id,i.label=`${i.label}_copied`,i.isCollapsed=!1,i},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),a=r.getHooks();if(Py.doing)return this;Py.doing=!0;const u=yield a.graphPasteSelection.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:p,position:g}=h,y=window.localStorage.getItem(Bc),b=_3(y,{nodes:[],edges:[]}),{nodes:E=[],edges:T=[]}=b,{normalNodes:O,groupNodes:N}=this.mappingHelper.getNodesByType(E);return this.mappingHelper.addNodes(E),yield Promise.all(O.map(k=>(0,F.mG)(this,void 0,void 0,function*(){const X=(yield p.executeCommand($i.ADD_NODE.id,{nodeConfig:this.updateNodeCopiedProps(g,k)})).contextProvider().getResult();this.mappingHelper.buildNodeMapping(k,X.nodeConfig)}))),yield Promise.all(N.map(k=>(0,F.mG)(this,void 0,void 0,function*(){const B=this.mappingHelper.buildGroupRelations(k);yield p.executeCommand(Ms.ADD_GROUP.id,{nodeConfig:this.updateNodeCopiedProps(g,B)})}))),yield Promise.all(T.map(k=>{const B=this.mappingHelper.createEdgeBetweenNodes(k);return p.executeCommand(uo.ADD_EDGE.id,{edgeConfig:B})})),r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){window.localStorage.setItem(Bc,null)}))),{err:null}}),s);return r.setResult(u),Py.doing=!1,this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};fg.doing=!1,(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],fg.prototype,"contextProvider",void 0),(0,F.gn)([on(hg),(0,F.w6)("design:type",hg)],fg.prototype,"mappingHelper",void 0),fg=Py=(0,F.gn)([jt({token:{token:li,named:b0.command.id}})],fg);var Dy;(function(n){n.command=ti.GRAPH_TOGGLE_MULTI_SELECT,n.hookKey="toggleMultiSelect"})(Dy||(Dy={}));let Ny=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().toggleMultiSelect.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),p=yield this.ctx.getGraphConfig(),{isEnable:g,modelService:y}=u,b=yield Oh.getModel(y),E=typeof g=="boolean"?g:!h.isRubberbandEnabled();return E?(h.enableRubberband(),h.scroller&&h.scroller.widget?h.scroller.disablePanning():h.disablePanning(),p.graphContainer.style.cursor="crosshair"):(h.disableRubberband(),h.scroller&&h.scroller.widget?h.scroller.enablePanning():h.enablePanning(),p.graphContainer.style.cursor="grab"),b.setValue({isEnable:E}),{isEnable:E}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Ny.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Ny.prototype,"init",null),Ny=(0,F.gn)([jt({token:{token:li,named:Dy.command.id}})],Ny);var lf;(function(n){n.command=ti.GRAPH_HISTORY_UNDO,n.hookKey="historyUndo"})(lf||(lf={}));let _s=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().historyUndo.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield r.getX6Graph();return p.isHistoryEnabled()===!1?{err:"history is disabled"}:(p.undo(),r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:g}=h;g.executeCommand(ti.GRAPH_HISTORY_REDO.id,{})}))),{err:null})}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],_s.prototype,"contextProvider",void 0),_s=(0,F.gn)([jt({token:{token:li,named:lf.command.id}})],_s);var J2;(function(n){n.command=ti.GRAPH_HISTORY_REDO,n.hookKey="historyRedo"})(J2||(J2={}));let Nv=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().historyRedo.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield r.getX6Graph();return p.isHistoryEnabled()===!1?{err:"history is disabled"}:(p.redo(),r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:g}=h;g.executeCommand(ti.GRAPH_HISTORY_UNDO.id,{})}))),{err:null})}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Nv.prototype,"contextProvider",void 0),Nv=(0,F.gn)([jt({token:{token:li,named:J2.command.id}})],Nv);var Q2;(function(n){n.command=ti.GRAPH_HISTORY_TOGGLE,n.hookKey="historyToggle"})(Q2||(Q2={}));let e1=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().historyToggle.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield r.getX6Graph();if(p.isHistoryEnabled()===!1)return{err:"history is disabled"};const g=p.isHistoryEnabled(),{enabled:y}=h;return p.toggleHistory(y),r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:b}=h;b.executeCommand(ti.GRAPH_HISTORY_TOGGLE.id,{enabled:g})}))),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],e1.prototype,"contextProvider",void 0),e1=(0,F.gn)([jt({token:{token:li,named:Q2.command.id}})],e1);var t1;(function(n){n.command=ti.GRAPH_HISTORY_RESET,n.hookKey="historyReset"})(t1||(t1={}));let uf=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().historyReset.call(i,()=>(0,F.mG)(this,void 0,void 0,function*(){return(yield r.getX6Graph()).cleanHistory(),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],uf.prototype,"contextProvider",void 0),uf=(0,F.gn)([jt({token:{token:li,named:t1.command.id}})],uf);var n1;(function(n){n.command=ti.GRAPH_ADD_TOOL,n.hookKey="addTool"})(n1||(n1={}));let Iv=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().addTool.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{cellId:p,toolConfig:g,commandService:y}=h,E=(yield r.getX6Graph()).getCellById(p);return E&&(E.addTools(g.items,g.options),r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){Array.isArray(g.items)&&g.items.forEach(T=>{y.executeCommand(ti.GRAPH_DEL_TOOL.id,{cellId:p,toolname:T})})})))),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Iv.prototype,"contextProvider",void 0),Iv=(0,F.gn)([jt({token:{token:li,named:n1.command.id}})],Iv);var r1;(function(n){n.command=ti.GRAPH_DEL_TOOL,n.hookKey="delTool"})(r1||(r1={}));let df=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().delTool.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{cellId:p,toolName:g,toolConfig:y}=h,E=(yield r.getX6Graph()).getCellById(p);return E&&(g==="*"?E.removeTools(y):E.removeTool(g,y)),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],df.prototype,"contextProvider",void 0),df=(0,F.gn)([jt({token:{token:li,named:r1.command.id}})],df);var Iy;(function(n){n.command=ti.REDO_CMD,n.hookKey="redoCommand"})(Iy||(Iy={}));let Ry=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.ctx,{args:i,hooks:s}=r.getArgs();return yield r.getHooks().redoCommand.call(i,()=>(0,F.mG)(this,void 0,void 0,function*(){const u=r.getCommands();return u.isRedoable&&u.redoCommand(),this.ctx.addUndo(Mt.create(()=>{u.redoCommand()})),{}}),s),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Ry.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Ry.prototype,"init",null),Ry=(0,F.gn)([jt({token:{token:li,named:Iy.command.id}})],Ry);var i1;(function(n){n.command=ti.UNDO_CMD,n.hookKey="undoCommand"})(i1||(i1={}));let Rv=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.ctx,{args:i,hooks:s}=r.getArgs();return yield r.getHooks().undoCommand.call(i,()=>(0,F.mG)(this,void 0,void 0,function*(){const u=r.getCommands();return u.isUndoable&&u.undoCommand(),this.ctx.addUndo(Mt.create(()=>{u.redoCommand()})),{}}),s),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Rv.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Rv.prototype,"init",null),Rv=(0,F.gn)([jt({token:{token:li,named:i1.command.id}})],Rv);const A3=n=>{n(cd),n(Ps),n(ld),n(Ty),n(Pv),n(m0),n(_s),n(Nv),n(e1),n(uf),n(Ry),n(Rv),n(Oy),n(Ny),n(Dv),n(fg),n(My),n(Iv),n(df)},_A=[Rp,fl,Cu,lf,J2,t1,Q2,Ay,Ov,Y2,dh,Iy,i1,y0,Dy,K2,b0,n1,r1];var Si;(function(n){n.command=uo.ADD_EDGE,n.hookKey="addEdge",n.createEdgeId=s=>{if(ur.kf.isString(s.source))return`${s.source}:${s.sourcePortId}-${s.target}:${s.targetPortId}`;if(r(s)){const a=s;return`${a.source.cell}:${a.source.port}-${a.target.cell}:${a.target.port}`}if(i(s)){const a=s;return`${a.sourceCell}:${a.sourcePort}-${a.targetCell}:${a.targetPort}`}};function r(s){return s.source&&s.source.cell&&ur.kf.isString(s.source.cell)}n.isX6EdgeConfig=r;function i(s){return s.sourceCell&&ur.kf.isString(s.sourceCell)}n.isX6EdgePlainConfig=i})(Si||(Si={}));let ky=class{constructor(){this.processEdgeConfig=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){if(!i.id){const{createIdService:s=Si.createEdgeId}=r;i.id=yield s(i)}return i.sourcePortId&&!i.sourcePort&&(i.sourcePort=i.sourcePortId,i.targetPort=i.targetPortId),i}),this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().addEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{cellFactory:h,createEdgeService:p,commandService:g,options:y}=u,b=yield this.ctx.getX6Graph();let E=u.edgeConfig;if(p){const B=yield p(u);if(typeof B=="boolean")return{err:"createEdgeService rejected"};E=B}const T=yield this.processEdgeConfig(u,E);let O;const N=Object.assign(Object.assign({},y),{isCommand:!0});if(h){const B=yield h(T,this);O=b.addEdge(B,N)}else O=b.addEdge(Object.assign(Object.assign({},T),{label:T?.label||T,data:Object.assign({},T)}),N);const k=Mt.create(()=>{g.executeCommand(uo.DEL_EDGE.id,{x6Edge:O})});return this.ctx.addUndo(k),{edgeConfig:T,edgeCell:O}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],ky.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],ky.prototype,"init",null),ky=(0,F.gn)([jt({token:{token:li,named:Si.command.id}})],ky);var ei;(function(n){n.command=uo.DEL_EDGE,n.hookKey="delEdge";let r;(function(i){i.EDGE_NOT_EXIST="edge is not exist",i.EDGE_INVALID_CELL="this is not a valid cell",i.X6_DELETE_FAILED="x6 throw err when call delete edge",i.SERVICE_REJECT="service reject to delete"})(r=n.ErrEnum||(n.ErrEnum={}))})(ei||(ei={}));let bi=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().delEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{edgeConfig:h,x6Edge:p,deleteEdgeService:g,commandService:y,options:b}=u;let E=p;if(!E&&(E=yield this.findEdgeById(h),!E))return console.error(ei.ErrEnum.EDGE_NOT_EXIST,h),{err:ei.ErrEnum.EDGE_NOT_EXIST};if(!(E&&E.isEdge()))return console.error(ei.ErrEnum.EDGE_NOT_EXIST,E),{err:ei.ErrEnum.EDGE_NOT_EXIST};if(g&&!(yield g(u)))return{err:ei.ErrEnum.SERVICE_REJECT};try{const O=E.getTargetCell(),N=E.getSourceCell(),k=E.getSourcePortId(),B=E.getTargetPortId(),$=N?N.id:N.source,X=O?O.id:O.target;E.remove(Object.assign(Object.assign({},b),{isCommand:!0}));const ne=Mt.create(()=>{y.executeCommand(uo.ADD_EDGE.id,{edgeConfig:{source:$,target:X,sourcePortId:k,targetPortId:B}})});return this.ctx.addUndo(ne),{err:null,edgeConfig:{source:$,target:X,sourcePortId:k,targetPortId:B},targetCell:O,sourceCell:N,sourcePortId:k,targetPortId:B}}catch(O){return console.error(ei.ErrEnum.X6_DELETE_FAILED,O),{err:ei.ErrEnum.X6_DELETE_FAILED}}}),i);return this.ctx.setResult(a),this}),this.findEdgeById=r=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.ctx.getX6Graph()).getCellById(r.id)}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],bi.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],bi.prototype,"init",null),bi=(0,F.gn)([jt({token:{token:li,named:ei.command.id}})],bi);var hh=M(13218),so=M.n(hh),kv;(function(n){n.command=uo.UPDATE_EDGE,n.hookKey="updateEdge",n.XFlowEdgeSetOptions={overwrite:!0},n.XFlowUpdateLabelService=(r,i,s=n.XFlowEdgeSetOptions)=>(0,F.mG)(this,void 0,void 0,function*(){r?.setLabelAt(0,i?.label||i,s)})})(kv||(kv={}));let sp=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().updateEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{updateEdgeService:p,updateEdgeLabelService:g=kv.XFlowUpdateLabelService,options:y=kv.XFlowEdgeSetOptions}=u,b=p?yield p(u):u?.edgeConfig,E=h?.getCellById(b?.id);return E?.setData(b,y),b?.hasOwnProperty("label")&&(yield g(E,b,y)),Ih()(b?.visible)&&E.setVisible(b?.visible),b.attrs&&E.setAttrs(b.attrs),b.vertices&&E.setVertices(b.vertices),b.router&&E.setRouter(b.router),b.connector&&E.setConnector(b.connector),so()(b.source)&&E.setSource(b.source),so()(b.target)&&E.setTarget(b.target),{edgeConfig:b,edgeCell:E}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],sp.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],sp.prototype,"init",null),sp=(0,F.gn)([jt({token:{token:li,named:kv.command.id}})],sp);var o1;(function(n){n.command=uo.HIGHLIGHT_EDGE,n.hookKey="highlightEdge"})(o1||(o1={}));let Ly=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().highlightEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){var h,p;const g=yield this.ctx.getX6Graph(),{edgeId:y,strokeColor:b,strokeWidth:E}=u,T=g.getEdges(),O=T.find(k=>k.id===y),N=T.filter(k=>k.id!==y);if(!O)console.error(y,"this edgeId is not exist");else{const k=O.getAttrs();((h=k?.line)===null||h===void 0?void 0:h.stroke)===b&&((p=k?.line)===null||p===void 0?void 0:p.strokeWidth)===E||(O?.setAttrs({line:{stroke:b,strokeWidth:E||2}}),N.forEach(B=>{B.setAttrs({line:k?.line})}),u.commandService.executeCommand(uo.FRONT_EDGE.id,{edgeId:y}))}return{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Ly.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Ly.prototype,"init",null),Ly=(0,F.gn)([jt({token:{token:li,named:o1.command.id}})],Ly);var pg;(function(n){n.command=uo.FRONT_EDGE,n.hookKey="frontEdge"})(pg||(pg={}));let gg=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().frontEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{edgeId:p}=u,g=h?.getCellById(p);return g?(g.toFront(),this.ctx.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){u.commandService.executeCommand(uo.BACK_EDGE.id,{edgeId:p})})))):console.error(p,"this edgeId is not exist"),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],gg.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],gg.prototype,"init",null),gg=(0,F.gn)([jt({token:{token:li,named:pg.command.id}})],gg);var s1;(function(n){n.command=uo.BACK_EDGE,n.hookKey="frontEdge"})(s1||(s1={}));let Iu=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().frontEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{edgeId:p}=u,g=h?.getCellById(p);return g?(g.toBack(),this.ctx.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){u.commandService.executeCommand(uo.FRONT_EDGE.id,{edgeId:p})})))):console.error(p,"this edgeId is not exist"),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Iu.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Iu.prototype,"init",null),Iu=(0,F.gn)([jt({token:{token:li,named:s1.command.id}})],Iu);const T3=n=>{n(ky),n(bi),n(sp),n(Ly),n(gg),n(Iu)},hf=[Si,ei,kv,o1,pg,s1];var ap;(function(n){n.command=Ms.ADD_GROUP,n.hookKey="addGroup",n.GROUP_PADDING=12,n.GROUP_HEADER_HEIGHT=40})(ap||(ap={}));let Gc=class{constructor(){this.getBBox=(r,i,s)=>{const{groupHeaderHeight:a=ap.GROUP_HEADER_HEIGHT,groupPadding:u=ap.GROUP_PADDING}=i,h=s.getCellsBBox(r.children);return h.moveAndExpand({x:-u,y:-(u+a),width:u*2,height:u*2+a}),h},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().addGroup.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{nodeConfig:p,createService:g,cellFactory:y,commandService:b}=h,E=yield r.getX6Graph(),T=yield b.executeCommand($i.ADD_NODE.id,{cellFactory:y,createNodeService:g,nodeConfig:p}),{nodeCell:O}=T.contextProvider().getResult(),{id:N}=O,{groupChildren:k}=p;if(k.length){k.forEach($=>{const X=E.getCellById($);X&&(X.setData(Object.assign(Object.assign({},X.getData()),{group:N,isCollapsed:!1})),X.prop("group",N),O.addChild(X),E.unselect(X))});const B=this.getBBox(O,p,E);O.position(B.x,B.y),O.size(B.width,B.height),O.setZIndex(0),O.prop("isGroup",!0),O.setData(Object.assign(Object.assign({},O.getData()),{width:B.width,height:B.height,groupChildrenSize:{width:B.width,height:B.height},x:B.x,y:B.y,isGroup:!0})),E.select(O)}return p.isCollapsed&&(yield b.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:p.id,isCollapsed:p.isCollapsed})),r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){b.executeCommand(Ms.DEL_GROUP.id,{nodeConfig:p})}))),{nodeConfig:p,nodeCell:O}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],Gc.prototype,"contextProvider",void 0),Gc=(0,F.gn)([jt({token:{token:li,named:ap.command.id}})],Gc);var vg;(function(n){n.command=Ms.DEL_GROUP,n.hookKey="delGroup"})(vg||(vg={}));let a1=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().delGroup.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield r.getX6Graph(),{nodeConfig:g,commandService:y,deleteService:b}=h,{id:E}=g,T=p.getCellById(E);if(b&&!(yield b(h)))return{err:"service rejected"};if(!T)return{err:"target node is not exist"};if(T.getProp("isGroup")!==!0)return{err:"target node is not group"};const{isCollapsed:O}=T.getData();O&&(yield y.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:T.id,isCollapsed:!1,collapsedSize:{width:0,height:0}}));const N=T.getChildren();return N&&N.forEach(k=>{T.unembed(k),k.prop("group",""),k.setData(Object.assign(Object.assign({},k.getData()),{group:""}))}),yield y.executeCommand($i.DEL_NODE.id,{nodeConfig:g}),r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){y.executeCommand(Ms.ADD_GROUP.id,{nodeConfig:g})}))),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],a1.prototype,"contextProvider",void 0),a1=(0,F.gn)([jt({token:{token:li,named:vg.command.id}})],a1);var c1;(function(n){n.command=Ms.INIT_GROUP,n.hookKey="initGroup"})(c1||(c1={}));let l=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().initGroup.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{graphData:p,commandService:g}=h,y=yield r.getX6Graph(),{nodes:b}=p,E={};return b.forEach(T=>{const{id:O,group:N}=T;N&&(E[N]?E[N].push(O):E[N]=[O])}),Object.keys(E).forEach(T=>(0,F.mG)(this,void 0,void 0,function*(){const O=y.getCellById(T),N=O.getData(),k=E[T]||[];O.prop("isGroup",!0),O.setData(Object.assign(Object.assign({},N),{isGroup:!0,groupChildren:k})),k.forEach(X=>{const ne=y.getCellById(X);O.embed(ne)}),O.toBack();const{isCollapsed:B,groupCollapsedSize:$}=N;if(B){const X=h.collapsedSize||$||fh;yield g.executeCommand(Ms.COLLAPSE_GROUP.id,{collapsedSize:X,isCollapsed:!0,nodeId:O.id})}})),{}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],l.prototype,"contextProvider",void 0),l=(0,F.gn)([jt({token:{token:li,named:c1.command.id}})],l);var e;(function(n){n.command=Ms.COLLAPSE_GROUP,n.hookKey="collapseGroup"})(e||(e={}));let t=class{constructor(){this.toggleVisible=(r,i,s)=>{r.forEach(a=>{const u=s.findViewByCell(a).container;u.style.visibility=i?"visible":"hidden"})},this.toggleCollapse=(r,i,s)=>{const a=r.getChildren().filter(g=>g.isNode()),u=r.getData(),{isCollapsed:h,gap:p=0}=s;if(h){const g=s.collapsedSize||u.groupCollapsedSize||fh;r.prop("previousSize",r.size()),r.size(g)}else r.size(r.prop("previousSize"));a&&a.forEach(g=>{const y=r.position(),b=i.getConnectedEdges(g).filter(E=>{const T=E.getSourceNode(),O=E.getTargetNode();return a.includes(T)&&a.includes(O)});if(h){this.toggleVisible([g,...b],!1,i),g.prop("previousSize",g.size()),g.prop("previousRelativePosition",g.position({relative:!0})),g.position(y.x+p,y.y+p);const E=r.size();g.size({width:E.width-p*2,height:E.height-p*2})}else{this.toggleVisible([g,...b],!0,i);const E=g.prop("previousRelativePosition"),T=g.prop("previousSize");g.position(E.x,E.y,{relative:!0}),g.size(T)}}),r.prop("isCollapsed",h),r.setData(Object.assign(Object.assign({},r.getData()),{isCollapsed:h}))},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().collapseGroup.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),p=h.getCellById(r.nodeId),{toggleService:g}=u;return g&&!(yield g(u))?{err:"service rejected"}:(p&&(this.toggleCollapse(p,h,r),this.ctx.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){p&&this.toggleCollapse(p,h,Object.assign(r,{isCollapsed:!r.isCollapsed}))})))),{err:null})}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],t.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],t.prototype,"init",null),t=(0,F.gn)([jt({token:{token:li,named:e.command.id}})],t);const o=n=>{n(Gc),n(a1),n(l),n(t)},c=[ap,vg,c1,e];var d;(function(n){n.command=To.UPDATE_MODEL,n.hookKey="updateModel"})(d||(d={}));let f=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().updateModel.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{updateModel:p,getModel:g,modelService:y}=h,b=yield g(y),E=b.getValue(),T=uc(E);yield p(T);const O=ll(T);return b.setValue(O),r.addUndo(Mt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){b.setValue(O)}))),{model:b,value:O}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],f.prototype,"contextProvider",void 0),f=(0,F.gn)([jt({token:{token:li,named:d.command.id}})],f);const v=()=>{},x=n=>{n(f)},w=[d],_=[...Wc,...hf,...c,..._A,...w],A=()=>new ka;let P=class{constructor(){this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=r.x6Events.registerHook({name:"bind group node move event",handler:s=>(0,F.mG)(this,void 0,void 0,function*(){const a={eventName:"node:moving",callback:({node:u})=>(0,F.mG)(this,void 0,void 0,function*(){if(u.prop("isGroup")){u.prop("originPosition",u.getPosition());return}const p=u.model.graph,{group:g}=u.getData(),y=p.getNodes().find(ne=>ne.id===g);if(!y)return;const b=y.getProp("isCollapsed");let E=y.getProp("originSize"),T=!1;E==null&&(E=y.size(),y.prop("originSize",E));let O=y.prop("originPosition");O==null&&(O=y.getPosition(),y.prop("originPosition",O));let N=O.x,k=O.y,B=O.x+E.width,$=O.y+E.height;const X=y.getChildren();if(X&&X.forEach(ne=>{const be=ne.getBBox().inflate(12),me=be.getCorner();be.x<N&&(N=be.x,T=!0),be.y<k&&(k=be.y,T=!0),me.x>B&&(B=me.x,T=!0),me.y>$&&($=me.y,T=!0)}),T){y.prop({position:{x:N,y:k},size:{width:B-N,height:$-k}});const ne=Object.assign(Object.assign({},y.getData()),{x:N,y:k,width:B-N,height:$-k});b!==!0&&(ne.groupChildrenSize={width:B-N,height:$-k}),y.setData(ne)}})};s.push(a)})});return Mt.create(()=>{i.dispose()})}),this.registerHookHub=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new un;return _.forEach(({hookKey:s,createHook:a=A})=>{const u=r.registerHookHub(s,a());i.push(u)}),this.commandConfig.getConfig().then(({getContributions:s})=>{s().forEach(({hookKey:u,createHook:h=A})=>{const p=r.registerHookHub(u,h());i.push(p)})}),i})}registerGraphCommands(r){_.forEach(({command:i})=>{r.registerCommand(i,{createCommand:this.commandFactory})}),this.commandConfig.getConfig().then(({getContributions:i})=>{i().forEach(a=>{r.registerCommand(a.command,{createCommand:this.commandFactory})})})}};(0,F.gn)([on(wh),(0,F.w6)("design:type",Function)],P.prototype,"commandFactory",void 0),(0,F.gn)([on(vc),(0,F.w6)("design:type",vc)],P.prototype,"commandConfig",void 0),P=(0,F.gn)([cn({contrib:[pu,Hs]})],P);const V=(n,r)=>{r.getCommandContributions().forEach(s=>{const{CommandHandler:a,command:u}=s;n({token:{token:li,named:u.id},useClass:a})}),A3(n),tm(n),T3(n),o(n),x(n),n(P)},J=n=>Zo(r=>{r(hg),Dp(r,n),V(r,n),r(gc),r(wh,{useFactory:i=>(s,a,u)=>{const h=i.container.createChild(),p=h.get(gc);h.register(pi,{useDynamic:()=>()=>p});const g=h.getNamed(li,s);return p.setArgs(a,u),p.handlerInstance=g,g}})}),ee=n=>{const r=Bl(),i=H.useMemo(()=>n.config?n.config:new vc,[]);return H.useEffect(()=>{r.addCoreModule({config:i,createModule:J})},[]),null},ge=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new vc;return n(a,i),a},[i])},Se=Symbol("IToolbarService"),Re=pe.defineToken("IToolbarContribution");var _e=M(23279),Ue=M.n(_e),Qe=M(50361),bt=M.n(Qe);let Pt=class{constructor(){this.toDispose=new un,this.toolbarItems=new Map,this.onDidChangeEvent=new Tc(null),this.onDidChange=this.onDidChangeEvent.watch,this.fireOnDidChange=Ue()(()=>this.onDidChangeEvent.setValue(void 0),16),this.registerDisposableToolbar=r=>{const i=new un;return r({registerToolbarItem:a=>{const u=this.registerItem(a);return i.push(u),u}}),this.toDispose.push(i),i},this.getToolbarModel=r=>{const{layout:i,mainGroups:s=[],extraGroups:a=[]}=r;return new Tc({layout:i,mainGroups:this.createToolbarGroupModel(s),extraGroups:this.createToolbarGroupModel(a)})},this.createToolbarGroupModel=r=>r.map(s=>{const{items:a=[]}=s;return Object.assign(Object.assign({},s),{items:a.map(u=>this.createToolbarModel({id:u.id})).filter(u=>!!u)})})}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerToolbarItems(this)}onStop(){this.toDispose.dispose()}registerItem(r){return this.toolbarItems.has(r.id)&&console.warn(`ToolbarRegistry ${r.id} is duplicated, in`,r),this.toolbarItems.set(r.id,r),this.fireOnDidChange(),new un(Mt.create(()=>this.fireOnDidChange()),Mt.create(()=>this.toolbarItems.delete(r.id)))}createToolbarModel(r){const i=bt()(this.toolbarItems.get(r.id)),s=Ih()(i.isEnabled)?i.isEnabled:!0,a=Ih()(i.isVisible)?i.isVisible:!0;return Object.assign(Object.assign({},i),{isEnabled:s,isVisible:a,iconName:i.iconName,text:i.text})}};(0,F.gn)([on(fu),(0,F.w6)("design:type",Object)],Pt.prototype,"commandService",void 0),(0,F.gn)([on(Ku),(0,F.w6)("design:type",Object)],Pt.prototype,"modelService",void 0),(0,F.gn)([oi(Re),(0,F.w6)("design:type",Object)],Pt.prototype,"contributionProvider",void 0),Pt=(0,F.gn)([cn({contrib:[Vc,Se]})],Pt);const Kt=()=>Zo(n=>{Hi.register(n,Re),n(Pt)}),kn=n=>{const{}=n,r=Bl();return H.useEffect(()=>{const i=r.addCoreModule({config:{CONFIG_TYPE:"ToolbarRegistry",getConfig:()=>(0,F.mG)(void 0,void 0,void 0,function*(){})},createModule:Kt});return()=>{i.dispose()}},[r]),null};kn.defaultProps={XFlowModuleType:"ToolbarRegistry"};const wn=Symbol("xflow-menu-root"),Sn=Symbol("IMenuService"),Vn=pe.defineToken("IMenuContribution");var Ur;(function(n){n.Separator="separator",n.Submenu="submenu",n.Root="root",n.Leaf="leaf"})(Ur||(Ur={}));let Wr=class{constructor(){this.toDispose=new un,this.menuMap=new Map,this.getMenu=r=>this.menuMap.get(r),this.registerDisposableMenu=r=>{const i=new un;return r({registerMenu:a=>{const u=this.registerMenu(a);return i.push(u),u}}),this.toDispose.push(i),i}}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerMenu(this)}onStop(){this.toDispose.dispose()}registerMenu(r){return this.menuMap.set(r.id,r),Mt.create(()=>this.menuMap.delete(r.id))}};(0,F.gn)([oi(Vn),(0,F.w6)("design:type",Object)],Wr.prototype,"contributionProvider",void 0),Wr=(0,F.gn)([cn({contrib:[Vc,Sn]})],Wr);const $t=()=>Zo(n=>{Hi.register(n,Vn),n(Wr)}),On=n=>{const{}=n,r=Bl();return H.useEffect(()=>{const i=r.addCoreModule({config:{CONFIG_TYPE:"MenuRegistry",getConfig:()=>(0,F.mG)(void 0,void 0,void 0,function*(){})},createModule:$t});return()=>{i.dispose()}},[]),null};On.defaultProps={XFlowModuleType:"MenuRegistry"};const kr=n=>{const{meta:r,graphConfig:i,graphData:s,graphLayout:a,onLoad:u,isAutoCenter:h,hookConfig:p,modelServiceConfig:g,commandConfig:y,onAppConfigReady:b,onAppDestroy:E,children:T=[],className:O,style:N}=n,[k,B]=H.useState(),$=H.useRef(null),X=td();H.useEffect(()=>{b&&b(X);const me=vu(X);me.start().then(()=>(0,F.mG)(void 0,void 0,void 0,function*(){var ot;B(me),(ot=X.getExtension("GraphConfig"))===null||ot===void 0||ot.config.setAppContainer($.current),r&&(yield me.commandService.executeCommand(ti.LOAD_META.id,{meta:r})),u&&u(me,X),s&&(a&&(yield me.commandService.executeCommand(ti.GRAPH_LAYOUT.id,Object.assign({graphData:s},a))),yield me.commandService.executeCommand(ti.GRAPH_RENDER.id,{graphData:s}))}));const je=()=>(0,F.mG)(void 0,void 0,void 0,function*(){E&&E(me)});return()=>{je()}},[]),H.useEffect(()=>{k&&k.commandService.executeCommand(ti.LOAD_META.id,{meta:r})},[r]),H.useEffect(()=>{(()=>(0,F.mG)(void 0,void 0,void 0,function*(){k&&(s&&a&&(yield k.commandService.executeCommand(ti.GRAPH_LAYOUT.id,Object.assign({graphData:s},a))),yield k.commandService.executeCommand(ti.GRAPH_RENDER.id,{graphData:s}),h&&(yield k.getGraphInstance()).centerContent())}))()},[s]);const ne=Oe()("xflow-app-workspace",O,...X.getContainerClassNames()),be=(Array.isArray(T)?T:[T]).some(me=>me&&me.props.isXFlowCanvas);return H.createElement(hp,{app:k},H.createElement(M0.Provider,{value:X},H.createElement("div",{className:ne,id:X.getInstanceId(),ref:$,style:N},!be&&H.createElement(hl,{config:i,position:{top:0,bottom:0,left:0,right:0}}),T,H.createElement(Mp,{config:g}),H.createElement(ee,{config:y}),H.createElement(Mg,{config:p}),H.createElement(kn,null),H.createElement(On,null))))};kr.defaultProps={};var Vo=null;const ss=n=>n&&n.current,ca=()=>{const n=H.useRef(!0);return H.useEffect(()=>()=>{n.current=!1},[]),n},zs=n=>{const r=ca(),[i,s]=H.useState(n.getValue());H.useEffect(()=>{const p=n.watch(g=>{ss(r)&&s(g)});return()=>{p.dispose()}},[s]);const a=i,u=Ka.isValidValue(a),h=H.useCallback(p=>n.setValue(p),[n]);return[a,h,u]},x0=n=>{const r=H.useMemo(()=>new Tc(n),[]),[i,s,a]=zs(r);return H.useEffect(()=>()=>{r.dispose()},[r]),[i,s,r,a]},l1=n=>{const{getModel:r,initialState:i}=n,s=ca(),a=H.useRef(),[u,h]=H.useState(i);return H.useEffect(()=>{let p;return r().then(g=>(0,F.mG)(void 0,void 0,void 0,function*(){a.current=g;const y=yield g.getValidValue();!s.current||(h(y),p=g.watch(b=>{s.current&&h(b)}))})),()=>{p&&p.dispose&&p.dispose()}},[]),[u,h,a.current]},mg=Symbol("IKeyBindingService"),Lv=pe.defineToken("IKeyBindingContribution"),ff=Symbol("IKeyBindingOptionProvider");let rl=class{constructor(){this.toDispose=new un,this.keyBindingMap=new Map,this.enabledKeyBindingMap=new Map,this.registerExternalKeybindings=()=>(0,F.mG)(this,void 0,void 0,function*(){const{registerKeybindingFunc:r}=yield this.optionProvider.getOption();return r(this)}),this.registerKeybinding=(r=[])=>{const i=new un;return r.forEach(s=>{this.keyBindingMap.set(s.id,s),this.enableKeyBindings(s.id).then(a=>{i.push(Mt.create(()=>{a.dispose(),this.keyBindingMap.delete(s.id)}))})}),this.toDispose.push(i),i},this.enableKeyBindings=r=>(0,F.mG)(this,void 0,void 0,function*(){this.disableKeyBindings([r]);const i=this.keyBindingMap.get(r),s=yield this.getX6Graph(),a=this.runCommand(i);s.bindKey(i.keybinding,a);const u=Mt.create(()=>{s.unbindKey(i.keybinding),this.enabledKeyBindingMap.delete(i.id)});return this.enabledKeyBindingMap.set(i.id,u),u}),this.disableKeyBindings=r=>{r.forEach(i=>{const s=this.enabledKeyBindingMap.get(i);s&&s.dispose()})},this.runCommand=r=>i=>(0,F.mG)(this,void 0,void 0,function*(){yield r.callback(r,this.modelService,this.commandService,i)}),this.getX6Graph=()=>(0,F.mG)(this,void 0,void 0,function*(){return yield this.graphProvider.getGraphInstance()})}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerKeybinding(this);this.registerExternalKeybindings()}onStop(){this.toDispose.dispose()}};(0,F.gn)([on(ff),(0,F.w6)("design:type",Object)],rl.prototype,"optionProvider",void 0),(0,F.gn)([on(fu),(0,F.w6)("design:type",Object)],rl.prototype,"commandService",void 0),(0,F.gn)([on(Ku),(0,F.w6)("design:type",Object)],rl.prototype,"modelService",void 0),(0,F.gn)([oi(Lv),(0,F.w6)("design:type",Object)],rl.prototype,"contributionProvider",void 0),(0,F.gn)([on(nd),(0,F.w6)("design:type",Object)],rl.prototype,"graphProvider",void 0),rl=(0,F.gn)([cn({contrib:[Vc,mg]})],rl);const AA=(n,r)=>{n(ff,{useDynamic:()=>({getOption:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.getConfig()})}),lifecycle:pe.Lifecycle.singleton})},TA=n=>Zo(r=>{AA(r,n),Hi.register(r,Lv),r(rl)});var yg;(function(n){n.CONFIG_TYPE="CONTEXT_CONFIG"})(yg||(yg={}));const BP=()=>Mt.create(()=>{});class zP{constructor(){this.CONFIG_TYPE=yg.CONFIG_TYPE,this.keybindingFunc=BP,this.isMounted=new Qn,this.setKeybindingFunc=r=>{this.keybindingFunc=r},this.setMountState=()=>{this.isMounted.resolve(!0)},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return yield this.isMounted.promise,{CONFIG_TYPE:this.CONFIG_TYPE,registerKeybindingFunc:this.keybindingFunc}}),this.dispose=()=>{this.keybindingFunc=BP,this.isMounted=new Qn}}}const YD=n=>{const{config:r}=n,i=Bl(),s=H.useMemo(()=>r||new zP,[r]);return H.useEffect(()=>{const a=i.addCoreModule({config:s,createModule:TA});return s.setMountState(),()=>{a.dispose(),s.dispose()}},[i,s]),null},KD=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new zP;return n(a,i),a},[i])};function qD(n){return new Promise(r=>setTimeout(()=>r(!0),n))}var MA=M(1870);class JD{constructor(){this.map=new Map([["default",MA.Z],["QuestionCircleOutlined",MA.Z]]),this.map.set("default",MA.Z),this.map.set("QuestionCircleOutlined",MA.Z)}get(r){return this.map.get(r)}set(r,i){this.map.set(r,i)}has(r){return this.map.has(r)}}const bg=new JD;var Pk=null;let M3=class{constructor(){this.toDispose=new un,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return Mt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new un,s=[r.graphOptions.registerHook({name:"add snapline options",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){a.snapline={enabled:!0,className:"xflow-snapline",clean:5e3}})})];return i.pushAll(s),Mt.create(()=>{})})}};M3=(0,F.gn)([cn({contrib:Hs})],M3);const QD=()=>Zo(n=>{n(M3)}),eN="CanvasSnapline",tN="#faad14",nN=n=>{const{color:r=tN}=n,i=Bl(),s=H.useMemo(()=>({CONFIG_TYPE:eN,getConfig:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return{}})}),[]);return H.useEffect(()=>{const a=`xflow-snapline-${Date.now()}`;i.addContainerClassNames(a);const u=`
    .${a} .xflow-snapline .x6-widget-snapline-horizontal,
    .${a} .xflow-snapline .x6-widget-snapline-vertical {
      border-color: ${r};
    }`,h=Tg(u);return()=>{document.head.removeChild(h)}},[r,i]),H.createElement(Dh,{config:s,createModule:QD})};var OA=M(45777),Gv;(function(n){n.MOUSE_ENTER="node-port:mouseenter",n.MOUSE_LEAVE="node-port:mouseleave"})(Gv||(Gv={}));var PA;(function(n){n.id="ACTIVE_NODE_PORT",n.useModel=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=yield r.awaitModel(n.id);return{data:yield i.getValidValue(),model:i}})})(PA||(PA={}));let DA=class{constructor(){this.toDispose=new un,this.getGraphInstance=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=yield this.graphProvider.getGraphInstance(),i=yield this.graphProvider.getGraphOptions();return{graph:r,config:i}}),this.getPortRenderConfig=()=>({onPortRendered(i){const s=this,{port:a,node:u}=i,{contentSelectors:h}=i,p=h&&h["xflow-port-group"];p instanceof Element&&(p.setAttribute("class",Oe()("xflow-port-group",{connected:a.connected&&a.group!=="out",groupPort:u?.isGroup&&u?.isGroup()})),p.addEventListener("mouseenter",g=>{const y={e:g,portId:a.id,nodeId:u.id,portData:a,nodeData:u.getData(),tooltip:a.tooltip,placement:a.group};s.trigger(Gv.MOUSE_ENTER,y)}),p.addEventListener("mouseleave",g=>{const y={e:g,portId:a.id,nodeId:u.id,portData:a,nodeData:u.getData(),tooltip:a.tooltip,placement:a.group};s.trigger(Gv.MOUSE_LEAVE,y)}))}}),this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return Mt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new un,s=[r.graphOptions.registerHook({name:"add onPortRendered options ",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){Object.assign(a,this.getPortRenderConfig())})})];return i.pushAll(s),Mt.create(()=>{})})}registerModel(r){r.registerModel({id:PA.id,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s,config:a}=yield this.getGraphInstance(),u=g=>{const{x:y,y:b,width:E,height:T}=g.target.getBoundingClientRect(),O=a.rootContainer.getBoundingClientRect();return{x:y-(O?.x||0)+E/2,y:b-(O?.y||0)+T/2}},h=g=>{i.setValue(Object.assign(Object.assign({},g),{position:u(g.e)}))},p=()=>{i.setValue(null)};return s.on(Gv.MOUSE_ENTER,h),s.on(Gv.MOUSE_LEAVE,p),s.on("cell:mouseleave",p),Mt.create(()=>{s.off(Gv.MOUSE_ENTER,h),s.off(Gv.MOUSE_LEAVE,p)})})})}};(0,F.gn)([on(nd),(0,F.w6)("design:type",Object)],DA.prototype,"graphProvider",void 0),DA=(0,F.gn)([cn({contrib:[Hs,dc]})],DA);const rN=()=>Zo(n=>{n(DA)}),iN="CanvasNodePortTooltip",oN=n=>{const r=Yo(),[i,,s]=x0(null);H.useEffect(()=>{if(!r)return;const p=(()=>(0,F.mG)(void 0,void 0,void 0,function*(){const{model:g}=yield PA.useModel(r.modelService);return g.watch(y=>{s.setValue(y)})}))();return()=>{p.then(g=>{g.dispose()})}},[s,r]);const a=!!(i&&i.position&&i.position.x);if(!a)return null;const u=n.getTooltip?n.getTooltip(i):i.tooltip;return H.createElement(OA.Z,{visible:a,title:u,placement:i.placement||"top"},H.createElement("span",{className:"canvas-node-port-tooltip",style:{position:"absolute",left:i.position.x,top:i.position.y}}))},sN=n=>{const r=H.useCallback(()=>(0,F.mG)(void 0,void 0,void 0,function*(){return null}),[]);return H.createElement(Dh,{createModule:rN,config:{CONFIG_TYPE:iN,getConfig:r}},H.createElement(oN,Object.assign({},n)))};var O3;(function(n){n.CONFIG_TYPE="ContextMenuConfig"})(O3||(O3={}));class vw{constructor(r){this.CONFIG_TYPE=O3.CONFIG_TYPE,this.setMenuModelService=i=>{this.menuModelService=i},this.setCustomMenuRender=i=>{this.menuCustomRender=i},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return{CONFIG_TYPE:this.CONFIG_TYPE,menuCustomRender:this.menuCustomRender,menuModelService:this.menuModelService}}),this.moduleId=r||Sc()}dispose(){}}var NA;(function(n){n.id="CONTEXT_MENU_MODEL",n.useValue=Vi(n.id),n.getModel=Go(n.id)})(NA||(NA={}));const{inject:UP,singleton:aN}=j;let mw=class{constructor(){this.toDispose=new un,this.getMenuModelValue=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=yield this.menuConfig.getConfig(),{anchor:s,type:a,cell:u}=r,h=new un;this.toDispose.push(h);const p=u?u.getData():null,g=new Tc({id:"menuroot",type:Ur.Root,submenu:[]});h.push(Mt.create(()=>{g.dispose()}));const y={toDispose:h,anchor:s,target:{data:p,type:a},customRender:null,menuModel:g};return i.menuCustomRender&&(y.customRender=yield i.menuCustomRender(r,this.modelService)),i.menuModelService&&(yield i.menuModelService(r,y.menuModel,this.modelService,h)),y})}registerModel(r){const i=[r.registerModel({id:NA.id,getInitialValue:()=>null,watchChange:(s,a)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield jc.getModel(a)).watch(h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield this.getMenuModelValue(h);s.setValue(p)}))})})];this.toDispose.pushAll(i)}};(0,F.gn)([UP(vw),(0,F.w6)("design:type",vw)],mw.prototype,"menuConfig",void 0),(0,F.gn)([UP(Ku),(0,F.w6)("design:type",Object)],mw.prototype,"modelService",void 0),mw=(0,F.gn)([aN({contrib:[dc]})],mw);const cN=n=>Zo(r=>{r(mw),r(vw,{useValue:n})});var xg=M(1413),lN=M(44925),uN=M(18481),u1={adjustX:1,adjustY:1},d1=[0,0],dN={topLeft:{points:["bl","tl"],overflow:u1,offset:[0,-4],targetOffset:d1},topCenter:{points:["bc","tc"],overflow:u1,offset:[0,-4],targetOffset:d1},topRight:{points:["br","tr"],overflow:u1,offset:[0,-4],targetOffset:d1},bottomLeft:{points:["tl","bl"],overflow:u1,offset:[0,4],targetOffset:d1},bottomCenter:{points:["tc","bc"],overflow:u1,offset:[0,4],targetOffset:d1},bottomRight:{points:["tr","br"],overflow:u1,offset:[0,4],targetOffset:d1}},hN=dN,mi={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(r){var i=r.keyCode;if(r.altKey&&!r.ctrlKey||r.metaKey||i>=mi.F1&&i<=mi.F12)return!1;switch(i){case mi.ALT:case mi.CAPS_LOCK:case mi.CONTEXT_MENU:case mi.CTRL:case mi.DOWN:case mi.END:case mi.ESC:case mi.HOME:case mi.INSERT:case mi.LEFT:case mi.MAC_FF_META:case mi.META:case mi.NUMLOCK:case mi.NUM_CENTER:case mi.PAGE_DOWN:case mi.PAGE_UP:case mi.PAUSE:case mi.PRINT_SCREEN:case mi.RIGHT:case mi.SHIFT:case mi.UP:case mi.WIN_KEY:case mi.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(r){if(r>=mi.ZERO&&r<=mi.NINE||r>=mi.NUM_ZERO&&r<=mi.NUM_MULTIPLY||r>=mi.A&&r<=mi.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&r===0)return!0;switch(r){case mi.SPACE:case mi.QUESTION_MARK:case mi.NUM_PLUS:case mi.NUM_MINUS:case mi.NUM_PERIOD:case mi.NUM_DIVISION:case mi.SEMICOLON:case mi.DASH:case mi.EQUALS:case mi.COMMA:case mi.PERIOD:case mi.SLASH:case mi.APOSTROPHE:case mi.SINGLE_QUOTE:case mi.OPEN_SQUARE_BRACKET:case mi.BACKSLASH:case mi.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},VP=mi,jP=function(r){return+setTimeout(r,16)},HP=function(r){return clearTimeout(r)};typeof window<"u"&&"requestAnimationFrame"in window&&(jP=function(r){return window.requestAnimationFrame(r)},HP=function(r){return window.cancelAnimationFrame(r)});var $P=0,P3=new Map;function WP(n){P3.delete(n)}function XP(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;$P+=1;var i=$P;function s(a){if(a===0)WP(i),n();else{var u=jP(function(){s(a-1)});P3.set(i,u)}}return s(r),i}XP.cancel=function(n){var r=P3.get(n);return WP(r),HP(r)};var fN=VP.ESC,pN=VP.TAB;function gN(n){var r=n.visible,i=n.setTriggerVisible,s=n.triggerRef,a=n.menuRef,u=n.onVisibleChange,h=n.autoFocus,p=H.useRef(!1),g=function(){if(r&&s.current){var T,O,N,k;(T=s.current)===null||T===void 0||(O=T.triggerRef)===null||O===void 0||(N=O.current)===null||N===void 0||(k=N.focus)===null||k===void 0||k.call(N),i(!1),typeof u=="function"&&u(!1)}},y=function(){var T,O;(T=a.current)===null||T===void 0||(O=T.focus)===null||O===void 0||O.call(T),p.current=!0},b=function(T){var O;switch(T.keyCode){case fN:g();break;case pN:!p.current&&((O=a.current)===null||O===void 0?void 0:O.focus)?(T.preventDefault(),y()):g();break}};H.useEffect(function(){return r?(window.addEventListener("keydown",b),h&&XP(y,3),function(){window.removeEventListener("keydown",b),p.current=!1}):function(){p.current=!1}},[r])}var vN=M(59864);function Dk(n,r,i){var s=React.useRef({});return(!("value"in s.current)||i(s.current.condition,r))&&(s.current.value=n(),s.current.condition=r),s.current.value}function mN(n,r){typeof n=="function"?n(r):(0,ja.Z)(n)==="object"&&n&&"current"in n&&(n.current=r)}function ZP(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(function(a){return a});return s.length<=1?s[0]:function(a){r.forEach(function(u){mN(u,a)})}}function Nk(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return useMemo(function(){return ZP.apply(void 0,r)},r,function(s,a){return s.length===a.length&&s.every(function(u,h){return u===a[h]})})}function yN(n){var r,i,s=(0,vN.isMemo)(n)?n.type.type:n.type;return!(typeof s=="function"&&!(!((r=s.prototype)===null||r===void 0)&&r.render)||typeof n=="function"&&!(!((i=n.prototype)===null||i===void 0)&&i.render))}var bN=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function xN(n,r){var i=n.arrow,s=i===void 0?!1:i,a=n.prefixCls,u=a===void 0?"rc-dropdown":a,h=n.transitionName,p=n.animation,g=n.align,y=n.placement,b=y===void 0?"bottomLeft":y,E=n.placements,T=E===void 0?hN:E,O=n.getPopupContainer,N=n.showAction,k=n.hideAction,B=n.overlayClassName,$=n.overlayStyle,X=n.visible,ne=n.trigger,be=ne===void 0?["hover"]:ne,me=n.autoFocus,je=(0,lN.Z)(n,bN),ot=H.useState(),ct=(0,Xp.Z)(ot,2),Xt=ct[0],_t=ct[1],Zt="visible"in n?X:Xt,at=H.useRef(null);H.useImperativeHandle(r,function(){return at.current});var Gn=H.useRef(null),Rn="".concat(u,"-menu");gN({visible:Zt,setTriggerVisible:_t,triggerRef:at,menuRef:Gn,onVisibleChange:n.onVisibleChange,autoFocus:me});var Jn=function(){var vr=n.overlay,Fi;return typeof vr=="function"?Fi=vr():Fi=vr,Fi},Li=function(vr){var Fi=n.onOverlayClick,Xi=Jn().props;_t(!1),Fi&&Fi(vr),Xi.onClick&&Xi.onClick(vr)},Gi=function(vr){var Fi=n.onVisibleChange;_t(vr),typeof Fi=="function"&&Fi(vr)},Zr=function(){var vr,Fi=Jn(),Xi=ZP(Gn,Fi.ref),po=(vr={prefixCls:Rn},(0,kt.Z)(vr,"data-dropdown-inject",!0),(0,kt.Z)(vr,"onClick",Li),(0,kt.Z)(vr,"ref",yN(Fi)?Xi:void 0),vr);return typeof Fi.type=="string"&&(delete po.prefixCls,delete po["data-dropdown-inject"]),H.createElement(H.Fragment,null,s&&H.createElement("div",{className:"".concat(u,"-arrow")}),H.cloneElement(Fi,po))},jo=function(){var vr=n.overlay;return typeof vr=="function"?Zr:Zr()},Xs=function(){var vr=n.minOverlayWidthMatchTrigger,Fi=n.alignPoint;return"minOverlayWidthMatchTrigger"in n?vr:!Fi},yi=function(){var vr=n.openClassName;return vr!==void 0?vr:"".concat(u,"-open")},Zs=function(){var vr=n.children,Fi=vr.props?vr.props:{},Xi=Oe()(Fi.className,yi());return Zt&&vr?H.cloneElement(vr,{className:Xi}):vr},$a=k;return!$a&&be.indexOf("contextMenu")!==-1&&($a=["click"]),H.createElement(uN.Z,(0,xg.Z)((0,xg.Z)({builtinPlacements:T},je),{},{prefixCls:u,ref:at,popupClassName:Oe()(B,(0,kt.Z)({},"".concat(u,"-show-arrow"),s)),popupStyle:$,action:be,showAction:N,hideAction:$a||[],popupPlacement:b,popupAlign:g,popupTransitionName:h,popupAnimation:p,popupVisible:Zt,stretch:Xs()?"minWidth":"",popup:jo(),onPopupVisibleChange:Gi,getPopupContainer:O}),Zs())}var CN=H.forwardRef(xN),wN=CN;class IA extends H.Component{render(){const{children:r,trigger:i,disabled:s}=this.props,a=`${this.props.prefixCls}-dropdown`,u=H.Children.only(r),h=H.cloneElement(u,{className:Oe()(r.props.className,`${a}-trigger`),disabled:s}),p=s?[]:Array.isArray(i)?i:[i];let g=!1;p&&p.indexOf("contextMenu")!==-1&&(g=!0);const y=H.Children.only(this.props.overlay),b=H.createElement("div",{className:`${a}-overlay`},y);return H.createElement(wN,Object.assign({},this.props,{prefixCls:a,overlay:b,alignPoint:g,trigger:p}),h)}}(function(n){n.defaultProps={trigger:"hover",prefixCls:"x6",mouseEnterDelay:.15,mouseLeaveDelay:.1,placement:"bottomLeft"}})(IA||(IA={}));const RA=H.createContext({});class Fv extends H.PureComponent{constructor(){super(...arguments),this.onHotkey=()=>{this.triggerHandler()},this.onClick=r=>{this.triggerHandler(r)}}componentDidMount(){const{hotkey:r}=this.props;r&&this.props.context.registerHotkey(r,this.onHotkey)}componentWillUnmount(){const{hotkey:r}=this.props;r&&this.props.context.unregisterHotkey(r,this.onHotkey)}triggerHandler(r){!this.props.disabled&&!this.props.hidden&&(this.props.name&&this.props.context.onClick(this.props.name,r),this.props.onClick&&this.props.onClick())}render(){return H.createElement("div",Object.assign({},Fv.getProps(this.props)),Fv.getContent(this.props,this.onClick))}}(function(n){function r(s,a){const{className:u,disabled:h,active:p,hidden:g}=s,{prefixCls:y}=s.context,b=`${y}-item`;return{className:Oe()(b,a,{[`${b}-active`]:p,[`${b}-hidden`]:g,[`${b}-disabled`]:h},u)}}n.getProps=r;function i(s,a,u,h){const{icon:p,text:g,hotkey:y,children:b}=s,{prefixCls:E}=s.context,T=`${E}-item`;return H.createElement(H.Fragment,null,H.createElement("button",{type:"button",className:`${T}-button`,onClick:a},p&&H.isValidElement(p)&&H.createElement("span",{className:`${T}-icon`},p),H.createElement("span",{className:`${T}-text`},g||b),y&&H.createElement("span",{className:`${T}-hotkey`},y),u),h)}n.getContent=i})(Fv||(Fv={}));const EN=n=>H.createElement(RA.Consumer,null,r=>H.createElement(Fv,Object.assign({context:r},n))),SN=()=>H.createElement(RA.Consumer,null,({prefixCls:n})=>H.createElement("div",{className:`${n}-item ${n}-item-divider`}));var _N=function(n,r){var i={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&r.indexOf(s)<0&&(i[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)r.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(i[s[a]]=n[s[a]]);return i};const AN=n=>{const{hotkey:r,children:i}=n,s=_N(n,["hotkey","children"]);return H.createElement(RA.Consumer,null,a=>{const{prefixCls:u}=a,h=Fv.getProps(Object.assign({context:a},n),`${u}-submenu`);return H.createElement("div",Object.assign({},h),Fv.getContent(Object.assign({context:a},s),null,H.createElement("span",{className:`${u}-submenu-arrow`}),H.createElement("div",{className:`${u}-submenu-menu`},i)))})};class Bv extends H.PureComponent{constructor(){super(...arguments),this.onClick=(r,i)=>{this.props.stopPropagation&&i!=null&&i.stopPropagation(),this.props.onClick&&this.props.onClick(r)},this.registerHotkey=(r,i)=>{this.props.registerHotkey&&this.props.registerHotkey(r,i)},this.unregisterHotkey=(r,i)=>{this.props.unregisterHotkey&&this.props.unregisterHotkey(r,i)}}render(){const{prefixCls:r,className:i,children:s,hasIcon:a}=this.props,u=`${r}-menu`,h=RA.Provider,p={prefixCls:u,onClick:this.onClick,registerHotkey:this.registerHotkey,unregisterHotkey:this.unregisterHotkey};return H.createElement("div",{className:Oe()(u,{[`${u}-has-icon`]:a},i)},H.createElement(h,{value:p},s))}}(function(n){n.Item=EN,n.Divider=SN,n.SubMenu=AN,n.defaultProps={prefixCls:"x6",stopPropagation:!1}})(Bv||(Bv={}));const D3=n=>{const{idx:r,menuOptions:i,target:s,modelService:a,commandService:u,onHide:h}=n,{id:p,label:g,isEnabled:y=!0,isVisible:b=!0,iconName:E,submenu:T=[],active:O,hotkey:N,render:k,onClick:B}=i;if(!b)return null;if(i.type==="separator")return H.createElement(Bv.Divider,{key:String(i.id)+r});if(i.type==="root")return H.createElement(Bv,{hasIcon:!0},T.map((X,ne)=>D3({idx:ne,target:s,commandService:u,modelService:a,menuOptions:X,onHide:h})));if(i.submenu&&Array.isArray(i.submenu)){const X=bg.get(E),ne=!y;return H.createElement(Bv.SubMenu,{key:String(p),text:g,disabled:ne||T.length===0,icon:X?H.createElement(X,null):null,active:O,hotkey:N},T.map((be,me)=>D3({idx:me,target:s,commandService:u,modelService:a,menuOptions:be,onHide:h})))}const $=bg.get(E);return k?H.createElement(k,{menuItem:i,target:s,commandService:u,modelService:a,onHide:h},[H.createElement(Bv.Item,{key:String(p),text:g,disabled:!y,icon:$?H.createElement($,null):null,active:O,hotkey:N})]):H.createElement(Bv.Item,{key:String(p),text:g,disabled:!y,icon:$?H.createElement($,null):null,active:O,hotkey:N,onClick:()=>(0,F.mG)(void 0,void 0,void 0,function*(){yield B({menuItem:i,target:s,commandService:u,modelService:a}),h&&h()})})},TN=n=>{const{menuModel:r,target:i,onHide:s}=n,{modelService:a,commandService:u}=Yo(),[h]=zs(r);return D3({idx:-1,target:i,commandService:u,modelService:a,menuOptions:h,onHide:s})},MN=({toDispose:n})=>(H.useEffect(()=>()=>{n.dispose()},[n]),null),ON=()=>{const n=H.useRef(),r=Yo(),[i,,s]=l1({getModel:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return yield NA.getModel(r.modelService)}),initialState:{anchor:null,menuModel:null,target:null,customRender:null,toDispose:null}}),{target:a,anchor:u,menuModel:h,customRender:p,toDispose:g}=i;if(!a||!u||!h)return null;const y=()=>{s.setValue({anchor:null,menuModel:null,target:null,customRender:null,toDispose:null})},b=p?H.createElement(p,{target:a,modelService:r.modelService,onHide:y}):H.createElement(TN,{target:a,menuModel:h,onHide:y});return H.createElement("div",{className:"xflow-menu-mask",ref:n,onClick:y,onContextMenu:E=>{E.preventDefault(),E.stopPropagation()}},H.createElement(MN,{toDispose:g}),H.createElement(IA,{visible:!0,getPopupContainer:()=>n.current,overlay:b},H.createElement("div",{className:"xflow-context-menu-anchor",style:{top:u.y,left:u.x}})))},Ik="CanvasContextMenu",PN=n=>{const i=!!Yo(),s=H.useMemo(()=>n.config?n.config:new vw,[n.config]);return H.createElement(Dh,{createModule:cN,config:s},i&&H.createElement(ON,{config:s}))},DN=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new vw;return n(a,i),a},[i])},N3="CanvasToolbar";class YP{constructor(){this.CONFIG_TYPE=N3,this.setToolbarName=r=>{this.moduleId=N3+"__"+r},this.setToolbarModelService=r=>{this.toolbarModelService=r},this.setCustomToolbarRender=r=>{this.customRenderService=r},this.getConfig=()=>({CONFIG_TYPE:this.CONFIG_TYPE,toolbarCustomRender:this.customRenderService,toolbarModelService:this.toolbarModelService}),this.moduleId=N3+"__"+Sc()}dispose(){}}var KP=M(11382);const I3=H.createContext({});class NN extends H.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{this.processClick()},this.handleDropdownItemClick=r=>{this.processClick(r,!1)}}processClick(r=this.props.name,i=this.props.dropdown){!this.props.disabled&&!i&&(r&&this.props.context.onClick(r),this.props.onClick&&this.props.onClick(r))}renderButton(){const{className:r,hidden:i,disabled:s,active:a,icon:u,text:h,dropdown:p,dropdownArrow:g,tooltip:y,tooltipProps:b,tooltipAsTitle:E,children:T}=this.props,{prefixCls:O}=this.props.context,N=`${O}-item`,k={onClick:this.handleClick,className:Oe()(N,{[`${N}-hidden`]:i,[`${N}-active`]:a,[`${N}-disabled`]:s,[`${N}-dropdown`]:p},r)};y&&E&&(k.title=y);const B=H.createElement("button",Object.assign({type:"button"},k),u&&H.isValidElement(u)&&H.createElement("span",{className:`${N}-icon`},u),(h||T)&&H.createElement("span",{className:`${N}-text`},h||T),p&&g&&H.createElement("span",{className:`${N}-dropdown-arrow`}));return y&&!E&&!s?H.createElement(OA.Z,Object.assign({title:y,placement:"bottom",mouseEnterDelay:0,mouseLeaveDelay:0},b),B):B}render(){const{dropdown:r,dropdownProps:i,disabled:s}=this.props,a=this.renderButton();if(r!=null&&!s){const u=H.createElement("div",null,r.type===Bv?H.cloneElement(r,{onClick:this.handleDropdownItemClick}):r),h=Object.assign(Object.assign({trigger:["click"]},i),{disabled:s,overlay:u});return H.createElement(IA,Object.assign({},h),a)}return a}}const qP=n=>H.createElement(I3.Consumer,null,r=>H.createElement(NN,Object.assign({context:r},n)));qP.defaultProps={dropdownArrow:!0};const IN=({children:n,className:r})=>H.createElement(I3.Consumer,null,({prefixCls:i})=>H.createElement("div",{className:Oe()(`${i}-group`,r)},n));class h1 extends H.PureComponent{constructor(){super(...arguments),this.onClick=(r,i)=>{this.props.onClick&&this.props.onClick(r,i)}}render(){const{prefixCls:r,className:i,children:s,extra:a,size:u,align:h,hoverEffect:p}=this.props,g=`${r}-toolbar`;return H.createElement("div",{className:Oe()(g,i,{[`${g}-${u}`]:u,[`${g}-align-right`]:h==="right",[`${g}-hover-effect`]:p})},H.createElement("div",{className:`${g}-content`},H.createElement("div",{className:`${g}-content-inner`},H.createElement(I3.Provider,{value:{prefixCls:g,onClick:this.onClick}},s)),a&&H.createElement("div",{className:`${g}-content-extras`},a)))}}(function(n){n.Item=qP,n.Group=IN,n.defaultProps={prefixCls:"x6",hoverEffect:!1}})(h1||(h1={}));const RN=n=>{const r=Yo(),{item:i,layout:s}=n,a=Oe()({["xflow-toolbar-item"]:!0}),u=s==="vertical"?"":i.text;let h;if(i.icon)h=i.icon;else if(i.iconName){const T=bg.get(i.iconName);h=H.createElement(T,null)}const p=i.render,{isEnabled:g=!0}=i,{commandService:y,modelService:b}=r,E=()=>{i.onClick&&i.onClick({toolbarItem:i,commandService:y,modelService:b})};return p?H.createElement(p,Object.assign({},i,{onClick:E}),H.createElement(h1.Item,Object.assign({},i,{icon:h,text:u,className:a,disabled:!g,tooltip:i.tooltip||i.text,tooltipProps:Object.assign({placement:s==="vertical"?"left":"bottom"},i.tooltipProps),onClick:()=>{}}))):H.createElement(h1.Item,Object.assign({},i,{icon:h,text:u,className:a,hidden:!i,disabled:!g,tooltip:i.tooltip||i.text,onClick:E,tooltipProps:Object.assign(Object.assign({},i.tooltipProps),{placement:s==="vertical"?"left":"bottom"})}))},kN=n=>{const{group:r,layout:i}=n,s=H.useMemo(()=>r.name||Sc(),[r.name]),{items:a=[]}=r;if(a.length===0)return null;const u=Oe()({["xflow-toolbar-group"]:!0});return H.createElement(h1.Group,{className:u,key:s},a.map(h=>H.createElement(RN,{item:h,layout:i,key:h.id})))},LN=n=>{const{config:r}=n,i=r.moduleId,s=Yo(),[a,u,h,p]=x0({name:i,layout:n.layout,mainGroups:[],extraGroups:[],customRender:null});return H.useEffect(()=>{const g=new un;if(!s.modelService.findDeferredModel(i)){const{toolbarCustomRender:b,toolbarModelService:E}=r.getConfig(),T=s.modelService.registerModel({id:i,modelFactory:()=>h,watchChange:O=>(0,F.mG)(void 0,void 0,void 0,function*(){if(E&&(yield E(O,s.modelService,g)),b){const N=k=>{O.setValue(B=>B.customRender=k)};yield b(s.modelService,N)}return g})});g.push(T)}return()=>{g.dispose()}},[]),{isModelReady:p,state:a,setState:u,toolbarModel:h}},JP=n=>{const{idx:r,groups:i,layout:s,toolbarOptions:a}=n,{hoverEffect:u=!0}=a;return H.createElement(h1,{hoverEffect:u},i.map((h,p)=>{const g=r+p;return H.createElement(kN,{key:g,group:h,layout:s})}))},GN=n=>{const{isModelReady:r,state:i}=LN(n),s=Ul(n.position),{mainGroups:a=[],extraGroups:u=[],layout:h,customRender:p}=i,g=Oe()(n.className,h,"xflow-toolbar"),y=Oe()({[h]:!0,["xflow-toolbar-root"]:!0});return r?p?H.createElement("div",{className:g,style:Object.assign(Object.assign({},s),n.style)},H.createElement(p,{config:i})):H.createElement("div",{className:g,style:Object.assign(Object.assign({},s),n.style)},H.createElement("div",{className:y},a.length>0&&H.createElement(JP,{idx:"mainGroups",groups:a,layout:h,toolbarOptions:i}),u.length>0&&H.createElement(JP,{idx:"extraGroups",groups:u,layout:h,toolbarOptions:i}))):H.createElement("div",{className:g,style:Object.assign(Object.assign({},s),n.style)},H.createElement(KP.Z,{spinning:!0,size:"small"}))},FN=H.memo(GN),QP=n=>{const i=!!Yo(),s=H.useMemo(()=>n.config?n.config:new YP,[n.config]);return i?H.createElement(FN,Object.assign({},n,{config:s})):null},eD=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new YP;return n(a,i),a},[i])};var BN=M(72504),zN=M(16130),UN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zm196-50c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zm0-140c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}},{tag:"path",attrs:{d:"M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"}}]},name:"one-to-one",theme:"outlined"},VN=UN,kA=M(27029),tD=function(r,i){return H.createElement(kA.Z,(0,xg.Z)((0,xg.Z)({},r),{},{ref:i,icon:VN}))};tD.displayName="OneToOneOutlined";var jN=H.forwardRef(tD),HN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},$N=HN,nD=function(r,i){return H.createElement(kA.Z,(0,xg.Z)((0,xg.Z)({},r),{},{ref:i,icon:$N}))};nD.displayName="CompressOutlined";var WN=H.forwardRef(nD),XN=M(38296),ZN=M(21444),yw;(function(n){bg.set("ZoomInOutlined",BN.Z),bg.set("ZoomOutOutlined",zN.Z),bg.set("OneToOneOutlined",jN),bg.set("CompressOutlined",WN),bg.set("FullscreenOutlined",XN.Z),bg.set("FullscreenExitOutlined",ZN.Z),n.ZOOM_IN=ti.GRAPH_ZOOM.id+"-zoom-in",n.ZOOM_OUT=ti.GRAPH_ZOOM.id+"-zoom-out",n.SCALE_TO_ONE=ti.GRAPH_ZOOM.id+"-scale-to-one",n.SCALE_TO_FIT=ti.GRAPH_ZOOM.id+"-scale-to-fit",n.FULLSCREEN=ti.GRAPH_ZOOM.id+"-fullscreen",n.MAX_SCALE=1.5,n.MIN_SCALE=.05,n.zoomOptions={maxScale:n.MAX_SCALE,minScale:n.MIN_SCALE},n.getToolbarConfig=({zoomFactor:r,fullscreen:i})=>[{name:"main",items:[{id:n.ZOOM_IN,tooltip:"\u653E\u5927",iconName:"ZoomInOutlined",onClick:({commandService:s})=>{s.executeCommand(ti.GRAPH_ZOOM.id,{factor:.1,zoomOptions:n.zoomOptions})}},{id:n.ZOOM_OUT,tooltip:"\u7F29\u5C0F",iconName:"ZoomOutOutlined",onClick:({commandService:s})=>{s.executeCommand(ti.GRAPH_ZOOM.id,{factor:-.1,zoomOptions:n.zoomOptions})}},{id:n.SCALE_TO_ONE,iconName:"OneToOneOutlined",tooltip:"\u7F29\u653E\u52301:1",isEnabled:r!==1,onClick:({commandService:s})=>{s.executeCommand(ti.GRAPH_ZOOM.id,{factor:"real",zoomOptions:n.zoomOptions})}},{id:n.SCALE_TO_FIT,tooltip:"\u7F29\u653E\u5230\u9002\u5E94\u5C4F\u5E55",iconName:"CompressOutlined",onClick:({commandService:s})=>{s.executeCommand(ti.GRAPH_ZOOM.id,{factor:"fit",zoomOptions:n.zoomOptions})}},{id:n.FULLSCREEN,tooltip:i?"\u9000\u51FA\u5168\u5C4F":"\u5168\u5C4F",iconName:i?"FullscreenExitOutlined":"FullscreenOutlined",onClick:({commandService:s})=>{s.executeCommand(ti.GRAPH_FULLSCREEN.id,{})}}]}]})(yw||(yw={}));const Rk="CANVAS_SCALE_TOOLBAR",YN=eD(n=>{n.setToolbarModelService((r,i)=>(0,F.mG)(void 0,void 0,void 0,function*(){const s=yield $s.useValue(i);r.setValue(h=>{h.mainGroups=yw.getToolbarConfig({zoomFactor:s.zoomFactor,fullscreen:!1})});const a=yield hc.getModel(i);a.setValue(!1),a.watch(h=>{r.setValue(p=>{p.mainGroups=yw.getToolbarConfig({zoomFactor:s.zoomFactor,fullscreen:h})})}),(yield $s.getModel(i)).watch(({zoomFactor:h})=>(0,F.mG)(void 0,void 0,void 0,function*(){const p=yield hc.useValue(i);r.setValue(g=>{g.mainGroups=yw.getToolbarConfig({zoomFactor:h,fullscreen:p})})}))}))}),KN=n=>{const r=YN(n);return H.createElement(QP,Object.assign({layout:"vertical"},n,{config:r,position:n.position||{top:12,right:12}}))};function kk(n){const{className:r,layout:i,initialValues:s,form:a,formItems:u=[],onFinish:h,submitButton:p,buttonProps:g}=n;if(!a)return null;const y=i==="vertical"?{padding:"0px 12px"}:{padding:"8px 12px"};return React.createElement(Form,{size:"small",form:a,style:y,layout:i,onFinish:h,className:r,initialValues:s,labelCol:i==="vertical"?{span:24}:{span:8},wrapperCol:i==="vertical"?{span:24}:{span:16}},u.map(b=>React.createElement(Form.Item,Object.assign({label:b.label,name:b.name,rules:b.rules},b.itemProps),React.createElement(b.render,b.renderProps))),React.createElement(Form.Item,{wrapperCol:{offset:0,span:24}},p||React.createElement(Button,Object.assign({type:"primary",htmlType:"submit",style:{width:"100%"}},g),"\u6267\u884C\u547D\u4EE4")))}const qN=Symbol("IMinimapConfigProvider");let R3=class{constructor(){this.toDispose=new un,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return Mt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new un,s=[r.graphOptions.registerHook({name:"add minimap options",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=yield this.minimapConfig.getConfig();a.minimap=Object.assign({},u)})})];return i.pushAll(s),Mt.create(()=>{})})}};(0,F.gn)([on(qN),(0,F.w6)("design:type",Object)],R3.prototype,"minimapConfig",void 0),R3=(0,F.gn)([cn({contrib:Hs})],R3);const Lk=n=>ManaSyringe.Module(r=>{r(IMinimapConfigProvider,{useDynamic:()=>n}),r(HookContribution)});class bw extends ur.DK{renderMarkup(){return this.renderJSONMarkup({tagName:"rect",selector:"body"})}update(){super.update({body:{refWidth:"100%",refHeight:"100%",fill:bw.nodeFillColor}})}}bw.nodeFillColor="#31d0c6",bw.setNodeFillColor=n=>{bw.nodeFillColor=n};const JN="CanvasMiniMap",QN=()=>({grid:!1,enabled:!0,width:200,height:120,padding:8,graphOptions:{async:!0,getCellView(n){if(n.isNode())return SimpleNodeView},createCellView(n){if(n.isEdge())return null}}}),Gk=n=>{const{nodeFillColor:r,borderColor:i="#ced4de",handlerColor:s="rgba(0,0,0,.3)",miniMapClz:a="",position:u={bottom:12,right:12},minimapOptions:h={}}=n,p=React.useRef(null),g=React.useRef(n.minimapOptions),y=React.useMemo(()=>new Set([a,"xflow-minimap","minimap-instacne-"+Date.now().toString()]),[a]),b=React.useMemo(()=>()=>__awaiter(void 0,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},QN()),g.current),{container:p.current})}),[p]),E=usePositionStyle(u);React.useEffect(()=>{g.current=h},[g,h]),React.useEffect(()=>{r&&SimpleNodeView.setNodeFillColor(r)},[r]),React.useEffect(()=>{const O=Array.from(y).reduce((B,$)=>$?`${B}.${$}`:B,""),N=`
      ${O} .x6-widget-minimap-viewport {
        border: 1px solid ${i};
        margin: 0;
      }
      ${O} .x6-widget-minimap-viewport-zoom {
        border: 1px solid ${s};
      }
    `,k=insertCss(N);return()=>{document.head.removeChild(k)}},[i,y,s]);const T=Array.from(y).join(" ");return React.createElement(XFlowAppExtensionModule,{config:{getConfig:b,CONFIG_TYPE:JN},createModule},React.createElement("div",{ref:p,className:T,style:E}))};class eI{constructor(){this.getValue=()=>({})}dispose(){this.getValue=()=>null}}class Fk{constructor(r){this.moduleId=r}dispose(){}}const rD=H.createContext({propsProxy:null,commandService:null,modelService:null}),xw=()=>H.useContext(rD),iD=n=>{const{className:r,position:i,style:s,children:a}=n,u=Yo(),h=Ul(i),p=H.useMemo(()=>new eI,[]);if(H.useEffect(()=>()=>{p.dispose()},[p]),!u||!u.modelService)return null;p.getValue=()=>n;const g=Oe()({[r]:!!r,"xflow-workspace-panel":!0}),{commandService:y,modelService:b}=u;return H.createElement(rD.Provider,{value:{propsProxy:p,commandService:y,modelService:b}},H.createElement("div",{className:g,style:Object.assign(Object.assign({},h),s)},a))};var tI=M(82363);const f1={HORIRONTAL_NODE:"xflow-node-horizontal-edge",VERTICAL_NODE:"xflow-node-vertical-edge",VERTICAL_GROUP:"xflow-group-vertical-edge"},LA={EDGE:"xflow-edge"},k3="XFLOW_NODE_SHAPE",oD="processing",nI=160,rI=32;var p1;(function(n){n.id="GRAPH_STATUS_INFO";let r;(function(i){i.SUCCESS="success",i.PROCESSING="processing",i.ERROR="error",i.DEFAULT="default",i.WARNING="warning"})(r=n.StatusEnum||(n.StatusEnum={})),n.getModel=Go(n.id),n.useValue=Vi(n.id)})(p1||(p1={}));var GA;(function(n){n.QUERY_GRAPH_STATUS={id:"xflow:query-graph-status",label:"\u67E5\u8BE2\u753B\u5E03\u8282\u70B9\u72B6\u6001"}})(GA||(GA={}));let FA;const{AnchorGroup:BA}=xi;ur.NB.registry.exist(k3)?FA=ur.NB.registry.get(k3):FA=Vl.define({width:nI,height:rI,shape:k3,view:zi,ports:{groups:{top:{zIndex:2,position:{name:BA.TOP}},bottom:{zIndex:2,position:{name:BA.BOTTOM}},right:{zIndex:2,position:{name:BA.RIGHT}},left:{zIndex:2,position:{name:BA.LEFT}}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%",zIndex:1}},portMarkup:[{tagName:"g",selector:"xflow-port-group",className:"xflow-port-group",attrs:{width:8,height:8,x:-4,y:-4,zIndex:10,magnet:"true"},children:[{tagName:"circle",selector:"xflow-port",className:"xflow-port",attrs:{r:4,fill:"#fff",stroke:"#d9d9d9",zIndex:12}},{tagName:"polygon",selector:"xflow-port-arrow",className:"xflow-port-arrow",attrs:{points:"0,0 8,0 4,4 ",fill:"#d9d9d9",stroke:"#d9d9d9",zIndex:13,transform:"translate(-4,0)"}}]}]});const{DirectoryTree:iI,TreeNode:sD}=tI.Z,oI=({expanded:n})=>n?React.createElement(FolderOpenFilled,null):React.createElement(FolderFilled,null),sI=n=>new XFlowNode(n),aD=n=>{const{nodeConfig:r,onMouseDown:i,graphConfig:s,modelService:a,commandService:u}=n;if(!s)return React.createElement("div",null);if(r.renderComponent)return React.createElement("div",{onMouseDown:i},React.createElement(r.renderComponent,{data:r,isNodeTreePanel:!0}));const h=s.nodeTypeParser(r)||XFlowConstants.XFLOW_DEFAULT_NODE,p=s.nodeRender.get(h);return React.createElement("div",{onMouseDown:i},React.createElement(p,{commandService:u,modelService:a,data:r,isNodeTreePanel:!0}))},cD=n=>{const[r,i]=useState(!1),[s,a]=useState(),{getGraphConfig:u}=useXFlowApp();u().then(O=>{a(O.appContainer)});const{prefixClz:h,graphConfig:p,commandService:g,modelService:y,popoverContent:b,onMouseDown:E,item:T}=n;return React.createElement(React.Fragment,null,b&&React.createElement(Popover,{placement:"right",destroyTooltipOnHide:!0,content:b,visible:r,onVisibleChange:O=>{i(O)},getPopupContainer:()=>s||document.body},React.createElement("div",{className:`${h}-node-wrapper`,onMouseEnter:()=>{i(!0)}},aD({graphConfig:p,commandService:g,onMouseDown:E,modelService:y,nodeConfig:T}))),!b&&React.createElement("div",{className:`${h}-node-wrapper`,onMouseEnter:()=>{i(!0)}},aD({graphConfig:p,commandService:g,onMouseDown:E,modelService:y,nodeConfig:T})))},Bk=n=>{const{x6NodeFactory:r,dndOptions:i,onNodeDrop:s,state:a,onFolderExpand:u,prefixClz:h}=n,{graphProvider:p,modelService:g,commandService:y}=useXFlowApp(),[b,E]=React.useState(),[T,O]=React.useState(),[N,k]=React.useState();p.getGraphInstance().then(X=>{k(X)}),React.useEffect(()=>{if(p.getGraphOptions().then(ne=>{E(ne)}),!N)return;const X=new Addon.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},i),{target:N,validateNode:ne=>__awaiter(void 0,void 0,void 0,function*(){const be=Object.assign(Object.assign({},ne.getData()),ne.getPosition());return s?yield s(be,y,g):console.error("onNodeDrop method is required in NodeTree Panel"),!1})}));O(X)},[y,i,N,p,g,s]);const B=React.useCallback(X=>ne=>{if(!N||!T||!b)return;const be=b.nodeTypeParser(X),me=X.renderComponent?X.renderComponent:b.nodeRender.get(be),je=getNodeReactComponent(me,y,g),ot={data:X,width:X.width||180,height:X.height||40,view:b.graphId,component:je},ct=r?r(ot):sI(ot);T.start(ct,ne.nativeEvent)},[y,T,N,b,g,r]),$=React.useCallback((X=[])=>X.map(ne=>{const{isDirectory:be,children:me,popoverContent:je}=ne;return be?React.createElement(sD,{icon:oI,key:ne.id,title:ne.label,className:`${h}-tree-folder`},$(me)):React.createElement(sD,{isLeaf:!0,key:ne.id,className:`${h}-tree-leaf`,icon:React.createElement("span",null),title:React.createElement(cD,{item:ne,onMouseDown:B(ne),popoverContent:je,prefixClz:h,modelService:g,commandService:y,graphConfig:b})})}),[y,b,g,B,h]);return React.createElement(React.Fragment,null,React.createElement("div",{className:`${h}-body`,style:n.style},!a.keyword&&React.createElement(iI,{showIcon:!0,selectable:!1,autoExpandParent:!1,onExpand:u,expandedKeys:a.expandedKeys,className:`${h}-tree`},$(a.treeData)),a.searchList.length>0&&React.createElement("ul",{className:`${h}-body-list`},a.searchList.map(X=>React.createElement("li",{className:`${h}-body-list-item`},React.createElement(cD,{item:X,onMouseDown:B(X),popoverContent:X.popoverContent,prefixClz:h,modelService:g,commandService:y,graphConfig:b})))),a.keyword&&a.searchList.length===0&&React.createElement(Empty,{style:{marginTop:"48px"}})))},zk=n=>{const{prefixClz:r,onKeywordChange:i}=n,{propsProxy:s}=usePanelContext(),a=s.getValue();return React.createElement(React.Fragment,null,React.createElement("div",{className:`${r}-header`,style:n.style},a.header&&React.isValidElement(a.header)&&a.header,a.searchService&&React.createElement("div",{className:`${r}-header-search`},React.createElement(Input,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:u=>i(u.target.value),style:{width:"100%",border:0}}))))},Uk=n=>{const{prefixClz:r}=n,{propsProxy:i}=usePanelContext(),s=i.getValue();return React.createElement(React.Fragment,null,React.createElement("div",{className:`${r}-footer`,style:n.style},s.footer&&React.isValidElement(s.footer)&&s.footer))},Vk=n=>{const r=n&&n.headerPosition&&n.headerPosition.height||PANEL_HEADER_HEIGHT,i=n.footerPosition&&n.footerPosition.height||PANEL_FOOTER_HEIGHT;return{headerStyle:usePositionStyle(Object.assign({height:r,lineHeight:r,top:0,left:0,right:0},n.headerPosition)),bodyStyle:usePositionStyle(Object.assign({left:0,right:0,top:r,bottom:i},n.bodyPosition)),footerStyle:usePositionStyle(Object.assign({left:0,right:0,lineHeight:i,height:i,bottom:0},n.footerPosition))}};var jk=M(45578),Cw;(function(n){n.id="TREE_PANEL_MODEL",n.useModel=r=>(0,F.mG)(this,void 0,void 0,function*(){return r.awaitModel(n.id)})})(Cw||(Cw={}));const Hk=(n,r)=>{n.executeCommand(XFlowModelCommands.UPDATE_MODEL.id,{getModel:i=>__awaiter(void 0,void 0,void 0,function*(){return Cw.useModel(i)}),updateModel:r})},$k=n=>{const{treeDataService:r,searchService:i}=n,{modelService:s}=useXFlowApp(),[a,u,h]=createComponentModel({treeData:[],searchList:[],treeNodeList:[],expandedKeys:[],defaultExpandAll:!1,keyword:""});React.useEffect(()=>{s.findDeferredModel(Cw.id)||s.registerModel({id:Cw.id,modelFactory:()=>h,watchChange:y=>__awaiter(void 0,void 0,void 0,function*(){const b=yield MODELS.GRAPH_META.getModel(s),E=O=>__awaiter(void 0,void 0,void 0,function*(){const N=yield r(O,s),{treeData:k,rootNodes:B}=aI(N),$=yield y.getValidValue(),X=$.expandedKeys.length>0?$.expandedKeys:B.map(ne=>ne.id);return{listData:N,treeData:k,expandedKeys:X}}),T=b.watch(O=>__awaiter(void 0,void 0,void 0,function*(){const N=yield E(O);y.setValue({treeNodeList:N.listData,treeData:N.treeData,expandedKeys:N.expandedKeys,defaultExpandAll:!1,keyword:"",searchList:[]})}));return Disposable.create(()=>{T.dispose()})})})},[]);const p=React.useCallback(y=>{u(b=>{b.expandedKeys=y})},[u]),g=React.useCallback(y=>__awaiter(void 0,void 0,void 0,function*(){if(!i)return console.warn("searchService is not defined");if(y){const b=yield i(a.treeNodeList,y);u(E=>{E.keyword=y,E.searchList=b})}else u(b=>{b.keyword="",b.searchList=[]})}),[i,a.treeNodeList]);return{state:a,setState:u,onKeywordChange:g,onFolderExpand:p}};function aI(n=[]){const i=(h=>uniqBy(h,"id").reduce((y,b)=>{const E=b.parentId||TREE_ROOT_ID;return y.has(E)||y.set(E,[]),y.get(E).push(b),y},new Map))(cloneDeep(n));function s(h,p){return h.map(g=>{if(p.has(g.id)){const y=p.get(g.id);g.key=g.id,g.isDirectory=!0,g.children=s(y,p)||[]}else g.isLeaf=!0;return g})}const a=i.get(TREE_ROOT_ID)||[];return{treeData:s(a,i),rootNodes:a}}var lD;(function(n){n.id="TREE_PANEL_DATA"})(lD||(lD={}));const cI=n=>{const{headerStyle:r,bodyStyle:i,footerStyle:s}=usePanelLyaoutStyle(n),{state:a,onFolderExpand:u,onKeywordChange:h}=useTreePanelData(n);return React.createElement(React.Fragment,null,React.createElement(NodePanelHeader,Object.assign({},n,{state:a,style:r,onKeywordChange:h})),React.createElement(NodePanelBody,Object.assign({},n,{state:a,style:i,onFolderExpand:u})),React.createElement(NodePanelFooter,Object.assign({},n,{state:a,style:s})))},Wk=n=>{const r=useXflowPrefixCls("node-dnd-panel");return React.createElement(WorkspacePanel,Object.assign({},n,{className:r}),React.createElement(cI,Object.assign({},n,{prefixClz:r})))},lI=n=>new FA(n),uI=n=>{const{x6NodeFactory:r,dndOptions:i,onNodeDrop:s}=n,{graphProvider:a,modelService:u,commandService:h}=Yo(),[p,g]=H.useState(),[y,b]=H.useState(),[E,T]=H.useState();H.useEffect(()=>{a.getGraphInstance().then(N=>{T(N)}),a.getGraphOptions().then(N=>{g(N)})},[a,T,g]),H.useEffect(()=>{if(!E)return;const N=new ur.e9.q6(Object.assign(Object.assign({scaled:!1,animation:!1},i),{target:E,validateNode:k=>(0,F.mG)(void 0,void 0,void 0,function*(){const B=Object.assign(Object.assign({},k.getData()),k.getPosition());return s?yield s(B,h,u):console.error("onNodeDrop method is required in NodeTree Panel"),!1})}));return b(N),()=>{N.dispose()}},[h,u,i,E,s]);const O=H.useCallback(N=>k=>{if(!E||!y||!p||N.isDisabled)return;const B=p.nodeTypeParser(N),$=N.renderComponent?N.renderComponent:p.nodeRender.get(B),X=O0($,h,u),ne={data:N,width:N.width||180,height:N.height||40,view:p.graphId,component:X},be=r?r(ne):lI(ne);y.start(be,k.nativeEvent)},[h,y,E,p,u,r]);return{graphConfig:p,onMouseDown:O,modelService:u,commandService:h}};var ww=M(14277),dI=M(55241);const uD=n=>{const{nodeConfig:r,onMouseDown:i,graphConfig:s,modelService:a,commandService:u}=n;if(!s)return H.createElement("div",null);if(r.renderComponent)return H.createElement("div",{onMouseDown:i},H.createElement(r.renderComponent,{data:r,isNodePanel:!0}));const h=s.nodeTypeParser(r)||qr,p=s.nodeRender.get(h);return H.createElement("div",{onMouseDown:i},H.createElement(p,{commandService:u,modelService:a,data:r,isNodeTreePanel:!0}))},dD=n=>{const[r,i]=H.useState(!1),{prefixClz:s,graphConfig:a,commandService:u,modelService:h,popoverContent:p,onMouseDown:g,item:y}=n;return H.createElement(H.Fragment,null,p?H.createElement(dI.Z,{placement:"right",destroyTooltipOnHide:!0,content:p,visible:r,onVisibleChange:b=>{i(b)}},H.createElement("div",{className:`${s}-node-wrapper`,onMouseEnter:()=>{i(!0)}},uD({graphConfig:a,commandService:u,onMouseDown:g,modelService:h,nodeConfig:y}))):H.createElement("div",{className:`${s}-node-wrapper`},uD({graphConfig:a,commandService:u,onMouseDown:g,modelService:h,nodeConfig:y})))},hI=n=>{const{searchResult:r,prefixClz:i,onMouseDown:s,modelService:a,commandService:u,graphConfig:h}=n;return r.length===0?H.createElement(ww.Z,{style:{marginTop:"24px"}}):H.createElement("ul",{className:"xflow-collapse-search-list"},r.map(p=>H.createElement("li",{className:`xflow-collapse-search-list-item ${p.isDisabled?"disabled":""}`,key:p.id},H.createElement(dD,{item:p,onMouseDown:s(p),popoverContent:p.popoverContent,prefixClz:i,modelService:a,commandService:u,graphConfig:h}))))};var fI={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},pI=fI,hD=function(r,i){return H.createElement(kA.Z,(0,xg.Z)((0,xg.Z)({},r),{},{ref:i,icon:pI}))};hD.displayName="CaretRightOutlined";var gI=H.forwardRef(hD);const vI=n=>{const{onActiveKeyChange:r,collapseData:i,prefixClz:s,onMouseDown:a,modelService:u,commandService:h,graphConfig:p}=n,g=b=>{const{header:E,extra:T,icon:O,isCollapsed:N}=b,k=B=>{B.preventDefault(),r(b.id)};return H.createElement("div",{className:"xflow-collapse-header",onClick:k},H.createElement("div",{className:"xflow-collapse-header-icon"},Ld(O)?H.createElement(O,{isCollapsed:N}):H.createElement(gI,{rotate:N?0:90,style:{fontSize:"12px"}})),H.createElement("div",{className:"xflow-collapse-header-label"},Ld(E)?H.createElement(E,b):E),H.createElement("div",{className:"xflow-collapse-header-extra"},Ld(T)?H.createElement(T,b):T))},y=b=>H.createElement("div",{className:"xflow-collapse-content"},b.map(E=>H.createElement("div",{className:`xflow-collapse-content-item ${E.isDisabled?"disabled":""}`,key:E.id},H.createElement(dD,{item:E,onMouseDown:a(E),popoverContent:E.popoverContent,prefixClz:s,modelService:u,commandService:h,graphConfig:p}))));return H.createElement("ul",{className:"xflow-collapse-list"},i.length===0&&H.createElement(ww.Z,{style:{marginTop:"24px"}}),i.map(b=>{const{children:E=[],isCollapsed:T,render:O}=b,N=T?"close":"open";return H.createElement("li",{className:`xflow-collapse-list-item ${N}`,key:b.id},g(b),Ld(O)?H.createElement(O,b):y(E))}))},mI=n=>{const{state:r,prefixClz:i,onActiveKeyChange:s}=n,{graphConfig:a,onMouseDown:u,modelService:h,commandService:p}=uI(n),{searchResult:g,collapseData:y,keyword:b}=r;return H.createElement("div",{className:`${i}-body`,style:n.style},b.length===0&&H.createElement(vI,{onActiveKeyChange:s,collapseData:y,onMouseDown:u,modelService:h,commandService:p,graphConfig:a,prefixClz:i}),b.length>0&&H.createElement(hI,{searchResult:g,onMouseDown:u,modelService:h,commandService:p,graphConfig:a,prefixClz:i}))};var zA=M(4107);const yI=n=>{const{prefixClz:r,onKeywordChange:i,state:s}=n,{propsProxy:a}=xw(),u=a.getValue(),h=p=>{const g=s.collapseData.reduce((y,b)=>(b.children&&y.push(...b.children),y),[]);i(p.target.value,g)};return H.createElement(H.Fragment,null,H.createElement("div",{className:`${r}-header`,style:n.style},u.header&&H.isValidElement(u.header)&&u.header,u.searchService&&H.createElement("div",{className:`${r}-header-search`},H.createElement(zA.Z,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:p=>h(p),style:{width:"100%",border:0}}))))},bI=n=>{const{prefixClz:r}=n,{propsProxy:i}=xw(),s=i.getValue();return H.createElement(H.Fragment,null,H.createElement("div",{className:`${r}-footer`,style:n.style},s.footer&&H.isValidElement(s.footer)&&s.footer))};var xI={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M689 165.1L308.2 493.5c-10.9 9.4-10.9 27.5 0 37L689 858.9c14.2 12.2 35 1.2 35-18.5V183.6c0-19.7-20.8-30.7-35-18.5z"}}]},name:"caret-left",theme:"outlined"},CI=xI,fD=function(r,i){return H.createElement(kA.Z,(0,xg.Z)((0,xg.Z)({},r),{},{ref:i,icon:CI}))};fD.displayName="CaretLeftOutlined";var wI=H.forwardRef(fD);const EI=n=>{const{prefixClz:r,onCollapseBtnClick:i,isCollapsed:s,collapseButtonStyle:a,style:u}=n;return H.createElement(H.Fragment,null,H.createElement("div",{className:`${r}-header`,style:Object.assign(Object.assign({},u),a),onClick:i},H.createElement(wI,{rotate:s?180:0})))},SI=40,_I=40,AI=n=>{const r=n&&n.headerPosition&&n.headerPosition.height||SI,i=n.footerPosition&&n.footerPosition.height||_I;return{headerStyle:Ul(Object.assign({height:r,lineHeight:r,top:0,left:0,right:0},n.headerPosition)),bodyStyle:Ul(Object.assign({left:0,right:0,top:r,bottom:i},n.bodyPosition)),footerStyle:Ul(Object.assign({left:0,right:0,lineHeight:i,height:i,bottom:0},n.footerPosition))}};var UA;(function(n){n.id="COLLAPSE_PANEL_DATA",n.useModel=r=>(0,F.mG)(this,void 0,void 0,function*(){return r.awaitModel(n.id)})})(UA||(UA={}));const Xk=(n,r)=>{n.executeCommand(XFlowModelCommands.UPDATE_MODEL.id,{getModel:i=>__awaiter(void 0,void 0,void 0,function*(){return NsCollapsePanelModel.useModel(i)}),updateModel:r})},TI=n=>{const{collapsible:r,nodeDataService:i,searchService:s,onCollapseChange:a}=n,{modelService:u}=Yo(),[h,p,g]=x0({keyword:"",collapseData:[],searchResult:[]});H.useEffect(()=>{u.findDeferredModel(UA.id)||u.registerModel({id:UA.id,modelFactory:()=>g,watchChange:E=>(0,F.mG)(void 0,void 0,void 0,function*(){const T=yield id.getModel(u),O=k=>(0,F.mG)(void 0,void 0,void 0,function*(){return{collapseData:yield i(k,u)}}),N=T.watch(k=>(0,F.mG)(void 0,void 0,void 0,function*(){const{collapseData:B}=yield O(k);E.setValue($=>{$.keyword="",$.collapseData=B,$.searchResult=[]})}));return Mt.create(()=>{N.dispose()})})})},[]);const y=H.useCallback(E=>{p(T=>{T.collapseData.forEach(O=>{O.id===E&&O.collapsible!==!1&&(O.isCollapsed=!O.isCollapsed)})})},[p]),b=H.useCallback((E,T)=>(0,F.mG)(void 0,void 0,void 0,function*(){if(!s)return console.warn("searchService is not defined");if(E){const O=yield s(T,E);p(N=>{N.keyword=E,N.searchResult=O})}else p(O=>{O.keyword="",O.searchResult=[]})}),[s]);return{state:h,collapsible:r,setState:p,onKeywordChange:b,onActiveKeyChange:y,onCollapseChange:a}},MI=n=>{const{headerStyle:r,bodyStyle:i,footerStyle:s}=AI(n),{state:a,onActiveKeyChange:u,onKeywordChange:h}=TI(n);return H.createElement(H.Fragment,null,H.createElement(yI,Object.assign({},n,{state:a,style:r,onKeywordChange:h})),H.createElement(mI,Object.assign({},n,{state:a,style:i,onActiveKeyChange:u})),H.createElement(bI,Object.assign({},n,{state:a,style:s})))},OI=n=>{const{position:r,collapsible:i,onCollapseChange:s}=n,{width:a=200,left:u}=r,h=jd("collapse-panel"),[p,g]=(0,H.useState)(!1),y=(0,H.useCallback)(()=>{g(!p),s(!p)},[p,s]);return H.createElement(iD,Object.assign({},n,{className:h,position:Object.assign(Object.assign({},r),{left:p?-a:u}),style:{transition:"left 0.5s"}}),H.createElement(MI,Object.assign({},n,{prefixClz:h})),i&&H.createElement(EI,Object.assign({},n,{prefixClz:h,isCollapsed:p,onCollapseBtnClick:y,style:{position:"absolute",zIndex:1,width:13,right:-13,bottom:20,padding:"12px 0px",textAlign:"center",borderWidth:"1px 1px 1px 0",borderStyle:"solid solid solid",borderColor:"rgb(232, 232, 232) rgb(232, 232, 232) rgb(232, 232, 232)",cursor:"pointer"}})))},PI=n=>{const{state:r}=n,{propsProxy:i}=xw(),s=i.getValue(),a=Yo(),u=s.footer&&typeof s.footer=="function";return H.createElement(H.Fragment,null,H.createElement("div",{className:`${n.prefixClz}-footer`,style:n.style},u&&H.createElement(s.footer,Object.assign(Object.assign({},n),{headerStyle:{},bodyStyle:{},footerStyle:n.style,targetData:r.targetData,targetType:r.targetType,modelService:a.modelService,commandService:a.commandService})),!s.footer&&H.createElement("div",{className:`${n.prefixClz}-footer-title`},s.footerText)))},DI=n=>{const{prefixClz:r,hasSchema:i,state:s}=n,{propsProxy:a}=xw(),u=a.getValue(),h=Yo();if(i)return null;const p=u.header&&typeof u.header=="function";return H.createElement(H.Fragment,null,H.createElement("div",{className:`${r}-header`,style:n.style},p&&H.createElement(u.header,Object.assign(Object.assign({},n),{headerStyle:n.style,bodyStyle:{},footerStyle:{},targetData:s.targetData,targetType:s.targetType,modelService:h.modelService,commandService:h.commandService})),!u.header&&H.createElement("div",{className:`${r}-header-title`},u.headerText||"Panel")))};var pD=M(51752),C0=M(86835);const NI=n=>{const{text:r}=n,i=(0,F._T)(n,["text"]);return r?H.createElement(OA.Z,Object.assign({placement:"left",title:r},i),H.createElement("div",{className:"text-truncate"},r)):null};function g1(n){if(!!n)return H.createElement(NI,{text:n})}var II=M(27361),gD=M.n(II);function RI(n,r){return(i,s)=>n.some(u=>typeof u?.condition=="function")?(typeof r=="function"&&r(void 0),!0):n.some(u=>{const{name:h}=u;return h?gD()(i,h)!==gD()(s,h)?(typeof r=="function"&&r(h),!0):!1:(console.error("[Schema form]: A dependent name must be provided in the updater when the dependency condition is not a function."),!1)})}function kI(n){return n===""||n===void 0}function LI(n,r,i){const{getFieldValue:s,getFieldsValue:a}=n,{dependencies:u,hidden:h,disabled:p}=r;let g=h,y=p;return u?.forEach(b=>{const{name:E,condition:T,hidden:O,disabled:N}=b;if(typeof T!="function"&&i&&E!==i)return;let k=!1;if(typeof T=="function"){const B=a();k=!!T(B)}else{if(!E){console.error("[Schema form]: A dependent name must be provided in the props genarator when the dependency condition is not a function.");return}k=s(E)===T}k&&(O!==void 0&&(g=O),N!==void 0&&(y=N))}),{hidden:g,disabled:y}}const zv=n=>{const{schema:r,children:i}=n,[s,a]=(0,H.useState)(),{dependencies:u,value:h,defaultValue:p,hidden:g,disabled:y}=r,b=(0,H.useMemo)(()=>u?.length?RI(u,a):void 0,[u]);if(typeof i!="function")throw new Error("[Schema Form]: chilren of FormItemWrapper should be a render prop.");const E=kI(h)?p:h;return b?H.createElement(C0.Z.Item,{noStyle:!0,shouldUpdate:b},T=>{const{hidden:O,disabled:N}=LI(T,r,s);return i({hidden:O,disabled:N,initialValue:E})}):i({hidden:g,disabled:y,initialValue:E})},vD=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,placeholder:p,rules:g}=r;return H.createElement(zv,{schema:r},({disabled:y,hidden:b,initialValue:E})=>H.createElement(C0.Z.Item,{name:u,label:h,initialValue:E,tooltip:s,extra:g1(a),required:i,hidden:b,rules:g},H.createElement(zA.Z,{className:"xflow-form-input",allowClear:!0,placeholder:p,disabled:y})))};var GI=M(9676);const FI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,rules:p}=r;return H.createElement(zv,{schema:r},({hidden:g,disabled:y,initialValue:b})=>H.createElement(C0.Z.Item,{className:"xflow-form-checkbox",name:u,rules:p,initialValue:b,tooltip:s,extra:g1(a),required:i,hidden:g,valuePropName:"checked",getValueProps:E=>({checked:!!{true:!0,false:!1}[E]})},H.createElement(GI.Z,{disabled:y},h)))},BI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,placeholder:p,rules:g}=r;return H.createElement(zv,{schema:r},({hidden:y,disabled:b,initialValue:E})=>H.createElement(C0.Z.Item,{name:u,label:h,initialValue:E,tooltip:s,extra:g1(a),required:i,hidden:y,rules:g},H.createElement(zA.Z.TextArea,{allowClear:!0,placeholder:p,rows:3,disabled:b})))};var L3=M(34041);const zI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,placeholder:p,options:g=[],rules:y}=r;return H.createElement(zv,{schema:r},({hidden:b,disabled:E,initialValue:T})=>H.createElement(C0.Z.Item,{name:u,label:h,initialValue:T,tooltip:s,extra:g1(a),required:i,hidden:b,rules:y},H.createElement(L3.Z,{disabled:E,placeholder:p},g.map(O=>{const{title:N,value:k}=O;return H.createElement(L3.Z.Option,{key:k.toString(),value:k},N)}))))};var UI=M(68588),VI=M(30381),G3=M.n(VI);const jI=n=>{const{className:r,style:i,disabled:s,value:a,onChange:u}=n,[h,p]=(0,H.useState)(a?G3()(a):void 0),g=(0,H.useRef)(!1);(0,H.useEffect)(()=>{if(!g.current){g.current=!0;return}const b=G3()(a);b.isValid()&&p(b)},[a]);const y=(0,H.useCallback)((b,E)=>{const T=G3()(E);p(T.isValid()?T:void 0),typeof u=="function"&&u(T.isValid()?T.format("YYYY-MM-DD HH:mm:ss"):"")},[u]);return H.createElement(UI.Z,{showTime:!0,allowClear:!0,className:r,style:i,disabled:s,value:h,onChange:y})},HI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,rules:p}=r;return H.createElement(zv,{schema:r},({disabled:g,hidden:y,initialValue:b})=>H.createElement(C0.Z.Item,{name:u,label:h,initialValue:b,tooltip:s,extra:g1(a),required:i,hidden:y,rules:p},H.createElement(jI,{style:{width:"100%"},disabled:g})))};var F3=M(70507);function VA(n){const r=Number(n);return Number.isNaN(r)?void 0:r}const $I=n=>{const{disabled:r,placeholder:i,value:s,onChange:a}=n,[u,h]=(0,H.useState)(VA(s)),p=(0,H.useRef)(!1);(0,H.useEffect)(()=>{p.current||(p.current=!0),h(VA(s))},[s]);const g=(0,H.useCallback)(y=>{h(y),typeof a=="function"&&(y===void 0?a(""):typeof VA(y)=="number"&&a(VA(y)))},[a]);return H.createElement(F3.Z,{style:{width:"100%"},size:"small",placeholder:i,value:u,onChange:g,disabled:r})},WI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,placeholder:p,rules:g}=r;return H.createElement(zv,{schema:r},({disabled:y,hidden:b,initialValue:E})=>H.createElement(C0.Z.Item,{name:u,label:h,initialValue:E,tooltip:s,extra:g1(a),required:i,hidden:b,rules:g},H.createElement($I,{placeholder:p,disabled:y})))};var Uv;(function(n){n.INPUT="input",n.CHECKBOX="checkbox",n.TEXTAREA="textArea",n.SELECT="select",n.DATETIME="datetime",n.FLOAT="float"})(Uv||(Uv={}));const mD=[[Uv.INPUT,vD],[Uv.CHECKBOX,FI],[Uv.TEXTAREA,BI],[Uv.DATETIME,HI],[Uv.SELECT,zI],[Uv.FLOAT,WI]],yD=n=>{const r=new Map;return n.forEach(i=>{const[s,a]=i,u=s.toLowerCase();r.has(u)&&console.error(`${s} is duplicated in controlMap:`,r),r.set(u,a)}),r},XI=(n,r,i=vD)=>{if(r.has(n))return r.get(n);const s=n.toLowerCase();return r.has(s)?r.get(s):(console.warn(`${n} is not exist in controlmap, fallback to defaultControl`),i)},{TabPane:ZI}=pD.Z,YI=n=>{var r;const{schema:i,form:s,className:a,triggerUpdate:u,defaultControlRender:h,afterUpdatingCb:p,controlMap:g}=n,y=(0,F._T)(n,["schema","form","className","triggerUpdate","defaultControlRender","afterUpdatingCb","controlMap"]),{tabs:b}=i,[E]=C0.Z.useForm(s),T=H.useMemo(()=>n.controlMap?n.controlMap:yD(mD),[n.controlMap]),O=(0,H.useCallback)(k=>{typeof u=="function"&&u(E,k)},[E,u]);(0,H.useEffect)(()=>{E.setFieldsValue({})},[E]);const N=(0,H.useCallback)(()=>{requestAnimationFrame(()=>{E.setFieldsValue({})})},[E]);return H.createElement(C0.Z,Object.assign({size:"small",form:E,layout:"vertical",className:Oe()("xflow-json-form",a)},y),H.createElement(pD.Z,{type:"card",defaultActiveKey:(r=b[0])===null||r===void 0?void 0:r.name,className:Oe()({tabs:!0,xTab:!0,singleTab:b?.length===1,coupleTab:b?.length===2,ternateTab:b?.length===3}),onTabClick:N},b.map(k=>{const{name:B,groups:$}=k;return H.createElement(ZI,{key:B,tab:B},$.length===0&&H.createElement(ww.Z,{style:{padding:"24px 0"}}),$.length>0&&$.map(X=>{const{controls:ne=[]}=X;return ne.length===0?H.createElement(ww.Z,{style:{padding:"24px 0"}}):ne.map(be=>{const{shape:me,name:je}=be,ot=XI(me,T,h);return ot?H.createElement(ot,{key:je,form:E,controlSchema:be,triggerUpdate:O,afterUpdatingCb:p}):(console.error("\u672A\u627E\u5230\u5BF9\u5E94\u7684\u63A7\u4EF6:",me),null)})}))})))},KI=n=>{const{schema:r={tabs:[]},triggerUpdate:i,onFieldsChange:s,afterUpdatingCb:a,defaultControlRender:u,loading:h,controlMapService:p,defaultControls:g=[]}=n,y=H.useMemo(()=>{const b=yD([...mD,...g]);return p&&p(b),b},[p,g]);return h?H.createElement("div",{className:`${n.prefixClz}-body`,style:Object.assign(Object.assign({},n.style),{display:"flex",justifyContent:"center",alignItems:"center"})},H.createElement(KP.Z,{spinning:!0})):H.createElement("div",{className:`${n.prefixClz}-body`,style:n.style},r.tabs.length>0&&H.createElement(YI,{schema:r,onFieldsChange:s,controlMap:y,defaultControlRender:u,afterUpdatingCb:a,triggerUpdate:i}),r.tabs.length===0&&H.createElement(ww.Z,{style:{paddingTop:"64px"}}))},qI=40,JI=40,QI=(n,r)=>{const i=n&&n.headerPosition&&n.headerPosition.height||qI,s=n.footerPosition&&n.footerPosition.height||JI;return{headerStyle:Ul(Object.assign(Object.assign({height:0,top:0,left:0,right:0},r?{height:i,lineHeight:i}:{}),n.headerPosition)),bodyStyle:Ul(Object.assign(Object.assign({left:0,right:0,top:0},r?{top:i,bottom:s}:{bottom:s}),n.bodyPosition)),footerStyle:Ul(Object.assign(Object.assign({left:0,right:0,lineHeight:s,height:s,bottom:0},r?{lineHeight:s,height:s}:{bottom:0}),n.footerPosition))}};var Ew;(function(n){n.id="XFLOW_JSON_SCHEMA_FORM",n.useModel=r=>(0,F.mG)(this,void 0,void 0,function*(){return r.awaitModel(n.id)})})(Ew||(Ew={}));const Zk=(n,r)=>{n.executeCommand(XFlowModelCommands.UPDATE_MODEL.id,{getModel:i=>__awaiter(void 0,void 0,void 0,function*(){return Ew.useModel(i)}),updateModel:r})},eR=n=>{const r=Yo(),{commandService:i,modelService:s,getGraphInstance:a}=r,{formSchemaService:u}=n,[h,p,g,y]=x0({schema:{tabs:[]},targetType:null,targetData:null,targetCell:null,loading:!1});return H.useEffect(()=>{if(!r||!r.modelService)return;const b=new un;if(!r.modelService.findDeferredModel(Ew.id)){const T=r.modelService.registerModel({id:Ew.id,modelFactory:()=>g,watchChange:(O,N)=>(0,F.mG)(void 0,void 0,void 0,function*(){const B=(yield Bd.getModel(N)).watch($=>(0,F.mG)(void 0,void 0,void 0,function*(){const X=(me,je)=>(0,F.mG)(void 0,void 0,void 0,function*(){O.setValue(_t=>{_t.loading=!0,_t.schema={tabs:[]},_t.targetType=null,_t.targetData=null,_t.targetCell=null});const ot=me?me.getData():null;if(!u)return;const ct=yield a(),Xt=yield u({commandService:i,modelService:s,targetData:ot,cell:me,targetType:je,graph:ct});O.setValue({loading:!1,schema:Xt,targetType:je,targetCell:me,targetData:ot})}),be=(me=>me?me.isNode&&me.isNode()&&me.getProp("isGroup")?"group":me.isNode&&me.isNode()?"node":me.isEdge&&me.isEdge()?"edge":"canvas":"canvas")($);(n.targetType||["node","canvas"]).includes(be)&&(yield X($,be))}));return Mt.create(()=>{B.dispose(),b.push(B)})})});b.push(T)}return()=>{b.dispose()}},[]),{commandService:i,modelService:s,state:h,setState:p,model:g,isModelReady:y}},tR=n=>{const{prefixClz:r}=n,{getCustomRenderComponent:i,afterUpdatingCb:s,formValueUpdateService:a=()=>{}}=n,{state:u,commandService:h,modelService:p}=eR(n),g=H.useCallback((N,k={})=>(0,F.mG)(void 0,void 0,void 0,function*(){N.setFieldsValue(k);const B=Object.entries(k).map(([ne,be])=>({name:ne,value:be})),$=Object.entries(u.targetData).map(([ne,be])=>({name:ne,value:be})),X=yield a({allFields:$,values:B,modelService:p,commandService:h,targetData:u.targetData,targetType:u.targetType});s&&s(X)}),[s,h,a,p,u.targetData,u.targetType]),y=H.useCallback((N,k)=>(0,F.mG)(void 0,void 0,void 0,function*(){const B=yield a({values:N,allFields:k,modelService:p,commandService:h,targetData:u.targetData,targetType:u.targetType});s&&s(B)}),[s,h,a,p,u.targetData,u.targetType]),b=H.useMemo(()=>{try{return u.schema.tabs.length===0||!u.schema}catch{return!0}},[u.schema]),{headerStyle:E,bodyStyle:T,footerStyle:O}=QI(n,b);if(i){const N=i(u.targetType,u.targetData,p,h);if(N)return H.createElement(N,Object.assign(Object.assign({},n),{headerStyle:E,bodyStyle:T,footerStyle:O,targetData:u.targetData,targetType:u.targetType,modelService:p,commandService:h}))}return H.createElement("div",{className:r},H.createElement(DI,Object.assign({hasSchema:!b},n,{state:u,style:E,prefixClz:n.prefixClz})),H.createElement(KI,Object.assign({},n,{key:u.targetData&&u.targetData.id,style:T,prefixClz:n.prefixClz,loading:u.loading,schema:u.schema,triggerUpdate:g,onFieldsChange:y})),H.createElement(PI,Object.assign({},n,{state:u,style:O})))},nR=n=>{const r=jd("json-schema-form");return H.createElement(iD,Object.assign({},n,{className:r}),H.createElement(tR,Object.assign({},n,{prefixClz:r})))};ur.Bz.Connector.registry.exist(f1.VERTICAL_NODE)||ur.kJ.registerConnector(f1.VERTICAL_NODE,(n,r)=>{const s=Math.abs(r.y-n.y),a=Math.floor(s/3*2),u={x:n.x,y:n.y+16+a},h={x:r.x,y:r.y-16-a};return ur.y$.normalize(`M ${n.x} ${n.y}
         L ${n.x} ${n.y+16}
         C ${u.x} ${u.y} ${h.x} ${h.y} ${r.x} ${r.y-16}
         L ${r.x} ${r.y}
        `)},!0),ur.Bz.Connector.registry.exist(f1.VERTICAL_GROUP)||ur.kJ.registerConnector(f1.VERTICAL_GROUP,(n,r)=>{const s=Math.abs(r.y-n.y),a={x:n.x,y:n.y+4+s},u={x:r.x,y:r.y-4-s};return ur.y$.normalize(`M ${n.x} ${n.y}
       L ${n.x} ${n.y+4}
       C ${a.x} ${a.y} ${u.x} ${u.y} ${r.x} ${r.y-4}
       L ${r.x} ${r.y}
      `)},!0),ur.Bz.Connector.registry.exist(f1.HORIRONTAL_NODE)||ur.kJ.registerConnector(f1.HORIRONTAL_NODE,(n,r)=>{const s=Math.abs(r.y-n.y),a=Math.floor(s/3*2),u={x:n.x,y:n.y+4+a},h={x:r.x,y:r.y-4-a};return ur.y$.normalize(`M ${n.x} ${n.y}
         L ${n.x} ${n.y+4}
         C ${u.x} ${u.y} ${h.x} ${h.y} ${r.x} ${r.y-4}
         L ${r.x} ${r.y}
        `)},!0);let B3=ur.bn.kS.registry.get(LA.EDGE);ur.bn.kS.registry.exist(LA.EDGE)||(B3=ur.bn.kS.registry.register(LA.EDGE,ur.bn.kS.define({zIndex:1,highlight:!1,shape:LA.EDGE}),!0));var pf;(function(n){n.MODEL=p1,n.command=GA.QUERY_GRAPH_STATUS,n.hookKey="queryGraphStatus";let r;(function(i){i.SUCCESS="success",i.PROCESSING="processing",i.ERROR="error",i.DEFAULT="default",i.WARNING="warning"})(r=n.StatusEnum||(n.StatusEnum={})),n.initStatusMap=()=>({[n.StatusEnum.DEFAULT]:[],[n.StatusEnum.PROCESSING]:[],[n.StatusEnum.ERROR]:[],[n.StatusEnum.WARNING]:[],[n.StatusEnum.SUCCESS]:[]}),n.groupByStatus=i=>{const s=n.initStatusMap();return Object.entries(i).reduce((a,[u,h])=>(a[h.status].push(u),a),s)},n.statusDiff=(i,s)=>{const a=new Set([...i,...s]),u={current:[],add:[],remove:[]};return a.forEach(h=>{s.includes(h)&&!i.includes(h)&&u.add.push(h),!s.includes(h)&&i.includes(h)&&u.remove.push(h)}),u},n.shouldStop=i=>(0,F.mG)(this,void 0,void 0,function*(){return[r.ERROR,r.SUCCESS].includes(i.graphStatus)})})(pf||(pf={}));let jA=class{constructor(){this.statusInfo=pf.initStatusMap(),this.getStatusModel=()=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.contextProvider().getModelService();return yield p1.getModel(i)}),this.updateModelValue=r=>(0,F.mG)(this,void 0,void 0,function*(){(yield this.getStatusModel()).setValue(r)}),this.stopCurrentStatusLooping=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=yield this.getStatusModel(),{subscription:i}=yield r.getValidValue();i.dispose()}),this.addStopDispose=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=yield this.getStatusModel(),{subscription:i}=yield r.getValidValue();i.push({dispose:()=>{this.updateEdges(this.statusInfo,pf.initStatusMap()),this.isLooping=!1}})}),this.updateGraph=(r,i,s)=>{this.updateNodes(r,i,s),this.updateEdges(r,i)},this.updateNodeData=(r,i)=>{const s=this.x6Graph.getCellById(r);!s||s.setData(Object.assign(Object.assign(Object.assign(Object.assign({},s.getData()),s.getSize()),s.getPosition()),i))},this.updateNodes=(r,i,s)=>{Object.keys(r).forEach(a=>{const u=pf.statusDiff(r[a],i[a]);u.add.forEach(h=>{this.updateNodeData(h,s[h])}),u.remove.forEach(h=>{this.updateNodeData(h,s[h])})})},this.updateEdges=(r,i)=>{const s=pf.statusDiff(r.processing,i.processing);this.x6Graph.getEdges().forEach(u=>{var h;const p=(h=this.x6Graph)===null||h===void 0?void 0:h.findViewByCell(u.id),g=u.getTargetCellId();if(!g)return;const y=g.toString();if(!!p){if(s.add.includes(y))return p.addClass(oD);if(s.remove.includes(y))return p.removeClass(oD)}})},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),a=r.getHooks();this.x6Graph=yield r.getX6Graph();const u=yield a.queryGraphStatus.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{graphStatusService:p,shouldStop:g=pf.shouldStop,doOnce:y}=h;yield this.stopCurrentStatusLooping();const b=(E,T=1e4)=>(0,F.mG)(this,void 0,void 0,function*(){const O=yield E(h);this.updateModelValue(k=>{Object.entries(O.statusMap).forEach(([B,$])=>{k.statusMap.set(B,$)}),k.graphStatus=O.graphStatus});const N=pf.groupByStatus(O.statusMap);this.updateGraph(this.statusInfo,N,O.statusMap),this.statusInfo=N,yield qD(T),this.isLooping&&(g&&(yield g(O,h))||(yield b(E,T)))});return this.isLooping=h.loop===void 0?!0:h.loop,yield this.addStopDispose(),y&&(yield y(h)),b(p,h.loopInterval),{}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([on(pi),(0,F.w6)("design:type",Object)],jA.prototype,"contextProvider",void 0),jA=(0,F.gn)([jt({token:{token:li,named:pf.command.id}})],jA);const Yk=()=>{};var Vv;(function(n){n.TOP_BOTTOM="TB",n.LEFT_RIGHT="LR"})(Vv||(Vv={}));const bD=pe.defineToken("DAG_EXTENSION_CONFIG");var HA;(function(n){n.EVENT_NAME="ADD_EDGE_CMD_EVENT"})(HA||(HA={}));var $A;(function(n){n.router={name:"manhattan"},n.connector={name:"rounded",args:{radius:15}}})($A||($A={}));const Kk="ant",rR=n=>{const{layout:r,router:i=$A.router,connector:s=$A.connector}=n;return{grid:!1,keyboard:{enabled:!0},selecting:{enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},connecting:{sourceAnchor:r?r===Vv.TOP_BOTTOM?"bottom":"right":"center",targetAnchor:r?r===Vv.TOP_BOTTOM?"center":"left":"center",connectionPoint:"anchor",snap:{radius:20},router:i,connector:s,highlight:!0,dangling:!1,createEdge(){const u=this,h=new B3({attrs:{line:{strokeDasharray:"5 5",stroke:"#888",strokeWidth:1,targetMarker:{name:"block",args:{size:"6"}}}}}),p=g=>{const{isNew:y}=g,b=g.edge;if(y&&b.isEdge()&&b===h){const E=b.getTargetPortId(),T=b.getTargetCell();if(T&&T.isNode()){T.setPortProp(E,"connected",!1),b.attr({line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5"}});const O=b.getTargetPortId(),N=b.getSourcePortId(),k=b.getSourceCellId(),B=b.getTargetCellId();u.trigger(HA.EVENT_NAME,{targetPortId:O,sourcePortId:N,source:k,target:B,edge:h})}}};return u.once("edge:connected",p),h},validateEdge:u=>{var h;const{edge:p}=u;return!!(!((h=p?.target)===null||h===void 0)&&h.port)},validateMagnet({magnet:u,cell:h}){const p=h.getData().ports.filter(g=>g.type===xi.AnchorType.INPUT);return p.length>0?u.getAttribute("port-group")!==p[0].group:!1},validateConnection({sourceView:u,targetView:h,sourceMagnet:p,targetMagnet:g}){if(u===h||!p||!g)return!1;if(r){const k=r===Vv.TOP_BOTTOM?xi.AnchorGroup.TOP:xi.AnchorGroup.LEFT;if(p.getAttribute("port-group")===k||g.getAttribute("port-group")!==k)return!1}const y=u.cell,b=p.getAttribute("port");if(!b||y.getPort(b).type!==xi.AnchorType.OUTPUT)return!1;const T=h.cell,O=g.getAttribute("port");if(!O)return!1;const N=T.getPort(O);return N.type!==xi.AnchorType.INPUT?!1:!(N&&N.connected)}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},scaling:{max:1.05,min:.01}}};let Sw=class{constructor(){this.registerGraphCommands=r=>{r.registerCommand(pf.command,{createCommand:this.commandFactory})},this.toDispose=new un,this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new un,s=[r.addNode.registerHook({name:"dag-add-node",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=h=>(0,F.mG)(this,void 0,void 0,function*(){return new FA(Object.assign({},h))});a.cellFactory=u})}),r.addEdge.registerHook({name:"dag-add-edge",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{layout:u=Vv.TOP_BOTTOM}=yield this.propConfig.getConfig(),h=p=>(0,F.mG)(this,void 0,void 0,function*(){return new B3(Object.assign(Object.assign({},p),{id:p.id,source:{cell:p.source,port:p.sourcePortId,anchor:{name:u===Vv.TOP_BOTTOM?"bottom":"right"}},target:{cell:p.target,port:p.targetPortId,anchor:{name:u===Vv.TOP_BOTTOM?"center":"right"}},attrs:{line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5",strokeWidth:1}},data:Object.assign({},p)}))});a.cellFactory=h})}),r.addEdge.registerHook({name:"after add edge, set target port props",handler:(a,u)=>(0,F.mG)(this,void 0,void 0,function*(){return p=>(0,F.mG)(this,void 0,void 0,function*(){const g=yield u(p);if(g&&g.edgeCell){const y=g.edgeCell.getTargetCell(),b=g.edgeCell.getTargetPortId();y.setPortProp(b,"connected",!0)}return g})})}),r.delEdge.registerHook({name:"afetr del edge, reset target node port props",handler:(a,u)=>(0,F.mG)(this,void 0,void 0,function*(){return p=>(0,F.mG)(this,void 0,void 0,function*(){const g=yield u(p),{targetCell:y,targetPortId:b}=g;return y&&y.isNode()&&b&&y.setPortProp(b,"connected",!1),g})})}),r.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:u,graph:h}=a;h.on(HA.EVENT_NAME,p=>{u.executeCommand(uo.ADD_EDGE.id,{edgeConfig:p}),p.edge.remove()})})}),r.graphOptions.registerHook({name:"dag-extension-x6-options",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=yield this.propConfig.getConfig(),h=rR(u);Object.assign(a,h)})})];return i.pushAll(s),Mt.create(()=>{})}),this.registerHookHub=r=>(0,F.mG)(this,void 0,void 0,function*(){return r.registerHookHub(pf.hookKey,new ka)})}registerModel(r){r.registerModel({id:p1.id,getInitialValue:()=>({statusMap:new Map,subscription:new un,graphStatus:p1.StatusEnum.DEFAULT}),watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{subscription:s}=yield i.getValidValue();return s})})}};(0,F.gn)([on(wh),(0,F.w6)("design:type",Function)],Sw.prototype,"commandFactory",void 0),(0,F.gn)([on(bD),(0,F.w6)("design:type",Object)],Sw.prototype,"propConfig",void 0),Sw=(0,F.gn)([cn({contrib:[Hs,dc,pu]})],Sw);const iR=n=>Zo(r=>{r(Sw),r(jA),r(bD,{useValue:n})}),oR=n=>{const r=Bl();H.useEffect(()=>{r.addContainerClassNames("dag-extension-container");const s=n.layout||"TB";r.addContainerClassNames(s==="TB"?"layout-top-bottom":"layout-left-right")},[r,n.layout]);const i=H.useMemo(()=>({CONFIG_TYPE:"DAG_EXTENSION",getConfig:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return n})}),[n]);return H.createElement(Dh,{config:i,createModule:iR})},z3="XFLOW_FLOW_NODE_SHAPE",sR=150,aR=60;let U3;const{AnchorGroup:WA}=xi,XA={circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}};ur.NB.registry.exist(z3)?U3=ur.NB.registry.get(z3):U3=Vl.define({width:sR,height:aR,shape:z3,view:zi,ports:{groups:{top:{position:WA.TOP,attrs:XA},bottom:{position:WA.BOTTOM,attrs:XA},right:{position:WA.RIGHT,attrs:XA},left:{position:WA.LEFT,attrs:XA}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"}}});const cR={grid:!0,mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge(){return new ur.bn.kS({attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:0})},validateConnection({targetMagnet:n}){return!!n}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}},resizing:!0,rotating:!0,selecting:{enabled:!0,rubberband:!0,showNodeSelectionBox:!0,modifiers:"shift"},snapline:!0,keyboard:!0,clipboard:!0};let xD=class{constructor(){this.toDispose=new un,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return Mt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new un,s=[r.addNode.registerHook({name:"flow-add-node",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=h=>(0,F.mG)(this,void 0,void 0,function*(){return new U3(Object.assign({},h))});a.cellFactory=u})}),r.addEdge.registerHook({name:"flow-add-edge",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=h=>(0,F.mG)(this,void 0,void 0,function*(){return delete h.id,new ur.bn.kS({source:{cell:h.source,port:h.sourcePortId},target:{cell:h.target,port:h.targetPortId},attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:-1,data:Object.assign({},h)})});a.cellFactory=u})}),r.graphOptions.registerHook({name:"assign options ",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){Object.assign(a,cR)})})];return i.pushAll(s),Mt.create(()=>{})})}};xD=(0,F.gn)([cn({contrib:Hs})],xD);const qk=()=>ManaSyringe.Module(n=>{n(FlowHooksContribution)}),Jk=()=>{const n=useExtensionRegistry(),r=React.useMemo(()=>({CONFIG_TYPE:"DAG_EXTENSION",getConfig:()=>__awaiter(void 0,void 0,void 0,function*(){})}),[]);return React.useEffect(()=>{const i=n.addExtension({config:r,createModule:createFlowExtensionModule});return n.addContainerClassNames("flow-extension-container"),()=>{i.dispose()}},[r,n]),null};var lR=M(75901),uR=M(82492),dR=M.n(uR);const V3={config:{}},CD=n=>{V3.config=Object.assign({},V3.config,n)},ZA=n=>{var r;return(r=V3.config)===null||r===void 0?void 0:r[n]},wD=new Map,ED=new Map,hR=n=>(0,F.mG)(void 0,void 0,void 0,function*(){const r=yield n.getGraphInstance();wD.set("x6graph",r),ED.set("app",n)}),SD=()=>wD.get("x6graph"),fR=()=>ED.get("app"),pR=()=>(0,F.mG)(void 0,void 0,void 0,function*(){return fR().getGraphData()}),_w=(0,ed.debounce)(n=>{const r=ZA("onConfigChange");if(!(!r||typeof r!="function"))return r(Object.assign({data:pR()},n))},300,{trailing:!0}),gR=(n,r)=>(0,F.mG)(void 0,void 0,void 0,function*(){const{node:i}=n;if(!i)return;const{data:s}=i;if(s?.groupChildren){const u=SD();s?.groupChildren.forEach(h=>(0,F.mG)(void 0,void 0,void 0,function*(){var p,g;const y=u.getCellById(h);y&&y.isNode()&&(yield r.executeCommand($i.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign(Object.assign({},y.data),(p=y.getSize)===null||p===void 0?void 0:p.call(y)),(g=y.getPosition)===null||g===void 0?void 0:g.call(y))}))}))}const a=Object.assign(Object.assign(Object.assign({},i.data),i.getPosition()),i.getSize());yield r.executeCommand($i.UPDATE_NODE.id,{nodeConfig:a}),_w({type:"move:node",config:a})}),vR=(n,r)=>(0,F.mG)(void 0,void 0,void 0,function*(){const{node:i}=n;if(!i)return;const s=Object.assign(Object.assign(Object.assign({},i.data),i.getPosition()),i.size());yield r.executeCommand($i.UPDATE_NODE.id,{nodeConfig:s}),_w({type:"resize:node",config:s})}),mR=n=>{var r;let i=(r=n?.e)===null||r===void 0?void 0:r.currentTarget;if(!i)return document.getElementsByClassName("xflow-canvas-root");let s=null;for(;!s;){const a=i.getElementsByClassName("xflow-canvas-root");a?.length>0&&(s=a),i=i.parentNode}return s},j3=(n,r)=>{const i=mR(r);Array.from(i).forEach(s=>{var a,u;const h=s.querySelectorAll(".x6-port-body"),g=(u=(a=SD().getSelectedCells())===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.isNode();for(let y=0,b=h.length;y<b;y=y+1)h[y].style.visibility=!g&&n?"visible":"hidden"})},yR=n=>(0,F.mG)(void 0,void 0,void 0,function*(){const{edge:r}=n;!r||r.addTools("vertices","ondbclick")}),bR=(n,r)=>(0,F.mG)(void 0,void 0,void 0,function*(){const{edge:i}=n;!i||i.hasTools("ondbclick")&&(r.executeCommand(uo.UPDATE_EDGE.id,{edgeConfig:Object.assign(Object.assign({},(0,ed.get)(i,"data")),{vertices:i.getVertices()})}),i.removeTools())}),Qk=40,e4="xflow-node-panel-collpase",xR="GROUP_NODE_RENDER_ID",la=60,as=40,tt=1,yn={stroke:"#A2B1C3",fill:"#FFFFFF",fontFill:"#000",fontSize:12,label:""},CR=[{name:"Terminal"},{name:"Process"},{name:"Decision"},{name:"Multi Document"},{name:"Connector",width:as,height:as},{name:"DataIO",ports:["top","bottom"]},{name:"Database"},{name:"Hard Disk"},{name:"Stroed Data"},{name:"Document"},{name:"Predefined Process"},{name:"Extract"},{name:"Merge"},{name:"Or",width:as,height:as},{name:"Manual Input"},{name:"Preparation"},{name:"Delay"},{name:"Manual Operation"},{name:"Display"},{name:"Off Page Link"},{name:"Note Left",label:"\u2263"},{name:"Note Right",label:"\u2263"},{name:"Internal Storage"},{name:"Text",label:"text"}],wR=["Connector","Or"],ER=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=[["M",tt,tt],["L",g-2*tt,tt],["L",g-2*tt,y-2*tt],["L",tt,y-2*tt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(b),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},SR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=[["M",g/2,tt],["L",g-2*tt,y/2],["L",g/2,y-2*tt],["L",tt,y/2],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(b),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},_R=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=y-2*tt;return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:`M ${tt},${y/2} a ${b/2} ${b/2} 0 1 1 0 1 z`,fill:u,stroke:s}),H.createElement("text",{x:y/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},AR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=y/2,E=[["M",b-tt,tt],["L",g-2*tt,tt],["L",g-b,y-2*tt],["L",tt,y-2*tt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},TR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=Math.min(y,g)/2,E=[["M",b,tt],["L",g-b,tt],["C",g-2*tt,tt,g-2*tt,y/2],["",g-2*tt,y/2],["C",g-2*tt,y/2,g-2*tt,y-2*tt],["",g-b,y-2*tt],["L",b,y-2*tt],["C",tt,y-2*tt,tt,y/2],["",tt,y/2],["C",tt,y/2,tt,tt],["",b,tt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},MR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=g/4,E=Math.min(y/10,12),T=[["M",tt,tt+E],["C",tt+b,tt,tt+g-b,tt],["",g-2*tt,tt+E],["L",g-2*tt,y-2*tt-E],["C",g-2*tt-b,y-2*tt,tt+b,y-2*tt],["",tt,y-2*tt-E],["Z"]],O=[["M",tt,tt+E],["C",tt+b,tt+2*E,tt+g-b,tt+2*E],["",g-2*tt,tt+E]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(T),fill:u,stroke:s}),H.createElement("path",{d:As(O),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},OR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=Math.min(g/10,y/4),E=Math.min(y/4,g/4),T=[["M",tt+b,tt],["L",g-2*tt-b,tt],["C",g-2*tt,tt+E,g-2*tt,y-2*tt-E],["",g-2*tt-b,y-2*tt],["L",tt+b,y-2*tt],["C",tt,y-2*tt-E,tt,tt+E],["",tt+b,tt]],O=[["M",g-2*tt-b,tt],["C",g-2*tt-2*b,tt+E,g-2*tt-2*b,y-2*tt-E],["",g-2*tt-b,y-2*tt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(T),fill:u,stroke:s}),H.createElement("path",{d:As(O),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},PR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=Math.min(g/10,y/4),E=Math.min(y/4,g/4),T=[["M",tt+b,tt],["L",g-2*tt-b,tt],["C",g-2*tt-2*b,tt+E,g-2*tt-2*b,y-2*tt-E],["",g-2*tt-b,y-2*tt],["L",tt+b,y-2*tt],["C",tt,y-2*tt-E,tt,tt+E],["",tt+b,tt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(T),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},DR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=g/8,E=y/8,T=[["M",tt,tt],["L",g-2*tt,tt],["L",g-2*tt,y-2*tt-E],["C",g-2*tt-b,y-2*tt-2*E,g/2+b,y-2*tt-2*E],["",g/2,y-2*tt-E],["S",g/4,y-2*tt,tt,y-2*tt-2*E],["L",tt,tt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(T),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},NR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,g=6,y=tt,b=g/2;let{width:E,height:T}=r;E+=g,T+=g;const O=E/8,N=T/8,k=[["M",y+b,y],["L",E-2*y,y],["L",E-2*y,T-2*y-N],["C",E-2*y-O,T-2*y-2*N,E/2+O,T-2*y-2*N],["",E/2,T-2*y-N],["S",E/4,T-2*y,y+b,T-2*y-2*N],["L",y+b,y]];return H.createElement("svg",{viewBox:`0 0 ${E} ${T}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(k),fill:u,stroke:s}),H.createElement("path",{d:As(k,-g/2,g/2),fill:u,stroke:s}),H.createElement("text",{x:E/2,y:T/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},IR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=g/8,E=[["M",tt,tt],["L",g-2*tt,tt],["L",g-2*tt,y-2*tt],["L",tt,y-2*tt],["Z"]],T=[["M",b,tt],["L",b,y-2*tt]],O=[["M",g-b,tt],["L",g-b,y-2*tt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("path",{d:As(T),stroke:s}),H.createElement("path",{d:As(O),stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},RR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=[["M",g/2,tt],["L",g-2*tt,y-2*tt],["L",tt,y-2*tt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(b),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},kR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=[["M",tt,tt],["L",g-2*tt,tt],["L",g/2,y-2*tt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(b),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},LR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=[["M",y/2,tt],["L",y/2,y-2*tt]],E=[["M",tt,y/2],["L",y-2*tt,y/2]],T=y-2*tt;return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:`M ${tt},${y/2} a ${T/2} ${T/2} 0 1 1 0 1 z`,fill:u,stroke:s}),H.createElement("path",{d:As(b),stroke:s}),H.createElement("path",{d:As(E),stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},GR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=[["M",tt,y/5],["L",g-2*tt,tt],["L",g-2*tt,y-2*tt],["L",tt,y-2*tt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(b),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},FR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=Math.tan(Math.PI/6)*(y/2),E=[["M",b,tt],["L",g-b,tt],["L",g-2*tt,y/2],["L",g-b,y-2*tt],["L",b,y-2*tt],["L",tt,y/2],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},BR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=Math.min(y,g)/2,E=[["M",tt,tt],["L",g-b,tt],["C",g-2*tt,tt,g-2*tt,y/2],["",g-2*tt,y/2],["C",g-2*tt,y/2,g-2*tt,y-2*tt],["",g-b,y-2*tt],["L",tt,y-2*tt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},zR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=Math.min(Math.tan(Math.PI/6)*y,g/2),E=[["M",tt,tt],["L",g-2*tt,tt],["L",g-b,y-2*tt],["L",b,y-2*tt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},UR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=Math.min(y,g)/3,E=Math.min(Math.tan(Math.PI/6)*(y/2),g/3),T=[["M",E,tt],["L",g-b,tt],["C",g-2*tt,tt,g-2*tt,y/2],["",g-2*tt,y/2],["C",g-2*tt,y/2,g-2*tt,y-2*tt],["",g-b,y-2*tt],["L",E,y-2*tt],["L",tt,y/2],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(T),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},VR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=Math.min(Math.tan(Math.PI/6)*(g/2),y/4),E=[["M",tt,tt],["L",g-2*tt,tt],["L",g-2*tt,y-b],["L",g/2,y-2*tt],["L",tt,y-b],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},jR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u="transparent",fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=6,E=g-2*tt,T=[["M",E,tt],["C",E-b,tt,E-b,b],["",E-b,(y-b)/2],["L",E-2*b,y/2],["L",E-b,(y+b)/2],["L",E-b,y-2*tt-b],["C",E-b,y-2*tt,E,y-2*tt],["",E,y-2*tt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(T),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},HR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u="transparent",fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=6,E=[["M",tt,tt],["C",b,tt,b,b],["",b,(y-b)/2],["L",2*b,y/2],["L",b,(y+b)/2],["L",b,y-2*tt-b],["C",b,y-2*tt,tt,y-2*tt],["",tt,y-2*tt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},$R=n=>{const{size:r={width:la,height:as},data:i={}}=n,{stroke:s=yn.stroke,label:a=yn.label,fill:u=yn.fill,fontFill:h=yn.fontFill,fontSize:p=yn.fontSize}=i,{width:g,height:y}=r,b=g-2*tt,E=y-2*tt,T=6,O=[["M",tt,tt],["L",b-T,tt],["C",b,tt,b,T],["",b,y/2],["L",b,E-T],["C",b,E,b-T,E],["",b-T,E],["L",T,E],["C",tt,E,tt,E-T],["",tt,E-T],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:As(O),fill:u,stroke:s}),H.createElement("path",{d:`M ${tt},${T} L ${b-1} ${T} `,fill:u,stroke:s}),H.createElement("path",{d:`M ${T},${tt} L ${T} ${E} `,fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},WR=n=>{const{size:r={width:la,height:as},data:i={}}=n,{label:s=yn.label,fontFill:a=yn.fontFill,fontSize:u=yn.fontSize}=i,{width:h,height:p}=r,g=2;return H.createElement("svg",{viewBox:`0 0 ${h/g} ${p/g}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("text",{x:h/(2*g),y:p/(2*g),fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:u},s),"Sorry, your browser does not support inline SVG.")},YA=n=>({position:{name:n},attrs:{circle:{r:4,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff",style:{visibility:"hidden"}}},zIndex:10}),_D=(n=["top","right","bottom","left"])=>({items:n.map(r=>({group:r,id:uuidv4()})),groups:{top:YA("top"),right:YA("right"),bottom:YA("bottom"),left:YA("left")}}),XR=n=>(n||[]).map(r=>{const{name:i,popover:s,label:a="",width:u=NODE_HEIGHT,height:h=NODE_HEIGHT,ports:p,parentKey:g}=r;return{id:uuidv4(),renderKey:i,name:i,label:a,popoverContent:s,width:u,height:h,ports:p||_D(),originData:Object.assign({},r),isCustom:!0,parentKey:g}}),t4=n=>__awaiter(void 0,void 0,void 0,function*(){return[...XR(n),...NODEPOOL.map(({name:i,ports:s,width:a=NODE_WIDTH,height:u=NODE_HEIGHT,label:h=""})=>({id:uuidv4(),renderKey:i,name:i,label:h,popoverContent:()=>i,width:a,height:u,ports:_D(s)}))]}),ZR=n=>{const r=n?(0,ed.isArray)(n)?n:[n]:[];let i=[];r.forEach(u=>{i=i.concat(u.nodes.map(h=>Object.assign(Object.assign({},h),{parentKey:u.key})))}),i.length&&CD({registerNode:i});const s=ZA("graphConfig"),a=ZA("registerNode");!s||!a?.length||a.forEach(u=>{const{name:h,component:p}=u;s.setNodeRender(h,p)})},YR=n=>{ZR(),n.nodeRender.get("Terminal")||CR.forEach(r=>{n.setNodeRender(r.name,q[`${r.name.replace(/\s+/g,"")}Node`])})},As=(n,r=0,i=0)=>{if(!n.length)return null;let s="";return n.forEach(a=>{const[u,h,p,g,y]=a;s+=(0,ed.isNumber)(p)?` ${u} ${h+r} ${p+i}`:` ${u}`,y&&(s+=` ${g+r} ${y+i}`)}),s};var Gy=M(87462),KR=M(8812),AD=M(54062),qR=M(96774),H3=M.n(qR),TD=M(50344),JR=M(63441),MD=H.forwardRef(function(n,r){var i,s=n.prefixCls,a=n.forceRender,u=n.className,h=n.style,p=n.children,g=n.isActive,y=n.role,b=H.useState(g||a),E=(0,Xp.Z)(b,2),T=E[0],O=E[1];return H.useEffect(function(){(a||g)&&O(!0)},[a,g]),T?H.createElement("div",{ref:r,className:Oe()("".concat(s,"-content"),(i={},(0,kt.Z)(i,"".concat(s,"-content-active"),g),(0,kt.Z)(i,"".concat(s,"-content-inactive"),!g),i),u),style:h,role:y},H.createElement("div",{className:"".concat(s,"-content-box")},p)):null});MD.displayName="PanelContent";var QR=MD,OD=function(n){(0,wa.Z)(i,n);var r=(0,AD.Z)(i);function i(){var s;(0,dr.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),s.onItemClick=function(){var p=s.props,g=p.onItemClick,y=p.panelKey;typeof g=="function"&&g(y)},s.handleKeyPress=function(p){(p.key==="Enter"||p.keyCode===13||p.which===13)&&s.onItemClick()},s.renderIcon=function(){var p=s.props,g=p.showArrow,y=p.expandIcon,b=p.prefixCls,E=p.collapsible;if(!g)return null;var T=typeof y=="function"?y(s.props):H.createElement("i",{className:"arrow"});return T&&H.createElement("div",{className:"".concat(b,"-expand-icon"),onClick:E==="header"?s.onItemClick:null},T)},s.renderTitle=function(){var p=s.props,g=p.header,y=p.prefixCls,b=p.collapsible;return H.createElement("span",{className:"".concat(y,"-header-text"),onClick:b==="header"?s.onItemClick:null},g)},s}return(0,Or.Z)(i,[{key:"shouldComponentUpdate",value:function(a){return!H3()(this.props,a)}},{key:"render",value:function(){var a,u,h=this.props,p=h.className,g=h.id,y=h.style,b=h.prefixCls,E=h.headerClass,T=h.children,O=h.isActive,N=h.destroyInactivePanel,k=h.accordion,B=h.forceRender,$=h.openMotion,X=h.extra,ne=h.collapsible,be=ne==="disabled",me=ne==="header",je=Oe()((a={},(0,kt.Z)(a,"".concat(b,"-item"),!0),(0,kt.Z)(a,"".concat(b,"-item-active"),O),(0,kt.Z)(a,"".concat(b,"-item-disabled"),be),a),p),ot=Oe()("".concat(b,"-header"),(u={},(0,kt.Z)(u,E,E),(0,kt.Z)(u,"".concat(b,"-header-collapsible-only"),me),u)),ct={className:ot,"aria-expanded":O,"aria-disabled":be,onKeyPress:this.handleKeyPress};me||(ct.onClick=this.onItemClick,ct.role=k?"tab":"button",ct.tabIndex=be?-1:0);var Xt=X!=null&&typeof X!="boolean";return H.createElement("div",{className:je,style:y,id:g},H.createElement("div",ct,this.renderIcon(),this.renderTitle(),Xt&&H.createElement("div",{className:"".concat(b,"-extra")},X)),H.createElement(JR.Z,(0,Gy.Z)({visible:O,leavedClassName:"".concat(b,"-content-hidden")},$,{forceRender:B,removeOnLeave:N}),function(_t,Zt){var at=_t.className,Gn=_t.style;return H.createElement(QR,{ref:Zt,prefixCls:b,className:at,style:Gn,isActive:O,forceRender:B,role:k?"tabpanel":null},T)}))}}]),i}(H.Component);OD.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var ek=OD;function PD(n){var r=n;if(!Array.isArray(r)){var i=(0,ja.Z)(r);r=i==="number"||i==="string"?[r]:[]}return r.map(function(s){return String(s)})}var $3=function(n){(0,wa.Z)(i,n);var r=(0,AD.Z)(i);function i(s){var a;(0,dr.Z)(this,i),a=r.call(this,s),a.onClickItem=function(g){var y=a.state.activeKey;if(a.props.accordion)y=y[0]===g?[]:[g];else{y=(0,ms.Z)(y);var b=y.indexOf(g),E=b>-1;E?y.splice(b,1):y.push(g)}a.setActiveKey(y)},a.getNewChild=function(g,y){if(!g)return null;var b=a.state.activeKey,E=a.props,T=E.prefixCls,O=E.openMotion,N=E.accordion,k=E.destroyInactivePanel,B=E.expandIcon,$=E.collapsible,X=g.key||String(y),ne=g.props,be=ne.header,me=ne.headerClass,je=ne.destroyInactivePanel,ot=ne.collapsible,ct=!1;N?ct=b[0]===X:ct=b.indexOf(X)>-1;var Xt=ot??$,_t={key:X,panelKey:X,header:be,headerClass:me,isActive:ct,prefixCls:T,destroyInactivePanel:je??k,openMotion:O,accordion:N,children:g.props.children,onItemClick:Xt==="disabled"?null:a.onClickItem,expandIcon:B,collapsible:Xt};return typeof g.type=="string"?g:(Object.keys(_t).forEach(function(Zt){typeof _t[Zt]>"u"&&delete _t[Zt]}),H.cloneElement(g,_t))},a.getItems=function(){var g=a.props.children;return(0,TD.Z)(g).map(a.getNewChild)},a.setActiveKey=function(g){"activeKey"in a.props||a.setState({activeKey:g}),a.props.onChange(a.props.accordion?g[0]:g)};var u=s.activeKey,h=s.defaultActiveKey,p=h;return"activeKey"in s&&(p=u),a.state={activeKey:PD(p)},a}return(0,Or.Z)(i,[{key:"shouldComponentUpdate",value:function(a,u){return!H3()(this.props,a)||!H3()(this.state,u)}},{key:"render",value:function(){var a,u=this.props,h=u.prefixCls,p=u.className,g=u.style,y=u.accordion,b=Oe()((a={},(0,kt.Z)(a,h,!0),(0,kt.Z)(a,p,!!p),a));return H.createElement("div",{className:b,style:g,role:y?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(a){var u={};return"activeKey"in a&&(u.activeKey=PD(a.activeKey)),u}}]),i}(H.Component);$3.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},$3.Panel=ek;var DD=$3,ND=DD,n4=DD.Panel,tk=M(98423),ID=M(53124),nk=M(33603),RD=M(96159),rk=function(r){var i=H.useContext(ID.E_),s=i.getPrefixCls,a=r.prefixCls,u=r.className,h=u===void 0?"":u,p=r.showArrow,g=p===void 0?!0:p,y=s("collapse",a),b=Oe()((0,kt.Z)({},"".concat(y,"-no-arrow"),!g),h);return H.createElement(ND.Panel,(0,Gy.Z)({},r,{prefixCls:y,className:b}))},ik=rk,kD=function(r){var i,s=H.useContext(ID.E_),a=s.getPrefixCls,u=s.direction,h=r.prefixCls,p=r.className,g=p===void 0?"":p,y=r.bordered,b=y===void 0?!0:y,E=r.ghost,T=r.expandIconPosition,O=T===void 0?"start":T,N=a("collapse",h),k=H.useMemo(function(){return O==="left"?"start":O==="right"?"end":O},[O]),B=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},je=r.expandIcon,ot=je?je(me):H.createElement(KR.Z,{rotate:me.isActive?90:void 0});return(0,RD.Tm)(ot,function(){return{className:Oe()(ot.props.className,"".concat(N,"-arrow"))}})},$=Oe()("".concat(N,"-icon-position-").concat(k),(i={},(0,kt.Z)(i,"".concat(N,"-borderless"),!b),(0,kt.Z)(i,"".concat(N,"-rtl"),u==="rtl"),(0,kt.Z)(i,"".concat(N,"-ghost"),!!E),i),g),X=(0,Gy.Z)((0,Gy.Z)({},nk.ZP),{motionAppear:!1,leavedClassName:"".concat(N,"-content-hidden")}),ne=function(){var me=r.children;return(0,TD.Z)(me).map(function(je,ot){var ct;if(!((ct=je.props)===null||ct===void 0)&&ct.disabled){var Xt=je.key||String(ot),_t=je.props,Zt=_t.disabled,at=_t.collapsible,Gn=(0,Gy.Z)((0,Gy.Z)({},(0,tk.Z)(je.props,["disabled"])),{key:Xt,collapsible:at??(Zt?"disabled":void 0)});return(0,RD.Tm)(je,Gn)}return je})};return H.createElement(ND,(0,Gy.Z)({openMotion:X},r,{expandIcon:B,prefixCls:N,className:$}),ne())};kD.Panel=ik;var ok=kD,sk=ok;const{Panel:LD}=sk,r4=n=>{const{x6NodeFactory:r,dndOptions:i,state:s,prefixClz:a,defaultActiveKey:u=["official"],showOfficial:h=!0}=n,p=n.registerNode?isArray(n.registerNode)?n.registerNode:[n.registerNode]:[],{graphProvider:g,modelService:y,commandService:b}=useXFlowApp(),[E,T]=React.useState(),[O,N]=React.useState();g.getGraphInstance().then(ot=>{N(ot)});let k;g.getGraphOptions().then(ot=>{k=ot});const B=useCallback(ot=>__awaiter(void 0,void 0,void 0,function*(){var ct;const{ports:Xt}=ot,_t=Object.assign(Object.assign({},ot),{id:`node-${uuidv4()}`,zIndex:10,ports:Object.assign(Object.assign({},Xt),{items:(ct=Xt.items)===null||ct===void 0?void 0:ct.map(Gn=>Object.assign(Object.assign({},Gn),{id:uuidv4()}))})}),Zt={nodeConfig:_t};yield b.executeCommand(XFlowNodeCommands.ADD_NODE.id,Zt);const at=getProps("onAddNode");typeof at=="function"&&at(_t)}),[b]);React.useEffect(()=>{if(!O)return;const ot=new Addon.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},i),{target:O,validateNode:ct=>__awaiter(void 0,void 0,void 0,function*(){const Xt=Object.assign(Object.assign({},ct.getData()),ct.getPosition());return yield B(Xt),!1})}));T(ot)},[b,i,O,y,B]);const $=React.useCallback(ot=>ct=>{if(!O||!E||!k)return;const Xt=k.nodeTypeParser(ot),{width:_t=180,height:Zt=40}=ot,at=k.nodeRender.get(Xt),Gn=getNodeReactComponent(at,b,y),Rn={data:ot,width:_t,height:Zt,view:k.graphId,component:Gn},Jn=r?r(Rn):defaultNodeFactory(Rn);E.start(Jn,ct.nativeEvent)},[b,E,O,k,y,r]),X=React.useCallback((ot=[])=>ot.map(ct=>{const{popoverContent:Xt}=ct;return React.createElement(NodeTitle,{item:ct,key:ct.id,onMouseDown:$(ct),popoverContent:Xt,prefixClz:a,modelService:y,commandService:b,graphConfig:k})}),[b,k,y,$,a]),ne=s.nodeList.filter(ot=>!ot.isCustom),be=s.searchList.filter(ot=>!ot.isCustom),me=ot=>s.nodeList.filter(ct=>ct.isCustom&&ct.parentKey===ot),je=ot=>s.searchList.filter(ct=>ct.isCustom&&ct.parentKey===ot);return React.createElement(React.Fragment,null,React.createElement("div",{className:`${a}-body`},React.createElement(Collapse,{defaultActiveKey:u,style:{border:"none"}},h&&React.createElement(LD,{header:"\u901A\u7528\u8282\u70B9",key:"official",style:{border:"none"}},!s.keyword&&React.createElement("div",{className:`${a}-official`},X(ne)),s.searchList.length>0&&React.createElement("div",{className:`${a}-official`},X(be))),p?.length>0&&p.map(ot=>!ot.hidden&&ot.nodes.length>0&&React.createElement(LD,{header:ot.title,key:ot.key,style:{border:"none"}},!s.keyword&&React.createElement("div",{className:`${a}-custom`},X(me(ot.key))),s.searchList.length>0&&React.createElement("div",{className:`${a}-custom`},X(je(ot.key)))))),s.keyword&&s.searchList.length===0&&React.createElement(Empty,{style:{marginTop:"48px"}})))},i4=n=>{const{prefixClz:r,onKeywordChange:i}=n,{propsProxy:s}=usePanelContext(),a=s.getValue();return React.createElement(React.Fragment,null,React.createElement("div",{className:`${r}-header`,style:Object.assign({zIndex:1},n.style)},a.header&&React.isValidElement(a.header)&&a.header,React.createElement("div",{className:`${r}-header-search`},React.createElement(Input,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:u=>i(u.target.value),style:{width:"100%",border:0}}))))};var KA;(function(n){n.id="NODE_PANEL_DATA"})(KA||(KA={}));const ak=(n=[],r)=>__awaiter(void 0,void 0,void 0,function*(){return n.filter(s=>{var a,u;return s.isDirectory||((a=s.label)===null||a===void 0?void 0:a.includes(r))||((u=s.name)===null||u===void 0?void 0:u.includes(r))})}),o4=n=>{const{searchService:r=ak}=n,i=n.registerNode?isArray(n.registerNode)?n.registerNode:[n.registerNode]:[];let s=[];i.forEach(y=>{s=s.concat(y.nodes.map(b=>Object.assign(Object.assign({},b),{parentKey:y.key})))});const{modelService:a}=useXFlowApp(),[u,h,p]=createComponentModel({searchList:[],nodeList:[],defaultExpandAll:!1,keyword:""});React.useEffect(()=>{a.findDeferredModel(KA.id)||a.registerModel({id:KA.id,modelFactory:()=>p,watchChange:y=>__awaiter(void 0,void 0,void 0,function*(){const b=yield MODELS.GRAPH_META.getModel(a),E=()=>__awaiter(void 0,void 0,void 0,function*(){return{listData:yield nodeService(s)}}),T=b.watch(()=>__awaiter(void 0,void 0,void 0,function*(){const O=yield E();y.setValue({nodeList:O.listData,defaultExpandAll:!1,keyword:"",searchList:[]})}));return Disposable.create(()=>{T.dispose()})})})},[]);const g=React.useCallback(y=>__awaiter(void 0,void 0,void 0,function*(){if(!!r)if(y){const b=yield r(u.nodeList,y);h(E=>{E.keyword=y,E.searchList=b})}else h(b=>{b.keyword="",b.searchList=[]})}),[r,u.nodeList,h]);return{state:u,setState:h,onKeywordChange:g}},ck=n=>{const{cell:r,data:{label:i,stroke:s,fill:a,fontSize:u,fontFill:h,width:p=200,isCollapsed:g=!1}}=n,y=Yo(),b=()=>{y.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!1,collapsedSize:{width:p,height:40}})},E=()=>{y.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!0,collapsedSize:{width:p,height:40},gap:3})};return H.createElement("div",{className:"xflow-group-node",style:{borderColor:s,backgroundColor:a,fontSize:u,color:h}},H.createElement("div",{className:"xflow-group-header"},H.createElement("div",{className:"header-left"},i),H.createElement("div",{className:"header-right"},g&&H.createElement(xs.Z,{onClick:b}),!g&&H.createElement(dp.Z,{onClick:E}))))},lk=n=>{n.setNodeRender(xR,ck)};var GD;(function(n){n.id="FLOWCHART_PANEL_DATA"})(GD||(GD={}));const uk=n=>{const{prefixClz:r,position:i={width:240,top:0,bottom:0,left:0},showHeader:s=!0}=n,a=__rest(n,["prefixClz","position","showHeader"]),{width:u=200}=i,{headerStyle:h,bodyStyle:p}=usePanelLyaoutStyle(n),{state:g,onKeywordChange:y}=usePanelData(n);return React.createElement(React.Fragment,null,s&&React.createElement(WorkspacePanel,Object.assign({},a,{position:{top:0,left:0,height:PANEL_HEADER_HEIGHT,width:u}}),React.createElement(NodePanelHeader,Object.assign({},n,{state:g,style:h,onKeywordChange:y}))),React.createElement(WorkspacePanel,Object.assign({className:`${CONTAINER_CLASS}-nodes`},a,{position:Object.assign(Object.assign({},i),{top:s?PANEL_HEADER_HEIGHT:0})}),React.createElement(NodePanelBody,Object.assign({},n,{state:g,style:p}))))},s4=n=>{registerCustomNode(get(n,"registerNode"));const r=useXflowPrefixCls("node-panel"),[i,s]=useState(!1),{show:a=!0,position:u={width:240,top:40,bottom:0,left:0}}=n,h=__rest(n,["show","position"]);if(!a)return null;const{width:p=200,left:g}=u;return React.createElement(WorkspacePanel,{className:CONTAINER_CLASS,position:Object.assign(Object.assign({},u),{left:i?-p:g})},React.createElement("div",{className:`${CONTAINER_CLASS}-wrapper`},React.createElement(WorkspacePanel,Object.assign({className:r},h,{position:{top:0,bottom:0,left:0,right:0}}),React.createElement(uk,Object.assign({},n,{prefixClz:r,position:u}))),React.createElement("div",{className:`${CONTAINER_CLASS}-icon`,style:{top:21,right:i?-20:-10,borderRadius:i?"0 50% 50% 0":"50%",borderLeft:i?"none":""},onClick:()=>{s(!i)}},i?React.createElement(DoubleRightOutlined,null):React.createElement(DoubleLeftOutlined,null))))},dk="flowchart-connecting-edge",hk="ant";var qA;(function(n){n.EVENT_NAME="ADD_FLOWCHART_EDGE_CMD_EVENT"})(qA||(qA={}));const fk=ur.bn.kS.registry.register("xflow",ur.bn.kS.define({zIndex:1,highlight:!0,name:dk,label:"",anchor:{name:"midSide",args:{dx:10}},attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8},strokeDasharray:"5 5",strokeWidth:1}},data:{label:""}}),!0),pk=wg((n,r)=>{const{config:i={},useConfig:s,mode:a="edit"}=r.getValue();n.setEdgeTypeParser(u=>u?.renderKey),CD(Object.assign(Object.assign({},r.getValue()),{graphConfig:n})),YR(n),lk(n),n.setX6Config(dR()({grid:!0,history:!0,resizing:{enabled:!0,minWidth:as,minHeight:as,preserveAspectRatio:u=>{const{data:h}=u;return wR.includes(h.name)}},snapline:{enabled:!0},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge(){const u=new fk({});return this.once("edge:connected",h=>{const{edge:p,isNew:g}=h;if(g&&p&&p.isEdge()&&u===p){const y=p.getTargetCell();if(y&&y.isNode()){const b=p.getTargetPortId(),E=p.getSourcePortId(),T=p.getSourceCellId(),O=p.getTargetCellId();this.trigger(qA.EVENT_NAME,{targetPortId:b,sourcePortId:E,source:T,target:O,edge:p,tempEdgeId:u.id})}}}),u},validateEdge:u=>{var h;const{edge:p}=u;return!!(!((h=p?.target)===null||h===void 0)&&h.port)},validateMagnet(){return!0},validateConnection({sourceView:u,targetView:h,targetMagnet:p}){if(u===h)return!1;const g=h.cell;if(p){const y=p.getAttribute("port"),b=g.getPort(y);return!(b&&b.connected)}}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},onPortRendered(u){const{port:h}=u,{contentSelectors:p}=u,g=p&&p.content,y=h.group,b=Oe()("xflow-port",{connected:h.connected});g&&ua.render(H.createElement(lR.ZP,{prefixCls:hk},H.createElement(OA.Z,{title:h.tooltip,placement:y},H.createElement("span",{className:b}))),g)}},i)),n.setEvents([{eventName:"node:selected",callback:()=>{a==="edit"&&j3(!1)}},{eventName:"edge:dblclick",callback:u=>{yR(u)}},{eventName:"edge:mouseleave",callback:(u,h)=>{bR(u,h)}},{eventName:"node:mouseenter",callback:u=>{a==="edit"&&j3(!0,u)}},{eventName:"node:mouseleave",callback:u=>{j3(!1,u)}},{eventName:"node:moved",callback:(u,h)=>{gR(u,h)}},{eventName:"node:resized",callback:(u,h)=>{vR(u,h)}}]),typeof s=="function"&&s(n)});let FD=class{constructor(){this.toDispose=new un,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return Mt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new un,s=[r.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:u,graph:h}=a;h.on(qA.EVENT_NAME,p=>(0,F.mG)(this,void 0,void 0,function*(){const{edge:g}=p,y=(0,F._T)(p,["edge"]),{tempEdgeId:b}=y,E=(0,F._T)(y,["tempEdgeId"]),T={edgeConfig:Object.assign(Object.assign({},E),{source:{cell:y.source,port:y.sourcePortId},target:{cell:y.target,port:y.targetPortId},zIndex:1,attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8},strokeDasharray:"5 5",strokeWidth:1}},data:Object.assign({},E)})};yield u.executeCommand(uo.ADD_EDGE.id,T),yield u.executeCommand(uo.DEL_EDGE.id,{edgeConfig:{id:b}});const O=h.getCellById(y.source),N=h.getCellById(y.target);yield u.executeCommand($i.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign({},O.data),{incomingEdges:h.getIncomingEdges(O),outgoingEdges:h.getOutgoingEdges(O)})}),yield u.executeCommand($i.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign({},N.data),{incomingEdges:h.getIncomingEdges(N),outgoingEdges:h.getOutgoingEdges(N)})});const k=ZA("onAddEdge");typeof k=="function"&&k(T.edgeConfig),p.edge.remove()}))})})];return i.pushAll(s),Mt.create(()=>{})})}};FD=(0,F.gn)([cn({contrib:Hs})],FD);const a4=()=>{const n=useExtensionRegistry(),r=React.useMemo(()=>({CONFIG_TYPE:"FLOWCHART_EXTENSION",getConfig:()=>__awaiter(void 0,void 0,void 0,function*(){})}),[]);return React.useEffect(()=>{const i=n.addExtension({config:r,createModule:createFlowchartExtensionModule});return n.addContainerClassNames("flowchart-extension-container"),()=>{i.dispose()}},[r,n]),null},c4=()=>Module(n=>{n(FlowHooksContribution)}),gk=n=>{const{position:r={top:40,left:240,right:240,bottom:0}}=n,i=pk(n),s=Yo();return(0,H.useEffect)(()=>{s&&hR(s)},[s]),H.createElement(hl,Object.assign({},n,{config:i,position:r}),n.children)};gk.defaultProps={isXFlowCanvas:!0};function vk(n){const[r,i]=(0,H.useState)({loading:!0}),s=(0,H.useCallback)(()=>{n().then(a=>{i({loading:!1,data:a})},a=>{i({loading:!1}),console.error(a)})},[n]);return(0,H.useEffect)(()=>{s()},[s]),r}const W3=n=>{const{controlSchema:r,children:i,type:s="node"}=n,{commandService:a,modelService:u}=xw(),h=(0,H.useCallback)(()=>(0,F.mG)(void 0,void 0,void 0,function*(){const{data:O}=yield Pf.useValue(u);return O}),[u]),p=(0,H.useCallback)(()=>(0,F.mG)(void 0,void 0,void 0,function*(){const O=yield Bd.useValue(u),N=O.getData();return Object.assign({id:O.id},N)}),[u]),{data:g,loading:y}=vk(s==="edge"?p:h);H.useEffect(()=>{a.executeCommand(ti.SAVE_GRAPH_DATA.id,{saveGraphDataService:(O,N)=>(0,F.mG)(void 0,void 0,void 0,function*(){return{err:null,data:N,meta:O}})})},[a]);const b=O=>(0,F.mG)(void 0,void 0,void 0,function*(){const N=yield h(),k=Object.assign(Object.assign({},N),O);yield a.executeCommand($i.UPDATE_NODE.id,{nodeConfig:k}),_w({type:"update:node",config:k})}),E=(O,N="line",k)=>(0,F.mG)(void 0,void 0,void 0,function*(){var B;const $=yield p(),X=Object.assign(Object.assign(Object.assign({},$),k?O[k]:O),{attrs:Object.assign(Object.assign({},$.attrs),{[N]:Object.assign(Object.assign({},(B=$.attrs)===null||B===void 0?void 0:B[N]),k?O[k]:O)})});yield a.executeCommand(uo.UPDATE_EDGE.id,{edgeConfig:X}),_w({type:"update:edge",config:X})}),T=O=>(0,F.mG)(void 0,void 0,void 0,function*(){const N=yield h(),k=Object.assign(Object.assign({},N),O);yield a.executeCommand($i.UPDATE_NODE.id,{nodeConfig:k}),_w({type:"update:group",config:k})});return y?null:H.createElement(zv,{schema:r},()=>i(Object.assign({},g),{updateNode:b,updateEdge:E,updateGroup:T}))},Ec="flowchart-editor",JA=24,BD={attrs:{line:{stroke:"#A2B1C3",strokeWidth:1},text:{fill:"#000",fontSize:12,textAnchor:"middle",textVerticalAnchor:"middle"}}},QA={width:12,height:8,name:"block"},eT={width:0,height:0,name:""},mk={target:{sourceMarker:eT,targetMarker:QA},source:{sourceMarker:QA,targetMarker:eT},all:{sourceMarker:QA,targetMarker:QA},none:{sourceMarker:eT,targetMarker:eT}},yk={solid:[0,0],dash:[5,5]};var tT=n=>{const{label:r="\u6807\u7B7E",value:i,onChange:s}=n;return H.createElement("div",{className:"group"},H.createElement("label",null,r),H.createElement(zA.Z,{value:i,style:{height:JA},onChange:a=>{s?.(a.target.value)}}))},zD=M(71577),bk=M(24198);const xk=n=>{const{label:r,value:i="",onChange:s}=n,[a,u]=(0,H.useState)(!1),h=(0,H.useRef)(i),p=(0,H.useRef)(),{graphProvider:g}=Yo(),y=(0,H.useRef)();g.getGraphOptions().then(O=>{y.current=O});const b=()=>H.createElement("div",{className:`${Ec}-pick-color-container`},H.createElement("div",{className:`${Ec}-popover`},H.createElement(bk.xS,{onChange:O=>{h.current=O.hex}}),H.createElement("div",{className:"foolter"},H.createElement(zD.Z,{onClick:()=>{u(!1)}},"\u53D6\u6D88"),H.createElement(zD.Z,{type:"primary",onClick:()=>{s?.(h.current),u(!1)}},"\u786E\u8BA4")))),E=(O,N)=>{const k=document.getElementsByClassName(N);if(k.length===1)return k[0];let B=null,$=O.parentElement;for(;!B;){const X=$.getElementsByClassName(N);X?.length>0&&(B=X[0]),$=$.parentElement}return B},T=O=>{const N=document.getElementsByClassName(`${Ec}-pick-color-container`);if(N.length&&Array.from(N).forEach(B=>{var $;($=B.parentNode)===null||$===void 0||$.removeChild(B)}),!O)return;const k=document.createElement("div");(0,ua.render)((0,ua.createPortal)(H.createElement(b,null),E(p.current,"flowchart-editor-panel-body")),k)};return H.createElement("div",{className:"group",ref:p},r&&H.createElement("label",null,r),H.createElement("div",{className:`${Ec}-color-container`,onClick:()=>{u(!0)}},H.createElement("div",{className:`${Ec}-color`,style:{backgroundColor:i,height:"100%"}})),T(a))};var w0=(0,H.memo)(xk,(n,r)=>n.label===r.label&&n.value===r.value),Aw=n=>{const{label:r,value:i,onChange:s,min:a,width:u}=n;return H.createElement("div",{className:"group"},r&&H.createElement("label",null,r),H.createElement(F3.Z,{value:i,min:a,style:{width:u,height:JA},onChange:h=>{s?.(h)}}))};const nT=({value:n,onChangeItem:r,addonBefore:i})=>H.createElement("div",{className:"addon-before-group"},H.createElement(F3.Z,{value:n,style:{height:JA,border:"none"},onChange:s=>{r(s)}}),H.createElement("span",null,i));var X3=n=>{const{label:r="\u4F4D\u7F6E",x:i,y:s,onChange:a}=n;return H.createElement("div",{className:"group"},H.createElement("label",null,r),H.createElement("div",{className:"split"},H.createElement(nT,{addonBefore:"X",value:i,onChangeItem:u=>{a?.("x",u)}}),H.createElement(nT,{addonBefore:"Y",value:s,onChangeItem:u=>{a?.("y",u)}})))},Z3=n=>{const{width:r,height:i,label:s="\u5C3A\u5BF8",onChange:a}=n;return H.createElement("div",{className:"group"},H.createElement("label",null,s),H.createElement("div",{className:"split"},H.createElement(nT,{addonBefore:"W",value:r,onChangeItem:u=>{a?.("width",u)}}),H.createElement(nT,{addonBefore:"H",value:i,onChangeItem:u=>{a?.("height",u)}})))},Y3=n=>{const{label:r="\u7BAD\u5934",value:i,onChange:s,options:a=[],width:u}=n;return H.createElement("div",{className:"group"},H.createElement("label",null,r),H.createElement(L3.Z,{size:"small",value:i,style:{width:u,height:JA},getPopupContainer:h=>h.parentNode,optionFilterProp:"children",onChange:h=>{s?.(h)},filterOption:(h,p)=>{const{label:g=""}=p;return typeof g=="string"?g.toLowerCase().indexOf(h.toLowerCase())>=0:g.toString().indexOf(h.toLowerCase())>=0},options:a}))};const p4={InputFiled:tT,ColorPicker:w0,InputNumberFiled:Aw,Size:Z3,Position:X3,SelectField:Y3},Ck=n=>{const{config:r,plugin:i={}}=n,{updateNode:s}=i,[a,u]=(0,H.useState)(Object.assign(Object.assign({},yn),r)),h=(p,g)=>{u(Object.assign(Object.assign({},a),{[p]:g})),s({[p]:g})};return(0,H.useEffect)(()=>{u(Object.assign(Object.assign({},yn),r))},[r]),H.createElement("div",{className:`${Ec}-panel-body`},H.createElement("div",{className:`${Ec}-panel-group`},H.createElement("h5",null,"\u5185\u5BB9"),H.createElement(tT,{label:"\u6807\u9898",value:a.label,onChange:p=>{h("label",p)}})),H.createElement("div",{className:`${Ec}-panel-group`},H.createElement("h5",null,"\u6837\u5F0F"),H.createElement(X3,{x:a.x,y:a.y,onChange:(p,g)=>{h(p,g)}}),H.createElement(Z3,{width:a.width,height:a.height,onChange:(p,g)=>{h(p,g)}}),H.createElement(w0,{label:"\u586B\u5145",value:a.fill,onChange:p=>{h("fill",p)}}),H.createElement(w0,{label:"\u8FB9\u6846",value:a.stroke,onChange:p=>{h("stroke",p)}}),H.createElement("div",{className:`${Ec}-node-text-style`},H.createElement(Aw,{label:"\u5B57\u53F7",value:a.fontSize,width:68,onChange:p=>{h("fontSize",p)}}),H.createElement(w0,{value:a.fontFill,onChange:p=>{h("fontFill",p)}}))))},wk=n=>H.createElement(W3,Object.assign({},n),(r,i)=>H.createElement(Ck,Object.assign({},n,{plugin:i,config:r}))),Ek=n=>{const{config:r,plugin:i={}}=n,{updateEdge:s}=i,[a,u]=(0,H.useState)(Object.assign(Object.assign({},BD),r));(0,H.useEffect)(()=>{u(Object.assign(Object.assign({},BD),r))},[r]);const h=(b,E="line")=>{var T;const{attrs:O={}}=a;return(T=O[E])===null||T===void 0?void 0:T[b]},p=()=>{var b,E,T,O,N;const{attrs:k={}}=a,{line:B={}}=k;return((b=B.sourceMarker)===null||b===void 0?void 0:b.name)&&((E=B.targetMarker)===null||E===void 0?void 0:E.name)?"all":!(!((T=B.sourceMarker)===null||T===void 0)&&T.name)&&!(!((O=B.targetMarker)===null||O===void 0)&&O.name)?"none":!((N=B.sourceMarker)===null||N===void 0)&&N.name?"source":"target"},g=()=>{const{attrs:b={}}=a,{line:E={}}=b;return E.strokeDasharray?"dash":"solid"},y=(b,E,T="line")=>{var O,N;u(b==="arrow"?Object.assign(Object.assign({},a),{attrs:Object.assign(Object.assign({},a.attrs),{[T]:Object.assign(Object.assign({},(O=a.attrs)===null||O===void 0?void 0:O[T]),E)})}):Object.assign(Object.assign({},a),{[b]:E,attrs:Object.assign(Object.assign({},a.attrs),{[T]:Object.assign(Object.assign({},(N=a.attrs)===null||N===void 0?void 0:N[T]),{[b]:E})})})),s({[b]:E},T,b==="arrow"?"arrow":"")};return H.createElement("div",{className:`${Ec}-panel-body`},H.createElement("div",{className:`${Ec}-panel-group`},H.createElement("h5",null,"\u5185\u5BB9"),H.createElement(tT,{label:"\u6807\u7B7E",value:a.label,onChange:b=>{y("label",b)}})),H.createElement("h5",{style:{marginBottom:12}},"\u6837\u5F0F"),H.createElement("div",{className:`${Ec}-panel-group`,style:{marginBottom:0}},H.createElement("h5",null,"\u7EBF"),H.createElement(Y3,{label:"\u7BAD\u5934",value:p(),width:"100%",options:[{label:"\u6B63\u5411",value:"target"},{label:"\u9006\u5411",value:"source"},{label:"\u53CC\u5411",value:"all"},{label:"\u65E0",value:"none"}],onChange:b=>{y("arrow",mk[b],"line")}}),H.createElement("div",{className:`${Ec}-edge-stroke-style`},H.createElement(Y3,{label:"\u7EBF\u5F62",width:68,value:g(),options:[{label:"\u5B9E\u7EBF",value:"solid"},{label:"\u865A\u7EBF",value:"dash"}],onChange:b=>{y("strokeDasharray",yk[b],"line")}}),H.createElement(Aw,{value:h("strokeWidth"),min:1,onChange:b=>{y("strokeWidth",b,"line")}})),H.createElement(w0,{label:"\u8FB9\u6846",value:h("stroke"),onChange:b=>{y("stroke",b,"line")}})),H.createElement("div",{className:`${Ec}-panel-group`},H.createElement("h5",null,"\u6807\u7B7E"),H.createElement("div",{className:`${Ec}-edge-text-style`},H.createElement(Aw,{label:"\u5B57\u53F7",min:10,width:68,value:h("fontSize","text")||12,onChange:b=>{y("fontSize",b,"text")}}),H.createElement(w0,{value:h("fill","text")||"#000",onChange:b=>{y("fill",b,"text")}}))))},Sk=n=>H.createElement(W3,Object.assign({},n,{type:"edge"}),(r,i)=>H.createElement(Ek,Object.assign({},n,{plugin:i,config:r}))),_k=n=>{const{config:r,plugin:i={}}=n,{updateGroup:s}=i,[a,u]=(0,H.useState)(Object.assign(Object.assign({},yn),r)),h=(p,g)=>{u(Object.assign(Object.assign({},a),{[p]:g})),s({[p]:g})};return(0,H.useEffect)(()=>{u(Object.assign(Object.assign({},yn),r))},[r]),H.createElement("div",{className:`${Ec}-panel-body`},H.createElement("div",{className:`${Ec}-panel-group`},H.createElement("h5",null,"\u5185\u5BB9"),H.createElement(tT,{label:"\u6807\u9898",value:a.label,onChange:p=>{h("label",p)}})),H.createElement("div",{className:`${Ec}-panel-group`},H.createElement("h5",null,"\u6837\u5F0F"),H.createElement(X3,{x:a.x,y:a.y,onChange:(p,g)=>{h(p,g)}}),H.createElement(Z3,{width:a.width,height:a.height,onChange:(p,g)=>{h(p,g)}}),H.createElement(w0,{label:"\u586B\u5145",value:a.fill,onChange:p=>{h("fill",p)}}),H.createElement(w0,{label:"\u8FB9\u6846",value:a.stroke,onChange:p=>{h("stroke",p)}}),H.createElement("div",{className:`${Ec}-node-text-style`},H.createElement(Aw,{label:"\u5B57\u53F7",value:a.fontSize,width:68,onChange:p=>{h("fontSize",p)}}),H.createElement(w0,{value:a.fontFill,onChange:p=>{h("fontFill",p)}}))))},Ak=n=>H.createElement(W3,Object.assign({},n),(r,i)=>H.createElement(_k,Object.assign({},n,{plugin:i,config:r}))),Tk=()=>H.createElement("div",{className:`${Ec}-canvas-panel`},H.createElement("span",null,"\u672A\u9009\u4E2D")),g4=n=>(n.set("node-service",NodeService),n.set("edge-service",EdgeService),n.set("group-service",GroupService),n.set("canvas-service",CanvasService),n),v4={NodeService:wk,EdgeService:Sk,GroupService:Ak,CanvasService:Tk},K3="xflow-editor-panel-collpase",m4=n=>{const[r,i]=useState(!1),{controlMapService:s=defaultControlMapService,formSchemaService:a=defaultFormSchemaService,position:u={width:240,top:0,bottom:0,right:0},show:h=!0}=n,p=__rest(n,["controlMapService","formSchemaService","position","show"]);if(!h)return null;const{width:g=200,right:y}=u;return React.createElement(WorkspacePanel,{className:K3,position:Object.assign(Object.assign({},u),{right:r?-g:y})},React.createElement("div",{className:`${K3}-wrapper`},React.createElement(JsonSchemaForm,Object.assign({targetType:["node","edge","canvas","group"],controlMapService:s,formSchemaService:a,position:Object.assign(Object.assign({},u),{top:0}),prefixClz:"xflow-form-editor"},p)),React.createElement("div",{className:`${K3}-icon`,style:{top:21,left:r?-20:-10,borderRadius:r?"50% 0 0  50%":"50%",borderRight:r?"none":""},onClick:()=>{i(!r)}},r?React.createElement(DoubleLeftOutlined,null):React.createElement(DoubleRightOutlined,null))))}},85788:function(Ne,L,M){var j=M(58579);Ne.exports={Graph:j.Graph,json:M(62485),alg:M(39100),version:j.version}},74774:function(Ne,L,M){var j=M(77163);Ne.exports=R;function R(q){var z={},Z=[],te;function Q(de){j.has(z,de)||(z[de]=!0,te.push(de),j.each(q.successors(de),Q),j.each(q.predecessors(de),Q))}return j.each(q.nodes(),function(de){te=[],Q(de),te.length&&Z.push(te)}),Z}},65179:function(Ne,L,M){var j=M(77163);Ne.exports=R;function R(z,Z,te){j.isArray(Z)||(Z=[Z]);var Q=(z.isDirected()?z.successors:z.neighbors).bind(z),de=[],oe={};return j.each(Z,function(ie){if(!z.hasNode(ie))throw new Error("Graph does not have node: "+ie);q(z,ie,te==="post",oe,Q,de)}),de}function q(z,Z,te,Q,de,oe){j.has(Q,Z)||(Q[Z]=!0,te||oe.push(Z),j.each(de(Z),function(ie){q(z,ie,te,Q,de,oe)}),te&&oe.push(Z))}},73897:function(Ne,L,M){var j=M(69205),R=M(77163);Ne.exports=q;function q(z,Z,te){return R.transform(z.nodes(),function(Q,de){Q[de]=j(z,de,Z,te)},{})}},69205:function(Ne,L,M){var j=M(77163),R=M(96129);Ne.exports=z;var q=j.constant(1);function z(te,Q,de,oe){return Z(te,String(Q),de||q,oe||function(ie){return te.outEdges(ie)})}function Z(te,Q,de,oe){var ie={},re=new R,he,De,ue=function(xe){var ae=xe.v!==he?xe.v:xe.w,ce=ie[ae],fe=de(xe),Ee=De.distance+fe;if(fe<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+xe+" Weight: "+fe);Ee<ce.distance&&(ce.distance=Ee,ce.predecessor=he,re.decrease(ae,Ee))};for(te.nodes().forEach(function(xe){var ae=xe===Q?0:Number.POSITIVE_INFINITY;ie[xe]={distance:ae},re.add(xe,ae)});re.size()>0&&(he=re.removeMin(),De=ie[he],De.distance!==Number.POSITIVE_INFINITY);)oe(he).forEach(ue);return ie}},32630:function(Ne,L,M){var j=M(77163),R=M(93070);Ne.exports=q;function q(z){return j.filter(R(z),function(Z){return Z.length>1||Z.length===1&&z.hasEdge(Z[0],Z[0])})}},3171:function(Ne,L,M){var j=M(77163);Ne.exports=q;var R=j.constant(1);function q(Z,te,Q){return z(Z,te||R,Q||function(de){return Z.outEdges(de)})}function z(Z,te,Q){var de={},oe=Z.nodes();return oe.forEach(function(ie){de[ie]={},de[ie][ie]={distance:0},oe.forEach(function(re){ie!==re&&(de[ie][re]={distance:Number.POSITIVE_INFINITY})}),Q(ie).forEach(function(re){var he=re.v===ie?re.w:re.v,De=te(re);de[ie][he]={distance:De,predecessor:ie}})}),oe.forEach(function(ie){var re=de[ie];oe.forEach(function(he){var De=de[he];oe.forEach(function(ue){var xe=De[ie],ae=re[ue],ce=De[ue],fe=xe.distance+ae.distance;fe<ce.distance&&(ce.distance=fe,ce.predecessor=ae.predecessor)})})}),de}},39100:function(Ne,L,M){Ne.exports={components:M(74774),dijkstra:M(69205),dijkstraAll:M(73897),findCycles:M(32630),floydWarshall:M(3171),isAcyclic:M(78149),postorder:M(85979),preorder:M(5340),prim:M(74975),tarjan:M(93070),topsort:M(37034)}},78149:function(Ne,L,M){var j=M(37034);Ne.exports=R;function R(q){try{j(q)}catch(z){if(z instanceof j.CycleException)return!1;throw z}return!0}},85979:function(Ne,L,M){var j=M(65179);Ne.exports=R;function R(q,z){return j(q,z,"post")}},5340:function(Ne,L,M){var j=M(65179);Ne.exports=R;function R(q,z){return j(q,z,"pre")}},74975:function(Ne,L,M){var j=M(77163),R=M(1053),q=M(96129);Ne.exports=z;function z(Z,te){var Q=new R,de={},oe=new q,ie;function re(De){var ue=De.v===ie?De.w:De.v,xe=oe.priority(ue);if(xe!==void 0){var ae=te(De);ae<xe&&(de[ue]=ie,oe.decrease(ue,ae))}}if(Z.nodeCount()===0)return Q;j.each(Z.nodes(),function(De){oe.add(De,Number.POSITIVE_INFINITY),Q.setNode(De)}),oe.decrease(Z.nodes()[0],0);for(var he=!1;oe.size()>0;){if(ie=oe.removeMin(),j.has(de,ie))Q.setEdge(ie,de[ie]);else{if(he)throw new Error("Input graph is not connected: "+Z);he=!0}Z.nodeEdges(ie).forEach(re)}return Q}},93070:function(Ne,L,M){var j=M(77163);Ne.exports=R;function R(q){var z=0,Z=[],te={},Q=[];function de(oe){var ie=te[oe]={onStack:!0,lowlink:z,index:z++};if(Z.push(oe),q.successors(oe).forEach(function(De){j.has(te,De)?te[De].onStack&&(ie.lowlink=Math.min(ie.lowlink,te[De].index)):(de(De),ie.lowlink=Math.min(ie.lowlink,te[De].lowlink))}),ie.lowlink===ie.index){var re=[],he;do he=Z.pop(),te[he].onStack=!1,re.push(he);while(oe!==he);Q.push(re)}}return q.nodes().forEach(function(oe){j.has(te,oe)||de(oe)}),Q}},37034:function(Ne,L,M){var j=M(77163);Ne.exports=R,R.CycleException=q;function R(z){var Z={},te={},Q=[];function de(oe){if(j.has(te,oe))throw new q;j.has(Z,oe)||(te[oe]=!0,Z[oe]=!0,j.each(z.predecessors(oe),de),delete te[oe],Q.push(oe))}if(j.each(z.sinks(),de),j.size(Z)!==z.nodeCount())throw new q;return Q}function q(){}},96129:function(Ne,L,M){var j=M(77163);Ne.exports=R;function R(){this._arr=[],this._keyIndices={}}R.prototype.size=function(){return this._arr.length},R.prototype.keys=function(){return this._arr.map(function(q){return q.key})},R.prototype.has=function(q){return j.has(this._keyIndices,q)},R.prototype.priority=function(q){var z=this._keyIndices[q];if(z!==void 0)return this._arr[z].priority},R.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},R.prototype.add=function(q,z){var Z=this._keyIndices;if(q=String(q),!j.has(Z,q)){var te=this._arr,Q=te.length;return Z[q]=Q,te.push({key:q,priority:z}),this._decrease(Q),!0}return!1},R.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var q=this._arr.pop();return delete this._keyIndices[q.key],this._heapify(0),q.key},R.prototype.decrease=function(q,z){var Z=this._keyIndices[q];if(z>this._arr[Z].priority)throw new Error("New priority is greater than current priority. Key: "+q+" Old: "+this._arr[Z].priority+" New: "+z);this._arr[Z].priority=z,this._decrease(Z)},R.prototype._heapify=function(q){var z=this._arr,Z=2*q,te=Z+1,Q=q;Z<z.length&&(Q=z[Z].priority<z[Q].priority?Z:Q,te<z.length&&(Q=z[te].priority<z[Q].priority?te:Q),Q!==q&&(this._swap(q,Q),this._heapify(Q)))},R.prototype._decrease=function(q){for(var z=this._arr,Z=z[q].priority,te;q!==0&&(te=q>>1,!(z[te].priority<Z));)this._swap(q,te),q=te},R.prototype._swap=function(q,z){var Z=this._arr,te=this._keyIndices,Q=Z[q],de=Z[z];Z[q]=de,Z[z]=Q,te[de.key]=q,te[Q.key]=z}},1053:function(Ne,L,M){"use strict";var j=M(77163);Ne.exports=Z;var R="\0",q="\0",z="";function Z(re){this._isDirected=j.has(re,"directed")?re.directed:!0,this._isMultigraph=j.has(re,"multigraph")?re.multigraph:!1,this._isCompound=j.has(re,"compound")?re.compound:!1,this._label=void 0,this._defaultNodeLabelFn=j.constant(void 0),this._defaultEdgeLabelFn=j.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[q]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}Z.prototype._nodeCount=0,Z.prototype._edgeCount=0,Z.prototype.isDirected=function(){return this._isDirected},Z.prototype.isMultigraph=function(){return this._isMultigraph},Z.prototype.isCompound=function(){return this._isCompound},Z.prototype.setGraph=function(re){return this._label=re,this},Z.prototype.graph=function(){return this._label},Z.prototype.setDefaultNodeLabel=function(re){return j.isFunction(re)||(re=j.constant(re)),this._defaultNodeLabelFn=re,this},Z.prototype.nodeCount=function(){return this._nodeCount},Z.prototype.nodes=function(){return j.keys(this._nodes)},Z.prototype.sources=function(){return j.filter(this.nodes(),j.bind(function(re){return j.isEmpty(this._in[re])},this))},Z.prototype.sinks=function(){return j.filter(this.nodes(),j.bind(function(re){return j.isEmpty(this._out[re])},this))},Z.prototype.setNodes=function(re,he){var De=arguments;return j.each(re,j.bind(function(ue){De.length>1?this.setNode(ue,he):this.setNode(ue)},this)),this},Z.prototype.setNode=function(re,he){return j.has(this._nodes,re)?(arguments.length>1&&(this._nodes[re]=he),this):(this._nodes[re]=arguments.length>1?he:this._defaultNodeLabelFn(re),this._isCompound&&(this._parent[re]=q,this._children[re]={},this._children[q][re]=!0),this._in[re]={},this._preds[re]={},this._out[re]={},this._sucs[re]={},++this._nodeCount,this)},Z.prototype.node=function(re){return this._nodes[re]},Z.prototype.hasNode=function(re){return j.has(this._nodes,re)},Z.prototype.removeNode=function(re){var he=this;if(j.has(this._nodes,re)){var De=function(ue){he.removeEdge(he._edgeObjs[ue])};delete this._nodes[re],this._isCompound&&(this._removeFromParentsChildList(re),delete this._parent[re],j.each(this.children(re),j.bind(function(ue){this.setParent(ue)},this)),delete this._children[re]),j.each(j.keys(this._in[re]),De),delete this._in[re],delete this._preds[re],j.each(j.keys(this._out[re]),De),delete this._out[re],delete this._sucs[re],--this._nodeCount}return this},Z.prototype.setParent=function(re,he){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(j.isUndefined(he))he=q;else{he+="";for(var De=he;!j.isUndefined(De);De=this.parent(De))if(De===re)throw new Error("Setting "+he+" as parent of "+re+" would create create a cycle");this.setNode(he)}return this.setNode(re),this._removeFromParentsChildList(re),this._parent[re]=he,this._children[he][re]=!0,this},Z.prototype._removeFromParentsChildList=function(re){delete this._children[this._parent[re]][re]},Z.prototype.parent=function(re){if(this._isCompound){var he=this._parent[re];if(he!==q)return he}},Z.prototype.children=function(re){if(j.isUndefined(re)&&(re=q),this._isCompound){var he=this._children[re];if(he)return j.keys(he)}else{if(re===q)return this.nodes();if(this.hasNode(re))return[]}},Z.prototype.predecessors=function(re){var he=this._preds[re];if(he)return j.keys(he)},Z.prototype.successors=function(re){var he=this._sucs[re];if(he)return j.keys(he)},Z.prototype.neighbors=function(re){var he=this.predecessors(re);if(he)return j.union(he,this.successors(re))},Z.prototype.isLeaf=function(re){var he;return this.isDirected()?he=this.successors(re):he=this.neighbors(re),he.length===0},Z.prototype.filterNodes=function(re){var he=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});he.setGraph(this.graph()),j.each(this._nodes,j.bind(function(ae,ce){re(ce)&&he.setNode(ce,ae)},this)),j.each(this._edgeObjs,j.bind(function(ae){he.hasNode(ae.v)&&he.hasNode(ae.w)&&he.setEdge(ae,this.edge(ae))},this));var De=this,ue={};function xe(ae){var ce=De.parent(ae);return ce===void 0||he.hasNode(ce)?(ue[ae]=ce,ce):ce in ue?ue[ce]:xe(ce)}return this._isCompound&&j.each(he.nodes(),function(ae){he.setParent(ae,xe(ae))}),he},Z.prototype.setDefaultEdgeLabel=function(re){return j.isFunction(re)||(re=j.constant(re)),this._defaultEdgeLabelFn=re,this},Z.prototype.edgeCount=function(){return this._edgeCount},Z.prototype.edges=function(){return j.values(this._edgeObjs)},Z.prototype.setPath=function(re,he){var De=this,ue=arguments;return j.reduce(re,function(xe,ae){return ue.length>1?De.setEdge(xe,ae,he):De.setEdge(xe,ae),ae}),this},Z.prototype.setEdge=function(){var re,he,De,ue,xe=!1,ae=arguments[0];typeof ae=="object"&&ae!==null&&"v"in ae?(re=ae.v,he=ae.w,De=ae.name,arguments.length===2&&(ue=arguments[1],xe=!0)):(re=ae,he=arguments[1],De=arguments[3],arguments.length>2&&(ue=arguments[2],xe=!0)),re=""+re,he=""+he,j.isUndefined(De)||(De=""+De);var ce=de(this._isDirected,re,he,De);if(j.has(this._edgeLabels,ce))return xe&&(this._edgeLabels[ce]=ue),this;if(!j.isUndefined(De)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(re),this.setNode(he),this._edgeLabels[ce]=xe?ue:this._defaultEdgeLabelFn(re,he,De);var fe=oe(this._isDirected,re,he,De);return re=fe.v,he=fe.w,Object.freeze(fe),this._edgeObjs[ce]=fe,te(this._preds[he],re),te(this._sucs[re],he),this._in[he][ce]=fe,this._out[re][ce]=fe,this._edgeCount++,this},Z.prototype.edge=function(re,he,De){var ue=arguments.length===1?ie(this._isDirected,arguments[0]):de(this._isDirected,re,he,De);return this._edgeLabels[ue]},Z.prototype.hasEdge=function(re,he,De){var ue=arguments.length===1?ie(this._isDirected,arguments[0]):de(this._isDirected,re,he,De);return j.has(this._edgeLabels,ue)},Z.prototype.removeEdge=function(re,he,De){var ue=arguments.length===1?ie(this._isDirected,arguments[0]):de(this._isDirected,re,he,De),xe=this._edgeObjs[ue];return xe&&(re=xe.v,he=xe.w,delete this._edgeLabels[ue],delete this._edgeObjs[ue],Q(this._preds[he],re),Q(this._sucs[re],he),delete this._in[he][ue],delete this._out[re][ue],this._edgeCount--),this},Z.prototype.inEdges=function(re,he){var De=this._in[re];if(De){var ue=j.values(De);return he?j.filter(ue,function(xe){return xe.v===he}):ue}},Z.prototype.outEdges=function(re,he){var De=this._out[re];if(De){var ue=j.values(De);return he?j.filter(ue,function(xe){return xe.w===he}):ue}},Z.prototype.nodeEdges=function(re,he){var De=this.inEdges(re,he);if(De)return De.concat(this.outEdges(re,he))};function te(re,he){re[he]?re[he]++:re[he]=1}function Q(re,he){--re[he]||delete re[he]}function de(re,he,De,ue){var xe=""+he,ae=""+De;if(!re&&xe>ae){var ce=xe;xe=ae,ae=ce}return xe+z+ae+z+(j.isUndefined(ue)?R:ue)}function oe(re,he,De,ue){var xe=""+he,ae=""+De;if(!re&&xe>ae){var ce=xe;xe=ae,ae=ce}var fe={v:xe,w:ae};return ue&&(fe.name=ue),fe}function ie(re,he){return de(re,he.v,he.w,he.name)}},58579:function(Ne,L,M){Ne.exports={Graph:M(1053),version:M(82321)}},62485:function(Ne,L,M){var j=M(77163),R=M(1053);Ne.exports={write:q,read:te};function q(Q){var de={options:{directed:Q.isDirected(),multigraph:Q.isMultigraph(),compound:Q.isCompound()},nodes:z(Q),edges:Z(Q)};return j.isUndefined(Q.graph())||(de.value=j.clone(Q.graph())),de}function z(Q){return j.map(Q.nodes(),function(de){var oe=Q.node(de),ie=Q.parent(de),re={v:de};return j.isUndefined(oe)||(re.value=oe),j.isUndefined(ie)||(re.parent=ie),re})}function Z(Q){return j.map(Q.edges(),function(de){var oe=Q.edge(de),ie={v:de.v,w:de.w};return j.isUndefined(de.name)||(ie.name=de.name),j.isUndefined(oe)||(ie.value=oe),ie})}function te(Q){var de=new R(Q.options).setGraph(Q.value);return j.each(Q.nodes,function(oe){de.setNode(oe.v,oe.value),oe.parent&&de.setParent(oe.v,oe.parent)}),j.each(Q.edges,function(oe){de.setEdge({v:oe.v,w:oe.w,name:oe.name},oe.value)}),de}},77163:function(Ne,L,M){var j;try{j=M(96486)}catch{}j||(j=window._),Ne.exports=j},82321:function(Ne){Ne.exports="2.1.4"},70597:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var j=Object.assign||function(Q){for(var de=1;de<arguments.length;de++){var oe=arguments[de];for(var ie in oe)Object.prototype.hasOwnProperty.call(oe,ie)&&(Q[ie]=oe[ie])}return Q},R=M(67294),q=z(R);function z(Q){return Q&&Q.__esModule?Q:{default:Q}}function Z(Q,de){var oe={};for(var ie in Q)de.indexOf(ie)>=0||!Object.prototype.hasOwnProperty.call(Q,ie)||(oe[ie]=Q[ie]);return oe}var te=24;L.default=function(Q){var de=Q.fill,oe=de===void 0?"currentColor":de,ie=Q.width,re=ie===void 0?te:ie,he=Q.height,De=he===void 0?te:he,ue=Q.style,xe=ue===void 0?{}:ue,ae=Z(Q,["fill","width","height","style"]);return q.default.createElement("svg",j({viewBox:"0 0 "+te+" "+te,style:j({fill:oe,width:re,height:De},xe)},ae),q.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},43891:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var j=Object.assign||function(Q){for(var de=1;de<arguments.length;de++){var oe=arguments[de];for(var ie in oe)Object.prototype.hasOwnProperty.call(oe,ie)&&(Q[ie]=oe[ie])}return Q},R=M(67294),q=z(R);function z(Q){return Q&&Q.__esModule?Q:{default:Q}}function Z(Q,de){var oe={};for(var ie in Q)de.indexOf(ie)>=0||!Object.prototype.hasOwnProperty.call(Q,ie)||(oe[ie]=Q[ie]);return oe}var te=24;L.default=function(Q){var de=Q.fill,oe=de===void 0?"currentColor":de,ie=Q.width,re=ie===void 0?te:ie,he=Q.height,De=he===void 0?te:he,ue=Q.style,xe=ue===void 0?{}:ue,ae=Z(Q,["fill","width","height","style"]);return q.default.createElement("svg",j({viewBox:"0 0 "+te+" "+te,style:j({fill:oe,width:re,height:De},xe)},ae),q.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},49469:function(Ne,L){"use strict";var M;M={value:!0};var j;(function(ye){ye.TextureCompressionBC="texture-compression-bc"})(j=L.UX||(L.UX={}));var R;(function(ye){ye.ClampToEdge="clamp-to-edge",ye.Repeat="repeat",ye.MirrorRepeat="mirror-repeat"})(R=L.OB||(L.OB={}));var q;(function(ye){ye.UniformBuffer="uniform-buffer",ye.StorageBuffer="storage-buffer",ye.ReadonlyStorageBuffer="readonly-storage-buffer",ye.Sampler="sampler",ye.ComparisonSampler="comparison-sampler",ye.SampledTexture="sampled-texture",ye.ReadonlyStorageTexture="readonly-storage-texture",ye.WriteonlyStorageTexture="writeonly-storage-texture"})(q=L.$l||(L.$l={}));var z;(function(ye){ye.Zero="zero",ye.One="one",ye.SrcColor="src-color",ye.OneMinusSrcColor="one-minus-src-color",ye.SrcAlpha="src-alpha",ye.OneMinusSrcAlpha="one-minus-src-alpha",ye.DstColor="dst-color",ye.OneMinusDstColor="one-minus-dst-color",ye.DstAlpha="dst-alpha",ye.OneMinusDstAlpha="one-minus-dst-alpha",ye.SrcAlphaSaturated="src-alpha-saturated",ye.BlendColor="blend-color",ye.OneMinusBlendColor="one-minus-blend-color"})(z=L.zi||(L.zi={}));var Z;(function(ye){ye.Add="add",ye.Subtract="subtract",ye.ReverseSubtract="reverse-subtract",ye.Min="min",ye.Max="max"})(Z=L.db||(L.db={}));var te;(function(ye){ye.Never="never",ye.Less="less",ye.Equal="equal",ye.LessEqual="less-equal",ye.Greater="greater",ye.NotEqual="not-equal",ye.GreaterEqual="greater-equal",ye.Always="always"})(te=L.wb||(L.wb={}));var Q;(function(ye){ye.None="none",ye.Front="front",ye.Back="back"})(Q=L.Wf||(L.Wf={}));var de;(function(ye){ye.Nearest="nearest",ye.Linear="linear"})(de=L.X9||(L.X9={}));var oe;(function(ye){ye.CCW="ccw",ye.CW="cw"})(oe=L.zX||(L.zX={}));var ie;(function(ye){ye.Uint16="uint16",ye.Uint32="uint32"})(ie=L.iD||(L.iD={}));var re;(function(ye){ye.Vertex="vertex",ye.Instance="instance"})(re=L.V||(L.V={}));var he;(function(ye){ye.Load="load"})(he=L.Ws||(L.Ws={}));var De;(function(ye){ye.PointList="point-list",ye.LineList="line-list",ye.LineStrip="line-strip",ye.TriangleList="triangle-list",ye.TriangleStrip="triangle-strip"})(De=L.YV||(L.YV={}));var ue;(function(ye){ye.Keep="keep",ye.Zero="zero",ye.Replace="replace",ye.Invert="invert",ye.IncrementClamp="increment-clamp",ye.DecrementClamp="decrement-clamp",ye.IncrementWrap="increment-wrap",ye.DecrementWrap="decrement-wrap"})(ue=L.xS||(L.xS={}));var xe;(function(ye){ye.Store="store",ye.Clear="clear"})(xe=L.EG||(L.EG={}));var ae;(function(ye){ye.E1d="1d",ye.E2d="2d",ye.E3d="3d"})(ae=L.kd||(L.kd={}));var ce;(function(ye){ye.R8Unorm="r8unorm",ye.R8Snorm="r8snorm",ye.R8Uint="r8uint",ye.R8Sint="r8sint",ye.R16Uint="r16uint",ye.R16Sint="r16sint",ye.R16Float="r16float",ye.RG8Unorm="rg8unorm",ye.RG8Snorm="rg8snorm",ye.RG8Uint="rg8uint",ye.RG8Sint="rg8sint",ye.R32Uint="r32uint",ye.R32Sint="r32sint",ye.R32Float="r32float",ye.RG16Uint="rg16uint",ye.RG16Sint="rg16sint",ye.RG16Float="rg16float",ye.RGBA8Unorm="rgba8unorm",ye.RGBA8UnormSRGB="rgba8unorm-srgb",ye.RGBA8Snorm="rgba8snorm",ye.RGBA8Uint="rgba8uint",ye.RGBA8Sint="rgba8sint",ye.BGRA8Unorm="bgra8unorm",ye.BGRA8UnormSRGB="bgra8unorm-srgb",ye.RGB10A2Unorm="rgb10a2unorm",ye.RG11B10Float="rg11b10float",ye.RG32Uint="rg32uint",ye.RG32Sint="rg32sint",ye.RG32Float="rg32float",ye.RGBA16Uint="rgba16uint",ye.RGBA16Sint="rgba16sint",ye.RGBA16Float="rgba16float",ye.RGBA32Uint="rgba32uint",ye.RGBA32Sint="rgba32sint",ye.RGBA32Float="rgba32float",ye.Depth32Float="depth32float",ye.Depth24Plus="depth24plus",ye.Depth24PlusStencil8="depth24plus-stencil8"})(ce=L.EV||(L.EV={}));var fe;(function(ye){ye.Float="float",ye.Sint="sint",ye.Uint="uint"})(fe=L.Ek||(L.Ek={}));var Ee;(function(ye){ye.E1d="1d",ye.E2d="2d",ye.E2dArray="2d-array",ye.Cube="cube",ye.CubeArray="cube-array",ye.E3d="3d"})(Ee=L.p_||(L.p_={}));var pe;(function(ye){ye.Uchar2="uchar2",ye.Uchar4="uchar4",ye.Char2="char2",ye.Char4="char4",ye.Uchar2Norm="uchar2norm",ye.Uchar4Norm="uchar4norm",ye.Char2Norm="char2norm",ye.Char4Norm="char4norm",ye.Ushort2="ushort2",ye.Ushort4="ushort4",ye.Short2="short2",ye.Short4="short4",ye.Ushort2Norm="ushort2norm",ye.Ushort4Norm="ushort4norm",ye.Short2Norm="short2norm",ye.Short4Norm="short4norm",ye.Half2="half2",ye.Half4="half4",ye.Float="float",ye.Float2="float2",ye.Float3="float3",ye.Float4="float4",ye.Uint="uint",ye.Uint2="uint2",ye.Uint3="uint3",ye.Uint4="uint4",ye.Int="int",ye.Int2="int2",ye.Int3="int3",ye.Int4="int4"})(pe=L.gB||(L.gB={}));var Ae;(function(ye){ye.All="all",ye.StencilOnly="stencil-only",ye.DepthOnly="depth-only"})(Ae=L.H7||(L.H7={}));var nt;(function(ye){ye.Error="error",ye.Warning="warning",ye.Info="info"})(nt=L.mj||(L.mj={}));var G;(function(ye){ye.Occlusion="occlusion"})(G=L.xL||(L.xL={}));var Fe;(function(ye){ye[ye.MapRead=1]="MapRead",ye[ye.MapWrite=2]="MapWrite",ye[ye.CopySrc=4]="CopySrc",ye[ye.CopyDst=8]="CopyDst",ye[ye.Index=16]="Index",ye[ye.Vertex=32]="Vertex",ye[ye.Uniform=64]="Uniform",ye[ye.Storage=128]="Storage",ye[ye.Indirect=256]="Indirect",ye[ye.QueryResolve=512]="QueryResolve"})(Fe=L.FB||(L.FB={}));var He;(function(ye){ye[ye.Red=1]="Red",ye[ye.Green=2]="Green",ye[ye.Blue=4]="Blue",ye[ye.Alpha=8]="Alpha",ye[ye.All=15]="All"})(He=L.Yw||(L.Yw={}));var et;(function(ye){ye[ye.Vertex=1]="Vertex",ye[ye.Fragment=2]="Fragment",ye[ye.Compute=4]="Compute"})(et=L.$X||(L.$X={}));var Bt;(function(ye){ye[ye.CopySrc=1]="CopySrc",ye[ye.CopyDst=2]="CopyDst",ye[ye.Sampled=4]="Sampled",ye[ye.Storage=8]="Storage",ye[ye.OutputAttachment=16]="OutputAttachment"})(Bt=L.v2||(L.v2={}));var Mn;(function(ye){ye[ye.Read=1]="Read",ye[ye.Write=2]="Write"})(Mn=L.gc||(L.gc={}))},89550:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=j[0]+R[0],M[1]=j[1]+R[1],M}},62189:function(Ne){Ne.exports=L;function L(M,j){return M[0]=Math.ceil(j[0]),M[1]=Math.ceil(j[1]),M}},76057:function(Ne){Ne.exports=L;function L(M){var j=new Float32Array(2);return j[0]=M[0],j[1]=M[1],j}},3492:function(Ne){Ne.exports=L;function L(M,j){return M[0]=j[0],M[1]=j[1],M}},61589:function(Ne){Ne.exports=L;function L(){var M=new Float32Array(2);return M[0]=0,M[1]=0,M}},56439:function(Ne){Ne.exports=L;function L(M,j,R){var q=j[0]*R[1]-j[1]*R[0];return M[0]=M[1]=0,M[2]=q,M}},80278:function(Ne,L,M){Ne.exports=M(27953)},27953:function(Ne){Ne.exports=L;function L(M,j){var R=j[0]-M[0],q=j[1]-M[1];return Math.sqrt(R*R+q*q)}},49973:function(Ne,L,M){Ne.exports=M(6773)},6773:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=j[0]/R[0],M[1]=j[1]/R[1],M}},56601:function(Ne){Ne.exports=L;function L(M,j){return M[0]*j[0]+M[1]*j[1]}},89936:function(Ne){Ne.exports=1e-6},51232:function(Ne,L,M){Ne.exports=R;var j=M(89936);function R(q,z){var Z=q[0],te=q[1],Q=z[0],de=z[1];return Math.abs(Z-Q)<=j*Math.max(1,Math.abs(Z),Math.abs(Q))&&Math.abs(te-de)<=j*Math.max(1,Math.abs(te),Math.abs(de))}},39546:function(Ne){Ne.exports=L;function L(M,j){return M[0]===j[0]&&M[1]===j[1]}},67744:function(Ne){Ne.exports=L;function L(M,j){return M[0]=Math.floor(j[0]),M[1]=Math.floor(j[1]),M}},49002:function(Ne,L,M){Ne.exports=R;var j=M(61589)();function R(q,z,Z,te,Q,de){var oe,ie;for(z||(z=2),Z||(Z=0),te?ie=Math.min(te*z+Z,q.length):ie=q.length,oe=Z;oe<ie;oe+=z)j[0]=q[oe],j[1]=q[oe+1],Q(j,j,de),q[oe]=j[0],q[oe+1]=j[1];return q}},69878:function(Ne){Ne.exports=L;function L(M,j){var R=new Float32Array(2);return R[0]=M,R[1]=j,R}},32644:function(Ne,L,M){Ne.exports={EPSILON:M(89936),create:M(61589),clone:M(76057),fromValues:M(69878),copy:M(3492),set:M(68854),equals:M(51232),exactEquals:M(39546),add:M(89550),subtract:M(43650),sub:M(45222),multiply:M(79920),mul:M(23113),divide:M(6773),div:M(49973),inverse:M(83793),min:M(20676),max:M(97899),rotate:M(48677),floor:M(67744),ceil:M(62189),round:M(57074),scale:M(47838),scaleAndAdd:M(21066),distance:M(27953),dist:M(80278),squaredDistance:M(14290),sqrDist:M(79569),length:M(37781),len:M(8123),squaredLength:M(26791),sqrLen:M(1791),negate:M(90549),normalize:M(36820),dot:M(56601),cross:M(56439),lerp:M(20577),random:M(85773),transformMat2:M(904),transformMat2d:M(60736),transformMat3:M(60221),transformMat4:M(37674),forEach:M(49002),limit:M(82418)}},83793:function(Ne){Ne.exports=L;function L(M,j){return M[0]=1/j[0],M[1]=1/j[1],M}},8123:function(Ne,L,M){Ne.exports=M(37781)},37781:function(Ne){Ne.exports=L;function L(M){var j=M[0],R=M[1];return Math.sqrt(j*j+R*R)}},20577:function(Ne){Ne.exports=L;function L(M,j,R,q){var z=j[0],Z=j[1];return M[0]=z+q*(R[0]-z),M[1]=Z+q*(R[1]-Z),M}},82418:function(Ne){Ne.exports=L;function L(M,j,R){var q=j[0]*j[0]+j[1]*j[1];if(q>R*R){var z=Math.sqrt(q);M[0]=j[0]/z*R,M[1]=j[1]/z*R}else M[0]=j[0],M[1]=j[1];return M}},97899:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=Math.max(j[0],R[0]),M[1]=Math.max(j[1],R[1]),M}},20676:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=Math.min(j[0],R[0]),M[1]=Math.min(j[1],R[1]),M}},23113:function(Ne,L,M){Ne.exports=M(79920)},79920:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=j[0]*R[0],M[1]=j[1]*R[1],M}},90549:function(Ne){Ne.exports=L;function L(M,j){return M[0]=-j[0],M[1]=-j[1],M}},36820:function(Ne){Ne.exports=L;function L(M,j){var R=j[0],q=j[1],z=R*R+q*q;return z>0&&(z=1/Math.sqrt(z),M[0]=j[0]*z,M[1]=j[1]*z),M}},85773:function(Ne){Ne.exports=L;function L(M,j){j=j||1;var R=Math.random()*2*Math.PI;return M[0]=Math.cos(R)*j,M[1]=Math.sin(R)*j,M}},48677:function(Ne){Ne.exports=L;function L(M,j,R){var q=Math.cos(R),z=Math.sin(R),Z=j[0],te=j[1];return M[0]=Z*q-te*z,M[1]=Z*z+te*q,M}},57074:function(Ne){Ne.exports=L;function L(M,j){return M[0]=Math.round(j[0]),M[1]=Math.round(j[1]),M}},47838:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=j[0]*R,M[1]=j[1]*R,M}},21066:function(Ne){Ne.exports=L;function L(M,j,R,q){return M[0]=j[0]+R[0]*q,M[1]=j[1]+R[1]*q,M}},68854:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=j,M[1]=R,M}},79569:function(Ne,L,M){Ne.exports=M(14290)},1791:function(Ne,L,M){Ne.exports=M(26791)},14290:function(Ne){Ne.exports=L;function L(M,j){var R=j[0]-M[0],q=j[1]-M[1];return R*R+q*q}},26791:function(Ne){Ne.exports=L;function L(M){var j=M[0],R=M[1];return j*j+R*R}},45222:function(Ne,L,M){Ne.exports=M(43650)},43650:function(Ne){Ne.exports=L;function L(M,j,R){return M[0]=j[0]-R[0],M[1]=j[1]-R[1],M}},904:function(Ne){Ne.exports=L;function L(M,j,R){var q=j[0],z=j[1];return M[0]=R[0]*q+R[2]*z,M[1]=R[1]*q+R[3]*z,M}},60736:function(Ne){Ne.exports=L;function L(M,j,R){var q=j[0],z=j[1];return M[0]=R[0]*q+R[2]*z+R[4],M[1]=R[1]*q+R[3]*z+R[5],M}},60221:function(Ne){Ne.exports=L;function L(M,j,R){var q=j[0],z=j[1];return M[0]=R[0]*q+R[3]*z+R[6],M[1]=R[1]*q+R[4]*z+R[7],M}},37674:function(Ne){Ne.exports=L;function L(M,j,R){var q=j[0],z=j[1];return M[0]=R[0]*q+R[4]*z+R[12],M[1]=R[1]*q+R[5]*z+R[13],M}},7375:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M=Symbol.for("INJECTION");function j(te,Q,de,oe){function ie(){return oe&&!Reflect.hasMetadata(M,this,Q)&&Reflect.defineMetadata(M,de(),this,Q),Reflect.hasMetadata(M,this,Q)?Reflect.getMetadata(M,this,Q):de()}function re(he){Reflect.defineMetadata(M,he,this,Q)}Object.defineProperty(te,Q,{configurable:!0,enumerable:!0,get:ie,set:re})}function R(te,Q){return function(de){return function(oe,ie){var re=function(){return te.get(de)};j(oe,ie,re,Q)}}}L.makePropertyInjectDecorator=R;function q(te,Q){return function(de,oe){return function(ie,re){var he=function(){return te.getNamed(de,oe)};j(ie,re,he,Q)}}}L.makePropertyInjectNamedDecorator=q;function z(te,Q){return function(de,oe,ie){return function(re,he){var De=function(){return te.getTagged(de,oe,ie)};j(re,he,De,Q)}}}L.makePropertyInjectTaggedDecorator=z;function Z(te,Q){return function(de){return function(oe,ie){var re=function(){return te.getAll(de)};j(oe,ie,re,Q)}}}L.makePropertyMultiInjectDecorator=Z},84879:function(Ne,L,M){"use strict";var j;j={value:!0};var R=M(7375);function q(z,Z){Z===void 0&&(Z=!0);var te=R.makePropertyInjectDecorator(z,Z),Q=R.makePropertyInjectNamedDecorator(z,Z),de=R.makePropertyInjectTaggedDecorator(z,Z),oe=R.makePropertyMultiInjectDecorator(z,Z);return{lazyInject:te,lazyInjectNamed:Q,lazyInjectTagged:de,lazyMultiInject:oe}}L.Z=q},99934:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.tagProperty=L.tagParameter=L.decorate=void 0;var j=M(16674),R=M(6867);function q(oe,ie,re,he){var De=R.TAGGED;Z(De,oe,ie,he,re)}L.tagParameter=q;function z(oe,ie,re){var he=R.TAGGED_PROP;Z(he,oe.constructor,ie,re)}L.tagProperty=z;function Z(oe,ie,re,he,De){var ue={},xe=typeof De=="number",ae=De!==void 0&&xe?De.toString():re;if(xe&&re!==void 0)throw new Error(j.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(oe,ie)&&(ue=Reflect.getMetadata(oe,ie));var ce=ue[ae];if(!Array.isArray(ce))ce=[];else for(var fe=0,Ee=ce;fe<Ee.length;fe++){var pe=Ee[fe];if(pe.key===he.key)throw new Error(j.DUPLICATED_METADATA+" "+pe.key.toString())}ce.push(he),ue[ae]=ce,Reflect.defineMetadata(oe,ue,ie)}function te(oe,ie){Reflect.decorate(oe,ie)}function Q(oe,ie){return function(re,he){ie(re,he,oe)}}function de(oe,ie,re){typeof re=="number"?te([Q(re,oe)],ie):typeof re=="string"?Reflect.decorate([oe],ie,re):te([oe],ie)}L.decorate=de},5744:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.inject=L.LazyServiceIdentifer=void 0;var j=M(16674),R=M(6867),q=M(47738),z=M(99934),Z=function(){function Q(de){this._cb=de}return Q.prototype.unwrap=function(){return this._cb()},Q}();L.LazyServiceIdentifer=Z;function te(Q){return function(de,oe,ie){if(Q===void 0)throw new Error(j.UNDEFINED_INJECT_ANNOTATION(de.name));var re=new q.Metadata(R.INJECT_TAG,Q);typeof ie=="number"?z.tagParameter(de,oe,ie,re):z.tagProperty(de,oe,re)}}L.inject=te},64315:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.injectable=void 0;var j=M(16674),R=M(6867);function q(){return function(z){if(Reflect.hasOwnMetadata(R.PARAM_TYPES,z))throw new Error(j.DUPLICATED_INJECTABLE_DECORATOR);var Z=Reflect.getMetadata(R.DESIGN_PARAM_TYPES,z)||[];return Reflect.defineMetadata(R.PARAM_TYPES,Z,z),z}}L.injectable=q},71693:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.multiInject=void 0;var j=M(6867),R=M(47738),q=M(99934);function z(Z){return function(te,Q,de){var oe=new R.Metadata(j.MULTI_INJECT_TAG,Z);typeof de=="number"?q.tagParameter(te,Q,de,oe):q.tagProperty(te,Q,oe)}}L.multiInject=z},38085:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.named=void 0;var j=M(6867),R=M(47738),q=M(99934);function z(Z){return function(te,Q,de){var oe=new R.Metadata(j.NAMED_TAG,Z);typeof de=="number"?q.tagParameter(te,Q,de,oe):q.tagProperty(te,Q,oe)}}L.named=z},6515:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.optional=void 0;var j=M(6867),R=M(47738),q=M(99934);function z(){return function(Z,te,Q){var de=new R.Metadata(j.OPTIONAL_TAG,!0);typeof Q=="number"?q.tagParameter(Z,te,Q,de):q.tagProperty(Z,te,de)}}L.optional=z},7014:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.postConstruct=void 0;var j=M(16674),R=M(6867),q=M(47738);function z(){return function(Z,te,Q){var de=new q.Metadata(R.POST_CONSTRUCT,te);if(Reflect.hasOwnMetadata(R.POST_CONSTRUCT,Z.constructor))throw new Error(j.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(R.POST_CONSTRUCT,de,Z.constructor)}}L.postConstruct=z},32052:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.tagged=void 0;var j=M(47738),R=M(99934);function q(z,Z){return function(te,Q,de){var oe=new j.Metadata(z,Z);typeof de=="number"?R.tagParameter(te,Q,de,oe):R.tagProperty(te,Q,oe)}}L.tagged=q},55638:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.targetName=void 0;var j=M(6867),R=M(47738),q=M(99934);function z(Z){return function(te,Q,de){var oe=new R.Metadata(j.NAME_TAG,Z);q.tagParameter(te,Q,de,oe)}}L.targetName=z},86757:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.unmanaged=void 0;var j=M(6867),R=M(47738),q=M(99934);function z(){return function(Z,te,Q){var de=new R.Metadata(j.UNMANAGED_TAG,!0);q.tagParameter(Z,te,Q,de)}}L.unmanaged=z},44290:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Binding=void 0;var j=M(28421),R=M(37791),q=function(){function z(Z,te){this.id=R.id(),this.activated=!1,this.serviceIdentifier=Z,this.scope=te,this.type=j.BindingTypeEnum.Invalid,this.constraint=function(Q){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return z.prototype.clone=function(){var Z=new z(this.serviceIdentifier,this.scope);return Z.activated=Z.scope===j.BindingScopeEnum.Singleton?this.activated:!1,Z.implementationType=this.implementationType,Z.dynamicValue=this.dynamicValue,Z.scope=this.scope,Z.type=this.type,Z.factory=this.factory,Z.provider=this.provider,Z.constraint=this.constraint,Z.onActivation=this.onActivation,Z.cache=this.cache,Z},z}();L.Binding=q},23184:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingCount=void 0;var M={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};L.BindingCount=M},16674:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.STACK_OVERFLOW=L.CIRCULAR_DEPENDENCY_IN_FACTORY=L.POST_CONSTRUCT_ERROR=L.MULTIPLE_POST_CONSTRUCT_METHODS=L.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=L.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=L.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=L.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=L.ARGUMENTS_LENGTH_MISMATCH=L.INVALID_DECORATOR_OPERATION=L.INVALID_TO_SELF_VALUE=L.INVALID_FUNCTION_BINDING=L.INVALID_MIDDLEWARE_RETURN=L.NO_MORE_SNAPSHOTS_AVAILABLE=L.INVALID_BINDING_TYPE=L.NOT_IMPLEMENTED=L.CIRCULAR_DEPENDENCY=L.UNDEFINED_INJECT_ANNOTATION=L.MISSING_INJECT_ANNOTATION=L.MISSING_INJECTABLE_ANNOTATION=L.NOT_REGISTERED=L.CANNOT_UNBIND=L.AMBIGUOUS_MATCH=L.KEY_NOT_FOUND=L.NULL_ARGUMENT=L.DUPLICATED_METADATA=L.DUPLICATED_INJECTABLE_DECORATOR=void 0,L.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",L.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",L.NULL_ARGUMENT="NULL argument",L.KEY_NOT_FOUND="Key Not Found",L.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",L.CANNOT_UNBIND="Could not unbind serviceIdentifier:",L.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",L.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",L.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var M=function(z){return"@inject called with undefined this could mean that the class "+z+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};L.UNDEFINED_INJECT_ANNOTATION=M,L.CIRCULAR_DEPENDENCY="Circular dependency found:",L.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",L.INVALID_BINDING_TYPE="Invalid binding type:",L.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",L.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",L.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",L.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",L.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var j=function(){for(var z=[],Z=0;Z<arguments.length;Z++)z[Z]=arguments[Z];return"The number of constructor arguments in the derived class "+(z[0]+" must be >= than the number of constructor arguments of its base class.")};L.ARGUMENTS_LENGTH_MISMATCH=j,L.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",L.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",L.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",L.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",L.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var R=function(){for(var z=[],Z=0;Z<arguments.length;Z++)z[Z]=arguments[Z];return"@postConstruct error in class "+z[0]+": "+z[1]};L.POST_CONSTRUCT_ERROR=R;var q=function(){for(var z=[],Z=0;Z<arguments.length;Z++)z[Z]=arguments[Z];return"It looks like there is a circular dependency "+("in one of the '"+z[0]+"' bindings. Please investigate bindings with")+("service identifier '"+z[1]+"'.")};L.CIRCULAR_DEPENDENCY_IN_FACTORY=q,L.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.TargetTypeEnum=L.BindingTypeEnum=L.BindingScopeEnum=void 0;var M={Request:"Request",Singleton:"Singleton",Transient:"Transient"};L.BindingScopeEnum=M;var j={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};L.BindingTypeEnum=j;var R={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};L.TargetTypeEnum=R},6867:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.NON_CUSTOM_TAG_KEYS=L.POST_CONSTRUCT=L.DESIGN_PARAM_TYPES=L.PARAM_TYPES=L.TAGGED_PROP=L.TAGGED=L.MULTI_INJECT_TAG=L.INJECT_TAG=L.OPTIONAL_TAG=L.UNMANAGED_TAG=L.NAME_TAG=L.NAMED_TAG=void 0,L.NAMED_TAG="named",L.NAME_TAG="name",L.UNMANAGED_TAG="unmanaged",L.OPTIONAL_TAG="optional",L.INJECT_TAG="inject",L.MULTI_INJECT_TAG="multi_inject",L.TAGGED="inversify:tagged",L.TAGGED_PROP="inversify:tagged_props",L.PARAM_TYPES="inversify:paramtypes",L.DESIGN_PARAM_TYPES="design:paramtypes",L.POST_CONSTRUCT="post_construct";function M(){return[L.INJECT_TAG,L.MULTI_INJECT_TAG,L.NAME_TAG,L.UNMANAGED_TAG,L.NAMED_TAG,L.OPTIONAL_TAG]}L.NON_CUSTOM_TAG_KEYS=M()},51389:function(Ne,L,M){"use strict";var j=this&&this.__awaiter||function(ce,fe,Ee,pe){function Ae(nt){return nt instanceof Ee?nt:new Ee(function(G){G(nt)})}return new(Ee||(Ee=Promise))(function(nt,G){function Fe(Bt){try{et(pe.next(Bt))}catch(Mn){G(Mn)}}function He(Bt){try{et(pe.throw(Bt))}catch(Mn){G(Mn)}}function et(Bt){Bt.done?nt(Bt.value):Ae(Bt.value).then(Fe,He)}et((pe=pe.apply(ce,fe||[])).next())})},R=this&&this.__generator||function(ce,fe){var Ee={label:0,sent:function(){if(nt[0]&1)throw nt[1];return nt[1]},trys:[],ops:[]},pe,Ae,nt,G;return G={next:Fe(0),throw:Fe(1),return:Fe(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function Fe(et){return function(Bt){return He([et,Bt])}}function He(et){if(pe)throw new TypeError("Generator is already executing.");for(;Ee;)try{if(pe=1,Ae&&(nt=et[0]&2?Ae.return:et[0]?Ae.throw||((nt=Ae.return)&&nt.call(Ae),0):Ae.next)&&!(nt=nt.call(Ae,et[1])).done)return nt;switch(Ae=0,nt&&(et=[et[0]&2,nt.value]),et[0]){case 0:case 1:nt=et;break;case 4:return Ee.label++,{value:et[1],done:!1};case 5:Ee.label++,Ae=et[1],et=[0];continue;case 7:et=Ee.ops.pop(),Ee.trys.pop();continue;default:if(nt=Ee.trys,!(nt=nt.length>0&&nt[nt.length-1])&&(et[0]===6||et[0]===2)){Ee=0;continue}if(et[0]===3&&(!nt||et[1]>nt[0]&&et[1]<nt[3])){Ee.label=et[1];break}if(et[0]===6&&Ee.label<nt[1]){Ee.label=nt[1],nt=et;break}if(nt&&Ee.label<nt[2]){Ee.label=nt[2],Ee.ops.push(et);break}nt[2]&&Ee.ops.pop(),Ee.trys.pop();continue}et=fe.call(ce,Ee)}catch(Bt){et=[6,Bt],Ae=0}finally{pe=nt=0}if(et[0]&5)throw et[1];return{value:et[0]?et[1]:void 0,done:!0}}},q=this&&this.__spreadArray||function(ce,fe){for(var Ee=0,pe=fe.length,Ae=ce.length;Ee<pe;Ee++,Ae++)ce[Ae]=fe[Ee];return ce};Object.defineProperty(L,"__esModule",{value:!0}),L.Container=void 0;var z=M(44290),Z=M(16674),te=M(28421),Q=M(6867),de=M(51377),oe=M(86311),ie=M(31927),re=M(51860),he=M(37791),De=M(55800),ue=M(85700),xe=M(80175),ae=function(){function ce(fe){this._appliedMiddleware=[];var Ee=fe||{};if(typeof Ee!="object")throw new Error(""+Z.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(Ee.defaultScope===void 0)Ee.defaultScope=te.BindingScopeEnum.Transient;else if(Ee.defaultScope!==te.BindingScopeEnum.Singleton&&Ee.defaultScope!==te.BindingScopeEnum.Transient&&Ee.defaultScope!==te.BindingScopeEnum.Request)throw new Error(""+Z.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(Ee.autoBindInjectable===void 0)Ee.autoBindInjectable=!1;else if(typeof Ee.autoBindInjectable!="boolean")throw new Error(""+Z.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(Ee.skipBaseClassChecks===void 0)Ee.skipBaseClassChecks=!1;else if(typeof Ee.skipBaseClassChecks!="boolean")throw new Error(""+Z.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:Ee.autoBindInjectable,defaultScope:Ee.defaultScope,skipBaseClassChecks:Ee.skipBaseClassChecks},this.id=he.id(),this._bindingDictionary=new xe.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new de.MetadataReader}return ce.merge=function(fe,Ee){for(var pe=[],Ae=2;Ae<arguments.length;Ae++)pe[Ae-2]=arguments[Ae];var nt=new ce,G=q([fe,Ee],pe).map(function(et){return oe.getBindingDictionary(et)}),Fe=oe.getBindingDictionary(nt);function He(et,Bt){et.traverse(function(Mn,ye){ye.forEach(function(Ct){Bt.add(Ct.serviceIdentifier,Ct.clone())})})}return G.forEach(function(et){He(et,Fe)}),nt},ce.prototype.load=function(){for(var fe=[],Ee=0;Ee<arguments.length;Ee++)fe[Ee]=arguments[Ee];for(var pe=this._getContainerModuleHelpersFactory(),Ae=0,nt=fe;Ae<nt.length;Ae++){var G=nt[Ae],Fe=pe(G.id);G.registry(Fe.bindFunction,Fe.unbindFunction,Fe.isboundFunction,Fe.rebindFunction)}},ce.prototype.loadAsync=function(){for(var fe=[],Ee=0;Ee<arguments.length;Ee++)fe[Ee]=arguments[Ee];return j(this,void 0,void 0,function(){var pe,Ae,nt,G,Fe;return R(this,function(He){switch(He.label){case 0:pe=this._getContainerModuleHelpersFactory(),Ae=0,nt=fe,He.label=1;case 1:return Ae<nt.length?(G=nt[Ae],Fe=pe(G.id),[4,G.registry(Fe.bindFunction,Fe.unbindFunction,Fe.isboundFunction,Fe.rebindFunction)]):[3,4];case 2:He.sent(),He.label=3;case 3:return Ae++,[3,1];case 4:return[2]}})})},ce.prototype.unload=function(){for(var fe=this,Ee=[],pe=0;pe<arguments.length;pe++)Ee[pe]=arguments[pe];var Ae=function(nt){return function(G){return G.moduleId===nt}};Ee.forEach(function(nt){var G=Ae(nt.id);fe._bindingDictionary.removeByCondition(G)})},ce.prototype.bind=function(fe){var Ee=this.options.defaultScope||te.BindingScopeEnum.Transient,pe=new z.Binding(fe,Ee);return this._bindingDictionary.add(fe,pe),new re.BindingToSyntax(pe)},ce.prototype.rebind=function(fe){return this.unbind(fe),this.bind(fe)},ce.prototype.unbind=function(fe){try{this._bindingDictionary.remove(fe)}catch{throw new Error(Z.CANNOT_UNBIND+" "+De.getServiceIdentifierAsString(fe))}},ce.prototype.unbindAll=function(){this._bindingDictionary=new xe.Lookup},ce.prototype.isBound=function(fe){var Ee=this._bindingDictionary.hasKey(fe);return!Ee&&this.parent&&(Ee=this.parent.isBound(fe)),Ee},ce.prototype.isBoundNamed=function(fe,Ee){return this.isBoundTagged(fe,Q.NAMED_TAG,Ee)},ce.prototype.isBoundTagged=function(fe,Ee,pe){var Ae=!1;if(this._bindingDictionary.hasKey(fe)){var nt=this._bindingDictionary.get(fe),G=oe.createMockRequest(this,fe,Ee,pe);Ae=nt.some(function(Fe){return Fe.constraint(G)})}return!Ae&&this.parent&&(Ae=this.parent.isBoundTagged(fe,Ee,pe)),Ae},ce.prototype.snapshot=function(){this._snapshots.push(ue.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},ce.prototype.restore=function(){var fe=this._snapshots.pop();if(fe===void 0)throw new Error(Z.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=fe.bindings,this._middleware=fe.middleware},ce.prototype.createChild=function(fe){var Ee=new ce(fe||this.options);return Ee.parent=this,Ee},ce.prototype.applyMiddleware=function(){for(var fe=[],Ee=0;Ee<arguments.length;Ee++)fe[Ee]=arguments[Ee];this._appliedMiddleware=this._appliedMiddleware.concat(fe);var pe=this._middleware?this._middleware:this._planAndResolve();this._middleware=fe.reduce(function(Ae,nt){return nt(Ae)},pe)},ce.prototype.applyCustomMetadataReader=function(fe){this._metadataReader=fe},ce.prototype.get=function(fe){return this._get(!1,!1,te.TargetTypeEnum.Variable,fe)},ce.prototype.getTagged=function(fe,Ee,pe){return this._get(!1,!1,te.TargetTypeEnum.Variable,fe,Ee,pe)},ce.prototype.getNamed=function(fe,Ee){return this.getTagged(fe,Q.NAMED_TAG,Ee)},ce.prototype.getAll=function(fe){return this._get(!0,!0,te.TargetTypeEnum.Variable,fe)},ce.prototype.getAllTagged=function(fe,Ee,pe){return this._get(!1,!0,te.TargetTypeEnum.Variable,fe,Ee,pe)},ce.prototype.getAllNamed=function(fe,Ee){return this.getAllTagged(fe,Q.NAMED_TAG,Ee)},ce.prototype.resolve=function(fe){var Ee=this.createChild();return Ee.bind(fe).toSelf(),this._appliedMiddleware.forEach(function(pe){Ee.applyMiddleware(pe)}),Ee.get(fe)},ce.prototype._getContainerModuleHelpersFactory=function(){var fe=this,Ee=function(Fe,He){Fe._binding.moduleId=He},pe=function(Fe){return function(He){var et=fe.bind.bind(fe),Bt=et(He);return Ee(Bt,Fe),Bt}},Ae=function(Fe){return function(He){var et=fe.unbind.bind(fe);et(He)}},nt=function(Fe){return function(He){var et=fe.isBound.bind(fe);return et(He)}},G=function(Fe){return function(He){var et=fe.rebind.bind(fe),Bt=et(He);return Ee(Bt,Fe),Bt}};return function(Fe){return{bindFunction:pe(Fe),isboundFunction:nt(Fe),rebindFunction:G(Fe),unbindFunction:Ae(Fe)}}},ce.prototype._get=function(fe,Ee,pe,Ae,nt,G){var Fe=null,He={avoidConstraints:fe,contextInterceptor:function(et){return et},isMultiInject:Ee,key:nt,serviceIdentifier:Ae,targetType:pe,value:G};if(this._middleware){if(Fe=this._middleware(He),Fe==null)throw new Error(Z.INVALID_MIDDLEWARE_RETURN)}else Fe=this._planAndResolve()(He);return Fe},ce.prototype._planAndResolve=function(){var fe=this;return function(Ee){var pe=oe.plan(fe._metadataReader,fe,Ee.isMultiInject,Ee.targetType,Ee.serviceIdentifier,Ee.key,Ee.value,Ee.avoidConstraints);pe=Ee.contextInterceptor(pe);var Ae=ie.resolve(pe);return Ae}},ce}();L.Container=ae},33244:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AsyncContainerModule=L.ContainerModule=void 0;var j=M(37791),R=function(){function z(Z){this.id=j.id(),this.registry=Z}return z}();L.ContainerModule=R;var q=function(){function z(Z){this.id=j.id(),this.registry=Z}return z}();L.AsyncContainerModule=q},85700:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ContainerSnapshot=void 0;var M=function(){function j(){}return j.of=function(R,q){var z=new j;return z.bindings=R,z.middleware=q,z},j}();L.ContainerSnapshot=M},80175:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Lookup=void 0;var j=M(16674),R=function(){function q(){this._map=new Map}return q.prototype.getMap=function(){return this._map},q.prototype.add=function(z,Z){if(z==null)throw new Error(j.NULL_ARGUMENT);if(Z==null)throw new Error(j.NULL_ARGUMENT);var te=this._map.get(z);te!==void 0?(te.push(Z),this._map.set(z,te)):this._map.set(z,[Z])},q.prototype.get=function(z){if(z==null)throw new Error(j.NULL_ARGUMENT);var Z=this._map.get(z);if(Z!==void 0)return Z;throw new Error(j.KEY_NOT_FOUND)},q.prototype.remove=function(z){if(z==null)throw new Error(j.NULL_ARGUMENT);if(!this._map.delete(z))throw new Error(j.KEY_NOT_FOUND)},q.prototype.removeByCondition=function(z){var Z=this;this._map.forEach(function(te,Q){var de=te.filter(function(oe){return!z(oe)});de.length>0?Z._map.set(Q,de):Z._map.delete(Q)})},q.prototype.hasKey=function(z){if(z==null)throw new Error(j.NULL_ARGUMENT);return this._map.has(z)},q.prototype.clone=function(){var z=new q;return this._map.forEach(function(Z,te){Z.forEach(function(Q){return z.add(te,Q.clone())})}),z},q.prototype.traverse=function(z){this._map.forEach(function(Z,te){z(te,Z)})},q}();L.Lookup=R},86700:function(Ne,L,M){"use strict";var j;j={value:!0},j=j=j=j=j=j=L.GW=j=j=L.zY=j=j=L.NT=L.jt=j=L.f3=L.t6=j=L.b2=j=j=j=j=j=L.W2=j=void 0;var R=M(6867);j=R;var q=M(51389);Object.defineProperty(L,"W2",{enumerable:!0,get:function(){return q.Container}});var z=M(28421);j={enumerable:!0,get:function(){return z.BindingScopeEnum}},j={enumerable:!0,get:function(){return z.BindingTypeEnum}},j={enumerable:!0,get:function(){return z.TargetTypeEnum}};var Z=M(33244);j={enumerable:!0,get:function(){return Z.AsyncContainerModule}},j={enumerable:!0,get:function(){return Z.ContainerModule}};var te=M(64315);Object.defineProperty(L,"b2",{enumerable:!0,get:function(){return te.injectable}});var Q=M(32052);j={enumerable:!0,get:function(){return Q.tagged}};var de=M(38085);Object.defineProperty(L,"t6",{enumerable:!0,get:function(){return de.named}});var oe=M(5744);Object.defineProperty(L,"f3",{enumerable:!0,get:function(){return oe.inject}}),j={enumerable:!0,get:function(){return oe.LazyServiceIdentifer}};var ie=M(6515);Object.defineProperty(L,"jt",{enumerable:!0,get:function(){return ie.optional}});var re=M(86757);Object.defineProperty(L,"NT",{enumerable:!0,get:function(){return re.unmanaged}});var he=M(71693);j={enumerable:!0,get:function(){return he.multiInject}};var De=M(55638);j={enumerable:!0,get:function(){return De.targetName}};var ue=M(7014);Object.defineProperty(L,"zY",{enumerable:!0,get:function(){return ue.postConstruct}});var xe=M(51377);j={enumerable:!0,get:function(){return xe.MetadataReader}};var ae=M(37791);j={enumerable:!0,get:function(){return ae.id}};var ce=M(99934);Object.defineProperty(L,"GW",{enumerable:!0,get:function(){return ce.decorate}});var fe=M(80758);j={enumerable:!0,get:function(){return fe.traverseAncerstors}},j={enumerable:!0,get:function(){return fe.taggedConstraint}},j={enumerable:!0,get:function(){return fe.namedConstraint}},j={enumerable:!0,get:function(){return fe.typeConstraint}};var Ee=M(55800);j={enumerable:!0,get:function(){return Ee.getServiceIdentifierAsString}};var pe=M(70600);j={enumerable:!0,get:function(){return pe.multiBindToService}}},95228:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Context=void 0;var j=M(37791),R=function(){function q(z){this.id=j.id(),this.container=z}return q.prototype.addPlan=function(z){this.plan=z},q.prototype.setCurrentRequest=function(z){this.currentRequest=z},q}();L.Context=R},47738:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Metadata=void 0;var j=M(6867),R=function(){function q(z,Z){this.key=z,this.value=Z}return q.prototype.toString=function(){return this.key===j.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},q}();L.Metadata=R},51377:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.MetadataReader=void 0;var j=M(6867),R=function(){function q(){}return q.prototype.getConstructorMetadata=function(z){var Z=Reflect.getMetadata(j.PARAM_TYPES,z),te=Reflect.getMetadata(j.TAGGED,z);return{compilerGeneratedMetadata:Z,userGeneratedMetadata:te||{}}},q.prototype.getPropertiesMetadata=function(z){var Z=Reflect.getMetadata(j.TAGGED_PROP,z)||[];return Z},q}();L.MetadataReader=R},55314:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Plan=void 0;var M=function(){function j(R,q){this.parentContext=R,this.rootRequest=q}return j}();L.Plan=M},86311:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.getBindingDictionary=L.createMockRequest=L.plan=void 0;var j=M(23184),R=M(16674),q=M(28421),z=M(6867),Z=M(85265),te=M(55800),Q=M(95228),de=M(47738),oe=M(55314),ie=M(6e3),re=M(6748),he=M(18924);function De(Ae){return Ae._bindingDictionary}L.getBindingDictionary=De;function ue(Ae,nt,G,Fe,He,et){var Bt=Ae?z.MULTI_INJECT_TAG:z.INJECT_TAG,Mn=new de.Metadata(Bt,G),ye=new he.Target(nt,Fe,G,Mn);if(He!==void 0){var Ct=new de.Metadata(He,et);ye.metadata.push(Ct)}return ye}function xe(Ae,nt,G,Fe,He){var et=fe(G.container,He.serviceIdentifier),Bt=[];return et.length===j.BindingCount.NoBindingsAvailable&&G.container.options.autoBindInjectable&&typeof He.serviceIdentifier=="function"&&Ae.getConstructorMetadata(He.serviceIdentifier).compilerGeneratedMetadata&&(G.container.bind(He.serviceIdentifier).toSelf(),et=fe(G.container,He.serviceIdentifier)),nt?Bt=et:Bt=et.filter(function(Mn){var ye=new re.Request(Mn.serviceIdentifier,G,Fe,Mn,He);return Mn.constraint(ye)}),ae(He.serviceIdentifier,Bt,He,G.container),Bt}function ae(Ae,nt,G,Fe){switch(nt.length){case j.BindingCount.NoBindingsAvailable:if(G.isOptional())return nt;var He=te.getServiceIdentifierAsString(Ae),et=R.NOT_REGISTERED;throw et+=te.listMetadataForTarget(He,G),et+=te.listRegisteredBindingsForServiceIdentifier(Fe,He,fe),new Error(et);case j.BindingCount.OnlyOneBindingAvailable:if(!G.isArray())return nt;case j.BindingCount.MultipleBindingsAvailable:default:if(G.isArray())return nt;var He=te.getServiceIdentifierAsString(Ae),et=R.AMBIGUOUS_MATCH+" "+He;throw et+=te.listRegisteredBindingsForServiceIdentifier(Fe,He,fe),new Error(et)}}function ce(Ae,nt,G,Fe,He,et){var Bt,Mn;if(He===null){Bt=xe(Ae,nt,Fe,null,et),Mn=new re.Request(G,Fe,null,Bt,et);var ye=new oe.Plan(Fe,Mn);Fe.addPlan(ye)}else Bt=xe(Ae,nt,Fe,He,et),Mn=He.addChildRequest(et.serviceIdentifier,Bt,et);Bt.forEach(function(Ct){var Pn=null;if(et.isArray())Pn=Mn.addChildRequest(Ct.serviceIdentifier,Ct,et);else{if(Ct.cache)return;Pn=Mn}if(Ct.type===q.BindingTypeEnum.Instance&&Ct.implementationType!==null){var jt=ie.getDependencies(Ae,Ct.implementationType);if(!Fe.container.options.skipBaseClassChecks){var cn=ie.getBaseClassDependencyCount(Ae,Ct.implementationType);if(jt.length<cn){var qn=R.ARGUMENTS_LENGTH_MISMATCH(ie.getFunctionName(Ct.implementationType));throw new Error(qn)}}jt.forEach(function(on){ce(Ae,!1,on.serviceIdentifier,Fe,Pn,on)})}})}function fe(Ae,nt){var G=[],Fe=De(Ae);return Fe.hasKey(nt)?G=Fe.get(nt):Ae.parent!==null&&(G=fe(Ae.parent,nt)),G}function Ee(Ae,nt,G,Fe,He,et,Bt,Mn){Mn===void 0&&(Mn=!1);var ye=new Q.Context(nt),Ct=ue(G,Fe,He,"",et,Bt);try{return ce(Ae,Mn,He,ye,null,Ct),ye}catch(Pn){throw Z.isStackOverflowExeption(Pn)&&ye.plan&&te.circularDependencyToException(ye.plan.rootRequest),Pn}}L.plan=Ee;function pe(Ae,nt,G,Fe){var He=new he.Target(q.TargetTypeEnum.Variable,"",nt,new de.Metadata(G,Fe)),et=new Q.Context(Ae),Bt=new re.Request(nt,et,null,[],He);return Bt}L.createMockRequest=pe},88460:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.QueryableString=void 0;var M=function(){function j(R){this.str=R}return j.prototype.startsWith=function(R){return this.str.indexOf(R)===0},j.prototype.endsWith=function(R){var q="",z=R.split("").reverse().join("");return q=this.str.split("").reverse().join(""),this.startsWith.call({str:q},z)},j.prototype.contains=function(R){return this.str.indexOf(R)!==-1},j.prototype.equals=function(R){return this.str===R},j.prototype.value=function(){return this.str},j}();L.QueryableString=M},6e3:function(Ne,L,M){"use strict";var j=this&&this.__spreadArray||function(xe,ae){for(var ce=0,fe=ae.length,Ee=xe.length;ce<fe;ce++,Ee++)xe[Ee]=ae[ce];return xe};Object.defineProperty(L,"__esModule",{value:!0}),L.getFunctionName=L.getBaseClassDependencyCount=L.getDependencies=void 0;var R=M(5744),q=M(16674),z=M(28421),Z=M(6867),te=M(55800);Object.defineProperty(L,"getFunctionName",{enumerable:!0,get:function(){return te.getFunctionName}});var Q=M(18924);function de(xe,ae){var ce=te.getFunctionName(ae),fe=oe(xe,ce,ae,!1);return fe}L.getDependencies=de;function oe(xe,ae,ce,fe){var Ee=xe.getConstructorMetadata(ce),pe=Ee.compilerGeneratedMetadata;if(pe===void 0){var Ae=q.MISSING_INJECTABLE_ANNOTATION+" "+ae+".";throw new Error(Ae)}var nt=Ee.userGeneratedMetadata,G=Object.keys(nt),Fe=ce.length===0&&G.length>0,He=G.length>ce.length,et=Fe||He?G.length:ce.length,Bt=re(fe,ae,pe,nt,et),Mn=he(xe,ce),ye=j(j([],Bt),Mn);return ye}function ie(xe,ae,ce,fe,Ee){var pe=Ee[xe.toString()]||[],Ae=ue(pe),nt=Ae.unmanaged!==!0,G=fe[xe],Fe=Ae.inject||Ae.multiInject;if(G=Fe||G,G instanceof R.LazyServiceIdentifer&&(G=G.unwrap()),nt){var He=G===Object,et=G===Function,Bt=G===void 0,Mn=He||et||Bt;if(!ae&&Mn){var ye=q.MISSING_INJECT_ANNOTATION+" argument "+xe+" in class "+ce+".";throw new Error(ye)}var Ct=new Q.Target(z.TargetTypeEnum.ConstructorArgument,Ae.targetName,G);return Ct.metadata=pe,Ct}return null}function re(xe,ae,ce,fe,Ee){for(var pe=[],Ae=0;Ae<Ee;Ae++){var nt=Ae,G=ie(nt,xe,ae,ce,fe);G!==null&&pe.push(G)}return pe}function he(xe,ae){for(var ce=xe.getPropertiesMetadata(ae),fe=[],Ee=Object.keys(ce),pe=0,Ae=Ee;pe<Ae.length;pe++){var nt=Ae[pe],G=ce[nt],Fe=ue(ce[nt]),He=Fe.targetName||nt,et=Fe.inject||Fe.multiInject,Bt=new Q.Target(z.TargetTypeEnum.ClassProperty,He,et);Bt.metadata=G,fe.push(Bt)}var Mn=Object.getPrototypeOf(ae.prototype).constructor;if(Mn!==Object){var ye=he(xe,Mn);fe=j(j([],fe),ye)}return fe}function De(xe,ae){var ce=Object.getPrototypeOf(ae.prototype).constructor;if(ce!==Object){var fe=te.getFunctionName(ce),Ee=oe(xe,fe,ce,!0),pe=Ee.map(function(G){return G.metadata.filter(function(Fe){return Fe.key===Z.UNMANAGED_TAG})}),Ae=[].concat.apply([],pe).length,nt=Ee.length-Ae;return nt>0?nt:De(xe,ce)}else return 0}L.getBaseClassDependencyCount=De;function ue(xe){var ae={};return xe.forEach(function(ce){ae[ce.key.toString()]=ce.value}),{inject:ae[Z.INJECT_TAG],multiInject:ae[Z.MULTI_INJECT_TAG],targetName:ae[Z.NAME_TAG],unmanaged:ae[Z.UNMANAGED_TAG]}}},6748:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Request=void 0;var j=M(37791),R=function(){function q(z,Z,te,Q,de){this.id=j.id(),this.serviceIdentifier=z,this.parentContext=Z,this.parentRequest=te,this.target=de,this.childRequests=[],this.bindings=Array.isArray(Q)?Q:[Q],this.requestScope=te===null?new Map:null}return q.prototype.addChildRequest=function(z,Z,te){var Q=new q(z,this.parentContext,this,Z,te);return this.childRequests.push(Q),Q},q}();L.Request=R},18924:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Target=void 0;var j=M(6867),R=M(37791),q=M(47738),z=M(88460),Z=function(){function te(Q,de,oe,ie){this.id=R.id(),this.type=Q,this.serviceIdentifier=oe,this.name=new z.QueryableString(de||""),this.metadata=new Array;var re=null;typeof ie=="string"?re=new q.Metadata(j.NAMED_TAG,ie):ie instanceof q.Metadata&&(re=ie),re!==null&&this.metadata.push(re)}return te.prototype.hasTag=function(Q){for(var de=0,oe=this.metadata;de<oe.length;de++){var ie=oe[de];if(ie.key===Q)return!0}return!1},te.prototype.isArray=function(){return this.hasTag(j.MULTI_INJECT_TAG)},te.prototype.matchesArray=function(Q){return this.matchesTag(j.MULTI_INJECT_TAG)(Q)},te.prototype.isNamed=function(){return this.hasTag(j.NAMED_TAG)},te.prototype.isTagged=function(){return this.metadata.some(function(Q){return j.NON_CUSTOM_TAG_KEYS.every(function(de){return Q.key!==de})})},te.prototype.isOptional=function(){return this.matchesTag(j.OPTIONAL_TAG)(!0)},te.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(Q){return Q.key===j.NAMED_TAG})[0]:null},te.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(Q){return j.NON_CUSTOM_TAG_KEYS.every(function(de){return Q.key!==de})}):null},te.prototype.matchesNamedTag=function(Q){return this.matchesTag(j.NAMED_TAG)(Q)},te.prototype.matchesTag=function(Q){var de=this;return function(oe){for(var ie=0,re=de.metadata;ie<re.length;ie++){var he=re[ie];if(he.key===Q&&he.value===oe)return!0}return!1}},te}();L.Target=Z},52279:function(Ne,L,M){"use strict";var j=this&&this.__spreadArray||function(oe,ie){for(var re=0,he=ie.length,De=oe.length;re<he;re++,De++)oe[De]=ie[re];return oe};Object.defineProperty(L,"__esModule",{value:!0}),L.resolveInstance=void 0;var R=M(16674),q=M(28421),z=M(6867);function Z(oe,ie,re){var he=ie.filter(function(ue){return ue.target!==null&&ue.target.type===q.TargetTypeEnum.ClassProperty}),De=he.map(re);return he.forEach(function(ue,xe){var ae="";ae=ue.target.name.value();var ce=De[xe];oe[ae]=ce}),oe}function te(oe,ie){return new(oe.bind.apply(oe,j([void 0],ie)))}function Q(oe,ie){if(Reflect.hasMetadata(z.POST_CONSTRUCT,oe)){var re=Reflect.getMetadata(z.POST_CONSTRUCT,oe);try{ie[re.value]()}catch(he){throw new Error(R.POST_CONSTRUCT_ERROR(oe.name,he.message))}}}function de(oe,ie,re){var he=null;if(ie.length>0){var De=ie.filter(function(xe){return xe.target!==null&&xe.target.type===q.TargetTypeEnum.ConstructorArgument}),ue=De.map(re);he=te(oe,ue),he=Z(he,ie,re)}else he=new oe;return Q(oe,he),he}L.resolveInstance=de},31927:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.resolve=void 0;var j=M(16674),R=M(28421),q=M(85265),z=M(55800),Z=M(52279),te=function(oe,ie,re){try{return re()}catch(he){throw q.isStackOverflowExeption(he)?new Error(j.CIRCULAR_DEPENDENCY_IN_FACTORY(oe,ie.toString())):he}},Q=function(oe){return function(ie){ie.parentContext.setCurrentRequest(ie);var re=ie.bindings,he=ie.childRequests,De=ie.target&&ie.target.isArray(),ue=!ie.parentRequest||!ie.parentRequest.target||!ie.target||!ie.parentRequest.target.matchesArray(ie.target.serviceIdentifier);if(De&&ue)return he.map(function(pe){var Ae=Q(oe);return Ae(pe)});var xe=null;if(ie.target.isOptional()&&re.length===0)return;var ae=re[0],ce=ae.scope===R.BindingScopeEnum.Singleton,fe=ae.scope===R.BindingScopeEnum.Request;if(ce&&ae.activated)return ae.cache;if(fe&&oe!==null&&oe.has(ae.id))return oe.get(ae.id);if(ae.type===R.BindingTypeEnum.ConstantValue)xe=ae.cache,ae.activated=!0;else if(ae.type===R.BindingTypeEnum.Function)xe=ae.cache,ae.activated=!0;else if(ae.type===R.BindingTypeEnum.Constructor)xe=ae.implementationType;else if(ae.type===R.BindingTypeEnum.DynamicValue&&ae.dynamicValue!==null)xe=te("toDynamicValue",ae.serviceIdentifier,function(){return ae.dynamicValue(ie.parentContext)});else if(ae.type===R.BindingTypeEnum.Factory&&ae.factory!==null)xe=te("toFactory",ae.serviceIdentifier,function(){return ae.factory(ie.parentContext)});else if(ae.type===R.BindingTypeEnum.Provider&&ae.provider!==null)xe=te("toProvider",ae.serviceIdentifier,function(){return ae.provider(ie.parentContext)});else if(ae.type===R.BindingTypeEnum.Instance&&ae.implementationType!==null)xe=Z.resolveInstance(ae.implementationType,he,Q(oe));else{var Ee=z.getServiceIdentifierAsString(ie.serviceIdentifier);throw new Error(j.INVALID_BINDING_TYPE+" "+Ee)}return typeof ae.onActivation=="function"&&(xe=ae.onActivation(ie.parentContext,xe)),ce&&(ae.cache=xe,ae.activated=!0),fe&&oe!==null&&!oe.has(ae.id)&&oe.set(ae.id,xe),xe}};function de(oe){var ie=Q(oe.plan.rootRequest.requestScope);return ie(oe.plan.rootRequest)}L.resolve=de},83366:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingInSyntax=void 0;var j=M(28421),R=M(71325),q=function(){function z(Z){this._binding=Z}return z.prototype.inRequestScope=function(){return this._binding.scope=j.BindingScopeEnum.Request,new R.BindingWhenOnSyntax(this._binding)},z.prototype.inSingletonScope=function(){return this._binding.scope=j.BindingScopeEnum.Singleton,new R.BindingWhenOnSyntax(this._binding)},z.prototype.inTransientScope=function(){return this._binding.scope=j.BindingScopeEnum.Transient,new R.BindingWhenOnSyntax(this._binding)},z}();L.BindingInSyntax=q},99812:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingInWhenOnSyntax=void 0;var j=M(83366),R=M(51811),q=M(98370),z=function(){function Z(te){this._binding=te,this._bindingWhenSyntax=new q.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new R.BindingOnSyntax(this._binding),this._bindingInSyntax=new j.BindingInSyntax(te)}return Z.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},Z.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},Z.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},Z.prototype.when=function(te){return this._bindingWhenSyntax.when(te)},Z.prototype.whenTargetNamed=function(te){return this._bindingWhenSyntax.whenTargetNamed(te)},Z.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},Z.prototype.whenTargetTagged=function(te,Q){return this._bindingWhenSyntax.whenTargetTagged(te,Q)},Z.prototype.whenInjectedInto=function(te){return this._bindingWhenSyntax.whenInjectedInto(te)},Z.prototype.whenParentNamed=function(te){return this._bindingWhenSyntax.whenParentNamed(te)},Z.prototype.whenParentTagged=function(te,Q){return this._bindingWhenSyntax.whenParentTagged(te,Q)},Z.prototype.whenAnyAncestorIs=function(te){return this._bindingWhenSyntax.whenAnyAncestorIs(te)},Z.prototype.whenNoAncestorIs=function(te){return this._bindingWhenSyntax.whenNoAncestorIs(te)},Z.prototype.whenAnyAncestorNamed=function(te){return this._bindingWhenSyntax.whenAnyAncestorNamed(te)},Z.prototype.whenAnyAncestorTagged=function(te,Q){return this._bindingWhenSyntax.whenAnyAncestorTagged(te,Q)},Z.prototype.whenNoAncestorNamed=function(te){return this._bindingWhenSyntax.whenNoAncestorNamed(te)},Z.prototype.whenNoAncestorTagged=function(te,Q){return this._bindingWhenSyntax.whenNoAncestorTagged(te,Q)},Z.prototype.whenAnyAncestorMatches=function(te){return this._bindingWhenSyntax.whenAnyAncestorMatches(te)},Z.prototype.whenNoAncestorMatches=function(te){return this._bindingWhenSyntax.whenNoAncestorMatches(te)},Z.prototype.onActivation=function(te){return this._bindingOnSyntax.onActivation(te)},Z}();L.BindingInWhenOnSyntax=z},51811:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingOnSyntax=void 0;var j=M(98370),R=function(){function q(z){this._binding=z}return q.prototype.onActivation=function(z){return this._binding.onActivation=z,new j.BindingWhenSyntax(this._binding)},q}();L.BindingOnSyntax=R},51860:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingToSyntax=void 0;var j=M(16674),R=M(28421),q=M(99812),z=M(71325),Z=function(){function te(Q){this._binding=Q}return te.prototype.to=function(Q){return this._binding.type=R.BindingTypeEnum.Instance,this._binding.implementationType=Q,new q.BindingInWhenOnSyntax(this._binding)},te.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+j.INVALID_TO_SELF_VALUE);var Q=this._binding.serviceIdentifier;return this.to(Q)},te.prototype.toConstantValue=function(Q){return this._binding.type=R.BindingTypeEnum.ConstantValue,this._binding.cache=Q,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=R.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},te.prototype.toDynamicValue=function(Q){return this._binding.type=R.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=Q,this._binding.implementationType=null,new q.BindingInWhenOnSyntax(this._binding)},te.prototype.toConstructor=function(Q){return this._binding.type=R.BindingTypeEnum.Constructor,this._binding.implementationType=Q,this._binding.scope=R.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},te.prototype.toFactory=function(Q){return this._binding.type=R.BindingTypeEnum.Factory,this._binding.factory=Q,this._binding.scope=R.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},te.prototype.toFunction=function(Q){if(typeof Q!="function")throw new Error(j.INVALID_FUNCTION_BINDING);var de=this.toConstantValue(Q);return this._binding.type=R.BindingTypeEnum.Function,this._binding.scope=R.BindingScopeEnum.Singleton,de},te.prototype.toAutoFactory=function(Q){return this._binding.type=R.BindingTypeEnum.Factory,this._binding.factory=function(de){var oe=function(){return de.container.get(Q)};return oe},this._binding.scope=R.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},te.prototype.toProvider=function(Q){return this._binding.type=R.BindingTypeEnum.Provider,this._binding.provider=Q,this._binding.scope=R.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},te.prototype.toService=function(Q){this.toDynamicValue(function(de){return de.container.get(Q)})},te}();L.BindingToSyntax=Z},71325:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingWhenOnSyntax=void 0;var j=M(51811),R=M(98370),q=function(){function z(Z){this._binding=Z,this._bindingWhenSyntax=new R.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new j.BindingOnSyntax(this._binding)}return z.prototype.when=function(Z){return this._bindingWhenSyntax.when(Z)},z.prototype.whenTargetNamed=function(Z){return this._bindingWhenSyntax.whenTargetNamed(Z)},z.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},z.prototype.whenTargetTagged=function(Z,te){return this._bindingWhenSyntax.whenTargetTagged(Z,te)},z.prototype.whenInjectedInto=function(Z){return this._bindingWhenSyntax.whenInjectedInto(Z)},z.prototype.whenParentNamed=function(Z){return this._bindingWhenSyntax.whenParentNamed(Z)},z.prototype.whenParentTagged=function(Z,te){return this._bindingWhenSyntax.whenParentTagged(Z,te)},z.prototype.whenAnyAncestorIs=function(Z){return this._bindingWhenSyntax.whenAnyAncestorIs(Z)},z.prototype.whenNoAncestorIs=function(Z){return this._bindingWhenSyntax.whenNoAncestorIs(Z)},z.prototype.whenAnyAncestorNamed=function(Z){return this._bindingWhenSyntax.whenAnyAncestorNamed(Z)},z.prototype.whenAnyAncestorTagged=function(Z,te){return this._bindingWhenSyntax.whenAnyAncestorTagged(Z,te)},z.prototype.whenNoAncestorNamed=function(Z){return this._bindingWhenSyntax.whenNoAncestorNamed(Z)},z.prototype.whenNoAncestorTagged=function(Z,te){return this._bindingWhenSyntax.whenNoAncestorTagged(Z,te)},z.prototype.whenAnyAncestorMatches=function(Z){return this._bindingWhenSyntax.whenAnyAncestorMatches(Z)},z.prototype.whenNoAncestorMatches=function(Z){return this._bindingWhenSyntax.whenNoAncestorMatches(Z)},z.prototype.onActivation=function(Z){return this._bindingOnSyntax.onActivation(Z)},z}();L.BindingWhenOnSyntax=q},98370:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingWhenSyntax=void 0;var j=M(51811),R=M(80758),q=function(){function z(Z){this._binding=Z}return z.prototype.when=function(Z){return this._binding.constraint=Z,new j.BindingOnSyntax(this._binding)},z.prototype.whenTargetNamed=function(Z){return this._binding.constraint=R.namedConstraint(Z),new j.BindingOnSyntax(this._binding)},z.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(Z){var te=Z.target!==null&&!Z.target.isNamed()&&!Z.target.isTagged();return te},new j.BindingOnSyntax(this._binding)},z.prototype.whenTargetTagged=function(Z,te){return this._binding.constraint=R.taggedConstraint(Z)(te),new j.BindingOnSyntax(this._binding)},z.prototype.whenInjectedInto=function(Z){return this._binding.constraint=function(te){return R.typeConstraint(Z)(te.parentRequest)},new j.BindingOnSyntax(this._binding)},z.prototype.whenParentNamed=function(Z){return this._binding.constraint=function(te){return R.namedConstraint(Z)(te.parentRequest)},new j.BindingOnSyntax(this._binding)},z.prototype.whenParentTagged=function(Z,te){return this._binding.constraint=function(Q){return R.taggedConstraint(Z)(te)(Q.parentRequest)},new j.BindingOnSyntax(this._binding)},z.prototype.whenAnyAncestorIs=function(Z){return this._binding.constraint=function(te){return R.traverseAncerstors(te,R.typeConstraint(Z))},new j.BindingOnSyntax(this._binding)},z.prototype.whenNoAncestorIs=function(Z){return this._binding.constraint=function(te){return!R.traverseAncerstors(te,R.typeConstraint(Z))},new j.BindingOnSyntax(this._binding)},z.prototype.whenAnyAncestorNamed=function(Z){return this._binding.constraint=function(te){return R.traverseAncerstors(te,R.namedConstraint(Z))},new j.BindingOnSyntax(this._binding)},z.prototype.whenNoAncestorNamed=function(Z){return this._binding.constraint=function(te){return!R.traverseAncerstors(te,R.namedConstraint(Z))},new j.BindingOnSyntax(this._binding)},z.prototype.whenAnyAncestorTagged=function(Z,te){return this._binding.constraint=function(Q){return R.traverseAncerstors(Q,R.taggedConstraint(Z)(te))},new j.BindingOnSyntax(this._binding)},z.prototype.whenNoAncestorTagged=function(Z,te){return this._binding.constraint=function(Q){return!R.traverseAncerstors(Q,R.taggedConstraint(Z)(te))},new j.BindingOnSyntax(this._binding)},z.prototype.whenAnyAncestorMatches=function(Z){return this._binding.constraint=function(te){return R.traverseAncerstors(te,Z)},new j.BindingOnSyntax(this._binding)},z.prototype.whenNoAncestorMatches=function(Z){return this._binding.constraint=function(te){return!R.traverseAncerstors(te,Z)},new j.BindingOnSyntax(this._binding)},z}();L.BindingWhenSyntax=q},80758:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.typeConstraint=L.namedConstraint=L.taggedConstraint=L.traverseAncerstors=void 0;var j=M(6867),R=M(47738),q=function(Q,de){var oe=Q.parentRequest;return oe!==null?de(oe)?!0:q(oe,de):!1};L.traverseAncerstors=q;var z=function(Q){return function(de){var oe=function(ie){return ie!==null&&ie.target!==null&&ie.target.matchesTag(Q)(de)};return oe.metaData=new R.Metadata(Q,de),oe}};L.taggedConstraint=z;var Z=z(j.NAMED_TAG);L.namedConstraint=Z;var te=function(Q){return function(de){var oe=null;if(de!==null)if(oe=de.bindings[0],typeof Q=="string"){var ie=oe.serviceIdentifier;return ie===Q}else{var re=de.bindings[0].implementationType;return Q===re}return!1}};L.typeConstraint=te},70600:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.multiBindToService=void 0;var M=function(j){return function(R){return function(){for(var q=[],z=0;z<arguments.length;z++)q[z]=arguments[z];return q.forEach(function(Z){return j.bind(Z).toService(R)})}}};L.multiBindToService=M},85265:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isStackOverflowExeption=void 0;var j=M(16674);function R(q){return q instanceof RangeError||q.message===j.STACK_OVERFLOW}L.isStackOverflowExeption=R},37791:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.id=void 0;var M=0;function j(){return M++}L.id=j},55800:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.circularDependencyToException=L.listMetadataForTarget=L.listRegisteredBindingsForServiceIdentifier=L.getServiceIdentifierAsString=L.getFunctionName=void 0;var j=M(16674);function R(oe){if(typeof oe=="function"){var ie=oe;return ie.name}else{if(typeof oe=="symbol")return oe.toString();var ie=oe;return ie}}L.getServiceIdentifierAsString=R;function q(oe,ie,re){var he="",De=re(oe,ie);return De.length!==0&&(he=`
Registered bindings:`,De.forEach(function(ue){var xe="Object";ue.implementationType!==null&&(xe=de(ue.implementationType)),he=he+`
 `+xe,ue.constraint.metaData&&(he=he+" - "+ue.constraint.metaData)})),he}L.listRegisteredBindingsForServiceIdentifier=q;function z(oe,ie){return oe.parentRequest===null?!1:oe.parentRequest.serviceIdentifier===ie?!0:z(oe.parentRequest,ie)}function Z(oe){function ie(he,De){De===void 0&&(De=[]);var ue=R(he.serviceIdentifier);return De.push(ue),he.parentRequest!==null?ie(he.parentRequest,De):De}var re=ie(oe);return re.reverse().join(" --> ")}function te(oe){oe.childRequests.forEach(function(ie){if(z(ie,ie.serviceIdentifier)){var re=Z(ie);throw new Error(j.CIRCULAR_DEPENDENCY+" "+re)}else te(ie)})}L.circularDependencyToException=te;function Q(oe,ie){if(ie.isTagged()||ie.isNamed()){var re="",he=ie.getNamedTag(),De=ie.getCustomTags();return he!==null&&(re+=he.toString()+`
`),De!==null&&De.forEach(function(ue){re+=ue.toString()+`
`})," "+oe+`
 `+oe+" - "+re}else return" "+oe}L.listMetadataForTarget=Q;function de(oe){if(oe.name)return oe.name;var ie=oe.toString(),re=ie.match(/^function\s*([^\s(]+)/);return re?re[1]:"Anonymous function: "+ie}L.getFunctionName=de},50450:function(Ne,L,M){var j,R,q;(function(z){R=[M(19755)],j=z,q=typeof j=="function"?j.apply(L,R):j,q!==void 0&&(Ne.exports=q)})(function(z){var Z=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],te="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],Q=Array.prototype.slice,de,oe;if(z.event.fixHooks)for(var ie=Z.length;ie;)z.event.fixHooks[Z[--ie]]=z.event.mouseHooks;var re=z.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var xe=te.length;xe;)this.addEventListener(te[--xe],he,!1);else this.onmousewheel=he;z.data(this,"mousewheel-line-height",re.getLineHeight(this)),z.data(this,"mousewheel-page-height",re.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var xe=te.length;xe;)this.removeEventListener(te[--xe],he,!1);else this.onmousewheel=null;z.removeData(this,"mousewheel-line-height"),z.removeData(this,"mousewheel-page-height")},getLineHeight:function(xe){var ae=z(xe),ce=ae["offsetParent"in z.fn?"offsetParent":"parent"]();return ce.length||(ce=z("body")),parseInt(ce.css("fontSize"),10)||parseInt(ae.css("fontSize"),10)||16},getPageHeight:function(xe){return z(xe).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};z.fn.extend({mousewheel:function(xe){return xe?this.bind("mousewheel",xe):this.trigger("mousewheel")},unmousewheel:function(xe){return this.unbind("mousewheel",xe)}});function he(xe){var ae=xe||window.event,ce=Q.call(arguments,1),fe=0,Ee=0,pe=0,Ae=0,nt=0,G=0;if(xe=z.event.fix(ae),xe.type="mousewheel","detail"in ae&&(pe=ae.detail*-1),"wheelDelta"in ae&&(pe=ae.wheelDelta),"wheelDeltaY"in ae&&(pe=ae.wheelDeltaY),"wheelDeltaX"in ae&&(Ee=ae.wheelDeltaX*-1),"axis"in ae&&ae.axis===ae.HORIZONTAL_AXIS&&(Ee=pe*-1,pe=0),fe=pe===0?Ee:pe,"deltaY"in ae&&(pe=ae.deltaY*-1,fe=pe),"deltaX"in ae&&(Ee=ae.deltaX,pe===0&&(fe=Ee*-1)),!(pe===0&&Ee===0)){if(ae.deltaMode===1){var Fe=z.data(this,"mousewheel-line-height");fe*=Fe,pe*=Fe,Ee*=Fe}else if(ae.deltaMode===2){var He=z.data(this,"mousewheel-page-height");fe*=He,pe*=He,Ee*=He}if(Ae=Math.max(Math.abs(pe),Math.abs(Ee)),(!oe||Ae<oe)&&(oe=Ae,ue(ae,Ae)&&(oe/=40)),ue(ae,Ae)&&(fe/=40,Ee/=40,pe/=40),fe=Math[fe>=1?"floor":"ceil"](fe/oe),Ee=Math[Ee>=1?"floor":"ceil"](Ee/oe),pe=Math[pe>=1?"floor":"ceil"](pe/oe),re.settings.normalizeOffset&&this.getBoundingClientRect){var et=this.getBoundingClientRect();nt=xe.clientX-et.left,G=xe.clientY-et.top}return xe.deltaX=Ee,xe.deltaY=pe,xe.deltaFactor=oe,xe.offsetX=nt,xe.offsetY=G,xe.deltaMode=0,ce.unshift(xe,fe,Ee,pe),de&&clearTimeout(de),de=setTimeout(De,200),(z.event.dispatch||z.event.handle).apply(this,ce)}}function De(){oe=null}function ue(xe,ae){return re.settings.adjustOldDeltas&&xe.type==="mousewheel"&&ae%120===0}})},19755:function(Ne,L){var M,j;(function(R,q){"use strict";typeof Ne.exports=="object"?Ne.exports=R.document?q(R,!0):function(z){if(!z.document)throw new Error("jQuery requires a window with a document");return q(z)}:q(R)})(typeof window<"u"?window:this,function(R,q){"use strict";var z=[],Z=Object.getPrototypeOf,te=z.slice,Q=z.flat?function(S){return z.flat.call(S)}:function(S){return z.concat.apply([],S)},de=z.push,oe=z.indexOf,ie={},re=ie.toString,he=ie.hasOwnProperty,De=he.toString,ue=De.call(Object),xe={},ae=function(I){return typeof I=="function"&&typeof I.nodeType!="number"&&typeof I.item!="function"},ce=function(I){return I!=null&&I===I.window},fe=R.document,Ee={type:!0,src:!0,nonce:!0,noModule:!0};function pe(S,I,U){U=U||fe;var W,se,le=U.createElement("script");if(le.text=S,I)for(W in Ee)se=I[W]||I.getAttribute&&I.getAttribute(W),se&&le.setAttribute(W,se);U.head.appendChild(le).parentNode.removeChild(le)}function Ae(S){return S==null?S+"":typeof S=="object"||typeof S=="function"?ie[re.call(S)]||"object":typeof S}var nt="3.6.0",G=function(S,I){return new G.fn.init(S,I)};G.fn=G.prototype={jquery:nt,constructor:G,length:0,toArray:function(){return te.call(this)},get:function(S){return S==null?te.call(this):S<0?this[S+this.length]:this[S]},pushStack:function(S){var I=G.merge(this.constructor(),S);return I.prevObject=this,I},each:function(S){return G.each(this,S)},map:function(S){return this.pushStack(G.map(this,function(I,U){return S.call(I,U,I)}))},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(G.grep(this,function(S,I){return(I+1)%2}))},odd:function(){return this.pushStack(G.grep(this,function(S,I){return I%2}))},eq:function(S){var I=this.length,U=+S+(S<0?I:0);return this.pushStack(U>=0&&U<I?[this[U]]:[])},end:function(){return this.prevObject||this.constructor()},push:de,sort:z.sort,splice:z.splice},G.extend=G.fn.extend=function(){var S,I,U,W,se,le,Ce=arguments[0]||{},Ke=1,Je=arguments.length,mt=!1;for(typeof Ce=="boolean"&&(mt=Ce,Ce=arguments[Ke]||{},Ke++),typeof Ce!="object"&&!ae(Ce)&&(Ce={}),Ke===Je&&(Ce=this,Ke--);Ke<Je;Ke++)if((S=arguments[Ke])!=null)for(I in S)W=S[I],!(I==="__proto__"||Ce===W)&&(mt&&W&&(G.isPlainObject(W)||(se=Array.isArray(W)))?(U=Ce[I],se&&!Array.isArray(U)?le=[]:!se&&!G.isPlainObject(U)?le={}:le=U,se=!1,Ce[I]=G.extend(mt,le,W)):W!==void 0&&(Ce[I]=W));return Ce},G.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(S){throw new Error(S)},noop:function(){},isPlainObject:function(S){var I,U;return!S||re.call(S)!=="[object Object]"?!1:(I=Z(S),I?(U=he.call(I,"constructor")&&I.constructor,typeof U=="function"&&De.call(U)===ue):!0)},isEmptyObject:function(S){var I;for(I in S)return!1;return!0},globalEval:function(S,I,U){pe(S,{nonce:I&&I.nonce},U)},each:function(S,I){var U,W=0;if(Fe(S))for(U=S.length;W<U&&I.call(S[W],W,S[W])!==!1;W++);else for(W in S)if(I.call(S[W],W,S[W])===!1)break;return S},makeArray:function(S,I){var U=I||[];return S!=null&&(Fe(Object(S))?G.merge(U,typeof S=="string"?[S]:S):de.call(U,S)),U},inArray:function(S,I,U){return I==null?-1:oe.call(I,S,U)},merge:function(S,I){for(var U=+I.length,W=0,se=S.length;W<U;W++)S[se++]=I[W];return S.length=se,S},grep:function(S,I,U){for(var W,se=[],le=0,Ce=S.length,Ke=!U;le<Ce;le++)W=!I(S[le],le),W!==Ke&&se.push(S[le]);return se},map:function(S,I,U){var W,se,le=0,Ce=[];if(Fe(S))for(W=S.length;le<W;le++)se=I(S[le],le,U),se!=null&&Ce.push(se);else for(le in S)se=I(S[le],le,U),se!=null&&Ce.push(se);return Q(Ce)},guid:1,support:xe}),typeof Symbol=="function"&&(G.fn[Symbol.iterator]=z[Symbol.iterator]),G.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(S,I){ie["[object "+I+"]"]=I.toLowerCase()});function Fe(S){var I=!!S&&"length"in S&&S.length,U=Ae(S);return ae(S)||ce(S)?!1:U==="array"||I===0||typeof I=="number"&&I>0&&I-1 in S}var He=function(S){var I,U,W,se,le,Ce,Ke,Je,mt,zt,xn,Nt,Yt,Wn,ai,mr,mo,Mo,pa,Gr="sizzle"+1*new Date,Rr=S.document,fi=0,Ni=0,Lo=Ya(),Oa=Ya(),kl=Ya(),Fs=Ya(),Pa=function(Te,Ye){return Te===Ye&&(xn=!0),0},Vs={}.hasOwnProperty,Ko=[],Da=Ko.pop,js=Ko.push,Uc=Ko.push,Oo=Ko.slice,Bs=function(Te,Ye){for(var lt=0,Tt=Te.length;lt<Tt;lt++)if(Te[lt]===Ye)return lt;return-1},Xa="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ao="[\\x20\\t\\r\\n\\f]",ws="(?:\\\\[\\da-fA-F]{1,6}"+ao+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ac="\\["+ao+"*("+ws+")(?:"+ao+"*([*^$|!~]?=)"+ao+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ws+"))|)"+ao+"*\\]",cc=":("+ws+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Ac+")*)|.*)\\)|)",Ll=new RegExp(ao+"+","g"),Os=new RegExp("^"+ao+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ao+"+$","g"),$u=new RegExp("^"+ao+"*,"+ao+"*"),Na=new RegExp("^"+ao+"*([>+~]|"+ao+")"+ao+"*"),uu=new RegExp(ao+"|>"),qo=new RegExp(cc),Wu=new RegExp("^"+ws+"$"),Gl={ID:new RegExp("^#("+ws+")"),CLASS:new RegExp("^\\.("+ws+")"),TAG:new RegExp("^("+ws+"|[*])"),ATTR:new RegExp("^"+Ac),PSEUDO:new RegExp("^"+cc),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ao+"*(even|odd|(([+-]|)(\\d*)n|)"+ao+"*(?:([+-]|)"+ao+"*(\\d+)|))"+ao+"*\\)|)","i"),bool:new RegExp("^(?:"+Xa+")$","i"),needsContext:new RegExp("^"+ao+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ao+"*((?:-\\d)?\\d*)"+ao+"*\\)|)(?=[^-]|$)","i")},cl=/HTML$/i,xh=/^(?:input|select|textarea|button)$/i,Ia=/^h\d$/i,Za=/^[^{]+\{\s*\[native \w/,du=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Xu=/[+~]/,ga=new RegExp("\\\\[\\da-fA-F]{1,6}"+ao+"?|\\\\([^\\r\\n\\f])","g"),Jo=function(Te,Ye){var lt="0x"+Te.slice(1)-65536;return Ye||(lt<0?String.fromCharCode(lt+65536):String.fromCharCode(lt>>10|55296,lt&1023|56320))},va=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,hu=function(Te,Ye){return Ye?Te==="\0"?"\uFFFD":Te.slice(0,-1)+"\\"+Te.charCodeAt(Te.length-1).toString(16)+" ":"\\"+Te},Zu=function(){Nt()},Fl=or(function(Te){return Te.disabled===!0&&Te.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Uc.apply(Ko=Oo.call(Rr.childNodes),Rr.childNodes),Ko[Rr.childNodes.length].nodeType}catch{Uc={apply:Ko.length?function(Ye,lt){js.apply(Ye,Oo.call(lt))}:function(Ye,lt){for(var Tt=Ye.length,yt=0;Ye[Tt++]=lt[yt++];);Ye.length=Tt-1}}}function fo(Te,Ye,lt,Tt){var yt,an,Ut,Bn,Zn,wr,yr,Tr=Ye&&Ye.ownerDocument,Ci=Ye?Ye.nodeType:9;if(lt=lt||[],typeof Te!="string"||!Te||Ci!==1&&Ci!==9&&Ci!==11)return lt;if(!Tt&&(Nt(Ye),Ye=Ye||Yt,ai)){if(Ci!==11&&(Zn=du.exec(Te)))if(yt=Zn[1]){if(Ci===9)if(Ut=Ye.getElementById(yt)){if(Ut.id===yt)return lt.push(Ut),lt}else return lt;else if(Tr&&(Ut=Tr.getElementById(yt))&&pa(Ye,Ut)&&Ut.id===yt)return lt.push(Ut),lt}else{if(Zn[2])return Uc.apply(lt,Ye.getElementsByTagName(Te)),lt;if((yt=Zn[3])&&U.getElementsByClassName&&Ye.getElementsByClassName)return Uc.apply(lt,Ye.getElementsByClassName(yt)),lt}if(U.qsa&&!Fs[Te+" "]&&(!mr||!mr.test(Te))&&(Ci!==1||Ye.nodeName.toLowerCase()!=="object")){if(yr=Te,Tr=Ye,Ci===1&&(uu.test(Te)||Na.test(Te))){for(Tr=Xu.test(Te)&&pt(Ye.parentNode)||Ye,(Tr!==Ye||!U.scope)&&((Bn=Ye.getAttribute("id"))?Bn=Bn.replace(va,hu):Ye.setAttribute("id",Bn=Gr)),wr=Ce(Te),an=wr.length;an--;)wr[an]=(Bn?"#"+Bn:":scope")+" "+Ft(wr[an]);yr=wr.join(",")}try{return Uc.apply(lt,Tr.querySelectorAll(yr)),lt}catch{Fs(Te,!0)}finally{Bn===Gr&&Ye.removeAttribute("id")}}}return Je(Te.replace(Os,"$1"),Ye,lt,Tt)}function Ya(){var Te=[];function Ye(lt,Tt){return Te.push(lt+" ")>W.cacheLength&&delete Ye[Te.shift()],Ye[lt+" "]=Tt}return Ye}function $o(Te){return Te[Gr]=!0,Te}function ma(Te){var Ye=Yt.createElement("fieldset");try{return!!Te(Ye)}catch{return!1}finally{Ye.parentNode&&Ye.parentNode.removeChild(Ye),Ye=null}}function Qs(Te,Ye){for(var lt=Te.split("|"),Tt=lt.length;Tt--;)W.attrHandle[lt[Tt]]=Ye}function Ch(Te,Ye){var lt=Ye&&Te,Tt=lt&&Te.nodeType===1&&Ye.nodeType===1&&Te.sourceIndex-Ye.sourceIndex;if(Tt)return Tt;if(lt){for(;lt=lt.nextSibling;)if(lt===Ye)return-1}return Te?1:-1}function Nd(Te){return function(Ye){var lt=Ye.nodeName.toLowerCase();return lt==="input"&&Ye.type===Te}}function _f(Te){return function(Ye){var lt=Ye.nodeName.toLowerCase();return(lt==="input"||lt==="button")&&Ye.type===Te}}function Af(Te){return function(Ye){return"form"in Ye?Ye.parentNode&&Ye.disabled===!1?"label"in Ye?"label"in Ye.parentNode?Ye.parentNode.disabled===Te:Ye.disabled===Te:Ye.isDisabled===Te||Ye.isDisabled!==!Te&&Fl(Ye)===Te:Ye.disabled===Te:"label"in Ye?Ye.disabled===Te:!1}}function lc(Te){return $o(function(Ye){return Ye=+Ye,$o(function(lt,Tt){for(var yt,an=Te([],lt.length,Ye),Ut=an.length;Ut--;)lt[yt=an[Ut]]&&(lt[yt]=!(Tt[yt]=lt[yt]))})})}function pt(Te){return Te&&typeof Te.getElementsByTagName<"u"&&Te}U=fo.support={},le=fo.isXML=function(Te){var Ye=Te&&Te.namespaceURI,lt=Te&&(Te.ownerDocument||Te).documentElement;return!cl.test(Ye||lt&&lt.nodeName||"HTML")},Nt=fo.setDocument=function(Te){var Ye,lt,Tt=Te?Te.ownerDocument||Te:Rr;return Tt==Yt||Tt.nodeType!==9||!Tt.documentElement||(Yt=Tt,Wn=Yt.documentElement,ai=!le(Yt),Rr!=Yt&&(lt=Yt.defaultView)&&lt.top!==lt&&(lt.addEventListener?lt.addEventListener("unload",Zu,!1):lt.attachEvent&&lt.attachEvent("onunload",Zu)),U.scope=ma(function(yt){return Wn.appendChild(yt).appendChild(Yt.createElement("div")),typeof yt.querySelectorAll<"u"&&!yt.querySelectorAll(":scope fieldset div").length}),U.attributes=ma(function(yt){return yt.className="i",!yt.getAttribute("className")}),U.getElementsByTagName=ma(function(yt){return yt.appendChild(Yt.createComment("")),!yt.getElementsByTagName("*").length}),U.getElementsByClassName=Za.test(Yt.getElementsByClassName),U.getById=ma(function(yt){return Wn.appendChild(yt).id=Gr,!Yt.getElementsByName||!Yt.getElementsByName(Gr).length}),U.getById?(W.filter.ID=function(yt){var an=yt.replace(ga,Jo);return function(Ut){return Ut.getAttribute("id")===an}},W.find.ID=function(yt,an){if(typeof an.getElementById<"u"&&ai){var Ut=an.getElementById(yt);return Ut?[Ut]:[]}}):(W.filter.ID=function(yt){var an=yt.replace(ga,Jo);return function(Ut){var Bn=typeof Ut.getAttributeNode<"u"&&Ut.getAttributeNode("id");return Bn&&Bn.value===an}},W.find.ID=function(yt,an){if(typeof an.getElementById<"u"&&ai){var Ut,Bn,Zn,wr=an.getElementById(yt);if(wr){if(Ut=wr.getAttributeNode("id"),Ut&&Ut.value===yt)return[wr];for(Zn=an.getElementsByName(yt),Bn=0;wr=Zn[Bn++];)if(Ut=wr.getAttributeNode("id"),Ut&&Ut.value===yt)return[wr]}return[]}}),W.find.TAG=U.getElementsByTagName?function(yt,an){if(typeof an.getElementsByTagName<"u")return an.getElementsByTagName(yt);if(U.qsa)return an.querySelectorAll(yt)}:function(yt,an){var Ut,Bn=[],Zn=0,wr=an.getElementsByTagName(yt);if(yt==="*"){for(;Ut=wr[Zn++];)Ut.nodeType===1&&Bn.push(Ut);return Bn}return wr},W.find.CLASS=U.getElementsByClassName&&function(yt,an){if(typeof an.getElementsByClassName<"u"&&ai)return an.getElementsByClassName(yt)},mo=[],mr=[],(U.qsa=Za.test(Yt.querySelectorAll))&&(ma(function(yt){var an;Wn.appendChild(yt).innerHTML="<a id='"+Gr+"'></a><select id='"+Gr+"-\r\\' msallowcapture=''><option selected=''></option></select>",yt.querySelectorAll("[msallowcapture^='']").length&&mr.push("[*^$]="+ao+`*(?:''|"")`),yt.querySelectorAll("[selected]").length||mr.push("\\["+ao+"*(?:value|"+Xa+")"),yt.querySelectorAll("[id~="+Gr+"-]").length||mr.push("~="),an=Yt.createElement("input"),an.setAttribute("name",""),yt.appendChild(an),yt.querySelectorAll("[name='']").length||mr.push("\\["+ao+"*name"+ao+"*="+ao+`*(?:''|"")`),yt.querySelectorAll(":checked").length||mr.push(":checked"),yt.querySelectorAll("a#"+Gr+"+*").length||mr.push(".#.+[+~]"),yt.querySelectorAll("\\\f"),mr.push("[\\r\\n\\f]")}),ma(function(yt){yt.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var an=Yt.createElement("input");an.setAttribute("type","hidden"),yt.appendChild(an).setAttribute("name","D"),yt.querySelectorAll("[name=d]").length&&mr.push("name"+ao+"*[*^$|!~]?="),yt.querySelectorAll(":enabled").length!==2&&mr.push(":enabled",":disabled"),Wn.appendChild(yt).disabled=!0,yt.querySelectorAll(":disabled").length!==2&&mr.push(":enabled",":disabled"),yt.querySelectorAll("*,:x"),mr.push(",.*:")})),(U.matchesSelector=Za.test(Mo=Wn.matches||Wn.webkitMatchesSelector||Wn.mozMatchesSelector||Wn.oMatchesSelector||Wn.msMatchesSelector))&&ma(function(yt){U.disconnectedMatch=Mo.call(yt,"*"),Mo.call(yt,"[s!='']:x"),mo.push("!=",cc)}),mr=mr.length&&new RegExp(mr.join("|")),mo=mo.length&&new RegExp(mo.join("|")),Ye=Za.test(Wn.compareDocumentPosition),pa=Ye||Za.test(Wn.contains)?function(yt,an){var Ut=yt.nodeType===9?yt.documentElement:yt,Bn=an&&an.parentNode;return yt===Bn||!!(Bn&&Bn.nodeType===1&&(Ut.contains?Ut.contains(Bn):yt.compareDocumentPosition&&yt.compareDocumentPosition(Bn)&16))}:function(yt,an){if(an){for(;an=an.parentNode;)if(an===yt)return!0}return!1},Pa=Ye?function(yt,an){if(yt===an)return xn=!0,0;var Ut=!yt.compareDocumentPosition-!an.compareDocumentPosition;return Ut||(Ut=(yt.ownerDocument||yt)==(an.ownerDocument||an)?yt.compareDocumentPosition(an):1,Ut&1||!U.sortDetached&&an.compareDocumentPosition(yt)===Ut?yt==Yt||yt.ownerDocument==Rr&&pa(Rr,yt)?-1:an==Yt||an.ownerDocument==Rr&&pa(Rr,an)?1:zt?Bs(zt,yt)-Bs(zt,an):0:Ut&4?-1:1)}:function(yt,an){if(yt===an)return xn=!0,0;var Ut,Bn=0,Zn=yt.parentNode,wr=an.parentNode,yr=[yt],Tr=[an];if(!Zn||!wr)return yt==Yt?-1:an==Yt?1:Zn?-1:wr?1:zt?Bs(zt,yt)-Bs(zt,an):0;if(Zn===wr)return Ch(yt,an);for(Ut=yt;Ut=Ut.parentNode;)yr.unshift(Ut);for(Ut=an;Ut=Ut.parentNode;)Tr.unshift(Ut);for(;yr[Bn]===Tr[Bn];)Bn++;return Bn?Ch(yr[Bn],Tr[Bn]):yr[Bn]==Rr?-1:Tr[Bn]==Rr?1:0}),Yt},fo.matches=function(Te,Ye){return fo(Te,null,null,Ye)},fo.matchesSelector=function(Te,Ye){if(Nt(Te),U.matchesSelector&&ai&&!Fs[Ye+" "]&&(!mo||!mo.test(Ye))&&(!mr||!mr.test(Ye)))try{var lt=Mo.call(Te,Ye);if(lt||U.disconnectedMatch||Te.document&&Te.document.nodeType!==11)return lt}catch{Fs(Ye,!0)}return fo(Ye,Yt,null,[Te]).length>0},fo.contains=function(Te,Ye){return(Te.ownerDocument||Te)!=Yt&&Nt(Te),pa(Te,Ye)},fo.attr=function(Te,Ye){(Te.ownerDocument||Te)!=Yt&&Nt(Te);var lt=W.attrHandle[Ye.toLowerCase()],Tt=lt&&Vs.call(W.attrHandle,Ye.toLowerCase())?lt(Te,Ye,!ai):void 0;return Tt!==void 0?Tt:U.attributes||!ai?Te.getAttribute(Ye):(Tt=Te.getAttributeNode(Ye))&&Tt.specified?Tt.value:null},fo.escape=function(Te){return(Te+"").replace(va,hu)},fo.error=function(Te){throw new Error("Syntax error, unrecognized expression: "+Te)},fo.uniqueSort=function(Te){var Ye,lt=[],Tt=0,yt=0;if(xn=!U.detectDuplicates,zt=!U.sortStable&&Te.slice(0),Te.sort(Pa),xn){for(;Ye=Te[yt++];)Ye===Te[yt]&&(Tt=lt.push(yt));for(;Tt--;)Te.splice(lt[Tt],1)}return zt=null,Te},se=fo.getText=function(Te){var Ye,lt="",Tt=0,yt=Te.nodeType;if(yt){if(yt===1||yt===9||yt===11){if(typeof Te.textContent=="string")return Te.textContent;for(Te=Te.firstChild;Te;Te=Te.nextSibling)lt+=se(Te)}else if(yt===3||yt===4)return Te.nodeValue}else for(;Ye=Te[Tt++];)lt+=se(Ye);return lt},W=fo.selectors={cacheLength:50,createPseudo:$o,match:Gl,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Te){return Te[1]=Te[1].replace(ga,Jo),Te[3]=(Te[3]||Te[4]||Te[5]||"").replace(ga,Jo),Te[2]==="~="&&(Te[3]=" "+Te[3]+" "),Te.slice(0,4)},CHILD:function(Te){return Te[1]=Te[1].toLowerCase(),Te[1].slice(0,3)==="nth"?(Te[3]||fo.error(Te[0]),Te[4]=+(Te[4]?Te[5]+(Te[6]||1):2*(Te[3]==="even"||Te[3]==="odd")),Te[5]=+(Te[7]+Te[8]||Te[3]==="odd")):Te[3]&&fo.error(Te[0]),Te},PSEUDO:function(Te){var Ye,lt=!Te[6]&&Te[2];return Gl.CHILD.test(Te[0])?null:(Te[3]?Te[2]=Te[4]||Te[5]||"":lt&&qo.test(lt)&&(Ye=Ce(lt,!0))&&(Ye=lt.indexOf(")",lt.length-Ye)-lt.length)&&(Te[0]=Te[0].slice(0,Ye),Te[2]=lt.slice(0,Ye)),Te.slice(0,3))}},filter:{TAG:function(Te){var Ye=Te.replace(ga,Jo).toLowerCase();return Te==="*"?function(){return!0}:function(lt){return lt.nodeName&&lt.nodeName.toLowerCase()===Ye}},CLASS:function(Te){var Ye=Lo[Te+" "];return Ye||(Ye=new RegExp("(^|"+ao+")"+Te+"("+ao+"|$)"))&&Lo(Te,function(lt){return Ye.test(typeof lt.className=="string"&&lt.className||typeof lt.getAttribute<"u"&&lt.getAttribute("class")||"")})},ATTR:function(Te,Ye,lt){return function(Tt){var yt=fo.attr(Tt,Te);return yt==null?Ye==="!=":Ye?(yt+="",Ye==="="?yt===lt:Ye==="!="?yt!==lt:Ye==="^="?lt&&yt.indexOf(lt)===0:Ye==="*="?lt&&yt.indexOf(lt)>-1:Ye==="$="?lt&&yt.slice(-lt.length)===lt:Ye==="~="?(" "+yt.replace(Ll," ")+" ").indexOf(lt)>-1:Ye==="|="?yt===lt||yt.slice(0,lt.length+1)===lt+"-":!1):!0}},CHILD:function(Te,Ye,lt,Tt,yt){var an=Te.slice(0,3)!=="nth",Ut=Te.slice(-4)!=="last",Bn=Ye==="of-type";return Tt===1&&yt===0?function(Zn){return!!Zn.parentNode}:function(Zn,wr,yr){var Tr,Ci,ci,br,xo,Ui,ea=an!==Ut?"nextSibling":"previousSibling",Po=Zn.parentNode,uc=Bn&&Zn.nodeName.toLowerCase(),ll=!yr&&!Bn,Ra=!1;if(Po){if(an){for(;ea;){for(br=Zn;br=br[ea];)if(Bn?br.nodeName.toLowerCase()===uc:br.nodeType===1)return!1;Ui=ea=Te==="only"&&!Ui&&"nextSibling"}return!0}if(Ui=[Ut?Po.firstChild:Po.lastChild],Ut&&ll){for(br=Po,ci=br[Gr]||(br[Gr]={}),Ci=ci[br.uniqueID]||(ci[br.uniqueID]={}),Tr=Ci[Te]||[],xo=Tr[0]===fi&&Tr[1],Ra=xo&&Tr[2],br=xo&&Po.childNodes[xo];br=++xo&&br&&br[ea]||(Ra=xo=0)||Ui.pop();)if(br.nodeType===1&&++Ra&&br===Zn){Ci[Te]=[fi,xo,Ra];break}}else if(ll&&(br=Zn,ci=br[Gr]||(br[Gr]={}),Ci=ci[br.uniqueID]||(ci[br.uniqueID]={}),Tr=Ci[Te]||[],xo=Tr[0]===fi&&Tr[1],Ra=xo),Ra===!1)for(;(br=++xo&&br&&br[ea]||(Ra=xo=0)||Ui.pop())&&!((Bn?br.nodeName.toLowerCase()===uc:br.nodeType===1)&&++Ra&&(ll&&(ci=br[Gr]||(br[Gr]={}),Ci=ci[br.uniqueID]||(ci[br.uniqueID]={}),Ci[Te]=[fi,Ra]),br===Zn)););return Ra-=yt,Ra===Tt||Ra%Tt===0&&Ra/Tt>=0}}},PSEUDO:function(Te,Ye){var lt,Tt=W.pseudos[Te]||W.setFilters[Te.toLowerCase()]||fo.error("unsupported pseudo: "+Te);return Tt[Gr]?Tt(Ye):Tt.length>1?(lt=[Te,Te,"",Ye],W.setFilters.hasOwnProperty(Te.toLowerCase())?$o(function(yt,an){for(var Ut,Bn=Tt(yt,Ye),Zn=Bn.length;Zn--;)Ut=Bs(yt,Bn[Zn]),yt[Ut]=!(an[Ut]=Bn[Zn])}):function(yt){return Tt(yt,0,lt)}):Tt}},pseudos:{not:$o(function(Te){var Ye=[],lt=[],Tt=Ke(Te.replace(Os,"$1"));return Tt[Gr]?$o(function(yt,an,Ut,Bn){for(var Zn,wr=Tt(yt,null,Bn,[]),yr=yt.length;yr--;)(Zn=wr[yr])&&(yt[yr]=!(an[yr]=Zn))}):function(yt,an,Ut){return Ye[0]=yt,Tt(Ye,null,Ut,lt),Ye[0]=null,!lt.pop()}}),has:$o(function(Te){return function(Ye){return fo(Te,Ye).length>0}}),contains:$o(function(Te){return Te=Te.replace(ga,Jo),function(Ye){return(Ye.textContent||se(Ye)).indexOf(Te)>-1}}),lang:$o(function(Te){return Wu.test(Te||"")||fo.error("unsupported lang: "+Te),Te=Te.replace(ga,Jo).toLowerCase(),function(Ye){var lt;do if(lt=ai?Ye.lang:Ye.getAttribute("xml:lang")||Ye.getAttribute("lang"))return lt=lt.toLowerCase(),lt===Te||lt.indexOf(Te+"-")===0;while((Ye=Ye.parentNode)&&Ye.nodeType===1);return!1}}),target:function(Te){var Ye=S.location&&S.location.hash;return Ye&&Ye.slice(1)===Te.id},root:function(Te){return Te===Wn},focus:function(Te){return Te===Yt.activeElement&&(!Yt.hasFocus||Yt.hasFocus())&&!!(Te.type||Te.href||~Te.tabIndex)},enabled:Af(!1),disabled:Af(!0),checked:function(Te){var Ye=Te.nodeName.toLowerCase();return Ye==="input"&&!!Te.checked||Ye==="option"&&!!Te.selected},selected:function(Te){return Te.parentNode&&Te.parentNode.selectedIndex,Te.selected===!0},empty:function(Te){for(Te=Te.firstChild;Te;Te=Te.nextSibling)if(Te.nodeType<6)return!1;return!0},parent:function(Te){return!W.pseudos.empty(Te)},header:function(Te){return Ia.test(Te.nodeName)},input:function(Te){return xh.test(Te.nodeName)},button:function(Te){var Ye=Te.nodeName.toLowerCase();return Ye==="input"&&Te.type==="button"||Ye==="button"},text:function(Te){var Ye;return Te.nodeName.toLowerCase()==="input"&&Te.type==="text"&&((Ye=Te.getAttribute("type"))==null||Ye.toLowerCase()==="text")},first:lc(function(){return[0]}),last:lc(function(Te,Ye){return[Ye-1]}),eq:lc(function(Te,Ye,lt){return[lt<0?lt+Ye:lt]}),even:lc(function(Te,Ye){for(var lt=0;lt<Ye;lt+=2)Te.push(lt);return Te}),odd:lc(function(Te,Ye){for(var lt=1;lt<Ye;lt+=2)Te.push(lt);return Te}),lt:lc(function(Te,Ye,lt){for(var Tt=lt<0?lt+Ye:lt>Ye?Ye:lt;--Tt>=0;)Te.push(Tt);return Te}),gt:lc(function(Te,Ye,lt){for(var Tt=lt<0?lt+Ye:lt;++Tt<Ye;)Te.push(Tt);return Te})}},W.pseudos.nth=W.pseudos.eq;for(I in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})W.pseudos[I]=Nd(I);for(I in{submit:!0,reset:!0})W.pseudos[I]=_f(I);function Qt(){}Qt.prototype=W.filters=W.pseudos,W.setFilters=new Qt,Ce=fo.tokenize=function(Te,Ye){var lt,Tt,yt,an,Ut,Bn,Zn,wr=Oa[Te+" "];if(wr)return Ye?0:wr.slice(0);for(Ut=Te,Bn=[],Zn=W.preFilter;Ut;){(!lt||(Tt=$u.exec(Ut)))&&(Tt&&(Ut=Ut.slice(Tt[0].length)||Ut),Bn.push(yt=[])),lt=!1,(Tt=Na.exec(Ut))&&(lt=Tt.shift(),yt.push({value:lt,type:Tt[0].replace(Os," ")}),Ut=Ut.slice(lt.length));for(an in W.filter)(Tt=Gl[an].exec(Ut))&&(!Zn[an]||(Tt=Zn[an](Tt)))&&(lt=Tt.shift(),yt.push({value:lt,type:an,matches:Tt}),Ut=Ut.slice(lt.length));if(!lt)break}return Ye?Ut.length:Ut?fo.error(Te):Oa(Te,Bn).slice(0)};function Ft(Te){for(var Ye=0,lt=Te.length,Tt="";Ye<lt;Ye++)Tt+=Te[Ye].value;return Tt}function or(Te,Ye,lt){var Tt=Ye.dir,yt=Ye.next,an=yt||Tt,Ut=lt&&an==="parentNode",Bn=Ni++;return Ye.first?function(Zn,wr,yr){for(;Zn=Zn[Tt];)if(Zn.nodeType===1||Ut)return Te(Zn,wr,yr);return!1}:function(Zn,wr,yr){var Tr,Ci,ci,br=[fi,Bn];if(yr){for(;Zn=Zn[Tt];)if((Zn.nodeType===1||Ut)&&Te(Zn,wr,yr))return!0}else for(;Zn=Zn[Tt];)if(Zn.nodeType===1||Ut)if(ci=Zn[Gr]||(Zn[Gr]={}),Ci=ci[Zn.uniqueID]||(ci[Zn.uniqueID]={}),yt&&yt===Zn.nodeName.toLowerCase())Zn=Zn[Tt]||Zn;else{if((Tr=Ci[an])&&Tr[0]===fi&&Tr[1]===Bn)return br[2]=Tr[2];if(Ci[an]=br,br[2]=Te(Zn,wr,yr))return!0}return!1}}function Hr(Te){return Te.length>1?function(Ye,lt,Tt){for(var yt=Te.length;yt--;)if(!Te[yt](Ye,lt,Tt))return!1;return!0}:Te[0]}function Yi(Te,Ye,lt){for(var Tt=0,yt=Ye.length;Tt<yt;Tt++)fo(Te,Ye[Tt],lt);return lt}function bo(Te,Ye,lt,Tt,yt){for(var an,Ut=[],Bn=0,Zn=Te.length,wr=Ye!=null;Bn<Zn;Bn++)(an=Te[Bn])&&(!lt||lt(an,Tt,yt))&&(Ut.push(an),wr&&Ye.push(Bn));return Ut}function Ji(Te,Ye,lt,Tt,yt,an){return Tt&&!Tt[Gr]&&(Tt=Ji(Tt)),yt&&!yt[Gr]&&(yt=Ji(yt,an)),$o(function(Ut,Bn,Zn,wr){var yr,Tr,Ci,ci=[],br=[],xo=Bn.length,Ui=Ut||Yi(Ye||"*",Zn.nodeType?[Zn]:Zn,[]),ea=Te&&(Ut||!Ye)?bo(Ui,ci,Te,Zn,wr):Ui,Po=lt?yt||(Ut?Te:xo||Tt)?[]:Bn:ea;if(lt&&lt(ea,Po,Zn,wr),Tt)for(yr=bo(Po,br),Tt(yr,[],Zn,wr),Tr=yr.length;Tr--;)(Ci=yr[Tr])&&(Po[br[Tr]]=!(ea[br[Tr]]=Ci));if(Ut){if(yt||Te){if(yt){for(yr=[],Tr=Po.length;Tr--;)(Ci=Po[Tr])&&yr.push(ea[Tr]=Ci);yt(null,Po=[],yr,wr)}for(Tr=Po.length;Tr--;)(Ci=Po[Tr])&&(yr=yt?Bs(Ut,Ci):ci[Tr])>-1&&(Ut[yr]=!(Bn[yr]=Ci))}}else Po=bo(Po===Bn?Po.splice(xo,Po.length):Po),yt?yt(null,Bn,Po,wr):Uc.apply(Bn,Po)})}function Id(Te){for(var Ye,lt,Tt,yt=Te.length,an=W.relative[Te[0].type],Ut=an||W.relative[" "],Bn=an?1:0,Zn=or(function(Tr){return Tr===Ye},Ut,!0),wr=or(function(Tr){return Bs(Ye,Tr)>-1},Ut,!0),yr=[function(Tr,Ci,ci){var br=!an&&(ci||Ci!==mt)||((Ye=Ci).nodeType?Zn(Tr,Ci,ci):wr(Tr,Ci,ci));return Ye=null,br}];Bn<yt;Bn++)if(lt=W.relative[Te[Bn].type])yr=[or(Hr(yr),lt)];else{if(lt=W.filter[Te[Bn].type].apply(null,Te[Bn].matches),lt[Gr]){for(Tt=++Bn;Tt<yt&&!W.relative[Te[Tt].type];Tt++);return Ji(Bn>1&&Hr(yr),Bn>1&&Ft(Te.slice(0,Bn-1).concat({value:Te[Bn-2].type===" "?"*":""})).replace(Os,"$1"),lt,Bn<Tt&&Id(Te.slice(Bn,Tt)),Tt<yt&&Id(Te=Te.slice(Tt)),Tt<yt&&Ft(Te))}yr.push(lt)}return Hr(yr)}function Yu(Te,Ye){var lt=Ye.length>0,Tt=Te.length>0,yt=function(an,Ut,Bn,Zn,wr){var yr,Tr,Ci,ci=0,br="0",xo=an&&[],Ui=[],ea=mt,Po=an||Tt&&W.find.TAG("*",wr),uc=fi+=ea==null?1:Math.random()||.1,ll=Po.length;for(wr&&(mt=Ut==Yt||Ut||wr);br!==ll&&(yr=Po[br])!=null;br++){if(Tt&&yr){for(Tr=0,!Ut&&yr.ownerDocument!=Yt&&(Nt(yr),Bn=!ai);Ci=Te[Tr++];)if(Ci(yr,Ut||Yt,Bn)){Zn.push(yr);break}wr&&(fi=uc)}lt&&((yr=!Ci&&yr)&&ci--,an&&xo.push(yr))}if(ci+=br,lt&&br!==ci){for(Tr=0;Ci=Ye[Tr++];)Ci(xo,Ui,Ut,Bn);if(an){if(ci>0)for(;br--;)xo[br]||Ui[br]||(Ui[br]=Da.call(Zn));Ui=bo(Ui)}Uc.apply(Zn,Ui),wr&&!an&&Ui.length>0&&ci+Ye.length>1&&fo.uniqueSort(Zn)}return wr&&(fi=uc,mt=ea),xo};return lt?$o(yt):yt}return Ke=fo.compile=function(Te,Ye){var lt,Tt=[],yt=[],an=kl[Te+" "];if(!an){for(Ye||(Ye=Ce(Te)),lt=Ye.length;lt--;)an=Id(Ye[lt]),an[Gr]?Tt.push(an):yt.push(an);an=kl(Te,Yu(yt,Tt)),an.selector=Te}return an},Je=fo.select=function(Te,Ye,lt,Tt){var yt,an,Ut,Bn,Zn,wr=typeof Te=="function"&&Te,yr=!Tt&&Ce(Te=wr.selector||Te);if(lt=lt||[],yr.length===1){if(an=yr[0]=yr[0].slice(0),an.length>2&&(Ut=an[0]).type==="ID"&&Ye.nodeType===9&&ai&&W.relative[an[1].type]){if(Ye=(W.find.ID(Ut.matches[0].replace(ga,Jo),Ye)||[])[0],Ye)wr&&(Ye=Ye.parentNode);else return lt;Te=Te.slice(an.shift().value.length)}for(yt=Gl.needsContext.test(Te)?0:an.length;yt--&&(Ut=an[yt],!W.relative[Bn=Ut.type]);)if((Zn=W.find[Bn])&&(Tt=Zn(Ut.matches[0].replace(ga,Jo),Xu.test(an[0].type)&&pt(Ye.parentNode)||Ye))){if(an.splice(yt,1),Te=Tt.length&&Ft(an),!Te)return Uc.apply(lt,Tt),lt;break}}return(wr||Ke(Te,yr))(Tt,Ye,!ai,lt,!Ye||Xu.test(Te)&&pt(Ye.parentNode)||Ye),lt},U.sortStable=Gr.split("").sort(Pa).join("")===Gr,U.detectDuplicates=!!xn,Nt(),U.sortDetached=ma(function(Te){return Te.compareDocumentPosition(Yt.createElement("fieldset"))&1}),ma(function(Te){return Te.innerHTML="<a href='#'></a>",Te.firstChild.getAttribute("href")==="#"})||Qs("type|href|height|width",function(Te,Ye,lt){if(!lt)return Te.getAttribute(Ye,Ye.toLowerCase()==="type"?1:2)}),(!U.attributes||!ma(function(Te){return Te.innerHTML="<input/>",Te.firstChild.setAttribute("value",""),Te.firstChild.getAttribute("value")===""}))&&Qs("value",function(Te,Ye,lt){if(!lt&&Te.nodeName.toLowerCase()==="input")return Te.defaultValue}),ma(function(Te){return Te.getAttribute("disabled")==null})||Qs(Xa,function(Te,Ye,lt){var Tt;if(!lt)return Te[Ye]===!0?Ye.toLowerCase():(Tt=Te.getAttributeNode(Ye))&&Tt.specified?Tt.value:null}),fo}(R);G.find=He,G.expr=He.selectors,G.expr[":"]=G.expr.pseudos,G.uniqueSort=G.unique=He.uniqueSort,G.text=He.getText,G.isXMLDoc=He.isXML,G.contains=He.contains,G.escapeSelector=He.escape;var et=function(S,I,U){for(var W=[],se=U!==void 0;(S=S[I])&&S.nodeType!==9;)if(S.nodeType===1){if(se&&G(S).is(U))break;W.push(S)}return W},Bt=function(S,I){for(var U=[];S;S=S.nextSibling)S.nodeType===1&&S!==I&&U.push(S);return U},Mn=G.expr.match.needsContext;function ye(S,I){return S.nodeName&&S.nodeName.toLowerCase()===I.toLowerCase()}var Ct=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Pn(S,I,U){return ae(I)?G.grep(S,function(W,se){return!!I.call(W,se,W)!==U}):I.nodeType?G.grep(S,function(W){return W===I!==U}):typeof I!="string"?G.grep(S,function(W){return oe.call(I,W)>-1!==U}):G.filter(I,S,U)}G.filter=function(S,I,U){var W=I[0];return U&&(S=":not("+S+")"),I.length===1&&W.nodeType===1?G.find.matchesSelector(W,S)?[W]:[]:G.find.matches(S,G.grep(I,function(se){return se.nodeType===1}))},G.fn.extend({find:function(S){var I,U,W=this.length,se=this;if(typeof S!="string")return this.pushStack(G(S).filter(function(){for(I=0;I<W;I++)if(G.contains(se[I],this))return!0}));for(U=this.pushStack([]),I=0;I<W;I++)G.find(S,se[I],U);return W>1?G.uniqueSort(U):U},filter:function(S){return this.pushStack(Pn(this,S||[],!1))},not:function(S){return this.pushStack(Pn(this,S||[],!0))},is:function(S){return!!Pn(this,typeof S=="string"&&Mn.test(S)?G(S):S||[],!1).length}});var jt,cn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,qn=G.fn.init=function(S,I,U){var W,se;if(!S)return this;if(U=U||jt,typeof S=="string")if(S[0]==="<"&&S[S.length-1]===">"&&S.length>=3?W=[null,S,null]:W=cn.exec(S),W&&(W[1]||!I))if(W[1]){if(I=I instanceof G?I[0]:I,G.merge(this,G.parseHTML(W[1],I&&I.nodeType?I.ownerDocument||I:fe,!0)),Ct.test(W[1])&&G.isPlainObject(I))for(W in I)ae(this[W])?this[W](I[W]):this.attr(W,I[W]);return this}else return se=fe.getElementById(W[2]),se&&(this[0]=se,this.length=1),this;else return!I||I.jquery?(I||U).find(S):this.constructor(I).find(S);else{if(S.nodeType)return this[0]=S,this.length=1,this;if(ae(S))return U.ready!==void 0?U.ready(S):S(G)}return G.makeArray(S,this)};qn.prototype=G.fn,jt=G(fe);var on=/^(?:parents|prev(?:Until|All))/,lo={children:!0,contents:!0,next:!0,prev:!0};G.fn.extend({has:function(S){var I=G(S,this),U=I.length;return this.filter(function(){for(var W=0;W<U;W++)if(G.contains(this,I[W]))return!0})},closest:function(S,I){var U,W=0,se=this.length,le=[],Ce=typeof S!="string"&&G(S);if(!Mn.test(S)){for(;W<se;W++)for(U=this[W];U&&U!==I;U=U.parentNode)if(U.nodeType<11&&(Ce?Ce.index(U)>-1:U.nodeType===1&&G.find.matchesSelector(U,S))){le.push(U);break}}return this.pushStack(le.length>1?G.uniqueSort(le):le)},index:function(S){return S?typeof S=="string"?oe.call(G(S),this[0]):oe.call(this,S.jquery?S[0]:S):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(S,I){return this.pushStack(G.uniqueSort(G.merge(this.get(),G(S,I))))},addBack:function(S){return this.add(S==null?this.prevObject:this.prevObject.filter(S))}});function Zi(S,I){for(;(S=S[I])&&S.nodeType!==1;);return S}G.each({parent:function(S){var I=S.parentNode;return I&&I.nodeType!==11?I:null},parents:function(S){return et(S,"parentNode")},parentsUntil:function(S,I,U){return et(S,"parentNode",U)},next:function(S){return Zi(S,"nextSibling")},prev:function(S){return Zi(S,"previousSibling")},nextAll:function(S){return et(S,"nextSibling")},prevAll:function(S){return et(S,"previousSibling")},nextUntil:function(S,I,U){return et(S,"nextSibling",U)},prevUntil:function(S,I,U){return et(S,"previousSibling",U)},siblings:function(S){return Bt((S.parentNode||{}).firstChild,S)},children:function(S){return Bt(S.firstChild)},contents:function(S){return S.contentDocument!=null&&Z(S.contentDocument)?S.contentDocument:(ye(S,"template")&&(S=S.content||S),G.merge([],S.childNodes))}},function(S,I){G.fn[S]=function(U,W){var se=G.map(this,I,U);return S.slice(-5)!=="Until"&&(W=U),W&&typeof W=="string"&&(se=G.filter(W,se)),this.length>1&&(lo[S]||G.uniqueSort(se),on.test(S)&&se.reverse()),this.pushStack(se)}});var Xn=/[^\x20\t\r\n\f]+/g;function Ar(S){var I={};return G.each(S.match(Xn)||[],function(U,W){I[W]=!0}),I}G.Callbacks=function(S){S=typeof S=="string"?Ar(S):G.extend({},S);var I,U,W,se,le=[],Ce=[],Ke=-1,Je=function(){for(se=se||S.once,W=I=!0;Ce.length;Ke=-1)for(U=Ce.shift();++Ke<le.length;)le[Ke].apply(U[0],U[1])===!1&&S.stopOnFalse&&(Ke=le.length,U=!1);S.memory||(U=!1),I=!1,se&&(U?le=[]:le="")},mt={add:function(){return le&&(U&&!I&&(Ke=le.length-1,Ce.push(U)),function zt(xn){G.each(xn,function(Nt,Yt){ae(Yt)?(!S.unique||!mt.has(Yt))&&le.push(Yt):Yt&&Yt.length&&Ae(Yt)!=="string"&&zt(Yt)})}(arguments),U&&!I&&Je()),this},remove:function(){return G.each(arguments,function(zt,xn){for(var Nt;(Nt=G.inArray(xn,le,Nt))>-1;)le.splice(Nt,1),Nt<=Ke&&Ke--}),this},has:function(zt){return zt?G.inArray(zt,le)>-1:le.length>0},empty:function(){return le&&(le=[]),this},disable:function(){return se=Ce=[],le=U="",this},disabled:function(){return!le},lock:function(){return se=Ce=[],!U&&!I&&(le=U=""),this},locked:function(){return!!se},fireWith:function(zt,xn){return se||(xn=xn||[],xn=[zt,xn.slice?xn.slice():xn],Ce.push(xn),I||Je()),this},fire:function(){return mt.fireWith(this,arguments),this},fired:function(){return!!W}};return mt};function lr(S){return S}function Ir(S){throw S}function Oi(S,I,U,W){var se;try{S&&ae(se=S.promise)?se.call(S).done(I).fail(U):S&&ae(se=S.then)?se.call(S,I,U):I.apply(void 0,[S].slice(W))}catch(le){U.apply(void 0,[le])}}G.extend({Deferred:function(S){var I=[["notify","progress",G.Callbacks("memory"),G.Callbacks("memory"),2],["resolve","done",G.Callbacks("once memory"),G.Callbacks("once memory"),0,"resolved"],["reject","fail",G.Callbacks("once memory"),G.Callbacks("once memory"),1,"rejected"]],U="pending",W={state:function(){return U},always:function(){return se.done(arguments).fail(arguments),this},catch:function(le){return W.then(null,le)},pipe:function(){var le=arguments;return G.Deferred(function(Ce){G.each(I,function(Ke,Je){var mt=ae(le[Je[4]])&&le[Je[4]];se[Je[1]](function(){var zt=mt&&mt.apply(this,arguments);zt&&ae(zt.promise)?zt.promise().progress(Ce.notify).done(Ce.resolve).fail(Ce.reject):Ce[Je[0]+"With"](this,mt?[zt]:arguments)})}),le=null}).promise()},then:function(le,Ce,Ke){var Je=0;function mt(zt,xn,Nt,Yt){return function(){var Wn=this,ai=arguments,mr=function(){var Mo,pa;if(!(zt<Je)){if(Mo=Nt.apply(Wn,ai),Mo===xn.promise())throw new TypeError("Thenable self-resolution");pa=Mo&&(typeof Mo=="object"||typeof Mo=="function")&&Mo.then,ae(pa)?Yt?pa.call(Mo,mt(Je,xn,lr,Yt),mt(Je,xn,Ir,Yt)):(Je++,pa.call(Mo,mt(Je,xn,lr,Yt),mt(Je,xn,Ir,Yt),mt(Je,xn,lr,xn.notifyWith))):(Nt!==lr&&(Wn=void 0,ai=[Mo]),(Yt||xn.resolveWith)(Wn,ai))}},mo=Yt?mr:function(){try{mr()}catch(Mo){G.Deferred.exceptionHook&&G.Deferred.exceptionHook(Mo,mo.stackTrace),zt+1>=Je&&(Nt!==Ir&&(Wn=void 0,ai=[Mo]),xn.rejectWith(Wn,ai))}};zt?mo():(G.Deferred.getStackHook&&(mo.stackTrace=G.Deferred.getStackHook()),R.setTimeout(mo))}}return G.Deferred(function(zt){I[0][3].add(mt(0,zt,ae(Ke)?Ke:lr,zt.notifyWith)),I[1][3].add(mt(0,zt,ae(le)?le:lr)),I[2][3].add(mt(0,zt,ae(Ce)?Ce:Ir))}).promise()},promise:function(le){return le!=null?G.extend(le,W):W}},se={};return G.each(I,function(le,Ce){var Ke=Ce[2],Je=Ce[5];W[Ce[1]]=Ke.add,Je&&Ke.add(function(){U=Je},I[3-le][2].disable,I[3-le][3].disable,I[0][2].lock,I[0][3].lock),Ke.add(Ce[3].fire),se[Ce[0]]=function(){return se[Ce[0]+"With"](this===se?void 0:this,arguments),this},se[Ce[0]+"With"]=Ke.fireWith}),W.promise(se),S&&S.call(se,se),se},when:function(S){var I=arguments.length,U=I,W=Array(U),se=te.call(arguments),le=G.Deferred(),Ce=function(Ke){return function(Je){W[Ke]=this,se[Ke]=arguments.length>1?te.call(arguments):Je,--I||le.resolveWith(W,se)}};if(I<=1&&(Oi(S,le.done(Ce(U)).resolve,le.reject,!I),le.state()==="pending"||ae(se[U]&&se[U].then)))return le.then();for(;U--;)Oi(se[U],Ce(U),le.reject);return le.promise()}});var Bi=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;G.Deferred.exceptionHook=function(S,I){R.console&&R.console.warn&&S&&Bi.test(S.name)&&R.console.warn("jQuery.Deferred exception: "+S.message,S.stack,I)},G.readyException=function(S){R.setTimeout(function(){throw S})};var Kr=G.Deferred();G.fn.ready=function(S){return Kr.then(S).catch(function(I){G.readyException(I)}),this},G.extend({isReady:!1,readyWait:1,ready:function(S){(S===!0?--G.readyWait:G.isReady)||(G.isReady=!0,!(S!==!0&&--G.readyWait>0)&&Kr.resolveWith(fe,[G]))}}),G.ready.then=Kr.then;function eo(){fe.removeEventListener("DOMContentLoaded",eo),R.removeEventListener("load",eo),G.ready()}fe.readyState==="complete"||fe.readyState!=="loading"&&!fe.documentElement.doScroll?R.setTimeout(G.ready):(fe.addEventListener("DOMContentLoaded",eo),R.addEventListener("load",eo));var Ts=function(S,I,U,W,se,le,Ce){var Ke=0,Je=S.length,mt=U==null;if(Ae(U)==="object"){se=!0;for(Ke in U)Ts(S,I,Ke,U[Ke],!0,le,Ce)}else if(W!==void 0&&(se=!0,ae(W)||(Ce=!0),mt&&(Ce?(I.call(S,W),I=null):(mt=I,I=function(zt,xn,Nt){return mt.call(G(zt),Nt)})),I))for(;Ke<Je;Ke++)I(S[Ke],U,Ce?W:W.call(S[Ke],Ke,I(S[Ke],U)));return se?S:mt?I.call(S):Je?I(S[0],U):le},Ks=/^-ms-/,bs=/-([a-z])/g;function Zo(S,I){return I.toUpperCase()}function oi(S){return S.replace(Ks,"ms-").replace(bs,Zo)}var Hi=function(S){return S.nodeType===1||S.nodeType===9||!+S.nodeType};function xi(){this.expando=G.expando+xi.uid++}xi.uid=1,xi.prototype={cache:function(S){var I=S[this.expando];return I||(I={},Hi(S)&&(S.nodeType?S[this.expando]=I:Object.defineProperty(S,this.expando,{value:I,configurable:!0}))),I},set:function(S,I,U){var W,se=this.cache(S);if(typeof I=="string")se[oi(I)]=U;else for(W in I)se[oi(W)]=I[W];return se},get:function(S,I){return I===void 0?this.cache(S):S[this.expando]&&S[this.expando][oi(I)]},access:function(S,I,U){return I===void 0||I&&typeof I=="string"&&U===void 0?this.get(S,I):(this.set(S,I,U),U!==void 0?U:I)},remove:function(S,I){var U,W=S[this.expando];if(W!==void 0){if(I!==void 0)for(Array.isArray(I)?I=I.map(oi):(I=oi(I),I=I in W?[I]:I.match(Xn)||[]),U=I.length;U--;)delete W[I[U]];(I===void 0||G.isEmptyObject(W))&&(S.nodeType?S[this.expando]=void 0:delete S[this.expando])}},hasData:function(S){var I=S[this.expando];return I!==void 0&&!G.isEmptyObject(I)}};var F=new xi,H=new xi,mf=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Oe=/[A-Z]/g;function ac(S){return S==="true"?!0:S==="false"?!1:S==="null"?null:S===+S+""?+S:mf.test(S)?JSON.parse(S):S}function ur(S,I,U){var W;if(U===void 0&&S.nodeType===1)if(W="data-"+I.replace(Oe,"-$&").toLowerCase(),U=S.getAttribute(W),typeof U=="string"){try{U=ac(U)}catch{}H.set(S,I,U)}else U=void 0;return U}G.extend({hasData:function(S){return H.hasData(S)||F.hasData(S)},data:function(S,I,U){return H.access(S,I,U)},removeData:function(S,I){H.remove(S,I)},_data:function(S,I,U){return F.access(S,I,U)},_removeData:function(S,I){F.remove(S,I)}}),G.fn.extend({data:function(S,I){var U,W,se,le=this[0],Ce=le&&le.attributes;if(S===void 0){if(this.length&&(se=H.get(le),le.nodeType===1&&!F.get(le,"hasDataAttrs"))){for(U=Ce.length;U--;)Ce[U]&&(W=Ce[U].name,W.indexOf("data-")===0&&(W=oi(W.slice(5)),ur(le,W,se[W])));F.set(le,"hasDataAttrs",!0)}return se}return typeof S=="object"?this.each(function(){H.set(this,S)}):Ts(this,function(Ke){var Je;if(le&&Ke===void 0)return Je=H.get(le,S),Je!==void 0||(Je=ur(le,S),Je!==void 0)?Je:void 0;this.each(function(){H.set(this,S,Ke)})},null,I,arguments.length>1,null,!0)},removeData:function(S){return this.each(function(){H.remove(this,S)})}}),G.extend({queue:function(S,I,U){var W;if(S)return I=(I||"fx")+"queue",W=F.get(S,I),U&&(!W||Array.isArray(U)?W=F.access(S,I,G.makeArray(U)):W.push(U)),W||[]},dequeue:function(S,I){I=I||"fx";var U=G.queue(S,I),W=U.length,se=U.shift(),le=G._queueHooks(S,I),Ce=function(){G.dequeue(S,I)};se==="inprogress"&&(se=U.shift(),W--),se&&(I==="fx"&&U.unshift("inprogress"),delete le.stop,se.call(S,Ce,le)),!W&&le&&le.empty.fire()},_queueHooks:function(S,I){var U=I+"queueHooks";return F.get(S,U)||F.access(S,U,{empty:G.Callbacks("once memory").add(function(){F.remove(S,[I+"queue",U])})})}}),G.fn.extend({queue:function(S,I){var U=2;return typeof S!="string"&&(I=S,S="fx",U--),arguments.length<U?G.queue(this[0],S):I===void 0?this:this.each(function(){var W=G.queue(this,S,I);G._queueHooks(this,S),S==="fx"&&W[0]!=="inprogress"&&G.dequeue(this,S)})},dequeue:function(S){return this.each(function(){G.dequeue(this,S)})},clearQueue:function(S){return this.queue(S||"fx",[])},promise:function(S,I){var U,W=1,se=G.Deferred(),le=this,Ce=this.length,Ke=function(){--W||se.resolveWith(le,[le])};for(typeof S!="string"&&(I=S,S=void 0),S=S||"fx";Ce--;)U=F.get(le[Ce],S+"queueHooks"),U&&U.empty&&(W++,U.empty.add(Ke));return Ke(),se.promise(I)}});var ua=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,il=new RegExp("^(?:([+-])=|)("+ua+")([a-z%]*)$","i"),Ro=["Top","Right","Bottom","Left"],Wa=fe.documentElement,At=function(S){return G.contains(S.ownerDocument,S)},Jt={composed:!0};Wa.getRootNode&&(At=function(S){return G.contains(S.ownerDocument,S)||S.getRootNode(Jt)===S.ownerDocument});var Mt=function(S,I){return S=I||S,S.style.display==="none"||S.style.display===""&&At(S)&&G.css(S,"display")==="none"};function un(S,I,U,W){var se,le,Ce=20,Ke=W?function(){return W.cur()}:function(){return G.css(S,I,"")},Je=Ke(),mt=U&&U[3]||(G.cssNumber[I]?"":"px"),zt=S.nodeType&&(G.cssNumber[I]||mt!=="px"&&+Je)&&il.exec(G.css(S,I));if(zt&&zt[3]!==mt){for(Je=Je/2,mt=mt||zt[3],zt=+Je||1;Ce--;)G.style(S,I,zt+mt),(1-le)*(1-(le=Ke()/Je||.5))<=0&&(Ce=0),zt=zt/le;zt=zt*2,G.style(S,I,zt+mt),U=U||[]}return U&&(zt=+zt||+Je||0,se=U[1]?zt+(U[1]+1)*U[2]:+U[2],W&&(W.unit=mt,W.start=zt,W.end=se)),se}var Qn={};function zi(S){var I,U=S.ownerDocument,W=S.nodeName,se=Qn[W];return se||(I=U.body.appendChild(U.createElement(W)),se=G.css(I,"display"),I.parentNode.removeChild(I),se==="none"&&(se="block"),Qn[W]=se,se)}function Lr(S,I){for(var U,W,se=[],le=0,Ce=S.length;le<Ce;le++)W=S[le],W.style&&(U=W.style.display,I?(U==="none"&&(se[le]=F.get(W,"display")||null,se[le]||(W.style.display="")),W.style.display===""&&Mt(W)&&(se[le]=zi(W))):U!=="none"&&(se[le]="none",F.set(W,"display",U)));for(le=0;le<Ce;le++)se[le]!=null&&(S[le].style.display=se[le]);return S}G.fn.extend({show:function(){return Lr(this,!0)},hide:function(){return Lr(this)},toggle:function(S){return typeof S=="boolean"?S?this.show():this.hide():this.each(function(){Mt(this)?G(this).show():G(this).hide()})}});var jr=/^(?:checkbox|radio)$/i,Sr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,qr=/^$|^module$|\/(?:java|ecma)script/i;(function(){var S=fe.createDocumentFragment(),I=S.appendChild(fe.createElement("div")),U=fe.createElement("input");U.setAttribute("type","radio"),U.setAttribute("checked","checked"),U.setAttribute("name","t"),I.appendChild(U),xe.checkClone=I.cloneNode(!0).cloneNode(!0).lastChild.checked,I.innerHTML="<textarea>x</textarea>",xe.noCloneChecked=!!I.cloneNode(!0).lastChild.defaultValue,I.innerHTML="<option></option>",xe.option=!!I.lastChild})();var Xr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xr.tbody=Xr.tfoot=Xr.colgroup=Xr.caption=Xr.thead,Xr.th=Xr.td,xe.option||(Xr.optgroup=Xr.option=[1,"<select multiple='multiple'>","</select>"]);function ko(S,I){var U;return typeof S.getElementsByTagName<"u"?U=S.getElementsByTagName(I||"*"):typeof S.querySelectorAll<"u"?U=S.querySelectorAll(I||"*"):U=[],I===void 0||I&&ye(S,I)?G.merge([S],U):U}function Bc(S,I){for(var U=0,W=S.length;U<W;U++)F.set(S[U],"globalEval",!I||F.get(I[U],"globalEval"))}var Cg=/<|&#?\w+;/;function yf(S,I,U,W,se){for(var le,Ce,Ke,Je,mt,zt,xn=I.createDocumentFragment(),Nt=[],Yt=0,Wn=S.length;Yt<Wn;Yt++)if(le=S[Yt],le||le===0)if(Ae(le)==="object")G.merge(Nt,le.nodeType?[le]:le);else if(!Cg.test(le))Nt.push(I.createTextNode(le));else{for(Ce=Ce||xn.appendChild(I.createElement("div")),Ke=(Sr.exec(le)||["",""])[1].toLowerCase(),Je=Xr[Ke]||Xr._default,Ce.innerHTML=Je[1]+G.htmlPrefilter(le)+Je[2],zt=Je[0];zt--;)Ce=Ce.lastChild;G.merge(Nt,Ce.childNodes),Ce=xn.firstChild,Ce.textContent=""}for(xn.textContent="",Yt=0;le=Nt[Yt++];){if(W&&G.inArray(le,W)>-1){se&&se.push(le);continue}if(mt=At(le),Ce=ko(xn.appendChild(le),"script"),mt&&Bc(Ce),U)for(zt=0;le=Ce[zt++];)qr.test(le.type||"")&&U.push(le)}return xn}var fh=/^([^.]*)(?:\.(.+)|)/;function Sc(){return!0}function xs(){return!1}function dp(S,I){return S===Ed()==(I==="focus")}function Ed(){try{return fe.activeElement}catch{}}function Yo(S,I,U,W,se,le){var Ce,Ke;if(typeof I=="object"){typeof U!="string"&&(W=W||U,U=void 0);for(Ke in I)Yo(S,Ke,U,W,I[Ke],le);return S}if(W==null&&se==null?(se=U,W=U=void 0):se==null&&(typeof U=="string"?(se=W,W=void 0):(se=W,W=U,U=void 0)),se===!1)se=xs;else if(!se)return S;return le===1&&(Ce=se,se=function(Je){return G().off(Je),Ce.apply(this,arguments)},se.guid=Ce.guid||(Ce.guid=G.guid++)),S.each(function(){G.event.add(this,I,se,W,U)})}G.event={global:{},add:function(S,I,U,W,se){var le,Ce,Ke,Je,mt,zt,xn,Nt,Yt,Wn,ai,mr=F.get(S);if(!!Hi(S))for(U.handler&&(le=U,U=le.handler,se=le.selector),se&&G.find.matchesSelector(Wa,se),U.guid||(U.guid=G.guid++),(Je=mr.events)||(Je=mr.events=Object.create(null)),(Ce=mr.handle)||(Ce=mr.handle=function(mo){return typeof G<"u"&&G.event.triggered!==mo.type?G.event.dispatch.apply(S,arguments):void 0}),I=(I||"").match(Xn)||[""],mt=I.length;mt--;)Ke=fh.exec(I[mt])||[],Yt=ai=Ke[1],Wn=(Ke[2]||"").split(".").sort(),Yt&&(xn=G.event.special[Yt]||{},Yt=(se?xn.delegateType:xn.bindType)||Yt,xn=G.event.special[Yt]||{},zt=G.extend({type:Yt,origType:ai,data:W,handler:U,guid:U.guid,selector:se,needsContext:se&&G.expr.match.needsContext.test(se),namespace:Wn.join(".")},le),(Nt=Je[Yt])||(Nt=Je[Yt]=[],Nt.delegateCount=0,(!xn.setup||xn.setup.call(S,W,Wn,Ce)===!1)&&S.addEventListener&&S.addEventListener(Yt,Ce)),xn.add&&(xn.add.call(S,zt),zt.handler.guid||(zt.handler.guid=U.guid)),se?Nt.splice(Nt.delegateCount++,0,zt):Nt.push(zt),G.event.global[Yt]=!0)},remove:function(S,I,U,W,se){var le,Ce,Ke,Je,mt,zt,xn,Nt,Yt,Wn,ai,mr=F.hasData(S)&&F.get(S);if(!(!mr||!(Je=mr.events))){for(I=(I||"").match(Xn)||[""],mt=I.length;mt--;){if(Ke=fh.exec(I[mt])||[],Yt=ai=Ke[1],Wn=(Ke[2]||"").split(".").sort(),!Yt){for(Yt in Je)G.event.remove(S,Yt+I[mt],U,W,!0);continue}for(xn=G.event.special[Yt]||{},Yt=(W?xn.delegateType:xn.bindType)||Yt,Nt=Je[Yt]||[],Ke=Ke[2]&&new RegExp("(^|\\.)"+Wn.join("\\.(?:.*\\.|)")+"(\\.|$)"),Ce=le=Nt.length;le--;)zt=Nt[le],(se||ai===zt.origType)&&(!U||U.guid===zt.guid)&&(!Ke||Ke.test(zt.namespace))&&(!W||W===zt.selector||W==="**"&&zt.selector)&&(Nt.splice(le,1),zt.selector&&Nt.delegateCount--,xn.remove&&xn.remove.call(S,zt));Ce&&!Nt.length&&((!xn.teardown||xn.teardown.call(S,Wn,mr.handle)===!1)&&G.removeEvent(S,Yt,mr.handle),delete Je[Yt])}G.isEmptyObject(Je)&&F.remove(S,"handle events")}},dispatch:function(S){var I,U,W,se,le,Ce,Ke=new Array(arguments.length),Je=G.event.fix(S),mt=(F.get(this,"events")||Object.create(null))[Je.type]||[],zt=G.event.special[Je.type]||{};for(Ke[0]=Je,I=1;I<arguments.length;I++)Ke[I]=arguments[I];if(Je.delegateTarget=this,!(zt.preDispatch&&zt.preDispatch.call(this,Je)===!1)){for(Ce=G.event.handlers.call(this,Je,mt),I=0;(se=Ce[I++])&&!Je.isPropagationStopped();)for(Je.currentTarget=se.elem,U=0;(le=se.handlers[U++])&&!Je.isImmediatePropagationStopped();)(!Je.rnamespace||le.namespace===!1||Je.rnamespace.test(le.namespace))&&(Je.handleObj=le,Je.data=le.data,W=((G.event.special[le.origType]||{}).handle||le.handler).apply(se.elem,Ke),W!==void 0&&(Je.result=W)===!1&&(Je.preventDefault(),Je.stopPropagation()));return zt.postDispatch&&zt.postDispatch.call(this,Je),Je.result}},handlers:function(S,I){var U,W,se,le,Ce,Ke=[],Je=I.delegateCount,mt=S.target;if(Je&&mt.nodeType&&!(S.type==="click"&&S.button>=1)){for(;mt!==this;mt=mt.parentNode||this)if(mt.nodeType===1&&!(S.type==="click"&&mt.disabled===!0)){for(le=[],Ce={},U=0;U<Je;U++)W=I[U],se=W.selector+" ",Ce[se]===void 0&&(Ce[se]=W.needsContext?G(se,this).index(mt)>-1:G.find(se,this,null,[mt]).length),Ce[se]&&le.push(W);le.length&&Ke.push({elem:mt,handlers:le})}}return mt=this,Je<I.length&&Ke.push({elem:mt,handlers:I.slice(Je)}),Ke},addProp:function(S,I){Object.defineProperty(G.Event.prototype,S,{enumerable:!0,configurable:!0,get:ae(I)?function(){if(this.originalEvent)return I(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[S]},set:function(U){Object.defineProperty(this,S,{enumerable:!0,configurable:!0,writable:!0,value:U})}})},fix:function(S){return S[G.expando]?S:new G.Event(S)},special:{load:{noBubble:!0},click:{setup:function(S){var I=this||S;return jr.test(I.type)&&I.click&&ye(I,"input")&&ph(I,"click",Sc),!1},trigger:function(S){var I=this||S;return jr.test(I.type)&&I.click&&ye(I,"input")&&ph(I,"click"),!0},_default:function(S){var I=S.target;return jr.test(I.type)&&I.click&&ye(I,"input")&&F.get(I,"click")||ye(I,"a")}},beforeunload:{postDispatch:function(S){S.result!==void 0&&S.originalEvent&&(S.originalEvent.returnValue=S.result)}}}};function ph(S,I,U){if(!U){F.get(S,I)===void 0&&G.event.add(S,I,Sc);return}F.set(S,I,!1),G.event.add(S,I,{namespace:!1,handler:function(W){var se,le,Ce=F.get(this,I);if(W.isTrigger&1&&this[I]){if(Ce.length)(G.event.special[I]||{}).delegateType&&W.stopPropagation();else if(Ce=te.call(arguments),F.set(this,I,Ce),se=U(this,I),this[I](),le=F.get(this,I),Ce!==le||se?F.set(this,I,!1):le={},Ce!==le)return W.stopImmediatePropagation(),W.preventDefault(),le&&le.value}else Ce.length&&(F.set(this,I,{value:G.event.trigger(G.extend(Ce[0],G.Event.prototype),Ce.slice(1),this)}),W.stopImmediatePropagation())}})}G.removeEvent=function(S,I,U){S.removeEventListener&&S.removeEventListener(I,U)},G.Event=function(S,I){if(!(this instanceof G.Event))return new G.Event(S,I);S&&S.type?(this.originalEvent=S,this.type=S.type,this.isDefaultPrevented=S.defaultPrevented||S.defaultPrevented===void 0&&S.returnValue===!1?Sc:xs,this.target=S.target&&S.target.nodeType===3?S.target.parentNode:S.target,this.currentTarget=S.currentTarget,this.relatedTarget=S.relatedTarget):this.type=S,I&&G.extend(this,I),this.timeStamp=S&&S.timeStamp||Date.now(),this[G.expando]=!0},G.Event.prototype={constructor:G.Event,isDefaultPrevented:xs,isPropagationStopped:xs,isImmediatePropagationStopped:xs,isSimulated:!1,preventDefault:function(){var S=this.originalEvent;this.isDefaultPrevented=Sc,S&&!this.isSimulated&&S.preventDefault()},stopPropagation:function(){var S=this.originalEvent;this.isPropagationStopped=Sc,S&&!this.isSimulated&&S.stopPropagation()},stopImmediatePropagation:function(){var S=this.originalEvent;this.isImmediatePropagationStopped=Sc,S&&!this.isSimulated&&S.stopImmediatePropagation(),this.stopPropagation()}},G.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},G.event.addProp),G.each({focus:"focusin",blur:"focusout"},function(S,I){G.event.special[S]={setup:function(){return ph(this,S,dp),!1},trigger:function(){return ph(this,S),!0},_default:function(){return!0},delegateType:I}}),G.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(S,I){G.event.special[S]={delegateType:I,bindType:I,handle:function(U){var W,se=this,le=U.relatedTarget,Ce=U.handleObj;return(!le||le!==se&&!G.contains(se,le))&&(U.type=Ce.origType,W=Ce.handler.apply(this,arguments),U.type=I),W}}}),G.fn.extend({on:function(S,I,U,W){return Yo(this,S,I,U,W)},one:function(S,I,U,W){return Yo(this,S,I,U,W,1)},off:function(S,I,U){var W,se;if(S&&S.preventDefault&&S.handleObj)return W=S.handleObj,G(S.delegateTarget).off(W.namespace?W.origType+"."+W.namespace:W.origType,W.selector,W.handler),this;if(typeof S=="object"){for(se in S)this.off(se,I,S[se]);return this}return(I===!1||typeof I=="function")&&(U=I,I=void 0),U===!1&&(U=xs),this.each(function(){G.event.remove(this,S,U,I)})}});var Al=/<script|<style|<link/i,hp=/checked\s*(?:[^=]|=\s*.checked.)/i,ou=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function $i(S,I){return ye(S,"table")&&ye(I.nodeType!==11?I:I.firstChild,"tr")&&G(S).children("tbody")[0]||S}function uo(S){return S.type=(S.getAttribute("type")!==null)+"/"+S.type,S}function ti(S){return(S.type||"").slice(0,5)==="true/"?S.type=S.type.slice(5):S.removeAttribute("type"),S}function To(S,I){var U,W,se,le,Ce,Ke,Je;if(I.nodeType===1){if(F.hasData(S)&&(le=F.get(S),Je=le.events,Je)){F.remove(I,"handle events");for(se in Je)for(U=0,W=Je[se].length;U<W;U++)G.event.add(I,se,Je[se][U])}H.hasData(S)&&(Ce=H.access(S),Ke=G.extend({},Ce),H.set(I,Ke))}}function Ms(S,I){var U=I.nodeName.toLowerCase();U==="input"&&jr.test(S.type)?I.checked=S.checked:(U==="input"||U==="textarea")&&(I.defaultValue=S.defaultValue)}function su(S,I,U,W){I=Q(I);var se,le,Ce,Ke,Je,mt,zt=0,xn=S.length,Nt=xn-1,Yt=I[0],Wn=ae(Yt);if(Wn||xn>1&&typeof Yt=="string"&&!xe.checkClone&&hp.test(Yt))return S.each(function(ai){var mr=S.eq(ai);Wn&&(I[0]=Yt.call(this,ai,mr.html())),su(mr,I,U,W)});if(xn&&(se=yf(I,S[0].ownerDocument,!1,S,W),le=se.firstChild,se.childNodes.length===1&&(se=le),le||W)){for(Ce=G.map(ko(se,"script"),uo),Ke=Ce.length;zt<xn;zt++)Je=se,zt!==Nt&&(Je=G.clone(Je,!0,!0),Ke&&G.merge(Ce,ko(Je,"script"))),U.call(S[zt],Je,zt);if(Ke)for(mt=Ce[Ce.length-1].ownerDocument,G.map(Ce,ti),zt=0;zt<Ke;zt++)Je=Ce[zt],qr.test(Je.type||"")&&!F.access(Je,"globalEval")&&G.contains(mt,Je)&&(Je.src&&(Je.type||"").toLowerCase()!=="module"?G._evalUrl&&!Je.noModule&&G._evalUrl(Je.src,{nonce:Je.nonce||Je.getAttribute("nonce")},mt):pe(Je.textContent.replace(ou,""),Je,mt))}return S}function fp(S,I,U){for(var W,se=I?G.filter(I,S):S,le=0;(W=se[le])!=null;le++)!U&&W.nodeType===1&&G.cleanData(ko(W)),W.parentNode&&(U&&At(W)&&Bc(ko(W,"script")),W.parentNode.removeChild(W));return S}G.extend({htmlPrefilter:function(S){return S},clone:function(S,I,U){var W,se,le,Ce,Ke=S.cloneNode(!0),Je=At(S);if(!xe.noCloneChecked&&(S.nodeType===1||S.nodeType===11)&&!G.isXMLDoc(S))for(Ce=ko(Ke),le=ko(S),W=0,se=le.length;W<se;W++)Ms(le[W],Ce[W]);if(I)if(U)for(le=le||ko(S),Ce=Ce||ko(Ke),W=0,se=le.length;W<se;W++)To(le[W],Ce[W]);else To(S,Ke);return Ce=ko(Ke,"script"),Ce.length>0&&Bc(Ce,!Je&&ko(S,"script")),Ke},cleanData:function(S){for(var I,U,W,se=G.event.special,le=0;(U=S[le])!==void 0;le++)if(Hi(U)){if(I=U[F.expando]){if(I.events)for(W in I.events)se[W]?G.event.remove(U,W):G.removeEvent(U,W,I.handle);U[F.expando]=void 0}U[H.expando]&&(U[H.expando]=void 0)}}}),G.fn.extend({detach:function(S){return fp(this,S,!0)},remove:function(S){return fp(this,S)},text:function(S){return Ts(this,function(I){return I===void 0?G.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=I)})},null,S,arguments.length)},append:function(){return su(this,arguments,function(S){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var I=$i(this,S);I.appendChild(S)}})},prepend:function(){return su(this,arguments,function(S){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var I=$i(this,S);I.insertBefore(S,I.firstChild)}})},before:function(){return su(this,arguments,function(S){this.parentNode&&this.parentNode.insertBefore(S,this)})},after:function(){return su(this,arguments,function(S){this.parentNode&&this.parentNode.insertBefore(S,this.nextSibling)})},empty:function(){for(var S,I=0;(S=this[I])!=null;I++)S.nodeType===1&&(G.cleanData(ko(S,!1)),S.textContent="");return this},clone:function(S,I){return S=S??!1,I=I??S,this.map(function(){return G.clone(this,S,I)})},html:function(S){return Ts(this,function(I){var U=this[0]||{},W=0,se=this.length;if(I===void 0&&U.nodeType===1)return U.innerHTML;if(typeof I=="string"&&!Al.test(I)&&!Xr[(Sr.exec(I)||["",""])[1].toLowerCase()]){I=G.htmlPrefilter(I);try{for(;W<se;W++)U=this[W]||{},U.nodeType===1&&(G.cleanData(ko(U,!1)),U.innerHTML=I);U=0}catch{}}U&&this.empty().append(I)},null,S,arguments.length)},replaceWith:function(){var S=[];return su(this,arguments,function(I){var U=this.parentNode;G.inArray(this,S)<0&&(G.cleanData(ko(this)),U&&U.replaceChild(I,this))},S)}}),G.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(S,I){G.fn[S]=function(U){for(var W,se=[],le=G(U),Ce=le.length-1,Ke=0;Ke<=Ce;Ke++)W=Ke===Ce?this:this.clone(!0),G(le[Ke])[I](W),de.apply(se,W.get());return this.pushStack(se)}});var bf=new RegExp("^("+ua+")(?!px)[a-z%]+$","i"),gh=function(S){var I=S.ownerDocument.defaultView;return(!I||!I.opener)&&(I=R),I.getComputedStyle(S)},pp=function(S,I,U){var W,se,le={};for(se in I)le[se]=S.style[se],S.style[se]=I[se];W=U.call(S);for(se in I)S.style[se]=le[se];return W},gp=new RegExp(Ro.join("|"),"i");(function(){function S(){if(!!mt){Je.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",mt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Wa.appendChild(Je).appendChild(mt);var zt=R.getComputedStyle(mt);U=zt.top!=="1%",Ke=I(zt.marginLeft)===12,mt.style.right="60%",le=I(zt.right)===36,W=I(zt.width)===36,mt.style.position="absolute",se=I(mt.offsetWidth/3)===12,Wa.removeChild(Je),mt=null}}function I(zt){return Math.round(parseFloat(zt))}var U,W,se,le,Ce,Ke,Je=fe.createElement("div"),mt=fe.createElement("div");!mt.style||(mt.style.backgroundClip="content-box",mt.cloneNode(!0).style.backgroundClip="",xe.clearCloneStyle=mt.style.backgroundClip==="content-box",G.extend(xe,{boxSizingReliable:function(){return S(),W},pixelBoxStyles:function(){return S(),le},pixelPosition:function(){return S(),U},reliableMarginLeft:function(){return S(),Ke},scrollboxSize:function(){return S(),se},reliableTrDimensions:function(){var zt,xn,Nt,Yt;return Ce==null&&(zt=fe.createElement("table"),xn=fe.createElement("tr"),Nt=fe.createElement("div"),zt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",xn.style.cssText="border:1px solid",xn.style.height="1px",Nt.style.height="9px",Nt.style.display="block",Wa.appendChild(zt).appendChild(xn).appendChild(Nt),Yt=R.getComputedStyle(xn),Ce=parseInt(Yt.height,10)+parseInt(Yt.borderTopWidth,10)+parseInt(Yt.borderBottomWidth,10)===xn.offsetHeight,Wa.removeChild(zt)),Ce}}))})();function Sd(S,I,U){var W,se,le,Ce,Ke=S.style;return U=U||gh(S),U&&(Ce=U.getPropertyValue(I)||U[I],Ce===""&&!At(S)&&(Ce=G.style(S,I)),!xe.pixelBoxStyles()&&bf.test(Ce)&&gp.test(I)&&(W=Ke.width,se=Ke.minWidth,le=Ke.maxWidth,Ke.minWidth=Ke.maxWidth=Ke.width=Ce,Ce=U.width,Ke.width=W,Ke.minWidth=se,Ke.maxWidth=le)),Ce!==void 0?Ce+"":Ce}function vp(S,I){return{get:function(){if(S()){delete this.get;return}return(this.get=I).apply(this,arguments)}}}var Tl=["Webkit","Moz","ms"],mp=fe.createElement("div").style,xf={};function _c(S){for(var I=S[0].toUpperCase()+S.slice(1),U=Tl.length;U--;)if(S=Tl[U]+I,S in mp)return S}function Ml(S){var I=G.cssProps[S]||xf[S];return I||(S in mp?S:xf[S]=_c(S)||S)}var _d=/^(none|table(?!-c[ea]).+)/,Ad=/^--/,wg={position:"absolute",visibility:"hidden",display:"block"},Ol={letterSpacing:"0",fontWeight:"400"};function da(S,I,U){var W=il.exec(I);return W?Math.max(0,W[2]-(U||0))+(W[3]||"px"):I}function ol(S,I,U,W,se,le){var Ce=I==="width"?1:0,Ke=0,Je=0;if(U===(W?"border":"content"))return 0;for(;Ce<4;Ce+=2)U==="margin"&&(Je+=G.css(S,U+Ro[Ce],!0,se)),W?(U==="content"&&(Je-=G.css(S,"padding"+Ro[Ce],!0,se)),U!=="margin"&&(Je-=G.css(S,"border"+Ro[Ce]+"Width",!0,se))):(Je+=G.css(S,"padding"+Ro[Ce],!0,se),U!=="padding"?Je+=G.css(S,"border"+Ro[Ce]+"Width",!0,se):Ke+=G.css(S,"border"+Ro[Ce]+"Width",!0,se));return!W&&le>=0&&(Je+=Math.max(0,Math.ceil(S["offset"+I[0].toUpperCase()+I.slice(1)]-le-Je-Ke-.5))||0),Je}function Cs(S,I,U){var W=gh(S),se=!xe.boxSizingReliable()||U,le=se&&G.css(S,"boxSizing",!1,W)==="border-box",Ce=le,Ke=Sd(S,I,W),Je="offset"+I[0].toUpperCase()+I.slice(1);if(bf.test(Ke)){if(!U)return Ke;Ke="auto"}return(!xe.boxSizingReliable()&&le||!xe.reliableTrDimensions()&&ye(S,"tr")||Ke==="auto"||!parseFloat(Ke)&&G.css(S,"display",!1,W)==="inline")&&S.getClientRects().length&&(le=G.css(S,"boxSizing",!1,W)==="border-box",Ce=Je in S,Ce&&(Ke=S[Je])),Ke=parseFloat(Ke)||0,Ke+ol(S,I,U||(le?"border":"content"),Ce,W,Ke)+"px"}G.extend({cssHooks:{opacity:{get:function(S,I){if(I){var U=Sd(S,"opacity");return U===""?"1":U}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(S,I,U,W){if(!(!S||S.nodeType===3||S.nodeType===8||!S.style)){var se,le,Ce,Ke=oi(I),Je=Ad.test(I),mt=S.style;if(Je||(I=Ml(Ke)),Ce=G.cssHooks[I]||G.cssHooks[Ke],U!==void 0){if(le=typeof U,le==="string"&&(se=il.exec(U))&&se[1]&&(U=un(S,I,se),le="number"),U==null||U!==U)return;le==="number"&&!Je&&(U+=se&&se[3]||(G.cssNumber[Ke]?"":"px")),!xe.clearCloneStyle&&U===""&&I.indexOf("background")===0&&(mt[I]="inherit"),(!Ce||!("set"in Ce)||(U=Ce.set(S,U,W))!==void 0)&&(Je?mt.setProperty(I,U):mt[I]=U)}else return Ce&&"get"in Ce&&(se=Ce.get(S,!1,W))!==void 0?se:mt[I]}},css:function(S,I,U,W){var se,le,Ce,Ke=oi(I),Je=Ad.test(I);return Je||(I=Ml(Ke)),Ce=G.cssHooks[I]||G.cssHooks[Ke],Ce&&"get"in Ce&&(se=Ce.get(S,!0,U)),se===void 0&&(se=Sd(S,I,W)),se==="normal"&&I in Ol&&(se=Ol[I]),U===""||U?(le=parseFloat(se),U===!0||isFinite(le)?le||0:se):se}}),G.each(["height","width"],function(S,I){G.cssHooks[I]={get:function(U,W,se){if(W)return _d.test(G.css(U,"display"))&&(!U.getClientRects().length||!U.getBoundingClientRect().width)?pp(U,wg,function(){return Cs(U,I,se)}):Cs(U,I,se)},set:function(U,W,se){var le,Ce=gh(U),Ke=!xe.scrollboxSize()&&Ce.position==="absolute",Je=Ke||se,mt=Je&&G.css(U,"boxSizing",!1,Ce)==="border-box",zt=se?ol(U,I,se,mt,Ce):0;return mt&&Ke&&(zt-=Math.ceil(U["offset"+I[0].toUpperCase()+I.slice(1)]-parseFloat(Ce[I])-ol(U,I,"border",!1,Ce)-.5)),zt&&(le=il.exec(W))&&(le[3]||"px")!=="px"&&(U.style[I]=W,W=G.css(U,I)),da(U,W,zt)}}}),G.cssHooks.marginLeft=vp(xe.reliableMarginLeft,function(S,I){if(I)return(parseFloat(Sd(S,"marginLeft"))||S.getBoundingClientRect().left-pp(S,{marginLeft:0},function(){return S.getBoundingClientRect().left}))+"px"}),G.each({margin:"",padding:"",border:"Width"},function(S,I){G.cssHooks[S+I]={expand:function(U){for(var W=0,se={},le=typeof U=="string"?U.split(" "):[U];W<4;W++)se[S+Ro[W]+I]=le[W]||le[W-2]||le[0];return se}},S!=="margin"&&(G.cssHooks[S+I].set=da)}),G.fn.extend({css:function(S,I){return Ts(this,function(U,W,se){var le,Ce,Ke={},Je=0;if(Array.isArray(W)){for(le=gh(U),Ce=W.length;Je<Ce;Je++)Ke[W[Je]]=G.css(U,W[Je],!1,le);return Ke}return se!==void 0?G.style(U,W,se):G.css(U,W)},S,I,arguments.length>1)}});function qs(S,I,U,W,se){return new qs.prototype.init(S,I,U,W,se)}G.Tween=qs,qs.prototype={constructor:qs,init:function(S,I,U,W,se,le){this.elem=S,this.prop=U,this.easing=se||G.easing._default,this.options=I,this.start=this.now=this.cur(),this.end=W,this.unit=le||(G.cssNumber[U]?"":"px")},cur:function(){var S=qs.propHooks[this.prop];return S&&S.get?S.get(this):qs.propHooks._default.get(this)},run:function(S){var I,U=qs.propHooks[this.prop];return this.options.duration?this.pos=I=G.easing[this.easing](S,this.options.duration*S,0,1,this.options.duration):this.pos=I=S,this.now=(this.end-this.start)*I+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),U&&U.set?U.set(this):qs.propHooks._default.set(this),this}},qs.prototype.init.prototype=qs.prototype,qs.propHooks={_default:{get:function(S){var I;return S.elem.nodeType!==1||S.elem[S.prop]!=null&&S.elem.style[S.prop]==null?S.elem[S.prop]:(I=G.css(S.elem,S.prop,""),!I||I==="auto"?0:I)},set:function(S){G.fx.step[S.prop]?G.fx.step[S.prop](S):S.elem.nodeType===1&&(G.cssHooks[S.prop]||S.elem.style[Ml(S.prop)]!=null)?G.style(S.elem,S.prop,S.now+S.unit):S.elem[S.prop]=S.now}}},qs.propHooks.scrollTop=qs.propHooks.scrollLeft={set:function(S){S.elem.nodeType&&S.elem.parentNode&&(S.elem[S.prop]=S.now)}},G.easing={linear:function(S){return S},swing:function(S){return .5-Math.cos(S*Math.PI)/2},_default:"swing"},G.fx=qs.prototype.init,G.fx.step={};var Td,Cf,S0=/^(?:toggle|show|hide)$/,_0=/queueHooks$/;function wf(){Cf&&(fe.hidden===!1&&R.requestAnimationFrame?R.requestAnimationFrame(wf):R.setTimeout(wf,G.fx.interval),G.fx.tick())}function Md(){return R.setTimeout(function(){Td=void 0}),Td=Date.now()}function Od(S,I){var U,W=0,se={height:S};for(I=I?1:0;W<4;W+=2-I)U=Ro[W],se["margin"+U]=se["padding"+U]=S;return I&&(se.opacity=se.width=S),se}function Ef(S,I,U){for(var W,se=(ha.tweeners[I]||[]).concat(ha.tweeners["*"]),le=0,Ce=se.length;le<Ce;le++)if(W=se[le].call(U,I,S))return W}function au(S,I,U){var W,se,le,Ce,Ke,Je,mt,zt,xn="width"in I||"height"in I,Nt=this,Yt={},Wn=S.style,ai=S.nodeType&&Mt(S),mr=F.get(S,"fxshow");U.queue||(Ce=G._queueHooks(S,"fx"),Ce.unqueued==null&&(Ce.unqueued=0,Ke=Ce.empty.fire,Ce.empty.fire=function(){Ce.unqueued||Ke()}),Ce.unqueued++,Nt.always(function(){Nt.always(function(){Ce.unqueued--,G.queue(S,"fx").length||Ce.empty.fire()})}));for(W in I)if(se=I[W],S0.test(se)){if(delete I[W],le=le||se==="toggle",se===(ai?"hide":"show"))if(se==="show"&&mr&&mr[W]!==void 0)ai=!0;else continue;Yt[W]=mr&&mr[W]||G.style(S,W)}if(Je=!G.isEmptyObject(I),!(!Je&&G.isEmptyObject(Yt))){xn&&S.nodeType===1&&(U.overflow=[Wn.overflow,Wn.overflowX,Wn.overflowY],mt=mr&&mr.display,mt==null&&(mt=F.get(S,"display")),zt=G.css(S,"display"),zt==="none"&&(mt?zt=mt:(Lr([S],!0),mt=S.style.display||mt,zt=G.css(S,"display"),Lr([S]))),(zt==="inline"||zt==="inline-block"&&mt!=null)&&G.css(S,"float")==="none"&&(Je||(Nt.done(function(){Wn.display=mt}),mt==null&&(zt=Wn.display,mt=zt==="none"?"":zt)),Wn.display="inline-block")),U.overflow&&(Wn.overflow="hidden",Nt.always(function(){Wn.overflow=U.overflow[0],Wn.overflowX=U.overflow[1],Wn.overflowY=U.overflow[2]})),Je=!1;for(W in Yt)Je||(mr?"hidden"in mr&&(ai=mr.hidden):mr=F.access(S,"fxshow",{display:mt}),le&&(mr.hidden=!ai),ai&&Lr([S],!0),Nt.done(function(){ai||Lr([S]),F.remove(S,"fxshow");for(W in Yt)G.style(S,W,Yt[W])})),Je=Ef(ai?mr[W]:0,W,Nt),W in mr||(mr[W]=Je.start,ai&&(Je.end=Je.start,Je.start=0))}}function sl(S,I){var U,W,se,le,Ce;for(U in S)if(W=oi(U),se=I[W],le=S[U],Array.isArray(le)&&(se=le[1],le=S[U]=le[0]),U!==W&&(S[W]=le,delete S[U]),Ce=G.cssHooks[W],Ce&&"expand"in Ce){le=Ce.expand(le),delete S[W];for(U in le)U in S||(S[U]=le[U],I[U]=se)}else I[W]=se}function ha(S,I,U){var W,se,le=0,Ce=ha.prefilters.length,Ke=G.Deferred().always(function(){delete Je.elem}),Je=function(){if(se)return!1;for(var xn=Td||Md(),Nt=Math.max(0,mt.startTime+mt.duration-xn),Yt=Nt/mt.duration||0,Wn=1-Yt,ai=0,mr=mt.tweens.length;ai<mr;ai++)mt.tweens[ai].run(Wn);return Ke.notifyWith(S,[mt,Wn,Nt]),Wn<1&&mr?Nt:(mr||Ke.notifyWith(S,[mt,1,0]),Ke.resolveWith(S,[mt]),!1)},mt=Ke.promise({elem:S,props:G.extend({},I),opts:G.extend(!0,{specialEasing:{},easing:G.easing._default},U),originalProperties:I,originalOptions:U,startTime:Td||Md(),duration:U.duration,tweens:[],createTween:function(xn,Nt){var Yt=G.Tween(S,mt.opts,xn,Nt,mt.opts.specialEasing[xn]||mt.opts.easing);return mt.tweens.push(Yt),Yt},stop:function(xn){var Nt=0,Yt=xn?mt.tweens.length:0;if(se)return this;for(se=!0;Nt<Yt;Nt++)mt.tweens[Nt].run(1);return xn?(Ke.notifyWith(S,[mt,1,0]),Ke.resolveWith(S,[mt,xn])):Ke.rejectWith(S,[mt,xn]),this}}),zt=mt.props;for(sl(zt,mt.opts.specialEasing);le<Ce;le++)if(W=ha.prefilters[le].call(mt,S,zt,mt.opts),W)return ae(W.stop)&&(G._queueHooks(mt.elem,mt.opts.queue).stop=W.stop.bind(W)),W;return G.map(zt,Ef,mt),ae(mt.opts.start)&&mt.opts.start.call(S,mt),mt.progress(mt.opts.progress).done(mt.opts.done,mt.opts.complete).fail(mt.opts.fail).always(mt.opts.always),G.fx.timer(G.extend(Je,{elem:S,anim:mt,queue:mt.opts.queue})),mt}G.Animation=G.extend(ha,{tweeners:{"*":[function(S,I){var U=this.createTween(S,I);return un(U.elem,S,il.exec(I),U),U}]},tweener:function(S,I){ae(S)?(I=S,S=["*"]):S=S.match(Xn);for(var U,W=0,se=S.length;W<se;W++)U=S[W],ha.tweeners[U]=ha.tweeners[U]||[],ha.tweeners[U].unshift(I)},prefilters:[au],prefilter:function(S,I){I?ha.prefilters.unshift(S):ha.prefilters.push(S)}}),G.speed=function(S,I,U){var W=S&&typeof S=="object"?G.extend({},S):{complete:U||!U&&I||ae(S)&&S,duration:S,easing:U&&I||I&&!ae(I)&&I};return G.fx.off?W.duration=0:typeof W.duration!="number"&&(W.duration in G.fx.speeds?W.duration=G.fx.speeds[W.duration]:W.duration=G.fx.speeds._default),(W.queue==null||W.queue===!0)&&(W.queue="fx"),W.old=W.complete,W.complete=function(){ae(W.old)&&W.old.call(this),W.queue&&G.dequeue(this,W.queue)},W},G.fn.extend({fadeTo:function(S,I,U,W){return this.filter(Mt).css("opacity",0).show().end().animate({opacity:I},S,U,W)},animate:function(S,I,U,W){var se=G.isEmptyObject(S),le=G.speed(I,U,W),Ce=function(){var Ke=ha(this,G.extend({},S),le);(se||F.get(this,"finish"))&&Ke.stop(!0)};return Ce.finish=Ce,se||le.queue===!1?this.each(Ce):this.queue(le.queue,Ce)},stop:function(S,I,U){var W=function(se){var le=se.stop;delete se.stop,le(U)};return typeof S!="string"&&(U=I,I=S,S=void 0),I&&this.queue(S||"fx",[]),this.each(function(){var se=!0,le=S!=null&&S+"queueHooks",Ce=G.timers,Ke=F.get(this);if(le)Ke[le]&&Ke[le].stop&&W(Ke[le]);else for(le in Ke)Ke[le]&&Ke[le].stop&&_0.test(le)&&W(Ke[le]);for(le=Ce.length;le--;)Ce[le].elem===this&&(S==null||Ce[le].queue===S)&&(Ce[le].anim.stop(U),se=!1,Ce.splice(le,1));(se||!U)&&G.dequeue(this,S)})},finish:function(S){return S!==!1&&(S=S||"fx"),this.each(function(){var I,U=F.get(this),W=U[S+"queue"],se=U[S+"queueHooks"],le=G.timers,Ce=W?W.length:0;for(U.finish=!0,G.queue(this,S,[]),se&&se.stop&&se.stop.call(this,!0),I=le.length;I--;)le[I].elem===this&&le[I].queue===S&&(le[I].anim.stop(!0),le.splice(I,1));for(I=0;I<Ce;I++)W[I]&&W[I].finish&&W[I].finish.call(this);delete U.finish})}}),G.each(["toggle","show","hide"],function(S,I){var U=G.fn[I];G.fn[I]=function(W,se,le){return W==null||typeof W=="boolean"?U.apply(this,arguments):this.animate(Od(I,!0),W,se,le)}}),G.each({slideDown:Od("show"),slideUp:Od("hide"),slideToggle:Od("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(S,I){G.fn[S]=function(U,W,se){return this.animate(I,U,W,se)}}),G.timers=[],G.fx.tick=function(){var S,I=0,U=G.timers;for(Td=Date.now();I<U.length;I++)S=U[I],!S()&&U[I]===S&&U.splice(I--,1);U.length||G.fx.stop(),Td=void 0},G.fx.timer=function(S){G.timers.push(S),G.fx.start()},G.fx.interval=13,G.fx.start=function(){Cf||(Cf=!0,wf())},G.fx.stop=function(){Cf=null},G.fx.speeds={slow:600,fast:200,_default:400},G.fn.delay=function(S,I){return S=G.fx&&G.fx.speeds[S]||S,I=I||"fx",this.queue(I,function(U,W){var se=R.setTimeout(U,S);W.stop=function(){R.clearTimeout(se)}})},function(){var S=fe.createElement("input"),I=fe.createElement("select"),U=I.appendChild(fe.createElement("option"));S.type="checkbox",xe.checkOn=S.value!=="",xe.optSelected=U.selected,S=fe.createElement("input"),S.value="t",S.type="radio",xe.radioValue=S.value==="t"}();var cu,zc=G.expr.attrHandle;G.fn.extend({attr:function(S,I){return Ts(this,G.attr,S,I,arguments.length>1)},removeAttr:function(S){return this.each(function(){G.removeAttr(this,S)})}}),G.extend({attr:function(S,I,U){var W,se,le=S.nodeType;if(!(le===3||le===8||le===2)){if(typeof S.getAttribute>"u")return G.prop(S,I,U);if((le!==1||!G.isXMLDoc(S))&&(se=G.attrHooks[I.toLowerCase()]||(G.expr.match.bool.test(I)?cu:void 0)),U!==void 0){if(U===null){G.removeAttr(S,I);return}return se&&"set"in se&&(W=se.set(S,U,I))!==void 0?W:(S.setAttribute(I,U+""),U)}return se&&"get"in se&&(W=se.get(S,I))!==null?W:(W=G.find.attr(S,I),W??void 0)}},attrHooks:{type:{set:function(S,I){if(!xe.radioValue&&I==="radio"&&ye(S,"input")){var U=S.value;return S.setAttribute("type",I),U&&(S.value=U),I}}}},removeAttr:function(S,I){var U,W=0,se=I&&I.match(Xn);if(se&&S.nodeType===1)for(;U=se[W++];)S.removeAttribute(U)}}),cu={set:function(S,I,U){return I===!1?G.removeAttr(S,U):S.setAttribute(U,U),U}},G.each(G.expr.match.bool.source.match(/\w+/g),function(S,I){var U=zc[I]||G.find.attr;zc[I]=function(W,se,le){var Ce,Ke,Je=se.toLowerCase();return le||(Ke=zc[Je],zc[Je]=Ce,Ce=U(W,se,le)!=null?Je:null,zc[Je]=Ke),Ce}});var Eg=/^(?:input|select|textarea|button)$/i,Sg=/^(?:a|area)$/i;G.fn.extend({prop:function(S,I){return Ts(this,G.prop,S,I,arguments.length>1)},removeProp:function(S){return this.each(function(){delete this[G.propFix[S]||S]})}}),G.extend({prop:function(S,I,U){var W,se,le=S.nodeType;if(!(le===3||le===8||le===2))return(le!==1||!G.isXMLDoc(S))&&(I=G.propFix[I]||I,se=G.propHooks[I]),U!==void 0?se&&"set"in se&&(W=se.set(S,U,I))!==void 0?W:S[I]=U:se&&"get"in se&&(W=se.get(S,I))!==null?W:S[I]},propHooks:{tabIndex:{get:function(S){var I=G.find.attr(S,"tabindex");return I?parseInt(I,10):Eg.test(S.nodeName)||Sg.test(S.nodeName)&&S.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),xe.optSelected||(G.propHooks.selected={get:function(S){var I=S.parentNode;return I&&I.parentNode&&I.parentNode.selectedIndex,null},set:function(S){var I=S.parentNode;I&&(I.selectedIndex,I.parentNode&&I.parentNode.selectedIndex)}}),G.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){G.propFix[this.toLowerCase()]=this});function Pl(S){var I=S.match(Xn)||[];return I.join(" ")}function ku(S){return S.getAttribute&&S.getAttribute("class")||""}function Js(S){return Array.isArray(S)?S:typeof S=="string"?S.match(Xn)||[]:[]}G.fn.extend({addClass:function(S){var I,U,W,se,le,Ce,Ke,Je=0;if(ae(S))return this.each(function(mt){G(this).addClass(S.call(this,mt,ku(this)))});if(I=Js(S),I.length){for(;U=this[Je++];)if(se=ku(U),W=U.nodeType===1&&" "+Pl(se)+" ",W){for(Ce=0;le=I[Ce++];)W.indexOf(" "+le+" ")<0&&(W+=le+" ");Ke=Pl(W),se!==Ke&&U.setAttribute("class",Ke)}}return this},removeClass:function(S){var I,U,W,se,le,Ce,Ke,Je=0;if(ae(S))return this.each(function(mt){G(this).removeClass(S.call(this,mt,ku(this)))});if(!arguments.length)return this.attr("class","");if(I=Js(S),I.length){for(;U=this[Je++];)if(se=ku(U),W=U.nodeType===1&&" "+Pl(se)+" ",W){for(Ce=0;le=I[Ce++];)for(;W.indexOf(" "+le+" ")>-1;)W=W.replace(" "+le+" "," ");Ke=Pl(W),se!==Ke&&U.setAttribute("class",Ke)}}return this},toggleClass:function(S,I){var U=typeof S,W=U==="string"||Array.isArray(S);return typeof I=="boolean"&&W?I?this.addClass(S):this.removeClass(S):ae(S)?this.each(function(se){G(this).toggleClass(S.call(this,se,ku(this),I),I)}):this.each(function(){var se,le,Ce,Ke;if(W)for(le=0,Ce=G(this),Ke=Js(S);se=Ke[le++];)Ce.hasClass(se)?Ce.removeClass(se):Ce.addClass(se);else(S===void 0||U==="boolean")&&(se=ku(this),se&&F.set(this,"__className__",se),this.setAttribute&&this.setAttribute("class",se||S===!1?"":F.get(this,"__className__")||""))})},hasClass:function(S){var I,U,W=0;for(I=" "+S+" ";U=this[W++];)if(U.nodeType===1&&(" "+Pl(ku(U))+" ").indexOf(I)>-1)return!0;return!1}});var Ta=/\r/g;G.fn.extend({val:function(S){var I,U,W,se=this[0];return arguments.length?(W=ae(S),this.each(function(le){var Ce;this.nodeType===1&&(W?Ce=S.call(this,le,G(this).val()):Ce=S,Ce==null?Ce="":typeof Ce=="number"?Ce+="":Array.isArray(Ce)&&(Ce=G.map(Ce,function(Ke){return Ke==null?"":Ke+""})),I=G.valHooks[this.type]||G.valHooks[this.nodeName.toLowerCase()],(!I||!("set"in I)||I.set(this,Ce,"value")===void 0)&&(this.value=Ce))})):se?(I=G.valHooks[se.type]||G.valHooks[se.nodeName.toLowerCase()],I&&"get"in I&&(U=I.get(se,"value"))!==void 0?U:(U=se.value,typeof U=="string"?U.replace(Ta,""):U??"")):void 0}}),G.extend({valHooks:{option:{get:function(S){var I=G.find.attr(S,"value");return I??Pl(G.text(S))}},select:{get:function(S){var I,U,W,se=S.options,le=S.selectedIndex,Ce=S.type==="select-one",Ke=Ce?null:[],Je=Ce?le+1:se.length;for(le<0?W=Je:W=Ce?le:0;W<Je;W++)if(U=se[W],(U.selected||W===le)&&!U.disabled&&(!U.parentNode.disabled||!ye(U.parentNode,"optgroup"))){if(I=G(U).val(),Ce)return I;Ke.push(I)}return Ke},set:function(S,I){for(var U,W,se=S.options,le=G.makeArray(I),Ce=se.length;Ce--;)W=se[Ce],(W.selected=G.inArray(G.valHooks.option.get(W),le)>-1)&&(U=!0);return U||(S.selectedIndex=-1),le}}}}),G.each(["radio","checkbox"],function(){G.valHooks[this]={set:function(S,I){if(Array.isArray(I))return S.checked=G.inArray(G(S).val(),I)>-1}},xe.checkOn||(G.valHooks[this].get=function(S){return S.getAttribute("value")===null?"on":S.value})}),xe.focusin="onfocusin"in R;var Lu=/^(?:focusinfocus|focusoutblur)$/,Gu=function(S){S.stopPropagation()};G.extend(G.event,{trigger:function(S,I,U,W){var se,le,Ce,Ke,Je,mt,zt,xn,Nt=[U||fe],Yt=he.call(S,"type")?S.type:S,Wn=he.call(S,"namespace")?S.namespace.split("."):[];if(le=xn=Ce=U=U||fe,!(U.nodeType===3||U.nodeType===8)&&!Lu.test(Yt+G.event.triggered)&&(Yt.indexOf(".")>-1&&(Wn=Yt.split("."),Yt=Wn.shift(),Wn.sort()),Je=Yt.indexOf(":")<0&&"on"+Yt,S=S[G.expando]?S:new G.Event(Yt,typeof S=="object"&&S),S.isTrigger=W?2:3,S.namespace=Wn.join("."),S.rnamespace=S.namespace?new RegExp("(^|\\.)"+Wn.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,S.result=void 0,S.target||(S.target=U),I=I==null?[S]:G.makeArray(I,[S]),zt=G.event.special[Yt]||{},!(!W&&zt.trigger&&zt.trigger.apply(U,I)===!1))){if(!W&&!zt.noBubble&&!ce(U)){for(Ke=zt.delegateType||Yt,Lu.test(Ke+Yt)||(le=le.parentNode);le;le=le.parentNode)Nt.push(le),Ce=le;Ce===(U.ownerDocument||fe)&&Nt.push(Ce.defaultView||Ce.parentWindow||R)}for(se=0;(le=Nt[se++])&&!S.isPropagationStopped();)xn=le,S.type=se>1?Ke:zt.bindType||Yt,mt=(F.get(le,"events")||Object.create(null))[S.type]&&F.get(le,"handle"),mt&&mt.apply(le,I),mt=Je&&le[Je],mt&&mt.apply&&Hi(le)&&(S.result=mt.apply(le,I),S.result===!1&&S.preventDefault());return S.type=Yt,!W&&!S.isDefaultPrevented()&&(!zt._default||zt._default.apply(Nt.pop(),I)===!1)&&Hi(U)&&Je&&ae(U[Yt])&&!ce(U)&&(Ce=U[Je],Ce&&(U[Je]=null),G.event.triggered=Yt,S.isPropagationStopped()&&xn.addEventListener(Yt,Gu),U[Yt](),S.isPropagationStopped()&&xn.removeEventListener(Yt,Gu),G.event.triggered=void 0,Ce&&(U[Je]=Ce)),S.result}},simulate:function(S,I,U){var W=G.extend(new G.Event,U,{type:S,isSimulated:!0});G.event.trigger(W,null,I)}}),G.fn.extend({trigger:function(S,I){return this.each(function(){G.event.trigger(S,I,this)})},triggerHandler:function(S,I){var U=this[0];if(U)return G.event.trigger(S,I,U,!0)}}),xe.focusin||G.each({focus:"focusin",blur:"focusout"},function(S,I){var U=function(W){G.event.simulate(I,W.target,G.event.fix(W))};G.event.special[I]={setup:function(){var W=this.ownerDocument||this.document||this,se=F.access(W,I);se||W.addEventListener(S,U,!0),F.access(W,I,(se||0)+1)},teardown:function(){var W=this.ownerDocument||this.document||this,se=F.access(W,I)-1;se?F.access(W,I,se):(W.removeEventListener(S,U,!0),F.remove(W,I))}}});var Fu=R.location,Pd={guid:Date.now()},Bu=/\?/;G.parseXML=function(S){var I,U;if(!S||typeof S!="string")return null;try{I=new R.DOMParser().parseFromString(S,"text/xml")}catch{}return U=I&&I.getElementsByTagName("parsererror")[0],(!I||U)&&G.error("Invalid XML: "+(U?G.map(U.childNodes,function(W){return W.textContent}).join(`
`):S)),I};var yp=/\[\]$/,zu=/\r?\n/g,Ma=/^(?:submit|button|image|reset|file)$/i,Uu=/^(?:input|select|textarea|keygen)/i;function Sf(S,I,U,W){var se;if(Array.isArray(I))G.each(I,function(le,Ce){U||yp.test(S)?W(S,Ce):Sf(S+"["+(typeof Ce=="object"&&Ce!=null?le:"")+"]",Ce,U,W)});else if(!U&&Ae(I)==="object")for(se in I)Sf(S+"["+se+"]",I[se],U,W);else W(S,I)}G.param=function(S,I){var U,W=[],se=function(le,Ce){var Ke=ae(Ce)?Ce():Ce;W[W.length]=encodeURIComponent(le)+"="+encodeURIComponent(Ke??"")};if(S==null)return"";if(Array.isArray(S)||S.jquery&&!G.isPlainObject(S))G.each(S,function(){se(this.name,this.value)});else for(U in S)Sf(U,S[U],I,se);return W.join("&")},G.fn.extend({serialize:function(){return G.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var S=G.prop(this,"elements");return S?G.makeArray(S):this}).filter(function(){var S=this.type;return this.name&&!G(this).is(":disabled")&&Uu.test(this.nodeName)&&!Ma.test(S)&&(this.checked||!jr.test(S))}).map(function(S,I){var U=G(this).val();return U==null?null:Array.isArray(U)?G.map(U,function(W){return{name:I.name,value:W.replace(zu,`\r
`)}}):{name:I.name,value:U.replace(zu,`\r
`)}}).get()}});var _g=/%20/g,bp=/#.*$/,xp=/([?&])_=[^&]*/,Cp=/^(.*?):[ \t]*([^\r\n]*)$/mg,vh=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Dd=/^(?:GET|HEAD)$/,Us=/^\/\//,al={},Vu={},Dl="*/".concat("*"),mh=fe.createElement("a");mh.href=Fu.href;function fa(S){return function(I,U){typeof I!="string"&&(U=I,I="*");var W,se=0,le=I.toLowerCase().match(Xn)||[];if(ae(U))for(;W=le[se++];)W[0]==="+"?(W=W.slice(1)||"*",(S[W]=S[W]||[]).unshift(U)):(S[W]=S[W]||[]).push(U)}}function yh(S,I,U,W){var se={},le=S===Vu;function Ce(Ke){var Je;return se[Ke]=!0,G.each(S[Ke]||[],function(mt,zt){var xn=zt(I,U,W);if(typeof xn=="string"&&!le&&!se[xn])return I.dataTypes.unshift(xn),Ce(xn),!1;if(le)return!(Je=xn)}),Je}return Ce(I.dataTypes[0])||!se["*"]&&Ce("*")}function vo(S,I){var U,W,se=G.ajaxSettings.flatOptions||{};for(U in I)I[U]!==void 0&&((se[U]?S:W||(W={}))[U]=I[U]);return W&&G.extend(!0,S,W),S}function ho(S,I,U){for(var W,se,le,Ce,Ke=S.contents,Je=S.dataTypes;Je[0]==="*";)Je.shift(),W===void 0&&(W=S.mimeType||I.getResponseHeader("Content-Type"));if(W){for(se in Ke)if(Ke[se]&&Ke[se].test(W)){Je.unshift(se);break}}if(Je[0]in U)le=Je[0];else{for(se in U){if(!Je[0]||S.converters[se+" "+Je[0]]){le=se;break}Ce||(Ce=se)}le=le||Ce}if(le)return le!==Je[0]&&Je.unshift(le),U[le]}function ju(S,I,U,W){var se,le,Ce,Ke,Je,mt={},zt=S.dataTypes.slice();if(zt[1])for(Ce in S.converters)mt[Ce.toLowerCase()]=S.converters[Ce];for(le=zt.shift();le;)if(S.responseFields[le]&&(U[S.responseFields[le]]=I),!Je&&W&&S.dataFilter&&(I=S.dataFilter(I,S.dataType)),Je=le,le=zt.shift(),le){if(le==="*")le=Je;else if(Je!=="*"&&Je!==le){if(Ce=mt[Je+" "+le]||mt["* "+le],!Ce){for(se in mt)if(Ke=se.split(" "),Ke[1]===le&&(Ce=mt[Je+" "+Ke[0]]||mt["* "+Ke[0]],Ce)){Ce===!0?Ce=mt[se]:mt[se]!==!0&&(le=Ke[0],zt.unshift(Ke[1]));break}}if(Ce!==!0)if(Ce&&S.throws)I=Ce(I);else try{I=Ce(I)}catch(xn){return{state:"parsererror",error:Ce?xn:"No conversion from "+Je+" to "+le}}}}return{state:"success",data:I}}G.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fu.href,type:"GET",isLocal:vh.test(Fu.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dl,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":G.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(S,I){return I?vo(vo(S,G.ajaxSettings),I):vo(G.ajaxSettings,S)},ajaxPrefilter:fa(al),ajaxTransport:fa(Vu),ajax:function(S,I){typeof S=="object"&&(I=S,S=void 0),I=I||{};var U,W,se,le,Ce,Ke,Je,mt,zt,xn,Nt=G.ajaxSetup({},I),Yt=Nt.context||Nt,Wn=Nt.context&&(Yt.nodeType||Yt.jquery)?G(Yt):G.event,ai=G.Deferred(),mr=G.Callbacks("once memory"),mo=Nt.statusCode||{},Mo={},pa={},Gr="canceled",Rr={readyState:0,getResponseHeader:function(Ni){var Lo;if(Je){if(!le)for(le={};Lo=Cp.exec(se);)le[Lo[1].toLowerCase()+" "]=(le[Lo[1].toLowerCase()+" "]||[]).concat(Lo[2]);Lo=le[Ni.toLowerCase()+" "]}return Lo==null?null:Lo.join(", ")},getAllResponseHeaders:function(){return Je?se:null},setRequestHeader:function(Ni,Lo){return Je==null&&(Ni=pa[Ni.toLowerCase()]=pa[Ni.toLowerCase()]||Ni,Mo[Ni]=Lo),this},overrideMimeType:function(Ni){return Je==null&&(Nt.mimeType=Ni),this},statusCode:function(Ni){var Lo;if(Ni)if(Je)Rr.always(Ni[Rr.status]);else for(Lo in Ni)mo[Lo]=[mo[Lo],Ni[Lo]];return this},abort:function(Ni){var Lo=Ni||Gr;return U&&U.abort(Lo),fi(0,Lo),this}};if(ai.promise(Rr),Nt.url=((S||Nt.url||Fu.href)+"").replace(Us,Fu.protocol+"//"),Nt.type=I.method||I.type||Nt.method||Nt.type,Nt.dataTypes=(Nt.dataType||"*").toLowerCase().match(Xn)||[""],Nt.crossDomain==null){Ke=fe.createElement("a");try{Ke.href=Nt.url,Ke.href=Ke.href,Nt.crossDomain=mh.protocol+"//"+mh.host!=Ke.protocol+"//"+Ke.host}catch{Nt.crossDomain=!0}}if(Nt.data&&Nt.processData&&typeof Nt.data!="string"&&(Nt.data=G.param(Nt.data,Nt.traditional)),yh(al,Nt,I,Rr),Je)return Rr;mt=G.event&&Nt.global,mt&&G.active++===0&&G.event.trigger("ajaxStart"),Nt.type=Nt.type.toUpperCase(),Nt.hasContent=!Dd.test(Nt.type),W=Nt.url.replace(bp,""),Nt.hasContent?Nt.data&&Nt.processData&&(Nt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Nt.data=Nt.data.replace(_g,"+")):(xn=Nt.url.slice(W.length),Nt.data&&(Nt.processData||typeof Nt.data=="string")&&(W+=(Bu.test(W)?"&":"?")+Nt.data,delete Nt.data),Nt.cache===!1&&(W=W.replace(xp,"$1"),xn=(Bu.test(W)?"&":"?")+"_="+Pd.guid+++xn),Nt.url=W+xn),Nt.ifModified&&(G.lastModified[W]&&Rr.setRequestHeader("If-Modified-Since",G.lastModified[W]),G.etag[W]&&Rr.setRequestHeader("If-None-Match",G.etag[W])),(Nt.data&&Nt.hasContent&&Nt.contentType!==!1||I.contentType)&&Rr.setRequestHeader("Content-Type",Nt.contentType),Rr.setRequestHeader("Accept",Nt.dataTypes[0]&&Nt.accepts[Nt.dataTypes[0]]?Nt.accepts[Nt.dataTypes[0]]+(Nt.dataTypes[0]!=="*"?", "+Dl+"; q=0.01":""):Nt.accepts["*"]);for(zt in Nt.headers)Rr.setRequestHeader(zt,Nt.headers[zt]);if(Nt.beforeSend&&(Nt.beforeSend.call(Yt,Rr,Nt)===!1||Je))return Rr.abort();if(Gr="abort",mr.add(Nt.complete),Rr.done(Nt.success),Rr.fail(Nt.error),U=yh(Vu,Nt,I,Rr),!U)fi(-1,"No Transport");else{if(Rr.readyState=1,mt&&Wn.trigger("ajaxSend",[Rr,Nt]),Je)return Rr;Nt.async&&Nt.timeout>0&&(Ce=R.setTimeout(function(){Rr.abort("timeout")},Nt.timeout));try{Je=!1,U.send(Mo,fi)}catch(Ni){if(Je)throw Ni;fi(-1,Ni)}}function fi(Ni,Lo,Oa,kl){var Fs,Pa,Vs,Ko,Da,js=Lo;Je||(Je=!0,Ce&&R.clearTimeout(Ce),U=void 0,se=kl||"",Rr.readyState=Ni>0?4:0,Fs=Ni>=200&&Ni<300||Ni===304,Oa&&(Ko=ho(Nt,Rr,Oa)),!Fs&&G.inArray("script",Nt.dataTypes)>-1&&G.inArray("json",Nt.dataTypes)<0&&(Nt.converters["text script"]=function(){}),Ko=ju(Nt,Ko,Rr,Fs),Fs?(Nt.ifModified&&(Da=Rr.getResponseHeader("Last-Modified"),Da&&(G.lastModified[W]=Da),Da=Rr.getResponseHeader("etag"),Da&&(G.etag[W]=Da)),Ni===204||Nt.type==="HEAD"?js="nocontent":Ni===304?js="notmodified":(js=Ko.state,Pa=Ko.data,Vs=Ko.error,Fs=!Vs)):(Vs=js,(Ni||!js)&&(js="error",Ni<0&&(Ni=0))),Rr.status=Ni,Rr.statusText=(Lo||js)+"",Fs?ai.resolveWith(Yt,[Pa,js,Rr]):ai.rejectWith(Yt,[Rr,js,Vs]),Rr.statusCode(mo),mo=void 0,mt&&Wn.trigger(Fs?"ajaxSuccess":"ajaxError",[Rr,Nt,Fs?Pa:Vs]),mr.fireWith(Yt,[Rr,js]),mt&&(Wn.trigger("ajaxComplete",[Rr,Nt]),--G.active||G.event.trigger("ajaxStop")))}return Rr},getJSON:function(S,I,U){return G.get(S,I,U,"json")},getScript:function(S,I){return G.get(S,void 0,I,"script")}}),G.each(["get","post"],function(S,I){G[I]=function(U,W,se,le){return ae(W)&&(le=le||se,se=W,W=void 0),G.ajax(G.extend({url:U,type:I,dataType:le,data:W,success:se},G.isPlainObject(U)&&U))}}),G.ajaxPrefilter(function(S){var I;for(I in S.headers)I.toLowerCase()==="content-type"&&(S.contentType=S.headers[I]||"")}),G._evalUrl=function(S,I,U){return G.ajax({url:S,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(W){G.globalEval(W,I,U)}})},G.fn.extend({wrapAll:function(S){var I;return this[0]&&(ae(S)&&(S=S.call(this[0])),I=G(S,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&I.insertBefore(this[0]),I.map(function(){for(var U=this;U.firstElementChild;)U=U.firstElementChild;return U}).append(this)),this},wrapInner:function(S){return ae(S)?this.each(function(I){G(this).wrapInner(S.call(this,I))}):this.each(function(){var I=G(this),U=I.contents();U.length?U.wrapAll(S):I.append(S)})},wrap:function(S){var I=ae(S);return this.each(function(U){G(this).wrapAll(I?S.call(this,U):S)})},unwrap:function(S){return this.parent(S).not("body").each(function(){G(this).replaceWith(this.childNodes)}),this}}),G.expr.pseudos.hidden=function(S){return!G.expr.pseudos.visible(S)},G.expr.pseudos.visible=function(S){return!!(S.offsetWidth||S.offsetHeight||S.getClientRects().length)},G.ajaxSettings.xhr=function(){try{return new R.XMLHttpRequest}catch{}};var Nl={0:200,1223:204},Il=G.ajaxSettings.xhr();xe.cors=!!Il&&"withCredentials"in Il,xe.ajax=Il=!!Il,G.ajaxTransport(function(S){var I,U;if(xe.cors||Il&&!S.crossDomain)return{send:function(W,se){var le,Ce=S.xhr();if(Ce.open(S.type,S.url,S.async,S.username,S.password),S.xhrFields)for(le in S.xhrFields)Ce[le]=S.xhrFields[le];S.mimeType&&Ce.overrideMimeType&&Ce.overrideMimeType(S.mimeType),!S.crossDomain&&!W["X-Requested-With"]&&(W["X-Requested-With"]="XMLHttpRequest");for(le in W)Ce.setRequestHeader(le,W[le]);I=function(Ke){return function(){I&&(I=U=Ce.onload=Ce.onerror=Ce.onabort=Ce.ontimeout=Ce.onreadystatechange=null,Ke==="abort"?Ce.abort():Ke==="error"?typeof Ce.status!="number"?se(0,"error"):se(Ce.status,Ce.statusText):se(Nl[Ce.status]||Ce.status,Ce.statusText,(Ce.responseType||"text")!=="text"||typeof Ce.responseText!="string"?{binary:Ce.response}:{text:Ce.responseText},Ce.getAllResponseHeaders()))}},Ce.onload=I(),U=Ce.onerror=Ce.ontimeout=I("error"),Ce.onabort!==void 0?Ce.onabort=U:Ce.onreadystatechange=function(){Ce.readyState===4&&R.setTimeout(function(){I&&U()})},I=I("abort");try{Ce.send(S.hasContent&&S.data||null)}catch(Ke){if(I)throw Ke}},abort:function(){I&&I()}}}),G.ajaxPrefilter(function(S){S.crossDomain&&(S.contents.script=!1)}),G.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(S){return G.globalEval(S),S}}}),G.ajaxPrefilter("script",function(S){S.cache===void 0&&(S.cache=!1),S.crossDomain&&(S.type="GET")}),G.ajaxTransport("script",function(S){if(S.crossDomain||S.scriptAttrs){var I,U;return{send:function(W,se){I=G("<script>").attr(S.scriptAttrs||{}).prop({charset:S.scriptCharset,src:S.url}).on("load error",U=function(le){I.remove(),U=null,le&&se(le.type==="error"?404:200,le.type)}),fe.head.appendChild(I[0])},abort:function(){U&&U()}}}});var bh=[],Rl=/(=)\?(?=&|$)|\?\?/;G.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var S=bh.pop()||G.expando+"_"+Pd.guid++;return this[S]=!0,S}}),G.ajaxPrefilter("json jsonp",function(S,I,U){var W,se,le,Ce=S.jsonp!==!1&&(Rl.test(S.url)?"url":typeof S.data=="string"&&(S.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Rl.test(S.data)&&"data");if(Ce||S.dataTypes[0]==="jsonp")return W=S.jsonpCallback=ae(S.jsonpCallback)?S.jsonpCallback():S.jsonpCallback,Ce?S[Ce]=S[Ce].replace(Rl,"$1"+W):S.jsonp!==!1&&(S.url+=(Bu.test(S.url)?"&":"?")+S.jsonp+"="+W),S.converters["script json"]=function(){return le||G.error(W+" was not called"),le[0]},S.dataTypes[0]="json",se=R[W],R[W]=function(){le=arguments},U.always(function(){se===void 0?G(R).removeProp(W):R[W]=se,S[W]&&(S.jsonpCallback=I.jsonpCallback,bh.push(W)),le&&ae(se)&&se(le[0]),le=se=void 0}),"script"}),xe.createHTMLDocument=function(){var S=fe.implementation.createHTMLDocument("").body;return S.innerHTML="<form></form><form></form>",S.childNodes.length===2}(),G.parseHTML=function(S,I,U){if(typeof S!="string")return[];typeof I=="boolean"&&(U=I,I=!1);var W,se,le;return I||(xe.createHTMLDocument?(I=fe.implementation.createHTMLDocument(""),W=I.createElement("base"),W.href=fe.location.href,I.head.appendChild(W)):I=fe),se=Ct.exec(S),le=!U&&[],se?[I.createElement(se[1])]:(se=yf([S],I,le),le&&le.length&&G(le).remove(),G.merge([],se.childNodes))},G.fn.load=function(S,I,U){var W,se,le,Ce=this,Ke=S.indexOf(" ");return Ke>-1&&(W=Pl(S.slice(Ke)),S=S.slice(0,Ke)),ae(I)?(U=I,I=void 0):I&&typeof I=="object"&&(se="POST"),Ce.length>0&&G.ajax({url:S,type:se||"GET",dataType:"html",data:I}).done(function(Je){le=arguments,Ce.html(W?G("<div>").append(G.parseHTML(Je)).find(W):Je)}).always(U&&function(Je,mt){Ce.each(function(){U.apply(this,le||[Je.responseText,mt,Je])})}),this},G.expr.pseudos.animated=function(S){return G.grep(G.timers,function(I){return S===I.elem}).length},G.offset={setOffset:function(S,I,U){var W,se,le,Ce,Ke,Je,mt,zt=G.css(S,"position"),xn=G(S),Nt={};zt==="static"&&(S.style.position="relative"),Ke=xn.offset(),le=G.css(S,"top"),Je=G.css(S,"left"),mt=(zt==="absolute"||zt==="fixed")&&(le+Je).indexOf("auto")>-1,mt?(W=xn.position(),Ce=W.top,se=W.left):(Ce=parseFloat(le)||0,se=parseFloat(Je)||0),ae(I)&&(I=I.call(S,U,G.extend({},Ke))),I.top!=null&&(Nt.top=I.top-Ke.top+Ce),I.left!=null&&(Nt.left=I.left-Ke.left+se),"using"in I?I.using.call(S,Nt):xn.css(Nt)}},G.fn.extend({offset:function(S){if(arguments.length)return S===void 0?this:this.each(function(se){G.offset.setOffset(this,S,se)});var I,U,W=this[0];if(!!W)return W.getClientRects().length?(I=W.getBoundingClientRect(),U=W.ownerDocument.defaultView,{top:I.top+U.pageYOffset,left:I.left+U.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var S,I,U,W=this[0],se={top:0,left:0};if(G.css(W,"position")==="fixed")I=W.getBoundingClientRect();else{for(I=this.offset(),U=W.ownerDocument,S=W.offsetParent||U.documentElement;S&&(S===U.body||S===U.documentElement)&&G.css(S,"position")==="static";)S=S.parentNode;S&&S!==W&&S.nodeType===1&&(se=G(S).offset(),se.top+=G.css(S,"borderTopWidth",!0),se.left+=G.css(S,"borderLeftWidth",!0))}return{top:I.top-se.top-G.css(W,"marginTop",!0),left:I.left-se.left-G.css(W,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var S=this.offsetParent;S&&G.css(S,"position")==="static";)S=S.offsetParent;return S||Wa})}}),G.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(S,I){var U=I==="pageYOffset";G.fn[S]=function(W){return Ts(this,function(se,le,Ce){var Ke;if(ce(se)?Ke=se:se.nodeType===9&&(Ke=se.defaultView),Ce===void 0)return Ke?Ke[I]:se[le];Ke?Ke.scrollTo(U?Ke.pageXOffset:Ce,U?Ce:Ke.pageYOffset):se[le]=Ce},S,W,arguments.length)}}),G.each(["top","left"],function(S,I){G.cssHooks[I]=vp(xe.pixelPosition,function(U,W){if(W)return W=Sd(U,I),bf.test(W)?G(U).position()[I]+"px":W})}),G.each({Height:"height",Width:"width"},function(S,I){G.each({padding:"inner"+S,content:I,"":"outer"+S},function(U,W){G.fn[W]=function(se,le){var Ce=arguments.length&&(U||typeof se!="boolean"),Ke=U||(se===!0||le===!0?"margin":"border");return Ts(this,function(Je,mt,zt){var xn;return ce(Je)?W.indexOf("outer")===0?Je["inner"+S]:Je.document.documentElement["client"+S]:Je.nodeType===9?(xn=Je.documentElement,Math.max(Je.body["scroll"+S],xn["scroll"+S],Je.body["offset"+S],xn["offset"+S],xn["client"+S])):zt===void 0?G.css(Je,mt,Ke):G.style(Je,mt,zt,Ke)},I,Ce?se:void 0,Ce)}})}),G.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(S,I){G.fn[I]=function(U){return this.on(I,U)}}),G.fn.extend({bind:function(S,I,U){return this.on(S,null,I,U)},unbind:function(S,I){return this.off(S,null,I)},delegate:function(S,I,U,W){return this.on(I,S,U,W)},undelegate:function(S,I,U){return arguments.length===1?this.off(S,"**"):this.off(I,S||"**",U)},hover:function(S,I){return this.mouseenter(S).mouseleave(I||S)}}),G.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(S,I){G.fn[I]=function(U,W){return arguments.length>0?this.on(I,null,U,W):this.trigger(I)}});var wp=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;G.proxy=function(S,I){var U,W,se;if(typeof I=="string"&&(U=S[I],I=S,S=U),!!ae(S))return W=te.call(arguments,2),se=function(){return S.apply(I||this,W.concat(te.call(arguments)))},se.guid=S.guid=S.guid||G.guid++,se},G.holdReady=function(S){S?G.readyWait++:G.ready(!0)},G.isArray=Array.isArray,G.parseJSON=JSON.parse,G.nodeName=ye,G.isFunction=ae,G.isWindow=ce,G.camelCase=oi,G.type=Ae,G.now=Date.now,G.isNumeric=function(S){var I=G.type(S);return(I==="number"||I==="string")&&!isNaN(S-parseFloat(S))},G.trim=function(S){return S==null?"":(S+"").replace(wp,"")},M=[],j=function(){return G}.apply(L,M),j!==void 0&&(Ne.exports=j);var lu=R.jQuery,Hu=R.$;return G.noConflict=function(S){return R.$===G&&(R.$=Hu),S&&R.jQuery===G&&(R.jQuery=lu),G},typeof q>"u"&&(R.jQuery=R.$=G),G})},47443:function(Ne,L,M){var j=M(42118);function R(q,z){var Z=q==null?0:q.length;return!!Z&&j(q,z,0)>-1}Ne.exports=R},1196:function(Ne){function L(M,j,R){for(var q=-1,z=M==null?0:M.length;++q<z;)if(R(j,M[q]))return!0;return!1}Ne.exports=L},41848:function(Ne){function L(M,j,R,q){for(var z=M.length,Z=R+(q?1:-1);q?Z--:++Z<z;)if(j(M[Z],Z,M))return Z;return-1}Ne.exports=L},42118:function(Ne,L,M){var j=M(41848),R=M(62722),q=M(42351);function z(Z,te,Q){return te===te?q(Z,te,Q):j(Z,R,Q)}Ne.exports=z},62722:function(Ne){function L(M){return M!==M}Ne.exports=L},45652:function(Ne,L,M){var j=M(88668),R=M(47443),q=M(1196),z=M(74757),Z=M(23593),te=M(21814),Q=200;function de(oe,ie,re){var he=-1,De=R,ue=oe.length,xe=!0,ae=[],ce=ae;if(re)xe=!1,De=q;else if(ue>=Q){var fe=ie?null:Z(oe);if(fe)return te(fe);xe=!1,De=z,ce=new j}else ce=ie?[]:ae;e:for(;++he<ue;){var Ee=oe[he],pe=ie?ie(Ee):Ee;if(Ee=re||Ee!==0?Ee:0,xe&&pe===pe){for(var Ae=ce.length;Ae--;)if(ce[Ae]===pe)continue e;ie&&ce.push(pe),ae.push(Ee)}else De(ce,pe,re)||(ce!==ae&&ce.push(pe),ae.push(Ee))}return ae}Ne.exports=de},23593:function(Ne,L,M){var j=M(58525),R=M(50308),q=M(21814),z=1/0,Z=j&&1/q(new j([,-0]))[1]==z?function(te){return new j(te)}:R;Ne.exports=Z},42351:function(Ne){function L(M,j,R){for(var q=R-1,z=M.length;++q<z;)if(M[q]===j)return q;return-1}Ne.exports=L},51584:function(Ne,L,M){var j=M(44239),R=M(37005),q="[object Boolean]";function z(Z){return Z===!0||Z===!1||R(Z)&&j(Z)==q}Ne.exports=z},96486:function(Ne,L,M){Ne=M.nmd(Ne);var j;(function(){var R,q="4.17.21",z=200,Z="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",te="Expected a function",Q="Invalid `variable` option passed into `_.template`",de="__lodash_hash_undefined__",oe=500,ie="__lodash_placeholder__",re=1,he=2,De=4,ue=1,xe=2,ae=1,ce=2,fe=4,Ee=8,pe=16,Ae=32,nt=64,G=128,Fe=256,He=512,et=30,Bt="...",Mn=800,ye=16,Ct=1,Pn=2,jt=3,cn=1/0,qn=9007199254740991,on=17976931348623157e292,lo=0/0,Zi=4294967295,Xn=Zi-1,Ar=Zi>>>1,lr=[["ary",G],["bind",ae],["bindKey",ce],["curry",Ee],["curryRight",pe],["flip",He],["partial",Ae],["partialRight",nt],["rearg",Fe]],Ir="[object Arguments]",Oi="[object Array]",Bi="[object AsyncFunction]",Kr="[object Boolean]",eo="[object Date]",Ts="[object DOMException]",Ks="[object Error]",bs="[object Function]",Zo="[object GeneratorFunction]",oi="[object Map]",Hi="[object Number]",xi="[object Null]",F="[object Object]",H="[object Promise]",mf="[object Proxy]",Oe="[object RegExp]",ac="[object Set]",ur="[object String]",ua="[object Symbol]",il="[object Undefined]",Ro="[object WeakMap]",Wa="[object WeakSet]",At="[object ArrayBuffer]",Jt="[object DataView]",Mt="[object Float32Array]",un="[object Float64Array]",Qn="[object Int8Array]",zi="[object Int16Array]",Lr="[object Int32Array]",jr="[object Uint8Array]",Sr="[object Uint8ClampedArray]",qr="[object Uint16Array]",Xr="[object Uint32Array]",ko=/\b__p \+= '';/g,Bc=/\b(__p \+=) '' \+/g,Cg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yf=/&(?:amp|lt|gt|quot|#39);/g,fh=/[&<>"']/g,Sc=RegExp(yf.source),xs=RegExp(fh.source),dp=/<%-([\s\S]+?)%>/g,Ed=/<%([\s\S]+?)%>/g,Yo=/<%=([\s\S]+?)%>/g,ph=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Al=/^\w*$/,hp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ou=/[\\^$.*+?()[\]{}|]/g,$i=RegExp(ou.source),uo=/^\s+/,ti=/\s/,To=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ms=/\{\n\/\* \[wrapped with (.+)\] \*/,su=/,? & /,fp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,bf=/[()=,{}\[\]\/\s]/,gh=/\\(\\)?/g,pp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gp=/\w*$/,Sd=/^[-+]0x[0-9a-f]+$/i,vp=/^0b[01]+$/i,Tl=/^\[object .+?Constructor\]$/,mp=/^0o[0-7]+$/i,xf=/^(?:0|[1-9]\d*)$/,_c=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ml=/($^)/,_d=/['\n\r\u2028\u2029\\]/g,Ad="\\ud800-\\udfff",wg="\\u0300-\\u036f",Ol="\\ufe20-\\ufe2f",da="\\u20d0-\\u20ff",ol=wg+Ol+da,Cs="\\u2700-\\u27bf",qs="a-z\\xdf-\\xf6\\xf8-\\xff",Td="\\xac\\xb1\\xd7\\xf7",Cf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",S0="\\u2000-\\u206f",_0=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",wf="A-Z\\xc0-\\xd6\\xd8-\\xde",Md="\\ufe0e\\ufe0f",Od=Td+Cf+S0+_0,Ef="['\u2019]",au="["+Ad+"]",sl="["+Od+"]",ha="["+ol+"]",cu="\\d+",zc="["+Cs+"]",Eg="["+qs+"]",Sg="[^"+Ad+Od+cu+Cs+qs+wf+"]",Pl="\\ud83c[\\udffb-\\udfff]",ku="(?:"+ha+"|"+Pl+")",Js="[^"+Ad+"]",Ta="(?:\\ud83c[\\udde6-\\uddff]){2}",Lu="[\\ud800-\\udbff][\\udc00-\\udfff]",Gu="["+wf+"]",Fu="\\u200d",Pd="(?:"+Eg+"|"+Sg+")",Bu="(?:"+Gu+"|"+Sg+")",yp="(?:"+Ef+"(?:d|ll|m|re|s|t|ve))?",zu="(?:"+Ef+"(?:D|LL|M|RE|S|T|VE))?",Ma=ku+"?",Uu="["+Md+"]?",Sf="(?:"+Fu+"(?:"+[Js,Ta,Lu].join("|")+")"+Uu+Ma+")*",_g="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xp=Uu+Ma+Sf,Cp="(?:"+[zc,Ta,Lu].join("|")+")"+xp,vh="(?:"+[Js+ha+"?",ha,Ta,Lu,au].join("|")+")",Dd=RegExp(Ef,"g"),Us=RegExp(ha,"g"),al=RegExp(Pl+"(?="+Pl+")|"+vh+xp,"g"),Vu=RegExp([Gu+"?"+Eg+"+"+yp+"(?="+[sl,Gu,"$"].join("|")+")",Bu+"+"+zu+"(?="+[sl,Gu+Pd,"$"].join("|")+")",Gu+"?"+Pd+"+"+yp,Gu+"+"+zu,bp,_g,cu,Cp].join("|"),"g"),Dl=RegExp("["+Fu+Ad+ol+Md+"]"),mh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yh=-1,vo={};vo[Mt]=vo[un]=vo[Qn]=vo[zi]=vo[Lr]=vo[jr]=vo[Sr]=vo[qr]=vo[Xr]=!0,vo[Ir]=vo[Oi]=vo[At]=vo[Kr]=vo[Jt]=vo[eo]=vo[Ks]=vo[bs]=vo[oi]=vo[Hi]=vo[F]=vo[Oe]=vo[ac]=vo[ur]=vo[Ro]=!1;var ho={};ho[Ir]=ho[Oi]=ho[At]=ho[Jt]=ho[Kr]=ho[eo]=ho[Mt]=ho[un]=ho[Qn]=ho[zi]=ho[Lr]=ho[oi]=ho[Hi]=ho[F]=ho[Oe]=ho[ac]=ho[ur]=ho[ua]=ho[jr]=ho[Sr]=ho[qr]=ho[Xr]=!0,ho[Ks]=ho[bs]=ho[Ro]=!1;var ju={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Nl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Il={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rl=parseFloat,wp=parseInt,lu=typeof M.g=="object"&&M.g&&M.g.Object===Object&&M.g,Hu=typeof self=="object"&&self&&self.Object===Object&&self,S=lu||Hu||Function("return this")(),I=L&&!L.nodeType&&L,U=I&&!0&&Ne&&!Ne.nodeType&&Ne,W=U&&U.exports===I,se=W&&lu.process,le=function(){try{var pt=U&&U.require&&U.require("util").types;return pt||se&&se.binding&&se.binding("util")}catch{}}(),Ce=le&&le.isArrayBuffer,Ke=le&&le.isDate,Je=le&&le.isMap,mt=le&&le.isRegExp,zt=le&&le.isSet,xn=le&&le.isTypedArray;function Nt(pt,Qt,Ft){switch(Ft.length){case 0:return pt.call(Qt);case 1:return pt.call(Qt,Ft[0]);case 2:return pt.call(Qt,Ft[0],Ft[1]);case 3:return pt.call(Qt,Ft[0],Ft[1],Ft[2])}return pt.apply(Qt,Ft)}function Yt(pt,Qt,Ft,or){for(var Hr=-1,Yi=pt==null?0:pt.length;++Hr<Yi;){var bo=pt[Hr];Qt(or,bo,Ft(bo),pt)}return or}function Wn(pt,Qt){for(var Ft=-1,or=pt==null?0:pt.length;++Ft<or&&Qt(pt[Ft],Ft,pt)!==!1;);return pt}function ai(pt,Qt){for(var Ft=pt==null?0:pt.length;Ft--&&Qt(pt[Ft],Ft,pt)!==!1;);return pt}function mr(pt,Qt){for(var Ft=-1,or=pt==null?0:pt.length;++Ft<or;)if(!Qt(pt[Ft],Ft,pt))return!1;return!0}function mo(pt,Qt){for(var Ft=-1,or=pt==null?0:pt.length,Hr=0,Yi=[];++Ft<or;){var bo=pt[Ft];Qt(bo,Ft,pt)&&(Yi[Hr++]=bo)}return Yi}function Mo(pt,Qt){var Ft=pt==null?0:pt.length;return!!Ft&&Ko(pt,Qt,0)>-1}function pa(pt,Qt,Ft){for(var or=-1,Hr=pt==null?0:pt.length;++or<Hr;)if(Ft(Qt,pt[or]))return!0;return!1}function Gr(pt,Qt){for(var Ft=-1,or=pt==null?0:pt.length,Hr=Array(or);++Ft<or;)Hr[Ft]=Qt(pt[Ft],Ft,pt);return Hr}function Rr(pt,Qt){for(var Ft=-1,or=Qt.length,Hr=pt.length;++Ft<or;)pt[Hr+Ft]=Qt[Ft];return pt}function fi(pt,Qt,Ft,or){var Hr=-1,Yi=pt==null?0:pt.length;for(or&&Yi&&(Ft=pt[++Hr]);++Hr<Yi;)Ft=Qt(Ft,pt[Hr],Hr,pt);return Ft}function Ni(pt,Qt,Ft,or){var Hr=pt==null?0:pt.length;for(or&&Hr&&(Ft=pt[--Hr]);Hr--;)Ft=Qt(Ft,pt[Hr],Hr,pt);return Ft}function Lo(pt,Qt){for(var Ft=-1,or=pt==null?0:pt.length;++Ft<or;)if(Qt(pt[Ft],Ft,pt))return!0;return!1}var Oa=Oo("length");function kl(pt){return pt.split("")}function Fs(pt){return pt.match(fp)||[]}function Pa(pt,Qt,Ft){var or;return Ft(pt,function(Hr,Yi,bo){if(Qt(Hr,Yi,bo))return or=Yi,!1}),or}function Vs(pt,Qt,Ft,or){for(var Hr=pt.length,Yi=Ft+(or?1:-1);or?Yi--:++Yi<Hr;)if(Qt(pt[Yi],Yi,pt))return Yi;return-1}function Ko(pt,Qt,Ft){return Qt===Qt?Fl(pt,Qt,Ft):Vs(pt,js,Ft)}function Da(pt,Qt,Ft,or){for(var Hr=Ft-1,Yi=pt.length;++Hr<Yi;)if(or(pt[Hr],Qt))return Hr;return-1}function js(pt){return pt!==pt}function Uc(pt,Qt){var Ft=pt==null?0:pt.length;return Ft?ws(pt,Qt)/Ft:lo}function Oo(pt){return function(Qt){return Qt==null?R:Qt[pt]}}function Bs(pt){return function(Qt){return pt==null?R:pt[Qt]}}function Xa(pt,Qt,Ft,or,Hr){return Hr(pt,function(Yi,bo,Ji){Ft=or?(or=!1,Yi):Qt(Ft,Yi,bo,Ji)}),Ft}function ao(pt,Qt){var Ft=pt.length;for(pt.sort(Qt);Ft--;)pt[Ft]=pt[Ft].value;return pt}function ws(pt,Qt){for(var Ft,or=-1,Hr=pt.length;++or<Hr;){var Yi=Qt(pt[or]);Yi!==R&&(Ft=Ft===R?Yi:Ft+Yi)}return Ft}function Ac(pt,Qt){for(var Ft=-1,or=Array(pt);++Ft<pt;)or[Ft]=Qt(Ft);return or}function cc(pt,Qt){return Gr(Qt,function(Ft){return[Ft,pt[Ft]]})}function Ll(pt){return pt&&pt.slice(0,ma(pt)+1).replace(uo,"")}function Os(pt){return function(Qt){return pt(Qt)}}function $u(pt,Qt){return Gr(Qt,function(Ft){return pt[Ft]})}function Na(pt,Qt){return pt.has(Qt)}function uu(pt,Qt){for(var Ft=-1,or=pt.length;++Ft<or&&Ko(Qt,pt[Ft],0)>-1;);return Ft}function qo(pt,Qt){for(var Ft=pt.length;Ft--&&Ko(Qt,pt[Ft],0)>-1;);return Ft}function Wu(pt,Qt){for(var Ft=pt.length,or=0;Ft--;)pt[Ft]===Qt&&++or;return or}var Gl=Bs(ju),cl=Bs(Nl);function xh(pt){return"\\"+bh[pt]}function Ia(pt,Qt){return pt==null?R:pt[Qt]}function Za(pt){return Dl.test(pt)}function du(pt){return mh.test(pt)}function Xu(pt){for(var Qt,Ft=[];!(Qt=pt.next()).done;)Ft.push(Qt.value);return Ft}function ga(pt){var Qt=-1,Ft=Array(pt.size);return pt.forEach(function(or,Hr){Ft[++Qt]=[Hr,or]}),Ft}function Jo(pt,Qt){return function(Ft){return pt(Qt(Ft))}}function va(pt,Qt){for(var Ft=-1,or=pt.length,Hr=0,Yi=[];++Ft<or;){var bo=pt[Ft];(bo===Qt||bo===ie)&&(pt[Ft]=ie,Yi[Hr++]=Ft)}return Yi}function hu(pt){var Qt=-1,Ft=Array(pt.size);return pt.forEach(function(or){Ft[++Qt]=or}),Ft}function Zu(pt){var Qt=-1,Ft=Array(pt.size);return pt.forEach(function(or){Ft[++Qt]=[or,or]}),Ft}function Fl(pt,Qt,Ft){for(var or=Ft-1,Hr=pt.length;++or<Hr;)if(pt[or]===Qt)return or;return-1}function fo(pt,Qt,Ft){for(var or=Ft+1;or--;)if(pt[or]===Qt)return or;return or}function Ya(pt){return Za(pt)?Ch(pt):Oa(pt)}function $o(pt){return Za(pt)?Nd(pt):kl(pt)}function ma(pt){for(var Qt=pt.length;Qt--&&ti.test(pt.charAt(Qt)););return Qt}var Qs=Bs(Il);function Ch(pt){for(var Qt=al.lastIndex=0;al.test(pt);)++Qt;return Qt}function Nd(pt){return pt.match(al)||[]}function _f(pt){return pt.match(Vu)||[]}var Af=function pt(Qt){Qt=Qt==null?S:lc.defaults(S.Object(),Qt,lc.pick(S,fa));var Ft=Qt.Array,or=Qt.Date,Hr=Qt.Error,Yi=Qt.Function,bo=Qt.Math,Ji=Qt.Object,Id=Qt.RegExp,Yu=Qt.String,Te=Qt.TypeError,Ye=Ft.prototype,lt=Yi.prototype,Tt=Ji.prototype,yt=Qt["__core-js_shared__"],an=lt.toString,Ut=Tt.hasOwnProperty,Bn=0,Zn=function(){var m=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),wr=Tt.toString,yr=an.call(Ji),Tr=S._,Ci=Id("^"+an.call(Ut).replace(ou,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ci=W?Qt.Buffer:R,br=Qt.Symbol,xo=Qt.Uint8Array,Ui=ci?ci.allocUnsafe:R,ea=Jo(Ji.getPrototypeOf,Ji),Po=Ji.create,uc=Tt.propertyIsEnumerable,ll=Ye.splice,Ra=br?br.isConcatSpreadable:R,Ka=br?br.iterator:R,Tc=br?br.toStringTag:R,Vc=function(){try{var m=en(Ji,"defineProperty");return m({},"",{}),m}catch{}}(),fu=Qt.clearTimeout!==S.clearTimeout&&Qt.clearTimeout,li=or&&or.now!==S.Date.now&&or.now,pi=Qt.setTimeout!==S.setTimeout&&Qt.setTimeout,wh=bo.ceil,pu=bo.floor,Eh=Ji.getOwnPropertySymbols,Ag=ci?ci.isBuffer:R,Tf=Qt.isFinite,Ku=Ye.join,dc=Jo(Ji.keys,Ji),cs=bo.max,Es=bo.min,A0=or.now,Ep=Qt.parseInt,qu=bo.random,Mf=Ye.reverse,Sp=en(Qt,"DataView"),ka=en(Qt,"Map"),Rd=en(Qt,"Promise"),Hs=en(Qt,"Set"),qa=en(Qt,"WeakMap"),Ju=en(Ji,"create"),Sh=qa&&new qa,ta={},ul=ns(Sp),Qu=ns(ka),kd=ns(Rd),qv=ns(Hs),_h=ns(qa),_p=br?br.prototype:R,Ah=_p?_p.valueOf:R,Tg=_p?_p.toString:R;function Me(m){if(hi(m)&&!gi(m)&&!(m instanceof Ai)){if(m instanceof La)return m;if(Ut.call(m,"__wrapped__"))return Br(m)}return new La(m)}var Th=function(){function m(){}return function(C){if(!Ns(C))return{};if(Po)return Po(C);m.prototype=C;var D=new m;return m.prototype=R,D}}();function Ld(){}function La(m,C){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=R}Me.templateSettings={escape:dp,evaluate:Ed,interpolate:Yo,variable:"",imports:{_:Me}},Me.prototype=Ld.prototype,Me.prototype.constructor=Me,La.prototype=Th(Ld.prototype),La.prototype.constructor=La;function Ai(m){this.__wrapped__=m,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Zi,this.__views__=[]}function Jv(){var m=new Ai(this.__wrapped__);return m.__actions__=Ja(this.__actions__),m.__dir__=this.__dir__,m.__filtered__=this.__filtered__,m.__iteratees__=Ja(this.__iteratees__),m.__takeCount__=this.__takeCount__,m.__views__=Ja(this.__views__),m}function ed(){if(this.__filtered__){var m=new Ai(this);m.__dir__=-1,m.__filtered__=!0}else m=this.clone(),m.__dir__*=-1;return m}function T0(){var m=this.__wrapped__.value(),C=this.__dir__,D=gi(m),Y=C<0,ve=D?m.length:0,ke=Nn(0,ve,this.__views__),Ze=ke.start,st=ke.end,Ot=st-Ze,mn=Y?st:Ze-1,Cn=this.__iteratees__,Dn=Cn.length,nr=0,Pr=Es(Ot,this.__takeCount__);if(!D||!Y&&ve==Ot&&Pr==Ot)return Ds(m,this.__actions__);var ri=[];e:for(;Ot--&&nr<Pr;){mn+=C;for(var Ri=-1,ii=m[mn];++Ri<Dn;){var Ki=Cn[Ri],ro=Ki.iteratee,Jl=Ki.type,Jc=ro(ii);if(Jl==Pn)ii=Jc;else if(!Jc){if(Jl==Ct)continue e;break e}}ri[nr++]=ii}return ri}Ai.prototype=Th(Ld.prototype),Ai.prototype.constructor=Ai;function td(m){var C=-1,D=m==null?0:m.length;for(this.clear();++C<D;){var Y=m[C];this.set(Y[0],Y[1])}}function M0(){this.__data__=Ju?Ju(null):{},this.size=0}function Bl(m){var C=this.has(m)&&delete this.__data__[m];return this.size-=C?1:0,C}function Mg(m){var C=this.__data__;if(Ju){var D=C[m];return D===de?R:D}return Ut.call(C,m)?C[m]:R}function Ap(m){var C=this.__data__;return Ju?C[m]!==R:Ut.call(C,m)}function Og(m,C){var D=this.__data__;return this.size+=this.has(m)?0:1,D[m]=Ju&&C===R?de:C,this}td.prototype.clear=M0,td.prototype.delete=Bl,td.prototype.get=Mg,td.prototype.has=Ap,td.prototype.set=Og;function gu(m){var C=-1,D=m==null?0:m.length;for(this.clear();++C<D;){var Y=m[C];this.set(Y[0],Y[1])}}function O0(){this.__data__=[],this.size=0}function Qv(m){var C=this.__data__,D=fc(C,m);if(D<0)return!1;var Y=C.length-1;return D==Y?C.pop():ll.call(C,D,1),--this.size,!0}function Vy(m){var C=this.__data__,D=fc(C,m);return D<0?R:C[D][1]}function nd(m){return fc(this.__data__,m)>-1}function P0(m,C){var D=this.__data__,Y=fc(D,m);return Y<0?(++this.size,D.push([m,C])):D[Y][1]=C,this}gu.prototype.clear=O0,gu.prototype.delete=Qv,gu.prototype.get=Vy,gu.prototype.has=nd,gu.prototype.set=P0;function zl(m){var C=-1,D=m==null?0:m.length;for(this.clear();++C<D;){var Y=m[C];this.set(Y[0],Y[1])}}function to(){this.size=0,this.__data__={hash:new td,map:new(ka||gu),string:new td}}function em(m){var C=xt(this,m).delete(m);return this.size-=C?1:0,C}function Pg(m){return xt(this,m).get(m)}function rd(m){return xt(this,m).has(m)}function Gd(m,C){var D=xt(this,m),Y=D.size;return D.set(m,C),this.size+=D.size==Y?0:1,this}zl.prototype.clear=to,zl.prototype.delete=em,zl.prototype.get=Pg,zl.prototype.has=rd,zl.prototype.set=Gd;function Mc(m){var C=-1,D=m==null?0:m.length;for(this.__data__=new zl;++C<D;)this.add(m[C])}function Mh(m){return this.__data__.set(m,de),this}function Go(m){return this.__data__.has(m)}Mc.prototype.add=Mc.prototype.push=Mh,Mc.prototype.has=Go;function Vi(m){var C=this.__data__=new gu(m);this.size=C.size}function Oh(){this.__data__=new gu,this.size=0}function hc(m){var C=this.__data__,D=C.delete(m);return this.size=C.size,D}function Of(m){return this.__data__.get(m)}function Tp(m){return this.__data__.has(m)}function Fd(m,C){var D=this.__data__;if(D instanceof gu){var Y=D.__data__;if(!ka||Y.length<z-1)return Y.push([m,C]),this.size=++D.size,this;D=this.__data__=new zl(Y)}return D.set(m,C),this.size=D.size,this}Vi.prototype.clear=Oh,Vi.prototype.delete=hc,Vi.prototype.get=Of,Vi.prototype.has=Tp,Vi.prototype.set=Fd;function Bd(m,C){var D=gi(m),Y=!D&&rh(m),ve=!D&&!Y&&Wf(m),ke=!D&&!Y&&!ve&&Vp(m),Ze=D||Y||ve||ke,st=Ze?Ac(m.length,Yu):[],Ot=st.length;for(var mn in m)(C||Ut.call(m,mn))&&!(Ze&&(mn=="length"||ve&&(mn=="offset"||mn=="parent")||ke&&(mn=="buffer"||mn=="byteLength"||mn=="byteOffset")||Fn(mn,Ot)))&&st.push(mn);return st}function Oc(m){var C=m.length;return C?m[Yd(0,C-1)]:R}function Pf(m,C){return es(Ja(m),Hc(C,0,m.length))}function dl(m){return es(Ja(m))}function Df(m,C,D){(D!==R&&!Yc(m[C],D)||D===R&&!(C in m))&&$s(m,C,D)}function Pc(m,C,D){var Y=m[C];(!(Ut.call(m,C)&&Yc(Y,D))||D===R&&!(C in m))&&$s(m,C,D)}function fc(m,C){for(var D=m.length;D--;)if(Yc(m[D][0],C))return D;return-1}function Dg(m,C,D,Y){return pc(m,function(ve,ke,Ze){C(Y,ve,D(ve),Ze)}),Y}function jc(m,C){return m&&mc(C,Is(C),m)}function id(m,C){return m&&mc(C,Ca(C),m)}function $s(m,C,D){C=="__proto__"&&Vc?Vc(m,C,{configurable:!0,enumerable:!0,value:D,writable:!0}):m[C]=D}function od(m,C){for(var D=-1,Y=C.length,ve=Ft(Y),ke=m==null;++D<Y;)ve[D]=ke?R:Z0(m,C[D]);return ve}function Hc(m,C,D){return m===m&&(D!==R&&(m=m<=D?m:D),C!==R&&(m=m>=C?m:C)),m}function ya(m,C,D,Y,ve,ke){var Ze,st=C&re,Ot=C&he,mn=C&De;if(D&&(Ze=ve?D(m,Y,ve,ke):D(m)),Ze!==R)return Ze;if(!Ns(m))return m;var Cn=gi(m);if(Cn){if(Ze=ht(m),!st)return Ja(m,Ze)}else{var Dn=sn(m),nr=Dn==bs||Dn==Zo;if(Wf(m))return Jd(m,st);if(Dn==F||Dn==Ir||nr&&!ve){if(Ze=Ot||nr?{}:Rt(m),!st)return Ot?im(m,id(Ze,m)):N0(m,jc(Ze,m))}else{if(!ho[Dn])return ve?m:{};Ze=vn(m,Dn,st)}}ke||(ke=new Vi);var Pr=ke.get(m);if(Pr)return Pr;ke.set(m,Ze),_b(m)?m.forEach(function(ii){Ze.add(ya(ii,C,D,ii,m,ke))}):zg(m)&&m.forEach(function(ii,Ki){Ze.set(Ki,ya(ii,C,D,Ki,m,ke))});var ri=mn?Ot?K:Zl:Ot?Ca:Is,Ri=Cn?R:ri(m);return Wn(Ri||m,function(ii,Ki){Ri&&(Ki=ii,ii=m[Ki]),Pc(Ze,Ki,ya(ii,C,D,Ki,m,ke))}),Ze}function zd(m){var C=Is(m);return function(D){return Ud(D,m,C)}}function Ud(m,C,D){var Y=D.length;if(m==null)return!Y;for(m=Ji(m);Y--;){var ve=D[Y],ke=C[ve],Ze=m[ve];if(Ze===R&&!(ve in m)||!ke(Ze))return!1}return!0}function Dc(m,C,D){if(typeof m!="function")throw new Te(te);return Jr(function(){m.apply(R,D)},C)}function sd(m,C,D,Y){var ve=-1,ke=Mo,Ze=!0,st=m.length,Ot=[],mn=C.length;if(!st)return Ot;D&&(C=Gr(C,Os(D))),Y?(ke=pa,Ze=!1):C.length>=z&&(ke=Na,Ze=!1,C=new Mc(C));e:for(;++ve<st;){var Cn=m[ve],Dn=D==null?Cn:D(Cn);if(Cn=Y||Cn!==0?Cn:0,Ze&&Dn===Dn){for(var nr=mn;nr--;)if(C[nr]===Dn)continue e;Ot.push(Cn)}else ke(C,Dn,Y)||Ot.push(Cn)}return Ot}var pc=vl(Nc),Ng=vl($c,!0);function D0(m,C){var D=!0;return pc(m,function(Y,ve,ke){return D=!!C(Y,ve,ke),D}),D}function Nf(m,C,D){for(var Y=-1,ve=m.length;++Y<ve;){var ke=m[Y],Ze=C(ke);if(Ze!=null&&(st===R?Ze===Ze&&!qc(Ze):D(Ze,st)))var st=Ze,Ot=ke}return Ot}function Mp(m,C,D,Y){var ve=m.length;for(D=Mi(D),D<0&&(D=-D>ve?0:ve+D),Y=Y===R||Y>ve?ve:Mi(Y),Y<0&&(Y+=ve),Y=D>Y?0:$0(Y);D<Y;)m[D++]=C;return m}function Op(m,C){var D=[];return pc(m,function(Y,ve,ke){C(Y,ve,ke)&&D.push(Y)}),D}function na(m,C,D,Y,ve){var ke=-1,Ze=m.length;for(D||(D=tn),ve||(ve=[]);++ke<Ze;){var st=m[ke];C>0&&D(st)?C>1?na(st,C-1,D,Y,ve):Rr(ve,st):Y||(ve[ve.length]=st)}return ve}var Ph=jf(),Pp=jf(!0);function Nc(m,C){return m&&Ph(m,C,Is)}function $c(m,C){return m&&Pp(m,C,Is)}function Vd(m,C){return mo(C,function(D){return ih(m[D])})}function vu(m,C){C=Fa(C,m);for(var D=0,Y=C.length;m!=null&&D<Y;)m=m[Co(C[D++])];return D&&D==Y?m:R}function Ig(m,C,D){var Y=C(m);return gi(m)?Y:Rr(Y,D(m))}function ra(m){return m==null?m===R?il:xi:Tc&&Tc in Ji(m)?hn(m):si(m)}function If(m,C){return m>C}function jd(m,C){return m!=null&&Ut.call(m,C)}function Dh(m,C){return m!=null&&C in Ji(m)}function Ul(m,C,D){return m>=Es(C,D)&&m<cs(C,D)}function Rf(m,C,D){for(var Y=D?pa:Mo,ve=m[0].length,ke=m.length,Ze=ke,st=Ft(ke),Ot=1/0,mn=[];Ze--;){var Cn=m[Ze];Ze&&C&&(Cn=Gr(Cn,Os(C))),Ot=Es(Cn.length,Ot),st[Ze]=!D&&(C||ve>=120&&Cn.length>=120)?new Mc(Ze&&Cn):R}Cn=m[0];var Dn=-1,nr=st[0];e:for(;++Dn<ve&&mn.length<Ot;){var Pr=Cn[Dn],ri=C?C(Pr):Pr;if(Pr=D||Pr!==0?Pr:0,!(nr?Na(nr,ri):Y(mn,ri,D))){for(Ze=ke;--Ze;){var Ri=st[Ze];if(!(Ri?Na(Ri,ri):Y(m[Ze],ri,D)))continue e}nr&&nr.push(ri),mn.push(Pr)}}return mn}function kf(m,C,D,Y){return Nc(m,function(ve,ke,Ze){C(Y,D(ve),ke,Ze)}),Y}function Vl(m,C,D){C=Fa(C,m),m=$r(m,C);var Y=m==null?m:m[Co(rt(C))];return Y==null?R:Nt(Y,m,D)}function mu(m){return hi(m)&&ra(m)==Ir}function Ic(m){return hi(m)&&ra(m)==At}function Rc(m){return hi(m)&&ra(m)==eo}function Nh(m,C,D,Y,ve){return m===C?!0:m==null||C==null||!hi(m)&&!hi(C)?m!==m&&C!==C:Hd(m,C,D,Y,Nh,ve)}function Hd(m,C,D,Y,ve,ke){var Ze=gi(m),st=gi(C),Ot=Ze?Oi:sn(m),mn=st?Oi:sn(C);Ot=Ot==Ir?F:Ot,mn=mn==Ir?F:mn;var Cn=Ot==F,Dn=mn==F,nr=Ot==mn;if(nr&&Wf(m)){if(!Wf(C))return!1;Ze=!0,Cn=!1}if(nr&&!Cn)return ke||(ke=new Vi),Ze||Vp(m)?_u(m,C,D,Y,ve,ke):R0(m,C,Ot,D,Y,ve,ke);if(!(D&ue)){var Pr=Cn&&Ut.call(m,"__wrapped__"),ri=Dn&&Ut.call(C,"__wrapped__");if(Pr||ri){var Ri=Pr?m.value():m,ii=ri?C.value():C;return ke||(ke=new Vi),ve(Ri,ii,D,Y,ke)}}return nr?(ke||(ke=new Vi),Lg(m,C,D,Y,ve,ke)):!1}function jl(m){return hi(m)&&sn(m)==oi}function Hl(m,C,D,Y){var ve=D.length,ke=ve,Ze=!Y;if(m==null)return!ke;for(m=Ji(m);ve--;){var st=D[ve];if(Ze&&st[2]?st[1]!==m[st[0]]:!(st[0]in m))return!1}for(;++ve<ke;){st=D[ve];var Ot=st[0],mn=m[Ot],Cn=st[1];if(Ze&&st[2]){if(mn===R&&!(Ot in m))return!1}else{var Dn=new Vi;if(Y)var nr=Y(mn,Cn,Ot,m,C,Dn);if(!(nr===R?Nh(Cn,mn,ue|xe,Y,Dn):nr))return!1}}return!0}function hl(m){if(!Ns(m)||hr(m))return!1;var C=ih(m)?Ci:Tl;return C.test(ns(m))}function gc(m){return hi(m)&&ra(m)==Oe}function Lf(m){return hi(m)&&sn(m)==ac}function $d(m){return hi(m)&&U0(m.length)&&!!vo[ra(m)]}function vc(m){return typeof m=="function"?m:m==null?Eo:typeof m=="object"?gi(m)?Xd(m[0],m[1]):Wd(m):bl(m)}function $l(m){if(!Tn(m))return dc(m);var C=[];for(var D in Ji(m))Ut.call(m,D)&&D!="constructor"&&C.push(D);return C}function Dp(m){if(!Ns(m))return Yn(m);var C=Tn(m),D=[];for(var Y in m)Y=="constructor"&&(C||!Ut.call(m,Y))||D.push(Y);return D}function yu(m,C){return m<C}function bu(m,C){var D=-1,Y=Kc(m)?Ft(m.length):[];return pc(m,function(ve,ke,Ze){Y[++D]=C(ve,ke,Ze)}),Y}function Wd(m){var C=It(m);return C.length==1&&C[0][2]?qt(C[0][0],C[0][1]):function(D){return D===m||Hl(D,m,C)}}function Xd(m,C){return _n(m)&&dn(C)?qt(Co(m),C):function(D){var Y=Z0(D,m);return Y===R&&Y===C?Tm(D,m):Nh(C,Y,ue|xe)}}function kc(m,C,D,Y,ve){m!==C&&Ph(C,function(ke,Ze){if(ve||(ve=new Vi),Ns(ke))Wl(m,C,Ze,D,kc,Y,ve);else{var st=Y?Y(Qo(m,Ze),ke,Ze+"",m,C,ve):R;st===R&&(st=ke),Df(m,Ze,st)}},Ca)}function Wl(m,C,D,Y,ve,ke,Ze){var st=Qo(m,D),Ot=Qo(C,D),mn=Ze.get(Ot);if(mn){Df(m,D,mn);return}var Cn=ke?ke(st,Ot,D+"",m,C,Ze):R,Dn=Cn===R;if(Dn){var nr=gi(Ot),Pr=!nr&&Wf(Ot),ri=!nr&&!Pr&&Vp(Ot);Cn=Ot,nr||Pr||ri?gi(st)?Cn=st:Ws(st)?Cn=Ja(st):Pr?(Dn=!1,Cn=Jd(Ot,!0)):ri?(Dn=!1,Cn=Xc(Ot,!0)):Cn=[]:zo(Ot)||rh(Ot)?(Cn=st,rh(st)?Cn=jp(st):(!Ns(st)||ih(st))&&(Cn=Rt(Ot))):Dn=!1}Dn&&(Ze.set(Ot,Cn),ve(Cn,Ot,Y,ke,Ze),Ze.delete(Ot)),Df(m,D,Cn)}function Gf(m,C){var D=m.length;if(!!D)return C+=C<0?D:0,Fn(C,D)?m[C]:R}function Ff(m,C,D){C.length?C=Gr(C,function(ke){return gi(ke)?function(Ze){return vu(Ze,ke.length===1?ke[0]:ke)}:ke}):C=[Eo];var Y=-1;C=Gr(C,Os(ft()));var ve=bu(m,function(ke,Ze,st){var Ot=Gr(C,function(mn){return mn(ke)});return{criteria:Ot,index:++Y,value:ke}});return ao(ve,function(ke,Ze){return jy(ke,Ze,D)})}function Rg(m,C){return Ih(m,C,function(D,Y){return Tm(m,Y)})}function Ih(m,C,D){for(var Y=-1,ve=C.length,ke={};++Y<ve;){var Ze=C[Y],st=vu(m,Ze);D(st,Ze)&&xu(ke,Fa(Ze,m),st)}return ke}function ad(m){return function(C){return vu(C,m)}}function Zd(m,C,D,Y){var ve=Y?Da:Ko,ke=-1,Ze=C.length,st=m;for(m===C&&(C=Ja(C)),D&&(st=Gr(m,Os(D)));++ke<Ze;)for(var Ot=0,mn=C[ke],Cn=D?D(mn):mn;(Ot=ve(st,Cn,Ot,Y))>-1;)st!==m&&ll.call(st,Ot,1),ll.call(m,Ot,1);return m}function Xl(m,C){for(var D=m?C.length:0,Y=D-1;D--;){var ve=C[D];if(D==Y||ve!==ke){var ke=ve;Fn(ve)?ll.call(m,ve,1):pl(m,ve)}}return m}function Yd(m,C){return m+pu(qu()*(C-m+1))}function Rh(m,C,D,Y){for(var ve=-1,ke=cs(wh((C-m)/(D||1)),0),Ze=Ft(ke);ke--;)Ze[Y?ke:++ve]=m,m+=D;return Ze}function Kd(m,C){var D="";if(!m||C<1||C>qn)return D;do C%2&&(D+=m),C=pu(C/2),C&&(m+=m);while(C);return D}function ui(m,C){return fs(Dr(m,C,Eo),m+"")}function Bf(m){return Oc($p(m))}function Np(m,C){var D=$p(m);return es(D,Hc(C,0,D.length))}function xu(m,C,D,Y){if(!Ns(m))return m;C=Fa(C,m);for(var ve=-1,ke=C.length,Ze=ke-1,st=m;st!=null&&++ve<ke;){var Ot=Co(C[ve]),mn=D;if(Ot==="__proto__"||Ot==="constructor"||Ot==="prototype")return m;if(ve!=Ze){var Cn=st[Ot];mn=Y?Y(Cn,Ot,st):R,mn===R&&(mn=Ns(Cn)?Cn:Fn(C[ve+1])?[]:{})}Pc(st,Ot,mn),st=st[Ot]}return m}var zf=Sh?function(m,C){return Sh.set(m,C),m}:Eo,Ip=Vc?function(m,C){return Vc(m,"toString",{configurable:!0,enumerable:!1,value:Wg(C),writable:!0})}:Eo;function tm(m){return es($p(m))}function Wc(m,C,D){var Y=-1,ve=m.length;C<0&&(C=-C>ve?0:ve+C),D=D>ve?ve:D,D<0&&(D+=ve),ve=C>D?0:D-C>>>0,C>>>=0;for(var ke=Ft(ve);++Y<ve;)ke[Y]=m[Y+C];return ke}function Rp(m,C){var D;return pc(m,function(Y,ve,ke){return D=C(Y,ve,ke),!D}),!!D}function cd(m,C,D){var Y=0,ve=m==null?Y:m.length;if(typeof C=="number"&&C===C&&ve<=Ar){for(;Y<ve;){var ke=Y+ve>>>1,Ze=m[ke];Ze!==null&&!qc(Ze)&&(D?Ze<=C:Ze<C)?Y=ke+1:ve=ke}return ve}return fl(m,C,Eo,D)}function fl(m,C,D,Y){var ve=0,ke=m==null?0:m.length;if(ke===0)return 0;C=D(C);for(var Ze=C!==C,st=C===null,Ot=qc(C),mn=C===R;ve<ke;){var Cn=pu((ve+ke)/2),Dn=D(m[Cn]),nr=Dn!==R,Pr=Dn===null,ri=Dn===Dn,Ri=qc(Dn);if(Ze)var ii=Y||ri;else mn?ii=ri&&(Y||nr):st?ii=ri&&nr&&(Y||!Pr):Ot?ii=ri&&nr&&!Pr&&(Y||!Ri):Pr||Ri?ii=!1:ii=Y?Dn<=C:Dn<C;ii?ve=Cn+1:ke=Cn}return Es(ke,Xn)}function ld(m,C){for(var D=-1,Y=m.length,ve=0,ke=[];++D<Y;){var Ze=m[D],st=C?C(Ze):Ze;if(!D||!Yc(st,Ot)){var Ot=st;ke[ve++]=Ze===0?0:Ze}}return ke}function Cu(m){return typeof m=="number"?m:qc(m)?lo:+m}function Ps(m){if(typeof m=="string")return m;if(gi(m))return Gr(m,Ps)+"";if(qc(m))return Tg?Tg.call(m):"";var C=m+"";return C=="0"&&1/m==-cn?"-0":C}function Ga(m,C,D){var Y=-1,ve=Mo,ke=m.length,Ze=!0,st=[],Ot=st;if(D)Ze=!1,ve=pa;else if(ke>=z){var mn=C?null:Qa(m);if(mn)return hu(mn);Ze=!1,ve=Na,Ot=new Mc}else Ot=C?[]:st;e:for(;++Y<ke;){var Cn=m[Y],Dn=C?C(Cn):Cn;if(Cn=D||Cn!==0?Cn:0,Ze&&Dn===Dn){for(var nr=Ot.length;nr--;)if(Ot[nr]===Dn)continue e;C&&Ot.push(Dn),st.push(Cn)}else ve(Ot,Dn,D)||(Ot!==st&&Ot.push(Dn),st.push(Cn))}return st}function pl(m,C){return C=Fa(C,m),m=$r(m,C),m==null||delete m[Co(rt(C))]}function Uf(m,C,D,Y){return xu(m,C,D(vu(m,C)),Y)}function Wo(m,C,D,Y){for(var ve=m.length,ke=Y?ve:-1;(Y?ke--:++ke<ve)&&C(m[ke],ke,m););return D?Wc(m,Y?0:ke,Y?ke+1:ve):Wc(m,Y?ke+1:0,Y?ve:ke)}function Ds(m,C){var D=m;return D instanceof Ai&&(D=D.value()),fi(C,function(Y,ve){return ve.func.apply(ve.thisArg,Rr([Y],ve.args))},D)}function Hn(m,C,D){var Y=m.length;if(Y<2)return Y?Ga(m[0]):[];for(var ve=-1,ke=Ft(Y);++ve<Y;)for(var Ze=m[ve],st=-1;++st<Y;)st!=ve&&(ke[ve]=sd(ke[ve]||Ze,m[st],C,D));return Ga(na(ke,1),C,D)}function ud(m,C,D){for(var Y=-1,ve=m.length,ke=C.length,Ze={};++Y<ve;){var st=Y<ke?C[Y]:R;D(Ze,m[Y],st)}return Ze}function Vf(m){return Ws(m)?m:[]}function ia(m){return typeof m=="function"?m:Eo}function Fa(m,C){return gi(m)?m:_n(m,C)?[m]:ts(wo(m))}var vi=ui;function Ba(m,C,D){var Y=m.length;return D=D===R?Y:D,!C&&D>=Y?m:Wc(m,C,D)}var qd=fu||function(m){return S.clearTimeout(m)};function Jd(m,C){if(C)return m.slice();var D=m.length,Y=Ui?Ui(D):new m.constructor(D);return m.copy(Y),Y}function kp(m){var C=new m.constructor(m.byteLength);return new xo(C).set(new xo(m)),C}function kh(m,C){var D=C?kp(m.buffer):m.buffer;return new m.constructor(D,m.byteOffset,m.byteLength)}function gl(m){var C=new m.constructor(m.source,gp.exec(m));return C.lastIndex=m.lastIndex,C}function wu(m){return Ah?Ji(Ah.call(m)):{}}function Xc(m,C){var D=C?kp(m.buffer):m.buffer;return new m.constructor(D,m.byteOffset,m.length)}function nm(m,C){if(m!==C){var D=m!==R,Y=m===null,ve=m===m,ke=qc(m),Ze=C!==R,st=C===null,Ot=C===C,mn=qc(C);if(!st&&!mn&&!ke&&m>C||ke&&Ze&&Ot&&!st&&!mn||Y&&Ze&&Ot||!D&&Ot||!ve)return 1;if(!Y&&!ke&&!mn&&m<C||mn&&D&&ve&&!Y&&!ke||st&&D&&ve||!Ze&&ve||!Ot)return-1}return 0}function jy(m,C,D){for(var Y=-1,ve=m.criteria,ke=C.criteria,Ze=ve.length,st=D.length;++Y<Ze;){var Ot=nm(ve[Y],ke[Y]);if(Ot){if(Y>=st)return Ot;var mn=D[Y];return Ot*(mn=="desc"?-1:1)}}return m.index-C.index}function rm(m,C,D,Y){for(var ve=-1,ke=m.length,Ze=D.length,st=-1,Ot=C.length,mn=cs(ke-Ze,0),Cn=Ft(Ot+mn),Dn=!Y;++st<Ot;)Cn[st]=C[st];for(;++ve<Ze;)(Dn||ve<ke)&&(Cn[D[ve]]=m[ve]);for(;mn--;)Cn[st++]=m[ve++];return Cn}function ls(m,C,D,Y){for(var ve=-1,ke=m.length,Ze=-1,st=D.length,Ot=-1,mn=C.length,Cn=cs(ke-st,0),Dn=Ft(Cn+mn),nr=!Y;++ve<Cn;)Dn[ve]=m[ve];for(var Pr=ve;++Ot<mn;)Dn[Pr+Ot]=C[Ot];for(;++Ze<st;)(nr||ve<ke)&&(Dn[Pr+D[Ze]]=m[ve++]);return Dn}function Ja(m,C){var D=-1,Y=m.length;for(C||(C=Ft(Y));++D<Y;)C[D]=m[D];return C}function mc(m,C,D,Y){var ve=!D;D||(D={});for(var ke=-1,Ze=C.length;++ke<Ze;){var st=C[ke],Ot=Y?Y(D[st],m[st],st,D,m):R;Ot===R&&(Ot=m[st]),ve?$s(D,st,Ot):Pc(D,st,Ot)}return D}function N0(m,C){return mc(m,pn(m),C)}function im(m,C){return mc(m,fn(m),C)}function Lh(m,C){return function(D,Y){var ve=gi(D)?Yt:Dg,ke=C?C():{};return ve(D,m,ft(Y,2),ke)}}function Gh(m){return ui(function(C,D){var Y=-1,ve=D.length,ke=ve>1?D[ve-1]:R,Ze=ve>2?D[2]:R;for(ke=m.length>3&&typeof ke=="function"?(ve--,ke):R,Ze&&Wt(D[0],D[1],Ze)&&(ke=ve<3?R:ke,ve=1),C=Ji(C);++Y<ve;){var st=D[Y];st&&m(C,st,Y,ke)}return C})}function vl(m,C){return function(D,Y){if(D==null)return D;if(!Kc(D))return m(D,Y);for(var ve=D.length,ke=C?ve:-1,Ze=Ji(D);(C?ke--:++ke<ve)&&Y(Ze[ke],ke,Ze)!==!1;);return D}}function jf(m){return function(C,D,Y){for(var ve=-1,ke=Ji(C),Ze=Y(C),st=Ze.length;st--;){var Ot=Ze[m?st:++ve];if(D(ke[Ot],Ot,ke)===!1)break}return C}}function Fh(m,C,D){var Y=C&ae,ve=eh(m);function ke(){var Ze=this&&this!==S&&this instanceof ke?ve:m;return Ze.apply(Y?D:this,arguments)}return ke}function us(m){return function(C){C=wo(C);var D=Za(C)?$o(C):R,Y=D?D[0]:C.charAt(0),ve=D?Ba(D,1).join(""):C.slice(1);return Y[m]()+ve}}function Qd(m){return function(C){return fi(Tu(oa(C).replace(Dd,"")),m,"")}}function eh(m){return function(){var C=arguments;switch(C.length){case 0:return new m;case 1:return new m(C[0]);case 2:return new m(C[0],C[1]);case 3:return new m(C[0],C[1],C[2]);case 4:return new m(C[0],C[1],C[2],C[3]);case 5:return new m(C[0],C[1],C[2],C[3],C[4]);case 6:return new m(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new m(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var D=Th(m.prototype),Y=m.apply(D,C);return Ns(Y)?Y:D}}function Lp(m,C,D){var Y=eh(m);function ve(){for(var ke=arguments.length,Ze=Ft(ke),st=ke,Ot=Et(ve);st--;)Ze[st]=arguments[st];var mn=ke<3&&Ze[0]!==Ot&&Ze[ke-1]!==Ot?[]:va(Ze,Ot);if(ke-=mn.length,ke<D)return Bp(m,C,ml,ve.placeholder,R,Ze,mn,R,R,D-ke);var Cn=this&&this!==S&&this instanceof ve?Y:m;return Nt(Cn,this,Ze)}return ve}function Hf(m){return function(C,D,Y){var ve=Ji(C);if(!Kc(C)){var ke=ft(D,3);C=Is(C),D=function(st){return ke(ve[st],st,ve)}}var Ze=m(C,D,Y);return Ze>-1?ve[ke?C[Ze]:Ze]:R}}function za(m){return ec(function(C){var D=C.length,Y=D,ve=La.prototype.thru;for(m&&C.reverse();Y--;){var ke=C[Y];if(typeof ke!="function")throw new Te(te);if(ve&&!Ze&&ze(ke)=="wrapper")var Ze=new La([],!0)}for(Y=Ze?Y:D;++Y<D;){ke=C[Y];var st=ze(ke),Ot=st=="wrapper"?Pe(ke):R;Ot&&An(Ot[0])&&Ot[1]==(G|Ee|Ae|Fe)&&!Ot[4].length&&Ot[9]==1?Ze=Ze[ze(Ot[0])].apply(Ze,Ot[3]):Ze=ke.length==1&&An(ke)?Ze[st]():Ze.thru(ke)}return function(){var mn=arguments,Cn=mn[0];if(Ze&&mn.length==1&&gi(Cn))return Ze.plant(Cn).value();for(var Dn=0,nr=D?C[Dn].apply(this,mn):Cn;++Dn<D;)nr=C[Dn].call(this,nr);return nr}})}function ml(m,C,D,Y,ve,ke,Ze,st,Ot,mn){var Cn=C&G,Dn=C&ae,nr=C&ce,Pr=C&(Ee|pe),ri=C&He,Ri=nr?R:eh(m);function ii(){for(var Ki=arguments.length,ro=Ft(Ki),Jl=Ki;Jl--;)ro[Jl]=arguments[Jl];if(Pr)var Jc=Et(ii),Ea=Wu(ro,Jc);if(Y&&(ro=rm(ro,Y,ve,Pr)),ke&&(ro=ls(ro,ke,Ze,Pr)),Ki-=Ea,Pr&&Ki<mn){var wt=va(ro,Jc);return Bp(m,C,ml,ii.placeholder,D,ro,wt,st,Ot,mn-Ki)}var ja=Dn?D:this,hd=nr?ja[m]:m;return Ki=ro.length,st?ro=Ti(ro,st):ri&&Ki>1&&ro.reverse(),Cn&&Ot<Ki&&(ro.length=Ot),this&&this!==S&&this instanceof ii&&(hd=Ri||eh(hd)),hd.apply(ja,ro)}return ii}function ds(m,C){return function(D,Y){return kf(D,m,C(Y),{})}}function ba(m,C){return function(D,Y){var ve;if(D===R&&Y===R)return C;if(D!==R&&(ve=D),Y!==R){if(ve===R)return Y;typeof D=="string"||typeof Y=="string"?(D=Ps(D),Y=Ps(Y)):(D=Cu(D),Y=Cu(Y)),ve=m(D,Y)}return ve}}function Gp(m){return ec(function(C){return C=Gr(C,Os(ft())),ui(function(D){var Y=this;return m(C,function(ve){return Nt(ve,Y,D)})})})}function $f(m,C){C=C===R?" ":Ps(C);var D=C.length;if(D<2)return D?Kd(C,m):C;var Y=Kd(C,wh(m/Ya(C)));return Za(C)?Ba($o(Y),0,m).join(""):Y.slice(0,m)}function om(m,C,D,Y){var ve=C&ae,ke=eh(m);function Ze(){for(var st=-1,Ot=arguments.length,mn=-1,Cn=Y.length,Dn=Ft(Cn+Ot),nr=this&&this!==S&&this instanceof Ze?ke:m;++mn<Cn;)Dn[mn]=Y[mn];for(;Ot--;)Dn[mn++]=arguments[++st];return Nt(nr,ve?D:this,Dn)}return Ze}function Fp(m){return function(C,D,Y){return Y&&typeof Y!="number"&&Wt(C,D,Y)&&(D=Y=R),C=Kl(C),D===R?(D=C,C=0):D=Kl(D),Y=Y===R?C<D?1:-1:Kl(Y),Rh(C,D,Y,m)}}function Bh(m){return function(C,D){return typeof C=="string"&&typeof D=="string"||(C=yc(C),D=yc(D)),m(C,D)}}function Bp(m,C,D,Y,ve,ke,Ze,st,Ot,mn){var Cn=C&Ee,Dn=Cn?Ze:R,nr=Cn?R:Ze,Pr=Cn?ke:R,ri=Cn?R:ke;C|=Cn?Ae:nt,C&=~(Cn?nt:Ae),C&fe||(C&=~(ae|ce));var Ri=[m,C,ve,Pr,Dn,ri,nr,st,Ot,mn],ii=D.apply(R,Ri);return An(m)&&hs(ii,Ri),ii.placeholder=Y,yo(ii,m,C)}function xa(m){var C=bo[m];return function(D,Y){if(D=yc(D),Y=Y==null?0:Es(Mi(Y),292),Y&&Tf(D)){var ve=(wo(D)+"e").split("e"),ke=C(ve[0]+"e"+(+ve[1]+Y));return ve=(wo(ke)+"e").split("e"),+(ve[0]+"e"+(+ve[1]-Y))}return C(D)}}var Qa=Hs&&1/hu(new Hs([,-0]))[1]==cn?function(m){return new Hs(m)}:K0;function Eu(m){return function(C){var D=sn(C);return D==oi?ga(C):D==ac?Zu(C):cc(C,m(C))}}function Su(m,C,D,Y,ve,ke,Ze,st){var Ot=C&ce;if(!Ot&&typeof m!="function")throw new Te(te);var mn=Y?Y.length:0;if(mn||(C&=~(Ae|nt),Y=ve=R),Ze=Ze===R?Ze:cs(Mi(Ze),0),st=st===R?st:Mi(st),mn-=ve?ve.length:0,C&nt){var Cn=Y,Dn=ve;Y=ve=R}var nr=Ot?R:Pe(m),Pr=[m,C,D,Y,ve,Cn,Dn,ke,Ze,st];if(nr&&Fr(Pr,nr),m=Pr[0],C=Pr[1],D=Pr[2],Y=Pr[3],ve=Pr[4],st=Pr[9]=Pr[9]===R?Ot?0:m.length:cs(Pr[9]-mn,0),!st&&C&(Ee|pe)&&(C&=~(Ee|pe)),!C||C==ae)var ri=Fh(m,C,D);else C==Ee||C==pe?ri=Lp(m,C,st):(C==Ae||C==(ae|Ae))&&!ve.length?ri=om(m,C,D,Y):ri=ml.apply(R,Pr);var Ri=nr?zf:hs;return yo(Ri(ri,Pr),m,C)}function kg(m,C,D,Y){return m===R||Yc(m,Tt[D])&&!Ut.call(Y,D)?C:m}function zh(m,C,D,Y,ve,ke){return Ns(m)&&Ns(C)&&(ke.set(C,m),kc(m,C,R,zh,ke),ke.delete(C)),m}function I0(m){return zo(m)?R:m}function _u(m,C,D,Y,ve,ke){var Ze=D&ue,st=m.length,Ot=C.length;if(st!=Ot&&!(Ze&&Ot>st))return!1;var mn=ke.get(m),Cn=ke.get(C);if(mn&&Cn)return mn==C&&Cn==m;var Dn=-1,nr=!0,Pr=D&xe?new Mc:R;for(ke.set(m,C),ke.set(C,m);++Dn<st;){var ri=m[Dn],Ri=C[Dn];if(Y)var ii=Ze?Y(Ri,ri,Dn,C,m,ke):Y(ri,Ri,Dn,m,C,ke);if(ii!==R){if(ii)continue;nr=!1;break}if(Pr){if(!Lo(C,function(Ki,ro){if(!Na(Pr,ro)&&(ri===Ki||ve(ri,Ki,D,Y,ke)))return Pr.push(ro)})){nr=!1;break}}else if(!(ri===Ri||ve(ri,Ri,D,Y,ke))){nr=!1;break}}return ke.delete(m),ke.delete(C),nr}function R0(m,C,D,Y,ve,ke,Ze){switch(D){case Jt:if(m.byteLength!=C.byteLength||m.byteOffset!=C.byteOffset)return!1;m=m.buffer,C=C.buffer;case At:return!(m.byteLength!=C.byteLength||!ke(new xo(m),new xo(C)));case Kr:case eo:case Hi:return Yc(+m,+C);case Ks:return m.name==C.name&&m.message==C.message;case Oe:case ur:return m==C+"";case oi:var st=ga;case ac:var Ot=Y&ue;if(st||(st=hu),m.size!=C.size&&!Ot)return!1;var mn=Ze.get(m);if(mn)return mn==C;Y|=xe,Ze.set(m,C);var Cn=_u(st(m),st(C),Y,ve,ke,Ze);return Ze.delete(m),Cn;case ua:if(Ah)return Ah.call(m)==Ah.call(C)}return!1}function Lg(m,C,D,Y,ve,ke){var Ze=D&ue,st=Zl(m),Ot=st.length,mn=Zl(C),Cn=mn.length;if(Ot!=Cn&&!Ze)return!1;for(var Dn=Ot;Dn--;){var nr=st[Dn];if(!(Ze?nr in C:Ut.call(C,nr)))return!1}var Pr=ke.get(m),ri=ke.get(C);if(Pr&&ri)return Pr==C&&ri==m;var Ri=!0;ke.set(m,C),ke.set(C,m);for(var ii=Ze;++Dn<Ot;){nr=st[Dn];var Ki=m[nr],ro=C[nr];if(Y)var Jl=Ze?Y(ro,Ki,nr,C,m,ke):Y(Ki,ro,nr,m,C,ke);if(!(Jl===R?Ki===ro||ve(Ki,ro,D,Y,ke):Jl)){Ri=!1;break}ii||(ii=nr=="constructor")}if(Ri&&!ii){var Jc=m.constructor,Ea=C.constructor;Jc!=Ea&&"constructor"in m&&"constructor"in C&&!(typeof Jc=="function"&&Jc instanceof Jc&&typeof Ea=="function"&&Ea instanceof Ea)&&(Ri=!1)}return ke.delete(m),ke.delete(C),Ri}function ec(m){return fs(Dr(m,R,Ge),m+"")}function Zl(m){return Ig(m,Is,pn)}function K(m){return Ig(m,Ca,fn)}var Pe=Sh?function(m){return Sh.get(m)}:K0;function ze(m){for(var C=m.name+"",D=ta[C],Y=Ut.call(ta,C)?D.length:0;Y--;){var ve=D[Y],ke=ve.func;if(ke==null||ke==m)return ve.name}return C}function Et(m){var C=Ut.call(Me,"placeholder")?Me:m;return C.placeholder}function ft(){var m=Me.iteratee||no;return m=m===no?vc:m,arguments.length?m(arguments[0],arguments[1]):m}function xt(m,C){var D=m.__data__;return nn(C)?D[typeof C=="string"?"string":"hash"]:D.map}function It(m){for(var C=Is(m),D=C.length;D--;){var Y=C[D],ve=m[Y];C[D]=[Y,ve,dn(ve)]}return C}function en(m,C){var D=Ia(m,C);return hl(D)?D:R}function hn(m){var C=Ut.call(m,Tc),D=m[Tc];try{m[Tc]=R;var Y=!0}catch{}var ve=wr.call(m);return Y&&(C?m[Tc]=D:delete m[Tc]),ve}var pn=Eh?function(m){return m==null?[]:(m=Ji(m),mo(Eh(m),function(C){return uc.call(m,C)}))}:kt,fn=Eh?function(m){for(var C=[];m;)Rr(C,pn(m)),m=ea(m);return C}:kt,sn=ra;(Sp&&sn(new Sp(new ArrayBuffer(1)))!=Jt||ka&&sn(new ka)!=oi||Rd&&sn(Rd.resolve())!=H||Hs&&sn(new Hs)!=ac||qa&&sn(new qa)!=Ro)&&(sn=function(m){var C=ra(m),D=C==F?m.constructor:R,Y=D?ns(D):"";if(Y)switch(Y){case ul:return Jt;case Qu:return oi;case kd:return H;case qv:return ac;case _h:return Ro}return C});function Nn(m,C,D){for(var Y=-1,ve=D.length;++Y<ve;){var ke=D[Y],Ze=ke.size;switch(ke.type){case"drop":m+=Ze;break;case"dropRight":C-=Ze;break;case"take":C=Es(C,m+Ze);break;case"takeRight":m=cs(m,C-Ze);break}}return{start:m,end:C}}function ln(m){var C=m.match(Ms);return C?C[1].split(su):[]}function En(m,C,D){C=Fa(C,m);for(var Y=-1,ve=C.length,ke=!1;++Y<ve;){var Ze=Co(C[Y]);if(!(ke=m!=null&&D(m,Ze)))break;m=m[Ze]}return ke||++Y!=ve?ke:(ve=m==null?0:m.length,!!ve&&U0(ve)&&Fn(Ze,ve)&&(gi(m)||rh(m)))}function ht(m){var C=m.length,D=new m.constructor(C);return C&&typeof m[0]=="string"&&Ut.call(m,"index")&&(D.index=m.index,D.input=m.input),D}function Rt(m){return typeof m.constructor=="function"&&!Tn(m)?Th(ea(m)):{}}function vn(m,C,D){var Y=m.constructor;switch(C){case At:return kp(m);case Kr:case eo:return new Y(+m);case Jt:return kh(m,D);case Mt:case un:case Qn:case zi:case Lr:case jr:case Sr:case qr:case Xr:return Xc(m,D);case oi:return new Y;case Hi:case ur:return new Y(m);case Oe:return gl(m);case ac:return new Y;case ua:return wu(m)}}function zn(m,C){var D=C.length;if(!D)return m;var Y=D-1;return C[Y]=(D>1?"& ":"")+C[Y],C=C.join(D>2?", ":" "),m.replace(To,`{
/* [wrapped with `+C+`] */
`)}function tn(m){return gi(m)||rh(m)||!!(Ra&&m&&m[Ra])}function Fn(m,C){var D=typeof m;return C=C??qn,!!C&&(D=="number"||D!="symbol"&&xf.test(m))&&m>-1&&m%1==0&&m<C}function Wt(m,C,D){if(!Ns(D))return!1;var Y=typeof C;return(Y=="number"?Kc(D)&&Fn(C,D.length):Y=="string"&&C in D)?Yc(D[C],m):!1}function _n(m,C){if(gi(m))return!1;var D=typeof m;return D=="number"||D=="symbol"||D=="boolean"||m==null||qc(m)?!0:Al.test(m)||!ph.test(m)||C!=null&&m in Ji(C)}function nn(m){var C=typeof m;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?m!=="__proto__":m===null}function An(m){var C=ze(m),D=Me[C];if(typeof D!="function"||!(C in Ai.prototype))return!1;if(m===D)return!0;var Y=Pe(D);return!!Y&&m===Y[0]}function hr(m){return!!Zn&&Zn in m}var Mr=yt?ih:is;function Tn(m){var C=m&&m.constructor,D=typeof C=="function"&&C.prototype||Tt;return m===D}function dn(m){return m===m&&!Ns(m)}function qt(m,C){return function(D){return D==null?!1:D[m]===C&&(C!==R||m in Ji(D))}}function xr(m){var C=B0(m,function(Y){return D.size===oe&&D.clear(),Y}),D=C.cache;return C}function Fr(m,C){var D=m[1],Y=C[1],ve=D|Y,ke=ve<(ae|ce|G),Ze=Y==G&&D==Ee||Y==G&&D==Fe&&m[7].length<=C[8]||Y==(G|Fe)&&C[7].length<=C[8]&&D==Ee;if(!(ke||Ze))return m;Y&ae&&(m[2]=C[2],ve|=D&ae?0:fe);var st=C[3];if(st){var Ot=m[3];m[3]=Ot?rm(Ot,st,C[4]):st,m[4]=Ot?va(m[3],ie):C[4]}return st=C[5],st&&(Ot=m[5],m[5]=Ot?ls(Ot,st,C[6]):st,m[6]=Ot?va(m[5],ie):C[6]),st=C[7],st&&(m[7]=st),Y&G&&(m[8]=m[8]==null?C[8]:Es(m[8],C[8])),m[9]==null&&(m[9]=C[9]),m[0]=C[0],m[1]=ve,m}function Yn(m){var C=[];if(m!=null)for(var D in Ji(m))C.push(D);return C}function si(m){return wr.call(m)}function Dr(m,C,D){return C=cs(C===R?m.length-1:C,0),function(){for(var Y=arguments,ve=-1,ke=cs(Y.length-C,0),Ze=Ft(ke);++ve<ke;)Ze[ve]=Y[C+ve];ve=-1;for(var st=Ft(C+1);++ve<C;)st[ve]=Y[ve];return st[C]=D(Ze),Nt(m,this,st)}}function $r(m,C){return C.length<2?m:vu(m,Wc(C,0,-1))}function Ti(m,C){for(var D=m.length,Y=Es(C.length,D),ve=Ja(m);Y--;){var ke=C[Y];m[Y]=Fn(ke,D)?ve[ke]:R}return m}function Qo(m,C){if(!(C==="constructor"&&typeof m[C]=="function")&&C!="__proto__")return m[C]}var hs=ps(zf),Jr=pi||function(m,C){return S.setTimeout(m,C)},fs=ps(Ip);function yo(m,C,D){var Y=C+"";return fs(m,zn(Y,gs(ln(Y),D)))}function ps(m){var C=0,D=0;return function(){var Y=A0(),ve=ye-(Y-D);if(D=Y,ve>0){if(++C>=Mn)return arguments[0]}else C=0;return m.apply(R,arguments)}}function es(m,C){var D=-1,Y=m.length,ve=Y-1;for(C=C===R?Y:C;++D<C;){var ke=Yd(D,ve),Ze=m[ke];m[ke]=m[D],m[D]=Ze}return m.length=C,m}var ts=xr(function(m){var C=[];return m.charCodeAt(0)===46&&C.push(""),m.replace(hp,function(D,Y,ve,ke){C.push(ve?ke.replace(gh,"$1"):Y||D)}),C});function Co(m){if(typeof m=="string"||qc(m))return m;var C=m+"";return C=="0"&&1/m==-cn?"-0":C}function ns(m){if(m!=null){try{return an.call(m)}catch{}try{return m+""}catch{}}return""}function gs(m,C){return Wn(lr,function(D){var Y="_."+D[0];C&D[1]&&!Mo(m,Y)&&m.push(Y)}),m.sort()}function Br(m){if(m instanceof Ai)return m.clone();var C=new La(m.__wrapped__,m.__chain__);return C.__actions__=Ja(m.__actions__),C.__index__=m.__index__,C.__values__=m.__values__,C}function Fo(m,C,D){(D?Wt(m,C,D):C===R)?C=1:C=cs(Mi(C),0);var Y=m==null?0:m.length;if(!Y||C<1)return[];for(var ve=0,ke=0,Ze=Ft(wh(Y/C));ve<Y;)Ze[ke++]=Wc(m,ve,ve+=C);return Ze}function Ii(m){for(var C=-1,D=m==null?0:m.length,Y=0,ve=[];++C<D;){var ke=m[C];ke&&(ve[Y++]=ke)}return ve}function gr(){var m=arguments.length;if(!m)return[];for(var C=Ft(m-1),D=arguments[0],Y=m;Y--;)C[Y-1]=arguments[Y];return Rr(gi(D)?Ja(D):[D],na(C,1))}var di=ui(function(m,C){return Ws(m)?sd(m,na(C,1,Ws,!0)):[]}),wi=ui(function(m,C){var D=rt(C);return Ws(D)&&(D=R),Ws(m)?sd(m,na(C,1,Ws,!0),ft(D,2)):[]}),co=ui(function(m,C){var D=rt(C);return Ws(D)&&(D=R),Ws(m)?sd(m,na(C,1,Ws,!0),R,D):[]});function Yl(m,C,D){var Y=m==null?0:m.length;return Y?(C=D||C===R?1:Mi(C),Wc(m,C<0?0:C,Y)):[]}function th(m,C,D){var Y=m==null?0:m.length;return Y?(C=D||C===R?1:Mi(C),C=Y-C,Wc(m,0,C<0?0:C)):[]}function Be(m,C){return m&&m.length?Wo(m,ft(C,3),!0,!0):[]}function Dt(m,C){return m&&m.length?Wo(m,ft(C,3),!0):[]}function St(m,C,D,Y){var ve=m==null?0:m.length;return ve?(D&&typeof D!="number"&&Wt(m,C,D)&&(D=0,Y=ve),Mp(m,C,D,Y)):[]}function $n(m,C,D){var Y=m==null?0:m.length;if(!Y)return-1;var ve=D==null?0:Mi(D);return ve<0&&(ve=cs(Y+ve,0)),Vs(m,ft(C,3),ve)}function ni(m,C,D){var Y=m==null?0:m.length;if(!Y)return-1;var ve=Y-1;return D!==R&&(ve=Mi(D),ve=D<0?cs(Y+ve,0):Es(ve,Y-1)),Vs(m,ft(C,3),ve,!0)}function Ge(m){var C=m==null?0:m.length;return C?na(m,1):[]}function we(m){var C=m==null?0:m.length;return C?na(m,cn):[]}function We(m,C){var D=m==null?0:m.length;return D?(C=C===R?1:Mi(C),na(m,C)):[]}function ut(m){for(var C=-1,D=m==null?0:m.length,Y={};++C<D;){var ve=m[C];Y[ve[0]]=ve[1]}return Y}function dt(m){return m&&m.length?m[0]:R}function qe(m,C,D){var Y=m==null?0:m.length;if(!Y)return-1;var ve=D==null?0:Mi(D);return ve<0&&(ve=cs(Y+ve,0)),Ko(m,C,ve)}function Xe(m){var C=m==null?0:m.length;return C?Wc(m,0,-1):[]}var it=ui(function(m){var C=Gr(m,Vf);return C.length&&C[0]===m[0]?Rf(C):[]}),Le=ui(function(m){var C=rt(m),D=Gr(m,Vf);return C===rt(D)?C=R:D.pop(),D.length&&D[0]===m[0]?Rf(D,ft(C,2)):[]}),$e=ui(function(m){var C=rt(m),D=Gr(m,Vf);return C=typeof C=="function"?C:R,C&&D.pop(),D.length&&D[0]===m[0]?Rf(D,R,C):[]});function Ie(m,C){return m==null?"":Ku.call(m,C)}function rt(m){var C=m==null?0:m.length;return C?m[C-1]:R}function vt(m,C,D){var Y=m==null?0:m.length;if(!Y)return-1;var ve=Y;return D!==R&&(ve=Mi(D),ve=ve<0?cs(Y+ve,0):Es(ve,Y-1)),C===C?fo(m,C,ve):Vs(m,js,ve,!0)}function Vt(m,C){return m&&m.length?Gf(m,Mi(C)):R}var Ht=ui(Lt);function Lt(m,C){return m&&m.length&&C&&C.length?Zd(m,C):m}function gn(m,C,D){return m&&m.length&&C&&C.length?Zd(m,C,ft(D,2)):m}function sr(m,C,D){return m&&m.length&&C&&C.length?Zd(m,C,R,D):m}var zr=ec(function(m,C){var D=m==null?0:m.length,Y=od(m,C);return Xl(m,Gr(C,function(ve){return Fn(ve,D)?+ve:ve}).sort(nm)),Y});function Kn(m,C){var D=[];if(!(m&&m.length))return D;var Y=-1,ve=[],ke=m.length;for(C=ft(C,3);++Y<ke;){var Ze=m[Y];C(Ze,Y,m)&&(D.push(Ze),ve.push(Y))}return Xl(m,ve),D}function fr(m){return m==null?m:Mf.call(m)}function tr(m,C,D){var Y=m==null?0:m.length;return Y?(D&&typeof D!="number"&&Wt(m,C,D)?(C=0,D=Y):(C=C==null?0:Mi(C),D=D===R?Y:Mi(D)),Wc(m,C,D)):[]}function Pi(m,C){return cd(m,C)}function rs(m,C,D){return fl(m,C,ft(D,2))}function Do(m,C){var D=m==null?0:m.length;if(D){var Y=cd(m,C);if(Y<D&&Yc(m[Y],C))return Y}return-1}function zp(m,C){return cd(m,C,!0)}function Ua(m,C,D){return fl(m,C,ft(D,2),!0)}function Gg(m,C){var D=m==null?0:m.length;if(D){var Y=cd(m,C,!0)-1;if(Yc(m[Y],C))return Y}return-1}function Xo(m){return m&&m.length?ld(m):[]}function sm(m,C){return m&&m.length?ld(m,ft(C,2)):[]}function Hy(m){var C=m==null?0:m.length;return C?Wc(m,1,C):[]}function $y(m,C,D){return m&&m.length?(C=D||C===R?1:Mi(C),Wc(m,0,C<0?0:C)):[]}function C1(m,C,D){var Y=m==null?0:m.length;return Y?(C=D||C===R?1:Mi(C),C=Y-C,Wc(m,C<0?0:C,Y)):[]}function am(m,C){return m&&m.length?Wo(m,ft(C,3),!1,!0):[]}function cm(m,C){return m&&m.length?Wo(m,ft(C,3)):[]}var Wy=ui(function(m){return Ga(na(m,1,Ws,!0))}),Fg=ui(function(m){var C=rt(m);return Ws(C)&&(C=R),Ga(na(m,1,Ws,!0),ft(C,2))}),Nw=ui(function(m){var C=rt(m);return C=typeof C=="function"?C:R,Ga(na(m,1,Ws,!0),R,C)});function Bo(m){return m&&m.length?Ga(m):[]}function w1(m,C){return m&&m.length?Ga(m,ft(C,2)):[]}function E1(m,C){return C=typeof C=="function"?C:R,m&&m.length?Ga(m,R,C):[]}function nh(m){if(!(m&&m.length))return[];var C=0;return m=mo(m,function(D){if(Ws(D))return C=cs(D.length,C),!0}),Ac(C,function(D){return Gr(m,Oo(D))})}function Zc(m,C){if(!(m&&m.length))return[];var D=nh(m);return C==null?D:Gr(D,function(Y){return Nt(C,R,Y)})}var S1=ui(function(m,C){return Ws(m)?sd(m,C):[]}),Xy=ui(function(m){return Hn(mo(m,Ws))}),lm=ui(function(m){var C=rt(m);return Ws(C)&&(C=R),Hn(mo(m,Ws),ft(C,2))}),Zy=ui(function(m){var C=rt(m);return C=typeof C=="function"?C:R,Hn(mo(m,Ws),R,C)}),Yy=ui(nh);function k0(m,C){return ud(m||[],C||[],Pc)}function Ky(m,C){return ud(m||[],C||[],xu)}var _1=ui(function(m){var C=m.length,D=C>1?m[C-1]:R;return D=typeof D=="function"?(m.pop(),D):R,Zc(m,D)});function qy(m){var C=Me(m);return C.__chain__=!0,C}function Jy(m,C){return C(m),m}function L0(m,C){return C(m)}var A1=ec(function(m){var C=m.length,D=C?m[0]:0,Y=this.__wrapped__,ve=function(ke){return od(ke,m)};return C>1||this.__actions__.length||!(Y instanceof Ai)||!Fn(D)?this.thru(ve):(Y=Y.slice(D,+D+(C?1:0)),Y.__actions__.push({func:L0,args:[ve],thisArg:R}),new La(Y,this.__chain__).thru(function(ke){return C&&!ke.length&&ke.push(R),ke}))});function T1(){return qy(this)}function Qy(){return new La(this.value(),this.__chain__)}function M1(){this.__values__===R&&(this.__values__=H0(this.value()));var m=this.__index__>=this.__values__.length,C=m?R:this.__values__[this.__index__++];return{done:m,value:C}}function O1(){return this}function eb(m){for(var C,D=this;D instanceof Ld;){var Y=Br(D);Y.__index__=0,Y.__values__=R,C?ve.__wrapped__=Y:C=Y;var ve=Y;D=D.__wrapped__}return ve.__wrapped__=m,C}function P1(){var m=this.__wrapped__;if(m instanceof Ai){var C=m;return this.__actions__.length&&(C=new Ai(this)),C=C.reverse(),C.__actions__.push({func:L0,args:[fr],thisArg:R}),new La(C,this.__chain__)}return this.thru(fr)}function D1(){return Ds(this.__wrapped__,this.__actions__)}var N1=Lh(function(m,C,D){Ut.call(m,D)?++m[D]:$s(m,D,1)});function I1(m,C,D){var Y=gi(m)?mr:D0;return D&&Wt(m,C,D)&&(C=R),Y(m,ft(C,3))}function tb(m,C){var D=gi(m)?mo:Op;return D(m,ft(C,3))}var R1=Hf($n),k1=Hf(ni);function Iw(m,C){return na(G0(m,C),1)}function nb(m,C){return na(G0(m,C),cn)}function L1(m,C,D){return D=D===R?1:Mi(D),na(G0(m,C),D)}function um(m,C){var D=gi(m)?Wn:pc;return D(m,ft(C,3))}function rb(m,C){var D=gi(m)?ai:Ng;return D(m,ft(C,3))}var G1=Lh(function(m,C,D){Ut.call(m,D)?m[D].push(C):$s(m,D,[C])});function ib(m,C,D,Y){m=Kc(m)?m:$p(m),D=D&&!Y?Mi(D):0;var ve=m.length;return D<0&&(D=cs(ve+D,0)),Ug(m)?D<=ve&&m.indexOf(C,D)>-1:!!ve&&Ko(m,C,D)>-1}var dm=ui(function(m,C,D){var Y=-1,ve=typeof C=="function",ke=Kc(m)?Ft(m.length):[];return pc(m,function(Ze){ke[++Y]=ve?Nt(C,Ze,D):Vl(Ze,C,D)}),ke}),ob=Lh(function(m,C,D){$s(m,D,C)});function G0(m,C){var D=gi(m)?Gr:bu;return D(m,ft(C,3))}function hm(m,C,D,Y){return m==null?[]:(gi(C)||(C=C==null?[]:[C]),D=Y?R:D,gi(D)||(D=D==null?[]:[D]),Ff(m,C,D))}var F1=Lh(function(m,C,D){m[D?0:1].push(C)},function(){return[[],[]]});function fm(m,C,D){var Y=gi(m)?fi:Xa,ve=arguments.length<3;return Y(m,ft(C,4),D,ve,pc)}function sb(m,C,D){var Y=gi(m)?Ni:Xa,ve=arguments.length<3;return Y(m,ft(C,4),D,ve,Ng)}function Rw(m,C){var D=gi(m)?mo:Op;return D(m,Bg(ft(C,3)))}function ab(m){var C=gi(m)?Oc:Bf;return C(m)}function B1(m,C,D){(D?Wt(m,C,D):C===R)?C=1:C=Mi(C);var Y=gi(m)?Pf:Np;return Y(m,C)}function kw(m){var C=gi(m)?dl:tm;return C(m)}function cb(m){if(m==null)return 0;if(Kc(m))return Ug(m)?Ya(m):m.length;var C=sn(m);return C==oi||C==ac?m.size:$l(m).length}function z1(m,C,D){var Y=gi(m)?Lo:Rp;return D&&Wt(m,C,D)&&(C=R),Y(m,ft(C,3))}var U1=ui(function(m,C){if(m==null)return[];var D=C.length;return D>1&&Wt(m,C[0],C[1])?C=[]:D>2&&Wt(C[0],C[1],C[2])&&(C=[C[0]]),Ff(m,na(C,1),[])}),F0=li||function(){return S.Date.now()};function V1(m,C){if(typeof C!="function")throw new Te(te);return m=Mi(m),function(){if(--m<1)return C.apply(this,arguments)}}function j1(m,C,D){return C=D?R:C,C=m&&C==null?m.length:C,Su(m,G,R,R,R,R,C)}function lb(m,C){var D;if(typeof C!="function")throw new Te(te);return m=Mi(m),function(){return--m>0&&(D=C.apply(this,arguments)),m<=1&&(C=R),D}}var ub=ui(function(m,C,D){var Y=ae;if(D.length){var ve=va(D,Et(ub));Y|=Ae}return Su(m,Y,C,D,ve)}),db=ui(function(m,C,D){var Y=ae|ce;if(D.length){var ve=va(D,Et(db));Y|=Ae}return Su(C,Y,m,D,ve)});function hb(m,C,D){C=D?R:C;var Y=Su(m,Ee,R,R,R,R,R,C);return Y.placeholder=hb.placeholder,Y}function fb(m,C,D){C=D?R:C;var Y=Su(m,pe,R,R,R,R,R,C);return Y.placeholder=fb.placeholder,Y}function pb(m,C,D){var Y,ve,ke,Ze,st,Ot,mn=0,Cn=!1,Dn=!1,nr=!0;if(typeof m!="function")throw new Te(te);C=yc(C)||0,Ns(D)&&(Cn=!!D.leading,Dn="maxWait"in D,ke=Dn?cs(yc(D.maxWait)||0,C):ke,nr="trailing"in D?!!D.trailing:nr);function Pr(wt){var ja=Y,hd=ve;return Y=ve=R,mn=wt,Ze=m.apply(hd,ja),Ze}function ri(wt){return mn=wt,st=Jr(Ki,C),Cn?Pr(wt):Ze}function Ri(wt){var ja=wt-Ot,hd=wt-mn,qb=C-ja;return Dn?Es(qb,ke-hd):qb}function ii(wt){var ja=wt-Ot,hd=wt-mn;return Ot===R||ja>=C||ja<0||Dn&&hd>=ke}function Ki(){var wt=F0();if(ii(wt))return ro(wt);st=Jr(Ki,Ri(wt))}function ro(wt){return st=R,nr&&Y?Pr(wt):(Y=ve=R,Ze)}function Jl(){st!==R&&qd(st),mn=0,Y=Ot=ve=st=R}function Jc(){return st===R?Ze:ro(F0())}function Ea(){var wt=F0(),ja=ii(wt);if(Y=arguments,ve=this,Ot=wt,ja){if(st===R)return ri(Ot);if(Dn)return qd(st),st=Jr(Ki,C),Pr(Ot)}return st===R&&(st=Jr(Ki,C)),Ze}return Ea.cancel=Jl,Ea.flush=Jc,Ea}var H1=ui(function(m,C){return Dc(m,1,C)}),$1=ui(function(m,C,D){return Dc(m,yc(C)||0,D)});function gb(m){return Su(m,He)}function B0(m,C){if(typeof m!="function"||C!=null&&typeof C!="function")throw new Te(te);var D=function(){var Y=arguments,ve=C?C.apply(this,Y):Y[0],ke=D.cache;if(ke.has(ve))return ke.get(ve);var Ze=m.apply(this,Y);return D.cache=ke.set(ve,Ze)||ke,Ze};return D.cache=new(B0.Cache||zl),D}B0.Cache=zl;function Bg(m){if(typeof m!="function")throw new Te(te);return function(){var C=arguments;switch(C.length){case 0:return!m.call(this);case 1:return!m.call(this,C[0]);case 2:return!m.call(this,C[0],C[1]);case 3:return!m.call(this,C[0],C[1],C[2])}return!m.apply(this,C)}}function vb(m){return lb(2,m)}var W1=vi(function(m,C){C=C.length==1&&gi(C[0])?Gr(C[0],Os(ft())):Gr(na(C,1),Os(ft()));var D=C.length;return ui(function(Y){for(var ve=-1,ke=Es(Y.length,D);++ve<ke;)Y[ve]=C[ve].call(this,Y[ve]);return Nt(m,this,Y)})}),pm=ui(function(m,C){var D=va(C,Et(pm));return Su(m,Ae,R,C,D)}),mb=ui(function(m,C){var D=va(C,Et(mb));return Su(m,nt,R,C,D)}),X1=ec(function(m,C){return Su(m,Fe,R,R,R,C)});function yb(m,C){if(typeof m!="function")throw new Te(te);return C=C===R?C:Mi(C),ui(m,C)}function bb(m,C){if(typeof m!="function")throw new Te(te);return C=C==null?0:cs(Mi(C),0),ui(function(D){var Y=D[C],ve=Ba(D,0,C);return Y&&Rr(ve,Y),Nt(m,this,ve)})}function xb(m,C,D){var Y=!0,ve=!0;if(typeof m!="function")throw new Te(te);return Ns(D)&&(Y="leading"in D?!!D.leading:Y,ve="trailing"in D?!!D.trailing:ve),pb(m,C,{leading:Y,maxWait:C,trailing:ve})}function gm(m){return j1(m,1)}function Z1(m,C){return pm(ia(C),m)}function Y1(){if(!arguments.length)return[];var m=arguments[0];return gi(m)?m:[m]}function z0(m){return ya(m,De)}function vm(m,C){return C=typeof C=="function"?C:R,ya(m,De,C)}function K1(m){return ya(m,re|De)}function mm(m,C){return C=typeof C=="function"?C:R,ya(m,re|De,C)}function Cb(m,C){return C==null||Ud(m,C,Is(C))}function Yc(m,C){return m===C||m!==m&&C!==C}var ym=Bh(If),q1=Bh(function(m,C){return m>=C}),rh=mu(function(){return arguments}())?mu:function(m){return hi(m)&&Ut.call(m,"callee")&&!uc.call(m,"callee")},gi=Ft.isArray,bm=Ce?Os(Ce):Ic;function Kc(m){return m!=null&&U0(m.length)&&!ih(m)}function Ws(m){return hi(m)&&Kc(m)}function J1(m){return m===!0||m===!1||hi(m)&&ra(m)==Kr}var Wf=Ag||is,Q1=Ke?Os(Ke):Rc;function ex(m){return hi(m)&&m.nodeType===1&&!zo(m)}function Lw(m){if(m==null)return!0;if(Kc(m)&&(gi(m)||typeof m=="string"||typeof m.splice=="function"||Wf(m)||Vp(m)||rh(m)))return!m.length;var C=sn(m);if(C==oi||C==ac)return!m.size;if(Tn(m))return!$l(m).length;for(var D in m)if(Ut.call(m,D))return!1;return!0}function tx(m,C){return Nh(m,C)}function Gw(m,C,D){D=typeof D=="function"?D:R;var Y=D?D(m,C):R;return Y===R?Nh(m,C,R,D):!!Y}function xm(m){if(!hi(m))return!1;var C=ra(m);return C==Ks||C==Ts||typeof m.message=="string"&&typeof m.name=="string"&&!zo(m)}function nx(m){return typeof m=="number"&&Tf(m)}function ih(m){if(!Ns(m))return!1;var C=ra(m);return C==bs||C==Zo||C==Bi||C==mf}function wb(m){return typeof m=="number"&&m==Mi(m)}function U0(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=qn}function Ns(m){var C=typeof m;return m!=null&&(C=="object"||C=="function")}function hi(m){return m!=null&&typeof m=="object"}var zg=Je?Os(Je):jl;function V0(m,C){return m===C||Hl(m,C,It(C))}function rx(m,C,D){return D=typeof D=="function"?D:R,Hl(m,C,It(C),D)}function Eb(m){return Sb(m)&&m!=+m}function Up(m){if(Mr(m))throw new Hr(Z);return hl(m)}function ix(m){return m===null}function Cm(m){return m==null}function Sb(m){return typeof m=="number"||hi(m)&&ra(m)==Hi}function zo(m){if(!hi(m)||ra(m)!=F)return!1;var C=ea(m);if(C===null)return!0;var D=Ut.call(C,"constructor")&&C.constructor;return typeof D=="function"&&D instanceof D&&an.call(D)==yr}var j0=mt?Os(mt):gc;function ox(m){return wb(m)&&m>=-qn&&m<=qn}var _b=zt?Os(zt):Lf;function Ug(m){return typeof m=="string"||!gi(m)&&hi(m)&&ra(m)==ur}function qc(m){return typeof m=="symbol"||hi(m)&&ra(m)==ua}var Vp=xn?Os(xn):$d;function sx(m){return m===R}function ax(m){return hi(m)&&sn(m)==Ro}function cx(m){return hi(m)&&ra(m)==Wa}var wm=Bh(yu),Em=Bh(function(m,C){return m<=C});function H0(m){if(!m)return[];if(Kc(m))return Ug(m)?$o(m):Ja(m);if(Ka&&m[Ka])return Xu(m[Ka]());var C=sn(m),D=C==oi?ga:C==ac?hu:$p;return D(m)}function Kl(m){if(!m)return m===0?m:0;if(m=yc(m),m===cn||m===-cn){var C=m<0?-1:1;return C*on}return m===m?m:0}function Mi(m){var C=Kl(m),D=C%1;return C===C?D?C-D:C:0}function $0(m){return m?Hc(Mi(m),0,Zi):0}function yc(m){if(typeof m=="number")return m;if(qc(m))return lo;if(Ns(m)){var C=typeof m.valueOf=="function"?m.valueOf():m;m=Ns(C)?C+"":C}if(typeof m!="string")return m===0?m:+m;m=Ll(m);var D=vp.test(m);return D||mp.test(m)?wp(m.slice(2),D?2:8):Sd.test(m)?lo:+m}function jp(m){return mc(m,Ca(m))}function lx(m){return m?Hc(Mi(m),-qn,qn):m===0?m:0}function wo(m){return m==null?"":Ps(m)}var ux=Gh(function(m,C){if(Tn(C)||Kc(C)){mc(C,Is(C),m);return}for(var D in C)Ut.call(C,D)&&Pc(m,D,C[D])}),Vg=Gh(function(m,C){mc(C,Ca(C),m)}),Xf=Gh(function(m,C,D,Y){mc(C,Ca(C),m,Y)}),Uh=Gh(function(m,C,D,Y){mc(C,Is(C),m,Y)}),Sm=ec(od);function jg(m,C){var D=Th(m);return C==null?D:jc(D,C)}var dx=ui(function(m,C){m=Ji(m);var D=-1,Y=C.length,ve=Y>2?C[2]:R;for(ve&&Wt(C[0],C[1],ve)&&(Y=1);++D<Y;)for(var ke=C[D],Ze=Ca(ke),st=-1,Ot=Ze.length;++st<Ot;){var mn=Ze[st],Cn=m[mn];(Cn===R||Yc(Cn,Tt[mn])&&!Ut.call(m,mn))&&(m[mn]=ke[mn])}return m}),W0=ui(function(m){return m.push(R,zh),Nt($g,R,m)});function hx(m,C){return Pa(m,ft(C,3),Nc)}function yl(m,C){return Pa(m,ft(C,3),$c)}function _m(m,C){return m==null?m:Ph(m,ft(C,3),Ca)}function fx(m,C){return m==null?m:Pp(m,ft(C,3),Ca)}function Ab(m,C){return m&&Nc(m,ft(C,3))}function X0(m,C){return m&&$c(m,ft(C,3))}function Am(m){return m==null?[]:Vd(m,Is(m))}function px(m){return m==null?[]:Vd(m,Ca(m))}function Z0(m,C,D){var Y=m==null?R:vu(m,C);return Y===R?D:Y}function Tb(m,C){return m!=null&&En(m,C,jd)}function Tm(m,C){return m!=null&&En(m,C,Dh)}var gx=ds(function(m,C,D){C!=null&&typeof C.toString!="function"&&(C=wr.call(C)),m[C]=D},Wg(Eo)),Au=ds(function(m,C,D){C!=null&&typeof C.toString!="function"&&(C=wr.call(C)),Ut.call(m,C)?m[C].push(D):m[C]=[D]},ft),ql=ui(Vl);function Is(m){return Kc(m)?Bd(m):$l(m)}function Ca(m){return Kc(m)?Bd(m,!0):Dp(m)}function vx(m,C){var D={};return C=ft(C,3),Nc(m,function(Y,ve,ke){$s(D,C(Y,ve,ke),Y)}),D}function mx(m,C){var D={};return C=ft(C,3),Nc(m,function(Y,ve,ke){$s(D,ve,C(Y,ve,ke))}),D}var Hg=Gh(function(m,C,D){kc(m,C,D)}),$g=Gh(function(m,C,D,Y){kc(m,C,D,Y)}),Y0=ec(function(m,C){var D={};if(m==null)return D;var Y=!1;C=Gr(C,function(ke){return ke=Fa(ke,m),Y||(Y=ke.length>1),ke}),mc(m,K(m),D),Y&&(D=ya(D,re|he|De,I0));for(var ve=C.length;ve--;)pl(D,C[ve]);return D});function Hp(m,C){return Mb(m,Bg(ft(C)))}var yx=ec(function(m,C){return m==null?{}:Rg(m,C)});function Mb(m,C){if(m==null)return{};var D=Gr(K(m),function(Y){return[Y]});return C=ft(C),Ih(m,D,function(Y,ve){return C(Y,ve[0])})}function bx(m,C,D){C=Fa(C,m);var Y=-1,ve=C.length;for(ve||(ve=1,m=R);++Y<ve;){var ke=m==null?R:m[Co(C[Y])];ke===R&&(Y=ve,ke=D),m=ih(ke)?ke.call(m):ke}return m}function Ob(m,C,D){return m==null?m:xu(m,C,D)}function xx(m,C,D,Y){return Y=typeof Y=="function"?Y:R,m==null?m:xu(m,C,D,Y)}var Pb=Eu(Is),Db=Eu(Ca);function Cx(m,C,D){var Y=gi(m),ve=Y||Wf(m)||Vp(m);if(C=ft(C,4),D==null){var ke=m&&m.constructor;ve?D=Y?new ke:[]:Ns(m)?D=ih(ke)?Th(ea(m)):{}:D={}}return(ve?Wn:Nc)(m,function(Ze,st,Ot){return C(D,Ze,st,Ot)}),D}function wx(m,C){return m==null?!0:pl(m,C)}function Zf(m,C,D){return m==null?m:Uf(m,C,ia(D))}function Nb(m,C,D,Y){return Y=typeof Y=="function"?Y:R,m==null?m:Uf(m,C,ia(D),Y)}function $p(m){return m==null?[]:$u(m,Is(m))}function Ex(m){return m==null?[]:$u(m,Ca(m))}function Mm(m,C,D){return D===R&&(D=C,C=R),D!==R&&(D=yc(D),D=D===D?D:0),C!==R&&(C=yc(C),C=C===C?C:0),Hc(yc(m),C,D)}function Sx(m,C,D){return C=Kl(C),D===R?(D=C,C=0):D=Kl(D),m=yc(m),Ul(m,C,D)}function dd(m,C,D){if(D&&typeof D!="boolean"&&Wt(m,C,D)&&(C=D=R),D===R&&(typeof C=="boolean"?(D=C,C=R):typeof m=="boolean"&&(D=m,m=R)),m===R&&C===R?(m=0,C=1):(m=Kl(m),C===R?(C=m,m=0):C=Kl(C)),m>C){var Y=m;m=C,C=Y}if(D||m%1||C%1){var ve=qu();return Es(m+ve*(C-m+Rl("1e-"+((ve+"").length-1))),C)}return Yd(m,C)}var _x=Qd(function(m,C,D){return C=C.toLowerCase(),m+(D?Ib(C):C)});function Ib(m){return Om(wo(m).toLowerCase())}function oa(m){return m=wo(m),m&&m.replace(_c,Gl).replace(Us,"")}function Rb(m,C,D){m=wo(m),C=Ps(C);var Y=m.length;D=D===R?Y:Hc(Mi(D),0,Y);var ve=D;return D-=C.length,D>=0&&m.slice(D,ve)==C}function Ax(m){return m=wo(m),m&&xs.test(m)?m.replace(fh,cl):m}function Qr(m){return m=wo(m),m&&$i.test(m)?m.replace(ou,"\\$&"):m}var Tx=Qd(function(m,C,D){return m+(D?"-":"")+C.toLowerCase()}),oh=Qd(function(m,C,D){return m+(D?" ":"")+C.toLowerCase()}),kb=us("toLowerCase");function Mx(m,C,D){m=wo(m),C=Mi(C);var Y=C?Ya(m):0;if(!C||Y>=C)return m;var ve=(C-Y)/2;return $f(pu(ve),D)+m+$f(wh(ve),D)}function Ox(m,C,D){m=wo(m),C=Mi(C);var Y=C?Ya(m):0;return C&&Y<C?m+$f(C-Y,D):m}function Px(m,C,D){m=wo(m),C=Mi(C);var Y=C?Ya(m):0;return C&&Y<C?$f(C-Y,D)+m:m}function Dx(m,C,D){return D||C==null?C=0:C&&(C=+C),Ep(wo(m).replace(uo,""),C||0)}function Nx(m,C,D){return(D?Wt(m,C,D):C===R)?C=1:C=Mi(C),Kd(wo(m),C)}function Lb(){var m=arguments,C=wo(m[0]);return m.length<3?C:C.replace(m[1],m[2])}var Ix=Qd(function(m,C,D){return m+(D?"_":"")+C.toLowerCase()});function Rx(m,C,D){return D&&typeof D!="number"&&Wt(m,C,D)&&(C=D=R),D=D===R?Zi:D>>>0,D?(m=wo(m),m&&(typeof C=="string"||C!=null&&!j0(C))&&(C=Ps(C),!C&&Za(m))?Ba($o(m),0,D):m.split(C,D)):[]}var Wp=Qd(function(m,C,D){return m+(D?" ":"")+Om(C)});function kx(m,C,D){return m=wo(m),D=D==null?0:Hc(Mi(D),0,m.length),C=Ps(C),m.slice(D,D+C.length)==C}function Lx(m,C,D){var Y=Me.templateSettings;D&&Wt(m,C,D)&&(C=R),m=wo(m),C=Xf({},C,Y,kg);var ve=Xf({},C.imports,Y.imports,kg),ke=Is(ve),Ze=$u(ve,ke),st,Ot,mn=0,Cn=C.interpolate||Ml,Dn="__p += '",nr=Id((C.escape||Ml).source+"|"+Cn.source+"|"+(Cn===Yo?pp:Ml).source+"|"+(C.evaluate||Ml).source+"|$","g"),Pr="//# sourceURL="+(Ut.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yh+"]")+`
`;m.replace(nr,function(ii,Ki,ro,Jl,Jc,Ea){return ro||(ro=Jl),Dn+=m.slice(mn,Ea).replace(_d,xh),Ki&&(st=!0,Dn+=`' +
__e(`+Ki+`) +
'`),Jc&&(Ot=!0,Dn+=`';
`+Jc+`;
__p += '`),ro&&(Dn+=`' +
((__t = (`+ro+`)) == null ? '' : __t) +
'`),mn=Ea+ii.length,ii}),Dn+=`';
`;var ri=Ut.call(C,"variable")&&C.variable;if(!ri)Dn=`with (obj) {
`+Dn+`
}
`;else if(bf.test(ri))throw new Hr(Q);Dn=(Ot?Dn.replace(ko,""):Dn).replace(Bc,"$1").replace(Cg,"$1;"),Dn="function("+(ri||"obj")+`) {
`+(ri?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(st?", __e = _.escape":"")+(Ot?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Dn+`return __p
}`;var Ri=Vh(function(){return Yi(ke,Pr+"return "+Dn).apply(R,Ze)});if(Ri.source=Dn,xm(Ri))throw Ri;return Ri}function Er(m){return wo(m).toLowerCase()}function dr(m){return wo(m).toUpperCase()}function Or(m,C,D){if(m=wo(m),m&&(D||C===R))return Ll(m);if(!m||!(C=Ps(C)))return m;var Y=$o(m),ve=$o(C),ke=uu(Y,ve),Ze=qo(Y,ve)+1;return Ba(Y,ke,Ze).join("")}function Cr(m,C,D){if(m=wo(m),m&&(D||C===R))return m.slice(0,ma(m)+1);if(!m||!(C=Ps(C)))return m;var Y=$o(m),ve=qo(Y,$o(C))+1;return Ba(Y,0,ve).join("")}function Gx(m,C,D){if(m=wo(m),m&&(D||C===R))return m.replace(uo,"");if(!m||!(C=Ps(C)))return m;var Y=$o(m),ve=uu(Y,$o(C));return Ba(Y,ve).join("")}function cr(m,C){var D=et,Y=Bt;if(Ns(C)){var ve="separator"in C?C.separator:ve;D="length"in C?Mi(C.length):D,Y="omission"in C?Ps(C.omission):Y}m=wo(m);var ke=m.length;if(Za(m)){var Ze=$o(m);ke=Ze.length}if(D>=ke)return m;var st=D-Ya(Y);if(st<1)return Y;var Ot=Ze?Ba(Ze,0,st).join(""):m.slice(0,st);if(ve===R)return Ot+Y;if(Ze&&(st+=Ot.length-st),j0(ve)){if(m.slice(st).search(ve)){var mn,Cn=Ot;for(ve.global||(ve=Id(ve.source,wo(gp.exec(ve))+"g")),ve.lastIndex=0;mn=ve.exec(Cn);)var Dn=mn.index;Ot=Ot.slice(0,Dn===R?st:Dn)}}else if(m.indexOf(Ps(ve),st)!=st){var nr=Ot.lastIndexOf(ve);nr>-1&&(Ot=Ot.slice(0,nr))}return Ot+Y}function Wi(m){return m=wo(m),m&&Sc.test(m)?m.replace(yf,Qs):m}var Fx=Qd(function(m,C,D){return m+(D?" ":"")+C.toUpperCase()}),Om=us("toUpperCase");function Tu(m,C,D){return m=wo(m),C=D?R:C,C===R?du(m)?_f(m):Fs(m):m.match(C)||[]}var Vh=ui(function(m,C){try{return Nt(m,R,C)}catch(D){return xm(D)?D:new Hr(D)}}),Yf=ec(function(m,C){return Wn(C,function(D){D=Co(D),$s(m,D,ub(m[D],m))}),m});function Xp(m){var C=m==null?0:m.length,D=ft();return m=C?Gr(m,function(Y){if(typeof Y[1]!="function")throw new Te(te);return[D(Y[0]),Y[1]]}):[],ui(function(Y){for(var ve=-1;++ve<C;){var ke=m[ve];if(Nt(ke[0],this,Y))return Nt(ke[1],this,Y)}})}function rn(m){return zd(ya(m,re))}function Wg(m){return function(){return m}}function Bx(m,C){return m==null||m!==m?C:m}var Gb=za(),wa=za(!0);function Eo(m){return m}function no(m){return vc(typeof m=="function"?m:ya(m,re))}function Fb(m){return Wd(ya(m,re))}function Bb(m,C){return Xd(m,ya(C,re))}var zx=ui(function(m,C){return function(D){return Vl(D,m,C)}}),zb=ui(function(m,C){return function(D){return Vl(m,D,C)}});function Pm(m,C,D){var Y=Is(C),ve=Vd(C,Y);D==null&&!(Ns(C)&&(ve.length||!Y.length))&&(D=C,C=m,m=this,ve=Vd(C,Is(C)));var ke=!(Ns(D)&&"chain"in D)||!!D.chain,Ze=ih(m);return Wn(ve,function(st){var Ot=C[st];m[st]=Ot,Ze&&(m.prototype[st]=function(){var mn=this.__chain__;if(ke||mn){var Cn=m(this.__wrapped__),Dn=Cn.__actions__=Ja(this.__actions__);return Dn.push({func:Ot,args:arguments,thisArg:m}),Cn.__chain__=mn,Cn}return Ot.apply(m,Rr([this.value()],arguments))})}),m}function Ub(){return S._===this&&(S._=Tr),this}function K0(){}function Vb(m){return m=Mi(m),ui(function(C){return Gf(C,m)})}var Dm=Gp(Gr),Xg=Gp(mr),jb=Gp(Lo);function bl(m){return _n(m)?Oo(Co(m)):ad(m)}function Ux(m){return function(C){return m==null?R:vu(m,C)}}var Hb=Fp(),Vx=Fp(!0);function kt(){return[]}function is(){return!1}function Va(){return{}}function Zg(){return""}function jx(){return!0}function $b(m,C){if(m=Mi(m),m<1||m>qn)return[];var D=Zi,Y=Es(m,Zi);C=ft(C),m-=Zi;for(var ve=Ac(Y,C);++D<m;)C(D);return ve}function Wb(m){return gi(m)?Gr(m,Co):qc(m)?[m]:Ja(ts(wo(m)))}function Hx(m){var C=++Bn;return wo(m)+C}var $x=ba(function(m,C){return m+C},0),Fw=xa("ceil"),Bw=ba(function(m,C){return m/C},1),zw=xa("floor");function Uw(m){return m&&m.length?Nf(m,Eo,If):R}function Xb(m,C){return m&&m.length?Nf(m,ft(C,2),If):R}function Zb(m){return Uc(m,Eo)}function Vw(m,C){return Uc(m,ft(C,2))}function Wx(m){return m&&m.length?Nf(m,Eo,yu):R}function Yb(m,C){return m&&m.length?Nf(m,ft(C,2),yu):R}var Xx=ba(function(m,C){return m*C},1),jw=xa("round"),Zx=ba(function(m,C){return m-C},0);function Kb(m){return m&&m.length?ws(m,Eo):0}function Yx(m,C){return m&&m.length?ws(m,ft(C,2)):0}return Me.after=V1,Me.ary=j1,Me.assign=ux,Me.assignIn=Vg,Me.assignInWith=Xf,Me.assignWith=Uh,Me.at=Sm,Me.before=lb,Me.bind=ub,Me.bindAll=Yf,Me.bindKey=db,Me.castArray=Y1,Me.chain=qy,Me.chunk=Fo,Me.compact=Ii,Me.concat=gr,Me.cond=Xp,Me.conforms=rn,Me.constant=Wg,Me.countBy=N1,Me.create=jg,Me.curry=hb,Me.curryRight=fb,Me.debounce=pb,Me.defaults=dx,Me.defaultsDeep=W0,Me.defer=H1,Me.delay=$1,Me.difference=di,Me.differenceBy=wi,Me.differenceWith=co,Me.drop=Yl,Me.dropRight=th,Me.dropRightWhile=Be,Me.dropWhile=Dt,Me.fill=St,Me.filter=tb,Me.flatMap=Iw,Me.flatMapDeep=nb,Me.flatMapDepth=L1,Me.flatten=Ge,Me.flattenDeep=we,Me.flattenDepth=We,Me.flip=gb,Me.flow=Gb,Me.flowRight=wa,Me.fromPairs=ut,Me.functions=Am,Me.functionsIn=px,Me.groupBy=G1,Me.initial=Xe,Me.intersection=it,Me.intersectionBy=Le,Me.intersectionWith=$e,Me.invert=gx,Me.invertBy=Au,Me.invokeMap=dm,Me.iteratee=no,Me.keyBy=ob,Me.keys=Is,Me.keysIn=Ca,Me.map=G0,Me.mapKeys=vx,Me.mapValues=mx,Me.matches=Fb,Me.matchesProperty=Bb,Me.memoize=B0,Me.merge=Hg,Me.mergeWith=$g,Me.method=zx,Me.methodOf=zb,Me.mixin=Pm,Me.negate=Bg,Me.nthArg=Vb,Me.omit=Y0,Me.omitBy=Hp,Me.once=vb,Me.orderBy=hm,Me.over=Dm,Me.overArgs=W1,Me.overEvery=Xg,Me.overSome=jb,Me.partial=pm,Me.partialRight=mb,Me.partition=F1,Me.pick=yx,Me.pickBy=Mb,Me.property=bl,Me.propertyOf=Ux,Me.pull=Ht,Me.pullAll=Lt,Me.pullAllBy=gn,Me.pullAllWith=sr,Me.pullAt=zr,Me.range=Hb,Me.rangeRight=Vx,Me.rearg=X1,Me.reject=Rw,Me.remove=Kn,Me.rest=yb,Me.reverse=fr,Me.sampleSize=B1,Me.set=Ob,Me.setWith=xx,Me.shuffle=kw,Me.slice=tr,Me.sortBy=U1,Me.sortedUniq=Xo,Me.sortedUniqBy=sm,Me.split=Rx,Me.spread=bb,Me.tail=Hy,Me.take=$y,Me.takeRight=C1,Me.takeRightWhile=am,Me.takeWhile=cm,Me.tap=Jy,Me.throttle=xb,Me.thru=L0,Me.toArray=H0,Me.toPairs=Pb,Me.toPairsIn=Db,Me.toPath=Wb,Me.toPlainObject=jp,Me.transform=Cx,Me.unary=gm,Me.union=Wy,Me.unionBy=Fg,Me.unionWith=Nw,Me.uniq=Bo,Me.uniqBy=w1,Me.uniqWith=E1,Me.unset=wx,Me.unzip=nh,Me.unzipWith=Zc,Me.update=Zf,Me.updateWith=Nb,Me.values=$p,Me.valuesIn=Ex,Me.without=S1,Me.words=Tu,Me.wrap=Z1,Me.xor=Xy,Me.xorBy=lm,Me.xorWith=Zy,Me.zip=Yy,Me.zipObject=k0,Me.zipObjectDeep=Ky,Me.zipWith=_1,Me.entries=Pb,Me.entriesIn=Db,Me.extend=Vg,Me.extendWith=Xf,Pm(Me,Me),Me.add=$x,Me.attempt=Vh,Me.camelCase=_x,Me.capitalize=Ib,Me.ceil=Fw,Me.clamp=Mm,Me.clone=z0,Me.cloneDeep=K1,Me.cloneDeepWith=mm,Me.cloneWith=vm,Me.conformsTo=Cb,Me.deburr=oa,Me.defaultTo=Bx,Me.divide=Bw,Me.endsWith=Rb,Me.eq=Yc,Me.escape=Ax,Me.escapeRegExp=Qr,Me.every=I1,Me.find=R1,Me.findIndex=$n,Me.findKey=hx,Me.findLast=k1,Me.findLastIndex=ni,Me.findLastKey=yl,Me.floor=zw,Me.forEach=um,Me.forEachRight=rb,Me.forIn=_m,Me.forInRight=fx,Me.forOwn=Ab,Me.forOwnRight=X0,Me.get=Z0,Me.gt=ym,Me.gte=q1,Me.has=Tb,Me.hasIn=Tm,Me.head=dt,Me.identity=Eo,Me.includes=ib,Me.indexOf=qe,Me.inRange=Sx,Me.invoke=ql,Me.isArguments=rh,Me.isArray=gi,Me.isArrayBuffer=bm,Me.isArrayLike=Kc,Me.isArrayLikeObject=Ws,Me.isBoolean=J1,Me.isBuffer=Wf,Me.isDate=Q1,Me.isElement=ex,Me.isEmpty=Lw,Me.isEqual=tx,Me.isEqualWith=Gw,Me.isError=xm,Me.isFinite=nx,Me.isFunction=ih,Me.isInteger=wb,Me.isLength=U0,Me.isMap=zg,Me.isMatch=V0,Me.isMatchWith=rx,Me.isNaN=Eb,Me.isNative=Up,Me.isNil=Cm,Me.isNull=ix,Me.isNumber=Sb,Me.isObject=Ns,Me.isObjectLike=hi,Me.isPlainObject=zo,Me.isRegExp=j0,Me.isSafeInteger=ox,Me.isSet=_b,Me.isString=Ug,Me.isSymbol=qc,Me.isTypedArray=Vp,Me.isUndefined=sx,Me.isWeakMap=ax,Me.isWeakSet=cx,Me.join=Ie,Me.kebabCase=Tx,Me.last=rt,Me.lastIndexOf=vt,Me.lowerCase=oh,Me.lowerFirst=kb,Me.lt=wm,Me.lte=Em,Me.max=Uw,Me.maxBy=Xb,Me.mean=Zb,Me.meanBy=Vw,Me.min=Wx,Me.minBy=Yb,Me.stubArray=kt,Me.stubFalse=is,Me.stubObject=Va,Me.stubString=Zg,Me.stubTrue=jx,Me.multiply=Xx,Me.nth=Vt,Me.noConflict=Ub,Me.noop=K0,Me.now=F0,Me.pad=Mx,Me.padEnd=Ox,Me.padStart=Px,Me.parseInt=Dx,Me.random=dd,Me.reduce=fm,Me.reduceRight=sb,Me.repeat=Nx,Me.replace=Lb,Me.result=bx,Me.round=jw,Me.runInContext=pt,Me.sample=ab,Me.size=cb,Me.snakeCase=Ix,Me.some=z1,Me.sortedIndex=Pi,Me.sortedIndexBy=rs,Me.sortedIndexOf=Do,Me.sortedLastIndex=zp,Me.sortedLastIndexBy=Ua,Me.sortedLastIndexOf=Gg,Me.startCase=Wp,Me.startsWith=kx,Me.subtract=Zx,Me.sum=Kb,Me.sumBy=Yx,Me.template=Lx,Me.times=$b,Me.toFinite=Kl,Me.toInteger=Mi,Me.toLength=$0,Me.toLower=Er,Me.toNumber=yc,Me.toSafeInteger=lx,Me.toString=wo,Me.toUpper=dr,Me.trim=Or,Me.trimEnd=Cr,Me.trimStart=Gx,Me.truncate=cr,Me.unescape=Wi,Me.uniqueId=Hx,Me.upperCase=Fx,Me.upperFirst=Om,Me.each=um,Me.eachRight=rb,Me.first=dt,Pm(Me,function(){var m={};return Nc(Me,function(C,D){Ut.call(Me.prototype,D)||(m[D]=C)}),m}(),{chain:!1}),Me.VERSION=q,Wn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(m){Me[m].placeholder=Me}),Wn(["drop","take"],function(m,C){Ai.prototype[m]=function(D){D=D===R?1:cs(Mi(D),0);var Y=this.__filtered__&&!C?new Ai(this):this.clone();return Y.__filtered__?Y.__takeCount__=Es(D,Y.__takeCount__):Y.__views__.push({size:Es(D,Zi),type:m+(Y.__dir__<0?"Right":"")}),Y},Ai.prototype[m+"Right"]=function(D){return this.reverse()[m](D).reverse()}}),Wn(["filter","map","takeWhile"],function(m,C){var D=C+1,Y=D==Ct||D==jt;Ai.prototype[m]=function(ve){var ke=this.clone();return ke.__iteratees__.push({iteratee:ft(ve,3),type:D}),ke.__filtered__=ke.__filtered__||Y,ke}}),Wn(["head","last"],function(m,C){var D="take"+(C?"Right":"");Ai.prototype[m]=function(){return this[D](1).value()[0]}}),Wn(["initial","tail"],function(m,C){var D="drop"+(C?"":"Right");Ai.prototype[m]=function(){return this.__filtered__?new Ai(this):this[D](1)}}),Ai.prototype.compact=function(){return this.filter(Eo)},Ai.prototype.find=function(m){return this.filter(m).head()},Ai.prototype.findLast=function(m){return this.reverse().find(m)},Ai.prototype.invokeMap=ui(function(m,C){return typeof m=="function"?new Ai(this):this.map(function(D){return Vl(D,m,C)})}),Ai.prototype.reject=function(m){return this.filter(Bg(ft(m)))},Ai.prototype.slice=function(m,C){m=Mi(m);var D=this;return D.__filtered__&&(m>0||C<0)?new Ai(D):(m<0?D=D.takeRight(-m):m&&(D=D.drop(m)),C!==R&&(C=Mi(C),D=C<0?D.dropRight(-C):D.take(C-m)),D)},Ai.prototype.takeRightWhile=function(m){return this.reverse().takeWhile(m).reverse()},Ai.prototype.toArray=function(){return this.take(Zi)},Nc(Ai.prototype,function(m,C){var D=/^(?:filter|find|map|reject)|While$/.test(C),Y=/^(?:head|last)$/.test(C),ve=Me[Y?"take"+(C=="last"?"Right":""):C],ke=Y||/^find/.test(C);!ve||(Me.prototype[C]=function(){var Ze=this.__wrapped__,st=Y?[1]:arguments,Ot=Ze instanceof Ai,mn=st[0],Cn=Ot||gi(Ze),Dn=function(Ki){var ro=ve.apply(Me,Rr([Ki],st));return Y&&nr?ro[0]:ro};Cn&&D&&typeof mn=="function"&&mn.length!=1&&(Ot=Cn=!1);var nr=this.__chain__,Pr=!!this.__actions__.length,ri=ke&&!nr,Ri=Ot&&!Pr;if(!ke&&Cn){Ze=Ri?Ze:new Ai(this);var ii=m.apply(Ze,st);return ii.__actions__.push({func:L0,args:[Dn],thisArg:R}),new La(ii,nr)}return ri&&Ri?m.apply(this,st):(ii=this.thru(Dn),ri?Y?ii.value()[0]:ii.value():ii)})}),Wn(["pop","push","shift","sort","splice","unshift"],function(m){var C=Ye[m],D=/^(?:push|sort|unshift)$/.test(m)?"tap":"thru",Y=/^(?:pop|shift)$/.test(m);Me.prototype[m]=function(){var ve=arguments;if(Y&&!this.__chain__){var ke=this.value();return C.apply(gi(ke)?ke:[],ve)}return this[D](function(Ze){return C.apply(gi(Ze)?Ze:[],ve)})}}),Nc(Ai.prototype,function(m,C){var D=Me[C];if(D){var Y=D.name+"";Ut.call(ta,Y)||(ta[Y]=[]),ta[Y].push({name:C,func:D})}}),ta[ml(R,ce).name]=[{name:"wrapper",func:R}],Ai.prototype.clone=Jv,Ai.prototype.reverse=ed,Ai.prototype.value=T0,Me.prototype.at=A1,Me.prototype.chain=T1,Me.prototype.commit=Qy,Me.prototype.next=M1,Me.prototype.plant=eb,Me.prototype.reverse=P1,Me.prototype.toJSON=Me.prototype.valueOf=Me.prototype.value=D1,Me.prototype.first=Me.prototype.head,Ka&&(Me.prototype[Ka]=O1),Me},lc=Af();S._=lc,j=function(){return lc}.call(L,M,L,Ne),j!==R&&(Ne.exports=j)}).call(this)},50308:function(Ne){function L(){}Ne.exports=L},45578:function(Ne,L,M){var j=M(67206),R=M(45652);function q(z,Z){return z&&z.length?R(z,j(Z,2)):[]}Ne.exports=q},53893:function(Ne,L,M){"use strict";M.r(L),M.d(L,{amber:function(){return ue},black:function(){return He},blue:function(){return te},blueGrey:function(){return Ee},brown:function(){return ce},cyan:function(){return de},darkIcons:function(){return nt},darkText:function(){return pe},deepOrange:function(){return ae},deepPurple:function(){return z},green:function(){return ie},grey:function(){return fe},indigo:function(){return Z},lightBlue:function(){return Q},lightGreen:function(){return re},lightIcons:function(){return G},lightText:function(){return Ae},lime:function(){return he},orange:function(){return xe},pink:function(){return R},purple:function(){return q},red:function(){return j},teal:function(){return oe},white:function(){return Fe},yellow:function(){return De}});var j={"50":"#ffebee","100":"#ffcdd2","200":"#ef9a9a","300":"#e57373","400":"#ef5350","500":"#f44336","600":"#e53935","700":"#d32f2f","800":"#c62828","900":"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},R={"50":"#fce4ec","100":"#f8bbd0","200":"#f48fb1","300":"#f06292","400":"#ec407a","500":"#e91e63","600":"#d81b60","700":"#c2185b","800":"#ad1457","900":"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},q={"50":"#f3e5f5","100":"#e1bee7","200":"#ce93d8","300":"#ba68c8","400":"#ab47bc","500":"#9c27b0","600":"#8e24aa","700":"#7b1fa2","800":"#6a1b9a","900":"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},z={"50":"#ede7f6","100":"#d1c4e9","200":"#b39ddb","300":"#9575cd","400":"#7e57c2","500":"#673ab7","600":"#5e35b1","700":"#512da8","800":"#4527a0","900":"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Z={"50":"#e8eaf6","100":"#c5cae9","200":"#9fa8da","300":"#7986cb","400":"#5c6bc0","500":"#3f51b5","600":"#3949ab","700":"#303f9f","800":"#283593","900":"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},te={"50":"#e3f2fd","100":"#bbdefb","200":"#90caf9","300":"#64b5f6","400":"#42a5f5","500":"#2196f3","600":"#1e88e5","700":"#1976d2","800":"#1565c0","900":"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},Q={"50":"#e1f5fe","100":"#b3e5fc","200":"#81d4fa","300":"#4fc3f7","400":"#29b6f6","500":"#03a9f4","600":"#039be5","700":"#0288d1","800":"#0277bd","900":"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},de={"50":"#e0f7fa","100":"#b2ebf2","200":"#80deea","300":"#4dd0e1","400":"#26c6da","500":"#00bcd4","600":"#00acc1","700":"#0097a7","800":"#00838f","900":"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},oe={"50":"#e0f2f1","100":"#b2dfdb","200":"#80cbc4","300":"#4db6ac","400":"#26a69a","500":"#009688","600":"#00897b","700":"#00796b","800":"#00695c","900":"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},ie={"50":"#e8f5e9","100":"#c8e6c9","200":"#a5d6a7","300":"#81c784","400":"#66bb6a","500":"#4caf50","600":"#43a047","700":"#388e3c","800":"#2e7d32","900":"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},re={"50":"#f1f8e9","100":"#dcedc8","200":"#c5e1a5","300":"#aed581","400":"#9ccc65","500":"#8bc34a","600":"#7cb342","700":"#689f38","800":"#558b2f","900":"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},he={"50":"#f9fbe7","100":"#f0f4c3","200":"#e6ee9c","300":"#dce775","400":"#d4e157","500":"#cddc39","600":"#c0ca33","700":"#afb42b","800":"#9e9d24","900":"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},De={"50":"#fffde7","100":"#fff9c4","200":"#fff59d","300":"#fff176","400":"#ffee58","500":"#ffeb3b","600":"#fdd835","700":"#fbc02d","800":"#f9a825","900":"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},ue={"50":"#fff8e1","100":"#ffecb3","200":"#ffe082","300":"#ffd54f","400":"#ffca28","500":"#ffc107","600":"#ffb300","700":"#ffa000","800":"#ff8f00","900":"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},xe={"50":"#fff3e0","100":"#ffe0b2","200":"#ffcc80","300":"#ffb74d","400":"#ffa726","500":"#ff9800","600":"#fb8c00","700":"#f57c00","800":"#ef6c00","900":"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},ae={"50":"#fbe9e7","100":"#ffccbc","200":"#ffab91","300":"#ff8a65","400":"#ff7043","500":"#ff5722","600":"#f4511e","700":"#e64a19","800":"#d84315","900":"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},ce={"50":"#efebe9","100":"#d7ccc8","200":"#bcaaa4","300":"#a1887f","400":"#8d6e63","500":"#795548","600":"#6d4c41","700":"#5d4037","800":"#4e342e","900":"#3e2723"},fe={"50":"#fafafa","100":"#f5f5f5","200":"#eeeeee","300":"#e0e0e0","400":"#bdbdbd","500":"#9e9e9e","600":"#757575","700":"#616161","800":"#424242","900":"#212121"},Ee={"50":"#eceff1","100":"#cfd8dc","200":"#b0bec5","300":"#90a4ae","400":"#78909c","500":"#607d8b","600":"#546e7a","700":"#455a64","800":"#37474f","900":"#263238"},pe={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},Ae={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},nt={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},G={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},Fe="#ffffff",He="#000000";L.default={red:j,pink:R,purple:q,deepPurple:z,indigo:Z,blue:te,lightBlue:Q,cyan:de,teal:oe,green:ie,lightGreen:re,lime:he,yellow:De,amber:ue,orange:xe,deepOrange:ae,brown:ce,grey:fe,blueGrey:Ee,darkText:pe,lightText:Ae,darkIcons:nt,lightIcons:G,white:Fe,black:He}},42441:function(Ne,L,M){var j;(function(R,q,z){if(!R)return;for(var Z={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},te={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Q={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},de={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},oe,ie=1;ie<20;++ie)Z[111+ie]="f"+ie;for(ie=0;ie<=9;++ie)Z[ie+96]=ie.toString();function re(Fe,He,et){if(Fe.addEventListener){Fe.addEventListener(He,et,!1);return}Fe.attachEvent("on"+He,et)}function he(Fe){if(Fe.type=="keypress"){var He=String.fromCharCode(Fe.which);return Fe.shiftKey||(He=He.toLowerCase()),He}return Z[Fe.which]?Z[Fe.which]:te[Fe.which]?te[Fe.which]:String.fromCharCode(Fe.which).toLowerCase()}function De(Fe,He){return Fe.sort().join(",")===He.sort().join(",")}function ue(Fe){var He=[];return Fe.shiftKey&&He.push("shift"),Fe.altKey&&He.push("alt"),Fe.ctrlKey&&He.push("ctrl"),Fe.metaKey&&He.push("meta"),He}function xe(Fe){if(Fe.preventDefault){Fe.preventDefault();return}Fe.returnValue=!1}function ae(Fe){if(Fe.stopPropagation){Fe.stopPropagation();return}Fe.cancelBubble=!0}function ce(Fe){return Fe=="shift"||Fe=="ctrl"||Fe=="alt"||Fe=="meta"}function fe(){if(!oe){oe={};for(var Fe in Z)Fe>95&&Fe<112||Z.hasOwnProperty(Fe)&&(oe[Z[Fe]]=Fe)}return oe}function Ee(Fe,He,et){return et||(et=fe()[Fe]?"keydown":"keypress"),et=="keypress"&&He.length&&(et="keydown"),et}function pe(Fe){return Fe==="+"?["+"]:(Fe=Fe.replace(/\+{2}/g,"+plus"),Fe.split("+"))}function Ae(Fe,He){var et,Bt,Mn,ye=[];for(et=pe(Fe),Mn=0;Mn<et.length;++Mn)Bt=et[Mn],de[Bt]&&(Bt=de[Bt]),He&&He!="keypress"&&Q[Bt]&&(Bt=Q[Bt],ye.push("shift")),ce(Bt)&&ye.push(Bt);return He=Ee(Bt,ye,He),{key:Bt,modifiers:ye,action:He}}function nt(Fe,He){return Fe===null||Fe===q?!1:Fe===He?!0:nt(Fe.parentNode,He)}function G(Fe){var He=this;if(Fe=Fe||q,!(He instanceof G))return new G(Fe);He.target=Fe,He._callbacks={},He._directMap={};var et={},Bt,Mn=!1,ye=!1,Ct=!1;function Pn(Xn){Xn=Xn||{};var Ar=!1,lr;for(lr in et){if(Xn[lr]){Ar=!0;continue}et[lr]=0}Ar||(Ct=!1)}function jt(Xn,Ar,lr,Ir,Oi,Bi){var Kr,eo,Ts=[],Ks=lr.type;if(!He._callbacks[Xn])return[];for(Ks=="keyup"&&ce(Xn)&&(Ar=[Xn]),Kr=0;Kr<He._callbacks[Xn].length;++Kr)if(eo=He._callbacks[Xn][Kr],!(!Ir&&eo.seq&&et[eo.seq]!=eo.level)&&Ks==eo.action&&(Ks=="keypress"&&!lr.metaKey&&!lr.ctrlKey||De(Ar,eo.modifiers))){var bs=!Ir&&eo.combo==Oi,Zo=Ir&&eo.seq==Ir&&eo.level==Bi;(bs||Zo)&&He._callbacks[Xn].splice(Kr,1),Ts.push(eo)}return Ts}function cn(Xn,Ar,lr,Ir){He.stopCallback(Ar,Ar.target||Ar.srcElement,lr,Ir)||Xn(Ar,lr)===!1&&(xe(Ar),ae(Ar))}He._handleKey=function(Xn,Ar,lr){var Ir=jt(Xn,Ar,lr),Oi,Bi={},Kr=0,eo=!1;for(Oi=0;Oi<Ir.length;++Oi)Ir[Oi].seq&&(Kr=Math.max(Kr,Ir[Oi].level));for(Oi=0;Oi<Ir.length;++Oi){if(Ir[Oi].seq){if(Ir[Oi].level!=Kr)continue;eo=!0,Bi[Ir[Oi].seq]=1,cn(Ir[Oi].callback,lr,Ir[Oi].combo,Ir[Oi].seq);continue}eo||cn(Ir[Oi].callback,lr,Ir[Oi].combo)}var Ts=lr.type=="keypress"&&ye;lr.type==Ct&&!ce(Xn)&&!Ts&&Pn(Bi),ye=eo&&lr.type=="keydown"};function qn(Xn){typeof Xn.which!="number"&&(Xn.which=Xn.keyCode);var Ar=he(Xn);if(!!Ar){if(Xn.type=="keyup"&&Mn===Ar){Mn=!1;return}He.handleKey(Ar,ue(Xn),Xn)}}function on(){clearTimeout(Bt),Bt=setTimeout(Pn,1e3)}function lo(Xn,Ar,lr,Ir){et[Xn]=0;function Oi(Ks){return function(){Ct=Ks,++et[Xn],on()}}function Bi(Ks){cn(lr,Ks,Xn),Ir!=="keyup"&&(Mn=he(Ks)),setTimeout(Pn,10)}for(var Kr=0;Kr<Ar.length;++Kr){var eo=Kr+1===Ar.length,Ts=eo?Bi:Oi(Ir||Ae(Ar[Kr+1]).action);Zi(Ar[Kr],Ts,Ir,Xn,Kr)}}function Zi(Xn,Ar,lr,Ir,Oi){He._directMap[Xn+":"+lr]=Ar,Xn=Xn.replace(/\s+/g," ");var Bi=Xn.split(" "),Kr;if(Bi.length>1){lo(Xn,Bi,Ar,lr);return}Kr=Ae(Xn,lr),He._callbacks[Kr.key]=He._callbacks[Kr.key]||[],jt(Kr.key,Kr.modifiers,{type:Kr.action},Ir,Xn,Oi),He._callbacks[Kr.key][Ir?"unshift":"push"]({callback:Ar,modifiers:Kr.modifiers,action:Kr.action,seq:Ir,level:Oi,combo:Xn})}He._bindMultiple=function(Xn,Ar,lr){for(var Ir=0;Ir<Xn.length;++Ir)Zi(Xn[Ir],Ar,lr)},re(Fe,"keypress",qn),re(Fe,"keydown",qn),re(Fe,"keyup",qn)}G.prototype.bind=function(Fe,He,et){var Bt=this;return Fe=Fe instanceof Array?Fe:[Fe],Bt._bindMultiple.call(Bt,Fe,He,et),Bt},G.prototype.unbind=function(Fe,He){var et=this;return et.bind.call(et,Fe,function(){},He)},G.prototype.trigger=function(Fe,He){var et=this;return et._directMap[Fe+":"+He]&&et._directMap[Fe+":"+He]({},Fe),et},G.prototype.reset=function(){var Fe=this;return Fe._callbacks={},Fe._directMap={},Fe},G.prototype.stopCallback=function(Fe,He){var et=this;if((" "+He.className+" ").indexOf(" mousetrap ")>-1||nt(He,et.target))return!1;if("composedPath"in Fe&&typeof Fe.composedPath=="function"){var Bt=Fe.composedPath()[0];Bt!==Fe.target&&(He=Bt)}return He.tagName=="INPUT"||He.tagName=="SELECT"||He.tagName=="TEXTAREA"||He.isContentEditable},G.prototype.handleKey=function(){var Fe=this;return Fe._handleKey.apply(Fe,arguments)},G.addKeycodes=function(Fe){for(var He in Fe)Fe.hasOwnProperty(He)&&(Z[He]=Fe[He]);oe=null},G.init=function(){var Fe=G(q);for(var He in Fe)He.charAt(0)!=="_"&&(G[He]=function(et){return function(){return Fe[et].apply(Fe,arguments)}}(He))},G.init(),R.Mousetrap=G,Ne.exports&&(Ne.exports=G),j=function(){return G}.call(L,M,L,Ne),j!==z&&(Ne.exports=j)})(typeof window<"u"?window:null,typeof window<"u"?document:null)},40582:function(Ne,L,M){var j=M(89550),R=M(68854),q=M(36820),z=M(43650),Z=M(56601),te=[0,0];Ne.exports.x7=function(de,oe,ie,re,he){return j(de,ie,re),q(de,de),R(oe,-de[1],de[0]),R(te,-ie[1],ie[0]),he/Z(oe,te)},Ne.exports.mJ=function(de,oe){return R(de,-oe[1],oe[0]),de},Ne.exports.o7=function(de,oe,ie){return z(de,oe,ie),q(de,de),de}},92703:function(Ne,L,M){"use strict";var j=M(50414);function R(){}function q(){}q.resetWarningCache=R,Ne.exports=function(){function z(Q,de,oe,ie,re,he){if(he!==j){var De=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw De.name="Invariant Violation",De}}z.isRequired=z;function Z(){return z}var te={array:z,bigint:z,bool:z,func:z,number:z,object:z,string:z,symbol:z,any:z,arrayOf:Z,element:z,elementType:z,instanceOf:Z,node:z,objectOf:Z,oneOf:Z,oneOfType:Z,shape:Z,exact:Z,checkPropTypes:q,resetWarningCache:R};return te.PropTypes=te,te}},45697:function(Ne,L,M){if(!1)var j,R;else Ne.exports=M(92703)()},50414:function(Ne){"use strict";var L="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Ne.exports=L},9563:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AlphaPicker=void 0;var j=Object.assign||function(re){for(var he=1;he<arguments.length;he++){var De=arguments[he];for(var ue in De)Object.prototype.hasOwnProperty.call(De,ue)&&(re[ue]=De[ue])}return re},R=M(67294),q=oe(R),z=M(79941),Z=oe(z),te=M(1150),Q=M(82519),de=oe(Q);function oe(re){return re&&re.__esModule?re:{default:re}}var ie=L.AlphaPicker=function(he){var De=he.rgb,ue=he.hsl,xe=he.width,ae=he.height,ce=he.onChange,fe=he.direction,Ee=he.style,pe=he.renderers,Ae=he.pointer,nt=he.className,G=nt===void 0?"":nt,Fe=(0,Z.default)({default:{picker:{position:"relative",width:xe,height:ae},alpha:{radius:"2px",style:Ee}}});return q.default.createElement("div",{style:Fe.picker,className:"alpha-picker "+G},q.default.createElement(te.Alpha,j({},Fe.alpha,{rgb:De,hsl:ue,pointer:Ae,renderers:pe,onChange:ce,direction:fe})))};ie.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:de.default},L.default=(0,te.ColorWrap)(ie)},82519:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AlphaPointer=void 0;var j=M(67294),R=Z(j),q=M(79941),z=Z(q);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.AlphaPointer=function(de){var oe=de.direction,ie=(0,z.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:oe==="vertical"});return R.default.createElement("div",{style:ie.picker})};L.default=te},88858:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Block=void 0;var j=M(67294),R=ue(j),q=M(45697),z=ue(q),Z=M(79941),te=ue(Z),Q=M(82492),de=ue(Q),oe=M(64809),ie=ue(oe),re=M(1150),he=M(53014),De=ue(he);function ue(ae){return ae&&ae.__esModule?ae:{default:ae}}var xe=L.Block=function(ce){var fe=ce.onChange,Ee=ce.onSwatchHover,pe=ce.hex,Ae=ce.colors,nt=ce.width,G=ce.triangle,Fe=ce.styles,He=Fe===void 0?{}:Fe,et=ce.className,Bt=et===void 0?"":et,Mn=pe==="transparent",ye=function(jt,cn){ie.default.isValidHex(jt)&&fe({hex:jt,source:"hex"},cn)},Ct=(0,te.default)((0,de.default)({default:{card:{width:nt,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:pe,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:ie.default.getContrastingColor(pe),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+pe+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},He),{"hide-triangle":G==="hide"});return R.default.createElement("div",{style:Ct.card,className:"block-picker "+Bt},R.default.createElement("div",{style:Ct.triangle}),R.default.createElement("div",{style:Ct.head},Mn&&R.default.createElement(re.Checkboard,{borderRadius:"6px 6px 0 0"}),R.default.createElement("div",{style:Ct.label},pe)),R.default.createElement("div",{style:Ct.body},R.default.createElement(De.default,{colors:Ae,onClick:ye,onSwatchHover:Ee}),R.default.createElement(re.EditableInput,{style:{input:Ct.input},value:pe,onChange:ye})))};xe.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),colors:z.default.arrayOf(z.default.string),triangle:z.default.oneOf(["top","hide"]),styles:z.default.object},xe.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},L.default=(0,re.ColorWrap)(xe)},53014:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BlockSwatches=void 0;var j=M(67294),R=de(j),q=M(79941),z=de(q),Z=M(35161),te=de(Z),Q=M(1150);function de(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.BlockSwatches=function(re){var he=re.colors,De=re.onClick,ue=re.onSwatchHover,xe=(0,z.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return R.default.createElement("div",{style:xe.swatches},(0,te.default)(he,function(ae){return R.default.createElement(Q.Swatch,{key:ae,color:ae,style:xe.swatch,onClick:De,onHover:ue,focusStyle:{boxShadow:"0 0 4px "+ae}})}),R.default.createElement("div",{style:xe.clear}))};L.default=oe},21847:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Chrome=void 0;var j=M(67294),R=ae(j),q=M(45697),z=ae(q),Z=M(79941),te=ae(Z),Q=M(82492),de=ae(Q),oe=M(1150),ie=M(32564),re=ae(ie),he=M(14066),De=ae(he),ue=M(20289),xe=ae(ue);function ae(fe){return fe&&fe.__esModule?fe:{default:fe}}var ce=L.Chrome=function(Ee){var pe=Ee.width,Ae=Ee.onChange,nt=Ee.disableAlpha,G=Ee.rgb,Fe=Ee.hsl,He=Ee.hsv,et=Ee.hex,Bt=Ee.renderers,Mn=Ee.styles,ye=Mn===void 0?{}:Mn,Ct=Ee.className,Pn=Ct===void 0?"":Ct,jt=(0,te.default)((0,de.default)({default:{picker:{width:pe,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+G.r+", "+G.g+", "+G.b+", "+G.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},ye),{disableAlpha:nt});return R.default.createElement("div",{style:jt.picker,className:"chrome-picker "+Pn},R.default.createElement("div",{style:jt.saturation},R.default.createElement(oe.Saturation,{style:jt.Saturation,hsl:Fe,hsv:He,pointer:xe.default,onChange:Ae})),R.default.createElement("div",{style:jt.body},R.default.createElement("div",{style:jt.controls,className:"flexbox-fix"},R.default.createElement("div",{style:jt.color},R.default.createElement("div",{style:jt.swatch},R.default.createElement("div",{style:jt.active}),R.default.createElement(oe.Checkboard,{renderers:Bt}))),R.default.createElement("div",{style:jt.toggles},R.default.createElement("div",{style:jt.hue},R.default.createElement(oe.Hue,{style:jt.Hue,hsl:Fe,pointer:De.default,onChange:Ae})),R.default.createElement("div",{style:jt.alpha},R.default.createElement(oe.Alpha,{style:jt.Alpha,rgb:G,hsl:Fe,pointer:De.default,renderers:Bt,onChange:Ae})))),R.default.createElement(re.default,{rgb:G,hsl:Fe,hex:et,onChange:Ae,disableAlpha:nt})))};ce.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),disableAlpha:z.default.bool,styles:z.default.object},ce.defaultProps={width:225,disableAlpha:!1,styles:{}},L.default=(0,oe.ColorWrap)(ce)},32564:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ChromeFields=void 0;var j=function(){function ae(ce,fe){for(var Ee=0;Ee<fe.length;Ee++){var pe=fe[Ee];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ce,pe.key,pe)}}return function(ce,fe,Ee){return fe&&ae(ce.prototype,fe),Ee&&ae(ce,Ee),ce}}(),R=M(67294),q=re(R),z=M(79941),Z=re(z),te=M(64809),Q=re(te),de=M(1150),oe=M(43891),ie=re(oe);function re(ae){return ae&&ae.__esModule?ae:{default:ae}}function he(ae,ce){if(!(ae instanceof ce))throw new TypeError("Cannot call a class as a function")}function De(ae,ce){if(!ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce&&(typeof ce=="object"||typeof ce=="function")?ce:ae}function ue(ae,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ce);ae.prototype=Object.create(ce&&ce.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(ae,ce):ae.__proto__=ce)}var xe=L.ChromeFields=function(ae){ue(ce,ae);function ce(){var fe,Ee,pe,Ae;he(this,ce);for(var nt=arguments.length,G=Array(nt),Fe=0;Fe<nt;Fe++)G[Fe]=arguments[Fe];return Ae=(Ee=(pe=De(this,(fe=ce.__proto__||Object.getPrototypeOf(ce)).call.apply(fe,[this].concat(G))),pe),pe.state={view:""},pe.toggleViews=function(){pe.state.view==="hex"?pe.setState({view:"rgb"}):pe.state.view==="rgb"?pe.setState({view:"hsl"}):pe.state.view==="hsl"&&(pe.props.hsl.a===1?pe.setState({view:"hex"}):pe.setState({view:"rgb"}))},pe.handleChange=function(He,et){He.hex?Q.default.isValidHex(He.hex)&&pe.props.onChange({hex:He.hex,source:"hex"},et):He.r||He.g||He.b?pe.props.onChange({r:He.r||pe.props.rgb.r,g:He.g||pe.props.rgb.g,b:He.b||pe.props.rgb.b,source:"rgb"},et):He.a?(He.a<0?He.a=0:He.a>1&&(He.a=1),pe.props.onChange({h:pe.props.hsl.h,s:pe.props.hsl.s,l:pe.props.hsl.l,a:Math.round(He.a*100)/100,source:"rgb"},et)):(He.h||He.s||He.l)&&(typeof He.s=="string"&&He.s.includes("%")&&(He.s=He.s.replace("%","")),typeof He.l=="string"&&He.l.includes("%")&&(He.l=He.l.replace("%","")),pe.props.onChange({h:He.h||pe.props.hsl.h,s:Number(He.s&&He.s||pe.props.hsl.s),l:Number(He.l&&He.l||pe.props.hsl.l),source:"hsl"},et))},pe.showHighlight=function(He){He.currentTarget.style.background="#eee"},pe.hideHighlight=function(He){He.currentTarget.style.background="transparent"},Ee),De(pe,Ae)}return j(ce,[{key:"componentDidMount",value:function(){this.props.hsl.a===1&&this.state.view!=="hex"?this.setState({view:"hex"}):this.state.view!=="rgb"&&this.state.view!=="hsl"&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(Ee){Ee.hsl.a!==1&&this.state.view==="hex"&&this.setState({view:"rgb"})}},{key:"render",value:function(){var Ee=this,pe=(0,Z.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),Ae=void 0;return this.state.view==="hex"?Ae=q.default.createElement("div",{style:pe.fields,className:"flexbox-fix"},q.default.createElement("div",{style:pe.field},q.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?Ae=q.default.createElement("div",{style:pe.fields,className:"flexbox-fix"},q.default.createElement("div",{style:pe.field},q.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),q.default.createElement("div",{style:pe.field},q.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),q.default.createElement("div",{style:pe.field},q.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),q.default.createElement("div",{style:pe.alpha},q.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(Ae=q.default.createElement("div",{style:pe.fields,className:"flexbox-fix"},q.default.createElement("div",{style:pe.field},q.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),q.default.createElement("div",{style:pe.field},q.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),q.default.createElement("div",{style:pe.field},q.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),q.default.createElement("div",{style:pe.alpha},q.default.createElement(de.EditableInput,{style:{input:pe.input,label:pe.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),q.default.createElement("div",{style:pe.wrap,className:"flexbox-fix"},Ae,q.default.createElement("div",{style:pe.toggle},q.default.createElement("div",{style:pe.icon,onClick:this.toggleViews,ref:function(G){return Ee.icon=G}},q.default.createElement(ie.default,{style:pe.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}]),ce}(q.default.Component);L.default=xe},14066:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ChromePointer=void 0;var j=M(67294),R=Z(j),q=M(79941),z=Z(q);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.ChromePointer=function(){var de=(0,z.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return R.default.createElement("div",{style:de.picker})};L.default=te},20289:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ChromePointerCircle=void 0;var j=M(67294),R=Z(j),q=M(79941),z=Z(q);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.ChromePointerCircle=function(){var de=(0,z.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return R.default.createElement("div",{style:de.picker})};L.default=te},9703:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Circle=void 0;var j=M(67294),R=ce(j),q=M(45697),z=ce(q),Z=M(79941),te=ce(Z),Q=M(35161),de=ce(Q),oe=M(82492),ie=ce(oe),re=M(53893),he=ae(re),De=M(1150),ue=M(26249),xe=ce(ue);function ae(Ee){if(Ee&&Ee.__esModule)return Ee;var pe={};if(Ee!=null)for(var Ae in Ee)Object.prototype.hasOwnProperty.call(Ee,Ae)&&(pe[Ae]=Ee[Ae]);return pe.default=Ee,pe}function ce(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}var fe=L.Circle=function(pe){var Ae=pe.width,nt=pe.onChange,G=pe.onSwatchHover,Fe=pe.colors,He=pe.hex,et=pe.circleSize,Bt=pe.styles,Mn=Bt===void 0?{}:Bt,ye=pe.circleSpacing,Ct=pe.className,Pn=Ct===void 0?"":Ct,jt=(0,te.default)((0,ie.default)({default:{card:{width:Ae,display:"flex",flexWrap:"wrap",marginRight:-ye,marginBottom:-ye}}},Mn)),cn=function(on,lo){return nt({hex:on,source:"hex"},lo)};return R.default.createElement("div",{style:jt.card,className:"circle-picker "+Pn},(0,de.default)(Fe,function(qn){return R.default.createElement(xe.default,{key:qn,color:qn,onClick:cn,onSwatchHover:G,active:He===qn.toLowerCase(),circleSize:et,circleSpacing:ye})}))};fe.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),circleSize:z.default.number,circleSpacing:z.default.number,styles:z.default.object},fe.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[he.red["500"],he.pink["500"],he.purple["500"],he.deepPurple["500"],he.indigo["500"],he.blue["500"],he.lightBlue["500"],he.cyan["500"],he.teal["500"],he.green["500"],he.lightGreen["500"],he.lime["500"],he.yellow["500"],he.amber["500"],he.orange["500"],he.deepOrange["500"],he.brown["500"],he.blueGrey["500"]],styles:{}},L.default=(0,De.ColorWrap)(fe)},26249:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.CircleSwatch=void 0;var j=M(67294),R=te(j),q=M(79941),z=te(q),Z=M(1150);function te(de){return de&&de.__esModule?de:{default:de}}var Q=L.CircleSwatch=function(oe){var ie=oe.color,re=oe.onClick,he=oe.onSwatchHover,De=oe.hover,ue=oe.active,xe=oe.circleSize,ae=oe.circleSpacing,ce=(0,z.default)({default:{swatch:{width:xe,height:xe,marginRight:ae,marginBottom:ae,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+xe/2+"px "+ie,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+ie}}},{hover:De,active:ue});return R.default.createElement("div",{style:ce.swatch},R.default.createElement(Z.Swatch,{style:ce.Swatch,color:ie,onClick:re,onHover:he,focusStyle:{boxShadow:ce.Swatch.boxShadow+", 0 0 5px "+ie}}))};Q.defaultProps={circleSize:28,circleSpacing:14},L.default=(0,q.handleHover)(Q)},57319:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Alpha=void 0;var j=Object.assign||function(ce){for(var fe=1;fe<arguments.length;fe++){var Ee=arguments[fe];for(var pe in Ee)Object.prototype.hasOwnProperty.call(Ee,pe)&&(ce[pe]=Ee[pe])}return ce},R=function(){function ce(fe,Ee){for(var pe=0;pe<Ee.length;pe++){var Ae=Ee[pe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(fe,Ae.key,Ae)}}return function(fe,Ee,pe){return Ee&&ce(fe.prototype,Ee),pe&&ce(fe,pe),fe}}(),q=M(67294),z=he(q),Z=M(79941),te=he(Z),Q=M(66713),de=re(Q),oe=M(34349),ie=he(oe);function re(ce){if(ce&&ce.__esModule)return ce;var fe={};if(ce!=null)for(var Ee in ce)Object.prototype.hasOwnProperty.call(ce,Ee)&&(fe[Ee]=ce[Ee]);return fe.default=ce,fe}function he(ce){return ce&&ce.__esModule?ce:{default:ce}}function De(ce,fe){if(!(ce instanceof fe))throw new TypeError("Cannot call a class as a function")}function ue(ce,fe){if(!ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe&&(typeof fe=="object"||typeof fe=="function")?fe:ce}function xe(ce,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof fe);ce.prototype=Object.create(fe&&fe.prototype,{constructor:{value:ce,enumerable:!1,writable:!0,configurable:!0}}),fe&&(Object.setPrototypeOf?Object.setPrototypeOf(ce,fe):ce.__proto__=fe)}var ae=L.Alpha=function(ce){xe(fe,ce);function fe(){var Ee,pe,Ae,nt;De(this,fe);for(var G=arguments.length,Fe=Array(G),He=0;He<G;He++)Fe[He]=arguments[He];return nt=(pe=(Ae=ue(this,(Ee=fe.__proto__||Object.getPrototypeOf(fe)).call.apply(Ee,[this].concat(Fe))),Ae),Ae.handleChange=function(et){var Bt=de.calculateChange(et,Ae.props.hsl,Ae.props.direction,Ae.props.a,Ae.container);Bt&&typeof Ae.props.onChange=="function"&&Ae.props.onChange(Bt,et)},Ae.handleMouseDown=function(et){Ae.handleChange(et),window.addEventListener("mousemove",Ae.handleChange),window.addEventListener("mouseup",Ae.handleMouseUp)},Ae.handleMouseUp=function(){Ae.unbindEventListeners()},Ae.unbindEventListeners=function(){window.removeEventListener("mousemove",Ae.handleChange),window.removeEventListener("mouseup",Ae.handleMouseUp)},pe),ue(Ae,nt)}return R(fe,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var pe=this,Ae=this.props.rgb,nt=(0,te.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+Ae.r+","+Ae.g+","+Ae.b+`, 0) 0%,
           rgba(`+Ae.r+","+Ae.g+","+Ae.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:Ae.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+Ae.r+","+Ae.g+","+Ae.b+`, 0) 0%,
           rgba(`+Ae.r+","+Ae.g+","+Ae.b+", 1) 100%)"},pointer:{left:0,top:Ae.a*100+"%"}},overwrite:j({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return z.default.createElement("div",{style:nt.alpha},z.default.createElement("div",{style:nt.checkboard},z.default.createElement(ie.default,{renderers:this.props.renderers})),z.default.createElement("div",{style:nt.gradient}),z.default.createElement("div",{style:nt.container,ref:function(Fe){return pe.container=Fe},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},z.default.createElement("div",{style:nt.pointer},this.props.pointer?z.default.createElement(this.props.pointer,this.props):z.default.createElement("div",{style:nt.slider}))))}}]),fe}(q.PureComponent||q.Component);L.default=ae},34349:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Checkboard=void 0;var j=M(67294),R=de(j),q=M(79941),z=de(q),Z=M(45704),te=Q(Z);function Q(ie){if(ie&&ie.__esModule)return ie;var re={};if(ie!=null)for(var he in ie)Object.prototype.hasOwnProperty.call(ie,he)&&(re[he]=ie[he]);return re.default=ie,re}function de(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.Checkboard=function(re){var he=re.white,De=re.grey,ue=re.size,xe=re.renderers,ae=re.borderRadius,ce=re.boxShadow,fe=(0,z.default)({default:{grid:{borderRadius:ae,boxShadow:ce,absolute:"0px 0px 0px 0px",background:"url("+te.get(he,De,ue,xe.canvas)+") center left"}}});return R.default.createElement("div",{style:fe.grid})};oe.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},L.default=oe},88288:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ColorWrap=void 0;var j=Object.assign||function(ue){for(var xe=1;xe<arguments.length;xe++){var ae=arguments[xe];for(var ce in ae)Object.prototype.hasOwnProperty.call(ae,ce)&&(ue[ce]=ae[ce])}return ue},R=function(){function ue(xe,ae){for(var ce=0;ce<ae.length;ce++){var fe=ae[ce];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(xe,fe.key,fe)}}return function(xe,ae,ce){return ae&&ue(xe.prototype,ae),ce&&ue(xe,ce),xe}}(),q=M(67294),z=oe(q),Z=M(23279),te=oe(Z),Q=M(64809),de=oe(Q);function oe(ue){return ue&&ue.__esModule?ue:{default:ue}}function ie(ue,xe){if(!(ue instanceof xe))throw new TypeError("Cannot call a class as a function")}function re(ue,xe){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xe&&(typeof xe=="object"||typeof xe=="function")?xe:ue}function he(ue,xe){if(typeof xe!="function"&&xe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof xe);ue.prototype=Object.create(xe&&xe.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),xe&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,xe):ue.__proto__=xe)}var De=L.ColorWrap=function(xe){var ae=function(ce){he(fe,ce);function fe(Ee){ie(this,fe);var pe=re(this,(fe.__proto__||Object.getPrototypeOf(fe)).call(this));return pe.handleChange=function(Ae,nt){var G=de.default.simpleCheckForValidColor(Ae);if(G){var Fe=de.default.toState(Ae,Ae.h||pe.state.oldHue);pe.setState(Fe),pe.props.onChangeComplete&&pe.debounce(pe.props.onChangeComplete,Fe,nt),pe.props.onChange&&pe.props.onChange(Fe,nt)}},pe.handleSwatchHover=function(Ae,nt){var G=de.default.simpleCheckForValidColor(Ae);if(G){var Fe=de.default.toState(Ae,Ae.h||pe.state.oldHue);pe.setState(Fe),pe.props.onSwatchHover&&pe.props.onSwatchHover(Fe,nt)}},pe.state=j({},de.default.toState(Ee.color,0)),pe.debounce=(0,te.default)(function(Ae,nt,G){Ae(nt,G)},100),pe}return R(fe,[{key:"componentWillReceiveProps",value:function(pe){this.setState(j({},de.default.toState(pe.color,this.state.oldHue)))}},{key:"render",value:function(){var pe={};return this.props.onSwatchHover&&(pe.onSwatchHover=this.handleSwatchHover),z.default.createElement(xe,j({},this.props,this.state,{onChange:this.handleChange},pe))}}]),fe}(q.PureComponent||q.Component);return ae.propTypes=j({},xe.propTypes),ae.defaultProps=j({},xe.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),ae};L.default=De},27747:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.EditableInput=void 0;var j=function(){function pe(Ae,nt){for(var G=0;G<nt.length;G++){var Fe=nt[G];Fe.enumerable=Fe.enumerable||!1,Fe.configurable=!0,"value"in Fe&&(Fe.writable=!0),Object.defineProperty(Ae,Fe.key,Fe)}}return function(Ae,nt,G){return nt&&pe(Ae.prototype,nt),G&&pe(Ae,G),Ae}}(),R=M(67294),q=te(R),z=M(79941),Z=te(z);function te(pe){return pe&&pe.__esModule?pe:{default:pe}}function Q(pe,Ae,nt){return Ae in pe?Object.defineProperty(pe,Ae,{value:nt,enumerable:!0,configurable:!0,writable:!0}):pe[Ae]=nt,pe}function de(pe,Ae){if(!(pe instanceof Ae))throw new TypeError("Cannot call a class as a function")}function oe(pe,Ae){if(!pe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ae&&(typeof Ae=="object"||typeof Ae=="function")?Ae:pe}function ie(pe,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ae);pe.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:pe,enumerable:!1,writable:!0,configurable:!0}}),Ae&&(Object.setPrototypeOf?Object.setPrototypeOf(pe,Ae):pe.__proto__=Ae)}var re=1,he=38,De=40,ue=[he,De],xe=function(Ae){return ue.indexOf(Ae)>-1},ae=function(Ae){return Ae+"%"},ce=function(Ae){return Number(String(Ae).replace(/%/g,""))},fe=function(Ae){return String(Ae).indexOf("%")>-1},Ee=L.EditableInput=function(pe){ie(Ae,pe);function Ae(nt){de(this,Ae);var G=oe(this,(Ae.__proto__||Object.getPrototypeOf(Ae)).call(this));return G.handleBlur=function(){G.state.blurValue&&G.setState({value:G.state.blurValue,blurValue:null})},G.handleChange=function(Fe){G.setUpdatedValue(Fe.target.value,Fe)},G.handleKeyDown=function(Fe){var He=ce(Fe.target.value);if(!isNaN(He)&&xe(Fe.keyCode)){var et=G.getArrowOffset(),Bt=Fe.keyCode===he?He+et:He-et;G.setUpdatedValue(Bt,Fe)}},G.handleDrag=function(Fe){if(G.props.dragLabel){var He=Math.round(G.props.value+Fe.movementX);He>=0&&He<=G.props.dragMax&&G.props.onChange&&G.props.onChange(G.getValueObjectWithLabel(He),Fe)}},G.handleMouseDown=function(Fe){G.props.dragLabel&&(Fe.preventDefault(),G.handleDrag(Fe),window.addEventListener("mousemove",G.handleDrag),window.addEventListener("mouseup",G.handleMouseUp))},G.handleMouseUp=function(){G.unbindEventListeners()},G.unbindEventListeners=function(){window.removeEventListener("mousemove",G.handleDrag),window.removeEventListener("mouseup",G.handleMouseUp)},G.state={value:String(nt.value).toUpperCase(),blurValue:String(nt.value).toUpperCase()},G}return j(Ae,[{key:"componentWillReceiveProps",value:function(G){var Fe=this.input;G.value!==this.state.value&&(Fe===document.activeElement?this.setState({blurValue:String(G.value).toUpperCase()}):this.setState({value:String(G.value).toUpperCase(),blurValue:!this.state.blurValue&&String(G.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(G){return Q({},this.props.label,G)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||re}},{key:"setUpdatedValue",value:function(G,Fe){var He=this.props.label!==null?this.getValueObjectWithLabel(G):G;this.props.onChange&&this.props.onChange(He,Fe);var et=fe(Fe.target.value);this.setState({value:et?ae(G):G})}},{key:"render",value:function(){var G=this,Fe=(0,Z.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return q.default.createElement("div",{style:Fe.wrap},q.default.createElement("input",{style:Fe.input,ref:function(et){return G.input=et},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?q.default.createElement("span",{style:Fe.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),Ae}(R.PureComponent||R.Component);L.default=Ee},26358:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Hue=void 0;var j=function(){function ue(xe,ae){for(var ce=0;ce<ae.length;ce++){var fe=ae[ce];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(xe,fe.key,fe)}}return function(xe,ae,ce){return ae&&ue(xe.prototype,ae),ce&&ue(xe,ce),xe}}(),R=M(67294),q=oe(R),z=M(79941),Z=oe(z),te=M(33716),Q=de(te);function de(ue){if(ue&&ue.__esModule)return ue;var xe={};if(ue!=null)for(var ae in ue)Object.prototype.hasOwnProperty.call(ue,ae)&&(xe[ae]=ue[ae]);return xe.default=ue,xe}function oe(ue){return ue&&ue.__esModule?ue:{default:ue}}function ie(ue,xe){if(!(ue instanceof xe))throw new TypeError("Cannot call a class as a function")}function re(ue,xe){if(!ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xe&&(typeof xe=="object"||typeof xe=="function")?xe:ue}function he(ue,xe){if(typeof xe!="function"&&xe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof xe);ue.prototype=Object.create(xe&&xe.prototype,{constructor:{value:ue,enumerable:!1,writable:!0,configurable:!0}}),xe&&(Object.setPrototypeOf?Object.setPrototypeOf(ue,xe):ue.__proto__=xe)}var De=L.Hue=function(ue){he(xe,ue);function xe(){var ae,ce,fe,Ee;ie(this,xe);for(var pe=arguments.length,Ae=Array(pe),nt=0;nt<pe;nt++)Ae[nt]=arguments[nt];return Ee=(ce=(fe=re(this,(ae=xe.__proto__||Object.getPrototypeOf(xe)).call.apply(ae,[this].concat(Ae))),fe),fe.handleChange=function(G){var Fe=Q.calculateChange(G,fe.props.direction,fe.props.hsl,fe.container);Fe&&typeof fe.props.onChange=="function"&&fe.props.onChange(Fe,G)},fe.handleMouseDown=function(G){fe.handleChange(G),window.addEventListener("mousemove",fe.handleChange),window.addEventListener("mouseup",fe.handleMouseUp)},fe.handleMouseUp=function(){fe.unbindEventListeners()},ce),re(fe,Ee)}return j(xe,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var ce=this,fe=this.props.direction,Ee=fe===void 0?"horizontal":fe,pe=(0,Z.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:Ee==="vertical"});return q.default.createElement("div",{style:pe.hue},q.default.createElement("div",{className:"hue-"+Ee,style:pe.container,ref:function(nt){return ce.container=nt},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},q.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),q.default.createElement("div",{style:pe.pointer},this.props.pointer?q.default.createElement(this.props.pointer,this.props):q.default.createElement("div",{style:pe.slider}))))}}]),xe}(R.PureComponent||R.Component);L.default=De},96207:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Raised=void 0;var j=M(67294),R=oe(j),q=M(45697),z=oe(q),Z=M(79941),te=oe(Z),Q=M(82492),de=oe(Q);function oe(re){return re&&re.__esModule?re:{default:re}}var ie=L.Raised=function(he){var De=he.zDepth,ue=he.radius,xe=he.background,ae=he.children,ce=he.styles,fe=ce===void 0?{}:ce,Ee=(0,te.default)((0,de.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+De+"px "+De*4+"px rgba(0,0,0,.24)",borderRadius:ue,background:xe}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},fe),{"zDepth-1":De===1});return R.default.createElement("div",{style:Ee.wrap},R.default.createElement("div",{style:Ee.bg}),R.default.createElement("div",{style:Ee.content},ae))};ie.propTypes={background:z.default.string,zDepth:z.default.oneOf([0,1,2,3,4,5]),radius:z.default.number,styles:z.default.object},ie.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},L.default=ie},76659:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Saturation=void 0;var j=function(){function ae(ce,fe){for(var Ee=0;Ee<fe.length;Ee++){var pe=fe[Ee];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ce,pe.key,pe)}}return function(ce,fe,Ee){return fe&&ae(ce.prototype,fe),Ee&&ae(ce,Ee),ce}}(),R=M(67294),q=re(R),z=M(79941),Z=re(z),te=M(23493),Q=re(te),de=M(37599),oe=ie(de);function ie(ae){if(ae&&ae.__esModule)return ae;var ce={};if(ae!=null)for(var fe in ae)Object.prototype.hasOwnProperty.call(ae,fe)&&(ce[fe]=ae[fe]);return ce.default=ae,ce}function re(ae){return ae&&ae.__esModule?ae:{default:ae}}function he(ae,ce){if(!(ae instanceof ce))throw new TypeError("Cannot call a class as a function")}function De(ae,ce){if(!ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce&&(typeof ce=="object"||typeof ce=="function")?ce:ae}function ue(ae,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ce);ae.prototype=Object.create(ce&&ce.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(ae,ce):ae.__proto__=ce)}var xe=L.Saturation=function(ae){ue(ce,ae);function ce(fe){he(this,ce);var Ee=De(this,(ce.__proto__||Object.getPrototypeOf(ce)).call(this,fe));return Ee.handleChange=function(pe){typeof Ee.props.onChange=="function"&&Ee.throttle(Ee.props.onChange,oe.calculateChange(pe,Ee.props.hsl,Ee.container),pe)},Ee.handleMouseDown=function(pe){Ee.handleChange(pe),window.addEventListener("mousemove",Ee.handleChange),window.addEventListener("mouseup",Ee.handleMouseUp)},Ee.handleMouseUp=function(){Ee.unbindEventListeners()},Ee.throttle=(0,Q.default)(function(pe,Ae,nt){pe(Ae,nt)},50),Ee}return j(ce,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var Ee=this,pe=this.props.style||{},Ae=pe.color,nt=pe.white,G=pe.black,Fe=pe.pointer,He=pe.circle,et=(0,Z.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:Ae,white:nt,black:G,pointer:Fe,circle:He}},{custom:!!this.props.style});return q.default.createElement("div",{style:et.color,ref:function(Mn){return Ee.container=Mn},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},q.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),q.default.createElement("div",{style:et.white,className:"saturation-white"},q.default.createElement("div",{style:et.black,className:"saturation-black"}),q.default.createElement("div",{style:et.pointer},this.props.pointer?q.default.createElement(this.props.pointer,this.props):q.default.createElement("div",{style:et.circle}))))}}]),ce}(R.PureComponent||R.Component);L.default=xe},62489:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Swatch=void 0;var j=Object.assign||function(he){for(var De=1;De<arguments.length;De++){var ue=arguments[De];for(var xe in ue)Object.prototype.hasOwnProperty.call(ue,xe)&&(he[xe]=ue[xe])}return he},R=M(67294),q=oe(R),z=M(79941),Z=oe(z),te=M(82538),Q=M(34349),de=oe(Q);function oe(he){return he&&he.__esModule?he:{default:he}}var ie=13,re=L.Swatch=function(De){var ue=De.color,xe=De.style,ae=De.onClick,ce=ae===void 0?function(){}:ae,fe=De.onHover,Ee=De.title,pe=Ee===void 0?ue:Ee,Ae=De.children,nt=De.focus,G=De.focusStyle,Fe=G===void 0?{}:G,He=ue==="transparent",et=(0,Z.default)({default:{swatch:j({background:ue,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},xe,nt?Fe:{})}}),Bt=function(jt){return ce(ue,jt)},Mn=function(jt){return jt.keyCode===ie&&ce(ue,jt)},ye=function(jt){return fe(ue,jt)},Ct={};return fe&&(Ct.onMouseOver=ye),q.default.createElement("div",j({style:et.swatch,onClick:Bt,title:pe,tabIndex:0,onKeyDown:Mn},Ct),Ae,He&&q.default.createElement(de.default,{borderRadius:et.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};L.default=(0,te.handleFocus)(re)},1150:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var j=M(57319);Object.defineProperty(L,"Alpha",{enumerable:!0,get:function(){return oe(j).default}});var R=M(34349);Object.defineProperty(L,"Checkboard",{enumerable:!0,get:function(){return oe(R).default}});var q=M(27747);Object.defineProperty(L,"EditableInput",{enumerable:!0,get:function(){return oe(q).default}});var z=M(26358);Object.defineProperty(L,"Hue",{enumerable:!0,get:function(){return oe(z).default}});var Z=M(96207);Object.defineProperty(L,"Raised",{enumerable:!0,get:function(){return oe(Z).default}});var te=M(76659);Object.defineProperty(L,"Saturation",{enumerable:!0,get:function(){return oe(te).default}});var Q=M(88288);Object.defineProperty(L,"ColorWrap",{enumerable:!0,get:function(){return oe(Q).default}});var de=M(62489);Object.defineProperty(L,"Swatch",{enumerable:!0,get:function(){return oe(de).default}});function oe(ie){return ie&&ie.__esModule?ie:{default:ie}}},99766:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Compact=void 0;var j=M(67294),R=fe(j),q=M(45697),z=fe(q),Z=M(79941),te=fe(Z),Q=M(35161),de=fe(Q),oe=M(82492),ie=fe(oe),re=M(64809),he=fe(re),De=M(1150),ue=M(49613),xe=fe(ue),ae=M(82018),ce=fe(ae);function fe(pe){return pe&&pe.__esModule?pe:{default:pe}}var Ee=L.Compact=function(Ae){var nt=Ae.onChange,G=Ae.onSwatchHover,Fe=Ae.colors,He=Ae.hex,et=Ae.rgb,Bt=Ae.styles,Mn=Bt===void 0?{}:Bt,ye=Ae.className,Ct=ye===void 0?"":ye,Pn=(0,te.default)((0,ie.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},Mn)),jt=function(qn,on){qn.hex?he.default.isValidHex(qn.hex)&&nt({hex:qn.hex,source:"hex"},on):nt(qn,on)};return R.default.createElement(De.Raised,{style:Pn.Compact,styles:Mn},R.default.createElement("div",{style:Pn.compact,className:"compact-picker "+Ct},R.default.createElement("div",null,(0,de.default)(Fe,function(cn){return R.default.createElement(xe.default,{key:cn,color:cn,active:cn.toLowerCase()===He,onClick:jt,onSwatchHover:G})}),R.default.createElement("div",{style:Pn.clear})),R.default.createElement(ce.default,{hex:He,rgb:et,onChange:jt})))};Ee.propTypes={colors:z.default.arrayOf(z.default.string),styles:z.default.object},Ee.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},L.default=(0,De.ColorWrap)(Ee)},49613:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.CompactColor=void 0;var j=M(67294),R=de(j),q=M(79941),z=de(q),Z=M(64809),te=de(Z),Q=M(1150);function de(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.CompactColor=function(re){var he=re.color,De=re.onClick,ue=De===void 0?function(){}:De,xe=re.onSwatchHover,ae=re.active,ce=(0,z.default)({default:{color:{background:he,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:te.default.getContrastingColor(he),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:ae,"color-#FFFFFF":he==="#FFFFFF",transparent:he==="transparent"});return R.default.createElement(Q.Swatch,{style:ce.color,color:he,onClick:ue,onHover:xe,focusStyle:{boxShadow:"0 0 4px "+he}},R.default.createElement("div",{style:ce.dot}))};L.default=oe},82018:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.CompactFields=void 0;var j=M(67294),R=te(j),q=M(79941),z=te(q),Z=M(1150);function te(de){return de&&de.__esModule?de:{default:de}}var Q=L.CompactFields=function(oe){var ie=oe.hex,re=oe.rgb,he=oe.onChange,De=(0,z.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:ie},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),ue=function(ae,ce){ae.r||ae.g||ae.b?he({r:ae.r||re.r,g:ae.g||re.g,b:ae.b||re.b,source:"rgb"},ce):he({hex:ae.hex,source:"hex"},ce)};return R.default.createElement("div",{style:De.fields,className:"flexbox-fix"},R.default.createElement("div",{style:De.active}),R.default.createElement(Z.EditableInput,{style:{wrap:De.HEXwrap,input:De.HEXinput,label:De.HEXlabel},label:"hex",value:ie,onChange:ue}),R.default.createElement(Z.EditableInput,{style:{wrap:De.RGBwrap,input:De.RGBinput,label:De.RGBlabel},label:"r",value:re.r,onChange:ue}),R.default.createElement(Z.EditableInput,{style:{wrap:De.RGBwrap,input:De.RGBinput,label:De.RGBlabel},label:"g",value:re.g,onChange:ue}),R.default.createElement(Z.EditableInput,{style:{wrap:De.RGBwrap,input:De.RGBinput,label:De.RGBlabel},label:"b",value:re.b,onChange:ue}))};L.default=Q},19700:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Github=void 0;var j=M(67294),R=ue(j),q=M(45697),z=ue(q),Z=M(79941),te=ue(Z),Q=M(35161),de=ue(Q),oe=M(82492),ie=ue(oe),re=M(1150),he=M(13255),De=ue(he);function ue(ae){return ae&&ae.__esModule?ae:{default:ae}}var xe=L.Github=function(ce){var fe=ce.width,Ee=ce.colors,pe=ce.onChange,Ae=ce.onSwatchHover,nt=ce.triangle,G=ce.styles,Fe=G===void 0?{}:G,He=ce.className,et=He===void 0?"":He,Bt=(0,te.default)((0,ie.default)({default:{card:{width:fe,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},Fe),{"hide-triangle":nt==="hide","top-left-triangle":nt==="top-left","top-right-triangle":nt==="top-right","bottom-left-triangle":nt==="bottom-left","bottom-right-triangle":nt==="bottom-right"}),Mn=function(Ct,Pn){return pe({hex:Ct,source:"hex"},Pn)};return R.default.createElement("div",{style:Bt.card,className:"github-picker "+et},R.default.createElement("div",{style:Bt.triangleShadow}),R.default.createElement("div",{style:Bt.triangle}),(0,de.default)(Ee,function(ye){return R.default.createElement(De.default,{color:ye,key:ye,onClick:Mn,onSwatchHover:Ae})}))};xe.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),colors:z.default.arrayOf(z.default.string),triangle:z.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:z.default.object},xe.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},L.default=(0,re.ColorWrap)(xe)},13255:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.GithubSwatch=void 0;var j=M(67294),R=te(j),q=M(79941),z=te(q),Z=M(1150);function te(de){return de&&de.__esModule?de:{default:de}}var Q=L.GithubSwatch=function(oe){var ie=oe.hover,re=oe.color,he=oe.onClick,De=oe.onSwatchHover,ue={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},xe=(0,z.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:ue}},{hover:ie});return R.default.createElement("div",{style:xe.swatch},R.default.createElement(Z.Swatch,{color:re,onClick:he,onHover:De,focusStyle:ue}))};L.default=(0,q.handleHover)(Q)},10565:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.HuePicker=void 0;var j=Object.assign||function(xe){for(var ae=1;ae<arguments.length;ae++){var ce=arguments[ae];for(var fe in ce)Object.prototype.hasOwnProperty.call(ce,fe)&&(xe[fe]=ce[fe])}return xe},R=M(67294),q=De(R),z=M(45697),Z=De(z),te=M(79941),Q=De(te),de=M(82492),oe=De(de),ie=M(1150),re=M(88878),he=De(re);function De(xe){return xe&&xe.__esModule?xe:{default:xe}}var ue=L.HuePicker=function(ae){var ce=ae.width,fe=ae.height,Ee=ae.onChange,pe=ae.hsl,Ae=ae.direction,nt=ae.pointer,G=ae.styles,Fe=G===void 0?{}:G,He=ae.className,et=He===void 0?"":He,Bt=(0,Q.default)((0,oe.default)({default:{picker:{position:"relative",width:ce,height:fe},hue:{radius:"2px"}}},Fe)),Mn=function(Ct){return Ee({a:1,h:Ct.h,l:.5,s:1})};return q.default.createElement("div",{style:Bt.picker,className:"hue-picker "+et},q.default.createElement(ie.Hue,j({},Bt.hue,{hsl:pe,pointer:nt,onChange:Mn,direction:Ae})))};ue.propTypes={styles:Z.default.object},ue.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:he.default,styles:{}},L.default=(0,ie.ColorWrap)(ue)},88878:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SliderPointer=void 0;var j=M(67294),R=Z(j),q=M(79941),z=Z(q);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.SliderPointer=function(de){var oe=de.direction,ie=(0,z.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:oe==="vertical"});return R.default.createElement("div",{style:ie.picker})};L.default=te},66142:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Material=void 0;var j=M(67294),R=ie(j),q=M(79941),z=ie(q),Z=M(82492),te=ie(Z),Q=M(64809),de=ie(Q),oe=M(1150);function ie(he){return he&&he.__esModule?he:{default:he}}var re=L.Material=function(De){var ue=De.onChange,xe=De.hex,ae=De.rgb,ce=De.styles,fe=ce===void 0?{}:ce,Ee=De.className,pe=Ee===void 0?"":Ee,Ae=(0,z.default)((0,te.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+xe,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},fe)),nt=function(Fe,He){Fe.hex?de.default.isValidHex(Fe.hex)&&ue({hex:Fe.hex,source:"hex"},He):(Fe.r||Fe.g||Fe.b)&&ue({r:Fe.r||ae.r,g:Fe.g||ae.g,b:Fe.b||ae.b,source:"rgb"},He)};return R.default.createElement(oe.Raised,{styles:fe},R.default.createElement("div",{style:Ae.material,className:"material-picker "+pe},R.default.createElement(oe.EditableInput,{style:{wrap:Ae.HEXwrap,input:Ae.HEXinput,label:Ae.HEXlabel},label:"hex",value:xe,onChange:nt}),R.default.createElement("div",{style:Ae.split,className:"flexbox-fix"},R.default.createElement("div",{style:Ae.third},R.default.createElement(oe.EditableInput,{style:{wrap:Ae.RGBwrap,input:Ae.RGBinput,label:Ae.RGBlabel},label:"r",value:ae.r,onChange:nt})),R.default.createElement("div",{style:Ae.third},R.default.createElement(oe.EditableInput,{style:{wrap:Ae.RGBwrap,input:Ae.RGBinput,label:Ae.RGBlabel},label:"g",value:ae.g,onChange:nt})),R.default.createElement("div",{style:Ae.third},R.default.createElement(oe.EditableInput,{style:{wrap:Ae.RGBwrap,input:Ae.RGBinput,label:Ae.RGBlabel},label:"b",value:ae.b,onChange:nt})))))};L.default=(0,oe.ColorWrap)(re)},33165:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Photoshop=void 0;var j=function(){function et(Bt,Mn){for(var ye=0;ye<Mn.length;ye++){var Ct=Mn[ye];Ct.enumerable=Ct.enumerable||!1,Ct.configurable=!0,"value"in Ct&&(Ct.writable=!0),Object.defineProperty(Bt,Ct.key,Ct)}}return function(Bt,Mn,ye){return Mn&&et(Bt.prototype,Mn),ye&&et(Bt,ye),Bt}}(),R=M(67294),q=Ae(R),z=M(45697),Z=Ae(z),te=M(79941),Q=Ae(te),de=M(82492),oe=Ae(de),ie=M(1150),re=M(21962),he=Ae(re),De=M(31804),ue=Ae(De),xe=M(40670),ae=Ae(xe),ce=M(10170),fe=Ae(ce),Ee=M(29628),pe=Ae(Ee);function Ae(et){return et&&et.__esModule?et:{default:et}}function nt(et,Bt){if(!(et instanceof Bt))throw new TypeError("Cannot call a class as a function")}function G(et,Bt){if(!et)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:et}function Fe(et,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);et.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:et,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(et,Bt):et.__proto__=Bt)}var He=L.Photoshop=function(et){Fe(Bt,et);function Bt(Mn){nt(this,Bt);var ye=G(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).call(this));return ye.state={currentColor:Mn.hex},ye}return j(Bt,[{key:"render",value:function(){var ye=this.props,Ct=ye.styles,Pn=Ct===void 0?{}:Ct,jt=ye.className,cn=jt===void 0?"":jt,qn=(0,Q.default)((0,oe.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},Pn));return q.default.createElement("div",{style:qn.picker,className:"photoshop-picker "+cn},q.default.createElement("div",{style:qn.head},this.props.header),q.default.createElement("div",{style:qn.body,className:"flexbox-fix"},q.default.createElement("div",{style:qn.saturation},q.default.createElement(ie.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:ue.default,onChange:this.props.onChange})),q.default.createElement("div",{style:qn.hue},q.default.createElement(ie.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:ae.default,onChange:this.props.onChange})),q.default.createElement("div",{style:qn.controls},q.default.createElement("div",{style:qn.top,className:"flexbox-fix"},q.default.createElement("div",{style:qn.previews},q.default.createElement(pe.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),q.default.createElement("div",{style:qn.actions},q.default.createElement(fe.default,{label:"OK",onClick:this.props.onAccept,active:!0}),q.default.createElement(fe.default,{label:"Cancel",onClick:this.props.onCancel}),q.default.createElement(he.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),Bt}(q.default.Component);He.propTypes={header:Z.default.string,styles:Z.default.object},He.defaultProps={header:"Color Picker",styles:{}},L.default=(0,ie.ColorWrap)(He)},10170:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopButton=void 0;var j=M(67294),R=Z(j),q=M(79941),z=Z(q);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.PhotoshopButton=function(de){var oe=de.onClick,ie=de.label,re=de.children,he=de.active,De=(0,z.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:he});return R.default.createElement("div",{style:De.button,onClick:oe},ie||re)};L.default=te},21962:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopPicker=void 0;var j=M(67294),R=de(j),q=M(79941),z=de(q),Z=M(64809),te=de(Z),Q=M(1150);function de(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.PhotoshopPicker=function(re){var he=re.onChange,De=re.rgb,ue=re.hsv,xe=re.hex,ae=(0,z.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),ce=function(Ee,pe){Ee["#"]?te.default.isValidHex(Ee["#"])&&he({hex:Ee["#"],source:"hex"},pe):Ee.r||Ee.g||Ee.b?he({r:Ee.r||De.r,g:Ee.g||De.g,b:Ee.b||De.b,source:"rgb"},pe):(Ee.h||Ee.s||Ee.v)&&he({h:Ee.h||ue.h,s:Ee.s||ue.s,v:Ee.v||ue.v,source:"hsv"},pe)};return R.default.createElement("div",{style:ae.fields},R.default.createElement(Q.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"h",value:Math.round(ue.h),onChange:ce}),R.default.createElement(Q.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"s",value:Math.round(ue.s*100),onChange:ce}),R.default.createElement(Q.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"v",value:Math.round(ue.v*100),onChange:ce}),R.default.createElement("div",{style:ae.divider}),R.default.createElement(Q.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"r",value:De.r,onChange:ce}),R.default.createElement(Q.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"g",value:De.g,onChange:ce}),R.default.createElement(Q.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"b",value:De.b,onChange:ce}),R.default.createElement("div",{style:ae.divider}),R.default.createElement(Q.EditableInput,{style:{wrap:ae.HEXwrap,input:ae.HEXinput,label:ae.HEXlabel},label:"#",value:xe.replace("#",""),onChange:ce}),R.default.createElement("div",{style:ae.fieldSymbols},R.default.createElement("div",{style:ae.symbol},"\xB0"),R.default.createElement("div",{style:ae.symbol},"%"),R.default.createElement("div",{style:ae.symbol},"%")))};L.default=oe},40670:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopPointerCircle=void 0;var j=M(67294),R=Z(j),q=M(79941),z=Z(q);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.PhotoshopPointerCircle=function(){var de=(0,z.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return R.default.createElement("div",{style:de.pointer},R.default.createElement("div",{style:de.left},R.default.createElement("div",{style:de.leftInside})),R.default.createElement("div",{style:de.right},R.default.createElement("div",{style:de.rightInside})))};L.default=te},31804:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopPointerCircle=void 0;var j=M(67294),R=Z(j),q=M(79941),z=Z(q);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.PhotoshopPointerCircle=function(de){var oe=de.hsl,ie=(0,z.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":oe.l>.5});return R.default.createElement("div",{style:ie.picker})};L.default=te},29628:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopPreviews=void 0;var j=M(67294),R=Z(j),q=M(79941),z=Z(q);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.PhotoshopPreviews=function(de){var oe=de.rgb,ie=de.currentColor,re=(0,z.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+oe.r+","+oe.g+", "+oe.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:ie,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return R.default.createElement("div",null,R.default.createElement("div",{style:re.label},"new"),R.default.createElement("div",{style:re.swatches},R.default.createElement("div",{style:re.new}),R.default.createElement("div",{style:re.current})),R.default.createElement("div",{style:re.label},"current"))};L.default=te},89753:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Sketch=void 0;var j=Object.assign||function(ce){for(var fe=1;fe<arguments.length;fe++){var Ee=arguments[fe];for(var pe in Ee)Object.prototype.hasOwnProperty.call(Ee,pe)&&(ce[pe]=Ee[pe])}return ce},R=M(67294),q=xe(R),z=M(45697),Z=xe(z),te=M(79941),Q=xe(te),de=M(82492),oe=xe(de),ie=M(1150),re=M(24530),he=xe(re),De=M(13067),ue=xe(De);function xe(ce){return ce&&ce.__esModule?ce:{default:ce}}var ae=L.Sketch=function(fe){var Ee=fe.width,pe=fe.rgb,Ae=fe.hex,nt=fe.hsv,G=fe.hsl,Fe=fe.onChange,He=fe.onSwatchHover,et=fe.disableAlpha,Bt=fe.presetColors,Mn=fe.renderers,ye=fe.styles,Ct=ye===void 0?{}:ye,Pn=fe.className,jt=Pn===void 0?"":Pn,cn=(0,Q.default)((0,oe.default)({default:j({picker:{width:Ee,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+pe.r+","+pe.g+","+pe.b+","+pe.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},Ct),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},Ct),{disableAlpha:et});return q.default.createElement("div",{style:cn.picker,className:"sketch-picker "+jt},q.default.createElement("div",{style:cn.saturation},q.default.createElement(ie.Saturation,{style:cn.Saturation,hsl:G,hsv:nt,onChange:Fe})),q.default.createElement("div",{style:cn.controls,className:"flexbox-fix"},q.default.createElement("div",{style:cn.sliders},q.default.createElement("div",{style:cn.hue},q.default.createElement(ie.Hue,{style:cn.Hue,hsl:G,onChange:Fe})),q.default.createElement("div",{style:cn.alpha},q.default.createElement(ie.Alpha,{style:cn.Alpha,rgb:pe,hsl:G,renderers:Mn,onChange:Fe}))),q.default.createElement("div",{style:cn.color},q.default.createElement(ie.Checkboard,null),q.default.createElement("div",{style:cn.activeColor}))),q.default.createElement(he.default,{rgb:pe,hsl:G,hex:Ae,onChange:Fe,disableAlpha:et}),q.default.createElement(ue.default,{colors:Bt,onClick:Fe,onSwatchHover:He}))};ae.propTypes={disableAlpha:Z.default.bool,width:Z.default.oneOfType([Z.default.string,Z.default.number]),styles:Z.default.object},ae.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},L.default=(0,ie.ColorWrap)(ae)},24530:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SketchFields=void 0;var j=M(67294),R=de(j),q=M(79941),z=de(q),Z=M(64809),te=de(Z),Q=M(1150);function de(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.SketchFields=function(re){var he=re.onChange,De=re.rgb,ue=re.hsl,xe=re.hex,ae=re.disableAlpha,ce=(0,z.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:ae}),fe=function(pe,Ae){pe.hex?te.default.isValidHex(pe.hex)&&he({hex:pe.hex,source:"hex"},Ae):pe.r||pe.g||pe.b?he({r:pe.r||De.r,g:pe.g||De.g,b:pe.b||De.b,a:De.a,source:"rgb"},Ae):pe.a&&(pe.a<0?pe.a=0:pe.a>100&&(pe.a=100),pe.a/=100,he({h:ue.h,s:ue.s,l:ue.l,a:pe.a,source:"rgb"},Ae))};return R.default.createElement("div",{style:ce.fields,className:"flexbox-fix"},R.default.createElement("div",{style:ce.double},R.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"hex",value:xe.replace("#",""),onChange:fe})),R.default.createElement("div",{style:ce.single},R.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"r",value:De.r,onChange:fe,dragLabel:"true",dragMax:"255"})),R.default.createElement("div",{style:ce.single},R.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"g",value:De.g,onChange:fe,dragLabel:"true",dragMax:"255"})),R.default.createElement("div",{style:ce.single},R.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"b",value:De.b,onChange:fe,dragLabel:"true",dragMax:"255"})),R.default.createElement("div",{style:ce.alpha},R.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"a",value:Math.round(De.a*100),onChange:fe,dragLabel:"true",dragMax:"100"})))};L.default=oe},13067:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SketchPresetColors=void 0;var j=Object.assign||function(re){for(var he=1;he<arguments.length;he++){var De=arguments[he];for(var ue in De)Object.prototype.hasOwnProperty.call(De,ue)&&(re[ue]=De[ue])}return re},R=M(67294),q=oe(R),z=M(45697),Z=oe(z),te=M(79941),Q=oe(te),de=M(1150);function oe(re){return re&&re.__esModule?re:{default:re}}var ie=L.SketchPresetColors=function(he){var De=he.colors,ue=he.onClick,xe=ue===void 0?function(){}:ue,ae=he.onSwatchHover,ce=(0,Q.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!De||!De.length}),fe=function(pe,Ae){xe({hex:pe,source:"hex"},Ae)};return q.default.createElement("div",{style:ce.colors,className:"flexbox-fix"},De.map(function(Ee){var pe=typeof Ee=="string"?{color:Ee}:Ee,Ae=""+pe.color+(pe.title||"");return q.default.createElement("div",{key:Ae,style:ce.swatchWrap},q.default.createElement(de.Swatch,j({},pe,{style:ce.swatch,onClick:fe,onHover:ae,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+pe.color}})))}))};ie.propTypes={colors:Z.default.arrayOf(Z.default.oneOfType([Z.default.string,Z.default.shape({color:Z.default.string,title:Z.default.string})])).isRequired},L.default=ie},49857:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Slider=void 0;var j=M(67294),R=ue(j),q=M(45697),z=ue(q),Z=M(79941),te=ue(Z),Q=M(82492),de=ue(Q),oe=M(1150),ie=M(6457),re=ue(ie),he=M(77792),De=ue(he);function ue(ae){return ae&&ae.__esModule?ae:{default:ae}}var xe=L.Slider=function(ce){var fe=ce.hsl,Ee=ce.onChange,pe=ce.pointer,Ae=ce.styles,nt=Ae===void 0?{}:Ae,G=ce.className,Fe=G===void 0?"":G,He=(0,te.default)((0,de.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},nt));return R.default.createElement("div",{style:He.wrap||{},className:"slider-picker "+Fe},R.default.createElement("div",{style:He.hue},R.default.createElement(oe.Hue,{style:He.Hue,hsl:fe,pointer:pe,onChange:Ee})),R.default.createElement("div",{style:He.swatches},R.default.createElement(re.default,{hsl:fe,onClick:Ee})))};xe.propTypes={styles:z.default.object},xe.defaultProps={pointer:De.default,styles:{}},L.default=(0,oe.ColorWrap)(xe)},77792:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SliderPointer=void 0;var j=M(67294),R=Z(j),q=M(79941),z=Z(q);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.SliderPointer=function(){var de=(0,z.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return R.default.createElement("div",{style:de.picker})};L.default=te},64377:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SliderSwatch=void 0;var j=M(67294),R=Z(j),q=M(79941),z=Z(q);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var te=L.SliderSwatch=function(de){var oe=de.hsl,ie=de.offset,re=de.onClick,he=re===void 0?function(){}:re,De=de.active,ue=de.first,xe=de.last,ae=(0,z.default)({default:{swatch:{height:"12px",background:"hsl("+oe.h+", 50%, "+ie*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:De,first:ue,last:xe}),ce=function(Ee){return he({h:oe.h,s:.5,l:ie,source:"hsl"},Ee)};return R.default.createElement("div",{style:ae.swatch,onClick:ce})};L.default=te},6457:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SliderSwatches=void 0;var j=M(67294),R=Q(j),q=M(79941),z=Q(q),Z=M(64377),te=Q(Z);function Q(oe){return oe&&oe.__esModule?oe:{default:oe}}var de=L.SliderSwatches=function(ie){var re=ie.onClick,he=ie.hsl,De=(0,z.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),ue=.1;return R.default.createElement("div",{style:De.swatches},R.default.createElement("div",{style:De.swatch},R.default.createElement(te.default,{hsl:he,offset:".80",active:Math.abs(he.l-.8)<ue&&Math.abs(he.s-.5)<ue,onClick:re,first:!0})),R.default.createElement("div",{style:De.swatch},R.default.createElement(te.default,{hsl:he,offset:".65",active:Math.abs(he.l-.65)<ue&&Math.abs(he.s-.5)<ue,onClick:re})),R.default.createElement("div",{style:De.swatch},R.default.createElement(te.default,{hsl:he,offset:".50",active:Math.abs(he.l-.5)<ue&&Math.abs(he.s-.5)<ue,onClick:re})),R.default.createElement("div",{style:De.swatch},R.default.createElement(te.default,{hsl:he,offset:".35",active:Math.abs(he.l-.35)<ue&&Math.abs(he.s-.5)<ue,onClick:re})),R.default.createElement("div",{style:De.swatch},R.default.createElement(te.default,{hsl:he,offset:".20",active:Math.abs(he.l-.2)<ue&&Math.abs(he.s-.5)<ue,onClick:re,last:!0})),R.default.createElement("div",{style:De.clear}))};L.default=de},93926:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Swatches=void 0;var j=M(67294),R=Ee(j),q=M(45697),z=Ee(q),Z=M(79941),te=Ee(Z),Q=M(35161),de=Ee(Q),oe=M(82492),ie=Ee(oe),re=M(64809),he=Ee(re),De=M(53893),ue=fe(De),xe=M(1150),ae=M(23088),ce=Ee(ae);function fe(Ae){if(Ae&&Ae.__esModule)return Ae;var nt={};if(Ae!=null)for(var G in Ae)Object.prototype.hasOwnProperty.call(Ae,G)&&(nt[G]=Ae[G]);return nt.default=Ae,nt}function Ee(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}var pe=L.Swatches=function(nt){var G=nt.width,Fe=nt.height,He=nt.onChange,et=nt.onSwatchHover,Bt=nt.colors,Mn=nt.hex,ye=nt.styles,Ct=ye===void 0?{}:ye,Pn=nt.className,jt=Pn===void 0?"":Pn,cn=(0,te.default)((0,ie.default)({default:{picker:{width:G,height:Fe},overflow:{height:Fe,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},Ct)),qn=function(lo,Zi){he.default.isValidHex(lo)&&He({hex:lo,source:"hex"},Zi)};return R.default.createElement("div",{style:cn.picker,className:"swatches-picker "+jt},R.default.createElement(xe.Raised,null,R.default.createElement("div",{style:cn.overflow},R.default.createElement("div",{style:cn.body},(0,de.default)(Bt,function(on){return R.default.createElement(ce.default,{key:on.toString(),group:on,active:Mn,onClick:qn,onSwatchHover:et})}),R.default.createElement("div",{style:cn.clear})))))};pe.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),height:z.default.oneOfType([z.default.string,z.default.number]),colors:z.default.arrayOf(z.default.arrayOf(z.default.string)),styles:z.default.object},pe.defaultProps={width:320,height:240,colors:[[ue.red["900"],ue.red["700"],ue.red["500"],ue.red["300"],ue.red["100"]],[ue.pink["900"],ue.pink["700"],ue.pink["500"],ue.pink["300"],ue.pink["100"]],[ue.purple["900"],ue.purple["700"],ue.purple["500"],ue.purple["300"],ue.purple["100"]],[ue.deepPurple["900"],ue.deepPurple["700"],ue.deepPurple["500"],ue.deepPurple["300"],ue.deepPurple["100"]],[ue.indigo["900"],ue.indigo["700"],ue.indigo["500"],ue.indigo["300"],ue.indigo["100"]],[ue.blue["900"],ue.blue["700"],ue.blue["500"],ue.blue["300"],ue.blue["100"]],[ue.lightBlue["900"],ue.lightBlue["700"],ue.lightBlue["500"],ue.lightBlue["300"],ue.lightBlue["100"]],[ue.cyan["900"],ue.cyan["700"],ue.cyan["500"],ue.cyan["300"],ue.cyan["100"]],[ue.teal["900"],ue.teal["700"],ue.teal["500"],ue.teal["300"],ue.teal["100"]],["#194D33",ue.green["700"],ue.green["500"],ue.green["300"],ue.green["100"]],[ue.lightGreen["900"],ue.lightGreen["700"],ue.lightGreen["500"],ue.lightGreen["300"],ue.lightGreen["100"]],[ue.lime["900"],ue.lime["700"],ue.lime["500"],ue.lime["300"],ue.lime["100"]],[ue.yellow["900"],ue.yellow["700"],ue.yellow["500"],ue.yellow["300"],ue.yellow["100"]],[ue.amber["900"],ue.amber["700"],ue.amber["500"],ue.amber["300"],ue.amber["100"]],[ue.orange["900"],ue.orange["700"],ue.orange["500"],ue.orange["300"],ue.orange["100"]],[ue.deepOrange["900"],ue.deepOrange["700"],ue.deepOrange["500"],ue.deepOrange["300"],ue.deepOrange["100"]],[ue.brown["900"],ue.brown["700"],ue.brown["500"],ue.brown["300"],ue.brown["100"]],[ue.blueGrey["900"],ue.blueGrey["700"],ue.blueGrey["500"],ue.blueGrey["300"],ue.blueGrey["100"]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},L.default=(0,xe.ColorWrap)(pe)},85638:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SwatchesColor=void 0;var j=M(67294),R=ie(j),q=M(79941),z=ie(q),Z=M(64809),te=ie(Z),Q=M(1150),de=M(70597),oe=ie(de);function ie(he){return he&&he.__esModule?he:{default:he}}var re=L.SwatchesColor=function(De){var ue=De.color,xe=De.onClick,ae=xe===void 0?function(){}:xe,ce=De.onSwatchHover,fe=De.first,Ee=De.last,pe=De.active,Ae=(0,z.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:ue,marginBottom:"1px"},check:{color:te.default.getContrastingColor(ue),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:fe,last:Ee,active:pe,"color-#FFFFFF":ue==="#FFFFFF",transparent:ue==="transparent"});return R.default.createElement(Q.Swatch,{color:ue,style:Ae.color,onClick:ae,onHover:ce,focusStyle:{boxShadow:"0 0 4px "+ue}},R.default.createElement("div",{style:Ae.check},R.default.createElement(oe.default,null)))};L.default=re},23088:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SwatchesGroup=void 0;var j=M(67294),R=oe(j),q=M(79941),z=oe(q),Z=M(35161),te=oe(Z),Q=M(85638),de=oe(Q);function oe(re){return re&&re.__esModule?re:{default:re}}var ie=L.SwatchesGroup=function(he){var De=he.onClick,ue=he.onSwatchHover,xe=he.group,ae=he.active,ce=(0,z.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return R.default.createElement("div",{style:ce.group},(0,te.default)(xe,function(fe,Ee){return R.default.createElement(de.default,{key:fe,color:fe,active:fe.toLowerCase()===ae,first:Ee===0,last:Ee===xe.length-1,onClick:De,onSwatchHover:ue})}))};L.default=ie},64503:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Twitter=void 0;var j=M(67294),R=ue(j),q=M(45697),z=ue(q),Z=M(79941),te=ue(Z),Q=M(35161),de=ue(Q),oe=M(82492),ie=ue(oe),re=M(64809),he=ue(re),De=M(1150);function ue(ae){return ae&&ae.__esModule?ae:{default:ae}}var xe=L.Twitter=function(ce){var fe=ce.onChange,Ee=ce.onSwatchHover,pe=ce.hex,Ae=ce.colors,nt=ce.width,G=ce.triangle,Fe=ce.styles,He=Fe===void 0?{}:Fe,et=ce.className,Bt=et===void 0?"":et,Mn=(0,te.default)((0,ie.default)({default:{card:{width:nt,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},He),{"hide-triangle":G==="hide","top-left-triangle":G==="top-left","top-right-triangle":G==="top-right"}),ye=function(Pn,jt){he.default.isValidHex(Pn)&&fe({hex:Pn,source:"hex"},jt)};return R.default.createElement("div",{style:Mn.card,className:"twitter-picker "+Bt},R.default.createElement("div",{style:Mn.triangleShadow}),R.default.createElement("div",{style:Mn.triangle}),R.default.createElement("div",{style:Mn.body},(0,de.default)(Ae,function(Ct,Pn){return R.default.createElement(De.Swatch,{key:Pn,color:Ct,hex:Ct,style:Mn.swatch,onClick:ye,onHover:Ee,focusStyle:{boxShadow:"0 0 4px "+Ct}})}),R.default.createElement("div",{style:Mn.hash},"#"),R.default.createElement(De.EditableInput,{style:{input:Mn.input},value:pe.replace("#",""),onChange:ye}),R.default.createElement("div",{style:Mn.clear})))};xe.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),triangle:z.default.oneOf(["hide","top-left","top-right"]),colors:z.default.arrayOf(z.default.string),styles:z.default.object},xe.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},L.default=(0,De.ColorWrap)(xe)},66713:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M=L.calculateChange=function(R,q,z,Z,te){R.preventDefault();var Q=te.clientWidth,de=te.clientHeight,oe=typeof R.pageX=="number"?R.pageX:R.touches[0].pageX,ie=typeof R.pageY=="number"?R.pageY:R.touches[0].pageY,re=oe-(te.getBoundingClientRect().left+window.pageXOffset),he=ie-(te.getBoundingClientRect().top+window.pageYOffset);if(z==="vertical"){var De=void 0;if(he<0?De=0:he>de?De=1:De=Math.round(he*100/de)/100,q.a!==De)return{h:q.h,s:q.s,l:q.l,a:De,source:"rgb"}}else{var ue=void 0;if(re<0?ue=0:re>Q?ue=1:ue=Math.round(re*100/Q)/100,Z!==ue)return{h:q.h,s:q.s,l:q.l,a:ue,source:"rgb"}}return null}},45704:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M={},j=L.render=function(z,Z,te,Q){if(typeof document>"u"&&!Q)return null;var de=Q?new Q:document.createElement("canvas");de.width=te*2,de.height=te*2;var oe=de.getContext("2d");return oe?(oe.fillStyle=z,oe.fillRect(0,0,de.width,de.height),oe.fillStyle=Z,oe.fillRect(0,0,te,te),oe.translate(te,te),oe.fillRect(0,0,te,te),de.toDataURL()):null},R=L.get=function(z,Z,te,Q){var de=z+"-"+Z+"-"+te+(Q?"-server":"");if(M[de])return M[de];var oe=j(z,Z,te,Q);return M[de]=oe,oe}},64809:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.red=void 0;var j=M(66073),R=Z(j),q=M(17621),z=Z(q);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}L.default={simpleCheckForValidColor:function(de){var oe=["r","g","b","a","h","s","l","v"],ie=0,re=0;return(0,R.default)(oe,function(he){if(de[he]&&(ie+=1,isNaN(de[he])||(re+=1),he==="s"||he==="l")){var De=/^\d+%$/;De.test(de[he])&&(re+=1)}}),ie===re?de:!1},toState:function(de,oe){var ie=de.hex?(0,z.default)(de.hex):(0,z.default)(de),re=ie.toHsl(),he=ie.toHsv(),De=ie.toRgb(),ue=ie.toHex();re.s===0&&(re.h=oe||0,he.h=oe||0);var xe=ue==="000000"&&De.a===0;return{hsl:re,hex:xe?"transparent":"#"+ue,rgb:De,hsv:he,oldHue:de.h||oe||re.h,source:de.source}},isValidHex:function(de){var oe=String(de).charAt(0)==="#"?1:0;return de.length!==4+oe&&de.length<7+oe&&(0,z.default)(de).isValid()},getContrastingColor:function(de){if(!de)return"#fff";var oe=this.toState(de);if(oe.hex==="transparent")return"rgba(0,0,0,0.4)";var ie=(oe.rgb.r*299+oe.rgb.g*587+oe.rgb.b*114)/1e3;return ie>=128?"#000":"#fff"}};var te=L.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},33716:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M=L.calculateChange=function(R,q,z,Z){R.preventDefault();var te=Z.clientWidth,Q=Z.clientHeight,de=typeof R.pageX=="number"?R.pageX:R.touches[0].pageX,oe=typeof R.pageY=="number"?R.pageY:R.touches[0].pageY,ie=de-(Z.getBoundingClientRect().left+window.pageXOffset),re=oe-(Z.getBoundingClientRect().top+window.pageYOffset);if(q==="vertical"){var he=void 0;if(re<0)he=359;else if(re>Q)he=0;else{var De=-(re*100/Q)+100;he=360*De/100}if(z.h!==he)return{h:he,s:z.s,l:z.l,a:z.a,source:"rgb"}}else{var ue=void 0;if(ie<0)ue=0;else if(ie>te)ue=359;else{var xe=ie*100/te;ue=360*xe/100}if(z.h!==ue)return{h:ue,s:z.s,l:z.l,a:z.a,source:"rgb"}}return null}},82538:function(Ne,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.handleFocus=void 0;var j=Object.assign||function(ie){for(var re=1;re<arguments.length;re++){var he=arguments[re];for(var De in he)Object.prototype.hasOwnProperty.call(he,De)&&(ie[De]=he[De])}return ie},R=function(){function ie(re,he){for(var De=0;De<he.length;De++){var ue=he[De];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(re,ue.key,ue)}}return function(re,he,De){return he&&ie(re.prototype,he),De&&ie(re,De),re}}(),q=M(67294),z=Z(q);function Z(ie){return ie&&ie.__esModule?ie:{default:ie}}function te(ie,re){if(!(ie instanceof re))throw new TypeError("Cannot call a class as a function")}function Q(ie,re){if(!ie)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:ie}function de(ie,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);ie.prototype=Object.create(re&&re.prototype,{constructor:{value:ie,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(ie,re):ie.__proto__=re)}var oe=L.handleFocus=function(re){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(De){de(ue,De);function ue(){var xe,ae,ce,fe;te(this,ue);for(var Ee=arguments.length,pe=Array(Ee),Ae=0;Ae<Ee;Ae++)pe[Ae]=arguments[Ae];return fe=(ae=(ce=Q(this,(xe=ue.__proto__||Object.getPrototypeOf(ue)).call.apply(xe,[this].concat(pe))),ce),ce.state={focus:!1},ce.handleFocus=function(){return ce.setState({focus:!0})},ce.handleBlur=function(){return ce.setState({focus:!1})},ae),Q(ce,fe)}return R(ue,[{key:"render",value:function(){return z.default.createElement(he,{onFocus:this.handleFocus,onBlur:this.handleBlur},z.default.createElement(re,j({},this.props,this.state)))}}]),ue}(z.default.Component)}},37599:function(Ne,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M=L.calculateChange=function(R,q,z){R.preventDefault();var Z=z.getBoundingClientRect(),te=Z.width,Q=Z.height,de=typeof R.pageX=="number"?R.pageX:R.touches[0].pageX,oe=typeof R.pageY=="number"?R.pageY:R.touches[0].pageY,ie=de-(z.getBoundingClientRect().left+window.pageXOffset),re=oe-(z.getBoundingClientRect().top+window.pageYOffset);ie<0?ie=0:ie>te?ie=te:re<0?re=0:re>Q&&(re=Q);var he=ie*100/te,De=-(re*100/Q)+100;return{h:q.h,s:he,v:De,a:q.a,source:"rgb"}}},24198:function(Ne,L,M){"use strict";var j;j={value:!0},j=j=j=j=L.xS=j=j=j=j=j=j=j=j=j=j=void 0;var R=M(9563);j={enumerable:!0,get:function(){return ce(R).default}};var q=M(88858);j={enumerable:!0,get:function(){return ce(q).default}};var z=M(9703);j={enumerable:!0,get:function(){return ce(z).default}};var Z=M(21847);j={enumerable:!0,get:function(){return ce(Z).default}};var te=M(99766);j={enumerable:!0,get:function(){return ce(te).default}};var Q=M(19700);j={enumerable:!0,get:function(){return ce(Q).default}};var de=M(10565);j={enumerable:!0,get:function(){return ce(de).default}};var oe=M(66142);j={enumerable:!0,get:function(){return ce(oe).default}};var ie=M(33165);j={enumerable:!0,get:function(){return ce(ie).default}};var re=M(89753);Object.defineProperty(L,"xS",{enumerable:!0,get:function(){return ce(re).default}});var he=M(49857);j={enumerable:!0,get:function(){return ce(he).default}};var De=M(93926);j={enumerable:!0,get:function(){return ce(De).default}};var ue=M(64503);j={enumerable:!0,get:function(){return ce(ue).default}};var xe=M(88288);j={enumerable:!0,get:function(){return ce(xe).default}};var ae=ce(Z);function ce(fe){return fe&&fe.__esModule?fe:{default:fe}}j=ae.default},28660:function(Ne,L,M){var j=M(34155);var R;(function(q){(function(z){var Z=typeof M.g=="object"?M.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),te=Q(q);typeof Z.Reflect>"u"?Z.Reflect=q:te=Q(Z.Reflect,te),z(te);function Q(de,oe){return function(ie,re){typeof de[ie]!="function"&&Object.defineProperty(de,ie,{configurable:!0,writable:!0,value:re}),oe&&oe(ie,re)}}})(function(z){var Z=Object.prototype.hasOwnProperty,te=typeof Symbol=="function",Q=te&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",de=te&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",oe=typeof Object.create=="function",ie={__proto__:[]}instanceof Array,re=!oe&&!ie,he={create:oe?function(){return Wa(Object.create(null))}:ie?function(){return Wa({__proto__:null})}:function(){return Wa({})},has:re?function(At,Jt){return Z.call(At,Jt)}:function(At,Jt){return Jt in At},get:re?function(At,Jt){return Z.call(At,Jt)?At[Jt]:void 0}:function(At,Jt){return At[Jt]}},De=Object.getPrototypeOf(Function),ue=typeof j=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",xe=!ue&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ua(),ae=!ue&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:il(),ce=!ue&&typeof WeakMap=="function"?WeakMap:Ro(),fe=new ce;function Ee(At,Jt,Mt,un){if(lr(Mt)){if(!Zo(At))throw new TypeError;if(!Hi(Jt))throw new TypeError;return ye(At,Jt)}else{if(!Zo(At))throw new TypeError;if(!Bi(Jt))throw new TypeError;if(!Bi(un)&&!lr(un)&&!Ir(un))throw new TypeError;return Ir(un)&&(un=void 0),Mt=bs(Mt),Ct(At,Jt,Mt,un)}}z("decorate",Ee);function pe(At,Jt){function Mt(un,Qn){if(!Bi(un))throw new TypeError;if(!lr(Qn)&&!xi(Qn))throw new TypeError;lo(At,Jt,un,Qn)}return Mt}z("metadata",pe);function Ae(At,Jt,Mt,un){if(!Bi(Mt))throw new TypeError;return lr(un)||(un=bs(un)),lo(At,Jt,Mt,un)}z("defineMetadata",Ae);function nt(At,Jt,Mt){if(!Bi(Jt))throw new TypeError;return lr(Mt)||(Mt=bs(Mt)),jt(At,Jt,Mt)}z("hasMetadata",nt);function G(At,Jt,Mt){if(!Bi(Jt))throw new TypeError;return lr(Mt)||(Mt=bs(Mt)),cn(At,Jt,Mt)}z("hasOwnMetadata",G);function Fe(At,Jt,Mt){if(!Bi(Jt))throw new TypeError;return lr(Mt)||(Mt=bs(Mt)),qn(At,Jt,Mt)}z("getMetadata",Fe);function He(At,Jt,Mt){if(!Bi(Jt))throw new TypeError;return lr(Mt)||(Mt=bs(Mt)),on(At,Jt,Mt)}z("getOwnMetadata",He);function et(At,Jt){if(!Bi(At))throw new TypeError;return lr(Jt)||(Jt=bs(Jt)),Zi(At,Jt)}z("getMetadataKeys",et);function Bt(At,Jt){if(!Bi(At))throw new TypeError;return lr(Jt)||(Jt=bs(Jt)),Xn(At,Jt)}z("getOwnMetadataKeys",Bt);function Mn(At,Jt,Mt){if(!Bi(Jt))throw new TypeError;lr(Mt)||(Mt=bs(Mt));var un=Pn(Jt,Mt,!1);if(lr(un)||!un.delete(At))return!1;if(un.size>0)return!0;var Qn=fe.get(Jt);return Qn.delete(Mt),Qn.size>0||fe.delete(Jt),!0}z("deleteMetadata",Mn);function ye(At,Jt){for(var Mt=At.length-1;Mt>=0;--Mt){var un=At[Mt],Qn=un(Jt);if(!lr(Qn)&&!Ir(Qn)){if(!Hi(Qn))throw new TypeError;Jt=Qn}}return Jt}function Ct(At,Jt,Mt,un){for(var Qn=At.length-1;Qn>=0;--Qn){var zi=At[Qn],Lr=zi(Jt,Mt,un);if(!lr(Lr)&&!Ir(Lr)){if(!Bi(Lr))throw new TypeError;un=Lr}}return un}function Pn(At,Jt,Mt){var un=fe.get(At);if(lr(un)){if(!Mt)return;un=new xe,fe.set(At,un)}var Qn=un.get(Jt);if(lr(Qn)){if(!Mt)return;Qn=new xe,un.set(Jt,Qn)}return Qn}function jt(At,Jt,Mt){var un=cn(At,Jt,Mt);if(un)return!0;var Qn=ur(Jt);return Ir(Qn)?!1:jt(At,Qn,Mt)}function cn(At,Jt,Mt){var un=Pn(Jt,Mt,!1);return lr(un)?!1:Ts(un.has(At))}function qn(At,Jt,Mt){var un=cn(At,Jt,Mt);if(un)return on(At,Jt,Mt);var Qn=ur(Jt);if(!Ir(Qn))return qn(At,Qn,Mt)}function on(At,Jt,Mt){var un=Pn(Jt,Mt,!1);if(!lr(un))return un.get(At)}function lo(At,Jt,Mt,un){var Qn=Pn(Mt,un,!0);Qn.set(At,Jt)}function Zi(At,Jt){var Mt=Xn(At,Jt),un=ur(At);if(un===null)return Mt;var Qn=Zi(un,Jt);if(Qn.length<=0)return Mt;if(Mt.length<=0)return Qn;for(var zi=new ae,Lr=[],jr=0,Sr=Mt;jr<Sr.length;jr++){var qr=Sr[jr],Xr=zi.has(qr);Xr||(zi.add(qr),Lr.push(qr))}for(var ko=0,Bc=Qn;ko<Bc.length;ko++){var qr=Bc[ko],Xr=zi.has(qr);Xr||(zi.add(qr),Lr.push(qr))}return Lr}function Xn(At,Jt){var Mt=[],un=Pn(At,Jt,!1);if(lr(un))return Mt;for(var Qn=un.keys(),zi=H(Qn),Lr=0;;){var jr=Oe(zi);if(!jr)return Mt.length=Lr,Mt;var Sr=mf(jr);try{Mt[Lr]=Sr}catch(qr){try{ac(zi)}finally{throw qr}}Lr++}}function Ar(At){if(At===null)return 1;switch(typeof At){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return At===null?1:6;default:return 6}}function lr(At){return At===void 0}function Ir(At){return At===null}function Oi(At){return typeof At=="symbol"}function Bi(At){return typeof At=="object"?At!==null:typeof At=="function"}function Kr(At,Jt){switch(Ar(At)){case 0:return At;case 1:return At;case 2:return At;case 3:return At;case 4:return At;case 5:return At}var Mt=Jt===3?"string":Jt===5?"number":"default",un=F(At,Q);if(un!==void 0){var Qn=un.call(At,Mt);if(Bi(Qn))throw new TypeError;return Qn}return eo(At,Mt==="default"?"number":Mt)}function eo(At,Jt){if(Jt==="string"){var Mt=At.toString;if(oi(Mt)){var un=Mt.call(At);if(!Bi(un))return un}var Qn=At.valueOf;if(oi(Qn)){var un=Qn.call(At);if(!Bi(un))return un}}else{var Qn=At.valueOf;if(oi(Qn)){var un=Qn.call(At);if(!Bi(un))return un}var zi=At.toString;if(oi(zi)){var un=zi.call(At);if(!Bi(un))return un}}throw new TypeError}function Ts(At){return!!At}function Ks(At){return""+At}function bs(At){var Jt=Kr(At,3);return Oi(Jt)?Jt:Ks(Jt)}function Zo(At){return Array.isArray?Array.isArray(At):At instanceof Object?At instanceof Array:Object.prototype.toString.call(At)==="[object Array]"}function oi(At){return typeof At=="function"}function Hi(At){return typeof At=="function"}function xi(At){switch(Ar(At)){case 3:return!0;case 4:return!0;default:return!1}}function F(At,Jt){var Mt=At[Jt];if(Mt!=null){if(!oi(Mt))throw new TypeError;return Mt}}function H(At){var Jt=F(At,de);if(!oi(Jt))throw new TypeError;var Mt=Jt.call(At);if(!Bi(Mt))throw new TypeError;return Mt}function mf(At){return At.value}function Oe(At){var Jt=At.next();return Jt.done?!1:Jt}function ac(At){var Jt=At.return;Jt&&Jt.call(At)}function ur(At){var Jt=Object.getPrototypeOf(At);if(typeof At!="function"||At===De||Jt!==De)return Jt;var Mt=At.prototype,un=Mt&&Object.getPrototypeOf(Mt);if(un==null||un===Object.prototype)return Jt;var Qn=un.constructor;return typeof Qn!="function"||Qn===At?Jt:Qn}function ua(){var At={},Jt=[],Mt=function(){function Lr(jr,Sr,qr){this._index=0,this._keys=jr,this._values=Sr,this._selector=qr}return Lr.prototype["@@iterator"]=function(){return this},Lr.prototype[de]=function(){return this},Lr.prototype.next=function(){var jr=this._index;if(jr>=0&&jr<this._keys.length){var Sr=this._selector(this._keys[jr],this._values[jr]);return jr+1>=this._keys.length?(this._index=-1,this._keys=Jt,this._values=Jt):this._index++,{value:Sr,done:!1}}return{value:void 0,done:!0}},Lr.prototype.throw=function(jr){throw this._index>=0&&(this._index=-1,this._keys=Jt,this._values=Jt),jr},Lr.prototype.return=function(jr){return this._index>=0&&(this._index=-1,this._keys=Jt,this._values=Jt),{value:jr,done:!0}},Lr}();return function(){function Lr(){this._keys=[],this._values=[],this._cacheKey=At,this._cacheIndex=-2}return Object.defineProperty(Lr.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Lr.prototype.has=function(jr){return this._find(jr,!1)>=0},Lr.prototype.get=function(jr){var Sr=this._find(jr,!1);return Sr>=0?this._values[Sr]:void 0},Lr.prototype.set=function(jr,Sr){var qr=this._find(jr,!0);return this._values[qr]=Sr,this},Lr.prototype.delete=function(jr){var Sr=this._find(jr,!1);if(Sr>=0){for(var qr=this._keys.length,Xr=Sr+1;Xr<qr;Xr++)this._keys[Xr-1]=this._keys[Xr],this._values[Xr-1]=this._values[Xr];return this._keys.length--,this._values.length--,jr===this._cacheKey&&(this._cacheKey=At,this._cacheIndex=-2),!0}return!1},Lr.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=At,this._cacheIndex=-2},Lr.prototype.keys=function(){return new Mt(this._keys,this._values,un)},Lr.prototype.values=function(){return new Mt(this._keys,this._values,Qn)},Lr.prototype.entries=function(){return new Mt(this._keys,this._values,zi)},Lr.prototype["@@iterator"]=function(){return this.entries()},Lr.prototype[de]=function(){return this.entries()},Lr.prototype._find=function(jr,Sr){return this._cacheKey!==jr&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=jr)),this._cacheIndex<0&&Sr&&(this._cacheIndex=this._keys.length,this._keys.push(jr),this._values.push(void 0)),this._cacheIndex},Lr}();function un(Lr,jr){return Lr}function Qn(Lr,jr){return jr}function zi(Lr,jr){return[Lr,jr]}}function il(){return function(){function At(){this._map=new xe}return Object.defineProperty(At.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),At.prototype.has=function(Jt){return this._map.has(Jt)},At.prototype.add=function(Jt){return this._map.set(Jt,Jt),this},At.prototype.delete=function(Jt){return this._map.delete(Jt)},At.prototype.clear=function(){this._map.clear()},At.prototype.keys=function(){return this._map.keys()},At.prototype.values=function(){return this._map.values()},At.prototype.entries=function(){return this._map.entries()},At.prototype["@@iterator"]=function(){return this.keys()},At.prototype[de]=function(){return this.keys()},At}()}function Ro(){var At=16,Jt=he.create(),Mt=un();return function(){function Sr(){this._key=un()}return Sr.prototype.has=function(qr){var Xr=Qn(qr,!1);return Xr!==void 0?he.has(Xr,this._key):!1},Sr.prototype.get=function(qr){var Xr=Qn(qr,!1);return Xr!==void 0?he.get(Xr,this._key):void 0},Sr.prototype.set=function(qr,Xr){var ko=Qn(qr,!0);return ko[this._key]=Xr,this},Sr.prototype.delete=function(qr){var Xr=Qn(qr,!1);return Xr!==void 0?delete Xr[this._key]:!1},Sr.prototype.clear=function(){this._key=un()},Sr}();function un(){var Sr;do Sr="@@WeakMap@@"+jr();while(he.has(Jt,Sr));return Jt[Sr]=!0,Sr}function Qn(Sr,qr){if(!Z.call(Sr,Mt)){if(!qr)return;Object.defineProperty(Sr,Mt,{value:he.create()})}return Sr[Mt]}function zi(Sr,qr){for(var Xr=0;Xr<qr;++Xr)Sr[Xr]=Math.random()*255|0;return Sr}function Lr(Sr){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(Sr)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(Sr)):zi(new Uint8Array(Sr),Sr):zi(new Array(Sr),Sr)}function jr(){var Sr=Lr(At);Sr[6]=Sr[6]&79|64,Sr[8]=Sr[8]&191|128;for(var qr="",Xr=0;Xr<At;++Xr){var ko=Sr[Xr];(Xr===4||Xr===6||Xr===8)&&(qr+="-"),ko<16&&(qr+="0"),qr+=ko.toString(16).toLowerCase()}return qr}}function Wa(At){return At.__=void 0,delete At.__,At}})})(R||(R={}))},81550:function(Ne){(function(L,M){Ne.exports=M()})(this,function(){"use strict";var L=function(K){return K instanceof Uint8Array||K instanceof Uint16Array||K instanceof Uint32Array||K instanceof Int8Array||K instanceof Int16Array||K instanceof Int32Array||K instanceof Float32Array||K instanceof Float64Array||K instanceof Uint8ClampedArray},M=function(K,Pe){for(var ze=Object.keys(Pe),Et=0;Et<ze.length;++Et)K[ze[Et]]=Pe[ze[Et]];return K},j=`
`;function R(K){return typeof atob<"u"?atob(K):"base64:"+K}function q(K){var Pe=new Error("(regl) "+K);throw console.error(Pe),Pe}function z(K,Pe){K||q(Pe)}function Z(K){return K?": "+K:""}function te(K,Pe,ze){K in Pe||q("unknown parameter ("+K+")"+Z(ze)+". possible values: "+Object.keys(Pe).join())}function Q(K,Pe){L(K)||q("invalid parameter type"+Z(Pe)+". must be a typed array")}function de(K,Pe){switch(Pe){case"number":return typeof K=="number";case"object":return typeof K=="object";case"string":return typeof K=="string";case"boolean":return typeof K=="boolean";case"function":return typeof K=="function";case"undefined":return typeof K>"u";case"symbol":return typeof K=="symbol"}}function oe(K,Pe,ze){de(K,Pe)||q("invalid parameter type"+Z(ze)+". expected "+Pe+", got "+typeof K)}function ie(K,Pe){K>=0&&(K|0)===K||q("invalid parameter type, ("+K+")"+Z(Pe)+". must be a nonnegative integer")}function re(K,Pe,ze){Pe.indexOf(K)<0&&q("invalid value"+Z(ze)+". must be one of: "+Pe)}var he=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function De(K){Object.keys(K).forEach(function(Pe){he.indexOf(Pe)<0&&q('invalid regl constructor argument "'+Pe+'". must be one of '+he)})}function ue(K,Pe){for(K=K+"";K.length<Pe;)K=" "+K;return K}function xe(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function ae(K,Pe){this.number=K,this.line=Pe,this.errors=[]}function ce(K,Pe,ze){this.file=K,this.line=Pe,this.message=ze}function fe(){var K=new Error,Pe=(K.stack||K).toString(),ze=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Pe);if(ze)return ze[1];var Et=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Pe);return Et?Et[1]:"unknown"}function Ee(){var K=new Error,Pe=(K.stack||K).toString(),ze=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Pe);if(ze)return ze[1];var Et=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Pe);return Et?Et[1]:"unknown"}function pe(K,Pe){var ze=K.split(`
`),Et=1,ft=0,xt={unknown:new xe,0:new xe};xt.unknown.name=xt[0].name=Pe||fe(),xt.unknown.lines.push(new ae(0,""));for(var It=0;It<ze.length;++It){var en=ze[It],hn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(en);if(hn)switch(hn[1]){case"line":var pn=/(\d+)(\s+\d+)?/.exec(hn[2]);pn&&(Et=pn[1]|0,pn[2]&&(ft=pn[2]|0,ft in xt||(xt[ft]=new xe)));break;case"define":var fn=/SHADER_NAME(_B64)?\s+(.*)$/.exec(hn[2]);fn&&(xt[ft].name=fn[1]?R(fn[2]):fn[2]);break}xt[ft].lines.push(new ae(Et++,en))}return Object.keys(xt).forEach(function(sn){var Nn=xt[sn];Nn.lines.forEach(function(ln){Nn.index[ln.number]=ln})}),xt}function Ae(K){var Pe=[];return K.split(`
`).forEach(function(ze){if(!(ze.length<5)){var Et=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(ze);Et?Pe.push(new ce(Et[1]|0,Et[2]|0,Et[3].trim())):ze.length>0&&Pe.push(new ce("unknown",0,ze))}}),Pe}function nt(K,Pe){Pe.forEach(function(ze){var Et=K[ze.file];if(Et){var ft=Et.index[ze.line];if(ft){ft.errors.push(ze),Et.hasErrors=!0;return}}K.unknown.hasErrors=!0,K.unknown.lines[0].errors.push(ze)})}function G(K,Pe,ze,Et,ft){if(!K.getShaderParameter(Pe,K.COMPILE_STATUS)){var xt=K.getShaderInfoLog(Pe),It=Et===K.FRAGMENT_SHADER?"fragment":"vertex";Ct(ze,"string",It+" shader source must be a string",ft);var en=pe(ze,ft),hn=Ae(xt);nt(en,hn),Object.keys(en).forEach(function(pn){var fn=en[pn];if(!fn.hasErrors)return;var sn=[""],Nn=[""];function ln(En,ht){sn.push(En),Nn.push(ht||"")}ln("file number "+pn+": "+fn.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),fn.lines.forEach(function(En){if(En.errors.length>0){ln(ue(En.number,4)+"|  ","background-color:yellow; font-weight:bold"),ln(En.line+j,"color:red; background-color:yellow; font-weight:bold");var ht=0;En.errors.forEach(function(Rt){var vn=Rt.message,zn=/^\s*'(.*)'\s*:\s*(.*)$/.exec(vn);if(zn){var tn=zn[1];switch(vn=zn[2],tn){case"assign":tn="=";break}ht=Math.max(En.line.indexOf(tn,ht),0)}else ht=0;ln(ue("| ",6)),ln(ue("^^^",ht+3)+j,"font-weight:bold"),ln(ue("| ",6)),ln(vn+j,"font-weight:bold")}),ln(ue("| ",6)+j)}else ln(ue(En.number,4)+"|  "),ln(En.line+j,"color:red")}),typeof document<"u"&&!window.chrome?(Nn[0]=sn.join("%c"),console.log.apply(console,Nn)):console.log(sn.join(""))}),z.raise("Error compiling "+It+" shader, "+en[0].name)}}function Fe(K,Pe,ze,Et,ft){if(!K.getProgramParameter(Pe,K.LINK_STATUS)){var xt=K.getProgramInfoLog(Pe),It=pe(ze,ft),en=pe(Et,ft),hn='Error linking program with vertex shader, "'+en[0].name+'", and fragment shader "'+It[0].name+'"';typeof document<"u"?console.log("%c"+hn+j+"%c"+xt,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(hn+j+xt),z.raise(hn)}}function He(K){K._commandRef=fe()}function et(K,Pe,ze,Et){He(K);function ft(hn){return hn?Et.id(hn):0}K._fragId=ft(K.static.frag),K._vertId=ft(K.static.vert);function xt(hn,pn){Object.keys(pn).forEach(function(fn){hn[Et.id(fn)]=!0})}var It=K._uniformSet={};xt(It,Pe.static),xt(It,Pe.dynamic);var en=K._attributeSet={};xt(en,ze.static),xt(en,ze.dynamic),K._hasCount="count"in K.static||"count"in K.dynamic||"elements"in K.static||"elements"in K.dynamic}function Bt(K,Pe){var ze=Ee();q(K+" in command "+(Pe||fe())+(ze==="unknown"?"":" called from "+ze))}function Mn(K,Pe,ze){K||Bt(Pe,ze||fe())}function ye(K,Pe,ze,Et){K in Pe||Bt("unknown parameter ("+K+")"+Z(ze)+". possible values: "+Object.keys(Pe).join(),Et||fe())}function Ct(K,Pe,ze,Et){de(K,Pe)||Bt("invalid parameter type"+Z(ze)+". expected "+Pe+", got "+typeof K,Et||fe())}function Pn(K){K()}function jt(K,Pe,ze){K.texture?re(K.texture._texture.internalformat,Pe,"unsupported texture format for attachment"):re(K.renderbuffer._renderbuffer.format,ze,"unsupported renderbuffer format for attachment")}var cn=33071,qn=9728,on=9984,lo=9985,Zi=9986,Xn=9987,Ar=5120,lr=5121,Ir=5122,Oi=5123,Bi=5124,Kr=5125,eo=5126,Ts=32819,Ks=32820,bs=33635,Zo=34042,oi=36193,Hi={};Hi[Ar]=Hi[lr]=1,Hi[Ir]=Hi[Oi]=Hi[oi]=Hi[bs]=Hi[Ts]=Hi[Ks]=2,Hi[Bi]=Hi[Kr]=Hi[eo]=Hi[Zo]=4;function xi(K,Pe){return K===Ks||K===Ts||K===bs?2:K===Zo?4:Hi[K]*Pe}function F(K){return!(K&K-1)&&!!K}function H(K,Pe,ze){var Et,ft=Pe.width,xt=Pe.height,It=Pe.channels;z(ft>0&&ft<=ze.maxTextureSize&&xt>0&&xt<=ze.maxTextureSize,"invalid texture shape"),(K.wrapS!==cn||K.wrapT!==cn)&&z(F(ft)&&F(xt),"incompatible wrap mode for texture, both width and height must be power of 2"),Pe.mipmask===1?ft!==1&&xt!==1&&z(K.minFilter!==on&&K.minFilter!==Zi&&K.minFilter!==lo&&K.minFilter!==Xn,"min filter requires mipmap"):(z(F(ft)&&F(xt),"texture must be a square power of 2 to support mipmapping"),z(Pe.mipmask===(ft<<1)-1,"missing or incomplete mipmap data")),Pe.type===eo&&(ze.extensions.indexOf("oes_texture_float_linear")<0&&z(K.minFilter===qn&&K.magFilter===qn,"filter not supported, must enable oes_texture_float_linear"),z(!K.genMipmaps,"mipmap generation not supported with float textures"));var en=Pe.images;for(Et=0;Et<16;++Et)if(en[Et]){var hn=ft>>Et,pn=xt>>Et;z(Pe.mipmask&1<<Et,"missing mipmap data");var fn=en[Et];if(z(fn.width===hn&&fn.height===pn,"invalid shape for mip images"),z(fn.format===Pe.format&&fn.internalformat===Pe.internalformat&&fn.type===Pe.type,"incompatible type for mip image"),!fn.compressed)if(fn.data){var sn=Math.ceil(xi(fn.type,It)*hn/fn.unpackAlignment)*fn.unpackAlignment;z(fn.data.byteLength===sn*pn,"invalid data for image, buffer size is inconsistent with image format")}else fn.element||fn.copy}else K.genMipmaps||z((Pe.mipmask&1<<Et)===0,"extra mipmap data");Pe.compressed&&z(!K.genMipmaps,"mipmap generation for compressed images not supported")}function mf(K,Pe,ze,Et){var ft=K.width,xt=K.height,It=K.channels;z(ft>0&&ft<=Et.maxTextureSize&&xt>0&&xt<=Et.maxTextureSize,"invalid texture shape"),z(ft===xt,"cube map must be square"),z(Pe.wrapS===cn&&Pe.wrapT===cn,"wrap mode not supported by cube map");for(var en=0;en<ze.length;++en){var hn=ze[en];z(hn.width===ft&&hn.height===xt,"inconsistent cube map face shape"),Pe.genMipmaps&&(z(!hn.compressed,"can not generate mipmap for compressed textures"),z(hn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var pn=hn.images,fn=0;fn<16;++fn){var sn=pn[fn];if(sn){var Nn=ft>>fn,ln=xt>>fn;z(hn.mipmask&1<<fn,"missing mipmap data"),z(sn.width===Nn&&sn.height===ln,"invalid shape for mip images"),z(sn.format===K.format&&sn.internalformat===K.internalformat&&sn.type===K.type,"incompatible type for mip image"),sn.compressed||(sn.data?z(sn.data.byteLength===Nn*ln*Math.max(xi(sn.type,It),sn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):sn.element||sn.copy)}}}}var Oe=M(z,{optional:Pn,raise:q,commandRaise:Bt,command:Mn,parameter:te,commandParameter:ye,constructor:De,type:oe,commandType:Ct,isTypedArray:Q,nni:ie,oneOf:re,shaderError:G,linkError:Fe,callSite:Ee,saveCommandRef:He,saveDrawInfo:et,framebufferFormat:jt,guessCommand:fe,texture2D:H,textureCube:mf}),ac=0,ur=0,ua=5,il=6;function Ro(K,Pe){this.id=ac++,this.type=K,this.data=Pe}function Wa(K){return K.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function At(K){if(K.length===0)return[];var Pe=K.charAt(0),ze=K.charAt(K.length-1);if(K.length>1&&Pe===ze&&(Pe==='"'||Pe==="'"))return['"'+Wa(K.substr(1,K.length-2))+'"'];var Et=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(K);if(Et)return At(K.substr(0,Et.index)).concat(At(Et[1])).concat(At(K.substr(Et.index+Et[0].length)));var ft=K.split(".");if(ft.length===1)return['"'+Wa(K)+'"'];for(var xt=[],It=0;It<ft.length;++It)xt=xt.concat(At(ft[It]));return xt}function Jt(K){return"["+At(K).join("][")+"]"}function Mt(K,Pe){return new Ro(K,Jt(Pe+""))}function un(K){return typeof K=="function"&&!K._reglType||K instanceof Ro}function Qn(K,Pe){if(typeof K=="function")return new Ro(ur,K);if(typeof K=="number"||typeof K=="boolean")return new Ro(ua,K);if(Array.isArray(K))return new Ro(il,K.map((ze,Et)=>Qn(ze,Pe+"["+Et+"]")));if(K instanceof Ro)return K;Oe(!1,"invalid option type in uniform "+Pe)}var zi={DynamicVariable:Ro,define:Mt,isDynamic:un,unbox:Qn,accessor:Jt},Lr={next:typeof requestAnimationFrame=="function"?function(K){return requestAnimationFrame(K)}:function(K){return setTimeout(K,16)},cancel:typeof cancelAnimationFrame=="function"?function(K){return cancelAnimationFrame(K)}:clearTimeout},jr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Sr(){var K={"":0},Pe=[""];return{id:function(ze){var Et=K[ze];return Et||(Et=K[ze]=Pe.length,Pe.push(ze),Et)},str:function(ze){return Pe[ze]}}}function qr(K,Pe,ze){var Et=document.createElement("canvas");M(Et.style,{border:0,margin:0,padding:0,top:0,left:0}),K.appendChild(Et),K===document.body&&(Et.style.position="absolute",M(K.style,{margin:0,padding:0}));function ft(){var en=window.innerWidth,hn=window.innerHeight;if(K!==document.body){var pn=K.getBoundingClientRect();en=pn.right-pn.left,hn=pn.bottom-pn.top}Et.width=ze*en,Et.height=ze*hn,M(Et.style,{width:en+"px",height:hn+"px"})}var xt;K!==document.body&&typeof ResizeObserver=="function"?(xt=new ResizeObserver(function(){setTimeout(ft)}),xt.observe(K)):window.addEventListener("resize",ft,!1);function It(){xt?xt.disconnect():window.removeEventListener("resize",ft),K.removeChild(Et)}return ft(),{canvas:Et,onDestroy:It}}function Xr(K,Pe){function ze(Et){try{return K.getContext(Et,Pe)}catch{return null}}return ze("webgl")||ze("experimental-webgl")||ze("webgl-experimental")}function ko(K){return typeof K.nodeName=="string"&&typeof K.appendChild=="function"&&typeof K.getBoundingClientRect=="function"}function Bc(K){return typeof K.drawArrays=="function"||typeof K.drawElements=="function"}function Cg(K){return typeof K=="string"?K.split():(Oe(Array.isArray(K),"invalid extension array"),K)}function yf(K){return typeof K=="string"?(Oe(typeof document<"u","not supported outside of DOM"),document.querySelector(K)):K}function fh(K){var Pe=K||{},ze,Et,ft,xt,It={},en=[],hn=[],pn=typeof window>"u"?1:window.devicePixelRatio,fn=!1,sn=function(En){En&&Oe.raise(En)},Nn=function(){};if(typeof Pe=="string"?(Oe(typeof document<"u","selector queries only supported in DOM enviroments"),ze=document.querySelector(Pe),Oe(ze,"invalid query string for element")):typeof Pe=="object"?ko(Pe)?ze=Pe:Bc(Pe)?(xt=Pe,ft=xt.canvas):(Oe.constructor(Pe),"gl"in Pe?xt=Pe.gl:"canvas"in Pe?ft=yf(Pe.canvas):"container"in Pe&&(Et=yf(Pe.container)),"attributes"in Pe&&(It=Pe.attributes,Oe.type(It,"object","invalid context attributes")),"extensions"in Pe&&(en=Cg(Pe.extensions)),"optionalExtensions"in Pe&&(hn=Cg(Pe.optionalExtensions)),"onDone"in Pe&&(Oe.type(Pe.onDone,"function","invalid or missing onDone callback"),sn=Pe.onDone),"profile"in Pe&&(fn=!!Pe.profile),"pixelRatio"in Pe&&(pn=+Pe.pixelRatio,Oe(pn>0,"invalid pixel ratio"))):Oe.raise("invalid arguments to regl"),ze&&(ze.nodeName.toLowerCase()==="canvas"?ft=ze:Et=ze),!xt){if(!ft){Oe(typeof document<"u","must manually specify webgl context outside of DOM environments");var ln=qr(Et||document.body,sn,pn);if(!ln)return null;ft=ln.canvas,Nn=ln.onDestroy}It.premultipliedAlpha===void 0&&(It.premultipliedAlpha=!0),xt=Xr(ft,It)}return xt?{gl:xt,canvas:ft,container:Et,extensions:en,optionalExtensions:hn,pixelRatio:pn,profile:fn,onDone:sn,onDestroy:Nn}:(Nn(),sn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Sc(K,Pe){var ze={};function Et(It){Oe.type(It,"string","extension name must be string");var en=It.toLowerCase(),hn;try{hn=ze[en]=K.getExtension(en)}catch{}return!!hn}for(var ft=0;ft<Pe.extensions.length;++ft){var xt=Pe.extensions[ft];if(!Et(xt))return Pe.onDestroy(),Pe.onDone('"'+xt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Pe.optionalExtensions.forEach(Et),{extensions:ze,restore:function(){Object.keys(ze).forEach(function(It){if(ze[It]&&!Et(It))throw new Error("(regl): error restoring extension "+It)})}}}function xs(K,Pe){for(var ze=Array(K),Et=0;Et<K;++Et)ze[Et]=Pe(Et);return ze}var dp=5120,Ed=5121,Yo=5122,ph=5123,Al=5124,hp=5125,ou=5126;function $i(K){for(var Pe=16;Pe<=1<<28;Pe*=16)if(K<=Pe)return Pe;return 0}function uo(K){var Pe,ze;return Pe=(K>65535)<<4,K>>>=Pe,ze=(K>255)<<3,K>>>=ze,Pe|=ze,ze=(K>15)<<2,K>>>=ze,Pe|=ze,ze=(K>3)<<1,K>>>=ze,Pe|=ze,Pe|K>>1}function ti(){var K=xs(8,function(){return[]});function Pe(xt){var It=$i(xt),en=K[uo(It)>>2];return en.length>0?en.pop():new ArrayBuffer(It)}function ze(xt){K[uo(xt.byteLength)>>2].push(xt)}function Et(xt,It){var en=null;switch(xt){case dp:en=new Int8Array(Pe(It),0,It);break;case Ed:en=new Uint8Array(Pe(It),0,It);break;case Yo:en=new Int16Array(Pe(2*It),0,It);break;case ph:en=new Uint16Array(Pe(2*It),0,It);break;case Al:en=new Int32Array(Pe(4*It),0,It);break;case hp:en=new Uint32Array(Pe(4*It),0,It);break;case ou:en=new Float32Array(Pe(4*It),0,It);break;default:return null}return en.length!==It?en.subarray(0,It):en}function ft(xt){ze(xt.buffer)}return{alloc:Pe,free:ze,allocType:Et,freeType:ft}}var To=ti();To.zero=ti();var Ms=3408,su=3410,fp=3411,bf=3412,gh=3413,pp=3414,gp=3415,Sd=33901,vp=33902,Tl=3379,mp=3386,xf=34921,_c=36347,Ml=36348,_d=35661,Ad=35660,wg=34930,Ol=36349,da=34076,ol=34024,Cs=7936,qs=7937,Td=7938,Cf=35724,S0=34047,_0=36063,wf=34852,Md=3553,Od=34067,Ef=34069,au=33984,sl=6408,ha=5126,cu=5121,zc=36160,Eg=36053,Sg=36064,Pl=16384,ku=function(K,Pe){var ze=1;Pe.ext_texture_filter_anisotropic&&(ze=K.getParameter(S0));var Et=1,ft=1;Pe.webgl_draw_buffers&&(Et=K.getParameter(wf),ft=K.getParameter(_0));var xt=!!Pe.oes_texture_float;if(xt){var It=K.createTexture();K.bindTexture(Md,It),K.texImage2D(Md,0,sl,1,1,0,sl,ha,null);var en=K.createFramebuffer();if(K.bindFramebuffer(zc,en),K.framebufferTexture2D(zc,Sg,Md,It,0),K.bindTexture(Md,null),K.checkFramebufferStatus(zc)!==Eg)xt=!1;else{K.viewport(0,0,1,1),K.clearColor(1,0,0,1),K.clear(Pl);var hn=To.allocType(ha,4);K.readPixels(0,0,1,1,sl,ha,hn),K.getError()?xt=!1:(K.deleteFramebuffer(en),K.deleteTexture(It),xt=hn[0]===1),To.freeType(hn)}}var pn=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),fn=!0;if(!pn){var sn=K.createTexture(),Nn=To.allocType(cu,36);K.activeTexture(au),K.bindTexture(Od,sn),K.texImage2D(Ef,0,sl,3,3,0,sl,cu,Nn),To.freeType(Nn),K.bindTexture(Od,null),K.deleteTexture(sn),fn=!K.getError()}return{colorBits:[K.getParameter(su),K.getParameter(fp),K.getParameter(bf),K.getParameter(gh)],depthBits:K.getParameter(pp),stencilBits:K.getParameter(gp),subpixelBits:K.getParameter(Ms),extensions:Object.keys(Pe).filter(function(ln){return!!Pe[ln]}),maxAnisotropic:ze,maxDrawbuffers:Et,maxColorAttachments:ft,pointSizeDims:K.getParameter(Sd),lineWidthDims:K.getParameter(vp),maxViewportDims:K.getParameter(mp),maxCombinedTextureUnits:K.getParameter(_d),maxCubeMapSize:K.getParameter(da),maxRenderbufferSize:K.getParameter(ol),maxTextureUnits:K.getParameter(wg),maxTextureSize:K.getParameter(Tl),maxAttributes:K.getParameter(xf),maxVertexUniforms:K.getParameter(_c),maxVertexTextureUnits:K.getParameter(Ad),maxVaryingVectors:K.getParameter(Ml),maxFragmentUniforms:K.getParameter(Ol),glsl:K.getParameter(Cf),renderer:K.getParameter(qs),vendor:K.getParameter(Cs),version:K.getParameter(Td),readFloat:xt,npotTextureCube:fn}};function Js(K){return!!K&&typeof K=="object"&&Array.isArray(K.shape)&&Array.isArray(K.stride)&&typeof K.offset=="number"&&K.shape.length===K.stride.length&&(Array.isArray(K.data)||L(K.data))}var Ta=function(K){return Object.keys(K).map(function(Pe){return K[Pe]})},Lu={shape:zu,flatten:yp};function Gu(K,Pe,ze){for(var Et=0;Et<Pe;++Et)ze[Et]=K[Et]}function Fu(K,Pe,ze,Et){for(var ft=0,xt=0;xt<Pe;++xt)for(var It=K[xt],en=0;en<ze;++en)Et[ft++]=It[en]}function Pd(K,Pe,ze,Et,ft,xt){for(var It=xt,en=0;en<Pe;++en)for(var hn=K[en],pn=0;pn<ze;++pn)for(var fn=hn[pn],sn=0;sn<Et;++sn)ft[It++]=fn[sn]}function Bu(K,Pe,ze,Et,ft){for(var xt=1,It=ze+1;It<Pe.length;++It)xt*=Pe[It];var en=Pe[ze];if(Pe.length-ze===4){var hn=Pe[ze+1],pn=Pe[ze+2],fn=Pe[ze+3];for(It=0;It<en;++It)Pd(K[It],hn,pn,fn,Et,ft),ft+=xt}else for(It=0;It<en;++It)Bu(K[It],Pe,ze+1,Et,ft),ft+=xt}function yp(K,Pe,ze,Et){var ft=1;if(Pe.length)for(var xt=0;xt<Pe.length;++xt)ft*=Pe[xt];else ft=0;var It=Et||To.allocType(ze,ft);switch(Pe.length){case 0:break;case 1:Gu(K,Pe[0],It);break;case 2:Fu(K,Pe[0],Pe[1],It);break;case 3:Pd(K,Pe[0],Pe[1],Pe[2],It,0);break;default:Bu(K,Pe,0,It,0)}return It}function zu(K){for(var Pe=[],ze=K;ze.length;ze=ze[0])Pe.push(ze.length);return Pe}var Ma={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Uu=5120,Sf=5122,_g=5124,bp=5121,xp=5123,Cp=5125,vh=5126,Dd=5126,Us={int8:Uu,int16:Sf,int32:_g,uint8:bp,uint16:xp,uint32:Cp,float:vh,float32:Dd},al=35048,Vu=35040,Dl={dynamic:al,stream:Vu,static:35044},mh=Lu.flatten,fa=Lu.shape,yh=35044,vo=35040,ho=5121,ju=5126,Nl=[];Nl[5120]=1,Nl[5122]=2,Nl[5124]=4,Nl[5121]=1,Nl[5123]=2,Nl[5125]=4,Nl[5126]=4;function Il(K){return Ma[Object.prototype.toString.call(K)]|0}function bh(K,Pe){for(var ze=0;ze<Pe.length;++ze)K[ze]=Pe[ze]}function Rl(K,Pe,ze,Et,ft,xt,It){for(var en=0,hn=0;hn<ze;++hn)for(var pn=0;pn<Et;++pn)K[en++]=Pe[ft*hn+xt*pn+It]}function wp(K,Pe,ze,Et){var ft=0,xt={};function It(ht){this.id=ft++,this.buffer=K.createBuffer(),this.type=ht,this.usage=yh,this.byteLength=0,this.dimension=1,this.dtype=ho,this.persistentData=null,ze.profile&&(this.stats={size:0})}It.prototype.bind=function(){K.bindBuffer(this.type,this.buffer)},It.prototype.destroy=function(){Nn(this)};var en=[];function hn(ht,Rt){var vn=en.pop();return vn||(vn=new It(ht)),vn.bind(),sn(vn,Rt,vo,0,1,!1),vn}function pn(ht){en.push(ht)}function fn(ht,Rt,vn){ht.byteLength=Rt.byteLength,K.bufferData(ht.type,Rt,vn)}function sn(ht,Rt,vn,zn,tn,Fn){var Wt;if(ht.usage=vn,Array.isArray(Rt)){if(ht.dtype=zn||ju,Rt.length>0){var _n;if(Array.isArray(Rt[0])){Wt=fa(Rt);for(var nn=1,An=1;An<Wt.length;++An)nn*=Wt[An];ht.dimension=nn,_n=mh(Rt,Wt,ht.dtype),fn(ht,_n,vn),Fn?ht.persistentData=_n:To.freeType(_n)}else if(typeof Rt[0]=="number"){ht.dimension=tn;var hr=To.allocType(ht.dtype,Rt.length);bh(hr,Rt),fn(ht,hr,vn),Fn?ht.persistentData=hr:To.freeType(hr)}else L(Rt[0])?(ht.dimension=Rt[0].length,ht.dtype=zn||Il(Rt[0])||ju,_n=mh(Rt,[Rt.length,Rt[0].length],ht.dtype),fn(ht,_n,vn),Fn?ht.persistentData=_n:To.freeType(_n)):Oe.raise("invalid buffer data")}}else if(L(Rt))ht.dtype=zn||Il(Rt),ht.dimension=tn,fn(ht,Rt,vn),Fn&&(ht.persistentData=new Uint8Array(new Uint8Array(Rt.buffer)));else if(Js(Rt)){Wt=Rt.shape;var Mr=Rt.stride,Tn=Rt.offset,dn=0,qt=0,xr=0,Fr=0;Wt.length===1?(dn=Wt[0],qt=1,xr=Mr[0],Fr=0):Wt.length===2?(dn=Wt[0],qt=Wt[1],xr=Mr[0],Fr=Mr[1]):Oe.raise("invalid shape"),ht.dtype=zn||Il(Rt.data)||ju,ht.dimension=qt;var Yn=To.allocType(ht.dtype,dn*qt);Rl(Yn,Rt.data,dn,qt,xr,Fr,Tn),fn(ht,Yn,vn),Fn?ht.persistentData=Yn:To.freeType(Yn)}else Rt instanceof ArrayBuffer?(ht.dtype=ho,ht.dimension=tn,fn(ht,Rt,vn),Fn&&(ht.persistentData=new Uint8Array(new Uint8Array(Rt)))):Oe.raise("invalid buffer data")}function Nn(ht){Pe.bufferCount--,Et(ht);var Rt=ht.buffer;Oe(Rt,"buffer must not be deleted already"),K.deleteBuffer(Rt),ht.buffer=null,delete xt[ht.id]}function ln(ht,Rt,vn,zn){Pe.bufferCount++;var tn=new It(Rt);xt[tn.id]=tn;function Fn(nn){var An=yh,hr=null,Mr=0,Tn=0,dn=1;return Array.isArray(nn)||L(nn)||Js(nn)||nn instanceof ArrayBuffer?hr=nn:typeof nn=="number"?Mr=nn|0:nn&&(Oe.type(nn,"object","buffer arguments must be an object, a number or an array"),"data"in nn&&(Oe(hr===null||Array.isArray(hr)||L(hr)||Js(hr),"invalid data for buffer"),hr=nn.data),"usage"in nn&&(Oe.parameter(nn.usage,Dl,"invalid buffer usage"),An=Dl[nn.usage]),"type"in nn&&(Oe.parameter(nn.type,Us,"invalid buffer type"),Tn=Us[nn.type]),"dimension"in nn&&(Oe.type(nn.dimension,"number","invalid dimension"),dn=nn.dimension|0),"length"in nn&&(Oe.nni(Mr,"buffer length must be a nonnegative integer"),Mr=nn.length|0)),tn.bind(),hr?sn(tn,hr,An,Tn,dn,zn):(Mr&&K.bufferData(tn.type,Mr,An),tn.dtype=Tn||ho,tn.usage=An,tn.dimension=dn,tn.byteLength=Mr),ze.profile&&(tn.stats.size=tn.byteLength*Nl[tn.dtype]),Fn}function Wt(nn,An){Oe(An+nn.byteLength<=tn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+nn.byteLength+" starting from offset "+An+" to a buffer of size "+tn.byteLength),K.bufferSubData(tn.type,An,nn)}function _n(nn,An){var hr=(An||0)|0,Mr;if(tn.bind(),L(nn)||nn instanceof ArrayBuffer)Wt(nn,hr);else if(Array.isArray(nn)){if(nn.length>0)if(typeof nn[0]=="number"){var Tn=To.allocType(tn.dtype,nn.length);bh(Tn,nn),Wt(Tn,hr),To.freeType(Tn)}else if(Array.isArray(nn[0])||L(nn[0])){Mr=fa(nn);var dn=mh(nn,Mr,tn.dtype);Wt(dn,hr),To.freeType(dn)}else Oe.raise("invalid buffer data")}else if(Js(nn)){Mr=nn.shape;var qt=nn.stride,xr=0,Fr=0,Yn=0,si=0;Mr.length===1?(xr=Mr[0],Fr=1,Yn=qt[0],si=0):Mr.length===2?(xr=Mr[0],Fr=Mr[1],Yn=qt[0],si=qt[1]):Oe.raise("invalid shape");var Dr=Array.isArray(nn.data)?tn.dtype:Il(nn.data),$r=To.allocType(Dr,xr*Fr);Rl($r,nn.data,xr,Fr,Yn,si,nn.offset),Wt($r,hr),To.freeType($r)}else Oe.raise("invalid data for buffer subdata");return Fn}return vn||Fn(ht),Fn._reglType="buffer",Fn._buffer=tn,Fn.subdata=_n,ze.profile&&(Fn.stats=tn.stats),Fn.destroy=function(){Nn(tn)},Fn}function En(){Ta(xt).forEach(function(ht){ht.buffer=K.createBuffer(),K.bindBuffer(ht.type,ht.buffer),K.bufferData(ht.type,ht.persistentData||ht.byteLength,ht.usage)})}return ze.profile&&(Pe.getTotalBufferSize=function(){var ht=0;return Object.keys(xt).forEach(function(Rt){ht+=xt[Rt].stats.size}),ht}),{create:ln,createStream:hn,destroyStream:pn,clear:function(){Ta(xt).forEach(Nn),en.forEach(Nn)},getBuffer:function(ht){return ht&&ht._buffer instanceof It?ht._buffer:null},restore:En,_initBuffer:sn}}var lu=0,Hu=0,S=1,I=1,U=4,W=4,se={points:lu,point:Hu,lines:S,line:I,triangles:U,triangle:W,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},le=0,Ce=1,Ke=4,Je=5120,mt=5121,zt=5122,xn=5123,Nt=5124,Yt=5125,Wn=34963,ai=35040,mr=35044;function mo(K,Pe,ze,Et){var ft={},xt=0,It={uint8:mt,uint16:xn};Pe.oes_element_index_uint&&(It.uint32=Yt);function en(En){this.id=xt++,ft[this.id]=this,this.buffer=En,this.primType=Ke,this.vertCount=0,this.type=0}en.prototype.bind=function(){this.buffer.bind()};var hn=[];function pn(En){var ht=hn.pop();return ht||(ht=new en(ze.create(null,Wn,!0,!1)._buffer)),sn(ht,En,ai,-1,-1,0,0),ht}function fn(En){hn.push(En)}function sn(En,ht,Rt,vn,zn,tn,Fn){En.buffer.bind();var Wt;if(ht){var _n=Fn;!Fn&&(!L(ht)||Js(ht)&&!L(ht.data))&&(_n=Pe.oes_element_index_uint?Yt:xn),ze._initBuffer(En.buffer,ht,Rt,_n,3)}else K.bufferData(Wn,tn,Rt),En.buffer.dtype=Wt||mt,En.buffer.usage=Rt,En.buffer.dimension=3,En.buffer.byteLength=tn;if(Wt=Fn,!Fn){switch(En.buffer.dtype){case mt:case Je:Wt=mt;break;case xn:case zt:Wt=xn;break;case Yt:case Nt:Wt=Yt;break;default:Oe.raise("unsupported type for element array")}En.buffer.dtype=Wt}En.type=Wt,Oe(Wt!==Yt||!!Pe.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var nn=zn;nn<0&&(nn=En.buffer.byteLength,Wt===xn?nn>>=1:Wt===Yt&&(nn>>=2)),En.vertCount=nn;var An=vn;if(vn<0){An=Ke;var hr=En.buffer.dimension;hr===1&&(An=le),hr===2&&(An=Ce),hr===3&&(An=Ke)}En.primType=An}function Nn(En){Et.elementsCount--,Oe(En.buffer!==null,"must not double destroy elements"),delete ft[En.id],En.buffer.destroy(),En.buffer=null}function ln(En,ht){var Rt=ze.create(null,Wn,!0),vn=new en(Rt._buffer);Et.elementsCount++;function zn(tn){if(!tn)Rt(),vn.primType=Ke,vn.vertCount=0,vn.type=mt;else if(typeof tn=="number")Rt(tn),vn.primType=Ke,vn.vertCount=tn|0,vn.type=mt;else{var Fn=null,Wt=mr,_n=-1,nn=-1,An=0,hr=0;Array.isArray(tn)||L(tn)||Js(tn)?Fn=tn:(Oe.type(tn,"object","invalid arguments for elements"),"data"in tn&&(Fn=tn.data,Oe(Array.isArray(Fn)||L(Fn)||Js(Fn),"invalid data for element buffer")),"usage"in tn&&(Oe.parameter(tn.usage,Dl,"invalid element buffer usage"),Wt=Dl[tn.usage]),"primitive"in tn&&(Oe.parameter(tn.primitive,se,"invalid element buffer primitive"),_n=se[tn.primitive]),"count"in tn&&(Oe(typeof tn.count=="number"&&tn.count>=0,"invalid vertex count for elements"),nn=tn.count|0),"type"in tn&&(Oe.parameter(tn.type,It,"invalid buffer type"),hr=It[tn.type]),"length"in tn?An=tn.length|0:(An=nn,hr===xn||hr===zt?An*=2:(hr===Yt||hr===Nt)&&(An*=4))),sn(vn,Fn,Wt,_n,nn,An,hr)}return zn}return zn(En),zn._reglType="elements",zn._elements=vn,zn.subdata=function(tn,Fn){return Rt.subdata(tn,Fn),zn},zn.destroy=function(){Nn(vn)},zn}return{create:ln,createStream:pn,destroyStream:fn,getElements:function(En){return typeof En=="function"&&En._elements instanceof en?En._elements:null},clear:function(){Ta(ft).forEach(Nn)}}}var Mo=new Float32Array(1),pa=new Uint32Array(Mo.buffer),Gr=5123;function Rr(K){for(var Pe=To.allocType(Gr,K.length),ze=0;ze<K.length;++ze)if(isNaN(K[ze]))Pe[ze]=65535;else if(K[ze]===1/0)Pe[ze]=31744;else if(K[ze]===-1/0)Pe[ze]=64512;else{Mo[0]=K[ze];var Et=pa[0],ft=Et>>>31<<15,xt=(Et<<1>>>24)-127,It=Et>>13&(1<<10)-1;if(xt<-24)Pe[ze]=ft;else if(xt<-14){var en=-14-xt;Pe[ze]=ft+(It+(1<<10)>>en)}else xt>15?Pe[ze]=ft+31744:Pe[ze]=ft+(xt+15<<10)+It}return Pe}function fi(K){return Array.isArray(K)||L(K)}var Ni=function(K){return!(K&K-1)&&!!K},Lo=34467,Oa=3553,kl=34067,Fs=34069,Pa=6408,Vs=6406,Ko=6407,Da=6409,js=6410,Uc=32854,Oo=32855,Bs=36194,Xa=32819,ao=32820,ws=33635,Ac=34042,cc=6402,Ll=34041,Os=35904,$u=35906,Na=36193,uu=33776,qo=33777,Wu=33778,Gl=33779,cl=35986,xh=35987,Ia=34798,Za=35840,du=35841,Xu=35842,ga=35843,Jo=36196,va=5121,hu=5123,Zu=5125,Fl=5126,fo=10242,Ya=10243,$o=10497,ma=33071,Qs=33648,Ch=10240,Nd=10241,_f=9728,Af=9729,lc=9984,pt=9985,Qt=9986,Ft=9987,or=33170,Hr=4352,Yi=4353,bo=4354,Ji=34046,Id=3317,Yu=37440,Te=37441,Ye=37443,lt=37444,Tt=33984,yt=[lc,Qt,pt,Ft],an=[0,Da,js,Ko,Pa],Ut={};Ut[Da]=Ut[Vs]=Ut[cc]=1,Ut[Ll]=Ut[js]=2,Ut[Ko]=Ut[Os]=3,Ut[Pa]=Ut[$u]=4;function Bn(K){return"[object "+K+"]"}var Zn=Bn("HTMLCanvasElement"),wr=Bn("OffscreenCanvas"),yr=Bn("CanvasRenderingContext2D"),Tr=Bn("ImageBitmap"),Ci=Bn("HTMLImageElement"),ci=Bn("HTMLVideoElement"),br=Object.keys(Ma).concat([Zn,wr,yr,Tr,Ci,ci]),xo=[];xo[va]=1,xo[Fl]=4,xo[Na]=2,xo[hu]=2,xo[Zu]=4;var Ui=[];Ui[Uc]=2,Ui[Oo]=2,Ui[Bs]=2,Ui[Ll]=4,Ui[uu]=.5,Ui[qo]=.5,Ui[Wu]=1,Ui[Gl]=1,Ui[cl]=.5,Ui[xh]=1,Ui[Ia]=1,Ui[Za]=.5,Ui[du]=.25,Ui[Xu]=.5,Ui[ga]=.25,Ui[Jo]=.5;function ea(K){return Array.isArray(K)&&(K.length===0||typeof K[0]=="number")}function Po(K){if(!Array.isArray(K))return!1;var Pe=K.length;return!(Pe===0||!fi(K[0]))}function uc(K){return Object.prototype.toString.call(K)}function ll(K){return uc(K)===Zn}function Ra(K){return uc(K)===wr}function Ka(K){return uc(K)===yr}function Tc(K){return uc(K)===Tr}function Vc(K){return uc(K)===Ci}function fu(K){return uc(K)===ci}function li(K){if(!K)return!1;var Pe=uc(K);return br.indexOf(Pe)>=0?!0:ea(K)||Po(K)||Js(K)}function pi(K){return Ma[Object.prototype.toString.call(K)]|0}function wh(K,Pe){var ze=Pe.length;switch(K.type){case va:case hu:case Zu:case Fl:var Et=To.allocType(K.type,ze);Et.set(Pe),K.data=Et;break;case Na:K.data=Rr(Pe);break;default:Oe.raise("unsupported texture type, must specify a typed array")}}function pu(K,Pe){return To.allocType(K.type===Na?Fl:K.type,Pe)}function Eh(K,Pe){K.type===Na?(K.data=Rr(Pe),To.freeType(Pe)):K.data=Pe}function Ag(K,Pe,ze,Et,ft,xt){for(var It=K.width,en=K.height,hn=K.channels,pn=It*en*hn,fn=pu(K,pn),sn=0,Nn=0;Nn<en;++Nn)for(var ln=0;ln<It;++ln)for(var En=0;En<hn;++En)fn[sn++]=Pe[ze*ln+Et*Nn+ft*En+xt];Eh(K,fn)}function Tf(K,Pe,ze,Et,ft,xt){var It;if(typeof Ui[K]<"u"?It=Ui[K]:It=Ut[K]*xo[Pe],xt&&(It*=6),ft){for(var en=0,hn=ze;hn>=1;)en+=It*hn*hn,hn/=2;return en}else return It*ze*Et}function Ku(K,Pe,ze,Et,ft,xt,It){var en={"don't care":Hr,"dont care":Hr,nice:bo,fast:Yi},hn={repeat:$o,clamp:ma,mirror:Qs},pn={nearest:_f,linear:Af},fn=M({mipmap:Ft,"nearest mipmap nearest":lc,"linear mipmap nearest":pt,"nearest mipmap linear":Qt,"linear mipmap linear":Ft},pn),sn={none:0,browser:lt},Nn={uint8:va,rgba4:Xa,rgb565:ws,"rgb5 a1":ao},ln={alpha:Vs,luminance:Da,"luminance alpha":js,rgb:Ko,rgba:Pa,rgba4:Uc,"rgb5 a1":Oo,rgb565:Bs},En={};Pe.ext_srgb&&(ln.srgb=Os,ln.srgba=$u),Pe.oes_texture_float&&(Nn.float32=Nn.float=Fl),Pe.oes_texture_half_float&&(Nn.float16=Nn["half float"]=Na),Pe.webgl_depth_texture&&(M(ln,{depth:cc,"depth stencil":Ll}),M(Nn,{uint16:hu,uint32:Zu,"depth stencil":Ac})),Pe.webgl_compressed_texture_s3tc&&M(En,{"rgb s3tc dxt1":uu,"rgba s3tc dxt1":qo,"rgba s3tc dxt3":Wu,"rgba s3tc dxt5":Gl}),Pe.webgl_compressed_texture_atc&&M(En,{"rgb atc":cl,"rgba atc explicit alpha":xh,"rgba atc interpolated alpha":Ia}),Pe.webgl_compressed_texture_pvrtc&&M(En,{"rgb pvrtc 4bppv1":Za,"rgb pvrtc 2bppv1":du,"rgba pvrtc 4bppv1":Xu,"rgba pvrtc 2bppv1":ga}),Pe.webgl_compressed_texture_etc1&&(En["rgb etc1"]=Jo);var ht=Array.prototype.slice.call(K.getParameter(Lo));Object.keys(En).forEach(function(Be){var Dt=En[Be];ht.indexOf(Dt)>=0&&(ln[Be]=Dt)});var Rt=Object.keys(ln);ze.textureFormats=Rt;var vn=[];Object.keys(ln).forEach(function(Be){var Dt=ln[Be];vn[Dt]=Be});var zn=[];Object.keys(Nn).forEach(function(Be){var Dt=Nn[Be];zn[Dt]=Be});var tn=[];Object.keys(pn).forEach(function(Be){var Dt=pn[Be];tn[Dt]=Be});var Fn=[];Object.keys(fn).forEach(function(Be){var Dt=fn[Be];Fn[Dt]=Be});var Wt=[];Object.keys(hn).forEach(function(Be){var Dt=hn[Be];Wt[Dt]=Be});var _n=Rt.reduce(function(Be,Dt){var St=ln[Dt];return St===Da||St===Vs||St===Da||St===js||St===cc||St===Ll||Pe.ext_srgb&&(St===Os||St===$u)?Be[St]=St:St===Oo||Dt.indexOf("rgba")>=0?Be[St]=Pa:Be[St]=Ko,Be},{});function nn(){this.internalformat=Pa,this.format=Pa,this.type=va,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=lt,this.width=0,this.height=0,this.channels=0}function An(Be,Dt){Be.internalformat=Dt.internalformat,Be.format=Dt.format,Be.type=Dt.type,Be.compressed=Dt.compressed,Be.premultiplyAlpha=Dt.premultiplyAlpha,Be.flipY=Dt.flipY,Be.unpackAlignment=Dt.unpackAlignment,Be.colorSpace=Dt.colorSpace,Be.width=Dt.width,Be.height=Dt.height,Be.channels=Dt.channels}function hr(Be,Dt){if(!(typeof Dt!="object"||!Dt)){if("premultiplyAlpha"in Dt&&(Oe.type(Dt.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Be.premultiplyAlpha=Dt.premultiplyAlpha),"flipY"in Dt&&(Oe.type(Dt.flipY,"boolean","invalid texture flip"),Be.flipY=Dt.flipY),"alignment"in Dt&&(Oe.oneOf(Dt.alignment,[1,2,4,8],"invalid texture unpack alignment"),Be.unpackAlignment=Dt.alignment),"colorSpace"in Dt&&(Oe.parameter(Dt.colorSpace,sn,"invalid colorSpace"),Be.colorSpace=sn[Dt.colorSpace]),"type"in Dt){var St=Dt.type;Oe(Pe.oes_texture_float||!(St==="float"||St==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Oe(Pe.oes_texture_half_float||!(St==="half float"||St==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Oe(Pe.webgl_depth_texture||!(St==="uint16"||St==="uint32"||St==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Oe.parameter(St,Nn,"invalid texture type"),Be.type=Nn[St]}var $n=Be.width,ni=Be.height,Ge=Be.channels,we=!1;"shape"in Dt?(Oe(Array.isArray(Dt.shape)&&Dt.shape.length>=2,"shape must be an array"),$n=Dt.shape[0],ni=Dt.shape[1],Dt.shape.length===3&&(Ge=Dt.shape[2],Oe(Ge>0&&Ge<=4,"invalid number of channels"),we=!0),Oe($n>=0&&$n<=ze.maxTextureSize,"invalid width"),Oe(ni>=0&&ni<=ze.maxTextureSize,"invalid height")):("radius"in Dt&&($n=ni=Dt.radius,Oe($n>=0&&$n<=ze.maxTextureSize,"invalid radius")),"width"in Dt&&($n=Dt.width,Oe($n>=0&&$n<=ze.maxTextureSize,"invalid width")),"height"in Dt&&(ni=Dt.height,Oe(ni>=0&&ni<=ze.maxTextureSize,"invalid height")),"channels"in Dt&&(Ge=Dt.channels,Oe(Ge>0&&Ge<=4,"invalid number of channels"),we=!0)),Be.width=$n|0,Be.height=ni|0,Be.channels=Ge|0;var We=!1;if("format"in Dt){var ut=Dt.format;Oe(Pe.webgl_depth_texture||!(ut==="depth"||ut==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Oe.parameter(ut,ln,"invalid texture format");var dt=Be.internalformat=ln[ut];Be.format=_n[dt],ut in Nn&&("type"in Dt||(Be.type=Nn[ut])),ut in En&&(Be.compressed=!0),We=!0}!we&&We?Be.channels=Ut[Be.format]:we&&!We?Be.channels!==an[Be.format]&&(Be.format=Be.internalformat=an[Be.channels]):We&&we&&Oe(Be.channels===Ut[Be.format],"number of channels inconsistent with specified format")}}function Mr(Be){K.pixelStorei(Yu,Be.flipY),K.pixelStorei(Te,Be.premultiplyAlpha),K.pixelStorei(Ye,Be.colorSpace),K.pixelStorei(Id,Be.unpackAlignment)}function Tn(){nn.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function dn(Be,Dt){var St=null;if(li(Dt)?St=Dt:Dt&&(Oe.type(Dt,"object","invalid pixel data type"),hr(Be,Dt),"x"in Dt&&(Be.xOffset=Dt.x|0),"y"in Dt&&(Be.yOffset=Dt.y|0),li(Dt.data)&&(St=Dt.data)),Oe(!Be.compressed||St instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Dt.copy){Oe(!St,"can not specify copy and data field for the same texture");var $n=ft.viewportWidth,ni=ft.viewportHeight;Be.width=Be.width||$n-Be.xOffset,Be.height=Be.height||ni-Be.yOffset,Be.needsCopy=!0,Oe(Be.xOffset>=0&&Be.xOffset<$n&&Be.yOffset>=0&&Be.yOffset<ni&&Be.width>0&&Be.width<=$n&&Be.height>0&&Be.height<=ni,"copy texture read out of bounds")}else if(!St)Be.width=Be.width||1,Be.height=Be.height||1,Be.channels=Be.channels||4;else if(L(St))Be.channels=Be.channels||4,Be.data=St,!("type"in Dt)&&Be.type===va&&(Be.type=pi(St));else if(ea(St))Be.channels=Be.channels||4,wh(Be,St),Be.alignment=1,Be.needsFree=!0;else if(Js(St)){var Ge=St.data;!Array.isArray(Ge)&&Be.type===va&&(Be.type=pi(Ge));var we=St.shape,We=St.stride,ut,dt,qe,Xe,it,Le;we.length===3?(qe=we[2],Le=We[2]):(Oe(we.length===2,"invalid ndarray pixel data, must be 2 or 3D"),qe=1,Le=1),ut=we[0],dt=we[1],Xe=We[0],it=We[1],Be.alignment=1,Be.width=ut,Be.height=dt,Be.channels=qe,Be.format=Be.internalformat=an[qe],Be.needsFree=!0,Ag(Be,Ge,Xe,it,Le,St.offset)}else if(ll(St)||Ra(St)||Ka(St))ll(St)||Ra(St)?Be.element=St:Be.element=St.canvas,Be.width=Be.element.width,Be.height=Be.element.height,Be.channels=4;else if(Tc(St))Be.element=St,Be.width=St.width,Be.height=St.height,Be.channels=4;else if(Vc(St))Be.element=St,Be.width=St.naturalWidth,Be.height=St.naturalHeight,Be.channels=4;else if(fu(St))Be.element=St,Be.width=St.videoWidth,Be.height=St.videoHeight,Be.channels=4;else if(Po(St)){var $e=Be.width||St[0].length,Ie=Be.height||St.length,rt=Be.channels;fi(St[0][0])?rt=rt||St[0][0].length:rt=rt||1;for(var vt=Lu.shape(St),Vt=1,Ht=0;Ht<vt.length;++Ht)Vt*=vt[Ht];var Lt=pu(Be,Vt);Lu.flatten(St,vt,"",Lt),Eh(Be,Lt),Be.alignment=1,Be.width=$e,Be.height=Ie,Be.channels=rt,Be.format=Be.internalformat=an[rt],Be.needsFree=!0}Be.type===Fl?Oe(ze.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Be.type===Na&&Oe(ze.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function qt(Be,Dt,St){var $n=Be.element,ni=Be.data,Ge=Be.internalformat,we=Be.format,We=Be.type,ut=Be.width,dt=Be.height;Mr(Be),$n?K.texImage2D(Dt,St,we,we,We,$n):Be.compressed?K.compressedTexImage2D(Dt,St,Ge,ut,dt,0,ni):Be.needsCopy?(Et(),K.copyTexImage2D(Dt,St,we,Be.xOffset,Be.yOffset,ut,dt,0)):K.texImage2D(Dt,St,we,ut,dt,0,we,We,ni||null)}function xr(Be,Dt,St,$n,ni){var Ge=Be.element,we=Be.data,We=Be.internalformat,ut=Be.format,dt=Be.type,qe=Be.width,Xe=Be.height;Mr(Be),Ge?K.texSubImage2D(Dt,ni,St,$n,ut,dt,Ge):Be.compressed?K.compressedTexSubImage2D(Dt,ni,St,$n,We,qe,Xe,we):Be.needsCopy?(Et(),K.copyTexSubImage2D(Dt,ni,St,$n,Be.xOffset,Be.yOffset,qe,Xe)):K.texSubImage2D(Dt,ni,St,$n,qe,Xe,ut,dt,we)}var Fr=[];function Yn(){return Fr.pop()||new Tn}function si(Be){Be.needsFree&&To.freeType(Be.data),Tn.call(Be),Fr.push(Be)}function Dr(){nn.call(this),this.genMipmaps=!1,this.mipmapHint=Hr,this.mipmask=0,this.images=Array(16)}function $r(Be,Dt,St){var $n=Be.images[0]=Yn();Be.mipmask=1,$n.width=Be.width=Dt,$n.height=Be.height=St,$n.channels=Be.channels=4}function Ti(Be,Dt){var St=null;if(li(Dt))St=Be.images[0]=Yn(),An(St,Be),dn(St,Dt),Be.mipmask=1;else if(hr(Be,Dt),Array.isArray(Dt.mipmap))for(var $n=Dt.mipmap,ni=0;ni<$n.length;++ni)St=Be.images[ni]=Yn(),An(St,Be),St.width>>=ni,St.height>>=ni,dn(St,$n[ni]),Be.mipmask|=1<<ni;else St=Be.images[0]=Yn(),An(St,Be),dn(St,Dt),Be.mipmask=1;An(Be,Be.images[0]),Be.compressed&&(Be.internalformat===uu||Be.internalformat===qo||Be.internalformat===Wu||Be.internalformat===Gl)&&Oe(Be.width%4===0&&Be.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Qo(Be,Dt){for(var St=Be.images,$n=0;$n<St.length;++$n){if(!St[$n])return;qt(St[$n],Dt,$n)}}var hs=[];function Jr(){var Be=hs.pop()||new Dr;nn.call(Be),Be.mipmask=0;for(var Dt=0;Dt<16;++Dt)Be.images[Dt]=null;return Be}function fs(Be){for(var Dt=Be.images,St=0;St<Dt.length;++St)Dt[St]&&si(Dt[St]),Dt[St]=null;hs.push(Be)}function yo(){this.minFilter=_f,this.magFilter=_f,this.wrapS=ma,this.wrapT=ma,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Hr}function ps(Be,Dt){if("min"in Dt){var St=Dt.min;Oe.parameter(St,fn),Be.minFilter=fn[St],yt.indexOf(Be.minFilter)>=0&&!("faces"in Dt)&&(Be.genMipmaps=!0)}if("mag"in Dt){var $n=Dt.mag;Oe.parameter($n,pn),Be.magFilter=pn[$n]}var ni=Be.wrapS,Ge=Be.wrapT;if("wrap"in Dt){var we=Dt.wrap;typeof we=="string"?(Oe.parameter(we,hn),ni=Ge=hn[we]):Array.isArray(we)&&(Oe.parameter(we[0],hn),Oe.parameter(we[1],hn),ni=hn[we[0]],Ge=hn[we[1]])}else{if("wrapS"in Dt){var We=Dt.wrapS;Oe.parameter(We,hn),ni=hn[We]}if("wrapT"in Dt){var ut=Dt.wrapT;Oe.parameter(ut,hn),Ge=hn[ut]}}if(Be.wrapS=ni,Be.wrapT=Ge,"anisotropic"in Dt){var dt=Dt.anisotropic;Oe(typeof dt=="number"&&dt>=1&&dt<=ze.maxAnisotropic,"aniso samples must be between 1 and "),Be.anisotropic=Dt.anisotropic}if("mipmap"in Dt){var qe=!1;switch(typeof Dt.mipmap){case"string":Oe.parameter(Dt.mipmap,en,"invalid mipmap hint"),Be.mipmapHint=en[Dt.mipmap],Be.genMipmaps=!0,qe=!0;break;case"boolean":qe=Be.genMipmaps=Dt.mipmap;break;case"object":Oe(Array.isArray(Dt.mipmap),"invalid mipmap type"),Be.genMipmaps=!1,qe=!0;break;default:Oe.raise("invalid mipmap type")}qe&&!("min"in Dt)&&(Be.minFilter=lc)}}function es(Be,Dt){K.texParameteri(Dt,Nd,Be.minFilter),K.texParameteri(Dt,Ch,Be.magFilter),K.texParameteri(Dt,fo,Be.wrapS),K.texParameteri(Dt,Ya,Be.wrapT),Pe.ext_texture_filter_anisotropic&&K.texParameteri(Dt,Ji,Be.anisotropic),Be.genMipmaps&&(K.hint(or,Be.mipmapHint),K.generateMipmap(Dt))}var ts=0,Co={},ns=ze.maxTextureUnits,gs=Array(ns).map(function(){return null});function Br(Be){nn.call(this),this.mipmask=0,this.internalformat=Pa,this.id=ts++,this.refCount=1,this.target=Be,this.texture=K.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new yo,It.profile&&(this.stats={size:0})}function Fo(Be){K.activeTexture(Tt),K.bindTexture(Be.target,Be.texture)}function Ii(){var Be=gs[0];Be?K.bindTexture(Be.target,Be.texture):K.bindTexture(Oa,null)}function gr(Be){var Dt=Be.texture;Oe(Dt,"must not double destroy texture");var St=Be.unit,$n=Be.target;St>=0&&(K.activeTexture(Tt+St),K.bindTexture($n,null),gs[St]=null),K.deleteTexture(Dt),Be.texture=null,Be.params=null,Be.pixels=null,Be.refCount=0,delete Co[Be.id],xt.textureCount--}M(Br.prototype,{bind:function(){var Be=this;Be.bindCount+=1;var Dt=Be.unit;if(Dt<0){for(var St=0;St<ns;++St){var $n=gs[St];if($n){if($n.bindCount>0)continue;$n.unit=-1}gs[St]=Be,Dt=St;break}Dt>=ns&&Oe.raise("insufficient number of texture units"),It.profile&&xt.maxTextureUnits<Dt+1&&(xt.maxTextureUnits=Dt+1),Be.unit=Dt,K.activeTexture(Tt+Dt),K.bindTexture(Be.target,Be.texture)}return Dt},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&gr(this)}});function di(Be,Dt){var St=new Br(Oa);Co[St.id]=St,xt.textureCount++;function $n(we,We){var ut=St.texInfo;yo.call(ut);var dt=Jr();return typeof we=="number"?typeof We=="number"?$r(dt,we|0,We|0):$r(dt,we|0,we|0):we?(Oe.type(we,"object","invalid arguments to regl.texture"),ps(ut,we),Ti(dt,we)):$r(dt,1,1),ut.genMipmaps&&(dt.mipmask=(dt.width<<1)-1),St.mipmask=dt.mipmask,An(St,dt),Oe.texture2D(ut,dt,ze),St.internalformat=dt.internalformat,$n.width=dt.width,$n.height=dt.height,Fo(St),Qo(dt,Oa),es(ut,Oa),Ii(),fs(dt),It.profile&&(St.stats.size=Tf(St.internalformat,St.type,dt.width,dt.height,ut.genMipmaps,!1)),$n.format=vn[St.internalformat],$n.type=zn[St.type],$n.mag=tn[ut.magFilter],$n.min=Fn[ut.minFilter],$n.wrapS=Wt[ut.wrapS],$n.wrapT=Wt[ut.wrapT],$n}function ni(we,We,ut,dt){Oe(!!we,"must specify image data");var qe=We|0,Xe=ut|0,it=dt|0,Le=Yn();return An(Le,St),Le.width=0,Le.height=0,dn(Le,we),Le.width=Le.width||(St.width>>it)-qe,Le.height=Le.height||(St.height>>it)-Xe,Oe(St.type===Le.type&&St.format===Le.format&&St.internalformat===Le.internalformat,"incompatible format for texture.subimage"),Oe(qe>=0&&Xe>=0&&qe+Le.width<=St.width&&Xe+Le.height<=St.height,"texture.subimage write out of bounds"),Oe(St.mipmask&1<<it,"missing mipmap data"),Oe(Le.data||Le.element||Le.needsCopy,"missing image data"),Fo(St),xr(Le,Oa,qe,Xe,it),Ii(),si(Le),$n}function Ge(we,We){var ut=we|0,dt=We|0||ut;if(ut===St.width&&dt===St.height)return $n;$n.width=St.width=ut,$n.height=St.height=dt,Fo(St);for(var qe=0;St.mipmask>>qe;++qe){var Xe=ut>>qe,it=dt>>qe;if(!Xe||!it)break;K.texImage2D(Oa,qe,St.format,Xe,it,0,St.format,St.type,null)}return Ii(),It.profile&&(St.stats.size=Tf(St.internalformat,St.type,ut,dt,!1,!1)),$n}return $n(Be,Dt),$n.subimage=ni,$n.resize=Ge,$n._reglType="texture2d",$n._texture=St,It.profile&&($n.stats=St.stats),$n.destroy=function(){St.decRef()},$n}function wi(Be,Dt,St,$n,ni,Ge){var we=new Br(kl);Co[we.id]=we,xt.cubeCount++;var We=new Array(6);function ut(Xe,it,Le,$e,Ie,rt){var vt,Vt=we.texInfo;for(yo.call(Vt),vt=0;vt<6;++vt)We[vt]=Jr();if(typeof Xe=="number"||!Xe){var Ht=Xe|0||1;for(vt=0;vt<6;++vt)$r(We[vt],Ht,Ht)}else if(typeof Xe=="object")if(it)Ti(We[0],Xe),Ti(We[1],it),Ti(We[2],Le),Ti(We[3],$e),Ti(We[4],Ie),Ti(We[5],rt);else if(ps(Vt,Xe),hr(we,Xe),"faces"in Xe){var Lt=Xe.faces;for(Oe(Array.isArray(Lt)&&Lt.length===6,"cube faces must be a length 6 array"),vt=0;vt<6;++vt)Oe(typeof Lt[vt]=="object"&&!!Lt[vt],"invalid input for cube map face"),An(We[vt],we),Ti(We[vt],Lt[vt])}else for(vt=0;vt<6;++vt)Ti(We[vt],Xe);else Oe.raise("invalid arguments to cube map");for(An(we,We[0]),ze.npotTextureCube||Oe(Ni(we.width)&&Ni(we.height),"your browser does not support non power or two texture dimensions"),Vt.genMipmaps?we.mipmask=(We[0].width<<1)-1:we.mipmask=We[0].mipmask,Oe.textureCube(we,Vt,We,ze),we.internalformat=We[0].internalformat,ut.width=We[0].width,ut.height=We[0].height,Fo(we),vt=0;vt<6;++vt)Qo(We[vt],Fs+vt);for(es(Vt,kl),Ii(),It.profile&&(we.stats.size=Tf(we.internalformat,we.type,ut.width,ut.height,Vt.genMipmaps,!0)),ut.format=vn[we.internalformat],ut.type=zn[we.type],ut.mag=tn[Vt.magFilter],ut.min=Fn[Vt.minFilter],ut.wrapS=Wt[Vt.wrapS],ut.wrapT=Wt[Vt.wrapT],vt=0;vt<6;++vt)fs(We[vt]);return ut}function dt(Xe,it,Le,$e,Ie){Oe(!!it,"must specify image data"),Oe(typeof Xe=="number"&&Xe===(Xe|0)&&Xe>=0&&Xe<6,"invalid face");var rt=Le|0,vt=$e|0,Vt=Ie|0,Ht=Yn();return An(Ht,we),Ht.width=0,Ht.height=0,dn(Ht,it),Ht.width=Ht.width||(we.width>>Vt)-rt,Ht.height=Ht.height||(we.height>>Vt)-vt,Oe(we.type===Ht.type&&we.format===Ht.format&&we.internalformat===Ht.internalformat,"incompatible format for texture.subimage"),Oe(rt>=0&&vt>=0&&rt+Ht.width<=we.width&&vt+Ht.height<=we.height,"texture.subimage write out of bounds"),Oe(we.mipmask&1<<Vt,"missing mipmap data"),Oe(Ht.data||Ht.element||Ht.needsCopy,"missing image data"),Fo(we),xr(Ht,Fs+Xe,rt,vt,Vt),Ii(),si(Ht),ut}function qe(Xe){var it=Xe|0;if(it!==we.width){ut.width=we.width=it,ut.height=we.height=it,Fo(we);for(var Le=0;Le<6;++Le)for(var $e=0;we.mipmask>>$e;++$e)K.texImage2D(Fs+Le,$e,we.format,it>>$e,it>>$e,0,we.format,we.type,null);return Ii(),It.profile&&(we.stats.size=Tf(we.internalformat,we.type,ut.width,ut.height,!1,!0)),ut}}return ut(Be,Dt,St,$n,ni,Ge),ut.subimage=dt,ut.resize=qe,ut._reglType="textureCube",ut._texture=we,It.profile&&(ut.stats=we.stats),ut.destroy=function(){we.decRef()},ut}function co(){for(var Be=0;Be<ns;++Be)K.activeTexture(Tt+Be),K.bindTexture(Oa,null),gs[Be]=null;Ta(Co).forEach(gr),xt.cubeCount=0,xt.textureCount=0}It.profile&&(xt.getTotalTextureSize=function(){var Be=0;return Object.keys(Co).forEach(function(Dt){Be+=Co[Dt].stats.size}),Be});function Yl(){for(var Be=0;Be<ns;++Be){var Dt=gs[Be];Dt&&(Dt.bindCount=0,Dt.unit=-1,gs[Be]=null)}Ta(Co).forEach(function(St){St.texture=K.createTexture(),K.bindTexture(St.target,St.texture);for(var $n=0;$n<32;++$n)if((St.mipmask&1<<$n)!==0)if(St.target===Oa)K.texImage2D(Oa,$n,St.internalformat,St.width>>$n,St.height>>$n,0,St.internalformat,St.type,null);else for(var ni=0;ni<6;++ni)K.texImage2D(Fs+ni,$n,St.internalformat,St.width>>$n,St.height>>$n,0,St.internalformat,St.type,null);es(St.texInfo,St.target)})}function th(){for(var Be=0;Be<ns;++Be){var Dt=gs[Be];Dt&&(Dt.bindCount=0,Dt.unit=-1,gs[Be]=null),K.activeTexture(Tt+Be),K.bindTexture(Oa,null),K.bindTexture(kl,null)}}return{create2D:di,createCube:wi,clear:co,getTexture:function(Be){return null},restore:Yl,refresh:th}}var dc=36161,cs=32854,Es=32855,A0=36194,Ep=33189,qu=36168,Mf=34041,Sp=35907,ka=34836,Rd=34842,Hs=34843,qa=[];qa[cs]=2,qa[Es]=2,qa[A0]=2,qa[Ep]=2,qa[qu]=1,qa[Mf]=4,qa[Sp]=4,qa[ka]=16,qa[Rd]=8,qa[Hs]=6;function Ju(K,Pe,ze){return qa[K]*Pe*ze}var Sh=function(K,Pe,ze,Et,ft){var xt={rgba4:cs,rgb565:A0,"rgb5 a1":Es,depth:Ep,stencil:qu,"depth stencil":Mf};Pe.ext_srgb&&(xt.srgba=Sp),Pe.ext_color_buffer_half_float&&(xt.rgba16f=Rd,xt.rgb16f=Hs),Pe.webgl_color_buffer_float&&(xt.rgba32f=ka);var It=[];Object.keys(xt).forEach(function(ln){var En=xt[ln];It[En]=ln});var en=0,hn={};function pn(ln){this.id=en++,this.refCount=1,this.renderbuffer=ln,this.format=cs,this.width=0,this.height=0,ft.profile&&(this.stats={size:0})}pn.prototype.decRef=function(){--this.refCount<=0&&fn(this)};function fn(ln){var En=ln.renderbuffer;Oe(En,"must not double destroy renderbuffer"),K.bindRenderbuffer(dc,null),K.deleteRenderbuffer(En),ln.renderbuffer=null,ln.refCount=0,delete hn[ln.id],Et.renderbufferCount--}function sn(ln,En){var ht=new pn(K.createRenderbuffer());hn[ht.id]=ht,Et.renderbufferCount++;function Rt(zn,tn){var Fn=0,Wt=0,_n=cs;if(typeof zn=="object"&&zn){var nn=zn;if("shape"in nn){var An=nn.shape;Oe(Array.isArray(An)&&An.length>=2,"invalid renderbuffer shape"),Fn=An[0]|0,Wt=An[1]|0}else"radius"in nn&&(Fn=Wt=nn.radius|0),"width"in nn&&(Fn=nn.width|0),"height"in nn&&(Wt=nn.height|0);"format"in nn&&(Oe.parameter(nn.format,xt,"invalid renderbuffer format"),_n=xt[nn.format])}else typeof zn=="number"?(Fn=zn|0,typeof tn=="number"?Wt=tn|0:Wt=Fn):zn?Oe.raise("invalid arguments to renderbuffer constructor"):Fn=Wt=1;if(Oe(Fn>0&&Wt>0&&Fn<=ze.maxRenderbufferSize&&Wt<=ze.maxRenderbufferSize,"invalid renderbuffer size"),!(Fn===ht.width&&Wt===ht.height&&_n===ht.format))return Rt.width=ht.width=Fn,Rt.height=ht.height=Wt,ht.format=_n,K.bindRenderbuffer(dc,ht.renderbuffer),K.renderbufferStorage(dc,_n,Fn,Wt),Oe(K.getError()===0,"invalid render buffer format"),ft.profile&&(ht.stats.size=Ju(ht.format,ht.width,ht.height)),Rt.format=It[ht.format],Rt}function vn(zn,tn){var Fn=zn|0,Wt=tn|0||Fn;return Fn===ht.width&&Wt===ht.height||(Oe(Fn>0&&Wt>0&&Fn<=ze.maxRenderbufferSize&&Wt<=ze.maxRenderbufferSize,"invalid renderbuffer size"),Rt.width=ht.width=Fn,Rt.height=ht.height=Wt,K.bindRenderbuffer(dc,ht.renderbuffer),K.renderbufferStorage(dc,ht.format,Fn,Wt),Oe(K.getError()===0,"invalid render buffer format"),ft.profile&&(ht.stats.size=Ju(ht.format,ht.width,ht.height))),Rt}return Rt(ln,En),Rt.resize=vn,Rt._reglType="renderbuffer",Rt._renderbuffer=ht,ft.profile&&(Rt.stats=ht.stats),Rt.destroy=function(){ht.decRef()},Rt}ft.profile&&(Et.getTotalRenderbufferSize=function(){var ln=0;return Object.keys(hn).forEach(function(En){ln+=hn[En].stats.size}),ln});function Nn(){Ta(hn).forEach(function(ln){ln.renderbuffer=K.createRenderbuffer(),K.bindRenderbuffer(dc,ln.renderbuffer),K.renderbufferStorage(dc,ln.format,ln.width,ln.height)}),K.bindRenderbuffer(dc,null)}return{create:sn,clear:function(){Ta(hn).forEach(fn)},restore:Nn}},ta=36160,ul=36161,Qu=3553,kd=34069,qv=36064,_h=36096,_p=36128,Ah=33306,Tg=36053,Me=36054,Th=36055,Ld=36057,La=36061,Ai=36193,Jv=5121,ed=5126,T0=6407,td=6408,M0=6402,Bl=[T0,td],Mg=[];Mg[td]=4,Mg[T0]=3;var Ap=[];Ap[Jv]=1,Ap[ed]=4,Ap[Ai]=2;var Og=32854,gu=32855,O0=36194,Qv=33189,Vy=36168,nd=34041,P0=35907,zl=34836,to=34842,em=34843,Pg=[Og,gu,O0,P0,to,em,zl],rd={};rd[Tg]="complete",rd[Me]="incomplete attachment",rd[Ld]="incomplete dimensions",rd[Th]="incomplete, missing attachment",rd[La]="unsupported";function Gd(K,Pe,ze,Et,ft,xt){var It={cur:null,next:null,dirty:!1,setFBO:null},en=["rgba"],hn=["rgba4","rgb565","rgb5 a1"];Pe.ext_srgb&&hn.push("srgba"),Pe.ext_color_buffer_half_float&&hn.push("rgba16f","rgb16f"),Pe.webgl_color_buffer_float&&hn.push("rgba32f");var pn=["uint8"];Pe.oes_texture_half_float&&pn.push("half float","float16"),Pe.oes_texture_float&&pn.push("float","float32");function fn(Tn,dn,qt){this.target=Tn,this.texture=dn,this.renderbuffer=qt;var xr=0,Fr=0;dn?(xr=dn.width,Fr=dn.height):qt&&(xr=qt.width,Fr=qt.height),this.width=xr,this.height=Fr}function sn(Tn){Tn&&(Tn.texture&&Tn.texture._texture.decRef(),Tn.renderbuffer&&Tn.renderbuffer._renderbuffer.decRef())}function Nn(Tn,dn,qt){if(!!Tn)if(Tn.texture){var xr=Tn.texture._texture,Fr=Math.max(1,xr.width),Yn=Math.max(1,xr.height);Oe(Fr===dn&&Yn===qt,"inconsistent width/height for supplied texture"),xr.refCount+=1}else{var si=Tn.renderbuffer._renderbuffer;Oe(si.width===dn&&si.height===qt,"inconsistent width/height for renderbuffer"),si.refCount+=1}}function ln(Tn,dn){dn&&(dn.texture?K.framebufferTexture2D(ta,Tn,dn.target,dn.texture._texture.texture,0):K.framebufferRenderbuffer(ta,Tn,ul,dn.renderbuffer._renderbuffer.renderbuffer))}function En(Tn){var dn=Qu,qt=null,xr=null,Fr=Tn;typeof Tn=="object"&&(Fr=Tn.data,"target"in Tn&&(dn=Tn.target|0)),Oe.type(Fr,"function","invalid attachment data");var Yn=Fr._reglType;return Yn==="texture2d"?(qt=Fr,Oe(dn===Qu)):Yn==="textureCube"?(qt=Fr,Oe(dn>=kd&&dn<kd+6,"invalid cube map target")):Yn==="renderbuffer"?(xr=Fr,dn=ul):Oe.raise("invalid regl object for attachment"),new fn(dn,qt,xr)}function ht(Tn,dn,qt,xr,Fr){if(qt){var Yn=Et.create2D({width:Tn,height:dn,format:xr,type:Fr});return Yn._texture.refCount=0,new fn(Qu,Yn,null)}else{var si=ft.create({width:Tn,height:dn,format:xr});return si._renderbuffer.refCount=0,new fn(ul,null,si)}}function Rt(Tn){return Tn&&(Tn.texture||Tn.renderbuffer)}function vn(Tn,dn,qt){Tn&&(Tn.texture?Tn.texture.resize(dn,qt):Tn.renderbuffer&&Tn.renderbuffer.resize(dn,qt),Tn.width=dn,Tn.height=qt)}var zn=0,tn={};function Fn(){this.id=zn++,tn[this.id]=this,this.framebuffer=K.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Wt(Tn){Tn.colorAttachments.forEach(sn),sn(Tn.depthAttachment),sn(Tn.stencilAttachment),sn(Tn.depthStencilAttachment)}function _n(Tn){var dn=Tn.framebuffer;Oe(dn,"must not double destroy framebuffer"),K.deleteFramebuffer(dn),Tn.framebuffer=null,xt.framebufferCount--,delete tn[Tn.id]}function nn(Tn){var dn;K.bindFramebuffer(ta,Tn.framebuffer);var qt=Tn.colorAttachments;for(dn=0;dn<qt.length;++dn)ln(qv+dn,qt[dn]);for(dn=qt.length;dn<ze.maxColorAttachments;++dn)K.framebufferTexture2D(ta,qv+dn,Qu,null,0);K.framebufferTexture2D(ta,Ah,Qu,null,0),K.framebufferTexture2D(ta,_h,Qu,null,0),K.framebufferTexture2D(ta,_p,Qu,null,0),ln(_h,Tn.depthAttachment),ln(_p,Tn.stencilAttachment),ln(Ah,Tn.depthStencilAttachment);var xr=K.checkFramebufferStatus(ta);!K.isContextLost()&&xr!==Tg&&Oe.raise("framebuffer configuration not supported, status = "+rd[xr]),K.bindFramebuffer(ta,It.next?It.next.framebuffer:null),It.cur=It.next,K.getError()}function An(Tn,dn){var qt=new Fn;xt.framebufferCount++;function xr(Yn,si){var Dr;Oe(It.next!==qt,"can not update framebuffer which is currently in use");var $r=0,Ti=0,Qo=!0,hs=!0,Jr=null,fs=!0,yo="rgba",ps="uint8",es=1,ts=null,Co=null,ns=null,gs=!1;if(typeof Yn=="number")$r=Yn|0,Ti=si|0||$r;else if(!Yn)$r=Ti=1;else{Oe.type(Yn,"object","invalid arguments for framebuffer");var Br=Yn;if("shape"in Br){var Fo=Br.shape;Oe(Array.isArray(Fo)&&Fo.length>=2,"invalid shape for framebuffer"),$r=Fo[0],Ti=Fo[1]}else"radius"in Br&&($r=Ti=Br.radius),"width"in Br&&($r=Br.width),"height"in Br&&(Ti=Br.height);("color"in Br||"colors"in Br)&&(Jr=Br.color||Br.colors,Array.isArray(Jr)&&Oe(Jr.length===1||Pe.webgl_draw_buffers,"multiple render targets not supported")),Jr||("colorCount"in Br&&(es=Br.colorCount|0,Oe(es>0,"invalid color buffer count")),"colorTexture"in Br&&(fs=!!Br.colorTexture,yo="rgba4"),"colorType"in Br&&(ps=Br.colorType,fs?(Oe(Pe.oes_texture_float||!(ps==="float"||ps==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Oe(Pe.oes_texture_half_float||!(ps==="half float"||ps==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ps==="half float"||ps==="float16"?(Oe(Pe.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),yo="rgba16f"):(ps==="float"||ps==="float32")&&(Oe(Pe.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),yo="rgba32f"),Oe.oneOf(ps,pn,"invalid color type")),"colorFormat"in Br&&(yo=Br.colorFormat,en.indexOf(yo)>=0?fs=!0:hn.indexOf(yo)>=0?fs=!1:fs?Oe.oneOf(Br.colorFormat,en,"invalid color format for texture"):Oe.oneOf(Br.colorFormat,hn,"invalid color format for renderbuffer"))),("depthTexture"in Br||"depthStencilTexture"in Br)&&(gs=!!(Br.depthTexture||Br.depthStencilTexture),Oe(!gs||Pe.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Br&&(typeof Br.depth=="boolean"?Qo=Br.depth:(ts=Br.depth,hs=!1)),"stencil"in Br&&(typeof Br.stencil=="boolean"?hs=Br.stencil:(Co=Br.stencil,Qo=!1)),"depthStencil"in Br&&(typeof Br.depthStencil=="boolean"?Qo=hs=Br.depthStencil:(ns=Br.depthStencil,Qo=!1,hs=!1))}var Ii=null,gr=null,di=null,wi=null;if(Array.isArray(Jr))Ii=Jr.map(En);else if(Jr)Ii=[En(Jr)];else for(Ii=new Array(es),Dr=0;Dr<es;++Dr)Ii[Dr]=ht($r,Ti,fs,yo,ps);Oe(Pe.webgl_draw_buffers||Ii.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Oe(Ii.length<=ze.maxColorAttachments,"too many color attachments, not supported"),$r=$r||Ii[0].width,Ti=Ti||Ii[0].height,ts?gr=En(ts):Qo&&!hs&&(gr=ht($r,Ti,gs,"depth","uint32")),Co?di=En(Co):hs&&!Qo&&(di=ht($r,Ti,!1,"stencil","uint8")),ns?wi=En(ns):!ts&&!Co&&hs&&Qo&&(wi=ht($r,Ti,gs,"depth stencil","depth stencil")),Oe(!!ts+!!Co+!!ns<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var co=null;for(Dr=0;Dr<Ii.length;++Dr)if(Nn(Ii[Dr],$r,Ti),Oe(!Ii[Dr]||Ii[Dr].texture&&Bl.indexOf(Ii[Dr].texture._texture.format)>=0||Ii[Dr].renderbuffer&&Pg.indexOf(Ii[Dr].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Dr+" is invalid"),Ii[Dr]&&Ii[Dr].texture){var Yl=Mg[Ii[Dr].texture._texture.format]*Ap[Ii[Dr].texture._texture.type];co===null?co=Yl:Oe(co===Yl,"all color attachments much have the same number of bits per pixel.")}return Nn(gr,$r,Ti),Oe(!gr||gr.texture&&gr.texture._texture.format===M0||gr.renderbuffer&&gr.renderbuffer._renderbuffer.format===Qv,"invalid depth attachment for framebuffer object"),Nn(di,$r,Ti),Oe(!di||di.renderbuffer&&di.renderbuffer._renderbuffer.format===Vy,"invalid stencil attachment for framebuffer object"),Nn(wi,$r,Ti),Oe(!wi||wi.texture&&wi.texture._texture.format===nd||wi.renderbuffer&&wi.renderbuffer._renderbuffer.format===nd,"invalid depth-stencil attachment for framebuffer object"),Wt(qt),qt.width=$r,qt.height=Ti,qt.colorAttachments=Ii,qt.depthAttachment=gr,qt.stencilAttachment=di,qt.depthStencilAttachment=wi,xr.color=Ii.map(Rt),xr.depth=Rt(gr),xr.stencil=Rt(di),xr.depthStencil=Rt(wi),xr.width=qt.width,xr.height=qt.height,nn(qt),xr}function Fr(Yn,si){Oe(It.next!==qt,"can not resize a framebuffer which is currently in use");var Dr=Math.max(Yn|0,1),$r=Math.max(si|0||Dr,1);if(Dr===qt.width&&$r===qt.height)return xr;for(var Ti=qt.colorAttachments,Qo=0;Qo<Ti.length;++Qo)vn(Ti[Qo],Dr,$r);return vn(qt.depthAttachment,Dr,$r),vn(qt.stencilAttachment,Dr,$r),vn(qt.depthStencilAttachment,Dr,$r),qt.width=xr.width=Dr,qt.height=xr.height=$r,nn(qt),xr}return xr(Tn,dn),M(xr,{resize:Fr,_reglType:"framebuffer",_framebuffer:qt,destroy:function(){_n(qt),Wt(qt)},use:function(Yn){It.setFBO({framebuffer:xr},Yn)}})}function hr(Tn){var dn=Array(6);function qt(Fr){var Yn;Oe(dn.indexOf(It.next)<0,"can not update framebuffer which is currently in use");var si={color:null},Dr=0,$r=null,Ti="rgba",Qo="uint8",hs=1;if(typeof Fr=="number")Dr=Fr|0;else if(!Fr)Dr=1;else{Oe.type(Fr,"object","invalid arguments for framebuffer");var Jr=Fr;if("shape"in Jr){var fs=Jr.shape;Oe(Array.isArray(fs)&&fs.length>=2,"invalid shape for framebuffer"),Oe(fs[0]===fs[1],"cube framebuffer must be square"),Dr=fs[0]}else"radius"in Jr&&(Dr=Jr.radius|0),"width"in Jr?(Dr=Jr.width|0,"height"in Jr&&Oe(Jr.height===Dr,"must be square")):"height"in Jr&&(Dr=Jr.height|0);("color"in Jr||"colors"in Jr)&&($r=Jr.color||Jr.colors,Array.isArray($r)&&Oe($r.length===1||Pe.webgl_draw_buffers,"multiple render targets not supported")),$r||("colorCount"in Jr&&(hs=Jr.colorCount|0,Oe(hs>0,"invalid color buffer count")),"colorType"in Jr&&(Oe.oneOf(Jr.colorType,pn,"invalid color type"),Qo=Jr.colorType),"colorFormat"in Jr&&(Ti=Jr.colorFormat,Oe.oneOf(Jr.colorFormat,en,"invalid color format for texture"))),"depth"in Jr&&(si.depth=Jr.depth),"stencil"in Jr&&(si.stencil=Jr.stencil),"depthStencil"in Jr&&(si.depthStencil=Jr.depthStencil)}var yo;if($r)if(Array.isArray($r))for(yo=[],Yn=0;Yn<$r.length;++Yn)yo[Yn]=$r[Yn];else yo=[$r];else{yo=Array(hs);var ps={radius:Dr,format:Ti,type:Qo};for(Yn=0;Yn<hs;++Yn)yo[Yn]=Et.createCube(ps)}for(si.color=Array(yo.length),Yn=0;Yn<yo.length;++Yn){var es=yo[Yn];Oe(typeof es=="function"&&es._reglType==="textureCube","invalid cube map"),Dr=Dr||es.width,Oe(es.width===Dr&&es.height===Dr,"invalid cube map shape"),si.color[Yn]={target:kd,data:yo[Yn]}}for(Yn=0;Yn<6;++Yn){for(var ts=0;ts<yo.length;++ts)si.color[ts].target=kd+Yn;Yn>0&&(si.depth=dn[0].depth,si.stencil=dn[0].stencil,si.depthStencil=dn[0].depthStencil),dn[Yn]?dn[Yn](si):dn[Yn]=An(si)}return M(qt,{width:Dr,height:Dr,color:yo})}function xr(Fr){var Yn,si=Fr|0;if(Oe(si>0&&si<=ze.maxCubeMapSize,"invalid radius for cube fbo"),si===qt.width)return qt;var Dr=qt.color;for(Yn=0;Yn<Dr.length;++Yn)Dr[Yn].resize(si);for(Yn=0;Yn<6;++Yn)dn[Yn].resize(si);return qt.width=qt.height=si,qt}return qt(Tn),M(qt,{faces:dn,resize:xr,_reglType:"framebufferCube",destroy:function(){dn.forEach(function(Fr){Fr.destroy()})}})}function Mr(){It.cur=null,It.next=null,It.dirty=!0,Ta(tn).forEach(function(Tn){Tn.framebuffer=K.createFramebuffer(),nn(Tn)})}return M(It,{getFramebuffer:function(Tn){if(typeof Tn=="function"&&Tn._reglType==="framebuffer"){var dn=Tn._framebuffer;if(dn instanceof Fn)return dn}return null},create:An,createCube:hr,clear:function(){Ta(tn).forEach(_n)},restore:Mr})}var Mc=5126,Mh=34962;function Go(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Mc,this.offset=0,this.stride=0,this.divisor=0}function Vi(K,Pe,ze,Et,ft){for(var xt=ze.maxAttributes,It=new Array(xt),en=0;en<xt;++en)It[en]=new Go;var hn=0,pn={},fn={Record:Go,scope:{},state:It,currentVAO:null,targetVAO:null,restore:Nn()?tn:function(){},createVAO:Fn,getVAO:En,destroyBuffer:sn,setVAO:Nn()?ht:Rt,clear:Nn()?vn:function(){}};function sn(Wt){for(var _n=0;_n<It.length;++_n){var nn=It[_n];nn.buffer===Wt&&(K.disableVertexAttribArray(_n),nn.buffer=null)}}function Nn(){return Pe.oes_vertex_array_object}function ln(){return Pe.angle_instanced_arrays}function En(Wt){return typeof Wt=="function"&&Wt._vao?Wt._vao:null}function ht(Wt){if(Wt!==fn.currentVAO){var _n=Nn();Wt?_n.bindVertexArrayOES(Wt.vao):_n.bindVertexArrayOES(null),fn.currentVAO=Wt}}function Rt(Wt){if(Wt!==fn.currentVAO){if(Wt)Wt.bindAttrs();else for(var _n=ln(),nn=0;nn<It.length;++nn){var An=It[nn];An.buffer?(K.enableVertexAttribArray(nn),K.vertexAttribPointer(nn,An.size,An.type,An.normalized,An.stride,An.offfset),_n&&An.divisor&&_n.vertexAttribDivisorANGLE(nn,An.divisor)):(K.disableVertexAttribArray(nn),K.vertexAttrib4f(nn,An.x,An.y,An.z,An.w))}fn.currentVAO=Wt}}function vn(){Ta(pn).forEach(function(Wt){Wt.destroy()})}function zn(){this.id=++hn,this.attributes=[];var Wt=Nn();Wt?this.vao=Wt.createVertexArrayOES():this.vao=null,pn[this.id]=this,this.buffers=[]}zn.prototype.bindAttrs=function(){for(var Wt=ln(),_n=this.attributes,nn=0;nn<_n.length;++nn){var An=_n[nn];An.buffer?(K.enableVertexAttribArray(nn),K.bindBuffer(Mh,An.buffer.buffer),K.vertexAttribPointer(nn,An.size,An.type,An.normalized,An.stride,An.offset),Wt&&An.divisor&&Wt.vertexAttribDivisorANGLE(nn,An.divisor)):(K.disableVertexAttribArray(nn),K.vertexAttrib4f(nn,An.x,An.y,An.z,An.w))}for(var hr=_n.length;hr<xt;++hr)K.disableVertexAttribArray(hr)},zn.prototype.refresh=function(){var Wt=Nn();Wt&&(Wt.bindVertexArrayOES(this.vao),this.bindAttrs(),fn.currentVAO=this)},zn.prototype.destroy=function(){if(this.vao){var Wt=Nn();this===fn.currentVAO&&(fn.currentVAO=null,Wt.bindVertexArrayOES(null)),Wt.deleteVertexArrayOES(this.vao),this.vao=null}pn[this.id]&&(delete pn[this.id],Et.vaoCount-=1)};function tn(){var Wt=Nn();Wt&&Ta(pn).forEach(function(_n){_n.refresh()})}function Fn(Wt){var _n=new zn;Et.vaoCount+=1;function nn(An){Oe(Array.isArray(An),"arguments to vertex array constructor must be an array"),Oe(An.length<xt,"too many attributes"),Oe(An.length>0,"must specify at least one attribute");var hr={},Mr=_n.attributes;Mr.length=An.length;for(var Tn=0;Tn<An.length;++Tn){var dn=An[Tn],qt=Mr[Tn]=new Go,xr=dn.data||dn;if(Array.isArray(xr)||L(xr)||Js(xr)){var Fr;_n.buffers[Tn]&&(Fr=_n.buffers[Tn],L(xr)&&Fr._buffer.byteLength>=xr.byteLength?Fr.subdata(xr):(Fr.destroy(),_n.buffers[Tn]=null)),_n.buffers[Tn]||(Fr=_n.buffers[Tn]=ft.create(dn,Mh,!1,!0)),qt.buffer=ft.getBuffer(Fr),qt.size=qt.buffer.dimension|0,qt.normalized=!1,qt.type=qt.buffer.dtype,qt.offset=0,qt.stride=0,qt.divisor=0,qt.state=1,hr[Tn]=1}else ft.getBuffer(dn)?(qt.buffer=ft.getBuffer(dn),qt.size=qt.buffer.dimension|0,qt.normalized=!1,qt.type=qt.buffer.dtype,qt.offset=0,qt.stride=0,qt.divisor=0,qt.state=1):ft.getBuffer(dn.buffer)?(qt.buffer=ft.getBuffer(dn.buffer),qt.size=(+dn.size||qt.buffer.dimension)|0,qt.normalized=!!dn.normalized||!1,"type"in dn?(Oe.parameter(dn.type,Us,"invalid buffer type"),qt.type=Us[dn.type]):qt.type=qt.buffer.dtype,qt.offset=(dn.offset||0)|0,qt.stride=(dn.stride||0)|0,qt.divisor=(dn.divisor||0)|0,qt.state=1,Oe(qt.size>=1&&qt.size<=4,"size must be between 1 and 4"),Oe(qt.offset>=0,"invalid offset"),Oe(qt.stride>=0&&qt.stride<=255,"stride must be between 0 and 255"),Oe(qt.divisor>=0,"divisor must be positive"),Oe(!qt.divisor||!!Pe.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in dn?(Oe(Tn>0,"first attribute must not be a constant"),qt.x=+dn.x||0,qt.y=+dn.y||0,qt.z=+dn.z||0,qt.w=+dn.w||0,qt.state=2):Oe(!1,"invalid attribute spec for location "+Tn)}for(var Yn=0;Yn<_n.buffers.length;++Yn)!hr[Yn]&&_n.buffers[Yn]&&(_n.buffers[Yn].destroy(),_n.buffers[Yn]=null);return _n.refresh(),nn}return nn.destroy=function(){for(var An=0;An<_n.buffers.length;++An)_n.buffers[An]&&_n.buffers[An].destroy();_n.buffers.length=0,_n.destroy()},nn._vao=_n,nn._reglType="vao",nn(Wt)}return fn}var Oh=35632,hc=35633,Of=35718,Tp=35721;function Fd(K,Pe,ze,Et){var ft={},xt={};function It(ht,Rt,vn,zn){this.name=ht,this.id=Rt,this.location=vn,this.info=zn}function en(ht,Rt){for(var vn=0;vn<ht.length;++vn)if(ht[vn].id===Rt.id){ht[vn].location=Rt.location;return}ht.push(Rt)}function hn(ht,Rt,vn){var zn=ht===Oh?ft:xt,tn=zn[Rt];if(!tn){var Fn=Pe.str(Rt);tn=K.createShader(ht),K.shaderSource(tn,Fn),K.compileShader(tn),Oe.shaderError(K,tn,Fn,ht,vn),zn[Rt]=tn}return tn}var pn={},fn=[],sn=0;function Nn(ht,Rt){this.id=sn++,this.fragId=ht,this.vertId=Rt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Et.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ln(ht,Rt,vn){var zn,tn,Fn=hn(Oh,ht.fragId),Wt=hn(hc,ht.vertId),_n=ht.program=K.createProgram();if(K.attachShader(_n,Fn),K.attachShader(_n,Wt),vn)for(zn=0;zn<vn.length;++zn){var nn=vn[zn];K.bindAttribLocation(_n,nn[0],nn[1])}K.linkProgram(_n),Oe.linkError(K,_n,Pe.str(ht.fragId),Pe.str(ht.vertId),Rt);var An=K.getProgramParameter(_n,Of);Et.profile&&(ht.stats.uniformsCount=An);var hr=ht.uniforms;for(zn=0;zn<An;++zn)if(tn=K.getActiveUniform(_n,zn),tn)if(tn.size>1)for(var Mr=0;Mr<tn.size;++Mr){var Tn=tn.name.replace("[0]","["+Mr+"]");en(hr,new It(Tn,Pe.id(Tn),K.getUniformLocation(_n,Tn),tn))}else en(hr,new It(tn.name,Pe.id(tn.name),K.getUniformLocation(_n,tn.name),tn));var dn=K.getProgramParameter(_n,Tp);Et.profile&&(ht.stats.attributesCount=dn);var qt=ht.attributes;for(zn=0;zn<dn;++zn)tn=K.getActiveAttrib(_n,zn),tn&&en(qt,new It(tn.name,Pe.id(tn.name),K.getAttribLocation(_n,tn.name),tn))}Et.profile&&(ze.getMaxUniformsCount=function(){var ht=0;return fn.forEach(function(Rt){Rt.stats.uniformsCount>ht&&(ht=Rt.stats.uniformsCount)}),ht},ze.getMaxAttributesCount=function(){var ht=0;return fn.forEach(function(Rt){Rt.stats.attributesCount>ht&&(ht=Rt.stats.attributesCount)}),ht});function En(){ft={},xt={};for(var ht=0;ht<fn.length;++ht)ln(fn[ht],null,fn[ht].attributes.map(function(Rt){return[Rt.location,Rt.name]}))}return{clear:function(){var ht=K.deleteShader.bind(K);Ta(ft).forEach(ht),ft={},Ta(xt).forEach(ht),xt={},fn.forEach(function(Rt){K.deleteProgram(Rt.program)}),fn.length=0,pn={},ze.shaderCount=0},program:function(ht,Rt,vn,zn){Oe.command(ht>=0,"missing vertex shader",vn),Oe.command(Rt>=0,"missing fragment shader",vn);var tn=pn[Rt];tn||(tn=pn[Rt]={});var Fn=tn[ht];if(Fn&&(Fn.refCount++,!zn))return Fn;var Wt=new Nn(Rt,ht);return ze.shaderCount++,ln(Wt,vn,zn),Fn||(tn[ht]=Wt),fn.push(Wt),M(Wt,{destroy:function(){if(Wt.refCount--,Wt.refCount<=0){K.deleteProgram(Wt.program);var _n=fn.indexOf(Wt);fn.splice(_n,1),ze.shaderCount--}tn[Wt.vertId].refCount<=0&&(K.deleteShader(xt[Wt.vertId]),delete xt[Wt.vertId],delete pn[Wt.fragId][Wt.vertId]),Object.keys(pn[Wt.fragId]).length||(K.deleteShader(ft[Wt.fragId]),delete ft[Wt.fragId],delete pn[Wt.fragId])}})},restore:En,shader:hn,frag:-1,vert:-1}}var Bd=6408,Oc=5121,Pf=3333,dl=5126;function Df(K,Pe,ze,Et,ft,xt,It){function en(fn){var sn;Pe.next===null?(Oe(ft.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),sn=Oc):(Oe(Pe.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),sn=Pe.next.colorAttachments[0].texture._texture.type,xt.oes_texture_float?(Oe(sn===Oc||sn===dl,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),sn===dl&&Oe(It.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Oe(sn===Oc,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Nn=0,ln=0,En=Et.framebufferWidth,ht=Et.framebufferHeight,Rt=null;L(fn)?Rt=fn:fn&&(Oe.type(fn,"object","invalid arguments to regl.read()"),Nn=fn.x|0,ln=fn.y|0,Oe(Nn>=0&&Nn<Et.framebufferWidth,"invalid x offset for regl.read"),Oe(ln>=0&&ln<Et.framebufferHeight,"invalid y offset for regl.read"),En=(fn.width||Et.framebufferWidth-Nn)|0,ht=(fn.height||Et.framebufferHeight-ln)|0,Rt=fn.data||null),Rt&&(sn===Oc?Oe(Rt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):sn===dl&&Oe(Rt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Oe(En>0&&En+Nn<=Et.framebufferWidth,"invalid width for read pixels"),Oe(ht>0&&ht+ln<=Et.framebufferHeight,"invalid height for read pixels"),ze();var vn=En*ht*4;return Rt||(sn===Oc?Rt=new Uint8Array(vn):sn===dl&&(Rt=Rt||new Float32Array(vn))),Oe.isTypedArray(Rt,"data buffer for regl.read() must be a typedarray"),Oe(Rt.byteLength>=vn,"data buffer for regl.read() too small"),K.pixelStorei(Pf,4),K.readPixels(Nn,ln,En,ht,Bd,sn,Rt),Rt}function hn(fn){var sn;return Pe.setFBO({framebuffer:fn.framebuffer},function(){sn=en(fn)}),sn}function pn(fn){return!fn||!("framebuffer"in fn)?en(fn):hn(fn)}return pn}function Pc(K){return Array.prototype.slice.call(K)}function fc(K){return Pc(K).join("")}function Dg(){var K=0,Pe=[],ze=[];function Et(sn){for(var Nn=0;Nn<ze.length;++Nn)if(ze[Nn]===sn)return Pe[Nn];var ln="g"+K++;return Pe.push(ln),ze.push(sn),ln}function ft(){var sn=[];function Nn(){sn.push.apply(sn,Pc(arguments))}var ln=[];function En(){var ht="v"+K++;return ln.push(ht),arguments.length>0&&(sn.push(ht,"="),sn.push.apply(sn,Pc(arguments)),sn.push(";")),ht}return M(Nn,{def:En,toString:function(){return fc([ln.length>0?"var "+ln.join(",")+";":"",fc(sn)])}})}function xt(){var sn=ft(),Nn=ft(),ln=sn.toString,En=Nn.toString;function ht(Rt,vn){Nn(Rt,vn,"=",sn.def(Rt,vn),";")}return M(function(){sn.apply(sn,Pc(arguments))},{def:sn.def,entry:sn,exit:Nn,save:ht,set:function(Rt,vn,zn){ht(Rt,vn),sn(Rt,vn,"=",zn,";")},toString:function(){return ln()+En()}})}function It(){var sn=fc(arguments),Nn=xt(),ln=xt(),En=Nn.toString,ht=ln.toString;return M(Nn,{then:function(){return Nn.apply(Nn,Pc(arguments)),this},else:function(){return ln.apply(ln,Pc(arguments)),this},toString:function(){var Rt=ht();return Rt&&(Rt="else{"+Rt+"}"),fc(["if(",sn,"){",En(),"}",Rt])}})}var en=ft(),hn={};function pn(sn,Nn){var ln=[];function En(){var tn="a"+ln.length;return ln.push(tn),tn}Nn=Nn||0;for(var ht=0;ht<Nn;++ht)En();var Rt=xt(),vn=Rt.toString,zn=hn[sn]=M(Rt,{arg:En,toString:function(){return fc(["function(",ln.join(),"){",vn(),"}"])}});return zn}function fn(){var sn=['"use strict";',en,"return {"];Object.keys(hn).forEach(function(En){sn.push('"',En,'":',hn[En].toString(),",")}),sn.push("}");var Nn=fc(sn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),ln=Function.apply(null,Pe.concat(Nn));return ln.apply(null,ze)}return{global:en,link:Et,block:ft,proc:pn,scope:xt,cond:It,compile:fn}}var jc="xyzw".split(""),id=5121,$s=1,od=2,Hc=0,ya=1,zd=2,Ud=3,Dc=4,sd=5,pc=6,Ng="dither",D0="blend.enable",Nf="blend.color",Mp="blend.equation",Op="blend.func",na="depth.enable",Ph="depth.func",Pp="depth.range",Nc="depth.mask",$c="colorMask",Vd="cull.enable",vu="cull.face",Ig="frontFace",ra="lineWidth",If="polygonOffset.enable",jd="polygonOffset.offset",Dh="sample.alpha",Ul="sample.enable",Rf="sample.coverage",kf="stencil.enable",Vl="stencil.mask",mu="stencil.func",Ic="stencil.opFront",Rc="stencil.opBack",Nh="scissor.enable",Hd="scissor.box",jl="viewport",Hl="profile",hl="framebuffer",gc="vert",Lf="frag",$d="elements",vc="primitive",$l="count",Dp="offset",yu="instances",bu="vao",Wd="Width",Xd="Height",kc=hl+Wd,Wl=hl+Xd,Gf=jl+Wd,Ff=jl+Xd,Rg="drawingBuffer",Ih=Rg+Wd,ad=Rg+Xd,Zd=[Op,Mp,mu,Ic,Rc,Rf,jl,Hd,jd],Xl=34962,Yd=34963,Rh=35632,Kd=35633,ui=3553,Bf=34067,Np=2884,xu=3042,zf=3024,Ip=2960,tm=2929,Wc=3089,Rp=32823,cd=32926,fl=32928,ld=5126,Cu=35664,Ps=35665,Ga=35666,pl=5124,Uf=35667,Wo=35668,Ds=35669,Hn=35670,ud=35671,Vf=35672,ia=35673,Fa=35674,vi=35675,Ba=35676,qd=35678,Jd=35680,kp=4,kh=1028,gl=1029,wu=2304,Xc=2305,nm=32775,jy=32776,rm=519,ls=7680,Ja=0,mc=1,N0=32774,im=513,Lh=36160,Gh=36064,vl={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},jf=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Fh={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},us={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Qd={frag:Rh,vert:Kd},eh={cw:wu,ccw:Xc};function Lp(K){return Array.isArray(K)||L(K)||Js(K)}function Hf(K){return K.sort(function(Pe,ze){return Pe===jl?-1:ze===jl?1:Pe<ze?-1:1})}function za(K,Pe,ze,Et){this.thisDep=K,this.contextDep=Pe,this.propDep=ze,this.append=Et}function ml(K){return K&&!(K.thisDep||K.contextDep||K.propDep)}function ds(K){return new za(!1,!1,!1,K)}function ba(K,Pe){var ze=K.type;if(ze===Hc){var Et=K.data.length;return new za(!0,Et>=1,Et>=2,Pe)}else if(ze===Dc){var ft=K.data;return new za(ft.thisDep,ft.contextDep,ft.propDep,Pe)}else{if(ze===sd)return new za(!1,!1,!1,Pe);if(ze===pc){for(var xt=!1,It=!1,en=!1,hn=0;hn<K.data.length;++hn){var pn=K.data[hn];if(pn.type===ya)en=!0;else if(pn.type===zd)It=!0;else if(pn.type===Ud)xt=!0;else if(pn.type===Hc){xt=!0;var fn=pn.data;fn>=1&&(It=!0),fn>=2&&(en=!0)}else pn.type===Dc&&(xt=xt||pn.data.thisDep,It=It||pn.data.contextDep,en=en||pn.data.propDep)}return new za(xt,It,en,Pe)}else return new za(ze===Ud,ze===zd,ze===ya,Pe)}}var Gp=new za(!1,!1,!1,function(){});function $f(K,Pe,ze,Et,ft,xt,It,en,hn,pn,fn,sn,Nn,ln,En){var ht=pn.Record,Rt={add:32774,subtract:32778,"reverse subtract":32779};ze.ext_blend_minmax&&(Rt.min=nm,Rt.max=jy);var vn=ze.angle_instanced_arrays,zn=ze.webgl_draw_buffers,tn={dirty:!0,profile:En.profile},Fn={},Wt=[],_n={},nn={};function An(Ge){return Ge.replace(".","_")}function hr(Ge,we,We){var ut=An(Ge);Wt.push(Ge),Fn[ut]=tn[ut]=!!We,_n[ut]=we}function Mr(Ge,we,We){var ut=An(Ge);Wt.push(Ge),Array.isArray(We)?(tn[ut]=We.slice(),Fn[ut]=We.slice()):tn[ut]=Fn[ut]=We,nn[ut]=we}hr(Ng,zf),hr(D0,xu),Mr(Nf,"blendColor",[0,0,0,0]),Mr(Mp,"blendEquationSeparate",[N0,N0]),Mr(Op,"blendFuncSeparate",[mc,Ja,mc,Ja]),hr(na,tm,!0),Mr(Ph,"depthFunc",im),Mr(Pp,"depthRange",[0,1]),Mr(Nc,"depthMask",!0),Mr($c,$c,[!0,!0,!0,!0]),hr(Vd,Np),Mr(vu,"cullFace",gl),Mr(Ig,Ig,Xc),Mr(ra,ra,1),hr(If,Rp),Mr(jd,"polygonOffset",[0,0]),hr(Dh,cd),hr(Ul,fl),Mr(Rf,"sampleCoverage",[1,!1]),hr(kf,Ip),Mr(Vl,"stencilMask",-1),Mr(mu,"stencilFunc",[rm,0,-1]),Mr(Ic,"stencilOpSeparate",[kh,ls,ls,ls]),Mr(Rc,"stencilOpSeparate",[gl,ls,ls,ls]),hr(Nh,Wc),Mr(Hd,"scissor",[0,0,K.drawingBufferWidth,K.drawingBufferHeight]),Mr(jl,jl,[0,0,K.drawingBufferWidth,K.drawingBufferHeight]);var Tn={gl:K,context:Nn,strings:Pe,next:Fn,current:tn,draw:sn,elements:xt,buffer:ft,shader:fn,attributes:pn.state,vao:pn,uniforms:hn,framebuffer:en,extensions:ze,timer:ln,isBufferArgs:Lp},dn={primTypes:se,compareFuncs:Fh,blendFuncs:vl,blendEquations:Rt,stencilOps:us,glTypes:Us,orientationType:eh};Oe.optional(function(){Tn.isArrayLike=fi}),zn&&(dn.backBuffer=[gl],dn.drawBuffer=xs(Et.maxDrawbuffers,function(Ge){return Ge===0?[0]:xs(Ge,function(we){return Gh+we})}));var qt=0;function xr(){var Ge=Dg(),we=Ge.link,We=Ge.global;Ge.id=qt++,Ge.batchId="0";var ut=we(Tn),dt=Ge.shared={props:"a0"};Object.keys(Tn).forEach(function($e){dt[$e]=We.def(ut,".",$e)}),Oe.optional(function(){Ge.CHECK=we(Oe),Ge.commandStr=Oe.guessCommand(),Ge.command=we(Ge.commandStr),Ge.assert=function($e,Ie,rt){$e("if(!(",Ie,"))",this.CHECK,".commandRaise(",we(rt),",",this.command,");")},dn.invalidBlendCombinations=jf});var qe=Ge.next={},Xe=Ge.current={};Object.keys(nn).forEach(function($e){Array.isArray(tn[$e])&&(qe[$e]=We.def(dt.next,".",$e),Xe[$e]=We.def(dt.current,".",$e))});var it=Ge.constants={};Object.keys(dn).forEach(function($e){it[$e]=We.def(JSON.stringify(dn[$e]))}),Ge.invoke=function($e,Ie){switch(Ie.type){case Hc:var rt=["this",dt.context,dt.props,Ge.batchId];return $e.def(we(Ie.data),".call(",rt.slice(0,Math.max(Ie.data.length+1,4)),")");case ya:return $e.def(dt.props,Ie.data);case zd:return $e.def(dt.context,Ie.data);case Ud:return $e.def("this",Ie.data);case Dc:return Ie.data.append(Ge,$e),Ie.data.ref;case sd:return Ie.data.toString();case pc:return Ie.data.map(function(vt){return Ge.invoke($e,vt)})}},Ge.attribCache={};var Le={};return Ge.scopeAttrib=function($e){var Ie=Pe.id($e);if(Ie in Le)return Le[Ie];var rt=pn.scope[Ie];rt||(rt=pn.scope[Ie]=new ht);var vt=Le[Ie]=we(rt);return vt},Ge}function Fr(Ge){var we=Ge.static,We=Ge.dynamic,ut;if(Hl in we){var dt=!!we[Hl];ut=ds(function(Xe,it){return dt}),ut.enable=dt}else if(Hl in We){var qe=We[Hl];ut=ba(qe,function(Xe,it){return Xe.invoke(it,qe)})}return ut}function Yn(Ge,we){var We=Ge.static,ut=Ge.dynamic;if(hl in We){var dt=We[hl];return dt?(dt=en.getFramebuffer(dt),Oe.command(dt,"invalid framebuffer object"),ds(function(Xe,it){var Le=Xe.link(dt),$e=Xe.shared;it.set($e.framebuffer,".next",Le);var Ie=$e.context;return it.set(Ie,"."+kc,Le+".width"),it.set(Ie,"."+Wl,Le+".height"),Le})):ds(function(Xe,it){var Le=Xe.shared;it.set(Le.framebuffer,".next","null");var $e=Le.context;return it.set($e,"."+kc,$e+"."+Ih),it.set($e,"."+Wl,$e+"."+ad),"null"})}else if(hl in ut){var qe=ut[hl];return ba(qe,function(Xe,it){var Le=Xe.invoke(it,qe),$e=Xe.shared,Ie=$e.framebuffer,rt=it.def(Ie,".getFramebuffer(",Le,")");Oe.optional(function(){Xe.assert(it,"!"+Le+"||"+rt,"invalid framebuffer object")}),it.set(Ie,".next",rt);var vt=$e.context;return it.set(vt,"."+kc,rt+"?"+rt+".width:"+vt+"."+Ih),it.set(vt,"."+Wl,rt+"?"+rt+".height:"+vt+"."+ad),rt})}else return null}function si(Ge,we,We){var ut=Ge.static,dt=Ge.dynamic;function qe(Le){if(Le in ut){var $e=ut[Le];Oe.commandType($e,"object","invalid "+Le,We.commandStr);var Ie=!0,rt=$e.x|0,vt=$e.y|0,Vt,Ht;return"width"in $e?(Vt=$e.width|0,Oe.command(Vt>=0,"invalid "+Le,We.commandStr)):Ie=!1,"height"in $e?(Ht=$e.height|0,Oe.command(Ht>=0,"invalid "+Le,We.commandStr)):Ie=!1,new za(!Ie&&we&&we.thisDep,!Ie&&we&&we.contextDep,!Ie&&we&&we.propDep,function(sr,zr){var Kn=sr.shared.context,fr=Vt;"width"in $e||(fr=zr.def(Kn,".",kc,"-",rt));var tr=Ht;return"height"in $e||(tr=zr.def(Kn,".",Wl,"-",vt)),[rt,vt,fr,tr]})}else if(Le in dt){var Lt=dt[Le],gn=ba(Lt,function(sr,zr){var Kn=sr.invoke(zr,Lt);Oe.optional(function(){sr.assert(zr,Kn+"&&typeof "+Kn+'==="object"',"invalid "+Le)});var fr=sr.shared.context,tr=zr.def(Kn,".x|0"),Pi=zr.def(Kn,".y|0"),rs=zr.def('"width" in ',Kn,"?",Kn,".width|0:","(",fr,".",kc,"-",tr,")"),Do=zr.def('"height" in ',Kn,"?",Kn,".height|0:","(",fr,".",Wl,"-",Pi,")");return Oe.optional(function(){sr.assert(zr,rs+">=0&&"+Do+">=0","invalid "+Le)}),[tr,Pi,rs,Do]});return we&&(gn.thisDep=gn.thisDep||we.thisDep,gn.contextDep=gn.contextDep||we.contextDep,gn.propDep=gn.propDep||we.propDep),gn}else return we?new za(we.thisDep,we.contextDep,we.propDep,function(sr,zr){var Kn=sr.shared.context;return[0,0,zr.def(Kn,".",kc),zr.def(Kn,".",Wl)]}):null}var Xe=qe(jl);if(Xe){var it=Xe;Xe=new za(Xe.thisDep,Xe.contextDep,Xe.propDep,function(Le,$e){var Ie=it.append(Le,$e),rt=Le.shared.context;return $e.set(rt,"."+Gf,Ie[2]),$e.set(rt,"."+Ff,Ie[3]),Ie})}return{viewport:Xe,scissor_box:qe(Hd)}}function Dr(Ge,we){var We=Ge.static,ut=typeof We[Lf]=="string"&&typeof We[gc]=="string";if(ut){if(Object.keys(we.dynamic).length>0)return null;var dt=we.static,qe=Object.keys(dt);if(qe.length>0&&typeof dt[qe[0]]=="number"){for(var Xe=[],it=0;it<qe.length;++it)Oe(typeof dt[qe[it]]=="number","must specify all vertex attribute locations when using vaos"),Xe.push([dt[qe[it]]|0,qe[it]]);return Xe}}return null}function $r(Ge,we,We){var ut=Ge.static,dt=Ge.dynamic;function qe(Ie){if(Ie in ut){var rt=Pe.id(ut[Ie]);Oe.optional(function(){fn.shader(Qd[Ie],rt,Oe.guessCommand())});var vt=ds(function(){return rt});return vt.id=rt,vt}else if(Ie in dt){var Vt=dt[Ie];return ba(Vt,function(Ht,Lt){var gn=Ht.invoke(Lt,Vt),sr=Lt.def(Ht.shared.strings,".id(",gn,")");return Oe.optional(function(){Lt(Ht.shared.shader,".shader(",Qd[Ie],",",sr,",",Ht.command,");")}),sr})}return null}var Xe=qe(Lf),it=qe(gc),Le=null,$e;return ml(Xe)&&ml(it)?(Le=fn.program(it.id,Xe.id,null,We),$e=ds(function(Ie,rt){return Ie.link(Le)})):$e=new za(Xe&&Xe.thisDep||it&&it.thisDep,Xe&&Xe.contextDep||it&&it.contextDep,Xe&&Xe.propDep||it&&it.propDep,function(Ie,rt){var vt=Ie.shared.shader,Vt;Xe?Vt=Xe.append(Ie,rt):Vt=rt.def(vt,".",Lf);var Ht;it?Ht=it.append(Ie,rt):Ht=rt.def(vt,".",gc);var Lt=vt+".program("+Ht+","+Vt;return Oe.optional(function(){Lt+=","+Ie.command}),rt.def(Lt+")")}),{frag:Xe,vert:it,progVar:$e,program:Le}}function Ti(Ge,we){var We=Ge.static,ut=Ge.dynamic;function dt(){if($d in We){var Ie=We[$d];Lp(Ie)?Ie=xt.getElements(xt.create(Ie,!0)):Ie&&(Ie=xt.getElements(Ie),Oe.command(Ie,"invalid elements",we.commandStr));var rt=ds(function(Vt,Ht){if(Ie){var Lt=Vt.link(Ie);return Vt.ELEMENTS=Lt,Lt}return Vt.ELEMENTS=null,null});return rt.value=Ie,rt}else if($d in ut){var vt=ut[$d];return ba(vt,function(Vt,Ht){var Lt=Vt.shared,gn=Lt.isBufferArgs,sr=Lt.elements,zr=Vt.invoke(Ht,vt),Kn=Ht.def("null"),fr=Ht.def(gn,"(",zr,")"),tr=Vt.cond(fr).then(Kn,"=",sr,".createStream(",zr,");").else(Kn,"=",sr,".getElements(",zr,");");return Oe.optional(function(){Vt.assert(tr.else,"!"+zr+"||"+Kn,"invalid elements")}),Ht.entry(tr),Ht.exit(Vt.cond(fr).then(sr,".destroyStream(",Kn,");")),Vt.ELEMENTS=Kn,Kn})}return null}var qe=dt();function Xe(){if(vc in We){var Ie=We[vc];return Oe.commandParameter(Ie,se,"invalid primitve",we.commandStr),ds(function(vt,Vt){return se[Ie]})}else if(vc in ut){var rt=ut[vc];return ba(rt,function(vt,Vt){var Ht=vt.constants.primTypes,Lt=vt.invoke(Vt,rt);return Oe.optional(function(){vt.assert(Vt,Lt+" in "+Ht,"invalid primitive, must be one of "+Object.keys(se))}),Vt.def(Ht,"[",Lt,"]")})}else if(qe)return ml(qe)?qe.value?ds(function(vt,Vt){return Vt.def(vt.ELEMENTS,".primType")}):ds(function(){return kp}):new za(qe.thisDep,qe.contextDep,qe.propDep,function(vt,Vt){var Ht=vt.ELEMENTS;return Vt.def(Ht,"?",Ht,".primType:",kp)});return null}function it(Ie,rt){if(Ie in We){var vt=We[Ie]|0;return Oe.command(!rt||vt>=0,"invalid "+Ie,we.commandStr),ds(function(Ht,Lt){return rt&&(Ht.OFFSET=vt),vt})}else if(Ie in ut){var Vt=ut[Ie];return ba(Vt,function(Ht,Lt){var gn=Ht.invoke(Lt,Vt);return rt&&(Ht.OFFSET=gn,Oe.optional(function(){Ht.assert(Lt,gn+">=0","invalid "+Ie)})),gn})}else if(rt&&qe)return ds(function(Ht,Lt){return Ht.OFFSET="0",0});return null}var Le=it(Dp,!0);function $e(){if($l in We){var Ie=We[$l]|0;return Oe.command(typeof Ie=="number"&&Ie>=0,"invalid vertex count",we.commandStr),ds(function(){return Ie})}else if($l in ut){var rt=ut[$l];return ba(rt,function(Ht,Lt){var gn=Ht.invoke(Lt,rt);return Oe.optional(function(){Ht.assert(Lt,"typeof "+gn+'==="number"&&'+gn+">=0&&"+gn+"===("+gn+"|0)","invalid vertex count")}),gn})}else if(qe)if(ml(qe)){if(qe)return Le?new za(Le.thisDep,Le.contextDep,Le.propDep,function(Ht,Lt){var gn=Lt.def(Ht.ELEMENTS,".vertCount-",Ht.OFFSET);return Oe.optional(function(){Ht.assert(Lt,gn+">=0","invalid vertex offset/element buffer too small")}),gn}):ds(function(Ht,Lt){return Lt.def(Ht.ELEMENTS,".vertCount")});var vt=ds(function(){return-1});return Oe.optional(function(){vt.MISSING=!0}),vt}else{var Vt=new za(qe.thisDep||Le.thisDep,qe.contextDep||Le.contextDep,qe.propDep||Le.propDep,function(Ht,Lt){var gn=Ht.ELEMENTS;return Ht.OFFSET?Lt.def(gn,"?",gn,".vertCount-",Ht.OFFSET,":-1"):Lt.def(gn,"?",gn,".vertCount:-1")});return Oe.optional(function(){Vt.DYNAMIC=!0}),Vt}return null}return{elements:qe,primitive:Xe(),count:$e(),instances:it(yu,!1),offset:Le}}function Qo(Ge,we){var We=Ge.static,ut=Ge.dynamic,dt={};return Wt.forEach(function(qe){var Xe=An(qe);function it(Le,$e){if(qe in We){var Ie=Le(We[qe]);dt[Xe]=ds(function(){return Ie})}else if(qe in ut){var rt=ut[qe];dt[Xe]=ba(rt,function(vt,Vt){return $e(vt,Vt,vt.invoke(Vt,rt))})}}switch(qe){case Vd:case D0:case Ng:case kf:case na:case Nh:case If:case Dh:case Ul:case Nc:return it(function(Le){return Oe.commandType(Le,"boolean",qe,we.commandStr),Le},function(Le,$e,Ie){return Oe.optional(function(){Le.assert($e,"typeof "+Ie+'==="boolean"',"invalid flag "+qe,Le.commandStr)}),Ie});case Ph:return it(function(Le){return Oe.commandParameter(Le,Fh,"invalid "+qe,we.commandStr),Fh[Le]},function(Le,$e,Ie){var rt=Le.constants.compareFuncs;return Oe.optional(function(){Le.assert($e,Ie+" in "+rt,"invalid "+qe+", must be one of "+Object.keys(Fh))}),$e.def(rt,"[",Ie,"]")});case Pp:return it(function(Le){return Oe.command(fi(Le)&&Le.length===2&&typeof Le[0]=="number"&&typeof Le[1]=="number"&&Le[0]<=Le[1],"depth range is 2d array",we.commandStr),Le},function(Le,$e,Ie){Oe.optional(function(){Le.assert($e,Le.shared.isArrayLike+"("+Ie+")&&"+Ie+".length===2&&typeof "+Ie+'[0]==="number"&&typeof '+Ie+'[1]==="number"&&'+Ie+"[0]<="+Ie+"[1]","depth range must be a 2d array")});var rt=$e.def("+",Ie,"[0]"),vt=$e.def("+",Ie,"[1]");return[rt,vt]});case Op:return it(function(Le){Oe.commandType(Le,"object","blend.func",we.commandStr);var $e="srcRGB"in Le?Le.srcRGB:Le.src,Ie="srcAlpha"in Le?Le.srcAlpha:Le.src,rt="dstRGB"in Le?Le.dstRGB:Le.dst,vt="dstAlpha"in Le?Le.dstAlpha:Le.dst;return Oe.commandParameter($e,vl,Xe+".srcRGB",we.commandStr),Oe.commandParameter(Ie,vl,Xe+".srcAlpha",we.commandStr),Oe.commandParameter(rt,vl,Xe+".dstRGB",we.commandStr),Oe.commandParameter(vt,vl,Xe+".dstAlpha",we.commandStr),Oe.command(jf.indexOf($e+", "+rt)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+$e+", "+rt+")",we.commandStr),[vl[$e],vl[rt],vl[Ie],vl[vt]]},function(Le,$e,Ie){var rt=Le.constants.blendFuncs;Oe.optional(function(){Le.assert($e,Ie+"&&typeof "+Ie+'==="object"',"invalid blend func, must be an object")});function vt(Kn,fr){var tr=$e.def('"',Kn,fr,'" in ',Ie,"?",Ie,".",Kn,fr,":",Ie,".",Kn);return Oe.optional(function(){Le.assert($e,tr+" in "+rt,"invalid "+qe+"."+Kn+fr+", must be one of "+Object.keys(vl))}),tr}var Vt=vt("src","RGB"),Ht=vt("dst","RGB");Oe.optional(function(){var Kn=Le.constants.invalidBlendCombinations;Le.assert($e,Kn+".indexOf("+Vt+'+", "+'+Ht+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Lt=$e.def(rt,"[",Vt,"]"),gn=$e.def(rt,"[",vt("src","Alpha"),"]"),sr=$e.def(rt,"[",Ht,"]"),zr=$e.def(rt,"[",vt("dst","Alpha"),"]");return[Lt,sr,gn,zr]});case Mp:return it(function(Le){if(typeof Le=="string")return Oe.commandParameter(Le,Rt,"invalid "+qe,we.commandStr),[Rt[Le],Rt[Le]];if(typeof Le=="object")return Oe.commandParameter(Le.rgb,Rt,qe+".rgb",we.commandStr),Oe.commandParameter(Le.alpha,Rt,qe+".alpha",we.commandStr),[Rt[Le.rgb],Rt[Le.alpha]];Oe.commandRaise("invalid blend.equation",we.commandStr)},function(Le,$e,Ie){var rt=Le.constants.blendEquations,vt=$e.def(),Vt=$e.def(),Ht=Le.cond("typeof ",Ie,'==="string"');return Oe.optional(function(){function Lt(gn,sr,zr){Le.assert(gn,zr+" in "+rt,"invalid "+sr+", must be one of "+Object.keys(Rt))}Lt(Ht.then,qe,Ie),Le.assert(Ht.else,Ie+"&&typeof "+Ie+'==="object"',"invalid "+qe),Lt(Ht.else,qe+".rgb",Ie+".rgb"),Lt(Ht.else,qe+".alpha",Ie+".alpha")}),Ht.then(vt,"=",Vt,"=",rt,"[",Ie,"];"),Ht.else(vt,"=",rt,"[",Ie,".rgb];",Vt,"=",rt,"[",Ie,".alpha];"),$e(Ht),[vt,Vt]});case Nf:return it(function(Le){return Oe.command(fi(Le)&&Le.length===4,"blend.color must be a 4d array",we.commandStr),xs(4,function($e){return+Le[$e]})},function(Le,$e,Ie){return Oe.optional(function(){Le.assert($e,Le.shared.isArrayLike+"("+Ie+")&&"+Ie+".length===4","blend.color must be a 4d array")}),xs(4,function(rt){return $e.def("+",Ie,"[",rt,"]")})});case Vl:return it(function(Le){return Oe.commandType(Le,"number",Xe,we.commandStr),Le|0},function(Le,$e,Ie){return Oe.optional(function(){Le.assert($e,"typeof "+Ie+'==="number"',"invalid stencil.mask")}),$e.def(Ie,"|0")});case mu:return it(function(Le){Oe.commandType(Le,"object",Xe,we.commandStr);var $e=Le.cmp||"keep",Ie=Le.ref||0,rt="mask"in Le?Le.mask:-1;return Oe.commandParameter($e,Fh,qe+".cmp",we.commandStr),Oe.commandType(Ie,"number",qe+".ref",we.commandStr),Oe.commandType(rt,"number",qe+".mask",we.commandStr),[Fh[$e],Ie,rt]},function(Le,$e,Ie){var rt=Le.constants.compareFuncs;Oe.optional(function(){function Lt(){Le.assert($e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Lt(Ie+"&&typeof ",Ie,'==="object"'),Lt('!("cmp" in ',Ie,")||(",Ie,".cmp in ",rt,")")});var vt=$e.def('"cmp" in ',Ie,"?",rt,"[",Ie,".cmp]",":",ls),Vt=$e.def(Ie,".ref|0"),Ht=$e.def('"mask" in ',Ie,"?",Ie,".mask|0:-1");return[vt,Vt,Ht]});case Ic:case Rc:return it(function(Le){Oe.commandType(Le,"object",Xe,we.commandStr);var $e=Le.fail||"keep",Ie=Le.zfail||"keep",rt=Le.zpass||"keep";return Oe.commandParameter($e,us,qe+".fail",we.commandStr),Oe.commandParameter(Ie,us,qe+".zfail",we.commandStr),Oe.commandParameter(rt,us,qe+".zpass",we.commandStr),[qe===Rc?gl:kh,us[$e],us[Ie],us[rt]]},function(Le,$e,Ie){var rt=Le.constants.stencilOps;Oe.optional(function(){Le.assert($e,Ie+"&&typeof "+Ie+'==="object"',"invalid "+qe)});function vt(Vt){return Oe.optional(function(){Le.assert($e,'!("'+Vt+'" in '+Ie+")||("+Ie+"."+Vt+" in "+rt+")","invalid "+qe+"."+Vt+", must be one of "+Object.keys(us))}),$e.def('"',Vt,'" in ',Ie,"?",rt,"[",Ie,".",Vt,"]:",ls)}return[qe===Rc?gl:kh,vt("fail"),vt("zfail"),vt("zpass")]});case jd:return it(function(Le){Oe.commandType(Le,"object",Xe,we.commandStr);var $e=Le.factor|0,Ie=Le.units|0;return Oe.commandType($e,"number",Xe+".factor",we.commandStr),Oe.commandType(Ie,"number",Xe+".units",we.commandStr),[$e,Ie]},function(Le,$e,Ie){Oe.optional(function(){Le.assert($e,Ie+"&&typeof "+Ie+'==="object"',"invalid "+qe)});var rt=$e.def(Ie,".factor|0"),vt=$e.def(Ie,".units|0");return[rt,vt]});case vu:return it(function(Le){var $e=0;return Le==="front"?$e=kh:Le==="back"&&($e=gl),Oe.command(!!$e,Xe,we.commandStr),$e},function(Le,$e,Ie){return Oe.optional(function(){Le.assert($e,Ie+'==="front"||'+Ie+'==="back"',"invalid cull.face")}),$e.def(Ie,'==="front"?',kh,":",gl)});case ra:return it(function(Le){return Oe.command(typeof Le=="number"&&Le>=Et.lineWidthDims[0]&&Le<=Et.lineWidthDims[1],"invalid line width, must be a positive number between "+Et.lineWidthDims[0]+" and "+Et.lineWidthDims[1],we.commandStr),Le},function(Le,$e,Ie){return Oe.optional(function(){Le.assert($e,"typeof "+Ie+'==="number"&&'+Ie+">="+Et.lineWidthDims[0]+"&&"+Ie+"<="+Et.lineWidthDims[1],"invalid line width")}),Ie});case Ig:return it(function(Le){return Oe.commandParameter(Le,eh,Xe,we.commandStr),eh[Le]},function(Le,$e,Ie){return Oe.optional(function(){Le.assert($e,Ie+'==="cw"||'+Ie+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),$e.def(Ie+'==="cw"?'+wu+":"+Xc)});case $c:return it(function(Le){return Oe.command(fi(Le)&&Le.length===4,"color.mask must be length 4 array",we.commandStr),Le.map(function($e){return!!$e})},function(Le,$e,Ie){return Oe.optional(function(){Le.assert($e,Le.shared.isArrayLike+"("+Ie+")&&"+Ie+".length===4","invalid color.mask")}),xs(4,function(rt){return"!!"+Ie+"["+rt+"]"})});case Rf:return it(function(Le){Oe.command(typeof Le=="object"&&Le,Xe,we.commandStr);var $e="value"in Le?Le.value:1,Ie=!!Le.invert;return Oe.command(typeof $e=="number"&&$e>=0&&$e<=1,"sample.coverage.value must be a number between 0 and 1",we.commandStr),[$e,Ie]},function(Le,$e,Ie){Oe.optional(function(){Le.assert($e,Ie+"&&typeof "+Ie+'==="object"',"invalid sample.coverage")});var rt=$e.def('"value" in ',Ie,"?+",Ie,".value:1"),vt=$e.def("!!",Ie,".invert");return[rt,vt]})}}),dt}function hs(Ge,we){var We=Ge.static,ut=Ge.dynamic,dt={};return Object.keys(We).forEach(function(qe){var Xe=We[qe],it;if(typeof Xe=="number"||typeof Xe=="boolean")it=ds(function(){return Xe});else if(typeof Xe=="function"){var Le=Xe._reglType;Le==="texture2d"||Le==="textureCube"?it=ds(function($e){return $e.link(Xe)}):Le==="framebuffer"||Le==="framebufferCube"?(Oe.command(Xe.color.length>0,'missing color attachment for framebuffer sent to uniform "'+qe+'"',we.commandStr),it=ds(function($e){return $e.link(Xe.color[0])})):Oe.commandRaise('invalid data for uniform "'+qe+'"',we.commandStr)}else fi(Xe)?it=ds(function($e){var Ie=$e.global.def("[",xs(Xe.length,function(rt){return Oe.command(typeof Xe[rt]=="number"||typeof Xe[rt]=="boolean","invalid uniform "+qe,$e.commandStr),Xe[rt]}),"]");return Ie}):Oe.commandRaise('invalid or missing data for uniform "'+qe+'"',we.commandStr);it.value=Xe,dt[qe]=it}),Object.keys(ut).forEach(function(qe){var Xe=ut[qe];dt[qe]=ba(Xe,function(it,Le){return it.invoke(Le,Xe)})}),dt}function Jr(Ge,we){var We=Ge.static,ut=Ge.dynamic,dt={};return Object.keys(We).forEach(function(qe){var Xe=We[qe],it=Pe.id(qe),Le=new ht;if(Lp(Xe))Le.state=$s,Le.buffer=ft.getBuffer(ft.create(Xe,Xl,!1,!0)),Le.type=0;else{var $e=ft.getBuffer(Xe);if($e)Le.state=$s,Le.buffer=$e,Le.type=0;else if(Oe.command(typeof Xe=="object"&&Xe,"invalid data for attribute "+qe,we.commandStr),"constant"in Xe){var Ie=Xe.constant;Le.buffer="null",Le.state=od,typeof Ie=="number"?Le.x=Ie:(Oe.command(fi(Ie)&&Ie.length>0&&Ie.length<=4,"invalid constant for attribute "+qe,we.commandStr),jc.forEach(function(sr,zr){zr<Ie.length&&(Le[sr]=Ie[zr])}))}else{Lp(Xe.buffer)?$e=ft.getBuffer(ft.create(Xe.buffer,Xl,!1,!0)):$e=ft.getBuffer(Xe.buffer),Oe.command(!!$e,'missing buffer for attribute "'+qe+'"',we.commandStr);var rt=Xe.offset|0;Oe.command(rt>=0,'invalid offset for attribute "'+qe+'"',we.commandStr);var vt=Xe.stride|0;Oe.command(vt>=0&&vt<256,'invalid stride for attribute "'+qe+'", must be integer betweeen [0, 255]',we.commandStr);var Vt=Xe.size|0;Oe.command(!("size"in Xe)||Vt>0&&Vt<=4,'invalid size for attribute "'+qe+'", must be 1,2,3,4',we.commandStr);var Ht=!!Xe.normalized,Lt=0;"type"in Xe&&(Oe.commandParameter(Xe.type,Us,"invalid type for attribute "+qe,we.commandStr),Lt=Us[Xe.type]);var gn=Xe.divisor|0;"divisor"in Xe&&(Oe.command(gn===0||vn,'cannot specify divisor for attribute "'+qe+'", instancing not supported',we.commandStr),Oe.command(gn>=0,'invalid divisor for attribute "'+qe+'"',we.commandStr)),Oe.optional(function(){var sr=we.commandStr,zr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Xe).forEach(function(Kn){Oe.command(zr.indexOf(Kn)>=0,'unknown parameter "'+Kn+'" for attribute pointer "'+qe+'" (valid parameters are '+zr+")",sr)})}),Le.buffer=$e,Le.state=$s,Le.size=Vt,Le.normalized=Ht,Le.type=Lt||$e.dtype,Le.offset=rt,Le.stride=vt,Le.divisor=gn}}dt[qe]=ds(function(sr,zr){var Kn=sr.attribCache;if(it in Kn)return Kn[it];var fr={isStream:!1};return Object.keys(Le).forEach(function(tr){fr[tr]=Le[tr]}),Le.buffer&&(fr.buffer=sr.link(Le.buffer),fr.type=fr.type||fr.buffer+".dtype"),Kn[it]=fr,fr})}),Object.keys(ut).forEach(function(qe){var Xe=ut[qe];function it(Le,$e){var Ie=Le.invoke($e,Xe),rt=Le.shared,vt=Le.constants,Vt=rt.isBufferArgs,Ht=rt.buffer;Oe.optional(function(){Le.assert($e,Ie+"&&(typeof "+Ie+'==="object"||typeof '+Ie+'==="function")&&('+Vt+"("+Ie+")||"+Ht+".getBuffer("+Ie+")||"+Ht+".getBuffer("+Ie+".buffer)||"+Vt+"("+Ie+'.buffer)||("constant" in '+Ie+"&&(typeof "+Ie+'.constant==="number"||'+rt.isArrayLike+"("+Ie+".constant))))",'invalid dynamic attribute "'+qe+'"')});var Lt={isStream:$e.def(!1)},gn=new ht;gn.state=$s,Object.keys(gn).forEach(function(fr){Lt[fr]=$e.def(""+gn[fr])});var sr=Lt.buffer,zr=Lt.type;$e("if(",Vt,"(",Ie,")){",Lt.isStream,"=true;",sr,"=",Ht,".createStream(",Xl,",",Ie,");",zr,"=",sr,".dtype;","}else{",sr,"=",Ht,".getBuffer(",Ie,");","if(",sr,"){",zr,"=",sr,".dtype;",'}else if("constant" in ',Ie,"){",Lt.state,"=",od,";","if(typeof "+Ie+'.constant === "number"){',Lt[jc[0]],"=",Ie,".constant;",jc.slice(1).map(function(fr){return Lt[fr]}).join("="),"=0;","}else{",jc.map(function(fr,tr){return Lt[fr]+"="+Ie+".constant.length>"+tr+"?"+Ie+".constant["+tr+"]:0;"}).join(""),"}}else{","if(",Vt,"(",Ie,".buffer)){",sr,"=",Ht,".createStream(",Xl,",",Ie,".buffer);","}else{",sr,"=",Ht,".getBuffer(",Ie,".buffer);","}",zr,'="type" in ',Ie,"?",vt.glTypes,"[",Ie,".type]:",sr,".dtype;",Lt.normalized,"=!!",Ie,".normalized;");function Kn(fr){$e(Lt[fr],"=",Ie,".",fr,"|0;")}return Kn("size"),Kn("offset"),Kn("stride"),Kn("divisor"),$e("}}"),$e.exit("if(",Lt.isStream,"){",Ht,".destroyStream(",sr,");","}"),Lt}dt[qe]=ba(Xe,it)}),dt}function fs(Ge,we){var We=Ge.static,ut=Ge.dynamic;if(bu in We){var dt=We[bu];return dt!==null&&pn.getVAO(dt)===null&&(dt=pn.createVAO(dt)),ds(function(Xe){return Xe.link(pn.getVAO(dt))})}else if(bu in ut){var qe=ut[bu];return ba(qe,function(Xe,it){var Le=Xe.invoke(it,qe);return it.def(Xe.shared.vao+".getVAO("+Le+")")})}return null}function yo(Ge){var we=Ge.static,We=Ge.dynamic,ut={};return Object.keys(we).forEach(function(dt){var qe=we[dt];ut[dt]=ds(function(Xe,it){return typeof qe=="number"||typeof qe=="boolean"?""+qe:Xe.link(qe)})}),Object.keys(We).forEach(function(dt){var qe=We[dt];ut[dt]=ba(qe,function(Xe,it){return Xe.invoke(it,qe)})}),ut}function ps(Ge,we,We,ut,dt){var qe=Ge.static,Xe=Ge.dynamic;Oe.optional(function(){var Kn=[hl,gc,Lf,$d,vc,Dp,$l,yu,Hl,bu].concat(Wt);function fr(tr){Object.keys(tr).forEach(function(Pi){Oe.command(Kn.indexOf(Pi)>=0,'unknown parameter "'+Pi+'"',dt.commandStr)})}fr(qe),fr(Xe)});var it=Dr(Ge,we),Le=Yn(Ge,dt),$e=si(Ge,Le,dt),Ie=Ti(Ge,dt),rt=Qo(Ge,dt),vt=$r(Ge,dt,it);function Vt(Kn){var fr=$e[Kn];fr&&(rt[Kn]=fr)}Vt(jl),Vt(An(Hd));var Ht=Object.keys(rt).length>0,Lt={framebuffer:Le,draw:Ie,shader:vt,state:rt,dirty:Ht,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Lt.profile=Fr(Ge,dt),Lt.uniforms=hs(We,dt),Lt.drawVAO=Lt.scopeVAO=fs(Ge,dt),!Lt.drawVAO&&vt.program&&!it&&ze.angle_instanced_arrays){var gn=!0,sr=vt.program.attributes.map(function(Kn){var fr=we.static[Kn];return gn=gn&&!!fr,fr});if(gn&&sr.length>0){var zr=pn.getVAO(pn.createVAO(sr));Lt.drawVAO=new za(null,null,null,function(Kn,fr){return Kn.link(zr)}),Lt.useVAO=!0}}return it?Lt.useVAO=!0:Lt.attributes=Jr(we,dt),Lt.context=yo(ut,dt),Lt}function es(Ge,we,We){var ut=Ge.shared,dt=ut.context,qe=Ge.scope();Object.keys(We).forEach(function(Xe){we.save(dt,"."+Xe);var it=We[Xe],Le=it.append(Ge,we);Array.isArray(Le)?qe(dt,".",Xe,"=[",Le.join(),"];"):qe(dt,".",Xe,"=",Le,";")}),we(qe)}function ts(Ge,we,We,ut){var dt=Ge.shared,qe=dt.gl,Xe=dt.framebuffer,it;zn&&(it=we.def(dt.extensions,".webgl_draw_buffers"));var Le=Ge.constants,$e=Le.drawBuffer,Ie=Le.backBuffer,rt;We?rt=We.append(Ge,we):rt=we.def(Xe,".next"),ut||we("if(",rt,"!==",Xe,".cur){"),we("if(",rt,"){",qe,".bindFramebuffer(",Lh,",",rt,".framebuffer);"),zn&&we(it,".drawBuffersWEBGL(",$e,"[",rt,".colorAttachments.length]);"),we("}else{",qe,".bindFramebuffer(",Lh,",null);"),zn&&we(it,".drawBuffersWEBGL(",Ie,");"),we("}",Xe,".cur=",rt,";"),ut||we("}")}function Co(Ge,we,We){var ut=Ge.shared,dt=ut.gl,qe=Ge.current,Xe=Ge.next,it=ut.current,Le=ut.next,$e=Ge.cond(it,".dirty");Wt.forEach(function(Ie){var rt=An(Ie);if(!(rt in We.state)){var vt,Vt;if(rt in Xe){vt=Xe[rt],Vt=qe[rt];var Ht=xs(tn[rt].length,function(gn){return $e.def(vt,"[",gn,"]")});$e(Ge.cond(Ht.map(function(gn,sr){return gn+"!=="+Vt+"["+sr+"]"}).join("||")).then(dt,".",nn[rt],"(",Ht,");",Ht.map(function(gn,sr){return Vt+"["+sr+"]="+gn}).join(";"),";"))}else{vt=$e.def(Le,".",rt);var Lt=Ge.cond(vt,"!==",it,".",rt);$e(Lt),rt in _n?Lt(Ge.cond(vt).then(dt,".enable(",_n[rt],");").else(dt,".disable(",_n[rt],");"),it,".",rt,"=",vt,";"):Lt(dt,".",nn[rt],"(",vt,");",it,".",rt,"=",vt,";")}}}),Object.keys(We.state).length===0&&$e(it,".dirty=false;"),we($e)}function ns(Ge,we,We,ut){var dt=Ge.shared,qe=Ge.current,Xe=dt.current,it=dt.gl;Hf(Object.keys(We)).forEach(function(Le){var $e=We[Le];if(!(ut&&!ut($e))){var Ie=$e.append(Ge,we);if(_n[Le]){var rt=_n[Le];ml($e)?Ie?we(it,".enable(",rt,");"):we(it,".disable(",rt,");"):we(Ge.cond(Ie).then(it,".enable(",rt,");").else(it,".disable(",rt,");")),we(Xe,".",Le,"=",Ie,";")}else if(fi(Ie)){var vt=qe[Le];we(it,".",nn[Le],"(",Ie,");",Ie.map(function(Vt,Ht){return vt+"["+Ht+"]="+Vt}).join(";"),";")}else we(it,".",nn[Le],"(",Ie,");",Xe,".",Le,"=",Ie,";")}})}function gs(Ge,we){vn&&(Ge.instancing=we.def(Ge.shared.extensions,".angle_instanced_arrays"))}function Br(Ge,we,We,ut,dt){var qe=Ge.shared,Xe=Ge.stats,it=qe.current,Le=qe.timer,$e=We.profile;function Ie(){return typeof performance>"u"?"Date.now()":"performance.now()"}var rt,vt;function Vt(Kn){rt=we.def(),Kn(rt,"=",Ie(),";"),typeof dt=="string"?Kn(Xe,".count+=",dt,";"):Kn(Xe,".count++;"),ln&&(ut?(vt=we.def(),Kn(vt,"=",Le,".getNumPendingQueries();")):Kn(Le,".beginQuery(",Xe,");"))}function Ht(Kn){Kn(Xe,".cpuTime+=",Ie(),"-",rt,";"),ln&&(ut?Kn(Le,".pushScopeStats(",vt,",",Le,".getNumPendingQueries(),",Xe,");"):Kn(Le,".endQuery();"))}function Lt(Kn){var fr=we.def(it,".profile");we(it,".profile=",Kn,";"),we.exit(it,".profile=",fr,";")}var gn;if($e){if(ml($e)){$e.enable?(Vt(we),Ht(we.exit),Lt("true")):Lt("false");return}gn=$e.append(Ge,we),Lt(gn)}else gn=we.def(it,".profile");var sr=Ge.block();Vt(sr),we("if(",gn,"){",sr,"}");var zr=Ge.block();Ht(zr),we.exit("if(",gn,"){",zr,"}")}function Fo(Ge,we,We,ut,dt){var qe=Ge.shared;function Xe(Le){switch(Le){case Cu:case Uf:case ud:return 2;case Ps:case Wo:case Vf:return 3;case Ga:case Ds:case ia:return 4;default:return 1}}function it(Le,$e,Ie){var rt=qe.gl,vt=we.def(Le,".location"),Vt=we.def(qe.attributes,"[",vt,"]"),Ht=Ie.state,Lt=Ie.buffer,gn=[Ie.x,Ie.y,Ie.z,Ie.w],sr=["buffer","normalized","offset","stride"];function zr(){we("if(!",Vt,".buffer){",rt,".enableVertexAttribArray(",vt,");}");var fr=Ie.type,tr;if(Ie.size?tr=we.def(Ie.size,"||",$e):tr=$e,we("if(",Vt,".type!==",fr,"||",Vt,".size!==",tr,"||",sr.map(function(rs){return Vt+"."+rs+"!=="+Ie[rs]}).join("||"),"){",rt,".bindBuffer(",Xl,",",Lt,".buffer);",rt,".vertexAttribPointer(",[vt,tr,fr,Ie.normalized,Ie.stride,Ie.offset],");",Vt,".type=",fr,";",Vt,".size=",tr,";",sr.map(function(rs){return Vt+"."+rs+"="+Ie[rs]+";"}).join(""),"}"),vn){var Pi=Ie.divisor;we("if(",Vt,".divisor!==",Pi,"){",Ge.instancing,".vertexAttribDivisorANGLE(",[vt,Pi],");",Vt,".divisor=",Pi,";}")}}function Kn(){we("if(",Vt,".buffer){",rt,".disableVertexAttribArray(",vt,");",Vt,".buffer=null;","}if(",jc.map(function(fr,tr){return Vt+"."+fr+"!=="+gn[tr]}).join("||"),"){",rt,".vertexAttrib4f(",vt,",",gn,");",jc.map(function(fr,tr){return Vt+"."+fr+"="+gn[tr]+";"}).join(""),"}")}Ht===$s?zr():Ht===od?Kn():(we("if(",Ht,"===",$s,"){"),zr(),we("}else{"),Kn(),we("}"))}ut.forEach(function(Le){var $e=Le.name,Ie=We.attributes[$e],rt;if(Ie){if(!dt(Ie))return;rt=Ie.append(Ge,we)}else{if(!dt(Gp))return;var vt=Ge.scopeAttrib($e);Oe.optional(function(){Ge.assert(we,vt+".state","missing attribute "+$e)}),rt={},Object.keys(new ht).forEach(function(Vt){rt[Vt]=we.def(vt,".",Vt)})}it(Ge.link(Le),Xe(Le.info.type),rt)})}function Ii(Ge,we,We,ut,dt){for(var qe=Ge.shared,Xe=qe.gl,it,Le=0;Le<ut.length;++Le){var $e=ut[Le],Ie=$e.name,rt=$e.info.type,vt=We.uniforms[Ie],Vt=Ge.link($e),Ht=Vt+".location",Lt;if(vt){if(!dt(vt))continue;if(ml(vt)){var gn=vt.value;if(Oe.command(gn!==null&&typeof gn<"u",'missing uniform "'+Ie+'"',Ge.commandStr),rt===qd||rt===Jd){Oe.command(typeof gn=="function"&&(rt===qd&&(gn._reglType==="texture2d"||gn._reglType==="framebuffer")||rt===Jd&&(gn._reglType==="textureCube"||gn._reglType==="framebufferCube")),"invalid texture for uniform "+Ie,Ge.commandStr);var sr=Ge.link(gn._texture||gn.color[0]._texture);we(Xe,".uniform1i(",Ht,",",sr+".bind());"),we.exit(sr,".unbind();")}else if(rt===Fa||rt===vi||rt===Ba){Oe.optional(function(){Oe.command(fi(gn),"invalid matrix for uniform "+Ie,Ge.commandStr),Oe.command(rt===Fa&&gn.length===4||rt===vi&&gn.length===9||rt===Ba&&gn.length===16,"invalid length for matrix uniform "+Ie,Ge.commandStr)});var zr=Ge.global.def("new Float32Array(["+Array.prototype.slice.call(gn)+"])"),Kn=2;rt===vi?Kn=3:rt===Ba&&(Kn=4),we(Xe,".uniformMatrix",Kn,"fv(",Ht,",false,",zr,");")}else{switch(rt){case ld:Oe.commandType(gn,"number","uniform "+Ie,Ge.commandStr),it="1f";break;case Cu:Oe.command(fi(gn)&&gn.length===2,"uniform "+Ie,Ge.commandStr),it="2f";break;case Ps:Oe.command(fi(gn)&&gn.length===3,"uniform "+Ie,Ge.commandStr),it="3f";break;case Ga:Oe.command(fi(gn)&&gn.length===4,"uniform "+Ie,Ge.commandStr),it="4f";break;case Hn:Oe.commandType(gn,"boolean","uniform "+Ie,Ge.commandStr),it="1i";break;case pl:Oe.commandType(gn,"number","uniform "+Ie,Ge.commandStr),it="1i";break;case ud:Oe.command(fi(gn)&&gn.length===2,"uniform "+Ie,Ge.commandStr),it="2i";break;case Uf:Oe.command(fi(gn)&&gn.length===2,"uniform "+Ie,Ge.commandStr),it="2i";break;case Vf:Oe.command(fi(gn)&&gn.length===3,"uniform "+Ie,Ge.commandStr),it="3i";break;case Wo:Oe.command(fi(gn)&&gn.length===3,"uniform "+Ie,Ge.commandStr),it="3i";break;case ia:Oe.command(fi(gn)&&gn.length===4,"uniform "+Ie,Ge.commandStr),it="4i";break;case Ds:Oe.command(fi(gn)&&gn.length===4,"uniform "+Ie,Ge.commandStr),it="4i";break}we(Xe,".uniform",it,"(",Ht,",",fi(gn)?Array.prototype.slice.call(gn):gn,");")}continue}else Lt=vt.append(Ge,we)}else{if(!dt(Gp))continue;Lt=we.def(qe.uniforms,"[",Pe.id(Ie),"]")}rt===qd?(Oe(!Array.isArray(Lt),"must specify a scalar prop for textures"),we("if(",Lt,"&&",Lt,'._reglType==="framebuffer"){',Lt,"=",Lt,".color[0];","}")):rt===Jd&&(Oe(!Array.isArray(Lt),"must specify a scalar prop for cube maps"),we("if(",Lt,"&&",Lt,'._reglType==="framebufferCube"){',Lt,"=",Lt,".color[0];","}")),Oe.optional(function(){function Do(Xo,sm){Ge.assert(we,Xo,'bad data or missing for uniform "'+Ie+'".  '+sm)}function zp(Xo){Oe(!Array.isArray(Lt),"must not specify an array type for uniform"),Do("typeof "+Lt+'==="'+Xo+'"',"invalid type, expected "+Xo)}function Ua(Xo,sm){Array.isArray(Lt)?Oe(Lt.length===Xo,"must have length "+Xo):Do(qe.isArrayLike+"("+Lt+")&&"+Lt+".length==="+Xo,"invalid vector, should have length "+Xo,Ge.commandStr)}function Gg(Xo){Oe(!Array.isArray(Lt),"must not specify a value type"),Do("typeof "+Lt+'==="function"&&'+Lt+'._reglType==="texture'+(Xo===ui?"2d":"Cube")+'"',"invalid texture type",Ge.commandStr)}switch(rt){case pl:zp("number");break;case Uf:Ua(2,"number");break;case Wo:Ua(3,"number");break;case Ds:Ua(4,"number");break;case ld:zp("number");break;case Cu:Ua(2,"number");break;case Ps:Ua(3,"number");break;case Ga:Ua(4,"number");break;case Hn:zp("boolean");break;case ud:Ua(2,"boolean");break;case Vf:Ua(3,"boolean");break;case ia:Ua(4,"boolean");break;case Fa:Ua(4,"number");break;case vi:Ua(9,"number");break;case Ba:Ua(16,"number");break;case qd:Gg(ui);break;case Jd:Gg(Bf);break}});var fr=1;switch(rt){case qd:case Jd:var tr=we.def(Lt,"._texture");we(Xe,".uniform1i(",Ht,",",tr,".bind());"),we.exit(tr,".unbind();");continue;case pl:case Hn:it="1i";break;case Uf:case ud:it="2i",fr=2;break;case Wo:case Vf:it="3i",fr=3;break;case Ds:case ia:it="4i",fr=4;break;case ld:it="1f";break;case Cu:it="2f",fr=2;break;case Ps:it="3f",fr=3;break;case Ga:it="4f",fr=4;break;case Fa:it="Matrix2fv";break;case vi:it="Matrix3fv";break;case Ba:it="Matrix4fv";break}if(we(Xe,".uniform",it,"(",Ht,","),it.charAt(0)==="M"){var Pi=Math.pow(rt-Fa+2,2),rs=Ge.global.def("new Float32Array(",Pi,")");Array.isArray(Lt)?we("false,(",xs(Pi,function(Do){return rs+"["+Do+"]="+Lt[Do]}),",",rs,")"):we("false,(Array.isArray(",Lt,")||",Lt," instanceof Float32Array)?",Lt,":(",xs(Pi,function(Do){return rs+"["+Do+"]="+Lt+"["+Do+"]"}),",",rs,")")}else fr>1?we(xs(fr,function(Do){return Array.isArray(Lt)?Lt[Do]:Lt+"["+Do+"]"})):(Oe(!Array.isArray(Lt),"uniform value must not be an array"),we(Lt));we(");")}}function gr(Ge,we,We,ut){var dt=Ge.shared,qe=dt.gl,Xe=dt.draw,it=ut.draw;function Le(){var tr=it.elements,Pi,rs=we;return tr?((tr.contextDep&&ut.contextDynamic||tr.propDep)&&(rs=We),Pi=tr.append(Ge,rs)):Pi=rs.def(Xe,".",$d),Pi&&rs("if("+Pi+")"+qe+".bindBuffer("+Yd+","+Pi+".buffer.buffer);"),Pi}function $e(){var tr=it.count,Pi,rs=we;return tr?((tr.contextDep&&ut.contextDynamic||tr.propDep)&&(rs=We),Pi=tr.append(Ge,rs),Oe.optional(function(){tr.MISSING&&Ge.assert(we,"false","missing vertex count"),tr.DYNAMIC&&Ge.assert(rs,Pi+">=0","missing vertex count")})):(Pi=rs.def(Xe,".",$l),Oe.optional(function(){Ge.assert(rs,Pi+">=0","missing vertex count")})),Pi}var Ie=Le();function rt(tr){var Pi=it[tr];return Pi?Pi.contextDep&&ut.contextDynamic||Pi.propDep?Pi.append(Ge,We):Pi.append(Ge,we):we.def(Xe,".",tr)}var vt=rt(vc),Vt=rt(Dp),Ht=$e();if(typeof Ht=="number"){if(Ht===0)return}else We("if(",Ht,"){"),We.exit("}");var Lt,gn;vn&&(Lt=rt(yu),gn=Ge.instancing);var sr=Ie+".type",zr=it.elements&&ml(it.elements);function Kn(){function tr(){We(gn,".drawElementsInstancedANGLE(",[vt,Ht,sr,Vt+"<<(("+sr+"-"+id+")>>1)",Lt],");")}function Pi(){We(gn,".drawArraysInstancedANGLE(",[vt,Vt,Ht,Lt],");")}Ie?zr?tr():(We("if(",Ie,"){"),tr(),We("}else{"),Pi(),We("}")):Pi()}function fr(){function tr(){We(qe+".drawElements("+[vt,Ht,sr,Vt+"<<(("+sr+"-"+id+")>>1)"]+");")}function Pi(){We(qe+".drawArrays("+[vt,Vt,Ht]+");")}Ie?zr?tr():(We("if(",Ie,"){"),tr(),We("}else{"),Pi(),We("}")):Pi()}vn&&(typeof Lt!="number"||Lt>=0)?typeof Lt=="string"?(We("if(",Lt,">0){"),Kn(),We("}else if(",Lt,"<0){"),fr(),We("}")):Kn():fr()}function di(Ge,we,We,ut,dt){var qe=xr(),Xe=qe.proc("body",dt);return Oe.optional(function(){qe.commandStr=we.commandStr,qe.command=qe.link(we.commandStr)}),vn&&(qe.instancing=Xe.def(qe.shared.extensions,".angle_instanced_arrays")),Ge(qe,Xe,We,ut),qe.compile().body}function wi(Ge,we,We,ut){gs(Ge,we),We.useVAO?We.drawVAO?we(Ge.shared.vao,".setVAO(",We.drawVAO.append(Ge,we),");"):we(Ge.shared.vao,".setVAO(",Ge.shared.vao,".targetVAO);"):(we(Ge.shared.vao,".setVAO(null);"),Fo(Ge,we,We,ut.attributes,function(){return!0})),Ii(Ge,we,We,ut.uniforms,function(){return!0}),gr(Ge,we,we,We)}function co(Ge,we){var We=Ge.proc("draw",1);gs(Ge,We),es(Ge,We,we.context),ts(Ge,We,we.framebuffer),Co(Ge,We,we),ns(Ge,We,we.state),Br(Ge,We,we,!1,!0);var ut=we.shader.progVar.append(Ge,We);if(We(Ge.shared.gl,".useProgram(",ut,".program);"),we.shader.program)wi(Ge,We,we,we.shader.program);else{We(Ge.shared.vao,".setVAO(null);");var dt=Ge.global.def("{}"),qe=We.def(ut,".id"),Xe=We.def(dt,"[",qe,"]");We(Ge.cond(Xe).then(Xe,".call(this,a0);").else(Xe,"=",dt,"[",qe,"]=",Ge.link(function(it){return di(wi,Ge,we,it,1)}),"(",ut,");",Xe,".call(this,a0);"))}Object.keys(we.state).length>0&&We(Ge.shared.current,".dirty=true;")}function Yl(Ge,we,We,ut){Ge.batchId="a1",gs(Ge,we);function dt(){return!0}Fo(Ge,we,We,ut.attributes,dt),Ii(Ge,we,We,ut.uniforms,dt),gr(Ge,we,we,We)}function th(Ge,we,We,ut){gs(Ge,we);var dt=We.contextDep,qe=we.def(),Xe="a0",it="a1",Le=we.def();Ge.shared.props=Le,Ge.batchId=qe;var $e=Ge.scope(),Ie=Ge.scope();we($e.entry,"for(",qe,"=0;",qe,"<",it,";++",qe,"){",Le,"=",Xe,"[",qe,"];",Ie,"}",$e.exit);function rt(sr){return sr.contextDep&&dt||sr.propDep}function vt(sr){return!rt(sr)}if(We.needsContext&&es(Ge,Ie,We.context),We.needsFramebuffer&&ts(Ge,Ie,We.framebuffer),ns(Ge,Ie,We.state,rt),We.profile&&rt(We.profile)&&Br(Ge,Ie,We,!1,!0),ut)We.useVAO?We.drawVAO?rt(We.drawVAO)?Ie(Ge.shared.vao,".setVAO(",We.drawVAO.append(Ge,Ie),");"):$e(Ge.shared.vao,".setVAO(",We.drawVAO.append(Ge,$e),");"):$e(Ge.shared.vao,".setVAO(",Ge.shared.vao,".targetVAO);"):($e(Ge.shared.vao,".setVAO(null);"),Fo(Ge,$e,We,ut.attributes,vt),Fo(Ge,Ie,We,ut.attributes,rt)),Ii(Ge,$e,We,ut.uniforms,vt),Ii(Ge,Ie,We,ut.uniforms,rt),gr(Ge,$e,Ie,We);else{var Vt=Ge.global.def("{}"),Ht=We.shader.progVar.append(Ge,Ie),Lt=Ie.def(Ht,".id"),gn=Ie.def(Vt,"[",Lt,"]");Ie(Ge.shared.gl,".useProgram(",Ht,".program);","if(!",gn,"){",gn,"=",Vt,"[",Lt,"]=",Ge.link(function(sr){return di(Yl,Ge,We,sr,2)}),"(",Ht,");}",gn,".call(this,a0[",qe,"],",qe,");")}}function Be(Ge,we){var We=Ge.proc("batch",2);Ge.batchId="0",gs(Ge,We);var ut=!1,dt=!0;Object.keys(we.context).forEach(function(Vt){ut=ut||we.context[Vt].propDep}),ut||(es(Ge,We,we.context),dt=!1);var qe=we.framebuffer,Xe=!1;qe?(qe.propDep?ut=Xe=!0:qe.contextDep&&ut&&(Xe=!0),Xe||ts(Ge,We,qe)):ts(Ge,We,null),we.state.viewport&&we.state.viewport.propDep&&(ut=!0);function it(Vt){return Vt.contextDep&&ut||Vt.propDep}Co(Ge,We,we),ns(Ge,We,we.state,function(Vt){return!it(Vt)}),(!we.profile||!it(we.profile))&&Br(Ge,We,we,!1,"a1"),we.contextDep=ut,we.needsContext=dt,we.needsFramebuffer=Xe;var Le=we.shader.progVar;if(Le.contextDep&&ut||Le.propDep)th(Ge,We,we,null);else{var $e=Le.append(Ge,We);if(We(Ge.shared.gl,".useProgram(",$e,".program);"),we.shader.program)th(Ge,We,we,we.shader.program);else{We(Ge.shared.vao,".setVAO(null);");var Ie=Ge.global.def("{}"),rt=We.def($e,".id"),vt=We.def(Ie,"[",rt,"]");We(Ge.cond(vt).then(vt,".call(this,a0,a1);").else(vt,"=",Ie,"[",rt,"]=",Ge.link(function(Vt){return di(th,Ge,we,Vt,2)}),"(",$e,");",vt,".call(this,a0,a1);"))}}Object.keys(we.state).length>0&&We(Ge.shared.current,".dirty=true;")}function Dt(Ge,we){var We=Ge.proc("scope",3);Ge.batchId="a2";var ut=Ge.shared,dt=ut.current;es(Ge,We,we.context),we.framebuffer&&we.framebuffer.append(Ge,We),Hf(Object.keys(we.state)).forEach(function(Xe){var it=we.state[Xe],Le=it.append(Ge,We);fi(Le)?Le.forEach(function($e,Ie){We.set(Ge.next[Xe],"["+Ie+"]",$e)}):We.set(ut.next,"."+Xe,Le)}),Br(Ge,We,we,!0,!0),[$d,Dp,$l,yu,vc].forEach(function(Xe){var it=we.draw[Xe];!it||We.set(ut.draw,"."+Xe,""+it.append(Ge,We))}),Object.keys(we.uniforms).forEach(function(Xe){var it=we.uniforms[Xe].append(Ge,We);Array.isArray(it)&&(it="["+it.join()+"]"),We.set(ut.uniforms,"["+Pe.id(Xe)+"]",it)}),Object.keys(we.attributes).forEach(function(Xe){var it=we.attributes[Xe].append(Ge,We),Le=Ge.scopeAttrib(Xe);Object.keys(new ht).forEach(function($e){We.set(Le,"."+$e,it[$e])})}),we.scopeVAO&&We.set(ut.vao,".targetVAO",we.scopeVAO.append(Ge,We));function qe(Xe){var it=we.shader[Xe];it&&We.set(ut.shader,"."+Xe,it.append(Ge,We))}qe(gc),qe(Lf),Object.keys(we.state).length>0&&(We(dt,".dirty=true;"),We.exit(dt,".dirty=true;")),We("a1(",Ge.shared.context,",a0,",Ge.batchId,");")}function St(Ge){if(!(typeof Ge!="object"||fi(Ge))){for(var we=Object.keys(Ge),We=0;We<we.length;++We)if(zi.isDynamic(Ge[we[We]]))return!0;return!1}}function $n(Ge,we,We){var ut=we.static[We];if(!ut||!St(ut))return;var dt=Ge.global,qe=Object.keys(ut),Xe=!1,it=!1,Le=!1,$e=Ge.global.def("{}");qe.forEach(function(rt){var vt=ut[rt];if(zi.isDynamic(vt)){typeof vt=="function"&&(vt=ut[rt]=zi.unbox(vt));var Vt=ba(vt,null);Xe=Xe||Vt.thisDep,Le=Le||Vt.propDep,it=it||Vt.contextDep}else{switch(dt($e,".",rt,"="),typeof vt){case"number":dt(vt);break;case"string":dt('"',vt,'"');break;case"object":Array.isArray(vt)&&dt("[",vt.join(),"]");break;default:dt(Ge.link(vt));break}dt(";")}});function Ie(rt,vt){qe.forEach(function(Vt){var Ht=ut[Vt];if(!!zi.isDynamic(Ht)){var Lt=rt.invoke(vt,Ht);vt($e,".",Vt,"=",Lt,";")}})}we.dynamic[We]=new zi.DynamicVariable(Dc,{thisDep:Xe,contextDep:it,propDep:Le,ref:$e,append:Ie}),delete we.static[We]}function ni(Ge,we,We,ut,dt){var qe=xr();qe.stats=qe.link(dt),Object.keys(we.static).forEach(function(it){$n(qe,we,it)}),Zd.forEach(function(it){$n(qe,Ge,it)});var Xe=ps(Ge,we,We,ut,qe);return co(qe,Xe),Dt(qe,Xe),Be(qe,Xe),M(qe.compile(),{destroy:function(){Xe.shader.program.destroy()}})}return{next:Fn,current:tn,procs:function(){var Ge=xr(),we=Ge.proc("poll"),We=Ge.proc("refresh"),ut=Ge.block();we(ut),We(ut);var dt=Ge.shared,qe=dt.gl,Xe=dt.next,it=dt.current;ut(it,".dirty=false;"),ts(Ge,we),ts(Ge,We,null,!0);var Le;vn&&(Le=Ge.link(vn)),ze.oes_vertex_array_object&&We(Ge.link(ze.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var $e=0;$e<Et.maxAttributes;++$e){var Ie=We.def(dt.attributes,"[",$e,"]"),rt=Ge.cond(Ie,".buffer");rt.then(qe,".enableVertexAttribArray(",$e,");",qe,".bindBuffer(",Xl,",",Ie,".buffer.buffer);",qe,".vertexAttribPointer(",$e,",",Ie,".size,",Ie,".type,",Ie,".normalized,",Ie,".stride,",Ie,".offset);").else(qe,".disableVertexAttribArray(",$e,");",qe,".vertexAttrib4f(",$e,",",Ie,".x,",Ie,".y,",Ie,".z,",Ie,".w);",Ie,".buffer=null;"),We(rt),vn&&We(Le,".vertexAttribDivisorANGLE(",$e,",",Ie,".divisor);")}return We(Ge.shared.vao,".currentVAO=null;",Ge.shared.vao,".setVAO(",Ge.shared.vao,".targetVAO);"),Object.keys(_n).forEach(function(vt){var Vt=_n[vt],Ht=ut.def(Xe,".",vt),Lt=Ge.block();Lt("if(",Ht,"){",qe,".enable(",Vt,")}else{",qe,".disable(",Vt,")}",it,".",vt,"=",Ht,";"),We(Lt),we("if(",Ht,"!==",it,".",vt,"){",Lt,"}")}),Object.keys(nn).forEach(function(vt){var Vt=nn[vt],Ht=tn[vt],Lt,gn,sr=Ge.block();if(sr(qe,".",Vt,"("),fi(Ht)){var zr=Ht.length;Lt=Ge.global.def(Xe,".",vt),gn=Ge.global.def(it,".",vt),sr(xs(zr,function(Kn){return Lt+"["+Kn+"]"}),");",xs(zr,function(Kn){return gn+"["+Kn+"]="+Lt+"["+Kn+"];"}).join("")),we("if(",xs(zr,function(Kn){return Lt+"["+Kn+"]!=="+gn+"["+Kn+"]"}).join("||"),"){",sr,"}")}else Lt=ut.def(Xe,".",vt),gn=ut.def(it,".",vt),sr(Lt,");",it,".",vt,"=",Lt,";"),we("if(",Lt,"!==",gn,"){",sr,"}");We(sr)}),Ge.compile()}(),compile:ni}}function om(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Fp=34918,Bh=34919,Bp=35007,xa=function(K,Pe){if(!Pe.ext_disjoint_timer_query)return null;var ze=[];function Et(){return ze.pop()||Pe.ext_disjoint_timer_query.createQueryEXT()}function ft(vn){ze.push(vn)}var xt=[];function It(vn){var zn=Et();Pe.ext_disjoint_timer_query.beginQueryEXT(Bp,zn),xt.push(zn),ln(xt.length-1,xt.length,vn)}function en(){Pe.ext_disjoint_timer_query.endQueryEXT(Bp)}function hn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var pn=[];function fn(){return pn.pop()||new hn}function sn(vn){pn.push(vn)}var Nn=[];function ln(vn,zn,tn){var Fn=fn();Fn.startQueryIndex=vn,Fn.endQueryIndex=zn,Fn.sum=0,Fn.stats=tn,Nn.push(Fn)}var En=[],ht=[];function Rt(){var vn,zn,tn=xt.length;if(tn!==0){ht.length=Math.max(ht.length,tn+1),En.length=Math.max(En.length,tn+1),En[0]=0,ht[0]=0;var Fn=0;for(vn=0,zn=0;zn<xt.length;++zn){var Wt=xt[zn];Pe.ext_disjoint_timer_query.getQueryObjectEXT(Wt,Bh)?(Fn+=Pe.ext_disjoint_timer_query.getQueryObjectEXT(Wt,Fp),ft(Wt)):xt[vn++]=Wt,En[zn+1]=Fn,ht[zn+1]=vn}for(xt.length=vn,vn=0,zn=0;zn<Nn.length;++zn){var _n=Nn[zn],nn=_n.startQueryIndex,An=_n.endQueryIndex;_n.sum+=En[An]-En[nn];var hr=ht[nn],Mr=ht[An];Mr===hr?(_n.stats.gpuTime+=_n.sum/1e6,sn(_n)):(_n.startQueryIndex=hr,_n.endQueryIndex=Mr,Nn[vn++]=_n)}Nn.length=vn}}return{beginQuery:It,endQuery:en,pushScopeStats:ln,update:Rt,getNumPendingQueries:function(){return xt.length},clear:function(){ze.push.apply(ze,xt);for(var vn=0;vn<ze.length;vn++)Pe.ext_disjoint_timer_query.deleteQueryEXT(ze[vn]);xt.length=0,ze.length=0},restore:function(){xt.length=0,ze.length=0}}},Qa=16384,Eu=256,Su=1024,kg=34962,zh="webglcontextlost",I0="webglcontextrestored",_u=1,R0=2,Lg=3;function ec(K,Pe){for(var ze=0;ze<K.length;++ze)if(K[ze]===Pe)return ze;return-1}function Zl(K){var Pe=fh(K);if(!Pe)return null;var ze=Pe.gl,Et=ze.getContextAttributes(),ft=ze.isContextLost(),xt=Sc(ze,Pe);if(!xt)return null;var It=Sr(),en=om(),hn=xt.extensions,pn=xa(ze,hn),fn=jr(),sn=ze.drawingBufferWidth,Nn=ze.drawingBufferHeight,ln={tick:0,time:0,viewportWidth:sn,viewportHeight:Nn,framebufferWidth:sn,framebufferHeight:Nn,drawingBufferWidth:sn,drawingBufferHeight:Nn,pixelRatio:Pe.pixelRatio},En={},ht={elements:null,primitive:4,count:-1,offset:0,instances:-1},Rt=ku(ze,hn),vn=wp(ze,en,Pe,tn),zn=Vi(ze,hn,Rt,en,vn);function tn(gr){return zn.destroyBuffer(gr)}var Fn=mo(ze,hn,vn,en),Wt=Fd(ze,It,en,Pe),_n=Ku(ze,hn,Rt,function(){hr.procs.poll()},ln,en,Pe),nn=Sh(ze,hn,Rt,en,Pe),An=Gd(ze,hn,Rt,_n,nn,en),hr=$f(ze,It,hn,Rt,vn,Fn,_n,An,En,zn,Wt,ht,ln,pn,Pe),Mr=Df(ze,An,hr.procs.poll,ln,Et,hn,Rt),Tn=hr.next,dn=ze.canvas,qt=[],xr=[],Fr=[],Yn=[Pe.onDestroy],si=null;function Dr(){if(qt.length===0){pn&&pn.update(),si=null;return}si=Lr.next(Dr),ns();for(var gr=qt.length-1;gr>=0;--gr){var di=qt[gr];di&&di(ln,null,0)}ze.flush(),pn&&pn.update()}function $r(){!si&&qt.length>0&&(si=Lr.next(Dr))}function Ti(){si&&(Lr.cancel(Dr),si=null)}function Qo(gr){gr.preventDefault(),ft=!0,Ti(),xr.forEach(function(di){di()})}function hs(gr){ze.getError(),ft=!1,xt.restore(),Wt.restore(),vn.restore(),_n.restore(),nn.restore(),An.restore(),zn.restore(),pn&&pn.restore(),hr.procs.refresh(),$r(),Fr.forEach(function(di){di()})}dn&&(dn.addEventListener(zh,Qo,!1),dn.addEventListener(I0,hs,!1));function Jr(){qt.length=0,Ti(),dn&&(dn.removeEventListener(zh,Qo),dn.removeEventListener(I0,hs)),Wt.clear(),An.clear(),nn.clear(),_n.clear(),Fn.clear(),vn.clear(),zn.clear(),pn&&pn.clear(),Yn.forEach(function(gr){gr()})}function fs(gr){Oe(!!gr,"invalid args to regl({...})"),Oe.type(gr,"object","invalid args to regl({...})");function di(dt){var qe=M({},dt);delete qe.uniforms,delete qe.attributes,delete qe.context,delete qe.vao,"stencil"in qe&&qe.stencil.op&&(qe.stencil.opBack=qe.stencil.opFront=qe.stencil.op,delete qe.stencil.op);function Xe(it){if(it in qe){var Le=qe[it];delete qe[it],Object.keys(Le).forEach(function($e){qe[it+"."+$e]=Le[$e]})}}return Xe("blend"),Xe("depth"),Xe("cull"),Xe("stencil"),Xe("polygonOffset"),Xe("scissor"),Xe("sample"),"vao"in dt&&(qe.vao=dt.vao),qe}function wi(dt,qe){var Xe={},it={};return Object.keys(dt).forEach(function(Le){var $e=dt[Le];if(zi.isDynamic($e)){it[Le]=zi.unbox($e,Le);return}else if(qe&&Array.isArray($e)){for(var Ie=0;Ie<$e.length;++Ie)if(zi.isDynamic($e[Ie])){it[Le]=zi.unbox($e,Le);return}}Xe[Le]=$e}),{dynamic:it,static:Xe}}var co=wi(gr.context||{},!0),Yl=wi(gr.uniforms||{},!0),th=wi(gr.attributes||{},!1),Be=wi(di(gr),!1),Dt={gpuTime:0,cpuTime:0,count:0},St=hr.compile(Be,th,Yl,co,Dt),$n=St.draw,ni=St.batch,Ge=St.scope,we=[];function We(dt){for(;we.length<dt;)we.push(null);return we}function ut(dt,qe){var Xe;if(ft&&Oe.raise("context lost"),typeof dt=="function")return Ge.call(this,null,dt,0);if(typeof qe=="function")if(typeof dt=="number")for(Xe=0;Xe<dt;++Xe)Ge.call(this,null,qe,Xe);else if(Array.isArray(dt))for(Xe=0;Xe<dt.length;++Xe)Ge.call(this,dt[Xe],qe,Xe);else return Ge.call(this,dt,qe,0);else if(typeof dt=="number"){if(dt>0)return ni.call(this,We(dt|0),dt|0)}else if(Array.isArray(dt)){if(dt.length)return ni.call(this,dt,dt.length)}else return $n.call(this,dt)}return M(ut,{stats:Dt,destroy:function(){St.destroy()}})}var yo=An.setFBO=fs({framebuffer:zi.define.call(null,_u,"framebuffer")});function ps(gr,di){var wi=0;hr.procs.poll();var co=di.color;co&&(ze.clearColor(+co[0]||0,+co[1]||0,+co[2]||0,+co[3]||0),wi|=Qa),"depth"in di&&(ze.clearDepth(+di.depth),wi|=Eu),"stencil"in di&&(ze.clearStencil(di.stencil|0),wi|=Su),Oe(!!wi,"called regl.clear with no buffer specified"),ze.clear(wi)}function es(gr){if(Oe(typeof gr=="object"&&gr,"regl.clear() takes an object as input"),"framebuffer"in gr)if(gr.framebuffer&&gr.framebuffer_reglType==="framebufferCube")for(var di=0;di<6;++di)yo(M({framebuffer:gr.framebuffer.faces[di]},gr),ps);else yo(gr,ps);else ps(null,gr)}function ts(gr){Oe.type(gr,"function","regl.frame() callback must be a function"),qt.push(gr);function di(){var wi=ec(qt,gr);Oe(wi>=0,"cannot cancel a frame twice");function co(){var Yl=ec(qt,co);qt[Yl]=qt[qt.length-1],qt.length-=1,qt.length<=0&&Ti()}qt[wi]=co}return $r(),{cancel:di}}function Co(){var gr=Tn.viewport,di=Tn.scissor_box;gr[0]=gr[1]=di[0]=di[1]=0,ln.viewportWidth=ln.framebufferWidth=ln.drawingBufferWidth=gr[2]=di[2]=ze.drawingBufferWidth,ln.viewportHeight=ln.framebufferHeight=ln.drawingBufferHeight=gr[3]=di[3]=ze.drawingBufferHeight}function ns(){ln.tick+=1,ln.time=Br(),Co(),hr.procs.poll()}function gs(){_n.refresh(),Co(),hr.procs.refresh(),pn&&pn.update()}function Br(){return(jr()-fn)/1e3}gs();function Fo(gr,di){Oe.type(di,"function","listener callback must be a function");var wi;switch(gr){case"frame":return ts(di);case"lost":wi=xr;break;case"restore":wi=Fr;break;case"destroy":wi=Yn;break;default:Oe.raise("invalid event, must be one of frame,lost,restore,destroy")}return wi.push(di),{cancel:function(){for(var co=0;co<wi.length;++co)if(wi[co]===di){wi[co]=wi[wi.length-1],wi.pop();return}}}}var Ii=M(fs,{clear:es,prop:zi.define.bind(null,_u),context:zi.define.bind(null,R0),this:zi.define.bind(null,Lg),draw:fs({}),buffer:function(gr){return vn.create(gr,kg,!1,!1)},elements:function(gr){return Fn.create(gr,!1)},texture:_n.create2D,cube:_n.createCube,renderbuffer:nn.create,framebuffer:An.create,framebufferCube:An.createCube,vao:zn.createVAO,attributes:Et,frame:ts,on:Fo,limits:Rt,hasExtension:function(gr){return Rt.extensions.indexOf(gr.toLowerCase())>=0},read:Mr,destroy:Jr,_gl:ze,_refresh:gs,poll:function(){ns(),pn&&pn.update()},now:Br,stats:en});return Pe.onDone(null,Ii),Ii}return Zl})},94633:function(Ne){Ne.exports=function(q){return L(M(q),q)},Ne.exports.array=L;function L(q,z){var Z=q.length,te=new Array(Z),Q={},de=Z,oe=j(z),ie=R(q);for(z.forEach(function(he){if(!ie.has(he[0])||!ie.has(he[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});de--;)Q[de]||re(q[de],de,new Set);return te;function re(he,De,ue){if(ue.has(he)){var xe;try{xe=", node was:"+JSON.stringify(he)}catch{xe=""}throw new Error("Cyclic dependency"+xe)}if(!ie.has(he))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(he));if(!Q[De]){Q[De]=!0;var ae=oe.get(he)||new Set;if(ae=Array.from(ae),De=ae.length){ue.add(he);do{var ce=ae[--De];re(ce,ie.get(ce),ue)}while(De);ue.delete(he)}te[--Z]=he}}}function M(q){for(var z=new Set,Z=0,te=q.length;Z<te;Z++){var Q=q[Z];z.add(Q[0]),z.add(Q[1])}return Array.from(z)}function j(q){for(var z=new Map,Z=0,te=q.length;Z<te;Z++){var Q=q[Z];z.has(Q[0])||z.set(Q[0],new Set),z.has(Q[1])||z.set(Q[1],new Set),z.get(Q[0]).add(Q[1])}return z}function R(q){for(var z=new Map,Z=0,te=q.length;Z<te;Z++)z.set(q[Z],Z);return z}},65327:function(Ne){function L(M,j,R,q,z){var Z={};return Object.keys(q).forEach(function(te){Z[te]=q[te]}),Z.enumerable=!!Z.enumerable,Z.configurable=!!Z.configurable,("value"in Z||Z.initializer)&&(Z.writable=!0),Z=R.slice().reverse().reduce(function(te,Q){return Q(M,j,te)||te},Z),z&&Z.initializer!==void 0&&(Z.value=Z.initializer?Z.initializer.call(z):void 0,Z.initializer=void 0),Z.initializer===void 0&&(Object.defineProperty(M,j,Z),Z=null),Z}Ne.exports=L,Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports},55042:function(Ne){function L(M,j,R,q){!R||Object.defineProperty(M,j,{enumerable:R.enumerable,configurable:R.configurable,writable:R.writable,value:R.initializer?R.initializer.call(q):void 0})}Ne.exports=L,Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports},19020:function(Ne){function L(M,j){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}Ne.exports=L,Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports},22970:function(){"use strict"},31302:function(){"use strict"},17061:function(Ne,L,M){var j=M(18698).default;function R(){"use strict";Ne.exports=R=function(){return q},Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports;var q={},z=Object.prototype,Z=z.hasOwnProperty,te=typeof Symbol=="function"?Symbol:{},Q=te.iterator||"@@iterator",de=te.asyncIterator||"@@asyncIterator",oe=te.toStringTag||"@@toStringTag";function ie(ye,Ct,Pn){return Object.defineProperty(ye,Ct,{value:Pn,enumerable:!0,configurable:!0,writable:!0}),ye[Ct]}try{ie({},"")}catch{ie=function(Pn,jt,cn){return Pn[jt]=cn}}function re(ye,Ct,Pn,jt){var cn=Ct&&Ct.prototype instanceof ue?Ct:ue,qn=Object.create(cn.prototype),on=new et(jt||[]);return qn._invoke=function(lo,Zi,Xn){var Ar="suspendedStart";return function(lr,Ir){if(Ar==="executing")throw new Error("Generator is already running");if(Ar==="completed"){if(lr==="throw")throw Ir;return Mn()}for(Xn.method=lr,Xn.arg=Ir;;){var Oi=Xn.delegate;if(Oi){var Bi=G(Oi,Xn);if(Bi){if(Bi===De)continue;return Bi}}if(Xn.method==="next")Xn.sent=Xn._sent=Xn.arg;else if(Xn.method==="throw"){if(Ar==="suspendedStart")throw Ar="completed",Xn.arg;Xn.dispatchException(Xn.arg)}else Xn.method==="return"&&Xn.abrupt("return",Xn.arg);Ar="executing";var Kr=he(lo,Zi,Xn);if(Kr.type==="normal"){if(Ar=Xn.done?"completed":"suspendedYield",Kr.arg===De)continue;return{value:Kr.arg,done:Xn.done}}Kr.type==="throw"&&(Ar="completed",Xn.method="throw",Xn.arg=Kr.arg)}}}(ye,Pn,on),qn}function he(ye,Ct,Pn){try{return{type:"normal",arg:ye.call(Ct,Pn)}}catch(jt){return{type:"throw",arg:jt}}}q.wrap=re;var De={};function ue(){}function xe(){}function ae(){}var ce={};ie(ce,Q,function(){return this});var fe=Object.getPrototypeOf,Ee=fe&&fe(fe(Bt([])));Ee&&Ee!==z&&Z.call(Ee,Q)&&(ce=Ee);var pe=ae.prototype=ue.prototype=Object.create(ce);function Ae(ye){["next","throw","return"].forEach(function(Ct){ie(ye,Ct,function(Pn){return this._invoke(Ct,Pn)})})}function nt(ye,Ct){function Pn(cn,qn,on,lo){var Zi=he(ye[cn],ye,qn);if(Zi.type!=="throw"){var Xn=Zi.arg,Ar=Xn.value;return Ar&&j(Ar)=="object"&&Z.call(Ar,"__await")?Ct.resolve(Ar.__await).then(function(lr){Pn("next",lr,on,lo)},function(lr){Pn("throw",lr,on,lo)}):Ct.resolve(Ar).then(function(lr){Xn.value=lr,on(Xn)},function(lr){return Pn("throw",lr,on,lo)})}lo(Zi.arg)}var jt;this._invoke=function(cn,qn){function on(){return new Ct(function(lo,Zi){Pn(cn,qn,lo,Zi)})}return jt=jt?jt.then(on,on):on()}}function G(ye,Ct){var Pn=ye.iterator[Ct.method];if(Pn===void 0){if(Ct.delegate=null,Ct.method==="throw"){if(ye.iterator.return&&(Ct.method="return",Ct.arg=void 0,G(ye,Ct),Ct.method==="throw"))return De;Ct.method="throw",Ct.arg=new TypeError("The iterator does not provide a 'throw' method")}return De}var jt=he(Pn,ye.iterator,Ct.arg);if(jt.type==="throw")return Ct.method="throw",Ct.arg=jt.arg,Ct.delegate=null,De;var cn=jt.arg;return cn?cn.done?(Ct[ye.resultName]=cn.value,Ct.next=ye.nextLoc,Ct.method!=="return"&&(Ct.method="next",Ct.arg=void 0),Ct.delegate=null,De):cn:(Ct.method="throw",Ct.arg=new TypeError("iterator result is not an object"),Ct.delegate=null,De)}function Fe(ye){var Ct={tryLoc:ye[0]};1 in ye&&(Ct.catchLoc=ye[1]),2 in ye&&(Ct.finallyLoc=ye[2],Ct.afterLoc=ye[3]),this.tryEntries.push(Ct)}function He(ye){var Ct=ye.completion||{};Ct.type="normal",delete Ct.arg,ye.completion=Ct}function et(ye){this.tryEntries=[{tryLoc:"root"}],ye.forEach(Fe,this),this.reset(!0)}function Bt(ye){if(ye){var Ct=ye[Q];if(Ct)return Ct.call(ye);if(typeof ye.next=="function")return ye;if(!isNaN(ye.length)){var Pn=-1,jt=function cn(){for(;++Pn<ye.length;)if(Z.call(ye,Pn))return cn.value=ye[Pn],cn.done=!1,cn;return cn.value=void 0,cn.done=!0,cn};return jt.next=jt}}return{next:Mn}}function Mn(){return{value:void 0,done:!0}}return xe.prototype=ae,ie(pe,"constructor",ae),ie(ae,"constructor",xe),xe.displayName=ie(ae,oe,"GeneratorFunction"),q.isGeneratorFunction=function(ye){var Ct=typeof ye=="function"&&ye.constructor;return!!Ct&&(Ct===xe||(Ct.displayName||Ct.name)==="GeneratorFunction")},q.mark=function(ye){return Object.setPrototypeOf?Object.setPrototypeOf(ye,ae):(ye.__proto__=ae,ie(ye,oe,"GeneratorFunction")),ye.prototype=Object.create(pe),ye},q.awrap=function(ye){return{__await:ye}},Ae(nt.prototype),ie(nt.prototype,de,function(){return this}),q.AsyncIterator=nt,q.async=function(ye,Ct,Pn,jt,cn){cn===void 0&&(cn=Promise);var qn=new nt(re(ye,Ct,Pn,jt),cn);return q.isGeneratorFunction(Ct)?qn:qn.next().then(function(on){return on.done?on.value:qn.next()})},Ae(pe),ie(pe,oe,"Generator"),ie(pe,Q,function(){return this}),ie(pe,"toString",function(){return"[object Generator]"}),q.keys=function(ye){var Ct=[];for(var Pn in ye)Ct.push(Pn);return Ct.reverse(),function jt(){for(;Ct.length;){var cn=Ct.pop();if(cn in ye)return jt.value=cn,jt.done=!1,jt}return jt.done=!0,jt}},q.values=Bt,et.prototype={constructor:et,reset:function(Ct){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(He),!Ct)for(var Pn in this)Pn.charAt(0)==="t"&&Z.call(this,Pn)&&!isNaN(+Pn.slice(1))&&(this[Pn]=void 0)},stop:function(){this.done=!0;var Ct=this.tryEntries[0].completion;if(Ct.type==="throw")throw Ct.arg;return this.rval},dispatchException:function(Ct){if(this.done)throw Ct;var Pn=this;function jt(Xn,Ar){return on.type="throw",on.arg=Ct,Pn.next=Xn,Ar&&(Pn.method="next",Pn.arg=void 0),!!Ar}for(var cn=this.tryEntries.length-1;cn>=0;--cn){var qn=this.tryEntries[cn],on=qn.completion;if(qn.tryLoc==="root")return jt("end");if(qn.tryLoc<=this.prev){var lo=Z.call(qn,"catchLoc"),Zi=Z.call(qn,"finallyLoc");if(lo&&Zi){if(this.prev<qn.catchLoc)return jt(qn.catchLoc,!0);if(this.prev<qn.finallyLoc)return jt(qn.finallyLoc)}else if(lo){if(this.prev<qn.catchLoc)return jt(qn.catchLoc,!0)}else{if(!Zi)throw new Error("try statement without catch or finally");if(this.prev<qn.finallyLoc)return jt(qn.finallyLoc)}}}},abrupt:function(Ct,Pn){for(var jt=this.tryEntries.length-1;jt>=0;--jt){var cn=this.tryEntries[jt];if(cn.tryLoc<=this.prev&&Z.call(cn,"finallyLoc")&&this.prev<cn.finallyLoc){var qn=cn;break}}qn&&(Ct==="break"||Ct==="continue")&&qn.tryLoc<=Pn&&Pn<=qn.finallyLoc&&(qn=null);var on=qn?qn.completion:{};return on.type=Ct,on.arg=Pn,qn?(this.method="next",this.next=qn.finallyLoc,De):this.complete(on)},complete:function(Ct,Pn){if(Ct.type==="throw")throw Ct.arg;return Ct.type==="break"||Ct.type==="continue"?this.next=Ct.arg:Ct.type==="return"?(this.rval=this.arg=Ct.arg,this.method="return",this.next="end"):Ct.type==="normal"&&Pn&&(this.next=Pn),De},finish:function(Ct){for(var Pn=this.tryEntries.length-1;Pn>=0;--Pn){var jt=this.tryEntries[Pn];if(jt.finallyLoc===Ct)return this.complete(jt.completion,jt.afterLoc),He(jt),De}},catch:function(Ct){for(var Pn=this.tryEntries.length-1;Pn>=0;--Pn){var jt=this.tryEntries[Pn];if(jt.tryLoc===Ct){var cn=jt.completion;if(cn.type==="throw"){var qn=cn.arg;He(jt)}return qn}}throw new Error("illegal catch attempt")},delegateYield:function(Ct,Pn,jt){return this.delegate={iterator:Bt(Ct),resultName:Pn,nextLoc:jt},this.method==="next"&&(this.arg=void 0),De}},q}Ne.exports=R,Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports},18698:function(Ne){function L(M){return Ne.exports=L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports,L(M)}Ne.exports=L,Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports},64687:function(Ne,L,M){var j=M(17061)();Ne.exports=j;try{regeneratorRuntime=j}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=j:Function("r","regeneratorRuntime = r")(j)}}}]);
