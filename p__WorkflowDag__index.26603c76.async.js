"use strict";(self.webpackChunkflowline_admin=self.webpackChunkflowline_admin||[]).push([[375],{61051:function(Le,Z,S){S.r(Z),S.d(Z,{WorkflowDag:function(){return z},default:function(){return Me}});var J=S(55559),m=S.n(J),q=S(45223),e=S.n(q),Y=S(67294),r=S(59070),_=S(25680),ee=S.n(_),re=S(74411),N=S.n(re),R=S(92757),ae=S(62914),ne=S(79910),U=S(51446);function K(p){return N()({id:(0,r.k$)(),type:r.Ak.AnchorType.INPUT,group:r.Ak.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u6869"},p)}var te=(0,r.vD)(function(p){p.setRegisterHook(function(v){var g=[v.reactNodeRender.registerHook({name:"add react node",handler:function(){var t=m()(e().mark(function a(i){return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.set(R.or,ae.E),i.set(R.pN,ne.G);case 2:case"end":return n.stop()}},a)}));function c(a){return t.apply(this,arguments)}return c}()}),v.graphOptions.registerHook({name:"custom-x6-options",after:"dag-extension-x6-options",handler:function(){var t=m()(e().mark(function a(i){return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.grid=!1,i.keyboard={enabled:!0};case 2:case"end":return n.stop()}},a)}));function c(a){return t.apply(this,arguments)}return c}()}),v.x6Events.registerHook({name:"add",handler:function(){var t=m()(e().mark(function a(i){return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.push({eventName:"node:moved",callback:function(l,E){var d=l.node;E.executeCommand(r.cE.MOVE_NODE.id,{id:d.id,position:d.getPosition()})}},{eventName:"edge:added",callback:function(l,E){var d=l.edge.getTargetNode(),y=U.QK.getByPath(l,"options.isCommand","."),D=U.QK.getByPath(l,"options.isRenderGraph",".");!y||D||d&&E.executeCommand(r.cE.UPDATE_NODE_PORT.id,{node:d,updatePorts:function(){var w=m()(e().mark(function f(k){return e().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",[].concat(ee()(k),[K({})]));case 1:case"end":return b.stop()}},f)}));function u(f){return w.apply(this,arguments)}return u}()})}},{eventName:"edge:removed",callback:function(l,E){var d=l.edge.getTargetCellId(),y=l.edge.getTargetPortId(),D=U.QK.getByPath(l,"options.isCommand","."),w=U.QK.getByPath(l,"options.isRenderGraph",".");!D||w||E.executeCommand(r.cE.UPDATE_NODE_PORT.id,{node:d,updatePorts:function(){var u=m()(e().mark(function k(C){var b,O;return e().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return b=C.filter(function(M){return M.id!==y}),O=b.filter(function(M){return M.type===r.Ak.AnchorType.INPUT}),O.length===0&&b.push(K({})),P.abrupt("return",b);case 4:case"end":return P.stop()}},k)}));function f(k){return u.apply(this,arguments)}return f}()})}});case 1:case"end":return n.stop()}},a)}));function c(a){return t.apply(this,arguments)}return c}()})],h=new r.K4;return h.pushAll(g),h})}),ie=S(91994),ue=S(80164),oe=S.n(ue),F=S(8609),G;(function(p){var v=p.NODE_COMMON_PROPS={renderKey:R.or,width:R.nK,height:R.M8},g=p.queryGraphMeta=function(){var w=m()(e().mark(function u(f){return e().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",N()(N()({},f),{},{flowId:f.meta.flowId}));case 1:case"end":return C.stop()}},u)}));return function(u){return w.apply(this,arguments)}}(),h=p.loadGraphData=function(){var w=m()(e().mark(function u(f){return e().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,F.xI)({uid:f.flowId});case 2:return C.abrupt("return",C.sent);case 3:case"end":return C.stop()}},u)}));return function(u){return w.apply(this,arguments)}}(),t=p.saveGraphData=function(){var w=m()(e().mark(function u(f,k){var C;return e().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,F.W2)({uid:f.flowId},{nodes:k.nodes,edges:k.edges,kind:"dag",apiVersion:"v1"});case 2:return C=O.sent,O.abrupt("return",{success:C.status,data:k});case 4:case"end":return O.stop()}},u)}));return function(u,f){return w.apply(this,arguments)}}(),c=p.deployDagService=function(){var w=m()(e().mark(function u(f,k){return e().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",{success:!0,data:k});case 1:case"end":return b.stop()}},u)}));return function(u,f){return w.apply(this,arguments)}}(),a=p.addNode=function(){var w=m()(e().mark(function u(f){var k,C,b,O,L,P,M,j;return e().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return console.info("addNode service running, add node:",f),k=[{type:r.Ak.AnchorType.INPUT,group:r.Ak.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u6869"},{type:r.Ak.AnchorType.OUTPUT,group:r.Ak.AnchorGroup.BOTTOM,tooltip:"\u8F93\u51FA\u6869"}],C=f.nodeConfig,b=C.id,O=C.ports,L=O===void 0?k:O,P=C.groupChildren,M=b||(0,r.k$)(),j=N()(N()(N()({},v),f.nodeConfig),{},{id:M,ports:L.map(function(Ie){return N()(N()({},Ie),{},{id:(0,r.k$)()})})}),P&&P.length&&(j.ports=[]),H.abrupt("return",j);case 7:case"end":return H.stop()}},u)}));return function(u){return w.apply(this,arguments)}}(),i=p.renameNode=function(){var w=m()(e().mark(function u(f,k,C){return e().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",{err:null,nodeName:f});case 1:case"end":return O.stop()}},u)}));return function(u,f,k){return w.apply(this,arguments)}}(),o=p.delNode=function(){var w=m()(e().mark(function u(f){return e().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return console.info("delNode service running, del node:",f.nodeConfig.id),C.abrupt("return",!0);case 2:case"end":return C.stop()}},u)}));return function(u){return w.apply(this,arguments)}}(),n=p.addEdge=function(){var w=m()(e().mark(function u(f){var k;return e().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return console.info("addEdge service running, add edge:",f),k=f.edgeConfig,b.abrupt("return",N()(N()({},k),{},{id:(0,r.k$)()}));case 3:case"end":return b.stop()}},u)}));return function(u){return w.apply(this,arguments)}}(),s=p.delEdge=function(){var w=m()(e().mark(function u(f){return e().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return console.info("delEdge service running, del edge:",f),C.abrupt("return",!0);case 2:case"end":return C.stop()}},u)}));return function(u){return w.apply(this,arguments)}}(),l=0,E={},d=r.yc.StatusEnum.DEFAULT,y=p.graphStatusService=m()(e().mark(function w(){return e().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return l<4?(E["node".concat(l)]={status:r.yc.StatusEnum.SUCCESS},E["node".concat(l+1)]={status:r.yc.StatusEnum.PROCESSING},l+=1,d=r.yc.StatusEnum.PROCESSING):(l=0,E.node4={status:r.yc.StatusEnum.SUCCESS},d=r.yc.StatusEnum.SUCCESS),f.abrupt("return",{graphStatus:d,statusMap:E});case 2:case"end":return f.stop()}},w)})),D=p.stopGraphStatusService=m()(e().mark(function w(){return e().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return Object.entries(E).forEach(function(k){var C=oe()(k,2),b=C[1],O=b,L=O.status;L===r.yc.StatusEnum.PROCESSING&&(b.status=r.yc.StatusEnum.ERROR)}),f.abrupt("return",{graphStatus:r.yc.StatusEnum.ERROR,statusMap:E});case 2:case"end":return f.stop()}},w)}))})(G||(G={}));var se=(0,r.s4)(function(p){p.setCommandContributions(function(){return ie.m}),p.setRegisterHookFn(function(v){var g=[v.graphMeta.registerHook({name:"get graph meta from backend",handler:function(){var t=m()(e().mark(function a(i){return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.graphMetaService=G.queryGraphMeta;case 1:case"end":return n.stop()}},a)}));function c(a){return t.apply(this,arguments)}return c}()}),v.saveGraphData.registerHook({name:"save graph data",handler:function(){var t=m()(e().mark(function a(i){return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.saveGraphDataService||(i.saveGraphDataService=G.saveGraphData);case 1:case"end":return n.stop()}},a)}));function c(a){return t.apply(this,arguments)}return c}()}),v.addNode.registerHook({name:"get node config from backend api",handler:function(){var t=m()(e().mark(function a(i){return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.createNodeService=G.addNode;case 1:case"end":return n.stop()}},a)}));function c(a){return t.apply(this,arguments)}return c}()}),v.delNode.registerHook({name:"get edge config from backend api",handler:function(){var t=m()(e().mark(function a(i){return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.deleteNodeService=G.delNode;case 1:case"end":return n.stop()}},a)}));function c(a){return t.apply(this,arguments)}return c}()}),v.addEdge.registerHook({name:"get edge config from backend api",handler:function(){var t=m()(e().mark(function a(i){return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.createEdgeService=G.addEdge,i.edgeConfig=N()(N()({},i.edgeConfig),{},{connector:{name:"rounded"},router:{name:"manhattan"}});case 2:case"end":return n.stop()}},a)}));function c(a){return t.apply(this,arguments)}return c}()}),v.delEdge.registerHook({name:"get edge config from backend api",handler:function(){var t=m()(e().mark(function a(i){return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.deleteEdgeService=G.delEdge;case 1:case"end":return n.stop()}},a)}));function c(a){return t.apply(this,arguments)}return c}()})],h=new r.K4;return h.pushAll(g),h})}),W=function(v){v.executeCommandPipeline([{commandId:r.Gv.LOAD_DATA.id,getCommandOption:function(){var g=m()(e().mark(function t(){return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",{args:{loadDataService:G.loadGraphData}});case 1:case"end":return a.stop()}},t)}));function h(){return g.apply(this,arguments)}return h}()},{commandId:r.Gv.GRAPH_LAYOUT.id,getCommandOption:function(){var g=m()(e().mark(function t(c){var a,i;return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=c.getResult(),i=a.graphData,n.abrupt("return",{args:{layoutType:"dagre",layoutOptions:{type:"dagre",rankdir:"TB",nodesep:60,ranksep:30},graphData:i}});case 2:case"end":return n.stop()}},t)}));function h(t){return g.apply(this,arguments)}return h}()},{commandId:r.Gv.GRAPH_RENDER.id,getCommandOption:function(){var g=m()(e().mark(function t(c){var a,i;return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=c.getResult(),i=a.graphData,n.abrupt("return",{args:{graphData:i}});case 2:case"end":return n.stop()}},t)}));function h(t){return g.apply(this,arguments)}return h}()},{commandId:r.Gv.GRAPH_ZOOM.id,getCommandOption:function(){var g=m()(e().mark(function t(){return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",{args:{factor:"fit",zoomOptions:{maxScale:.9}}});case 1:case"end":return a.stop()}},t)}));function h(){return g.apply(this,arguments)}return h}()}])},V;(function(p){var v=p.id="test"})(V||(V={}));var le=(0,r.HJ)(function(p){p.registerModel(function(v){return v.registerModel({id:V.id,getInitialValue:function(){e:;}})})}),Ue=null,Q=S(90387),ce=S(73171),de=S(8212),X=S(15360),pe=S(50146),A;(function(p){r.ko.set("DeleteOutlined",ce.Z),r.ko.set("EditOutlined",de.Z),r.ko.set("StopOutlined",X.Z);var v=p.DELETE_EDGE={id:r.$b.DEL_EDGE.id,label:"Delete edge",iconName:"DeleteOutlined",onClick:function(){var a=m()(e().mark(function o(n){var s,l;return e().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:s=n.target,l=n.commandService,l.executeCommand(r.$b.DEL_EDGE.id,{edgeConfig:s.data});case 2:case"end":return d.stop()}},o)}));function i(o){return a.apply(this,arguments)}return i}()},g=p.DELETE_NODE={id:r.cE.DEL_NODE.id,label:"Delete node",iconName:"DeleteOutlined",onClick:function(){var a=m()(e().mark(function o(n){var s,l,E,d;return e().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:E=n.target,d=n.commandService,pe.Z.confirm({title:"Confirm delete node?",content:"".concat((s=E.data)===null||s===void 0?void 0:s.label," [").concat((l=E.data)===null||l===void 0?void 0:l.id,"]"),okText:"Confirm",cancelText:"Cancel",onOk:function(){d.executeCommand(r.cE.DEL_NODE.id,{nodeConfig:{id:E.data.id}})}});case 2:case"end":return D.stop()}},o)}));function i(o){return a.apply(this,arguments)}return i}()},h=p.EMPTY_MENU={id:"EMPTY_MENU_ITEM",label:"Not available yet",isEnabled:!1,iconName:"DeleteOutlined"},t=p.RENAME_NODE={id:Q.E.SHOW_RENAME_MODAL.id,label:"Rename",isVisible:!0,iconName:"EditOutlined",onClick:function(){var a=m()(e().mark(function o(n){var s,l,E;return e().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:s=n.target,l=n.commandService,E=s.data,l.executeCommand(Q.E.SHOW_RENAME_MODAL.id,{nodeConfig:E,updateNodeNameService:G.renameNode});case 3:case"end":return y.stop()}},o)}));function i(o){return a.apply(this,arguments)}return i}()},c=p.SEPARATOR={id:"separator",type:r.UI.Separator}})(A||(A={}));var fe=(0,r.Kd)(function(p){p.setMenuModelService(function(){var v=m()(e().mark(function g(h,t,c,a){var i,o;return e().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:i=h.type,o=h.cell,s.t0=i,s.next=s.t0==="node"?4:s.t0==="edge"?6:s.t0==="blank"?8:10;break;case 4:return t.setValue({id:"root",type:r.UI.Root,submenu:[A.DELETE_NODE,A.RENAME_NODE]}),s.abrupt("break",12);case 6:return t.setValue({id:"root",type:r.UI.Root,submenu:[A.DELETE_EDGE]}),s.abrupt("break",12);case 8:return t.setValue({id:"root",type:r.UI.Root,submenu:[A.EMPTY_MENU]}),s.abrupt("break",12);case 10:return t.setValue({id:"root",type:r.UI.Root,submenu:[A.EMPTY_MENU]}),s.abrupt("break",12);case 12:case"end":return s.stop()}},g)}));return function(g,h,t,c){return v.apply(this,arguments)}}())}),me=S(92104),ve=S(97254),he=S(18094),ge=S(36371),Ee=S(50827),Se=S(54034),B=S(24565),T=S(85893),I;(function(p){r.ko.set("SaveOutlined",me.Z),r.ko.set("CloudSyncOutlined",ve.Z),r.ko.set("GatewayOutlined",he.Z),r.ko.set("GroupOutlined",ge.Z),r.ko.set("UngroupOutlined",Ee.Z),r.ko.set("PlaySquareOutlined",Se.Z),r.ko.set("StopOutlined",X.Z);var v=p.getDependencies=function(){var t=m()(e().mark(function c(a){return e().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.dX.SELECTED_CELLS.getModel(a);case 2:return o.t0=o.sent,o.next=5,r.dX.GRAPH_ENABLE_MULTI_SELECT.getModel(a);case 5:return o.t1=o.sent,o.next=8,r.yc.MODEL.getModel(a);case 8:return o.t2=o.sent,o.abrupt("return",[o.t0,o.t1,o.t2]);case 10:case"end":return o.stop()}},c)}));return function(c){return t.apply(this,arguments)}}(),g=p.getToolbarState=function(){var t=m()(e().mark(function c(a){var i,o,n,s,l;return e().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,r.dX.GRAPH_ENABLE_MULTI_SELECT.useValue(a);case 2:return i=d.sent,o=i.isEnable,d.next=6,r.dX.IS_GROUP_SELECTED.useValue(a);case 6:return n=d.sent,d.next=9,r.dX.IS_NORMAL_NODES_SELECTED.useValue(a);case 9:return s=d.sent,d.next=12,r.yc.MODEL.useValue(a);case 12:return l=d.sent,d.abrupt("return",{isNodeSelected:s,isGroupSelected:n,isMultiSelectionActive:o,isProcessing:l.graphStatus===r.yc.StatusEnum.PROCESSING});case 14:case"end":return d.stop()}},c)}));return function(c){return t.apply(this,arguments)}}(),h=p.getToolbarItems=function(){var t=m()(e().mark(function c(a){var i,o;return e().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i=[],o=[],i.push({id:r.Gv.SAVE_GRAPH_DATA.id+"check",iconName:"GatewayOutlined",tooltip:"Grammar check",onClick:function(){var l=m()(e().mark(function d(y){var D;return e().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:D=y.commandService,D.executeCommand(r.Gv.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(k,C){return G.saveGraphData(k,C)}});case 2:case"end":return u.stop()}},d)}));function E(d){return l.apply(this,arguments)}return E}()}),i.push({id:r.Gv.SAVE_GRAPH_DATA.id,iconName:"SaveOutlined",tooltip:"Save data",onClick:function(){var l=m()(e().mark(function d(y){var D;return e().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:D=y.commandService,D.executeCommand(r.Gv.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(k,C){return G.saveGraphData(k,C)}});case 2:case"end":return u.stop()}},d)}));function E(d){return l.apply(this,arguments)}return E}(),render:function(E){return(0,T.jsx)(B.Z,{title:"Confirm to save data\uFF1F",onConfirm:function(){E.onClick()},children:E.children})}}),o.push({id:r.ho.QUERY_GRAPH_STATUS.id+"play",tooltip:"Start execution",iconName:"PlaySquareOutlined",isEnabled:!a.isProcessing,onClick:function(){var l=m()(e().mark(function d(y){var D;return e().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:D=y.commandService,D.executeCommand(r.ho.QUERY_GRAPH_STATUS.id,{graphStatusService:G.graphStatusService,loopInterval:3e3});case 2:case"end":return u.stop()}},d)}));function E(d){return l.apply(this,arguments)}return E}()}),o.push({id:r.ho.QUERY_GRAPH_STATUS.id+"stop",tooltip:"Stop execution",iconName:"StopOutlined",isEnabled:a.isProcessing,onClick:function(){var l=m()(e().mark(function d(y){var D;return e().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:D=y.commandService,D.executeCommand(r.ho.QUERY_GRAPH_STATUS.id,{graphStatusService:G.stopGraphStatusService,loopInterval:5e3});case 2:case"end":return u.stop()}},d)}));function E(d){return l.apply(this,arguments)}return E}(),render:function(E){return(0,T.jsx)(B.Z,{title:"Confirm stop execution\uFF1F",onConfirm:function(){E.onClick()},children:E.children})}}),s.abrupt("return",[{name:"graphData",items:i},{name:"customCmd",items:o}]);case 7:case"end":return s.stop()}},c)}));return function(c){return t.apply(this,arguments)}}()})(I||(I={}));var we=(0,r.iR)(function(p){p.setToolbarModelService(function(){var v=m()(e().mark(function g(h,t,c){var a,i,o;return e().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=function(){var l=m()(e().mark(function E(){var d,y;return e().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,I.getToolbarState(t);case 2:return d=w.sent,w.next=5,I.getToolbarItems(d);case 5:y=w.sent,h.setValue(function(u){u.mainGroups=y});case 7:case"end":return w.stop()}},E)}));return function(){return l.apply(this,arguments)}}(),s.next=3,I.getDependencies(t);case 3:i=s.sent,o=i.map(function(l){return l.watch(m()(e().mark(function E(){return e().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:a();case 1:case"end":return y.stop()}},E)})))}),c.pushAll(o);case 6:case"end":return s.stop()}},g)}));return function(g,h,t){return v.apply(this,arguments)}}())}),Ce=(0,r.zg)(function(p){p.setKeybindingFunc(function(v){return v.registerKeybinding([{id:"delete node or edge",keybinding:"backspace",callback:function(){var g=m()(e().mark(function t(c,a,i){var o;return e().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.dX.SELECTED_CELLS.useValue(a);case 2:return o=s.sent,s.next=5,Promise.all(o.map(function(l){if(l.isEdge())return i.executeCommand(r.$b.DEL_EDGE.id,{edgeConfig:N()(N()({},l.getData()),{},{id:l.id})})}));case 5:return s.next=7,Promise.all(o.map(function(l){if(l.isNode())return i.executeCommand(r.cE.DEL_NODE.id,{nodeConfig:N()(N()({},l.getData()),{},{id:l.id})})}));case 7:case"end":return s.stop()}},t)}));function h(t,c,a){return g.apply(this,arguments)}return h}()},{id:"copy",keybinding:["command+c","ctrl+c"],callback:function(){var g=m()(e().mark(function t(c,a,i,o){return e().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:o.preventDefault(),i.executeCommand(r.Gv.GRAPH_COPY.id,{});case 2:case"end":return s.stop()}},t)}));function h(t,c,a,i){return g.apply(this,arguments)}return h}()},{id:"paste",keybinding:["command+v","ctrl+v"],callback:function(){var g=m()(e().mark(function t(c,a,i,o){return e().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:o.preventDefault(),i.executeCommand(r.Gv.GRAPH_PASTE.id,{});case 2:case"end":return s.stop()}},t)}));function h(t,c,a,i){return g.apply(this,arguments)}return h}()}])})}),ye=S(91894),ke=function(){var p=m()(e().mark(function v(g,h,t){var c;return e().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:c={nodeConfig:N()(N()({},g),{},{id:(0,r.k$)()})},h.executeCommand(r.cE.ADD_NODE.id,c);case 2:case"end":return i.stop()}},v)}));return function(g,h,t){return p.apply(this,arguments)}}(),De=function(v){return(0,T.jsxs)(ye.Z,{size:"small",title:"Introduction to Compute Nodes",style:{width:"200px"},bordered:!1,children:["Welcome\uFF1A",v.name,"Here you can perform operations according to the set code"]})},be=function(){var p=m()(e().mark(function v(g,h){return e().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",[{id:"data calculation",header:"Data calculation",children:[{id:"2",label:"Compute Node",parentId:"1",renderKey:R.or,popoverContent:(0,T.jsx)(De,{name:"Compute Node"})}]}]);case 1:case"end":return c.stop()}},v)}));return function(g,h){return p.apply(this,arguments)}}(),Oe=function(){var p=m()(e().mark(function v(){var g,h,t=arguments;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return g=t.length>0&&t[0]!==void 0?t[0]:[],h=t.length>1?t[1]:void 0,a.abrupt("return",g.filter(function(i){return i.label.includes(h)}));case 3:case"end":return a.stop()}},v)}));return function(){return p.apply(this,arguments)}}(),$=S(72116),Ne=S(76888),Te=S(68564),Ge=S(26904);function He(p){return new Promise(function(v){return setTimeout(function(){return v(!0)},p)})}var Pe=function(){var p=m()(e().mark(function v(g){var h,t,c,a,i,o,n,s,l,E,d,y,D;return e().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=g.modelService,i=g.targetType,u.next=3,r.dX.GRAPH_META.useValue(a);case 3:if(o=u.sent,i!=="canvas"){u.next=6;break}return u.abrupt("return",{tabs:[{name:"DagMeta",groups:[{name:"groupName",controls:[{name:"workflowUID",label:"Workflow UID",shape:"Input",disabled:!0,required:!0,tooltip:"Workflow UID",extra:"",placeholder:"workflow uid",value:"",defaultValue:o.flowId,hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"Graph data",name:"graphJSON",shape:$.Y.EDITOR,disabled:!1,required:!0,tooltip:"JSON \u6570\u636E",placeholder:"JSON \u6570\u636E",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"View log link",name:"log",shape:$.Y.LINKSHAPE,disabled:!1,required:!0,tooltip:"log link",placeholder:"log link",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}}]}]}]});case 6:return u.next=8,(0,Ne.NQ)();case 8:return n=u.sent,u.next=11,(0,Ge.Xn)();case 11:return s=u.sent,u.next=14,(0,Te.Pb)();case 14:return l=u.sent,E=[],n!=null&&n.items!=null&&n.items.forEach(function(f){E.push({label:f.name,value:f.uid})}),d=[],s!=null&&s.items!=null&&s.items.forEach(function(f){d.push({label:f.name,value:f.uid})}),y=[],l!=null&&l.items!=null&&l.items.forEach(function(f){y.push({label:f.name,value:f.uid})}),D={tabs:[{name:"NodeMeta",groups:[{name:"nodeName",controls:[{label:"Code",name:"code",shape:$.Y.SELECTOR,disabled:!1,required:!0,tooltip:"The code to be run by the compute node",placeholder:"please select code",value:(h=g.targetData)===null||h===void 0?void 0:h.code,defaultValue:"",hidden:!1,options:E,originData:{}},{label:"Variables",name:"variables",shape:$.Y.SELECTOR,disabled:!1,required:!1,tooltip:"Variables loaded by compute nodes",placeholder:"please select connections",value:(t=g.targetData)===null||t===void 0?void 0:t.variables,defaultValue:"",hidden:!1,options:d,originData:{}},{label:"Connections",name:"connections",shape:$.Y.SELECTOR,disabled:!1,required:!1,tooltip:"Connections loaded by compute nodes",placeholder:"please select connections",value:(c=g.targetData)===null||c===void 0?void 0:c.connections,defaultValue:"",hidden:!1,options:y,originData:{}}]}]}]},u.abrupt("return",D);case 23:case"end":return u.stop()}},v)}));return function(g){return p.apply(this,arguments)}}(),Ae=function(){var p=m()(e().mark(function v(){return e().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:case"end":return h.stop()}},v)}));return function(){return p.apply(this,arguments)}}(),Ve=S(195),x=S(95952),Re=S(48705),xe=S(22970),$e=S(71577),z=function(v){var g=v.meta,h=te(v),t=we(),c=fe(),a=se(),i=le(),o=Ce(),n=(0,x.useParams)(),s=(0,x.useNavigate)(),l=Y.useMemo(function(){return{app:null}},[]),E=function(){var y=m()(e().mark(function D(w){return e().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:l.app=w,W(l.app);case 2:case"end":return f.stop()}},D)}));return function(w){return y.apply(this,arguments)}}();Y.useEffect(function(){l.app&&W(l.app)},[l,l.app,g]);var d=(0,x.useIntl)();return(0,T.jsx)(Re._z,{header:{breadcrumb:{routes:[{path:"",breadcrumbName:d.formatMessage({id:"menu.workflows"})},{path:"",breadcrumbName:d.formatMessage({id:"menu.dag"})}]},extra:[(0,T.jsx)($e.Z,{onClick:function(){return s("/workflows")},children:d.formatMessage({id:"pages.common.back"})},"back")]},children:(0,T.jsxs)(r.g,{className:"dag-user-custom-clz",hookConfig:h,modelServiceConfig:i,commandConfig:a,onLoad:E,meta:{flowId:n.uid},children:[(0,T.jsx)(r.ce,{}),(0,T.jsx)(r.zl,{className:"xflow-node-panel",searchService:Oe,nodeDataService:be,onNodeDrop:ke,position:{width:230,top:0,bottom:0,left:0},footerPosition:{height:0},bodyPosition:{top:40,bottom:0,left:0}}),(0,T.jsx)(r.xZ,{className:"xflow-workspace-toolbar-top",layout:"horizontal",config:t,position:{top:0,left:230,right:290,bottom:0}}),(0,T.jsxs)(r.n1,{position:{top:40,left:230,right:290,bottom:0},children:[(0,T.jsx)(r.It,{position:{top:12,right:12}}),(0,T.jsx)(r.g8,{config:c}),(0,T.jsx)(r.XS,{color:"#faad14"}),(0,T.jsx)(r.w5,{})]}),(0,T.jsx)(r.Ip,{controlMapService:$.O,formSchemaService:Pe,formValueUpdateService:Ae,bodyPosition:{top:0,bottom:0,right:0},position:{width:290,top:0,bottom:0,right:0},footerPosition:{height:0}}),(0,T.jsx)(r.G7,{config:o})]})})},Me=z}}]);
