"use strict";(self.webpackChunkflowline_admin=self.webpackChunkflowline_admin||[]).push([[141],{64317:function(se,K,a){var C=a(1413),j=a(45987),S=a(85893),t=a(96202),w=a(67294),v=a(66758),D=a(69553),m=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],P=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],R=w.forwardRef(function(n,Z){var Y=n.fieldProps,$=n.children,J=n.params,e=n.proFieldProps,F=n.mode,N=n.valueEnum,k=n.request,z=n.showSearch,X=n.options,H=(0,j.Z)(n,m),i=(0,w.useContext)(v.Z);return(0,S.jsx)(D.Z,(0,C.Z)((0,C.Z)({valueEnum:(0,t.h)(N),request:k,params:J,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,C.Z)({options:X,mode:F,showSearch:z,getPopupContainer:i.getPopupContainer},Y),ref:Z,proFieldProps:e},H),{},{children:$}))}),V=w.forwardRef(function(n,Z){var Y=n.fieldProps,$=n.children,J=n.params,e=n.proFieldProps,F=n.mode,N=n.valueEnum,k=n.request,z=n.options,X=(0,j.Z)(n,P),H=(0,C.Z)({options:z,mode:F||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},Y),i=(0,w.useContext)(v.Z);return(0,S.jsx)(D.Z,(0,C.Z)((0,C.Z)({valueEnum:(0,t.h)(N),request:k,params:J,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,C.Z)({getPopupContainer:i.getPopupContainer},H),ref:Z,proFieldProps:e},X),{},{children:$}))}),y=R,O=V,A=y;A.SearchSelect=O,A.displayName="ProFormComponent",K.Z=A},5966:function(se,K,a){var C=a(1413),j=a(45987),S=a(85893),t=a(69553),w=["fieldProps","proFieldProps"],v=["fieldProps","proFieldProps"],D="text",m=function(y){var O=y.fieldProps,A=y.proFieldProps,n=(0,j.Z)(y,w);return(0,S.jsx)(t.Z,(0,C.Z)({valueType:D,fieldProps:O,filedConfig:{valueType:D},proFieldProps:A},n))},P=function(y){var O=y.fieldProps,A=y.proFieldProps,n=(0,j.Z)(y,v);return(0,S.jsx)(t.Z,(0,C.Z)({valueType:"password",fieldProps:O,proFieldProps:A,filedConfig:{valueType:D}},n))},R=m;R.Password=P,R.displayName="ProFormComponent",K.Z=R},90672:function(se,K,a){var C=a(1413),j=a(45987),S=a(85893),t=a(67294),w=a(69553),v=["fieldProps","proFieldProps"],D=function(P,R){var V=P.fieldProps,y=P.proFieldProps,O=(0,j.Z)(P,v);return(0,S.jsx)(w.Z,(0,C.Z)({ref:R,valueType:"textarea",fieldProps:V,proFieldProps:y},O))};K.Z=t.forwardRef(D)},47906:function(se,K,a){a.r(K),a.d(K,{default:function(){return fe}});var C=a(12741),j=a.n(C),S=a(97983),t=a.n(S),w=a(11281),v=a.n(w),D=a(40794),m=a.n(D),P=a(85063),R=a(24969),V=a(52077),y=a(20397),O=a(62876),A=a(78091),n=a(5966),Z=a(90672),Y=a(64317),$=a(1413),J=a(45987),e=a(85893),F=a(67294),N=a(69553),k=["fieldProps","min","proFieldProps","max"],z=function(o,r){var f=o.fieldProps,x=o.min,s=o.proFieldProps,E=o.max,c=(0,J.Z)(o,k);return(0,e.jsx)(N.Z,(0,$.Z)({valueType:"digit",fieldProps:(0,$.Z)({min:x,max:E},f),ref:r,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:s},c))},X=F.forwardRef(z),H=a(7338),i=a(36275),T=a(12461),q=a(71577),ne=a(63463),u=a(83962),l=a(85402),_=function(o){var r=(0,i.useIntl)();return(0,e.jsx)(l.Z,{width:800,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:r.formatMessage({id:"pages.connectionList.form.connectionConfig",defaultMessage:"\u8FDE\u63A5\u7F16\u8F91"}),open:o.updateModalVisible,onCancel:function(){o.onCancel()},footer:null,children:(0,e.jsxs)(u.A,{initialValues:{name:o.values.name,describe:o.values.describe,type:o.values.type,host:o.values.host,schema:o.values.schema,login:o.values.login,password:o.values.password,port:o.values.port,extra:o.values.extra},title:r.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),onFinish:function(){var f=m()(t()().mark(function x(s){return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,o.onSubmit(v()(v()({},o.values),s));case 2:return c.abrupt("return",!0);case 3:case"end":return c.stop()}},x)}));return function(x){return f.apply(this,arguments)}}(),submitter:{submitButtonProps:{},render:function(x){return[(0,e.jsx)(q.Z,{type:"primary",onClick:function(){var E,c;return(E=x.form)===null||E===void 0||(c=E.submit)===null||c===void 0?void 0:c.call(E)},children:"\u63D0\u4EA4"},"submit"),(0,e.jsx)(q.Z,{type:"dashed",onClick:function(){var E;return(E=x.form)===null||E===void 0?void 0:E.resetFields()},children:"\u91CD\u7F6E"},"rest"),(0,e.jsx)(q.Z,{type:"dashed",onClick:function(){return o.onCancel()},children:"\u53D6\u6D88"},"cancel")]}},children:[(0,e.jsx)(n.Z,{rules:[{required:!0,message:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.ruleName",defaultMessage:"Connection name is required"})}],name:"name",placeholder:r.formatMessage({id:"pages.connectionList.form.name",defaultMessage:"Connection name"}),label:r.formatMessage({id:"pages.connectionList.form.name",defaultMessage:"Connection name"})}),(0,e.jsx)(Z.Z,{name:"describe",placeholder:r.formatMessage({id:"pages.connectionList.form.describe",defaultMessage:"Connection describe"}),label:r.formatMessage({id:"pages.connectionList.form.describe",defaultMessage:"Connection describe"})}),(0,e.jsx)(Y.Z,{name:"type",placeholder:r.formatMessage({id:"pages.connectionList.form.type.placeholder",defaultMessage:"Connection type"}),label:r.formatMessage({id:"pages.connectionList.form.type",defaultMessage:"Connection type"}),valueEnum:{mysql:"MySQL",redis:"Redis",amazon_s3:"Amazon S3"},rules:[{required:!0,message:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.form.type.rule",defaultMessage:"Connection type"})}]}),(0,e.jsx)(n.Z,{name:"host",placeholder:r.formatMessage({id:"pages.connectionList.form.host.placeholder",defaultMessage:"Connection host"}),label:r.formatMessage({id:"pages.connectionList.form.host",defaultMessage:"Connection host"})}),(0,e.jsx)(n.Z,{name:"schema",placeholder:r.formatMessage({id:"pages.connectionList.form.schema.placeholder",defaultMessage:"Connection schema"}),label:r.formatMessage({id:"pages.connectionList.form.schema",defaultMessage:"Connection schema"})}),(0,e.jsx)(n.Z,{name:"login",placeholder:r.formatMessage({id:"pages.connectionList.form.login.placeholder",defaultMessage:"Connection login"}),label:r.formatMessage({id:"pages.connectionList.form.login",defaultMessage:"Connection login"})}),(0,e.jsx)(n.Z.Password,{name:"password",placeholder:r.formatMessage({id:"pages.connectionList.form.password.placeholder",defaultMessage:"Connection password"}),label:r.formatMessage({id:"pages.connectionList.form.password",defaultMessage:"Connection password"})}),(0,e.jsx)(X,{name:"port",placeholder:r.formatMessage({id:"pages.connectionList.form.port.placeholder",defaultMessage:"Connection port"}),label:r.formatMessage({id:"pages.connectionList.form.port",defaultMessage:"Connection port"})}),(0,e.jsx)(Z.Z,{name:"extra",placeholder:r.formatMessage({id:"pages.connectionList.form.extra",defaultMessage:"Connection extra"}),label:r.formatMessage({id:"pages.connectionList.form.extra",defaultMessage:"Connection extra"})})]})})},d=_,p=function(){var Q=m()(t()().mark(function o(r){var f,x,s;return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return f=T.ZP.loading("Adding"),c.prev=1,x="connection",s="v1",c.next=6,(0,P.ZH)(v()(v()({},r),{},{kind:x,apiVersion:s}));case 6:return f(),T.ZP.success("Added successfully"),c.abrupt("return",!0);case 11:return c.prev=11,c.t0=c.catch(1),f(),T.ZP.error("Adding failed, please try again!"),c.abrupt("return",!1);case 16:case"end":return c.stop()}},o,null,[[1,11]])}));return function(r){return Q.apply(this,arguments)}}(),G=function(){var Q=m()(t()().mark(function o(r){var f;return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return f=T.ZP.loading("Updating"),s.prev=1,s.next=4,(0,P.r8)({uid:r.uid},r);case 4:return f(),T.ZP.success("Update is successful"),s.abrupt("return",!0);case 9:return s.prev=9,s.t0=s.catch(1),f(),T.ZP.error("Update failed, please try again!"),s.abrupt("return",!1);case 14:case"end":return s.stop()}},o,null,[[1,9]])}));return function(r){return Q.apply(this,arguments)}}(),M=function(){var Q=m()(t()().mark(function o(r){var f;return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(f=T.ZP.loading("deleting"),r){s.next=3;break}return s.abrupt("return",!0);case 3:return s.prev=3,s.next=6,(0,P.m9)({uid:"-"});case 6:return f(),T.ZP.success("Deleted successfully and will refresh soon"),s.abrupt("return",!0);case 11:return s.prev=11,s.t0=s.catch(3),f(),T.ZP.error("Delete failed, please try again"),s.abrupt("return",!1);case 16:case"end":return s.stop()}},o,null,[[3,11]])}));return function(r){return Q.apply(this,arguments)}}(),I=function(){var o=(0,F.useState)(!1),r=j()(o,2),f=r[0],x=r[1],s=(0,F.useState)(!1),E=j()(s,2),c=E[0],oe=E[1],he=(0,F.useState)(!1),ie=j()(he,2),le=ie[0],ue=ie[1],ee=(0,F.useRef)(),ge=(0,F.useState)(),de=j()(ge,2),W=de[0],te=de[1],ve=(0,F.useState)([]),ce=j()(ve,2),re=ce[0],pe=ce[1],U=(0,i.useIntl)(),me=[{title:(0,e.jsx)(i.FormattedMessage,{id:"pages.common.uid",defaultMessage:"UID"}),dataIndex:"uid",tip:"The uid is the unique key",render:function(h,g){return(0,e.jsx)("a",{onClick:function(){te(g),ue(!0)},children:h})}},{title:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.form.connectionName.nameLabel",defaultMessage:"Connection name"}),dataIndex:"name"},{title:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.titleDesc",defaultMessage:"Description"}),dataIndex:"describe",valueType:"textarea"},{title:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.form.type",defaultMessage:"connection type"}),dataIndex:"type"},{title:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.form.host",defaultMessage:"connection host"}),dataIndex:"host"},{title:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.form.schema",defaultMessage:"connection schema"}),dataIndex:"schema"},{title:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.form.login",defaultMessage:"connection login"}),dataIndex:"login"},{title:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.form.password",defaultMessage:"connection password"}),dataIndex:"password",valueType:"password"},{title:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.form.port",defaultMessage:"connection port"}),dataIndex:"port",hideInForm:!0},{title:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.form.extra",defaultMessage:"connection extra"}),dataIndex:"extra",hideInForm:!0},{title:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.titleCreatedAt",defaultMessage:"Created time"}),sorter:!0,dataIndex:"creationTimestamp",valueType:"dateTime"},{title:(0,e.jsx)(i.FormattedMessage,{id:"pages.common.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(h,g){return[(0,e.jsx)("a",{onClick:function(){oe(!0),te(g)},children:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.form.connectionConfig",defaultMessage:"Configuration"})},"config")]}}];return(0,e.jsxs)(V.ZP,{children:[(0,e.jsx)(y.Z,{headerTitle:U.formatMessage({id:"pages.common.tableTitle",defaultMessage:"Enquiry form"}),actionRef:ee,rowKey:"uid",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(q.Z,{type:"primary",onClick:function(){x(!0)},children:[(0,e.jsx)(R.Z,{})," ",(0,e.jsx)(i.FormattedMessage,{id:"pages.common.new",defaultMessage:"New"})]},"primary")]},request:m()(t()().mark(function b(){var h;return t()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,P.Pb)();case 2:return h=L.sent,L.abrupt("return",{data:h.items,success:!0});case 4:case"end":return L.stop()}},b)})),columns:me,rowSelection:{onChange:function(h,g){pe(g)}}}),(re==null?void 0:re.length)>0&&(0,e.jsx)(O.Z,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(i.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,e.jsx)("a",{style:{fontWeight:600},children:re.length})," ",(0,e.jsx)(i.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,e.jsx)(q.Z,{onClick:m()(t()().mark(function b(){var h,g;return t()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,M(re);case 2:pe([]),(h=ee.current)===null||h===void 0||(g=h.reloadAndRest)===null||g===void 0||g.call(h);case 4:case"end":return ae.stop()}},b)})),children:(0,e.jsx)(i.FormattedMessage,{id:"pages.common.batchDeletion",defaultMessage:"Batch deletion"})})}),(0,e.jsxs)(A.Y,{title:U.formatMessage({id:"pages.connectionList.form.newConnection",defaultMessage:"New connection"}),width:"400px",visible:f,onVisibleChange:x,onFinish:function(){var b=m()(t()().mark(function h(g){var L;return t()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,p(g);case 2:L=B.sent,L&&(x(!1),ee.current&&ee.current.reload());case 4:case"end":return B.stop()}},h)}));return function(h){return b.apply(this,arguments)}}(),children:[(0,e.jsx)(n.Z,{rules:[{required:!0,message:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.ruleName",defaultMessage:"Connection name is required"})}],width:"md",name:"name",placeholder:U.formatMessage({id:"pages.connectionList.form.name",defaultMessage:"Connection name"})}),(0,e.jsx)(Z.Z,{width:"md",name:"describe",placeholder:U.formatMessage({id:"pages.connectionList.form.describe",defaultMessage:"Connection describe"})}),(0,e.jsx)(Y.Z,{width:"md",name:"type",placeholder:U.formatMessage({id:"pages.connectionList.form.type.placeholder",defaultMessage:"Connection type"}),valueEnum:{mysql:"MySQL",redis:"Redis",amazon_s3:"Amazon S3"},rules:[{required:!0,message:(0,e.jsx)(i.FormattedMessage,{id:"pages.connectionList.form.type.rule",defaultMessage:"Connection type"})}]}),(0,e.jsx)(n.Z,{width:"md",name:"host",placeholder:U.formatMessage({id:"pages.connectionList.form.host.placeholder",defaultMessage:"Connection host"})}),(0,e.jsx)(n.Z,{width:"md",name:"schema",placeholder:U.formatMessage({id:"pages.connectionList.form.schema.placeholder",defaultMessage:"Connection schema"})}),(0,e.jsx)(n.Z,{width:"md",name:"login",placeholder:U.formatMessage({id:"pages.connectionList.form.login.placeholder",defaultMessage:"Connection login"})}),(0,e.jsx)(n.Z.Password,{width:"md",name:"password",placeholder:U.formatMessage({id:"pages.connectionList.form.password.placeholder",defaultMessage:"Connection password"})}),(0,e.jsx)(X,{width:"md",name:"port",placeholder:U.formatMessage({id:"pages.connectionList.form.port.placeholder",defaultMessage:"Connection port"})}),(0,e.jsx)(Z.Z,{width:"md",name:"extra",placeholder:U.formatMessage({id:"pages.connectionList.form.extra",defaultMessage:"Connection extra"})})]}),(0,e.jsx)(d,{onSubmit:function(){var b=m()(t()().mark(function h(g){var L;return t()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,G(g);case 2:L=B.sent,L&&(oe(!1),te(void 0),ee.current&&ee.current.reload());case 4:case"end":return B.stop()}},h)}));return function(h){return b.apply(this,arguments)}}(),onCancel:function(){oe(!1),le||te(void 0)},updateModalVisible:c,values:W||{}}),(0,e.jsx)(ne.Z,{width:600,open:le,onClose:function(){te(void 0),ue(!1)},closable:!1,children:(W==null?void 0:W.uid)&&(0,e.jsx)(H.vY,{column:2,title:W==null?void 0:W.uid,request:m()(t()().mark(function b(){return t()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",{data:W||{}});case 1:case"end":return g.stop()}},b)})),params:{id:W==null?void 0:W.uid},columns:me})})]})},fe=I},85063:function(se,K,a){a.d(K,{Pb:function(){return i},ZH:function(){return n},m9:function(){return F},r8:function(){return J}});var C=a(97548),j=a.n(C),S=a(97983),t=a.n(S),w=a(11281),v=a.n(w),D=a(40794),m=a.n(D),P=a(36275),R=null,V=["uid"],y=["uid"],O=null,A=null;function n(u,l){return Z.apply(this,arguments)}function Z(){return Z=m()(t()().mark(function u(l,_){return t()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,P.request)("/api/apps/v1/connection",v()({method:"POST",headers:{"Content-Type":"application/json"},data:l},_||{})));case 1:case"end":return p.stop()}},u)})),Z.apply(this,arguments)}function Y(u,l){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime().mark(function u(l,_){var d,p;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return d=l.uid,p=_objectWithoutProperties(l,R),M.abrupt("return",request("/api/apps/v1/connection/".concat(d),_objectSpread({method:"GET",params:_objectSpread({},p)},_||{})));case 2:case"end":return M.stop()}},u)})),$.apply(this,arguments)}function J(u,l,_){return e.apply(this,arguments)}function e(){return e=m()(t()().mark(function u(l,_,d){var p,G;return t()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return p=l.uid,G=j()(l,V),I.abrupt("return",(0,P.request)("/api/apps/v1/connection/".concat(p),v()({method:"PUT",headers:{"Content-Type":"application/json"},params:v()({},G),data:_},d||{})));case 2:case"end":return I.stop()}},u)})),e.apply(this,arguments)}function F(u,l){return N.apply(this,arguments)}function N(){return N=m()(t()().mark(function u(l,_){var d,p;return t()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return d=l.uid,p=j()(l,y),M.abrupt("return",(0,P.request)("/api/apps/v1/connection/".concat(d),v()({method:"DELETE",params:v()({},p)},_||{})));case 2:case"end":return M.stop()}},u)})),N.apply(this,arguments)}function k(u,l,_){return z.apply(this,arguments)}function z(){return z=_asyncToGenerator(_regeneratorRuntime().mark(function u(l,_,d){var p,G;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return p=l.uid,G=_objectWithoutProperties(l,O),I.abrupt("return",request("/api/apps/v1/connection/".concat(p),_objectSpread({method:"PATCH",headers:{"Content-Type":"application/merge-patch+json"},params:_objectSpread({},G),data:_},d||{})));case 2:case"end":return I.stop()}},u)})),z.apply(this,arguments)}function X(u,l){return H.apply(this,arguments)}function H(){return H=_asyncToGenerator(_regeneratorRuntime().mark(function u(l,_){var d,p;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return d=l.uid,p=_objectWithoutProperties(l,A),M.abrupt("return",request("/api/apps/v1/connection/".concat(d,"/watch"),_objectSpread({method:"GET",params:_objectSpread({},p)},_||{})));case 2:case"end":return M.stop()}},u)})),H.apply(this,arguments)}function i(u){return T.apply(this,arguments)}function T(){return T=m()(t()().mark(function u(l){return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,P.request)("/api/apps/v1/connection/list",v()({method:"GET"},l||{})));case 1:case"end":return d.stop()}},u)})),T.apply(this,arguments)}function q(u){return ne.apply(this,arguments)}function ne(){return ne=_asyncToGenerator(_regeneratorRuntime().mark(function u(l){return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",request("/api/apps/v1/connection/watch",_objectSpread({method:"GET"},l||{})));case 1:case"end":return d.stop()}},u)})),ne.apply(this,arguments)}}}]);
