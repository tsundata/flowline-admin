"use strict";(self.webpackChunkflowline_admin=self.webpackChunkflowline_admin||[]).push([[382],{5966:function(J,S,a){var x=a(1413),_=a(44925),L=a(85893),g=a(2123),W=["fieldProps","proFieldProps"],f=["fieldProps","proFieldProps"],E="text",d=function(y){var D=y.fieldProps,w=y.proFieldProps,F=(0,_.Z)(y,W);return(0,L.jsx)(g.Z,(0,x.Z)({valueType:E,fieldProps:D,filedConfig:{valueType:E},proFieldProps:w},F))},P=function(y){var D=y.fieldProps,w=y.proFieldProps,F=(0,_.Z)(y,f);return(0,L.jsx)(g.Z,(0,x.Z)({valueType:"password",fieldProps:D,proFieldProps:w,filedConfig:{valueType:E}},F))},R=d;R.Password=P,R.displayName="ProFormComponent",S.Z=R},21004:function(J,S,a){a.r(S),a.d(S,{default:function(){return G}});var x=a(80164),_=a.n(x),L=a(74411),g=a.n(L),W=a(55559),f=a.n(W),E=a(45223),d=a.n(E),P=a(65262),R=a(49101),O=a(48705),y=a(51851),D=a(20761),w=a(5966),F=a(60415),m=a(95952),b=a(48086),T=a(71577),V=a(25084),C=a(67294),N=a(63436),A=a(50146),s=a(85893),$=function(e){var u=(0,m.useIntl)();return(0,s.jsx)(A.Z,{width:800,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:u.formatMessage({id:"pages.roleList.form.roleConfig",defaultMessage:"\u7528\u6237\u7F16\u8F91"}),visible:e.updateModalVisible,onCancel:function(){e.onCancel()},footer:null,children:(0,s.jsx)(N.A,{initialValues:{name:e.values.name},title:u.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),onFinish:function(){var t=f()(d().mark(function n(r){return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,e.onSubmit(g()(g()({},e.values),r));case 2:return l.abrupt("return",!0);case 3:case"end":return l.stop()}},n)}));return function(n){return t.apply(this,arguments)}}(),submitter:{submitButtonProps:{},render:function(n){return[(0,s.jsx)(T.Z,{type:"primary",onClick:function(){var o,l;return(o=n.form)===null||o===void 0||(l=o.submit)===null||l===void 0?void 0:l.call(o)},children:"\u63D0\u4EA4"},"submit"),(0,s.jsx)(T.Z,{type:"dashed",onClick:function(){var o;return(o=n.form)===null||o===void 0?void 0:o.resetFields()},children:"\u91CD\u7F6E"},"rest"),(0,s.jsx)(T.Z,{type:"dashed",onClick:function(){return e.onCancel()},children:"\u53D6\u6D88"},"cancel")]}},children:(0,s.jsx)(w.Z,{rules:[{required:!0,message:(0,s.jsx)(m.FormattedMessage,{id:"pages.roleList.ruleName",defaultMessage:"Role name is required"})}],name:"name",placeholder:u.formatMessage({id:"pages.roleList.form.name",defaultMessage:"Role name"}),label:u.formatMessage({id:"pages.roleList.form.name",defaultMessage:"Role name"})})})})},Q=$,I=function(){var i=f()(d().mark(function e(u){var t,n,r;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=b.ZP.loading("Adding"),l.prev=1,n="role",r="v1",l.next=6,(0,P.v9)(g()(g()({},u),{},{kind:n,apiVersion:r}));case 6:return t(),b.ZP.success("Added successfully"),l.abrupt("return",!0);case 11:return l.prev=11,l.t0=l.catch(1),t(),b.ZP.error("Adding failed, please try again!"),l.abrupt("return",!1);case 16:case"end":return l.stop()}},e,null,[[1,11]])}));return function(u){return i.apply(this,arguments)}}(),Y=function(){var i=f()(d().mark(function e(u){var t;return d().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=b.ZP.loading("Updating"),r.prev=1,r.next=4,(0,P.vh)({uid:u.uid},u);case 4:return t(),b.ZP.success("Update is successful"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),t(),b.ZP.error("Update failed, please try again!"),r.abrupt("return",!1);case 14:case"end":return r.stop()}},e,null,[[1,9]])}));return function(u){return i.apply(this,arguments)}}(),B=function(){var i=f()(d().mark(function e(u){var t;return d().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=b.ZP.loading("deleting"),u){r.next=3;break}return r.abrupt("return",!0);case 3:return r.prev=3,r.next=6,(0,P.Fe)({uid:"-"});case 6:return t(),b.ZP.success("Deleted successfully and will refresh soon"),r.abrupt("return",!0);case 11:return r.prev=11,r.t0=r.catch(3),t(),b.ZP.error("Delete failed, please try again"),r.abrupt("return",!1);case 16:case"end":return r.stop()}},e,null,[[3,11]])}));return function(u){return i.apply(this,arguments)}}(),X=function(){var e=(0,C.useState)(!1),u=_()(e,2),t=u[0],n=u[1],r=(0,C.useState)(!1),o=_()(r,2),l=o[0],z=o[1],ue=(0,C.useState)(!1),q=_()(ue,2),ee=q[0],re=q[1],U=(0,C.useRef)(),le=(0,C.useState)(),ae=_()(le,2),M=ae[0],K=ae[1],ie=(0,C.useState)([]),te=_()(ie,2),k=te[0],ne=te[1],H=(0,m.useIntl)(),se=[{title:(0,s.jsx)(m.FormattedMessage,{id:"pages.common.uid",defaultMessage:"UID"}),dataIndex:"uid",tip:"The uid is the unique key",render:function(c,p){return(0,s.jsx)("a",{onClick:function(){K(p),re(!0)},children:c})}},{title:(0,s.jsx)(m.FormattedMessage,{id:"pages.roleList.form.roleName.nameLabel",defaultMessage:"Role name"}),dataIndex:"name"},{title:(0,s.jsx)(m.FormattedMessage,{id:"pages.roleList.titleCreatedAt",defaultMessage:"Created time"}),sorter:!0,dataIndex:"creationTimestamp",valueType:"dateTime"},{title:(0,s.jsx)(m.FormattedMessage,{id:"pages.common.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(c,p){return[(0,s.jsx)("a",{onClick:function(){z(!0),K(p)},children:(0,s.jsx)(m.FormattedMessage,{id:"pages.roleList.form.roleConfig",defaultMessage:"Configuration"})},"config")]}}];return(0,s.jsxs)(O._z,{children:[(0,s.jsx)(y.Z,{headerTitle:H.formatMessage({id:"pages.common.tableTitle",defaultMessage:"Enquiry form"}),actionRef:U,rowKey:"uid",search:{labelWidth:120},toolBarRender:function(){return[(0,s.jsxs)(T.Z,{type:"primary",onClick:function(){n(!0)},children:[(0,s.jsx)(R.Z,{})," ",(0,s.jsx)(m.FormattedMessage,{id:"pages.common.new",defaultMessage:"New"})]},"primary")]},request:f()(d().mark(function h(){var c;return d().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,P.Uy)();case 2:return c=v.sent,v.abrupt("return",{data:c.items,success:!0});case 4:case"end":return v.stop()}},h)})),columns:se,rowSelection:{onChange:function(c,p){ne(p)}}}),k?.length>0&&(0,s.jsx)(O.Sc,{extra:(0,s.jsxs)("div",{children:[(0,s.jsx)(m.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,s.jsx)("a",{style:{fontWeight:600},children:k.length})," ",(0,s.jsx)(m.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,s.jsx)(T.Z,{onClick:f()(d().mark(function h(){var c,p;return d().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,B(k);case 2:ne([]),(c=U.current)===null||c===void 0||(p=c.reloadAndRest)===null||p===void 0||p.call(c);case 4:case"end":return Z.stop()}},h)})),children:(0,s.jsx)(m.FormattedMessage,{id:"pages.common.batchDeletion",defaultMessage:"Batch deletion"})})}),(0,s.jsx)(D.Y,{title:H.formatMessage({id:"pages.roleList.form.newRole",defaultMessage:"New role"}),width:"400px",visible:t,onVisibleChange:n,onFinish:function(){var h=f()(d().mark(function c(p){var v;return d().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,I(p);case 2:v=j.sent,v&&(n(!1),U.current&&U.current.reload());case 4:case"end":return j.stop()}},c)}));return function(c){return h.apply(this,arguments)}}(),children:(0,s.jsx)(w.Z,{rules:[{required:!0,message:(0,s.jsx)(m.FormattedMessage,{id:"pages.roleList.ruleName",defaultMessage:"Role name is required"})}],width:"md",name:"name",placeholder:H.formatMessage({id:"pages.roleList.form.name",defaultMessage:"Role name"})})}),(0,s.jsx)(Q,{onSubmit:function(){var h=f()(d().mark(function c(p){var v;return d().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Y(p);case 2:v=j.sent,v&&(z(!1),K(void 0),U.current&&U.current.reload());case 4:case"end":return j.stop()}},c)}));return function(c){return h.apply(this,arguments)}}(),onCancel:function(){z(!1),ee||K(void 0)},updateModalVisible:l,values:M||{}}),(0,s.jsx)(V.Z,{width:600,visible:ee,onClose:function(){K(void 0),re(!1)},closable:!1,children:M?.uid&&(0,s.jsx)(F.vY,{column:2,title:M?.uid,request:f()(d().mark(function h(){return d().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",{data:M||{}});case 1:case"end":return p.stop()}},h)})),params:{id:M?.uid},columns:se})})]})},G=X},65262:function(J,S,a){a.d(S,{Fe:function(){return N},Uy:function(){return Y},v9:function(){return F},vh:function(){return V}});var x=a(56307),_=a.n(x),L=a(74411),g=a.n(L),W=a(55559),f=a.n(W),E=a(45223),d=a.n(E),P=a(95952),R=null,O=["uid"],y=["uid"],D=null,w=null;function F(i,e){return m.apply(this,arguments)}function m(){return m=f()(d().mark(function i(e,u){return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,P.request)("/api/apps/v1/role",g()({method:"POST",headers:{"Content-Type":"application/json"},data:e},u||{})));case 1:case"end":return n.stop()}},i)})),m.apply(this,arguments)}function b(i,e){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime.mark(function i(e,u){var t,n;return _regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.uid,n=_objectWithoutProperties(e,R),o.abrupt("return",request("/api/apps/v1/role/".concat(t),_objectSpread({method:"GET",params:_objectSpread({},n)},u||{})));case 2:case"end":return o.stop()}},i)})),T.apply(this,arguments)}function V(i,e,u){return C.apply(this,arguments)}function C(){return C=f()(d().mark(function i(e,u,t){var n,r;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n=e.uid,r=_()(e,O),l.abrupt("return",(0,P.request)("/api/apps/v1/role/".concat(n),g()({method:"PUT",headers:{"Content-Type":"application/json"},params:g()({},r),data:u},t||{})));case 2:case"end":return l.stop()}},i)})),C.apply(this,arguments)}function N(i,e){return A.apply(this,arguments)}function A(){return A=f()(d().mark(function i(e,u){var t,n;return d().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.uid,n=_()(e,y),o.abrupt("return",(0,P.request)("/api/apps/v1/role/".concat(t),g()({method:"DELETE",params:g()({},n)},u||{})));case 2:case"end":return o.stop()}},i)})),A.apply(this,arguments)}function s(i,e,u){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime.mark(function i(e,u,t){var n,r;return _regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n=e.uid,r=_objectWithoutProperties(e,D),l.abrupt("return",request("/api/apps/v1/role/".concat(n),_objectSpread({method:"PATCH",headers:{"Content-Type":"application/merge-patch+json"},params:_objectSpread({},r),data:u},t||{})));case 2:case"end":return l.stop()}},i)})),$.apply(this,arguments)}function Q(i,e){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime.mark(function i(e,u){var t,n;return _regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.uid,n=_objectWithoutProperties(e,w),o.abrupt("return",request("/api/apps/v1/role/".concat(t,"/watch"),_objectSpread({method:"GET",params:_objectSpread({},n)},u||{})));case 2:case"end":return o.stop()}},i)})),I.apply(this,arguments)}function Y(i){return B.apply(this,arguments)}function B(){return B=f()(d().mark(function i(e){return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,P.request)("/api/apps/v1/role/list",g()({method:"GET"},e||{})));case 1:case"end":return t.stop()}},i)})),B.apply(this,arguments)}function X(i){return G.apply(this,arguments)}function G(){return G=_asyncToGenerator(_regeneratorRuntime.mark(function i(e){return _regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/apps/v1/role/watch",_objectSpread({method:"GET"},e||{})));case 1:case"end":return t.stop()}},i)})),G.apply(this,arguments)}}}]);
