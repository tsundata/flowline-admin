"use strict";(self.webpackChunkflowline_admin=self.webpackChunkflowline_admin||[]).push([[533],{63636:function(ce,W,a){a.r(W),a.d(W,{default:function(){return E}});var K=a(12741),S=a.n(K),V=a(97983),n=a.n(V),k=a(11281),y=a.n(k),N=a(40794),b=a.n(N),_=a(77754),Y=a(24969),J=a(52077),Q=a(20397),X=a(62876),H=a(78091),B=a(5966),L=a(90672),ae=a(7338),l=a(36275),P=a(12461),x=a(71577),z=a(63463),T=a(67294),re=a(83962),Z=a(64317),te=a(77580),$=a(68344),q=a(85402),A=a(80737),e=a(85893),O=function(t){var m=(0,l.useIntl)();return(0,e.jsx)(q.Z,{width:800,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:m.formatMessage({id:"pages.codeList.form.codeConfig",defaultMessage:"\u4EE3\u7801\u7F16\u8F91"}),visible:t.updateModalVisible,onCancel:function(){t.onCancel()},footer:null,children:(0,e.jsxs)(re.A,{initialValues:{name:t.values.name,describe:t.values.describe,runtime:t.values.runtime,code:t.values.code},title:m.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),onFinish:function(){var h=b()(n()().mark(function v(r){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.onSubmit(y()(y()({},t.values),r));case 2:return o.abrupt("return",!0);case 3:case"end":return o.stop()}},v)}));return function(v){return h.apply(this,arguments)}}(),submitter:{submitButtonProps:{},render:function(v){return[(0,e.jsx)(x.Z,{type:"primary",onClick:function(){var C,o;return(C=v.form)===null||C===void 0||(o=C.submit)===null||o===void 0?void 0:o.call(C)},children:"\u63D0\u4EA4"},"submit"),(0,e.jsx)(x.Z,{type:"dashed",onClick:function(){var C;return(C=v.form)===null||C===void 0?void 0:C.resetFields()},children:"\u91CD\u7F6E"},"rest"),(0,e.jsx)(x.Z,{type:"dashed",onClick:function(){return t.onCancel()},children:"\u53D6\u6D88"},"cancel")]}},children:[(0,e.jsx)(B.Z,{name:"name",label:m.formatMessage({id:"pages.codeList.form.name",defaultMessage:"\u4EE3\u7801\u540D\u79F0"}),rules:[{required:!0,message:(0,e.jsx)(l.FormattedMessage,{id:"pages.codeList.ruleName",defaultMessage:"\u8BF7\u8F93\u5165\u4EE3\u7801\u540D\u79F0\uFF01"})}]}),(0,e.jsx)(L.Z,{name:"describe",label:m.formatMessage({id:"pages.codeList.form.describe",defaultMessage:"\u4EE3\u7801\u63CF\u8FF0"}),placeholder:m.formatMessage({id:"pages.codeList.form.describe.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u4EE3\u7801\u63CF\u8FF0"}),rules:[{required:!0,message:(0,e.jsx)(l.FormattedMessage,{id:"pages.codeList.form.describe.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u4EE3\u7801\u63CF\u8FF0\uFF01"}),min:1}]}),(0,e.jsx)(Z.Z,{name:"runtime",label:m.formatMessage({id:"pages.codeList.form.runtime",defaultMessage:"\u8FD0\u884C\u73AF\u5883"}),valueEnum:{javascript:"JavaScript",go:"Go"},rules:[{required:!0,message:(0,e.jsx)(l.FormattedMessage,{id:"pages.codeList.form.runtime.rule",defaultMessage:"\u8BF7\u9009\u62E9\u8FD0\u884C\u73AF\u5883\uFF01"})}]}),(0,e.jsx)(A.Z.Item,{name:"code",label:m.formatMessage({id:"pages.codeList.form.code",defaultMessage:"\u4EE3\u7801"}),rules:[{required:!0,message:(0,e.jsx)(l.FormattedMessage,{id:"pages.codeList.form.code.rule",defaultMessage:"\u8BF7\u8F93\u5165\u4EE3\u7801\uFF01"}),min:1}],children:(0,e.jsx)($.ZP,{value:t.values.code,width:"100%",height:"300px",onChange:function(v){t.values.code=v},extensions:[(0,te.eJ)({jsx:!0})]})})]})})},u=O,s=function(){var d=b()(n()().mark(function t(m){var h,v,r;return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return h=P.ZP.loading("Adding"),o.prev=1,v="code",r="v1",o.next=6,(0,_.Ys)(y()(y()({},m),{},{kind:v,apiVersion:r}));case 6:return h(),P.ZP.success("Added successfully"),o.abrupt("return",!0);case 11:return o.prev=11,o.t0=o.catch(1),h(),P.ZP.error("Adding failed, please try again!"),o.abrupt("return",!1);case 16:case"end":return o.stop()}},t,null,[[1,11]])}));return function(m){return d.apply(this,arguments)}}(),g=function(){var d=b()(n()().mark(function t(m){var h;return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return h=P.ZP.loading("Updating"),r.prev=1,r.next=4,(0,_.Xs)({uid:m.uid},m);case 4:return h(),P.ZP.success("Update is successful"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),h(),P.ZP.error("Update failed, please try again!"),r.abrupt("return",!1);case 14:case"end":return r.stop()}},t,null,[[1,9]])}));return function(m){return d.apply(this,arguments)}}(),i=function(){var d=b()(n()().mark(function t(m){var h;return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(h=P.ZP.loading("deleting"),m){r.next=3;break}return r.abrupt("return",!0);case 3:return r.prev=3,r.next=6,(0,_.TS)({uid:"-"});case 6:return h(),P.ZP.success("Deleted successfully and will refresh soon"),r.abrupt("return",!0);case 11:return r.prev=11,r.t0=r.catch(3),h(),P.ZP.error("Delete failed, please try again"),r.abrupt("return",!1);case 16:case"end":return r.stop()}},t,null,[[3,11]])}));return function(m){return d.apply(this,arguments)}}(),c=function(){var t=(0,T.useState)(!1),m=S()(t,2),h=m[0],v=m[1],r=(0,T.useState)(!1),C=S()(r,2),o=C[0],ee=C[1],me=(0,T.useState)(!1),se=S()(me,2),ne=se[0],ue=se[1],D=(0,T.useRef)(),pe=(0,T.useState)(),ie=S()(pe,2),F=ie[0],U=ie[1],fe=(0,T.useState)([]),de=S()(fe,2),I=de[0],le=de[1],G=(0,l.useIntl)(),oe=[{title:(0,e.jsx)(l.FormattedMessage,{id:"pages.common.uid",defaultMessage:"UID"}),dataIndex:"uid",tip:"The uid is the unique key",render:function(p,f){return(0,e.jsx)("a",{onClick:function(){U(f),ue(!0)},children:p})}},{title:(0,e.jsx)(l.FormattedMessage,{id:"pages.codeList.form.codeName.nameLabel",defaultMessage:"Code name"}),dataIndex:"name"},{title:(0,e.jsx)(l.FormattedMessage,{id:"pages.codeList.titleDesc",defaultMessage:"Description"}),dataIndex:"describe",valueType:"textarea"},{title:(0,e.jsx)(l.FormattedMessage,{id:"pages.codeList.form.runtime",defaultMessage:"code runtime"}),dataIndex:"runtime",sorter:!0,hideInForm:!0},{title:(0,e.jsx)(l.FormattedMessage,{id:"pages.codeList.titleCreatedAt",defaultMessage:"Created time"}),sorter:!0,dataIndex:"creationTimestamp",valueType:"dateTime"},{title:(0,e.jsx)(l.FormattedMessage,{id:"pages.common.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(p,f){return[(0,e.jsx)("a",{onClick:function(){ee(!0),U(f)},children:(0,e.jsx)(l.FormattedMessage,{id:"pages.codeList.form.codeConfig",defaultMessage:"Configuration"})},"config")]}}];return(0,e.jsxs)(J.ZP,{children:[(0,e.jsx)(Q.Z,{headerTitle:G.formatMessage({id:"pages.common.tableTitle",defaultMessage:"Enquiry form"}),actionRef:D,rowKey:"uid",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(x.Z,{type:"primary",onClick:function(){v(!0)},children:[(0,e.jsx)(Y.Z,{})," ",(0,e.jsx)(l.FormattedMessage,{id:"pages.common.new",defaultMessage:"New"})]},"primary")]},request:b()(n()().mark(function j(){var p;return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,_.NQ)();case 2:return p=M.sent,M.abrupt("return",{data:p.items,success:!0});case 4:case"end":return M.stop()}},j)})),columns:oe,rowSelection:{onChange:function(p,f){le(f)}}}),(I==null?void 0:I.length)>0&&(0,e.jsx)(X.Z,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(l.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,e.jsx)("a",{style:{fontWeight:600},children:I.length})," ",(0,e.jsx)(l.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,e.jsx)(x.Z,{onClick:b()(n()().mark(function j(){var p,f;return n()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,i(I);case 2:le([]),(p=D.current)===null||p===void 0||(f=p.reloadAndRest)===null||f===void 0||f.call(p);case 4:case"end":return R.stop()}},j)})),children:(0,e.jsx)(l.FormattedMessage,{id:"pages.common.batchDeletion",defaultMessage:"Batch deletion"})})}),(0,e.jsxs)(H.Y,{title:G.formatMessage({id:"pages.codeList.form.newCode",defaultMessage:"New code"}),width:"400px",visible:h,onVisibleChange:v,onFinish:function(){var j=b()(n()().mark(function p(f){var M;return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,s(f);case 2:M=w.sent,M&&(v(!1),D.current&&D.current.reload());case 4:case"end":return w.stop()}},p)}));return function(p){return j.apply(this,arguments)}}(),children:[(0,e.jsx)(B.Z,{rules:[{required:!0,message:(0,e.jsx)(l.FormattedMessage,{id:"pages.codeList.ruleName",defaultMessage:"Code name is required"})}],width:"md",name:"name",placeholder:G.formatMessage({id:"pages.codeList.form.name",defaultMessage:"Code name"})}),(0,e.jsx)(L.Z,{width:"md",name:"describe",placeholder:G.formatMessage({id:"pages.codeList.form.describe",defaultMessage:"Code describe"})})]}),(0,e.jsx)(u,{onSubmit:function(){var j=b()(n()().mark(function p(f){var M;return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,g(f);case 2:M=w.sent,M&&(ee(!1),U(void 0),D.current&&D.current.reload());case 4:case"end":return w.stop()}},p)}));return function(p){return j.apply(this,arguments)}}(),onCancel:function(){ee(!1),ne||U(void 0)},updateModalVisible:o,values:F||{}}),(0,e.jsx)(z.Z,{width:600,open:ne,onClose:function(){U(void 0),ue(!1)},closable:!1,children:(F==null?void 0:F.uid)&&(0,e.jsx)(ae.vY,{column:2,title:F==null?void 0:F.uid,request:b()(n()().mark(function j(){return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",{data:F||{}});case 1:case"end":return f.stop()}},j)})),params:{id:F==null?void 0:F.uid},columns:oe})})]})},E=c},77754:function(ce,W,a){a.d(W,{NQ:function(){return q},TS:function(){return z},Xs:function(){return P},Ys:function(){return B}});var K=a(97548),S=a.n(K),V=a(97983),n=a.n(V),k=a(11281),y=a.n(k),N=a(40794),b=a.n(N),_=a(36275),Y=null,J=["uid"],Q=["uid"],X=null,H=null;function B(u,s){return L.apply(this,arguments)}function L(){return L=b()(n()().mark(function u(s,g){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,_.request)("/api/apps/v1/code",y()({method:"POST",headers:{"Content-Type":"application/json"},data:s},g||{})));case 1:case"end":return c.stop()}},u)})),L.apply(this,arguments)}function ae(u,s){return l.apply(this,arguments)}function l(){return l=_asyncToGenerator(_regeneratorRuntime().mark(function u(s,g){var i,c;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return i=s.uid,c=_objectWithoutProperties(s,Y),d.abrupt("return",request("/api/apps/v1/code/".concat(i),_objectSpread({method:"GET",params:_objectSpread({},c)},g||{})));case 2:case"end":return d.stop()}},u)})),l.apply(this,arguments)}function P(u,s,g){return x.apply(this,arguments)}function x(){return x=b()(n()().mark(function u(s,g,i){var c,E;return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=s.uid,E=S()(s,J),t.abrupt("return",(0,_.request)("/api/apps/v1/code/".concat(c),y()({method:"PUT",headers:{"Content-Type":"application/json"},params:y()({},E),data:g},i||{})));case 2:case"end":return t.stop()}},u)})),x.apply(this,arguments)}function z(u,s){return T.apply(this,arguments)}function T(){return T=b()(n()().mark(function u(s,g){var i,c;return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return i=s.uid,c=S()(s,Q),d.abrupt("return",(0,_.request)("/api/apps/v1/code/".concat(i),y()({method:"DELETE",params:y()({},c)},g||{})));case 2:case"end":return d.stop()}},u)})),T.apply(this,arguments)}function re(u,s,g){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime().mark(function u(s,g,i){var c,E;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=s.uid,E=_objectWithoutProperties(s,X),t.abrupt("return",request("/api/apps/v1/code/".concat(c),_objectSpread({method:"PATCH",headers:{"Content-Type":"application/merge-patch+json"},params:_objectSpread({},E),data:g},i||{})));case 2:case"end":return t.stop()}},u)})),Z.apply(this,arguments)}function te(u,s){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime().mark(function u(s,g){var i,c;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return i=s.uid,c=_objectWithoutProperties(s,H),d.abrupt("return",request("/api/apps/v1/code/".concat(i,"/watch"),_objectSpread({method:"GET",params:_objectSpread({},c)},g||{})));case 2:case"end":return d.stop()}},u)})),$.apply(this,arguments)}function q(u){return A.apply(this,arguments)}function A(){return A=b()(n()().mark(function u(s){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/apps/v1/code/list",y()({method:"GET"},s||{})));case 1:case"end":return i.stop()}},u)})),A.apply(this,arguments)}function e(u){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function u(s){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/apps/v1/code/watch",_objectSpread({method:"GET"},s||{})));case 1:case"end":return i.stop()}},u)})),O.apply(this,arguments)}}}]);
