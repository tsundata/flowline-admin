var iN=(De,L,M)=>new Promise((j,D)=>{var J=ee=>{try{Z(M.next(ee))}catch(Q){D(Q)}},z=ee=>{try{Z(M.throw(ee))}catch(Q){D(Q)}},Z=ee=>ee.done?j(ee.value):Promise.resolve(ee.value).then(J,z);Z((M=M.apply(De,L)).next())});(self.webpackChunkflowline_admin=self.webpackChunkflowline_admin||[]).push([[642],{62548:function(De,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),D=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}},{tag:"path",attrs:{d:"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6 25.4-25.5 60-39.8 96-39.8 36.2 0 70.3 14.1 96 39.8 1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 003 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6-107.4 0-195 85.1-199.4 191.7-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6-1.8 33.5-15.7 64.7-39.5 88.6-25.4 25.5-60 39.8-96 39.8-36.2 0-70.3-14.1-96-39.8-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 00-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6 107.4 0 195-85.1 199.4-191.7.2-4.5-3.4-8.3-8-8.3z"}}]},name:"cloud-sync",theme:"outlined"},z=J,Z=M(84089),ee=function(oe,ie){return D.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};ee.displayName="CloudSyncOutlined";var Q=D.forwardRef(ee)},13520:function(De,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),D=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},z=J,Z=M(84089),ee=function(oe,ie){return D.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};ee.displayName="DatabaseOutlined";var Q=D.forwardRef(ee)},29188:function(De,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),D=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 392c8.8 0 16-7.2 16-16V192c0-8.8-7.2-16-16-16H744c-8.8 0-16 7.2-16 16v56H296v-56c0-8.8-7.2-16-16-16H96c-8.8 0-16 7.2-16 16v184c0 8.8 7.2 16 16 16h56v240H96c-8.8 0-16 7.2-16 16v184c0 8.8 7.2 16 16 16h184c8.8 0 16-7.2 16-16v-56h432v56c0 8.8 7.2 16 16 16h184c8.8 0 16-7.2 16-16V648c0-8.8-7.2-16-16-16h-56V392h56zM792 240h88v88h-88v-88zm-648 88v-88h88v88h-88zm88 456h-88v-88h88v88zm648-88v88h-88v-88h88zm-80-64h-56c-8.8 0-16 7.2-16 16v56H296v-56c0-8.8-7.2-16-16-16h-56V392h56c8.8 0 16-7.2 16-16v-56h432v56c0 8.8 7.2 16 16 16h56v240z"}}]},name:"gateway",theme:"outlined"},z=J,Z=M(84089),ee=function(oe,ie){return D.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};ee.displayName="GatewayOutlined";var Q=D.forwardRef(ee)},87057:function(De,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),D=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M912 820.1V203.9c28-9.9 48-36.6 48-67.9 0-39.8-32.2-72-72-72-31.3 0-58 20-67.9 48H203.9C194 84 167.3 64 136 64c-39.8 0-72 32.2-72 72 0 31.3 20 58 48 67.9v616.2C84 830 64 856.7 64 888c0 39.8 32.2 72 72 72 31.3 0 58-20 67.9-48h616.2c9.9 28 36.6 48 67.9 48 39.8 0 72-32.2 72-72 0-31.3-20-58-48-67.9zM888 112c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 912c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-752c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm704 680H184V184h656v656zm48 72c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}},{tag:"path",attrs:{d:"M288 474h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64zm-56 420h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64z"}}]},name:"group",theme:"outlined"},z=J,Z=M(84089),ee=function(oe,ie){return D.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};ee.displayName="GroupOutlined";var Q=D.forwardRef(ee)},61727:function(De,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),D=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M442.3 677.6l199.4-156.7a11.3 11.3 0 000-17.7L442.3 346.4c-7.4-5.8-18.3-.6-18.3 8.8v313.5c0 9.4 10.9 14.7 18.3 8.9z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"play-square",theme:"outlined"},z=J,Z=M(84089),ee=function(oe,ie){return D.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};ee.displayName="PlaySquareOutlined";var Q=D.forwardRef(ee)},87740:function(De,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),D=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},z=J,Z=M(84089),ee=function(oe,ie){return D.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};ee.displayName="RedoOutlined";var Q=D.forwardRef(ee)},60219:function(De,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),D=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},z=J,Z=M(84089),ee=function(oe,ie){return D.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};ee.displayName="SaveOutlined";var Q=D.forwardRef(ee)},87784:function(De,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),D=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},z=J,Z=M(84089),ee=function(oe,ie){return D.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};ee.displayName="StopOutlined";var Q=D.forwardRef(ee)},73985:function(De,L,M){"use strict";M.d(L,{Z:function(){return Q}});var j=M(1413),D=M(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M736 550H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208 130c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zM736 266H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208-194c39.8 0 72-32.2 72-72s-32.2-72-72-72-72 32.2-72 72 32.2 72 72 72zm0-96c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 64c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0 656c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}}]},name:"ungroup",theme:"outlined"},z=J,Z=M(84089),ee=function(oe,ie){return D.createElement(Z.Z,(0,j.Z)((0,j.Z)({},oe),{},{ref:ie,icon:z}))};ee.displayName="UngroupOutlined";var Q=D.forwardRef(ee)},20499:function(){},64851:function(){},59518:function(){},26199:function(){},14156:function(){},71468:function(){},48871:function(){},9871:function(){},25612:function(){},92777:function(){},20159:function(){},61622:function(){},88790:function(De,L,M){"use strict";M.d(L,{e9:function(){return Ee},is:function(){return z},kS:function(){return as},Iw:function(){return J},kJ:function(){return io},Lu:function(){return Qi},NB:function(){return bs},DK:function(){return Fl},QK:function(){return j},y$:function(){return Vr},Bz:function(){return we},b2:function(){return M2},bn:function(){return pe},kf:function(){return D}});var j={};M.r(j),M.d(j,{applyMixins:function(){return zp},clone:function(){return Bp},cloneDeep:function(){return Tr},createClass:function(){return lv},defaults:function(){return zb},defaultsDeep:function(){return zm},ensure:function(){return Vb},extend:function(){return A1},flatten:function(){return Vm},forIn:function(){return Ge},getBoolean:function(){return Hb},getByPath:function(){return Bf},getNumber:function(){return cv},getValue:function(){return jb},has:function(){return Mo},inherit:function(){return Zg},isEmpty:function(){return Em},isEqual:function(){return Uc},isMaliciousProp:function(){return Um},isObject:function(){return Kt},isPlainObject:function(){return ec},merge:function(){return Fo},pick:function(){return Dt},setByPath:function(){return zf},unsetByPath:function(){return Yg}});var D={};M.r(D),M.d(D,{camelCase:function(){return i2},constantCase:function(){return oM},dotCase:function(){return wP},endsWith:function(){return Nx},escape:function(){return Hm},eval:function(){return LT},getSpellingSuggestion:function(){return sM},hashcode:function(){return uC},isString:function(){return Xo},kebabCase:function(){return lC},lowerFirst:function(){return iM},pad:function(){return lT},padEnd:function(){return uT},padStart:function(){return hT},pascalCase:function(){return cC},pathCase:function(){return EP},repeat:function(){return Ww},sanitizeHTML:function(){return NE},sentenceCase:function(){return SP},split:function(){return Uw},startsWith:function(){return Yb},template:function(){return Hp},titleCase:function(){return _P},toString:function(){return To},truncate:function(){return mT},unescape:function(){return xx},uniqueId:function(){return uE},upperFirst:function(){return bv},uuid:function(){return dC}});var J={};M.r(J),M.d(J,{apply:function(){return ry},cacher:function(){return sS},call:function(){return ir},debounce:function(){return ty},defer:function(){return ny},isAsync:function(){return l2},isAsyncLike:function(){return aS},isFunction:function(){return yi},noop:function(){return Rt},once:function(){return JE},toAsyncBoolean:function(){return c2},toDeferredBoolean:function(){return lS}});var z={};M.r(z),M.d(z,{CASE_SENSITIVE_ATTR:function(){return Wc},KAPPA:function(){return C2},MouseWheelHandle:function(){return Wn},addClass:function(){return ao},animate:function(){return zh},animateAlongPath:function(){return RC},animateTransform:function(){return Wf},append:function(){return s0},appendTo:function(){return vM},attr:function(){return go},bbox:function(){return DC},before:function(){return ha},breakText:function(){return wS},cancelAnimationFrame:function(){return v2},circleToPathData:function(){return IM},clearSelection:function(){return GP},clickable:function(){return bC},contains:function(){return ly},createElement:function(){return mC},createElementNS:function(){return f2},createSVGMatrix:function(){return rl},createSVGPoint:function(){return AS},createSVGTransform:function(){return fy},createSlicePathData:function(){return LM},createSvgDocument:function(){return iy},createSvgElement:function(){return wc},createVector:function(){return GM},createVectors:function(){return FM},decomposeMatrix:function(){return Fh},ellipseToPathData:function(){return RM},empty:function(){return cy},ensureId:function(){return _v},find:function(){return yC},findOne:function(){return ay},findParentByClass:function(){return o0},getAttribute:function(){return mM},getBBox:function(){return pa},getBBoxByElementAttr:function(){return PS},getBoundingOffsetRect:function(){return kC},getClass:function(){return Xp},getComputedStyle:function(){return EC},getIntersection:function(){return f0},getMatrixByElementAttr:function(){return DS},getPointsFromSvgElement:function(){return w2},getTransformToElement:function(){return Bh},getVendorPrefixedName:function(){return a0},hasClass:function(){return r0},hasScrollbars:function(){return LP},index:function(){return sy},isHTMLElement:function(){return $d},isInputElement:function(){return uS},isSVGGraphicsElement:function(){return Hf},isVector:function(){return NS},kebablizeAttrs:function(){return uy},lineToPathData:function(){return OM},matrixToRotation:function(){return TS},matrixToScale:function(){return Av},matrixToTransformString:function(){return h0},matrixToTranslation:function(){return _2},mergeAttrs:function(){return wC},ns:function(){return da},parseTransformString:function(){return Xd},parseXML:function(){return p2},polygonToPathData:function(){return PM},polylineToPathData:function(){return DM},prepend:function(){return cS},qualifyAttr:function(){return CC},rectToPathData:function(){return ES},rectangleToPathData:function(){return kM},remove:function(){return id},removeAttribute:function(){return dS},removeClass:function(){return $c},requestAnimationFrame:function(){return g2},rotate:function(){return qp},sample:function(){return nc},scale:function(){return Uh},setAttribute:function(){return xC},setAttributes:function(){return hS},setPrefixedStyle:function(){return kP},styleToObject:function(){return Zp},svgVersion:function(){return h2},tagName:function(){return oy},text:function(){return x2},toGeometryShape:function(){return Tv},toLocalPoint:function(){return Bo},toPath:function(){return SS},toPathData:function(){return _S},toggleClass:function(){return d2},transform:function(){return Xf},transformLine:function(){return Kp},transformPoint:function(){return il},transformPolyline:function(){return MS},transformRectangle:function(){return rc},transformStringToMatrix:function(){return py},translate:function(){return A2},translateAndAutoOrient:function(){return Zd},uniqueId:function(){return vC}});var Z={};M.r(Z),M.d(Z,{async:function(){return iO},block:function(){return r_},circle:function(){return d_},circlePlus:function(){return Yf},classic:function(){return i_},cross:function(){return c_},diamond:function(){return s_},ellipse:function(){return Kf},path:function(){return l_}});var ee={};M.r(ee),M.d(ee,{annotations:function(){return XS},atConnectionLength:function(){return sO},atConnectionLengthIgnoreGradient:function(){return oO},atConnectionLengthKeepGradient:function(){return by},atConnectionRatio:function(){return aO},atConnectionRatioIgnoreGradient:function(){return jC},atConnectionRatioKeepGradient:function(){return VC},connection:function(){return Hh},displayEmpty:function(){return YS},eol:function(){return ZS},fill:function(){return US},filter:function(){return t_},html:function(){return e_},lineHeight:function(){return HS},port:function(){return n_},ref:function(){return jM},refCx:function(){return YM},refCy:function(){return KM},refD:function(){return eO},refDKeepOffset:function(){return qM},refDResetOffset:function(){return BS},refDx:function(){return HM},refDy:function(){return $M},refHeight:function(){return GS},refHeight2:function(){return rO},refPoints:function(){return Ls},refPointsKeepOffset:function(){return JM},refPointsResetOffset:function(){return zS},refR:function(){return QM},refRCircumscribed:function(){return ZM},refRInscribed:function(){return FS},refRx:function(){return WM},refRy:function(){return XM},refWidth:function(){return LS},refWidth2:function(){return nO},refX:function(){return RS},refX2:function(){return UP},refY:function(){return kS},refY2:function(){return tO},resetOffset:function(){return JS},sourceMarker:function(){return yy},stroke:function(){return VS},style:function(){return QS},targetMarker:function(){return D2},text:function(){return gy},textPath:function(){return WS},textVerticalAnchor:function(){return $S},textWrap:function(){return jS},title:function(){return KS},vertexMarker:function(){return jh},xAlign:function(){return BC},yAlign:function(){return qS}});var Q={};M.r(Q),M.d(Q,{dot:function(){return lO},doubleMesh:function(){return N2},fixedDot:function(){return cO},mesh:function(){return h_}});var ue={};M.r(ue),M.d(ue,{blur:function(){return dO},brightness:function(){return yO},contrast:function(){return bO},dropShadow:function(){return hO},grayScale:function(){return fO},highlight:function(){return ga},hueRotate:function(){return vO},invert:function(){return mO},outline:function(){return uO},saturate:function(){return gO},sepia:function(){return pO}});var oe={};M.r(oe),M.d(oe,{flipX:function(){return f_},flipXY:function(){return g_},flipY:function(){return p_},watermark:function(){return xO}});var ie={};M.r(ie),M.d(ie,{className:function(){return CO},opacity:function(){return wO},stroke:function(){return SO}});var ne={};M.r(ne),M.d(ne,{absolute:function(){return _O},bottom:function(){return w_},ellipse:function(){return AO},ellipseSpread:function(){return TO},left:function(){return x_},line:function(){return HC},right:function(){return C_},top:function(){return OO}});var he={};M.r(he),M.d(he,{bottom:function(){return Ov},inside:function(){return S_},insideOriented:function(){return __},left:function(){return Cy},manual:function(){return DO},outside:function(){return NO},outsideOriented:function(){return IO},radial:function(){return RO},radialOriented:function(){return kO},right:function(){return $C},top:function(){return E_}});var Ne={};M.r(Ne),M.d(Ne,{noop:function(){return R2},pinAbsolute:function(){return BO},pinRelative:function(){return FO}});var le={};M.r(le),M.d(le,{bottom:function(){return G_},bottomLeft:function(){return B_},bottomRight:function(){return z_},center:function(){return HO},left:function(){return $O},midSide:function(){return KO},nodeCenter:function(){return YO},orth:function(){return U_},right:function(){return WO},top:function(){return L_},topLeft:function(){return XO},topRight:function(){return F_}});var be={};M.r(be),M.d(be,{closest:function(){return j_},length:function(){return JO},orth:function(){return H_},ratio:function(){return qO}});var se={};M.r(se),M.d(se,{anchor:function(){return Y_},bbox:function(){return Iv},boundary:function(){return X_},rect:function(){return W_}});var ce={};M.r(ce),M.d(ce,{er:function(){return o3},loop:function(){return s3},manhattan:function(){return sw},metro:function(){return aA},normal:function(){return e3},oneSide:function(){return t3},orth:function(){return K_}});var fe={};M.r(fe),M.d(fe,{jumpover:function(){return u3},loop:function(){return l3},normal:function(){return a3},rounded:function(){return c3},smooth:function(){return lA}});var we={};M.r(we),M.d(we,{Attr:function(){return ad},Background:function(){return Mv},ConnectionPoint:function(){return S0},ConnectionStrategy:function(){return sg},Connector:function(){return cg},EdgeAnchor:function(){return ag},EdgeTool:function(){return C0},Filter:function(){return v0},Grid:function(){return Jf},Highlighter:function(){return $h},Marker:function(){return ja},NodeAnchor:function(){return E0},NodeTool:function(){return x0},PortLabelLayout:function(){return m0},PortLayout:function(){return rg},Registry:function(){return Vs},Router:function(){return tp},create:function(){return d3}});var pe={};M.r(pe),M.d(pe,{kS:function(){return mw}});var Ee={};M.r(Ee),M.d(Ee,{q6:function(){return yg}});var it=M(19755),G=M.n(it),Be=M(50450);let Ke=!1,dt=!1,jt=!1,mn=!1,Pe=!1,In=!1,hn=!1,vt=!1,kt=!1,jn=!1,Zt=!1,gr=!1,Nr=!1,Qn=!1,Hr=!1,vr=!1;if(typeof navigator=="object"){const c=navigator.userAgent;Ke=c.indexOf("Macintosh")>=0,dt=!!c.match(/(iPad|iPhone|iPod)/g),jt=c.indexOf("Windows")>=0,mn=c.indexOf("MSIE")>=0,Pe=!!c.match(/Trident\/7\./),In=!!c.match(/Edge\//),hn=c.indexOf("Mozilla/")>=0&&c.indexOf("MSIE")<0&&c.indexOf("Edge/")<0,kt=c.indexOf("Chrome/")>=0&&c.indexOf("Edge/")<0,jn=c.indexOf("Opera/")>=0||c.indexOf("OPR/")>=0,Zt=c.indexOf("Firefox/")>=0,gr=c.indexOf("AppleWebKit/")>=0&&c.indexOf("Chrome/")<0&&c.indexOf("Edge/")<0,typeof document=="object"&&(vr=!document.createElementNS||`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`!="[object SVGForeignObjectElement]"||c.indexOf("Opera/")>=0)}if(typeof window=="object"&&(vt=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,Qn=window.PointerEvent!=null&&!Ke),typeof document=="object"){Nr="ontouchstart"in document.documentElement;try{const c=Object.defineProperty({},"passive",{get(){Hr=!0}}),e=document.createElement("div");e.addEventListener&&e.addEventListener("click",()=>{},c)}catch(c){}}var Le;if(function(c){c.IS_MAC=Ke,c.IS_IOS=dt,c.IS_WINDOWS=jt,c.IS_IE=mn,c.IS_IE11=Pe,c.IS_EDGE=In,c.IS_NETSCAPE=hn,c.IS_CHROME_APP=vt,c.IS_CHROME=kt,c.IS_OPERA=jn,c.IS_FIREFOX=Zt,c.IS_SAFARI=gr,c.SUPPORT_TOUCH=Nr,c.SUPPORT_POINTER=Qn,c.SUPPORT_PASSIVE=Hr,c.NO_FOREIGNOBJECT=vr,c.SUPPORT_FOREIGNOBJECT=!c.NO_FOREIGNOBJECT}(Le||(Le={})),function(c){function e(){const d=window.module;return d!=null&&d.hot!=null&&d.hot.status!=null?d.hot.status():"unkonwn"}c.getHMRStatus=e;function t(){return e()==="apply"}c.isApplyingHMR=t;const o={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function l(d){const f=document.createElement(o[d]||"div"),v=`on${d}`;let x=v in f;return x||(f.setAttribute(v,"return;"),x=typeof f[v]=="function"),x}c.isEventSupported=l}(Le||(Le={})),Le.SUPPORT_PASSIVE){G().event.special.touchstart={setup(e,t,o){if(!this.addEventListener)return!1;this.addEventListener("touchstart",o,{passive:!0})}};const c=G().event.special.mousewheel;if(c){const e=c.setup;c.setup=function(){const t=this.addEventListener;if(!t)return!1;this.addEventListener=(o,l)=>{t.call(this,o,l,{passive:!0})},e.call(this),this.addEventListener=t}}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(c){c.forEach(e=>{Object.prototype.hasOwnProperty.call(e,"append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value(...t){const o=document.createDocumentFragment();t.forEach(l=>{const d=l instanceof Node;o.appendChild(d?l:document.createTextNode(String(l)))}),this.appendChild(o)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]);var Ve=M(27771),Xe=typeof global=="object"&&global&&global.Object===Object&&global,Vt=Xe,Rn=typeof self=="object"&&self&&self.Object===Object&&self,Fn=Vt||Rn||Function("return this")(),_r=Fn,ri=_r.Symbol,Gr=ri,ti=Object.prototype,Oi=ti.hasOwnProperty,lo=ti.toString,F=Gr?Gr.toStringTag:void 0;function H(c){var e=Oi.call(c,F),t=c[F];try{c[F]=void 0;var o=!0}catch(d){}var l=lo.call(c);return o&&(e?c[F]=t:delete c[F]),l}var sf=H,Te=Object.prototype,cl=Te.toString;function wr(c){return cl.call(c)}var Pa=wr,ic="[object Null]",Qo="[object Undefined]",Da=Gr?Gr.toStringTag:void 0;function Nt(c){return c==null?c===void 0?Qo:ic:Da&&Da in Object(c)?sf(c):Pa(c)}var Yt=Nt;function Pt(c){var e=typeof c;return c!=null&&(e=="object"||e=="function")}var Kt=Pt,or="[object AsyncFunction]",$i="[object Function]",Xr="[object GeneratorFunction]",ni="[object Proxy]";function Ir(c){if(!Kt(c))return!1;var e=Yt(c);return e==$i||e==Xr||e==or||e==ni}var yi=Ir,ii=9007199254740991;function zo(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=ii}var ul=zo;function wg(c){return c!=null&&ul(c.length)&&!yi(c)}var oc=wg,sh=_r["__core-js_shared__"],$a=sh,cs=function(){var c=/[^.]+$/.exec($a&&$a.keys&&$a.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}();function lp(c){return!!cs&&cs in c}var cd=lp,es=Function.prototype,ah=es.toString;function cp(c){if(c!=null){try{return ah.call(c)}catch(e){}try{return c+""}catch(e){}}return""}var _c=cp,af=/[\\^$.*+?()[\]{}|]/g,Ji=/^\[object .+?Constructor\]$/,yo=Function.prototype,pi=Object.prototype,Ro=yo.toString,Ms=pi.hasOwnProperty,qc=RegExp("^"+Ro.call(Ms).replace(af,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function up(c){if(!Kt(c)||cd(c))return!1;var e=yi(c)?qc:Ji;return e.test(_c(c))}var lf=up;function cf(c,e){return c==null?void 0:c[e]}var lh=cf;function uf(c,e){var t=lh(c,e);return lf(t)?t:void 0}var Jc=uf,dp=Jc(Object,"create"),El=dp;function ud(){this.__data__=El?El(null):{},this.size=0}var df=ud;function Qc(c){var e=this.has(c)&&delete this.__data__[c];return this.size-=e?1:0,e}var Su=Qc,_u="__lodash_hash_undefined__",ch=Object.prototype,hf=ch.hasOwnProperty;function Eg(c){var e=this.__data__;if(El){var t=e[c];return t===_u?void 0:t}return hf.call(e,c)?e[c]:void 0}var Na=Eg,dd=Object.prototype,xs=dd.hasOwnProperty;function hd(c){var e=this.__data__;return El?e[c]!==void 0:xs.call(e,c)}var Sg=hd,Wa="__lodash_hash_undefined__";function fd(c,e){var t=this.__data__;return this.size+=this.has(c)?0:1,t[c]=El&&e===void 0?Wa:e,this}var ff=fd;function Au(c){var e=-1,t=c==null?0:c.length;for(this.clear();++e<t;){var o=c[e];this.set(o[0],o[1])}}Au.prototype.clear=df,Au.prototype.delete=Su,Au.prototype.get=Na,Au.prototype.has=Sg,Au.prototype.set=ff;var pd=Au;function uh(){this.__data__=[],this.size=0}var pf=uh;function gd(c,e){return c===e||c!==c&&e!==e}var Xa=gd;function vd(c,e){for(var t=c.length;t--;)if(Xa(c[t][0],e))return t;return-1}var md=vd,oa=Array.prototype,hp=oa.splice;function yd(c){var e=this.__data__,t=md(e,c);if(t<0)return!1;var o=e.length-1;return t==o?e.pop():hp.call(e,t,1),--this.size,!0}var fp=yd;function B0(c){var e=this.__data__,t=md(e,c);return t<0?void 0:e[t][1]}var Hs=B0;function Cs(c){return md(this.__data__,c)>-1}var eu=Cs;function bd(c,e){var t=this.__data__,o=md(t,c);return o<0?(++this.size,t.push([c,e])):t[o][1]=e,this}var gf=bd;function Ul(c){var e=-1,t=c==null?0:c.length;for(this.clear();++e<t;){var o=c[e];this.set(o[0],o[1])}}Ul.prototype.clear=pf,Ul.prototype.delete=fp,Ul.prototype.get=Hs,Ul.prototype.has=eu,Ul.prototype.set=gf;var Sl=Ul,vf=Jc(_r,"Map"),_l=vf;function sc(){this.size=0,this.__data__={hash:new pd,map:new(_l||Sl),string:new pd}}var dh=sc;function _g(c){var e=typeof c;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?c!=="__proto__":c===null}var Ag=_g;function hh(c,e){var t=c.__data__;return Ag(e)?t[typeof e=="string"?"string":"hash"]:t.map}var xd=hh;function pp(c){var e=xd(this,c).delete(c);return this.size-=e?1:0,e}var Tg=pp;function mf(c){return xd(this,c).get(c)}var $s=mf;function Ac(c){return xd(this,c).has(c)}var fh=Ac;function Tc(c,e){var t=xd(this,c),o=t.size;return t.set(c,e),this.size+=t.size==o?0:1,this}var ph=Tc;function ws(c){var e=-1,t=c==null?0:c.length;for(this.clear();++e<t;){var o=c[e];this.set(o[0],o[1])}}ws.prototype.clear=dh,ws.prototype.delete=Tg,ws.prototype.get=$s,ws.prototype.has=fh,ws.prototype.set=ph;var Mc=ws,Ao="__lodash_hash_undefined__";function co(c){return this.__data__.set(c,Ao),this}var tu=co;function Oc(c){return this.__data__.has(c)}var yf=Oc;function Tu(c){var e=-1,t=c==null?0:c.length;for(this.__data__=new Mc;++e<t;)this.add(c[e])}Tu.prototype.add=Tu.prototype.push=tu,Tu.prototype.has=yf;var Vl=Tu;function bf(c,e,t,o){for(var l=c.length,d=t+(o?1:-1);o?d--:++d<l;)if(e(c[d],d,c))return d;return-1}var gh=bf;function Mu(c){return c!==c}var Ws=Mu;function gp(c,e,t){for(var o=t-1,l=c.length;++o<l;)if(c[o]===e)return o;return-1}var S=gp;function R(c,e,t){return e===e?S(c,e,t):gh(c,Ws,t)}var U=R;function W(c,e){var t=c==null?0:c.length;return!!t&&U(c,e,0)>-1}var ae=W;function de(c,e,t){for(var o=-1,l=c==null?0:c.length;++o<l;)if(t(e,c[o]))return!0;return!1}var xe=de;function tt(c,e){return c.has(e)}var qe=tt,Et=Jc(_r,"Set"),Gt=Et;function Sn(){}var Rt=Sn;function an(c){var e=-1,t=Array(c.size);return c.forEach(function(o){t[++e]=o}),t}var Ar=an,Zr=1/0,Er=Gt&&1/Ar(new Gt([,-0]))[1]==Zr?function(c){return new Gt(c)}:Rt,us=Er,bi=200;function ds(c,e,t){var o=-1,l=ae,d=c.length,f=!0,v=[],x=v;if(t)f=!1,l=xe;else if(d>=bi){var w=e?null:us(c);if(w)return Ar(w);f=!1,l=qe,x=new Vl}else x=e?[]:v;e:for(;++o<d;){var _=c[o],A=e?e(_):_;if(_=t||_!==0?_:0,f&&A===A){for(var P=x.length;P--;)if(x[P]===A)continue e;e&&x.push(A),v.push(_)}else l(x,A,t)||(x!==v&&x.push(A),v.push(_))}return v}var $r=ds;function ci(c){return c&&c.length?$r(c):[]}var sa=ci;function Ei(c,e){for(var t=-1,o=e.length,l=c.length;++t<o;)c[l+t]=e[t];return c}var bo=Ei;function nu(c){return c!=null&&typeof c=="object"}var Uo=nu,Xs="[object Arguments]";function ba(c){return Uo(c)&&Yt(c)==Xs}var dl=ba,Os=Object.prototype,jl=Os.hasOwnProperty,Wi=Os.propertyIsEnumerable,Ps=dl(function(){return arguments}())?dl:function(c){return Uo(c)&&jl.call(c,"callee")&&!Wi.call(c,"callee")},Zs=Ps,ru=Gr?Gr.isConcatSpreadable:void 0;function Za(c){return(0,Ve.Z)(c)||Zs(c)||!!(ru&&c&&c[ru])}var Pi=Za;function Ys(c,e,t,o,l){var d=-1,f=c.length;for(t||(t=Pi),l||(l=[]);++d<f;){var v=c[d];e>0&&t(v)?e>1?Ys(v,e-1,t,o,l):bo(l,v):o||(l[l.length]=v)}return l}var hl=Ys;function Gs(c){return c}var fl=Gs;function aa(c,e,t){switch(t.length){case 0:return c.call(e);case 1:return c.call(e,t[0]);case 2:return c.call(e,t[0],t[1]);case 3:return c.call(e,t[0],t[1],t[2])}return c.apply(e,t)}var ac=aa,Vo=Math.max;function Cd(c,e,t){return e=Vo(e===void 0?c.length-1:e,0),function(){for(var o=arguments,l=-1,d=Vo(o.length-e,0),f=Array(d);++l<d;)f[l]=o[e+l];l=-1;for(var v=Array(e+1);++l<e;)v[l]=o[l];return v[e]=t(f),ac(c,this,v)}}var Ou=Cd;function vp(c){return function(){return c}}var iu=vp,Al=function(){try{var c=Jc(Object,"defineProperty");return c({},"",{}),c}catch(e){}}(),pl=Al,Pu=pl?function(c,e){return pl(c,"toString",{configurable:!0,enumerable:!1,value:iu(e),writable:!0})}:fl,Pc=Pu,ou=800,su=16,ts=Date.now;function Ia(c){var e=0,t=0;return function(){var o=ts(),l=su-(o-t);if(t=o,l>0){if(++e>=ou)return arguments[0]}else e=0;return c.apply(void 0,arguments)}}var Du=Ia,lc=Du(Pc),vh=lc;function cc(c,e){return vh(Ou(c,e,fl),c+"")}var ui=cc;function Dc(c){return Uo(c)&&oc(c)}var wo=Dc,Ra=ui(function(c){return $r(hl(c,1,wo,!0))}),Nc=Ra,mh="[object Symbol]";function mp(c){return typeof c=="symbol"||Uo(c)&&Yt(c)==mh}var xa=mp,bt=4294967295,tn=bt-1,Ht=Math.floor,pr=Math.min;function Jr(c,e,t,o){var l=0,d=c==null?0:c.length;if(d===0)return 0;e=t(e);for(var f=e!==e,v=e===null,x=xa(e),w=e===void 0;l<d;){var _=Ht((l+d)/2),A=t(c[_]),P=A!==void 0,V=A===null,q=A===A,te=xa(A);if(f)var ge=o||q;else w?ge=q&&(o||P):v?ge=q&&P&&(o||!V):x?ge=q&&P&&!V&&(o||!te):V||te?ge=!1:ge=o?A<=e:A<e;ge?l=_+1:d=_}return pr(d,tn)}var Fi=Jr,ko=4294967295,uo=ko>>>1;function Nu(c,e,t){var o=0,l=c==null?o:c.length;if(typeof e=="number"&&e===e&&l<=uo){for(;o<l;){var d=o+l>>>1,f=c[d];f!==null&&!xa(f)&&(t?f<=e:f<e)?o=d+1:l=d}return l}return Fi(c,e,fl,t)}var xf=Nu;function Ca(c,e){return xf(c,e)}var Iu=Ca;function Oe(){this.__data__=new Sl,this.size=0}var ze=Oe;function ht(c){var e=this.__data__,t=e.delete(c);return this.size=e.size,t}var rn=ht;function ot(c){return this.__data__.get(c)}var cn=ot;function Tn(c){return this.__data__.has(c)}var Kn=Tn,tr=200;function Rr(c,e){var t=this.__data__;if(t instanceof Sl){var o=t.__data__;if(!_l||o.length<tr-1)return o.push([c,e]),this.size=++t.size,this;t=this.__data__=new Mc(o)}return t.set(c,e),this.size=t.size,this}var zr=Rr;function lr(c){var e=this.__data__=new Sl(c);this.size=e.size}lr.prototype.clear=ze,lr.prototype.delete=rn,lr.prototype.get=cn,lr.prototype.has=Kn,lr.prototype.set=zr;var qr=lr;function Xi(c,e){for(var t=-1,o=c==null?0:c.length;++t<o;)if(e(c[t],t,c))return!0;return!1}var ur=Xi,ns=1,Ks=2;function Es(c,e,t,o,l,d){var f=t&ns,v=c.length,x=e.length;if(v!=x&&!(f&&x>v))return!1;var w=d.get(c),_=d.get(e);if(w&&_)return w==e&&_==c;var A=-1,P=!0,V=t&Ks?new Vl:void 0;for(d.set(c,e),d.set(e,c);++A<v;){var q=c[A],te=e[A];if(o)var ge=f?o(te,q,A,e,c,d):o(q,te,A,c,e,d);if(ge!==void 0){if(ge)continue;P=!1;break}if(V){if(!ur(e,function(_e,ke){if(!qe(V,ke)&&(q===_e||l(q,_e,t,o,d)))return V.push(ke)})){P=!1;break}}else if(!(q===te||l(q,te,t,o,d))){P=!1;break}}return d.delete(c),d.delete(e),P}var ho=Es,Ru=_r.Uint8Array,rs=Ru;function Lo(c){var e=-1,t=Array(c.size);return c.forEach(function(o,l){t[++e]=[l,o]}),t}var uc=Lo,wd=1,xi=2,Si="[object Boolean]",yh="[object Date]",ku="[object Error]",bh="[object Map]",Mg="[object Number]",Cf="[object RegExp]",Ed="[object Set]",gl="[object String]",hs="[object Symbol]",Ds="[object ArrayBuffer]",z0="[object DataView]",Og=Gr?Gr.prototype:void 0,Ic=Og?Og.valueOf:void 0;function wf(c,e,t,o,l,d,f){switch(t){case z0:if(c.byteLength!=e.byteLength||c.byteOffset!=e.byteOffset)return!1;c=c.buffer,e=e.buffer;case Ds:return!(c.byteLength!=e.byteLength||!d(new rs(c),new rs(e)));case Si:case yh:case Mg:return Xa(+c,+e);case ku:return c.name==e.name&&c.message==e.message;case Cf:case gl:return c==e+"";case bh:var v=uc;case Ed:var x=o&wd;if(v||(v=Ar),c.size!=e.size&&!x)return!1;var w=f.get(c);if(w)return w==e;o|=xi,f.set(c,e);var _=ho(v(c),v(e),o,l,d,f);return f.delete(c),_;case hs:if(Ic)return Ic.call(c)==Ic.call(e)}return!1}var yp=wf;function ka(c,e,t){var o=e(c);return(0,Ve.Z)(c)?o:bo(o,t(c))}var Sd=ka;function la(c,e){for(var t=-1,o=c==null?0:c.length,l=0,d=[];++t<o;){var f=c[t];e(f,t,c)&&(d[l++]=f)}return d}var Ya=la;function _d(){return[]}var Ad=_d,ca=Object.prototype,xh=ca.propertyIsEnumerable,au=Object.getOwnPropertySymbols,Td=au?function(c){return c==null?[]:(c=Object(c),Ya(au(c),function(e){return xh.call(c,e)}))}:Ad,Pg=Td;function Dg(c,e){for(var t=-1,o=Array(c);++t<c;)o[t]=e(t);return o}var bp=Dg;function Ch(){return!1}var Ng=Ch,Ae=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Md=Ae&&typeof module=="object"&&module&&!module.nodeType&&module,Od=Md&&Md.exports===Ae,wa=Od?_r.Buffer:void 0,Li=wa?wa.isBuffer:void 0,hm=Li||Ng,Tl=hm,U0=9007199254740991,Lu=/^(?:0|[1-9]\d*)$/;function V0(c,e){var t=typeof c;return e=e==null?U0:e,!!e&&(t=="number"||t!="symbol"&&Lu.test(c))&&c>-1&&c%1==0&&c<e}var Ml=V0,Ig="[object Arguments]",xp="[object Array]",Rg="[object Boolean]",lu="[object Date]",j0="[object Error]",fm="[object Function]",tb="[object Map]",Gu="[object Number]",H0="[object Object]",Rc="[object RegExp]",Fu="[object Set]",pm="[object String]",kg="[object WeakMap]",Bu="[object ArrayBuffer]",$0="[object DataView]",Hl="[object Float32Array]",W0="[object Float64Array]",jo="[object Int8Array]",to="[object Int16Array]",wh="[object Int32Array]",Pd="[object Uint8Array]",Cp="[object Uint8ClampedArray]",wp="[object Uint16Array]",Ep="[object Uint32Array]",fo={};fo[Hl]=fo[W0]=fo[jo]=fo[to]=fo[wh]=fo[Pd]=fo[Cp]=fo[wp]=fo[Ep]=!0,fo[Ig]=fo[xp]=fo[Bu]=fo[Rg]=fo[$0]=fo[lu]=fo[j0]=fo[fm]=fo[tb]=fo[Gu]=fo[H0]=fo[Rc]=fo[Fu]=fo[pm]=fo[kg]=!1;function Ol(c){return Uo(c)&&ul(c.length)&&!!fo[Yt(c)]}var Ef=Ol;function kc(c){return function(e){return c(e)}}var Lc=kc,vl=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ka=vl&&typeof module=="object"&&module&&!module.nodeType&&module,Lg=Ka&&Ka.exports===vl,Pl=Lg&&Vt.process,zu=function(){try{var c=Ka&&Ka.require&&Ka.require("util").types;return c||Pl&&Pl.binding&&Pl.binding("util")}catch(e){}}(),Ho=zu,cu=Ho&&Ho.isTypedArray,$l=cu?Lc(cu):Ef,Fs=$l,Eh=Object.prototype,Dd=Eh.hasOwnProperty;function Uu(c,e){var t=(0,Ve.Z)(c),o=!t&&Zs(c),l=!t&&!o&&Tl(c),d=!t&&!o&&!l&&Fs(c),f=t||o||l||d,v=f?bp(c.length,String):[],x=v.length;for(var w in c)(e||Dd.call(c,w))&&!(f&&(w=="length"||l&&(w=="offset"||w=="parent")||d&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||Ml(w,x)))&&v.push(w);return v}var uu=Uu,Wl=Object.prototype;function Gg(c){var e=c&&c.constructor,t=typeof e=="function"&&e.prototype||Wl;return c===t}var Sf=Gg;function _f(c,e){return function(t){return c(e(t))}}var Af=_f,Sp=Af(Object.keys,Object),ua=Sp,_p=Object.prototype,Ap=_p.hasOwnProperty;function dc(c){if(!Sf(c))return ua(c);var e=[];for(var t in Object(c))Ap.call(c,t)&&t!="constructor"&&e.push(t);return e}var Dl=dc;function Tf(c){return oc(c)?uu(c):Dl(c)}var Nl=Tf;function Fg(c){return Sd(c,Nl,Pg)}var qs=Fg,Tp=1,Sh=Object.prototype,Mf=Sh.hasOwnProperty;function Gc(c,e,t,o,l,d){var f=t&Tp,v=qs(c),x=v.length,w=qs(e),_=w.length;if(x!=_&&!f)return!1;for(var A=x;A--;){var P=v[A];if(!(f?P in e:Mf.call(e,P)))return!1}var V=d.get(c),q=d.get(e);if(V&&q)return V==e&&q==c;var te=!0;d.set(c,e),d.set(e,c);for(var ge=f;++A<x;){P=v[A];var _e=c[P],ke=e[P];if(o)var Se=f?o(ke,_e,P,e,c,d):o(_e,ke,P,c,e,d);if(!(Se===void 0?_e===ke||l(_e,ke,t,o,d):Se)){te=!1;break}ge||(ge=P=="constructor")}if(te&&!ge){var je=c.constructor,nt=e.constructor;je!=nt&&"constructor"in c&&"constructor"in e&&!(typeof je=="function"&&je instanceof je&&typeof nt=="function"&&nt instanceof nt)&&(te=!1)}return d.delete(c),d.delete(e),te}var Of=Gc,Pf=Jc(_r,"DataView"),Xl=Pf,du=Jc(_r,"Promise"),hu=du,Vu=Jc(_r,"WeakMap"),ju=Vu,Nd="[object Map]",fu="[object Object]",Hu="[object Promise]",Zl="[object Set]",ml="[object WeakMap]",_h="[object DataView]",Id=_c(Xl),Il=_c(_l),$u=_c(hu),Mp=_c(Gt),pu=_c(ju),qa=Yt;(Xl&&qa(new Xl(new ArrayBuffer(1)))!=_h||_l&&qa(new _l)!=Nd||hu&&qa(hu.resolve())!=Hu||Gt&&qa(new Gt)!=Zl||ju&&qa(new ju)!=ml)&&(qa=function(c){var e=Yt(c),t=e==fu?c.constructor:void 0,o=t?_c(t):"";if(o)switch(o){case Id:return _h;case Il:return Nd;case $u:return Hu;case Mp:return Zl;case pu:return ml}return e});var Yl=qa,Rd=1,Rl="[object Arguments]",hc="[object Array]",Wu="[object Object]",Df=Object.prototype,Bg=Df.hasOwnProperty;function Ah(c,e,t,o,l,d){var f=(0,Ve.Z)(c),v=(0,Ve.Z)(e),x=f?hc:Yl(c),w=v?hc:Yl(e);x=x==Rl?Wu:x,w=w==Rl?Wu:w;var _=x==Wu,A=w==Wu,P=x==w;if(P&&Tl(c)){if(!Tl(e))return!1;f=!0,_=!1}if(P&&!_)return d||(d=new qr),f||Fs(c)?ho(c,e,t,o,l,d):yp(c,e,x,t,o,l,d);if(!(t&Rd)){var V=_&&Bg.call(c,"__wrapped__"),q=A&&Bg.call(e,"__wrapped__");if(V||q){var te=V?c.value():c,ge=q?e.value():e;return d||(d=new qr),l(te,ge,t,o,d)}}return P?(d||(d=new qr),Of(c,e,t,o,l,d)):!1}var Xu=Ah;function Zu(c,e,t,o,l){return c===e?!0:c==null||e==null||!Uo(c)&&!Uo(e)?c!==c&&e!==e:Xu(c,e,t,o,Zu,l)}var Kl=Zu,kd=1,Op=2;function Ld(c,e,t,o){var l=t.length,d=l,f=!o;if(c==null)return!d;for(c=Object(c);l--;){var v=t[l];if(f&&v[2]?v[1]!==c[v[0]]:!(v[0]in c))return!1}for(;++l<d;){v=t[l];var x=v[0],w=c[x],_=v[1];if(f&&v[2]){if(w===void 0&&!(x in c))return!1}else{var A=new qr;if(o)var P=o(w,_,x,c,e,A);if(!(P===void 0?Kl(_,w,kd|Op,o,A):P))return!1}}return!0}var _i=Ld;function Nf(c){return c===c&&!Kt(c)}var If=Nf;function gu(c){for(var e=Nl(c),t=e.length;t--;){var o=e[t],l=c[o];e[t]=[o,l,If(l)]}return e}var Rf=gu;function Pp(c,e){return function(t){return t==null?!1:t[c]===e&&(e!==void 0||c in Object(t))}}var X0=Pp;function ql(c){var e=Rf(c);return e.length==1&&e[0][2]?X0(e[0][0],e[0][1]):function(t){return t===c||_i(t,c,e)}}var Dp=ql,Yu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Th=/^\w*$/;function Ku(c,e){if((0,Ve.Z)(c))return!1;var t=typeof c;return t=="number"||t=="symbol"||t=="boolean"||c==null||xa(c)?!0:Th.test(c)||!Yu.test(c)||e!=null&&c in Object(e)}var Fc=Ku,Bs="Expected a function";function Ea(c,e){if(typeof c!="function"||e!=null&&typeof e!="function")throw new TypeError(Bs);var t=function(){var o=arguments,l=e?e.apply(this,o):o[0],d=t.cache;if(d.has(l))return d.get(l);var f=c.apply(this,o);return t.cache=d.set(l,f)||d,f};return t.cache=new(Ea.Cache||Mc),t}Ea.Cache=Mc;var kf=Ea,Lf=500;function Mh(c){var e=kf(c,function(o){return t.size===Lf&&t.clear(),o}),t=e.cache;return e}var Ns=Mh,Jn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qu=/\\(\\)?/g,Gf=Ns(function(c){var e=[];return c.charCodeAt(0)===46&&e.push(""),c.replace(Jn,function(t,o,l,d){e.push(l?d.replace(qu,"$1"):o||t)}),e}),yl=Gf;function La(c,e){for(var t=-1,o=c==null?0:c.length,l=Array(o);++t<o;)l[t]=e(c[t],t,c);return l}var Ci=La,Ga=1/0,Ju=Gr?Gr.prototype:void 0,Qu=Ju?Ju.toString:void 0;function Ff(c){if(typeof c=="string")return c;if((0,Ve.Z)(c))return Ci(c,Ff)+"";if(xa(c))return Qu?Qu.call(c):"";var e=c+"";return e=="0"&&1/c==-Ga?"-0":e}var Jl=Ff;function Bc(c){return c==null?"":Jl(c)}var To=Bc;function fc(c,e){return(0,Ve.Z)(c)?c:Fc(c,e)?[c]:yl(To(c))}var Np=fc,nb=1/0;function gm(c){if(typeof c=="string"||xa(c))return c;var e=c+"";return e=="0"&&1/c==-nb?"-0":e}var Go=gm;function Ja(c,e){e=Np(e,c);for(var t=0,o=e.length;c!=null&&t<o;)c=c[Go(e[t++])];return t&&t==o?c:void 0}var Fa=Ja;function Z0(c,e,t){var o=c==null?void 0:Fa(c,e);return o===void 0?t:o}var vm=Z0;function Oh(c,e){return c!=null&&e in Object(c)}var Ph=Oh;function pc(c,e,t){e=Np(e,c);for(var o=-1,l=e.length,d=!1;++o<l;){var f=Go(e[o]);if(!(d=c!=null&&t(c,f)))break;c=c[f]}return d||++o!=l?d:(l=c==null?0:c.length,!!l&&ul(l)&&Ml(f,l)&&((0,Ve.Z)(c)||Zs(c)))}var Ip=pc;function Dh(c,e){return c!=null&&Ip(c,e,Ph)}var is=Dh,Gd=1,Fd=2;function Rp(c,e){return Fc(c)&&If(e)?X0(Go(c),e):function(t){var o=vm(t,c);return o===void 0&&o===e?is(t,c):Kl(e,o,Gd|Fd)}}var zg=Rp;function Ba(c){return function(e){return e==null?void 0:e[c]}}var Ql=Ba;function fs(c){return function(e){return Fa(e,c)}}var Sa=fs;function kp(c){return Fc(c)?Ql(Go(c)):Sa(c)}var Lp=kp;function mm(c){return typeof c=="function"?c:c==null?fl:typeof c=="object"?(0,Ve.Z)(c)?zg(c[0],c[1]):Dp(c):Lp(c)}var Nh=mm;function Ih(c,e,t){return Fi(c,e,Nh(t,2))}var Gp=Ih;function _a(c){return function(e,t,o){for(var l=-1,d=Object(e),f=o(e),v=f.length;v--;){var x=f[c?v:++l];if(t(d[x],x,d)===!1)break}return e}}var Qa=_a,vu=Qa(),gc=vu;function Ug(c,e){return c&&gc(c,e,Nl)}var Rh=Ug;function Y0(c,e){return function(t,o){if(t==null)return t;if(!oc(t))return c(t,o);for(var l=t.length,d=e?l:-1,f=Object(t);(e?d--:++d<l)&&o(f[d],d,f)!==!1;);return t}}var Vg=Y0,K0=Vg(Rh),q0=K0;function el(c,e){var t=-1,o=oc(c)?Array(c.length):[];return q0(c,function(l,d,f){o[++t]=e(l,d,f)}),o}var Bd=el;function K(c,e){var t=c.length;for(c.sort(e);t--;)c[t]=c[t].value;return c}var Me=K;function He(c,e){if(c!==e){var t=c!==void 0,o=c===null,l=c===c,d=xa(c),f=e!==void 0,v=e===null,x=e===e,w=xa(e);if(!v&&!w&&!d&&c>e||d&&f&&x&&!v&&!w||o&&f&&x||!t&&x||!l)return 1;if(!o&&!d&&!w&&c<e||w&&t&&l&&!o&&!d||v&&t&&l||!f&&l||!x)return-1}return 0}var Tt=He;function yt(c,e,t){for(var o=-1,l=c.criteria,d=e.criteria,f=l.length,v=t.length;++o<f;){var x=Tt(l[o],d[o]);if(x){if(o>=v)return x;var w=t[o];return x*(w=="desc"?-1:1)}}return c.index-e.index}var St=yt;function Lt(c,e,t){e.length?e=Ci(e,function(d){return(0,Ve.Z)(d)?function(f){return Fa(f,d.length===1?d[0]:d)}:d}):e=[fl];var o=-1;e=Ci(e,Lc(Nh));var l=Bd(c,function(d,f,v){var x=Ci(e,function(w){return w(d)});return{criteria:x,index:++o,value:d}});return Me(l,function(d,f){return St(d,f,t)})}var on=Lt;function gn(c,e,t){if(!Kt(t))return!1;var o=typeof e;return(o=="number"?oc(t)&&Ml(e,t.length):o=="string"&&e in t)?Xa(t[e],c):!1}var pn=gn,vn=ui(function(c,e){if(c==null)return[];var t=e.length;return t>1&&pn(c,e[0],e[1])?e=[]:t>2&&pn(e[0],e[1],e[2])&&(e=[e[0]]),on(c,hl(e,1),[])}),un=vn;function Bn(c,e,t){e=="__proto__"&&pl?pl(c,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):c[e]=t}var fn=Bn;function Mn(c,e,t,o){for(var l=-1,d=c==null?0:c.length;++l<d;){var f=c[l];e(o,f,t(f),c)}return o}var mt=Mn;function Ft(c,e,t,o){return q0(c,function(l,d,f){e(o,l,t(l),f)}),o}var yn=Ft;function Xn(c,e){return function(t,o){var l=(0,Ve.Z)(t)?mt:yn,d=e?e():{};return l(t,c,Nh(o,2),d)}}var sn=Xn,$n=Object.prototype,qt=$n.hasOwnProperty,Pn=sn(function(c,e,t){qt.call(c,t)?c[t].push(e):fn(c,t,[e])}),ln=Pn,Dn=200;function yr(c,e,t,o){var l=-1,d=ae,f=!0,v=c.length,x=[],w=e.length;if(!v)return x;t&&(e=Ci(e,Lc(t))),o?(d=xe,f=!1):e.length>=Dn&&(d=qe,f=!1,e=new Vl(e));e:for(;++l<v;){var _=c[l],A=t==null?_:t(_);if(_=o||_!==0?_:0,f&&A===A){for(var P=w;P--;)if(e[P]===A)continue e;x.push(_)}else d(e,A,o)||x.push(_)}return x}var Fr=yr,Nn=ui(function(c,e){return wo(c)?Fr(c,hl(e,1,wo,!0)):[]}),Cn=Nn;function nn(c,e,t){for(var o=-1,l=c.length;++o<l;){var d=c[o],f=e(d);if(f!=null&&(v===void 0?f===f&&!xa(f):t(f,v)))var v=f,x=d}return x}var Pr=nn;function Yr(c,e){return c>e}var nr=Yr;function mi(c){return c&&c.length?Pr(c,fl,nr):void 0}var Ur=mi;function oi(c,e,t){const o=Ii(c,t),l=Ii(e,t),d=l.free,f=o.keyIndex,v=l.keyIndex,x=[],w=[];let _=0,A,P,V=0;for(;_<c.length;){if(A=c[_],P=A[t],P)if(!v.hasOwnProperty(P))w.push(null);else{const je=v[P];w.push(e[je])}else{V+=1;const je=d[V];w.push(je||null)}_+=1}const q=w.slice(0);for(_=0;_<q.length;)q[_]===null?(_e(_),Se(_)):_+=1;let te=_=0;for(;_<e.length;){A=e[_],P=A[t];const je=q[te];if(je){const nt=je[t];if(P===nt)te+=1;else if(!f.hasOwnProperty(P))ke(_,A);else{const wt=q[te+1];wt&&(wt[t]===P?(_e(_),Se(te),te+=1):ke(_,A))}}else ke(_,A);_+=1}let ge=q.length-te;for(;(te+=1)<q.length;)ge-=1,_e(ge+_);function _e(je){const nt={index:je,type:0,item:null};x.push(nt)}function ke(je,nt){const wt={index:je,item:nt,type:1};x.push(wt)}function Se(je){q.splice(je,1)}return{moves:x}}function Ii(c,e){const t={},o=[];for(let l=0,d=c.length;l<d;l+=1){const f=c[l],v=f[e];v?t[v]=l:o.push(f)}return{keyIndex:t,free:o}}var os=Object.prototype,ps=os.hasOwnProperty;function di(c,e){return c!=null&&ps.call(c,e)}var gs=di;function Eo(c,e){return c!=null&&Ip(c,e,gs)}var Mo=Eo,ss=Object.prototype,Ss=ss.hasOwnProperty;function Oo(c,e,t){var o=c[e];(!(Ss.call(c,e)&&Xa(o,t))||t===void 0&&!(e in c))&&fn(c,e,t)}var $o=Oo;function vs(c,e,t,o){if(!Kt(c))return c;e=Np(e,c);for(var l=-1,d=e.length,f=d-1,v=c;v!=null&&++l<d;){var x=Go(e[l]),w=t;if(x==="__proto__"||x==="constructor"||x==="prototype")return c;if(l!=f){var _=v[x];w=o?o(_,x,v):void 0,w===void 0&&(w=Kt(_)?_:Ml(e[l+1])?[]:{})}$o(v,x,w),v=v[x]}return c}var Kr=vs;function Wo(c,e,t){for(var o=-1,l=e.length,d={};++o<l;){var f=e[o],v=Fa(c,f);t(v,f)&&Kr(d,Np(f,c),v)}return d}var zi=Wo;function Sr(c,e){return zi(c,e,function(t,o){return is(c,o)})}var wi=Sr;function Ri(c){var e=c==null?0:c.length;return e?hl(c,1):[]}var ms=Ri;function zc(c){return vh(Ou(c,void 0,ms),c+"")}var zd=zc,Ue=zd(function(c,e){return c==null?{}:wi(c,e)}),Dt=Ue;function Mt(c){return typeof c=="function"?c:fl}var qn=Mt;function gi(c){var e=[];if(c!=null)for(var t in Object(c))e.push(t);return e}var Fe=gi,Ce=Object.prototype,Je=Ce.hasOwnProperty;function pt(c){if(!Kt(c))return Fe(c);var e=Sf(c),t=[];for(var o in c)o=="constructor"&&(e||!Je.call(c,o))||t.push(o);return t}var gt=pt;function et(c){return oc(c)?uu(c,!0):gt(c)}var Ze=et;function lt(c,e){return c==null?c:gc(c,qn(e),Ze)}var Ge=lt;function Ye(c,e,t){(t!==void 0&&!Xa(c[e],t)||t===void 0&&!(e in c))&&fn(c,e,t)}var Ie=Ye,st=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ct=st&&typeof module=="object"&&module&&!module.nodeType&&module,$t=Ct&&Ct.exports===st,Xt=$t?_r.Buffer:void 0,zt=Xt?Xt.allocUnsafe:void 0;function bn(c,e){if(e)return c.slice();var t=c.length,o=zt?zt(t):new c.constructor(t);return c.copy(o),o}var cr=bn;function Qr(c){var e=new c.constructor(c.byteLength);return new rs(e).set(new rs(c)),e}var er=Qr;function xr(c,e){var t=e?er(c.buffer):c.buffer;return new c.constructor(t,c.byteOffset,c.length)}var sr=xr;function Bi(c,e){var t=-1,o=c.length;for(e||(e=Array(o));++t<o;)e[t]=c[t];return e}var Ko=Bi,tl=Object.create,Fp=function(){function c(){}return function(e){if(!Kt(e))return{};if(tl)return tl(e);c.prototype=e;var t=new c;return c.prototype=void 0,t}}(),bl=Fp,jg=Af(Object.getPrototypeOf,Object),Is=jg;function ym(c){return typeof c.constructor=="function"&&!Sf(c)?bl(Is(c)):{}}var bm=ym,rb="[object Object]",E1=Function.prototype,ib=Object.prototype,ob=E1.toString,sb=ib.hasOwnProperty,ab=ob.call(Object);function kw(c){if(!Uo(c)||Yt(c)!=rb)return!1;var e=Is(c);if(e===null)return!0;var t=sb.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&ob.call(t)==ab}var ec=kw;function S1(c,e){if(!(e==="constructor"&&typeof c[e]=="function")&&e!="__proto__")return c[e]}var xm=S1;function Ud(c,e,t,o){var l=!t;t||(t={});for(var d=-1,f=e.length;++d<f;){var v=e[d],x=o?o(t[v],c[v],v,t,c):void 0;x===void 0&&(x=c[v]),l?fn(t,v,x):$o(t,v,x)}return t}var ed=Ud;function _1(c){return ed(c,Ze(c))}var lb=_1;function Cm(c,e,t,o,l,d,f){var v=xm(c,t),x=xm(e,t),w=f.get(x);if(w){Ie(c,t,w);return}var _=d?d(v,x,t+"",c,e,f):void 0,A=_===void 0;if(A){var P=(0,Ve.Z)(x),V=!P&&Tl(x),q=!P&&!V&&Fs(x);_=x,P||V||q?(0,Ve.Z)(v)?_=v:wo(v)?_=Ko(v):V?(A=!1,_=cr(x,!0)):q?(A=!1,_=sr(x,!0)):_=[]:ec(x)||Zs(x)?(_=v,Zs(v)?_=lb(v):(!Kt(v)||yi(v))&&(_=bm(x))):A=!1}A&&(f.set(x,_),l(_,x,o,d,f),f.delete(x)),Ie(c,t,_)}var cb=Cm;function wm(c,e,t,o,l){c!==e&&gc(e,function(d,f){if(l||(l=new qr),Kt(d))cb(c,e,f,t,wm,o,l);else{var v=o?o(xm(c,f),d,f+"",c,e,l):void 0;v===void 0&&(v=d),Ie(c,f,v)}},Ze)}var J0=wm;function ub(c){return ui(function(e,t){var o=-1,l=t.length,d=l>1?t[l-1]:void 0,f=l>2?t[2]:void 0;for(d=c.length>3&&typeof d=="function"?(l--,d):void 0,f&&pn(t[0],t[1],f)&&(d=l<3?void 0:d,l=1),e=Object(e);++o<l;){var v=t[o];v&&c(e,v,o,d)}return e})}var Q0=ub,db=Q0(function(c,e,t){J0(c,e,t)}),Fo=db,ev=Q0(function(c,e){ed(e,Ze(e),c)}),A1=ev;function T1(c,e){return Kl(c,e)}var Uc=T1,M1="[object Map]",O1="[object Set]",P1=Object.prototype,D1=P1.hasOwnProperty;function N1(c){if(c==null)return!0;if(oc(c)&&((0,Ve.Z)(c)||typeof c=="string"||typeof c.splice=="function"||Tl(c)||Fs(c)||Zs(c)))return!c.length;var e=Yl(c);if(e==M1||e==O1)return!c.size;if(Sf(c))return!Dl(c).length;for(var t in c)if(D1.call(c,t))return!1;return!0}var Em=N1;function I1(c,e){for(var t=-1,o=c==null?0:c.length;++t<o&&e(c[t],t,c)!==!1;);return c}var hb=I1;function R1(c,e){return c&&ed(e,Nl(e),c)}var k1=R1;function Lw(c,e){return c&&ed(e,Ze(e),c)}var fb=Lw;function L1(c,e){return ed(c,Pg(c),e)}var Sm=L1,pb=Object.getOwnPropertySymbols,G1=pb?function(c){for(var e=[];c;)bo(e,Pg(c)),c=Is(c);return e}:Ad,gb=G1;function vb(c,e){return ed(c,gb(c),e)}var mb=vb;function tv(c){return Sd(c,Ze,gb)}var _m=tv,F1=Object.prototype,Am=F1.hasOwnProperty;function yb(c){var e=c.length,t=new c.constructor(e);return e&&typeof c[0]=="string"&&Am.call(c,"index")&&(t.index=c.index,t.input=c.input),t}var Gw=yb;function bb(c,e){var t=e?er(c.buffer):c.buffer;return new c.constructor(t,c.byteOffset,c.byteLength)}var B1=bb,Fw=/\w*$/;function xb(c){var e=new c.constructor(c.source,Fw.exec(c));return e.lastIndex=c.lastIndex,e}var z1=xb,Cb=Gr?Gr.prototype:void 0,Hg=Cb?Cb.valueOf:void 0;function U1(c){return Hg?Object(Hg.call(c)):{}}var V1=U1,wb="[object Boolean]",Eb="[object Date]",Sb="[object Map]",_b="[object Number]",Ab="[object RegExp]",Tb="[object Set]",j1="[object String]",H1="[object Symbol]",Mb="[object ArrayBuffer]",nv="[object DataView]",rv="[object Float32Array]",Ob="[object Float64Array]",$1="[object Int8Array]",Tm="[object Int16Array]",Pb="[object Int32Array]",W1="[object Uint8Array]",X1="[object Uint8ClampedArray]",Db="[object Uint16Array]",Nb="[object Uint32Array]";function Mm(c,e,t){var o=c.constructor;switch(e){case Mb:return er(c);case wb:case Eb:return new o(+c);case nv:return B1(c,t);case rv:case Ob:case $1:case Tm:case Pb:case W1:case X1:case Db:case Nb:return sr(c,t);case Sb:return new o;case _b:case j1:return new o(c);case Ab:return z1(c);case Tb:return new o;case H1:return V1(c)}}var Z1=Mm,Y1="[object Map]";function Om(c){return Uo(c)&&Yl(c)==Y1}var Pm=Om,Ib=Ho&&Ho.isMap,Dm=Ib?Lc(Ib):Pm,Rb=Dm,vc="[object Set]";function Nm(c){return Uo(c)&&Yl(c)==vc}var K1=Nm,td=Ho&&Ho.isSet,Ai=td?Lc(td):K1,Im=Ai,tc=1,Js=2,q1=4,kh="[object Arguments]",J1="[object Array]",Q1="[object Boolean]",Bw="[object Date]",ex="[object Error]",tx="[object Function]",Rm="[object GeneratorFunction]",nx="[object Map]",Vd="[object Number]",km="[object Object]",iv="[object RegExp]",Rs="[object Set]",zs="[object String]",kb="[object Symbol]",Lm="[object WeakMap]",rx="[object ArrayBuffer]",Lb="[object DataView]",ix="[object Float32Array]",ox="[object Float64Array]",Gm="[object Int8Array]",Gb="[object Int16Array]",$g="[object Int32Array]",Fm="[object Uint8Array]",sx="[object Uint8ClampedArray]",Fb="[object Uint16Array]",ov="[object Uint32Array]",Zi={};Zi[kh]=Zi[J1]=Zi[rx]=Zi[Lb]=Zi[Q1]=Zi[Bw]=Zi[ix]=Zi[ox]=Zi[Gm]=Zi[Gb]=Zi[$g]=Zi[nx]=Zi[Vd]=Zi[km]=Zi[iv]=Zi[Rs]=Zi[zs]=Zi[kb]=Zi[Fm]=Zi[sx]=Zi[Fb]=Zi[ov]=!0,Zi[ex]=Zi[tx]=Zi[Lm]=!1;function jd(c,e,t,o,l,d){var f,v=e&tc,x=e&Js,w=e&q1;if(t&&(f=l?t(c,o,l,d):t(c)),f!==void 0)return f;if(!Kt(c))return c;var _=(0,Ve.Z)(c);if(_){if(f=Gw(c),!v)return Ko(c,f)}else{var A=Yl(c),P=A==tx||A==Rm;if(Tl(c))return cr(c,v);if(A==km||A==kh||P&&!l){if(f=x||P?{}:bm(c),!v)return x?mb(c,fb(f,c)):Sm(c,k1(f,c))}else{if(!Zi[A])return l?c:{};f=Z1(c,A,v)}}d||(d=new qr);var V=d.get(c);if(V)return V;d.set(c,f),Im(c)?c.forEach(function(ge){f.add(jd(ge,e,t,ge,c,d))}):Rb(c)&&c.forEach(function(ge,_e){f.set(_e,jd(ge,e,t,_e,c,d))});var q=w?x?_m:qs:x?Ze:Nl,te=_?void 0:q(c);return hb(te||c,function(ge,_e){te&&(_e=ge,ge=c[_e]),$o(f,_e,jd(ge,e,t,_e,c,d))}),f}var Bb=jd,ax=4;function lx(c){return Bb(c,ax)}var Bp=lx,cx=1,sv=4;function mu(c){return Bb(c,cx|sv)}var Tr=mu,Wg=Object.prototype,mc=Wg.hasOwnProperty,Xg=ui(function(c,e){c=Object(c);var t=-1,o=e.length,l=o>2?e[2]:void 0;for(l&&pn(e[0],e[1],l)&&(o=1);++t<o;)for(var d=e[t],f=Ze(d),v=-1,x=f.length;++v<x;){var w=f[v],_=c[w];(_===void 0||Xa(_,Wg[w])&&!mc.call(c,w))&&(c[w]=d[w])}return c}),zb=Xg;function So(c,e,t,o,l,d){return Kt(c)&&Kt(e)&&(d.set(e,c),J0(c,e,void 0,So,d),d.delete(e)),c}var ux=So,Bm=Q0(function(c,e,t,o){J0(c,e,t,o)}),av=Bm,Ub=ui(function(c){return c.push(void 0,ux),ac(av,void 0,c)}),zm=Ub;function zp(c,...e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(o=>{o!=="constructor"&&Object.defineProperty(c.prototype,o,Object.getOwnPropertyDescriptor(t.prototype,o))})})}const dx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,e){c.__proto__=e}||function(c,e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(c[t]=e[t])};function Zg(c,e){dx(c,e);function t(){this.constructor=c}c.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}class hx{}const yc=/^\s*class\s+/.test(`${hx}`)||/^\s*class\s*\{/.test(`${class{}}`);function lv(c,e){let t;return yc?t=class extends e{}:(t=function(){return e.apply(this,arguments)},Zg(t,e)),Object.defineProperty(t,"name",{value:c}),t}function Vb(c,e){return c!=null?c:e}function jb(c,e,t){const o=c!=null?c[e]:null;return t!==void 0?Vb(o,t):o}function cv(c,e,t){let o=c!=null?c[e]:null;return o==null||(o=+o,Number.isNaN(o)||!Number.isFinite(o))?t:o}function Hb(c,e,t){const o=c!=null?c[e]:null;return o==null?t:!!o}function Um(c){return c==="__proto__"}function Bf(c,e,t="/"){let o;const l=Array.isArray(e)?e:e.split(t);if(l.length)for(o=c;l.length;){const d=l.shift();if(Object(o)===o&&d&&d in o)o=o[d];else return}return o}function zf(c,e,t,o="/"){const l=Array.isArray(e)?e:e.split(o),d=l.pop();if(d&&!Um(d)){let f=c;l.forEach(v=>{Um(v)||(f[v]==null&&(f[v]={}),f=f[v])}),f[d]=t}return c}function Yg(c,e,t="/"){const o=Array.isArray(e)?e.slice():e.split(t),l=o.pop();if(l)if(o.length>0){const d=Bf(c,o);d&&delete d[l]}else delete c[l];return c}function Vm(c,e="/",t){const o={};Object.keys(c).forEach(l=>{const d=c[l];let f=typeof d=="object"||Array.isArray(d);if(f&&t&&t(d)&&(f=!1),f){const v=Vm(d,e,t);Object.keys(v).forEach(x=>{o[l+e+x]=v[x]})}else o[l]=d});for(const l in c)Object.prototype.hasOwnProperty.call(c,l);return o}var fx="[object String]";function yu(c){return typeof c=="string"||!(0,Ve.Z)(c)&&Uo(c)&&Yt(c)==fx}var Xo=yu;function Aa(c){return function(e){return c==null?void 0:c[e]}}var Lh=Aa,px={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gx=Lh(px),jm=gx,Kg=/[&<>"']/g,uv=RegExp(Kg.source);function Up(c){return c=To(c),c&&uv.test(c)?c.replace(Kg,jm):c}var Hm=Up,vx={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},mx=Lh(vx),yx=mx,$m=/&(?:amp|lt|gt|quot|#39);/g,$b=RegExp($m.source);function bx(c){return c=To(c),c&&$b.test(c)?c.replace($m,yx):c}var xx=bx;function Cx(c,e,t){return c===c&&(t!==void 0&&(c=c<=t?c:t),e!==void 0&&(c=c>=e?c:e)),c}var dv=Cx,Vp=/\s/;function wx(c){for(var e=c.length;e--&&Vp.test(c.charAt(e)););return e}var Ex=wx,Sx=/^\s+/;function _x(c){return c&&c.slice(0,Ex(c)+1).replace(Sx,"")}var Ax=_x,Wm=0/0,Wb=/^[-+]0x[0-9a-f]+$/i,Ta=/^0b[01]+$/i,Xb=/^0o[0-7]+$/i,Tx=parseInt;function hi(c){if(typeof c=="number")return c;if(xa(c))return Wm;if(Kt(c)){var e=typeof c.valueOf=="function"?c.valueOf():c;c=Kt(e)?e+"":e}if(typeof c!="string")return c===0?c:+c;c=Ax(c);var t=Ta.test(c);return t||Xb.test(c)?Tx(c.slice(2),t?2:8):Wb.test(c)?Wm:+c}var Uf=hi,Vf=1/0,Zb=17976931348623157e292;function Mx(c){if(!c)return c===0?c:0;if(c=Uf(c),c===Vf||c===-Vf){var e=c<0?-1:1;return e*Zb}return c===c?c:0}var Xm=Mx;function Ox(c){var e=Xm(c),t=e%1;return e===e?t?e-t:e:0}var nd=Ox;function Px(c,e,t){return c=To(c),t=t==null?0:dv(nd(t),0,c.length),e=Jl(e),c.slice(t,t+e.length)==e}var Yb=Px;function Dx(c,e,t){c=To(c),e=Jl(e);var o=c.length;t=t===void 0?o:dv(nd(t),0,o);var l=t;return t-=e.length,t>=0&&c.slice(t,l)==e}var Nx=Dx;function Ix(c,e,t){var o=-1,l=c.length;e<0&&(e=-e>l?0:l+e),t=t>l?l:t,t<0&&(t+=l),l=e>t?0:t-e>>>0,e>>>=0;for(var d=Array(l);++o<l;)d[o]=c[o+e];return d}var Rx=Ix;function kx(c,e,t){var o=c.length;return t=t===void 0?o:t,!e&&t>=o?c:Rx(c,e,t)}var Mr=kx,br="\\ud800-\\udfff",Br="\\u0300-\\u036f",Dr="\\ufe20-\\ufe2f",Lx="\\u20d0-\\u20ff",fr=Br+Dr+Lx,no="\\ufe0e\\ufe0f",Zm="\\u200d",Kb=RegExp("["+Zm+br+fr+no+"]");function bu(c){return Kb.test(c)}var Vc=bu,jf="[object RegExp]";function jp(c){return Uo(c)&&Yt(c)==jf}var dn=jp,qb=Ho&&Ho.isRegExp,Gx=qb?Lc(qb):dn,Jb=Gx;function _o(c){return c.split("")}var za=_o,po="\\ud800-\\udfff",Fx="\\u0300-\\u036f",Bx="\\ufe20-\\ufe2f",zx="\\u20d0-\\u20ff",hv=Fx+Bx+zx,Ux="\\ufe0e\\ufe0f",fv="["+po+"]",pv="["+hv+"]",gv="\\ud83c[\\udffb-\\udfff]",Ym="(?:"+pv+"|"+gv+")",Km="[^"+po+"]",vv="(?:\\ud83c[\\udde6-\\uddff]){2}",bc="[\\ud800-\\udbff][\\udc00-\\udfff]",Vx="\\u200d",qm=Ym+"?",mv="["+Ux+"]?",Bt="(?:"+Vx+"(?:"+[Km,vv,bc].join("|")+")"+mv+qm+")*",Us=mv+qm+Bt,Ua="(?:"+[Km+pv+"?",pv,vv,bc,fv].join("|")+")",qg=RegExp(gv+"(?="+gv+")|"+Ua+Us,"g");function jx(c){return c.match(qg)||[]}var Qb=jx;function Hx(c){return Vc(c)?Qb(c):za(c)}var yv=Hx,$x=4294967295;function zw(c,e,t){return t&&typeof t!="number"&&pn(c,e,t)&&(e=t=void 0),t=t===void 0?$x:t>>>0,t?(c=To(c),c&&(typeof e=="string"||e!=null&&!Jb(e))&&(e=Jl(e),!e&&Vc(c))?Mr(yv(c),0,t):c.split(e,t)):[]}var Uw=zw,Vw=9007199254740991,jw=Math.floor;function Hw(c,e){var t="";if(!c||e<1||e>Vw)return t;do e%2&&(t+=c),e=jw(e/2),e&&(c+=c);while(e);return t}var e2=Hw;function $w(c,e,t){return(t?pn(c,e,t):e===void 0)?e=1:e=nd(e),e2(To(c),e)}var Ww=$w,Wx=Ql("length"),Xw=Wx,Xx="\\ud800-\\udfff",Zw="\\u0300-\\u036f",Zx="\\ufe20-\\ufe2f",m="\\u20d0-\\u20ff",C=Zw+Zx+m,N="\\ufe0e\\ufe0f",Y="["+Xx+"]",ve="["+C+"]",Re="\\ud83c[\\udffb-\\udfff]",Qe="(?:"+ve+"|"+Re+")",ut="[^"+Xx+"]",At="(?:\\ud83c[\\udde6-\\uddff]){2}",wn="[\\ud800-\\udbff][\\udc00-\\udfff]",_n="\\u200d",kn=Qe+"?",ar="["+N+"]?",kr="(?:"+_n+"(?:"+[ut,At,wn].join("|")+")"+ar+kn+")*",vi=ar+kn+kr,Ui="(?:"+[ut+ve+"?",ve,At,wn,Y].join("|")+")",fi=RegExp(Re+"(?="+Re+")|"+Ui+vi,"g");function ro(c){for(var e=fi.lastIndex=0;fi.test(c);)++e;return e}var so=ro;function jc(c){return Vc(c)?so(c):Xw(c)}var Va=jc,Hc=Math.ceil;function qo(c,e){e=e===void 0?" ":Jl(e);var t=e.length;if(t<2)return t?e2(e,c):e;var o=e2(e,Hc(c/Va(e)));return Vc(e)?Mr(yv(o),0,c).join(""):o.slice(0,c)}var Ot=qo,xl=Math.ceil,t2=Math.floor;function aT(c,e,t){c=To(c),e=nd(e);var o=e?Va(c):0;if(!e||o>=e)return c;var l=(e-o)/2;return Ot(t2(l),t)+c+Ot(xl(l),t)}var lT=aT;function cT(c,e,t){c=To(c),e=nd(e);var o=e?Va(c):0;return e&&o<e?c+Ot(e-o,t):c}var uT=cT;function dT(c,e,t){c=To(c),e=nd(e);var o=e?Va(c):0;return e&&o<e?Ot(e-o,t)+c:c}var hT=dT,fT=30,pT="...",gT=/\w*$/;function vT(c,e){var t=fT,o=pT;if(Kt(e)){var l="separator"in e?e.separator:l;t="length"in e?nd(e.length):t,o="omission"in e?Jl(e.omission):o}c=To(c);var d=c.length;if(Vc(c)){var f=yv(c);d=f.length}if(t>=d)return c;var v=t-Va(o);if(v<1)return o;var x=f?Mr(f,0,v).join(""):c.slice(0,v);if(l===void 0)return x+o;if(f&&(v+=x.length-v),Jb(l)){if(c.slice(v).search(l)){var w,_=x;for(l.global||(l=RegExp(l.source,To(gT.exec(l))+"g")),l.lastIndex=0;w=l.exec(_);)var A=w.index;x=x.slice(0,A===void 0?v:A)}}else if(c.indexOf(Jl(l),v)!=v){var P=x.lastIndexOf(l);P>-1&&(x=x.slice(0,P))}return x+o}var mT=vT,yT=Q0(function(c,e,t,o){ed(e,Ze(e),c,o)}),Yw=yT,bT="[object DOMException]",xT="[object Error]";function CT(c){if(!Uo(c))return!1;var e=Yt(c);return e==xT||e==bT||typeof c.message=="string"&&typeof c.name=="string"&&!ec(c)}var Kw=CT,wT=ui(function(c,e){try{return ac(c,void 0,e)}catch(t){return Kw(t)?t:new Error(t)}}),ET=wT;function ST(c,e){return Ci(e,function(t){return c[t]})}var _T=ST,qw=Object.prototype,AT=qw.hasOwnProperty;function TT(c,e,t,o){return c===void 0||Xa(c,qw[t])&&!AT.call(o,t)?e:c}var _s=TT,sP={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function MT(c){return"\\"+sP[c]}var OT=MT,PT=/<%=([\s\S]+?)%>/g,Jw=PT,DT=/<%-([\s\S]+?)%>/g,Qw=DT,eE=/<%([\s\S]+?)%>/g,tE=eE,NT={escape:Qw,evaluate:tE,interpolate:Jw,variable:"",imports:{_:{escape:Hm}}},nE=NT,IT="Invalid `variable` option passed into `_.template`",xt=/\b__p \+= '';/g,rE=/\b(__p \+=) '' \+/g,iE=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oE=/[()=,{}\[\]\/\s]/,sE=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Jg=/($^)/,aE=/['\n\r\u2028\u2029\\]/g,lE=Object.prototype,Yx=lE.hasOwnProperty;function RT(c,e,t){var o=nE.imports._.templateSettings||nE;t&&pn(c,e,t)&&(e=void 0),c=To(c),e=Yw({},e,o,_s);var l=Yw({},e.imports,o.imports,_s),d=Nl(l),f=_T(l,d),v,x,w=0,_=e.interpolate||Jg,A="__p += '",P=RegExp((e.escape||Jg).source+"|"+_.source+"|"+(_===Jw?sE:Jg).source+"|"+(e.evaluate||Jg).source+"|$","g"),V=Yx.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+`
`:"";c.replace(P,function(ge,_e,ke,Se,je,nt){return ke||(ke=Se),A+=c.slice(w,nt).replace(aE,OT),_e&&(v=!0,A+=`' +
__e(`+_e+`) +
'`),je&&(x=!0,A+=`';
`+je+`;
__p += '`),ke&&(A+=`' +
((__t = (`+ke+`)) == null ? '' : __t) +
'`),w=nt+ge.length,ge}),A+=`';
`;var q=Yx.call(e,"variable")&&e.variable;if(!q)A=`with (obj) {
`+A+`
}
`;else if(oE.test(q))throw new Error(IT);A=(x?A.replace(xt,""):A).replace(rE,"$1").replace(iE,"$1;"),A="function("+(q||"obj")+`) {
`+(q?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(x?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+A+`return __p
}`;var te=ET(function(){return Function(d,V+"return "+A).apply(void 0,f)});if(te.source=A,Kw(te))throw te;return te}var Hp=RT,cE=0;function kT(c){var e=++cE;return To(c)+e}var uE=kT;function LT(c){let e=null;try{e=window.eval(c)}catch(t){}return e}function dE(c,e,t,o){var l=-1,d=c==null?0:c.length;for(o&&d&&(t=c[++l]);++l<d;)t=e(t,c[l],l,c);return t}var hE=dE,fE={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},pE=Lh(fE),gE=pE,Jm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vE="\\u0300-\\u036f",mE="\\ufe20-\\ufe2f",yE="\\u20d0-\\u20ff",bE=vE+mE+yE,xE="["+bE+"]",CE=RegExp(xE,"g");function GT(c){return c=To(c),c&&c.replace(Jm,gE).replace(CE,"")}var FT=GT,BT=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Kx(c){return c.match(BT)||[]}var zT=Kx,qx=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function UT(c){return qx.test(c)}var VT=UT,wE="\\ud800-\\udfff",jT="\\u0300-\\u036f",$p="\\ufe20-\\ufe2f",HT="\\u20d0-\\u20ff",aP=jT+$p+HT,$T="\\u2700-\\u27bf",WT="a-z\\xdf-\\xf6\\xf8-\\xff",XT="\\xac\\xb1\\xd7\\xf7",ZT="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",lP="\\u2000-\\u206f",EE=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Jx="A-Z\\xc0-\\xd6\\xd8-\\xde",SE="\\ufe0e\\ufe0f",Qx=XT+ZT+lP+EE,eC="['\u2019]",tC="["+Qx+"]",_E="["+aP+"]",Wp="\\d+",AE="["+$T+"]",nC="["+WT+"]",rC="[^"+wE+Qx+Wp+$T+WT+Jx+"]",TE="\\ud83c[\\udffb-\\udfff]",ME="(?:"+_E+"|"+TE+")",OE="[^"+wE+"]",iC="(?:\\ud83c[\\udde6-\\uddff]){2}",PE="[\\ud800-\\udbff][\\udc00-\\udfff]",Qg="["+Jx+"]",YT="\\u200d",xc="(?:"+nC+"|"+rC+")",KT="(?:"+Qg+"|"+rC+")",n2="(?:"+eC+"(?:d|ll|m|re|s|t|ve))?",qT="(?:"+eC+"(?:D|LL|M|RE|S|T|VE))?",JT=ME+"?",oC="["+SE+"]?",cP="(?:"+YT+"(?:"+[OE,iC,PE].join("|")+")"+oC+JT+")*",r2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",uP="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",dP=oC+JT+cP,e0="(?:"+[AE,iC,PE].join("|")+")"+dP,Qm=RegExp([Qg+"?"+nC+"+"+n2+"(?="+[tC,Qg,"$"].join("|")+")",KT+"+"+qT+"(?="+[tC,Qg+xc,"$"].join("|")+")",Qg+"?"+xc+"+"+n2,Qg+"+"+qT,uP,r2,Wp,e0].join("|"),"g");function hP(c){return c.match(Qm)||[]}var fP=hP;function QT(c,e,t){return c=To(c),e=t?void 0:e,e===void 0?VT(c)?fP(c):zT(c):c.match(e)||[]}var eM=QT,pP="['\u2019]",gP=RegExp(pP,"g");function vP(c){return function(e){return hE(eM(FT(e).replace(gP,"")),c,"")}}var sC=vP;function mP(c){return function(e){e=To(e);var t=Vc(e)?yv(e):void 0,o=t?t[0]:e.charAt(0),l=t?Mr(t,1).join(""):e.slice(1);return o[c]()+l}}var tM=mP,yP=tM("toUpperCase"),bv=yP,bP=sC(function(c,e,t){return c+(t?" ":"")+bv(e)}),xv=bP;function Cv(c){return bv(To(c).toLowerCase())}var ey=Cv,nM=sC(function(c,e,t){return e=e.toLowerCase(),c+(t?ey(e):e)}),i2=nM,DE=sC(function(c,e,t){return c+(t?" ":"")+e.toUpperCase()}),xP=DE,rM=sC(function(c,e,t){return c+(t?" ":"")+e.toLowerCase()}),aC=rM,CP=tM("toLowerCase"),iM=CP;const t0=c=>{const e=Object.create(null);return t=>e[t]||(e[t]=c(t))},lC=t0(c=>c.replace(/\B([A-Z])/g,"-$1").toLowerCase()),cC=t0(c=>xv(i2(c)).replace(/ /g,"")),oM=t0(c=>xP(c).replace(/ /g,"_")),wP=t0(c=>aC(c).replace(/ /g,".")),EP=t0(c=>aC(c).replace(/ /g,"/")),SP=t0(c=>bv(aC(c))),_P=t0(c=>xv(i2(c)));function uC(c){let e=2166136261,t=!1,o=c;for(let l=0,d=o.length;l<d;l+=1){let f=o.charCodeAt(l);f>127&&!t&&(o=unescape(encodeURIComponent(o)),f=o.charCodeAt(l),t=!0),e^=f,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}return e>>>0}function dC(){let c="";const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let t=0,o=e.length;t<o;t+=1){const l=e[t],d=Math.random()*16|0,f=l==="x"?d:l==="y"?d&3|8:l;c+=f.toString(16)}return c}function NE(c,e={}){const t=G().parseHTML(c,null,!1);return t.forEach(o=>{const l=o;if(l){const d=l.attributes;if(d)for(let f=0,v=d.length;f<v;f+=1){const x=d.item(f);if(x){const w=x.value.toLowerCase(),_=x.name.toLowerCase();(_.startsWith("on")||w.startsWith("javascript:")||w.startsWith("data:")||w.startsWith("vbscript:"))&&l.removeAttribute(_)}}}}),e.raw?t:G()("<div/>").append(t).html()}function sM(c,e,t){const o=Math.min(2,Math.floor(c.length*.34));let l=Math.floor(c.length*.4)+1,d,f=!1;const v=c.toLowerCase();for(const x of e){const w=t(x);if(w!==void 0&&Math.abs(w.length-v.length)<=o){const _=w.toLowerCase();if(_===v){if(w===c)continue;return x}if(f||w.length<3)continue;const A=AP(v,_,l-1);if(A===void 0)continue;A<3?(f=!0,d=x):(l=A,d=x)}}return d}function AP(c,e,t){let o=new Array(e.length+1),l=new Array(e.length+1);const d=t+1;for(let v=0;v<=e.length;v+=1)o[v]=v;for(let v=1;v<=c.length;v+=1){const x=c.charCodeAt(v-1),w=v>t?v-t:1,_=e.length>t+v?t+v:e.length;l[0]=v;let A=v;for(let V=1;V<w;V+=1)l[V]=d;for(let V=w;V<=_;V+=1){const q=x===e.charCodeAt(V-1)?o[V-1]:Math.min(o[V]+1,l[V-1]+1,o[V-1]+2);l[V]=q,A=Math.min(A,q)}for(let V=_+1;V<=e.length;V+=1)l[V]=d;if(A>t)return;const P=o;o=l,l=P}const f=o[e.length];return f>t?void 0:f}var TP="[object Number]";function MP(c){return typeof c=="number"||Uo(c)&&Yt(c)==TP}var o2=MP;function IE(c){return o2(c)&&c!=+c}var aM=IE,RE=_r.isFinite;function kE(c){return typeof c=="number"&&RE(c)}var lM=kE;function LE(c){return typeof c=="number"&&c==nd(c)}var GE=LE,hC=9007199254740991;function FE(c){return GE(c)&&c>=-hC&&c<=hC}var cM=FE;function BE(c,e,t){return t===void 0&&(t=e,e=void 0),t!==void 0&&(t=Uf(t),t=t===t?t:0),e!==void 0&&(e=Uf(e),e=e===e?e:0),dv(Uf(c),e,t)}var ks=BE,zE=Math.max,UE=Math.min;function VE(c,e,t){return c>=UE(e,t)&&c<zE(e,t)}var jE=VE;function HE(c,e,t){return e=Xm(e),t===void 0?(t=e,e=0):t=Xm(t),c=Uf(c),jE(c,e,t)}var uM=HE,fC=9007199254740991;function $E(c){return c?dv(nd(c),-fC,fC):c===0?c:0}var dM=$E,WE=/^\s+/,XE=_r.parseInt;function s2(c,e,t){return t||e==null?e=0:e&&(e=+e),XE(To(c).replace(WE,""),e||0)}var OP=s2;const hM=c=>c&&c===c.window,wv=c=>!Array.isArray(c)&&c-parseFloat(c)+1>=0;function fM(c,e){return(c%e+e)%e}function pM(c,e){if(e==null)e=c==null?1:c,c=0;else if(e<c){const t=c;c=e,e=t}return Math.floor(Math.random()*(e-c+1)+c)}function Hd(c){return typeof c=="string"&&c.slice(-1)==="%"}function rd(c,e){if(c==null)return 0;let t;if(typeof c=="string"){if(t=parseFloat(c),Hd(c)&&(t/=100,Number.isFinite(t)))return t*e}else t=c;return Number.isFinite(t)?t>0&&t<1?t*e:t:0}function ZE(c,e){function t(f){const v=new RegExp(`(?:\\d+(?:\\.\\d+)*)(${f})$`).exec(c);return v?v[1]:null}const o=parseFloat(c);if(Number.isNaN(o))return null;let l;if(e==null)l="[A-Za-z]*";else if(Array.isArray(e)){if(e.length===0)return null;l=e.join("|")}else typeof e=="string"&&(l=e);const d=t(l);return d===null?null:{unit:d,value:o}}function Cc(c){if(typeof c=="object"){let t=0,o=0,l=0,d=0;return c.vertical!=null&&Number.isFinite(c.vertical)&&(o=d=c.vertical),c.horizontal!=null&&Number.isFinite(c.horizontal)&&(l=t=c.horizontal),c.left!=null&&Number.isFinite(c.left)&&(t=c.left),c.top!=null&&Number.isFinite(c.top)&&(o=c.top),c.right!=null&&Number.isFinite(c.right)&&(l=c.right),c.bottom!=null&&Number.isFinite(c.bottom)&&(d=c.bottom),{top:o,right:l,bottom:d,left:t}}let e=0;return c!=null&&Number.isFinite(c)&&(e=c),{top:e,right:e,bottom:e,left:e}}var Ev="Expected a function";function YE(c,e){var t;if(typeof e!="function")throw new TypeError(Ev);return c=nd(c),function(){return--c>0&&(t=e.apply(this,arguments)),c<=1&&(e=void 0),t}}var KE=YE;function qE(c){return KE(2,c)}var JE=qE,QE=function(){return _r.Date.now()},a2=QE,pC="Expected a function",gM=Math.max,eS=Math.min;function gC(c,e,t){var o,l,d,f,v,x,w=0,_=!1,A=!1,P=!0;if(typeof c!="function")throw new TypeError(pC);e=Uf(e)||0,Kt(t)&&(_=!!t.leading,A="maxWait"in t,d=A?gM(Uf(t.maxWait)||0,e):d,P="trailing"in t?!!t.trailing:P);function V(wt){var It=o,Jt=l;return o=l=void 0,w=wt,f=c.apply(Jt,It),f}function q(wt){return w=wt,v=setTimeout(_e,e),_?V(wt):f}function te(wt){var It=wt-x,Jt=wt-w,Un=e-It;return A?eS(Un,d-Jt):Un}function ge(wt){var It=wt-x,Jt=wt-w;return x===void 0||It>=e||It<0||A&&Jt>=d}function _e(){var wt=a2();if(ge(wt))return ke(wt);v=setTimeout(_e,te(wt))}function ke(wt){return v=void 0,P&&o?V(wt):(o=l=void 0,f)}function Se(){v!==void 0&&clearTimeout(v),w=0,o=x=l=v=void 0}function je(){return v===void 0?f:ke(a2())}function nt(){var wt=a2(),It=ge(wt);if(o=arguments,l=this,x=wt,It){if(v===void 0)return q(x);if(A)return clearTimeout(v),v=setTimeout(_e,e),V(x)}return v===void 0&&(v=setTimeout(_e,e)),f}return nt.cancel=Se,nt.flush=je,nt}var ty=gC,tS="Expected a function";function nS(c,e,t){if(typeof c!="function")throw new TypeError(tS);return setTimeout(function(){c.apply(void 0,t)},e)}var rS=nS,iS=ui(function(c,e){return rS(c,1,e)}),ny=iS;function ry(c,e,t){if(t)switch(t.length){case 0:return c.call(e);case 1:return c.call(e,t[0]);case 2:return c.call(e,t[0],t[1]);case 3:return c.call(e,t[0],t[1],t[2]);case 4:return c.call(e,t[0],t[1],t[2],t[3]);case 5:return c.call(e,t[0],t[1],t[2],t[3],t[4]);case 6:return c.call(e,t[0],t[1],t[2],t[3],t[4],t[5]);default:return c.apply(e,t)}return c.call(e)}function ir(c,e,...t){return ry(c,e,t)}function oS(c,e){for(let t=0,o=c.length;t<o;t+=1)if(c[t]===e)return c.push(c.splice(t,1)[0])}function sS(c,e,t){const o=[],l={};return(...f)=>{let v=!1;const x=f.join("\u2400");return x in l?(v=!0,oS(o,x)):(o.length>=1e3&&delete l[o.shift()],o.push(x),l[x]=ry(c,e||null,f)),t?t(l[x],v):l[x]}}function aS(c){return typeof c=="object"&&c.then&&typeof c.then=="function"}function l2(c){return c!=null&&(c instanceof Promise||aS(c))}function c2(...c){const e=[];if(c.forEach(o=>{Array.isArray(o)?e.push(...o):e.push(o)}),e.some(o=>l2(o))){const o=e.map(l=>l2(l)?l:Promise.resolve(l!==!1));return Promise.all(o).then(l=>l.reduce((d,f)=>f!==!1&&d,!0))}return e.every(o=>o!==!1)}function lS(...c){const e=c2(c);return typeof e=="boolean"?Promise.resolve(e):e}const Sv=/[\t\r\n\f]/g,u2=/\S+/g,n0=c=>` ${c} `;function Xp(c){return c&&c.getAttribute&&c.getAttribute("class")||""}function r0(c,e){if(c==null||e==null)return!1;const t=n0(Xp(c)),o=n0(e);return c.nodeType===1?t.replace(Sv," ").includes(o):!1}function ao(c,e){if(!(c==null||e==null)){if(typeof e=="function")return ao(c,e(Xp(c)));if(typeof e=="string"&&c.nodeType===1){const t=e.match(u2)||[],o=n0(Xp(c)).replace(Sv," ");let l=t.reduce((d,f)=>d.indexOf(n0(f))<0?`${d}${f} `:d,o);l=l.trim(),o!==l&&c.setAttribute("class",l)}}}function $c(c,e){if(c!=null){if(typeof e=="function")return $c(c,e(Xp(c)));if((!e||typeof e=="string")&&c.nodeType===1){const t=(e||"").match(u2)||[],o=n0(Xp(c)).replace(Sv," ");let l=t.reduce((d,f)=>{const v=n0(f);return d.indexOf(v)>-1?d.replace(v," "):d},o);l=e?l.trim():"",o!==l&&c.setAttribute("class",l)}}}function d2(c,e,t){if(!(c==null||e==null)){if(t!=null&&typeof e=="string"){t?ao(c,e):$c(c,e);return}if(typeof e=="function")return d2(c,e(Xp(c),t),t);typeof e=="string"&&(e.match(u2)||[]).forEach(l=>{r0(c,l)?$c(c,l):ao(c,l)})}}let i0=0;function vC(){return i0+=1,`v${i0}`}function _v(c){return(c.id==null||c.id==="")&&(c.id=vC()),c.id}function Hf(c){return c==null?!1:typeof c.getScreenCTM=="function"&&c instanceof SVGElement}const da={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},h2="1.1";function mC(c,e=document){return e.createElement(c)}function f2(c,e=da.xhtml,t=document){return t.createElementNS(e,c)}function wc(c,e=document){return f2(c,da.svg,e)}function iy(c){if(c){const t=`<svg xmlns="${da.svg}" xmlns:xlink="${da.xlink}" version="${h2}">${c}</svg>`,{documentElement:o}=p2(t,{async:!1});return o}const e=document.createElementNS(da.svg,"svg");return e.setAttributeNS(da.xmlns,"xmlns:xlink",da.xlink),e.setAttribute("version",h2),e}function p2(c,e={}){let t;try{const o=new DOMParser;if(e.async!=null){const l=o;l.async=e.async}t=o.parseFromString(c,e.mimeType||"text/xml")}catch(o){t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${c}`);return t}function oy(c,e=!0){const t=c.nodeName;return e?t.toLowerCase():t.toUpperCase()}function sy(c){let e=0,t=c.previousSibling;for(;t;)t.nodeType===1&&(e+=1),t=t.previousSibling;return e}function yC(c,e){return c.querySelectorAll(e)}function ay(c,e){return c.querySelector(e)}function o0(c,e,t){const o=c.ownerSVGElement;let l=c.parentNode;for(;l&&l!==t&&l!==o;){if(r0(l,e))return l;l=l.parentNode}return null}function ly(c,e){const t=e&&e.parentNode;return c===t||!!(t&&t.nodeType===1&&c.compareDocumentPosition(t)&16)}function id(c){c.parentNode&&c.parentNode.removeChild(c)}function cy(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function s0(c,e){(Array.isArray(e)?e:[e]).forEach(o=>{o!=null&&c.appendChild(o)})}function cS(c,e){const t=c.firstChild;return t?ha(t,e):s0(c,e)}function ha(c,e){const t=c.parentNode;t&&(Array.isArray(e)?e:[e]).forEach(l=>{l!=null&&t.insertBefore(l,c)})}function vM(c,e){e!=null&&e.appendChild(c)}function $d(c){try{return c instanceof HTMLElement}catch(e){return typeof c=="object"&&c.nodeType===1&&typeof c.style=="object"&&typeof c.ownerDocument=="object"}}function bC(c){return!c||!$d(c)?!1:["a","button"].includes(oy(c))||c.getAttribute("role")==="button"||c.getAttribute("type")==="button"?!0:bC(c.parentNode)}function uS(c){if(oy(c)==="input"){const t=c.getAttribute("type");if(t==null||["text","password","number","email","search","tel","url"].includes(t))return!0}return!1}const Wc=["viewBox","attributeName","attributeType","repeatCount"];function mM(c,e){return c.getAttribute(e)}function dS(c,e){const t=CC(e);t.ns?c.hasAttributeNS(t.ns,t.local)&&c.removeAttributeNS(t.ns,t.local):c.hasAttribute(e)&&c.removeAttribute(e)}function xC(c,e,t){if(t==null)return dS(c,e);const o=CC(e);o.ns&&typeof t=="string"?c.setAttributeNS(o.ns,e,t):e==="id"?c.id=`${t}`:c.setAttribute(e,`${t}`)}function hS(c,e){Object.keys(e).forEach(t=>{xC(c,t,e[t])})}function go(c,e,t){if(e==null){const o=c.attributes,l={};for(let d=0;d<o.length;d+=1)l[o[d].name]=o[d].value;return l}if(typeof e=="string"&&t===void 0)return c.getAttribute(e);typeof e=="object"?hS(c,e):xC(c,e,t)}function CC(c){if(c.indexOf(":")!==-1){const e=c.split(":");return{ns:da[e[0]],local:e[1]}}return{ns:null,local:c}}function uy(c){const e={};return Object.keys(c).forEach(t=>{const o=Wc.includes(t)?t:lC(t);e[o]=c[t]}),e}function Zp(c){const e={};return c.split(";").forEach(o=>{const l=o.trim();if(l){const d=l.split("=");d.length&&(e[d[0].trim()]=d[1]?d[1].trim():"")}}),e}function wC(c,e){return Object.keys(e).forEach(t=>{if(t==="class")c[t]=c[t]?`${c[t]} ${e[t]}`:e[t];else if(t==="style"){const o=typeof c[t]=="object",l=typeof e[t]=="object";let d,f;o&&l?(d=c[t],f=e[t]):o?(d=c[t],f=Zp(e[t])):l?(d=Zp(c[t]),f=e[t]):(d=Zp(c[t]),f=Zp(e[t])),c[t]=wC(d,f)}else c[t]=e[t]}),c}function fS(c,e,t={}){const o=t.offset||0,l=[],d=[];let f,v,x=null;for(let w=0;w<c.length;w+=1){f=d[w]=c[w];for(let _=0,A=e.length;_<A;_+=1){const P=e[_],V=P.start+o,q=P.end+o;w>=V&&w<q&&(typeof f=="string"?f=d[w]={t:c[w],attrs:P.attrs}:f.attrs=wC(wC({},f.attrs),P.attrs),t.includeAnnotationIndices&&(f.annotations==null&&(f.annotations=[]),f.annotations.push(_)))}v=d[w-1],v?Kt(f)&&Kt(v)?(x=x,JSON.stringify(f.attrs)===JSON.stringify(v.attrs)?x.t+=f.t:(l.push(x),x=f)):Kt(f)||Kt(v)?(x=x,l.push(x),x=f):x=(x||"")+f:x=f}return x!=null&&l.push(x),l}function oN(c,e){return c?c.filter(t=>t.start<e&&e<=t.end):[]}function PP(c,e,t){return c?c.filter(o=>e>=o.start&&e<o.end||t>o.start&&t<=o.end||o.start>=e&&o.end<t):[]}function pS(c,e,t){return c&&c.forEach(o=>{o.start<e&&o.end>=e?o.end+=t:o.start>=e&&(o.start+=t,o.end+=t)}),c}function DP(c){return c.replace(/ /g,"\xA0")}var yM;(function(c){c.emptyObject=Object.freeze({}),c.emptyArray=Object.freeze([]);function e(_){return _==null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"}c.isPrimitive=e;function t(_){return Array.isArray(_)}c.isArray=t;function o(_){return!e(_)&&!t(_)}c.isObject=o;function l(_,A){if(_===A)return!0;if(e(_)||e(A))return!1;const P=t(_),V=t(A);return P!==V?!1:P&&V?f(_,A):v(_,A)}c.deepEqual=l;function d(_){return e(_)?_:t(_)?x(_):w(_)}c.deepCopy=d;function f(_,A){if(_===A)return!0;if(_.length!==A.length)return!1;for(let P=0,V=_.length;P<V;P+=1)if(!l(_[P],A[P]))return!1;return!0}function v(_,A){if(_===A)return!0;for(const P in _)if(!(P in A))return!1;for(const P in A)if(!(P in _))return!1;for(const P in _)if(!l(_[P],A[P]))return!1;return!0}function x(_){const A=new Array(_.length);for(let P=0,V=_.length;P<V;P+=1)A[P]=d(_[P]);return A}function w(_){const A={};return Object.keys(_).forEach(P=>{A[P]=d(_[P])}),A}})(yM||(yM={}));var dy;(function(c){function e(w){const _="data:";return w.substr(0,_.length)===_}c.isDataUrl=e;function t(w,_){if(!w||e(w)){setTimeout(()=>_(null,w));return}const A=()=>{_(new Error(`Failed to load image: ${w}`))},P=window.FileReader?q=>{if(q.status===200){const te=new FileReader;te.onload=ge=>{const _e=ge.target.result;_(null,_e)},te.onerror=A,te.readAsDataURL(q.response)}else A()}:q=>{const te=ge=>{const ke=[];for(let Se=0;Se<ge.length;Se+=32768)ke.push(String.fromCharCode.apply(null,ge.subarray(Se,Se+32768)));return ke.join("")};if(q.status===200){let ge=w.split(".").pop()||"png";ge==="svg"&&(ge="svg+xml");const _e=`data:image/${ge};base64,`,ke=new Uint8Array(q.response),Se=_e+btoa(te(ke));_(null,Se)}else A()},V=new XMLHttpRequest;V.responseType=window.FileReader?"blob":"arraybuffer",V.open("GET",w,!0),V.addEventListener("error",A),V.addEventListener("load",()=>P(V)),V.send()}c.imageToDataUri=t;function o(w){let _=w.replace(/\s/g,"");_=decodeURIComponent(_);const A=_.indexOf(","),P=_.slice(0,A),V=P.split(":")[1].split(";")[0],q=_.slice(A+1);let te;P.indexOf("base64")>=0?te=atob(q):te=unescape(encodeURIComponent(q));const ge=new Uint8Array(te.length);for(let _e=0;_e<te.length;_e+=1)ge[_e]=te.charCodeAt(_e);return new Blob([ge],{type:V})}c.dataUriToBlob=o;function l(w,_){const A=window.navigator.msSaveBlob;if(A)A(w,_);else{const P=window.URL.createObjectURL(w),V=document.createElement("a");V.href=P,V.download=_,document.body.appendChild(V),V.click(),document.body.removeChild(V),window.URL.revokeObjectURL(P)}}c.downloadBlob=l;function d(w,_){const A=o(w);l(A,_)}c.downloadDataUri=d;function f(w){const _=w.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return _&&_[2]?_[2].replace(/\s+/," ").split(" "):null}function v(w){const _=parseFloat(w);return Number.isNaN(_)?null:_}function x(w,_={}){let A=null;const P=Se=>(A==null&&(A=f(w)),A!=null?v(A[Se]):null),V=Se=>{const je=w.match(Se);return je&&je[2]?v(je[2]):null};let q=_.width;if(q==null&&(q=V(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),q==null&&(q=P(2)),q==null)throw new Error("Can not parse width from svg string");let te=_.height;if(te==null&&(te=V(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),te==null&&(te=P(3)),te==null)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(w).replace(/'/g,"%27").replace(/"/g,"%22")}`}c.svgToDataUrl=x})(dy||(dy={}));let Wd;const NP={px(c){return c},mm(c){return Wd*c},cm(c){return Wd*c*10},in(c){return Wd*c*25.4},pt(c){return Wd*(25.4*c/72)},pc(c){return Wd*(25.4*c/6)}};var gS;(function(c){function e(o,l,d){const f=G()("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:o+(d||""),height:l+(d||"")}).appendTo(document.body),v={width:f.width()||0,height:f.height()||0};return f.remove(),v}c.measure=e;function t(o,l){Wd==null&&(Wd=e("1","1","mm").width);const d=l?NP[l]:null;return d?d(o):o}c.toPx=t})(gS||(gS={}));const g2=function(){let c;const e=window;if(e!=null&&(c=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame,c!=null&&(c=c.bind(e))),c==null){let t=0;c=o=>{const l=new Date().getTime(),d=Math.max(0,16-(l-t)),f=setTimeout(()=>{o(l+d)},d);return t=l+d,f}}return c}(),v2=function(){let c;const e=window;return e!=null&&(c=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.msCancelAnimationFrame||e.msCancelRequestAnimationFrame||e.oCancelAnimationFrame||e.oCancelRequestAnimationFrame||e.mozCancelAnimationFrame||e.mozCancelRequestAnimationFrame,c&&(c=c.bind(e))),c==null&&(c=clearTimeout),c}(),bM=/-(.)/g;function IP(c){return c.replace(bM,(e,t)=>t.toUpperCase())}const vS={},xM=["Webkit","ms","Moz","O"],CM=document?document.createElement("div").style:{};function RP(c){for(let e=0;e<xM.length;e+=1){const t=xM[e]+c;if(t in CM)return t}return null}function a0(c){const e=IP(c);if(vS[e]==null){const t=e.charAt(0).toUpperCase()+e.slice(1);vS[e]=e in CM?e:RP(t)}return vS[e]}function kP(c,e,t){const o=a0(e);o!=null&&(c[o]=t),c[e]=t}function EC(c,e){const t=c.ownerDocument&&c.ownerDocument.defaultView&&c.ownerDocument.defaultView.opener?c.ownerDocument.defaultView.getComputedStyle(c,null):window.getComputedStyle(c,null);return t&&e?t.getPropertyValue(e)||t[e]:t}function LP(c){const e=EC(c);return e!=null&&(e.overflow==="scroll"||e.overflow==="auto")}const GP=function(){const c=document;return c.selection?function(){c.selection.empty()}:window.getSelection?function(){const e=window.getSelection();e&&(e.empty?e.empty():e.removeAllRanges&&e.removeAllRanges())}:function(){}}();var Yi;(function(c){function e(o){return 180*o/Math.PI%360}c.toDeg=e,c.toRad=function(o,l=!1){return(l?o:o%360)*Math.PI/180};function t(o){return o%360+(o<0?360:0)}c.normalize=t})(Yi||(Yi={}));function l0(c,e=0){return Number.isInteger(c)?c:+c.toFixed(e)}function mS(c,e){let t,o;if(e==null?(o=c==null?1:c,t=0):(o=e,t=c==null?0:c),o<t){const l=t;t=o,o=l}return Math.floor(Math.random()*(o-t+1)+t)}function c0(c,e,t){return Number.isNaN(c)?NaN:Number.isNaN(e)||Number.isNaN(t)?0:e<t?c<e?e:c>t?t:c:c<t?t:c>e?e:c}function SC(c,e){return e*Math.round(c/e)}function _C(c,e){return e!=null&&c!=null&&e.x>=c.x&&e.x<=c.x+c.width&&e.y>=c.y&&e.y<=c.y+c.height}function AC(c,e){const t=c.x-e.x,o=c.y-e.y;return t*t+o*o}class $f{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class $e extends $f{constructor(e,t){super(),this.x=e==null?0:e,this.y=t==null?0:t}get[Symbol.toStringTag](){return $e.toStringTag}round(e=0){return this.x=l0(this.x,e),this.y=l0(this.y,e),this}add(e,t){const o=$e.create(e,t);return this.x+=o.x,this.y+=o.y,this}update(e,t){const o=$e.create(e,t);return this.x=o.x,this.y=o.y,this}translate(e,t){const o=$e.create(e,t);return this.x+=o.x,this.y+=o.y,this}rotate(e,t){const o=$e.rotate(this,e,t);return this.x=o.x,this.y=o.y,this}scale(e,t,o=new $e){const l=$e.create(o);return this.x=l.x+e*(this.x-l.x),this.y=l.y+t*(this.y-l.y),this}closest(e){if(e.length===1)return $e.create(e[0]);let t=null,o=1/0;return e.forEach(l=>{const d=this.squaredDistance(l);d<o&&(t=l,o=d)}),t?$e.create(t):null}distance(e){return Math.sqrt(this.squaredDistance(e))}squaredDistance(e){const t=$e.create(e),o=this.x-t.x,l=this.y-t.y;return o*o+l*l}manhattanDistance(e){const t=$e.create(e);return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(e=new $e){const t=$e.create(e),o=-(t.y-this.y),l=t.x-this.x;let d=Math.atan2(o,l);return d<0&&(d=2*Math.PI+d),180*d/Math.PI}angleBetween(e,t){if(this.equals(e)||this.equals(t))return NaN;let o=this.theta(t)-this.theta(e);return o<0&&(o+=360),o}vectorAngle(e){return new $e(0,0).angleBetween(this,e)}toPolar(e){return this.update($e.toPolar(this,e)),this}changeInAngle(e,t,o=new $e){return this.clone().translate(-e,-t).theta(o)-this.theta(o)}adhereToRect(e){return _C(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}bearing(e){const t=$e.create(e),o=Yi.toRad(this.y),l=Yi.toRad(t.y),d=this.x,f=t.x,v=Yi.toRad(f-d),x=Math.sin(v)*Math.cos(l),w=Math.cos(o)*Math.sin(l)-Math.sin(o)*Math.cos(l)*Math.cos(v),_=Yi.toDeg(Math.atan2(x,w)),A=["NE","E","SE","S","SW","W","NW","N"];let P=_-22.5;return P<0&&(P+=360),P=parseInt(P/45,10),A[P]}cross(e,t){if(e!=null&&t!=null){const o=$e.create(e),l=$e.create(t);return(l.x-this.x)*(o.y-this.y)-(l.y-this.y)*(o.x-this.x)}return NaN}dot(e){const t=$e.create(e);return this.x*t.x+this.y*t.y}diff(e,t){if(typeof e=="number")return new $e(this.x-e,this.y-t);const o=$e.create(e);return new $e(this.x-o.x,this.y-o.y)}lerp(e,t){const o=$e.create(e);return new $e((1-t)*this.x+t*o.x,(1-t)*this.y+t*o.y)}normalize(e=1){const t=e/this.magnitude();return this.scale(t,t)}move(e,t){const o=$e.create(e),l=Yi.toRad(o.theta(this));return this.translate(Math.cos(l)*t,-Math.sin(l)*t)}reflection(e){return $e.create(e).move(this,this.distance(e))}snapToGrid(e,t){return this.x=SC(this.x,e),this.y=SC(this.y,t==null?e:t),this}equals(e){const t=$e.create(e);return t!=null&&t.x===this.x&&t.y===this.y}clone(){return $e.clone(this)}toJSON(){return $e.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(c){c.toStringTag=`X6.Geometry.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&typeof l.x=="number"&&typeof l.y=="number"&&typeof l.toPolar=="function"}c.isPoint=e})($e||($e={})),function(c){function e(o){return o!=null&&typeof o=="object"&&typeof o.x=="number"&&typeof o.y=="number"}c.isPointLike=e;function t(o){return o!=null&&Array.isArray(o)&&o.length===2&&typeof o[0]=="number"&&typeof o[1]=="number"}c.isPointData=t}($e||($e={})),function(c){function e(A,P){return A==null||typeof A=="number"?new c(A,P):t(A)}c.create=e;function t(A){return c.isPoint(A)?new c(A.x,A.y):Array.isArray(A)?new c(A[0],A[1]):new c(A.x,A.y)}c.clone=t;function o(A){return c.isPoint(A)?{x:A.x,y:A.y}:Array.isArray(A)?{x:A[0],y:A[1]}:{x:A.x,y:A.y}}c.toJSON=o;function l(A,P,V=new c){let q=Math.abs(A*Math.cos(P)),te=Math.abs(A*Math.sin(P));const ge=t(V),_e=Yi.normalize(Yi.toDeg(P));return _e<90?te=-te:_e<180?(q=-q,te=-te):_e<270&&(q=-q),new c(ge.x+q,ge.y+te)}c.fromPolar=l;function d(A,P=new c){const V=t(A),q=t(P),te=V.x-q.x,ge=V.y-q.y;return new c(Math.sqrt(te*te+ge*ge),Yi.toRad(q.theta(V)))}c.toPolar=d;function f(A,P){return A===P?!0:A!=null&&P!=null?A.x===P.x&&A.y===P.y:!1}c.equals=f;function v(A,P){if(A==null&&P!=null||A!=null&&P==null||A!=null&&P!=null&&A.length!==P.length)return!1;if(A!=null&&P!=null){for(let V=0,q=A.length;V<q;V+=1)if(!f(A[V],P[V]))return!1}return!0}c.equalPoints=v;function x(A,P,V,q){return new c(mS(A,P),mS(V,q))}c.random=x;function w(A,P,V){const q=Yi.toRad(Yi.normalize(-P)),te=Math.sin(q),ge=Math.cos(q);return _(A,ge,te,V)}c.rotate=w;function _(A,P,V,q=new c){const te=t(A),ge=t(q),_e=te.x-ge.x,ke=te.y-ge.y,Se=_e*P-ke*V,je=ke*P+_e*V;return new c(Se+ge.x,je+ge.y)}c.rotateEx=_}($e||($e={}));class zn extends $f{constructor(e,t,o,l){super(),this.x=e==null?0:e,this.y=t==null?0:t,this.width=o==null?0:o,this.height=l==null?0:l}get[Symbol.toStringTag](){return zn.toStringTag}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new $e(this.x,this.y)}get topLeft(){return new $e(this.x,this.y)}get topCenter(){return new $e(this.x+this.width/2,this.y)}get topRight(){return new $e(this.x+this.width,this.y)}get center(){return new $e(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new $e(this.x,this.y+this.height)}get bottomCenter(){return new $e(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new $e(this.x+this.width,this.y+this.height)}get corner(){return new $e(this.x+this.width,this.y+this.height)}get rightMiddle(){return new $e(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new $e(this.x,this.y+this.height/2)}get topLine(){return new mr(this.topLeft,this.topRight)}get rightLine(){return new mr(this.topRight,this.bottomRight)}get bottomLine(){return new mr(this.bottomLeft,this.bottomRight)}get leftLine(){return new mr(this.topLeft,this.bottomLeft)}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(e){if(!e)return this.clone();const t=Yi.toRad(e),o=Math.abs(Math.sin(t)),l=Math.abs(Math.cos(t)),d=this.width*l+this.height*o,f=this.width*o+this.height*l;return new zn(this.x+(this.width-d)/2,this.y+(this.height-f)/2,d,f)}round(e=0){return this.x=l0(this.x,e),this.y=l0(this.y,e),this.width=l0(this.width,e),this.height=l0(this.height,e),this}add(e,t,o,l){const d=zn.create(e,t,o,l),f=Math.min(this.x,d.x),v=Math.min(this.y,d.y),x=Math.max(this.x+this.width,d.x+d.width),w=Math.max(this.y+this.height,d.y+d.height);return this.x=f,this.y=v,this.width=x-f,this.height=w-v,this}update(e,t,o,l){const d=zn.create(e,t,o,l);return this.x=d.x,this.y=d.y,this.width=d.width,this.height=d.height,this}inflate(e,t){const o=e,l=t!=null?t:e;return this.x-=o,this.y-=l,this.width+=2*o,this.height+=2*l,this}snapToGrid(e,t){const o=this.origin.snapToGrid(e,t),l=this.corner.snapToGrid(e,t);return this.x=o.x,this.y=o.y,this.width=l.x-o.x,this.height=l.y-o.y,this}translate(e,t){const o=$e.create(e,t);return this.x+=o.x,this.y+=o.y,this}scale(e,t,o=new $e){const l=this.origin.scale(e,t,o);return this.x=l.x,this.y=l.y,this.width*=e,this.height*=t,this}rotate(e,t=this.getCenter()){if(e!==0){const o=Yi.toRad(e),l=Math.cos(o),d=Math.sin(o);let f=this.getOrigin(),v=this.getTopRight(),x=this.getBottomRight(),w=this.getBottomLeft();f=$e.rotateEx(f,l,d,t),v=$e.rotateEx(v,l,d,t),x=$e.rotateEx(x,l,d,t),w=$e.rotateEx(w,l,d,t);const _=new zn(f.x,f.y,0,0);_.add(v.x,v.y,0,0),_.add(x.x,x.y,0,0),_.add(w.x,w.y,0,0),this.update(_)}return this}rotate90(){const e=(this.width-this.height)/2;this.x+=e,this.y-=e;const t=this.width;return this.width=this.height,this.height=t,this}moveAndExpand(e){const t=zn.clone(e);return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this}getMaxScaleToFit(e,t=this.center){const o=zn.clone(e),l=t.x,d=t.y;let f=1/0,v=1/0,x=1/0,w=1/0,_=1/0,A=1/0,P=1/0,V=1/0;const q=o.topLeft;q.x<l&&(f=(this.x-l)/(q.x-l)),q.y<d&&(_=(this.y-d)/(q.y-d));const te=o.bottomRight;te.x>l&&(v=(this.x+this.width-l)/(te.x-l)),te.y>d&&(A=(this.y+this.height-d)/(te.y-d));const ge=o.topRight;ge.x>l&&(x=(this.x+this.width-l)/(ge.x-l)),ge.y<d&&(P=(this.y-d)/(ge.y-d));const _e=o.bottomLeft;return _e.x<l&&(w=(this.x-l)/(_e.x-l)),_e.y>d&&(V=(this.y+this.height-d)/(_e.y-d)),{sx:Math.min(f,v,x,w),sy:Math.min(_,A,P,V)}}getMaxUniformScaleToFit(e,t=this.center){const o=this.getMaxScaleToFit(e,t);return Math.min(o.sx,o.sy)}containsPoint(e,t){return _C(this,$e.create(e,t))}containsRect(e,t,o,l){const d=zn.create(e,t,o,l),f=this.x,v=this.y,x=this.width,w=this.height,_=d.x,A=d.y,P=d.width,V=d.height;return x===0||w===0||P===0||V===0?!1:_>=f&&A>=v&&_+P<=f+x&&A+V<=v+w}intersectsWithLine(e){const t=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],o=[],l=[];return t.forEach(d=>{const f=e.intersectsWithLine(d);f!==null&&l.indexOf(f.toString())<0&&(o.push(f),l.push(f.toString()))}),o.length>0?o:null}intersectsWithLineFromCenterToPoint(e,t){const o=$e.clone(e),l=this.center;let d=null;t!=null&&t!==0&&o.rotate(t,l);const f=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],v=new mr(l,o);for(let x=f.length-1;x>=0;x-=1){const w=f[x].intersectsWithLine(v);if(w!==null){d=w;break}}return d&&t!=null&&t!==0&&d.rotate(-t,l),d}intersectsWithRect(e,t,o,l){const d=zn.create(e,t,o,l);if(!this.isIntersectWithRect(d))return null;const f=this.origin,v=this.corner,x=d.origin,w=d.corner,_=Math.max(f.x,x.x),A=Math.max(f.y,x.y);return new zn(_,A,Math.min(v.x,w.x)-_,Math.min(v.y,w.y)-A)}isIntersectWithRect(e,t,o,l){const d=zn.create(e,t,o,l),f=this.origin,v=this.corner,x=d.origin,w=d.corner;return!(w.x<=f.x||w.y<=f.y||x.x>=v.x||x.y>=v.y)}normalize(){let e=this.x,t=this.y,o=this.width,l=this.height;return this.width<0&&(e=this.x+this.width,o=-this.width),this.height<0&&(t=this.y+this.height,l=-this.height),this.x=e,this.y=t,this.width=o,this.height=l,this}union(e){const t=zn.clone(e),o=this.origin,l=this.corner,d=t.origin,f=t.corner,v=Math.min(o.x,d.x),x=Math.min(o.y,d.y),w=Math.max(l.x,f.x),_=Math.max(l.y,f.y);return new zn(v,x,w-v,_-x)}getNearestSideToPoint(e){const t=$e.clone(e),o=t.x-this.x,l=this.x+this.width-t.x,d=t.y-this.y,f=this.y+this.height-t.y;let v=o,x="left";return l<v&&(v=l,x="right"),d<v&&(v=d,x="top"),f<v&&(x="bottom"),x}getNearestPointToPoint(e){const t=$e.clone(e);if(this.containsPoint(t))switch(this.getNearestSideToPoint(t)){case"right":return new $e(this.x+this.width,t.y);case"left":return new $e(this.x,t.y);case"bottom":return new $e(t.x,this.y+this.height);case"top":return new $e(t.x,this.y);default:break}return t.adhereToRect(this)}equals(e){return e!=null&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}clone(){return new zn(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(c){c.toStringTag=`X6.Geometry.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&typeof l.x=="number"&&typeof l.y=="number"&&typeof l.width=="number"&&typeof l.height=="number"&&typeof l.inflate=="function"&&typeof l.moveAndExpand=="function"}c.isRectangle=e})(zn||(zn={})),function(c){function e(t){return t!=null&&typeof t=="object"&&typeof t.x=="number"&&typeof t.y=="number"&&typeof t.width=="number"&&typeof t.height=="number"}c.isRectangleLike=e}(zn||(zn={})),function(c){function e(f,v,x,w){return f==null||typeof f=="number"?new c(f,v,x,w):t(f)}c.create=e;function t(f){return c.isRectangle(f)?f.clone():Array.isArray(f)?new c(f[0],f[1],f[2],f[3]):new c(f.x,f.y,f.width,f.height)}c.clone=t;function o(f){return new c(0,0,f.width,f.height)}c.fromSize=o;function l(f,v){return new c(f.x,f.y,v.width,v.height)}c.fromPositionAndSize=l;function d(f){return new c(f.x-f.a,f.y-f.b,2*f.a,2*f.b)}c.fromEllipse=d}(zn||(zn={}));class mr extends $f{constructor(e,t,o,l){super(),typeof e=="number"&&typeof t=="number"?(this.start=new $e(e,t),this.end=new $e(o,l)):(this.start=$e.create(e),this.end=$e.create(t))}get[Symbol.toStringTag](){return mr.toStringTag}get center(){return new $e((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}getCenter(){return this.center}round(e=0){return this.start.round(e),this.end.round(e),this}translate(e,t){return typeof e=="number"?(this.start.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.end.translate(e)),this}rotate(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this}scale(e,t,o){return this.start.scale(e,t,o),this.end.scale(e,t,o),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const e=this.start.x-this.end.x,t=this.start.y-this.end.y;return e*e+t*t}setLength(e){const t=this.length();if(!t)return this;const o=e/t;return this.scale(o,o,this.start)}parallel(e){const t=this.clone();if(!t.isDifferentiable())return t;const{start:o,end:l}=t,d=o.clone().rotate(270,l),f=l.clone().rotate(90,o);return o.move(f,e),l.move(d,e),t}vector(){return new $e(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const e=new $e(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)}bbox(){const e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),o=Math.max(this.start.x,this.end.x),l=Math.max(this.start.y,this.end.y);return new zn(e,t,o-e,l-t)}bearing(){return this.start.bearing(this.end)}closestPoint(e){return this.pointAt(this.closestPointNormalizedLength(e))}closestPointLength(e){return this.closestPointNormalizedLength(e)*this.length()}closestPointTangent(e){return this.tangentAt(this.closestPointNormalizedLength(e))}closestPointNormalizedLength(e){const t=this.vector().dot(new mr(this.start,e).vector()),o=Math.min(1,Math.max(0,t/this.squaredLength()));return Number.isNaN(o)?0:o}pointAt(e){const t=this.start,o=this.end;return e<=0?t.clone():e>=1?o.clone():t.lerp(o,e)}pointAtLength(e){const t=this.start,o=this.end;let l=!0;e<0&&(l=!1,e=-e);const d=this.length();if(e>=d)return l?o.clone():t.clone();const f=(l?e:d-e)/d;return this.pointAt(f)}divideAt(e){const t=this.pointAt(e);return[new mr(this.start,t),new mr(t,this.end)]}divideAtLength(e){const t=this.pointAtLength(e);return[new mr(this.start,t),new mr(t,this.end)]}containsPoint(e){const t=this.start,o=this.end;if(t.cross(e,o)!==0)return!1;const l=this.length();return!(new mr(t,e).length()>l||new mr(e,o).length()>l)}intersect(e,t){const o=e.intersectsWithLine(this,t);return o?Array.isArray(o)?o:[o]:null}intersectsWithLine(e){const t=new $e(this.end.x-this.start.x,this.end.y-this.start.y),o=new $e(e.end.x-e.start.x,e.end.y-e.start.y),l=t.x*o.y-t.y*o.x,d=new $e(e.start.x-this.start.x,e.start.y-this.start.y),f=d.x*o.y-d.y*o.x,v=d.x*t.y-d.y*t.x;if(l===0||f*l<0||v*l<0)return null;if(l>0){if(f>l||v>l)return null}else if(f<l||v<l)return null;return new $e(this.start.x+f*t.x/l,this.start.y+f*t.y/l)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(e){const t=$e.clone(e),o=this.start,l=this.end;return((l.x-o.x)*(t.y-o.y)-(l.y-o.y)*(t.x-o.x))/this.length()}pointSquaredDistance(e,t){const o=$e.create(e,t);return this.closestPoint(o).squaredDistance(o)}pointDistance(e,t){const o=$e.create(e,t);return this.closestPoint(o).distance(o)}tangentAt(e){if(!this.isDifferentiable())return null;const t=this.start,o=this.end,l=this.pointAt(e),d=new mr(t,o);return d.translate(l.x-t.x,l.y-t.y),d}tangentAtLength(e){if(!this.isDifferentiable())return null;const t=this.start,o=this.end,l=this.pointAtLength(e),d=new mr(t,o);return d.translate(l.x-t.x,l.y-t.y),d}relativeCcw(e,t){const o=$e.create(e,t);let l=o.x-this.start.x,d=o.y-this.start.y;const f=this.end.x-this.start.x,v=this.end.y-this.start.y;let x=l*v-d*f;return x===0&&(x=l*f+d*v,x>0&&(l-=f,d-=v,x=l*f+d*v,x<0&&(x=0))),x<0?-1:x>0?1:0}equals(e){return e!=null&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y}clone(){return new mr(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}(function(c){c.toStringTag=`X6.Geometry.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;try{if((o==null||o===c.toStringTag)&&$e.isPoint(l.start)&&$e.isPoint(l.end)&&typeof l.vector=="function"&&typeof l.bearing=="function"&&typeof l.parallel=="function"&&typeof l.intersect=="function")return!0}catch(d){return!1}return!1}c.isLine=e})(mr||(mr={}));class od extends $f{constructor(e,t,o,l){super(),this.x=e==null?0:e,this.y=t==null?0:t,this.a=o==null?0:o,this.b=l==null?0:l}get[Symbol.toStringTag](){return od.toStringTag}get center(){return new $e(this.x,this.y)}bbox(){return zn.fromEllipse(this)}getCenter(){return this.center}inflate(e,t){const o=e,l=t!=null?t:e;return this.a+=2*o,this.b+=2*l,this}normalizedDistance(e,t){const o=$e.create(e,t),l=o.x-this.x,d=o.y-this.y,f=this.a,v=this.b;return l*l/(f*f)+d*d/(v*v)}containsPoint(e,t){return this.normalizedDistance(e,t)<=1}intersectsWithLine(e){const t=[],o=this.a,l=this.b,d=e.start,f=e.end,v=e.vector(),x=d.diff(new $e(this.x,this.y)),w=new $e(v.x/(o*o),v.y/(l*l)),_=new $e(x.x/(o*o),x.y/(l*l)),A=v.dot(w),P=v.dot(_),V=x.dot(_)-1,q=P*P-A*V;if(q<0)return null;if(q>0){const te=Math.sqrt(q),ge=(-P-te)/A,_e=(-P+te)/A;if((ge<0||ge>1)&&(_e<0||_e>1))return null;ge>=0&&ge<=1&&t.push(d.lerp(f,ge)),_e>=0&&_e<=1&&t.push(d.lerp(f,_e))}else{const te=-P/A;if(te>=0&&te<=1)t.push(d.lerp(f,te));else return null}return t}intersectsWithLineFromCenterToPoint(e,t=0){const o=$e.clone(e);t&&o.rotate(t,this.getCenter());const l=o.x-this.x,d=o.y-this.y;let f;if(l===0)return f=this.bbox().getNearestPointToPoint(o),t?f.rotate(-t,this.getCenter()):f;const v=d/l,x=v*v,w=this.a*this.a,_=this.b*this.b;let A=Math.sqrt(1/(1/w+x/_));A=l<0?-A:A;const P=v*A;return f=new $e(this.x+A,this.y+P),t?f.rotate(-t,this.getCenter()):f}tangentTheta(e){const t=$e.clone(e),o=t.x,l=t.y,d=this.a,f=this.b,v=this.bbox().center,x=v.x,w=v.y,_=30,A=o>v.x+d/2,P=o<v.x-d/2;let V,q;return A||P?(q=o>v.x?l-_:l+_,V=d*d/(o-x)-d*d*(l-w)*(q-w)/(f*f*(o-x))+x):(V=l>v.y?o+_:o-_,q=f*f/(l-w)-f*f*(o-x)*(V-x)/(d*d*(l-w))+w),new $e(V,q).theta(t)}scale(e,t){return this.a*=e,this.b*=t,this}rotate(e,t){const o=zn.fromEllipse(this);o.rotate(e,t);const l=od.fromRect(o);return this.a=l.a,this.b=l.b,this.x=l.x,this.y=l.y,this}translate(e,t){const o=$e.create(e,t);return this.x+=o.x,this.y+=o.y,this}equals(e){return e!=null&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b}clone(){return new od(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(c){c.toStringTag=`X6.Geometry.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&typeof l.x=="number"&&typeof l.y=="number"&&typeof l.a=="number"&&typeof l.b=="number"&&typeof l.inflate=="function"&&typeof l.normalizedDistance=="function"}c.isEllipse=e})(od||(od={})),function(c){function e(l,d,f,v){return l==null||typeof l=="number"?new c(l,d,f,v):t(l)}c.create=e;function t(l){return c.isEllipse(l)?l.clone():Array.isArray(l)?new c(l[0],l[1],l[2],l[3]):new c(l.x,l.y,l.a,l.b)}c.parse=t;function o(l){const d=l.center;return new c(d.x,d.y,l.width/2,l.height/2)}c.fromRect=o}(od||(od={}));class fa extends $f{constructor(e){if(super(),e!=null){if(typeof e=="string")return fa.parse(e);this.points=e.map(t=>$e.create(t))}else this.points=[]}get[Symbol.toStringTag](){return fa.toStringTag}get start(){return this.points.length===0?null:this.points[0]}get end(){return this.points.length===0?null:this.points[this.points.length-1]}scale(e,t,o=new $e){return this.points.forEach(l=>l.scale(e,t,o)),this}rotate(e,t){return this.points.forEach(o=>o.rotate(e,t)),this}translate(e,t){const o=$e.create(e,t);return this.points.forEach(l=>l.translate(o.x,o.y)),this}bbox(){if(this.points.length===0)return new zn;let e=1/0,t=-1/0,o=1/0,l=-1/0;const d=this.points;for(let f=0,v=d.length;f<v;f+=1){const x=d[f],w=x.x,_=x.y;w<e&&(e=w),w>t&&(t=w),_<o&&(o=_),_>l&&(l=_)}return new zn(e,o,t-e,l-o)}closestPoint(e){const t=this.closestPointLength(e);return this.pointAtLength(t)}closestPointLength(e){const t=this.points,o=t.length;if(o===0||o===1)return 0;let l=0,d=0,f=1/0;for(let v=0,x=o-1;v<x;v+=1){const w=new mr(t[v],t[v+1]),_=w.length(),A=w.closestPointNormalizedLength(e),V=w.pointAt(A).squaredDistance(e);V<f&&(f=V,d=l+A*_),l+=_}return d}closestPointNormalizedLength(e){const t=this.closestPointLength(e);if(t===0)return 0;const o=this.length();return o===0?0:t/o}closestPointTangent(e){const t=this.closestPointLength(e);return this.tangentAtLength(t)}containsPoint(e){if(this.points.length===0)return!1;const t=$e.clone(e),o=t.x,l=t.y,d=this.points,f=d.length;let v=f-1,x=0;for(let w=0;w<f;w+=1){const _=d[v],A=d[w];if(t.equals(_))return!0;const P=new mr(_,A);if(P.containsPoint(e))return!0;if(l<=_.y&&l>A.y||l>_.y&&l<=A.y){const V=_.x-o>A.x-o?_.x-o:A.x-o;if(V>=0){const q=new $e(o+V,l),te=new mr(e,q);P.intersectsWithLine(te)&&(x+=1)}}v=w}return x%2===1}intersectsWithLine(e){const t=[];for(let o=0,l=this.points.length-1;o<l;o+=1){const d=this.points[o],f=this.points[o+1],v=e.intersectsWithLine(new mr(d,f));v&&t.push(v)}return t.length>0?t:null}isDifferentiable(){for(let e=0,t=this.points.length-1;e<t;e+=1){const o=this.points[e],l=this.points[e+1];if(new mr(o,l).isDifferentiable())return!0}return!1}length(){let e=0;for(let t=0,o=this.points.length-1;t<o;t+=1){const l=this.points[t],d=this.points[t+1];e+=l.distance(d)}return e}pointAt(e){const t=this.points,o=t.length;if(o===0)return null;if(o===1||e<=0)return t[0].clone();if(e>=1)return t[o-1].clone();const d=this.length()*e;return this.pointAtLength(d)}pointAtLength(e){const t=this.points,o=t.length;if(o===0)return null;if(o===1)return t[0].clone();let l=!0;e<0&&(l=!1,e=-e);let d=0;for(let v=0,x=o-1;v<x;v+=1){const w=l?v:x-1-v,_=t[w],A=t[w+1],P=new mr(_,A),V=_.distance(A);if(e<=d+V)return P.pointAtLength((l?1:-1)*(e-d));d+=V}return(l?t[o-1]:t[0]).clone()}tangentAt(e){const o=this.points.length;if(o===0||o===1)return null;e<0&&(e=0),e>1&&(e=1);const d=this.length()*e;return this.tangentAtLength(d)}tangentAtLength(e){const t=this.points,o=t.length;if(o===0||o===1)return null;let l=!0;e<0&&(l=!1,e=-e);let d,f=0;for(let v=0,x=o-1;v<x;v+=1){const w=l?v:x-1-v,_=t[w],A=t[w+1],P=new mr(_,A),V=_.distance(A);if(P.isDifferentiable()){if(e<=f+V)return P.tangentAtLength((l?1:-1)*(e-f));d=P}f+=V}if(d){const v=l?1:0;return d.tangentAt(v)}return null}simplify(e={}){const t=this.points;if(t.length<3)return this;const o=e.threshold||0;let l=0;for(;t[l+2];){const d=l,f=l+1,v=l+2,x=t[d],w=t[f],_=t[v];new mr(x,_).closestPoint(w).distance(w)<=o?t.splice(f,1):l+=1}return this}toHull(){const e=this.points,t=e.length;if(t===0)return new fa;let o=e[0];for(let P=1;P<t;P+=1)(e[P].y<o.y||e[P].y===o.y&&e[P].x>o.x)&&(o=e[P]);const l=[];for(let P=0;P<t;P+=1){let V=o.theta(e[P]);V===0&&(V=360),l.push([e[P],P,V])}if(l.sort((P,V)=>{let q=P[2]-V[2];return q===0&&(q=V[1]-P[1]),q}),l.length>2){const P=l[l.length-1];l.unshift(P)}const d={},f=[],v=P=>`${P[0].toString()}@${P[1]}`;for(;l.length!==0;){const P=l.pop(),V=P[0];if(d[v(P)])continue;let q=!1;for(;!q;)if(f.length<2)f.push(P),q=!0;else{const te=f.pop(),ge=te[0],_e=f.pop(),ke=_e[0],Se=ke.cross(ge,V);if(Se<0)f.push(_e),f.push(te),f.push(P),q=!0;else if(Se===0){const nt=ge.angleBetween(ke,V);Math.abs(nt-180)<1e-10||ge.equals(V)||ke.equals(ge)?(d[v(te)]=ge,f.push(_e)):Math.abs((nt+1)%360-1)<1e-10&&(f.push(_e),l.push(te))}else d[v(te)]=ge,f.push(_e)}}f.length>2&&f.pop();let x,w=-1;for(let P=0,V=f.length;P<V;P+=1){const q=f[P][1];(x===void 0||q<x)&&(x=q,w=P)}let _=[];if(w>0){const P=f.slice(w),V=f.slice(0,w);_=P.concat(V)}else _=f;const A=[];for(let P=0,V=_.length;P<V;P+=1)A.push(_[P][0]);return new fa(A)}equals(e){return e==null||e.points.length!==this.points.length?!1:e.points.every((t,o)=>t.equals(this.points[o]))}clone(){return new fa(this.points.map(e=>e.clone()))}toJSON(){return this.points.map(e=>e.toJSON())}serialize(){return this.points.map(e=>`${e.x}, ${e.y}`).join(" ")}}(function(c){c.toStringTag=`X6.Geometry.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&typeof l.toHull=="function"&&typeof l.simplify=="function"}c.isPolyline=e})(fa||(fa={})),function(c){function e(t){const o=t.trim();if(o==="")return new c;const l=[],d=o.split(/\s*,\s*|\s+/);for(let f=0,v=d.length;f<v;f+=2)l.push({x:+d[f],y:+d[f+1]});return new c(l)}c.parse=e}(fa||(fa={}));class Qs extends $f{constructor(e,t,o,l){super(),this.PRECISION=3,this.start=$e.create(e),this.controlPoint1=$e.create(t),this.controlPoint2=$e.create(o),this.end=$e.create(l)}get[Symbol.toStringTag](){return Qs.toStringTag}bbox(){const e=this.start,t=this.controlPoint1,o=this.controlPoint2,l=this.end,d=e.x,f=e.y,v=t.x,x=t.y,w=o.x,_=o.y,A=l.x,P=l.y,V=[],q=[],te=[[],[]];let ge,_e,ke,Se,je,nt,wt,It;for(let jr=0;jr<2;jr+=1){if(jr===0?(_e=6*d-12*v+6*w,ge=-3*d+9*v-9*w+3*A,ke=3*v-3*d):(_e=6*f-12*x+6*_,ge=-3*f+9*x-9*_+3*P,ke=3*x-3*f),Math.abs(ge)<1e-12){if(Math.abs(_e)<1e-12)continue;Se=-ke/_e,Se>0&&Se<1&&q.push(Se);continue}wt=_e*_e-4*ke*ge,It=Math.sqrt(wt),!(wt<0)&&(je=(-_e+It)/(2*ge),je>0&&je<1&&q.push(je),nt=(-_e-It)/(2*ge),nt>0&&nt<1&&q.push(nt))}let Jt,Un,An,On=q.length;const Zn=On;for(;On;)On-=1,Se=q[On],An=1-Se,Jt=An*An*An*d+3*An*An*Se*v+3*An*Se*Se*w+Se*Se*Se*A,te[0][On]=Jt,Un=An*An*An*f+3*An*An*Se*x+3*An*Se*Se*_+Se*Se*Se*P,te[1][On]=Un,V[On]={X:Jt,Y:Un};q[Zn]=0,q[Zn+1]=1,V[Zn]={X:d,Y:f},V[Zn+1]={X:A,Y:P},te[0][Zn]=d,te[1][Zn]=f,te[0][Zn+1]=A,te[1][Zn+1]=P,q.length=Zn+2,te[0].length=Zn+2,te[1].length=Zn+2,V.length=Zn+2;const si=Math.min.apply(null,te[0]),Wr=Math.min.apply(null,te[1]),Wt=Math.max.apply(null,te[0]),Ln=Math.max.apply(null,te[1]);return new zn(si,Wr,Wt-si,Ln-Wr)}closestPoint(e,t={}){return this.pointAtT(this.closestPointT(e,t))}closestPointLength(e,t={}){const o=this.getOptions(t);return this.lengthAtT(this.closestPointT(e,o),o)}closestPointNormalizedLength(e,t={}){const o=this.getOptions(t),l=this.closestPointLength(e,o);if(!l)return 0;const d=this.length(o);return d===0?0:l/d}closestPointT(e,t={}){const o=this.getPrecision(t),l=this.getDivisions(t),d=Math.pow(10,-o);let f=null,v=0,x=0,w=0,_=0,A=0,P=null;const V=l.length;let q=V>0?1/V:0;for(l.forEach((te,ge)=>{const _e=te.start.distance(e),ke=te.end.distance(e),Se=_e+ke;(P==null||Se<P)&&(f=te,v=ge*q,x=(ge+1)*q,w=_e,_=ke,P=Se,A=te.endpointDistance())});;){const te=w?Math.abs(w-_)/w:0,ge=_!=null?Math.abs(w-_)/_:0,_e=te<d||ge<d,ke=w?w<A*d:!0,Se=_?_<A*d:!0;if(_e||(ke||Se))return w<=_?v:x;const nt=f.divide(.5);q/=2;const wt=nt[0].start.distance(e),It=nt[0].end.distance(e),Jt=wt+It,Un=nt[1].start.distance(e),An=nt[1].end.distance(e),On=Un+An;Jt<=On?(f=nt[0],x-=q,w=wt,_=It):(f=nt[1],v+=q,w=Un,_=An)}}closestPointTangent(e,t={}){return this.tangentAtT(this.closestPointT(e,t))}containsPoint(e,t={}){return this.toPolyline(t).containsPoint(e)}divideAt(e,t={}){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);const o=this.tAt(e,t);return this.divideAtT(o)}divideAtLength(e,t={}){const o=this.tAtLength(e,t);return this.divideAtT(o)}divide(e){return this.divideAtT(e)}divideAtT(e){const t=this.start,o=this.controlPoint1,l=this.controlPoint2,d=this.end;if(e<=0)return[new Qs(t,t,t,t),new Qs(t,o,l,d)];if(e>=1)return[new Qs(t,o,l,d),new Qs(d,d,d,d)];const f=this.getSkeletonPoints(e),v=f.startControlPoint1,x=f.startControlPoint2,w=f.divider,_=f.dividerControlPoint1,A=f.dividerControlPoint2;return[new Qs(t,v,x,w),new Qs(w,_,A,d)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(e){const t=this.start,o=this.controlPoint1,l=this.controlPoint2,d=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:l.clone()};if(e>=1)return{startControlPoint1:o.clone(),startControlPoint2:l.clone(),divider:d.clone(),dividerControlPoint1:d.clone(),dividerControlPoint2:d.clone()};const f=new mr(t,o).pointAt(e),v=new mr(o,l).pointAt(e),x=new mr(l,d).pointAt(e),w=new mr(f,v).pointAt(e),_=new mr(v,x).pointAt(e),A=new mr(w,_).pointAt(e);return{startControlPoint1:f,startControlPoint2:w,divider:A,dividerControlPoint1:_,dividerControlPoint2:x}}getSubdivisions(e={}){const t=this.getPrecision(e);let o=[new Qs(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(t===0)return o;let l=this.endpointDistance();const d=Math.pow(10,-t);let f=0;for(;;){f+=1;const v=[];o.forEach(_=>{const A=_.divide(.5);v.push(A[0],A[1])});const x=v.reduce((_,A)=>_+A.endpointDistance(),0),w=x!==0?(x-l)/x:0;if(f>1&&w<d)return v;o=v,l=x}}length(e={}){return this.getDivisions(e).reduce((o,l)=>o+l.endpointDistance(),0)}lengthAtT(e,t={}){if(e<=0)return 0;const o=t.precision===void 0?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:o})}pointAt(e,t={}){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const o=this.tAt(e,t);return this.pointAtT(o)}pointAtLength(e,t={}){const o=this.tAtLength(e,t);return this.pointAtT(o)}pointAtT(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider}isDifferentiable(){const e=this.start,t=this.controlPoint1,o=this.controlPoint2,l=this.end;return!(e.equals(t)&&t.equals(o)&&o.equals(l))}tangentAt(e,t={}){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);const o=this.tAt(e,t);return this.tangentAtT(o)}tangentAtLength(e,t={}){if(!this.isDifferentiable())return null;const o=this.tAtLength(e,t);return this.tangentAtT(o)}tangentAtT(e){if(!this.isDifferentiable())return null;e<0&&(e=0),e>1&&(e=1);const t=this.getSkeletonPoints(e),o=t.startControlPoint2,l=t.dividerControlPoint1,d=t.divider,f=new mr(o,l);return f.translate(d.x-o.x,d.y-o.y),f}getPrecision(e={}){return e.precision==null?this.PRECISION:e.precision}getDivisions(e={}){if(e.subdivisions!=null)return e.subdivisions;const t=this.getPrecision(e);return this.getSubdivisions({precision:t})}getOptions(e={}){const t=this.getPrecision(e),o=this.getDivisions(e);return{precision:t,subdivisions:o}}tAt(e,t={}){if(e<=0)return 0;if(e>=1)return 1;const o=this.getOptions(t),d=this.length(o)*e;return this.tAtLength(d,o)}tAtLength(e,t={}){let o=!0;e<0&&(o=!1,e=-e);const l=this.getPrecision(t),d=this.getDivisions(t),f={precision:l,subdivisions:d};let v=null,x,w,_=0,A=0,P=0;const V=d.length;let q=V>0?1/V:0;for(let _e=0;_e<V;_e+=1){const ke=o?_e:V-1-_e,Se=d[_e],je=Se.endpointDistance();if(e<=P+je){v=Se,x=ke*q,w=(ke+1)*q,_=o?e-P:je+P-e,A=o?je+P-e:e-P;break}P+=je}if(v==null)return o?1:0;const te=this.length(f),ge=Math.pow(10,-l);for(;;){let _e;if(_e=te!==0?_/te:0,_e<ge)return x;if(_e=te!==0?A/te:0,_e<ge)return w;let ke,Se;const je=v.divide(.5);q/=2;const nt=je[0].endpointDistance(),wt=je[1].endpointDistance();_<=nt?(v=je[0],w-=q,ke=_,Se=nt-ke):(v=je[1],x+=q,ke=_-nt,Se=wt-ke),_=ke,A=Se}}toPoints(e={}){const t=this.getDivisions(e),o=[t[0].start.clone()];return t.forEach(l=>o.push(l.end.clone())),o}toPolyline(e={}){return new fa(this.toPoints(e))}scale(e,t,o){return this.start.scale(e,t,o),this.controlPoint1.scale(e,t,o),this.controlPoint2.scale(e,t,o),this.end.scale(e,t,o),this}rotate(e,t){return this.start.rotate(e,t),this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?(this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return e!=null&&this.start.equals(e.start)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)&&this.end.equals(e.end)}clone(){return new Qs(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(c){c.toStringTag=`X6.Geometry.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;try{if((o==null||o===c.toStringTag)&&$e.isPoint(l.start)&&$e.isPoint(l.controlPoint1)&&$e.isPoint(l.controlPoint2)&&$e.isPoint(l.end)&&typeof l.toPoints=="function"&&typeof l.toPolyline=="function")return!0}catch(d){return!1}return!1}c.isCurve=e})(Qs||(Qs={})),function(c){function e(l){const d=l.length,f=[],v=[];let x=2;f[0]=l[0]/x;for(let w=1;w<d;w+=1)v[w]=1/x,x=(w<d-1?4:3.5)-v[w],f[w]=(l[w]-f[w-1])/x;for(let w=1;w<d;w+=1)f[d-w-1]-=v[d-w]*f[d-w];return f}function t(l){const d=l.map(P=>$e.clone(P)),f=[],v=[],x=d.length-1;if(x===1)return f[0]=new $e((2*d[0].x+d[1].x)/3,(2*d[0].y+d[1].y)/3),v[0]=new $e(2*f[0].x-d[0].x,2*f[0].y-d[0].y),[f,v];const w=[];for(let P=1;P<x-1;P+=1)w[P]=4*d[P].x+2*d[P+1].x;w[0]=d[0].x+2*d[1].x,w[x-1]=(8*d[x-1].x+d[x].x)/2;const _=e(w);for(let P=1;P<x-1;P+=1)w[P]=4*d[P].y+2*d[P+1].y;w[0]=d[0].y+2*d[1].y,w[x-1]=(8*d[x-1].y+d[x].y)/2;const A=e(w);for(let P=0;P<x;P+=1)f.push(new $e(_[P],A[P])),P<x-1?v.push(new $e(2*d[P+1].x-_[P+1],2*d[P+1].y-A[P+1])):v.push(new $e((d[x].x+_[x-1])/2,(d[x].y+A[x-1])/2));return[f,v]}function o(l){if(l==null||Array.isArray(l)&&l.length<2)throw new Error("At least 2 points are required");const d=t(l),f=[];for(let v=0,x=d[0].length;v<x;v+=1){const w=new $e(d[0][v].x,d[0][v].y),_=new $e(d[1][v].x,d[1][v].y);f.push(new c(l[v],w,_,l[v+1]))}return f}c.throughPoints=o}(Qs||(Qs={}));class m2 extends $f{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(e,t){if(e<=0)return 0;const o=this.length();return e>=1?o:o*e}divideAtT(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class kl extends m2{constructor(e,t){super(),mr.isLine(e)?this.endPoint=e.end.clone().round(2):this.endPoint=$e.create(e,t).round(2)}get type(){return"L"}get line(){return new mr(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[new kl(t[0]),new kl(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[new kl(t[0]),new kl(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return this.previousSegment==null?!1:!this.start.equals(this.end)}clone(){return new kl(this.end)}scale(e,t,o){return this.end.scale(e,t,o),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}(function(c){function e(...t){const o=t.length,l=t[0];if(mr.isLine(l))return new c(l);if($e.isPointLike(l))return o===1?new c(l):t.map(f=>new c(f));if(o===2)return new c(+t[0],+t[1]);const d=[];for(let f=0;f<o;f+=2){const v=+t[f],x=+t[f+1];d.push(new c(v,x))}return d}c.create=e})(kl||(kl={}));class u0 extends m2{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new mr(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[t[1].isDifferentiable()?new kl(t[0]):this.clone(),new kl(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new kl(t[0]):this.clone(),new kl(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}scale(){return this}rotate(){return this}translate(){return this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}clone(){return new u0}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}(function(c){function e(){return new c}c.create=e})(u0||(u0={}));class d0 extends m2{constructor(e,t){super(),this.isVisible=!1,this.isSubpathStart=!0,mr.isLine(e)||Qs.isCurve(e)?this.endPoint=e.end.clone().round(2):this.endPoint=$e.create(e,t).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(e,t,o){return this.end.scale(e,t,o),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}clone(){return new d0(this.end)}equals(e){return this.type===e.type&&this.end.equals(e.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}(function(c){function e(...t){const o=t.length,l=t[0];if(mr.isLine(l))return new c(l);if(Qs.isCurve(l))return new c(l);if($e.isPointLike(l)){if(o===1)return new c(l);const f=[];for(let v=0;v<o;v+=1)v===0?f.push(new c(t[v])):f.push(new kl(t[v]));return f}if(o===2)return new c(+t[0],+t[1]);const d=[];for(let f=0;f<o;f+=2){const v=+t[f],x=+t[f+1];f===0?d.push(new c(v,x)):d.push(new kl(v,x))}return d}c.create=e})(d0||(d0={}));class sd extends m2{constructor(e,t,o,l,d,f){super(),Qs.isCurve(e)?(this.controlPoint1=e.controlPoint1.clone().round(2),this.controlPoint2=e.controlPoint2.clone().round(2),this.endPoint=e.end.clone().round(2)):typeof e=="number"?(this.controlPoint1=new $e(e,t).round(2),this.controlPoint2=new $e(o,l).round(2),this.endPoint=new $e(d,f).round(2)):(this.controlPoint1=$e.create(e).round(2),this.controlPoint2=$e.create(t).round(2),this.endPoint=$e.create(o).round(2))}get type(){return"C"}get curve(){return new Qs(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(e){return this.curve.closestPoint(e)}closestPointLength(e){return this.curve.closestPointLength(e)}closestPointNormalizedLength(e){return this.curve.closestPointNormalizedLength(e)}closestPointTangent(e){return this.curve.closestPointTangent(e)}length(){return this.curve.length()}divideAt(e,t={}){const o=this.curve.divideAt(e,t);return[new sd(o[0]),new sd(o[1])]}divideAtLength(e,t={}){const o=this.curve.divideAtLength(e,t);return[new sd(o[0]),new sd(o[1])]}divideAtT(e){const t=this.curve.divideAtT(e);return[new sd(t[0]),new sd(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.curve.pointAt(e)}pointAtLength(e){return this.curve.pointAtLength(e)}tangentAt(e){return this.curve.tangentAt(e)}tangentAtLength(e){return this.curve.tangentAtLength(e)}isDifferentiable(){if(!this.previousSegment)return!1;const e=this.start,t=this.controlPoint1,o=this.controlPoint2,l=this.end;return!(e.equals(t)&&t.equals(o)&&o.equals(l))}scale(e,t,o){return this.controlPoint1.scale(e,t,o),this.controlPoint2.scale(e,t,o),this.end.scale(e,t,o),this}rotate(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return typeof e=="number"?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}clone(){return new sd(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.controlPoint1,t=this.controlPoint2,o=this.end;return[this.type,e.x,e.y,t.x,t.y,o.x,o.y].join(" ")}}(function(c){function e(...t){const o=t.length,l=t[0];if(Qs.isCurve(l))return new c(l);if($e.isPointLike(l)){if(o===3)return new c(t[0],t[1],t[2]);const f=[];for(let v=0;v<o;v+=3)f.push(new c(t[v],t[v+1],t[v+2]));return f}if(o===6)return new c(t[0],t[1],t[2],t[3],t[4],t[5]);const d=[];for(let f=0;f<o;f+=6)d.push(new c(t[f],t[f+1],t[f+2],t[f+3],t[f+4],t[f+5]));return d}c.create=e})(sd||(sd={}));function hy(c,e,t){return{x:c*Math.cos(t)-e*Math.sin(t),y:c*Math.sin(t)+e*Math.cos(t)}}function TC(c,e,t,o,l,d){const f=.3333333333333333,v=2/3;return[f*c+v*t,f*e+v*o,f*l+v*t,f*d+v*o,l,d]}function MC(c,e,t,o,l,d,f,v,x,w){const _=Math.PI*120/180,A=Math.PI/180*(+l||0);let P=[],V,q,te,ge,_e;if(w)q=w[0],te=w[1],ge=w[2],_e=w[3];else{V=hy(c,e,-A),c=V.x,e=V.y,V=hy(v,x,-A),v=V.x,x=V.y;const Wr=(c-v)/2,Wt=(e-x)/2;let Ln=Wr*Wr/(t*t)+Wt*Wt/(o*o);Ln>1&&(Ln=Math.sqrt(Ln),t=Ln*t,o=Ln*o);const jr=t*t,Do=o*o,Jo=(d===f?-1:1)*Math.sqrt(Math.abs((jr*Do-jr*Wt*Wt-Do*Wr*Wr)/(jr*Wt*Wt+Do*Wr*Wr)));ge=Jo*t*Wt/o+(c+v)/2,_e=Jo*-o*Wr/t+(e+x)/2,q=Math.asin((e-_e)/o),te=Math.asin((x-_e)/o),q=c<ge?Math.PI-q:q,te=v<ge?Math.PI-te:te,q<0&&(q=Math.PI*2+q),te<0&&(te=Math.PI*2+te),f&&q>te&&(q-=Math.PI*2),!f&&te>q&&(te-=Math.PI*2)}let ke=te-q;if(Math.abs(ke)>_){const Wr=te,Wt=v,Ln=x;te=q+_*(f&&te>q?1:-1),v=ge+t*Math.cos(te),x=_e+o*Math.sin(te),P=MC(v,x,t,o,l,0,f,Wt,Ln,[te,Wr,ge,_e])}ke=te-q;const Se=Math.cos(q),je=Math.sin(q),nt=Math.cos(te),wt=Math.sin(te),It=Math.tan(ke/4),Jt=4/3*(t*It),Un=4/3*(o*It),An=[c,e],On=[c+Jt*je,e-Un*Se],Zn=[v+Jt*wt,x-Un*nt],si=[v,x];if(On[0]=2*An[0]-On[0],On[1]=2*An[1]-On[1],w)return[On,Zn,si].concat(P);{P=[On,Zn,si].concat(P).join().split(",");const Wr=[],Wt=P.length;for(let Ln=0;Ln<Wt;Ln+=1)Wr[Ln]=Ln%2?hy(+P[Ln-1],+P[Ln],A).y:hy(+P[Ln],+P[Ln+1],A).x;return Wr}}function wM(c){if(!c)return null;const e=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,t=new RegExp(`([a-z])[${e},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${e}]*,?[${e}]*)+)`,"ig"),o=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${e}]*,?[${e}]*`,"ig"),l={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},d=[];return c.replace(t,(f,v,x)=>{const w=[];let _=v.toLowerCase();x.replace(o,(P,V)=>(V&&w.push(+V),P)),_==="m"&&w.length>2&&(d.push([v,...w.splice(0,2)]),_="l",v=v==="m"?"l":"L");const A=l[_];for(;w.length>=A&&(d.push([v,...w.splice(0,A)]),!!A););return f}),d}function EM(c){const e=wM(c);if(!e||!e.length)return[["M",0,0]];let t=0,o=0,l=0,d=0;const f=[];for(let v=0,x=e.length;v<x;v+=1){const w=[];f.push(w);const _=e[v],A=_[0];if(A!==A.toUpperCase())switch(w[0]=A.toUpperCase(),w[0]){case"A":w[1]=_[1],w[2]=_[2],w[3]=_[3],w[4]=_[4],w[5]=_[5],w[6]=+_[6]+t,w[7]=+_[7]+o;break;case"V":w[1]=+_[1]+o;break;case"H":w[1]=+_[1]+t;break;case"M":l=+_[1]+t,d=+_[2]+o;for(let P=1,V=_.length;P<V;P+=1)w[P]=+_[P]+(P%2?t:o);break;default:for(let P=1,V=_.length;P<V;P+=1)w[P]=+_[P]+(P%2?t:o);break}else for(let P=0,V=_.length;P<V;P+=1)w[P]=_[P];switch(w[0]){case"Z":t=+l,o=+d;break;case"H":t=w[1];break;case"V":o=w[1];break;case"M":l=w[w.length-2],d=w[w.length-1],t=w[w.length-2],o=w[w.length-1];break;default:t=w[w.length-2],o=w[w.length-1];break}}return f}function SM(c){const e=EM(c),t={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function o(x,w,_){let A,P;if(!x)return["C",w.x,w.y,w.x,w.y,w.x,w.y];switch(x[0]in{T:1,Q:1}||(w.qx=null,w.qy=null),x[0]){case"M":w.X=x[1],w.Y=x[2];break;case"A":return parseFloat(x[1])===0||parseFloat(x[2])===0?["L",x[6],x[7]]:["C"].concat(MC.apply(0,[w.x,w.y].concat(x.slice(1))));case"S":return _==="C"||_==="S"?(A=w.x*2-w.bx,P=w.y*2-w.by):(A=w.x,P=w.y),["C",A,P].concat(x.slice(1));case"T":return _==="Q"||_==="T"?(w.qx=w.x*2-w.qx,w.qy=w.y*2-w.qy):(w.qx=w.x,w.qy=w.y),["C"].concat(TC(w.x,w.y,w.qx,w.qy,x[1],x[2]));case"Q":return w.qx=x[1],w.qy=x[2],["C"].concat(TC(w.x,w.y,x[1],x[2],x[3],x[4]));case"H":return["L"].concat(x[1],w.y);case"V":return["L"].concat(w.x,x[1]);case"L":break;case"Z":break;default:break}return x}function l(x,w){if(x[w].length>7){x[w].shift();const _=x[w];for(;_.length;)d[w]="A",w+=1,x.splice(w,0,["C"].concat(_.splice(0,6)));x.splice(w,1),v=e.length}}const d=[];let f="",v=e.length;for(let x=0;x<v;x+=1){let w="";e[x]&&(w=e[x][0]),w!=="C"&&(d[x]=w,x>0&&(f=d[x-1])),e[x]=o(e[x],t,f),d[x]!=="A"&&w==="C"&&(d[x]="C"),l(e,x);const _=e[x],A=_.length;t.x=_[A-2],t.y=_[A-1],t.bx=parseFloat(_[A-4])||t.x,t.by=parseFloat(_[A-3])||t.y}return(!e[0][0]||e[0][0]!=="M")&&e.unshift(["M",0,0]),e}function yS(c){return SM(c).map(e=>e.map(t=>typeof t=="string"?t:l0(t,2))).join(",").split(",").join(" ")}const _M=new RegExp("^[\\s\\dLMCZz,.]*$");function bS(c){return typeof c!="string"?!1:_M.test(c)}function y2(c,e){return(c%e+e)%e}function xS(c,e,t,o,l){const d=[],f=c[c.length-1],v=e!=null&&e>0,x=e||0;if(o&&v){c=c.slice();const A=c[0],P=new $e(f.x+(A.x-f.x)/2,f.y+(A.y-f.y)/2);c.splice(0,0,P)}let w=c[0],_=1;for(t?d.push("M",w.x,w.y):d.push("L",w.x,w.y);_<(o?c.length:c.length-1);){let A=c[y2(_,c.length)],P=w.x-A.x,V=w.y-A.y;if(v&&(P!==0||V!==0)&&(l==null||l.indexOf(_-1)<0)){let q=Math.sqrt(P*P+V*V);const te=P*Math.min(x,q/2)/q,ge=V*Math.min(x,q/2)/q,_e=A.x+te,ke=A.y+ge;d.push("L",_e,ke);let Se=c[y2(_+1,c.length)];for(;_<c.length-2&&Math.round(Se.x-A.x)===0&&Math.round(Se.y-A.y)===0;)Se=c[y2(_+2,c.length)],_+=1;P=Se.x-A.x,V=Se.y-A.y,q=Math.max(1,Math.sqrt(P*P+V*V));const je=P*Math.min(x,q/2)/q,nt=V*Math.min(x,q/2)/q,wt=A.x+je,It=A.y+nt;d.push("Q",A.x,A.y,wt,It),A=new $e(wt,It)}else d.push("L",A.x,A.y);w=A,_+=1}return o?d.push("Z"):d.push("L",f.x,f.y),d.map(A=>typeof A=="string"?A:+A.toFixed(3)).join(" ")}function OC(c,e={}){const t=[];return c&&c.length&&c.forEach(o=>{Array.isArray(o)?t.push({x:o[0],y:o[1]}):t.push({x:o.x,y:o.y})}),xS(t,e.round,e.initialMove==null||e.initialMove,e.close,e.exclude)}function Yp(c,e,t,o,l=0,d=0,f=0,v,x){if(t===0||o===0)return[];v-=c,x-=e,t=Math.abs(t),o=Math.abs(o);const w=-v/2,_=-x/2,A=Math.cos(l*Math.PI/180),P=Math.sin(l*Math.PI/180),V=A*w+P*_,q=-1*P*w+A*_,te=V*V,ge=q*q,_e=t*t,ke=o*o,Se=te/_e+ge/ke;let je;if(Se>1)t=Math.sqrt(Se)*t,o=Math.sqrt(Se)*o,je=0;else{let oh=1;d===f&&(oh=-1),je=oh*Math.sqrt((_e*ke-_e*ge-ke*te)/(_e*ge+ke*te))}const nt=je*t*q/o,wt=-1*je*o*V/t,It=A*nt-P*wt+v/2,Jt=P*nt+A*wt+x/2;let Un=Math.atan2((q-wt)/o,(V-nt)/t)-Math.atan2(0,1),An=Un>=0?Un:2*Math.PI+Un;Un=Math.atan2((-q-wt)/o,(-V-nt)/t)-Math.atan2((q-wt)/o,(V-nt)/t);let On=Un>=0?Un:2*Math.PI+Un;f===0&&On>0?On-=2*Math.PI:f!==0&&On<0&&(On+=2*Math.PI);const Zn=On*2/Math.PI,si=Math.ceil(Zn<0?-1*Zn:Zn),Wr=On/si,Wt=8/3*Math.sin(Wr/4)*Math.sin(Wr/4)/Math.sin(Wr/2),Ln=A*t,jr=A*o,Do=P*t,Jo=P*o;let Oa=Math.cos(An),ta=Math.sin(An),d1=-Wt*(Ln*ta+Jo*Oa),k0=-Wt*(Do*ta-jr*Oa),bg=0,Yc=0;const xg=[];for(let oh=0;oh<si;oh+=1){An+=Wr,Oa=Math.cos(An),ta=Math.sin(An),bg=Ln*Oa-Jo*ta+It,Yc=Do*Oa+jr*ta+Jt;const MA=-Wt*(Ln*ta+Jo*Oa),OA=-Wt*(Do*ta-jr*Oa),Kv=oh*6;xg[Kv]=Number(d1+c),xg[Kv+1]=Number(k0+e),xg[Kv+2]=Number(bg-MA+c),xg[Kv+3]=Number(Yc-OA+e),xg[Kv+4]=Number(bg+c),xg[Kv+5]=Number(Yc+e),d1=bg+MA,k0=Yc+OA}return xg.map(oh=>+oh.toFixed(2))}function AM(c,e,t,o,l=0,d=0,f=0,v,x){const w=[],_=Yp(c,e,t,o,l,d,f,v,x);if(_!=null)for(let A=0,P=_.length;A<P;A+=6)w.push("C",_[A],_[A+1],_[A+2],_[A+3],_[A+4],_[A+5]);return w.join(" ")}class Vr extends $f{constructor(e){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(e))if(mr.isLine(e[0])||Qs.isCurve(e[0])){let t=null;e.forEach((l,d)=>{d===0&&this.appendSegment(Vr.createSegment("M",l.start)),t!=null&&!t.end.equals(l.start)&&this.appendSegment(Vr.createSegment("M",l.start)),mr.isLine(l)?this.appendSegment(Vr.createSegment("L",l.end)):Qs.isCurve(l)&&this.appendSegment(Vr.createSegment("C",l.controlPoint1,l.controlPoint2,l.end)),t=l})}else e.forEach(o=>{o.isSegment&&this.appendSegment(o)});else e!=null&&(mr.isLine(e)?(this.appendSegment(Vr.createSegment("M",e.start)),this.appendSegment(Vr.createSegment("L",e.end))):Qs.isCurve(e)?(this.appendSegment(Vr.createSegment("M",e.start)),this.appendSegment(Vr.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):fa.isPolyline(e)?e.points&&e.points.length&&e.points.forEach((t,o)=>{const l=o===0?Vr.createSegment("M",t):Vr.createSegment("L",t);this.appendSegment(l)}):e.isSegment&&this.appendSegment(e))}get[Symbol.toStringTag](){return Vr.toStringTag}get start(){const e=this.segments,t=e.length;if(t===0)return null;for(let o=0;o<t;o+=1){const l=e[o];if(l.isVisible)return l.start}return e[t-1].end}get end(){const e=this.segments,t=e.length;if(t===0)return null;for(let o=t-1;o>=0;o-=1){const l=e[o];if(l.isVisible)return l.end}return e[t-1].end}moveTo(...e){return this.appendSegment(d0.create.call(null,...e))}lineTo(...e){return this.appendSegment(kl.create.call(null,...e))}curveTo(...e){return this.appendSegment(sd.create.call(null,...e))}arcTo(e,t,o,l,d,f,v){const x=this.end||new $e,w=typeof f=="number"?Yp(x.x,x.y,e,t,o,l,d,f,v):Yp(x.x,x.y,e,t,o,l,d,f.x,f.y);if(w!=null)for(let _=0,A=w.length;_<A;_+=6)this.curveTo(w[_],w[_+1],w[_+2],w[_+3],w[_+4],w[_+5]);return this}quadTo(e,t,o,l){const d=this.end||new $e,f=["M",d.x,d.y];if(typeof e=="number")f.push("Q",e,t,o,l);else{const x=t;f.push("Q",e.x,e.y,x.x,x.y)}const v=Vr.parse(f.join(" "));return this.appendSegment(v.segments.slice(1)),this}close(){return this.appendSegment(u0.create())}drawPoints(e,t={}){const o=OC(e,t),l=Vr.parse(o);l&&l.segments&&this.appendSegment(l.segments)}bbox(){const e=this.segments,t=e.length;if(t===0)return null;let o;for(let d=0;d<t;d+=1){const f=e[d];if(f.isVisible){const v=f.bbox();v!=null&&(o=o?o.union(v):v)}}if(o!=null)return o;const l=e[t-1];return new zn(l.end.x,l.end.y,0,0)}appendSegment(e){const t=this.segments.length;let o=t!==0?this.segments[t-1]:null,l;const d=null;if(Array.isArray(e))for(let f=0,v=e.length;f<v;f+=1){const x=e[f];l=this.prepareSegment(x,o,d),this.segments.push(l),o=l}else e!=null&&e.isSegment&&(l=this.prepareSegment(e,o,d),this.segments.push(l));return this}insertSegment(e,t){const o=this.segments.length;if(e<0&&(e=o+e+1),e>o||e<0)throw new Error("Index out of range.");let l,d=null,f=null;if(o!==0&&(e>=1?(d=this.segments[e-1],f=d.nextSegment):(d=null,f=this.segments[0])),!Array.isArray(t))l=this.prepareSegment(t,d,f),this.segments.splice(e,0,l);else for(let v=0,x=t.length;v<x;v+=1){const w=t[v];l=this.prepareSegment(w,d,f),this.segments.splice(e+v,0,l),d=l}return this}removeSegment(e){const t=this.fixIndex(e),o=this.segments.splice(t,1)[0],l=o.previousSegment,d=o.nextSegment;return l&&(l.nextSegment=d),d&&(d.previousSegment=l),o.isSubpathStart&&d&&this.updateSubpathStartSegment(d),o}replaceSegment(e,t){const o=this.fixIndex(e);let l;const d=this.segments[o];let f=d.previousSegment;const v=d.nextSegment;let x=d.isSubpathStart;if(!Array.isArray(t))l=this.prepareSegment(t,f,v),this.segments.splice(o,1,l),x&&l.isSubpathStart&&(x=!1);else{this.segments.splice(e,1);for(let w=0,_=t.length;w<_;w+=1){const A=t[w];l=this.prepareSegment(A,f,v),this.segments.splice(e+w,0,l),f=l,x&&l.isSubpathStart&&(x=!1)}}x&&v&&this.updateSubpathStartSegment(v)}getSegment(e){const t=this.fixIndex(e);return this.segments[t]}fixIndex(e){const t=this.segments.length;if(t===0)throw new Error("Path has no segments.");let o=e;for(;o<0;)o=t+o;if(o>=t||o<0)throw new Error("Index out of range.");return o}segmentAt(e,t={}){const o=this.segmentIndexAt(e,t);return o?this.getSegment(o):null}segmentAtLength(e,t={}){const o=this.segmentIndexAtLength(e,t);return o?this.getSegment(o):null}segmentIndexAt(e,t={}){if(this.segments.length===0)return null;const o=c0(e,0,1),l=this.getOptions(t),f=this.length(l)*o;return this.segmentIndexAtLength(f,l)}segmentIndexAtLength(e,t={}){const o=this.segments.length;if(o===0)return null;let l=!0;e<0&&(l=!1,e=-e);const d=this.getPrecision(t),f=this.getSubdivisions(t);let v=0,x=null;for(let w=0;w<o;w+=1){const _=l?w:o-1-w,A=this.segments[_],P=f[_],V=A.length({precision:d,subdivisions:P});if(A.isVisible){if(e<=v+V)return _;x=_}v+=V}return x}getSegmentSubdivisions(e={}){const t=this.getPrecision(e),o=[];for(let l=0,d=this.segments.length;l<d;l+=1){const v=this.segments[l].getSubdivisions({precision:t});o.push(v)}return o}updateSubpathStartSegment(e){let t=e.previousSegment,o=e;for(;o&&!o.isSubpathStart;)t!=null?o.subpathStartSegment=t.subpathStartSegment:o.subpathStartSegment=null,t=o,o=o.nextSegment}prepareSegment(e,t,o){e.previousSegment=t,e.nextSegment=o,t!=null&&(t.nextSegment=e),o!=null&&(o.previousSegment=e);let l=e;return e.isSubpathStart&&(e.subpathStartSegment=e,l=o),l!=null&&this.updateSubpathStartSegment(l),e}closestPoint(e,t={}){const o=this.closestPointT(e,t);return o?this.pointAtT(o):null}closestPointLength(e,t={}){const o=this.getOptions(t),l=this.closestPointT(e,o);return l?this.lengthAtT(l,o):0}closestPointNormalizedLength(e,t={}){const o=this.getOptions(t),l=this.closestPointLength(e,o);if(l===0)return 0;const d=this.length(o);return d===0?0:l/d}closestPointT(e,t={}){if(this.segments.length===0)return null;const o=this.getPrecision(t),l=this.getSubdivisions(t);let d,f=1/0;for(let v=0,x=this.segments.length;v<x;v+=1){const w=this.segments[v],_=l[v];if(w.isVisible){const A=w.closestPointT(e,{precision:o,subdivisions:_}),P=w.pointAtT(A),V=AC(P,e);V<f&&(d={segmentIndex:v,value:A},f=V)}}return d||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(e,t={}){if(this.segments.length===0)return null;const o=this.getPrecision(t),l=this.getSubdivisions(t);let d,f=1/0;for(let v=0,x=this.segments.length;v<x;v+=1){const w=this.segments[v],_=l[v];if(w.isDifferentiable()){const A=w.closestPointT(e,{precision:o,subdivisions:_}),P=w.pointAtT(A),V=AC(P,e);V<f&&(d=w.tangentAtT(A),f=V)}}return d||null}containsPoint(e,t={}){const o=this.toPolylines(t);if(!o)return!1;let l=0;for(let d=0,f=o.length;d<f;d+=1)o[d].containsPoint(e)&&(l+=1);return l%2===1}pointAt(e,t={}){if(this.segments.length===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const o=this.getOptions(t),d=this.length(o)*e;return this.pointAtLength(d,o)}pointAtLength(e,t={}){if(this.segments.length===0)return null;if(e===0)return this.start.clone();let o=!0;e<0&&(o=!1,e=-e);const l=this.getPrecision(t),d=this.getSubdivisions(t);let f,v=0;for(let w=0,_=this.segments.length;w<_;w+=1){const A=o?w:_-1-w,P=this.segments[A],V=d[A],q=P.length({precision:l,subdivisions:V});if(P.isVisible){if(e<=v+q)return P.pointAtLength((o?1:-1)*(e-v),{precision:l,subdivisions:V});f=P}v+=q}return f?o?f.end:f.start:this.segments[this.segments.length-1].end.clone()}pointAtT(e){const t=this.segments,o=t.length;if(o===0)return null;const l=e.segmentIndex;if(l<0)return t[0].pointAtT(0);if(l>=o)return t[o-1].pointAtT(1);const d=c0(e.value,0,1);return t[l].pointAtT(d)}divideAt(e,t={}){if(this.segments.length===0)return null;const o=c0(e,0,1),l=this.getOptions(t),f=this.length(l)*o;return this.divideAtLength(f,l)}divideAtLength(e,t={}){if(this.segments.length===0)return null;let o=!0;e<0&&(o=!1,e=-e);const l=this.getPrecision(t),d=this.getSubdivisions(t);let f=0,v,x,w,_,A;for(let nt=0,wt=this.segments.length;nt<wt;nt+=1){const It=o?nt:wt-1-nt,Jt=this.getSegment(It),Un=d[It],An={precision:l,subdivisions:Un},On=Jt.length(An);if(Jt.isDifferentiable()&&(w=Jt,_=It,e<=f+On)){x=It,v=Jt.divideAtLength((o?1:-1)*(e-f),An);break}f+=On}if(!w)return null;v||(x=_,A=o?1:0,v=w.divideAtT(A));const P=this.clone(),V=x;P.replaceSegment(V,v);const q=V;let te=V+1,ge=V+2;v[0].isDifferentiable()||(P.removeSegment(q),te-=1,ge-=1);const _e=P.getSegment(te).start;P.insertSegment(te,Vr.createSegment("M",_e)),ge+=1,v[1].isDifferentiable()||(P.removeSegment(ge-1),ge-=1);const ke=ge-q-1;for(let nt=ge,wt=P.segments.length;nt<wt;nt+=1){const It=this.getSegment(nt-ke),Jt=P.getSegment(nt);if(Jt.type==="Z"&&!It.subpathStartSegment.end.equals(Jt.subpathStartSegment.end)){const Un=Vr.createSegment("L",It.end);P.replaceSegment(nt,Un)}}const Se=new Vr(P.segments.slice(0,te)),je=new Vr(P.segments.slice(te));return[Se,je]}intersectsWithLine(e,t={}){const o=this.toPolylines(t);if(o==null)return null;let l=null;for(let d=0,f=o.length;d<f;d+=1){const v=o[d],x=e.intersect(v);x&&(l==null&&(l=[]),Array.isArray(x)?l.push(...x):l.push(x))}return l}isDifferentiable(){for(let e=0,t=this.segments.length;e<t;e+=1)if(this.segments[e].isDifferentiable())return!0;return!1}isValid(){const e=this.segments;return e.length===0||e[0].type==="M"}length(e={}){if(this.segments.length===0)return 0;const t=this.getSubdivisions(e);let o=0;for(let l=0,d=this.segments.length;l<d;l+=1){const f=this.segments[l],v=t[l];o+=f.length({subdivisions:v})}return o}lengthAtT(e,t={}){const o=this.segments.length;if(o===0)return 0;let l=e.segmentIndex;if(l<0)return 0;let d=c0(e.value,0,1);l>=o&&(l=o-1,d=1);const f=this.getPrecision(t),v=this.getSubdivisions(t);let x=0;for(let A=0;A<l;A+=1){const P=this.segments[A],V=v[A];x+=P.length({precision:f,subdivisions:V})}const w=this.segments[l],_=v[l];return x+=w.lengthAtT(d,{precision:f,subdivisions:_}),x}tangentAt(e,t={}){if(this.segments.length===0)return null;const o=c0(e,0,1),l=this.getOptions(t),f=this.length(l)*o;return this.tangentAtLength(f,l)}tangentAtLength(e,t={}){if(this.segments.length===0)return null;let o=!0;e<0&&(o=!1,e=-e);const l=this.getPrecision(t),d=this.getSubdivisions(t);let f,v=0;for(let x=0,w=this.segments.length;x<w;x+=1){const _=o?x:w-1-x,A=this.segments[_],P=d[_],V=A.length({precision:l,subdivisions:P});if(A.isDifferentiable()){if(e<=v+V)return A.tangentAtLength((o?1:-1)*(e-v),{precision:l,subdivisions:P});f=A}v+=V}if(f){const x=o?1:0;return f.tangentAtT(x)}return null}tangentAtT(e){const t=this.segments.length;if(t===0)return null;const o=e.segmentIndex;if(o<0)return this.segments[0].tangentAtT(0);if(o>=t)return this.segments[t-1].tangentAtT(1);const l=c0(e.value,0,1);return this.segments[o].tangentAtT(l)}getPrecision(e={}){return e.precision==null?this.PRECISION:e.precision}getSubdivisions(e={}){if(e.segmentSubdivisions==null){const t=this.getPrecision(e);return this.getSegmentSubdivisions({precision:t})}return e.segmentSubdivisions}getOptions(e={}){const t=this.getPrecision(e),o=this.getSubdivisions(e);return{precision:t,segmentSubdivisions:o}}toPoints(e={}){const t=this.segments,o=t.length;if(o===0)return null;const l=this.getSubdivisions(e),d=[];let f=[];for(let v=0;v<o;v+=1){const x=t[v];if(x.isVisible){const w=l[v];w.length>0?w.forEach(_=>f.push(_.start)):f.push(x.start)}else f.length>0&&(f.push(t[v-1].end),d.push(f),f=[])}return f.length>0&&(f.push(this.end),d.push(f)),d}toPolylines(e={}){const t=this.toPoints(e);return t?t.map(o=>new fa(o)):null}scale(e,t,o){return this.segments.forEach(l=>l.scale(e,t,o)),this}rotate(e,t){return this.segments.forEach(o=>o.rotate(e,t)),this}translate(e,t){return typeof e=="number"?this.segments.forEach(o=>o.translate(e,t)):this.segments.forEach(o=>o.translate(e)),this}clone(){const e=new Vr;return this.segments.forEach(t=>e.appendSegment(t.clone())),e}equals(e){if(e==null)return!1;const t=this.segments,o=e.segments,l=t.length;if(o.length!==l)return!1;for(let d=0;d<l;d+=1){const f=t[d],v=o[d];if(f.type!==v.type||!f.equals(v))return!1}return!0}toJSON(){return this.segments.map(e=>e.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(e=>e.serialize()).join(" ")}toString(){return this.serialize()}}(function(c){c.toStringTag=`X6.Geometry.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return!!((o==null||o===c.toStringTag)&&Array.isArray(l.segments)&&typeof l.moveTo=="function"&&typeof l.lineTo=="function"&&typeof l.curveTo=="function")}c.isPath=e})(Vr||(Vr={})),function(c){function e(o){if(!o)return new c;const l=new c,d=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,f=c.normalize(o).match(d);if(f!=null)for(let v=0,x=f.length;v<x;v+=1){const w=f[v],_=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,A=w.match(_);if(A!=null){const P=A[0],V=A.slice(1).map(te=>+te),q=t.call(null,P,...V);l.appendSegment(q)}}return l}c.parse=e;function t(o,...l){if(o==="M")return d0.create.call(null,...l);if(o==="L")return kl.create.call(null,...l);if(o==="C")return sd.create.call(null,...l);if(o==="z"||o==="Z")return u0.create();throw new Error(`Invalid path segment type "${o}"`)}c.createSegment=t}(Vr||(Vr={})),function(c){c.normalize=yS,c.isValid=bS,c.drawArc=AM,c.drawPoints=OC,c.arcToCurves=Yp}(Vr||(Vr={}));class dr{constructor(e,t,o){if(!e)throw new TypeError("Invalid element to create vector");let l;if(dr.isVector(e))l=e.node;else if(typeof e=="string")if(e.toLowerCase()==="svg")l=iy();else if(e[0]==="<"){const d=iy(e);l=document.importNode(d.firstChild,!0)}else l=document.createElementNS(da.svg,e);else l=e;this.node=l,t&&this.setAttributes(t),o&&this.append(o)}get[Symbol.toStringTag](){return dr.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(e){this.node.id=e}transform(e,t){return e==null?Xf(this.node):(Xf(this.node,e,t),this)}translate(e,t=0,o={}){return e==null?A2(this.node):(A2(this.node,e,t,o),this)}rotate(e,t,o,l={}){return e==null?qp(this.node):(qp(this.node,e,t,o,l),this)}scale(e,t){return e==null?Uh(this.node):(Uh(this.node,e,t),this)}getTransformToElement(e){const t=dr.toNode(e);return Bh(this.node,t)}removeAttribute(e){return dS(this.node,e),this}getAttribute(e){return mM(this.node,e)}setAttribute(e,t){return xC(this.node,e,t),this}setAttributes(e){return hS(this.node,e),this}attr(e,t){return e==null?go(this.node):typeof e=="string"&&t===void 0?go(this.node,e):(typeof e=="object"?go(this.node,e):go(this.node,e,t),this)}svg(){return this.node instanceof SVGSVGElement?this:dr.create(this.node.ownerSVGElement)}defs(){const e=this.svg()||this,t=e.node.getElementsByTagName("defs")[0];return t?dr.create(t):dr.create("defs").appendTo(e)}text(e,t={}){return x2(this.node,e,t),this}tagName(){return oy(this.node)}clone(){return dr.create(this.node.cloneNode(!0))}remove(){return id(this.node),this}empty(){return cy(this.node),this}append(e){return s0(this.node,dr.toNodes(e)),this}appendTo(e){return vM(this.node,dr.isVector(e)?e.node:e),this}prepend(e){return cS(this.node,dr.toNodes(e)),this}before(e){return ha(this.node,dr.toNodes(e)),this}replace(e){return this.node.parentNode&&this.node.parentNode.replaceChild(dr.toNode(e),this.node),dr.create(e)}first(){return this.node.firstChild?dr.create(this.node.firstChild):null}last(){return this.node.lastChild?dr.create(this.node.lastChild):null}get(e){const t=this.node.childNodes[e];return t?dr.create(t):null}indexOf(e){return Array.prototype.slice.call(this.node.childNodes).indexOf(dr.toNode(e))}find(e){const t=[],o=yC(this.node,e);if(o)for(let l=0,d=o.length;l<d;l+=1)t.push(dr.create(o[l]));return t}findOne(e){const t=ay(this.node,e);return t?dr.create(t):null}findParentByClass(e,t){const o=o0(this.node,e,t);return o?dr.create(o):null}matches(e){const t=this.node,o=this.node.matches,l=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return l&&l.call(t,e)}contains(e){return ly(this.node,dr.isVector(e)?e.node:e)}wrap(e){const t=dr.create(e),o=this.node.parentNode;return o!=null&&o.insertBefore(t.node,this.node),t.append(this)}parent(e){let t=this;if(t.node.parentNode==null)return null;if(t=dr.create(t.node.parentNode),e==null)return t;do if(typeof e=="string"?t.matches(e):t instanceof e)return t;while(t=dr.create(t.node.parentNode));return t}children(){const e=this.node.childNodes,t=[];for(let o=0;o<e.length;o+=1)e[o].nodeType===1&&t.push(dr.create(e[o]));return t}eachChild(e,t){const o=this.children();for(let l=0,d=o.length;l<d;l+=1)e.call(o[l],o[l],l,o),t&&o[l].eachChild(e,t);return this}index(){return sy(this.node)}hasClass(e){return r0(this.node,e)}addClass(e){return ao(this.node,e),this}removeClass(e){return $c(this.node,e),this}toggleClass(e,t){return d2(this.node,e,t),this}toLocalPoint(e,t){return Bo(this.node,e,t)}toGeometryShape(){return Tv(this.node)}translateCenterToPoint(e){const o=this.getBBox({target:this.svg()}).getCenter();return this.translate(e.x-o.x,e.y-o.y),this}translateAndAutoOrient(e,t,o){return Zd(this.node,e,t,o),this}animate(e){return zh(this.node,e)}animateTransform(e){return Wf(this.node,e)}animateAlongPath(e,t){return RC(this.node,e,t)}normalizePath(){return this.tagName()==="path"&&this.attr("d",Vr.normalize(this.attr("d"))),this}bbox(e,t){return DC(this.node,e,t)}getBBox(e={}){return pa(this.node,{recursive:e.recursive,target:e.target?dr.toNode(e.target):null})}sample(e=1){return this.node instanceof SVGPathElement?nc(this.node,e):[]}toPath(){return dr.create(SS(this.node))}toPathData(){return _S(this.node)}}(function(c){c.toStringTag=`X6.${c.name}`;function e(f){if(f==null)return!1;if(f instanceof c)return!0;const v=f[Symbol.toStringTag],x=f;return(v==null||v===c.toStringTag)&&x.node instanceof SVGElement&&typeof x.animate=="function"&&typeof x.sample=="function"&&typeof x.normalizePath=="function"&&typeof x.toPath=="function"}c.isVector=e;function t(f,v,x){return new c(f,v,x)}c.create=t;function o(f){if(f[0]==="<"){const v=iy(f),x=[];for(let w=0,_=v.childNodes.length;w<_;w+=1){const A=v.childNodes[w];x.push(t(document.importNode(A,!0)))}return x}return[t(f)]}c.createVectors=o;function l(f){return e(f)?f.node:f}c.toNode=l;function d(f){return Array.isArray(f)?f.map(v=>l(v)):[l(f)]}c.toNodes=d})(dr||(dr={}));function TM(c,e){const t=dr.create(e),o=dr.create("textPath"),l=c.d;if(l&&c["xlink:href"]===void 0){const d=dr.create("path").attr("d",l).appendTo(t.defs());o.attr("xlink:href",`#${d.id}`)}return typeof c=="object"&&o.attr(c),o.node}function MM(c,e,t){const o=t.eol,l=t.baseSize,d=t.lineHeight;let f=0,v;const x={},w=e.length-1;for(let _=0;_<=w;_+=1){let A=e[_],P=null;if(typeof A=="object"){const V=A.attrs,q=dr.create("tspan",V);v=q.node;let te=A.t;o&&_===w&&(te+=o),v.textContent=te;const ge=V.class;ge&&q.addClass(ge),t.includeAnnotationIndices&&q.attr("annotations",A.annotations.join(",")),P=parseFloat(V["font-size"]),P===void 0&&(P=l),P&&P>f&&(f=P)}else o&&_===w&&(A+=o),v=document.createTextNode(A||" "),l&&l>f&&(f=l);c.appendChild(v)}return f&&(x.maxFontSize=f),d?x.lineHeight=d:f&&(x.lineHeight=f*1.2),x}const CS=/em$/;function b2(c,e){const t=parseFloat(c);return CS.test(c)?t*e:t}function Gh(c,e,t,o){if(!Array.isArray(e))return 0;const l=e.length;if(!l)return 0;let d=e[0];const f=b2(d.maxFontSize,t)||t;let v=0;const x=b2(o,t);for(let A=1;A<l;A+=1){d=e[A];const P=b2(d.lineHeight,t)||x;v+=P}const w=b2(d.maxFontSize,t)||t;let _;switch(c){case"middle":_=f/2-.15*w-v/2;break;case"bottom":_=-(.25*w)-v;break;default:case"top":_=.8*f;break}return _}function x2(c,e,t={}){e=DP(e);const o=t.eol;let l=t.textPath;const d=t.textVerticalAnchor,f=d==="middle"||d==="bottom"||d==="top";let v=t.x;v===void 0&&(v=c.getAttribute("x")||0);const x=t.includeAnnotationIndices;let w=t.annotations;w&&!Array.isArray(w)&&(w=[w]);const _=t.lineHeight,A=_==="auto",P=A?"1.5em":_||"1em";cy(c),go(c,{"xml:space":"preserve",display:e||t.displayEmpty?null:"none"});const V=go(c,"font-size");let q=parseFloat(V);q||(q=16,(f||w)&&!V&&go(c,"font-size",`${q}`));let te;l?(typeof l=="string"&&(l={d:l}),te=TM(l,c)):te=document.createDocumentFragment();let ge,_e=0,ke;const Se=e.split(`
`),je=[],nt=Se.length-1;for(let It=0;It<=nt;It+=1){ge=P;let Jt="v-line";const Un=wc("tspan");let An,On=Se[It];if(On)if(w){const Zn=fS(On,w,{offset:-_e,includeAnnotationIndices:x});An=MM(Un,Zn,{eol:It!==nt&&o,baseSize:q,lineHeight:A?null:P,includeAnnotationIndices:x});const si=An.lineHeight;si&&A&&It!==0&&(ge=si),It===0&&(ke=An.maxFontSize*.8)}else o&&It!==nt&&(On+=o),Un.textContent=On;else{Un.textContent="-",Jt+=" v-empty-line";const Zn=Un.style;Zn.fillOpacity=0,Zn.strokeOpacity=0,w&&(An={})}An&&je.push(An),It>0&&Un.setAttribute("dy",ge),(It>0||l)&&Un.setAttribute("x",v),Un.className.baseVal=Jt,te.appendChild(Un),_e+=On.length+1}if(f)if(w)ge=Gh(d,je,q,P);else if(d==="top")ge="0.8em";else{let It;switch(nt>0?(It=parseFloat(P)||1,It*=nt,CS.test(P)||(It/=q)):It=0,d){case"middle":ge=`${.3-It/2}em`;break;case"bottom":ge=`${-It-.3}em`;break;default:break}}else d===0?ge="0em":d?ge=d:(ge=0,c.getAttribute("y")==null&&c.setAttribute("y",`${ke||"0.8em"}`));te.firstChild.setAttribute("dy",ge),c.appendChild(te)}function FP(c,e,t,o){const l=[],d=[];if(e!=null){const f=c.split(e);if(l.push(...f),typeof e=="string")for(let v=0,x=f.length-1;v<x;v+=1)d.push(e);else{const v=c.match(new RegExp(e,"g"));for(let x=0,w=f.length-1;x<w;x+=1)d.push(v?v[x]:"")}}else{let f="";for(let v=0,x=c.length;v<x;v+=1){const w=c[v];w===" "?(l.push(f),d.push(" "),f=""):w.match(/[^\x00-\xff]/)?(f.length&&(l.push(f),d.push("")),l.push(w),d.push(""),f=""):f+=w}f.length&&l.push(f)}for(let f=0;f<l.length;f+=1){const v=l[f];if(v.indexOf(t)>=0&&v.length>1){const x=v.split(t);for(let A=0,P=x.length-1;A<P;A+=1)x.splice(2*A+1,0,t);const w=x.filter(A=>A!=="");l.splice(f,1,...w);const _=w.map(()=>"");_.pop(),d.splice(f,0,..._)}}for(let f=0;f<l.length;f+=1){const v=l[f],x=v.search(o);x>0&&x<v.length-1&&(l.splice(f,1,v.substring(0,x+1),v.substring(x+1)),d.splice(f,0,""))}return{words:l,separators:d}}function wS(c,e,t={},o={}){const l=e.width,d=e.height,f=o.svgDocument||wc("svg"),v=wc("text"),x=wc("tspan"),w=document.createTextNode("");go(v,t),v.appendChild(x),v.style.opacity="0",v.style.display="block",x.style.display="block",x.appendChild(w),f.appendChild(v);const _=f.parentNode==null;_&&document.body.appendChild(f);const A=o.eol||`
`,P=o.separator||" ",V=o.hyphen?new RegExp(o.hyphen):/[^\w\d]/,q=o.breakWord!==!1,te=[],ge={};let _e=[],ke,Se,je;const{words:nt,separators:wt}=FP(c,o.separator,A,V);for(let It=0,Jt=0,Un=nt.length;It<Un;It+=1){const An=nt[It];if(An){if(An===A){te[Jt]=!0,Jt+=1,_e[Jt]="";continue}if(_e[Jt]!=null?(je=wt[It-1]||"",w.data=`${_e[Jt]}${je}${An}`):w.data=An,x.getComputedTextLength()<=l)_e[Jt]=w.data,ge[Jt]=wt[It],ke&&(te[Jt]=!0,Jt+=1,ke=0);else{if(q){if(!_e[Jt]||ke){const On=!!ke,Zn=An.length===1;if(ke=An.length-1,On||Zn){if(Zn){if(!_e[Jt]){_e=[];break}nt.splice(It,2,An+nt[It+1]),wt.splice(It+1,1),te[Jt]=!0,Jt+=1,Un-=1,It-=1;continue}nt[It]=An.substring(0,ke),nt[It+1]=An.substring(ke)+nt[It+1]}else nt.splice(It,1,An.substring(0,ke),An.substring(ke)),wt.splice(It,0,""),Un+=1,Jt&&!te[Jt-1]&&(Jt-=1);It-=1;continue}}else if(!_e[Jt]){_e[Jt]=An,te[Jt]=!0,Jt+=1;continue}Jt+=1,It-=1}if(d!=null){if(Se==null){let On;t.lineHeight==="auto"?On={value:1.5,unit:"em"}:On=ZE(t.lineHeight,["em"])||{value:1,unit:"em"},Se=On.value,On.unit==="em"&&(Le.IS_FIREFOX?Se*=x.getBBox().height:Se*=v.getBBox().height)}if(Se*_e.length>d){const On=Math.floor(d/Se)-1,Zn=_e[On],si=_e[On+1];if(_e.splice(On+1),Zn==null)break;let Wr=o.ellipsis;if(!Wr)break;typeof Wr!="string"&&(Wr="\u2026");let Wt=Zn;si&&q&&(Wt+=je+si);let Ln=Wt.length,jr,Do;do{if(Do=Wt[Ln],jr=Wt.substring(0,Ln),Do?Do.match(P)&&(jr+=Do):jr+=ge[On],jr+=Wr,w.data=jr,x.getComputedTextLength()<=l){_e[On]=jr;break}Ln-=1}while(Ln>=0);break}}}}return id(_?f:v),_e.join(A)}const C2=.551784;function nl(c,e,t=NaN){const o=c.getAttribute(e);if(o==null)return t;const l=parseFloat(o);return Number.isNaN(l)?t:l}function nc(c,e=1){const t=c.getTotalLength(),o=[];let l=0,d;for(;l<t;)d=c.getPointAtLength(l),o.push({distance:l,x:d.x,y:d.y}),l+=e;return o}function OM(c){return["M",nl(c,"x1"),nl(c,"y1"),"L",nl(c,"x2"),nl(c,"y2")].join(" ")}function PM(c){const e=w2(c);return e.length===0?null:`${NM(e)} Z`}function DM(c){const e=w2(c);return e.length===0?null:NM(e)}function NM(c){return`M ${c.map(t=>`${t.x} ${t.y}`).join(" L")}`}function w2(c){const e=[],t=c.points;if(t)for(let o=0,l=t.numberOfItems;o<l;o+=1)e.push(t.getItem(o));return e}function IM(c){const e=nl(c,"cx",0),t=nl(c,"cy",0),o=nl(c,"r"),l=o*C2;return["M",e,t-o,"C",e+l,t-o,e+o,t-l,e+o,t,"C",e+o,t+l,e+l,t+o,e,t+o,"C",e-l,t+o,e-o,t+l,e-o,t,"C",e-o,t-l,e-l,t-o,e,t-o,"Z"].join(" ")}function RM(c){const e=nl(c,"cx",0),t=nl(c,"cy",0),o=nl(c,"rx"),l=nl(c,"ry")||o,d=o*C2,f=l*C2;return["M",e,t-l,"C",e+d,t-l,e+o,t-f,e+o,t,"C",e+o,t+f,e+d,t+l,e,t+l,"C",e-d,t+l,e-o,t+f,e-o,t,"C",e-o,t-f,e-d,t-l,e,t-l,"Z"].join(" ")}function kM(c){return ES({x:nl(c,"x",0),y:nl(c,"y",0),width:nl(c,"width",0),height:nl(c,"height",0),rx:nl(c,"rx",0),ry:nl(c,"ry",0)})}function ES(c){let e;const t=c.x,o=c.y,l=c.width,d=c.height,f=Math.min(c.rx||c["top-rx"]||0,l/2),v=Math.min(c.rx||c["bottom-rx"]||0,l/2),x=Math.min(c.ry||c["top-ry"]||0,d/2),w=Math.min(c.ry||c["bottom-ry"]||0,d/2);return f||v||x||w?e=["M",t,o+x,"v",d-x-w,"a",v,w,0,0,0,v,w,"h",l-2*v,"a",v,w,0,0,0,v,-w,"v",-(d-w-x),"a",f,x,0,0,0,-f,-x,"h",-(l-2*f),"a",f,x,0,0,0,-f,x,"Z"]:e=["M",t,o,"H",t+l,"V",o+d,"H",t,"V",o,"Z"],e.join(" ")}function SS(c){const e=wc("path");go(e,go(c));const t=_S(c);return t&&e.setAttribute("d",t),e}function _S(c){const e=c.tagName.toLowerCase();switch(e){case"path":return c.getAttribute("d");case"line":return OM(c);case"polygon":return PM(c);case"polyline":return DM(c);case"ellipse":return RM(c);case"circle":return IM(c);case"rect":return kM(c);default:break}throw new Error(`"${e}" cannot be converted to svg path element.`)}function LM(c,e,t,o){const l=2*Math.PI-1e-6,d=c,f=e;let v=t,x=o;if(x<v){const te=v;v=x,x=te}const w=x-v,_=w<Math.PI?"0":"1",A=Math.cos(v),P=Math.sin(v),V=Math.cos(x),q=Math.sin(x);return w>=l?d?`M0,${f}A${f},${f} 0 1,1 0,${-f}A${f},${f} 0 1,1 0,${f}M0,${d}A${d},${d} 0 1,0 0,${-d}A${d},${d} 0 1,0 0,${d}Z`:`M0,${f}A${f},${f} 0 1,1 0,${-f}A${f},${f} 0 1,1 0,${f}Z`:d?`M${f*A},${f*P}A${f},${f} 0 ${_},1 ${f*V},${f*q}L${d*V},${d*q}A${d},${d} 0 ${_},0 ${d*A},${d*P}Z`:`M${f*A},${f*P}A${f},${f} 0 ${_},1 ${f*V},${f*q}L0,0Z`}const E2=wc("svg"),BP=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,PC=/[ ,]+/,zP=/^(\w+)\((.*)\)/;function AS(c,e){const t=E2.createSVGPoint();return t.x=c,t.y=e,t}function rl(c){const e=E2.createSVGMatrix();if(c!=null){const t=c,o=e;for(const l in t)o[l]=t[l]}return e}function fy(c){return c!=null?(c instanceof DOMMatrix||(c=rl(c)),E2.createSVGTransformFromMatrix(c)):E2.createSVGTransform()}function py(c){let e=rl();const t=c!=null&&c.match(BP);if(!t)return e;for(let o=0,l=t.length;o<l;o+=1){const f=t[o].match(zP);if(f){let v,x,w,_,A,P=rl();const V=f[2].split(PC);switch(f[1].toLowerCase()){case"scale":v=parseFloat(V[0]),x=V[1]===void 0?v:parseFloat(V[1]),P=P.scaleNonUniform(v,x);break;case"translate":w=parseFloat(V[0]),_=parseFloat(V[1]),P=P.translate(w,_);break;case"rotate":A=parseFloat(V[0]),w=parseFloat(V[1])||0,_=parseFloat(V[2])||0,w!==0||_!==0?P=P.translate(w,_).rotate(A).translate(-w,-_):P=P.rotate(A);break;case"skewx":A=parseFloat(V[0]),P=P.skewX(A);break;case"skewy":A=parseFloat(V[0]),P=P.skewY(A);break;case"matrix":P.a=parseFloat(V[0]),P.b=parseFloat(V[1]),P.c=parseFloat(V[2]),P.d=parseFloat(V[3]),P.e=parseFloat(V[4]),P.f=parseFloat(V[5]);break;default:continue}e=e.multiply(P)}}return e}function h0(c){const e=c||{},t=e.a!=null?e.a:1,o=e.b!=null?e.b:0,l=e.c!=null?e.c:0,d=e.d!=null?e.d:1,f=e.e!=null?e.e:0,v=e.f!=null?e.f:0;return`matrix(${t},${o},${l},${d},${f},${v})`}function Xd(c){let e,t,o;if(c){const d=PC;if(c.trim().indexOf("matrix")>=0){const f=py(c),v=Fh(f);e=[v.translateX,v.translateY],t=[v.rotation],o=[v.scaleX,v.scaleY];const x=[];(e[0]!==0||e[1]!==0)&&x.push(`translate(${e.join(",")})`),(o[0]!==1||o[1]!==1)&&x.push(`scale(${o.join(",")})`),t[0]!==0&&x.push(`rotate(${t[0]})`),c=x.join(" ")}else{const f=c.match(/translate\((.*?)\)/);f&&(e=f[1].split(d));const v=c.match(/rotate\((.*?)\)/);v&&(t=v[1].split(d));const x=c.match(/scale\((.*?)\)/);x&&(o=x[1].split(d))}}const l=o&&o[0]?parseFloat(o[0]):1;return{raw:c||"",translation:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotation:{angle:t&&t[0]?parseInt(t[0],10):0,cx:t&&t[1]?parseInt(t[1],10):void 0,cy:t&&t[2]?parseInt(t[2],10):void 0},scale:{sx:l,sy:o&&o[1]?parseFloat(o[1]):l}}}function S2(c,e){const t=e.x*c.a+e.y*c.c+0,o=e.x*c.b+e.y*c.d+0;return{x:t,y:o}}function Fh(c){const e=S2(c,{x:0,y:1}),t=S2(c,{x:1,y:0}),o=180/Math.PI*Math.atan2(e.y,e.x)-90,l=180/Math.PI*Math.atan2(t.y,t.x);return{skewX:o,skewY:l,translateX:c.e,translateY:c.f,scaleX:Math.sqrt(c.a*c.a+c.b*c.b),scaleY:Math.sqrt(c.c*c.c+c.d*c.d),rotation:o}}function Av(c){let e,t,o,l;return c?(e=c.a==null?1:c.a,l=c.d==null?1:c.d,t=c.b,o=c.c):e=l=1,{sx:t?Math.sqrt(e*e+t*t):e,sy:o?Math.sqrt(o*o+l*l):l}}function TS(c){let e={x:0,y:1};return c&&(e=S2(c,e)),{angle:Yi.normalize(Yi.toDeg(Math.atan2(e.y,e.x))-90)}}function _2(c){return{tx:c&&c.e||0,ty:c&&c.f||0}}function il(c,e){const t=AS(c.x,c.y).matrixTransform(e);return new $e(t.x,t.y)}function Kp(c,e){return new mr(il(c.start,e),il(c.end,e))}function MS(c,e){let t=c instanceof fa?c.points:c;return Array.isArray(t)||(t=[]),new fa(t.map(o=>il(o,e)))}function rc(c,e){const t=E2.createSVGPoint();t.x=c.x,t.y=c.y;const o=t.matrixTransform(e);t.x=c.x+c.width,t.y=c.y;const l=t.matrixTransform(e);t.x=c.x+c.width,t.y=c.y+c.height;const d=t.matrixTransform(e);t.x=c.x,t.y=c.y+c.height;const f=t.matrixTransform(e),v=Math.min(o.x,l.x,d.x,f.x),x=Math.max(o.x,l.x,d.x,f.x),w=Math.min(o.y,l.y,d.y,f.y),_=Math.max(o.y,l.y,d.y,f.y);return new zn(v,w,x-v,_-w)}var OS=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};function DC(c,e,t){let o;const l=c.ownerSVGElement;if(!l)return new zn(0,0,0,0);try{o=c.getBBox()}catch(f){o={x:c.clientLeft,y:c.clientTop,width:c.clientWidth,height:c.clientHeight}}if(e)return zn.create(o);const d=Bh(c,t||l);return rc(o,d)}function pa(c,e={}){let t;if(!c.ownerSVGElement||!Hf(c)){if($d(c)){const{left:f,top:v,width:x,height:w}=kC(c);return new zn(f,v,x,w)}return new zn(0,0,0,0)}let l=e.target;if(!e.recursive){try{t=c.getBBox()}catch(v){t={x:c.clientLeft,y:c.clientTop,width:c.clientWidth,height:c.clientHeight}}if(!l)return zn.create(t);const f=Bh(c,l);return rc(t,f)}{const f=c.childNodes,v=f.length;if(v===0)return pa(c,{target:l});l||(l=c);for(let x=0;x<v;x+=1){const w=f[x];let _;w.childNodes.length===0?_=pa(w,{target:l}):_=pa(w,{target:l,recursive:!0}),t?t=t.union(_):t=_}return t}}function PS(c){let e=c,t=e?e.tagName.toLowerCase():"";for(;t==="g";)e=e.firstElementChild,t=e?e.tagName.toLowerCase():"";const o=f=>{const v=e.getAttribute(f),x=v?parseFloat(v):0;return Number.isNaN(x)?0:x};let l,d;switch(t){case"rect":d=new zn(o("x"),o("y"),o("width"),o("height"));break;case"circle":l=o("r"),d=new zn(o("cx")-l,o("cy")-l,2*l,2*l);break;default:break}return d}function DS(c,e){let t=rl();if(Hf(e)&&Hf(c)){let o=c;const l=[];for(;o&&o!==e;){const d=o.getAttribute("transform")||null,f=py(d);l.push(f),o=o.parentNode}l.reverse().forEach(d=>{t=t.multiply(d)})}return t}function Bh(c,e){if(Hf(e)&&Hf(c)){const t=e.getScreenCTM(),o=c.getScreenCTM();if(t&&o)return t.inverse().multiply(o)}return rl()}function Bo(c,e,t){const o=c instanceof SVGSVGElement?c:c.ownerSVGElement,l=o.createSVGPoint();l.x=e,l.y=t;try{const d=o.getScreenCTM(),f=l.matrixTransform(d.inverse()),v=Bh(c,o).inverse();return f.matrixTransform(v)}catch(d){return l}}function Tv(c){const e=t=>{const o=c.getAttribute(t),l=o?parseFloat(o):0;return Number.isNaN(l)?0:l};switch(c instanceof SVGElement&&c.nodeName.toLowerCase()){case"rect":return new zn(e("x"),e("y"),e("width"),e("height"));case"circle":return new od(e("cx"),e("cy"),e("r"),e("r"));case"ellipse":return new od(e("cx"),e("cy"),e("rx"),e("ry"));case"polyline":{const t=w2(c);return new fa(t)}case"polygon":{const t=w2(c);return t.length>1&&t.push(t[0]),new fa(t)}case"path":{let t=c.getAttribute("d");return Vr.isValid(t)||(t=Vr.normalize(t)),Vr.parse(t)}case"line":return new mr(e("x1"),e("y1"),e("x2"),e("y2"));default:break}return pa(c)}function f0(c,e,t){const o=c instanceof SVGSVGElement?c:c.ownerSVGElement;t=t||o;const l=pa(t),d=l.getCenter();if(!l.intersectsWithLineFromCenterToPoint(e))return null;let f=null;const v=c.tagName.toLowerCase();if(v==="rect"){const x=new zn(parseFloat(c.getAttribute("x")||"0"),parseFloat(c.getAttribute("y")||"0"),parseFloat(c.getAttribute("width")||"0"),parseFloat(c.getAttribute("height")||"0")),w=Bh(c,t),_=Fh(w),A=o.createSVGTransform();A.setRotate(-_.rotation,d.x,d.y);const P=rc(x,A.matrix.multiply(w));f=zn.create(P).intersectsWithLineFromCenterToPoint(e,_.rotation)}else if(v==="path"||v==="polygon"||v==="polyline"||v==="circle"||v==="ellipse"){const x=v==="path"?c:SS(c),w=nc(x);let _=1/0,A=[];for(let P=0,V=w.length;P<V;P+=1){const q=w[P];let te=AS(q.x,q.y);te=te.matrixTransform(Bh(c,t));const ge=$e.create(te),_e=ge.distance(d),ke=ge.distance(e)*1.1,Se=_e+ke;Se<_?(_=Se,A=[{sample:q,refDistance:ke}]):Se<_+1&&A.push({sample:q,refDistance:ke})}A.sort((P,V)=>P.refDistance-V.refDistance),A[0]&&(f=$e.create(A[0].sample))}return f}function zh(c,e){return NC(c,e,"animate")}function Wf(c,e){return NC(c,e,"animateTransform")}function NC(c,e,t){const o=wc(t);c.appendChild(o);try{return IC(o,e)}catch(l){}return()=>{}}function IC(c,e){const{start:t,complete:o,repeat:l}=e,d=OS(e,["start","complete","repeat"]);go(c,d),t&&c.addEventListener("beginEvent",t),o&&c.addEventListener("endEvent",o),l&&c.addEventListener("repeatEvent",l);const f=c;return setTimeout(()=>{f.beginElement()}),()=>f.endElement()}function RC(c,e,t){const o=_v(t),l=wc("animateMotion"),d=wc("mpath");go(d,{"xlink:href":`#${o}`}),l.appendChild(d),c.appendChild(l);try{return IC(l,e)}catch(f){if(document.documentElement.getAttribute("smiling")==="fake"){const v=l;v.animators=[];const x=window,w=v.getAttribute("id");w&&(x.id2anim[w]=v);const _=x.getTargets(v);for(let A=0,P=_.length;A<P;A+=1){const V=_[A],q=new x.Animator(v,V,A);x.animators.push(q),v.animators[A]=q,q.register()}}}return()=>{}}function kC(c){let e=0,t=0,o=0,l=0;if(c){let d=c;for(;d;)e+=d.offsetLeft,t+=d.offsetTop,d=d.offsetParent,d&&(e+=parseInt(EC(d,"borderLeft"),10),t+=parseInt(EC(d,"borderTop"),10));o=c.offsetWidth,l=c.offsetHeight}return{left:e,top:t,width:o,height:l}}function Xf(c,e,t={}){if(e==null)return py(go(c,"transform"));if(t.absolute){c.setAttribute("transform",h0(e));return}const o=c.transform,l=fy(e);o.baseVal.appendItem(l)}function A2(c,e,t=0,o={}){let l=go(c,"transform");const d=Xd(l);if(e==null)return d.translation;l=d.raw,l=l.replace(/translate\([^)]*\)/g,"").trim();const f=o.absolute?e:d.translation.tx+e,v=o.absolute?t:d.translation.ty+t,x=`translate(${f},${v})`;c.setAttribute("transform",`${x} ${l}`.trim())}function qp(c,e,t,o,l={}){let d=go(c,"transform");const f=Xd(d);if(e==null)return f.rotation;d=f.raw,d=d.replace(/rotate\([^)]*\)/g,"").trim(),e%=360;const v=l.absolute?e:f.rotation.angle+e,x=t!=null&&o!=null?`,${t},${o}`:"",w=`rotate(${v}${x})`;c.setAttribute("transform",`${d} ${w}`.trim())}function Uh(c,e,t){let o=go(c,"transform");const l=Xd(o);if(e==null)return l.scale;t=t==null?e:t,o=l.raw,o=o.replace(/scale\([^)]*\)/g,"").trim();const d=`scale(${e},${t})`;c.setAttribute("transform",`${o} ${d}`.trim())}function Zd(c,e,t,o){const l=$e.create(e),d=$e.create(t);o||(o=c instanceof SVGSVGElement?c:c.ownerSVGElement);const f=Uh(c);c.setAttribute("transform","");const v=pa(c,{target:o}).scale(f.sx,f.sy),x=fy();x.setTranslate(-v.x-v.width/2,-v.y-v.height/2);const w=fy(),_=l.angleBetween(d,l.clone().translate(1,0));_&&w.setRotate(_,0,0);const A=fy(),P=l.clone().move(d,v.width/2);A.setTranslate(2*l.x-P.x,2*l.y-P.y);const V=Bh(c,o),q=fy();q.setMatrix(A.matrix.multiply(w.matrix.multiply(x.matrix.multiply(V.scale(f.sx,f.sy))))),c.setAttribute("transform",h0(q.matrix))}class Wn{constructor(e,t,o){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=Le.isEventSupported("wheel")?"wheel":"mousewheel",this.target=e,this.onWheelCallback=t,this.onWheelGuard=o,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){Le.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.onWheel,{passive:!1}):G()(this.target).on("mousewheel",this.onWheel)}disable(){Le.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.onWheel):G()(this.target).off("mousewheel")}onWheel(e){if(this.onWheelGuard!=null&&!this.onWheelGuard(e))return;this.deltaX+=e.deltaX,this.deltaY+=e.deltaY,e.preventDefault();let t;(this.deltaX!==0||this.deltaY!==0)&&(e.stopPropagation(),t=!0),t===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(e)}))}didWheel(e){this.animationFrameId=0,this.onWheelCallback(e,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}const NS=dr.isVector,GM=dr.create,FM=dr.createVectors;function IS(c,e=60){let t=null;return(...o)=>{t&&clearTimeout(t),t=window.setTimeout(()=>{c.apply(this,o)},e)}}function BM(c){let e=null,t=[];const o=()=>{if(getComputedStyle(c).position==="static"){const w=c.style;w.position="relative"}const x=document.createElement("object");return x.onload=()=>{x.contentDocument.defaultView.addEventListener("resize",l),l()},x.style.display="block",x.style.position="absolute",x.style.top="0",x.style.left="0",x.style.height="100%",x.style.width="100%",x.style.overflow="hidden",x.style.pointerEvents="none",x.style.zIndex="-1",x.style.opacity="0",x.setAttribute("tabindex","-1"),x.type="text/html",c.appendChild(x),x.data="about:blank",x},l=IS(()=>{t.forEach(x=>x(c))}),d=x=>{e||(e=o()),t.indexOf(x)===-1&&t.push(x)},f=()=>{e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",l),e.parentNode.removeChild(e),e=null,t=[])};return{element:c,bind:d,destroy:f,unbind:x=>{const w=t.indexOf(x);w!==-1&&t.splice(w,1),t.length===0&&e&&f()}}}function zM(c){let e=null,t=[];const o=IS(()=>{t.forEach(x=>{x(c)})}),l=()=>{const x=new ResizeObserver(o);return x.observe(c),o(),x},d=x=>{e||(e=l()),t.indexOf(x)===-1&&t.push(x)},f=()=>{e&&(e.disconnect(),t=[],e=null)};return{element:c,bind:d,destroy:f,unbind:x=>{const w=t.indexOf(x);w!==-1&&t.splice(w,1),t.length===0&&e&&f()}}}const UM=typeof ResizeObserver!="undefined"?zM:BM;var T2;(function(c){const e=new WeakMap;function t(l){let d=e.get(l);return d||(d=UM(l),e.set(l,d),d)}function o(l){l.destroy(),e.delete(l.element)}c.bind=(l,d)=>{const f=t(l);return f.bind(d),()=>f.unbind(d)},c.clear=l=>{const d=t(l);o(d)}})(T2||(T2={}));var M2;(function(c){const e=[],t=16.666666666666668,o=[];let l=0;const d=()=>performance.now(),f=_=>_[0],v=_=>o.push(_)===1&&x(),x=(()=>{const _=()=>{var A,P;return(P=(A=o.splice(0,o.length))[0])===null||P===void 0?void 0:P.call(A)};if(typeof MessageChannel!="undefined"){const{port1:A,port2:P}=new MessageChannel;return A.onmessage=_,()=>P.postMessage(null)}return()=>setTimeout(_)})(),w=()=>{l=d()+t;let _=f(e);for(;_&&!c.shouldYield();){const{callback:A,data:P}=_;_.callback=null;const V=A&&A(P);V?_.callback=V:e.shift(),_=f(e)}_&&v(w)};c.scheduleTask=(_,A)=>{const P={callback:_,data:A};e.push(P),v(w)},c.shouldYield=()=>{var _,A;return((A=(_=navigator)===null||_===void 0?void 0:_.scheduling)===null||A===void 0?void 0:A.isInputPending())||d()>=l}})(M2||(M2={}));class Vs{constructor(e){this.options=Object.assign({},e),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(e,t,o=!1){if(typeof e=="object"){Object.keys(e).forEach(f=>{this.register(f,e[f],t)});return}this.exist(e)&&!o&&!Le.isApplyingHMR()&&this.onDuplicated(e);const l=this.options.process,d=l?ir(l,this,e,t):t;return this.data[e]=d,d}unregister(e){const t=e?this.data[e]:null;return delete this.data[e],t}get(e){return e?this.data[e]:null}exist(e){return e?this.data[e]!=null:!1}onDuplicated(e){try{throw this.options.onConflict&&ir(this.options.onConflict,this,e),new Error(`${bv(this.options.type)} with name '${e}' already registered.`)}catch(t){throw t}}onNotFound(e,t){throw new Error(this.getSpellingSuggestion(e,t))}getSpellingSuggestion(e,t){const o=this.getSpellingSuggestionForName(e),l=t?`${t} ${iM(this.options.type)}`:this.options.type;return`${bv(l)} with name '${e}' does not exist.${o?` Did you mean '${o}'?`:""}`}getSpellingSuggestionForName(e){return sM(e,Object.keys(this.data),t=>t)}}(function(c){function e(t){return new c(t)}c.create=e})(Vs||(Vs={}));const VM={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},jM={},RS={position:O2("x","width","origin")},kS={position:O2("y","height","origin")},HM={position:O2("x","width","corner")},$M={position:O2("y","height","corner")},LS={set:Jp("width","width")},GS={set:Jp("height","height")},WM={set:Jp("rx","width")},XM={set:Jp("ry","height")},FS={set:(c=>{const e=Jp(c,"width"),t=Jp(c,"height");return function(o,l){const d=l.refBBox,f=d.height>d.width?e:t;return ir(f,this,o,l)}})("r")},ZM={set(c,{refBBox:e}){let t=parseFloat(c);const o=Hd(c);o&&(t/=100);const l=Math.sqrt(e.height*e.height+e.width*e.width);let d;return Number.isFinite(t)&&(o||t>=0&&t<=1?d=t*l:d=Math.max(t+l,0)),{r:d}}},YM={set:Jp("cx","width")},KM={set:Jp("cy","height")},BS={set:GC({resetOffset:!0})},qM={set:GC({resetOffset:!1})},zS={set:FC({resetOffset:!0})},JM={set:FC({resetOffset:!1})},QM=FS,eO=BS,Ls=zS,UP=RS,tO=kS,nO=LS,rO=GS;function O2(c,e,t){return(o,{refBBox:l})=>{if(o==null)return null;let d=parseFloat(o);const f=Hd(o);f&&(d/=100);let v;if(Number.isFinite(d)){const w=l[t];f||d>0&&d<1?v=w[c]+l[e]*d:v=w[c]+d}const x=new $e;return x[c]=v||0,x}}function Jp(c,e){return function(t,{refBBox:o}){let l=parseFloat(t);const d=Hd(t);d&&(l/=100);const f={};if(Number.isFinite(l)){const v=d||l>=0&&l<=1?l*o[e]:Math.max(l+o[e],0);f[c]=v}return f}}function LC(c,e){const t="x6-shape",o=e&&e.resetOffset;return function(l,{view:d,elem:f,refBBox:v}){const x=d.$(f);let w=x.data(t);if(!w||w.value!==l){const _e=c(l);w={value:l,shape:_e,shapeBBox:_e.bbox()},x.data(t,w)}const _=w.shape.clone(),A=w.shapeBBox.clone(),P=A.getOrigin(),V=v.getOrigin();A.x=V.x,A.y=V.y;const q=v.getMaxScaleToFit(A,V),te=A.width===0||v.width===0?1:q.sx,ge=A.height===0||v.height===0?1:q.sy;return _.scale(te,ge,P),o&&_.translate(-P.x,-P.y),_}}function GC(c){function e(o){return Vr.parse(o)}const t=LC(e,c);return(o,l)=>({d:t(o,l).serialize()})}function FC(c){const e=LC(t=>new fa(t),c);return(t,o)=>({points:e(t,o).serialize()})}const US={qualify:ec,set(c,{view:e}){return`url(#${e.graph.defineGradient(c)})`}},VS={qualify:ec,set(c,{view:e}){const t=e.cell,o=Object.assign({},c);if(t.isEdge()&&o.type==="linearGradient"){const l=e,d=l.sourcePoint,f=l.targetPoint;o.id=`gradient-${o.type}-${t.id}`,o.attrs=Object.assign(Object.assign({},o.attrs),{x1:d.x,y1:d.y,x2:f.x,y2:f.y,gradientUnits:"userSpaceOnUse"}),e.graph.defs.remove(o.id)}return`url(#${e.graph.defineGradient(o)})`}},gy={qualify(c,{attrs:e}){return e.textWrap==null||!ec(e.textWrap)},set(c,{view:e,elem:t,attrs:o}){const l="x6-text",d=e.$(t),f=d.data(l),v=A=>{try{return JSON.parse(A)}catch(P){return A}},x={x:o.x,eol:o.eol,annotations:v(o.annotations),textPath:v(o["text-path"]||o.textPath),textVerticalAnchor:o["text-vertical-anchor"]||o.textVerticalAnchor,displayEmpty:(o["display-empty"]||o.displayEmpty)==="true",lineHeight:o["line-height"]||o.lineHeight},w=o["font-size"]||o.fontSize,_=JSON.stringify([c,x]);if(w&&t.setAttribute("font-size",w),f==null||f!==_){const A=x.textPath;if(A!=null&&typeof A=="object"){const P=A.selector;if(typeof P=="string"){const V=e.find(P)[0];V instanceof SVGPathElement&&(_v(V),x.textPath=Object.assign({"xlink:href":`#${V.id}`},A))}}x2(t,`${c}`,x),d.data(l,_)}}},jS={qualify:ec,set(c,{view:e,elem:t,attrs:o,refBBox:l}){const d=c,f=d.width||0;Hd(f)?l.width*=parseFloat(f)/100:f<=0?l.width+=f:l.width=f;const v=d.height||0;Hd(v)?l.height*=parseFloat(v)/100:v<=0?l.height+=v:l.height=v;let x,w=d.text;w==null&&(w=o.text),w!=null?x=wS(`${w}`,l,{"font-weight":o["font-weight"]||o.fontWeight,"font-size":o["font-size"]||o.fontSize,"font-family":o["font-family"]||o.fontFamily,lineHeight:o.lineHeight},{svgDocument:e.graph.view.svg,ellipsis:d.ellipsis,hyphen:d.hyphen,breakWord:d.breakWord}):x="",ir(gy.set,this,x,{view:e,elem:t,attrs:o,refBBox:l,cell:e.cell})}},p0=(c,{attrs:e})=>e.text!==void 0,HS={qualify:p0},$S={qualify:p0},WS={qualify:p0},XS={qualify:p0},ZS={qualify:p0},YS={qualify:p0},KS={qualify(c,{elem:e}){return e instanceof SVGElement},set(c,{view:e,elem:t}){const o="x6-title",l=`${c}`,d=e.$(t),f=d.data(o);if(f==null||f!==l){d.data(o,l);const v=t.firstChild;if(v&&v.tagName.toUpperCase()==="TITLE"){const x=v;x.textContent=l}else{const x=document.createElementNS(t.namespaceURI,"title");x.textContent=l,t.insertBefore(x,v)}}}},BC={offset:zC("x","width","right")},qS={offset:zC("y","height","bottom")},JS={offset(c,{refBBox:e}){return c?{x:-e.x,y:-e.y}:{x:0,y:0}}};function zC(c,e,t){return(o,{refBBox:l})=>{const d=new $e;let f;return o==="middle"?f=l[e]/2:o===t?f=l[e]:typeof o=="number"&&Number.isFinite(o)?f=o>-1&&o<1?-l[e]*o:-o:Hd(o)?f=l[e]*parseFloat(o)/100:f=0,d[c]=-(l[c]+f),d}}const QS={qualify:ec,set(c,{view:e,elem:t}){e.$(t).css(c)}},e_={set(c,{view:e,elem:t}){e.$(t).html(`${c}`)}},t_={qualify:ec,set(c,{view:e}){return`url(#${e.graph.defineFilter(c)})`}},n_={set(c){return c!=null&&typeof c=="object"&&c.id?c.id:c}};function Zf(c,e,t){let o,l;typeof e=="object"?(o=e.x,l=e.y):(o=e,l=t);const d=Vr.parse(c),f=d.bbox();if(f){let v=-f.height/2-f.y,x=-f.width/2-f.x;typeof o=="number"&&(x-=o),typeof l=="number"&&(v-=l),d.translate(x,v)}return d.serialize()}var UC=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};const r_=c=>{var{size:e,width:t,height:o,offset:l,open:d}=c,f=UC(c,["size","width","height","offset","open"]);return g0({size:e,width:t,height:o,offset:l},d===!0,!0,void 0,f)},i_=c=>{var{size:e,width:t,height:o,offset:l,factor:d}=c,f=UC(c,["size","width","height","offset","factor"]);return g0({size:e,width:t,height:o,offset:l},!1,!1,d,f)};function g0(c,e,t,o=3/4,l={}){const d=c.size||10,f=c.width||d,v=c.height||d,x=new Vr,w={};if(e)x.moveTo(f,0).lineTo(0,v/2).lineTo(f,v),w.fill="none";else{if(x.moveTo(0,v/2),x.lineTo(f,0),!t){const _=ks(o,0,1);x.lineTo(f*_,v/2)}x.lineTo(f,v),x.close()}return Object.assign(Object.assign(Object.assign({},w),l),{tagName:"path",d:Zf(x.serialize(),{x:c.offset!=null?c.offset:-f/2})})}var o_=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};const s_=c=>{var{size:e,width:t,height:o,offset:l}=c,d=o_(c,["size","width","height","offset"]);const f=e||10,v=t||f,x=o||f,w=new Vr;return w.moveTo(0,x/2).lineTo(v/2,0).lineTo(v,x/2).lineTo(v/2,x).close(),Object.assign(Object.assign({},d),{tagName:"path",d:Zf(w.serialize(),l==null?-v/2:l)})};var a_=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};const l_=c=>{var{d:e,offsetX:t,offsetY:o}=c,l=a_(c,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},l),{tagName:"path",d:Zf(e,t,o)})};var P2=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};const c_=c=>{var{size:e,width:t,height:o,offset:l}=c,d=P2(c,["size","width","height","offset"]);const f=e||10,v=t||f,x=o||f,w=new Vr;return w.moveTo(0,0).lineTo(v,x).moveTo(0,x).lineTo(v,0),Object.assign(Object.assign({},d),{tagName:"path",fill:"none",d:Zf(w.serialize(),l||-v/2)})};var Qp=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};const iO=c=>{var{width:e,height:t,offset:o,open:l,flip:d}=c,f=Qp(c,["width","height","offset","open","flip"]);let v=t||6;const x=e||10,w=l===!0,_=d===!0,A=Object.assign(Object.assign({},f),{tagName:"path"});_&&(v=-v);const P=new Vr;return P.moveTo(0,v).lineTo(x,0),w?A.fill="none":(P.lineTo(x,v),P.close()),A.d=Zf(P.serialize(),{x:o||-x/2,y:v/2}),A};var u_=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};const d_=c=>{var{r:e}=c,t=u_(c,["r"]);const o=e||5;return Object.assign(Object.assign({cx:o},t),{tagName:"circle",r:o})},Yf=c=>{var{r:e}=c,t=u_(c,["r"]);const o=e||5,l=new Vr;return l.moveTo(o,0).lineTo(o,o*2),l.moveTo(0,o).lineTo(o*2,o),{children:[Object.assign(Object.assign({},d_({r:o})),{fill:"none"}),Object.assign(Object.assign({},t),{tagName:"path",d:Zf(l.serialize(),-o)})]}};var vy=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};const Kf=c=>{var{rx:e,ry:t}=c,o=vy(c,["rx","ry"]);const l=e||5,d=t||5;return Object.assign(Object.assign({cx:l},o),{tagName:"ellipse",rx:l,ry:d})};var ja;(function(c){c.presets=Z,c.registry=Vs.create({type:"marker"}),c.registry.register(c.presets,!0)})(ja||(ja={})),function(c){c.normalize=Zf}(ja||(ja={}));var my=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};function Vh(c){return typeof c=="string"||ec(c)}const yy={qualify:Vh,set(c,{view:e,attrs:t}){return qf("marker-start",c,e,t)}},D2={qualify:Vh,set(c,{view:e,attrs:t}){return qf("marker-end",c,e,t,{transform:"rotate(180)"})}},jh={qualify:Vh,set(c,{view:e,attrs:t}){return qf("marker-mid",c,e,t)}};function qf(c,e,t,o,l={}){const d=typeof e=="string"?{name:e}:e,{name:f,args:v}=d,x=my(d,["name","args"]);let w=x;if(f&&typeof f=="string"){const A=ja.registry.get(f);if(A)w=A(Object.assign(Object.assign({},x),v));else return ja.registry.onNotFound(f)}const _=Object.assign(Object.assign(Object.assign({},Ll(o,c)),l),w);return{[c]:`url(#${t.graph.defineMarker(_)})`}}function Ll(c,e){const t={},o=c.stroke;typeof o=="string"&&(t.stroke=o,t.fill=o);let l=c.strokeOpacity;if(l==null&&(l=c["stroke-opacity"]),l==null&&(l=c.opacity),l!=null&&(t["stroke-opacity"]=l,t["fill-opacity"]=l),e!=="marker-mid"){const d=parseFloat(c.strokeWidth||c["stroke-width"]);if(Number.isFinite(d)&&d>1){const f=Math.ceil(d/2);t.refX=e==="marker-start"?f:-f}}return t}const Xc=(c,{view:e})=>e.cell.isEdge(),Hh={qualify:Xc,set(c,e){var t,o,l,d;const f=e.view,v=c.reverse||!1,x=c.stubs||0;let w;if(Number.isFinite(x)&&x!==0)if(v){let _,A;const P=f.getConnectionLength()||0;x<0?(_=(P+x)/2,A=-x):(_=x,A=P-x*2);const V=f.getConnection();w=(d=(l=(o=(t=V==null?void 0:V.divideAtLength(_))===null||t===void 0?void 0:t[1])===null||o===void 0?void 0:o.divideAtLength(A))===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.serialize()}else{let _;x<0?_=((f.getConnectionLength()||0)+x)/2:_=x;const A=f.getConnection();if(A){const P=A.divideAtLength(_),V=A.divideAtLength(-_);P&&V&&(w=`${P[0].serialize()} ${V[1].serialize()}`)}}return{d:w||f.getConnectionPathData()}}},by={qualify:Xc,set:xy("getTangentAtLength",{rotate:!0})},oO={qualify:Xc,set:xy("getTangentAtLength",{rotate:!1})},VC={qualify:Xc,set:xy("getTangentAtRatio",{rotate:!0})},jC={qualify:Xc,set:xy("getTangentAtRatio",{rotate:!1})},sO=by,aO=VC;function xy(c,e){const t={x:1,y:0};return(o,l)=>{let d,f;const v=l.view,x=v[c](Number(o));return x?(f=e.rotate?x.vector().vectorAngle(t):0,d=x.start):(d=v.path.start,f=0),f===0?{transform:`translate(${d.x},${d.y}')`}:{transform:`translate(${d.x},${d.y}') rotate(${f})`}}}var ad;(function(c){function e(t,o,l){return!!(t!=null&&(typeof t=="string"||typeof t.qualify!="function"||ir(t.qualify,this,o,l)))}c.isValidDefinition=e})(ad||(ad={})),function(c){c.presets=Object.assign(Object.assign({},VM),ee),c.registry=Vs.create({type:"attribute definition"}),c.registry.register(c.presets,!0)}(ad||(ad={}));const lO={color:"#aaaaaa",thickness:1,markup:"rect",update(c,e){const t=e.thickness*e.sx,o=e.thickness*e.sy;go(c,{width:t,height:o,rx:t,ry:o,fill:e.color})}},cO={color:"#aaaaaa",thickness:1,markup:"rect",update(c,e){const t=e.sx<=1?e.thickness*e.sx:e.thickness;go(c,{width:t,height:t,rx:t,ry:t,fill:e.color})}},h_={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(c,e){let t;const o=e.width,l=e.height,d=e.thickness;o-d>=0&&l-d>=0?t=["M",o,0,"H0 M0 0 V0",l].join(" "):t="M 0 0 0 0",go(c,{d:t,stroke:e.color,"stroke-width":e.thickness})}},N2=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(c,e){let t;const o=e.width,l=e.height,d=e.thickness;o-d>=0&&l-d>=0?t=["M",o,0,"H0 M0 0 V0",l].join(" "):t="M 0 0 0 0",go(c,{d:t,stroke:e.color,"stroke-width":e.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(c,e){let t;const o=e.factor||1,l=e.width*o,d=e.height*o,f=e.thickness;l-f>=0&&d-f>=0?t=["M",l,0,"H0 M0 0 V0",d].join(" "):t="M 0 0 0 0",e.width=l,e.height=d,go(c,{d:t,stroke:e.color,"stroke-width":e.thickness})}}];class Jf{constructor(){this.patterns={},this.root=dr.create(iy(),{width:"100%",height:"100%"},[wc("defs")]).node}add(e,t){const o=this.root.childNodes[0];o&&o.appendChild(t),this.patterns[e]=t,dr.create("rect",{width:"100%",height:"100%",fill:`url(#${e})`}).appendTo(this.root)}get(e){return this.patterns[e]}has(e){return this.patterns[e]!=null}}(function(c){c.presets=Q,c.registry=Vs.create({type:"grid"}),c.registry.register(c.presets,!0)})(Jf||(Jf={}));function eg(c,e){return c!=null?c:e}function Cl(c,e){return c!=null&&Number.isFinite(c)?c:e}function uO(c={}){const e=eg(c.color,"blue"),t=Cl(c.width,1),o=Cl(c.margin,2),l=Cl(c.opacity,1),d=o,f=o+t;return`
    <filter>
      <feFlood flood-color="${e}" flood-opacity="${l}" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${f}" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${d}" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `.trim()}function ga(c={}){const e=eg(c.color,"red"),t=Cl(c.blur,0),o=Cl(c.width,1),l=Cl(c.opacity,1);return`
      <filter>
        <feFlood flood-color="${e}" flood-opacity="${l}" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${o}"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="${t}"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `.trim()}function dO(c={}){const e=Cl(c.x,2);return`
    <filter>
      <feGaussianBlur stdDeviation="${c.y!=null&&Number.isFinite(c.y)?[e,c.y]:e}"/>
    </filter>
  `.trim()}function hO(c={}){const e=Cl(c.dx,0),t=Cl(c.dy,0),o=eg(c.color,"black"),l=Cl(c.blur,4),d=Cl(c.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="${l}" dx="${e}" dy="${t}" flood-color="${o}" flood-opacity="${d}" />
       </filter>`.trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="${l}" />
         <feOffset dx="${e}" dy="${t}" result="offsetblur" />
         <feFlood flood-color="${o}" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="${d}" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`.trim()}function fO(c={}){const e=Cl(c.amount,1),t=.2126+.7874*(1-e),o=.7152-.7152*(1-e),l=.0722-.0722*(1-e),d=.2126-.2126*(1-e),f=.7152+.2848*(1-e),v=.0722-.0722*(1-e),x=.2126-.2126*(1-e),w=.0722+.9278*(1-e);return`
    <filter>
      <feColorMatrix type="matrix" values="${t} ${o} ${l} 0 0 ${d} ${f} ${v} 0 0 ${x} ${o} ${w} 0 0 0 0 0 1 0"/>
    </filter>
  `.trim()}function pO(c={}){const e=Cl(c.amount,1),t=.393+.607*(1-e),o=.769-.769*(1-e),l=.189-.189*(1-e),d=.349-.349*(1-e),f=.686+.314*(1-e),v=.168-.168*(1-e),x=.272-.272*(1-e),w=.534-.534*(1-e),_=.131+.869*(1-e);return`
      <filter>
        <feColorMatrix type="matrix" values="${t} ${o} ${l} 0 0 ${d} ${f} ${v} 0 0 ${x} ${w} ${_} 0 0 0 0 0 1 0"/>
      </filter>
    `.trim()}function gO(c={}){return`
      <filter>
        <feColorMatrix type="saturate" values="${1-Cl(c.amount,1)}"/>
      </filter>
    `.trim()}function vO(c={}){return`
      <filter>
        <feColorMatrix type="hueRotate" values="${Cl(c.angle,0)}"/>
      </filter>
    `.trim()}function mO(c={}){const e=Cl(c.amount,1),t=1-e;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="${e} ${t}"/>
          <feFuncG type="table" tableValues="${e} ${t}"/>
          <feFuncB type="table" tableValues="${e} ${t}"/>
        </feComponentTransfer>
      </filter>
    `.trim()}function yO(c={}){const e=Cl(c.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="${e}"/>
        <feFuncG type="linear" slope="${e}"/>
        <feFuncB type="linear" slope="${e}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}function bO(c={}){const e=Cl(c.amount,1),t=.5-e/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="${e}" intercept="${t}"/>
        <feFuncG type="linear" slope="${e}" intercept="${t}"/>
        <feFuncB type="linear" slope="${e}" intercept="${t}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}var v0;(function(c){c.presets=ue,c.registry=Vs.create({type:"filter"}),c.registry.register(c.presets,!0)})(v0||(v0={}));const f_=function(c){const e=document.createElement("canvas"),t=c.width,o=c.height;e.width=t*2,e.height=o;const l=e.getContext("2d");return l.drawImage(c,0,0,t,o),l.translate(2*t,0),l.scale(-1,1),l.drawImage(c,0,0,t,o),e},p_=function(c){const e=document.createElement("canvas"),t=c.width,o=c.height;e.width=t,e.height=o*2;const l=e.getContext("2d");return l.drawImage(c,0,0,t,o),l.translate(0,2*o),l.scale(1,-1),l.drawImage(c,0,0,t,o),e},g_=function(c){const e=document.createElement("canvas"),t=c.width,o=c.height;e.width=2*t,e.height=2*o;const l=e.getContext("2d");return l.drawImage(c,0,0,t,o),l.setTransform(-1,0,0,-1,e.width,e.height),l.drawImage(c,0,0,t,o),l.setTransform(-1,0,0,1,e.width,0),l.drawImage(c,0,0,t,o),l.setTransform(1,0,0,-1,0,e.height),l.drawImage(c,0,0,t,o),e},xO=function(c,e){const t=c.width,o=c.height,l=document.createElement("canvas");l.width=t*3,l.height=o*3;const d=l.getContext("2d"),f=e.angle!=null?-e.angle:-20,v=Yi.toRad(f),x=l.width/4,w=l.height/4;for(let _=0;_<4;_+=1)for(let A=0;A<4;A+=1)(_+A)%2>0&&(d.setTransform(1,0,0,1,(2*_-1)*x,(2*A-1)*w),d.rotate(v),d.drawImage(c,-t/2,-o/2,t,o));return l};var Mv;(function(c){c.presets=Object.assign({},oe),c.presets["flip-x"]=f_,c.presets["flip-y"]=p_,c.presets["flip-xy"]=g_,c.registry=Vs.create({type:"background pattern"}),c.registry.register(c.presets,!0)})(Mv||(Mv={}));const xu={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!1,trackInfo:{},track(c){xu.trackable=c}};var va;(function(c){c.snapToGrid=SC,c.normalizeMarker=Zf;function e(t){return`${xu.prefixCls}-${t}`}c.prefix=e})(va||(va={})),function(c){function e(t,o,l,d=[]){const f=typeof o.children=="function"?o.children(t):t[o.children||"children"];return l||(l=o.createNode(t),d.push(l)),Array.isArray(f)&&f.forEach(v=>{const x=o.createNode(v),w=o.createEdge(l,x);d.push(x,w),this.makeTree(v,o,x,d)}),d}c.makeTree=e}(va||(va={}));const v_=va.prefix("highlighted"),CO={highlight(c,e,t){const o=t&&t.className||v_;ao(e,o)},unhighlight(c,e,t){const o=t&&t.className||v_;$c(e,o)}},m_=va.prefix("highlight-opacity"),wO={highlight(c,e){ao(e,m_)},unhighlight(c,e){$c(e,m_)}},EO={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},SO={highlight(c,e,t){const o=tg.getHighlighterId(e,t);if(tg.hasCache(o))return;t=zm({},t,EO);const l=dr.create(e);let d,f;try{d=l.toPathData()}catch(_){f=l.bbox(!0),d=ES(Object.assign(Object.assign({},t),f))}const v=wc("path");if(go(v,Object.assign({d,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},t.attrs?uy(t.attrs):null)),c.isEdgeElement(e))go(v,"d",c.getConnectionPathData());else{let _=l.getTransformToElement(c.container);const A=t.padding;if(A){f==null&&(f=l.bbox(!0));const P=f.x+f.width/2,V=f.y+f.height/2;f=rc(f,_);const q=Math.max(f.width,1),te=Math.max(f.height,1),ge=(q+A)/q,_e=(te+A)/te,ke=rl({a:ge,b:0,c:0,d:_e,e:P-ge*P,f:V-_e*V});_=_.multiply(ke)}Xf(v,_)}ao(v,va.prefix("highlight-stroke"));const x=c.cell,w=()=>tg.removeHighlighter(o);x.on("removed",w),x.model&&x.model.on("reseted",w),c.container.appendChild(v),tg.setCache(o,v)},unhighlight(c,e,t){tg.removeHighlighter(tg.getHighlighterId(e,t))}};var tg;(function(c){function e(f,v){return _v(f),f.id+JSON.stringify(v)}c.getHighlighterId=e;const t={};function o(f,v){t[f]=v}c.setCache=o;function l(f){return t[f]!=null}c.hasCache=l;function d(f){const v=t[f];v&&(id(v),delete t[f])}c.removeHighlighter=d})(tg||(tg={}));var $h;(function(c){function e(t,o){if(typeof o.highlight!="function")throw new Error(`Highlighter '${t}' is missing required \`highlight()\` method`);if(typeof o.unhighlight!="function")throw new Error(`Highlighter '${t}' is missing required \`unhighlight()\` method`)}c.check=e})($h||($h={})),function(c){c.presets=ie,c.registry=Vs.create({type:"highlighter"}),c.registry.register(c.presets,!0)}($h||($h={}));function ys(c,e={}){return new $e(rd(e.x,c.width),rd(e.y,c.height))}function y_(c,e,t){return Object.assign({angle:e,position:c.toJSON()},t)}const _O=(c,e)=>c.map(({x:t,y:o,angle:l})=>y_(ys(e,{x:t,y:o}),l||0)),AO=(c,e,t)=>{const o=t.start||0,l=t.step||20;return b_(c,e,o,(d,f)=>(d+.5-f/2)*l)},TO=(c,e,t)=>{const o=t.start||0,l=t.step||360/c.length;return b_(c,e,o,d=>d*l)};function b_(c,e,t,o){const l=e.getCenter(),d=e.getTopCenter(),f=e.width/e.height,v=od.fromRect(e),x=c.length;return c.map((w,_)=>{const A=t+o(_,x),P=d.clone().rotate(-A,l).scale(f,1,l),V=w.compensateRotate?-v.tangentTheta(P):0;return(w.dx||w.dy)&&P.translate(w.dx||0,w.dy||0),w.dr&&P.move(l,w.dr),y_(P.round(),V,w)})}var MO=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};const HC=(c,e,t)=>{const o=ys(e,t.start||e.getOrigin()),l=ys(e,t.end||e.getCorner());return ng(c,o,l,t)},x_=(c,e,t)=>ng(c,e.getTopLeft(),e.getBottomLeft(),t),C_=(c,e,t)=>ng(c,e.getTopRight(),e.getBottomRight(),t),OO=(c,e,t)=>ng(c,e.getTopLeft(),e.getTopRight(),t),w_=(c,e,t)=>ng(c,e.getBottomLeft(),e.getBottomRight(),t);function ng(c,e,t,o){const l=new mr(e,t),d=c.length;return c.map((f,v)=>{var{strict:x}=f,w=MO(f,["strict"]);const _=x||o.strict?(v+1)/(d+1):(v+.5)/d,A=l.pointAt(_);return(w.dx||w.dy)&&A.translate(w.dx||0,w.dy||0),y_(A.round(),0,w)})}var rg;(function(c){c.presets=ne,c.registry=Vs.create({type:"port layout"}),c.registry.register(c.presets,!0)})(rg||(rg={}));const PO={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function ig(c,e){const{x:t,y:o,angle:l,attrs:d}=e||{};return zm({},{angle:l,attrs:d,position:{x:t,y:o}},c,PO)}const DO=(c,e,t)=>ig({position:e.getTopLeft()},t),Cy=(c,e,t)=>ig({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},t),$C=(c,e,t)=>ig({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},t),E_=(c,e,t)=>ig({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},t),Ov=(c,e,t)=>ig({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},t),NO=(c,e,t)=>WC(c,e,!1,t),IO=(c,e,t)=>WC(c,e,!0,t),S_=(c,e,t)=>A_(c,e,!1,t),__=(c,e,t)=>A_(c,e,!0,t);function WC(c,e,t,o){const l=o.offset!=null?o.offset:15,d=e.getCenter().theta(c),f=T_(e);let v,x,w,_,A=0;return d<f[1]||d>f[2]?(v=".3em",x=l,w=0,_="start"):d<f[0]?(v="0",x=0,w=-l,t?(A=-90,_="start"):_="middle"):d<f[3]?(v=".3em",x=-l,w=0,_="end"):(v=".6em",x=0,w=l,t?(A=90,_="start"):_="middle"),ig({position:{x:Math.round(x),y:Math.round(w)},angle:A,attrs:{".":{y:v,"text-anchor":_}}},o)}function A_(c,e,t,o){const l=o.offset!=null?o.offset:15,d=e.getCenter().theta(c),f=T_(e);let v,x,w,_,A=0;return d<f[1]||d>f[2]?(v=".3em",x=-l,w=0,_="end"):d<f[0]?(v=".6em",x=0,w=l,t?(A=90,_="start"):_="middle"):d<f[3]?(v=".3em",x=l,w=0,_="start"):(v="0em",x=0,w=-l,t?(A=-90,_="start"):_="middle"),ig({position:{x:Math.round(x),y:Math.round(w)},angle:A,attrs:{".":{y:v,"text-anchor":_}}},o)}function T_(c){const e=c.getCenter(),t=e.theta(c.getTopLeft()),o=e.theta(c.getBottomLeft()),l=e.theta(c.getBottomRight()),d=e.theta(c.getTopRight());return[t,d,l,o]}const RO=(c,e,t)=>wy(c.diff(e.getCenter()),!1,t),kO=(c,e,t)=>wy(c.diff(e.getCenter()),!0,t);function wy(c,e,t){const o=t.offset!=null?t.offset:20,l=new $e(0,0),d=-c.theta(l),f=c.clone().move(l,o).diff(c).round();let v=".3em",x,w=d;return(d+90)%180===0?(x=e?"end":"middle",!e&&d===-270&&(v="0em")):d>-270&&d<-90?(x="start",w=d-180):x="end",ig({position:f.round().toJSON(),angle:e?w:0,attrs:{".":{y:v,"text-anchor":x}}},t)}var m0;(function(c){c.presets=he,c.registry=Vs.create({type:"port label layout"}),c.registry.register(c.presets,!0)})(m0||(m0={}));class Yd{constructor(e,t,o,l){if(e==null)return this.set(255,255,255,1);if(typeof e=="number")return this.set(e,t,o,l);if(typeof e=="string")return Yd.fromString(e)||this;if(Array.isArray(e))return this.set(e);this.set(e.r,e.g,e.b,e.a==null?1:e.a)}blend(e,t,o){this.set(e.r+(t.r-e.r)*o,e.g+(t.g-e.g)*o,e.b+(t.b-e.b)*o,e.a+(t.a-e.a)*o)}lighten(e){const t=Yd.lighten(this.toArray(),e);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}darken(e){this.lighten(-e)}set(e,t,o,l){const d=Array.isArray(e)?e[0]:e,f=Array.isArray(e)?e[1]:t,v=Array.isArray(e)?e[2]:o,x=Array.isArray(e)?e[3]:l;return this.r=Math.round(ks(d,0,255)),this.g=Math.round(ks(f,0,255)),this.b=Math.round(ks(v,0,255)),this.a=x==null?1:ks(x,0,1),this}toHex(){return`#${["r","g","b"].map(t=>{const o=this[t].toString(16);return o.length<2?`0${o}`:o}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return Yd.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(e){const t=`${this.r},${this.g},${this.b},`;return e?`rgb(${t})`:`rgba(${t},${this.a})`}toGrey(){return Yd.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(c){function e(Se){return new c(Se)}c.fromArray=e;function t(Se){return new c([...q(Se),1])}c.fromHex=t;function o(Se){const je=Se.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(je){const nt=je[1].split(/\s*,\s*/).map(wt=>parseInt(wt,10));return new c(nt)}return null}c.fromRGBA=o;function l(Se,je,nt){nt<0&&++nt,nt>1&&--nt;const wt=6*nt;return wt<1?Se+(je-Se)*wt:2*nt<1?je:3*nt<2?Se+(je-Se)*(2/3-nt)*6:Se}function d(Se){const je=Se.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(je){const nt=je[2].split(/\s*,\s*/),wt=(parseFloat(nt[0])%360+360)%360/360,It=parseFloat(nt[1])/100,Jt=parseFloat(nt[2])/100,Un=nt[3]==null?1:parseInt(nt[3],10);return new c(w(wt,It,Jt,Un))}return null}c.fromHSLA=d;function f(Se){if(Se.startsWith("#"))return t(Se);if(Se.startsWith("rgb"))return o(Se);const je=c.named[Se];return je?t(je):d(Se)}c.fromString=f;function v(Se,je){return c.fromArray([Se,Se,Se,je])}c.makeGrey=v;function x(Se,je,nt,wt){const It=Array.isArray(Se)?Se[0]:Se,Jt=Array.isArray(Se)?Se[1]:je,Un=Array.isArray(Se)?Se[2]:nt,An=Array.isArray(Se)?Se[3]:wt,On=Math.max(It,Jt,Un),Zn=Math.min(It,Jt,Un),si=(On+Zn)/2;let Wr=0,Wt=0;if(Zn!==On){const Ln=On-Zn;switch(Wt=si>.5?Ln/(2-On-Zn):Ln/(On+Zn),On){case It:Wr=(Jt-Un)/Ln+(Jt<Un?6:0);break;case Jt:Wr=(Un-It)/Ln+2;break;case Un:Wr=(It-Jt)/Ln+4;break;default:break}Wr/=6}return[Wr,Wt,si,An==null?1:An]}c.rgba2hsla=x;function w(Se,je,nt,wt){const It=Array.isArray(Se)?Se[0]:Se,Jt=Array.isArray(Se)?Se[1]:je,Un=Array.isArray(Se)?Se[2]:nt,An=Array.isArray(Se)?Se[3]:wt,On=Un<=.5?Un*(Jt+1):Un+Jt-Un*Jt,Zn=2*Un-On;return[l(Zn,On,It+1/3)*256,l(Zn,On,It)*256,l(Zn,On,It-1/3)*256,An==null?1:An]}c.hsla2rgba=w;function _(Se){return new c(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),Se?void 0:parseFloat(Math.random().toFixed(2)))}c.random=_;function A(){const Se="0123456789ABCDEF";let je="#";for(let nt=0;nt<6;nt+=1)je+=Se[Math.floor(Math.random()*16)];return je}c.randomHex=A;function P(Se){return _(Se).toString()}c.randomRGBA=P;function V(Se,je){if(typeof Se=="string"){const Un=Se[0]==="#",[An,On,Zn]=q(Se);return je?An*.299+On*.587+Zn*.114>186?"#000000":"#ffffff":`${Un?"#":""}${te(255-An,255-On,255-Zn)}`}const nt=Se[0],wt=Se[1],It=Se[2],Jt=Se[3];return je?nt*.299+wt*.587+It*.114>186?[0,0,0,Jt]:[255,255,255,Jt]:[255-nt,255-wt,255-It,Jt]}c.invert=V;function q(Se){const je=Se.indexOf("#")===0?Se:`#${Se}`;let nt=Number(`0x${je.substr(1)}`);if(!(je.length===4||je.length===7)||Number.isNaN(nt))throw new Error("Invalid hex color.");const wt=je.length===4?4:8,It=(1<<wt)-1,Jt=["b","g","r"].map(()=>{const Un=nt&It;return nt>>=wt,wt===4?17*Un:Un});return[Jt[2],Jt[1],Jt[0]]}function te(Se,je,nt){const wt=It=>It.length<2?`0${It}`:It;return`${wt(Se.toString(16))}${wt(je.toString(16))}${wt(nt.toString(16))}`}function ge(Se,je){return ke(Se,je)}c.lighten=ge;function _e(Se,je){return ke(Se,-je)}c.darken=_e;function ke(Se,je){if(typeof Se=="string"){const It=Se[0]==="#",Jt=parseInt(It?Se.substr(1):Se,16),Un=ks((Jt>>16)+je,0,255),An=ks((Jt>>8&255)+je,0,255),On=ks((Jt&255)+je,0,255);return`${It?"#":""}${(On|An<<8|Un<<16).toString(16)}`}const nt=te(Se[0],Se[1],Se[2]),wt=q(ke(nt,je));return[wt[0],wt[1],wt[2],Se[3]]}})(Yd||(Yd={})),function(c){c.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(Yd||(Yd={}));class LO{constructor(){this.listeners={}}on(e,t,o){return t==null?this:(this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t,o),this)}once(e,t,o){const l=(...d)=>(this.off(e,l),Wh.call([t,o],d));return this.on(e,l,this)}off(e,t,o){if(!(e||t||o))return this.listeners={},this;const l=this.listeners;return(e?[e]:Object.keys(l)).forEach(f=>{const v=l[f];if(v){if(!(t||o)){delete l[f];return}for(let x=v.length-2;x>=0;x-=2)t&&v[x]!==t||o&&v[x+1]!==o||v.splice(x,2)}}),this}trigger(e,...t){let o=!0;if(e!=="*"){const d=this.listeners[e];d!=null&&(o=Wh.call([...d],t))}const l=this.listeners["*"];return l!=null?c2([o,Wh.call([...l],[e,...t])]):o}emit(e,...t){return this.trigger(e,...t)}}var Wh;(function(c){function e(t,o){const l=[];for(let d=0;d<t.length;d+=2){const f=t[d],v=t[d+1],x=Array.isArray(o)?o:[o],w=ry(f,v,x);l.push(w)}return c2(l)}c.call=e})(Wh||(Wh={}));class Kd{get disposed(){return this._disposed===!0}dispose(){this._disposed=!0}}(function(c){function e(){return(t,o,l)=>{const d=l.value,f=t.__proto__;l.value=function(){this.disposed||(d.call(this),f.dispose.call(this))}}}c.dispose=e})(Kd||(Kd={}));class VP{constructor(e){this.callback=e}get disposed(){return!this.callback}dispose(){if(!this.callback)return;const e=this.callback;this.callback=null,e()}}class M_{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(e=>{e.dispose()}),this.items.clear())}contains(e){return this.items.has(e)}add(e){this.items.add(e)}remove(e){this.items.delete(e)}clear(){this.items.clear()}}(function(c){function e(t){const o=new c;return t.forEach(l=>{o.add(l)}),o}c.from=e})(M_||(M_={}));class Gl extends LO{}(function(c){c.dispose=Kd.dispose})(Gl||(Gl={})),zp(Gl,Kd);class Xh extends Gl{get disabled(){return this._disabled===!0}enable(){delete this._disabled}disable(){this._disabled=!0}}var Zh=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class Yh extends Kd{constructor(){super(),this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(e){return this.map.has(e)}get(e){return this.map.get(e)}set(e,t){this.map.set(e,t),this.arr.push(e)}delete(e){const t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);const o=this.map.get(e);return this.map.delete(e),o}each(e){this.arr.forEach(t=>{const o=this.map.get(t);e(o,t)})}dispose(){this.clear()}}Zh([Kd.dispose()],Yh.prototype,"dispose",null);class ol{constructor(e={}){this.comparator=e.comparator||ol.defaultComparator,this.index={},this.data=e.data||[],this.heapify()}isEmpty(){return this.data.length===0}insert(e,t,o){const l={priority:e,value:t},d=this.data.length;return o&&(l.id=o,this.index[o]=d),this.data.push(l),this.bubbleUp(d),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(e,t){const o=this.index[e];if(typeof o=="undefined")throw new Error(`Node with id '${e}' was not found in the heap.`);const l=this.data,d=l[o].priority,f=this.comparator(t,d);f<0?(l[o].priority=t,this.bubbleUp(o)):f>0&&(l[o].priority=t,this.bubbleDown(o))}remove(){const e=this.data,t=e[0],o=e.pop();return t.id&&delete this.index[t.id],e.length>0&&(e[0]=o,o.id&&(this.index[o.id]=0),this.bubbleDown(0)),t?t.value:null}heapify(){for(let e=0;e<this.data.length;e+=1)this.bubbleUp(e)}bubbleUp(e){const t=this.data;let o,l,d=e;for(;d>0&&(l=d-1>>>1,this.comparator(t[d].priority,t[l].priority)<0);){o=t[l],t[l]=t[d];let f=t[d].id;f!=null&&(this.index[f]=l),t[d]=o,f=t[d].id,f!=null&&(this.index[f]=d),d=l}}bubbleDown(e){const t=this.data,o=t.length-1;let l=e;for(;;){const d=(l<<1)+1,f=d+1;let v=l;if(d<=o&&this.comparator(t[d].priority,t[v].priority)<0&&(v=d),f<=o&&this.comparator(t[f].priority,t[v].priority)<0&&(v=f),v!==l){const x=t[v];t[v]=t[l];let w=t[l].id;w!=null&&(this.index[w]=v),t[l]=x,w=t[l].id,w!=null&&(this.index[w]=l),l=v}else break}}}(function(c){c.defaultComparator=(e,t)=>e-t})(ol||(ol={}));var og;(function(c){function e(t,o,l=(d,f)=>1){const d={},f={},v={},x=new ol;for(d[o]=0,Object.keys(t).forEach(w=>{w!==o&&(d[w]=1/0),x.insert(d[w],w,w)});!x.isEmpty();){const w=x.remove();v[w]=!0;const _=t[w]||[];for(let A=0;A<_.length;A+=1){const P=_[A];if(!v[P]){const V=d[w]+l(w,P);V<d[P]&&(d[P]=V,f[P]=w,x.updatePriority(P,V))}}}return f}c.run=e})(og||(og={}));var Kh;(function(c){c.linear=e=>e,c.quad=e=>e*e,c.cubic=e=>e*e*e,c.inout=e=>{if(e<=0)return 0;if(e>=1)return 1;const t=e*e,o=t*e;return 4*(e<.5?o:3*(e-t)+o-.75)},c.exponential=e=>Math.pow(2,10*(e-1)),c.bounce=e=>{for(let t=0,o=1;;t+=o,o/=2)if(e>=(7-4*t)/11){const l=(11-6*t-11*e)/4;return-l*l+o*o}}})(Kh||(Kh={})),function(c){c.decorators={reverse(e){return t=>1-e(1-t)},reflect(e){return t=>.5*(t<.5?e(2*t):2-e(2-2*t))},clamp(e,t=0,o=1){return l=>{const d=e(l);return d<t?t:d>o?o:d}},back(e=1.70158){return t=>t*t*((e+1)*t-e)},elastic(e=1.5){return t=>Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}}(Kh||(Kh={})),function(c){function e(Wt){return-1*Math.cos(Wt*(Math.PI/2))+1}c.easeInSine=e;function t(Wt){return Math.sin(Wt*(Math.PI/2))}c.easeOutSine=t;function o(Wt){return-.5*(Math.cos(Math.PI*Wt)-1)}c.easeInOutSine=o;function l(Wt){return Wt*Wt}c.easeInQuad=l;function d(Wt){return Wt*(2-Wt)}c.easeOutQuad=d;function f(Wt){return Wt<.5?2*Wt*Wt:-1+(4-2*Wt)*Wt}c.easeInOutQuad=f;function v(Wt){return Wt*Wt*Wt}c.easeInCubic=v;function x(Wt){const Ln=Wt-1;return Ln*Ln*Ln+1}c.easeOutCubic=x;function w(Wt){return Wt<.5?4*Wt*Wt*Wt:(Wt-1)*(2*Wt-2)*(2*Wt-2)+1}c.easeInOutCubic=w;function _(Wt){return Wt*Wt*Wt*Wt}c.easeInQuart=_;function A(Wt){const Ln=Wt-1;return 1-Ln*Ln*Ln*Ln}c.easeOutQuart=A;function P(Wt){const Ln=Wt-1;return Wt<.5?8*Wt*Wt*Wt*Wt:1-8*Ln*Ln*Ln*Ln}c.easeInOutQuart=P;function V(Wt){return Wt*Wt*Wt*Wt*Wt}c.easeInQuint=V;function q(Wt){const Ln=Wt-1;return 1+Ln*Ln*Ln*Ln*Ln}c.easeOutQuint=q;function te(Wt){const Ln=Wt-1;return Wt<.5?16*Wt*Wt*Wt*Wt*Wt:1+16*Ln*Ln*Ln*Ln*Ln}c.easeInOutQuint=te;function ge(Wt){return Wt===0?0:Math.pow(2,10*(Wt-1))}c.easeInExpo=ge;function _e(Wt){return Wt===1?1:-Math.pow(2,-10*Wt)+1}c.easeOutExpo=_e;function ke(Wt){if(Wt===0||Wt===1)return Wt;const Ln=Wt*2,jr=Ln-1;return Ln<1?.5*Math.pow(2,10*jr):.5*(-Math.pow(2,-10*jr)+2)}c.easeInOutExpo=ke;function Se(Wt){const Ln=Wt/1;return-1*(Math.sqrt(1-Ln*Wt)-1)}c.easeInCirc=Se;function je(Wt){const Ln=Wt-1;return Math.sqrt(1-Ln*Ln)}c.easeOutCirc=je;function nt(Wt){const Ln=Wt*2,jr=Ln-2;return Ln<1?-.5*(Math.sqrt(1-Ln*Ln)-1):.5*(Math.sqrt(1-jr*jr)+1)}c.easeInOutCirc=nt;function wt(Wt,Ln=1.70158){return Wt*Wt*((Ln+1)*Wt-Ln)}c.easeInBack=wt;function It(Wt,Ln=1.70158){const jr=Wt/1-1;return jr*jr*((Ln+1)*jr+Ln)+1}c.easeOutBack=It;function Jt(Wt,Ln=1.70158){const jr=Wt*2,Do=jr-2,Jo=Ln*1.525;return jr<1?.5*jr*jr*((Jo+1)*jr-Jo):.5*(Do*Do*((Jo+1)*Do+Jo)+2)}c.easeInOutBack=Jt;function Un(Wt,Ln=.7){if(Wt===0||Wt===1)return Wt;const Do=Wt/1-1,Jo=1-Ln,Oa=Jo/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*Do)*Math.sin((Do-Oa)*(2*Math.PI)/Jo))}c.easeInElastic=Un;function An(Wt,Ln=.7){const jr=1-Ln,Do=Wt*2;if(Wt===0||Wt===1)return Wt;const Jo=jr/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*Do)*Math.sin((Do-Jo)*(2*Math.PI)/jr)+1}c.easeOutElastic=An;function On(Wt,Ln=.65){const jr=1-Ln;if(Wt===0||Wt===1)return Wt;const Do=Wt*2,Jo=Do-1,Oa=jr/(2*Math.PI)*Math.asin(1);return Do<1?-.5*(Math.pow(2,10*Jo)*Math.sin((Jo-Oa)*(2*Math.PI)/jr)):Math.pow(2,-10*Jo)*Math.sin((Jo-Oa)*(2*Math.PI)/jr)*.5+1}c.easeInOutElastic=On;function Zn(Wt){const Ln=Wt/1;if(Ln<1/2.75)return 7.5625*Ln*Ln;if(Ln<2/2.75){const jr=Ln-.5454545454545454;return 7.5625*jr*jr+.75}if(Ln<2.5/2.75){const jr=Ln-.8181818181818182;return 7.5625*jr*jr+.9375}{const jr=Ln-.9545454545454546;return 7.5625*jr*jr+.984375}}c.easeOutBounce=Zn;function si(Wt){return 1-Zn(1-Wt)}c.easeInBounce=si;function Wr(Wt){return Wt<.5?si(Wt*2)*.5:Zn(Wt*2-1)*.5+.5}c.easeInOutBounce=Wr}(Kh||(Kh={}));var qd;(function(c){c.number=(e,t)=>{const o=t-e;return l=>e+o*l},c.object=(e,t)=>{const o=Object.keys(e);return l=>{const d={};for(let f=o.length-1;f!==-1;f-=1){const v=o[f];d[v]=e[v]+(t[v]-e[v])*l}return d}},c.unit=(e,t)=>{const o=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,l=o.exec(e),d=o.exec(t),f=d?d[1]:"",v=l?+l[1]:0,x=d?+d[1]:0,w=f.indexOf("."),_=w>0?f[1].length-w-1:0,A=x-v,P=l?l[2]:"";return V=>(v+A*V).toFixed(_)+P},c.color=(e,t)=>{const o=parseInt(e.slice(1),16),l=parseInt(t.slice(1),16),d=o&255,f=(l&255)-d,v=o&65280,x=(l&65280)-v,w=o&16711680,_=(l&16711680)-w;return A=>{const P=d+f*A&255,V=v+x*A&65280,q=w+_*A&16711680;return`#${(1<<24|P|V|q).toString(16).slice(1)}`}}})(qd||(qd={}));var O_;(function(c){const e=`${xu.prefixCls}.storage`;function t(A,P,V){const q=P.id||uE("doc-"),te=x(A);te.keys.push(q),f(w(A,q),P),f(_(A),te),d(V,null,Object.assign(Object.assign({},P),{id:q}))}c.insert=t;function o(A,P,V){const q=x(A),te=[];if(P==null)q.keys.forEach(ge=>{const _e=v(w(A,ge));_e?te.push(_e):d(V,new Error(`No document found for an ID '${ge}' from index.`))}),d(V,null,te);else if(P.id){const ge=v(w(A,P.id));d(V,null,ge?[ge]:[])}else d(V,null,[])}c.find=o;function l(A,P,V){const q=x(A);if(P==null)q.keys.forEach(te=>{localStorage.removeItem(w(A,te))}),localStorage.removeItem(_(A)),d(V,null);else if(P.id){const te=q.keys.indexOf(P.id);te>=0&&q.keys.splice(te,1),localStorage.removeItem(w(A,P.id)),f(_(A),q),d(V,null)}}c.remove=l;function d(A,P,V){A&&ny(()=>{A(P,V)})}function f(A,P){localStorage.setItem(A,JSON.stringify(P))}function v(A){const P=localStorage.getItem(A);return P?JSON.parse(P):null}function x(A){const P=v(_(A));return P?(P.keys==null&&(P.keys=[]),P):{keys:[]}}function w(A,P){return`${e}.${A}.docs.${P}`}function _(A){return`${e}.${A}.index`}})(O_||(O_={}));class Ki extends Gl{constructor(){super(),this.cid=I2.uniqueId(),Ki.views[this.cid]=this}get priority(){return 2}confirmUpdate(e,t){return 0}$(e){return Ki.$(e)}empty(e=this.container){return this.$(e).empty(),this}unmount(e=this.container){return this.$(e).remove(),this}remove(e=this.container){return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete Ki.views[this.cid]),this.unmount(e),this}onRemove(){}setClass(e,t=this.container){t.classList.value=Array.isArray(e)?e.join(" "):e}addClass(e,t=this.container){return this.$(t).addClass(Array.isArray(e)?e.join(" "):e),this}removeClass(e,t=this.container){return this.$(t).removeClass(Array.isArray(e)?e.join(" "):e),this}setStyle(e,t=this.container){return this.$(t).css(e),this}setAttrs(e,t=this.container){return e!=null&&t!=null&&(t instanceof SVGElement?go(t,e):this.$(t).attr(e)),this}findAttr(e,t=this.container){let o=t;for(;o&&o.nodeType===1;){const l=o.getAttribute(e);if(l!=null)return l;if(o===this.container)return null;o=o.parentNode}return null}find(e,t=this.container,o=this.selectors){return Ki.find(e,t,o).elems}findOne(e,t=this.container,o=this.selectors){const l=this.find(e,t,o);return l.length>0?l[0]:null}findByAttr(e,t=this.container){let o=t;for(;o&&o.getAttribute;){const l=o.getAttribute(e);if((l!=null||o===this.container)&&l!=="false")return o;o=o.parentNode}return null}getSelector(e,t){let o;if(e===this.container)return typeof t=="string"&&(o=`> ${t}`),o;if(e){const l=sy(e)+1;o=`${e.tagName.toLowerCase()}:nth-child(${l})`,t&&(o+=` > ${t}`),o=this.getSelector(e.parentNode,o)}return o}prefixClassName(e){return va.prefix(e)}delegateEvents(e,t){if(e==null)return this;t||this.undelegateEvents();const o=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(l=>{const d=l.match(o);if(d==null)return;const f=this.getEventHandler(e[l]);typeof f=="function"&&this.delegateEvent(d[1],d[2],f)}),this}undelegateEvents(){return this.$(this.container).off(this.getEventNamespace()),this}delegateDocumentEvents(e,t){return this.addEventListeners(document,e,t),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(e,t,o){return this.$(this.container).on(e+this.getEventNamespace(),t,o),this}undelegateEvent(e,t,o){const l=e+this.getEventNamespace();return t==null?this.$(this.container).off(l):typeof t=="string"?this.$(this.container).off(l,t,o):this.$(this.container).off(l,t),this}addEventListeners(e,t,o){if(t==null)return this;const l=this.getEventNamespace(),d=this.$(e);return Object.keys(t).forEach(f=>{const v=this.getEventHandler(t[f]);typeof v=="function"&&d.on(f+l,o,v)}),this}removeEventListeners(e){return e!=null&&this.$(e).off(this.getEventNamespace()),this}getEventNamespace(){return`.${xu.prefixCls}-event-${this.cid}`}getEventHandler(e){let t;if(typeof e=="string"){const o=this[e];typeof o=="function"&&(t=(...l)=>o.call(this,...l))}else t=(...o)=>e.call(this,...o);return t}getEventTarget(e,t={}){const{target:o,type:l,clientX:d=0,clientY:f=0}=e;return t.fromPoint||l==="touchmove"||l==="touchend"?document.elementFromPoint(d,f):o}stopPropagation(e){return this.setEventData(e,{propagationStopped:!0}),this}isPropagationStopped(e){return this.getEventData(e).propagationStopped===!0}getEventData(e){return this.eventData(e)}setEventData(e,t){return this.eventData(e,t)}eventData(e,t){if(e==null)throw new TypeError("Event object required");let o=e.data;const l=`__${this.cid}__`;return t==null?o==null?{}:o[l]||{}:(o==null&&(o=e.data={}),o[l]==null?o[l]=Object.assign({},t):o[l]=Object.assign(Object.assign({},o[l]),t),o[l])}normalizeEvent(e){return Ki.normalizeEvent(e)}}(function(c){function e(d){return G()(d)}c.$=e;function t(d,f){return f?wc(d||"g"):f2(d||"div")}c.createElement=t;function o(d,f,v){if(!d||d===".")return{elems:[f]};if(v){const x=v[d];if(x)return{elems:Array.isArray(x)?x:[x]}}return xu.useCSSSelector?{isCSSSelector:!0,elems:e(f).find(d).toArray()}:{elems:[]}}c.find=o;function l(d){let f=d;const v=d.originalEvent,x=v&&v.changedTouches&&v.changedTouches[0];if(x){for(const _ in d)x[_]===void 0&&(x[_]=d[_]);f=x}const w=f.target;if(w){const _=w.correspondingUseElement;_&&(f.target=_)}return f}c.normalizeEvent=l})(Ki||(Ki={})),function(c){c.views={};function e(t){return c.views[t]||null}c.getView=e}(Ki||(Ki={}));var I2;(function(c){let e=0;function t(){const o=`v${e}`;return e+=1,o}c.uniqueId=t})(I2||(I2={}));const R2=c=>c;function P_(c,e){return e===0?"0%":`${Math.round(c/e*100)}%`}function XC(c){return(t,o,l,d)=>o.isEdgeElement(l)?GO(c,t,o,l,d):ZC(c,t,o,l,d)}function ZC(c,e,t,o,l){const d=t.cell,f=d.getAngle(),v=t.getUnrotatedBBoxOfElement(o),x=d.getBBox().getCenter(),w=$e.create(l).rotate(f,x);let _=w.x-v.x,A=w.y-v.y;return c&&(_=P_(_,v.width),A=P_(A,v.height)),e.anchor={name:"topLeft",args:{dx:_,dy:A,rotate:!0}},e}function GO(c,e,t,o,l){const d=t.getConnection();if(!d)return e;const f=d.closestPointLength(l);if(c){const v=d.length();e.anchor={name:"ratio",args:{ratio:f/v}}}else e.anchor={name:"length",args:{length:f}};return e}const FO=XC(!0),BO=XC(!1);var sg;(function(c){c.presets=Ne,c.registry=Vs.create({type:"connection strategy"}),c.registry.register(c.presets,!0)})(sg||(sg={}));class Pv{constructor(e){this.view=e,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new Yh,this.pathCache={}}get(e){return this.elemCache.has(e)||this.elemCache.set(e,{}),this.elemCache.get(e)}getData(e){const t=this.get(e);return t.data||(t.data={}),t.data}getMatrix(e){const t=this.get(e);if(t.matrix==null){const o=this.view.rotatableNode||this.view.container;t.matrix=Bh(e,o)}return rl(t.matrix)}getShape(e){const t=this.get(e);return t.shape==null&&(t.shape=Tv(e)),t.shape.clone()}getBoundingRect(e){const t=this.get(e);return t.boundingRect==null&&(t.boundingRect=pa(e)),t.boundingRect.clone()}}var Qi;(function(c){function e(_){return _!=null&&!t(_)}c.isJSONMarkup=e;function t(_){return _!=null&&typeof _=="string"}c.isStringMarkup=t;function o(_){return _==null||t(_)?_:Tr(_)}c.clone=o;function l(_){return`${_}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}c.sanitize=l;function d(_){const A=document.createDocumentFragment(),P={},V={},q=l(_);return NE(q,{raw:!0}).forEach(ge=>{A.appendChild(ge)}),{fragment:A,selectors:V,groups:P}}c.parseStringMarkup=d;function f(_,A={ns:da.svg}){const P=document.createDocumentFragment(),V={},q={},te=[{markup:Array.isArray(_)?_:[_],parent:P,ns:A.ns}];for(;te.length>0;){const ge=te.pop();let _e=ge.ns||da.svg;const ke=ge.markup,Se=ge.parent;ke.forEach(je=>{const nt=je.tagName;if(!nt)throw new TypeError("Invalid tagName");je.ns&&(_e=je.ns);const wt=_e===da.svg,It=_e?f2(nt,_e):mC(nt),Jt=je.attrs;Jt&&(wt?go(It,uy(Jt)):G()(It).attr(Jt));const Un=je.style;Un&&G()(It).css(Un);const An=je.className;An!=null&&It.setAttribute("class",Array.isArray(An)?An.join(" "):An),je.textContent&&(It.textContent=je.textContent);const On=je.selector;if(On!=null){if(q[On])throw new TypeError("Selector must be unique");q[On]=It}if(je.groupSelector){let si=je.groupSelector;Array.isArray(si)||(si=[si]),si.forEach(Wr=>{V[Wr]||(V[Wr]=[]),V[Wr].push(It)})}Se.appendChild(It);const Zn=je.children;Array.isArray(Zn)&&te.push({ns:_e,markup:Zn,parent:It})})}return Object.keys(V).forEach(ge=>{if(q[ge])throw new Error("Ambiguous group selector");q[ge]=V[ge]}),{fragment:P,selectors:q,groups:V}}c.parseJSONMarkup=f;function v(_){return _ instanceof SVGElement?wc("g"):mC("div")}function x(_){if(t(_)){const q=dr.createVectors(_),te=q.length;if(te===1)return{elem:q[0].node};if(te>1){const ge=v(q[0].node);return q.forEach(_e=>{ge.appendChild(_e.node)}),{elem:ge}}return{}}const A=f(_),P=A.fragment;let V=null;return P.childNodes.length>1?(V=v(P.firstChild),V.appendChild(P)):V=P.firstChild,{elem:V,selectors:A.selectors}}c.renderMarkup=x;function w(_){const A=dr.createVectors(_),P=document.createDocumentFragment();for(let V=0,q=A.length;V<q;V+=1){const te=A[V].node;P.appendChild(te)}return{fragment:P,selectors:{}}}c.parseLabelStringMarkup=w})(Qi||(Qi={})),function(c){function e(l,d,f){if(l!=null){let v;const x=l.tagName.toLowerCase();if(l===d)return typeof f=="string"?v=`> ${x} > ${f}`:v=`> ${x}`,v;const w=l.parentNode;if(w&&w.childNodes.length>1){const _=sy(l)+1;v=`${x}:nth-child(${_})`}else v=x;return f&&(v+=` > ${f}`),e(l.parentNode,d,v)}return f}c.getSelector=e;function t(l,d,f){if(l.nodeName==="#text")return null;let v=null,x=null,w=null,_=!1;const A={tagName:l.tagName};if(l.attributes){w={};for(let P=0,V=l.attributes.length;P<V;P+=1){const q=l.attributes[P],te=q.nodeName,ge=q.nodeValue;te==="selector"?v=ge:te==="groupSelector"?x=ge:te==="class"?A.attrs={class:ge}:w[te]=ge}}return v==null&&(_=!0,v=e(l,d)),l.namespaceURI&&(A.ns=l.namespaceURI),A.ns==null&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(l.tagName)?A.ns=da.xhtml:f&&(A.ns=f)),v&&(A.selector=v),x!=null&&(A.groupSelector=x),{markup:A,attrs:w,isCSSSelector:_}}function o(l){const d=c.sanitize(l),f=p2(d,{mimeType:"image/svg+xml"}),v=Array.prototype.slice.call(f.childNodes),x={},w=new WeakMap,_=(P,V,q)=>{const te=t(P,V,q);if(te==null){const ge=w.get(P.parentNode);ge&&P.textContent&&(ge.textContent=P.textContent)}else{const{markup:ge,attrs:_e,isCSSSelector:ke}=te;if(w.set(P,ge),ge.selector&&_e!=null&&(Object.keys(_e).length&&(x[ge.selector]=_e),ke&&delete ge.selector),P.childNodes&&P.childNodes.length>0)for(let Se=0,je=P.childNodes.length;Se<je;Se+=1){const nt=P.childNodes[Se],wt=_(nt,V,ge.ns);wt&&(ge.children==null&&(ge.children=[]),ge.children.push(wt))}return ge}};return{markup:v.map(P=>_(P,P)).filter(P=>P!=null),attrs:x}}c.xml2json=o}(Qi||(Qi={})),function(c){function e(){return"g"}c.getPortContainerMarkup=e;function t(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}c.getPortMarkup=t;function o(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}c.getPortLabelMarkup=o}(Qi||(Qi={})),function(c){function e(){return c.sanitize(`
    <path class="connection" stroke="black" d="M 0 0 0 0"/>
    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="connection-wrap" d="M 0 0 0 0"/>
    <g class="labels"/>
    <g class="vertices"/>
    <g class="arrowheads"/>
    <g class="tools"/>
  `)}c.getEdgeMarkup=e;function t(){return c.sanitize(`
    <g class="edge-tool">
      <g class="tool-remove" event="edge:remove">
        <circle r="11" />
        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />
        <title>Remove edge.</title>
      </g>
      <g class="tool-options" event="edge:options">
        <circle r="11" transform="translate(25)"/>
        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>
        <title>Edge options.</title>
      </g>
    </g>
  `)}c.getEdgeToolMarkup=t;function o(){return c.sanitize(`
    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">
      <circle class="vertex" data-index="<%= index %>" r="10" />
      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>
      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">
      <title>Remove vertex.</title>
      </path>
    </g>
  `)}c.getEdgeVertexMarkup=o;function l(){return c.sanitize(`
    <g class="arrowhead-group arrowhead-group-<%= end %>">
      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />
    </g>
  `)}c.getEdgeArrowheadMarkup=l}(Qi||(Qi={})),function(c){function e(t=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:da.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:da.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:t?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}c.getForeignObjectMarkup=e}(Qi||(Qi={}));class Dv{constructor(e){this.view=e}get cell(){return this.view.cell}getDefinition(e){return this.cell.getAttrDefinition(e)}processAttrs(e,t){let o,l,d,f,v;const x=[];return Object.keys(t).forEach(w=>{const _=t[w],A=this.getDefinition(w),P=ir(ad.isValidDefinition,this.view,A,_,{elem:e,attrs:t,cell:this.cell,view:this.view});if(A&&P)typeof A=="string"?(o==null&&(o={}),o[A]=_):_!==null&&x.push({name:w,definition:A});else{o==null&&(o={});const V=Wc.includes(w)?w:lC(w);o[V]=_}}),x.forEach(({name:w,definition:_})=>{const A=t[w];typeof _.set=="function"&&(!$d(e)&&Dv.DELAY_ATTRS.includes(w)?(v==null&&(v={}),v[w]=A):(l==null&&(l={}),l[w]=A)),typeof _.offset=="function"&&(d==null&&(d={}),d[w]=A),typeof _.position=="function"&&(f==null&&(f={}),f[w]=A)}),{raw:t,normal:o,set:l,offset:d,position:f,delay:v}}mergeProcessedAttrs(e,t){e.set=Object.assign(Object.assign({},e.set),t.set),e.position=Object.assign(Object.assign({},e.position),t.position),e.offset=Object.assign(Object.assign({},e.offset),t.offset);const o=e.normal&&e.normal.transform;o!=null&&t.normal&&(t.normal.transform=o),e.normal=t.normal}findAttrs(e,t,o,l){const d=[],f=new Yh;return Object.keys(e).forEach(v=>{const x=e[v];if(!ec(x))return;const{isCSSSelector:w,elems:_}=Ki.find(v,t,l);o[v]=_;for(let A=0,P=_.length;A<P;A+=1){const V=_[A],q=l&&l[v]===V,te=f.get(V);if(te){te.array||(d.push(V),te.array=!0,te.attrs=[te.attrs],te.priority=[te.priority]);const ge=te.attrs,_e=te.priority;if(q)ge.unshift(x),_e.unshift(-1);else{const ke=Iu(_e,w?-1:P);ge.splice(ke,0,x),_e.splice(ke,0,P)}}else f.set(V,{elem:V,attrs:x,priority:q?-1:P,array:!1})}}),d.forEach(v=>{const x=f.get(v),w=x.attrs;x.attrs=w.reduceRight((_,A)=>Fo(_,A),{})}),f}updateRelativeAttrs(e,t,o,l){const d=t.raw||{};let f=t.normal||{};const v=t.set,x=t.position,w=t.offset,_=t.delay,A=()=>({elem:e,cell:this.cell,view:this.view,attrs:d,refBBox:o.clone()});if(v!=null&&Object.keys(v).forEach(nt=>{const wt=v[nt],It=this.getDefinition(nt);if(It!=null){const Jt=ir(It.set,this.view,wt,A());typeof Jt=="object"?f=Object.assign(Object.assign({},f),Jt):Jt!=null&&(f[nt]=Jt)}}),$d(e)){this.view.setAttrs(f,e);return}const P=f.transform,V=P?`${P}`:null,q=py(V),te=new $e(q.e,q.f);P&&(delete f.transform,q.e=0,q.f=0);let ge=1,_e=1;if(x||w){const nt=this.view.getScaleOfElement(e,l.scalableNode);ge=nt.sx,_e=nt.sy}let ke=!1;x!=null&&Object.keys(x).forEach(nt=>{const wt=x[nt],It=this.getDefinition(nt);if(It!=null){const Jt=ir(It.position,this.view,wt,A());Jt!=null&&(ke=!0,te.translate($e.create(Jt).scale(ge,_e)))}}),this.view.setAttrs(f,e);let Se=!1;if(w!=null){const nt=this.view.getBoundingRectOfElement(e);if(nt.width>0&&nt.height>0){const wt=rc(nt,q).scale(1/ge,1/_e);Object.keys(w).forEach(It=>{const Jt=w[It],Un=this.getDefinition(It);if(Un!=null){const An=ir(Un.offset,this.view,Jt,{elem:e,cell:this.cell,view:this.view,attrs:d,refBBox:wt});An!=null&&(Se=!0,te.translate($e.create(An).scale(ge,_e)))}})}}(P!=null||ke||Se)&&(te.round(1),q.e=te.x,q.f=te.y,e.setAttribute("transform",h0(q)));const je=()=>{_!=null&&Object.keys(_).forEach(nt=>{const wt=_[nt],It=this.getDefinition(nt);if(It!=null){const Jt=ir(It.set,this.view,wt,A());typeof Jt=="object"?this.view.setAttrs(Jt,e):Jt!=null&&this.view.setAttrs({[nt]:Jt},e)}})};l.forceSync?je():M2.scheduleTask(je)}update(e,t,o){const l={},d=this.findAttrs(o.attrs||t,e,l,o.selectors),f=o.attrs?this.findAttrs(t,e,l,o.selectors):d,v=[];d.each(_=>{const A=_.elem,P=_.attrs,V=this.processAttrs(A,P);if(V.set==null&&V.position==null&&V.offset==null&&V.delay==null)this.view.setAttrs(V.normal,A);else{const q=f.get(A),te=q?q.attrs:null,ge=te&&P.ref==null?te.ref:P.ref;let _e;if(ge){if(_e=(l[ge]||this.view.find(ge,e,o.selectors))[0],!_e)throw new Error(`"${ge}" reference does not exist.`)}else _e=null;const ke={node:A,refNode:_e,attributes:te,processedAttributes:V},Se=v.findIndex(je=>je.refNode===A);Se>-1?v.splice(Se,0,ke):v.push(ke)}});const x=new Yh;let w;v.forEach(_=>{const A=_.node,P=_.refNode;let V;const q=P!=null&&o.rotatableNode!=null&&ly(o.rotatableNode,P);if(P&&(V=x.get(P)),!V){const ke=q?o.rotatableNode:e;V=P?pa(P,{target:ke}):o.rootBBox,P&&x.set(P,V)}let te;o.attrs&&_.attributes?(te=this.processAttrs(A,_.attributes),this.mergeProcessedAttrs(te,_.processedAttributes)):te=_.processedAttributes;let ge=V;q&&o.rotatableNode!=null&&!o.rotatableNode.contains(A)&&(w||(w=py(go(o.rotatableNode,"transform"))),ge=rc(V,w)),v.find(ke=>ke.refNode===A)&&(o.forceSync=!0),this.updateRelativeAttrs(A,te,ge,o)})}}(function(c){c.DELAY_ATTRS=["text","textWrap","sourceMarker","targetMarker"]})(Dv||(Dv={}));class D_{constructor(e,t,o=[]){this.view=e;const l={},d={};let f=0;Object.keys(t).forEach(x=>{let w=t[x];Array.isArray(w)||(w=[w]),w.forEach(_=>{let A=l[_];A||(f+=1,A=l[_]=1<<f),d[x]|=A})});let v=o;if(Array.isArray(v)||(v=[v]),v.forEach(x=>{l[x]||(f+=1,l[x]=1<<f)}),f>25)throw new Error("Maximum number of flags exceeded.");this.flags=l,this.attrs=d,this.bootstrap=o}get cell(){return this.view.cell}getFlag(e){const t=this.flags;return t==null?0:Array.isArray(e)?e.reduce((o,l)=>o|t[l],0):t[e]|0}hasAction(e,t){return e&this.getFlag(t)}removeAction(e,t){return e^e&this.getFlag(t)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let e=0;return this.attrs&&Object.keys(this.attrs).forEach(t=>{this.cell.hasChanged(t)&&(e|=this.attrs[t])}),e}}var N_=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class As extends Ki{constructor(e,t={}){super(),this.cell=e,this.options=this.ensureOptions(t),this.graph=this.options.graph,this.attr=new Dv(this),this.flag=new D_(this,this.options.actions,this.options.bootstrap),this.cache=new Pv(this),this.setContainer(this.ensureContainer()),this.setup(),this.$(this.container).data("view",this),this.init()}static getDefaults(){return this.defaults}static config(e){this.defaults=this.getOptions(e)}static getOptions(e){const t=(w,_)=>_!=null?sa([...Array.isArray(w)?w:[w],...Array.isArray(_)?_:[_]]):Array.isArray(w)?[...w]:[w],o=Tr(this.getDefaults()),{bootstrap:l,actions:d,events:f,documentEvents:v}=e,x=N_(e,["bootstrap","actions","events","documentEvents"]);return l&&(o.bootstrap=t(o.bootstrap,l)),d&&Object.keys(d).forEach(w=>{const _=d[w],A=o.actions[w];_&&A?o.actions[w]=t(A,_):_&&(o.actions[w]=t(_))}),f&&(o.events=Object.assign(Object.assign({},o.events),f)),e.documentEvents&&(o.documentEvents=Object.assign(Object.assign({},o.documentEvents),v)),Fo(o,x)}get[Symbol.toStringTag](){return As.toStringTag}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(e){return this.getConstructor().getOptions(e)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return Ki.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(e){if(this.container!==e){this.undelegateEvents(),this.container=e,this.options.events!=null&&this.delegateEvents(this.options.events);const t=this.getContainerAttrs();t!=null&&this.setAttrs(t,e);const o=this.getContainerStyle();o!=null&&this.setStyle(o,e);const l=this.getContainerClassName();l!=null&&this.addClass(l,e)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(e,t={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(e){return this.flag.getFlag(e)}hasAction(e,t){return this.flag.hasAction(e,t)}removeAction(e,t){return this.flag.removeAction(e,t)}handleAction(e,t,o,l){if(this.hasAction(e,t)){o();const d=[t];return l&&(typeof l=="string"?d.push(l):d.push(...l)),this.removeAction(e,d)}return e}setup(){this.cell.on("changed",({options:e})=>this.onAttrsChange(e))}onAttrsChange(e){let t=this.flag.getChangedFlag();e.updated||!t||(e.dirty&&this.hasAction(t,"update")&&(t|=this.getFlag("render")),e.toolId&&(e.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,t,this.priority,e))}parseJSONMarkup(e,t){const o=Qi.parseJSONMarkup(e),l=o.selectors,d=this.rootSelector;if(t&&d){if(l[d])throw new Error("Invalid root selector");l[d]=t}return o}can(e){let t=this.graph.options.interacting;if(typeof t=="function"&&(t=ir(t,this.graph,this)),typeof t=="object"){let o=t[e];return typeof o=="function"&&(o=ir(o,this.graph,this)),o!==!1}return typeof t=="boolean"?t:!1}cleanCache(){return this.cache.clean(),this}getCache(e){return this.cache.get(e)}getDataOfElement(e){return this.cache.getData(e)}getMatrixOfElement(e){return this.cache.getMatrix(e)}getShapeOfElement(e){return this.cache.getShape(e)}getScaleOfElement(e,t){let o,l;if(t&&t.contains(e)){const d=Uh(t);o=1/d.sx,l=1/d.sy}else o=1,l=1;return{sx:o,sy:l}}getBoundingRectOfElement(e){return this.cache.getBoundingRect(e)}getBBoxOfElement(e){const t=this.getBoundingRectOfElement(e),o=this.getMatrixOfElement(e),l=this.getRootRotatedMatrix(),d=this.getRootTranslatedMatrix();return rc(t,d.multiply(l).multiply(o))}getUnrotatedBBoxOfElement(e){const t=this.getBoundingRectOfElement(e),o=this.getMatrixOfElement(e),l=this.getRootTranslatedMatrix();return rc(t,l.multiply(o))}getBBox(e={}){let t;if(e.useCellGeometry){const o=this.cell,l=o.isNode()?o.getAngle():0;t=o.getBBox().bbox(l)}else t=this.getBBoxOfElement(this.container);return this.graph.localToGraph(t)}getRootTranslatedMatrix(){const e=this.cell,t=e.isNode()?e.getPosition():{x:0,y:0};return rl().translate(t.x,t.y)}getRootRotatedMatrix(){let e=rl();const t=this.cell,o=t.isNode()?t.getAngle():0;if(o){const l=t.getBBox(),d=l.width/2,f=l.height/2;e=e.translate(d,f).rotate(o).translate(-d,-f)}return e}findMagnet(e=this.container){return this.findByAttr("magnet",e)}updateAttrs(e,t,o={}){o.rootBBox==null&&(o.rootBBox=new zn),o.selectors==null&&(o.selectors=this.selectors),this.attr.update(e,t,o)}isEdgeElement(e){return this.cell.isEdge()&&(e==null||e===this.container)}prepareHighlight(e,t={}){const o=e&&this.$(e)[0]||this.container;return t.partial=o===this.container,o}highlight(e,t={}){const o=this.prepareHighlight(e,t);return this.notify("cell:highlight",{magnet:o,options:t,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:o,options:t,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:o,options:t,view:this,node:this.cell,cell:this.cell}),this}unhighlight(e,t={}){const o=this.prepareHighlight(e,t);return this.notify("cell:unhighlight",{magnet:o,options:t,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:o,options:t,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:o,options:t,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(e,t){}getEdgeTerminal(e,t,o,l,d){const f=this.cell,v=this.findAttr("port",e),x=e.getAttribute("data-selector"),w={cell:f.id};return x!=null&&(w.magnet=x),v!=null?(w.port=v,f.isNode()&&!f.hasPort(v)&&x==null&&(w.selector=this.getSelector(e))):x==null&&this.container!==e&&(w.selector=this.getSelector(e)),this.customizeEdgeTerminal(w,e,t,o,l,d)}customizeEdgeTerminal(e,t,o,l,d,f){const v=d.getStrategy()||this.graph.options.connecting.strategy;if(v){const x=typeof v=="string"?v:v.name,w=typeof v=="string"?{}:v.args||{},_=sg.registry;if(x){const A=_.get(x);if(A==null)return _.onNotFound(x);const P=ir(A,this.graph,e,this,t,new $e(o,l),d,f,w);if(P)return P}}return e}getMagnetFromEdgeTerminal(e){const t=this.cell,o=this.container,l=e.port;let d=e.magnet,f;return l!=null&&t.isNode()&&t.hasPort(l)?f=this.findPortElem(l,d)||o:(d||(d=e.selector),!d&&l!=null&&(d=`[port="${l}"]`),f=this.findOne(d,o,this.selectors)),f}animate(e,t){const o=typeof e=="string"?this.findOne(e):e;if(o==null)throw new Error("Invalid animation element.");const l=o.parentNode,d=()=>{l||id(o)},f=dr.create(o);l||f.appendTo(this.graph.view.stage);const v=t.complete;return t.complete=x=>{d(),v&&v(x)},f.animate(t)}animateTransform(e,t){const o=typeof e=="string"?this.findOne(e):e;if(o==null)throw new Error("Invalid animation element.");const l=o.parentNode,d=()=>{l||id(o)},f=dr.create(o);l||f.appendTo(this.graph.view.stage);const v=t.complete;return t.complete=x=>{d(),v&&v(x)},f.animateTransform(t)}hasTools(e){const t=this.tools;return t==null?!1:e==null?!0:t.name===e}addTools(e){if(!this.can("toolsAddable"))return this;if(this.removeTools(),e){const t=Ma.isToolsView(e)?e:new Ma(e);this.tools=t,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),t.config({view:this}),t.mount()}return this}updateTools(e={}){return this.tools&&this.tools.update(e),this}removeTools(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const e=this.cell.getTools();return this.addTools(e),this}notify(e,t){return this.trigger(e,t),this.graph.trigger(e,t),this}getEventArgs(e,t,o){const l=this,d=l.cell;return t==null||o==null?{e,view:l,cell:d}:{e,x:t,y:o,view:l,cell:d}}onClick(e,t,o){this.notify("cell:click",this.getEventArgs(e,t,o))}onDblClick(e,t,o){this.notify("cell:dblclick",this.getEventArgs(e,t,o))}onContextMenu(e,t,o){this.notify("cell:contextmenu",this.getEventArgs(e,t,o))}onMouseDown(e,t,o){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(e,t,o))}onMouseUp(e,t,o){this.notify("cell:mouseup",this.getEventArgs(e,t,o)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(e,t,o){this.notify("cell:mousemove",this.getEventArgs(e,t,o))}onMouseOver(e){this.notify("cell:mouseover",this.getEventArgs(e))}onMouseOut(e){this.notify("cell:mouseout",this.getEventArgs(e))}onMouseEnter(e){this.notify("cell:mouseenter",this.getEventArgs(e))}onMouseLeave(e){this.notify("cell:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,o,l){this.notify("cell:mousewheel",Object.assign({delta:l},this.getEventArgs(e,t,o)))}onCustomEvent(e,t,o,l){this.notify("cell:customevent",Object.assign({name:t},this.getEventArgs(e,o,l))),this.notify(t,Object.assign({},this.getEventArgs(e,o,l)))}onMagnetMouseDown(e,t,o,l){}onMagnetDblClick(e,t,o,l){}onMagnetContextMenu(e,t,o,l){}onLabelMouseDown(e,t,o){}checkMouseleave(e){const t=this.graph;t.renderer.isAsync()&&t.renderer.dumpView(this);const o=this.getEventTarget(e,{fromPoint:!0}),l=t.renderer.findViewByElem(o);l!==this&&(this.onMouseLeave(e),l&&l.onMouseEnter(e))}}As.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},function(c){c.Flag=D_,c.Attr=Dv}(As||(As={})),function(c){c.toStringTag=`X6.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&typeof l.isNodeView=="function"&&typeof l.isEdgeView=="function"&&typeof l.confirmUpdate=="function"}c.isCellView=e}(As||(As={})),function(c){function e(o){return function(l){l.config({priority:o})}}c.priority=e;function t(o){return function(l){l.config({bootstrap:o})}}c.bootstrap=t}(As||(As={})),function(c){c.registry=Vs.create({type:"view"})}(As||(As={}));class Ma extends Ki{constructor(e={}){super(),this.svgContainer=this.createContainer(!0,e),this.htmlContainer=this.createContainer(!1,e),this.config(e)}get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return Ma.toStringTag}createContainer(e,t){const o=e?Ki.createElement("g",!0):Ki.createElement("div",!1);return ao(o,this.prefixClassName("cell-tools")),t.className&&ao(o,t.className),o}config(e){if(this.options=Object.assign(Object.assign({},this.options),e),!As.isCellView(e.view)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?(ao(this.svgContainer,this.prefixClassName("edge-tools")),ao(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(ao(this.svgContainer,this.prefixClassName("node-tools")),ao(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const t=this.options.items;if(!Array.isArray(t))return this;this.tools=[];const o=[];t.forEach(l=>{Ma.ToolItem.isToolItem(l)?l.name==="vertices"?o.unshift(l):o.push(l):(typeof l=="object"?l.name:l)==="vertices"?o.unshift(l):o.push(l)});for(let l=0;l<o.length;l+=1){const d=o[l];let f;if(Ma.ToolItem.isToolItem(d))f=d;else{const v=typeof d=="object"?d.name:d,x=typeof d=="object"?d.args||{}:{};if(v){if(this.cell.isNode()){const w=x0.registry.get(v);if(w)f=new w(x);else return x0.registry.onNotFound(v)}else if(this.cell.isEdge()){const w=C0.registry.get(v);if(w)f=new w(x);else return C0.registry.onNotFound(v)}}}f&&(f.config(this.cellView,this),f.render(),(f.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer).appendChild(f.container),this.tools.push(f))}return this}update(e={}){const t=this.tools;return t&&t.forEach(o=>{e.toolId!==o.cid&&o.isVisible()&&o.update()}),this}focus(e){const t=this.tools;return t&&t.forEach(o=>{e===o?o.show():o.hide()}),this}blur(e){const t=this.tools;return t&&t.forEach(o=>{o!==e&&!o.isVisible()&&(o.show(),o.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const e=this.tools;return e&&(e.forEach(t=>t.remove()),this.tools=null),id(this.svgContainer),id(this.htmlContainer),super.remove()}mount(){const e=this.tools,t=this.cellView;if(t&&e){const o=e.some(d=>d.options.isSVGElement!==!1),l=e.some(d=>d.options.isSVGElement===!1);o&&(this.options.local?t.container:t.graph.view.decorator).appendChild(this.svgContainer),l&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(c){c.toStringTag=`X6.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&l.graph!=null&&l.cell!=null&&typeof l.config=="function"&&typeof l.update=="function"&&typeof l.focus=="function"&&typeof l.blur=="function"&&typeof l.show=="function"&&typeof l.hide=="function"}c.isToolsView=e})(Ma||(Ma={})),function(c){class e extends Ki{constructor(o={}){super(),this.visible=!0,this.options=this.getOptions(o),this.container=Ki.createElement(this.options.tagName||"g",this.options.isSVGElement!==!1),ao(this.container,this.prefixClassName("cell-tool")),typeof this.options.className=="string"&&ao(this.container,this.options.className),this.init()}static getDefaults(){return this.defaults}static config(o){this.defaults=this.getOptions(o)}static getOptions(o){return Fo(Tr(this.getDefaults()),o)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return e.toStringTag}init(){}getOptions(o){return this.constructor.getOptions(o)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(o,l){return this.cellView=o,this.parent=l,this.stamp(this.container),this.cell.isEdge()?ao(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&ao(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const o=this.options.markup;if(o){const l=Qi.isStringMarkup(o)?Qi.parseStringMarkup(o):Qi.parseJSONMarkup(o);this.container.appendChild(l.fragment),this.childNodes=l.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(o){o&&o.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return!!this.visible}focus(){const o=this.options.focusOpacity;return o!=null&&Number.isFinite(o)&&(this.container.style.opacity=`${o}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(o){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(o,this.cellView)}}e.defaults={isSVGElement:!0,tagName:"g"},c.ToolItem=e,function(t){let o=0;function l(f){return f?cC(f):(o+=1,`CustomTool${o}`)}function d(f){const v=lv(l(f.name),this);return v.config(f),v}t.define=d}(e=c.ToolItem||(c.ToolItem={})),function(t){t.toStringTag=`X6.${t.name}`;function o(l){if(l==null)return!1;if(l instanceof t)return!0;const d=l[Symbol.toStringTag],f=l;return(d==null||d===t.toStringTag)&&f.graph!=null&&f.cell!=null&&typeof f.config=="function"&&typeof f.update=="function"&&typeof f.focus=="function"&&typeof f.blur=="function"&&typeof f.show=="function"&&typeof f.hide=="function"&&typeof f.isVisible=="function"}t.isToolItem=o}(e=c.ToolItem||(c.ToolItem={}))}(Ma||(Ma={}));function I_(c,e,t,o){return ir(sg.presets.pinRelative,this.graph,{},e,t,c,this.cell,o,{}).anchor}function YC(c,e){return e?c.cell.getBBox():c.cell.isEdge()?c.getConnection().bbox():c.getUnrotatedBBoxOfElement(c.container)}class Qf extends Ma.ToolItem{onRender(){ao(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();Xf(this.container,t,{absolute:!0})}getNodeMatrix(){const e=this.cellView,t=this.options;let{x:o=0,y:l=0}=t;const{offset:d,useCellGeometry:f,rotate:v}=t;let x=YC(e,f);const w=e.cell.getAngle();v||(x=x.bbox(w));let _=0,A=0;typeof d=="number"?(_=d,A=d):typeof d=="object"&&(_=d.x,A=d.y),o=rd(o,x.width),l=rd(l,x.height);let P=rl().translate(x.x+x.width/2,x.y+x.height/2);return v&&(P=P.rotate(w)),P=P.translate(o+_-x.width/2,l+A-x.height/2),P}getEdgeMatrix(){const e=this.cellView,t=this.options,{offset:o=0,distance:l=0,rotate:d}=t;let f,v,x;const w=rd(l,1);w>=0&&w<=1?f=e.getTangentAtRatio(w):f=e.getTangentAtLength(w),f?(v=f.start,x=f.vector().vectorAngle(new $e(1,0))||0):(v=e.getConnection().start,x=0);let _=rl().translate(v.x,v.y).rotate(x);return typeof o=="object"?_=_.translate(o.x||0,o.y||0):_=_.translate(0,o),d||(_=_.rotate(-x)),_}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.options.onClick;typeof t=="function"&&ir(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(c){c.config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(Qf||(Qf={})),function(c){c.Remove=c.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick({view:e,btn:t}){t.parent.remove(),e.cell.remove({ui:!0,toolId:t.cid})}})}(Qf||(Qf={}));var zO=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class k2 extends Ma.ToolItem{onRender(){if(ao(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const e=this.options.attrs,{class:t}=e,o=zO(e,["class"]);go(this.container,uy(o)),t&&ao(this.container,t)}this.update()}update(){const e=this.cellView,t=this.options,{useCellGeometry:o,rotate:l}=t,d=Cc(t.padding);let f=YC(e,o).moveAndExpand({x:-d.left,y:-d.top,width:d.left+d.right,height:d.top+d.bottom});const v=e.cell;if(v.isNode()){const x=v.getAngle();if(x)if(l){const w=v.getBBox().getCenter();qp(this.container,x,w.x,w.y,{absolute:!0})}else f=f.bbox(x)}return go(this.container,f.toJSON()),this}}(function(c){c.config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(k2||(k2={}));class y0 extends Ma.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}renderHandles(){const e=this.vertices;for(let t=0,o=e.length;t<o;t+=1){const l=e[t],d=this.options.createHandle,f=this.options.processHandle,v=d({index:t,graph:this.graph,guard:x=>this.guard(x),attrs:this.options.attrs||{}});f&&f(v),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:v}),v.updatePosition(l.x,l.y),this.stamp(v.container),this.container.appendChild(v.container),this.handles.push(v),this.startHandleListening(v)}}updateHandles(){const e=this.vertices;for(let t=0,o=e.length;t<o;t+=1){const l=e[t],d=this.handles[t];d&&d.updatePosition(l.x,l.y)}}updatePath(){const e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}stopHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}getNeighborPoints(e){const t=this.cellView,o=this.vertices,l=e>0?o[e-1]:t.sourceAnchor,d=e<o.length-1?o[e+1]:t.targetAnchor;return{prev:$e.create(l),next:$e.create(d)}}getMouseEventArgs(e){const t=this.normalizeEvent(e),{x:o,y:l}=this.graph.snapToGrid(t.clientX,t.clientY);return{e:t,x:o,y:l}}onHandleChange({e}){this.focus();const t=this.cellView;if(t.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:o,x:l,y:d}=this.getMouseEventArgs(e);t.notifyMouseDown(o,l,d)}}onHandleChanging({handle:e,e:t}){const o=this.cellView,l=e.options.index,{e:d,x:f,y:v}=this.getMouseEventArgs(t),x={x:f,y:v};this.snapVertex(x,l),o.cell.setVertexAt(l,x,{ui:!0,toolId:this.cid}),e.updatePosition(x.x,x.y),this.options.stopPropagation||o.notifyMouseMove(d,f,v)}onHandleChanged({e}){const t=this.options,o=this.cellView;if(t.addable&&this.updatePath(),!t.removeRedundancies)return;o.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),o.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(e).vertexAdded&&o.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});const{e:d,x:f,y:v}=this.getMouseEventArgs(e);this.options.stopPropagation||o.notifyMouseUp(d,f,v),o.checkMouseleave(d),t.onChanged&&t.onChanged({edge:o.cell,edgeView:o})}snapVertex(e,t){const o=this.options.snapRadius||0;if(o>0){const l=this.getNeighborPoints(t),d=l.prev,f=l.next;Math.abs(e.x-d.x)<o?e.x=d.x:Math.abs(e.x-f.x)<o&&(e.x=f.x),Math.abs(e.y-d.y)<o?e.y=l.prev.y:Math.abs(e.y-f.y)<o&&(e.y=f.y)}}onHandleRemove({handle:e,e:t}){if(this.options.removable){const o=e.options.index,l=this.cellView;l.cell.removeVertexAt(o,{ui:!0}),this.options.addable&&this.updatePath(),l.checkMouseleave(this.normalizeEvent(t))}}onPathMouseDown(e){const t=this.cellView;if(this.guard(e)||!this.options.addable||!t.can("vertexAddable"))return;e.stopPropagation(),e.preventDefault();const o=this.normalizeEvent(e),l=this.graph.snapToGrid(o.clientX,o.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const d=t.getVertexIndex(l.x,l.y);this.snapVertex(l,d),t.cell.insertVertex(l,d,{ui:!0,toolId:this.cid}),this.render();const f=this.handles[d];this.eventData(o,{vertexAdded:!0}),f.onMouseDown(o)}onRemove(){this.resetHandles()}}(function(c){class e extends Ki{constructor(o){super(),this.options=o,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}get graph(){return this.options.graph}render(){this.container=Ki.createElement("circle",!0);const o=this.options.attrs;if(typeof o=="function"){const l=c.getDefaults();this.setAttrs(Object.assign(Object.assign({},l.attrs),o(this)))}else this.setAttrs(o);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(o,l){this.setAttrs({cx:o,cy:l})}onMouseDown(o){this.options.guard(o)||(o.stopPropagation(),o.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},o.data),this.emit("change",{e:o,handle:this}))}onMouseMove(o){this.emit("changing",{e:o,handle:this})}onMouseUp(o){this.emit("changed",{e:o,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(o){this.emit("remove",{e:o,handle:this})}}c.Handle=e})(y0||(y0={})),function(c){const e=va.prefix("edge-tool-vertex-path");c.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:t=>new c.Handle(t),markup:[{tagName:"path",selector:"connection",className:e,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${e}`]:"onPathMouseDown",[`touchstart .${e}`]:"onPathMouseDown"}})}(y0||(y0={}));class Nv extends Ma.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){ao(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const e=this.cellView,t=[...this.vertices];t.unshift(e.sourcePoint),t.push(e.targetPoint);for(let o=0,l=t.length;o<l-1;o+=1){const d=t[o],f=t[o+1],v=this.renderHandle(d,f,o);this.stamp(v.container),this.handles.push(v)}return this}renderHandle(e,t,o){const l=this.options.createHandle({index:o,graph:this.graph,guard:d=>this.guard(d),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(l),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:l}),this.updateHandle(l,e,t),this.container.appendChild(l.container),this.startHandleListening(l),l}startHandleListening(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}stopHandleListening(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}shiftHandleIndexes(e){const t=this.handles;for(let o=0,l=t.length;o<l;o+=1)t[o].options.index+=e}resetAnchor(e,t){const o=this.cellView.cell,l={ui:!0,toolId:this.cid};t?o.prop([e,"anchor"],t,l):o.removeProp([e,"anchor"],l)}snapHandle(e,t,o){const l=e.options.axis,d=e.options.index,x=this.cellView.cell.getVertices(),w=x[d-2]||o.sourceAnchor,_=x[d+1]||o.targetAnchor,A=this.options.snapRadius;return Math.abs(t[l]-w[l])<A?t[l]=w[l]:Math.abs(t[l]-_[l])<A&&(t[l]=_[l]),t}onHandleChanging({handle:e,e:t}){const o=this.graph,l=this.options,d=this.cellView,f=l.anchor,v=e.options.axis,x=e.options.index-1,w=this.getEventData(t),_=this.normalizeEvent(t),A=o.snapToGrid(_.clientX,_.clientY),P=this.snapHandle(e,A.clone(),w),V=Tr(this.vertices);let q=V[x],te=V[x+1];const ge=d.sourceView,_e=d.sourceBBox;let ke=!1,Se=!1;if(q?x===0?_e.containsPoint(q)?(V.shift(),this.shiftHandleIndexes(-1),ke=!0):(q[v]=P[v],Se=!0):q[v]=P[v]:(q=d.sourceAnchor.toJSON(),q[v]=P[v],_e.containsPoint(q)?ke=!0:(V.unshift(q),this.shiftHandleIndexes(1),Se=!0)),typeof f=="function"&&ge){if(ke){const Jt=w.sourceAnchor.clone();Jt[v]=P[v];const Un=ir(f,d,Jt,ge,d.sourceMagnet||ge.container,"source",d,this);this.resetAnchor("source",Un)}Se&&this.resetAnchor("source",w.sourceAnchorDef)}const je=d.targetView,nt=d.targetBBox;let wt=!1,It=!1;if(te?x===V.length-2?nt.containsPoint(te)?(V.pop(),wt=!0):(te[v]=P[v],It=!0):te[v]=P[v]:(te=d.targetAnchor.toJSON(),te[v]=P[v],nt.containsPoint(te)?wt=!0:(V.push(te),It=!0)),typeof f=="function"&&je){if(wt){const Jt=w.targetAnchor.clone();Jt[v]=P[v];const Un=ir(f,d,Jt,je,d.targetMagnet||je.container,"target",d,this);this.resetAnchor("target",Un)}It&&this.resetAnchor("target",w.targetAnchorDef)}$e.equalPoints(V,this.vertices)||this.cellView.cell.setVertices(V,{ui:!0,toolId:this.cid}),this.updateHandle(e,q,te,0),l.stopPropagation||d.notifyMouseMove(_,A.x,A.y)}onHandleChange({handle:e,e:t}){const o=this.options,l=this.handles,d=this.cellView,f=e.options.index;if(Array.isArray(l)){for(let v=0,x=l.length;v<x;v+=1)v!==f&&l[v].hide();if(this.focus(),this.setEventData(t,{sourceAnchor:d.sourceAnchor.clone(),targetAnchor:d.targetAnchor.clone(),sourceAnchorDef:Tr(this.cell.prop(["source","anchor"])),targetAnchorDef:Tr(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!o.stopPropagation){const v=this.normalizeEvent(t),x=this.graph.snapToGrid(v.clientX,v.clientY);d.notifyMouseDown(v,x.x,x.y)}}}onHandleChanged({e}){const t=this.options,o=this.cellView;t.removeRedundancies&&o.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const l=this.normalizeEvent(e),d=this.graph.snapToGrid(l.clientX,l.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),t.stopPropagation||o.notifyMouseUp(l,d.x,d.y),o.checkMouseleave(l),t.onChanged&&t.onChanged({edge:o.cell,edgeView:o})}updateHandle(e,t,o,l=0){const d=this.options.precision||0,f=Math.abs(t.x-o.x)<d,v=Math.abs(t.y-o.y)<d;if(f||v){const x=new mr(t,o);if(x.length()<this.options.threshold)e.hide();else{const _=x.getCenter(),A=f?"x":"y";_[A]+=l||0;const P=x.vector().vectorAngle(new $e(1,0));e.updatePosition(_.x,_.y,P,this.cellView),e.show(),e.options.axis=A}}else e.hide()}onRemove(){this.resetHandles()}}(function(c){class e extends Ki{constructor(o){super(),this.options=o,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=Ki.createElement("rect",!0);const o=this.options.attrs;if(typeof o=="function"){const l=c.getDefaults();this.setAttrs(Object.assign(Object.assign({},l.attrs),o(this)))}else this.setAttrs(o);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(o,l,d,f){const v=f.getClosestPoint(new $e(o,l))||new $e(o,l);let x=rl().translate(v.x,v.y);if(v.equals({x:o,y:l}))x=x.rotate(d);else{let _=new mr(o,l,v.x,v.y).vector().vectorAngle(new $e(1,0));_!==0&&(_+=90),x=x.rotate(_)}this.setAttrs({transform:h0(x),cursor:d%180===0?"row-resize":"col-resize"})}onMouseDown(o){this.options.guard(o)||(this.trigger("change",{e:o,handle:this}),o.stopPropagation(),o.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},o.data))}onMouseMove(o){this.emit("changing",{e:o,handle:this})}onMouseUp(o){this.emit("changed",{e:o,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}c.Handle=e})(Nv||(Nv={})),function(c){c.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:e=>new c.Handle(e),anchor:I_})}(Nv||(Nv={}));class L2 extends Ma.ToolItem{get type(){return this.options.type}onRender(){ao(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){const e=this.type;return this.cellView.getTerminalView(e)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const e=this.childNodes;if(!e)return;const t=e.anchor;if(!t)return;const o=this.type,l=this.cellView,d=this.options,f=l.getTerminalAnchor(o),v=l.cell.prop([o,"anchor"]);t.setAttribute("transform",`translate(${f.x}, ${f.y})`);const x=v?d.customAnchorAttrs:d.defaultAnchorAttrs;x&&Object.keys(x).forEach(w=>{t.setAttribute(w,x[w])})}updateArea(){const e=this.childNodes;if(!e)return;const t=e.area;if(!t)return;const o=this.type,l=this.cellView,d=l.getTerminalView(o);if(d){const f=d.cell,v=l.getTerminalMagnet(o);let x=this.options.areaPadding||0;Number.isFinite(x)||(x=0);let w,_,A;d.isEdgeElement(v)?(w=d.getBBox(),_=0,A=w.getCenter()):(w=d.getUnrotatedBBoxOfElement(v),_=f.getAngle(),A=w.getCenter(),_&&A.rotate(-_,f.getBBox().getCenter())),w.inflate(x),go(t,{x:-w.width/2,y:-w.height/2,width:w.width,height:w.height,transform:`translate(${A.x}, ${A.y}) rotate(${_})`})}}toggleArea(e){if(this.childNodes){const t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}onMouseDown(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(e){const t=this.type,o=this.cell;e?o.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):o.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(e){const t=this.type,o=this.cellView,l=o.getTerminalView(t);if(l==null)return;const d=this.normalizeEvent(e),f=l.cell,v=o.getTerminalMagnet(t);let x=this.graph.clientToLocal(d.clientX,d.clientY);const w=this.options.snap;if(typeof w=="function"){const P=ir(w,o,x,l,v,t,o,this);x=$e.create(P)}if(this.options.restrictArea)if(l.isEdgeElement(v)){const P=l.getClosestPoint(x);P&&(x=P)}else{const P=l.getUnrotatedBBoxOfElement(v),V=f.getAngle(),q=f.getBBox().getCenter(),te=x.clone().rotate(V,q);P.containsPoint(te)||(x=P.getNearestPointToPoint(te).rotate(-V,q))}let _;const A=this.options.anchor;typeof A=="function"&&(_=ir(A,o,x,l,v,t,o,this)),this.resetAnchor(_),this.update()}onMouseUp(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);const t=this.cellView;this.options.removeRedundancies&&t.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const e=this.options.resetAnchor;e&&this.resetAnchor(e===!0?void 0:e),this.update()}}(function(c){c.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:I_,snap(e,t,o,l,d,f){const v=f.options.snapRadius||0,x=l==="source",w=x?0:-1,_=this.cell.getVertexAt(w)||this.getTerminalAnchor(x?"target":"source");return _&&(Math.abs(_.x-e.x)<v&&(e.x=_.x),Math.abs(_.y-e.y)<v&&(e.y=_.y)),e}})})(L2||(L2={}));const UO=L2.define({name:"source-anchor",type:"source"}),R_=L2.define({name:"target-anchor",type:"target"});var k_=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class G2 extends Ma.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const e=this.options.attrs,{class:t}=e,o=k_(e,["class"]);this.setAttrs(o,this.container),t&&ao(this.container,t)}}onRender(){ao(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const e=this.ratio,t=this.cellView,o=t.getTangentAtRatio(e),l=o?o.start:t.getPointAtRatio(e),d=o&&o.vector().vectorAngle(new $e(1,0))||0;if(!l)return this;const f=rl().translate(l.x,l.y).rotate(d);return Xf(this.container,f,{absolute:!0}),this}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const o=this.graph.snapToGrid(e.clientX,e.clientY),l=t.prepareArrowheadDragging(this.type,{x:o.x,y:o.y,options:{toolId:this.cid}});this.cellView.setEventData(e,l),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(e){const t=this.normalizeEvent(e),o=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,o.x,o.y),this.update()}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),o=this.cellView,l=this.graph.snapToGrid(t.clientX,t.clientY);o.onMouseUp(t,l.x,l.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",o.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}(function(c){c.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(G2||(G2={}));const VO=G2.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),jO=G2.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class b0 extends Ma.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5}render(){return this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this}createElement(){const{cell:e}=this,t=[this.prefixClassName(`${e.isEdge()?"edge":"node"}-tool-editor`),this.prefixClassName("cell-tool-editor")];this.editor=Ma.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}updateEditor(){const{graph:e,cell:t,editor:o}=this,l=o.style;let d=new $e,f=20;if(t.isNode())d=t.getBBox().center,f=t.size().width-4;else if(t.isEdge()){const A=this.options.event,P=A.target,V=P.parentElement;if(V&&r0(V,this.prefixClassName("edge-label"))){const te=V.getAttribute("data-index")||"0";this.labelIndex=parseInt(te,10);const ge=V.getAttribute("transform"),{translation:_e}=Xd(ge);d=new $e(_e.tx,_e.ty),f=pa(P).width}else{if(!this.options.labelAddable)return this;d=e.clientToLocal($e.create(A.clientX,A.clientY));const ge=this.cellView.path.closestPointLength(d);this.distance=ge}}d=e.localToGraph(d),l.left=`${d.x}px`,l.top=`${d.y}px`,l.minWidth=`${f}px`;const v=e.scale();l.transform=`scale(${v.sx}, ${v.sy}) translate(-50%, -50%)`;const x=this.options.attrs;l.fontSize=`${x.fontSize}px`,l.fontFamily=x.fontFamily,l.color=x.color,l.backgroundColor=x.backgroundColor;const w=this.options.getText;let _;return typeof w=="function"&&(_=ir(w,this.cellView,{cell:this.cell,index:this.labelIndex})),o.innerText=_||"",this}onDocumentMouseDown(e){if(e.target!==this.editor){const t=this.cell,o=this.editor.innerText.replace(/\n$/,"")||"",l=this.options.setText;typeof l=="function"&&ir(l,this.cellView,{cell:this.cell,value:o,index:this.labelIndex,distance:this.distance}),t.removeTool(t.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}}onDblClick(e){e.stopPropagation()}onMouseDown(e){e.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor.focus(),this.selectText()})}selectText(){if(window.getSelection){const e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}}(function(c){c.config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(b0||(b0={})),function(c){c.NodeEditor=c.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText({cell:e}){return e.attr("text/text")},setText({cell:e,value:t}){e.attr("text/text",t)}}),c.EdgeEditor=c.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText({cell:e,index:t}){return t===-1?"":e.prop(`labels/${t}/attrs/label/text`)},setText({cell:e,value:t,index:o,distance:l}){const d=e;o===-1?d.appendLabel({position:{distance:l},attrs:{label:{text:t}}}):t?d.prop(`labels/${o}/attrs/label/text`,t):typeof o=="number"&&d.removeLabelAt(o)}})}(b0||(b0={}));var KC=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t},x0;(function(c){c.presets={boundary:k2,button:Qf,"button-remove":Qf.Remove,"node-editor":b0.NodeEditor},c.registry=Vs.create({type:"node tool",process(e,t){if(typeof t=="function")return t;let o=Ma.ToolItem;const{inherit:l}=t,d=KC(t,["inherit"]);if(l){const f=this.get(l);f==null?this.onNotFound(l,"inherited"):o=f}return d.name==null&&(d.name=e),o.define.call(o,d)}}),c.registry.register(c.presets,!0)})(x0||(x0={}));var C0;(function(c){c.presets={boundary:k2,vertices:y0,segments:Nv,button:Qf,"button-remove":Qf.Remove,"source-anchor":UO,"target-anchor":R_,"source-arrowhead":VO,"target-arrowhead":jO,"edge-editor":b0.EdgeEditor},c.registry=Vs.create({type:"edge tool",process(e,t){if(typeof t=="function")return t;let o=Ma.ToolItem;const{inherit:l}=t,d=KC(t,["inherit"]);if(l){const f=this.get(l);f==null?this.onNotFound(l,"inherited"):o=f}return d.name==null&&(d.name=e),o.define.call(o,d)}}),c.registry.register(c.presets,!0)})(C0||(C0={}));const HO=qh("center"),L_=qh("topCenter"),G_=qh("bottomCenter"),$O=qh("leftMiddle"),WO=qh("rightMiddle"),XO=qh("topLeft"),F_=qh("topRight"),B_=qh("bottomLeft"),z_=qh("bottomRight");function qh(c){return function(e,t,o,l={}){const d=l.rotate?e.getUnrotatedBBoxOfElement(t):e.getBBoxOfElement(t),f=d[c];f.x+=rd(l.dx,d.width),f.y+=rd(l.dy,d.height);const v=e.cell;return l.rotate?f.rotate(-v.getAngle(),v.getBBox().getCenter()):f}}function w0(c){return function(e,t,o,l){if(o instanceof Element){const d=this.graph.renderer.findViewByElem(o);let f;if(d)if(d.isEdgeElement(o)){const v=l.fixedAt!=null?l.fixedAt:"50%";f=qC(d,v)}else f=d.getBBoxOfElement(o).getCenter();else f=new $e;return c.call(this,e,t,f,l)}return c.apply(this,arguments)}}function qC(c,e){const t=Hd(e),o=typeof e=="string"?parseFloat(e):e;return t?c.getPointAtRatio(o/100):c.getPointAtLength(o)}const U_=w0(function(c,e,t,o){const l=c.cell.getAngle(),d=c.getBBoxOfElement(e),f=d.getCenter(),v=d.getTopLeft(),x=d.getBottomRight();let w=o.padding;if(Number.isFinite(w)||(w=0),v.y+w<=t.y&&t.y<=x.y-w){const _=t.y-f.y;f.x+=l===0||l===180?0:_*1/Math.tan(Yi.toRad(l)),f.y+=_}else if(v.x+w<=t.x&&t.x<=x.x-w){const _=t.x-f.x;f.y+=l===90||l===270?0:_*Math.tan(Yi.toRad(l)),f.x+=_}return f}),YO=function(c,e,t,o,l){const d=c.cell.getConnectionPoint(this.cell,l);return(o.dx||o.dy)&&d.translate(o.dx||0,o.dy||0),d},KO=w0(function(c,e,t,o){let l,d=0,f;const v=c.cell;o.rotate?(l=c.getUnrotatedBBoxOfElement(e),f=v.getBBox().getCenter(),d=v.getAngle()):l=c.getBBoxOfElement(e);const x=o.padding;x!=null&&Number.isFinite(x)&&l.inflate(x),o.rotate&&t.rotate(d,f);const w=l.getNearestSideToPoint(t);let _;switch(w){case"left":_=l.getLeftMiddle();break;case"right":_=l.getRightMiddle();break;case"top":_=l.getTopCenter();break;case"bottom":_=l.getBottomCenter();break;default:break}const A=o.direction;return A==="H"?(w==="top"||w==="bottom")&&(t.x<=l.x+l.width?_=l.getLeftMiddle():_=l.getRightMiddle()):A==="V"&&(t.y<=l.y+l.height?_=l.getTopCenter():_=l.getBottomCenter()),o.rotate?_.rotate(-d,f):_});var E0;(function(c){c.presets=le,c.registry=Vs.create({type:"node endpoint"}),c.registry.register(c.presets,!0)})(E0||(E0={}));const qO=function(c,e,t,o){let l=o.ratio!=null?o.ratio:.5;return l>1&&(l/=100),c.getPointAtRatio(l)},JO=function(c,e,t,o){const l=o.length!=null?o.length:20;return c.getPointAtLength(l)},V_=function(c,e,t,o){const l=c.getClosestPoint(t);return l!=null?l:new $e},j_=w0(V_),H_=w0(function(c,e,t,o){const d=c.getConnection(),f=c.getConnectionSubdivisions(),v=new mr(t.clone().translate(0,1e6),t.clone().translate(0,-1e6)),x=new mr(t.clone().translate(1e6,0),t.clone().translate(-1e6,0)),w=v.intersect(d,{segmentSubdivisions:f}),_=x.intersect(d,{segmentSubdivisions:f}),A=[];return w&&A.push(...w),_&&A.push(..._),A.length>0?t.closest(A):o.fallbackAt!=null?qC(c,o.fallbackAt):ir(V_,this,c,e,t,o)});var ag;(function(c){c.presets=be,c.registry=Vs.create({type:"edge endpoint"}),c.registry.register(c.presets,!0)})(ag||(ag={}));function Ey(c,e,t){let o;if(typeof t=="object"){if(Number.isFinite(t.y)){const d=new mr(e,c),{start:f,end:v}=d.parallel(t.y);e=f,c=v}o=t.x}else o=t;if(o==null||!Number.isFinite(o))return c;const l=c.distance(e);return o===0&&l>0?c:c.move(e,-Math.min(o,l-1))}function Sy(c){const e=c.getAttribute("stroke-width");return e===null?0:parseFloat(e)||0}function $_(c){if(c==null)return null;let e=c;do{let t=e.tagName;if(typeof t!="string")return null;if(t=t.toUpperCase(),t==="G")e=e.firstElementChild;else if(t==="TITLE")e=e.nextElementSibling;else break}while(e);return e}const Iv=function(c,e,t,o){const l=e.getBBoxOfElement(t);o.stroked&&l.inflate(Sy(t)/2);const d=c.intersect(l),f=d&&d.length?c.start.closest(d):c.end;return Ey(f,c.start,o.offset)},W_=function(c,e,t,o,l){const d=e.cell,f=d.isNode()?d.getAngle():0;if(f===0)return ir(Iv,this,c,e,t,o,l);const v=e.getUnrotatedBBoxOfElement(t);o.stroked&&v.inflate(Sy(t)/2);const x=v.getCenter(),w=c.clone().rotate(f,x),_=w.setLength(1e6).intersect(v),A=_&&_.length?w.start.closest(_).rotate(-f,x):c.end;return Ey(A,c.start,o.offset)},X_=function(c,e,t,o){let l,d;const f=c.end,v=o.selector;if(typeof v=="string"?l=e.findOne(v):Array.isArray(v)?l=Bf(t,v):l=$_(t),!Hf(l)){if(l===t||!Hf(t))return f;l=t}const x=e.getShapeOfElement(l),w=e.getMatrixOfElement(l),_=e.getRootTranslatedMatrix(),A=e.getRootRotatedMatrix(),P=_.multiply(A).multiply(w),V=P.inverse(),q=Kp(c,V),te=q.start.clone(),ge=e.getDataOfElement(l);if(o.insideout===!1){ge.shapeBBox==null&&(ge.shapeBBox=x.bbox());const je=ge.shapeBBox;if(je!=null&&je.containsPoint(te))return f}o.extrapolate===!0&&q.setLength(1e6);let _e;if(Vr.isPath(x)){const je=o.precision||2;ge.segmentSubdivisions==null&&(ge.segmentSubdivisions=x.getSegmentSubdivisions({precision:je})),_e={precision:je,segmentSubdivisions:ge.segmentSubdivisions},d=q.intersect(x,_e)}else d=q.intersect(x);d?Array.isArray(d)&&(d=te.closest(d)):o.sticky===!0&&(zn.isRectangle(x)?d=x.getNearestPointToPoint(te):od.isEllipse(x)?d=x.intersectsWithLineFromCenterToPoint(te):d=x.closestPoint(te,_e));const ke=d?il(d,P):f;let Se=o.offset||0;return o.stroked!==!1&&(typeof Se=="object"?(Se=Object.assign({},Se),Se.x==null&&(Se.x=0),Se.x+=Sy(l)/2):Se+=Sy(l)/2),Ey(ke,c.start,Se)};function Z_(c,e,t=0){const{start:o,end:l}=c;let d,f,v,x;switch(e){case"left":x="x",d=l,f=o,v=-1;break;case"right":x="x",d=o,f=l,v=1;break;case"top":x="y",d=l,f=o,v=-1;break;case"bottom":x="y",d=o,f=l,v=1;break;default:return}o[x]<l[x]?d[x]=f[x]:f[x]=d[x],Number.isFinite(t)&&(d[x]+=v*t,f[x]+=v*t)}const Y_=function(c,e,t,o){const{alignOffset:l,align:d}=o;return d&&Z_(c,d,l),Ey(c.end,c.start,o.offset)};var S0;(function(c){c.presets=se,c.registry=Vs.create({type:"connection point"}),c.registry.register(c.presets,!0)})(S0||(S0={}));const e3=function(c){return[...c]},t3=function(c,e,t){const o=e.side||"bottom",l=Cc(e.padding||40),d=t.sourceBBox,f=t.targetBBox,v=d.getCenter(),x=f.getCenter();let w,_,A;switch(o){case"top":A=-1,w="y",_="height";break;case"left":A=-1,w="x",_="width";break;case"right":A=1,w="x",_="width";break;case"bottom":default:A=1,w="y",_="height";break}return v[w]+=A*(d[_]/2+l[o]),x[w]+=A*(f[_]/2+l[o]),A*(v[w]-x[w])>0?x[w]=v[w]:v[w]=x[w],[v.toJSON(),...c,x.toJSON()]};function F2(c){return new zn(c.x,c.y,0,0)}function B2(c={}){const e=Cc(c.padding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function _y(c,e={}){return c.sourceBBox.clone().moveAndExpand(B2(e))}function lg(c,e={}){return c.targetBBox.clone().moveAndExpand(B2(e))}function z2(c,e={}){return c.sourceAnchor?c.sourceAnchor:_y(c,e).getCenter()}function Ay(c,e={}){return c.targetAnchor?c.targetAnchor:lg(c,e).getCenter()}const K_=function(c,e,t){let o=_y(t,e),l=lg(t,e);const d=z2(t,e),f=Ay(t,e);o=o.union(F2(d)),l=l.union(F2(f));const v=c.map(_=>$e.create(_));v.unshift(d),v.push(f);let x=null;const w=[];for(let _=0,A=v.length-1;_<A;_+=1){let P=null;const V=v[_],q=v[_+1],te=Cu.getBearing(V,q)!=null;if(_===0)_+1===A?o.intersectsWithRect(l.clone().inflate(1))?P=Cu.insideNode(V,q,o,l):te||(P=Cu.nodeToNode(V,q,o,l)):o.containsPoint(q)?P=Cu.insideNode(V,q,o,F2(q).moveAndExpand(B2(e))):te||(P=Cu.nodeToVertex(V,q,o));else if(_+1===A){const ge=te&&Cu.getBearing(q,V)===x;l.containsPoint(V)||ge?P=Cu.insideNode(V,q,F2(V).moveAndExpand(B2(e)),l,x):te||(P=Cu.vertexToNode(V,q,l,x))}else te||(P=Cu.vertexToVertex(V,q,x));P?(w.push(...P.points),x=P.direction):x=Cu.getBearing(V,q),_+1<A&&w.push(q)}return w};var Cu;(function(c){const e={N:"S",S:"N",E:"W",W:"E"},t={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function o(A,P,V){let q=new $e(A.x,P.y);return V.containsPoint(q)&&(q=new $e(P.x,A.y)),q}function l(A,P){return A[P==="W"||P==="E"?"width":"height"]}c.getBBoxSize=l;function d(A,P){return A.x===P.x?A.y>P.y?"N":"S":A.y===P.y?A.x>P.x?"W":"E":null}c.getBearing=d;function f(A,P,V){const q=new $e(A.x,P.y),te=new $e(P.x,A.y),ge=d(A,q),_e=d(A,te),ke=V?e[V]:null,Se=ge===V||ge!==ke&&(_e===ke||_e!==V)?q:te;return{points:[Se],direction:d(Se,P)}}c.vertexToVertex=f;function v(A,P,V){const q=o(A,P,V);return{points:[q],direction:d(q,P)}}c.nodeToVertex=v;function x(A,P,V,q){const te=[new $e(A.x,P.y),new $e(P.x,A.y)],ge=te.filter(Se=>!V.containsPoint(Se)),_e=ge.filter(Se=>d(Se,A)!==q);let ke;if(_e.length>0)return ke=_e.filter(Se=>d(A,Se)===q).pop(),ke=ke||_e[0],{points:[ke],direction:d(ke,P)};{ke=Cn(te,ge)[0];const Se=$e.create(P).move(ke,-l(V,q)/2);return{points:[o(Se,A,V),Se],direction:d(Se,P)}}}c.vertexToNode=x;function w(A,P,V,q){let te=v(P,A,q);const ge=te.points[0];if(V.containsPoint(ge)){te=v(A,P,V);const _e=te.points[0];if(q.containsPoint(_e)){const ke=$e.create(A).move(_e,-l(V,d(A,_e))/2),Se=$e.create(P).move(ge,-l(q,d(P,ge))/2),je=new mr(ke,Se).getCenter(),nt=v(A,je,V),wt=f(je,P,nt.direction);te.points=[nt.points[0],wt.points[0]],te.direction=wt.direction}}return te}c.nodeToNode=w;function _(A,P,V,q,te){const ge=V.union(q).inflate(1),_e=ge.getCenter(),ke=_e.distance(P)>_e.distance(A),Se=ke?P:A,je=ke?A:P;let nt,wt,It;te?(nt=$e.fromPolar(ge.width+ge.height,t[te],Se),nt=ge.getNearestPointToPoint(nt).move(nt,-1)):nt=ge.getNearestPointToPoint(Se).move(Se,1),wt=o(nt,je,ge);let Jt;nt.round().equals(wt.round())?(wt=$e.fromPolar(ge.width+ge.height,Yi.toRad(nt.theta(Se))+Math.PI/2,je),wt=ge.getNearestPointToPoint(wt).move(je,1).round(),It=o(nt,wt,ge),Jt=ke?[wt,It,nt]:[nt,It,wt]):Jt=ke?[wt,nt]:[nt,wt];const Un=d(ke?nt:wt,P);return{points:Jt,direction:Un}}c.insideNode=_})(Cu||(Cu={}));const q_={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],excludeNodes:[],excludeHiddenNodes:!1,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return ep(this.step,this)},directions(){const c=ep(this.step,this),e=ep(this.cost,this);return[{cost:e,offsetX:c,offsetY:0},{cost:e,offsetX:-c,offsetY:0},{cost:e,offsetX:0,offsetY:c},{cost:e,offsetX:0,offsetY:-c}]},penalties(){const c=ep(this.step,this);return{0:0,45:c/2,90:c/2}},paddingBox(){const c=ep(this.step,this);return{x:-c,y:-c,width:2*c,height:2*c}},fallbackRouter:K_,draggingRouter:null};function ep(c,e){return typeof c=="function"?c.call(e):c}function J_(c){const e=Object.keys(c).reduce((t,o)=>{const l=t;return o==="fallbackRouter"||o==="draggingRouter"||o==="fallbackRoute"?l[o]=c[o]:l[o]=ep(c[o],c),t},{});if(e.padding){const t=Cc(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}return e.directions.forEach(t=>{const o=new $e(0,0),l=new $e(t.offsetX,t.offsetY);t.angle=Yi.normalize(o.theta(l))}),e}const JC=1,QC=2;class Q_{constructor(){this.items=[],this.hash={},this.values={}}add(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=JC,this.values[e]=t;const o=Gp(this.items,e,l=>this.values[l]);this.items.splice(o,0,e)}pop(){const e=this.items.shift();return e&&(this.hash[e]=QC),e}isOpen(e){return this.hash[e]===JC}isClose(e){return this.hash[e]===QC}isEmpty(){return this.items.length===0}}class Ty{constructor(e){this.options=e,this.mapGridSize=100,this.map={}}build(e,t){const o=this.options,l=o.excludeTerminals.reduce((w,_)=>{const A=t[_];if(A){const P=e.getCell(A.cell);P&&w.push(P)}return w},[]);let d=[];const f=e.getCell(t.getSourceCellId());f&&(d=Nc(d,f.getAncestors().map(w=>w.id)));const v=e.getCell(t.getTargetCellId());v&&(d=Nc(d,v.getAncestors().map(w=>w.id)));const x=this.mapGridSize;return e.getNodes().reduce((w,_)=>{const A=_.shape,P=o.excludeShapes,V=A?P.includes(A):!1,q=l.some(Se=>Se.id===_.id),te=o.excludeNodes.some(Se=>typeof Se=="string"?_.id===Se:Se===_),ge=d.includes(_.id),_e=o.excludeHiddenNodes&&!_.isVisible();if(!(V||q||te||ge||_e)){const Se=_.getBBox().moveAndExpand(o.paddingBox),je=Se.getOrigin().snapToGrid(x),nt=Se.getCorner().snapToGrid(x);for(let wt=je.x;wt<=nt.x;wt+=x)for(let It=je.y;It<=nt.y;It+=x){const Jt=new $e(wt,It).toString();w[Jt]==null&&(w[Jt]=[]),w[Jt].push(Se)}}return w},this.map),this}isAccessible(e){const t=e.clone().snapToGrid(this.mapGridSize).toString(),o=this.map[t];return o?o.every(l=>!l.containsPoint(e)):!0}}function ew(c,e){const t=c.sourceBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function tw(c,e){const t=c.targetBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function nw(c,e){return c.sourceAnchor?c.sourceAnchor:ew(c,e).getCenter()}function eA(c,e){return c.targetAnchor?c.targetAnchor:tw(c,e).getCenter()}function rw(c,e,t,o,l){const d=360/t,f=c.theta(n3(c,e,o,l)),v=Yi.normalize(f+d/2);return d*Math.floor(v/d)}function n3(c,e,t,o){const l=o.step,d=e.x-c.x,f=e.y-c.y,v=d/t.x,x=f/t.y,w=v*l,_=x*l;return new $e(c.x+w,c.y+_)}function tA(c,e){const t=Math.abs(c-e);return t>180?360-t:t}function r3(c,e){const t=e.step;return e.directions.forEach(o=>{o.gridOffsetX=o.offsetX/t*c.x,o.gridOffsetY=o.offsetY/t*c.y}),e.directions}function i3(c,e,t){return{source:e.clone(),x:nA(t.x-e.x,c),y:nA(t.y-e.y,c)}}function nA(c,e){if(!c)return e;const t=Math.abs(c),o=Math.round(t/e);if(!o)return t;const l=o*e,f=(t-l)/o;return e+f}function rA(c,e){const t=e.source,o=va.snapToGrid(c.x-t.x,e.x)+t.x,l=va.snapToGrid(c.y-t.y,e.y)+t.y;return new $e(o,l)}function Rv(c,e){return c.round(e)}function My(c,e,t){return Rv(rA(c.clone(),e),t)}function kv(c){return c.toString()}function U2(c){return new $e(c.x===0?0:Math.abs(c.x)/c.x,c.y===0?0:Math.abs(c.y)/c.y)}function iw(c,e){let t=1/0;for(let o=0,l=e.length;o<l;o+=1){const d=c.manhattanDistance(e[o]);d<t&&(t=d)}return t}function ow(c,e,t,o,l){const d=l.precision,f=l.directionMap,v=c.diff(e.getCenter()),x=Object.keys(f).reduce((w,_)=>{if(t.includes(_)){const A=f[_],P=new $e(c.x+A.x*(Math.abs(v.x)+e.width),c.y+A.y*(Math.abs(v.y)+e.height)),q=new mr(c,P).intersect(e)||[];let te,ge=null;for(let _e=0;_e<q.length;_e+=1){const ke=q[_e],Se=c.squaredDistance(ke);(te==null||Se>te)&&(te=Se,ge=ke)}if(ge){let _e=My(ge,o,d);e.containsPoint(_e)&&(_e=My(_e.translate(A.x*o.x,A.y*o.y),o,d)),w.push(_e)}}return w},[]);return e.containsPoint(c)||x.push(My(c,o,d)),x}function Oy(c,e,t,o,l){const d=[];let f=U2(l.diff(t)),v=kv(t),x=c[v],w;for(;x;){w=e[v];const P=U2(w.diff(x));P.equals(f)||(d.unshift(w),f=P),v=kv(x),x=c[v]}const _=e[v];return U2(_.diff(o)).equals(f)||d.unshift(_),d}function iA(c,e,t,o,l){const d=l.precision;let f,v;zn.isRectangle(e)?f=Rv(nw(c,l).clone(),d):f=Rv(e.clone(),d),zn.isRectangle(t)?v=Rv(eA(c,l).clone(),d):v=Rv(t.clone(),d);const x=i3(l.step,f,v),w=f,_=v;let A,P;if(zn.isRectangle(e)?A=ow(w,e,l.startDirections,x,l):A=[w],zn.isRectangle(t)?P=ow(v,t,l.endDirections,x,l):P=[_],A=A.filter(V=>o.isAccessible(V)),P=P.filter(V=>o.isAccessible(V)),A.length>0&&P.length>0){const V=new Q_,q={},te={},ge={};for(let An=0,On=A.length;An<On;An+=1){const Zn=A[An],si=kv(Zn);V.add(si,iw(Zn,P)),q[si]=Zn,ge[si]=0}const _e=l.previousDirectionAngle,ke=_e===void 0;let Se,je;const nt=r3(x,l),wt=nt.length,It=P.reduce((An,On)=>{const Zn=kv(On);return An.push(Zn),An},[]),Jt=$e.equalPoints(A,P);let Un=l.maxLoopCount;for(;!V.isEmpty()&&Un>0;){const An=V.pop(),On=q[An],Zn=te[An],si=ge[An],Wr=On.equals(w),Wt=Zn==null;let Ln;if(Wt?ke?Wr?Ln=null:Ln=rw(w,On,wt,x,l):Ln=_e:Ln=rw(Zn,On,wt,x,l),!(Wt&&Jt)&&It.indexOf(An)>=0)return l.previousDirectionAngle=Ln,Oy(te,q,On,w,_);for(let Do=0;Do<wt;Do+=1){Se=nt[Do];const Jo=Se.angle;if(je=tA(Ln,Jo),!(ke&&Wr)&&je>l.maxDirectionChange)continue;const Oa=My(On.clone().translate(Se.gridOffsetX||0,Se.gridOffsetY||0),x,d),ta=kv(Oa);if(V.isClose(ta)||!o.isAccessible(Oa))continue;if(It.indexOf(ta)>=0&&!Oa.equals(_)){const xg=rw(Oa,_,wt,x,l);if(tA(Jo,xg)>l.maxDirectionChange)continue}const d1=Se.cost,k0=Wr?0:l.penalties[je],bg=si+d1+k0;(!V.isOpen(ta)||bg<ge[ta])&&(q[ta]=Oa,te[ta]=On,ge[ta]=bg,V.add(ta,bg+iw(Oa,P)))}Un-=1}}return l.fallbackRoute?ir(l.fallbackRoute,this,w,_,l):null}const oA=function(c,e,t){const o=J_(e),l=ew(t,o),d=tw(t,o),f=nw(t,o),v=new Ty(o).build(t.graph.model,t.cell),x=c.map(V=>$e.create(V)),w=[];let _=f,A,P;for(let V=0,q=x.length;V<=q;V+=1){let te=null;if(A=P||l,P=x[V],P==null){P=d;const _e=t.cell;if((_e.getSourceCellId()==null||_e.getTargetCellId()==null)&&typeof o.draggingRouter=="function"){const Se=A===l?f:A,je=P.getOrigin();te=ir(o.draggingRouter,t,Se,je,o)}}if(te==null&&(te=iA(t,A,P,v,o)),te===null)return console.warn("Unable to execute manhattan algorithm, use orth instead"),ir(o.fallbackRouter,this,c,o,t);const ge=te[0];ge&&ge.equals(_)&&te.shift(),_=te[te.length-1]||_,w.push(...te)}return w},sw=function(c,e,t){return ir(oA,this,c,Object.assign(Object.assign({},q_),e),t)},sA={maxDirectionChange:45,directions(){const c=ep(this.step,this),e=ep(this.cost,this),t=Math.ceil(Math.sqrt(c*c<<1));return[{cost:e,offsetX:c,offsetY:0},{cost:t,offsetX:c,offsetY:c},{cost:e,offsetX:0,offsetY:c},{cost:t,offsetX:-c,offsetY:c},{cost:e,offsetX:-c,offsetY:0},{cost:t,offsetX:-c,offsetY:-c},{cost:e,offsetX:0,offsetY:-c},{cost:t,offsetX:c,offsetY:-c}]},fallbackRoute(c,e,t){const o=c.theta(e),l=[];let d={x:e.x,y:c.y},f={x:c.x,y:e.y};if(o%180>90){const Se=d;d=f,f=Se}const v=o%90<45?d:f,x=new mr(c,v),w=90*Math.ceil(o/90),_=$e.fromPolar(x.squaredLength(),Yi.toRad(w+135),v),A=new mr(e,_),P=x.intersectsWithLine(A),V=P||e,q=P?V:c,te=360/t.directions.length,ge=q.theta(e),_e=Yi.normalize(ge+te/2),ke=te*Math.floor(_e/te);return t.previousDirectionAngle=ke,V&&l.push(V.round()),l.push(e),l}},aA=function(c,e,t){return ir(sw,this,c,Object.assign(Object.assign({},sA),e),t)},o3=function(c,e,t){const o=e.offset||32,l=e.min==null?16:e.min;let d=0,f=e.direction;const v=t.sourceBBox,x=t.targetBBox,w=v.getCenter(),_=x.getCenter();if(typeof o=="number"&&(d=o),f==null){let _e=x.left-v.right,ke=x.top-v.bottom;_e>=0&&ke>=0?f=_e>=ke?"L":"T":_e<=0&&ke>=0?(_e=v.left-x.right,_e>=0?f=_e>=ke?"R":"T":f="T"):_e>=0&&ke<=0?(ke=v.top-x.bottom,ke>=0?f=_e>=ke?"L":"B":f="L"):(_e=v.left-x.right,ke=v.top-x.bottom,_e>=0&&ke>=0?f=_e>=ke?"R":"B":_e<=0&&ke>=0?f="B":_e>=0&&ke<=0?f="R":f=Math.abs(_e)>Math.abs(ke)?"R":"B")}f==="H"?f=_.x-w.x>=0?"L":"R":f==="V"&&(f=_.y-w.y>=0?"T":"B"),o==="center"&&(f==="L"?d=(x.left-v.right)/2:f==="R"?d=(v.left-x.right)/2:f==="T"?d=(x.top-v.bottom)/2:f==="B"&&(d=(v.top-x.bottom)/2));let A,P,V;const q=f==="L"||f==="R";if(q){if(_.y===w.y)return[...c];V=f==="L"?1:-1,A="x",P="width"}else{if(_.x===w.x)return[...c];V=f==="T"?1:-1,A="y",P="height"}const te=w.clone(),ge=_.clone();if(te[A]+=V*(v[P]/2+d),ge[A]-=V*(x[P]/2+d),q){const _e=te.x,ke=ge.x,Se=v.width/2+l,je=x.width/2+l;_.x>w.x?ke<=_e&&(te.x=Math.max(ke,w.x+Se),ge.x=Math.min(_e,_.x-je)):ke>=_e&&(te.x=Math.min(ke,w.x-Se),ge.x=Math.max(_e,_.x+je))}else{const _e=te.y,ke=ge.y,Se=v.height/2+l,je=x.height/2+l;_.y>w.y?ke<=_e&&(te.y=Math.max(ke,w.y+Se),ge.y=Math.min(_e,_.y-je)):ke>=_e&&(te.y=Math.min(ke,w.y-Se),ge.y=Math.max(_e,_.y+je))}return[te.toJSON(),...c,ge.toJSON()]};function Lv(c,e){if(e!=null&&e!==!1){const t=typeof e=="boolean"?0:e;if(t>0){const o=$e.create(c[1]).move(c[2],t),l=$e.create(c[1]).move(c[0],t);return[o.toJSON(),...c,l.toJSON()]}{const o=c[1];return[Object.assign({},o),...c,Object.assign({},o)]}}return c}const s3=function(c,e,t){const o=e.width||50,d=(e.height||80)/2,f=e.angle||"auto",v=t.sourceAnchor,x=t.targetAnchor,w=t.sourceBBox,_=t.targetBBox;if(v.equals(x)){const A=_e=>{const ke=Yi.toRad(_e),Se=Math.sin(ke),je=Math.cos(ke),nt=new $e(v.x+je*o,v.y+Se*o),wt=new $e(nt.x-je*d,nt.y-Se*d),It=wt.clone().rotate(-90,nt),Jt=wt.clone().rotate(90,nt);return[It.toJSON(),nt.toJSON(),Jt.toJSON()]},P=_e=>{const ke=v.clone().move(_e,-1),Se=new mr(ke,_e);return!w.containsPoint(_e)&&!w.intersectsWithLine(Se)},V=[0,90,180,270,45,135,225,315];if(typeof f=="number")return Lv(A(f),e.merge);const q=w.getCenter();if(q.equals(v))return Lv(A(0),e.merge);const te=q.angleBetween(v,q.clone().translate(1,0));let ge=A(te);if(P(ge[1]))return Lv(ge,e.merge);for(let _e=1,ke=V.length;_e<ke;_e+=1)if(ge=A(te+V[_e]),P(ge[1]))return Lv(ge,e.merge);return Lv(ge,e.merge)}{const A=new mr(v,x);let P=A.parallel(-o),V=P.getCenter(),q=P.start.clone().move(P.end,d),te=P.end.clone().move(P.start,d);const ge=A.parallel(-1),_e=new mr(ge.start,V),ke=new mr(ge.end,V);if((w.containsPoint(V)||_.containsPoint(V)||w.intersectsWithLine(_e)||w.intersectsWithLine(ke)||_.intersectsWithLine(_e)||_.intersectsWithLine(ke))&&(P=A.parallel(o),V=P.getCenter(),q=P.start.clone().move(P.end,d),te=P.end.clone().move(P.start,d)),e.merge){const Se=new mr(v,x),je=new mr(V,Se.center).setLength(Number.MAX_SAFE_INTEGER),nt=w.intersectsWithLine(je),wt=_.intersectsWithLine(je),It=nt?Array.isArray(nt)?nt:[nt]:[];wt&&(Array.isArray(wt)?It.push(...wt):It.push(wt));const Jt=Se.center.closest(It);Jt?(t.sourceAnchor=Jt.clone(),t.targetAnchor=Jt.clone()):(t.sourceAnchor=Se.center.clone(),t.targetAnchor=Se.center.clone())}return Lv([q.toJSON(),V.toJSON(),te.toJSON()],e.merge)}};var tp;(function(c){c.presets=ce,c.registry=Vs.create({type:"router"}),c.registry.register(c.presets,!0)})(tp||(tp={}));const a3=function(c,e,t,o={}){const l=[c,...t,e],d=new fa(l),f=new Vr(d);return o.raw?f:f.serialize()},l3=function(c,e,t,o={}){const l=t.length===3?0:1,d=$e.create(t[0+l]),f=$e.create(t[2+l]),v=$e.create(t[1+l]);if(!$e.equals(c,e)){const w=new $e((c.x+e.x)/2,(c.y+e.y)/2),_=w.angleBetween($e.create(c).rotate(90,w),v);_>1&&(d.rotate(180-_,w),f.rotate(180-_,w),v.rotate(180-_,w))}const x=`
     M ${c.x} ${c.y}
     Q ${d.x} ${d.y} ${v.x} ${v.y}
     Q ${f.x} ${f.y} ${e.x} ${e.y}
  `;return o.raw?Vr.parse(x):x},c3=function(c,e,t,o={}){const l=new Vr;l.appendSegment(Vr.createSegment("M",c));const d=1/3,f=2/3,v=o.radius||10;let x,w;for(let _=0,A=t.length;_<A;_+=1){const P=$e.create(t[_]),V=t[_-1]||c,q=t[_+1]||e;x=w||P.distance(V)/2,w=P.distance(q)/2;const te=-Math.min(v,x),ge=-Math.min(v,w),_e=P.clone().move(V,te).round(),ke=P.clone().move(q,ge).round(),Se=new $e(d*_e.x+f*P.x,f*P.y+d*_e.y),je=new $e(d*ke.x+f*P.x,f*P.y+d*ke.y);l.appendSegment(Vr.createSegment("L",_e)),l.appendSegment(Vr.createSegment("C",Se,je,ke))}return l.appendSegment(Vr.createSegment("L",e)),o.raw?l:l.serialize()},lA=function(c,e,t,o={}){let l,d=o.direction;if(t&&t.length!==0){const f=[c,...t,e],v=Qs.throughPoints(f);l=new Vr(v)}else if(l=new Vr,l.appendSegment(Vr.createSegment("M",c)),d||(d=Math.abs(c.x-e.x)>=Math.abs(c.y-e.y)?"H":"V"),d==="H"){const f=(c.x+e.x)/2;l.appendSegment(Vr.createSegment("C",f,c.y,f,e.y,e.x,e.y))}else{const f=(c.y+e.y)/2;l.appendSegment(Vr.createSegment("C",c.x,f,e.x,f,e.x,e.y))}return o.raw?l:l.serialize()},aw=1,Py=1/3,Dy=2/3;function cA(c){let e=c.graph._jumpOverUpdateList;if(e==null&&(e=c.graph._jumpOverUpdateList=[],c.graph.on("cell:mouseup",()=>{const t=c.graph._jumpOverUpdateList;for(let o=0;o<t.length;o+=1)t[o].update()}),c.graph.on("model:reseted",()=>{e=c.graph._jumpOverUpdateList=[]})),e.indexOf(c)<0){e.push(c);const t=()=>e.splice(e.indexOf(c),1);c.cell.once("change:connector",t),c.cell.once("removed",t)}}function _0(c,e,t=[]){const o=[c,...t,e],l=[];return o.forEach((d,f)=>{const v=o[f+1];v!=null&&l.push(new mr(d,v))}),l}function uA(c,e){const t=[];return e.forEach(o=>{const l=c.intersectsWithLine(o);l&&t.push(l)}),t}function lw(c,e){return new mr(c,e).squaredLength()}function dA(c,e,t){return e.reduce((o,l,d)=>{if(Iy.includes(l))return o;const f=o.pop()||c,v=$e.create(l).move(f.start,-t);let x=$e.create(l).move(f.start,+t);const w=e[d+1];if(w!=null){const P=x.distance(w);P<=t&&(x=w.move(f.start,P),Iy.push(w))}else if(v.distance(f.end)<t*2+aw)return o.push(f),o;if(x.distance(f.start)<t*2+aw)return o.push(f),o;const A=new mr(v,x);return Ny.push(A),o.push(new mr(f.start,v),A,new mr(x,f.end)),o},[])}function cw(c,e,t,o){const l=new Vr;let d;return d=Vr.createSegment("M",c[0].start),l.appendSegment(d),c.forEach((f,v)=>{if(Ny.includes(f)){let x,w,_,A;if(t==="arc"){x=-90,w=f.start.diff(f.end),(w.x<0||w.x===0&&w.y<0)&&(x+=180);const V=f.getCenter(),q=new mr(V,f.end).rotate(x,V);let te;te=new mr(f.start,V),_=te.pointAt(2/3).rotate(x,f.start),A=q.pointAt(1/3).rotate(-x,q.end),d=Vr.createSegment("C",_,A,q.end),l.appendSegment(d),te=new mr(V,f.end),_=q.pointAt(1/3).rotate(x,q.end),A=te.pointAt(1/3).rotate(-x,f.end),d=Vr.createSegment("C",_,A,f.end),l.appendSegment(d)}else if(t==="gap")d=Vr.createSegment("M",f.end),l.appendSegment(d);else if(t==="cubic"){x=f.start.theta(f.end);const P=e*.6;let V=e*1.35;w=f.start.diff(f.end),(w.x<0||w.x===0&&w.y<0)&&(V*=-1),_=new $e(f.start.x+P,f.start.y+V).rotate(x,f.start),A=new $e(f.end.x-P,f.end.y+V).rotate(x,f.end),d=Vr.createSegment("C",_,A,f.end),l.appendSegment(d)}}else{const x=c[v+1];o===0||!x||Ny.includes(x)?(d=Vr.createSegment("L",f.end),l.appendSegment(d)):hA(o,l,f.end,f.start,x.end)}}),l}function hA(c,e,t,o,l){const d=t.distance(o)/2,f=t.distance(l)/2,v=-Math.min(c,d),x=-Math.min(c,f),w=t.clone().move(o,v).round(),_=t.clone().move(l,x).round(),A=new $e(Py*w.x+Dy*t.x,Dy*t.y+Py*w.y),P=new $e(Py*_.x+Dy*t.x,Dy*t.y+Py*_.y);let V;V=Vr.createSegment("L",w),e.appendSegment(V),V=Vr.createSegment("C",A,P,_),e.appendSegment(V)}let Ny,Iy;const u3=function(c,e,t,o={}){Ny=[],Iy=[],cA(this);const l=o.size||5,d=o.type||"arc",f=o.radius||0,v=o.ignoreConnectors||["smooth"],x=this.graph,_=x.model.getEdges();if(_.length===1)return cw(_0(c,e,t),l,d,f);const A=this.cell,P=_.indexOf(A),V=x.options.connecting.connector||{},q=_.filter((je,nt)=>{const wt=je.getConnector()||V;return v.includes(wt.name)?!1:nt>P?wt.name!=="jumpover":!0}),te=q.map(je=>x.renderer.findViewByCell(je)),ge=_0(c,e,t),_e=te.map(je=>je==null?[]:je===this?ge:_0(je.sourcePoint,je.targetPoint,je.routePoints)),ke=[];ge.forEach(je=>{const nt=q.reduce((wt,It,Jt)=>{if(It!==A){const Un=uA(je,_e[Jt]);wt.push(...Un)}return wt},[]).sort((wt,It)=>lw(je.start,wt)-lw(je.start,It));nt.length>0?ke.push(...dA(je,nt,l)):ke.push(je)});const Se=cw(ke,l,d,f);return Ny=[],Iy=[],o.raw?Se:Se.serialize()};var cg;(function(c){c.presets=fe,c.registry=Vs.create({type:"connector"}),c.registry.register(c.presets,!0)})(cg||(cg={}));const d3=Vs.create;class Ry{constructor(e){this.cell=e,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(e,t,o={},l="/"){const d=this.cell.getPropByPath(e),f=zb(o,Ry.defaultOptions),v=this.getTiming(f.timing),x=this.getInterp(f.interp,d,t);let w=0;const _=Array.isArray(e)?e.join(l):e,A=Array.isArray(e)?e:e.split(l),P=()=>{const V=new Date().getTime();w===0&&(w=V);let te=(V-w)/f.duration;te<1?this.ids[_]=g2(P):te=1;const ge=x(v(te));this.cell.setPropByPath(A,ge),o.progress&&o.progress(Object.assign({progress:te,currentValue:ge},this.getArgs(_))),te===1&&(this.cell.notify("transition:end",this.getArgs(_)),this.cell.notify("transition:complete",this.getArgs(_)),o.complete&&o.complete(this.getArgs(_)),this.cell.notify("transition:finish",this.getArgs(_)),o.finish&&o.finish(this.getArgs(_)),this.clean(_))};return setTimeout(()=>{this.stop(e,void 0,l),this.cache[_]={startValue:d,targetValue:t,options:f},this.ids[_]=g2(P),this.cell.notify("transition:begin",this.getArgs(_)),this.cell.notify("transition:start",this.getArgs(_)),o.start&&o.start(this.getArgs(_))},o.delay),this.stop.bind(this,e,l,o)}stop(e,t={},o="/"){const l=Array.isArray(e)?e:e.split(o);return Object.keys(this.ids).filter(d=>Uc(l,d.split(o).slice(0,l.length))).forEach(d=>{v2(this.ids[d]);const f=this.cache[d],v=this.getArgs(d),x=Object.assign(Object.assign({},f.options),t),w=x.jumpedToEnd;w&&f.targetValue!=null&&(this.cell.setPropByPath(d,f.targetValue),this.cell.notify("transition:end",Object.assign({},v)),this.cell.notify("transition:complete",Object.assign({},v)),x.complete&&x.complete(Object.assign({},v)));const _=Object.assign({jumpedToEnd:w},v);this.cell.notify("transition:stop",Object.assign({},_)),x.stop&&x.stop(Object.assign({},_)),this.cell.notify("transition:finish",Object.assign({},v)),x.finish&&x.finish(Object.assign({},v)),this.clean(d)}),this}clean(e){delete this.ids[e],delete this.cache[e]}getTiming(e){return typeof e=="string"?Kh[e]:e}getInterp(e,t,o){return e?e(t,o):typeof o=="number"?qd.number(t,o):typeof o=="string"?o[0]==="#"?qd.color(t,o):qd.unit(t,o):qd.object(t,o)}getArgs(e){const t=this.cache[e];return{path:e,startValue:t.startValue,targetValue:t.targetValue,cell:this.cell}}}(function(c){c.defaultOptions={delay:10,duration:100,timing:"linear"}})(Ry||(Ry={}));var h3=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class uw extends Gl{constructor(e={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(Tr(e)),this.changed={}}mutate(e,t={}){const o=t.unset===!0,l=t.silent===!0,d=[],f=this.changing;this.changing=!0,f||(this.previous=Tr(this.data),this.changed={});const v=this.data,x=this.previous,w=this.changed;if(Object.keys(e).forEach(_=>{const A=_,P=e[A];Uc(v[A],P)||d.push(A),Uc(x[A],P)?delete w[A]:w[A]=P,o?delete v[A]:v[A]=P}),!l&&d.length>0&&(this.pending=!0,this.pendingOptions=t,d.forEach(_=>{this.emit("change:*",{key:_,options:t,store:this,current:v[_],previous:x[_]})})),f)return this;if(!l)for(;this.pending;)this.pending=!1,this.emit("changed",{current:v,previous:x,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(e,t){if(e==null)return this.data;const o=this.data[e];return o==null?t:o}getPrevious(e){if(this.previous){const t=this.previous[e];return t==null?void 0:t}}set(e,t,o){return e!=null&&(typeof e=="object"?this.mutate(e,t):this.mutate({[e]:t},o)),this}remove(e,t){const l={};let d;if(typeof e=="string")l[e]=void 0,d=t;else if(Array.isArray(e))e.forEach(f=>l[f]=void 0),d=t;else{for(const f in this.data)l[f]=void 0;d=e}return this.mutate(l,Object.assign(Object.assign({},d),{unset:!0})),this}getByPath(e){return Bf(this.data,e,"/")}setByPath(e,t,o={}){const l="/",d=Array.isArray(e)?[...e]:e.split(l),f=Array.isArray(e)?e.join(l):e,v=d[0],x=d.length;if(o.propertyPath=f,o.propertyValue=t,o.propertyPathArray=d,x===1)this.set(v,t,o);else{const w={};let _=w,A=v;for(let q=1;q<x;q+=1){const te=d[q],ge=Number.isFinite(Number(te));_=_[A]=ge?[]:{},A=te}zf(w,d,t,l);const P=Tr(this.data);o.rewrite&&Yg(P,e,l);const V=Fo(P,w);this.set(v,V[v],o)}return this}removeByPath(e,t){const o=Array.isArray(e)?e:e.split("/"),l=o[0];if(o.length===1)this.remove(l,t);else{const d=o.slice(1),f=Tr(this.get(l));f&&Yg(f,d),this.set(l,f,t)}return this}hasChanged(e){return e==null?Object.keys(this.changed).length>0:e in this.changed}getChanges(e){if(e==null)return this.hasChanged()?Tr(this.changed):null;const t=this.changing?this.previous:this.data,o={};let l;for(const d in e){const f=e[d];Uc(t[d],f)||(o[d]=f,l=!0)}return l?Tr(o):null}toJSON(){return Tr(this.data)}clone(){const e=this.constructor;return new e(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}h3([Gl.dispose()],uw.prototype,"dispose",null);var fA=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d},dw=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class Gi extends Gl{constructor(e={}){super();const o=this.constructor.getDefaults(!0),l=Fo({},this.preprocess(o),this.preprocess(e));this.id=l.id||dC(),this.store=new uw(l),this.animation=new Ry(this),this.setup(),this.init(),this.postprocess(e)}static config(e){const{markup:t,propHooks:o,attrHooks:l}=e,d=dw(e,["markup","propHooks","attrHooks"]);t!=null&&(this.markup=t),o&&(this.propHooks=this.propHooks.slice(),Array.isArray(o)?this.propHooks.push(...o):typeof o=="function"?this.propHooks.push(o):Object.keys(o).forEach(f=>{const v=o[f];typeof v=="function"&&this.propHooks.push(v)})),l&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),l)),this.defaults=Fo({},this.defaults,d)}static getMarkup(){return this.markup}static getDefaults(e){return e?this.defaults:Tr(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(e,t){return this.propHooks.reduce((o,l)=>l?ir(l,e,o):o,t)}get[Symbol.toStringTag](){return Gi.toStringTag}init(){}get model(){return this._model}set model(e){this._model!==e&&(this._model=e)}preprocess(e,t){const o=e.id,d=this.constructor.applyPropHooks(this,e);return o==null&&t!==!0&&(d.id=dC()),d}postprocess(e){}setup(){this.store.on("change:*",e=>{const{key:t,current:o,previous:l,options:d}=e;this.notify("change:*",{key:t,options:d,current:o,previous:l,cell:this}),this.notify(`change:${t}`,{options:d,current:o,previous:l,cell:this});const f=t;(f==="source"||f==="target")&&this.notify("change:terminal",{type:f,current:o,previous:l,options:d,cell:this})}),this.store.on("changed",({options:e})=>this.notify("changed",{options:e,cell:this}))}notify(e,t){this.trigger(e,t);const o=this.model;return o&&(o.notify(`cell:${e}`,t),this.isNode()?o.notify(`node:${e}`,Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&o.notify(`edge:${e}`,Object.assign(Object.assign({},t),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(e){return this.store===e.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(e,t){return e==null?this.store.get():this.store.get(e,t)}setProp(e,t,o){if(typeof e=="string")this.store.set(e,t,o);else{const l=this.preprocess(e,!0);this.store.set(Fo({},this.getProp(),l),t),this.postprocess(e)}return this}removeProp(e,t){return typeof e=="string"||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}hasChanged(e){return e==null?this.store.hasChanged():this.store.hasChanged(e)}getPropByPath(e){return this.store.getByPath(e)}setPropByPath(e,t,o={}){return this.model&&(e==="children"?this._children=t?t.map(l=>this.model.getCell(l)).filter(l=>l!=null):null:e==="parent"&&(this._parent=t?this.model.getCell(t):null)),this.store.setByPath(e,t,o),this}removePropByPath(e,t={}){const o=Array.isArray(e)?e:e.split("/");return o[0]==="attrs"&&(t.dirty=!0),this.store.removeByPath(o,t),this}prop(e,t,o){return e==null?this.getProp():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getPropByPath(e):t==null?this.removePropByPath(e,o||{}):this.setPropByPath(e,t,o||{}):this.setProp(e,t||{})}previous(e){return this.store.getPrevious(e)}get zIndex(){return this.getZIndex()}set zIndex(e){e==null?this.removeZIndex():this.setZIndex(e)}getZIndex(){return this.store.get("zIndex")}setZIndex(e,t={}){return this.store.set("zIndex",e,t),this}removeZIndex(e={}){return this.store.remove("zIndex",e),this}toFront(e={}){const t=this.model;if(t){let o=t.getMaxZIndex(),l;e.deep?(l=this.getDescendants({deep:!0,breadthFirst:!0}),l.unshift(this)):l=[this],o=o-l.length+1;const d=t.total();let f=t.indexOf(this)!==d-l.length;f||(f=l.some((v,x)=>v.getZIndex()!==o+x)),f&&this.batchUpdate("to-front",()=>{o+=l.length,l.forEach((v,x)=>{v.setZIndex(o+x,e)})})}return this}toBack(e={}){const t=this.model;if(t){let o=t.getMinZIndex(),l;e.deep?(l=this.getDescendants({deep:!0,breadthFirst:!0}),l.unshift(this)):l=[this];let d=t.indexOf(this)!==0;d||(d=l.some((f,v)=>f.getZIndex()!==o+v)),d&&this.batchUpdate("to-back",()=>{o-=l.length,l.forEach((f,v)=>{f.setZIndex(o+v,e)})})}return this}get markup(){return this.getMarkup()}set markup(e){e==null?this.removeMarkup():this.setMarkup(e)}getMarkup(){let e=this.store.get("markup");return e==null&&(e=this.constructor.getMarkup()),e}setMarkup(e,t={}){return this.store.set("markup",e,t),this}removeMarkup(e={}){return this.store.remove("markup",e),this}get attrs(){return this.getAttrs()}set attrs(e){e==null?this.removeAttrs():this.setAttrs(e)}getAttrs(){const e=this.store.get("attrs");return e?Object.assign({},e):{}}setAttrs(e,t={}){if(e==null)this.removeAttrs(t);else{const o=l=>this.store.set("attrs",l,t);if(t.overwrite===!0)o(e);else{const l=this.getAttrs();t.deep===!1?o(Object.assign(Object.assign({},l),e)):o(Fo({},l,e))}}return this}replaceAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}removeAttrs(e={}){return this.store.remove("attrs",e),this}getAttrDefinition(e){if(!e)return null;const o=this.constructor.getAttrHooks()||{};let l=o[e]||ad.registry.get(e);if(!l){const d=i2(e);l=o[d]||ad.registry.get(d)}return l||null}getAttrByPath(e){return e==null||e===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}setAttrByPath(e,t,o={}){return this.setPropByPath(this.prefixAttrPath(e),t,o),this}removeAttrByPath(e,t={}){return this.removePropByPath(this.prefixAttrPath(e),t),this}prefixAttrPath(e){return Array.isArray(e)?["attrs"].concat(e):`attrs/${e}`}attr(e,t,o){return e==null?this.getAttrByPath():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getAttrByPath(e):t==null?this.removeAttrByPath(e,o||{}):this.setAttrByPath(e,t,o||{}):this.setAttrs(e,t||{})}get visible(){return this.isVisible()}set visible(e){this.setVisible(e)}setVisible(e,t={}){return this.store.set("visible",e,t),this}isVisible(){return this.store.get("visible")!==!1}show(e={}){return this.isVisible()||this.setVisible(!0,e),this}hide(e={}){return this.isVisible()&&this.setVisible(!1,e),this}toggleVisible(e,t={}){const o=typeof e=="boolean"?e:!this.isVisible(),l=typeof e=="boolean"?t:e;return o?this.show(l):this.hide(l),this}get data(){return this.getData()}set data(e){this.setData(e)}getData(){return this.store.get("data")}setData(e,t={}){if(e==null)this.removeData(t);else{const o=l=>this.store.set("data",l,t);if(t.overwrite===!0)o(e);else{const l=this.getData();t.deep===!1?o(typeof e=="object"?Object.assign(Object.assign({},l),e):e):o(Fo({},l,e))}}return this}replaceData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}removeData(e={}){return this.store.remove("data",e),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const e=this.getParentId();if(e&&this.model){const t=this.model.getCell(e);return this._parent=t,t}return null}getChildren(){const e=this.store.get("children");if(e&&e.length&&this.model){const t=e.map(o=>{var l;return(l=this.model)===null||l===void 0?void 0:l.getCell(o)}).filter(o=>o!=null);return this._children=t,[...t]}return null}hasParent(){return this.parent!=null}isParentOf(e){return e!=null&&e.getParent()===this}isChildOf(e){return e!=null&&this.getParent()===e}eachChild(e,t){return this.children&&this.children.forEach(e,t),this}filterChild(e,t){return this.children?this.children.filter(e,t):[]}getChildCount(){return this.children==null?0:this.children.length}getChildIndex(e){return this.children==null?-1:this.children.indexOf(e)}getChildAt(e){return this.children!=null&&e>=0?this.children[e]:null}getAncestors(e={}){const t=[];let o=this.getParent();for(;o;)t.push(o),o=e.deep!==!1?o.getParent():null;return t}getDescendants(e={}){if(e.deep!==!1){if(e.breadthFirst){const t=[],o=this.getChildren()||[];for(;o.length>0;){const l=o.shift(),d=l.getChildren();t.push(l),d&&o.push(...d)}return t}{const t=this.getChildren()||[];return t.forEach(o=>{t.push(...o.getDescendants(e))}),t}}return this.getChildren()||[]}isDescendantOf(e,t={}){if(e==null)return!1;if(t.deep!==!1){let o=this.getParent();for(;o;){if(o===e)return!0;o=o.getParent()}return!1}return this.isChildOf(e)}isAncestorOf(e,t={}){return e==null?!1:e.isDescendantOf(this,t)}contains(e){return this.isAncestorOf(e)}getCommonAncestor(...e){return Gi.getCommonAncestor(this,...e)}setParent(e,t={}){return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}setChildren(e,t={}){return this._children=e,e!=null?this.store.set("children",e.map(o=>o.id),t):this.store.remove("children",t),this}unembed(e,t={}){const o=this.children;if(o!=null&&e!=null){const l=this.getChildIndex(e);l!==-1&&(o.splice(l,1),e.setParent(null,t),this.setChildren(o,t))}return this}embed(e,t={}){return e.addTo(this,t),this}addTo(e,t={}){return Gi.isCell(e)?e.addChild(this,t):e.addCell(this,t),this}insertTo(e,t,o={}){return e.insertChild(this,t,o),this}addChild(e,t={}){return this.insertChild(e,void 0,t)}insertChild(e,t,o={}){if(e!=null&&e!==this){const l=e.getParent(),d=this!==l;let f=t;if(f==null&&(f=this.getChildCount(),d||(f-=1)),l){const x=l.getChildren();if(x){const w=x.indexOf(e);w>=0&&(e.setParent(null,o),x.splice(w,1),l.setChildren(x,o))}}let v=this.children;if(v==null?(v=[],v.push(e)):v.splice(f,0,e),e.setParent(this,o),this.setChildren(v,o),d&&this.model){const x=this.model.getIncomingEdges(this),w=this.model.getOutgoingEdges(this);x&&x.forEach(_=>_.updateParent(o)),w&&w.forEach(_=>_.updateParent(o))}this.model&&this.model.addCell(e,o)}return this}removeFromParent(e={}){const t=this.getParent();if(t!=null){const o=t.getChildIndex(this);t.removeChildAt(o,e)}return this}removeChild(e,t={}){const o=this.getChildIndex(e);return this.removeChildAt(o,t)}removeChildAt(e,t={}){const o=this.getChildAt(e);return this.children!=null&&o!=null&&(this.unembed(o,t),o.remove(t)),o}remove(e={}){return this.batchUpdate("remove",()=>{const t=this.getParent();t&&t.removeChild(this,e),e.deep!==!1&&this.eachChild(o=>o.remove(e)),this.model&&this.model.removeCell(this,e)}),this}transition(e,t,o={},l="/"){return this.animation.start(e,t,o,l)}stopTransition(e,t,o="/"){return this.animation.stop(e,t,o),this}getTransitions(){return this.animation.get()}translate(e,t,o){return this}scale(e,t,o,l){return this}addTools(e,t,o){const l=Array.isArray(e)?e:[e],d=typeof t=="string"?t:null,f=typeof t=="object"?t:typeof o=="object"?o:{};if(f.reset)return this.setTools({name:d,items:l,local:f.local},f);let v=Tr(this.getTools());if(v==null||d==null||v.name===d)return v==null&&(v={}),v.items||(v.items=[]),v.name=d,v.items=[...v.items,...l],this.setTools(Object.assign({},v),f)}setTools(e,t={}){return e==null?this.removeTools():this.store.set("tools",Gi.normalizeTools(e),t),this}getTools(){return this.store.get("tools")}removeTools(e={}){return this.store.remove("tools",e),this}hasTools(e){const t=this.getTools();return t==null?!1:e==null?!0:t.name===e}hasTool(e){const t=this.getTools();return t==null?!1:t.items.some(o=>typeof o=="string"?o===e:o.name===e)}removeTool(e,t={}){const o=Tr(this.getTools());if(o){let l=!1;const d=o.items.slice(),f=v=>{d.splice(v,1),l=!0};if(typeof e=="number")f(e);else for(let v=d.length-1;v>=0;v-=1){const x=d[v];(typeof x=="string"?x===e:x.name===e)&&f(v)}l&&(o.items=d,this.setTools(o,t))}return this}getBBox(e){return new zn}getConnectionPoint(e,t){return new $e}toJSON(e={}){const t=Object.assign({},this.store.get()),o=Object.prototype.toString,l=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!t.shape){const q=this.constructor;throw new Error(`Unable to serialize ${l} missing "shape" prop, check the ${l} "${q.name||o.call(q)}"`)}const d=this.constructor,f=e.diff===!0,v=t.attrs||{},x=d.getDefaults(!0),w=f?this.preprocess(x,!0):x,_=w.attrs||{},A={};Object.keys(t).forEach(q=>{const te=t[q];if(te!=null&&!Array.isArray(te)&&typeof te=="object"&&!ec(te))throw new Error(`Can only serialize ${l} with plain-object props, but got a "${o.call(te)}" type of key "${q}" on ${l} "${this.id}"`);if(q!=="attrs"&&q!=="shape"&&f){const ge=w[q];Uc(te,ge)&&delete t[q]}}),Object.keys(v).forEach(q=>{const te=v[q],ge=_[q];Object.keys(te).forEach(_e=>{const ke=te[_e],Se=ge?ge[_e]:null;ke!=null&&typeof ke=="object"&&!Array.isArray(ke)?Object.keys(ke).forEach(je=>{const nt=ke[je];if(ge==null||Se==null||!Kt(Se)||!Uc(Se[je],nt)){A[q]==null&&(A[q]={}),A[q][_e]==null&&(A[q][_e]={});const wt=A[q][_e];wt[je]=nt}}):(ge==null||!Uc(Se,ke))&&(A[q]==null&&(A[q]={}),A[q][_e]=ke)})});const P=Object.assign(Object.assign({},t),{attrs:Em(A)?void 0:A});P.attrs==null&&delete P.attrs;const V=P;return V.angle===0&&delete V.angle,Tr(V)}clone(e={}){if(!e.deep){const o=Object.assign({},this.store.get());e.keepId||delete o.id,delete o.parent,delete o.children;const l=this.constructor;return new l(o)}return Gi.deepClone(this)[this.id]}findView(e){return e.renderer.findViewByCell(this)}startBatch(e,t={},o=this.model){return this.notify("batch:start",{name:e,data:t,cell:this}),o&&o.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}stopBatch(e,t={},o=this.model){return o&&o.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this.notify("batch:stop",{name:e,data:t,cell:this}),this}batchUpdate(e,t,o){const l=this.model;this.startBatch(e,o,l);const d=t();return this.stopBatch(e,o,l),d}dispose(){this.removeFromParent(),this.store.dispose()}}Gi.defaults={},Gi.attrHooks={},Gi.propHooks=[],fA([Gl.dispose()],Gi.prototype,"dispose",null),function(c){function e(t){return typeof t=="string"?{items:[t]}:Array.isArray(t)?{items:t}:t.items?t:{items:[t]}}c.normalizeTools=e}(Gi||(Gi={})),function(c){c.toStringTag=`X6.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&typeof l.isNode=="function"&&typeof l.isEdge=="function"&&typeof l.prop=="function"&&typeof l.attr=="function"}c.isCell=e}(Gi||(Gi={})),function(c){function e(...d){const f=d.filter(x=>x!=null).map(x=>x.getAncestors()).sort((x,w)=>x.length-w.length);return f.shift().find(x=>f.every(w=>w.includes(x)))||null}c.getCommonAncestor=e;function t(d,f={}){let v=null;for(let x=0,w=d.length;x<w;x+=1){const _=d[x];let A=_.getBBox(f);if(A){if(_.isNode()){const P=_.getAngle();P!=null&&P!==0&&(A=A.bbox(P))}v=v==null?A:v.union(A)}}return v}c.getCellsBBox=t;function o(d){const f=[d,...d.getDescendants({deep:!0})];return c.cloneCells(f)}c.deepClone=o;function l(d){const f=sa(d),v=f.reduce((x,w)=>(x[w.id]=w.clone(),x),{});return f.forEach(x=>{const w=v[x.id];if(w.isEdge()){const P=w.getSourceCellId(),V=w.getTargetCellId();P&&v[P]&&w.setSource(Object.assign(Object.assign({},w.getSource()),{cell:v[P].id})),V&&v[V]&&w.setTarget(Object.assign(Object.assign({},w.getTarget()),{cell:v[V].id}))}const _=x.getParent();_&&v[_.id]&&w.setParent(v[_.id]);const A=x.getChildren();if(A&&A.length){const P=A.reduce((V,q)=>(v[q.id]&&V.push(v[q.id]),V),[]);P.length>0&&w.setChildren(P)}}),v}c.cloneCells=l}(Gi||(Gi={})),function(c){c.config({propHooks(e){var{tools:t}=e,o=dw(e,["tools"]);return t&&(o.tools=c.normalizeTools(t)),o}})}(Gi||(Gi={}));var A0;(function(c){let e,t;function o(f,v){return v?e!=null&&e.exist(f):t!=null&&t.exist(f)}c.exist=o;function l(f){e=f}c.setEdgeRegistry=l;function d(f){t=f}c.setNodeRegistry=d})(A0||(A0={}));class pA{constructor(e){this.ports=[],this.groups={},this.init(Tr(e))}getPorts(){return this.ports}getGroup(e){return e!=null?this.groups[e]:null}getPortsByGroup(e){return this.ports.filter(t=>t.group===e||t.group==null&&e==null)}getPortsLayoutByGroup(e,t){const o=this.getPortsByGroup(e),l=e?this.getGroup(e):null,d=l?l.position:null,f=d?d.name:null;let v;if(f!=null){const A=rg.registry.get(f);if(A==null)return rg.registry.onNotFound(f);v=A}else v=rg.presets.left;const x=o.map(A=>A&&A.position&&A.position.args||{}),w=d&&d.args||{};return v(x,t,w).map((A,P)=>{const V=o[P];return{portLayout:A,portId:V.id,portSize:V.size,portAttrs:V.attrs,labelSize:V.label.size,labelLayout:this.getPortLabelLayout(V,$e.create(A.position),t)}})}init(e){const{groups:t,items:o}=e;t!=null&&Object.keys(t).forEach(l=>{this.groups[l]=this.parseGroup(t[l])}),Array.isArray(o)&&o.forEach(l=>{this.ports.push(this.parsePort(l))})}parseGroup(e){return Object.assign(Object.assign({},e),{label:this.getLabel(e,!0),position:this.getPortPosition(e.position,!0)})}parsePort(e){const t=Object.assign({},e),o=this.getGroup(e.group)||{};return t.markup=t.markup||o.markup,t.attrs=Fo({},o.attrs,t.attrs),t.position=this.createPosition(o,t),t.label=Fo({},o.label,this.getLabel(t)),t.zIndex=this.getZIndex(o,t),t.size=Object.assign(Object.assign({},o.size),t.size),t}getZIndex(e,t){return typeof t.zIndex=="number"?t.zIndex:typeof e.zIndex=="number"||e.zIndex==="auto"?e.zIndex:"auto"}createPosition(e,t){return Fo({name:"left",args:{}},e.position,{args:t.args})}getPortPosition(e,t=!1){if(e==null){if(t)return{name:"left",args:{}}}else{if(typeof e=="string")return{name:e,args:{}};if(Array.isArray(e))return{name:"absolute",args:{x:e[0],y:e[1]}};if(typeof e=="object")return e}return{args:{}}}getPortLabelPosition(e,t=!1){if(e==null){if(t)return{name:"left",args:{}}}else{if(typeof e=="string")return{name:e,args:{}};if(typeof e=="object")return e}return{args:{}}}getLabel(e,t=!1){const o=e.label||{};return o.position=this.getPortLabelPosition(o.position,t),o}getPortLabelLayout(e,t,o){const l=e.label.position.name||"left",d=e.label.position.args||{},f=m0.registry.get(l)||m0.presets.left;return f?f(t,o,d):null}}var ky=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class bs extends Gi{constructor(e={}){super(e),this.initPorts()}get[Symbol.toStringTag](){return bs.toStringTag}preprocess(e,t){const{x:o,y:l,width:d,height:f}=e,v=ky(e,["x","y","width","height"]);if(o!=null||l!=null){const x=v.position;v.position=Object.assign(Object.assign({},x),{x:o!=null?o:x?x.x:0,y:l!=null?l:x?x.y:0})}if(d!=null||f!=null){const x=v.size;v.size=Object.assign(Object.assign({},x),{width:d!=null?d:x?x.width:0,height:f!=null?f:x?x.height:0})}return super.preprocess(v,t)}isNode(){return!0}size(e,t,o){return e===void 0?this.getSize():typeof e=="number"?this.setSize(e,t,o):this.setSize(e,t)}getSize(){const e=this.store.get("size");return e?Object.assign({},e):{width:1,height:1}}setSize(e,t,o){return typeof e=="object"?this.resize(e.width,e.height,t):this.resize(e,t,o),this}resize(e,t,o={}){this.startBatch("resize",o);const l=o.direction;if(l){const d=this.getSize();switch(l){case"left":case"right":t=d.height;break;case"top":case"bottom":e=d.width;break;default:break}let v={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[l];const x=Yi.normalize(this.getAngle()||0);o.absolute&&(v+=Math.floor((x+45)/90),v%=4);const w=this.getBBox();let _;v===0?_=w.getBottomLeft():v===1?_=w.getCorner():v===2?_=w.getTopRight():_=w.getOrigin();const A=_.clone().rotate(-x,w.getCenter()),P=Math.sqrt(e*e+t*t)/2;let V=v*Math.PI/2;V+=Math.atan(v%2===0?t/e:e/t),V-=Yi.toRad(x);const te=$e.fromPolar(P,V,A).clone().translate(e/-2,t/-2);this.store.set("size",{width:e,height:t},o),this.setPosition(te.x,te.y,o)}else this.store.set("size",{width:e,height:t},o);return this.stopBatch("resize",o),this}scale(e,t,o,l={}){const d=this.getBBox().scale(e,t,o==null?void 0:o);return this.startBatch("scale",l),this.setPosition(d.x,d.y,l),this.resize(d.width,d.height,l),this.stopBatch("scale"),this}position(e,t,o){return typeof e=="number"?this.setPosition(e,t,o):this.getPosition(e)}getPosition(e={}){if(e.relative){const o=this.getParent();if(o!=null&&o.isNode()){const l=this.getPosition(),d=o.getPosition();return{x:l.x-d.x,y:l.y-d.y}}}const t=this.store.get("position");return t?Object.assign({},t):{x:0,y:0}}setPosition(e,t,o={}){let l,d,f;if(typeof e=="object"?(l=e.x,d=e.y,f=t||{}):(l=e,d=t,f=o||{}),f.relative){const v=this.getParent();if(v!=null&&v.isNode()){const x=v.getPosition();l+=x.x,d+=x.y}}if(f.deep){const v=this.getPosition();this.translate(l-v.x,d-v.y,f)}else this.store.set("position",{x:l,y:d},f);return this}translate(e=0,t=0,o={}){if(e===0&&t===0)return this;o.translateBy=o.translateBy||this.id;const l=this.getPosition();if(o.restrict!=null&&o.translateBy===this.id){const f=this.getBBox({deep:!0}),v=o.restrict,x=l.x-f.x,w=l.y-f.y,_=Math.max(v.x+x,Math.min(v.x+v.width+x-f.width,l.x+e)),A=Math.max(v.y+w,Math.min(v.y+v.height+w-f.height,l.y+t));e=_-l.x,t=A-l.y}const d={x:l.x+e,y:l.y+t};return o.tx=e,o.ty=t,o.transition?(typeof o.transition!="object"&&(o.transition={}),this.transition("position",d,Object.assign(Object.assign({},o.transition),{interp:qd.object})),this.eachChild(f=>{var v;((v=o.exclude)===null||v===void 0?void 0:v.includes(f))||f.translate(e,t,o)})):(this.startBatch("translate",o),this.store.set("position",d,o),this.eachChild(f=>{var v;((v=o.exclude)===null||v===void 0?void 0:v.includes(f))||f.translate(e,t,o)}),this.stopBatch("translate",o)),this}angle(e,t){return e==null?this.getAngle():this.rotate(e,t)}getAngle(){return this.store.get("angle",0)}rotate(e,t={}){const o=this.getAngle();if(t.center){const l=this.getSize(),d=this.getPosition(),f=this.getBBox().getCenter();f.rotate(o-e,t.center);const v=f.x-l.width/2-d.x,x=f.y-l.height/2-d.y;this.startBatch("rotate",{angle:e,options:t}),this.setPosition(d.x+v,d.y+x,t),this.rotate(e,Object.assign(Object.assign({},t),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",t.absolute?e:(o+e)%360,t);return this}getBBox(e={}){if(e.deep){const t=this.getDescendants({deep:!0,breadthFirst:!0});return t.push(this),Gi.getCellsBBox(t)}return zn.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(e,t){const o=this.getBBox(),l=o.getCenter(),d=e.getTerminal(t);if(d==null)return l;const f=d.port;if(!f||!this.hasPort(f))return l;const v=this.getPort(f);if(!v||!v.group)return l;const w=this.getPortsPosition(v.group)[f].position,_=$e.create(w).translate(o.getOrigin()),A=this.getAngle();return A&&_.rotate(-A,l),_}fit(e={}){const o=(this.getChildren()||[]).filter(w=>w.isNode());if(o.length===0)return this;this.startBatch("fit-embeds",e),e.deep&&o.forEach(w=>w.fit(e));let{x:l,y:d,width:f,height:v}=Gi.getCellsBBox(o);const x=Cc(e.padding);return l-=x.left,d-=x.top,f+=x.left+x.right,v+=x.bottom+x.top,this.store.set({position:{x:l,y:d},size:{width:f,height:v}},e),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(e){this.setPortContainerMarkup(e)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||Qi.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(e,t={}){return this.store.set("portContainerMarkup",Qi.clone(e),t),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(e){this.setPortMarkup(e)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||Qi.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(e,t={}){return this.store.set("portMarkup",Qi.clone(e),t),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(e){this.setPortLabelMarkup(e)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||Qi.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(e,t={}){return this.store.set("portLabelMarkup",Qi.clone(e),t),this}get ports(){const e=this.store.get("ports",{items:[]});return e.items==null&&(e.items=[]),e}getPorts(){return Tr(this.ports.items)}getPortsByGroup(e){return this.getPorts().filter(t=>t.group===e)}getPort(e){return Tr(this.ports.items.find(t=>t.id&&t.id===e))}getPortAt(e){return this.ports.items[e]||null}hasPorts(){return this.ports.items.length>0}hasPort(e){return this.getPortIndex(e)!==-1}getPortIndex(e){const t=typeof e=="string"?e:e.id;return t!=null?this.ports.items.findIndex(o=>o.id===t):-1}getPortsPosition(e){const t=this.getSize();return this.port.getPortsLayoutByGroup(e,new zn(0,0,t.width,t.height)).reduce((l,d)=>{const f=d.portLayout;return l[d.portId]={position:Object.assign({},f.position),angle:f.angle||0},l},{})}getPortProp(e,t){return this.getPropByPath(this.prefixPortPath(e,t))}setPortProp(e,t,o,l){if(typeof t=="string"||Array.isArray(t)){const v=this.prefixPortPath(e,t),x=o;return this.setPropByPath(v,x,l)}const d=this.prefixPortPath(e),f=t;return this.setPropByPath(d,f,o)}removePortProp(e,t,o){return typeof t=="string"||Array.isArray(t)?this.removePropByPath(this.prefixPortPath(e,t),o):this.removePropByPath(this.prefixPortPath(e),t)}portProp(e,t,o,l){return t==null?this.getPortProp(e):typeof t=="string"||Array.isArray(t)?arguments.length===2?this.getPortProp(e,t):o==null?this.removePortProp(e,t,l):this.setPortProp(e,t,o,l):this.setPortProp(e,t,o)}prefixPortPath(e,t){const o=this.getPortIndex(e);if(o===-1)throw new Error(`Unable to find port with id: "${e}"`);return t==null||t===""?["ports","items",`${o}`]:Array.isArray(t)?["ports","items",`${o}`,...t]:`ports/items/${o}/${t}`}addPort(e,t){const o=[...this.ports.items];return o.push(e),this.setPropByPath("ports/items",o,t),this}addPorts(e,t){return this.setPropByPath("ports/items",[...this.ports.items,...e],t),this}insertPort(e,t,o){const l=[...this.ports.items];return l.splice(e,0,t),this.setPropByPath("ports/items",l,o),this}removePort(e,t={}){return this.removePortAt(this.getPortIndex(e),t)}removePortAt(e,t={}){if(e>=0){const o=[...this.ports.items];o.splice(e,1),t.rewrite=!0,this.setPropByPath("ports/items",o,t)}return this}removePorts(e,t){let o;if(Array.isArray(e)){if(o=t||{},e.length){o.rewrite=!0;const d=[...this.ports.items].filter(f=>!e.some(v=>{const x=typeof v=="string"?v:v.id;return f.id===x}));this.setPropByPath("ports/items",d,o)}}else o=e||{},o.rewrite=!0,this.setPropByPath("ports/items",[],o);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(e,t){return this.port.getPortsLayoutByGroup(e,t)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const e=this.ports,t={};e.items.forEach(f=>{f.id&&(t[f.id]=!0)});const o={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(f=>{f.id&&!t[f.id]&&(o[f.id]=!0)});const d=this.model;d&&!Em(o)&&(d.getConnectedEdges(this,{incoming:!0}).forEach(x=>{const w=x.getTargetPortId();w&&o[w]&&x.remove()}),d.getConnectedEdges(this,{outgoing:!0}).forEach(x=>{const w=x.getSourcePortId();w&&o[w]&&x.remove()}))}validatePorts(){const e={},t=[];return this.ports.items.forEach(o=>{typeof o!="object"&&t.push(`Invalid port ${o}.`),o.id==null&&(o.id=this.generatePortId()),e[o.id]&&t.push("Duplicitied port id."),e[o.id]=!0}),t}generatePortId(){return dC()}updatePortData(){const e=this.validatePorts();if(e.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(e.join(" "));const t=this.port?this.port.getPorts():null;this.port=new pA(this.ports);const o=this.port.getPorts(),l=t?o.filter(f=>t.find(v=>v.id===f.id)?null:f):[...o],d=t?t.filter(f=>o.find(v=>v.id===f.id)?null:f):[];l.length>0&&this.notify("ports:added",{added:l,cell:this,node:this}),d.length>0&&this.notify("ports:removed",{removed:d,cell:this,node:this})}}bs.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(c){c.toStringTag=`X6.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&typeof l.isNode=="function"&&typeof l.isEdge=="function"&&typeof l.prop=="function"&&typeof l.attr=="function"&&typeof l.size=="function"&&typeof l.position=="function"}c.isNode=e}(bs||(bs={})),function(c){c.config({propHooks(e){var{ports:t}=e,o=ky(e,["ports"]);return t&&(o.ports=Array.isArray(t)?{items:t}:t),o}})}(bs||(bs={})),function(c){c.registry=Vs.create({type:"node",process(e,t){if(A0.exist(e,!0))throw new Error(`Node with name '${e}' was registered by anthor Edge`);if(typeof t=="function")return t.config({shape:e}),t;let o=c;const{inherit:l}=t,d=ky(t,["inherit"]);if(l)if(typeof l=="string"){const v=this.get(l);v==null?this.onNotFound(l,"inherited"):o=v}else o=l;d.constructorName==null&&(d.constructorName=e);const f=o.define.call(o,d);return f.config({shape:e}),f}}),A0.setNodeRegistry(c.registry)}(bs||(bs={})),function(c){let e=0;function t(d){return d?cC(d):(e+=1,`CustomNode${e}`)}function o(d){const{constructorName:f,overwrite:v}=d,x=ky(d,["constructorName","overwrite"]),w=lv(t(f||x.shape),this);return w.config(x),x.shape&&c.registry.register(x.shape,w,v),w}c.define=o;function l(d){const f=d.shape||"rect",v=c.registry.get(f);return v?new v(d):c.registry.onNotFound(f)}c.create=l}(bs||(bs={}));var gA=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class sl extends bs{get label(){return this.getLabel()}set label(e){this.setLabel(e)}getLabel(){return this.getAttrByPath("text/text")}setLabel(e,t){return e==null?this.removeLabel():this.setAttrByPath("text/text",e,t),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}(function(c){c.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},c.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},c.config({attrs:{text:Object.assign({},c.labelAttr)},propHooks(e){const{label:t}=e,o=gA(e,["label"]);return t&&zf(o,"attrs/text/text",t),o},visible:!0})})(sl||(sl={}));var vA=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};function mA(c,e=!1){return`<g class="rotatable"><g class="scalable"><${c}/></g>${e?"":"<text/>"}</g>`}function V2(c){return`basic.${c}`}function ug(c="xlink:href"){return t=>{const{imageUrl:o,imageWidth:l,imageHeight:d}=t,f=vA(t,["imageUrl","imageWidth","imageHeight"]);if(o!=null||l!=null||d!=null){const v=()=>{if(f.attrs){const x=f.attrs.image;o!=null&&(x[c]=o),l!=null&&(x.width=l),d!=null&&(x.height=d),f.attrs.image=x}};f.attrs?(f.attrs.image==null&&(f.attrs.image={}),v()):(f.attrs={image:{}},v())}return f}}function Jd(c,e,t={}){const o=V2(c),l={constructorName:o,attrs:{".":{fill:"#ffffff",stroke:"none"},[c]:{fill:"#ffffff",stroke:"#000000"}}};return t.ignoreMarkup||(l.markup=mA(c,t.noText===!0)),(t.parent||sl).define(Fo(l,e,{shape:o}))}const f3=Jd("rect",{attrs:{rect:{width:100,height:60}}}),p3=Jd("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),g3=Jd("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),v3=Jd("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),m3=Jd("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),y3=Jd("image",{attrs:{text:{refY:null,refDy:16}},propHooks:ug()});var yA=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};const hw=Jd("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks(c){const{d:e}=c,t=yA(c,["d"]);return e!=null&&zf(t,"attrs/path/d",e),t}}),b3=Jd("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:hw,ignoreMarkup:!0}),bA=Jd("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:hw,ignoreMarkup:!0});var Ly=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class as extends Gi{constructor(e={}){super(e)}get[Symbol.toStringTag](){return as.toStringTag}preprocess(e,t){const{source:o,sourceCell:l,sourcePort:d,sourcePoint:f,target:v,targetCell:x,targetPort:w,targetPoint:_}=e,P=Ly(e,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),V=q=>typeof q=="string"||typeof q=="number";if(o!=null)if(Gi.isCell(o))P.source={cell:o.id};else if(V(o))P.source={cell:o};else if($e.isPoint(o))P.source=o.toJSON();else if(Array.isArray(o))P.source={x:o[0],y:o[1]};else{const q=o.cell;Gi.isCell(q)?P.source=Object.assign(Object.assign({},o),{cell:q.id}):P.source=o}if(l!=null||d!=null){let q=P.source;if(l!=null){const te=V(l)?l:l.id;q?q.cell=te:q=P.source={cell:te}}d!=null&&q&&(q.port=d)}else f!=null&&(P.source=$e.create(f).toJSON());if(v!=null)if(Gi.isCell(v))P.target={cell:v.id};else if(V(v))P.target={cell:v};else if($e.isPoint(v))P.target=v.toJSON();else if(Array.isArray(v))P.target={x:v[0],y:v[1]};else{const q=v.cell;Gi.isCell(q)?P.target=Object.assign(Object.assign({},v),{cell:q.id}):P.target=v}if(x!=null||w!=null){let q=P.target;if(x!=null){const te=V(x)?x:x.id;q?q.cell=te:q=P.target={cell:te}}w!=null&&q&&(q.port=w)}else _!=null&&(P.target=$e.create(_).toJSON());return super.preprocess(P,t)}setup(){super.setup(),this.on("change:labels",e=>this.onLabelsChanged(e)),this.on("change:vertices",e=>this.onVertexsChanged(e))}isEdge(){return!0}disconnect(e={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},e),this}get source(){return this.getSource()}set source(e){this.setSource(e)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(e,t,o={}){return this.setTerminal("source",e,t,o)}get target(){return this.getTarget()}set target(e){this.setTarget(e)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(e,t,o={}){return this.setTerminal("target",e,t,o)}getTerminal(e){return Object.assign({},this.store.get(e))}setTerminal(e,t,o,l={}){if(Gi.isCell(t))return this.store.set(e,Fo({},o,{cell:t.id}),l),this;const d=t;return $e.isPoint(t)||d.x!=null&&d.y!=null?(this.store.set(e,Fo({},o,{x:d.x,y:d.y}),l),this):(this.store.set(e,Tr(t),l),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(e){const t=this[e];if($e.isPointLike(t))return $e.create(t);const o=this.getTerminalCell(e);return o?o.getConnectionPoint(this,e):new $e}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(e){if(this.model){const t=e==="source"?this.getSourceCellId():this.getTargetCellId();if(t)return this.model.getCell(t)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(e){let t=this;const o={};for(;t&&t.isEdge();){if(o[t.id])return null;o[t.id]=!0,t=t.getTerminalCell(e)}return t&&t.isNode()?t:null}get router(){return this.getRouter()}set router(e){e==null?this.removeRouter():this.setRouter(e)}getRouter(){return this.store.get("router")}setRouter(e,t,o){return typeof e=="object"?this.store.set("router",e,t):this.store.set("router",{name:e,args:t},o),this}removeRouter(e={}){return this.store.remove("router",e),this}get connector(){return this.getConnector()}set connector(e){e==null?this.removeConnector():this.setConnector(e)}getConnector(){return this.store.get("connector")}setConnector(e,t,o){return typeof e=="object"?this.store.set("connector",e,t):this.store.set("connector",{name:e,args:t},o),this}removeConnector(e={}){return this.store.remove("connector",e)}get strategy(){return this.getStrategy()}set strategy(e){e==null?this.removeStrategy():this.setStrategy(e)}getStrategy(){return this.store.get("strategy")}setStrategy(e,t,o){return typeof e=="object"?this.store.set("strategy",e,t):this.store.set("strategy",{name:e,args:t},o),this}removeStrategy(e={}){return this.store.remove("strategy",e)}getDefaultLabel(){const e=this.constructor,t=this.store.get("defaultLabel")||e.defaultLabel||{};return Tr(t)}get labels(){return this.getLabels()}set labels(e){this.setLabels(e)}getLabels(){return[...this.store.get("labels",[])].map(e=>this.parseLabel(e))}setLabels(e,t={}){return this.store.set("labels",Array.isArray(e)?e:[e],t),this}insertLabel(e,t,o={}){const l=this.getLabels(),d=l.length;let f=t!=null&&Number.isFinite(t)?t:d;return f<0&&(f=d+f+1),l.splice(f,0,this.parseLabel(e)),this.setLabels(l,o)}appendLabel(e,t={}){return this.insertLabel(e,-1,t)}getLabelAt(e){const t=this.getLabels();return e!=null&&Number.isFinite(e)?this.parseLabel(t[e]):null}setLabelAt(e,t,o={}){if(e!=null&&Number.isFinite(e)){const l=this.getLabels();l[e]=this.parseLabel(t),this.setLabels(l,o)}return this}removeLabelAt(e,t={}){const o=this.getLabels(),l=e!=null&&Number.isFinite(e)?e:-1,d=o.splice(l,1);return this.setLabels(o,t),d.length?d[0]:null}parseLabel(e){return typeof e=="string"?this.constructor.parseStringLabel(e):e}onLabelsChanged({previous:e,current:t}){const o=e&&t?t.filter(d=>e.find(f=>d===f||Uc(d,f))?null:d):t?[...t]:[],l=e&&t?e.filter(d=>t.find(f=>d===f||Uc(d,f))?null:d):e?[...e]:[];o.length>0&&this.notify("labels:added",{added:o,cell:this,edge:this}),l.length>0&&this.notify("labels:removed",{removed:l,cell:this,edge:this})}get vertexMarkup(){return this.getVertexMarkup()}set vertexMarkup(e){this.setVertexMarkup(e)}getDefaultVertexMarkup(){return this.store.get("defaultVertexMarkup")||Qi.getEdgeVertexMarkup()}getVertexMarkup(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()}setVertexMarkup(e,t={}){return this.store.set("vertexMarkup",Qi.clone(e),t),this}get vertices(){return this.getVertices()}set vertices(e){this.setVertices(e)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(e,t={}){const o=Array.isArray(e)?e:[e];return this.store.set("vertices",o.map(l=>$e.toJSON(l)),t),this}insertVertex(e,t,o={}){const l=this.getVertices(),d=l.length;let f=t!=null&&Number.isFinite(t)?t:d;return f<0&&(f=d+f+1),l.splice(f,0,$e.toJSON(e)),this.setVertices(l,o)}appendVertex(e,t={}){return this.insertVertex(e,-1,t)}getVertexAt(e){return e!=null&&Number.isFinite(e)?this.getVertices()[e]:null}setVertexAt(e,t,o={}){if(e!=null&&Number.isFinite(e)){const l=this.getVertices();l[e]=t,this.setVertices(l,o)}return this}removeVertexAt(e,t={}){const o=this.getVertices(),l=e!=null&&Number.isFinite(e)?e:-1;return o.splice(l,1),this.setVertices(o,t)}onVertexsChanged({previous:e,current:t}){const o=e&&t?t.filter(d=>e.find(f=>$e.equals(d,f))?null:d):t?[...t]:[],l=e&&t?e.filter(d=>t.find(f=>$e.equals(d,f))?null:d):e?[...e]:[];o.length>0&&this.notify("vertexs:added",{added:o,cell:this,edge:this}),l.length>0&&this.notify("vertexs:removed",{removed:l,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||Qi.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}get toolMarkup(){return this.getToolMarkup()}set toolMarkup(e){this.setToolMarkup(e)}getDefaultToolMarkup(){return this.store.get("defaultToolMarkup")||Qi.getEdgeToolMarkup()}getToolMarkup(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()}setToolMarkup(e,t={}){return this.store.set("toolMarkup",e,t),this}get doubleToolMarkup(){return this.getDoubleToolMarkup()}set doubleToolMarkup(e){this.setDoubleToolMarkup(e)}getDefaultDoubleToolMarkup(){return this.store.get("defaultDoubleToolMarkup")}getDoubleToolMarkup(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()}setDoubleToolMarkup(e,t={}){return this.store.set("doubleToolMarkup",e,t),this}get arrowheadMarkup(){return this.getArrowheadMarkup()}set arrowheadMarkup(e){this.setArrowheadMarkup(e)}getDefaultArrowheadMarkup(){return this.store.get("defaultArrowheadMarkup")||Qi.getEdgeArrowheadMarkup()}getArrowheadMarkup(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()}setArrowheadMarkup(e,t={}){return this.store.set("arrowheadMarkup",e,t),this}translate(e,t,o={}){return o.translateBy=o.translateBy||this.id,o.tx=e,o.ty=t,this.applyToPoints(l=>({x:(l.x||0)+e,y:(l.y||0)+t}),o)}scale(e,t,o,l={}){return this.applyToPoints(d=>$e.create(d).scale(e,t,o).toJSON(),l)}applyToPoints(e,t={}){const o={},l=this.getSource(),d=this.getTarget();$e.isPointLike(l)&&(o.source=e(l)),$e.isPointLike(d)&&(o.target=e(d));const f=this.getVertices();return f.length>0&&(o.vertices=f.map(e)),this.store.set(o,t),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const e=[this.getSourcePoint(),...this.getVertices().map(t=>$e.create(t)),this.getTargetPoint()];return new fa(e)}updateParent(e){let t=null;const o=this.getSourceCell(),l=this.getTargetCell(),d=this.getParent();return o&&l&&(o===l||o.isDescendantOf(l)?t=l:l.isDescendantOf(o)?t=o:t=Gi.getCommonAncestor(o,l)),d&&(!t||t.id!==d.id)&&d.unembed(this,e),t&&t.embed(this,e),t}hasLoop(e={}){const t=this.getSource(),o=this.getTarget(),l=t.cell,d=o.cell;if(!l||!d)return!1;let f=l===d;if(!f&&e.deep&&this._model){const v=this.getSourceCell(),x=this.getTargetCell();v&&x&&(f=v.isAncestorOf(x,e)||x.isAncestorOf(v,e))}return f}getFragmentAncestor(){const e=[this,this.getSourceNode(),this.getTargetNode()].filter(t=>t!=null);return this.getCommonAncestor(...e)}isFragmentDescendantOf(e){const t=this.getFragmentAncestor();return!!t&&(t.id===e.id||t.isDescendantOf(e))}}as.defaults={},function(c){function e(t,o){const l=t,d=o;return l.cell===d.cell?l.port===d.port||l.port==null&&d.port==null:!1}c.equalTerminals=e}(as||(as={})),function(c){c.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function e(t){return{attrs:{label:{text:t}}}}c.parseStringLabel=e}(as||(as={})),function(c){c.toStringTag=`X6.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&typeof l.isNode=="function"&&typeof l.isEdge=="function"&&typeof l.prop=="function"&&typeof l.attr=="function"&&typeof l.disconnect=="function"&&typeof l.getSource=="function"&&typeof l.getTarget=="function"}c.isEdge=e}(as||(as={})),function(c){c.registry=Vs.create({type:"edge",process(e,t){if(A0.exist(e,!1))throw new Error(`Edge with name '${e}' was registered by anthor Node`);if(typeof t=="function")return t.config({shape:e}),t;let o=c;const{inherit:l="edge"}=t,d=Ly(t,["inherit"]);if(typeof l=="string"){const v=this.get(l||"edge");v==null&&l?this.onNotFound(l,"inherited"):o=v}else o=l;d.constructorName==null&&(d.constructorName=e);const f=o.define.call(o,d);return f.config({shape:e}),f}}),A0.setEdgeRegistry(c.registry)}(as||(as={})),function(c){let e=0;function t(d){return d?cC(d):(e+=1,`CustomEdge${e}`)}function o(d){const{constructorName:f,overwrite:v}=d,x=Ly(d,["constructorName","overwrite"]),w=lv(t(f||x.shape),this);return w.config(x),x.shape&&c.registry.register(x.shape,w,v),w}c.define=o;function l(d){const f=d.shape||"edge",v=c.registry.get(f);return v?new v(d):c.registry.onNotFound(f)}c.create=l}(as||(as={})),function(c){const e="basic.edge";c.config({shape:e,propHooks(t){const{label:o,vertices:l}=t,d=Ly(t,["label","vertices"]);if(o){d.labels==null&&(d.labels=[]);const f=typeof o=="string"?c.parseStringLabel(o):o;d.labels.push(f)}return l&&Array.isArray(l)&&(d.vertices=l.map(f=>$e.create(f).toJSON())),d}}),c.registry.register(e,c)}(as||(as={}));var xA=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class Jh extends As{constructor(){super(...arguments),this.POINT_ROUNDING=2,this.markerCache={}}get[Symbol.toStringTag](){return Jh.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const e=this.sourceView;if(!e){const o=this.cell.getSource();return new zn(o.x,o.y)}const t=this.sourceMagnet;return e.isEdgeElement(t)?new zn(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(t||e.container)}get targetBBox(){const e=this.targetView;if(!e){const o=this.cell.getTarget();return new zn(o.x,o.y)}const t=this.targetMagnet;return e.isEdgeElement(t)?new zn(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(t||e.container)}isEdgeView(){return!0}confirmUpdate(e,t={}){let o=e;if(this.hasAction(o,"source")){if(!this.updateTerminalProperties("source"))return o;o=this.removeAction(o,"source")}if(this.hasAction(o,"target")){if(!this.updateTerminalProperties("target"))return o;o=this.removeAction(o,"target")}const l=this.graph,d=this.sourceView,f=this.targetView;return l&&(d&&!l.renderer.isViewMounted(d)||f&&!l.renderer.isViewMounted(f))?o:this.hasAction(o,"render")?(this.render(),o=this.removeAction(o,["render","update","vertices","labels","tools","widget"]),o):(o=this.handleAction(o,"vertices",()=>this.renderVertexMarkers()),o=this.handleAction(o,"update",()=>this.update(null,t)),o=this.handleAction(o,"labels",()=>this.onLabelsChange(t)),o=this.handleAction(o,"tools",()=>{this.renderTools(),this.updateToolsPosition()}),o=this.handleAction(o,"widget",()=>this.renderExternalTools()),o)}onLabelsChange(e={}){this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(e={}){const t=this.cell.previous("labels");if(t==null)return!0;if("propertyPathArray"in e&&"propertyValue"in e){const o=e.propertyPathArray||[],l=o.length;if(l>1){const d=o[1];if(t[d]){if(l===2)return typeof e.propertyValue=="object"&&Mo(e.propertyValue,"markup");if(o[2]!=="markup")return!1}}}return!0}render(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this.renderExternalTools(),this}renderMarkup(){const e=this.cell.markup;if(e)return typeof e=="string"?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid edge markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}renderStringMarkup(e){const t=this.containers,o=dr.createVectors(e);o.forEach(l=>{const d=l.attr("class");d&&(t[i2(d)]=l.node)}),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),s0(this.container,o.map(l=>l.node))}renderLabels(){const e=this.cell,t=e.getLabels(),o=t.length;let l=this.containers.labels;if(this.labelCache={},this.labelSelectors={},o<=0)return l&&l.parentNode&&l.parentNode.removeChild(l),this;l?this.empty(l):(l=wc("g"),this.addClass(this.prefixClassName("edge-labels"),l),this.containers.labels=l);for(let d=0,f=t.length;d<f;d+=1){const v=t[d],x=this.normalizeLabelMarkup(this.parseLabelMarkup(v.markup));let w,_;if(x)w=x.node,_=x.selectors;else{const P=e.getDefaultLabel(),V=this.normalizeLabelMarkup(this.parseLabelMarkup(P.markup));w=V.node,_=V.selectors}w.setAttribute("data-index",`${d}`),l.appendChild(w);const A=this.rootSelector;if(_[A])throw new Error("Ambiguous label root selector.");_[A]=w,this.labelCache[d]=w,this.labelSelectors[d]=_}return l.parentNode==null&&this.container.appendChild(l),this.updateLabels(),this.customizeLabels(),this}parseLabelMarkup(e){return e?typeof e=="string"?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}parseLabelStringMarkup(e){const t=dr.createVectors(e),o=document.createDocumentFragment();for(let l=0,d=t.length;l<d;l+=1){const f=t[l].node;o.appendChild(f)}return{fragment:o,selectors:{}}}normalizeLabelMarkup(e){if(e==null)return;const t=e.fragment;if(!(t instanceof DocumentFragment)||!t.hasChildNodes())throw new Error("Invalid label markup.");let o;const l=t.childNodes;return l.length>1||l[0].nodeName.toUpperCase()!=="G"?o=dr.create("g").append(t):o=dr.create(l[0]),o.addClass(this.prefixClassName("edge-label")),{node:o.node,selectors:e.selectors}}updateLabels(){if(this.containers.labels){const e=this.cell,t=e.labels,o=this.can("edgeLabelMovable"),l=e.getDefaultLabel();for(let d=0,f=t.length;d<f;d+=1){const v=this.labelCache[d],x=this.labelSelectors[d];v.setAttribute("cursor",o?"move":"default");const w=t[d],_=Fo({},l.attrs,w.attrs);this.updateAttrs(v,_,{selectors:x,rootBBox:w.size?zn.fromSize(w.size):void 0})}}}mergeLabelAttrs(e,t,o){if(t===null)return null;if(t===void 0)return o===null?null:o===void 0?void 0:e?o:Fo({},o);if(e)return Fo({},o,t)}customizeLabels(){if(this.containers.labels){const e=this.cell,t=e.labels;for(let o=0,l=t.length;o<l;o+=1){const d=t[o],f=this.labelCache[o],v=this.labelSelectors[o];this.graph.hook.onEdgeLabelRendered({edge:e,label:d,container:f,selectors:v})}}}renderTools(){const e=this.containers.tools;if(e==null)return this;const t=this.cell.toolMarkup,o=this.$(e).empty();if(Qi.isStringMarkup(t)){let l=Hp(t);const d=dr.create(l());if(o.append(d.node),this.toolCache=d.node,this.options.doubleTools){let f;const v=this.cell.doubleToolMarkup;Qi.isStringMarkup(v)?(l=Hp(v),f=dr.create(l())):f=d.clone(),o.append(f.node),this.tool2Cache=f.node}}return this}renderExternalTools(){const e=this.cell.getTools();return this.addTools(e),this}renderVertexMarkers(){const e=this.containers.vertices;if(e==null)return this;const t=this.cell.vertexMarkup,o=this.$(e).empty();if(Qi.isStringMarkup(t)){const l=Hp(t);this.cell.getVertices().forEach((d,f)=>{o.append(dr.create(l(Object.assign({index:f},d))).node)})}return this}renderArrowheadMarkers(){const e=this.containers.arrowheads;if(e==null)return this;const t=this.cell.arrowheadMarkup,o=this.$(e).empty();if(Qi.isStringMarkup(t)){const l=Hp(t),d=dr.create(l({end:"source"})).node,f=dr.create(l({end:"target"})).node;this.containers.sourceArrowhead=d,this.containers.targetArrowhead=f,o.append(d,f)}return this}update(e,t={}){this.cleanCache(),this.updateConnection(t);const o=this.cell.getAttrs();return o!=null&&this.updateAttrs(this.container,o,{attrs:e===o?null:e,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(t),this}removeRedundantLinearVertices(e={}){const t=this.cell,o=t.getVertices(),l=[this.sourceAnchor,...o,this.targetAnchor],d=l.length,f=new fa(l);f.simplify({threshold:.01});const v=f.points.map(w=>w.toJSON()),x=v.length;return d===x?0:(t.setVertices(v.slice(1,x-1),e),d-x)}updateConnectionPath(){const e=this.containers;if(e.connection){const t=this.getConnectionPathData();e.connection.setAttribute("d",t)}if(e.connectionWrap){const t=this.getConnectionPathData();e.connectionWrap.setAttribute("d",t)}e.sourceMarker&&e.targetMarker&&this.translateAndAutoOrientArrows(e.sourceMarker,e.targetMarker)}getTerminalView(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalAnchor(e){switch(e){case"source":return $e.create(this.sourceAnchor);case"target":return $e.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalConnectionPoint(e){switch(e){case"source":return $e.create(this.sourcePoint);case"target":return $e.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalMagnet(e,t={}){switch(e){case"source":{if(t.raw)return this.sourceMagnet;const o=this.sourceView;return o?this.sourceMagnet||o.container:null}case"target":{if(t.raw)return this.targetMagnet;const o=this.targetView;return o?this.targetMagnet||o.container:null}default:throw new Error(`Unknown terminal type '${e}'`)}}updateConnection(e={}){const t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){const o=e.tx||0,l=e.ty||0;this.routePoints=new fa(this.routePoints).translate(o,l).points,this.translateConnectionPoints(o,l),this.path.translate(o,l)}else{const o=t.getVertices(),l=this.findAnchors(o);this.sourceAnchor=l.source,this.targetAnchor=l.target,this.routePoints=this.findRoutePoints(o);const d=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=d.source,this.targetPoint=d.target;const f=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,f.source||this.sourcePoint,f.target||this.targetPoint)}this.cleanCache()}findAnchors(e){const t=this.cell,o=t.source,l=t.target,d=e[0],f=e[e.length-1];return l.priority&&!o.priority?this.findAnchorsOrdered("target",f,"source",d):this.findAnchorsOrdered("source",d,"target",f)}findAnchorsOrdered(e,t,o,l){let d,f;const v=this.cell,x=v[e],w=v[o],_=this.getTerminalView(e),A=this.getTerminalView(o),P=this.getTerminalMagnet(e),V=this.getTerminalMagnet(o);if(_){let q;t?q=$e.create(t):A?q=V:q=$e.create(w),d=this.getAnchor(x.anchor,_,P,q,e)}else d=$e.create(x);if(A){const q=$e.create(l||d);f=this.getAnchor(w.anchor,A,V,q,o)}else f=$e.isPointLike(w)?$e.create(w):new $e;return{[e]:d,[o]:f}}getAnchor(e,t,o,l,d){const f=t.isEdgeElement(o),v=this.graph.options.connecting;let x=typeof e=="string"?{name:e}:e;if(!x){const A=f?(d==="source"?v.sourceEdgeAnchor:v.targetEdgeAnchor)||v.edgeAnchor:(d==="source"?v.sourceAnchor:v.targetAnchor)||v.anchor;x=typeof A=="string"?{name:A}:A}if(!x)throw new Error("Anchor should be specified.");let w;const _=x.name;if(f){const A=ag.registry.get(_);if(typeof A!="function")return ag.registry.onNotFound(_);w=ir(A,this,t,o,l,x.args||{},d)}else{const A=E0.registry.get(_);if(typeof A!="function")return E0.registry.onNotFound(_);w=ir(A,this,t,o,l,x.args||{},d)}return w?w.round(this.POINT_ROUNDING):new $e}findRoutePoints(e=[]){const t=this.graph.options.connecting.router||tp.presets.normal,o=this.cell.getRouter()||t;let l;if(typeof o=="function")l=ir(o,this,e,{},this);else{const d=typeof o=="string"?o:o.name,f=typeof o=="string"?{}:o.args||{},v=d?tp.registry.get(d):tp.presets.normal;if(typeof v!="function")return tp.registry.onNotFound(d);l=ir(v,this,e,f,this)}return l==null?e.map(d=>$e.create(d)):l.map(d=>$e.create(d))}findConnectionPoints(e,t,o){const l=this.cell,d=this.graph.options.connecting,f=l.getSource(),v=l.getTarget(),x=this.sourceView,w=this.targetView,_=e[0],A=e[e.length-1];let P;if(x&&!x.isEdgeElement(this.sourceMagnet)){const q=this.sourceMagnet||x.container,te=_||o,ge=new mr(te,t),_e=f.connectionPoint||d.sourceConnectionPoint||d.connectionPoint;P=this.getConnectionPoint(_e,x,q,ge,"source")}else P=t;let V;if(w&&!w.isEdgeElement(this.targetMagnet)){const q=this.targetMagnet||w.container,te=v.connectionPoint||d.targetConnectionPoint||d.connectionPoint,ge=A||t,_e=new mr(ge,o);V=this.getConnectionPoint(te,w,q,_e,"target")}else V=o;return{source:P,target:V}}getConnectionPoint(e,t,o,l,d){const f=l.end;if(e==null)return f;const v=typeof e=="string"?e:e.name,x=typeof e=="string"?{}:e.args,w=S0.registry.get(v);if(typeof w!="function")return S0.registry.onNotFound(v);const _=ir(w,this,l,t,o,x||{},d);return _?_.round(this.POINT_ROUNDING):f}updateMarkerAttr(e){const t=this.cell.getAttrs(),o=`.${e}-marker`,l=t&&t[o];l&&this.updateAttrs(this.container,{},{attrs:{[o]:l},selectors:this.selectors})}findMarkerPoints(e,t,o){const l=P=>{const V=this.cell.getAttrs(),q=Object.keys(V);for(let te=0,ge=q.length;te<ge;te+=1){const _e=V[q[te]];if(_e[`${P}Marker`]||_e[`${P}-marker`]){const ke=_e.strokeWidth||_e["stroke-width"];if(ke)return parseFloat(ke);break}}return null},d=e[0],f=e[e.length-1],v=this.containers.sourceMarker,x=this.containers.targetMarker,w=this.markerCache;let _,A;if(v){if(this.updateMarkerAttr("source"),w.sourceBBox=w.sourceBBox||pa(v),w.sourceBBox.width>0){const P=Uh(v);_=t.clone().move(d||o,w.sourceBBox.width*P.sx*-1)}}else{const P=l("source");P&&(_=t.clone().move(d||o,-P))}if(x){if(this.updateMarkerAttr("target"),w.targetBBox=w.targetBBox||pa(x),w.targetBBox.width>0){const P=Uh(x);A=o.clone().move(f||t,w.targetBBox.width*P.sx*-1)}}else{const P=l("target");P&&(A=o.clone().move(f||t,-P))}return w.sourcePoint=_||t.clone(),w.targetPoint=A||o.clone(),{source:_,target:A}}findPath(e,t,o){const l=this.cell.getConnector()||this.graph.options.connecting.connector;let d,f,v;if(typeof l=="string"?d=l:(d=l.name,f=l.args),d){const w=cg.registry.get(d);if(typeof w!="function")return cg.registry.onNotFound(d);v=w}else v=cg.presets.normal;const x=ir(v,this,t,o,e,Object.assign(Object.assign({},f),{raw:!0}),this);return typeof x=="string"?Vr.parse(x):x}translateConnectionPoints(e,t){const o=this.markerCache;o.sourcePoint&&o.sourcePoint.translate(e,t),o.targetPoint&&o.targetPoint.translate(e,t),this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t)}updateLabelPositions(){if(this.containers.labels==null)return this;if(!this.path)return this;const t=this.cell,o=t.getLabels();if(o.length===0)return this;const l=t.getDefaultLabel(),d=this.normalizeLabelPosition(l.position);for(let f=0,v=o.length;f<v;f+=1){const x=o[f],w=this.normalizeLabelPosition(x.position),_=Fo({},d,w),A=this.getLabelTransformationMatrix(_);this.labelCache[f].setAttribute("transform",h0(A))}return this}updateToolsPosition(){if(this.containers.tools==null)return this;let e="",t=this.options.toolsOffset;const o=this.getConnectionLength();if(o!=null){o<this.options.shortLength&&(e="scale(.5)",t/=2);let l=this.getPointAtLength(t);if(l!=null&&go(this.toolCache,"transform",`translate(${l.x},${l.y}) ${e}`),this.options.doubleTools&&o>=this.options.longLength){const d=this.options.doubleToolsOffset||t;l=this.getPointAtLength(o-d),l!=null&&go(this.tool2Cache,"transform",`translate(${l.x},${l.y}) ${e}`),go(this.tool2Cache,"visibility","visible")}else this.options.doubleTools&&go(this.tool2Cache,"visibility","hidden")}return this}updateArrowheadMarkers(){const e=this.containers.arrowheads;if(e==null)return this;if(e.style.display==="none")return this;const t=this.containers.sourceArrowhead,o=this.containers.targetArrowhead;if(t&&o){const d=(this.getConnectionLength()||0)<this.options.shortLength?.5:1;Uh(t,d),Uh(o,d),this.translateAndAutoOrientArrows(t,o)}return this}updateTerminalProperties(e){const t=this.cell,o=this.graph,l=t[e],d=l&&l.cell,f=`${e}View`;if(!d)return this[f]=null,this.updateTerminalMagnet(e),!0;const v=o.getCellById(d);if(!v)throw new Error(`Edge's ${e} node with id "${d}" not exists`);const x=v.findView(o);return x?(this[f]=x,this.updateTerminalMagnet(e),!0):!1}updateTerminalMagnet(e){const t=`${e}Magnet`,o=this.getTerminalView(e);if(o){let l=o.getMagnetFromEdgeTerminal(this.cell[e]);l===o.container&&(l=null),this[t]=l}else this[t]=null}translateAndAutoOrientArrows(e,t){const o=this.routePoints;e&&Zd(e,this.sourcePoint,o[0]||this.targetPoint,this.graph.view.stage),t&&Zd(t,this.targetPoint,o[o.length-1]||this.sourcePoint,this.graph.view.stage)}getLabelPositionAngle(e){const t=this.cell.getLabelAt(e);return t&&t.position&&typeof t.position=="object"&&t.position.angle||0}getLabelPositionArgs(e){const t=this.cell.getLabelAt(e);if(t&&t.position&&typeof t.position=="object")return t.position.options}getDefaultLabelPositionArgs(){const e=this.cell.getDefaultLabel();if(e&&e.position&&typeof e.position=="object")return e.position.options}mergeLabelPositionArgs(e,t){return e===null?null:e===void 0?t===null?null:t:Fo({},t,e)}addLabel(e,t,o,l){let d,f,v=0,x;typeof e!="number"?(d=e.x,f=e.y,typeof t=="number"?(v=t,x=o):x=t):(d=e,f=t,typeof o=="number"?(v=o,x=l):x=o);const w=this.getDefaultLabelPositionArgs(),_=x,A=this.mergeLabelPositionArgs(_,w),P={position:this.getLabelPosition(d,f,v,A)},V=-1;return this.cell.insertLabel(P,V,x),V}addVertex(e,t,o){const l=typeof e!="number",d=l?e.x:e,f=l?e.y:t,v=l?t:o,x={x:d,y:f},w=this.getVertexIndex(d,f);return this.cell.insertVertex(x,w,v),w}sendToken(e,t,o){let l,d,f,v,x="linear";typeof t=="object"?(l=t.duration,d=t.reversed===!0,f=t.selector,t.rotate===!1?v="":t.rotate===!0?v="auto":t.rotate!=null&&(v=`${t.rotate}`),t.timing&&(x=t.timing)):(l=t,d=!1,f=null),l=l||1e3;const w={dur:`${l}ms`,repeatCount:"1",calcMode:x,fill:"freeze"};if(v&&(w.rotate=v),d&&(w.keyPoints="1;0",w.keyTimes="0;1"),typeof t=="object"){const{duration:_e,reversed:ke,selector:Se,rotate:je,timing:nt}=t,wt=xA(t,["duration","reversed","selector","rotate","timing"]);Object.keys(wt).forEach(It=>{w[It]=wt[It]})}let _;if(typeof f=="string"?_=this.findOne(f,this.container,this.selectors):_=this.containers.connection?this.containers.connection:this.container.querySelector("path"),!(_ instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");const A=typeof e=="string"?this.findOne(e):e;if(A==null)throw new Error("Token animation requires a valid token element.");const P=A.parentNode,V=()=>{P||id(A)},q=dr.create(A);P||q.appendTo(this.graph.view.stage);const te=w.complete;w.complete=_e=>{V(),o&&o(),te&&te(_e)};const ge=q.animateAlongPath(w,_);return()=>{V(),ge()}}getConnection(){return this.path!=null?this.path.clone():null}getConnectionPathData(){if(this.path==null)return"";const e=this.cache.pathCache;return Mo(e,"data")||(e.data=this.path.serialize()),e.data||""}getConnectionSubdivisions(){if(this.path==null)return null;const e=this.cache.pathCache;return Mo(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}getConnectionLength(){if(this.path==null)return 0;const e=this.cache.pathCache;return Mo(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}getPointAtLength(e){return this.path==null?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(e){return this.path==null?null:(Hd(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(e){return this.path==null?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(e){return this.path==null?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(e){return this.path==null?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(e){return this.path==null?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(e){return this.path==null?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(e,t,o,l){const d={distance:0};let f=0,v;typeof o=="number"?(f=o,v=l):v=o,v!=null&&(d.options=v);const x=v&&v.absoluteOffset,w=!(v&&v.absoluteDistance),_=v&&v.absoluteDistance&&v.reverseDistance,A=this.path,P={segmentSubdivisions:this.getConnectionSubdivisions()},V=new $e(e,t),q=A.closestPointT(V,P),te=this.getConnectionLength()||0;let ge=A.lengthAtT(q,P);w&&(ge=te>0?ge/te:0),_&&(ge=-1*(te-ge)||1),d.distance=ge;let _e;x||(_e=A.tangentAtT(q));let ke;if(_e)ke=_e.pointOffset(V);else{const Se=A.pointAtT(q),je=V.diff(Se);ke={x:je.x,y:je.y}}return d.offset=ke,d.angle=f,d}normalizeLabelPosition(e){return typeof e=="number"?{distance:e}:e}getLabelTransformationMatrix(e){const t=this.normalizeLabelPosition(e),o=t.options||{},l=t.angle||0,d=t.distance,f=d>0&&d<=1;let v=0;const x={x:0,y:0},w=t.offset;w&&(typeof w=="number"?v=w:(w.x!=null&&(x.x=w.x),w.y!=null&&(x.y=w.y)));const _=x.x!==0||x.y!==0||v===0,A=o.keepGradient,P=o.ensureLegibility,V=this.path,q={segmentSubdivisions:this.getConnectionSubdivisions()},te=f?d*this.getConnectionLength():d,ge=V.tangentAtLength(te,q);let _e,ke=l;if(ge){if(_)_e=ge.start,_e.translate(x);else{const Se=ge.clone();Se.rotate(-90,ge.start),Se.setLength(v),_e=Se.end}A&&(ke=ge.angle()+l,P&&(ke=Yi.normalize((ke+90)%180-90)))}else _e=V.start,_&&_e.translate(x);return rl().translate(_e.x,_e.y).rotate(ke)}getLabelCoordinates(e){const t=this.getLabelTransformationMatrix(e);return new $e(t.e,t.f)}getVertexIndex(e,t){const l=this.cell.getVertices(),d=this.getClosestPointLength(new $e(e,t));let f=0;if(d!=null)for(const v=l.length;f<v;f+=1){const x=l[f],w=this.getClosestPointLength(x);if(w!=null&&d<w)break}return f}getEventArgs(e,t,o){const l=this,d=l.cell,f=d;return t==null||o==null?{e,view:l,edge:d,cell:f}:{e,x:t,y:o,view:l,edge:d,cell:f}}notifyUnhandledMouseDown(e,t,o){this.notify("edge:unhandled:mousedown",{e,x:t,y:o,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(e,t,o){super.onMouseDown(e,t,o),this.notify("edge:mousedown",this.getEventArgs(e,t,o))}notifyMouseMove(e,t,o){super.onMouseMove(e,t,o),this.notify("edge:mousemove",this.getEventArgs(e,t,o))}notifyMouseUp(e,t,o){super.onMouseUp(e,t,o),this.notify("edge:mouseup",this.getEventArgs(e,t,o))}onClick(e,t,o){super.onClick(e,t,o),this.notify("edge:click",this.getEventArgs(e,t,o))}onDblClick(e,t,o){super.onDblClick(e,t,o),this.notify("edge:dblclick",this.getEventArgs(e,t,o))}onContextMenu(e,t,o){super.onContextMenu(e,t,o),this.notify("edge:contextmenu",this.getEventArgs(e,t,o))}onMouseDown(e,t,o){switch(this.notifyMouseDown(e,t,o),e.target.getAttribute("class")){case"vertex":{this.startVertexDragging(e,t,o);return}case"vertex-remove":case"vertex-remove-area":{this.handleVertexRemoving(e,t,o);return}case"connection":case"connection-wrap":{this.handleVertexAdding(e,t,o);return}case"arrowhead":{this.startArrowheadDragging(e,t,o);return}case"source-marker":case"target-marker":{this.notifyUnhandledMouseDown(e,t,o);return}default:break}this.startEdgeDragging(e,t,o)}onMouseMove(e,t,o){const l=this.getEventData(e);switch(l.action){case"drag-vertex":{this.dragVertex(e,t,o);break}case"drag-label":{this.dragLabel(e,t,o);break}case"drag-arrowhead":{this.dragArrowhead(e,t,o);break}case"drag-edge":{this.dragEdge(e,t,o);break}default:break}return this.notifyMouseMove(e,t,o),l}onMouseUp(e,t,o){const l=this.getEventData(e);switch(l.action){case"drag-vertex":{this.stopVertexDragging(e,t,o);break}case"drag-label":{this.stopLabelDragging(e,t,o);break}case"drag-arrowhead":{this.stopArrowheadDragging(e,t,o);break}case"drag-edge":{this.stopEdgeDragging(e,t,o);break}default:break}return this.notifyMouseUp(e,t,o),this.checkMouseleave(e),l}onMouseOver(e){super.onMouseOver(e),this.notify("edge:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("edge:mouseout",this.getEventArgs(e))}onMouseEnter(e){super.onMouseEnter(e),this.notify("edge:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("edge:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,o,l){super.onMouseWheel(e,t,o,l),this.notify("edge:mousewheel",Object.assign({delta:l},this.getEventArgs(e,t,o)))}onCustomEvent(e,t,o,l){if(o0(e.target,"edge-tool",this.container)){if(e.stopPropagation(),this.can("useEdgeTools")){if(t==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,o,l)))}this.notifyMouseDown(e,o,l)}else this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,o,l))),super.onCustomEvent(e,t,o,l)}onLabelMouseDown(e,t,o){this.notifyMouseDown(e,t,o),this.startLabelDragging(e,t,o),this.getEventData(e).stopPropagation&&e.stopPropagation()}startEdgeDragging(e,t,o){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(e,t,o);return}this.setEventData(e,{x:t,y:o,moving:!1,action:"drag-edge"})}dragEdge(e,t,o){const l=this.getEventData(e);l.moving||(l.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e,x:t,y:o,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-l.x,o-l.y,{ui:!0}),this.setEventData(e,{x:t,y:o}),this.notify("edge:moving",{e,x:t,y:o,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(e,t,o){const l=this.getEventData(e);l.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e,x:t,y:o,view:this,cell:this.cell,edge:this.cell})),l.moving=!1}prepareArrowheadDragging(e,t){const o=this.getTerminalMagnet(e),l={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:t.isNewEdge===!0,terminalType:e,initialMagnet:o,initialTerminal:Bp(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(l),l}createValidateConnectionArgs(e){const t=[];t[4]=e,t[5]=this;let o,l=0,d=0;e==="source"?(l=2,o="target"):(d=2,o="source");const f=this.cell[o],v=f.cell;if(v){let x;const w=t[l]=this.graph.renderer.findViewByCell(v);w&&(x=w.getMagnetFromEdgeTerminal(f),x===w.container&&(x=void 0)),t[l+1]=x}return(x,w)=>(t[d]=x,t[d+1]=x.container===w?void 0:w,t)}beforeArrowheadDragging(e){e.zIndex=this.cell.zIndex,this.cell.toFront();const t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}afterArrowheadDragging(e){e.zIndex!=null&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null);const t=this.container;t.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}arrowheadDragging(e,t,o,l){l.x=t,l.y=o,l.currentTarget!==e&&(l.currentMagnet&&l.currentView&&l.currentView.unhighlight(l.currentMagnet,{type:"magnetAdsorbed"}),l.currentView=this.graph.renderer.findViewByElem(e),l.currentView?(l.currentMagnet=l.currentView.findMagnet(e),l.currentMagnet&&this.graph.hook.validateConnection(...l.getValidateConnectionArgs(l.currentView,l.currentMagnet),l.currentView.getEdgeTerminal(l.currentMagnet,t,o,this.cell,l.terminalType))?l.currentView.highlight(l.currentMagnet,{type:"magnetAdsorbed"}):l.currentMagnet=null):l.currentMagnet=null),l.currentTarget=e,this.cell.prop(l.terminalType,{x:t,y:o},Object.assign(Object.assign({},l.options),{ui:!0}))}arrowheadDragged(e,t,o){const l=e.currentView,d=e.currentMagnet;if(!d||!l)return;l.unhighlight(d,{type:"magnetAdsorbed"});const f=e.terminalType,v=l.getEdgeTerminal(d,t,o,this.cell,f);this.cell.setTerminal(f,v,{ui:!0})}snapArrowhead(e,t,o){const l=this.graph,{snap:d,allowEdge:f}=l.options.connecting,v=typeof d=="object"&&d.radius||50,x={x:e-v,y:t-v,width:2*v,height:2*v},w=l.renderer.findViewsInArea(x);if(f){const je=l.renderer.findEdgeViewsInArea(x).filter(nt=>nt!==this);w.push(...je)}const _=o.closestView||null,A=o.closestMagnet||null;o.closestView=null,o.closestMagnet=null;let P,V=Number.MAX_SAFE_INTEGER;const q=new $e(e,t);w.forEach(je=>{je.container.getAttribute("magnet")!=="false"&&(P=je.cell.getBBox().getCenter().distance(q),P<v&&P<V&&(A===je.container||l.hook.validateConnection(...o.getValidateConnectionArgs(je,null),je.getEdgeTerminal(je.container,e,t,this.cell,o.terminalType)))&&(V=P,o.closestView=je,o.closestMagnet=je.container)),je.container.querySelectorAll("[magnet]").forEach(nt=>{if(nt.getAttribute("magnet")!=="false"){const wt=je.getBBoxOfElement(nt);P=q.distance(wt.getCenter()),P<v&&P<V&&(A===nt||l.hook.validateConnection(...o.getValidateConnectionArgs(je,nt),je.getEdgeTerminal(nt,e,t,this.cell,o.terminalType)))&&(V=P,o.closestView=je,o.closestMagnet=nt)}})});let te;const ge=o.terminalType,_e=o.closestView,ke=o.closestMagnet,Se=A!==ke;if(_&&Se&&_.unhighlight(A,{type:"magnetAdsorbed"}),_e){if(!Se)return;_e.highlight(ke,{type:"magnetAdsorbed"}),te=_e.getEdgeTerminal(ke,e,t,this.cell,ge)}else te={x:e,y:t};this.cell.setTerminal(ge,te,{},Object.assign(Object.assign({},o.options),{ui:!0}))}snapArrowheadEnd(e){const t=e.closestView,o=e.closestMagnet;t&&o&&(t.unhighlight(o,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(o)),e.closestView=null,e.closestMagnet=null}finishEmbedding(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}fallbackConnection(e){switch(e.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0});break}}notifyConnectionEvent(e,t){const o=e.terminalType,l=e.initialTerminal,d=this.cell[o];if(d&&!as.equalTerminals(l,d)){const v=this.graph,x=l,w=x.cell?v.getCellById(x.cell):null,_=x.port,A=w?v.findViewByCell(w):null,P=w||e.isNewEdge?null:$e.create(l).toJSON(),V=d,q=V.cell?v.getCellById(V.cell):null,te=V.port,ge=q?v.findViewByCell(q):null,_e=q?null:$e.create(d).toJSON();this.notify("edge:connected",{e:t,previousCell:w,previousPort:_,previousView:A,previousPoint:P,currentCell:q,currentView:ge,currentPort:te,currentPoint:_e,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:o,isNew:e.isNewEdge})}}highlightAvailableMagnets(e){const t=this.graph,o=t.model.getCells();e.marked={};for(let l=0,d=o.length;l<d;l+=1){const f=t.renderer.findViewByCell(o[l]);if(!f)continue;const v=Array.prototype.slice.call(f.container.querySelectorAll("[magnet]"));f.container.getAttribute("magnet")!=="false"&&v.push(f.container);const x=v.filter(w=>t.hook.validateConnection(...e.getValidateConnectionArgs(f,w),f.getEdgeTerminal(w,e.x,e.y,this.cell,e.terminalType)));if(x.length>0){for(let w=0,_=x.length;w<_;w+=1)f.highlight(x[w],{type:"magnetAvailable"});f.highlight(null,{type:"nodeAvailable"}),e.marked[f.cell.id]=x}}}unhighlightAvailableMagnets(e){const t=e.marked||{};Object.keys(t).forEach(o=>{const l=this.graph.renderer.findViewByCell(o);l&&(t[o].forEach(f=>{l.unhighlight(f,{type:"magnetAvailable"})}),l.unhighlight(null,{type:"nodeAvailable"}))}),e.marked=null}startArrowheadDragging(e,t,o){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(e,t,o);return}const d=e.target.getAttribute("data-terminal"),f=this.prepareArrowheadDragging(d,{x:t,y:o});this.setEventData(e,f)}dragArrowhead(e,t,o){const l=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,o,l):this.arrowheadDragging(this.getEventTarget(e),t,o,l)}stopArrowheadDragging(e,t,o){const l=this.graph,d=this.getEventData(e);l.options.connecting.snap?this.snapArrowheadEnd(d):this.arrowheadDragged(d,t,o),l.hook.validateEdge(this.cell,d.terminalType,d.initialTerminal)?(this.finishEmbedding(d),this.notifyConnectionEvent(d,e)):this.fallbackConnection(d),this.afterArrowheadDragging(d)}startLabelDragging(e,t,o){if(this.can("edgeLabelMovable")){const l=e.currentTarget,d=parseInt(l.getAttribute("data-index"),10),f=this.getLabelPositionAngle(d),v=this.getLabelPositionArgs(d),x=this.getDefaultLabelPositionArgs(),w=this.mergeLabelPositionArgs(v,x);this.setEventData(e,{index:d,positionAngle:f,positionArgs:w,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}dragLabel(e,t,o){const l=this.getEventData(e),d=this.cell.getLabelAt(l.index),f=Fo({},d,{position:this.getLabelPosition(t,o,l.positionAngle,l.positionArgs)});this.cell.setLabelAt(l.index,f)}stopLabelDragging(e,t,o){}handleVertexAdding(e,t,o){if(!this.can("vertexAddable")){this.notifyUnhandledMouseDown(e,t,o);return}const l=this.addVertex({x:t,y:o},{ui:!0});this.setEventData(e,{index:l,action:"drag-vertex"})}handleVertexRemoving(e,t,o){if(!this.can("vertexDeletable")){this.notifyUnhandledMouseDown(e,t,o);return}const l=e.target,d=parseInt(l.getAttribute("idx"),10);this.cell.removeVertexAt(d)}startVertexDragging(e,t,o){if(!this.can("vertexMovable")){this.notifyUnhandledMouseDown(e,t,o);return}const l=e.target,d=parseInt(l.getAttribute("idx"),10);this.setEventData(e,{index:d,action:"drag-vertex"})}dragVertex(e,t,o){const l=this.getEventData(e);this.cell.setVertexAt(l.index,{x:t,y:o},{ui:!0})}stopVertexDragging(e,t,o){}}(function(c){c.toStringTag=`X6.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&typeof l.isNodeView=="function"&&typeof l.isEdgeView=="function"&&typeof l.confirmUpdate=="function"&&typeof l.update=="function"&&typeof l.getConnection=="function"}c.isEdgeView=e})(Jh||(Jh={})),Jh.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),Jh.registry.register("edge",Jh,!0);class Fl extends As{constructor(){super(...arguments),this.scalableNode=null,this.rotatableNode=null,this.scalableSelector="scalable",this.rotatableSelector="rotatable",this.defaultPortMarkup=Qi.getPortMarkup(),this.defaultPortLabelMarkup=Qi.getPortLabelMarkup(),this.defaultPortContainerMarkup=Qi.getPortContainerMarkup(),this.portsCache={}}get[Symbol.toStringTag](){return Fl.toStringTag}getContainerClassName(){const e=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||e.push(this.prefixClassName("node-immovable")),e.join(" ")}updateClassName(e){const t=e.target;if(t.hasAttribute("magnet")){const o=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?$c(t,o):ao(t,o)}else{const o=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(o):this.addClass(o)}}isNodeView(){return!0}confirmUpdate(e,t={}){let o=e;return this.hasAction(o,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(o,"render")?(this.render(),o=this.removeAction(o,["render","update","resize","translate","rotate","ports","tools"])):(o=this.handleAction(o,"resize",()=>this.resize(t),"update"),o=this.handleAction(o,"update",()=>this.update(),xu.useCSSSelector?"ports":null),o=this.handleAction(o,"translate",()=>this.translate()),o=this.handleAction(o,"rotate",()=>this.rotate()),o=this.handleAction(o,"ports",()=>this.renderPorts()),o=this.handleAction(o,"tools",()=>this.renderTools())),o}update(e){this.cleanCache(),xu.useCSSSelector&&this.removePorts();const t=this.cell,o=t.getSize(),l=t.getAttrs();this.updateAttrs(this.container,l,{attrs:e===l?null:e,rootBBox:new zn(0,0,o.width,o.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),xu.useCSSSelector&&this.renderPorts()}renderMarkup(){const e=this.cell.markup;if(e)return typeof e=="string"?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid node markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container),o=l=>Array.isArray(l)?l[0]:l;this.selectors=t.selectors,this.rotatableNode=o(this.selectors[this.rotatableSelector]),this.scalableNode=o(this.selectors[this.scalableSelector]),this.container.appendChild(t.fragment)}renderStringMarkup(e){s0(this.container,dr.toNodes(dr.createVectors(e))),this.rotatableNode=ay(this.container,`.${this.rotatableSelector}`),this.scalableNode=ay(this.container,`.${this.scalableSelector}`),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)}render(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),xu.useCSSSelector||this.renderPorts(),this.renderTools(),this}resize(e={}){if(this.scalableNode)return this.updateSize(e);this.cell.getAngle()&&this.rotate(),this.update()}translate(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()}rotate(){if(this.rotatableNode){this.updateRotation(),this.update();return}this.updateTransform()}getTranslationString(){const e=this.cell.getPosition();return`translate(${e.x},${e.y})`}getRotationString(){const e=this.cell.getAngle();if(e){const t=this.cell.getSize();return`rotate(${e},${t.width/2},${t.height/2})`}}updateTransform(){let e=this.getTranslationString();const t=this.getRotationString();t&&(e+=` ${t}`),this.container.setAttribute("transform",e)}updateRotation(){if(this.rotatableNode!=null){const e=this.getRotationString();e!=null?this.rotatableNode.setAttribute("transform",e):this.rotatableNode.removeAttribute("transform")}}updateTranslation(){this.container.setAttribute("transform",this.getTranslationString())}updateSize(e={}){const t=this.cell,o=t.getSize(),l=t.getAngle(),d=this.scalableNode;let f=!1;d.getElementsByTagName("path").length>0&&(f=!0);const v=pa(d,{recursive:f}),x=o.width/(v.width||1),w=o.height/(v.height||1);d.setAttribute("transform",`scale(${x},${w})`);const _=this.rotatableNode;if(_!=null){const A=_.getAttribute("transform");if(A){_.setAttribute("transform",`${A} rotate(${-l},${o.width/2},${o.height/2})`);const P=pa(d,{target:this.graph.view.stage});t.prop("position",{x:P.x,y:P.y},Object.assign({updated:!0},e)),this.translate(),this.rotate()}}this.update()}findPortElem(e,t){const o=e?this.portsCache[e]:null;if(!o)return null;const l=o.portContentElement,d=o.portContentSelectors||{};return this.findOne(t,l,d)}initializePorts(){this.cleanPortsCache()}refreshPorts(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()}cleanPortsCache(){this.portsCache={}}removePorts(){Object.keys(this.portsCache).forEach(e=>{const t=this.portsCache[e];id(t.portElement)})}renderPorts(){const e=this.getPortsContainer(),t=[];e.childNodes.forEach(d=>{t.push(d)});const o=ln(this.cell.getParsedPorts(),"zIndex"),l="auto";o[l]&&o[l].forEach(d=>{const f=this.getPortElement(d);e.append(f),t.push(f)}),Object.keys(o).forEach(d=>{if(d!==l){const f=parseInt(d,10);this.appendPorts(o[d],f,t)}}),this.updatePorts()}getPortsContainer(){return this.rotatableNode||this.container}appendPorts(e,t,o){const l=e.map(d=>this.getPortElement(d));o[t]||t<0?ha(o[Math.max(t,0)],l):s0(this.getPortsContainer(),l)}getPortElement(e){const t=this.portsCache[e.id];return t?t.portElement:this.createPortElement(e)}createPortElement(e){let t=Qi.renderMarkup(this.getPortContainerMarkup());const o=t.elem;if(o==null)throw new Error("Invalid port container markup.");t=Qi.renderMarkup(this.getPortMarkup(e));const l=t.elem,d=t.selectors;if(l==null)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},l),t=Qi.renderMarkup(this.getPortLabelMarkup(e.label));const f=t.elem,v=t.selectors;if(f==null)throw new Error("Invalid port label markup.");let x;if(d&&v){for(const _ in v)if(d[_]&&_!==this.rootSelector)throw new Error("Selectors within port must be unique.");x=Object.assign(Object.assign({},d),v)}else x=d||v;let w="x6-port";return e.group&&(w+=` x6-port-${e.group}`),ao(o,w),ao(l,"x6-port-body"),ao(f,"x6-port-label"),o.appendChild(l),o.appendChild(f),this.portsCache[e.id]={portElement:o,portSelectors:x,portLabelElement:f,portLabelSelectors:v,portContentElement:l,portContentSelectors:d},this.graph.hook.onPortRendered({port:e,node:this.cell,container:o,selectors:x,labelContainer:f,labelSelectors:v,contentContainer:l,contentSelectors:d}),o}updatePorts(){this.updatePortGroup();const e=this.cell.getParsedGroups();Object.keys(e).forEach(t=>this.updatePortGroup(t))}updatePortGroup(e){const t=zn.fromSize(this.cell.getSize()),o=this.cell.getPortsLayoutByGroup(e,t);for(let l=0,d=o.length;l<d;l+=1){const f=o[l],v=f.portId,x=this.portsCache[v]||{},w=f.portLayout;if(this.applyPortTransform(x.portElement,w),f.portAttrs!=null){const A={selectors:x.portSelectors||{}};f.portSize&&(A.rootBBox=zn.fromSize(f.portSize)),this.updateAttrs(x.portElement,f.portAttrs,A)}const _=f.labelLayout;if(_&&(this.applyPortTransform(x.portLabelElement,_,-(w.angle||0)),_.attrs)){const A={selectors:x.portLabelSelectors||{}};f.labelSize&&(A.rootBBox=zn.fromSize(f.labelSize)),this.updateAttrs(x.portLabelElement,_.attrs,A)}}}applyPortTransform(e,t,o=0){const l=t.angle,d=t.position,f=rl().rotate(o).translate(d.x||0,d.y||0).rotate(l||0);Xf(e,f,{absolute:!0})}getPortContainerMarkup(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup}getPortMarkup(e){return e.markup||this.cell.portMarkup||this.defaultPortMarkup}getPortLabelMarkup(e){return e.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup}getEventArgs(e,t,o){const l=this,d=l.cell,f=d;return t==null||o==null?{e,view:l,node:d,cell:f}:{e,x:t,y:o,view:l,node:d,cell:f}}notifyMouseDown(e,t,o){super.onMouseDown(e,t,o),this.notify("node:mousedown",this.getEventArgs(e,t,o))}notifyMouseMove(e,t,o){super.onMouseMove(e,t,o),this.notify("node:mousemove",this.getEventArgs(e,t,o))}notifyMouseUp(e,t,o){super.onMouseUp(e,t,o),this.notify("node:mouseup",this.getEventArgs(e,t,o))}onClick(e,t,o){super.onClick(e,t,o),this.notify("node:click",this.getEventArgs(e,t,o))}onDblClick(e,t,o){super.onDblClick(e,t,o),this.notify("node:dblclick",this.getEventArgs(e,t,o))}onContextMenu(e,t,o){super.onContextMenu(e,t,o),this.notify("node:contextmenu",this.getEventArgs(e,t,o))}onMouseDown(e,t,o){if(this.isPropagationStopped(e))return;const l=e.target;bC(l)||uS(l)||(this.notifyMouseDown(e,t,o),this.startNodeDragging(e,t,o))}onMouseMove(e,t,o){const l=this.getEventData(e),d=l.action;if(d==="magnet")this.dragMagnet(e,t,o);else{if(d==="move"){const v=l.targetView||this;v.dragNode(e,t,o),v.notify("node:moving",{e,x:t,y:o,view:v,cell:v.cell,node:v.cell})}this.notifyMouseMove(e,t,o)}this.setEventData(e,l)}onMouseUp(e,t,o){const l=this.getEventData(e),d=l.action;if(d==="magnet")this.stopMagnetDragging(e,t,o);else{const v=e.target;if(bC(v)||uS(v))return;this.notifyMouseUp(e,t,o),d==="move"&&(l.targetView||this).stopNodeDragging(e,t,o)}const f=l.targetMagnet;f&&this.onMagnetClick(e,f,t,o),this.checkMouseleave(e)}onMouseOver(e){super.onMouseOver(e),this.notify("node:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("node:mouseout",this.getEventArgs(e))}onMouseEnter(e){this.updateClassName(e),super.onMouseEnter(e),this.notify("node:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("node:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,o,l){super.onMouseWheel(e,t,o,l),this.notify("node:mousewheel",Object.assign({delta:l},this.getEventArgs(e,t,o)))}onMagnetClick(e,t,o,l){this.graph.view.getMouseMovedCount(e)>this.graph.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:t},this.getEventArgs(e,o,l)))}onMagnetDblClick(e,t,o,l){this.notify("node:magnet:dblclick",Object.assign({magnet:t},this.getEventArgs(e,o,l)))}onMagnetContextMenu(e,t,o,l){this.notify("node:magnet:contextmenu",Object.assign({magnet:t},this.getEventArgs(e,o,l)))}onMagnetMouseDown(e,t,o,l){this.startMagnetDragging(e,o,l)}onCustomEvent(e,t,o,l){this.notify("node:customevent",Object.assign({name:t},this.getEventArgs(e,o,l))),super.onCustomEvent(e,t,o,l)}prepareEmbedding(e){const o=this.getEventData(e).cell||this.cell,l=this.graph.findViewByCell(o),d=this.graph.snapToGrid(e.clientX,e.clientY);this.notify("node:embed",{e,node:o,view:l,cell:o,x:d.x,y:d.y,currentParent:o.getParent()})}processEmbedding(e,t){const o=t.cell||this.cell,l=t.graph||this.graph,d=l.options.embedding,f=d.findParent;let v=typeof f=="function"?ir(f,l,{view:this,node:this.cell}).filter(P=>Gi.isCell(P)&&this.cell.id!==P.id&&!P.isDescendantOf(this.cell)):l.model.getNodesUnderNode(o,{by:f});if(d.frontOnly&&v.length>0){const P=ln(v,"zIndex"),V=Ur(Object.keys(P).map(q=>parseInt(q,10)));V&&(v=P[V])}v=v.filter(P=>P.visible);let x=null;const w=t.candidateEmbedView,_=d.validate;for(let P=v.length-1;P>=0;P-=1){const V=v[P];if(w&&w.cell.id===V.id){x=w;break}else{const q=V.findView(l);if(ir(_,l,{child:this.cell,parent:q.cell,childView:this,parentView:q})){x=q;break}}}this.clearEmbedding(t),x&&x.highlight(null,{type:"embedding"}),t.candidateEmbedView=x;const A=l.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e,cell:o,node:o,view:l.findViewByCell(o),x:A.x,y:A.y,currentParent:o.getParent(),candidateParent:x?x.cell:null})}clearEmbedding(e){const t=e.candidateEmbedView;t&&(t.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null)}finalizeEmbedding(e,t){this.graph.startBatch("embedding");const o=t.cell||this.cell,l=t.graph||this.graph,d=l.findViewByCell(o),f=o.getParent(),v=t.candidateEmbedView;if(v?(v.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null,(f==null||f.id!==v.cell.id)&&v.cell.insertChild(o,void 0,{ui:!0})):f&&f.unembed(o,{ui:!0}),l.model.getConnectedEdges(o,{deep:!0}).forEach(x=>{x.updateParent({ui:!0})}),d&&v){const x=l.snapToGrid(e.clientX,e.clientY);d.notify("node:embedded",{e,cell:o,x:x.x,y:x.y,node:o,view:l.findViewByCell(o),previousParent:f,currentParent:o.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let e=this.cell,t=this;for(;t&&!e.isEdge();){if(!e.hasParent()||t.can("stopDelegateOnDragging"))return t;e=e.getParent(),t=this.graph.renderer.findViewByCell(e)}return null}startMagnetDragging(e,t,o){if(!this.can("magnetConnectable"))return;e.stopPropagation();const l=e.currentTarget,d=this.graph;this.setEventData(e,{targetMagnet:l}),d.hook.validateMagnet(this,l,e)?(d.options.magnetThreshold<=0&&this.startConnectting(e,l,t,o),this.setEventData(e,{action:"magnet"}),this.stopPropagation(e)):((r0(l,"x6-port-body")||G()(l).closest(".x6-port-body").length>0)&&this.stopPropagation(e),this.onMouseDown(e,t,o)),d.view.delegateDragEvents(e,this)}startConnectting(e,t,o,l){this.graph.model.startBatch("add-edge");const d=this.createEdgeFromMagnet(t,o,l);d.notifyMouseDown(e,o,l),d.setEventData(e,d.prepareArrowheadDragging("target",{x:o,y:l,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(e,{edgeView:d})}createEdgeFromMagnet(e,t,o){const l=this.graph,d=l.model,f=l.hook.getDefaultEdge(this,e);return f.setSource(Object.assign(Object.assign({},f.getSource()),this.getEdgeTerminal(e,t,o,f,"source"))),f.setTarget(Object.assign(Object.assign({},f.getTarget()),{x:t,y:o})),f.addTo(d,{async:!1,ui:!0}),f.findView(l)}dragMagnet(e,t,o){const l=this.getEventData(e),d=l.edgeView;if(d)d.onMouseMove(e,t,o),this.autoScrollGraph(e.clientX,e.clientY);else{const f=this.graph,v=f.options.magnetThreshold,x=this.getEventTarget(e),w=l.targetMagnet;if(v==="onleave"){if(w===x||w.contains(x))return}else if(f.view.getMouseMovedCount(e)<=v)return;this.startConnectting(e,w,t,o)}}stopMagnetDragging(e,t,o){const d=this.eventData(e).edgeView;d&&(d.onMouseUp(e,t,o),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(e,t,o){this.notify("node:unhandled:mousedown",{e,x:t,y:o,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(e,t,o,l,d){let f=[d];const v=this.graph.selection.widget;if(v&&v.options.movable){const x=this.graph.getSelectedCells();x.includes(d)&&(f=x.filter(w=>w.isNode()))}f.forEach(x=>{this.notify(e,{e:t,x:o,y:l,cell:x,node:x,view:x.findView(this.graph)})})}startNodeDragging(e,t,o){const l=this.getDelegatedView();if(l==null||!l.can("nodeMovable"))return this.notifyUnhandledMouseDown(e,t,o);this.setEventData(e,{targetView:l,action:"move"});const d=$e.create(l.cell.getPosition());l.setEventData(e,{moving:!1,offset:d.diff(t,o),restrict:this.graph.hook.getRestrictArea(l)})}dragNode(e,t,o){const l=this.cell,d=this.graph,f=d.getGridSize(),v=this.getEventData(e),x=v.offset,w=v.restrict;v.moving||(v.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",e,t,o,this.cell)),this.autoScrollGraph(e.clientX,e.clientY);const _=va.snapToGrid(t+x.x,f),A=va.snapToGrid(o+x.y,f);l.setPosition(_,A,{restrict:w,deep:!0,ui:!0}),d.options.embedding.enabled&&(v.embedding||(this.prepareEmbedding(e),v.embedding=!0),this.processEmbedding(e,v))}stopNodeDragging(e,t,o){const l=this.getEventData(e);l.embedding&&this.finalizeEmbedding(e,l),l.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",e,t,o,this.cell)),l.moving=!1,l.embedding=!1}autoScrollGraph(e,t){const o=this.graph.scroller.widget;o&&o.autoScroll(e,t)}}(function(c){c.toStringTag=`X6.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&typeof l.isNodeView=="function"&&typeof l.isEdgeView=="function"&&typeof l.confirmUpdate=="function"&&typeof l.update=="function"&&typeof l.findPortElem=="function"&&typeof l.resize=="function"&&typeof l.rotate=="function"&&typeof l.translate=="function"}c.isNodeView=e})(Fl||(Fl={})),Fl.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),Fl.registry.register("node",Fl,!0);const fw=V2("text");class j2 extends Jd("text",{view:fw,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0}){}(function(c){class e extends Fl{confirmUpdate(o,l={}){let d=super.confirmUpdate(o,l);return this.hasAction(d,"scale")&&(this.resize(),d=this.removeAction(d,"scale")),d}}c.View=e,e.config({actions:{attrs:["scale"]}}),Fl.registry.register(fw,e)})(j2||(j2={}));class pw extends Gl{constructor(e,t={}){super(),this.length=0,this.comparator=t.comparator||"zIndex",this.clean(),e&&this.reset(e,{silent:!0})}toJSON(){return this.cells.map(e=>e.toJSON())}add(e,t,o){let l,d;typeof t=="number"?(l=t,d=Object.assign({merge:!1},o)):(l=this.length,d=Object.assign({merge:!1},t)),l>this.length&&(l=this.length),l<0&&(l+=this.length+1);const f=Array.isArray(e)?e:[e],v=this.comparator&&typeof t!="number"&&d.sort!==!1,x=this.comparator||null;let w=!1;const _=[],A=[];return f.forEach(P=>{const V=this.get(P);V?d.merge&&!P.isSameStore(V)&&(V.setProp(P.getProp(),o),A.push(V),v&&!w&&(x==null||typeof x=="function"?w=V.hasChanged():typeof x=="string"?w=V.hasChanged(x):w=x.some(q=>V.hasChanged(q)))):(_.push(P),this.reference(P))}),_.length&&(v&&(w=!0),this.cells.splice(l,0,..._),this.length=this.cells.length),w&&this.sort({silent:!0}),d.silent||(_.forEach((P,V)=>{const q={cell:P,index:l+V,options:d};this.trigger("added",q),d.dryrun||P.notify("added",Object.assign({},q))}),w&&this.trigger("sorted"),(_.length||A.length)&&this.trigger("updated",{added:_,merged:A,removed:[],options:d})),this}remove(e,t={}){const o=Array.isArray(e)?e:[e],l=this.removeCells(o,t);return!t.silent&&l.length>0&&this.trigger("updated",{options:t,removed:l,added:[],merged:[]}),Array.isArray(e)?l:l[0]}removeCells(e,t){const o=[];for(let l=0;l<e.length;l+=1){const d=this.get(e[l]);if(d==null)continue;const f=this.cells.indexOf(d);this.cells.splice(f,1),this.length-=1,delete this.map[d.id],o.push(d),this.unreference(d),t.dryrun||d.remove(),t.silent||(this.trigger("removed",{cell:d,index:f,options:t}),t.dryrun||d.notify("removed",{cell:d,index:f,options:t}))}return o}reset(e,t={}){const o=this.cells.slice();if(o.forEach(l=>this.unreference(l)),this.clean(),this.add(e,Object.assign({silent:!0},t)),!t.silent){const l=this.cells.slice();this.trigger("reseted",{options:t,previous:o,current:l});const d=[],f=[];l.forEach(v=>{o.some(w=>w.id===v.id)||d.push(v)}),o.forEach(v=>{l.some(w=>w.id===v.id)||f.push(v)}),this.trigger("updated",{options:t,added:d,removed:f,merged:[]})}return this}push(e,t){return this.add(e,this.length,t)}pop(e){const t=this.at(this.length-1);return this.remove(t,e)}unshift(e,t){return this.add(e,0,t)}shift(e){const t=this.at(0);return this.remove(t,e)}get(e){if(e==null)return null;const t=typeof e=="string"||typeof e=="number"?e:e.id;return this.map[t]||null}has(e){return this.get(e)!=null}at(e){return e<0&&(e+=this.length),this.cells[e]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(e){return this.cells.indexOf(e)}toArray(){return this.cells.slice()}sort(e={}){return this.comparator!=null&&(this.cells=un(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}clone(){const e=this.constructor;return new e(this.cells.slice(),{comparator:this.comparator})}reference(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}unreference(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}notifyCellEvent(e,t){const o=t.cell;this.trigger(`cell:${e}`,t),o&&(o.isNode()?this.trigger(`node:${e}`,Object.assign(Object.assign({},t),{node:o})):o.isEdge()&&this.trigger(`edge:${e}`,Object.assign(Object.assign({},t),{edge:o})))}clean(){this.length=0,this.cells=[],this.map={}}}class wl extends Gl{constructor(e=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new pw(e),this.setup()}get[Symbol.toStringTag](){return wl.toStringTag}notify(e,t){this.trigger(e,t);const o=this.graph;return o&&(e==="sorted"||e==="reseted"||e==="updated"?o.trigger(`model:${e}`,t):o.trigger(e,t)),this}setup(){const e=this.collection;e.on("sorted",()=>this.notify("sorted",null)),e.on("updated",t=>this.notify("updated",t)),e.on("cell:change:zIndex",()=>this.sortOnChangeZ()),e.on("added",({cell:t})=>{this.onCellAdded(t)}),e.on("removed",t=>{const o=t.cell;this.onCellRemoved(o,t.options),this.notify("cell:removed",t),o.isNode()?this.notify("node:removed",Object.assign(Object.assign({},t),{node:o})):o.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},t),{edge:o}))}),e.on("reseted",t=>{this.onReset(t.current),this.notify("reseted",t)}),e.on("edge:change:source",({edge:t})=>this.onEdgeTerminalChanged(t,"source")),e.on("edge:change:target",({edge:t})=>{this.onEdgeTerminalChanged(t,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(e){const t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}onCellRemoved(e,t){const o=e.id;if(e.isEdge()){delete this.edges[o];const l=e.getSource(),d=e.getTarget();if(l&&l.cell){const f=this.outgoings[l.cell],v=f?f.indexOf(o):-1;v>=0&&(f.splice(v,1),f.length===0&&delete this.outgoings[l.cell])}if(d&&d.cell){const f=this.incomings[d.cell],v=f?f.indexOf(o):-1;v>=0&&(f.splice(v,1),f.length===0&&delete this.incomings[d.cell])}}else delete this.nodes[o];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}onReset(e){this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach(t=>this.onCellAdded(t))}onEdgeTerminalChanged(e,t){const o=t==="source"?this.outgoings:this.incomings,l=e.previous(t);if(l&&l.cell){const f=Gi.isCell(l.cell)?l.cell.id:l.cell,v=o[f],x=v?v.indexOf(e.id):-1;x>=0&&(v.splice(x,1),v.length===0&&delete o[f])}const d=e.getTerminal(t);if(d&&d.cell){const f=Gi.isCell(d.cell)?d.cell.id:d.cell,v=o[f]||[];v.indexOf(e.id)===-1&&v.push(e.id),o[f]=v}}prepareCell(e,t){return!e.model&&(!t||!t.dryrun)&&(e.model=this),e.zIndex==null&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}resetCells(e,t={}){return e.map(o=>this.prepareCell(o,Object.assign(Object.assign({},t),{dryrun:!0}))),this.collection.reset(e,t),e.map(o=>this.prepareCell(o,{options:t})),this}clear(e={}){const t=this.getCells();if(t.length===0)return this;const o=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",()=>{const l=t.sort((d,f)=>{const v=d.isEdge()?1:2,x=f.isEdge()?1:2;return v-x});for(;l.length>0;){const d=l.shift();d&&d.remove(o)}},o),this}addNode(e,t={}){const o=bs.isNode(e)?e:this.createNode(e);return this.addCell(o,t),o}createNode(e){return bs.create(e)}addEdge(e,t={}){const o=as.isEdge(e)?e:this.createEdge(e);return this.addCell(o,t),o}createEdge(e){return as.create(e)}addCell(e,t={}){return Array.isArray(e)?this.addCells(e,t):(!this.collection.has(e)&&!this.addings.has(e)&&(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,t),t),e.eachChild(o=>this.addCell(o,t)),this.addings.delete(e)),this)}addCells(e,t={}){const o=e.length;if(o===0)return this;const l=Object.assign(Object.assign({},t),{position:o-1,maxPosition:o-1});return this.startBatch("add",Object.assign(Object.assign({},l),{cells:e})),e.forEach(d=>{this.addCell(d,l),l.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},l),{cells:e})),this}removeCell(e,t={}){const o=typeof e=="string"?this.getCell(e):e;return o&&this.has(o)?this.collection.remove(o,t):null}updateCellId(e,t){this.startBatch("update",{id:t}),e.prop("id",t);const o=e.clone({keepId:!0});return this.addCell(o),this.getConnectedEdges(e).forEach(d=>{const f=d.getSourceCell(),v=d.getTargetCell();f===e&&d.setSource(Object.assign(Object.assign({},d.getSource()),{cell:t})),v===e&&d.setTarget(Object.assign(Object.assign({},d.getTarget()),{cell:t}))}),this.removeCell(e),this.stopBatch("update",{id:t}),o}removeCells(e,t={}){return e.length?this.batchUpdate("remove",()=>e.map(o=>this.removeCell(o,t))):[]}removeConnectedEdges(e,t={}){const o=this.getConnectedEdges(e);return o.forEach(l=>{l.remove(t)}),o}disconnectConnectedEdges(e,t={}){const o=typeof e=="string"?e:e.id;this.getConnectedEdges(e).forEach(l=>{const d=l.getSourceCell(),f=l.getTargetCell();d&&d.id===o&&l.setSource({x:0,y:0},t),f&&f.id===o&&l.setTarget({x:0,y:0},t)})}has(e){return this.collection.has(e)}total(){return this.collection.length}indexOf(e){return this.collection.indexOf(e)}getCell(e){return this.collection.get(e)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const e=this.collection.first();return e&&e.getZIndex()||0}getMaxZIndex(){const e=this.collection.last();return e&&e.getZIndex()||0}getCellsFromCache(e){return e?Object.keys(e).map(t=>this.getCell(t)).filter(t=>t!=null):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(e){const t=typeof e=="string"?e:e.id,o=this.outgoings[t];return o?o.map(l=>this.getCell(l)).filter(l=>l&&l.isEdge()):null}getIncomingEdges(e){const t=typeof e=="string"?e:e.id,o=this.incomings[t];return o?o.map(l=>this.getCell(l)).filter(l=>l&&l.isEdge()):null}getConnectedEdges(e,t={}){const o=[],l=typeof e=="string"?this.getCell(e):e;if(l==null)return o;const d={},f=t.indirect;let v=t.incoming,x=t.outgoing;v==null&&x==null&&(v=x=!0);const w=(_,A)=>{const P=A?this.getOutgoingEdges(_):this.getIncomingEdges(_);if(P!=null&&P.forEach(V=>{d[V.id]||(o.push(V),d[V.id]=!0,f&&(v&&w(V,!1),x&&w(V,!0)))}),f&&_.isEdge()){const V=A?_.getTargetCell():_.getSourceCell();V&&V.isEdge()&&(d[V.id]||(o.push(V),w(V,A)))}};if(x&&w(l,!0),v&&w(l,!1),t.deep){const _=l.getDescendants({deep:!0}),A={};_.forEach(V=>{V.isNode()&&(A[V.id]=!0)});const P=(V,q)=>{const te=q?this.getOutgoingEdges(V.id):this.getIncomingEdges(V.id);te!=null&&te.forEach(ge=>{if(!d[ge.id]){const _e=ge.getSourceCell(),ke=ge.getTargetCell();if(!t.enclosed&&_e&&A[_e.id]&&ke&&A[ke.id])return;o.push(ge),d[ge.id]=!0}})};_.forEach(V=>{V.isEdge()||(x&&P(V,!0),v&&P(V,!1))})}return o}isBoundary(e,t){const o=typeof e=="string"?this.getCell(e):e,l=t?this.getIncomingEdges(o):this.getOutgoingEdges(o);return l==null||l.length===0}getBoundaryNodes(e){const t=[];return Object.keys(this.nodes).forEach(o=>{if(this.isBoundary(o,e)){const l=this.getCell(o);l&&t.push(l)}}),t}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(e){return this.isBoundary(e,!0)}isLeaf(e){return this.isBoundary(e,!1)}getNeighbors(e,t={}){let o=t.incoming,l=t.outgoing;o==null&&l==null&&(o=l=!0);const f=this.getConnectedEdges(e,t).reduce((v,x)=>{const w=x.hasLoop(t),_=x.getSourceCell(),A=x.getTargetCell();return o&&_&&_.isNode()&&!v[_.id]&&(w||_!==e&&(!t.deep||!_.isDescendantOf(e)))&&(v[_.id]=_),l&&A&&A.isNode()&&!v[A.id]&&(w||A!==e&&(!t.deep||!A.isDescendantOf(e)))&&(v[A.id]=A),v},{});if(e.isEdge()){if(o){const v=e.getSourceCell();v&&v.isNode()&&!f[v.id]&&(f[v.id]=v)}if(l){const v=e.getTargetCell();v&&v.isNode()&&!f[v.id]&&(f[v.id]=v)}}return Object.keys(f).map(v=>f[v])}isNeighbor(e,t,o={}){let l=o.incoming,d=o.outgoing;return l==null&&d==null&&(l=d=!0),this.getConnectedEdges(e,o).some(f=>{const v=f.getSourceCell(),x=f.getTargetCell();return!!(l&&v&&v.id===t.id||d&&x&&x.id===t.id)})}getSuccessors(e,t={}){const o=[];return this.search(e,(l,d)=>{l!==e&&this.matchDistance(d,t.distance)&&o.push(l)},Object.assign(Object.assign({},t),{outgoing:!0})),o}isSuccessor(e,t,o={}){let l=!1;return this.search(e,(d,f)=>{if(d===t&&d!==e&&this.matchDistance(f,o.distance))return l=!0,!1},Object.assign(Object.assign({},o),{outgoing:!0})),l}getPredecessors(e,t={}){const o=[];return this.search(e,(l,d)=>{l!==e&&this.matchDistance(d,t.distance)&&o.push(l)},Object.assign(Object.assign({},t),{incoming:!0})),o}isPredecessor(e,t,o={}){let l=!1;return this.search(e,(d,f)=>{if(d===t&&d!==e&&this.matchDistance(f,o.distance))return l=!0,!1},Object.assign(Object.assign({},o),{incoming:!0})),l}matchDistance(e,t){return t==null?!0:typeof t=="function"?t(e):Array.isArray(t)&&t.includes(e)?!0:e===t}getCommonAncestor(...e){const t=[];return e.forEach(o=>{o&&(Array.isArray(o)?t.push(...o):t.push(o))}),Gi.getCommonAncestor(...t)}getSubGraph(e,t={}){const o=[],l={},d=[],f=[],v=x=>{l[x.id]||(o.push(x),l[x.id]=x,x.isEdge()&&f.push(x),x.isNode()&&d.push(x))};return e.forEach(x=>{v(x),t.deep&&x.getDescendants({deep:!0}).forEach(_=>v(_))}),f.forEach(x=>{const w=x.getSourceCell(),_=x.getTargetCell();w&&!l[w.id]&&(o.push(w),l[w.id]=w,w.isNode()&&d.push(w)),_&&!l[_.id]&&(o.push(_),l[_.id]=_,_.isNode()&&d.push(_))}),d.forEach(x=>{this.getConnectedEdges(x,t).forEach(_=>{const A=_.getSourceCell(),P=_.getTargetCell();!l[_.id]&&A&&l[A.id]&&P&&l[P.id]&&(o.push(_),l[_.id]=_)})}),o}cloneSubGraph(e,t={}){const o=this.getSubGraph(e,t);return this.cloneCells(o)}cloneCells(e){return Gi.cloneCells(e)}getNodesFromPoint(e,t){const o=typeof e=="number"?{x:e,y:t||0}:e;return this.getNodes().filter(l=>l.getBBox().containsPoint(o))}getNodesInArea(e,t,o,l,d){const f=typeof e=="number"?new zn(e,t,o,l):zn.create(e),v=typeof e=="number"?d:t,x=v&&v.strict;return this.getNodes().filter(w=>{const _=w.getBBox();return x?f.containsRect(_):f.isIntersectWithRect(_)})}getEdgesInArea(e,t,o,l,d){const f=typeof e=="number"?new zn(e,t,o,l):zn.create(e),v=typeof e=="number"?d:t,x=v&&v.strict;return this.getEdges().filter(w=>{const _=w.getBBox();return _.width===0?_.inflate(1,0):_.height===0&&_.inflate(0,1),x?f.containsRect(_):f.isIntersectWithRect(_)})}getNodesUnderNode(e,t={}){const o=e.getBBox();return(t.by==null||t.by==="bbox"?this.getNodesInArea(o):this.getNodesFromPoint(o[t.by])).filter(d=>e.id!==d.id&&!d.isDescendantOf(e))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(e,t={}){return Gi.getCellsBBox(e,t)}search(e,t,o={}){o.breadthFirst?this.breadthFirstSearch(e,t,o):this.depthFirstSearch(e,t,o)}breadthFirstSearch(e,t,o={}){const l=[],d={},f={};for(l.push(e),f[e.id]=0;l.length>0;){const v=l.shift();if(v==null||d[v.id]||(d[v.id]=!0,ir(t,this,v,f[v.id])===!1))continue;this.getNeighbors(v,o).forEach(w=>{f[w.id]=f[v.id]+1,l.push(w)})}}depthFirstSearch(e,t,o={}){const l=[],d={},f={};for(l.push(e),f[e.id]=0;l.length>0;){const v=l.pop();if(v==null||d[v.id]||(d[v.id]=!0,ir(t,this,v,f[v.id])===!1))continue;const x=this.getNeighbors(v,o),w=l.length;x.forEach(_=>{f[_.id]=f[v.id]+1,l.splice(w,0,_)})}}getShortestPath(e,t,o={}){const l={};this.getEdges().forEach(w=>{const _=w.getSourceCellId(),A=w.getTargetCellId();_&&A&&(l[_]||(l[_]=[]),l[A]||(l[A]=[]),l[_].push(A),o.directed||l[A].push(_))});const d=typeof e=="string"?e:e.id,f=og.run(l,d,o.weight),v=[];let x=typeof t=="string"?t:t.id;for(f[x]&&v.push(x);x=f[x];)v.unshift(x);return v}translate(e,t,o){return this.getCells().filter(l=>!l.hasParent()).forEach(l=>l.translate(e,t,o)),this}resize(e,t,o){return this.resizeCells(e,t,this.getCells(),o)}resizeCells(e,t,o,l={}){const d=this.getCellsBBox(o);if(d){const f=Math.max(e/d.width,0),v=Math.max(t/d.height,0),x=d.getOrigin();o.forEach(w=>w.scale(f,v,x,l))}return this}toJSON(e={}){return wl.toJSON(this.getCells(),e)}parseJSON(e){return wl.fromJSON(e)}fromJSON(e,t={}){const o=this.parseJSON(e);return this.resetCells(o,t),this}startBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}stopBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}batchUpdate(e,t,o={}){this.startBatch(e,o);const l=t();return this.stopBatch(e,o),l}hasActiveBatch(e=Object.keys(this.batches)){return(Array.isArray(e)?e:[e]).some(o=>this.batches[o]>0)}}(function(c){c.toStringTag=`X6.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&typeof l.addNode=="function"&&typeof l.addEdge=="function"&&l.collection!=null}c.isModel=e})(wl||(wl={})),function(c){function e(o,l={}){return{cells:o.map(d=>d.toJSON(l))}}c.toJSON=e;function t(o){const l=[];return Array.isArray(o)?l.push(...o):(o.cells&&l.push(...o.cells),o.nodes&&o.nodes.forEach(d=>{d.shape==null&&(d.shape="rect"),l.push(d)}),o.edges&&o.edges.forEach(d=>{d.shape==null&&(d.shape="edge"),l.push(d)})),l.map(d=>{const f=d.shape;if(f){if(bs.registry.exist(f))return bs.create(d);if(as.registry.exist(f))return as.create(d)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}c.fromJSON=t}(wl||(wl={}));const Qd=".text-block-content",H2=V2("text-block");class T0 extends bs{get content(){return this.getContent()}set content(e){this.setContent(e)}getContent(){return this.store.get("content","")}setContent(e,t={}){this.store.set("content",e,t)}setup(){super.setup(),this.store.on("change:*",e=>{const t=e.key;t==="content"?this.updateContent(this.getContent()):t==="size"&&this.updateSize(this.getSize())}),this.updateSize(this.getSize()),this.updateContent(this.getContent())}updateSize(e){Le.SUPPORT_FOREIGNOBJECT&&this.setAttrs({foreignObject:Object.assign({},e),[Qd]:{style:Object.assign({},e)}})}updateContent(e){Le.SUPPORT_FOREIGNOBJECT?this.setAttrs({[Qd]:{html:e?NE(e):""}}):this.setAttrs({[Qd]:{text:e}})}}(function(c){c.config({type:H2,view:H2,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Le.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">',`<div class="${Qd.substr(1)}" />`,"</body>","</foreignObject>"].join(""):`<text class="${Qd.substr(1)}"/>`,"</g>"].join(""),attrs:{".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}},[Qd]:{refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}}}}),bs.registry.register(H2,c)})(T0||(T0={})),function(c){const e="content";class t extends Fl{confirmUpdate(l,d={}){let f=super.confirmUpdate(l,d);return this.hasAction(f,e)&&(this.updateContent(),f=this.removeAction(f,e)),f}update(l){if(Le.SUPPORT_FOREIGNOBJECT)super.update(l);else{const d=this.cell,f=Object.assign({},l||d.getAttrs());delete f[Qd],super.update(f),(!l||Mo(l,Qd))&&this.updateContent(l)}}updateContent(l){if(Le.SUPPORT_FOREIGNOBJECT)super.update(l);else{const d=this.cell,f=(l||d.getAttrs())[Qd],v=wS(d.getContent(),d.getSize(),f,{svgDocument:this.graph.view.svg}),x={[Qd]:Fo({},f,{text:v})};super.update(x)}}}c.View=t,function(o){o.config({bootstrap:["render",e],actions:Le.SUPPORT_FOREIGNOBJECT?{}:{size:e,content:e}}),Fl.registry.register(H2,o)}(t=c.View||(c.View={}))}(T0||(T0={}));const Gy=sl.define({shape:"empty"});function x3(c,e="body"){return[{tagName:c,selector:e},{tagName:"text",selector:"label"}]}function np(c,e,t={}){const o={constructorName:c,markup:x3(c,t.selector),attrs:{[c]:Object.assign({},sl.bodyAttr)}};return(t.parent||sl).define(Fo(o,e,{shape:c}))}const HP=np("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),C3=bs.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:Object.assign(Object.assign({},sl.bodyAttr),{refWidth:"100%",refHeight:"100%"}),header:Object.assign(Object.assign({},sl.bodyAttr),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:Object.assign(Object.assign({},sl.labelAttr),{refX:"50%",refY:15,fontSize:16}),bodyText:Object.assign(Object.assign({},sl.labelAttr),{refY2:15})}}),sN=np("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),gw=10,aN=sl.define({shape:"cylinder",overwrite:!0,markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:Object.assign(Object.assign({},sl.bodyAttr),{lateral:gw}),top:Object.assign(Object.assign({},sl.bodyAttr),{refCx:"50%",refRx:"50%",cy:gw,ry:gw})},attrHooks:{lateral:{set(c,{refBBox:e}){const t=Hd(c);t&&(c=parseFloat(c)/100);const o=e.x,l=e.y,d=e.width,f=e.height,v=d/2,x=t?f*c:c,w=.551784,_=w*v,A=w*x,P=o,V=o+d/2,q=o+d,te=l+x,ge=te-x,_e=l+f-x,ke=l+f;return{d:["M",P,te,"L",P,_e,"C",o,_e+A,V-_,ke,V,ke,"C",V+_,ke,q,_e+A,q,_e,"L",q,te,"C",q,te-A,V+_,ge,V,ge,"C",V-_,ge,P,te-A,P,te,"Z"].join(" ")}}}},knob:{enabled:!0,position({node:c}){return{x:0,y:c.attr("body/lateral")}},onMouseMove({node:c,data:e,deltaY:t}){if(t!==0){const o=c.getBBox(),l=c.attr("body/lateral");e.round==null&&(e.round=l);const d=0,f=o.height/2,v=ks(e.round+t,d,f);v!==l&&c.attr({body:{lateral:v},top:{cy:v,ry:v}})}}}}),$P=np("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});var $2=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class Gv extends sl{get points(){return this.getPoints()}set points(e){this.setPoints(e)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(e,t){return e==null?this.removePoints():this.setAttrByPath("body/refPoints",Gv.pointsToString(e),t),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}(function(c){function e(t){return typeof t=="string"?t:t.map(o=>Array.isArray(o)?o.join(","):$e.isPointLike(o)?`${o.x}, ${o.y}`:"").join(" ")}c.pointsToString=e,c.config({propHooks(t){const{points:o}=t,l=$2(t,["points"]);if(o){const d=e(o);d&&zf(l,"attrs/body/refPoints",d)}return l}})})(Gv||(Gv={}));const lN=np("polygon",{},{parent:Gv}),WP=np("polyline",{},{parent:Gv});var XP=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};const ZP=sl.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(c){const{path:e}=c,t=XP(c,["path"]);return e&&zf(t,"attrs/body/refD",e),t}});var vw=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};const YP=sl.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},Le.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:da.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},sl.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(c){const{text:e}=c,t=vw(c,["text"]);return e&&zf(t,"attrs/label/text",e),t},attrHooks:{text:{set(c,{cell:e,view:t,refBBox:o,elem:l,attrs:d}){if(l instanceof HTMLElement)l.textContent=c;else{const f=d.style||{},v={text:c,width:-5,height:"100%"},x=Object.assign({textVerticalAnchor:"middle"},f),w=ad.presets.textWrap;return ir(w.set,this,v,{cell:e,view:t,elem:l,refBBox:o,attrs:x}),{fill:f.color||null}}},position(c,{refBBox:e,elem:t}){if(t instanceof SVGElement)return e.getCenter()}}}}),KP=np("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:ug()},{selector:"image"}),CA=np("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:ug()}),Fy=np("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:ug()}),By=np("image-inscribed",{propHooks:ug(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}}),mw=as.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),dg=as.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),qP=as.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}});class eh extends sl{get html(){return this.getHTML()}set html(e){this.setHTML(e)}getHTML(){return this.store.get("html")}setHTML(e,t={}){return e==null?this.removeHTML(t):this.store.set("html",e,t),this}removeHTML(e={}){return this.store.remove("html",e)}}(function(c){class e extends Fl{init(){super.init(),this.cell.on("change:*",()=>{this.graph.hook.shouldUpdateHTMLComponent(this.cell)&&this.renderHTMLComponent()})}confirmUpdate(o){const l=super.confirmUpdate(o);return this.handleAction(l,e.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const o=this.selectors.foContent;if(o){const l=this.$(o).empty(),d=this.graph.hook.getHTMLComponent(this.cell);d&&(typeof d=="string"?l.html(d):l.append(d))}}}c.View=e,function(t){t.action="html",t.config({bootstrap:[t.action],actions:{html:t.action}}),Fl.registry.register("html-view",t)}(e=c.View||(c.View={}))})(eh||(eh={})),function(c){c.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Qi.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),bs.registry.register("html",c)}(eh||(eh={})),function(c){c.componentRegistry=Vs.create({type:"html componnet"})}(eh||(eh={}));var wA=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class hg extends Xh{constructor(e){super(),this.delay=10,this.throttle=2,this.threshold=5,this.changeCount=0,this.timestamp=0,this.options=Object.assign(Object.assign({},hg.defaultOptions),e),this.graph.model.on("cell:change:*",this.onModelChanged,this)}get graph(){return this.options.graph}onModelChanged(){if(this.disabled)return;const t=(new Date().getTime()-this.timestamp)/1e3;t>this.delay||this.changeCount>=this.threshold&&t>this.throttle?(this.save(),this.reset()):this.changeCount+=1}save(){this.trigger("save")}reset(){this.changeCount=0,this.timestamp=new Date().getTime()}dispose(){this.graph.model.off("cell:change:*",this.onModelChanged,this)}}wA([Xh.dispose()],hg.prototype,"dispose",null),function(c){c.defaultOptions={delay:10,throttle:2,threshold:5}}(hg||(hg={}));class vo extends Kd{constructor(e){super(),this.graph=e,this.init()}get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}init(){}}var EA=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class wu extends Ki{constructor(e){super(),this.graph=e;const{selectors:t,fragment:o}=Qi.parseJSONMarkup(wu.markup);this.background=t.background,this.grid=t.grid,this.svg=t.svg,this.defs=t.defs,this.viewport=t.viewport,this.primer=t.primer,this.stage=t.stage,this.decorator=t.decorator,this.overlay=t.overlay,this.container=this.options.container,this.restore=wu.snapshoot(this.container),this.$(this.container).addClass(this.prefixClassName("graph")).append(o),this.delegateEvents()}get model(){return this.graph.model}get options(){return this.graph.options}delegateEvents(){const e=this.constructor;return super.delegateEvents(e.events),this}guard(e,t){return e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t)?!0:e.data&&e.data.guarded!==void 0?e.data.guarded:!(t&&t.cell&&Gi.isCell(t.cell)||this.svg===e.target||this.container===e.target||G().contains(this.svg,e.target))}findView(e){return this.graph.renderer.findViewByElem(e)}onDblClick(e){this.options.preventDefaultDblClick&&e.preventDefault();const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const l=this.graph.snapToGrid(t.clientX,t.clientY);o?o.onDblClick(t,l.x,l.y):this.graph.trigger("blank:dblclick",{e:t,x:l.x,y:l.y})}onClick(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const l=this.graph.snapToGrid(t.clientX,t.clientY);o?o.onClick(t,l.x,l.y):this.graph.trigger("blank:click",{e:t,x:l.x,y:l.y})}}isPreventDefaultContextMenu(e,t){let o=this.options.preventDefaultContextMenu;return typeof o=="function"&&(o=ir(o,this.graph,{view:t})),o}onContextMenu(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.isPreventDefaultContextMenu(t,o)&&e.preventDefault(),this.guard(t,o))return;const l=this.graph.snapToGrid(t.clientX,t.clientY);o?o.onContextMenu(t,l.x,l.y):this.graph.trigger("blank:contextmenu",{e:t,x:l.x,y:l.y})}delegateDragEvents(e,t){e.data==null&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}});const o=this.constructor;this.delegateDocumentEvents(o.documentEvents,e.data),this.undelegateEvents()}getMouseMovedCount(e){return this.getEventData(e).mouseMovedCount||0}onMouseDown(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;this.options.preventDefaultMouseDown&&t.preventDefault();const l=this.graph.snapToGrid(t.clientX,t.clientY);o?o.onMouseDown(t,l.x,l.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(t.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:l.x,y:l.y})),this.delegateDragEvents(t,o)}onMouseMove(e){const t=this.getEventData(e),o=t.startPosition;if(o&&o.x===e.clientX&&o.y===e.clientY||(t.mouseMovedCount==null&&(t.mouseMovedCount=0),t.mouseMovedCount+=1,t.mouseMovedCount<=this.options.moveThreshold))return;const d=this.normalizeEvent(e),f=this.graph.snapToGrid(d.clientX,d.clientY),v=t.currentView;v?v.onMouseMove(d,f.x,f.y):this.graph.trigger("blank:mousemove",{e:d,x:f.x,y:f.y}),this.setEventData(d,t)}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),o=this.graph.snapToGrid(t.clientX,t.clientY),d=this.getEventData(e).currentView;d?d.onMouseUp(t,o.x,o.y):this.graph.trigger("blank:mouseup",{e:t,x:o.x,y:o.y}),e.isPropagationStopped()||this.onClick(G().Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(!this.guard(t,o))if(o)o.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}onMouseOut(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(!this.guard(t,o))if(o)o.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}onMouseEnter(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const l=this.graph.renderer.findViewByElem(t.relatedTarget);if(o){if(l===o)return;o.onMouseEnter(t)}else{if(l)return;this.graph.trigger("graph:mouseenter",{e:t})}}onMouseLeave(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const l=this.graph.renderer.findViewByElem(t.relatedTarget);if(o){if(l===o)return;o.onMouseLeave(t)}else{if(l)return;this.graph.trigger("graph:mouseleave",{e:t})}}onMouseWheel(e){const t=this.normalizeEvent(e),o=this.findView(t.target);if(this.guard(t,o))return;const l=t.originalEvent,d=this.graph.snapToGrid(l.clientX,l.clientY),f=Math.max(-1,Math.min(1,l.wheelDelta||-l.detail));o?o.onMouseWheel(t,d.x,d.y,f):this.graph.trigger("blank:mousewheel",{e:t,delta:f,x:d.x,y:d.y})}onCustomEvent(e){const t=e.currentTarget,o=t.getAttribute("event")||t.getAttribute("data-event");if(o){const l=this.findView(t);if(l){const d=this.normalizeEvent(e);if(this.guard(d,l))return;const f=this.graph.snapToGrid(d.clientX,d.clientY);l.onCustomEvent(d,o,f.x,f.y)}}}handleMagnetEvent(e,t){const o=e.currentTarget,l=o.getAttribute("magnet");if(l&&l.toLowerCase()!=="false"){const d=this.findView(o);if(d){const f=this.normalizeEvent(e);if(this.guard(f,d))return;const v=this.graph.snapToGrid(f.clientX,f.clientY);ir(t,this.graph,d,f,o,v.x,v.y)}}}onMagnetMouseDown(e){this.handleMagnetEvent(e,(t,o,l,d,f)=>{t.onMagnetMouseDown(o,l,d,f)})}onMagnetDblClick(e){this.handleMagnetEvent(e,(t,o,l,d,f)=>{t.onMagnetDblClick(o,l,d,f)})}onMagnetContextMenu(e){const t=this.normalizeEvent(e),o=this.findView(t.target);this.isPreventDefaultContextMenu(t,o)&&t.preventDefault(),this.handleMagnetEvent(t,(l,d,f,v,x)=>{l.onMagnetContextMenu(d,f,v,x)})}onLabelMouseDown(e){const t=e.currentTarget,o=this.findView(t);if(o){const l=this.normalizeEvent(e);if(this.guard(l,o))return;const d=this.graph.snapToGrid(l.clientX,l.clientY);o.onLabelMouseDown(l,d.x,d.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}EA([Ki.dispose()],wu.prototype,"dispose",null),function(c){const e=`${xu.prefixCls}-graph`;c.markup=[{ns:da.xhtml,tagName:"div",selector:"background",className:`${e}-background`},{ns:da.xhtml,tagName:"div",selector:"grid",className:`${e}-grid`},{ns:da.svg,tagName:"svg",selector:"svg",className:`${e}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":da.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${e}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${e}-svg-primer`},{tagName:"g",selector:"stage",className:`${e}-svg-stage`},{tagName:"g",selector:"decorator",className:`${e}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${e}-svg-overlay`}]}]}];function t(o){const l=o.cloneNode();return o.childNodes.forEach(d=>l.appendChild(d)),()=>{for(cy(o);o.attributes.length>0;)o.removeAttribute(o.attributes[0].name);for(let d=0,f=l.attributes.length;d<f;d+=1){const v=l.attributes[d];o.setAttribute(v.name,v.value)}l.childNodes.forEach(d=>o.appendChild(d))}}c.snapshoot=t}(wu||(wu={})),function(c){const e=xu.prefixCls;c.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${e}-cell`]:"onMouseEnter",[`mouseleave  .${e}-cell`]:"onMouseLeave",[`mouseenter  .${e}-cell-tools`]:"onMouseEnter",[`mouseleave  .${e}-cell-tools`]:"onMouseLeave",[`mousedown   .${e}-cell [event]`]:"onCustomEvent",[`touchstart  .${e}-cell [event]`]:"onCustomEvent",[`mousedown   .${e}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${e}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${e}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${e}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${e}-cell image`]:"onImageDragStart",[`mousedown   .${e}-edge .${e}-edge-label`]:"onLabelMouseDown",[`touchstart  .${e}-edge .${e}-edge-label`]:"onLabelMouseDown"},c.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(wu||(wu={}));var ld;(function(c){function e(t,o){return(l,d,f)=>{const v=f.value;f.value=function(...x){if(this.scroller.widget==null){const _=`Shoule enable scroller to use method '${d}'`;if(t!==!1)throw console.error(_),new Error(_);return o!==!1&&console.warn(_),this}return v.call(this,...x)}}}c.checkScroller=e})(ld||(ld={}));const w3=`.x6-graph {
  position: relative;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
@keyframes halo-pie-visibility {
  0% {
    visibility: hidden;
  }
  100% {
    visibility: visible;
  }
}
@keyframes halo-pie-opening {
  0% {
    transform: scale(0.4) rotate(-20deg);
  }
  100% {
    transform: scale(1) rotate(0);
  }
}
.x6-widget-handle {
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  background-size: 20px 20px;
  cursor: pointer;
  user-select: none;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle.hidden {
  display: none;
}
.x6-widget-handle-selected {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}
.x6-widget-handle-remove {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: pointer;
}
.x6-widget-handle-remove:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-rotate {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-rotate:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-resize {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
  cursor: se-resize;
}
.x6-widget-handle-resize:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-clone {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-clone:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-link {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
.x6-widget-handle-link:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-fork {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-fork:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-direction {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-direction:hover {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {
  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;
}
.x6-widget-handle-surround .x6-widget-handle-pos-se {
  right: -25px;
  bottom: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-nw {
  top: -21px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-n {
  top: -22px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-e {
  top: -webkit-calc(40%);
  top: calc(50% - 10px);
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-ne {
  top: -21px;
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-w {
  top: 50%;
  left: -25px;
  margin-top: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-sw {
  bottom: -25px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-s {
  bottom: -24px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {
  width: 15px;
  height: 15px;
  font-size: 15px;
  background-size: 15px 15px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {
  right: -19px;
  bottom: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {
  top: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {
  top: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {
  top: -webkit-calc(42%);
  top: calc(50% - 8px);
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {
  top: -19px;
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {
  left: -19px;
  margin-top: -8px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {
  bottom: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {
  bottom: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {
  width: 10px;
  height: 10px;
  font-size: 10px;
  background-size: 10px 10px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {
  right: -15px;
  bottom: -13px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {
  top: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {
  top: -13px;
  margin-left: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {
  top: -webkit-calc(45%);
  top: calc(50% - 5px);
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {
  top: -13px;
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {
  left: -15px;
  margin-top: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {
  bottom: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {
  bottom: -13px;
  margin-left: -5px;
}
.x6-widget-handle-toolbar {
  position: absolute;
  top: -50px;
  display: table-row;
  padding: 7px 5px;
}
.x6-widget-handle-toolbar::after {
  position: absolute;
  top: 100%;
  left: 10px;
  width: 0;
  height: 0;
  margin-top: 4px;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  content: '';
}
.x6-widget-handle-toolbar .x6-widget-handle {
  position: relative;
  display: table-cell;
  min-width: 20px;
  margin: 0 2px;
  background-position: 3px 3px;
  background-size: 16px 16px;
}
.x6-widget-handle-toolbar .x6-widget-handle::after {
  position: absolute;
  bottom: -11px;
  width: 100%;
  content: '';
}
.x6-widget-handle-pie {
  position: absolute;
  top: -webkit-calc(0%);
  top: calc(50% - 50px);
  right: -50px;
  z-index: 1;
  display: none;
  width: 100px;
  height: 100px;
  margin: -2px -2px 0 0;
  border-radius: 50%;
  cursor: default;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie .x6-widget-handle {
  width: 1px;
  height: auto;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie-slice-svg {
  width: 100%;
  height: 100%;
  overflow: visible !important;
}
.x6-widget-handle-pie-slice-img,
.x6-widget-handle-pie-slice-txt {
  display: none;
  pointer-events: none;
}
.x6-widget-handle-pie[data-pie-toggle-position='e'] {
  top: calc(50% - 50px);
  right: -50px;
  left: auto;
}
.x6-widget-handle-pie[data-pie-toggle-position='w'] {
  top: calc(50% - 50px);
  right: auto;
  left: -52px;
}
.x6-widget-handle-pie[data-pie-toggle-position='n'] {
  top: -50px;
  right: auto;
  bottom: auto;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie[data-pie-toggle-position='s'] {
  top: auto;
  right: auto;
  bottom: -52px;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie-opened {
  display: block;
  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;
  animation-timing-function: step-end, ease;
  animation-delay: 0s, 0.1s;
}
.x6-widget-handle-pie-toggle {
  position: absolute;
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  z-index: 2;
  display: block;
  box-sizing: border-box;
  width: 30px;
  height: 30px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 20px 20px;
  border-radius: 50%;
  cursor: pointer;
  user-select: none;
  pointer-events: visiblePainted;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle-pie-toggle-pos-e {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  bottom: auto;
  left: auto;
}
.x6-widget-handle-pie-toggle-pos-w {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: auto;
  bottom: auto;
  left: -15px;
}
.x6-widget-handle-pie-toggle-pos-n {
  top: -15px;
  right: auto;
  bottom: auto;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-pos-s {
  top: auto;
  right: auto;
  bottom: -15px;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-opened {
  transition: 0.1s background-image;
}
.x6-widget-handle-toolbar {
  position: static;
  display: inline-block;
  margin-top: -50px;
  margin-left: 45px;
  white-space: nowrap;
  vertical-align: top;
  background-color: #f5f5f5;
  border-bottom: 3px solid #333;
  border-radius: 5px;
  box-shadow: 0 1px 2px #222;
}
.x6-widget-handle-toolbar::after {
  top: -12px;
  left: 55px;
  margin-top: 0;
  border-top: 6px solid #333;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
}
.x6-widget-handle-toolbar .x6-widget-handle {
  display: inline-block;
  vertical-align: top;
}
.x6-widget-handle-toolbar .x6-widget-handle:hover::after {
  border-bottom: 4px solid #fc6cb8;
}
.x6-widget-handle-toolbar .x6-widget-handle-rotate {
  position: absolute;
  top: 100%;
  right: 100%;
  margin-top: 3px;
  margin-right: 6px;
}
.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,
.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {
  border-bottom: none;
}
.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {
  margin-left: 4px;
}
.x6-widget-handle-pie {
  box-sizing: content-box;
  background-color: #f5f5f5;
  border: 2px solid #404040;
}
.x6-widget-handle-pie-slice {
  fill: transparent;
  stroke: #e9e9e9;
  stroke-width: 1;
}
.x6-widget-handle-pie-slice:hover {
  fill: #fff;
}
.x6-widget-handle-pie-slice-img {
  display: block;
}
.x6-widget-handle-selected .x6-widget-handle-pie-slice {
  fill: #fff;
}
.x6-widget-handle-pie-toggle {
  background-color: #f6f6f6;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  background-size: 16px 16px;
  border: 2px solid #3b425f;
}
.x6-widget-handle-pie-toggle:hover {
  background-color: #fff;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  border-color: #fd6eb6;
}
.x6-widget-handle-pie-toggle-opened {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-pie-toggle-opened:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 999999;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-halo {
  position: absolute;
  pointer-events: none;
}
.x6-widget-halo-content {
  position: absolute;
  top: 100%;
  padding: 6px;
  font-size: 10px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-halo-handles + .x6-widget-halo-content {
  right: -20px;
  left: -20px;
  margin-top: 30px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 25px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 20px;
}
.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {
  right: 0;
  left: 0;
  margin-top: 10px;
}
.x6-widget-halo-content {
  color: #fff;
  background-color: #6a6b8a;
}
.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {
  position: absolute;
  right: 100%;
  bottom: 100%;
  margin-right: 6px;
  margin-bottom: 3px;
}
.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {
  background-color: #fff;
  border-radius: 50%;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar {
  margin-top: -60px;
  margin-left: -18px;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {
  top: -22px;
  left: -9px;
}
.x6-widget-minimap {
  position: relative;
  display: table-cell;
  box-sizing: border-box;
  overflow: hidden;
  text-align: center;
  vertical-align: middle;
  background-color: #fff;
  user-select: none;
}
.x6-widget-minimap .x6-graph {
  display: inline-block;
  box-shadow: 0 0 4px 0 #eee;
  cursor: pointer;
}
.x6-widget-minimap .x6-graph > svg {
  pointer-events: none;
  shape-rendering: optimizeSpeed;
}
.x6-widget-minimap .x6-graph .x6-node * {
  /* stylelint-disable-next-line */
  vector-effect: initial;
}
.x6-widget-minimap-viewport {
  position: absolute;
  box-sizing: content-box !important;
  margin: -2px 0 0 -2px;
  border: 2px solid #31d0c6;
  cursor: move;
}
.x6-widget-minimap-viewport-zoom {
  position: absolute;
  right: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 12px;
  height: 12px;
  margin: 0 -6px -6px 0;
  background-color: #fff;
  border: 2px solid #31d0c6;
  border-radius: 50%;
  cursor: nwse-resize;
}
.x6-graph-scroller {
  position: relative;
  box-sizing: border-box;
  overflow: scroll;
  outline: none;
}
.x6-graph-scroller-content {
  position: relative;
}
.x6-graph-scroller-background {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-scroller .x6-graph {
  position: absolute;
  display: inline-block;
  margin: 0;
  box-shadow: none;
}
.x6-graph-scroller .x6-graph > svg {
  display: block;
}
.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {
  box-shadow: 0 0 4px 0 #eee;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-graph-pagebreak {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-pagebreak-vertical {
  position: absolute;
  top: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 1px;
  border-left: 1px dashed #bdbdbd;
}
.x6-graph-pagebreak-horizontal {
  position: absolute;
  right: 0;
  left: 0;
  box-sizing: border-box;
  height: 1px;
  border-top: 1px dashed #bdbdbd;
}
.x6-widget-selection {
  position: absolute;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
.x6-widget-snapline {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  pointer-events: none;
}
.x6-widget-snapline-vertical,
.x6-widget-snapline-horizontal {
  stroke: #2ecc71;
  stroke-width: 1px;
}
.x6-widget-stencil {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-widget-stencil::after {
  position: absolute;
  top: 0;
  display: block;
  width: 100%;
  height: 20px;
  padding: 8px 0;
  line-height: 20px;
  text-align: center;
  opacity: 0;
  transition: top 0.1s linear, opacity 0.1s linear;
  content: ' ';
  pointer-events: none;
}
.x6-widget-stencil-content {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  height: auto;
  overflow-x: hidden;
  overflow-y: auto;
}
.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {
  pointer-events: none;
}
.x6-widget-stencil-group {
  padding: 0;
  padding-bottom: 8px;
  overflow: hidden;
  user-select: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  padding-bottom: 0;
}
.x6-widget-stencil-group-title {
  position: relative;
  margin-top: 0;
  margin-bottom: 0;
  padding: 4px;
  cursor: pointer;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  user-select: none;
}
.x6-widget-stencil .unmatched {
  opacity: 0.3;
}
.x6-widget-stencil .x6-node.unmatched {
  display: none;
}
.x6-widget-stencil-group.unmatched {
  display: none;
}
.x6-widget-stencil-search-text {
  position: relative;
  z-index: 1;
  box-sizing: border-box;
  width: 100%;
  height: 30px;
  max-height: 30px;
  line-height: 30px;
  outline: 0;
}
.x6-widget-stencil.not-found::after {
  opacity: 1;
  content: attr(data-not-found-text);
}
.x6-widget-stencil.not-found.searchable::after {
  top: 30px;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 50px;
}
.x6-widget-stencil {
  color: #333;
  background: #f5f5f5;
}
.x6-widget-stencil-content {
  position: absolute;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-content {
  top: 32px;
}
.x6-widget-stencil.searchable > .x6-widget-stencil-content {
  top: 80px;
}
.x6-widget-stencil.not-found::after {
  position: absolute;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 80px;
}
.x6-widget-stencil.not-found.searchable::after {
  top: 60px;
}
.x6-widget-stencil-group {
  height: auto;
  margin-bottom: 1px;
  padding: 0;
  transition: none;
}
.x6-widget-stencil-group .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  max-height: 31px;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  position: relative;
  left: 0;
  box-sizing: border-box;
  width: 100%;
  height: 32px;
  padding: 0 5px 0 8px;
  color: #666;
  font-weight: 700;
  font-size: 12px;
  line-height: 32px;
  cursor: default;
  transition: all 0.3;
}
.x6-widget-stencil-title:hover,
.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {
  color: #444;
}
.x6-widget-stencil-title {
  background: #e9e9e9;
}
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  background: #ededed;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {
  padding-left: 32px;
  cursor: pointer;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  position: absolute;
  top: 6px;
  left: 8px;
  display: block;
  width: 18px;
  height: 18px;
  margin: 0;
  padding: 0;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  border: none;
  content: ' ';
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');
  opacity: 0.4;
  transition: all 0.3s;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');
  opacity: 0.4;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil input[type='search'] {
  -webkit-appearance: textfield;
}
.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,
.x6-widget-stencil input[type='search']::-webkit-search-decoration {
  -webkit-appearance: none;
}
.x6-widget-stencil-search-text {
  display: block;
  width: 90%;
  margin: 8px 5%;
  padding-left: 8px;
  color: #333;
  background: #fff;
  border: 1px solid #e9e9e9;
  border-radius: 12px;
  outline: 0;
}
.x6-widget-stencil-search-text:focus {
  outline: 0;
}
.x6-widget-stencil::after {
  color: #808080;
  font-weight: 600;
  font-size: 12px;
  background: 0 0;
}
.x6-widget-transform {
  position: absolute;
  box-sizing: content-box !important;
  margin: -5px 0 0 -5px;
  padding: 4px;
  border: 1px dashed #000;
  border-radius: 5px;
  user-select: none;
  pointer-events: none;
}
.x6-widget-transform > div {
  position: absolute;
  box-sizing: border-box;
  background-color: #fff;
  border: 1px solid #000;
  transition: background-color 0.2s;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-transform > div:hover {
  background-color: #d3d3d3;
}
.x6-widget-transform-cursor-n {
  cursor: n-resize;
}
.x6-widget-transform-cursor-s {
  cursor: s-resize;
}
.x6-widget-transform-cursor-e {
  cursor: e-resize;
}
.x6-widget-transform-cursor-w {
  cursor: w-resize;
}
.x6-widget-transform-cursor-ne {
  cursor: ne-resize;
}
.x6-widget-transform-cursor-nw {
  cursor: nw-resize;
}
.x6-widget-transform-cursor-se {
  cursor: se-resize;
}
.x6-widget-transform-cursor-sw {
  cursor: sw-resize;
}
.x6-widget-transform-resize {
  width: 10px;
  height: 10px;
  border-radius: 6px;
}
.x6-widget-transform-resize[data-position='top-left'] {
  top: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='top-right'] {
  top: -5px;
  right: -5px;
}
.x6-widget-transform-resize[data-position='bottom-left'] {
  bottom: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='bottom-right'] {
  right: -5px;
  bottom: -5px;
}
.x6-widget-transform-resize[data-position='top'] {
  top: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='bottom'] {
  bottom: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='left'] {
  top: 50%;
  left: -5px;
  margin-top: -5px;
}
.x6-widget-transform-resize[data-position='right'] {
  top: 50%;
  right: -5px;
  margin-top: -5px;
}
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {
  display: none;
}
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {
  display: none;
}
.x6-widget-transform.no-resize .x6-widget-transform-resize {
  display: none;
}
.x6-widget-transform-rotate {
  top: -20px;
  left: -20px;
  width: 12px;
  height: 12px;
  border-radius: 6px;
  cursor: crosshair;
}
.x6-widget-transform.no-rotate .x6-widget-transform-rotate {
  display: none;
}
.x6-widget-transform-active {
  border-color: transparent;
  pointer-events: all;
}
.x6-widget-transform-active > div {
  display: none;
}
.x6-widget-transform-active > .x6-widget-transform-active-handle {
  display: block;
  background-color: #808080;
}
.x6-widget-knob {
  position: absolute;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  margin-top: -8px;
  margin-left: -8px;
  cursor: pointer;
  user-select: none;
}
.x6-widget-knob::before,
.x6-widget-knob::after {
  position: absolute;
  transform: rotate(45deg);
  content: '';
}
.x6-widget-knob::before {
  top: 4px;
  left: 4px;
  box-sizing: border-box;
  width: 8px;
  height: 8px;
  background-color: #fff;
}
.x6-widget-knob::after {
  top: 5px;
  left: 5px;
  box-sizing: border-box;
  width: 6px;
  height: 6px;
  background-color: #fca000;
}
.x6-graph-print {
  position: relative;
}
.x6-graph-print .x6-graph-print-ready {
  display: none;
}
.x6-graph-print .x6-graph-print-preview {
  overflow: hidden !important;
  background: #fff !important;
}
@media print {
  html,
  html > body.x6-graph-printing {
    position: relative !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  html > body.x6-graph-printing > * {
    display: none !important;
  }
  html > body.x6-graph-printing > .x6-graph-print {
    display: block !important;
  }
  .x6-graph-print {
    top: 0 !important;
    left: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    page-break-after: always;
    background: #fff !important;
  }
  .x6-graph-print .x6-graph-print-ready {
    display: none;
  }
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`;var W2=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class fg extends vo{init(){xu.autoInsertCSS&&fg.ensure()}dispose(){fg.clean()}}W2([fg.dispose()],fg.prototype,"dispose",null),function(c){let e,t=0;function o(){if(t+=1,!(t>1)&&!Le.isApplyingHMR()){e=document.createElement("style"),e.setAttribute("type","text/css"),e.textContent=w3;const d=document.querySelector("head");d&&d.insertBefore(e,d.firstChild)}}c.ensure=o;function l(){t-=1,!(t>0)&&(e&&e.parentNode&&e.parentNode.removeChild(e),e=null)}c.clean=l}(fg||(fg={}));var E3=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class rp{get handleClassName(){return Po.handle}get pie(){return Object.assign(Object.assign({},rp.defaultPieOptions),this.handleOptions.pie)}initHandles(){if(this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach(e=>this.addHandle(e)),this.handleOptions.type==="pie"){if(this.pie.toggles){const e=Po.pieToggle;this.$pieToggles={},this.pie.toggles.forEach(t=>{const o=this.$("<div/>");this.applyAttrs(o,t.attrs),o.addClass(e).addClass(`${e}-pos-${t.position||"e"}`).attr("data-name",t.name).appendTo(this.container),this.$pieToggles[t.name]=o})}this.setPieIcons()}if(this.$handleContainer){const e=this.handleOptions.type||"surround";this.$handleContainer.addClass(Po.wrap).addClass(Po.animate).addClass(`${Po.handle}-${e}`)}this.delegateEvents({[`mousedown .${Po.handle}`]:"onHandleMouseDown",[`touchstart .${Po.handle}`]:"onHandleMouseDown",[`mousedown .${Po.pieToggle}`]:"onPieToggleMouseDown",[`touchstart .${Po.pieToggle}`]:"onPieToggleMouseDown"})}onHandleMouseDown(e){const t=this.$(e.currentTarget).closest(`.${Po.handle}`).attr("data-action");t&&(e.preventDefault(),e.stopPropagation(),this.setEventData(e,{action:t,clientX:e.clientX,clientY:e.clientY,startX:e.clientX,startY:e.clientY}),e.type==="mousedown"&&e.button===2?this.triggerHandleAction(t,"contextmenu",e):(this.triggerHandleAction(t,"mousedown",e),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},e.data)))}onHandleMouseMove(e){const o=this.getEventData(e).action;o&&this.triggerHandleAction(o,"mousemove",e)}onHandleMouseUp(e){const o=this.getEventData(e).action;o&&(this.triggerHandleAction(o,"mouseup",e),this.undelegateDocumentEvents())}triggerHandleAction(e,t,o,l){o.preventDefault(),o.stopPropagation();const d=this.normalizeEvent(o),f=this.getEventData(d),v=this.graph.snapToGrid(d.clientX,d.clientY),x=this.graph.snapToGrid(f.clientX,f.clientY),w=v.x-x.x,_=v.y-x.y;this.trigger(`action:${e}:${t}`,Object.assign({e:d,dx:w,dy:_,x:v.x,y:v.y,offsetX:o.clientX-f.startX,offsetY:o.clientY-f.startY},l)),f.clientX=o.clientX,f.clientY=o.clientY}onPieToggleMouseDown(e){e.stopPropagation();const t=this.$(e.target).closest(`.${Po.pieToggle}`).attr("data-name");this.isOpen(t)||this.isOpen()&&this.toggleState(),this.toggleState(t)}setPieIcons(){this.handleOptions.type==="pie"&&this.$handleContainer.find(`.${Po.handle}`).each((e,t)=>{const o=this.$(t),l=o.attr("data-action"),d=Po.pieSlice,f=this.getHandle(l);if(!f||!f.icon){const v=window.getComputedStyle(t,":before").getPropertyValue("content");if(v&&v!=="none"){const w=o.find(`.${d}-txt`);w.length&&dr.create(w[0]).text(v.replace(/['"]/g,""))}const x=o.css("background-image");if(x){const w=x.match(/url\(['"]?([^'"]+)['"]?\)/);if(w){const _=w[1],A=o.find(`.${d}-img`);A.length>0&&dr.create(A[0]).attr("xlink:href",_)}}}})}getHandleIdx(e){return this.handles.findIndex(t=>t.name===e)}hasHandle(e){return this.getHandleIdx(e)>=0}getHandle(e){return this.handles.find(t=>t.name===e)}renderHandle(e){const t=this.$("<div/>").addClass(`${Po.handle} ${Po.handle}-${e.name}`).attr("data-action",e.name).prop("draggable",!1);if(this.handleOptions.type==="pie"){const o=this.getHandleIdx(e.name),l=this.pie,d=l.outerRadius,f=l.innerRadius,v=(d+f)/2,x=new $e(d,d),w=Yi.toRad(l.sliceAngle),_=o*w+Yi.toRad(l.startAngle),A=_+w,P=LM(f,d,_,A),V=dr.create("svg").addClass(`${Po.pieSlice}-svg`),q=dr.create("path").addClass(Po.pieSlice).attr("d",P).translate(d,d),te=$e.fromPolar(v,-_-w/2,x).toJSON(),ge=l.iconSize,_e=dr.create("image").attr(te).addClass(`${Po.pieSlice}-img`);te.y=te.y+ge-2;const ke=dr.create("text",{"font-size":ge}).attr(te).addClass(`${Po.pieSlice}-txt`);_e.attr({width:ge,height:ge}),_e.translate(-ge/2,-ge/2),ke.translate(-ge/2,-ge/2),V.append([q,_e,ke]),t.append(V.node)}else t.addClass(`${Po.handle}-pos-${e.position}`),e.content&&(typeof e.content=="string"?t.html(e.content):t.append(e.content));return this.updateHandleIcon(t,e.icon),this.applyAttrs(t,e.attrs),t}addHandle(e){if(!this.hasHandle(e.name)){this.handles.push(e);const t=e.events;t&&Object.keys(t).forEach(o=>{const l=t[o],d=`action:${e.name}:${o}`;typeof l=="string"?this.on(d,this[l],this):this.on(d,l)}),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(e))}return this}addHandles(e){return e.forEach(t=>this.addHandle(t)),this}removeHandles(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this}removeHandle(e){const t=this.getHandleIdx(e),o=this.handles[t];return o&&(o.events&&Object.keys(o.events).forEach(l=>{this.off(`action:${e}:${l}`)}),this.getHandleElem(e).remove(),this.handles.splice(t,1)),this}changeHandle(e,t){const o=this.getHandle(e);return o&&(this.removeHandle(e),this.addHandle(Object.assign(Object.assign({},o),t))),this}toggleHandle(e,t){const o=this.getHandle(e);if(o){const l=this.getHandleElem(e),d=`${Po.handle}-selected`;t===void 0&&(t=!l.hasClass(d)),l.toggleClass(d,t);const f=t?o.iconSelected:o.icon;f&&this.updateHandleIcon(l,f)}return this}selectHandle(e){return this.toggleHandle(e,!0)}deselectHandle(e){return this.toggleHandle(e,!1)}deselectAllHandles(){return this.handles.forEach(e=>this.deselectHandle(e.name)),this}getHandleElem(e){return this.$handleContainer.find(`.${Po.handle}-${e}`)}updateHandleIcon(e,t){if(this.handleOptions.type==="pie"){const o=e.find(`.${Po.pieSliceImg}`);this.$(o[0]).attr("xlink:href",t||"")}else e.css("background-image",t?`url(${t})`:"")}isRendered(){return this.$handleContainer!=null}isOpen(e){return this.isRendered()?e?this.$pieToggles[e].hasClass(Po.pieToggleOpened):this.$handleContainer.hasClass(`${Po.pieOpended}`):!1}toggleState(e){if(this.isRendered()){const t=this.$handleContainer;if(Object.keys(this.$pieToggles).forEach(o=>{this.$pieToggles[o].removeClass(Po.pieToggleOpened)}),this.isOpen())this.trigger("pie:close",{name:e}),t.removeClass(Po.pieOpended);else{if(this.trigger("pie:open",{name:e}),e){const o=this.pie.toggles,l=o&&o.find(d=>d.name===e);l&&t.attr({"data-pie-toggle-name":l.name,"data-pie-toggle-position":l.position}),this.$pieToggles[e].addClass(Po.pieToggleOpened)}t.addClass(Po.pieOpended)}}}applyAttrs(e,t){if(t){const o=Ki.$(e);Object.keys(t).forEach(l=>{const d=o.find(l).addBack().filter(l),f=t[l],{class:v}=f,x=E3(f,["class"]);v&&d.addClass(v),d.attr(x)})}}}(function(c){c.defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]}})(rp||(rp={}));var Po;(function(c){c.handle=Ki.prototype.prefixClassName("widget-handle"),c.wrap=`${c.handle}-wrap`,c.animate=`${c.handle}-animate`,c.pieOpended=`${c.handle}-pie-opened`,c.pieToggle=`${c.handle}-pie-toggle`,c.pieToggleOpened=`${c.handle}-pie-toggle-opened`,c.pieSlice=`${c.handle}-pie-slice`,c.pieSliceImg=`${c.handle}-pie-slice-img`})(Po||(Po={}));var S3=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d},_3=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class Fv extends Ki{constructor(e){super();const t=e,{view:o,cell:l,node:d,edge:f,graph:v}=t,x=_3(t,["view","cell","node","edge","graph"]);o?(this.view=o,this.cell=o.cell,this.graph=o.graph,this.model=this.graph.model):(l||f||d)&&v&&(this.cell=d||f||l,this.view=v.renderer.findViewByCell(this.cell),this.graph=v,this.model=this.graph.model);const w=this.constructor;e.clearAll!==!1&&w.removeInstances(this.graph),w.register(this),this.init(x)}static ensureCache(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)}static register(e,t){t==null&&(t=e.graph);const o=this.ensureCache();let l=o[t.view.cid];l==null&&(l=o[t.view.cid]={}),l[e.cid]=e}static unregister(e,t){t==null&&(t=e.graph);const o=this.ensureCache();o[t.view.cid]&&delete o[t.view.cid][e.cid]}static removeInstances(e){const o=this.ensureCache()[e.view.cid];o&&Object.keys(o).forEach(l=>{const d=o[l];d&&d.remove()})}static getInstances(e){return this.ensureCache()[e.view.cid]||{}}init(e){}render(){return this}startListening(){this.options.clearOnBlankMouseDown!==!1&&this.graph.on("blank:mousedown",this.remove,this)}stopListening(){this.options.clearOnBlankMouseDown!==!1&&this.graph.off("blank:mousedown",this.remove,this)}remove(){return this.stopListening(),this.constructor.unregister(this),super.remove()}dispose(){this.remove()}}Fv.instanceCache=new WeakMap,S3([Ki.dispose()],Fv.prototype,"dispose",null);class yw extends Fv{get node(){return this.cell}get metadata(){const e=this.cell.prop("knob");return Array.isArray(e)?this.options.index!=null?e[this.options.index]:null:e}init(e){this.options=Object.assign({},e),this.render(),this.startListening()}startListening(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.view.on("node:resize:mousedown",this.onTransform,this),this.view.on("node:rotate:mousedown",this.onTransform,this),this.view.on("node:resize:mouseup",this.onTransformed,this),this.view.on("node:rotate:mouseup",this.onTransformed,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),super.startListening()}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.view.off("node:resize:mousedown",this.onTransform,this),this.view.off("node:rotate:mousedown",this.onTransform,this),this.view.off("node:resize:mouseup",this.onTransformed,this),this.view.off("node:rotate:mouseup",this.onTransformed,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),super.stopListening()}render(){return this.container=document.createElement("div"),ao(this.container,this.prefixClassName("widget-knob")),this.options.className&&ao(this.container,this.options.className),this.view.addClass(M0.KNOB),this.graph.container.appendChild(this.container),this.update(),this}remove(){return this.view.removeClass(M0.KNOB),super.remove()}update(){if(this.metadata){const{update:e,position:t}=this.metadata,o={knob:this,cell:this.cell,node:this.node};if(t){const l=t.call(this.graph,Object.assign({},o));if(l){const d=this.graph.matrix(),f=this.node.getBBox(),v=Yi.normalize(this.node.getAngle()),x=$e.create(l);v!==0&&x.rotate(-v,{x:f.width/2,y:f.height/2}),x.translate(f).scale(d.a,d.d).translate(d.e,d.f),this.container.style.left=`${x.x}px`,this.container.style.top=`${x.y}px`}}e&&e.call(this.graph,Object.assign({},o))}}hide(){this.container.style.display="none"}show(){this.container.style.display=""}onTransform(){this.hide()}onTransformed(){this.show()}onKnobMouseDown({knob:e}){this.cid!==e.cid&&this.hide()}onKnobMouseUp(){this.show()}notify(e,t){if(this.view){const o=this.view.normalizeEvent(t),l=this.graph.snapToGrid(o.clientX,o.clientY);this.view.notify(`cell:${e}`,{e:o,view:this.view,node:this.node,cell:this.cell,x:l.x,y:l.y,knob:this}),this.cell.isNode()?this.view.notify(`node:${e}`,{e:o,view:this.view,node:this.node,cell:this.cell,x:l.x,y:l.y,knob:this}):this.cell.isEdge()&&this.view.notify(`edge:${e}`,{e:o,view:this.view,edge:this.cell,cell:this.cell,x:l.x,y:l.y,knob:this})}}onMouseDown(e){e.stopPropagation(),this.setEventData(e,{knobbing:!1,originX:e.clientX,originY:e.clientY,clientX:e.clientX,clientY:e.clientY}),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(M0.documentEvents,e.data),this.metadata&&this.metadata.onMouseDown&&this.metadata.onMouseDown.call(this.graph,{e,data:this.getEventData(e),knob:this,cell:this.cell,node:this.node}),this.notify("knob:mousedown",e)}onMouseMove(e){const t=this.getEventData(e),o=this.graph.findViewByCell(this.node);if(t.knobbing||(t.knobbing=!0,o&&(o.addClass(M0.KNOBBING),this.notify("knob",e)),this.model.startBatch("knob",{cid:this.cid})),t.clientX=e.clientX,t.clientY=e.clientY,this.metadata&&this.metadata.onMouseMove){const l=this.graph.matrix(),d=(e.clientX-t.originX)/l.a,f=(e.clientY-t.originY)/l.d,v=this.node.getAngle(),x=new $e(d,f).rotate(v);this.metadata.onMouseMove.call(this.graph,{e,data:t,deltaX:x.x,deltaY:x.y,knob:this,cell:this.cell,node:this.node})}this.notify("knobbing",e),this.notify("knob:mousemove",e)}onMouseUp(e){this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const t=this.getEventData(e),o=this.graph.findViewByCell(this.node);t.knobbing&&(o&&o.removeClass(M0.KNOBBING),this.metadata&&this.metadata.onMouseUp&&this.metadata.onMouseUp.call(this.graph,{e,data:t,knob:this,cell:this.cell,node:this.node}),this.model.stopBatch("knob",{cid:this.cid}),this.notify("knobbed",e)),this.notify("knob:mouseup",e)}}var M0;(function(c){c.KNOB="has-widget-knob",c.KNOBBING="node-knobbing",c.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"}})(M0||(M0={}));var A3=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d},Bv;(function(c){c.root="widget-minimap",c.viewport=`${c.root}-viewport`,c.zoom=`${c.viewport}-zoom`})(Bv||(Bv={}));class SA extends Ki{constructor(e){super(),this.options=Object.assign(Object.assign({},X2.defaultOptions),e),this.updateViewport=ty(this.updateViewport.bind(this),0),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(Bv.root));const t=document.createElement("div");this.container.appendChild(t),this.$viewport=this.$("<div>").addClass(this.prefixClassName(Bv.viewport)),this.options.scalable&&(this.zoomHandle=this.$("<div>").addClass(this.prefixClassName(Bv.zoom)).appendTo(this.$viewport).get(0)),this.$container.append(this.$viewport).css({width:this.options.width,height:this.options.height,padding:this.options.padding}),this.options.container&&this.options.container.appendChild(this.container),this.sourceGraph=this.graph;const o=Object.assign(Object.assign({},this.options.graphOptions),{container:t,model:this.sourceGraph.model,frozen:!0,async:this.sourceGraph.isAsync(),interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});this.targetGraph=this.options.createGraph?this.options.createGraph(o):new io(o),this.targetGraph.renderer.unfreeze(),this.updatePaper(this.sourceGraph.options.width,this.sourceGraph.options.height),this.startListening()}get graph(){return this.options.graph}get scroller(){return this.graph.scroller.widget}get graphContainer(){return this.scroller?this.scroller.container:this.graph.container}get $graphContainer(){return this.scroller?this.scroller.$container:this.$(this.graph.container)}startListening(){this.scroller?this.$graphContainer.on(`scroll${this.getEventNamespace()}`,this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents({mousedown:"startAction",touchstart:"startAction",[`mousedown .${this.prefixClassName("graph")}`]:"scrollTo",[`touchstart .${this.prefixClassName("graph")}`]:"scrollTo"})}stopListening(){this.scroller?this.$graphContainer.off(this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}onRemove(){this.targetGraph.view.remove(),this.stopListening(),this.targetGraph.dispose()}onTransform(e){(e.ui||this.targetGraphTransforming)&&this.updateViewport()}onModelUpdated(){this.targetGraph.zoomToFit()}updatePaper(e,t){let o,l;typeof e=="object"?(o=e.width,l=e.height):(o=e,l=t);const d=this.sourceGraph.options,f=this.sourceGraph.transform.getScale(),v=this.options.width-2*this.options.padding,x=this.options.height-2*this.options.padding;o/=f.sx,l/=f.sy,this.ratio=Math.min(v/o,x/l);const w=this.ratio,_=d.x*w/f.sx,A=d.y*w/f.sy;return o*=w,l*=w,this.targetGraph.resizeGraph(o,l),this.targetGraph.translate(_,A),this.scroller?this.targetGraph.scale(w,w):this.targetGraph.zoomToFit(),this.updateViewport(),this}updateViewport(){const e=this.sourceGraph.transform.getScale(),t=this.targetGraph.transform.getScale();let o=null;this.scroller?o=this.scroller.clientToLocalPoint(0,0):o=this.graph.graphToLocal(0,0);const l=this.$(this.targetGraph.container).position(),d=this.targetGraph.translate();d.ty=d.ty||0,this.geometry={top:l.top+o.y*t.sy+d.ty,left:l.left+o.x*t.sx+d.tx,width:this.$graphContainer.innerWidth()*t.sx/e.sx,height:this.$graphContainer.innerHeight()*t.sy/e.sy},this.$viewport.css(this.geometry)}startAction(e){const t=this.normalizeEvent(e),o=t.target===this.zoomHandle?"zooming":"panning",{tx:l,ty:d}=this.sourceGraph.translate(),f={action:o,clientX:t.clientX,clientY:t.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:l,translateY:d};this.targetGraphTransforming=!0,this.delegateDocumentEvents(X2.documentEvents,f)}doAction(e){const t=this.normalizeEvent(e),o=t.clientX,l=t.clientY,d=t.data;switch(d.action){case"panning":{const f=this.sourceGraph.transform.getScale(),v=(o-d.clientX)*f.sx,x=(l-d.clientY)*f.sy;this.scroller?(this.graphContainer.scrollLeft=d.scrollLeft+v/this.ratio,this.graphContainer.scrollTop=d.scrollTop+x/this.ratio):this.sourceGraph.translate(d.translateX-v/this.ratio,d.translateY-x/this.ratio);break}case"zooming":{const f=d.scale,v=d.geometry,x=1+(d.clientX-o)/v.width/f.sx;d.frameId&&cancelAnimationFrame(d.frameId),d.frameId=requestAnimationFrame(()=>{this.sourceGraph.zoom(x*d.zoom,{absolute:!0,minScale:this.options.minScale,maxScale:this.options.maxScale})});break}default:break}}stopAction(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1}scrollTo(e){const t=this.normalizeEvent(e);let o,l;const d=this.targetGraph.translate();if(d.ty=d.ty||0,t.offsetX==null){const x=this.$(this.targetGraph.container).offset();o=t.pageX-x.left,l=t.pageY-x.top}else o=t.offsetX,l=t.offsetY;const f=(o-d.tx)/this.ratio,v=(l-d.ty)/this.ratio;this.sourceGraph.centerPoint(f,v)}dispose(){this.remove()}}A3([Ki.dispose()],SA.prototype,"dispose",null);var X2;(function(c){c.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:e=>new io(e)},c.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}})(X2||(X2={}));var T3=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d},M3=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class _A extends Ki{constructor(e){super();const{graph:t}=e,o=M3(e,["graph"]);this.graph=t,this.options=Object.assign({tolerance:10},o),this.offset={x:0,y:0},this.render(),this.parseFilter(),this.disabled||this.startListening()}get model(){return this.graph.model}get containerClassName(){return this.prefixClassName("widget-snapline")}get verticalClassName(){return`${this.containerClassName}-vertical`}get horizontalClassName(){return`${this.containerClassName}-horizontal`}get disabled(){return this.options.enabled!==!0||this.graph.options.snapline.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())}setFilter(e){this.options.filter=e,this.parseFilter()}render(){const e=this.containerWrapper=new dr("svg"),t=this.horizontal=new dr("line"),o=this.vertical=new dr("line");e.addClass(this.containerClassName),t.addClass(this.horizontalClassName),o.addClass(this.verticalClassName),e.setAttribute("width","100%"),e.setAttribute("height","100%"),t.setAttribute("display","none"),o.setAttribute("display","none"),e.append([t,o]),this.options.className&&e.addClass(this.options.className),this.container=this.containerWrapper.node}startListening(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}stopListening(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}parseFilter(){this.filterShapes={},this.filterCells={},this.filterFunction=null;const e=this.options.filter;Array.isArray(e)?e.forEach(t=>{typeof t=="string"?this.filterShapes[t]=!0:this.filterCells[t.id]=!0}):typeof e=="function"&&(this.filterFunction=e)}onBatchStop({name:e,data:t}){e==="resize"&&this.snapOnResizing(t.cell,t)}captureCursorOffset({view:e,x:t,y:o}){const l=e.getDelegatedView();if(l&&this.isNodeMovable(l)){const d=e.cell.getPosition();this.offset={x:t-d.x,y:o-d.y}}}isNodeMovable(e){return e&&e.cell.isNode()&&e.can("nodeMovable")}snapOnResizing(e,t){if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){const o=this.graph.renderer.findViewByCell(e);if(o&&o.cell.isNode()){const l=e.getBBox(),d=l.bbox(e.getAngle()),f=d.getTopLeft(),v=d.getBottomRight(),x=Yi.normalize(e.getAngle()),w=this.options.tolerance||0;let _,A,P,V,q,te;const ge={vertical:0,horizontal:0},_e=t.direction,ke=t.trueDirection,Se=t.relativeDirection;ke.indexOf("right")!==-1?ge.vertical=v.x:ge.vertical=f.x,ke.indexOf("bottom")!==-1?ge.horizontal=v.y:ge.horizontal=f.y,this.model.getNodes().some(Zn=>{if(this.isIgnored(e,Zn))return!1;const si=Zn.getBBox().bbox(Zn.getAngle()),Wr=si.getTopLeft(),Wt=si.getBottomRight(),Ln={vertical:[Wr.x,Wt.x],horizontal:[Wr.y,Wt.y]},jr={};return Object.keys(Ln).forEach(Do=>{const Jo=Do,Oa=Ln[Jo].map(ta=>({position:ta,distance:Math.abs(ta-ge[Jo])})).filter(ta=>ta.distance<=w);jr[Jo]=un(Oa,ta=>ta.distance)}),_==null&&jr.vertical.length>0&&(_=jr.vertical[0].position,A=Math.min(d.y,si.y),P=Math.max(v.y,Wt.y)-A),V==null&&jr.horizontal.length>0&&(V=jr.horizontal[0].position,q=Math.min(d.x,si.x),te=Math.max(v.x,Wt.x)-q),_!=null&&V!=null}),this.hide();let je=0,nt=0;(V!=null||_!=null)&&(_!=null&&(je=ke.indexOf("right")!==-1?_-v.x:f.x-_),V!=null&&(nt=ke.indexOf("bottom")!==-1?V-v.y:f.y-V));let wt=0,It=0;if(x%90===0)x===90||x===270?(wt=nt,It=je):(wt=je,It=nt);else{const Zn=x>=0&&x<90?1:x>=90&&x<180?4:x>=180&&x<270?3:2;V!=null&&_!=null&&(je<nt?(nt=0,V=void 0):(je=0,_=void 0));const si=Yi.toRad(x%90);je&&(wt=Zn===3?je/Math.cos(si):je/Math.sin(si)),nt&&(It=Zn===3?nt/Math.cos(si):nt/Math.sin(si));const Wr=Zn===1||Zn===3;switch(Se){case"top":case"bottom":It=nt?nt/(Wr?Math.cos(si):Math.sin(si)):je/(Wr?Math.sin(si):Math.cos(si));break;case"left":case"right":wt=je?je/(Wr?Math.cos(si):Math.sin(si)):nt/(Wr?Math.sin(si):Math.cos(si));break;default:break}}switch(Se){case"top":case"bottom":wt=0;break;case"left":case"right":It=0;break;default:break}const Jt=this.graph.getGridSize();let Un=Math.max(l.width+wt,Jt),An=Math.max(l.height+It,Jt);t.minWidth&&t.minWidth>Jt&&(Un=Math.max(Un,t.minWidth)),t.minHeight&&t.minHeight>Jt&&(An=Math.max(An,t.minHeight)),t.maxWidth&&(Un=Math.min(Un,t.maxWidth)),t.maxHeight&&(An=Math.min(An,t.maxHeight)),t.preserveAspectRatio&&(It<wt?An=Un*(l.height/l.width):Un=An*(l.width/l.height)),(Un!==l.width||An!==l.height)&&(e.resize(Un,An,{direction:_e,relativeDirection:Se,trueDirection:ke,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(o)}),P&&(P+=An-l.height),te&&(te+=Un-l.width));const On=e.getBBox().bbox(x);_&&Math.abs(On.x-_)>1&&Math.abs(On.width+On.x-_)>1&&(_=void 0),V&&Math.abs(On.y-V)>1&&Math.abs(On.height+On.y-V)>1&&(V=void 0),this.update({verticalLeft:_,verticalTop:A,verticalHeight:P,horizontalTop:V,horizontalLeft:q,horizontalWidth:te})}}}snapOnMoving({view:e,e:t,x:o,y:l}){const d=e.getEventData(t).delegatedView||e;if(!this.isNodeMovable(d))return;const f=d.cell,v=f.getSize(),x=f.getPosition(),w=new zn(o-this.offset.x,l-this.offset.y,v.width,v.height),_=f.getAngle(),A=w.getCenter(),P=w.bbox(_),V=P.getTopLeft(),q=P.getBottomRight(),te=this.options.tolerance||0;let ge,_e,ke,Se,je,nt,wt=0,It=0;if(this.model.getNodes().some(Jt=>{if(this.isIgnored(f,Jt))return!1;const Un=Jt.getBBox().bbox(Jt.getAngle()),An=Un.getCenter(),On=Un.getTopLeft(),Zn=Un.getBottomRight();return ge==null&&(Math.abs(An.x-A.x)<te?(ge=An.x,wt=.5):Math.abs(On.x-V.x)<te?(ge=On.x,wt=0):Math.abs(On.x-q.x)<te?(ge=On.x,wt=1):Math.abs(Zn.x-q.x)<te?(ge=Zn.x,wt=1):Math.abs(Zn.x-V.x)<te&&(ge=Zn.x),ge!=null&&(_e=Math.min(P.y,Un.y),ke=Math.max(q.y,Zn.y)-_e)),Se==null&&(Math.abs(An.y-A.y)<te?(Se=An.y,It=.5):Math.abs(On.y-V.y)<te?Se=On.y:Math.abs(On.y-q.y)<te?(Se=On.y,It=1):Math.abs(Zn.y-q.y)<te?(Se=Zn.y,It=1):Math.abs(Zn.y-V.y)<te&&(Se=Zn.y),Se!=null&&(je=Math.min(P.x,Un.x),nt=Math.max(q.x,Zn.x)-je)),ge!=null&&Se!=null}),this.hide(),Se!=null||ge!=null){Se!=null&&(P.y=Se-It*P.height),ge!=null&&(P.x=ge-wt*P.width);const Jt=P.getCenter(),Un=Jt.x-w.width/2,An=Jt.y-w.height/2,On=Un-x.x,Zn=An-x.y;(On!==0||Zn!==0)&&(f.translate(On,Zn,{snapped:!0,restrict:this.graph.hook.getRestrictArea(d)}),nt&&(nt+=On),ke&&(ke+=Zn)),this.update({verticalLeft:ge,verticalTop:_e,verticalHeight:ke,horizontalTop:Se,horizontalLeft:je,horizontalWidth:nt})}}isIgnored(e,t){return t.id===e.id||t.isDescendantOf(e)||this.filterShapes[t.shape]||this.filterCells[t.id]||this.filterFunction&&ir(this.filterFunction,this.graph,t)}update(e){if(e.horizontalTop){const t=this.graph.localToGraph(new $e(e.horizontalLeft,e.horizontalTop)),o=this.graph.localToGraph(new $e(e.horizontalLeft+e.horizontalWidth,e.horizontalTop));this.horizontal.setAttributes({x1:this.options.sharp?`${t.x}`:"0",y1:`${t.y}`,x2:this.options.sharp?`${o.x}`:"100%",y2:`${o.y}`,display:"inherit"})}else this.horizontal.setAttribute("display","none");if(e.verticalLeft){const t=this.graph.localToGraph(new $e(e.verticalLeft,e.verticalTop)),o=this.graph.localToGraph(new $e(e.verticalLeft,e.verticalTop+e.verticalHeight));this.vertical.setAttributes({x1:`${t.x}`,y1:this.options.sharp?`${t.y}`:"0",x2:`${o.x}`,y2:this.options.sharp?`${o.y}`:"100%",display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}resetTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}show(){return this.resetTimer(),this.container.parentNode==null&&this.graph.container.appendChild(this.container),this}hide(){this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");const e=this.options.clean,t=typeof e=="number"?e:e!==!1?3e3:0;return t>0&&(this.timer=window.setTimeout(()=>{this.container.parentNode!==null&&this.unmount()},t)),this}onRemove(){this.stopListening(),this.hide()}dispose(){this.remove()}}T3([Ki.dispose()],_A.prototype,"dispose",null);var JP=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class mo extends vo{init(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()}startListening(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}resetUpdates(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}}onSortModel(){this.model.hasActiveBatch(mo.SORT_DELAYING_BATCHES)||this.sortViews()}onModelReseted({options:e}){this.removeZPivots(),this.resetViews(this.model.getCells(),e)}onBatchStop({name:e,data:t}){if(this.isFrozen())return;const o=this.model;if(!this.isAsync()){const d=mo.UPDATE_DELAYING_BATCHES;d.includes(e)&&!o.hasActiveBatch(d)&&this.updateViews(t)}const l=mo.SORT_DELAYING_BATCHES;l.includes(e)&&!o.hasActiveBatch(l)&&this.sortViews()}onCellAdded({cell:e,options:t}){const o=t.position;this.isAsync()||typeof o!="number"?this.renderView(e,t):(t.maxPosition===o&&this.freeze({key:"addCells"}),this.renderView(e,t),o===0&&this.unfreeze({key:"addCells"}))}onCellRemoved({cell:e,options:t}){const o=this.findViewByCell(e);o&&this.requestViewUpdate(o,mo.FLAG_REMOVE,o.priority,t)}onCellZIndexChanged({cell:e,options:t}){if(this.options.sorting==="approx"){const o=this.findViewByCell(e);o&&this.requestViewUpdate(o,mo.FLAG_INSERT,o.priority,t)}}onCellVisibleChanged({cell:e,current:t,options:o}){t||this.processEdgeOnTerminalVisibleChanged(e,!1);const l=this.findViewByCell(e);!t&&l?this.removeView(e):t&&l==null&&this.renderView(e,o),t&&this.processEdgeOnTerminalVisibleChanged(e,!0)}processEdgeOnTerminalVisibleChanged(e,t){const o=(l,d)=>l.getSourceCellId()!==d.id?l.getSourceCell():l.getTargetCellId()!==d.id?l.getTargetCell():null;this.model.getConnectedEdges(e).forEach(l=>{const d=o(l,e);(d==null||d.isVisible())&&(t?l.show():l.hide())})}isEdgeTerminalVisible(e,t){const o=t==="source"?e.getSourceCellId():e.getTargetCellId(),l=o?this.model.getCell(o):null;return!(l&&!l.isVisible())}requestConnectedEdgesUpdate(e,t={}){if(As.isCellView(e)){const o=e.cell,l=this.model.getConnectedEdges(o);for(let d=0,f=l.length;d<f;d+=1){const v=l[d],x=this.findViewByCell(v);if(!x)continue;const w=["update"];v.getTargetCell()===o&&w.push("target"),v.getSourceCell()===o&&w.push("source"),this.scheduleViewUpdate(x,x.getFlag(w),x.priority,t)}}}forcePostponedViewUpdate(e,t){if(!e||!As.isCellView(e))return!1;const o=e.cell;if(o.isNode())return!1;const l=e;if(o.isEdge()&&!(t&e.getFlag(["source","target"]))){let d=0;const f=this.findViewByCell(o.getSourceCell());f&&!this.isViewMounted(f)&&(d=this.dumpView(f),l.updateTerminalMagnet("source"));let v=0;const x=this.findViewByCell(o.getTargetCell());if(x&&!this.isViewMounted(x)&&(v=this.dumpView(x),l.updateTerminalMagnet("target")),d===0&&v===0)return!this.dumpView(l)}return!1}scheduleViewUpdate(e,t,o,l={}){const d=e.cid,f=this.updates;let v=f.priorities[o];v||(v=f.priorities[o]={});const x=v[d]||0;(x&t)!==t&&(x||(f.count+=1),t&mo.FLAG_REMOVE&&x&mo.FLAG_INSERT?v[d]^=mo.FLAG_INSERT:t&mo.FLAG_INSERT&&x&mo.FLAG_REMOVE&&(v[d]^=mo.FLAG_REMOVE),v[d]|=t,this.graph.hook.onViewUpdated(e,t,l))}requestViewUpdate(e,t,o,l={}){this.scheduleViewUpdate(e,t,o,l);const d=this.isAsync();if(this.isFrozen()||d&&l.async!==!1||this.model.hasActiveBatch(mo.UPDATE_DELAYING_BATCHES))return;const f=this.updateViews(l);d&&this.graph.trigger("render:done",{stats:f,options:l})}dumpView(e,t={}){if(e==null)return 0;const o=e.cid,d=this.updates.priorities[e.priority],f=this.registerMountedView(e)|d[o];return delete d[o],f?this.updateView(e,f,t):0}dumpViews(e={}){this.checkView(e),this.updateViews(e)}requireView(e,t={}){const o=this.findViewByCell(e);return o==null?null:(this.dumpView(o,t),o)}updateView(e,t,o={}){if(e==null)return 0;if(As.isCellView(e)){if(t&mo.FLAG_REMOVE)return this.removeView(e.cell),0;t&mo.FLAG_INSERT&&(this.insertView(e),t^=mo.FLAG_INSERT)}return t?e.confirmUpdate(t,o):0}updateViews(e={}){let t,o=0,l=0,d=mo.MIN_PRIORITY;do t=this.updateViewsBatch(e),o+=1,l+=t.updatedCount,d=Math.min(t.priority,d);while(!t.empty);return{priority:d,batchCount:o,updatedCount:l}}updateViewsBatch(e={}){const t=this.updates,o=t.priorities,l=e.batchSize||mo.UPDATE_BATCH_SIZE;let d=!0,f=mo.MIN_PRIORITY,v=0,x=0,w=0,_=0,A=e.checkView||this.options.checkView;typeof A!="function"&&(A=null);e:for(let P=0,V=o.length;P<V;P+=1){const q=o[P];for(const te in q){if(w>=l){d=!1;break e}const ge=Ki.views[te];if(!ge){delete q[te];continue}let _e=q[te];if(!(_e&mo.FLAG_REMOVE)){const je=te in t.unmounted;if(A&&!ir(A,this.graph,{view:ge,unmounted:je})){je||(this.registerUnmountedView(ge),ge.unmount()),t.unmounted[te]|=_e,delete q[te],x+=1;continue}je&&(_e|=mo.FLAG_INSERT,v+=1),_e|=this.registerMountedView(ge)}const ke=ge;let Se=this.updateView(ge,_e,e);if(Se>0){const je=ke.cell;je&&je.isEdge()&&(ke.hasAction(Se,"source")&&!this.isEdgeTerminalVisible(je,"source")&&(Se=ke.removeAction(Se,"source"),Se|=mo.FLAG_REMOVE),ke.hasAction(Se,"target")&&!this.isEdgeTerminalVisible(je,"target")&&(Se=ke.removeAction(Se,"target"),Se|=mo.FLAG_REMOVE))}if(Se>0&&(q[te]=Se,!this.graph.hook.onViewPostponed(ke,Se,e)||q[te])){_+=1,d=!1;continue}f>P&&(f=P),w+=1,delete q[te]}}return{empty:d,priority:f,mountedCount:v,unmountedCount:x,updatedCount:w,postponedCount:_}}updateViewsAsync(e={},t={processed:0,priority:mo.MIN_PRIORITY}){const o=this.updates,l=o.animationId;if(l){if(v2(l),t.processed===0){const P=e.before;typeof P=="function"&&ir(P,this.graph,this.graph)}const d=this.updateViewsBatch(e),f=this.checkViewImpl({checkView:e.checkView,mountedBatchSize:mo.MOUNT_BATCH_SIZE-d.mountedCount,unmountedBatchSize:mo.MOUNT_BATCH_SIZE-d.unmountedCount});let v=t.processed;const x=o.count,w=f.mountedCount,_=f.unmountedCount;d.updatedCount>0&&(v+=d.updatedCount+d.unmountedCount,t.priority=Math.min(d.priority,t.priority),d.empty&&w===0?(d.priority=t.priority,d.mountedCount+=w,d.unmountedCount+=_,this.graph.trigger("render:done",{stats:d,options:e}),t.processed=0,o.count=0):t.processed=v);const A=e.progress;if(x&&typeof A=="function"&&ir(A,this.graph,{total:x,done:d.empty,current:v}),o.animationId!==l)return}o.animationId=g2(()=>{this.updateViewsAsync(e,t)})}registerMountedView(e){const t=e.cid,o=this.updates;if(t in o.mounted)return 0;o.mounted[t]=!0,o.mountedCids.push(t);const l=o.unmounted[t]||0;return delete o.unmounted[t],l}registerUnmountedView(e){const t=e.cid,o=this.updates;if(t in o.unmounted)return 0;o.unmounted[t]|=mo.FLAG_INSERT;const l=o.unmounted[t];return o.unmountedCids.push(t),delete o.mounted[t],l}isViewMounted(e){return e==null?!1:e.cid in this.updates.mounted}getMountedViews(){return Object.keys(this.updates.mounted).map(e=>As.views[e])}getUnmountedViews(){return Object.keys(this.updates.unmounted).map(e=>As.views[e])}checkMountedViews(e,t){let o=0;if(typeof e!="function")return o;const l=this.updates,d=l.mounted,f=l.mountedCids,v=t==null?f.length:Math.min(f.length,t);for(let x=0;x<v;x+=1){const w=f[x];if(!(w in d))continue;const _=As.views[w];if(_==null)continue;if(ir(e,this.graph,{view:_,unmounted:!0})){f.push(w);continue}o+=1,this.registerUnmountedView(_)&&_.unmount()}return f.splice(0,v),o}checkUnmountedViews(e,t){let o=0;typeof e!="function"&&(e=null);const l=this.updates,d=l.unmounted,f=l.unmountedCids,v=t==null?f.length:Math.min(f.length,t);for(let x=0;x<v;x+=1){const w=f[x];if(!(w in d))continue;const _=As.views[w];if(_==null)continue;if(e&&!ir(e,this.graph,{view:_,unmounted:!1})){f.push(w);continue}o+=1;const A=this.registerMountedView(_);A&&this.scheduleViewUpdate(_,A,_.priority,{mounting:!0})}return f.splice(0,v),o}checkViewImpl(e={mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER}){const t=e.checkView||this.options.checkView,o=this.checkMountedViews(t,e.unmountedBatchSize);return{mountedCount:this.checkUnmountedViews(t,o>0?Math.min(this.updates.unmountedCids.length-o,e.mountedBatchSize):e.mountedBatchSize),unmountedCount:o}}checkView(e={}){return this.checkViewImpl(e)}isFrozen(){return!!this.options.frozen}freeze(e={}){const t=e.key,o=this.updates,l=this.options.frozen,d=o.freezeKey;if(t&&t!==d){if(l&&d)return;o.frozen=l,o.freezeKey=t}this.options.frozen=!0;const f=o.animationId;o.animationId=null,this.isAsync()&&f!=null&&v2(f),this.graph.trigger("freeze",{key:t})}unfreeze(e={}){const t=e.key,o=this.updates,l=o.freezeKey;if(t&&l&&t!==l||(o.freezeKey=null,t&&t===l&&o.frozen))return;const d=()=>{this.options.frozen=o.frozen=!1,o.sort&&(this.sortViews(),o.sort=!1);const f=e.after;f&&ir(f,this.graph,this.graph),this.graph.trigger("unfreeze",{key:t})};if(this.isAsync()){this.freeze();const f=e.progress;this.updateViewsAsync(Object.assign(Object.assign({},e),{progress:({done:v,current:x,total:w})=>{f&&ir(f,this.graph,{done:v,current:x,total:w}),v&&d()}}))}else this.updateViews(e),d()}isAsync(){return!!this.options.async}setAsync(e){this.options.async=e}onRemove(){this.freeze(),this.removeViews()}resetViews(e=[],t={}){this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(let o=0,l=e.length;o<l;o+=1)this.renderView(e[o],t);this.unfreeze({key:"reset"}),this.sortViews()}removeView(e){const t=this.views[e.id];if(t){const o=t.cid,l=this.updates,d=l.mounted,f=l.unmounted;t.remove(),delete this.views[e.id],delete d[o],delete f[o]}return t}removeViews(){this.views&&Object.keys(this.views).forEach(e=>{const t=this.views[e];t&&this.removeView(t.cell)}),this.views={}}renderView(e,t={}){const o=e.id,l=this.views;let d=0,f=l[o];if(e.isVisible()&&!(e.isEdge()&&(!this.isEdgeTerminalVisible(e,"source")||!this.isEdgeTerminalVisible(e,"target")))){if(f)d=mo.FLAG_INSERT;else{const v=this.graph.hook.createCellView(e);v&&(f=l[e.id]=v,f.graph=this.graph,d=this.registerUnmountedView(f)|f.getBootstrapFlag())}f&&this.requestViewUpdate(f,d,f.priority,t)}}isExactSorting(){return this.options.sorting==="exact"}sortViews(){if(this.isExactSorting()){if(this.isFrozen()){this.updates.sort=!0;return}this.sortViewsExact()}}sortElements(e,t){const o=e.map(l=>{const d=l.parentNode,f=d.insertBefore(document.createTextNode(""),l.nextSibling);return v=>{if(d===v)throw new Error("You can't sort elements if any one is a descendant of another.");d.insertBefore(v,f),d.removeChild(f)}});e.sort(t).forEach((l,d)=>o[d](l))}sortViewsExact(){const e=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),t=this.model;this.sortElements(e,(o,l)=>{const d=t.getCell(o.getAttribute("data-cell-id")||""),f=t.getCell(l.getAttribute("data-cell-id")||""),v=d.getZIndex()||0,x=f.getZIndex()||0;return v===x?0:v<x?-1:1})}addZPivot(e=0){this.zPivots==null&&(this.zPivots={});const t=this.zPivots;let o=t[e];if(o)return o;o=t[e]=document.createComment(`z-index:${e+1}`);let l=-1/0;for(const f in t){const v=+f;v<e&&v>l&&(l=v,e-1)}const d=this.view.stage;if(l!==-1/0){const f=t[l];d.insertBefore(o,f.nextSibling)}else d.insertBefore(o,d.firstChild);return o}removeZPivots(){this.zPivots&&Object.keys(this.zPivots).forEach(e=>{const t=this.zPivots[e];t&&t.parentNode&&t.parentNode.removeChild(t)}),this.zPivots={}}insertView(e){const t=this.view.stage;switch(this.options.sorting){case"approx":{const o=e.cell.getZIndex(),l=this.addZPivot(o);t.insertBefore(e.container,l);break}case"exact":default:t.appendChild(e.container);break}}findViewByCell(e){if(e==null)return null;const t=Gi.isCell(e)?e.id:e;return this.views[t]}findViewByElem(e){if(e==null)return null;const t=typeof e=="string"?this.view.stage.querySelector(e):e instanceof Element?e:e[0];if(t){const o=this.view.findAttr("data-cell-id",t);if(o)return this.views[o]}return null}findViewsFromPoint(e){const t={x:e.x,y:e.y};return this.model.getCells().map(o=>this.findViewByCell(o)).filter(o=>o!=null?pa(o.container,{target:this.view.stage}).containsPoint(t):!1)}findEdgeViewsInArea(e,t={}){const o=zn.create(e);return this.model.getEdges().map(l=>this.findViewByCell(l)).filter(l=>{if(l){const d=pa(l.container,{target:this.view.stage});return d.width===0?d.inflate(1,0):d.height===0&&d.inflate(0,1),t.strict?o.containsRect(d):o.isIntersectWithRect(d)}return!1})}findViewsInArea(e,t={}){const o=zn.create(e);return this.model.getNodes().map(l=>this.findViewByCell(l)).filter(l=>{if(l){const d=pa(l.container,{target:this.view.stage});return t.strict?o.containsRect(d):o.isIntersectWithRect(d)}return!1})}dispose(){this.resetUpdates(),this.stopListening()}}JP([vo.dispose()],mo.prototype,"dispose",null),function(c){c.FLAG_INSERT=1<<30,c.FLAG_REMOVE=1<<29,c.MOUNT_BATCH_SIZE=1e3,c.UPDATE_BATCH_SIZE=1e3,c.MIN_PRIORITY=2,c.SORT_DELAYING_BATCHES=["add","to-front","to-back"],c.UPDATE_DELAYING_BATCHES=["translate"]}(mo||(mo={}));var Z2=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class pg extends vo{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(e={}){let t=e.size||"auto auto",o=e.position||"center";const l=this.graph.transform.getScale(),d=this.graph.translate();if(typeof o=="object"){const f=d.tx+l.sx*(o.x||0),v=d.ty+l.sy*(o.y||0);o=`${f}px ${v}px`}typeof t=="object"&&(t=zn.fromSize(t).scale(l.sx,l.sy),t=`${t.width}px ${t.height}px`),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=o}drawBackgroundImage(e,t={}){if(!(e instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}const o=this.optionsCache;if(o&&o.image!==t.image)return;let l;const d=t.opacity,f=t.size;let v=t.repeat||"no-repeat";const x=Mv.registry.get(v);if(typeof x=="function"){const _=t.quality||1;e.width*=_,e.height*=_;const A=x(e,t);if(!(A instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");l=A.toDataURL("image/png"),t.repeat&&v!==t.repeat?v=t.repeat:v="repeat",typeof f=="object"?(f.width*=A.width/e.width,f.height*=A.height/e.height):f===void 0&&(t.size={width:A.width/_,height:A.height/_})}else l=e.src,f===void 0&&(t.size={width:e.width,height:e.height});o!=null&&typeof t.size=="object"&&t.image===o.image&&t.repeat===o.repeat&&t.quality===o.quality&&(o.size=Bp(t.size));const w=this.elem.style;w.backgroundImage=`url(${l})`,w.backgroundRepeat=v,w.opacity=d==null||d>=1?"":`${d}`,this.updateBackgroundImage(t)}updateBackgroundColor(e){this.elem.style.backgroundColor=e||""}updateBackgroundOptions(e){this.graph.options.background=e}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(e){const t=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(t.color),t.image){this.optionsCache=Bp(t);const o=document.createElement("img");o.onload=()=>this.drawBackgroundImage(o,e),o.setAttribute("crossorigin","anonymous"),o.src=t.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}Z2([vo.dispose()],pg.prototype,"dispose",null);var Y2=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d},K2=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class Qh extends Ki{constructor(e){super(),this.padding={left:0,top:0,right:0,bottom:0},this.options=Ec.getOptions(e);const t=this.graph.transform.getScale();this.sx=t.sx,this.sy=t.sy;const o=this.options.width||this.graph.options.width,l=this.options.height||this.graph.options.height;this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(Ec.containerClass)).css({width:o,height:l}),this.options.pageVisible&&this.$container.addClass(this.prefixClassName(Ec.pagedClass)),this.options.className&&this.$container.addClass(this.options.className);const d=this.graph.container;d.parentNode&&this.$container.insertBefore(d);const f=d.getAttribute("style");if(f){const v={};f.split(";").forEach(w=>{const _=w.trim();if(_){const A=_.split(":");A.length&&(v[A[0].trim()]=A[1]?A[1].trim():"")}}),Object.keys(v).forEach(w=>{w==="width"||w==="height"||(d.style[w]="",this.container.style[w]=v[w])})}this.content=document.createElement("div"),this.$content=this.$(this.content).addClass(this.prefixClassName(Ec.contentClass)).css({width:this.graph.options.width,height:this.graph.options.height}),this.background=document.createElement("div"),this.$background=this.$(this.background).addClass(this.prefixClassName(Ec.backgroundClass)),this.$content.append(this.background),this.options.pageVisible||this.$content.append(this.graph.view.grid),this.$content.append(d),this.$content.appendTo(this.container),this.startListening(),this.options.pageVisible||this.graph.grid.update(),this.backgroundManager=new Qh.Background(this),this.options.autoResize||this.update()}get graph(){return this.options.graph}get model(){return this.graph.model}startListening(){const e=this.graph,t=this.model;e.on("scale",this.onScale,this),e.on("resize",this.onResize,this),e.on("before:print",this.storeScrollPosition,this),e.on("before:export",this.storeScrollPosition,this),e.on("after:print",this.restoreScrollPosition,this),e.on("after:export",this.restoreScrollPosition,this),e.on("render:done",this.onRenderDone,this),e.on("unfreeze",this.onUpdate,this),t.on("reseted",this.onUpdate,this),t.on("cell:added",this.onUpdate,this),t.on("cell:removed",this.onUpdate,this),t.on("cell:changed",this.onUpdate,this),t.on("batch:stop",this.onBatchStop,this),this.delegateBackgroundEvents()}stopListening(){const e=this.graph,t=this.model;e.off("scale",this.onScale,this),e.off("resize",this.onResize,this),e.off("beforeprint",this.storeScrollPosition,this),e.off("beforeexport",this.storeScrollPosition,this),e.off("afterprint",this.restoreScrollPosition,this),e.off("afterexport",this.restoreScrollPosition,this),e.off("render:done",this.onRenderDone,this),e.off("unfreeze",this.onUpdate,this),t.off("reseted",this.onUpdate,this),t.off("cell:added",this.onUpdate,this),t.off("cell:removed",this.onUpdate,this),t.off("cell:changed",this.onUpdate,this),t.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()}enableAutoResize(){this.options.autoResize=!0}disableAutoResize(){this.options.autoResize=!1}onUpdate(){this.graph.isAsync()||!this.options.autoResize||this.update()}onBatchStop(e){this.graph.isAsync()||!this.options.autoResize||mo.UPDATE_DELAYING_BATCHES.includes(e.name)&&this.update()}delegateBackgroundEvents(e){const t=e||wu.events;this.delegatedHandlers=Object.keys(t).reduce((o,l)=>{const d=t[l];if(l.indexOf(" ")===-1)if(typeof d=="function")o[l]=d;else{let f=this.graph.view[d];typeof f=="function"&&(f=f.bind(this.graph.view),o[l]=f)}return o},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(o=>{this.delegateEvent(o,{guarded:!1},this.onBackgroundEvent)})}undelegateBackgroundEvents(){Object.keys(this.delegatedHandlers).forEach(e=>{this.undelegateEvent(e,this.onBackgroundEvent)})}onBackgroundEvent(e){let t=!1;const o=e.target;if(this.options.pageVisible)this.options.background?t=this.background===o:t=this.content===o;else{const l=this.graph.view;t=l.background===o||l.grid===o}if(t){const l=this.delegatedHandlers[e.type];typeof l=="function"&&l.apply(this.graph,arguments)}}onRenderDone({stats:e}){this.options.autoResize&&e.priority<2&&this.update()}onResize(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}onScale({sx:e,sy:t,ox:o,oy:l}){this.updateScale(e,t),(o||l)&&(this.centerPoint(o,l),this.updatePageBreak()),typeof(this.options.autoResizeOptions||this.options.fitTocontentOptions)=="function"&&this.update()}storeScrollPosition(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}restoreScrollPosition(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}storeClientSize(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}}restoreClientSize(){this.cachedClientSize=null}beforeManipulation(){(Le.IS_IE||Le.IS_EDGE)&&this.$container.css("visibility","hidden")}afterManipulation(){(Le.IS_IE||Le.IS_EDGE)&&this.$container.css("visibility","visible")}updatePageSize(e,t){e!=null&&(this.options.pageWidth=e),t!=null&&(this.options.pageHeight=t),this.updatePageBreak()}updatePageBreak(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){const e=this.graph.options.width,t=this.graph.options.height,o=this.options.pageWidth*this.sx,l=this.options.pageHeight*this.sy;if(o===0||l===0)return;if(e>o||t>l){let d=!1;const f=document.createElement("div");for(let v=1,x=Math.floor(e/o);v<x;v+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:v*o}).appendTo(f),d=!0;for(let v=1,x=Math.floor(t/l);v<x;v+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:v*l}).appendTo(f),d=!0;d&&(ao(f,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(f),this.pageBreak=f)}}}update(){const e=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(e.width/2,e.height/2);let t=this.options.autoResizeOptions||this.options.fitTocontentOptions;typeof t=="function"&&(t=ir(t,this,this));const o=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative",contentArea:this.calcContextArea(t)},t);this.graph.fitToContent(this.getFitToContentOptions(o))}calcContextArea(e){const t=e==null?void 0:e.direction;if(!t)return this.graph.transform.getContentArea(e);function o(v){let x=v.getBBox();if(x&&v.isNode()){const w=v.getAngle();w!=null&&w!==0&&(x=x.bbox(w))}return x}const l=this.options.pageWidth||1,d=this.options.pageHeight||1;let f=this.graph.getCells();return t.includes("top")||(f=f.filter(v=>o(v).y>=0)),t.includes("left")||(f=f.filter(v=>o(v).x>=0)),t.includes("right")||(f=f.filter(v=>{const x=o(v);return x.x+x.width<=l})),t.includes("bottom")||(f=f.filter(v=>{const x=o(v);return x.y+x.height<=d})),this.model.getCellsBBox(f)||new zn}getFitToContentOptions(e){const t=this.sx,o=this.sy;return e.gridWidth&&(e.gridWidth*=t),e.gridHeight&&(e.gridHeight*=o),e.minWidth&&(e.minWidth*=t),e.minHeight&&(e.minHeight*=o),typeof e.padding=="object"?e.padding={left:(e.padding.left||0)*t,right:(e.padding.right||0)*t,top:(e.padding.top||0)*o,bottom:(e.padding.bottom||0)*o}:typeof e.padding=="number"&&(e.padding*=t),this.options.autoResize||(e.contentArea=zn.create()),e}updateScale(e,t){const o=this.graph.options,l=e/this.sx,d=t/this.sy;this.sx=e,this.sy=t,this.graph.translate(o.x*l,o.y*d),this.graph.resizeGraph(o.width*l,o.height*d)}scrollbarPosition(e,t,o){if(e==null&&t==null)return{left:this.container.scrollLeft,top:this.container.scrollTop};const l={};return typeof e=="number"&&(l.scrollLeft=e),typeof t=="number"&&(l.scrollTop=t),o&&o.animation?this.$container.animate(l,o.animation):this.$container.prop(l),this}scrollToPoint(e,t,o){const l=this.getClientSize(),d=this.graph.matrix(),f={};return typeof e=="number"&&(f.scrollLeft=e-l.width/2+d.e+(this.padding.left||0)),typeof t=="number"&&(f.scrollTop=t-l.height/2+d.f+(this.padding.top||0)),o&&o.animation?this.$container.animate(f,o.animation):this.$container.prop(f),this}scrollToContent(e){const t=this.sx,o=this.sy,l=this.graph.getContentArea().getCenter();return this.scrollToPoint(l.x*t,l.y*o,e)}scrollToCell(e,t){const o=this.sx,l=this.sy,d=e.getBBox().getCenter();return this.scrollToPoint(d.x*o,d.y*l,t)}center(e){return this.centerPoint(e)}centerPoint(e,t,o){const l=this.graph.matrix(),d=l.a,f=l.d,v=-l.e,x=-l.f,w=v+this.graph.options.width,_=x+this.graph.options.height;let A;if(this.storeClientSize(),typeof e=="number"||typeof t=="number"){A=o;const nt=this.getVisibleArea().getCenter();typeof e=="number"?e*=d:e=nt.x,typeof t=="number"?t*=f:t=nt.y}else A=e,e=(v+w)/2,t=(x+_)/2;if(A&&A.padding)return this.positionPoint({x:e,y:t},"50%","50%",A);const P=this.getPadding(),V=this.getClientSize(),q=V.width/2,te=V.height/2,ge=q-P.left-e+v,_e=q-P.right+e-w,ke=te-P.top-t+x,Se=te-P.bottom+t-_;this.addPadding(Math.max(ge,0),Math.max(_e,0),Math.max(ke,0),Math.max(Se,0));const je=this.scrollToPoint(e,t,A||void 0);return this.restoreClientSize(),je}centerContent(e){return this.positionContent("center",e)}centerCell(e,t){return this.positionCell(e,"center",t)}positionContent(e,t){const o=this.graph.getContentArea(t);return this.positionRect(o,e,t)}positionCell(e,t,o){const l=e.getBBox();return this.positionRect(l,t,o)}positionRect(e,t,o){const l=zn.create(e);switch(t){case"center":return this.positionPoint(l.getCenter(),"50%","50%",o);case"top":return this.positionPoint(l.getTopCenter(),"50%",0,o);case"top-right":return this.positionPoint(l.getTopRight(),"100%",0,o);case"right":return this.positionPoint(l.getRightMiddle(),"100%","50%",o);case"bottom-right":return this.positionPoint(l.getBottomRight(),"100%","100%",o);case"bottom":return this.positionPoint(l.getBottomCenter(),"50%","100%",o);case"bottom-left":return this.positionPoint(l.getBottomLeft(),0,"100%",o);case"left":return this.positionPoint(l.getLeftMiddle(),0,"50%",o);case"top-left":return this.positionPoint(l.getTopLeft(),0,0,o);default:return this}}positionPoint(e,t,o,l={}){const{padding:d}=l,f=K2(l,["padding"]),v=Cc(d),x=zn.fromSize(this.getClientSize()),w=x.clone().moveAndExpand({x:v.left,y:v.top,width:-v.right-v.left,height:-v.top-v.bottom});t=rd(t,Math.max(0,w.width)),t<0&&(t=w.width+t),o=rd(o,Math.max(0,w.height)),o<0&&(o=w.height+o);const _=w.getTopLeft().translate(t,o),A=x.getCenter().diff(_),P=this.zoom(),V=A.scale(1/P,1/P),q=$e.create(e).translate(V);return this.centerPoint(q.x,q.y,f)}zoom(e,t){if(e==null)return this.sx;t=t||{};let o,l;const d=this.getClientSize(),f=this.clientToLocalPoint(d.width/2,d.height/2);let v=e,x=e;if(t.absolute||(v+=this.sx,x+=this.sy),t.scaleGrid&&(v=Math.round(v/t.scaleGrid)*t.scaleGrid,x=Math.round(x/t.scaleGrid)*t.scaleGrid),t.maxScale&&(v=Math.min(t.maxScale,v),x=Math.min(t.maxScale,x)),t.minScale&&(v=Math.max(t.minScale,v),x=Math.max(t.minScale,x)),v=this.graph.transform.clampScale(v),x=this.graph.transform.clampScale(x),t.center){const w=v/this.sx,_=x/this.sy;o=t.center.x-(t.center.x-f.x)/w,l=t.center.y-(t.center.y-f.y)/_}else o=f.x,l=f.y;return this.beforeManipulation(),this.graph.transform.scale(v,x),this.centerPoint(o,l),this.afterManipulation(),this}zoomToRect(e,t={}){const o=zn.create(e),l=this.graph;t.contentArea=o,t.viewportArea==null&&(t.viewportArea={x:l.options.x,y:l.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),l.transform.scaleContentToFitImpl(t,!1);const d=o.getCenter();return this.centerPoint(d.x,d.y),this.afterManipulation(),this}zoomToFit(e={}){return this.zoomToRect(this.graph.getContentArea(e),e)}transitionToPoint(e,t,o){typeof e=="object"?(o=t,t=e.y,e=e.x):t=t,o==null&&(o={});let l,d;const f=this.sx,v=Math.max(o.scale||f,1e-6),x=this.getClientSize(),w=new $e(e,t),_=this.clientToLocalPoint(x.width/2,x.height/2);if(f===v){const P=_.diff(w).scale(f,f).round();l=`translate(${P.x}px,${P.y}px)`}else{const P=v/(f-v)*w.distance(_),V=_.clone().move(w,P),q=this.localToBackgroundPoint(V).round();l=`scale(${v/f})`,d=`${q.x}px ${q.y}px`}const A=o.onTransitionEnd;return this.$container.addClass(Ec.transitionClassName),this.$content.off(Ec.transitionEventName).on(Ec.transitionEventName,P=>{this.syncTransition(v,{x:e,y:t}),typeof A=="function"&&ir(A,this,P.originalEvent)}).css({transform:l,transformOrigin:d,transition:"transform",transitionDuration:o.duration||"1s",transitionDelay:o.delay,transitionTimingFunction:o.timing}),this}syncTransition(e,t){return this.beforeManipulation(),this.graph.scale(e),this.removeTransition(),this.centerPoint(t.x,t.y),this.afterManipulation(),this}removeTransition(){return this.$container.removeClass(Ec.transitionClassName),this.$content.off(Ec.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}transitionToRect(e,t={}){const o=zn.create(e),l=t.maxScale||1/0,d=t.minScale||Number.MIN_VALUE,f=t.scaleGrid||null,v=t.visibility||1,x=t.center?$e.create(t.center):o.getCenter(),w=this.getClientSize(),_=w.width*v,A=w.height*v;let P=new zn(x.x-_/2,x.y-A/2,_,A).getMaxUniformScaleToFit(o,x);return P=Math.min(P,l),f&&(P=Math.floor(P/f)*f),P=Math.max(d,P),this.transitionToPoint(x,Object.assign({scale:P},t))}startPanning(e){const t=this.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.normalizeEvent(e),o=t.clientX-this.clientX,l=t.clientY-this.clientY;this.container.scrollTop-=l,this.container.scrollLeft-=o,this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("panning",{e:t})}stopPanning(e){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e})}clientToLocalPoint(e,t){let o=typeof e=="object"?e.x:e,l=typeof e=="object"?e.y:t;const d=this.graph.matrix();return o+=this.container.scrollLeft-this.padding.left-d.e,l+=this.container.scrollTop-this.padding.top-d.f,new $e(o/d.a,l/d.d)}localToBackgroundPoint(e,t){const o=typeof e=="object"?$e.create(e):new $e(e,t),l=this.graph.matrix(),d=this.padding;return il(o,l).translate(d.left,d.top)}resize(e,t){let o=e!=null?e:this.container.offsetWidth,l=t!=null?t:this.container.offsetHeight;typeof o=="number"&&(o=Math.round(o)),typeof l=="number"&&(l=Math.round(l)),this.options.width=o,this.options.height=l,this.$container.css({width:o,height:l}),this.update()}getClientSize(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}}autoScroll(e,t){const l=this.container,d=l.getBoundingClientRect();let f=0,v=0;return e<=d.left+10&&(f=-10),t<=d.top+10&&(v=-10),e>=d.right-10&&(f=10),t>=d.bottom-10&&(v=10),f!==0&&(l.scrollLeft+=f),v!==0&&(l.scrollTop+=v),{scrollerX:f,scrollerY:v}}addPadding(e,t,o,l){let d=this.getPadding();this.padding={left:Math.round(d.left+(e||0)),top:Math.round(d.top+(o||0)),bottom:Math.round(d.bottom+(l||0)),right:Math.round(d.right+(t||0))},d=this.padding,this.$content.css({width:d.left+this.graph.options.width+d.right,height:d.top+this.graph.options.height+d.bottom});const f=this.graph.container;return f.style.left=`${this.padding.left}px`,f.style.top=`${this.padding.top}px`,this}getPadding(){const e=this.options.padding;return Cc(typeof e=="function"?ir(e,this,this):e)}getVisibleArea(){const e=this.graph.matrix(),t=this.getClientSize(),o={x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:t.width,height:t.height},l=rc(o,e.inverse());return l.x-=(this.padding.left||0)/this.sx,l.y-=(this.padding.top||0)/this.sy,l}isCellVisible(e,t={}){const o=e.getBBox(),l=this.getVisibleArea();return t.strict?l.containsRect(o):l.isIntersectWithRect(o)}isPointVisible(e){return this.getVisibleArea().containsPoint(e)}lock(){return this.$container.css("overflow","hidden"),this}unlock(){return this.$container.css("overflow","scroll"),this}onRemove(){this.stopListening()}dispose(){this.$(this.graph.container).insertBefore(this.$container),this.remove()}}Y2([Ki.dispose()],Qh.prototype,"dispose",null),function(c){class e extends pg{constructor(o){super(o.graph),this.scroller=o,o.options.background&&this.draw(o.options.background)}get elem(){return this.scroller.background}init(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}updateBackgroundOptions(o){this.scroller.options.background=o}}c.Background=e}(Qh||(Qh={}));var Ec;(function(c){c.containerClass="graph-scroller",c.panningClass=`${c.containerClass}-panning`,c.pannableClass=`${c.containerClass}-pannable`,c.pagedClass=`${c.containerClass}-paged`,c.contentClass=`${c.containerClass}-content`,c.backgroundClass=`${c.containerClass}-background`,c.transitionClassName="transition-in-progress",c.transitionEventName="transitionend.graph-scroller-transition",c.defaultOptions={padding(){const t=this.getClientSize(),o=Math.max(this.options.minVisibleWidth||0,1)||1,l=Math.max(this.options.minVisibleHeight||0,1)||1,d=Math.max(t.width-o,0),f=Math.max(t.height-l,0);return{left:d,top:f,right:d,bottom:f}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0};function e(t){const o=Fo({},c.defaultOptions,t);return o.pageWidth==null&&(o.pageWidth=t.graph.options.width),o.pageHeight==null&&(o.pageHeight=t.graph.options.height),o}c.getOptions=e})(Ec||(Ec={}));function js(c,e,t,o={}){if(t){const l=t.graph,d=l.view.normalizeEvent(e),f=l.snapToGrid(d.clientX,d.clientY);t.notify(c,Object.assign({e:d,view:t,node:t.cell,cell:t.cell,x:f.x,y:f.y},o))}}var q2=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class O0 extends Ki{constructor(e){super(),this.options=Fo({},al.defaultOptions,e),this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new pw([],{comparator:al.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.initHandles(),this.startListening()}get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName(al.classNames.box)}get $boxes(){return this.$container.children(`.${this.boxClassName}`)}get handleOptions(){return this.options}startListening(){const e=this.graph,t=this.collection;this.delegateEvents({[`mousedown .${this.boxClassName}`]:"onSelectionBoxMouseDown",[`touchstart .${this.boxClassName}`]:"onSelectionBoxMouseDown"},!0),e.on("scale",this.onGraphTransformed,this),e.on("translate",this.onGraphTransformed,this),e.model.on("updated",this.onModelUpdated,this),t.on("added",this.onCellAdded,this),t.on("removed",this.onCellRemoved,this),t.on("reseted",this.onReseted,this),t.on("updated",this.onCollectionUpdated,this),t.on("node:change:position",this.onNodePositionChanged,this),t.on("cell:changed",this.onCellChanged,this)}stopListening(){const e=this.graph,t=this.collection;this.undelegateEvents(),e.off("scale",this.onGraphTransformed,this),e.off("translate",this.onGraphTransformed,this),e.model.off("updated",this.onModelUpdated,this),t.off("added",this.onCellAdded,this),t.off("removed",this.onCellRemoved,this),t.off("reseted",this.onReseted,this),t.off("updated",this.onCollectionUpdated,this),t.off("node:change:position",this.onNodePositionChanged,this),t.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes({async:!1})}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged({node:e,options:t}){const{showNodeSelectionBox:o,pointerEvents:l}=this.options,{ui:d,selection:f,translateBy:v,snapped:x}=t,w=(o!==!0||l==="none")&&!this.translating&&!f,_=d&&v&&e.id===v;if(w&&(_||x)){this.translating=!0;const A=e.position(),P=e.previous("position"),V=A.x-P.x,q=A.y-P.y;(V!==0||q!==0)&&this.translateSelectedNodes(V,q,e,t),this.translating=!1}}onModelUpdated({removed:e}){e&&e.length&&this.unselect(e)}isEmpty(){return this.length<=0}isSelected(e){return this.collection.has(e)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(e,t={}){t.dryrun=!0;const o=this.filter(Array.isArray(e)?e:[e]);return this.collection.add(o,t),this}unselect(e,t={}){return t.dryrun=!0,this.collection.remove(Array.isArray(e)?e:[e],t),this}reset(e,t={}){if(e){if(t.batch){const w=this.filter(Array.isArray(e)?e:[e]);return this.collection.reset(w,Object.assign(Object.assign({},t),{ui:!0})),this}const o=this.cells,l=this.filter(Array.isArray(e)?e:[e]),d={},f={};o.forEach(w=>d[w.id]=w),l.forEach(w=>f[w.id]=w);const v=[],x=[];return l.forEach(w=>{d[w.id]||v.push(w)}),o.forEach(w=>{f[w.id]||x.push(w)}),x.length&&this.unselect(x,Object.assign(Object.assign({},t),{ui:!0})),v.length&&this.select(v,Object.assign(Object.assign({},t),{ui:!0})),x.length===0&&v.length===0&&this.updateContainer(),this}return this.clean(t)}clean(e={}){return this.length&&(e.batch===!1?this.unselect(this.cells,e):this.collection.reset([],Object.assign(Object.assign({},e),{ui:!0}))),this}setFilter(e){this.options.filter=e}setContent(e){this.options.content=e}startSelecting(e){e=this.normalizeEvent(e),this.clean();let t,o;const l=this.graph.container;if(e.offsetX!=null&&e.offsetY!=null&&l.contains(e.target))t=e.offsetX,o=e.offsetY;else{const d=this.$(l).offset(),f=l.scrollLeft,v=l.scrollTop;t=e.clientX-d.left+window.pageXOffset+f,o=e.clientY-d.top+window.pageYOffset+v}this.$container.css({top:o,left:t,width:1,height:1}),this.setEventData(e,{action:"selecting",clientX:e.clientX,clientY:e.clientY,offsetX:t,offsetY:o,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(al.documentEvents,e.data)}filter(e){const t=this.options.filter;return Array.isArray(t)?e.filter(o=>!t.includes(o)&&!t.includes(o.shape)):typeof t=="function"?e.filter(o=>ir(t,this.graph,o)):e}stopSelecting(e){const t=this.graph,o=this.getEventData(e);switch(o.action){case"selecting":{let d=this.$container.width(),f=this.$container.height();const v=this.$container.offset(),x=t.pageToLocal(v.left,v.top),w=t.transform.getScale();d/=w.sx,f/=w.sy;const _=new zn(x.x,x.y,d,f),A=this.getCellViewsInArea(_).map(P=>P.cell);this.reset(A,{batch:!0}),this.hideRubberband();break}case"translating":{const d=t.snapToGrid(e.clientX,e.clientY);if(!this.options.following){const f=o;this.updateSelectedNodesPosition({dx:f.clientX-f.originX,dy:f.clientY-f.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",e,d.x,d.y);break}default:{this.clean();break}}}onMouseUp(e){this.getEventData(e).action&&(this.stopSelecting(e),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(e){this.options.following||e.stopPropagation();const t=this.normalizeEvent(e);this.options.movable&&this.startTranslating(t);const o=this.getCellViewFromElem(t.target);this.setEventData(t,{activeView:o});const l=this.graph.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mousedown",t,l.x,l.y),this.delegateDocumentEvents(al.documentEvents,t.data)}startTranslating(e){this.graph.model.startBatch("move-selection");const t=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{action:"translating",clientX:t.x,clientY:t.y,originX:t.x,originY:t.y})}getSelectionOffset(e,t){let o=e.x-t.clientX,l=e.y-t.clientY;const d=this.graph.hook.getRestrictArea();if(d){const f=this.collection.toArray(),v=Gi.getCellsBBox(f,{deep:!0})||zn.create(),x=d.x-v.x,w=d.y-v.y,_=d.x+d.width-(v.x+v.width),A=d.y+d.height-(v.y+v.height);if(o<x&&(o=x),l<w&&(l=w),_<o&&(o=_),A<l&&(l=A),!this.options.following){const P=e.x-t.originX,V=e.y-t.originY;o=P<=x||P>=_?0:o,l=V<=w||V>=A?0:l}}return{dx:o,dy:l}}updateSelectedNodesPosition(e){const{dx:t,dy:o}=e;if(t||o)if(this.translateSelectedNodes(t,o),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const l=this.graph.transform.getScale();this.$boxes.add(this.$selectionContainer).css({left:`+=${t*l.sx}`,top:`+=${o*l.sy}`})}}autoScrollGraph(e,t){const o=this.graph.scroller.widget;return o?o.autoScroll(e,t):{scrollerX:0,scrollerY:0}}adjustSelection(e){const t=this.normalizeEvent(e),o=this.getEventData(t);switch(o.action){case"selecting":{const d=o;d.moving!==!0&&(this.$container.appendTo(this.graph.container),this.showRubberband(),d.moving=!0);const{scrollerX:f,scrollerY:v}=this.autoScrollGraph(t.clientX,t.clientY);d.scrollerX+=f,d.scrollerY+=v;const x=t.clientX-d.clientX+d.scrollerX,w=t.clientY-d.clientY+d.scrollerY,_=parseInt(this.$container.css("left"),10),A=parseInt(this.$container.css("top"),10);this.$container.css({left:x<0?d.offsetX+x:_,top:w<0?d.offsetY+w:A,width:Math.abs(x),height:Math.abs(w)});break}case"translating":{const d=this.graph.snapToGrid(t.clientX,t.clientY),f=o,v=this.getSelectionOffset(d,f);this.options.following?this.updateSelectedNodesPosition(v):this.updateContainerPosition(v),v.dx&&(f.clientX=d.x),v.dy&&(f.clientY=d.y),this.notifyBoxEvent("box:mousemove",e,d.x,d.y);break}default:break}this.boxesUpdated=!1}translateSelectedNodes(e,t,o,l){const d={},f=[];if(o&&(d[o.id]=!0),this.collection.toArray().forEach(v=>{v.getDescendants({deep:!0}).forEach(x=>{d[x.id]=!0})}),l&&l.translateBy){const v=this.graph.getCellById(l.translateBy);v&&(d[v.id]=!0,v.getDescendants({deep:!0}).forEach(x=>{d[x.id]=!0}),f.push(v))}this.collection.toArray().forEach(v=>{if(!d[v.id]){const x=Object.assign(Object.assign({},l),{selection:this.cid,exclude:f});v.translate(e,t,x),this.graph.model.getConnectedEdges(v).forEach(w=>{d[w.id]||(w.translate(e,t,x),d[w.id]=!0)})}})}getCellViewsInArea(e){const t=this.graph,o={strict:this.options.strict};let l=[];return this.options.rubberNode&&(this.options.useCellGeometry?l=l.concat(t.model.getNodesInArea(e,o).map(d=>t.renderer.findViewByCell(d)).filter(d=>d!=null)):l=l.concat(t.renderer.findViewsInArea(e,o))),this.options.rubberEdge&&(this.options.useCellGeometry?l=l.concat(t.model.getEdgesInArea(e,o).map(d=>t.renderer.findViewByCell(d)).filter(d=>d!=null)):l=l.concat(t.renderer.findEdgeViewsInArea(e,o))),l}notifyBoxEvent(e,t,o,l){const f=this.getEventData(t).activeView;this.trigger(e,{e:t,view:f,x:o,y:l,cell:f.cell})}getSelectedClassName(e){return this.prefixClassName(`${e.isNode()?"node":"edge"}-selected`)}addCellSelectedClassName(e){const t=this.graph.renderer.findViewByCell(e);t&&t.addClass(this.getSelectedClassName(e))}removeCellUnSelectedClassName(e){const t=this.graph.renderer.findViewByCell(e);t&&t.removeClass(this.getSelectedClassName(e))}destroySelectionBox(e){this.removeCellUnSelectedClassName(e),this.canShowSelectionBox(e)&&(this.$container.find(`[data-cell-id="${e.id}"]`).remove(),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(e){e.forEach(t=>this.removeCellUnSelectedClassName(t)),this.hide(),this.$boxes.remove(),this.boxCount=0}hide(){this.$container.removeClass(this.prefixClassName(al.classNames.rubberband)).removeClass(this.prefixClassName(al.classNames.selected))}showRubberband(){this.$container.addClass(this.prefixClassName(al.classNames.rubberband))}hideRubberband(){this.$container.removeClass(this.prefixClassName(al.classNames.rubberband))}showSelected(){this.$container.removeAttr("style").addClass(this.prefixClassName(al.classNames.selected))}createContainer(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(al.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(al.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(al.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer}updateContainerPosition(e){(e.dx||e.dy)&&this.$selectionContainer.css({left:`+=${e.dx}`,top:`+=${e.dy}`})}updateContainer(){const e={x:1/0,y:1/0},t={x:0,y:0};this.collection.toArray().filter(d=>this.canShowSelectionBox(d)).forEach(d=>{const f=this.graph.renderer.findViewByCell(d);if(f){const v=f.getBBox({useCellGeometry:this.options.useCellGeometry});e.x=Math.min(e.x,v.x),e.y=Math.min(e.y,v.y),t.x=Math.max(t.x,v.x+v.width),t.y=Math.max(t.y,v.y+v.height)}}),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:e.x,top:e.y,width:t.x-e.x,height:t.y-e.y}).attr("data-selection-length",this.collection.length);const l=this.options.content;if(l)if(typeof l=="function"){const d=ir(l,this.graph,this,this.$selectionContent[0]);d&&this.$selectionContent.html(d)}else this.$selectionContent.html(l);this.collection.length>0&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(e){return e.isNode()&&this.options.showNodeSelectionBox===!0||e.isEdge()&&this.options.showEdgeSelectionBox===!0}createSelectionBox(e){if(this.addCellSelectedClassName(e),this.canShowSelectionBox(e)){const t=this.graph.renderer.findViewByCell(e);if(t){const o=t.getBBox({useCellGeometry:this.options.useCellGeometry}),l=this.boxClassName;this.$("<div/>").addClass(l).addClass(`${l}-${e.isNode()?"node":"edge"}`).attr("data-cell-id",e.id).css({position:"absolute",left:o.x,top:o.y,width:o.width,height:o.height,pointerEvents:this.options.pointerEvents||"auto"}).appendTo(this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(e={}){this.collection.length>0&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,e))}confirmUpdate(){return this.boxCount&&(this.hide(),this.$boxes.each((e,t)=>{const o=this.$(t).remove().attr("data-cell-id"),l=this.collection.get(o);l&&this.createSelectionBox(l)}),this.updateContainer()),0}getCellViewFromElem(e){const t=e.getAttribute("data-cell-id");if(t){const o=this.collection.get(t);if(o)return this.graph.renderer.findViewByCell(o)}return null}onCellRemoved({cell:e}){this.destroySelectionBox(e),this.updateContainer()}onReseted({previous:e,current:t}){this.destroyAllSelectionBoxes(e),t.forEach(o=>{this.listenCellRemoveEvent(o),this.createSelectionBox(o)}),this.updateContainer()}onCellAdded({cell:e}){this.listenCellRemoveEvent(e),this.createSelectionBox(e),this.updateContainer()}listenCellRemoveEvent(e){e.off("removed",this.onCellRemoved,this),e.on("removed",this.onCellRemoved,this)}onCollectionUpdated({added:e,removed:t,options:o}){e.forEach(d=>{this.trigger("cell:selected",{cell:d,options:o}),this.graph.trigger("cell:selected",{cell:d,options:o}),d.isNode()?(this.trigger("node:selected",{cell:d,options:o,node:d}),this.graph.trigger("node:selected",{cell:d,options:o,node:d})):d.isEdge()&&(this.trigger("edge:selected",{cell:d,options:o,edge:d}),this.graph.trigger("edge:selected",{cell:d,options:o,edge:d}))}),t.forEach(d=>{this.trigger("cell:unselected",{cell:d,options:o}),this.graph.trigger("cell:unselected",{cell:d,options:o}),d.isNode()?(this.trigger("node:unselected",{cell:d,options:o,node:d}),this.graph.trigger("node:unselected",{cell:d,options:o,node:d})):d.isEdge()&&(this.trigger("edge:unselected",{cell:d,options:o,edge:d}),this.graph.trigger("edge:unselected",{cell:d,options:o,edge:d}))});const l={added:e,removed:t,options:o,selected:this.cells.filter(d=>!!this.graph.getCellById(d.id))};this.trigger("selection:changed",l),this.graph.trigger("selection:changed",l)}deleteSelectedCells(){const e=this.collection.toArray();this.clean(),this.graph.model.removeCells(e,{selection:this.cid})}startRotate({e}){const t=this.collection.toArray(),o=Gi.getCellsBBox(t).getCenter(),l=this.graph.snapToGrid(e.clientX,e.clientY),d=t.reduce((f,v)=>(f[v.id]=Yi.normalize(v.getAngle()),f),{});this.setEventData(e,{center:o,angles:d,start:l.theta(o)})}doRotate({e}){const t=this.getEventData(e),o=this.graph.options.rotating.grid,l=typeof o=="function"?ir(o,this.graph,null):o,d=this.graph.snapToGrid(e.clientX,e.clientY),f=t.start-d.theta(t.center);t.rotated||(t.rotated=!0),Math.abs(f)>.001&&(this.collection.toArray().forEach(v=>{const x=va.snapToGrid(t.angles[v.id]+f,l||15);v.rotate(x,{absolute:!0,center:t.center,selection:this.cid})}),this.updateSelectionBoxes())}stopRotate({e}){const t=this.getEventData(e);t.rotated&&(t.rotated=!1,this.collection.toArray().forEach(o=>{js("node:rotated",e,this.graph.findViewByCell(o))}))}startResize({e}){const t=this.graph.getGridSize(),o=this.collection.toArray(),l=Gi.getCellsBBox(o),d=o.map(x=>x.getBBox()),f=d.reduce((x,w)=>w.width<x?w.width:x,1/0),v=d.reduce((x,w)=>w.height<x?w.height:x,1/0);this.setEventData(e,{bbox:l,cells:this.graph.model.getSubGraph(o),minWidth:t*l.width/f,minHeight:t*l.height/v})}doResize({e,dx:t,dy:o}){const l=this.eventData(e),d=l.bbox,f=d.width,v=d.height,x=Math.max(f+t,l.minWidth),w=Math.max(v+o,l.minHeight);l.resized||(l.resized=!0),(Math.abs(f-x)>.001||Math.abs(v-w)>.001)&&(this.graph.model.resizeCells(x,w,l.cells,{selection:this.cid}),d.width=x,d.height=w,this.updateSelectionBoxes())}stopResize({e}){const t=this.eventData(e);t.resized&&(t.resized=!1,this.collection.toArray().forEach(o=>{js("node:resized",e,this.graph.findViewByCell(o))}))}dispose(){this.clean(),this.remove()}}q2([Ki.dispose()],O0.prototype,"dispose",null),zp(O0,rp);var al;(function(c){const e="widget-selection";c.classNames={root:e,inner:`${e}-inner`,box:`${e}-box`,content:`${e}-content`,rubberband:`${e}-rubberband`,selected:`${e}-selected`},c.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},c.defaultOptions={movable:!0,following:!0,strict:!1,useCellGeometry:!1,content(o){return Hp('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:o.length})},handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]};function t(o){return o.getAncestors().length}c.depthComparator=t})(al||(al={}));class zv extends Fv{get node(){return this.cell}get containerClassName(){return this.prefixClassName("widget-transform")}get resizeClassName(){return`${this.containerClassName}-resize`}get rotateClassName(){return`${this.containerClassName}-rotate`}init(e){this.options=Object.assign(Object.assign({},ma.defaultOptions),e),this.render(),this.startListening()}startListening(){this.delegateEvents({[`mousedown .${this.resizeClassName}`]:"startResizing",[`touchstart .${this.resizeClassName}`]:"startResizing",[`mousedown .${this.rotateClassName}`]:"startRotating",[`touchstart .${this.rotateClassName}`]:"startRotating"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),super.startListening()}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),super.stopListening()}renderHandles(){this.container=document.createElement("div"),this.$container=this.$(this.container);const e=this.$("<div/>").prop("draggable",!1),t=e.clone().addClass(this.rotateClassName),o=ma.POSITIONS.map(l=>e.clone().addClass(this.resizeClassName).attr("data-position",l));this.empty(),this.$container.append(o,t)}render(){return this.renderHandles(),this.view.addClass(ma.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()}update(){const e=this.graph.matrix(),t=this.node.getBBox();t.x*=e.a,t.x+=e.e,t.y*=e.d,t.y+=e.f,t.width*=e.a,t.height*=e.d;const o=Yi.normalize(this.node.getAngle()),l=o!==0?`rotate(${o}deg)`:"";return this.$container.css({transform:l,width:t.width,height:t.height,left:t.x,top:t.y}),this.updateResizerDirections(),this}remove(){return this.view.removeClass(ma.NODE_CLS),super.remove()}onKnobMouseDown(){this.startHandle()}onKnobMouseUp(){this.stopHandle()}updateResizerDirections(){const e=Yi.normalize(this.node.getAngle()),t=Math.floor(e*(ma.DIRECTIONS.length/360));if(t!==this.prevShift){const o=ma.DIRECTIONS.slice(t).concat(ma.DIRECTIONS.slice(0,t)),l=d=>`${this.containerClassName}-cursor-${d}`;this.$container.find(`.${this.resizeClassName}`).removeClass(ma.DIRECTIONS.map(d=>l(d)).join(" ")).each((d,f)=>{this.$(f).addClass(l(o[d]))}),this.prevShift=t}}getTrueDirection(e){const t=Yi.normalize(this.node.getAngle());let o=ma.POSITIONS.indexOf(e);return o+=Math.floor(t*(ma.POSITIONS.length/360)),o%=ma.POSITIONS.length,ma.POSITIONS[o]}toValidResizeDirection(e){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[e]||e}startResizing(e){e.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});const t=this.$(e.target).attr("data-position"),o=this.graph.findViewByCell(this.node);this.prepareResizing(e,t),this.startAction(e),js("node:resize:mousedown",e,o)}prepareResizing(e,t){const o=this.getTrueDirection(t);let l=0,d=0;t.split("-").forEach(w=>{l={left:-1,right:1}[w]||l,d={top:-1,bottom:1}[w]||d});const f=this.toValidResizeDirection(t),v={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[f],x=Yi.normalize(this.node.getAngle());this.setEventData(e,{selector:v,direction:f,trueDirection:o,relativeDirection:t,angle:x,resizeX:l,resizeY:d,action:"resizing"})}startRotating(e){e.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});const t=this.graph.findViewByCell(this.node),o=this.node.getBBox().getCenter(),l=this.normalizeEvent(e),d=this.graph.snapToGrid(l.clientX,l.clientY);this.setEventData(e,{center:o,action:"rotating",angle:Yi.normalize(this.node.getAngle()),start:$e.create(d).theta(o)}),this.startAction(e),js("node:rotate:mousedown",e,t)}onMouseMove(e){const t=this.graph.findViewByCell(this.node);let o=this.getEventData(e);if(o.action){const l=this.normalizeEvent(e);let d=l.clientX,f=l.clientY;const v=this.graph.scroller.widget,x=this.options.restrictedResizing;if(x===!0||typeof x=="number"){const V=x===!0?0:x,q=v?Math.max(V,8):V,te=this.graph.container.getBoundingClientRect();d=ks(d,te.left+q,te.right-q),f=ks(f,te.top+q,te.bottom-q)}else this.options.autoScrollOnResizing&&v&&v.autoScroll(d,f);const w=this.graph.snapToGrid(d,f),_=this.graph.getGridSize(),A=this.node,P=this.options;if(o.action==="resizing"){o=o,o.resized||(t&&(t.addClass("node-resizing"),js("node:resize",e,t)),o.resized=!0);const V=A.getBBox(),q=$e.create(w).rotate(o.angle,V.getCenter()).diff(V[o.selector]);let te=o.resizeX?q.x*o.resizeX:V.width,ge=o.resizeY?q.y*o.resizeY:V.height;const _e=te,ke=ge;if(te=va.snapToGrid(te,_),ge=va.snapToGrid(ge,_),te=Math.max(te,P.minWidth||_),ge=Math.max(ge,P.minHeight||_),te=Math.min(te,P.maxWidth||1/0),ge=Math.min(ge,P.maxHeight||1/0),P.preserveAspectRatio){const je=V.width*ge/V.height,nt=V.height*te/V.width;te<je?ge=nt:te=je}const Se=o.relativeDirection;if(P.allowReverse&&(_e<=-te||ke<=-ge)){let je;Se==="left"?_e<=-te&&(je="right"):Se==="right"?_e<=-te&&(je="left"):Se==="top"?ke<=-ge&&(je="bottom"):Se==="bottom"?ke<=-ge&&(je="top"):Se==="top-left"?_e<=-te&&ke<=-ge?je="bottom-right":_e<=-te?je="top-right":ke<=-ge&&(je="bottom-left"):Se==="top-right"?_e<=-te&&ke<=-ge?je="bottom-left":_e<=-te?je="top-left":ke<=-ge&&(je="bottom-right"):Se==="bottom-left"?_e<=-te&&ke<=-ge?je="top-right":_e<=-te?je="bottom-right":ke<=-ge&&(je="top-left"):Se==="bottom-right"&&(_e<=-te&&ke<=-ge?je="top-left":_e<=-te?je="bottom-left":ke<=-ge&&(je="top-right"));const nt=je;this.stopHandle();const wt=this.$container.find(`.${this.resizeClassName}[data-position="${nt}"]`);this.startHandle(wt[0]),this.prepareResizing(e,nt),this.onMouseMove(e)}if(V.width!==te||V.height!==ge){const je={ui:!0,direction:o.direction,relativeDirection:o.relativeDirection,trueDirection:o.trueDirection,minWidth:P.minWidth,minHeight:P.minHeight,maxWidth:P.maxWidth,maxHeight:P.maxHeight,preserveAspectRatio:P.preserveAspectRatio===!0};A.resize(te,ge,je),js("node:resizing",e,t)}js("node:resize:mousemove",e,t)}else if(o.action==="rotating"){o=o,o.rotated||(t&&(t.addClass("node-rotating"),js("node:rotate",e,t)),o.rotated=!0);const V=A.getAngle(),q=o.start-$e.create(w).theta(o.center);let te=o.angle+q;P.rotateGrid&&(te=va.snapToGrid(te,P.rotateGrid)),te=Yi.normalize(te),V!==te&&(A.rotate(te,{absolute:!0}),js("node:rotating",e,t)),js("node:rotate:mousemove",e,t)}}}onMouseUp(e){const t=this.graph.findViewByCell(this.node),o=this.getEventData(e);o.action&&(this.stopAction(e),this.model.stopBatch(o.action==="resizing"?"resize":"rotate",{cid:this.cid}),o.action==="resizing"?js("node:resize:mouseup",e,t):o.action==="rotating"&&js("node:rotate:mouseup",e,t))}startHandle(e){if(this.handle=e||null,this.$container.addClass(`${this.containerClassName}-active`),e){this.$(e).addClass(`${this.containerClassName}-active-handle`);const t=e.getAttribute("data-position");if(t){const o=ma.DIRECTIONS[ma.POSITIONS.indexOf(t)];this.$container.addClass(`${this.containerClassName}-cursor-${o}`)}}}stopHandle(){if(this.$container.removeClass(`${this.containerClassName}-active`),this.handle){this.$(this.handle).removeClass(`${this.containerClassName}-active-handle`);const e=this.handle.getAttribute("data-position");if(e){const t=ma.DIRECTIONS[ma.POSITIONS.indexOf(e)];this.$container.removeClass(`${this.containerClassName}-cursor-${t}`)}this.handle=null}}startAction(e){this.startHandle(e.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(ma.documentEvents,e.data)}stopAction(e){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const t=this.graph.findViewByCell(this.node),o=this.getEventData(e);t&&(t.removeClass(`node-${o.action}`),o.action==="resizing"&&o.resized?js("node:resized",e,t):o.action==="rotating"&&o.rotated&&js("node:rotated",e,t))}}var ma;(function(c){c.NODE_CLS="has-widget-transform",c.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],c.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],c.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},c.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}})(ma||(ma={}));var J2=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t},th;(function(c){function e(t,o,l){const d={};return Object.keys(l||{}).forEach(f=>{const v=l[f];d[f]=typeof v=="function"?v.call(t,o):v}),d}c.parseOptionGroup=e})(th||(th={})),function(c){function e(t){const{grid:o,panning:l,selecting:d,embedding:f,snapline:v,resizing:x,rotating:w,knob:_,clipboard:A,history:P,scroller:V,minimap:q,keyboard:te,mousewheel:ge}=t,_e=J2(t,["grid","panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"]),ke=t.container;if(ke!=null)_e.width==null&&(_e.width=ke.clientWidth),_e.height==null&&(_e.height=ke.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");const Se=Fo({},c.defaults,_e),je={size:10,visible:!1};return typeof o=="number"?Se.grid={size:o,visible:!1}:typeof o=="boolean"?Se.grid=Object.assign(Object.assign({},je),{visible:o}):Se.grid=Object.assign(Object.assign({},je),o),["panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"].forEach(wt=>{const It=t[wt];typeof It=="boolean"?Se[wt].enabled=It:Se[wt]=Object.assign(Object.assign({},Se[wt]),It)}),Se.background&&Se.scroller.enabled&&Se.scroller.background==null&&(Se.scroller.background=Se.background,delete Se.background),Se}c.get=e}(th||(th={})),function(c){c.defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:va.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:va.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection({type:e,sourceView:t,targetView:o}){return(e==="target"?o:t)!=null},createEdge(){return new mw}},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1,allowReverse:!0},rotating:{enabled:!1,grid:15},translating:{restrict:!1},knob:{enabled:!1,clearAll:!0,clearOnBlankMouseDown:!0},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},selecting:{enabled:!1,rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1,eventTypes:["leftMouseDown"]},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:()=>!1}}(th||(th={}));var Uv=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class Vv extends vo{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(e){return this.svg.getElementById(e)!=null}filter(e){let t=e.id;const o=e.name;if(t||(t=`filter-${o}-${this.cid}-${uC(JSON.stringify(e))}`),!this.isDefined(t)){const l=v0.registry.get(o);if(l==null)return v0.registry.onNotFound(o);const d=l(e.args||{}),f=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});dr.create(Qi.sanitize(d),f).appendTo(this.defs)}return t}gradient(e){let t=e.id;const o=e.type;if(t||(t=`gradient-${o}-${this.cid}-${uC(JSON.stringify(e))}`),!this.isDefined(t)){const d=e.stops.map(x=>{const w=x.opacity!=null&&Number.isFinite(x.opacity)?x.opacity:1;return`<stop offset="${x.offset}" stop-color="${x.color}" stop-opacity="${w}"/>`}),f=`<${o}>${d.join("")}</${o}>`,v=Object.assign({id:t},e.attrs);dr.create(f,v).appendTo(this.defs)}return t}marker(e){const{id:t,refX:o,refY:l,markerUnits:d,markerOrient:f,tagName:v,children:x}=e,w=Uv(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let _=t;if(_||(_=`marker-${this.cid}-${uC(JSON.stringify(e))}`),!this.isDefined(_)){v!=="path"&&delete w.d;const A=dr.create("marker",{refX:o,refY:l,id:_,overflow:"visible",orient:f!=null?f:"auto",markerUnits:d||"userSpaceOnUse"},x?x.map(P=>{var{tagName:V}=P,q=Uv(P,["tagName"]);return dr.create(`${V}`||"path",uy(Object.assign(Object.assign({},w),q)))}):[dr.create(v||"path",uy(w))]);this.defs.appendChild(A.node)}return _}remove(e){const t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}var Q2=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d},e1=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class gg extends vo{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}getGridSize(){return this.grid.size}setGridSize(e){this.grid.size=Math.max(e,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}update(e={}){const t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();const o=this.graph.matrix(),l=this.getInstance(),d=Array.isArray(e)?e:[e];this.patterns.forEach((x,w)=>{const _=`pattern_${w}`,A=o.a||1,P=o.d||1,{update:V,markup:q}=x,te=e1(x,["update","markup"]),ge=Object.assign(Object.assign(Object.assign({},te),d[w]),{sx:A,sy:P,ox:o.e||0,oy:o.f||0,width:t*A,height:t*P});l.has(_)||l.add(_,dr.create("pattern",{id:_,patternUnits:"userSpaceOnUse"},dr.createVectors(q)).node);const _e=l.get(_);typeof V=="function"&&V(_e.childNodes[0],ge);let ke=ge.ox%ge.width;ke<0&&(ke+=ge.width);let Se=ge.oy%ge.height;Se<0&&(Se+=ge.height),go(_e,{x:ke,y:Se,width:ge.width,height:ge.height})});const f=new XMLSerializer().serializeToString(l.root),v=`url(data:image/svg+xml;base64,${btoa(f)})`;this.elem.style.backgroundImage=v}getInstance(){return this.instance||(this.instance=new Jf),this.instance}resolveGrid(e){if(!e)return[];const t=e.type;if(t==null)return[Object.assign(Object.assign({},Jf.presets.dot),e.args)];const o=Jf.registry.get(t);if(o){let l=e.args||[];return Array.isArray(l)||(l=[l]),Array.isArray(o)?o.map((d,f)=>Object.assign(Object.assign({},d),l[f])):[Object.assign(Object.assign({},o),l[0])]}return Jf.registry.onNotFound(t)}dispose(){this.stopListening(),this.clear()}}Q2([vo.dispose()],gg.prototype,"dispose",null);class zy extends vo{getClientMatrix(){return rl(this.view.stage.getScreenCTM())}getClientOffset(){const e=this.view.svg.getBoundingClientRect();return new $e(e.left,e.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(e,t){return(typeof e=="number"?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(e,t){const o=$e.create(e,t);return il(o,this.graph.matrix())}localToClientPoint(e,t){const o=$e.create(e,t);return il(o,this.getClientMatrix())}localToPagePoint(e,t){return(typeof e=="number"?this.localToGraphPoint(e,t):this.localToGraphPoint(e)).translate(this.getPageOffset())}localToGraphRect(e,t,o,l){const d=zn.create(e,t,o,l);return rc(d,this.graph.matrix())}localToClientRect(e,t,o,l){const d=zn.create(e,t,o,l);return rc(d,this.getClientMatrix())}localToPageRect(e,t,o,l){return(typeof e=="number"?this.localToGraphRect(e,t,o,l):this.localToGraphRect(e)).translate(this.getPageOffset())}graphToLocalPoint(e,t){const o=$e.create(e,t);return il(o,this.graph.matrix().inverse())}clientToLocalPoint(e,t){const o=$e.create(e,t);return il(o,this.getClientMatrix().inverse())}clientToGraphPoint(e,t){const o=$e.create(e,t);return il(o,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(e,t){const l=$e.create(e,t).diff(this.getPageOffset());return this.graphToLocalPoint(l)}graphToLocalRect(e,t,o,l){const d=zn.create(e,t,o,l);return rc(d,this.graph.matrix().inverse())}clientToLocalRect(e,t,o,l){const d=zn.create(e,t,o,l);return rc(d,this.getClientMatrix().inverse())}clientToGraphRect(e,t,o,l){const d=zn.create(e,t,o,l);return rc(d,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(e,t,o,l){const d=zn.create(e,t,o,l),f=this.getPageOffset();return d.x-=f.x,d.y-=f.y,this.graphToLocalRect(d)}}var Uy=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class jv extends vo{constructor(){super(...arguments),this.widget=this.graph.hook.createSnapline()}dispose(){this.widget.dispose()}}Uy([vo.dispose()],jv.prototype,"dispose",null);var nh;(function(c){function e(l){const d=[],f=[];return Array.isArray(l)?d.push(...l):l.split("|").forEach(v=>{v.indexOf("&")===-1?d.push(v):f.push(...v.split("&"))}),{or:d,and:f}}c.parse=e;function t(l,d){if(l!=null&&d!=null){const f=e(l),v=e(d),x=f.or.sort(),w=v.or.sort(),_=f.and.sort(),A=v.and.sort(),P=(V,q)=>V.length===q.length&&(V.length===0||V.every((te,ge)=>te===q[ge]));return P(x,w)&&P(_,A)}return l==null&&d==null}c.equals=t;function o(l,d,f){if(d==null||Array.isArray(d)&&d.length===0)return f?l.altKey!==!0&&l.ctrlKey!==!0&&l.metaKey!==!0&&l.shiftKey!==!0:!0;const{or:v,and:x}=e(d),w=_=>{const A=`${_.toLowerCase()}Key`;return l[A]===!0};return v.some(_=>w(_))&&x.every(_=>w(_))}c.isMatch=o})(nh||(nh={}));var t1=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class Hv extends vo{get widgetOptions(){return this.options.scroller}get pannable(){return this.widgetOptions?typeof this.widgetOptions.pannable=="object"?this.widgetOptions.pannable.enabled:!!this.widgetOptions.pannable:!1}init(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()}startListening(){let e=[];const t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.widget.container).on("mousedown",this.onRightMouseDown))}stopListening(){let e=[];const t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.widget.container).off("mousedown",this.onRightMouseDown)}onRightMouseDown(e){e.button===2&&this.allowPanning(e,!0)&&this.widget&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",()=>this.updateClassName(!1)))}preparePanning({e}){this.widget&&(this.allowPanning(e,!0)||this.allowPanning(e)&&!this.graph.selection.allowRubberband(e,!0))&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",()=>this.updateClassName(!1)))}allowPanning(e,t){return this.widget&&this.pannable&&nh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}updateClassName(e){if(this.widget==null)return;const t=this.widget.container,o=this.view.prefixClassName("graph-scroller-pannable");this.pannable?(ao(t,o),t.dataset.panning=(!!e).toString()):$c(t,o)}enablePanning(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())}lock(){this.widget&&this.widget.lock()}unlock(){this.widget&&this.widget.unlock()}update(){this.widget&&this.widget.update()}enableAutoResize(){this.widget&&this.widget.enableAutoResize()}disableAutoResize(){this.widget&&this.widget.disableAutoResize()}resize(e,t){this.widget&&this.widget.resize(e,t)}dispose(){this.widget&&this.widget.dispose(),this.stopListening()}}t1([vo.dispose()],Hv.prototype,"dispose",null);var n1=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d},r1=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class $v extends vo{get commonOptions(){const e=this.instanceOptions,{enabled:t}=e;return r1(e,["enabled"])}get instanceOptions(){return this.options.clipboard}get cells(){return this.widget.cells}get disabled(){return this.instanceOptions.enabled!==!0}init(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)}enable(){this.disabled&&(this.instanceOptions.enabled=!0)}disable(){this.disabled||(this.instanceOptions.enabled=!1)}copy(e,t={}){this.disabled||(this.widget.copy(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}cut(e,t={}){this.disabled||(this.widget.cut(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}paste(e={},t=this.graph){return this.disabled?[]:this.widget.paste(t,Object.assign(Object.assign({},this.commonOptions),e))}clean(e){(!this.disabled||e)&&(this.widget.clean(),this.graph.trigger("clipboard:changed",{cells:[]}))}isEmpty(){return this.widget.isEmpty()}dispose(){this.clean(!0)}}n1([vo.dispose()],$v.prototype,"dispose",null);var i1=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class P0 extends vo{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:e,magnet:t,options:o={}}){const l=this.resolveHighlighter(o);if(!l)return;const d=this.getHighlighterId(t,l);if(!this.highlights[d]){const f=l.highlighter;f.highlight(e,t,Object.assign({},l.args)),this.highlights[d]={cellView:e,magnet:t,highlighter:f,args:l.args}}}onCellUnhighlight({magnet:e,options:t={}}){const o=this.resolveHighlighter(t);if(!o)return;const l=this.getHighlighterId(e,o);this.unhighlight(l)}resolveHighlighter(e){const t=this.options;let o=e.highlighter;if(o==null){const v=e.type;o=v&&t.highlighting[v]||t.highlighting.default}if(o==null)return null;const l=typeof o=="string"?{name:o}:o,d=l.name,f=$h.registry.get(d);return f==null?$h.registry.onNotFound(d):($h.check(d,f),{name:d,highlighter:f,args:l.args||{}})}getHighlighterId(e,t){return _v(e),t.name+e.id+JSON.stringify(t.args)}unhighlight(e){const t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}dispose(){Object.keys(this.highlights).forEach(e=>this.unhighlight(e)),this.stopListening()}}i1([P0.dispose()],P0.prototype,"dispose",null);var o1=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class D0 extends vo{constructor(){super(...arguments),this.widgets=new Map}get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get isSelectionEnabled(){return this.options.selecting.enabled===!0}init(){this.startListening(),this.resize()}startListening(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}stopListening(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}onNodeMouseUp({node:e}){if(!this.isSelectionEnabled){const t=this.graph.hook.createTransform(e,{clearAll:!0});t&&this.widgets.set(e,t)}}onNodeSelected({node:e}){if(this.isSelectionEnabled){const t=this.graph.hook.createTransform(e,{clearAll:!1});t&&this.widgets.set(e,t)}}onNodeUnSelected({node:e}){if(this.isSelectionEnabled){const t=this.widgets.get(e);t&&t.dispose(),this.widgets.delete(e)}}getMatrix(){const e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),rl(this.viewportMatrix)}setMatrix(e){const t=rl(e),o=h0(t);this.viewport.setAttribute("transform",o),this.viewportMatrix=t,this.viewportTransformString=o}resize(e,t){let o=e===void 0?this.options.width:e,l=t===void 0?this.options.height:t;this.options.width=o,this.options.height=l,typeof o=="number"&&(o=Math.round(o)),typeof l=="number"&&(l=Math.round(l)),this.container.style.width=o==null?"":`${o}px`,this.container.style.height=l==null?"":`${l}px`;const d=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},d)),this}getComputedSize(){let e=this.options.width,t=this.options.height;return o2(e)||(e=this.container.clientWidth),o2(t)||(t=this.container.clientHeight),{width:e,height:t}}getScale(){return Av(this.getMatrix())}scale(e,t=e,o=0,l=0,d={}){if(e=this.clampScale(e),t=this.clampScale(t),o||l){const v=this.getTranslation(),x=v.tx-o*(e-1),w=v.ty-l*(t-1);(x!==v.tx||w!==v.ty)&&this.translate(x,w)}const f=this.getMatrix();return f.a=e,f.d=t,this.setMatrix(f),this.graph.trigger("scale",Object.assign({sx:e,sy:t,ox:o,oy:l},d)),this}clampScale(e){const t=this.graph.options.scaling;return ks(e,t.min||.01,t.max||16)}getZoom(){return this.getScale().sx}zoom(e,t){t=t||{};let o=e,l=e;const d=this.getScale(),f=this.getComputedSize();let v=f.width/2,x=f.height/2;if(t.absolute||(o+=d.sx,l+=d.sy),t.scaleGrid&&(o=Math.round(o/t.scaleGrid)*t.scaleGrid,l=Math.round(l/t.scaleGrid)*t.scaleGrid),t.maxScale&&(o=Math.min(t.maxScale,o),l=Math.min(t.maxScale,l)),t.minScale&&(o=Math.max(t.minScale,o),l=Math.max(t.minScale,l)),t.center&&(v=t.center.x,x=t.center.y),o=this.clampScale(o),l=this.clampScale(l),v||x){const w=this.getTranslation(),_=v-(v-w.tx)*(o/d.sx),A=x-(x-w.ty)*(l/d.sy);(_!==w.tx||A!==w.ty)&&this.translate(_,A,{ui:t.ui})}return this.scale(o,l,0,0,{ui:t.ui}),this}getRotation(){return TS(this.getMatrix())}rotate(e,t,o){if(t==null||o==null){const d=pa(this.graph.view.stage);t=d.width/2,o=d.height/2}const l=this.getMatrix().translate(t,o).rotate(e).translate(-t,-o);return this.setMatrix(l),this}getTranslation(){return _2(this.getMatrix())}translate(e,t,o={}){const l=this.getMatrix();l.e=e||0,l.f=t||0,this.setMatrix(l);const d=this.getTranslation();return this.options.x=d.tx,this.options.y=d.ty,this.graph.trigger("translate",Object.assign(Object.assign({},d),o)),this}setOrigin(e,t){return this.translate(e||0,t||0)}fitToContent(e,t,o,l){if(typeof e=="object"){const Se=e;e=Se.gridWidth||1,t=Se.gridHeight||1,o=Se.padding||0,l=Se}else e=e||1,t=t||1,o=o||0,l==null&&(l={});const d=Cc(o),f=l.border||0,v=l.contentArea?zn.create(l.contentArea):this.getContentArea(l);f>0&&v.inflate(f);const x=this.getScale(),w=this.getTranslation(),_=x.sx,A=x.sy;v.x*=_,v.y*=A,v.width*=_,v.height*=A;let P=Math.max(Math.ceil((v.width+v.x)/e),1)*e,V=Math.max(Math.ceil((v.height+v.y)/t),1)*t,q=0,te=0;(l.allowNewOrigin==="negative"&&v.x<0||l.allowNewOrigin==="positive"&&v.x>=0||l.allowNewOrigin==="any")&&(q=Math.ceil(-v.x/e)*e,q+=d.left,P+=q),(l.allowNewOrigin==="negative"&&v.y<0||l.allowNewOrigin==="positive"&&v.y>=0||l.allowNewOrigin==="any")&&(te=Math.ceil(-v.y/t)*t,te+=d.top,V+=te),P+=d.right,V+=d.bottom,P=Math.max(P,l.minWidth||0),V=Math.max(V,l.minHeight||0),P=Math.min(P,l.maxWidth||Number.MAX_SAFE_INTEGER),V=Math.min(V,l.maxHeight||Number.MAX_SAFE_INTEGER);const ge=this.getComputedSize(),_e=P!==ge.width||V!==ge.height;return(q!==w.tx||te!==w.ty)&&this.translate(q,te),_e&&this.resize(P,V),new zn(-q/_,-te/A,P/_,V/A)}scaleContentToFit(e={}){this.scaleContentToFitImpl(e)}scaleContentToFitImpl(e={},t=!0){let o,l;if(e.contentArea){const _e=e.contentArea;o=this.graph.localToGraph(_e),l=$e.create(_e)}else o=this.getContentBBox(e),l=this.graph.graphToLocal(o);if(!o.width||!o.height)return;const d=Cc(e.padding),f=e.minScale||0,v=e.maxScale||Number.MAX_SAFE_INTEGER,x=e.minScaleX||f,w=e.maxScaleX||v,_=e.minScaleY||f,A=e.maxScaleY||v;let P;if(e.viewportArea)P=e.viewportArea;else{const _e=this.getComputedSize(),ke=this.getTranslation();P={x:ke.tx,y:ke.ty,width:_e.width,height:_e.height}}P=zn.create(P).moveAndExpand({x:d.left,y:d.top,width:-d.left-d.right,height:-d.top-d.bottom});const V=this.getScale();let q=P.width/o.width*V.sx,te=P.height/o.height*V.sy;e.preserveAspectRatio!==!1&&(q=te=Math.min(q,te));const ge=e.scaleGrid;if(ge&&(q=ge*Math.floor(q/ge),te=ge*Math.floor(te/ge)),q=ks(q,x,w),te=ks(te,_,A),this.scale(q,te),t){const _e=this.options,ke=P.x-l.x*q-_e.x,Se=P.y-l.y*te-_e.y;this.translate(ke,Se)}}getContentArea(e={}){return e.useCellGeometry?this.model.getAllCellsBBox()||new zn:pa(this.graph.view.stage)}getContentBBox(e={}){return this.graph.localToGraph(this.getContentArea(e))}getGraphArea(){const e=zn.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}zoomToRect(e,t={}){const o=zn.create(e),l=this.graph;t.contentArea=o,t.viewportArea==null&&(t.viewportArea={x:l.options.x,y:l.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);const d=o.getCenter();return this.centerPoint(d.x,d.y),this}zoomToFit(e={}){return this.zoomToRect(this.getContentArea(e),e)}centerPoint(e,t){const o=this.getComputedSize(),l=this.getScale(),d=this.getTranslation(),f=o.width/2,v=o.height/2;e=typeof e=="number"?e:f,t=typeof t=="number"?t:v,e=f-e*l.sx,t=v-t*l.sy,(d.tx!==e||d.ty!==t)&&this.translate(e,t)}centerContent(e){const o=this.graph.getContentArea(e).getCenter();this.centerPoint(o.x,o.y)}centerCell(e){return this.positionCell(e,"center")}positionPoint(e,t,o){const l=this.getComputedSize();t=rd(t,Math.max(0,l.width)),t<0&&(t=l.width+t),o=rd(o,Math.max(0,l.height)),o<0&&(o=l.height+o);const d=this.getTranslation(),f=this.getScale(),v=t-e.x*f.sx,x=o-e.y*f.sy;(d.tx!==v||d.ty!==x)&&this.translate(v,x)}positionRect(e,t){const o=zn.create(e);switch(t){case"center":return this.positionPoint(o.getCenter(),"50%","50%");case"top":return this.positionPoint(o.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(o.getTopRight(),"100%",0);case"right":return this.positionPoint(o.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(o.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(o.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(o.getBottomLeft(),0,"100%");case"left":return this.positionPoint(o.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(o.getTopLeft(),0,0);default:return this}}positionCell(e,t){const o=e.getBBox();return this.positionRect(o,t)}positionContent(e,t){const o=this.graph.getContentArea(t);return this.positionRect(o,e)}dispose(){this.widgets.forEach(e=>e.dispose()),this.widgets.clear(),this.stopListening()}}o1([D0.dispose()],D0.prototype,"dispose",null);var s1=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class Wv extends vo{constructor(){super(...arguments),this.movedMap=new WeakMap,this.unselectMap=new WeakMap}get widgetOptions(){return this.options.selecting}get rubberbandDisabled(){return this.widgetOptions.enabled!==!0||this.widgetOptions.rubberband!==!0}get disabled(){return this.widgetOptions.enabled!==!0}get length(){return this.widget.length}get cells(){return this.widget.cells}init(){this.widget=this.graph.hook.createSelection(),this.startListening()}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown({e}){(this.allowRubberband(e,!0)||this.allowRubberband(e)&&!this.graph.scroller.allowPanning(e,!0)&&!this.graph.panning.allowPanning(e,!0))&&this.startRubberband(e)}onBlankClick(){this.clean()}allowRubberband(e,t){return!this.rubberbandDisabled&&nh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowRubberband(e)}allowMultipleSelection(e){return this.isMultiple()&&nh.isMatch(e,this.widgetOptions.multipleSelectionModifiers)}onCellMouseMove({cell:e}){this.movedMap.set(e,!0)}onCellMouseUp({e,cell:t}){const o=this.widgetOptions;let l=this.disabled;!l&&this.movedMap.has(t)&&(l=o.selectCellOnMoved===!1,l||(l=o.selectNodeOnMoved===!1&&t.isNode()),l||(l=o.selectEdgeOnMoved===!1&&t.isEdge())),l||(this.allowMultipleSelection(e)?this.unselectMap.has(t)?this.unselectMap.delete(t):this.isSelected(t)?this.unselect(t):this.select(t):this.reset(t)),this.movedMap.delete(t)}onBoxMouseDown({e,cell:t}){this.disabled||this.allowMultipleSelection(e)&&(this.unselect(t),this.unselectMap.set(t,!0))}isEmpty(){return this.length<=0}isSelected(e){return this.widget.isSelected(e)}getCells(e){return(Array.isArray(e)?e:[e]).map(t=>typeof t=="string"?this.graph.getCellById(t):t).filter(t=>t!=null)}select(e,t={}){const o=this.getCells(e);return o.length&&(this.isMultiple()?this.widget.select(o,t):this.reset(o.slice(0,1),t)),this}unselect(e,t={}){return this.widget.unselect(this.getCells(e),t),this}reset(e,t={}){return this.widget.reset(e?this.getCells(e):[],t),this}clean(e={}){return this.widget.clean(e),this}enable(){return this.disabled&&(this.widgetOptions.enabled=!0),this}disable(){return this.disabled||(this.widgetOptions.enabled=!1),this}startRubberband(e){return this.rubberbandDisabled||this.widget.startSelecting(e),this}enableRubberband(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this}isMultiple(){return this.widgetOptions.multiple!==!1}enableMultiple(){return this.widgetOptions.multiple=!0,this}disableMultiple(){return this.widgetOptions.multiple=!1,this}setModifiers(e){return this.widgetOptions.modifiers=e,this}setContent(e){return this.widget.setContent(e),this}setFilter(e){return this.widget.setFilter(e),this}dispose(){this.stopListening(),this.widget.dispose()}}s1([vo.dispose()],Wv.prototype,"dispose",null);var Xv=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d},a1=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t};class rh extends Gl{constructor(e){super(),this.batchCommands=null,this.batchLevel=0,this.lastBatchIndex=-1,this.freezed=!1,this.handlers=[],this.graph=e.graph,this.model=e.graph.model,this.options=ea.getOptions(e),this.validator=new rh.Validator({history:this,cancelInvalid:this.options.cancelInvalid}),this.clean(),this.startListening()}get disabled(){return this.options.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}undo(e={}){if(!this.disabled){const t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack.push(t),this.notify("undo",t,e))}return this}redo(e={}){if(!this.disabled){const t=this.redoStack.pop();t&&(this.applyCommand(t,e),this.undoStack.push(t),this.notify("redo",t,e))}return this}cancel(e={}){if(!this.disabled){const t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack=[],this.notify("cancel",t,e))}return this}clean(e={}){return this.undoStack=[],this.redoStack=[],this.notify("clean",null,e),this}canUndo(){return!this.disabled&&this.undoStack.length>0}canRedo(){return!this.disabled&&this.redoStack.length>0}validate(e,...t){return this.validator.validate(e,...t),this}dispose(){this.validator.dispose(),this.clean(),this.stopListening()}startListening(){this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach((e,t)=>{this.handlers[t]=this.addCommand.bind(this,e),this.model.on(e,this.handlers[t])}),this.validator.on("invalid",e=>this.trigger("invalid",e))}stopListening(){this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach((e,t)=>{this.model.off(e,this.handlers[t])}),this.handlers.length=0),this.validator.off("invalid")}createCommand(e){return{batch:e?e.batch:!1,data:{}}}revertCommand(e,t){this.freezed=!0;const o=Array.isArray(e)?ea.sortBatchCommands(e):[e];for(let l=o.length-1;l>=0;l-=1){const d=o[l],f=Object.assign(Object.assign({},t),Dt(d.options,this.options.revertOptionsList||[]));this.executeCommand(d,!0,f)}this.freezed=!1}applyCommand(e,t){this.freezed=!0;const o=Array.isArray(e)?ea.sortBatchCommands(e):[e];for(let l=0;l<o.length;l+=1){const d=o[l],f=Object.assign(Object.assign({},t),Dt(d.options,this.options.applyOptionsList||[]));this.executeCommand(d,!1,f)}this.freezed=!1}executeCommand(e,t,o){const l=this.model,d=l.getCell(e.data.id),f=e.event;if(ea.isAddEvent(f)&&t||ea.isRemoveEvent(f)&&!t)d&&d.remove(o);else if(ea.isAddEvent(f)&&!t||ea.isRemoveEvent(f)&&t){const v=e.data;v.node?l.addNode(v.props,o):v.edge&&l.addEdge(v.props,o)}else if(ea.isChangeEvent(f)){const v=e.data,x=v.key;if(x&&d){const w=t?v.prev[x]:v.next[x];d.prop(x,w,o)}}else{const v=this.options.executeCommand;v&&ir(v,this,e,t,o)}}addCommand(e,t){if(this.freezed||this.disabled)return;const o=t,l=o.options||{};if(l.dryrun||ea.isAddEvent(e)&&this.options.ignoreAdd||ea.isRemoveEvent(e)&&this.options.ignoreRemove||ea.isChangeEvent(e)&&this.options.ignoreChange)return;const d=this.options.beforeAddCommand;if(d!=null&&ir(d,this,e,t)===!1)return;e==="cell:change:*"&&(e=`cell:change:${o.key}`);const f=o.cell,v=wl.isModel(f);let x;if(this.batchCommands){x=this.batchCommands[Math.max(this.lastBatchIndex,0)];const _=v&&!x.modelChange||x.data.id!==f.id,A=x.event!==e;if(this.lastBatchIndex>=0&&(_||A)){const P=this.batchCommands.findIndex(V=>(v&&V.modelChange||V.data.id===f.id)&&V.event===e);P<0||ea.isAddEvent(e)||ea.isRemoveEvent(e)?x=this.createCommand({batch:!0}):(x=this.batchCommands[P],this.batchCommands.splice(P,1)),this.batchCommands.push(x),this.lastBatchIndex=this.batchCommands.length-1}}else x=this.createCommand({batch:!1});if(ea.isAddEvent(e)||ea.isRemoveEvent(e)){const _=x.data;return x.event=e,x.options=l,_.id=f.id,_.props=Tr(f.toJSON()),f.isEdge()?_.edge=!0:f.isNode()&&(_.node=!0),this.push(x,l)}if(ea.isChangeEvent(e)){const _=t.key,A=x.data;return(!x.batch||!x.event)&&(x.event=e,x.options=l,A.key=_,A.prev==null&&(A.prev={}),A.prev[_]=Bp(f.previous(_)),v?x.modelChange=!0:A.id=f.id),A.next==null&&(A.next={}),A.next[_]=Bp(f.prop(_)),this.push(x,l)}const w=this.options.afterAddCommand;w&&ir(w,this,e,t,x),this.push(x,l)}initBatchCommand(e){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}storeBatchCommand(e){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){const t=this.filterBatchCommand(this.batchCommands);t.length>0&&(this.redoStack=[],this.undoStack.push(t),this.consolidateCommands(),this.notify("add",t,e)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}filterBatchCommand(e){let t=e.slice();const o=[];for(;t.length>0;){const l=t.shift(),d=l.event,f=l.data.id;if(d!=null&&(f!=null||l.modelChange)){if(ea.isAddEvent(d)){const v=t.findIndex(x=>ea.isRemoveEvent(x.event)&&x.data.id===f);if(v>=0){t=t.filter((x,w)=>v<w||x.data.id!==f);continue}}else if(ea.isRemoveEvent(d)){const v=t.findIndex(x=>ea.isAddEvent(x.event)&&x.data.id===f);if(v>=0){t.splice(v,1);continue}}else if(ea.isChangeEvent(d)){const v=l.data;if(Uc(v.prev,v.next))continue}o.push(l)}}return o}notify(e,t,o){const l=t==null?null:Array.isArray(t)?t:[t];this.emit(e,{cmds:l,options:o}),this.emit("change",{cmds:l,options:o})}push(e,t){this.redoStack=[],e.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:e,options:t})):(this.undoStack.push(e),this.consolidateCommands(),this.notify("add",e,t))}consolidateCommands(){var e;const t=this.undoStack[this.undoStack.length-1],o=this.undoStack[this.undoStack.length-2];if(!Array.isArray(t))return;const l=new Set(t.map(f=>f.event));if(l.size!==2||!l.has("cell:change:parent")||!l.has("cell:change:children")||!t.every(f=>{var v;return f.batch&&((v=f.options)===null||v===void 0?void 0:v.ui)})||!Array.isArray(o)||o.length!==1)return;const d=o[0];d.event!=="cell:change:position"||!(!((e=d.options)===null||e===void 0)&&e.ui)||(o.push(...t),this.undoStack.pop())}}Xv([Gl.dispose()],rh.prototype,"dispose",null),function(c){class e extends Gl{constructor(o){super(),this.map={},this.command=o.history,this.cancelInvalid=o.cancelInvalid!==!1,this.command.on("add",this.onCommandAdded,this)}onCommandAdded({cmds:o}){return Array.isArray(o)?o.every(l=>this.isValidCommand(l)):this.isValidCommand(o)}isValidCommand(o){if(o.options&&o.options.validation===!1)return!0;const l=o.event&&this.map[o.event]||[];let d=null;return l.forEach(f=>{let v=0;const x=w=>{const _=f[v];v+=1;try{if(_)_(w,o,x);else{d=w;return}}catch(A){x(A)}};x(d)}),d?(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:d}),!1):!0}validate(o,...l){const d=Array.isArray(o)?o:o.split(/\s+/);return l.forEach(f=>{if(typeof f!="function")throw new Error(`${d.join(" ")} requires callback functions.`)}),d.forEach(f=>{this.map[f]==null&&(this.map[f]=[]),this.map[f].push(l)}),this}dispose(){this.command.off("add",this.onCommandAdded,this)}}Xv([Gl.dispose()],e.prototype,"dispose",null),c.Validator=e}(rh||(rh={}));var ea;(function(c){function e(f){return f==="cell:added"}c.isAddEvent=e;function t(f){return f==="cell:removed"}c.isRemoveEvent=t;function o(f){return f!=null&&f.startsWith("cell:change:")}c.isChangeEvent=o;function l(f){const{graph:v}=f,x=a1(f,["graph"]),w=["cell:added","cell:removed","cell:change:*"],_=["batch:start","batch:stop"],A=f.eventNames?f.eventNames.filter(P=>!(c.isChangeEvent(P)||w.includes(P)||_.includes(P))):w;return Object.assign(Object.assign({},x),{eventNames:A,applyOptionsList:f.applyOptionsList||["propertyPath"],revertOptionsList:f.revertOptionsList||["propertyPath"]})}c.getOptions=l;function d(f){const v=[];for(let x=0,w=f.length;x<w;x+=1){const _=f[x];let A=null;if(c.isAddEvent(_.event)){const P=_.data.id;for(let V=0;V<x;V+=1)if(f[V].data.id===P){A=V;break}}A!==null?v.splice(A,0,_):v.push(_)}return v}c.sortBatchCommands=d})(ea||(ea={}));var O3=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class N0 extends vo{get widgetOptions(){return this.options.minimap}init(){this.widget=this.graph.hook.createMiniMap()}dispose(){this.widget&&this.widget.dispose()}}O3([vo.dispose()],N0.prototype,"dispose",null);var Vy=M(42441),ih=M.n(Vy),jy=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class I0 extends Kd{constructor(e){super(),this.options=e;const t=this.graph.scroller.widget;this.container=t?t.container:this.graph.container,e.global?this.target=document:(this.target=this.container,this.disabled||this.target.setAttribute("tabindex","-1"),this.graph.on("cell:mouseup",this.focus,this),this.graph.on("blank:mouseup",this.focus,this)),this.mousetrap=I0.createMousetrap(this)}get graph(){return this.options.graph}get disabled(){return this.options.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}on(e,t,o){this.mousetrap.bind(this.getKeys(e),t,o)}off(e,t){this.mousetrap.unbind(this.getKeys(e),t)}focus(e){if(this.isInputEvent(e.e))return;this.target.focus({preventScroll:!0})}getKeys(e){return(Array.isArray(e)?e:[e]).map(t=>this.formatkey(t))}formatkey(e){const t=e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),o=this.options.format;return o?ir(o,this.graph,t):t}isGraphEvent(e){const t=e.srcElement||e.target,o=e.currentTarget;return t?t===this.target||o===this.target||t===document.body?!0:ly(this.container,t):!1}isInputEvent(e){var t;const o=e.target,l=(t=o==null?void 0:o.tagName)===null||t===void 0?void 0:t.toLowerCase();return["input","textarea"].includes(l)}isEnabledForEvent(e){const t=!this.disabled&&this.isGraphEvent(e),o=this.isInputEvent(e);if(t){const l=e.keyCode||e.which;if(o&&(l===8||l===46))return!1;if(this.options.guard)return ir(this.options.guard,this.graph,e)}return t}dispose(){this.mousetrap.reset()}}jy([Kd.dispose()],I0.prototype,"dispose",null),function(c){function e(t){const o=new(ih())(t.target),l=o.stopCallback;return o.stopCallback=(d,f,v)=>t.isEnabledForEvent(d)?l?l.call(o,d,f,v):!1:!0,o}c.createMousetrap=e}(I0||(I0={}));var AA=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class vg extends Kd{constructor(e){super(),this.options=e,this.cumulatedFactor=1;const t=this.graph.scroller.widget;this.container=t?t.container:this.graph.container,this.target=this.options.global?document:this.container,this.mousewheelHandle=new Wn(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.options.enabled&&this.enable(!0)}get graph(){return this.options.graph}get disabled(){return this.options.enabled!==!0}enable(e){(this.disabled||e)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(e){const t=e.originalEvent||e,o=this.options.guard;return(o==null||o.call(this.graph,t))&&nh.isMatch(t,this.options.modifiers)}onMouseWheel(e){const t=e.originalEvent||e,o=this.options.guard;if((o==null||o.call(this.graph,t))&&nh.isMatch(t,this.options.modifiers)){const l=this.options.factor||1.2;this.currentScale==null&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx),e.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*l*20)/20/this.currentScale:this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*(1/l)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const f=this.graph.scroller.widget,v=this.currentScale;let x=this.graph.transform.clampScale(v*this.cumulatedFactor);const w=this.options.minScale||Number.MIN_SAFE_INTEGER,_=this.options.maxScale||Number.MAX_SAFE_INTEGER;if(x=ks(x,w,_),x!==v)if(f)if(this.options.zoomAtMousePosition){const A=this.graph.coord.clientToLocalPoint(this.startPos);f.zoom(x,{absolute:!0,center:A.clone()})}else f.zoom(x,{absolute:!0});else if(this.options.zoomAtMousePosition){const A=this.graph.coord.clientToGraphPoint(this.startPos);this.graph.transform.zoom(x,{absolute:!0,center:A.clone(),ui:!0})}else this.graph.transform.zoom(x,{absolute:!0,ui:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}AA([Kd.dispose()],vg.prototype,"dispose",null);var Hy=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class ef extends vo{show(e={}){const t=Object.assign(Object.assign({},ef.defaultOptions),e),o=this.createPrintPages(t);t.ready(o,l=>this.showPrintWindow(l,t),{sheetSize:this.getSheetSize(t)})}get className(){return this.view.prefixClassName("graph-print")}showPrintWindow(e,t){if(e){const o=G()(document.body),l=G()(this.view.container),d=this.view.prefixClassName("graph-printing");o.addClass(d);const f=l.children().detach();e.forEach(w=>{w.removeClass(`${this.className}-preview`).addClass(`${this.className}-ready`).appendTo(o)});let v=!1;const x=()=>{v||(v=!0,o.removeClass(d),e.forEach(w=>w.remove()),l.append(f),G()(`#${this.styleSheetId}`).remove(),this.graph.trigger("after:print",t),G()(window).off("afterprint",x))};G()(window).one("afterprint",x),setTimeout(x,200),window.print()}}createPrintPage(e,t){this.graph.trigger("before:print",t);const o=G()("<div/>").addClass(this.className),l=G()("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");t.size&&o.addClass(`${this.className}-size-${t.size}`);const d=dr.create(this.view.svg).clone(),f=d.findOne(`.${this.view.prefixClassName("graph-svg-stage")}`);l.append(d.node);const v=this.getSheetSize(t),x=this.graph.transform.getGraphArea(),w=this.graph.transform.getScale(),_=this.graph.translate(),A=rl().translate(_.tx/w.sx,_.ty/w.sy),P=this.getPageInfo(x,e,v),V=P.scale,q=P.bbox;return l.css({left:0,top:0}),d.attr({width:q.width*V,height:q.height*V,style:"position:relative",viewBox:[q.x,q.y,q.width,q.height].join(" ")}),f.attr("transform",h0(A)),o.append(l),o.addClass(`${this.className}-preview`),{$page:o,sheetSize:v}}createPrintPages(e){let t;const o=this.getPrintArea(e),l=[];if(e.page){const d=this.getPageSize(o,e.page);this.getPageAreas(o,d).forEach(v=>{t=this.createPrintPage(v,e),l.push(t.$page)})}else t=this.createPrintPage(o,e),l.push(t.$page);if(t){const d={width:t.sheetSize.cssWidth,height:t.sheetSize.cssHeight};this.updatePrintStyle(d,e)}return l}get styleSheetId(){return this.view.prefixClassName("graph-print-style")}updatePrintStyle(e,t){const o=Object.keys(e).reduce((_,A)=>`${_} ${A}:${e[A]};`,""),l=Cc(t.margin),d=t.marginUnit||"",f=t.sheetUnit||"",v=`
      @media print {
        .${this.className}.${this.className}-ready {
          ${o}
        }

        @page {
          margin:
          ${[l.top+d,l.right+d,l.bottom+d,l.left+d].join(" ")};
          size: ${t.sheet.width+f} ${t.sheet.height+f};

        .${this.className}.${this.className}-preview {
          ${o}
        }
      }`,x=this.styleSheetId,w=G()(`#${x}`);w.length?w.html(v):G()("head").append(`'<style type="text/css" id="${x}">${v}</style>'`)}getPrintArea(e){let t=e.area;if(!t){const o=Cc(e.padding);t=this.graph.getContentArea().moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom})}return t}getPageSize(e,t){if(typeof t=="object"){const o=t,l={width:o.width,height:o.height};return l.width==null&&(l.width=Math.ceil(e.width/(o.columns||1))),l.height==null&&(l.height=Math.ceil(e.height/(o.rows||1))),l}return{width:e.width,height:e.height}}getPageAreas(e,t){const o=[],l=t.width,d=t.height;for(let f=0,v=0;f<e.height&&v<200;f+=d,v+=1)for(let x=0,w=0;x<e.width&&w<200;x+=l,w+=1)o.push(new zn(e.x+x,e.y+f,l,d));return o}getSheetSize(e){const t=e.sheet,o=Cc(e.margin),l=e.marginUnit||"",d=e.sheetUnit||"",f=`calc(${t.width}${d} - ${o.left+o.right}${l})`,v=`calc(${t.height}${d} - ${o.top+o.bottom}${l})`,x=gS.measure(f,v);return{cssWidth:f,cssHeight:v,width:x.width,height:x.height}}getPageInfo(e,t,o){const l=new zn(t.x-e.x,t.y-e.y,t.width,t.height),d=l.width/l.height,f=o.width/o.height;return{bbox:l,scale:f<d?o.width/l.width:o.height/l.height,fitHorizontal:f<d}}dispose(){}}Hy([vo.dispose()],ef.prototype,"dispose",null),function(c){c.defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:(e,t)=>t(e)}}(ef||(ef={}));class Zv extends vo{toSVG(e,t={}){this.graph.trigger("before:export",t);const o=this.view.svg,l=dr.create(o).clone();let d=l.node;const f=l.findOne(`.${this.view.prefixClassName("graph-svg-stage")}`),v=t.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),x=t.preserveDimensions;if(x){const A=typeof x=="boolean"?v:x;l.attr({width:A.width,height:A.height})}if(l.removeAttribute("style").attr("viewBox",[v.x,v.y,v.width,v.height].join(" ")),f.removeAttribute("transform"),t.copyStyles!==!1){const A=o.ownerDocument,P=Array.from(o.querySelectorAll("*")),V=Array.from(d.querySelectorAll("*")),q=A.styleSheets.length,te=[];for(let ke=q-1;ke>=0;ke-=1)te[ke]=A.styleSheets[ke],A.styleSheets[ke].disabled=!0;const ge={};P.forEach((ke,Se)=>{const je=window.getComputedStyle(ke,null),nt={};Object.keys(je).forEach(wt=>{nt[wt]=je.getPropertyValue(wt)}),ge[Se]=nt}),q!==A.styleSheets.length&&te.forEach((ke,Se)=>{A.styleSheets[Se]=ke});for(let ke=0;ke<q;ke+=1)A.styleSheets[ke].disabled=!1;const _e={};P.forEach((ke,Se)=>{const je=window.getComputedStyle(ke,null),nt=ge[Se],wt={};Object.keys(je).forEach(It=>{!wv(It)&&je.getPropertyValue(It)!==nt[It]&&(wt[It]=je.getPropertyValue(It))}),_e[Se]=wt}),V.forEach((ke,Se)=>{G()(ke).css(_e[Se])})}const w=t.stylesheet;if(typeof w=="string"){const A=o.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(w);l.prepend(dr.create("style",{type:"text/css"},[A]))}const _=()=>{const A=t.beforeSerialize;if(typeof A=="function"){const V=ir(A,this.graph,d);V instanceof SVGSVGElement&&(d=V)}const P=new XMLSerializer().serializeToString(d).replace(/&nbsp;/g,"\xA0");this.graph.trigger("after:export",t),e(P)};if(t.serializeImages){const A=l.find("image").map(P=>new Promise(V=>{const q=P.attr("xlink:href")||P.attr("href");dy.imageToDataUri(q,(te,ge)=>{!te&&ge&&P.attr("xlink:href",ge),V()})}));Promise.all(A).then(_)}else _()}toDataURL(e,t){let o=t.viewBox||this.graph.getContentBBox();const l=Cc(t.padding);t.width&&t.height&&(l.left+l.right>=t.width&&(l.left=l.right=0),l.top+l.bottom>=t.height&&(l.top=l.bottom=0));const d=new zn(-l.left,-l.top,l.left+l.right,l.top+l.bottom);if(t.width&&t.height){const _=o.width+l.left+l.right,A=o.height+l.top+l.bottom;d.scale(_/t.width,A/t.height)}o=zn.create(o).moveAndExpand(d);const f=typeof t.width=="number"&&typeof t.height=="number"?{width:t.width,height:t.height}:o;let v=t.ratio?parseFloat(t.ratio):1;(!Number.isFinite(v)||v===0)&&(v=1);const x={width:Math.max(Math.round(f.width*v),1),height:Math.max(Math.round(f.height*v),1)};{const _=document.createElement("canvas"),A=_.getContext("2d");_.width=x.width,_.height=x.height;const P=x.width-1,V=x.height-1;A.fillStyle="rgb(1,1,1)",A.fillRect(P,V,1,1);const q=A.getImageData(P,V,1,1).data;if(q[0]!==1||q[1]!==1||q[2]!==1)throw new Error("size exceeded")}const w=new Image;w.onload=()=>{const _=document.createElement("canvas");_.width=x.width,_.height=x.height;const A=_.getContext("2d");A.fillStyle=t.backgroundColor||"white",A.fillRect(0,0,x.width,x.height);try{A.drawImage(w,0,0,x.width,x.height);const P=_.toDataURL(t.type,t.quality);e(P)}catch(P){}},this.toSVG(_=>{w.src=`data:image/svg+xml,${encodeURIComponent(_)}`},Object.assign(Object.assign({},t),{viewBox:o,serializeImages:!0,preserveDimensions:Object.assign({},x)}))}toPNG(e,t={}){this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/png"}))}toJPEG(e,t={}){this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/jpeg"}))}}class l1 extends vo{constructor(){super(...arguments),this.widgets=new Map}get isSelectionEnabled(){return this.options.selecting.enabled===!0}init(){this.startListening()}startListening(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}stopListening(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}onNodeMouseUp({node:e}){if(!this.isSelectionEnabled){const t=this.graph.hook.createKnob(e,{clearAll:!0});t&&this.widgets.set(e,t)}}onNodeSelected({node:e}){if(this.isSelectionEnabled){const t=this.graph.hook.createKnob(e,{clearAll:!1});t&&this.widgets.set(e,t)}}onNodeUnSelected({node:e}){if(this.isSelectionEnabled){const t=this.widgets.get(e);t&&t.forEach(o=>o.dispose()),this.widgets.delete(e)}}}var $y=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class Wy extends vo{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&this.widgetOptions.enabled===!0}init(){this.startListening(),this.updateClassName()}startListening(){const e=this.widgetOptions.eventTypes;e&&(e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.graph.container).on("mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new Wn(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}stopListening(){const e=this.widgetOptions.eventTypes;e&&(e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.graph.container).off("mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}preparePanning({e}){(this.allowPanning(e,!0)||this.allowPanning(e)&&!this.graph.selection.allowRubberband(e,!0))&&this.startPanning(e)}allowPanning(e,t){return this.pannable&&nh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}startPanning(e){const t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.view.normalizeEvent(e),o=t.clientX-this.clientX,l=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY;const d=this.graph.transform.getTranslation(),f=d.tx+o,v=d.ty+l;this.graph.transform.translate(f,v,{ui:!0})}stopPanning(e){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")}updateClassName(){const e=this.view.container,t=this.view.prefixClassName("graph-panning"),o=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(ao(e,t),$c(e,o)):($c(e,t),ao(e,o)):($c(e,t),$c(e,o))}onRightMouseDown(e){e.button===2&&this.allowPanning(e,!0)&&this.startPanning(e)}allowMouseWheel(e){return this.pannable&&!e.ctrlKey}onMouseWheel(e,t,o){e.ctrlKey||this.graph.translateBy(-t,-o)}autoPanning(e,t){const l=this.graph.getGraphArea();let d=0,f=0;e<=l.left+10&&(d=-10),t<=l.top+10&&(f=-10),e>=l.right-10&&(d=10),t>=l.bottom-10&&(f=10),(d!==0||f!==0)&&this.graph.translateBy(-d,-f)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}$y([vo.dispose()],Wy.prototype,"dispose",null);var Xy=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class TA extends vo{hasScroller(){return this.graph.scroller.widget!=null}getContainer(){return this.hasScroller()?this.graph.scroller.widget.container:this.graph.container}init(){const e=this.options.autoResize;if(e){const t=typeof e=="boolean"?this.getContainer():e;T2.bind(t,()=>{const o=this.getContainer(),l=o.offsetWidth,d=o.offsetHeight;this.resize(l,d)})}}resize(e,t){this.hasScroller()?this.resizeScroller(e,t):this.resizeGraph(e,t)}resizeGraph(e,t){this.graph.transform.resize(e,t)}resizeScroller(e,t){this.graph.scroller.resize(e,t)}resizePage(e,t){const o=this.graph.scroller.widget;o&&o.updatePageSize(e,t)}dispose(){T2.clear(this.getContainer())}}Xy([vo.dispose()],TA.prototype,"dispose",null);var qi=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d},Yv=function(c,e){var t={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&e.indexOf(o)<0&&(t[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(c);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(c,o[l])&&(t[o[l]]=c[o[l]]);return t},Di;(function(c){function e(o,l){return(d,f,v)=>{const x=v.value,w=l||f;v.value=function(..._){const A=this.options[w];if(A!=null){this.getNativeValue=x.bind(this,..._);const P=ir(A,this.graph,..._);if(this.getNativeValue=null,P!=null||o===!0&&P===null)return P}return x.call(this,..._)}}}c.hook=e;function t(o){return(l,d,f)=>{const v=f.value,x=o||d;f.value=function(...w){let _=v.call(this,...w);const A=this.options[x];return A!=null&&(_=ir(A,this.graph,...w)&&_),_}}}c.after=t})(Di||(Di={}));class Ni extends vo{createModel(){if(this.options.model)return this.options.model;const e=new wl;return e.graph=this.graph,e}createView(){return new wu(this.graph)}createRenderer(){return new mo(this.graph)}createDefsManager(){return new Vv(this.graph)}createGridManager(){return new gg(this.graph)}createCoordManager(){return new zy(this.graph)}createKnobManager(){return new l1(this.graph)}createTransform(e,t){const o=this.getTransformOptions(e);return o.resizable||o.rotatable?new zv(Object.assign(Object.assign({node:e,graph:this.graph},o),t)):(o.clearAll&&zv.removeInstances(this.graph),null)}createKnob(e,t){const o=th.parseOptionGroup(this.graph,e,this.options.knob),l=Object.assign(Object.assign({},o),t);l.clearAll&&yw.removeInstances(this.graph),l.clearAll=!1;const d=e.prop("knob"),f=[];return(Array.isArray(d)?d:[d]).forEach((x,w)=>{if(x){if(x.enabled===!1||typeof x.enabled=="function"&&x.enabled.call(this.graph,e)===!1)return}else return;o.enabled&&f.push(new yw(Object.assign({node:e,index:w,graph:this.graph},l)))}),f}getTransformOptions(e){const t=th.parseOptionGroup(this.graph,e,this.options.resizing),o=th.parseOptionGroup(this.graph,e,this.options.rotating),l=th.parseOptionGroup(this.graph,e,this.options.transforming);return Object.assign(Object.assign({},l),{resizable:t.enabled,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,orthogonalResizing:t.orthogonal,restrictedResizing:t.restrict!=null?t.restrict:t.restricted,autoScrollOnResizing:t.autoScroll,preserveAspectRatio:t.preserveAspectRatio,allowReverse:t.allowReverse,rotatable:o.enabled,rotateGrid:o.grid})}createTransformManager(){return new D0(this.graph)}createHighlightManager(){return new P0(this.graph)}createBackgroundManager(){return new pg(this.graph)}createClipboard(){return new c1}createClipboardManager(){return new $v(this.graph)}createSnapline(){return new _A(Object.assign({graph:this.graph},this.options.snapline))}createSnaplineManager(){return new jv(this.graph)}createSelection(){return new O0(Object.assign({graph:this.graph},this.options.selecting))}createSelectionManager(){return new Wv(this.graph)}allowRubberband(e){return!0}createHistoryManager(){return new rh(Object.assign({graph:this.graph},this.options.history))}createScroller(){return this.options.scroller.enabled?new Qh(Object.assign({graph:this.graph},this.options.scroller)):null}createScrollerManager(){return new Hv(this.graph)}allowPanning(e){return!0}createMiniMap(){const e=this.options.minimap,{enabled:t}=e,o=Yv(e,["enabled"]);return t?new SA(Object.assign({graph:this.graph},o)):null}createMiniMapManager(){return new N0(this.graph)}createKeyboard(){return new I0(Object.assign({graph:this.graph},this.options.keyboard))}createMouseWheel(){return new vg(Object.assign({graph:this.graph},this.options.mousewheel))}createPrintManager(){return new ef(this.graph)}createFormatManager(){return new Zv(this.graph)}createPanningManager(){return new Wy(this.graph)}createSizeManager(){return new TA(this.graph)}allowConnectToBlank(e){const t=this.options.connecting,o=t.allowBlank!=null?t.allowBlank:t.dangling;if(typeof o!="function")return!!o;const l=this.graph.findViewByCell(e),d=e.getSourceCell(),f=e.getTargetCell(),v=this.graph.findViewByCell(d),x=this.graph.findViewByCell(f);return ir(o,this.graph,{edge:e,edgeView:l,sourceCell:d,targetCell:f,sourceView:v,targetView:x,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:l.sourceMagnet,targetMagnet:l.targetMagnet})}validateEdge(e,t,o){if(!this.allowConnectToBlank(e)){const d=e.getSourceCellId(),f=e.getTargetCellId();if(!(d&&f))return!1}const l=this.options.connecting.validateEdge;return l?ir(l,this.graph,{edge:e,type:t,previous:o}):!0}validateMagnet(e,t,o){if(t.getAttribute("magnet")!=="passive"){const l=this.options.connecting.validateMagnet;return l?ir(l,this.graph,{e:o,magnet:t,view:e,cell:e.cell}):!0}return!1}getDefaultEdge(e,t){let o;const l=this.options.connecting.createEdge;return l&&(o=ir(l,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),o==null&&(o=new mw),o}validateConnection(e,t,o,l,d,f,v){const x=this.options.connecting,w=x.allowLoop,_=x.allowNode,A=x.allowEdge,P=x.allowPort,V=x.allowMulti!=null?x.allowMulti:x.multi,q=x.validateConnection,te=f?f.cell:null,ge=d==="target"?o:e,_e=d==="target"?l:t;let ke=!0;const Se=je=>{const nt=d==="source"?v?v.port:null:te?te.getSourcePortId():null,wt=d==="target"?v?v.port:null:te?te.getTargetPortId():null;return ir(je,this.graph,{edge:te,edgeView:f,sourceView:e,targetView:o,sourcePort:nt,targetPort:wt,sourceMagnet:t,targetMagnet:l,sourceCell:e?e.cell:null,targetCell:o?o.cell:null,type:d})};if(w!=null&&(typeof w=="boolean"?!w&&e===o&&(ke=!1):ke=Se(w)),ke&&P!=null&&(typeof P=="boolean"?!P&&_e&&(ke=!1):ke=Se(P)),ke&&A!=null&&(typeof A=="boolean"?!A&&Jh.isEdgeView(ge)&&(ke=!1):ke=Se(A)),ke&&_!=null&&_e==null&&(typeof _=="boolean"?!_&&Fl.isNodeView(ge)&&(ke=!1):ke=Se(_)),ke&&V!=null&&f){const je=f.cell,nt=d==="source"?v:je.getSource(),wt=d==="target"?v:je.getTarget(),It=v?this.graph.getCellById(v.cell):null;if(nt&&wt&&nt.cell&&wt.cell&&It)if(typeof V=="function")ke=Se(V);else{const Jt=this.model.getConnectedEdges(It,{outgoing:d==="source",incoming:d==="target"});Jt.length&&(V==="withPort"?Jt.some(An=>{const On=An.getSource(),Zn=An.getTarget();return On&&Zn&&On.cell===nt.cell&&Zn.cell===wt.cell&&On.port!=null&&On.port===nt.port&&Zn.port!=null&&Zn.port===wt.port})&&(ke=!1):V||Jt.some(An=>{const On=An.getSource(),Zn=An.getTarget();return On&&Zn&&On.cell===nt.cell&&Zn.cell===wt.cell})&&(ke=!1))}}return ke&&q!=null&&(ke=Se(q)),ke}getRestrictArea(e){const t=this.options.translating.restrict,o=typeof t=="function"?ir(t,this.graph,e):t;return typeof o=="number"?this.graph.transform.getGraphArea().inflate(o):o===!0?this.graph.transform.getGraphArea():o||null}onViewUpdated(e,t,o){t&mo.FLAG_INSERT||o.mounting||this.graph.renderer.requestConnectedEdgesUpdate(e,o)}onViewPostponed(e,t,o){return this.graph.renderer.forcePostponedViewUpdate(e,t)}getCellView(e){return null}createCellView(e){const t={graph:this.graph},o=this.getCellView(e);if(o)return new o(e,t);const l=e.view;if(l!=null&&typeof l=="string"){const d=As.registry.get(l);return d?new d(e,t):As.registry.onNotFound(l)}return e.isNode()?new Fl(e,t):e.isEdge()?new Jh(e,t):null}getHTMLComponent(e){let t=e.getHTML();return typeof t=="string"&&(t=eh.componentRegistry.get(t)||t),ec(t)&&(t=t.render),typeof t=="function"?ir(t,this.graph,e):t}shouldUpdateHTMLComponent(e){let t=e.getHTML();if(typeof t=="string"&&(t=eh.componentRegistry.get(t)||t),ec(t)){const o=t.shouldComponentUpdate;return typeof o=="function"?ir(o,this.graph,e):!!o}return!1}onEdgeLabelRendered(e){}onPortRendered(e){}onToolItemCreated(e){}}qi([Di.hook()],Ni.prototype,"createModel",null),qi([Di.hook()],Ni.prototype,"createView",null),qi([Di.hook()],Ni.prototype,"createRenderer",null),qi([Di.hook()],Ni.prototype,"createDefsManager",null),qi([Di.hook()],Ni.prototype,"createGridManager",null),qi([Di.hook()],Ni.prototype,"createCoordManager",null),qi([Di.hook()],Ni.prototype,"createKnobManager",null),qi([Di.hook()],Ni.prototype,"createTransform",null),qi([Di.hook()],Ni.prototype,"createKnob",null),qi([Di.hook()],Ni.prototype,"createTransformManager",null),qi([Di.hook()],Ni.prototype,"createHighlightManager",null),qi([Di.hook()],Ni.prototype,"createBackgroundManager",null),qi([Di.hook()],Ni.prototype,"createClipboard",null),qi([Di.hook()],Ni.prototype,"createClipboardManager",null),qi([Di.hook()],Ni.prototype,"createSnapline",null),qi([Di.hook()],Ni.prototype,"createSnaplineManager",null),qi([Di.hook()],Ni.prototype,"createSelection",null),qi([Di.hook()],Ni.prototype,"createSelectionManager",null),qi([Di.hook()],Ni.prototype,"allowRubberband",null),qi([Di.hook()],Ni.prototype,"createHistoryManager",null),qi([Di.hook()],Ni.prototype,"createScroller",null),qi([Di.hook()],Ni.prototype,"createScrollerManager",null),qi([Di.hook()],Ni.prototype,"allowPanning",null),qi([Di.hook()],Ni.prototype,"createMiniMap",null),qi([Di.hook()],Ni.prototype,"createMiniMapManager",null),qi([Di.hook()],Ni.prototype,"createKeyboard",null),qi([Di.hook()],Ni.prototype,"createMouseWheel",null),qi([Di.hook()],Ni.prototype,"createPrintManager",null),qi([Di.hook()],Ni.prototype,"createFormatManager",null),qi([Di.hook()],Ni.prototype,"createPanningManager",null),qi([Di.hook()],Ni.prototype,"createSizeManager",null),qi([Di.after()],Ni.prototype,"onViewUpdated",null),qi([Di.after()],Ni.prototype,"onViewPostponed",null),qi([Di.hook()],Ni.prototype,"getCellView",null),qi([Di.hook(!0)],Ni.prototype,"createCellView",null),qi([Di.hook()],Ni.prototype,"getHTMLComponent",null),qi([Di.hook()],Ni.prototype,"shouldUpdateHTMLComponent",null),qi([Di.hook()],Ni.prototype,"onEdgeLabelRendered",null),qi([Di.hook()],Ni.prototype,"onPortRendered",null),qi([Di.hook()],Ni.prototype,"onToolItemCreated",null);var Zc=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class io extends Gl{constructor(e){super(),this.options=th.get(e),this.css=new fg(this),this.hook=new Ni(this),this.view=this.hook.createView(),this.defs=this.hook.createDefsManager(),this.coord=this.hook.createCoordManager(),this.transform=this.hook.createTransformManager(),this.knob=this.hook.createKnobManager(),this.highlight=this.hook.createHighlightManager(),this.grid=this.hook.createGridManager(),this.background=this.hook.createBackgroundManager(),this.model=this.hook.createModel(),this.renderer=this.hook.createRenderer(),this.clipboard=this.hook.createClipboardManager(),this.snapline=this.hook.createSnaplineManager(),this.selection=this.hook.createSelectionManager(),this.history=this.hook.createHistoryManager(),this.scroller=this.hook.createScrollerManager(),this.minimap=this.hook.createMiniMapManager(),this.keyboard=this.hook.createKeyboard(),this.mousewheel=this.hook.createMouseWheel(),this.print=this.hook.createPrintManager(),this.format=this.hook.createFormatManager(),this.panning=this.hook.createPanningManager(),this.size=this.hook.createSizeManager()}get container(){return this.view.container}get[Symbol.toStringTag](){return io.toStringTag}isNode(e){return e.isNode()}isEdge(e){return e.isEdge()}resetCells(e,t={}){return this.model.resetCells(e,t),this}clearCells(e={}){return this.model.clear(e),this}toJSON(e={}){return this.model.toJSON(e)}parseJSON(e){return this.model.parseJSON(e)}fromJSON(e,t={}){return this.model.fromJSON(e,t),this}getCellById(e){return this.model.getCell(e)}addNode(e,t={}){return this.model.addNode(e,t)}addNodes(e,t={}){return this.addCell(e.map(o=>bs.isNode(o)?o:this.createNode(o)),t)}createNode(e){return this.model.createNode(e)}removeNode(e,t={}){return this.model.removeCell(e,t)}addEdge(e,t={}){return this.model.addEdge(e,t)}addEdges(e,t={}){return this.addCell(e.map(o=>as.isEdge(o)?o:this.createEdge(o)),t)}removeEdge(e,t={}){return this.model.removeCell(e,t)}createEdge(e){return this.model.createEdge(e)}addCell(e,t={}){return this.model.addCell(e,t),this}removeCell(e,t={}){return this.model.removeCell(e,t)}removeCells(e,t={}){return this.model.removeCells(e,t)}removeConnectedEdges(e,t={}){return this.model.removeConnectedEdges(e,t)}disconnectConnectedEdges(e,t={}){return this.model.disconnectConnectedEdges(e,t),this}hasCell(e){return this.model.has(e)}getCell(e){return this.model.getCell(e)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(e){return this.model.getOutgoingEdges(e)}getIncomingEdges(e){return this.model.getIncomingEdges(e)}getConnectedEdges(e,t={}){return this.model.getConnectedEdges(e,t)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(e){return this.model.isRoot(e)}isLeafNode(e){return this.model.isLeaf(e)}getNeighbors(e,t={}){return this.model.getNeighbors(e,t)}isNeighbor(e,t,o={}){return this.model.isNeighbor(e,t,o)}getSuccessors(e,t={}){return this.model.getSuccessors(e,t)}isSuccessor(e,t,o={}){return this.model.isSuccessor(e,t,o)}getPredecessors(e,t={}){return this.model.getPredecessors(e,t)}isPredecessor(e,t,o={}){return this.model.isPredecessor(e,t,o)}getCommonAncestor(...e){return this.model.getCommonAncestor(...e)}getSubGraph(e,t={}){return this.model.getSubGraph(e,t)}cloneSubGraph(e,t={}){return this.model.cloneSubGraph(e,t)}cloneCells(e){return this.model.cloneCells(e)}getNodesFromPoint(e,t){return this.model.getNodesFromPoint(e,t)}getNodesInArea(e,t,o,l,d){return this.model.getNodesInArea(e,t,o,l,d)}getNodesUnderNode(e,t={}){return this.model.getNodesUnderNode(e,t)}searchCell(e,t,o={}){return this.model.search(e,t,o),this}getShortestPath(e,t,o={}){return this.model.getShortestPath(e,t,o)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(e,t={}){return this.model.getCellsBBox(e,t)}startBatch(e,t={}){this.model.startBatch(e,t)}stopBatch(e,t={}){this.model.stopBatch(e,t)}batchUpdate(e,t,o){const l=typeof e=="string"?e:"update",d=typeof e=="string"?t:e,f=typeof t=="function"?o:t;this.startBatch(l,f);const v=d();return this.stopBatch(l,f),v}updateCellId(e,t){return this.model.updateCellId(e,t)}isFrozen(){return this.renderer.isFrozen()}freeze(e={}){return this.renderer.freeze(e),this}unfreeze(e={}){return this.renderer.unfreeze(e),this}isAsync(){return this.renderer.isAsync()}setAsync(e){return this.renderer.setAsync(e),this}findView(e){return Gi.isCell(e)?this.findViewByCell(e):this.findViewByElem(e)}findViews(e){return zn.isRectangleLike(e)?this.findViewsInArea(e):$e.isPointLike(e)?this.findViewsFromPoint(e):[]}findViewByCell(e){return this.renderer.findViewByCell(e)}findViewByElem(e){return this.renderer.findViewByElem(e)}findViewsFromPoint(e,t){const o=typeof e=="number"?{x:e,y:t}:e;return this.renderer.findViewsFromPoint(o)}findViewsInArea(e,t,o,l,d){const f=typeof e=="number"?{x:e,y:t,width:o,height:l}:e,v=typeof e=="number"?d:t;return this.renderer.findViewsInArea(f,v)}isViewMounted(e){return this.renderer.isViewMounted(e)}getMountedViews(){return this.renderer.getMountedViews()}getUnmountedViews(){return this.renderer.getUnmountedViews()}matrix(e){return typeof e=="undefined"?this.transform.getMatrix():(this.transform.setMatrix(e),this)}resize(e,t){return this.size.resize(e,t),this}resizeGraph(e,t){return this.size.resizeGraph(e,t),this}resizeScroller(e,t){return this.size.resizeScroller(e,t),this}resizePage(e,t){return this.size.resizePage(e,t),this}scale(e,t=e,o=0,l=0){return typeof e=="undefined"?this.transform.getScale():(this.transform.scale(e,t,o,l),this)}zoom(e,t){const o=this.scroller.widget;if(o){if(typeof e=="undefined")return o.zoom();o.zoom(e,t)}else{if(typeof e=="undefined")return this.transform.getZoom();this.transform.zoom(e,t)}return this}zoomTo(e,t={}){const o=this.scroller.widget;return o?o.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})):this.transform.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})),this}zoomToRect(e,t={}){const o=this.scroller.widget;return o?o.zoomToRect(e,t):this.transform.zoomToRect(e,t),this}zoomToFit(e={}){const t=this.scroller.widget;return t?t.zoomToFit(e):this.transform.zoomToFit(e),this}rotate(e,t,o){return typeof e=="undefined"?this.transform.getRotation():(this.transform.rotate(e,t,o),this)}translate(e,t){return typeof e=="undefined"?this.transform.getTranslation():(this.transform.translate(e,t),this)}translateBy(e,t){const o=this.translate(),l=o.tx+e,d=o.ty+t;return this.translate(l,d)}getArea(){return this.transform.getGraphArea()}getGraphArea(){return this.transform.getGraphArea()}getContentArea(e={}){return this.transform.getContentArea(e)}getContentBBox(e={}){return this.transform.getContentBBox(e)}fitToContent(e,t,o,l){return this.transform.fitToContent(e,t,o,l)}scaleContentToFit(e={}){return this.transform.scaleContentToFit(e),this}center(e){return this.centerPoint(e)}centerPoint(e,t,o){const l=this.scroller.widget;return l?l.centerPoint(e,t,o):this.transform.centerPoint(e,t),this}centerContent(e){const t=this.scroller.widget;return t?t.centerContent(e):this.transform.centerContent(e),this}centerCell(e,t){const o=this.scroller.widget;return o?o.centerCell(e,t):this.transform.centerCell(e),this}positionPoint(e,t,o,l={}){const d=this.scroller.widget;return d?d.positionPoint(e,t,o,l):this.transform.positionPoint(e,t,o),this}positionRect(e,t,o){const l=this.scroller.widget;return l?l.positionRect(e,t,o):this.transform.positionRect(e,t),this}positionCell(e,t,o){const l=this.scroller.widget;return l?l.positionCell(e,t,o):this.transform.positionCell(e,t),this}positionContent(e,t){const o=this.scroller.widget;return o?o.positionContent(e,t):this.transform.positionContent(e,t),this}getClientMatrix(){return this.coord.getClientMatrix()}getClientOffset(){return this.coord.getClientOffset()}getPageOffset(){return this.coord.getPageOffset()}snapToGrid(e,t){return this.coord.snapToGrid(e,t)}pageToLocal(e,t,o,l){return zn.isRectangleLike(e)?this.coord.pageToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof l=="number"?this.coord.pageToLocalRect(e,t,o,l):this.coord.pageToLocalPoint(e,t)}localToPage(e,t,o,l){return zn.isRectangleLike(e)?this.coord.localToPageRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof l=="number"?this.coord.localToPageRect(e,t,o,l):this.coord.localToPagePoint(e,t)}clientToLocal(e,t,o,l){return zn.isRectangleLike(e)?this.coord.clientToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof l=="number"?this.coord.clientToLocalRect(e,t,o,l):this.coord.clientToLocalPoint(e,t)}localToClient(e,t,o,l){return zn.isRectangleLike(e)?this.coord.localToClientRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof l=="number"?this.coord.localToClientRect(e,t,o,l):this.coord.localToClientPoint(e,t)}localToGraph(e,t,o,l){return zn.isRectangleLike(e)?this.coord.localToGraphRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof l=="number"?this.coord.localToGraphRect(e,t,o,l):this.coord.localToGraphPoint(e,t)}graphToLocal(e,t,o,l){return zn.isRectangleLike(e)?this.coord.graphToLocalRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof l=="number"?this.coord.graphToLocalRect(e,t,o,l):this.coord.graphToLocalPoint(e,t)}clientToGraph(e,t,o,l){return zn.isRectangleLike(e)?this.coord.clientToGraphRect(e):typeof e=="number"&&typeof t=="number"&&typeof o=="number"&&typeof l=="number"?this.coord.clientToGraphRect(e,t,o,l):this.coord.clientToGraphPoint(e,t)}defineFilter(e){return this.defs.filter(e)}defineGradient(e){return this.defs.gradient(e)}defineMarker(e){return this.defs.marker(e)}getGridSize(){return this.grid.getGridSize()}setGridSize(e){return this.grid.setGridSize(e),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(e){return this.grid.draw(e),this}updateBackground(){return this.background.update(),this}drawBackground(e,t){const o=this.scroller.widget;return o!=null&&(this.options.background==null||!t)?o.backgroundManager.draw(e):this.background.draw(e),this}clearBackground(e){const t=this.scroller.widget;return t!=null&&(this.options.background==null||!e)?t.backgroundManager.clear():this.background.clear(),this}isClipboardEnabled(){return!this.clipboard.disabled}enableClipboard(){return this.clipboard.enable(),this}disableClipboard(){return this.clipboard.disable(),this}toggleClipboard(e){return e!=null?e!==this.isClipboardEnabled()&&(e?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this}isClipboardEmpty(){return this.clipboard.isEmpty()}getCellsInClipboard(){return this.clipboard.cells}cleanClipboard(){return this.clipboard.clean(),this}copy(e,t={}){return this.clipboard.copy(e,t),this}cut(e,t={}){return this.clipboard.cut(e,t),this}paste(e={},t=this){return this.clipboard.paste(e,t)}isHistoryEnabled(){return!this.history.disabled}enableHistory(){return this.history.enable(),this}disableHistory(){return this.history.disable(),this}toggleHistory(e){return e!=null?e!==this.isHistoryEnabled()&&(e?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this}undo(e={}){return this.history.undo(e),this}undoAndCancel(e={}){return this.history.cancel(e),this}redo(e={}){return this.history.redo(e),this}canUndo(){return this.history.canUndo()}canRedo(){return this.history.canRedo()}cleanHistory(e={}){this.history.clean(e)}isKeyboardEnabled(){return!this.keyboard.disabled}enableKeyboard(){return this.keyboard.enable(),this}disableKeyboard(){return this.keyboard.disable(),this}toggleKeyboard(e){return e!=null?e!==this.isKeyboardEnabled()&&(e?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this}bindKey(e,t,o){return this.keyboard.on(e,t,o),this}unbindKey(e,t){return this.keyboard.off(e,t),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(e){return e==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():e?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){return this.scroller.widget?this.scroller.pannable:this.panning.pannable}enablePanning(){return this.scroller.widget?this.scroller.enablePanning():this.panning.enablePanning(),this}disablePanning(){return this.scroller.widget?this.scroller.disablePanning():this.panning.disablePanning(),this}togglePanning(e){return e==null?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}lockScroller(){var e;(e=this.scroller.widget)===null||e===void 0||e.lock()}unlockScroller(){var e;(e=this.scroller.widget)===null||e===void 0||e.unlock()}updateScroller(){var e;(e=this.scroller.widget)===null||e===void 0||e.update()}getScrollbarPosition(){return this.scroller.widget.scrollbarPosition()}setScrollbarPosition(e,t,o){return this.scroller.widget.scrollbarPosition(e,t,o),this}scrollToPoint(e,t,o){return this.scroller.widget.scrollToPoint(e,t,o),this}scrollToContent(e){return this.scroller.widget.scrollToContent(e),this}scrollToCell(e,t){return this.scroller.widget.scrollToCell(e,t),this}transitionToPoint(e,t,o){return this.scroller.widget.transitionToPoint(e,t,o),this}transitionToRect(e,t={}){return this.scroller.widget.transitionToRect(e,t),this}isSelectionEnabled(){return!this.selection.disabled}enableSelection(){return this.selection.enable(),this}disableSelection(){return this.selection.disable(),this}toggleSelection(e){return e!=null?e!==this.isSelectionEnabled()&&(e?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this}isMultipleSelection(){return this.selection.isMultiple()}enableMultipleSelection(){return this.selection.enableMultiple(),this}disableMultipleSelection(){return this.selection.disableMultiple(),this}toggleMultipleSelection(e){return e!=null?e!==this.isMultipleSelection()&&(e?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return this.selection.widget.options.movable!==!1}enableSelectionMovable(){return this.selection.widget.options.movable=!0,this}disableSelectionMovable(){return this.selection.widget.options.movable=!1,this}toggleSelectionMovable(e){return e!=null?e!==this.isSelectionMovable()&&(e?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.selection.rubberbandDisabled}enableRubberband(){return this.selection.enableRubberband(),this}disableRubberband(){return this.selection.disableRubberband(),this}toggleRubberband(e){return e!=null?e!==this.isRubberbandEnabled()&&(e?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return this.selection.widget.options.strict===!0}enableStrictRubberband(){return this.selection.widget.options.strict=!0,this}disableStrictRubberband(){return this.selection.widget.options.strict=!1,this}toggleStrictRubberband(e){return e!=null?e!==this.isStrictRubberband()&&(e?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(e){this.selection.setModifiers(e)}setSelectionFilter(e){return this.selection.setFilter(e),this}setSelectionDisplayContent(e){return this.selection.setContent(e),this}isSelectionEmpty(){return this.selection.isEmpty()}cleanSelection(e){return this.selection.clean(e),this}resetSelection(e,t){return this.selection.reset(e,t),this}getSelectedCells(){return this.selection.cells}getSelectedCellCount(){return this.selection.length}isSelected(e){return this.selection.isSelected(e)}select(e,t){return this.selection.select(e,t),this}unselect(e,t){return this.selection.unselect(e,t),this}isSnaplineEnabled(){return!this.snapline.widget.disabled}enableSnapline(){return this.snapline.widget.enable(),this}disableSnapline(){return this.snapline.widget.disable(),this}toggleSnapline(e){if(e!=null)e!==this.isSnaplineEnabled()&&(e?this.enableSnapline():this.disableSnapline());else return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this}hideSnapline(){return this.snapline.widget.hide(),this}setSnaplineFilter(e){return this.snapline.widget.setFilter(e),this}isSnaplineOnResizingEnabled(){return this.snapline.widget.options.resizing===!0}enableSnaplineOnResizing(){return this.snapline.widget.options.resizing=!0,this}disableSnaplineOnResizing(){return this.snapline.widget.options.resizing=!1,this}toggleSnaplineOnResizing(e){return e!=null?e!==this.isSnaplineOnResizingEnabled()&&(e?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this}isSharpSnapline(){return this.snapline.widget.options.sharp===!0}enableSharpSnapline(){return this.snapline.widget.options.sharp=!0,this}disableSharpSnapline(){return this.snapline.widget.options.sharp=!1,this}toggleSharpSnapline(e){return e!=null?e!==this.isSharpSnapline()&&(e?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this}getSnaplineTolerance(){return this.snapline.widget.options.tolerance}setSnaplineTolerance(e){return this.snapline.widget.options.tolerance=e,this}removeTools(){return this.emit("tools:remove"),this}hideTools(){return this.emit("tools:hide"),this}showTools(){return this.emit("tools:show"),this}toSVG(e,t={}){this.format.toSVG(e,t)}toDataURL(e,t){this.format.toDataURL(e,t)}toPNG(e,t={}){this.format.toPNG(e,t)}toJPEG(e,t={}){this.format.toJPEG(e,t)}printPreview(e){this.print.show(e)}dispose(){this.clearCells(),this.off(),this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.knob.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose(),this.size.dispose()}}Zc([ld.checkScroller()],io.prototype,"lockScroller",null),Zc([ld.checkScroller()],io.prototype,"unlockScroller",null),Zc([ld.checkScroller()],io.prototype,"updateScroller",null),Zc([ld.checkScroller()],io.prototype,"getScrollbarPosition",null),Zc([ld.checkScroller()],io.prototype,"setScrollbarPosition",null),Zc([ld.checkScroller()],io.prototype,"scrollToPoint",null),Zc([ld.checkScroller()],io.prototype,"scrollToContent",null),Zc([ld.checkScroller()],io.prototype,"scrollToCell",null),Zc([ld.checkScroller()],io.prototype,"transitionToPoint",null),Zc([ld.checkScroller()],io.prototype,"transitionToRect",null),Zc([Gl.dispose()],io.prototype,"dispose",null),function(c){c.View=wu,c.Hook=Ni,c.Renderer=mo,c.Keyboard=I0,c.MouseWheel=vg,c.BaseManager=vo,c.DefsManager=Vv,c.GridManager=gg,c.CoordManager=zy,c.PrintManager=ef,c.FormatManager=Zv,c.MiniMapManager=N0,c.HistoryManager=rh,c.SnaplineManager=jv,c.ScrollerManager=Hv,c.ClipboardManager=$v,c.TransformManager=D0,c.HighlightManager=P0,c.BackgroundManager=pg,c.SelectionManager=Wv}(io||(io={})),function(c){c.toStringTag=`X6.${c.name}`;function e(t){if(t==null)return!1;if(t instanceof c)return!0;const o=t[Symbol.toStringTag],l=t;return(o==null||o===c.toStringTag)&&l.hook!=null&&l.view!=null&&l.model!=null}c.isGraph=e}(io||(io={})),function(c){function e(t,o){const l=t instanceof HTMLElement?new c({container:t}):new c(t);return o!=null&&l.fromJSON(o),l}c.render=e}(io||(io={})),function(c){c.registerNode=bs.registry.register,c.registerEdge=as.registry.register,c.registerView=As.registry.register,c.registerAttr=ad.registry.register,c.registerGrid=Jf.registry.register,c.registerFilter=v0.registry.register,c.registerNodeTool=x0.registry.register,c.registerEdgeTool=C0.registry.register,c.registerBackground=Mv.registry.register,c.registerHighlighter=$h.registry.register,c.registerPortLayout=rg.registry.register,c.registerPortLabelLayout=m0.registry.register,c.registerMarker=ja.registry.register,c.registerRouter=tp.registry.register,c.registerConnector=cg.registry.register,c.registerAnchor=E0.registry.register,c.registerEdgeAnchor=ag.registry.register,c.registerConnectionPoint=S0.registry.register,c.registerConnectionStrategy=sg.registry.register,c.registerHTMLComponent=eh.componentRegistry.register}(io||(io={})),function(c){c.unregisterNode=bs.registry.unregister,c.unregisterEdge=as.registry.unregister,c.unregisterView=As.registry.unregister,c.unregisterAttr=ad.registry.unregister,c.unregisterGrid=Jf.registry.unregister,c.unregisterFilter=v0.registry.unregister,c.unregisterNodeTool=x0.registry.unregister,c.unregisterEdgeTool=C0.registry.unregister,c.unregisterBackground=Mv.registry.unregister,c.unregisterHighlighter=$h.registry.unregister,c.unregisterPortLayout=rg.registry.unregister,c.unregisterPortLabelLayout=m0.registry.unregister,c.unregisterMarker=ja.registry.unregister,c.unregisterRouter=tp.registry.unregister,c.unregisterConnector=cg.registry.unregister,c.unregisterAnchor=E0.registry.unregister,c.unregisterEdgeAnchor=ag.registry.unregister,c.unregisterConnectionPoint=S0.registry.unregister,c.unregisterConnectionStrategy=sg.registry.unregister,c.unregisterHTMLComponent=eh.componentRegistry.unregister}(io||(io={}));class c1{constructor(){this.cells=[]}copy(e,t,o={}){this.options=Object.assign({},o);const d=(wl.isModel(t)?t:t.model).cloneSubGraph(e,o);this.cells=un(Object.keys(d).map(f=>d[f]),f=>f.isEdge()?2:1),this.serialize(o)}cut(e,t,o={}){this.copy(e,t,o),(io.isGraph(t)?t.model:t).batchUpdate("cut",()=>{e.forEach(d=>d.remove())})}paste(e,t={}){const o=Object.assign(Object.assign({},this.options),t),{offset:l,edgeProps:d,nodeProps:f}=o;let v=20,x=20;l&&(v=typeof l=="number"?l:l.dx,x=typeof l=="number"?l:l.dy),this.deserialize(o);const w=this.cells;w.forEach(A=>{A.model=null,A.removeProp("zIndex"),(v||x)&&A.translate(v,x),f&&A.isNode()&&A.prop(f),d&&A.isEdge()&&A.prop(d)});const _=io.isGraph(e)?e.model:e;return _.batchUpdate("paste",()=>{_.addCells(this.cells)}),this.copy(w,e,t),w}serialize(e){e.useLocalStorage!==!1&&mg.save(this.cells)}deserialize(e){if(e.useLocalStorage){const t=mg.fetch();t&&(this.cells=t)}}isEmpty(){return this.cells.length<=0}clean(){this.options={},this.cells=[],mg.clean()}}var mg;(function(c){const e=`${xu.prefixCls}.clipboard.cells`;function t(d){if(window.localStorage){const f=d.map(v=>v.toJSON());localStorage.setItem(e,JSON.stringify(f))}}c.save=t;function o(){if(window.localStorage){const d=localStorage.getItem(e),f=d?JSON.parse(d):[];if(f)return wl.fromJSON(f)}}c.fetch=o;function l(){window.localStorage&&localStorage.removeItem(e)}c.clean=l})(mg||(mg={}));class Zy{constructor(e){this.halo=e}get options(){return this.halo.options}get graph(){return this.halo.graph}get model(){return this.halo.model}get view(){return this.halo.view}get cell(){return this.halo.cell}get node(){return this.cell}getPresets(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox(e){return this.options.useCellGeometry?e.cell.getBBox():e.getBBox()},content(e){const t=Hp("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),o=e.cell,l=o.getBBox();return t({x:Math.floor(l.x),y:Math.floor(l.y),width:Math.floor(l.width),height:Math.floor(l.height),angle:Math.floor(o.getAngle())})},magnet(e){return e.container},tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}}removeCell(){this.model.removeConnectedEdges(this.cell),this.cell.remove()}startLink({x:e,y:t}){this.halo.startBatch();const o=this.graph,l=this.createEdgeConnectedToSource();l.setTarget({x:e,y:t}),this.model.addEdge(l,{validation:!1,halo:this.halo.cid,async:!1}),o.view.undelegateEvents(),this.edgeView=o.renderer.findViewByCell(l),this.edgeView.prepareArrowheadDragging("target",{x:e,y:t,fallbackAction:"remove"})}createEdgeConnectedToSource(){const e=this.getMagnet(this.view,"source"),t=this.getEdgeTerminal(this.view,e),o=this.graph.hook.getDefaultEdge(this.view,e);return o.setSource(t),o}getMagnet(e,t){const o=this.options.magnet;if(typeof o=="function"){const l=ir(o,this.halo,e,t);if(l instanceof SVGElement)return l}throw new Error("`magnet()` has to return an SVGElement")}getEdgeTerminal(e,t){const o={cell:e.cell.id};if(t!==e.container){const l=t.getAttribute("port");l?o.port=l:o.selector=e.getSelector(t)}return o}doLink({e,x:t,y:o}){this.edgeView&&this.edgeView.onMouseMove(e,t,o)}stopLink({e,x:t,y:o}){const l=this.edgeView;if(l){l.onMouseUp(e,t,o);const d=l.cell;d.hasLoop()&&this.makeLoopEdge(d),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:d}),this.edgeView=null}this.graph.view.delegateEvents()}makeLoopEdge(e){let t=null,o=null;const l=this.options.loopEdgeWidth,d=this.graph.options,f=new zn(0,0,d.width,d.height),v=this.graph.graphToLocal(this.view.getBBox());[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some(w=>{let _=null,A=0,P=0;switch(w){case"top":_=new $e(v.x+v.width/2,v.y-l),A=l/2;break;case"bottom":_=new $e(v.x+v.width/2,v.y+v.height+l),A=l/2;break;case"left":_=new $e(v.x-l,v.y+v.height/2),P=l/2;break;case"right":_=new $e(v.x+v.width+l,v.y+v.height/2),P=l/2;break;default:break}return _?(t=_.translate(-A,-P),o=_.translate(A,P),f.containsPoint(t)&&f.containsPoint(o)):!1})&&t&&o&&e.setVertices([t,o])}startResize({e}){this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(Yi.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),js("node:resize",e,this.view)}doResize({e,dx:t,dy:o}){const l=this.node.getSize(),d=Math.max(l.width+(this.flip?t:o),1),f=Math.max(l.height+(this.flip?o:t),1);this.node.resize(d,f,{absolute:!0}),js("node:resizing",e,this.view)}stopResize({e}){this.view.removeClass("node-resizing"),js("node:resized",e,this.view),this.halo.stopBatch()}startClone({e,x:t,y:o}){this.halo.startBatch();const d=this.options.clone(this.cell,{clone:!0});if(!Gi.isCell(d))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(d,t,o),this.model.addCell(d,{halo:this.halo.cid,async:!1});const f=this.graph.renderer.findViewByCell(d);f.onMouseDown(e,t,o),this.halo.setEventData(e,{cloneView:f})}centerNodeAtCursor(e,t,o){const l=e.getBBox().getCenter(),d=t-l.x,f=o-l.y;e.translate(d,f)}doClone({e,x:t,y:o}){const l=this.halo.getEventData(e).cloneView;l&&l.onMouseMove(e,t,o)}stopClone({e,x:t,y:o}){const l=this.halo.getEventData(e).cloneView;l&&l.onMouseUp(e,t,o),this.halo.stopBatch()}startFork({e,x:t,y:o}){this.halo.startBatch();const l=this.options.clone(this.cell,{fork:!0});if(!Gi.isCell(l))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(l,t,o),this.model.addCell(l,{halo:this.halo.cid,async:!1});const d=this.createEdgeConnectedToSource(),f=this.graph.renderer.findViewByCell(l),v=this.getMagnet(f,"target"),x=this.getEdgeTerminal(f,v);d.setTarget(x),this.model.addEdge(d,{halo:this.halo.cid,async:!1}),f.onMouseDown(e,t,o),this.halo.setEventData(e,{cloneView:f})}doFork({e,x:t,y:o}){const l=this.halo.getEventData(e).cloneView;l&&l.onMouseMove(e,t,o)}stopFork({e,x:t,y:o}){const l=this.halo.getEventData(e).cloneView;l&&l.onMouseUp(e,t,o),this.halo.stopBatch()}startRotate({e,x:t,y:o}){this.halo.startBatch();const l=this.node.getBBox().getCenter(),d=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce((f,v)=>(v.isNode()&&f.push(v),f),d),this.halo.setEventData(e,{center:l,nodes:d,rotateStartAngles:d.map(f=>f.getAngle()),clientStartAngle:new $e(t,o).theta(l)}),d.forEach(f=>{const v=this.graph.findViewByCell(f);v&&(v.addClass("node-rotating"),js("node:rotate",e,v))})}doRotate({e,x:t,y:o}){const l=this.halo.getEventData(e),d=l.clientStartAngle-new $e(t,o).theta(l.center);l.nodes.forEach((f,v)=>{const x=l.rotateStartAngles[v],w=va.snapToGrid(x+d,this.options.rotateGrid);f.rotate(w,{absolute:!0,center:l.center,halo:this.halo.cid}),js("node:rotating",e,this.graph.findViewByCell(f))})}stopRotate({e}){this.halo.getEventData(e).nodes.forEach(o=>{const l=this.graph.findViewByCell(o);l.removeClass("node-rotating"),js("node:rotated",e,l)}),this.halo.stopBatch()}unlink(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()}}class P3{constructor(e){this.halo=e}get options(){return this.halo.options}get graph(){return this.halo.graph}get model(){return this.halo.model}get view(){return this.halo.view}get cell(){return this.halo.cell}get edge(){return this.cell}getPresets(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox(e){return e.graph.localToGraph(e.getPointAtRatio(.5))},tinyThreshold:-1,smallThreshold:-1}}removeEdge(){this.cell.remove()}directionSwap(){const e=this.edge.getSource(),t=this.edge.getTarget();this.edge.prop({source:t,target:e})}}class Yy extends Fv{get type(){return this.options.type||"surround"}get handleOptions(){return this.options}init(e){this.options=Fo(Yy.defaultOptions,this.cell.isNode()?new Zy(this).getPresets():this.cell.isEdge()?new P3(this).getPresets():null,e),this.render(),this.initHandles(),this.update(),this.startListening()}startListening(){const e=this.model,t=this.graph;this.view.cell.on("removed",this.remove,this),e.on("reseted",this.remove,this),t.on("halo:destroy",this.remove,this),e.on("*",this.update,this),t.on("scale",this.update,this),t.on("translate",this.update,this),super.startListening()}stopListening(){const e=this.model,t=this.graph,o=this.view.cell;this.undelegateEvents(),o.off("removed",this.remove,this),e.off("reseted",this.remove,this),t.off("halo:destroy",this.remove,this),e.off("*",this.update,this),t.off("scale",this.update,this),t.off("translate",this.update,this),super.stopListening()}render(){const e=this.options,t=this.prefixClassName("widget-halo");return this.view.addClass(R0.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(t).attr("data-shape",this.view.cell.shape),e.className&&this.$container.addClass(e.className),this.$handleContainer=this.$("<div/>").addClass(`${t}-handles`).appendTo(this.container),this.$content=this.$("<div/>").addClass(`${t}-content`).appendTo(this.container),this.$container.appendTo(this.graph.container),this}remove(){return this.stopBatch(),this.view.removeClass(R0.NODE_CLS),super.remove()}update(){if(this.isRendered()){this.updateContent();const e=this.getBBox(),t=this.options.tinyThreshold||0,o=this.options.smallThreshold||0;this.$handleContainer.toggleClass(`${this.handleClassName}-tiny`,e.width<t&&e.height<t);const l=`${this.handleClassName}-small`;this.$handleContainer.toggleClass(l,!this.$handleContainer.hasClass(l)&&e.width<o&&e.height<o),this.$container.css({width:e.width,height:e.height,left:e.x,top:e.y}),this.hasHandle("unlink")&&this.toggleUnlink(),(this.type==="surround"||this.type==="toolbar")&&this.hasHandle("fork")&&this.toggleFork()}}updateContent(){const e=this.options.content;if(typeof e=="function"){const t=ir(e,this,this.view,this.$content[0]);t&&this.$content.html(t)}else e?this.$content.html(e):this.$content.remove()}getBBox(){const e=this.view,t=this.options.bbox,o=typeof t=="function"?ir(t,this,e):t;return zn.create(Object.assign({x:0,y:0,width:1,height:1},o))}removeCell(){this.cell.remove()}toggleFork(){const e=this.view.cell.clone(),t=this.graph.hook.createCellView(e),o=this.graph.hook.validateConnection(this.view,null,t,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!o),t.remove()}toggleUnlink(){const e=this.model.getConnectedEdges(this.view.cell).length>0;this.$handleContainer.children(".unlink").toggleClass("hidden",!e)}startBatch(){this.model.startBatch("halo",{halo:this.cid})}stopBatch(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})}}(function(c){c.defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:e=>e.clone().removeZIndex()}})(Yy||(Yy={})),Object.getOwnPropertyNames(rp.prototype).forEach(c=>{c!=="constructor"&&Object.defineProperty(Yy.prototype,c,Object.getOwnPropertyDescriptor(rp.prototype,c))});var R0;(function(c){c.NODE_CLS="has-widget-halo"})(R0||(R0={}));var u1=function(c,e,t,o){var l=arguments.length,d=l<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(c,e,t,o);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(d=(l<3?f(d):l>3?f(e,t,d):f(e,t))||d);return l>3&&d&&Object.defineProperty(e,t,d),d};class yg extends Ki{constructor(e){super(),this.options=Object.assign(Object.assign({},yg.defaults),e),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName("widget-dnd")),this.draggingGraph=new io(Object.assign(Object.assign({},this.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),this.$container.append(this.draggingGraph.container)}get targetScroller(){const e=this.options.target;return io.isGraph(e)?e.scroller.widget:e}get targetGraph(){const e=this.options.target;return io.isGraph(e)?e:e.graph}get targetModel(){return this.targetGraph.model}get snapline(){return this.targetGraph.snapline.widget}start(e,t){const o=t;o.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(this.options.draggingContainer||document.body),this.sourceNode=e,this.prepareDragging(e,o.clientX,o.clientY);const l=this.updateNodePosition(o.clientX,o.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:o,node:e,cell:e,view:this.draggingView,x:l.x,y:l.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(yg.documentEvents,o.data)}isSnaplineEnabled(){return this.snapline&&!this.snapline.disabled}prepareDragging(e,t,o){const l=this.draggingGraph,d=l.model,f=this.options.getDragNode(e,{sourceNode:e,draggingGraph:l,targetGraph:this.targetGraph});f.position(0,0);let v=5;if(this.isSnaplineEnabled()&&(v+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){const _=this.targetGraph.transform.getScale();l.scale(_.sx,_.sy),v*=Math.max(_.sx,_.sy)}else l.scale(1,1);this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),d.resetCells([f]);const x=l.findViewByCell(f);x.undelegateEvents(),x.cell.off("changed"),l.fitToContent({padding:v,allowNewOrigin:"any"});const w=x.getBBox();this.geometryBBox=x.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(w.getTopLeft()),this.draggingNode=f,this.draggingView=x,this.draggingBBox=f.getBBox(),this.padding=v,this.originOffset=this.updateGraphPosition(t,o)}updateGraphPosition(e,t){const o=document.body.scrollTop||document.documentElement.scrollTop,l=this.delta,d=this.geometryBBox,f=this.padding||5,v={left:e-l.x-d.width/2-f,top:t-l.y-d.height/2-f+o};return this.draggingGraph&&this.$container.offset(v),v}updateNodePosition(e,t){const o=this.targetGraph.clientToLocal(e,t),l=this.draggingBBox;return o.x-=l.width/2,o.y-=l.height/2,this.draggingNode.position(o.x,o.y),o}snap({cell:e,current:t,options:o}){const l=e;if(o.snapped){const d=this.draggingBBox;l.position(d.x+o.tx,d.y+o.ty,{silent:!0}),this.draggingView.translate(),l.position(t.x,t.y,{silent:!0}),this.snapOffset={x:o.tx,y:o.ty}}else this.snapOffset=null}onDragging(e){const t=this.draggingView;if(t){e.preventDefault();const o=this.normalizeEvent(e),l=o.clientX,d=o.clientY;this.updateGraphPosition(l,d);const f=this.updateNodePosition(l,d),v=this.targetGraph.options.embedding.enabled,x=(v||this.isSnaplineEnabled())&&this.isInsideValidArea({x:l,y:d});if(v){t.setEventData(o,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});const w=t.getEventData(o);x?t.processEmbedding(o,w):t.clearEmbedding(w),this.candidateEmbedView=w.candidateEmbedView}this.isSnaplineEnabled()&&(x?this.snapline.snapOnMoving({e:o,view:t,x:f.x,y:f.y}):this.snapline.hide())}}onDragEnd(e){const t=this.draggingNode;if(t){const o=this.normalizeEvent(e),l=this.draggingView,d=this.draggingBBox,f=this.snapOffset;let v=d.x,x=d.y;f&&(v+=f.x,x+=f.y),t.position(v,x,{silent:!0});const w=this.drop(t,{x:o.clientX,y:o.clientY}),_=A=>{A?(this.onDropped(t),this.targetGraph.options.embedding.enabled&&l&&(l.setEventData(o,{cell:A,graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView}),l.finalizeEmbedding(o,l.getEventData(o)))):this.onDropInvalid(),this.candidateEmbedView=null,this.targetModel.stopBatch("dnd")};l2(w)?(this.undelegateDocumentEvents(),w.then(_)):_(w)}}clearDragging(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}onDropped(e){this.draggingNode===e&&(this.clearDragging(),this.$container.removeClass("dragging").remove())}onDropInvalid(){const e=this.draggingNode;if(e){const t=this.options.animation;if(t){const o=typeof t=="object"&&t.duration||150,l=typeof t=="object"&&t.easing||"swing";this.draggingView=null,this.$container.animate(this.originOffset,o,l,()=>this.onDropped(e))}else this.onDropped(e)}}isInsideValidArea(e){let t,o=null;const l=this.targetGraph,d=this.targetScroller;this.options.dndContainer&&(o=this.getDropArea(this.options.dndContainer));const f=o&&o.containsPoint(e);if(d)if(d.options.autoResize)t=this.getDropArea(d.container);else{const v=this.getDropArea(d.container);t=this.getDropArea(l.container).intersectsWithRect(v)}else t=this.getDropArea(l.container);return!f&&t&&t.containsPoint(e)}getDropArea(e){const t=this.$(e),o=t.offset(),l=document.body.scrollTop||document.documentElement.scrollTop,d=document.body.scrollLeft||document.documentElement.scrollLeft;return zn.create({x:o.left+parseInt(t.css("border-left-width"),10)-d,y:o.top+parseInt(t.css("border-top-width"),10)-l,width:t.innerWidth(),height:t.innerHeight()})}drop(e,t){if(this.isInsideValidArea(t)){const o=this.targetGraph,l=o.model,d=o.clientToLocal(t),f=this.sourceNode,v=this.options.getDropNode(e,{sourceNode:f,draggingNode:e,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),x=v.getBBox();d.x+=x.x-x.width/2,d.y+=x.y-x.height/2;const w=this.snapOffset?1:o.getGridSize();v.position(va.snapToGrid(d.x,w),va.snapToGrid(d.y,w)),v.removeZIndex();const _=this.options.validateNode,A=_?_(v,{sourceNode:f,draggingNode:e,droppingNode:v,targetGraph:o,draggingGraph:this.draggingGraph}):!0;return typeof A=="boolean"?A?(l.addCell(v,{stencil:this.cid}),v):null:lS(A).then(P=>P?(l.addCell(v,{stencil:this.cid}),v):null)}return null}onRemove(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}dispose(){this.remove()}}u1([Ki.dispose()],yg.prototype,"dispose",null),function(c){c.defaults={animation:!1,getDragNode:e=>e.clone(),getDropNode:e=>e.clone()},c.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(yg||(yg={}));function D3(c,e={}){const t=wl.isModel(c)?c:new wl().resetCells(c,{sort:!1,dryrun:!0}),o=t.getNodes(),l=e.columns||1,d=Math.ceil(o.length/l),f=e.dx||0,v=e.dy||0,x=e.center!==!1,w=e.resizeToFit===!0,_=e.marginX||0,A=e.marginY||0,P=[];let V=e.columnWidth;if(V==="compact")for(let ke=0;ke<l;ke+=1){const Se=tf.getNodesInColumn(o,ke,l);P.push(tf.getMaxDim(Se,"width")+f)}else{(V==null||V==="auto")&&(V=tf.getMaxDim(o,"width")+f);for(let ke=0;ke<l;ke+=1)P.push(V)}const q=tf.accumulate(P,_),te=[];let ge=e.rowHeight;if(ge==="compact")for(let ke=0;ke<d;ke+=1){const Se=tf.getNodesInRow(o,ke,l);te.push(tf.getMaxDim(Se,"height")+v)}else{(ge==null||ge==="auto")&&(ge=tf.getMaxDim(o,"height")+v);for(let ke=0;ke<d;ke+=1)te.push(ge)}const _e=tf.accumulate(te,A);t.startBatch("layout"),o.forEach((ke,Se)=>{const je=Se%l,nt=Math.floor(Se/l),wt=P[je],It=te[nt];let Jt=0,Un=0,An=ke.getSize();if(w){let On=wt-2*f,Zn=It-2*v;const si=An.height*(An.width?On/An.width:1),Wr=An.width*(An.height?Zn/An.height:1);It<si?On=Wr:Zn=si,An={width:On,height:Zn},ke.setSize(An,e)}x&&(Jt=(wt-An.width)/2,Un=(It-An.height)/2),ke.position(q[je]+f+Jt,_e[nt]+v+Un,e)}),t.stopBatch("layout")}var tf;(function(c){function e(d,f){return d.reduce((v,x)=>Math.max(x.getSize()[f],v),0)}c.getMaxDim=e;function t(d,f,v){const x=[];for(let w=v*f,_=w+v;w<_;w+=1)x.push(d[w]);return x}c.getNodesInRow=t;function o(d,f,v){const x=[];for(let w=f,_=d.length;w<_;w+=v)x.push(d[w]);return x}c.getNodesInColumn=o;function l(d,f){return d.reduce((v,x,w)=>(v.push(v[w]+x),v),[f||0])}c.accumulate=l})(tf||(tf={}));class Ky extends Ki{constructor(e){super(),this.graphs={},this.$groups={},this.options=Object.assign(Object.assign({},Ky.defaultOptions),e),this.dnd=new yg(this.options),this.onSearch=ty(this.onSearch,200),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(Sc.base)).attr("data-not-found-text",this.options.notFoundText||"No matches found"),this.options.collapsable=e.collapsable&&e.groups&&e.groups.some(o=>o.collapsable!==!1),this.options.collapsable&&(this.$container.addClass("collapsable"),e.groups&&e.groups.every(l=>l.collapsed||l.collapsable===!1)&&this.$container.addClass("collapsed")),this.$("<div/>").addClass(this.prefixClassName(Sc.title)).html(this.options.title).appendTo(this.$container),e.search&&this.$container.addClass("searchable").append(this.renderSearch()),this.$content=this.$("<div/>").addClass(this.prefixClassName(Sc.content)).appendTo(this.$container);const t=e.stencilGraphOptions||{};if(e.groups&&e.groups.length)e.groups.forEach(o=>{const l=this.$("<div/>").addClass(this.prefixClassName(Sc.group)).attr("data-name",o.name);(o.collapsable==null&&e.collapsable||o.collapsable!==!1)&&l.addClass("collapsable"),l.toggleClass("collapsed",o.collapsed===!0);const d=this.$("<h3/>").addClass(this.prefixClassName(Sc.groupTitle)).html(o.title||o.name),f=this.$("<div/>").addClass(this.prefixClassName(Sc.groupContent)),v=o.graphOptions,x=new io(Object.assign(Object.assign(Object.assign({},t),v),{container:document.createElement("div"),model:t.model||new wl,width:o.graphWidth||e.stencilGraphWidth,height:o.graphHeight||e.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));f.append(x.container),l.append(d,f).appendTo(this.$content),this.$groups[o.name]=l,this.graphs[o.name]=x});else{const o=new io(Object.assign(Object.assign({},t),{container:document.createElement("div"),model:t.model||new wl,width:e.stencilGraphWidth,height:e.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));this.$content.append(o.container),this.graphs[ip.defaultGroupName]=o}return this.startListening(),this}get targetScroller(){const e=this.options.target;return io.isGraph(e)?e.scroller.widget:e}get targetGraph(){const e=this.options.target;return io.isGraph(e)?e:e.graph}get targetModel(){return this.targetGraph.model}renderSearch(){return this.$("<div/>").addClass(this.prefixClassName(Sc.search)).append(this.$("<input/>").attr({type:"search",placeholder:this.options.placeholder||"Search"}).addClass(this.prefixClassName(Sc.searchText)))}startListening(){const e=this.prefixClassName(Sc.title),t=this.prefixClassName(Sc.searchText),o=this.prefixClassName(Sc.groupTitle);this.delegateEvents({[`click .${e}`]:"onTitleClick",[`touchstart .${e}`]:"onTitleClick",[`click .${o}`]:"onGroupTitleClick",[`touchstart .${o}`]:"onGroupTitleClick",[`input .${t}`]:"onSearch",[`focusin .${t}`]:"onSearchFocusIn",[`focusout .${t}`]:"onSearchFocusOut"}),Object.keys(this.graphs).forEach(l=>{this.graphs[l].on("cell:mousedown",this.onDragStart,this)})}stopListening(){this.undelegateEvents(),Object.keys(this.graphs).forEach(e=>{this.graphs[e].off("cell:mousedown",this.onDragStart,this)})}load(e,t){return Array.isArray(e)?this.loadGroup(e,t):this.options.groups&&Object.keys(this.options.groups).forEach(o=>{e[o]&&this.loadGroup(e[o],o)}),this}loadGroup(e,t){const o=this.getModel(t);if(o){const v=e.map(x=>bs.isNode(x)?x:bs.create(x));o.resetCells(v)}const l=this.getGroup(t);let d=this.options.stencilGraphHeight;l&&l.graphHeight!=null&&(d=l.graphHeight);const f=l&&l.layout||this.options.layout;if(f&&o&&ir(f,this,o,l),!d){const v=this.getGraph(t);v.fitToContent({minWidth:v.options.width,gridHeight:1,padding:l&&l.graphPadding||this.options.stencilGraphPadding||10})}return this}onDragStart(e){const{e:t,node:o}=e;this.dnd.start(o,t)}filter(e,t){const o=Object.keys(this.graphs).reduce((l,d)=>{const f=this.graphs[d],v=d===ip.defaultGroupName?null:d,x=f.model.getNodes().filter(P=>{let V=!1;typeof t=="function"?V=ir(t,this,P,e,v,this):typeof t=="boolean"?V=t:V=this.isCellMatched(P,e,t,e.toLowerCase()!==e);const q=f.renderer.findViewByCell(P);return q&&q.$(q.container).toggleClass("unmatched",!V),V}),w=x.length>0,_=this.options,A=new wl;return A.resetCells(x),_.layout&&ir(_.layout,this,A,this.getGroup(d)),this.$groups[d]&&this.$groups[d].toggleClass("unmatched",!w),f.fitToContent({gridWidth:1,gridHeight:1,padding:_.stencilGraphPadding||10}),l||w},!1);this.$container.toggleClass("not-found",!o)}isCellMatched(e,t,o,l){return t&&o?Object.keys(o).some(d=>{if(d==="*"||e.shape===d){const f=o[d];return typeof f=="boolean"?f:(Array.isArray(f)?f:[f]).some(x=>{let w=e.getPropByPath(x);return w!=null?(w=`${w}`,l||(w=w.toLowerCase()),w.indexOf(t)>=0):!1})}return!1}):!0}onSearch(e){this.filter(e.target.value,this.options.search)}onSearchFocusIn(){this.$container.addClass("is-focused")}onSearchFocusOut(){this.$container.removeClass("is-focused")}onTitleClick(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())}onGroupTitleClick(e){const t=this.$(e.target).closest(`.${this.prefixClassName(Sc.group)}`);this.toggleGroup(t.attr("data-name")||"");const o=Object.keys(this.$groups).every(l=>{const d=this.getGroup(l),f=this.$groups[l];return d&&d.collapsable===!1||f.hasClass("collapsed")});this.$container.toggleClass("collapsed",o)}getModel(e){const t=this.getGraph(e);return t?t.model:null}getGraph(e){return this.graphs[e||ip.defaultGroupName]}getGroup(e){const t=this.options.groups;return e!=null&&t&&t.length?t.find(o=>o.name===e):null}toggleGroup(e){return this.isGroupCollapsed(e)?this.expandGroup(e):this.collapseGroup(e),this}collapseGroup(e){if(this.isGroupCollapsable(e)){const t=this.$groups[e];t&&!this.isGroupCollapsed(e)&&(this.trigger("group:collapse",{name:e}),t.addClass("collapsed"))}return this}expandGroup(e){if(this.isGroupCollapsable(e)){const t=this.$groups[e];t&&this.isGroupCollapsed(e)&&(this.trigger("group:expand",{name:e}),t.removeClass("collapsed"))}return this}isGroupCollapsable(e){return this.$groups[e].hasClass("collapsable")}isGroupCollapsed(e){const t=this.$groups[e];return t&&t.hasClass("collapsed")}collapseGroups(){return Object.keys(this.$groups).forEach(e=>this.collapseGroup(e)),this}expandGroups(){return Object.keys(this.$groups).forEach(e=>this.expandGroup(e)),this}resizeGroup(e,t){const o=this.graphs[e];return o&&o.resize(t.width,t.height),this}onRemove(){Object.keys(this.graphs).forEach(e=>{this.graphs[e].view.remove(),delete this.graphs[e]}),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}}(function(c){c.defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout(e,t){const o={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};D3(e,Object.assign(Object.assign(Object.assign({},o),this.options.layoutOptions),t?t.layoutOptions:{}))}},yg.defaults)})(Ky||(Ky={}));var Sc;(function(c){c.base="widget-stencil",c.title=`${c.base}-title`,c.search=`${c.base}-search`,c.searchText=`${c.search}-text`,c.content=`${c.base}-content`,c.group=`${c.base}-group`,c.groupTitle=`${c.group}-title`,c.groupContent=`${c.group}-content`})(Sc||(Sc={}));var ip;(function(c){c.defaultGroupName="__default__"})(ip||(ip={}))},88845:function(De,L,M){"use strict";M.d(L,{g8:function(){return GN},w5:function(){return fN},It:function(){return rI},XS:function(){return cN},xZ:function(){return hD},ce:function(){return hR},BH:function(){return or},K4:function(){return Kt},Gn:function(){return em},KV:function(){return Si},ko:function(){return Yc},Ip:function(){return cR},G7:function(){return Oa},dX:function(){return D},Nf:function(){return j},UI:function(){return ge},zl:function(){return LI},Ak:function(){return lo},yc:function(){return nf},g:function(){return je},n1:function(){return Zl},ho:function(){return FA},$b:function(){return yo},Gv:function(){return pi},dV:function(){return Ms},cE:function(){return Ji},s4:function(){return o},Kd:function(){return FN},vD:function(){return xp},zg:function(){return ta},HJ:function(){return Sp},iR:function(){return fD},XZ:function(){return es},k$:function(){return $a}});var j={};M.r(j),M.d(j,{Container:function(){return Le},Contribution:function(){return Oi},DefaultContributionProvider:function(){return Rn},GlobalContainer:function(){return Ve},Module:function(){return Gr},OptionSymbol:function(){return Nr},Provider:function(){return Vt},Syringe:function(){return pe},SyringeModule:function(){return ri},Utils:function(){return Ee},contrib:function(){return ti},decorate:function(){return z.GW},inject:function(){return Zt},injectable:function(){return vt},named:function(){return gr},optional:function(){return z.jt},postConstruct:function(){return z.zY},register:function(){return Xe},registerSideOption:function(){return Qn},singleton:function(){return kt},transient:function(){return jn},unmanaged:function(){return z.NT}});var D={};M.r(D),M.d(D,{COMMAND_GLOBALS:function(){return Fs},COMMAND_REDOABLE:function(){return cu},COMMAND_UNDOABLE:function(){return $l},CONTEXTMENU_EDGE:function(){return Lg},CONTEXTMENU_NODE:function(){return Ka},CONTEXTMENU_TARGET:function(){return Pl},GRAPH_ENABLE_MULTI_SELECT:function(){return wh},GRAPH_FULLSCREEN:function(){return Pd},GRAPH_META:function(){return zu},GRAPH_SCALE:function(){return Ho},HISTORY_REDOABLE:function(){return Dd},HISTORY_UNDOABLE:function(){return Eh},IS_GROUP_SELECTED:function(){return wp},IS_NODE_SELECTED:function(){return Cp},IS_NORMAL_NODES_SELECTED:function(){return Ep},SELECTED_CELL:function(){return fo},SELECTED_CELLS:function(){return Ol},SELECTED_EDGES:function(){return Lc},SELECTED_GROUPS:function(){return vl},SELECTED_NODE:function(){return Ef},SELECTED_NODES:function(){return kc},getModelUtil:function(){return jo},isModelExistUtil:function(){return W0},useModelValueUtil:function(){return to}});var J={};M.r(J),M.d(J,{ConnectorNode:function(){return RR},DataIONode:function(){return kR},DatabaseNode:function(){return GR},DecisionNode:function(){return IR},DelayNode:function(){return ZR},DisplayNode:function(){return KR},DocumentNode:function(){return zR},ExtractNode:function(){return jR},HardDiskNode:function(){return FR},InternalStorageNode:function(){return ek},ManualInputNode:function(){return WR},ManualOperationNode:function(){return YR},MergeNode:function(){return HR},MultiDocumentNode:function(){return UR},NoteLeftNode:function(){return JR},NoteRightNode:function(){return QR},OffPageLinkNode:function(){return qR},OrNode:function(){return $R},PredefinedProcessNode:function(){return VR},PreparationNode:function(){return XR},ProcessNode:function(){return NR},StroedDataNode:function(){return BR},TerminalNode:function(){return LR},TextNode:function(){return tk}});var z=M(86700),Z=M(34155);function ee(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function Q(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?ee(Object(i),!0).forEach(function(s){he(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ee(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function ue(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ue=function(r){return typeof r}:ue=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ue(n)}function oe(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function ie(n,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}function ne(n,r,i){return r&&ie(n.prototype,r),i&&ie(n,i),n}function he(n,r,i){return r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n}function Ne(n){return le(n)||be(n)||se(n)||fe()}function le(n){if(Array.isArray(n))return ce(n)}function be(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function se(n,r){if(n){if(typeof n=="string")return ce(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ce(n,r)}}function ce(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}function fe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var we;(function(n){(function(r){var i=typeof M.g=="object"?M.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),s=a(n);typeof i.Reflect=="undefined"?i.Reflect=n:s=a(i.Reflect,s),r(s);function a(u,h){return function(p,g){typeof u[p]!="function"&&Object.defineProperty(u,p,{configurable:!0,writable:!0,value:g}),h&&h(p,g)}}})(function(r){var i=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",a=s&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",u=s&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",h=typeof Object.create=="function",p={__proto__:[]}instanceof Array,g=!h&&!p,y={create:h?function(){return sm(Object.create(null))}:p?function(){return sm({__proto__:null})}:function(){return sm({})},has:g?function(Ut,En){return i.call(Ut,En)}:function(Ut,En){return En in Ut},get:g?function(Ut,En){return i.call(Ut,En)?Ut[En]:void 0}:function(Ut,En){return Ut[En]}},b=Object.getPrototypeOf(Function),E=typeof Z=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",T=!E&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Kc(),O=!E&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Jy(),I=!E&&typeof WeakMap=="function"?WeakMap:y1(),k=new I;function B(Ut,En,Yn,hr){if(Mi(Yn)){if(!ia(Ut))throw new TypeError;if(!Yo(En))throw new TypeError;return _t(Ut,En)}else{if(!ia(Ut))throw new TypeError;if(!Vn(En))throw new TypeError;if(!Vn(hr)&&!Mi(hr)&&!ra(hr))throw new TypeError;return ra(hr)&&(hr=void 0),Yn=li(Yn),en(Ut,En,Yn,hr)}}r("decorate",B);function $(Ut,En){function Yn(hr,ei){if(!Vn(hr))throw new TypeError;if(!Mi(ei)&&!rf(ei))throw new TypeError;ji(Ut,En,hr,ei)}return Yn}r("metadata",$);function X(Ut,En,Yn,hr){if(!Vn(Yn))throw new TypeError;return Mi(hr)||(hr=li(hr)),ji(Ut,En,Yn,hr)}r("defineMetadata",X);function re(Ut,En,Yn){if(!Vn(En))throw new TypeError;return Mi(Yn)||(Yn=li(Yn)),Hn(Ut,En,Yn)}r("hasMetadata",re);function ye(Ut,En,Yn){if(!Vn(En))throw new TypeError;return Mi(Yn)||(Yn=li(Yn)),Gn(Ut,En,Yn)}r("hasOwnMetadata",ye);function me(Ut,En,Yn){if(!Vn(En))throw new TypeError;return Mi(Yn)||(Yn=li(Yn)),rr(Ut,En,Yn)}r("getMetadata",me);function We(Ut,En,Yn){if(!Vn(En))throw new TypeError;return Mi(Yn)||(Yn=li(Yn)),Vi(Ut,En,Yn)}r("getOwnMetadata",We);function at(Ut,En){if(!Vn(Ut))throw new TypeError;return Mi(En)||(En=li(En)),ai(Ut,En)}r("getMetadataKeys",at);function ft(Ut,En){if(!Vn(Ut))throw new TypeError;return Mi(En)||(En=li(En)),Zo(Ut,En)}r("getOwnMetadataKeys",ft);function Qt(Ut,En,Yn){if(!Vn(En))throw new TypeError;Mi(Yn)||(Yn=li(Yn));var hr=ct(En,Yn,!1);if(Mi(hr)||!hr.delete(Ut))return!1;if(hr.size>0)return!0;var ei=k.get(En);return ei.delete(Yn),ei.size>0||k.delete(En),!0}r("deleteMetadata",Qt);function _t(Ut,En){for(var Yn=Ut.length-1;Yn>=0;--Yn){var hr=Ut[Yn],ei=hr(En);if(!Mi(ei)&&!ra(ei)){if(!Yo(ei))throw new TypeError;En=ei}}return En}function en(Ut,En,Yn,hr){for(var ei=Ut.length-1;ei>=0;--ei){var Cr=Ut[ei],ki=Cr(En,Yn,hr);if(!Mi(ki)&&!ra(ki)){if(!Vn(ki))throw new TypeError;hr=ki}}return hr}function ct(Ut,En,Yn){var hr=k.get(Ut);if(Mi(hr)){if(!Yn)return;hr=new T,k.set(Ut,hr)}var ei=hr.get(En);if(Mi(ei)){if(!Yn)return;ei=new T,hr.set(En,ei)}return ei}function Hn(Ut,En,Yn){var hr=Gn(Ut,En,Yn);if(hr)return!0;var ei=qy(En);return ra(ei)?!1:Hn(Ut,ei,Yn)}function Gn(Ut,En,Yn){var hr=ct(En,Yn,!1);return Mi(hr)?!1:eo(hr.has(Ut))}function rr(Ut,En,Yn){var hr=Gn(Ut,En,Yn);if(hr)return Vi(Ut,En,Yn);var ei=qy(En);if(!ra(ei))return rr(Ut,ei,Yn)}function Vi(Ut,En,Yn){var hr=ct(En,Yn,!1);if(!Mi(hr))return hr.get(Ut)}function ji(Ut,En,Yn,hr){var ei=ct(Yn,hr,!0);ei.set(Ut,En)}function ai(Ut,En){var Yn=Zo(Ut,En),hr=qy(Ut);if(hr===null)return Yn;var ei=ai(hr,En);if(ei.length<=0)return Yn;if(Yn.length<=0)return ei;for(var Cr=new O,ki=[],oo=0,Lr=Yn;oo<Lr.length;oo++){var No=Lr[oo],Co=Cr.has(No);Co||(Cr.add(No),ki.push(No))}for(var ll=0,am=ei;ll<am.length;ll++){var No=am[ll],Co=Cr.has(No);Co||(Cr.add(No),ki.push(No))}return ki}function Zo(Ut,En){var Yn=[],hr=ct(Ut,En,!1);if(Mi(hr))return Yn;for(var ei=hr.keys(),Cr=im(ei),ki=0;;){var oo=om(Cr);if(!oo)return Yn.length=ki,Yn;var Lr=F0(oo);try{Yn[ki]=Lr}catch(No){try{Pw(Cr)}finally{throw No}}ki++}}function na(Ut){if(Ut===null)return 1;switch(typeof Ut){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Ut===null?1:6;default:return 6}}function Mi(Ut){return Ut===void 0}function ra(Ut){return Ut===null}function Ha(Ut){return typeof Ut=="symbol"}function Vn(Ut){return typeof Ut=="object"?Ut!==null:typeof Ut=="function"}function Or(Ut,En){switch(na(Ut)){case 0:return Ut;case 1:return Ut;case 2:return Ut;case 3:return Ut;case 4:return Ut;case 5:return Ut}var Yn=En===3?"string":En===5?"number":"default",hr=of(Ut,a);if(hr!==void 0){var ei=hr.call(Ut,Yn);if(Vn(ei))throw new TypeError;return ei}return Hi(Ut,Yn==="default"?"number":Yn)}function Hi(Ut,En){if(En==="string"){var Yn=Ut.toString;if(zl(Yn)){var hr=Yn.call(Ut);if(!Vn(hr))return hr}var ei=Ut.valueOf;if(zl(ei)){var hr=ei.call(Ut);if(!Vn(hr))return hr}}else{var ei=Ut.valueOf;if(zl(ei)){var hr=ei.call(Ut);if(!Vn(hr))return hr}var Cr=Ut.toString;if(zl(Cr)){var hr=Cr.call(Ut);if(!Vn(hr))return hr}}throw new TypeError}function eo(Ut){return!!Ut}function xo(Ut){return""+Ut}function li(Ut){var En=Or(Ut,3);return Ha(En)?En:xo(En)}function ia(Ut){return Array.isArray?Array.isArray(Ut):Ut instanceof Object?Ut instanceof Array:Object.prototype.toString.call(Ut)==="[object Array]"}function zl(Ut){return typeof Ut=="function"}function Yo(Ut){return typeof Ut=="function"}function rf(Ut){switch(na(Ut)){case 3:return!0;case 4:return!0;default:return!1}}function of(Ut,En){var Yn=Ut[En];if(Yn!=null){if(!zl(Yn))throw new TypeError;return Yn}}function im(Ut){var En=of(Ut,u);if(!zl(En))throw new TypeError;var Yn=En.call(Ut);if(!Vn(Yn))throw new TypeError;return Yn}function F0(Ut){return Ut.value}function om(Ut){var En=Ut.next();return En.done?!1:En}function Pw(Ut){var En=Ut.return;En&&En.call(Ut)}function qy(Ut){var En=Object.getPrototypeOf(Ut);if(typeof Ut!="function"||Ut===b||En!==b)return En;var Yn=Ut.prototype,hr=Yn&&Object.getPrototypeOf(Yn);if(hr==null||hr===Object.prototype)return En;var ei=hr.constructor;return typeof ei!="function"||ei===Ut?En:ei}function Kc(){var Ut={},En=[],Yn=function(){function ki(oo,Lr,No){this._index=0,this._keys=oo,this._values=Lr,this._selector=No}return ki.prototype["@@iterator"]=function(){return this},ki.prototype[u]=function(){return this},ki.prototype.next=function(){var oo=this._index;if(oo>=0&&oo<this._keys.length){var Lr=this._selector(this._keys[oo],this._values[oo]);return oo+1>=this._keys.length?(this._index=-1,this._keys=En,this._values=En):this._index++,{value:Lr,done:!1}}return{value:void 0,done:!0}},ki.prototype.throw=function(oo){throw this._index>=0&&(this._index=-1,this._keys=En,this._values=En),oo},ki.prototype.return=function(oo){return this._index>=0&&(this._index=-1,this._keys=En,this._values=En),{value:oo,done:!0}},ki}();return function(){function ki(){this._keys=[],this._values=[],this._cacheKey=Ut,this._cacheIndex=-2}return Object.defineProperty(ki.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ki.prototype.has=function(oo){return this._find(oo,!1)>=0},ki.prototype.get=function(oo){var Lr=this._find(oo,!1);return Lr>=0?this._values[Lr]:void 0},ki.prototype.set=function(oo,Lr){var No=this._find(oo,!0);return this._values[No]=Lr,this},ki.prototype.delete=function(oo){var Lr=this._find(oo,!1);if(Lr>=0){for(var No=this._keys.length,Co=Lr+1;Co<No;Co++)this._keys[Co-1]=this._keys[Co],this._values[Co-1]=this._values[Co];return this._keys.length--,this._values.length--,oo===this._cacheKey&&(this._cacheKey=Ut,this._cacheIndex=-2),!0}return!1},ki.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Ut,this._cacheIndex=-2},ki.prototype.keys=function(){return new Yn(this._keys,this._values,hr)},ki.prototype.values=function(){return new Yn(this._keys,this._values,ei)},ki.prototype.entries=function(){return new Yn(this._keys,this._values,Cr)},ki.prototype["@@iterator"]=function(){return this.entries()},ki.prototype[u]=function(){return this.entries()},ki.prototype._find=function(oo,Lr){return this._cacheKey!==oo&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=oo)),this._cacheIndex<0&&Lr&&(this._cacheIndex=this._keys.length,this._keys.push(oo),this._values.push(void 0)),this._cacheIndex},ki}();function hr(ki,oo){return ki}function ei(ki,oo){return oo}function Cr(ki,oo){return[ki,oo]}}function Jy(){return function(){function Ut(){this._map=new T}return Object.defineProperty(Ut.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Ut.prototype.has=function(En){return this._map.has(En)},Ut.prototype.add=function(En){return this._map.set(En,En),this},Ut.prototype.delete=function(En){return this._map.delete(En)},Ut.prototype.clear=function(){this._map.clear()},Ut.prototype.keys=function(){return this._map.keys()},Ut.prototype.values=function(){return this._map.values()},Ut.prototype.entries=function(){return this._map.entries()},Ut.prototype["@@iterator"]=function(){return this.keys()},Ut.prototype[u]=function(){return this.keys()},Ut}()}function y1(){var Ut=16,En=y.create(),Yn=hr();return function(){function Lr(){this._key=hr()}return Lr.prototype.has=function(No){var Co=ei(No,!1);return Co!==void 0?y.has(Co,this._key):!1},Lr.prototype.get=function(No){var Co=ei(No,!1);return Co!==void 0?y.get(Co,this._key):void 0},Lr.prototype.set=function(No,Co){var ll=ei(No,!0);return ll[this._key]=Co,this},Lr.prototype.delete=function(No){var Co=ei(No,!1);return Co!==void 0?delete Co[this._key]:!1},Lr.prototype.clear=function(){this._key=hr()},Lr}();function hr(){var Lr;do Lr="@@WeakMap@@"+oo();while(y.has(En,Lr));return En[Lr]=!0,Lr}function ei(Lr,No){if(!i.call(Lr,Yn)){if(!No)return;Object.defineProperty(Lr,Yn,{value:y.create()})}return Lr[Yn]}function Cr(Lr,No){for(var Co=0;Co<No;++Co)Lr[Co]=Math.random()*255|0;return Lr}function ki(Lr){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Lr)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Lr)):Cr(new Uint8Array(Lr),Lr):Cr(new Array(Lr),Lr)}function oo(){var Lr=ki(Ut);Lr[6]=Lr[6]&79|64,Lr[8]=Lr[8]&191|128;for(var No="",Co=0;Co<Ut;++Co){var ll=Lr[Co];(Co===4||Co===6||Co===8)&&(No+="-"),ll<16&&(No+="0"),No+=ll.toString(16).toLowerCase()}return No}}function sm(Ut){return Ut.__=void 0,delete Ut.__,Ut}})})(we||(we={}));var pe;(function(n){n.defineToken=function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{multiple:!0};return new n.DefinedToken(a,u)};var r=function a(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};oe(this,a),this.prototype={},this.name=void 0,this.multiple=void 0,this.symbol=void 0;var p=h.multiple,g=p===void 0?!1:p;this.name=u,this.symbol=Symbol(this.name),this.multiple=g};n.DefinedToken=r;function i(a){return!!a&&ue(a)==="object"&&"id"in a&&"registry"in a}n.isModule=i;var s;(function(a){a.singleton="singleton",a.transient="transient"})(s=n.Lifecycle||(n.Lifecycle={})),n.ClassOptionSymbol=Symbol("SyringeClassOptionSymbol"),n.DefaultOption={lifecycle:s.transient}})(pe||(pe={}));var Ee;(function(n){function r(p){return p instanceof Array?p:p!==void 0?[p]:[]}n.maybeArrayToArray=r;function i(p){return!!(p&&typeof p=="function"&&"prototype"in p)}n.isClass=i;function s(p){return!!(p&&ue(p)==="object"&&"symbol"in p&&"multiple"in p)}n.isDefinedToken=s;function a(p){return!!(p&&ue(p)==="object"&&"token"in p)}n.isInjectOption=a;function u(p){return!!(p&&ue(p)==="object"&&"token"in p&&"named"in p)}n.isNamedToken=u;function h(p){return n.isDefinedToken(p)&&p.multiple}n.isMultipleEnabled=h})(Ee||(Ee={}));function it(n){return n.inSingletonScope()}function G(n){return n.inTransientScope()}function Be(n,r){return r.lifecycle===pe.Lifecycle.singleton?it(n):G(n)}function Ke(n,r){n.whenTargetNamed(Pe(r))}function dt(n,r){return r.container.bind(In(n))}function jt(n,r){var i=r.container.parent,s=i&&i.isBound(In(n));return r.container.isBound(In(n))&&!s?r.container.rebind(In(n)):r.container.bind(In(n))}function mn(n){return n&&ue(n)==="object"&&"container"in n&&"inversify"in n}function Pe(n){return Ee.isDefinedToken(n)?n.symbol:n}function In(n){return Ee.isDefinedToken(n)?n.symbol:n}var hn=new z.W2;function vt(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=(0,z.b2)();return function(i){Reflect.defineMetadata(pe.ClassOptionSymbol,Q(Q({},n),{},{target:i}),i),r(i)}}function kt(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vt(Q(Q({},n),{},{lifecycle:pe.Lifecycle.singleton}))}function jn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vt(Q(Q({},n),{},{lifecycle:pe.Lifecycle.transient}))}function Zt(n){return(0,z.f3)(In(n))}function gr(n){return(0,z.t6)(Pe(n))}var Nr=Symbol("SyringeOptionSymbol"),Qn=function(r,i){Reflect.defineMetadata(Nr,r,i)};function Hr(n){var r=Ee.maybeArrayToArray(n.token),i=Ee.maybeArrayToArray(n.useClass),s=Ee.maybeArrayToArray(n.useDynamic),a=Ee.maybeArrayToArray(n.useFactory),u=Ee.maybeArrayToArray(n.contrib),h=n.lifecycle||pe.Lifecycle.transient,p={token:r,useClass:i,lifecycle:u.length>0?pe.Lifecycle.singleton:h,contrib:u,useDynamic:s,useFactory:a};return"useValue"in n&&(p.useValue=n.useValue),p}var vr=function(){function n(r,i,s){oe(this,n),this.token=void 0,this.rawToken=void 0,this.named=void 0,this.generalToken=void 0,this.option=void 0,this.context=void 0,this.mutiple=void 0,this.context=r,this.token=i,this.option=s,this.rawToken=Ee.isNamedToken(i)?i.token:i,this.named=Ee.isNamedToken(i)?i.named:void 0,this.mutiple=!!this.named||Ee.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}return ne(n,[{key:"resolve",value:function(){var i=this,s=this.context;mn(s)&&(this.mutiple?this.resolveMutilple(s):(this.resolveMono(s),!this.named&&this.option.contrib.length>0&&this.option.contrib.forEach(function(a){Ee.isMultipleEnabled(a)?dt(a,s).toService(i.generalToken):jt(a,s).toService(i.generalToken)})))}},{key:"resolveMono",value:function(i){var s=this;if("useValue"in this.option)return jt(this.generalToken,i).toConstantValue(this.option.useValue);if(this.option.useDynamic.length>0){var a=this.option.useDynamic[this.option.useDynamic.length-1];return Be(jt(this.generalToken,i).toDynamicValue(function(){return a({container:s.context})}),this.option)}if(this.option.useFactory.length>0){var u=this.option.useFactory[this.option.useFactory.length-1];return jt(this.generalToken,i).toFactory(function(){return u({container:s.context})})}if(this.option.useClass.length>0){var h=this.option.useClass[this.option.useClass.length-1];return Be(jt(this.generalToken,i).to(h),this.option)}}},{key:"resolveMutilple",value:function(i){var s=this,a=this.option.useClass.map(function(g){return Be(dt(s.generalToken,i).to(g),s.option)}),u=this.option.useDynamic.map(function(g){return Be(dt(s.generalToken,i).toDynamicValue(function(){return g({container:s.context})}),s.option)}),h=this.option.useFactory.map(function(g){return dt(s.generalToken,i).toFactory(function(){return g({container:s.context})})}),p="useValue"in this.option?dt(this.generalToken,i).toConstantValue(this.option.useValue):void 0;this.named&&(a.forEach(function(g){return s.named&&Ke(g,s.named)}),u.forEach(function(g){return s.named&&Ke(g,s.named)}),h.forEach(function(g){return s.named&&Ke(g,s.named)}),p&&Ke(p,this.named))}}],[{key:"resolveTarget",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{try{var u=Reflect.getMetadata(Nr,s);u&&n.resolveOption(i,u)}catch(y){}if(Ee.isClass(s))if(!a.useClass)a.useClass=[s];else{var h=Ee.maybeArrayToArray(a.useClass);h.unshift(s),a.useClass=h}var p;try{p=Reflect.getMetadata(pe.ClassOptionSymbol,s)}catch(y){}if(p=Q(Q({},p||{}),a),!p.token)p.token=[s];else{var g=Ee.maybeArrayToArray(p.token);g.unshift(s),p.token=g}n.resolveOption(i,p)}catch(y){}}},{key:"resolveOption",value:function(i,s){var a=Hr(Q(Q({},n.globalConfig),s));a.useClass.length===0&&a.useDynamic.length===0&&a.useFactory.length===0&&!("useValue"in a)||a.token.forEach(function(u){var h=new n(i,u,Q({},a));h.resolve()})}}]),n}();vr.globalConfig=pe.DefaultOption;var Le=function(){function n(r){oe(this,n),this.loadedModules=[],this.container=void 0,this.inversify=!0,this.parent=void 0,r?this.container=r:this.container=new z.W2}return ne(n,[{key:"load",value:function(i,s){(s||!this.loadedModules.includes(i.id))&&(i.registry(this.register.bind(this),this.resolveContext()),this.loadedModules.push(i.id))}},{key:"remove",value:function(i){return this.container.unbind(In(i))}},{key:"get",value:function(i){return this.container.get(In(i))}},{key:"getNamed",value:function(i,s){return this.container.getNamed(In(i),Pe(s))}},{key:"getAll",value:function(i){return this.container.getAll(In(i))}},{key:"getAllNamed",value:function(i,s){return this.container.getAllNamed(In(i),Pe(s))}},{key:"isBound",value:function(i){return this.container.isBound(In(i))}},{key:"isBoundNamed",value:function(i,s){return this.container.isBoundNamed(In(i),Pe(s))}},{key:"createChild",value:function(){var i=this.container.createChild(),s=new n(i);return s.parent=this,s}},{key:"register",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ee.isInjectOption(i)?vr.resolveOption(this,i):vr.resolveTarget(this,i,s)}},{key:"resolveContext",value:function(){return{container:this}}}],[{key:"config",value:function(i){vr.globalConfig=i}}]),n}(),Ve=new Le(hn),Xe=Ve.register.bind(Ve),Vt=pe.defineToken("ContributionProvider"),Rn=function(){function n(r,i,s){oe(this,n),this.option={recursive:!1,cache:!0},this.services=void 0,this.serviceIdentifier=void 0,this.container=void 0,this.container=i,this.serviceIdentifier=r,s&&(this.option=Q(Q({},this.option),s))}return ne(n,[{key:"setServices",value:function(i){for(var s=[],a=this.container;a;){if(a.isBound(this.serviceIdentifier)){var u=a.getAll(this.serviceIdentifier);s.push.apply(s,Ne(u))}a=i?a.parent:void 0}return s}},{key:"getContributions",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Q(Q({},this.option),i),a=s.cache,u=s.recursive;return(!a||this.services===void 0)&&(this.services=this.setServices(!!u)),this.services}}]),n}();function Fn(n,r){return{token:{token:Vt,named:n},useDynamic:function(s){return new Rn(n,s.container,r)},lifecycle:pe.Lifecycle.singleton}}function _r(n,r,i){n({token:{token:Vt,named:r},useDynamic:function(a){return new Rn(r,a.container,i)},lifecycle:pe.Lifecycle.singleton})}var ri=function(){function n(r){oe(this,n),this.id=void 0,this.baseRegistry=void 0,this.optionCollection=void 0,n.moduleId+=1,this.id=n.moduleId,this.baseRegistry=r}return ne(n,[{key:"registry",get:function(){var i=this;return function(s,a){i.baseRegistry&&i.baseRegistry(s,a),i.optionCollection&&i.optionCollection.forEach(function(u){return s(u)})}}},{key:"options",get:function(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}},{key:"register",value:function(){for(var i=this,s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return a.forEach(function(h){return i.options.push(h)}),this}},{key:"contribution",value:function(){for(var i=this,s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];return a.forEach(function(h){return i.options.push(Fn(h))}),this}}]),n}();ri.moduleId=0;function Gr(n){return new ri(n)}var ti=function(r){return function(i,s,a){gr(r)(i,s,a),Zt(Vt)(i,s,a)}},Oi;(function(n){n.Provider=Vt,n.register=_r})(Oi||(Oi={}));var lo;(function(n){let r;(function(s){s.TOP="top",s.BOTTOM="bottom",s.RIGHT="right",s.LEFT="left"})(r=n.AnchorGroup||(n.AnchorGroup={}));let i;(function(s){s.INPUT="input",s.OUTPUT="output"})(i=n.AnchorType||(n.AnchorType={}))})(lo||(lo={}));var F=M(70655),H=M(67294),sf=M(94184),Te=M.n(sf),cl=M(28660),wr=M(88790),Pa=M(72834),ic;(function(n){function r(s){return!!s&&typeof s=="object"&&"dispose"in s&&typeof s.dispose=="function"}n.is=r;function i(s){return{dispose:s}}n.create=i,n.NONE=i(()=>{})})(ic||(ic={}));let Qo;var Da;(function(n){n.None=()=>ic.NONE;function r(i,s){return(a,u)=>i(h=>a.call(u,s(h)),void 0)}n.map=r})(Da||(Da={})),Qo=Symbol.iterator;class Nt{constructor(r=!1){this.mono=void 0,this._callbacks=void 0,this.mono=r}get callbacks(){return this._callbacks||(this._callbacks=[]),this._callbacks}get length(){return this.callbacks.length}add(r,i=void 0){this.callbacks.push([r,i])}remove(r,i=void 0){if(this.isEmpty())return;let s=!1;for(let a=0;a<this.length;a+=1)if(this.callbacks[a][0]===r){if(this.callbacks[a][1]===i){this.callbacks.splice(a,1);return}s=!0}if(s)throw new Error("You should remove it with the same context you add it")}[Qo](){return this.isEmpty()?[][Symbol.iterator]():this.callbacks.slice(0).map(i=>(...s)=>i[0].apply(i[1],s))[Symbol.iterator]()}invoke(...r){const i=[];for(const s of this)try{i.push(s(...r))}catch(a){console.error(a)}return i}isEmpty(){return this.callbacks.length===0}dispose(){this._callbacks=void 0}}class Yt{constructor(r={}){this.options=void 0,this._event=void 0,this._callbacks=void 0,this.disposed=!1,this.options=r}get callbacks(){return this._callbacks||(this._callbacks=new Nt),this._callbacks}get event(){return this._event||(this._event=(r,i)=>{this.options.onFirstListenerAdd&&this.callbacks.isEmpty()&&this.options.onFirstListenerAdd(this),this.callbacks.add(r,i);const s={dispose:()=>{s.dispose=Yt.noop,this.disposed||(this.callbacks.remove(r,i),s.dispose=Yt.noop,this.options.onLastListenerRemove&&this.callbacks.isEmpty()&&this.options.onLastListenerRemove(this))}};return s}),this._event}fire(r){this._callbacks&&this.callbacks.invoke(r)}sequence(r){return iN(this,null,function*(){for(const i of this.callbacks)if(!(yield r(i)))break})}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0),this.disposed=!0}}Yt.noop=()=>{};var Pt;(function(n){function r(s){return!!s&&typeof s=="object"&&"dispose"in s&&typeof s.dispose=="function"}n.is=r;function i(s){return{dispose:s}}n.create=i,n.NULL=i(()=>{})})(Pt||(Pt={}));class Kt{constructor(...r){this.disposables=[],this.onDisposeEmitter=new Yt,this.disposingElements=!1,r.forEach(i=>this.push(i))}get onDispose(){return this.onDisposeEmitter.event}checkDisposed(){this.disposed&&!this.disposingElements&&(this.onDisposeEmitter.fire(void 0),this.onDisposeEmitter.dispose())}get disposed(){return this.disposables.length===0}dispose(){return(0,F.mG)(this,void 0,void 0,function*(){if(!(this.disposed||this.disposingElements)){for(this.disposingElements=!0;!this.disposed;)try{yield this.disposables.pop().dispose()}catch(r){console.error(r)}this.disposingElements=!1,this.checkDisposed()}})}push(r){const{disposables:i}=this;i.push(r);const s=r.dispose.bind(r),a=Pt.create(()=>{const u=i.indexOf(r);u!==-1&&i.splice(u,1),this.checkDisposed()});return r.dispose=()=>{a.dispose(),s()},a}pushAll(r){return r.map(i=>this.push(i))}}class or{constructor(){this.isResolved=!1,this.isRejected=!1,this.promise=new Promise((r,i)=>{this.resolve=(...s)=>{this.isResolved=!0,r(...s)},this.reject=(...s)=>{this.isRejected=!0,i(...s)}})}}const $i="X6_NODE_PORTAL_NODE_VIEW",Xr="xflow",ni=.01,Ir=1.5,yi="XFLOW_DEFAULT_NODE",ii="XFLOW_DEFAULT_GROUP_NODE",zo="XFLOW_DEFAULT_EDGE",ul="XFLOW_COPY_ITEMS",sh={width:180,height:36};function $a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const r=Math.random()*16|0;return(n=="x"?r:r&3|8).toString(16)})}var cs=M(13982),lp=M(28638);const cd=H.createContext(null);cd.displayName="XFlowAppContext";const es=()=>{const n=H.useContext(cd);return n&&n.getApp?n.getApp():null},ah=()=>H.useContext(cd);class cp{constructor(r=!1){this.cache=null,this.setApp=i=>{this.cache=i,this.onAppChangeCallback&&this.onAppChangeCallback(i)},this.isUserDefined=()=>this.isUserDefinedFlag,this.getApp=()=>this.cache,this.onAppChange=i=>{this.onAppChangeCallback=i},this.dispose=()=>{this.cache=null},this.isUserDefinedFlag=r}}const _c=n=>{const r=ah(),[,i]=H.useState(null),s=H.useMemo(()=>r&&r.isUserDefined()?r:new cp(!1),[]);return s.isUserDefined()||s.onAppChange(()=>i(0)),H.useEffect(()=>{n.app&&s.setApp(n.app)},[n.app]),s.isUserDefined()?H.createElement(H.Fragment,null,n.children):H.createElement(cd.Provider,{value:Object.assign({},s)},n.children)};_c.displayName="XFlowAppInternalProvider";const af=({children:n})=>{const[,r]=H.useState(null),i=H.useMemo(()=>new cp(!0),[]);return i.onAppChange(()=>r(0)),H.createElement(cd.Provider,{value:Object.assign({},i)},n)};af.displayName="XFlowAppProvider";var Ji;(function(n){const r="\u8282\u70B9\u64CD\u4F5C";n.ADD_NODE={id:"xflow:add-node",label:"\u6DFB\u52A0\u8282\u70B9",category:r},n.DEL_NODE={id:"xflow:del-node",label:"\u5220\u9664\u8282\u70B9",category:r},n.UPDATE_NODE_PORT={id:"xflow:update-node-port",label:"\u5220\u9664\u8FDE\u63A5\u6869",category:r},n.UPDATE_NODE={id:"xflow:update-node",label:"\u66F4\u65B0\u8282\u70B9",category:r},n.HIGHLIGHT_NODE={id:"xflow:highlight-node",label:"\u9AD8\u4EAE\u8282\u70B9",category:r},n.SELECT_NODE={id:"xflow:select-node",label:"\u9009\u4E2D\u8282\u70B9",category:r},n.MOVE_NODE={id:"xflow:move-node",label:"Move Node",category:r},n.CENTER_NODE={id:"xflow:center-node",label:"\u5C45\u4E2D\u8282\u70B9",category:r},n.FRONT_NODE={id:"xflow:front-node",label:"\u524D\u7F6E\u8282\u70B9",category:r},n.BACK_NODE={id:"xflow:back-node",label:"\u540E\u7F6E\u8282\u70B9",category:r}})(Ji||(Ji={}));var yo;(function(n){const r="\u8FB9\u64CD\u4F5C";n.ADD_EDGE={id:"xflow:add-edge",label:"\u6DFB\u52A0\u8FB9",category:r},n.DEL_EDGE={id:"xflow:del-edge",label:"\u5220\u9664\u8FB9",category:r},n.UPDATE_EDGE={id:"xflow:update-edge",label:"\u66F4\u65B0\u8FB9",category:r},n.HIGHLIGHT_EDGE={id:"xflow:highlight-edge",label:"\u9AD8\u4EAE\u8FB9",category:r},n.FRONT_EDGE={id:"xflow:front-edge",label:"\u524D\u7F6E\u53D8",category:r},n.BACK_EDGE={id:"xflow:back-edge",label:"\u540E\u7F6E\u8FB9",category:r}})(yo||(yo={}));var pi;(function(n){const r="\u753B\u5E03\u64CD\u4F5C";n.LOAD_META={id:"xflow:load-meta",label:"\u83B7\u53D6\u5143\u6570\u636E",category:r},n.LOAD_DATA={id:"xflow:load-data",label:"\u83B7\u53D6\u56FE\u6570\u636E",category:r},n.SAVE_GRAPH_DATA={id:"xflow:save-graph-data",label:"\u4FDD\u5B58",category:r},n.GRAPH_LAYOUT={id:"xflow:layout",label:"\u8BA1\u7B97\u5E03\u5C40",category:r},n.GRAPH_RENDER={id:"xflow:graph-render",label:"\u6E32\u67D3\u753B\u5E03",category:r},n.UNDO_CMD={id:"xflow:undo-cmd",label:"\u64A4\u9500",category:r},n.REDO_CMD={id:"xflow:redo-cmd",label:"\u91CD\u505A",category:r},n.GRAPH_INSTANCE_COMMAND={id:"xflow:graph-instacne-cmd",label:"Graph\u901A\u7528Command",category:r},n.GRAPH_ZOOM={id:"xflow:graph-zoom",label:"\u7F29\u653E\u753B\u5E03",category:r},n.GRAPH_FULLSCREEN={id:"xflow:graph-fullscreen",label:"\u5168\u5C4F",category:r},n.GRAPH_RESIZE={id:"xflow:graph-resize",label:"\u8C03\u6574\u7A97\u53E3\u5927\u5C0F",category:r},n.GRAPH_COPY={id:"xflow:graph-copy-selection",label:"\u590D\u5236",category:r},n.GRAPH_PASTE={id:"xflow:graph-paste-selection",label:"\u7C98\u8D34",category:r},n.GRAPH_TOGGLE_MULTI_SELECT={id:"xflow:graph-toggle-multi-select",label:"\u542F\u7528\u6846\u9009",category:r},n.GRAPH_ADD_TOOL={id:"xflow:add-tool",label:"\u6DFB\u52A0\u5DE5\u5177",category:r},n.GRAPH_DEL_TOOL={id:"xflow:del-tool",label:"\u5220\u9664\u5DE5\u5177",category:r},n.GRAPH_HISTORY_UNDO={id:"xflow:history-undo",label:"history undo",category:r},n.GRAPH_HISTORY_REDO={id:"xflow:history-redo",label:"history redo",category:r},n.GRAPH_HISTORY_RESET={id:"xflow:history-reset",label:"history reset",category:r},n.GRAPH_HISTORY_TOGGLE={id:"xflow:history-toggle",label:"history toggle",category:r}})(pi||(pi={}));var Ro;(function(n){const r="\u72B6\u6001\u64CD\u4F5C";n.UPDATE_MODEL={id:"xflow:update-model",label:"\u8BBE\u7F6E\u72B6\u6001\u503C",category:r}})(Ro||(Ro={}));var Ms;(function(n){const r="\u7FA4\u7EC4\u64CD\u4F5C";n.INIT_GROUP={id:"xflow:init-group",label:"\u521D\u59CB\u5316\u7FA4\u7EC4",category:r},n.ADD_GROUP={id:"xflow:add-group",label:"\u65B0\u5EFA\u7FA4\u7EC4",category:r},n.DEL_GROUP={id:"xflow:del-group",label:"\u89E3\u6563\u7FA4\u7EC4",category:r},n.COLLAPSE_GROUP={id:"xflow:collapse-group",label:"\u6298\u53E0\u7FA4\u7EC4",category:r}})(Ms||(Ms={}));const qc=n=>{const{cell:r}=n,i=es(),s=n.data.isCollapsed||!1,a=h=>{h.preventDefault(),i.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!1})},u=h=>{h.preventDefault(),i.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!0,gap:3})};return H.createElement("div",{className:"xflow-default-group-node"},H.createElement("div",{className:"xflow-group-header"},H.createElement("div",{className:"header-left"},n.data.label),H.createElement("div",{className:"header-right"},s&&H.createElement(cs.Z,{onClick:a}),!s&&H.createElement(lp.Z,{onClick:u}))))};qc.displayName="XFlowDefaultGroupNode";var up=M(87740),lf=M(18429),cf=M(8751),lh=M(11475),uf=M(45605),Jc=M(13520);const dp={fontSize:"16px",color:"#3057e3"};var El;(function(n){n.SUCCESS="success",n.PROCESSING="processing",n.ERROR="error",n.DEFAULT="default",n.WARNING="warning"})(El||(El={}));const ud=n=>{if(n.hide)return null;switch(n.status){case El.PROCESSING:return H.createElement(up.Z,{spin:!0,style:{color:"#c1cdf7",fontSize:"16px"}});case El.ERROR:return H.createElement(lf.Z,{style:{color:"#ff4d4f",fontSize:"16px"}});case El.SUCCESS:return H.createElement(cf.Z,{style:{color:"#39ca74cc",fontSize:"16px"}});case El.WARNING:return H.createElement(lh.Z,{style:{color:"#faad14",fontSize:"16px"}});case El.DEFAULT:return H.createElement(uf.Z,{style:{color:"#d9d9d9",fontSize:"16px"}});default:return null}},df=n=>{const r=H.isValidElement(n.data.icon)?n.data.icon:H.createElement(Jc.Z,{style:dp});return H.createElement("div",{className:`xflow-default-node ${n.isNodeTreePanel?"panel-node":""}`},H.createElement("span",{className:"icon"},r),H.createElement("span",{className:"label"},n.data.label),H.createElement("span",{className:"status"},H.createElement(ud,{status:n.data&&n.data.status,hide:n.isNodeTreePanel})))};df.displayName="XFlowDefaultNode";var Qc;(function(n){n.CONFIG_TYPE="GraphConfig",n.defaultNodeTypeParser=r=>r.renderKey,n.defaultEdgeTypeParser=r=>r.renderKey,n.defaultNodeMapValue=[[yi,df],[ii,qc]]})(Qc||(Qc={}));class Su{constructor(){this.CONFIG_TYPE=Qc.CONFIG_TYPE,this.x6Options=new or,this.rootContainer=new or,this.graphContainer=new or,this.nodeRender=new Map(Qc.defaultNodeMapValue),this.edgeRender=new Map,this.nodeTypeParser=Qc.defaultNodeTypeParser,this.edgeTypeParser=Qc.defaultEdgeTypeParser,this.events=[],this.mergeX6Config=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=yield this.getX6Config();return Object.assign(i,r)}),this.getX6Config=()=>(0,F.mG)(this,void 0,void 0,function*(){return yield this.x6Options.promise}),this.setX6Config=r=>{var i;const s=this.getDefaultGraphOptions();(i=this.x6Options)===null||i===void 0||i.resolve(Object.assign(Object.assign({},s),r))},this.setAppContainer=r=>{this.appContainer=r},this.setRootContainer=r=>{r&&(this===null||this===void 0||this.rootContainer.resolve(r))},this.setGraphContainer=r=>{var i;r&&((i=this.graphContainer)===null||i===void 0||i.resolve(r))},this.setEvents=r=>{this.events=r},this.setDefaultNodeRender=r=>{this.nodeRender.set(yi,r)},this.setDefaultEdgeRender=r=>{this.edgeRender.set(zo,r)},this.setNodeRender=(r,i)=>{this.nodeRender.set(r,i)},this.setEdgeRender=(r,i)=>{this.edgeRender.set(r,i)},this.setNodeTypeParser=r=>{this.nodeTypeParser=r},this.setEdgeTypeParser=r=>{this.edgeTypeParser=r},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){const[r,i,s]=yield Promise.all([this.rootContainer.promise,this.graphContainer.promise,this.x6Options.promise]);return{xflowInstanceId:this.xflowInstanceId,graphId:this.graphId,nodeViewId:this.graphId,appContainer:this.appContainer,rootContainer:r,graphContainer:i,x6Options:s,events:this.events,nodeRender:this.nodeRender,edgeRender:this.edgeRender,nodeTypeParser:this.nodeTypeParser,edgeTypeParser:this.edgeTypeParser}}),this.getDefaultGraphOptions=()=>({rotating:!1,resizing:!1,connecting:{snap:!0,dangling:!1,highlight:!1,connectionPoint:"rect",router:{name:"er"},connector:{name:"rounded",args:{radius:15}}},background:{},grid:{visible:!0},selecting:{strict:!0,enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},snapline:{enabled:!1},history:{enabled:!1},clipboard:{enabled:!0,useLocalStorage:!0},scroller:{enabled:!1},mousewheel:{enabled:!0,minScale:ni,maxScale:Ir,factor:1.1,modifiers:["ctrl","meta"]},panning:{enabled:!0},scaling:{min:ni,max:Ir},keyboard:{enabled:!0},interacting:{nodeMovable:!0,edgeLabelMovable:!1},async:!1}),this.dispose=()=>{this.rootContainer=new or,this.graphContainer=new or,this.x6Options=new or},this.graphId=$a()}}const _u=Symbol("IGraphOptionProvider"),ch=(n,r)=>{n(_u,{lifecycle:pe.Lifecycle.singleton,useDynamic:()=>({getOptions:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.getConfig()})})})},hf=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new Su;return n(a,i),a},[i])};var Eg=M(77190),Na=M.n(Eg);var dd=function(r,i){return dd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var u in a)a.hasOwnProperty(u)&&(s[u]=a[u])},dd(r,i)};function xs(n,r){dd(n,r);function i(){this.constructor=n}n.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var hd=function(){return hd=Object.assign||function(i){for(var s,a=1,u=arguments.length;a<u;a++){s=arguments[a];for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(i[h]=s[h])}return i},hd.apply(this,arguments)};function Sg(n,r){var i={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&r.indexOf(s)<0&&(i[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)r.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(i[s[a]]=n[s[a]]);return i}function Wa(n,r,i,s){var a=arguments.length,u=a<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,i):s,h;if((typeof Reflect=="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,r,i,s);else for(var p=n.length-1;p>=0;p--)(h=n[p])&&(u=(a<3?h(u):a>3?h(r,i,u):h(r,i))||u);return a>3&&u&&Object.defineProperty(r,i,u),u}function fd(n,r){return function(i,s){r(i,s,n)}}function ff(n,r){if((typeof Reflect=="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,r)}function Au(n,r,i,s){function a(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(b){try{y(s.next(b))}catch(E){h(E)}}function g(b){try{y(s.throw(b))}catch(E){h(E)}}function y(b){b.done?u(b.value):a(b.value).then(p,g)}y((s=s.apply(n,r||[])).next())})}function pd(n,r){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,a,u,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(y){return function(b){return g([y,b])}}function g(y){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,a&&(u=y[0]&2?a.return:y[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,y[1])).done)return u;switch(a=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return i.label++,{value:y[1],done:!1};case 5:i.label++,a=y[1],y=[0];continue;case 7:y=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){i=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){i.label=y[1];break}if(y[0]===6&&i.label<u[1]){i.label=u[1],u=y;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(y);break}u[2]&&i.ops.pop(),i.trys.pop();continue}y=r.call(n,i)}catch(b){y=[6,b],a=0}finally{s=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function uh(n,r,i,s){s===void 0&&(s=i),n[s]=r[i]}function pf(n,r){for(var i in n)i!=="default"&&!r.hasOwnProperty(i)&&(r[i]=n[i])}function gd(n){var r=typeof Symbol=="function"&&Symbol.iterator,i=r&&n[r],s=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xa(n,r){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var s=i.call(n),a,u=[],h;try{for(;(r===void 0||r-- >0)&&!(a=s.next()).done;)u.push(a.value)}catch(p){h={error:p}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(h)throw h.error}}return u}function vd(){for(var n=[],r=0;r<arguments.length;r++)n=n.concat(Xa(arguments[r]));return n}function md(){for(var n=0,r=0,i=arguments.length;r<i;r++)n+=arguments[r].length;for(var s=Array(n),a=0,r=0;r<i;r++)for(var u=arguments[r],h=0,p=u.length;h<p;h++,a++)s[a]=u[h];return s}function oa(n){return this instanceof oa?(this.v=n,this):new oa(n)}function hp(n,r,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(n,r||[]),a,u=[];return a={},h("next"),h("throw"),h("return"),a[Symbol.asyncIterator]=function(){return this},a;function h(T){s[T]&&(a[T]=function(O){return new Promise(function(I,k){u.push([T,O,I,k])>1||p(T,O)})})}function p(T,O){try{g(s[T](O))}catch(I){E(u[0][3],I)}}function g(T){T.value instanceof oa?Promise.resolve(T.value.v).then(y,b):E(u[0][2],T)}function y(T){p("next",T)}function b(T){p("throw",T)}function E(T,O){T(O),u.shift(),u.length&&p(u[0][0],u[0][1])}}function yd(n){var r,i;return r={},s("next"),s("throw",function(a){throw a}),s("return"),r[Symbol.iterator]=function(){return this},r;function s(a,u){r[a]=n[a]?function(h){return(i=!i)?{value:oa(n[a](h)),done:a==="return"}:u?u(h):h}:u}}function fp(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n[Symbol.asyncIterator],i;return r?r.call(n):(n=typeof gd=="function"?gd(n):n[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(u){i[u]=n[u]&&function(h){return new Promise(function(p,g){h=n[u](h),a(p,g,h.done,h.value)})}}function a(u,h,p,g){Promise.resolve(g).then(function(y){u({value:y,done:p})},h)}}function B0(n,r){return Object.defineProperty?Object.defineProperty(n,"raw",{value:r}):n.raw=r,n}function Hs(n){if(n&&n.__esModule)return n;var r={};if(n!=null)for(var i in n)Object.hasOwnProperty.call(n,i)&&(r[i]=n[i]);return r.default=n,r}function Cs(n){return n&&n.__esModule?n:{default:n}}function eu(n,r){if(!r.has(n))throw new TypeError("attempted to get private field on non-instance");return r.get(n)}function bd(n,r,i){if(!r.has(n))throw new TypeError("attempted to set private field on non-instance");return r.set(n,i),i}var gf=function(){return Array.isArray||function(n){return n&&typeof n.length=="number"}}();function Ul(n){return n!==null&&typeof n=="object"}function Sl(n){return typeof n=="function"}var vf=function(){function n(r){return Error.call(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(i,s){return s+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r,this}return n.prototype=Object.create(Error.prototype),n}(),_l=vf,sc=function(){function n(r){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,r&&(this._ctorUnsubscribe=!0,this._unsubscribe=r)}return n.prototype.unsubscribe=function(){var r;if(!this.closed){var i=this,s=i._parentOrParents,a=i._ctorUnsubscribe,u=i._unsubscribe,h=i._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,s instanceof n)s.remove(this);else if(s!==null)for(var p=0;p<s.length;++p){var g=s[p];g.remove(this)}if(Sl(u)){a&&(this._unsubscribe=void 0);try{u.call(this)}catch(E){r=E instanceof _l?dh(E.errors):[E]}}if(gf(h))for(var p=-1,y=h.length;++p<y;){var b=h[p];if(Ul(b))try{b.unsubscribe()}catch(T){r=r||[],T instanceof _l?r=r.concat(dh(T.errors)):r.push(T)}}if(r)throw new _l(r)}},n.prototype.add=function(r){var i=r;if(!r)return n.EMPTY;switch(typeof r){case"function":i=new n(r);case"object":if(i===this||i.closed||typeof i.unsubscribe!="function")return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof n)){var s=i;i=new n,i._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}var a=i._parentOrParents;if(a===null)i._parentOrParents=this;else if(a instanceof n){if(a===this)return i;i._parentOrParents=[a,this]}else if(a.indexOf(this)===-1)a.push(this);else return i;var u=this._subscriptions;return u===null?this._subscriptions=[i]:u.push(i),i},n.prototype.remove=function(r){var i=this._subscriptions;if(i){var s=i.indexOf(r);s!==-1&&i.splice(s,1)}},n.EMPTY=function(r){return r.closed=!0,r}(new n),n}();function dh(n){return n.reduce(function(r,i){return r.concat(i instanceof _l?i.errors:i)},[])}var _g=function(n){xs(r,n);function r(i,s){return n.call(this)||this}return r.prototype.schedule=function(i,s){return s===void 0&&(s=0),this},r}(sc),Ag=function(n){xs(r,n);function r(i,s){var a=n.call(this,i,s)||this;return a.scheduler=i,a.work=s,a.pending=!1,a}return r.prototype.schedule=function(i,s){if(s===void 0&&(s=0),this.closed)return this;this.state=i;var a=this.id,u=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(u,a,s)),this.pending=!0,this.delay=s,this.id=this.id||this.requestAsyncId(u,this.id,s),this},r.prototype.requestAsyncId=function(i,s,a){return a===void 0&&(a=0),setInterval(i.flush.bind(i,this),a)},r.prototype.recycleAsyncId=function(i,s,a){if(a===void 0&&(a=0),a!==null&&this.delay===a&&this.pending===!1)return s;clearInterval(s)},r.prototype.execute=function(i,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(i,s);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(i,s){var a=!1,u=void 0;try{this.work(i)}catch(h){a=!0,u=!!h&&h||new Error(h)}if(a)return this.unsubscribe(),u},r.prototype._unsubscribe=function(){var i=this.id,s=this.scheduler,a=s.actions,u=a.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,u!==-1&&a.splice(u,1),i!=null&&(this.id=this.recycleAsyncId(s,i,null)),this.delay=null},r}(_g),hh=function(){function n(r,i){i===void 0&&(i=n.now),this.SchedulerAction=r,this.now=i}return n.prototype.schedule=function(r,i,s){return i===void 0&&(i=0),new this.SchedulerAction(this,r).schedule(s,i)},n.now=function(){return Date.now()},n}(),xd=function(n){xs(r,n);function r(i,s){s===void 0&&(s=hh.now);var a=n.call(this,i,function(){return r.delegate&&r.delegate!==a?r.delegate.now():s()})||this;return a.actions=[],a.active=!1,a.scheduled=void 0,a}return r.prototype.schedule=function(i,s,a){return s===void 0&&(s=0),r.delegate&&r.delegate!==this?r.delegate.schedule(i,s,a):n.prototype.schedule.call(this,i,s,a)},r.prototype.flush=function(i){var s=this.actions;if(this.active){s.push(i);return}var a;this.active=!0;do if(a=i.execute(i.state,i.delay))break;while(i=s.shift());if(this.active=!1,a){for(;i=s.shift();)i.unsubscribe();throw a}},r}(hh),pp=new xd(Ag),Tg=pp,mf=!1,$s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){var r=new Error;""+r.stack}mf=n},get useDeprecatedSynchronousErrorHandling(){return mf}};function Ac(n){setTimeout(function(){throw n},0)}var fh={closed:!0,next:function(n){},error:function(n){if($s.useDeprecatedSynchronousErrorHandling)throw n;Ac(n)},complete:function(){}},Tc=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),ph=null,ws=function(n){xs(r,n);function r(i,s,a){var u=n.call(this)||this;switch(u.syncErrorValue=null,u.syncErrorThrown=!1,u.syncErrorThrowable=!1,u.isStopped=!1,arguments.length){case 0:u.destination=fh;break;case 1:if(!i){u.destination=fh;break}if(typeof i=="object"){i instanceof r?(u.syncErrorThrowable=i.syncErrorThrowable,u.destination=i,i.add(u)):(u.syncErrorThrowable=!0,u.destination=new Mc(u,i));break}default:u.syncErrorThrowable=!0,u.destination=new Mc(u,i,s,a);break}return u}return r.prototype[Tc]=function(){return this},r.create=function(i,s,a){var u=new r(i,s,a);return u.syncErrorThrowable=!1,u},r.prototype.next=function(i){this.isStopped||this._next(i)},r.prototype.error=function(i){this.isStopped||(this.isStopped=!0,this._error(i))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this))},r.prototype._next=function(i){this.destination.next(i)},r.prototype._error=function(i){this.destination.error(i),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var i=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=i,this},r}(sc),Mc=function(n){xs(r,n);function r(i,s,a,u){var h=n.call(this)||this;h._parentSubscriber=i;var p,g=h;return Sl(s)?p=s:s&&(p=s.next,a=s.error,u=s.complete,s!==fh&&(g=Object.create(s),Sl(g.unsubscribe)&&h.add(g.unsubscribe.bind(g)),g.unsubscribe=h.unsubscribe.bind(h))),h._context=g,h._next=p,h._error=a,h._complete=u,h}return r.prototype.next=function(i){if(!this.isStopped&&this._next){var s=this._parentSubscriber;!$s.useDeprecatedSynchronousErrorHandling||!s.syncErrorThrowable?this.__tryOrUnsub(this._next,i):this.__tryOrSetError(s,this._next,i)&&this.unsubscribe()}},r.prototype.error=function(i){if(!this.isStopped){var s=this._parentSubscriber,a=$s.useDeprecatedSynchronousErrorHandling;if(this._error)!a||!s.syncErrorThrowable?(this.__tryOrUnsub(this._error,i),this.unsubscribe()):(this.__tryOrSetError(s,this._error,i),this.unsubscribe());else if(s.syncErrorThrowable)a?(s.syncErrorValue=i,s.syncErrorThrown=!0):Ac(i),this.unsubscribe();else{if(this.unsubscribe(),a)throw i;Ac(i)}}},r.prototype.complete=function(){var i=this;if(!this.isStopped){var s=this._parentSubscriber;if(this._complete){var a=function(){return i._complete.call(i._context)};!$s.useDeprecatedSynchronousErrorHandling||!s.syncErrorThrowable?(this.__tryOrUnsub(a),this.unsubscribe()):(this.__tryOrSetError(s,a),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(i,s){try{i.call(this._context,s)}catch(a){if(this.unsubscribe(),$s.useDeprecatedSynchronousErrorHandling)throw a;Ac(a)}},r.prototype.__tryOrSetError=function(i,s,a){if(!$s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{s.call(this._context,a)}catch(u){return $s.useDeprecatedSynchronousErrorHandling?(i.syncErrorValue=u,i.syncErrorThrown=!0,!0):(Ac(u),!0)}return!1},r.prototype._unsubscribe=function(){var i=this._parentSubscriber;this._context=null,this._parentSubscriber=null,i.unsubscribe()},r}(ws);function Ao(n){for(;n;){var r=n,i=r.closed,s=r.destination,a=r.isStopped;if(i||a)return!1;s&&s instanceof ws?n=s:n=null}return!0}function co(n,r,i){if(n){if(n instanceof ws)return n;if(n[Tc])return n[Tc]()}return!n&&!r&&!i?new ws(fh):new ws(n,r,i)}var tu=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Oc(n){return n}function yf(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Tu(n)}function Tu(n){return n.length===0?Oc:n.length===1?n[0]:function(i){return n.reduce(function(s,a){return a(s)},i)}}var Vl=function(){function n(r){this._isScalar=!1,r&&(this._subscribe=r)}return n.prototype.lift=function(r){var i=new n;return i.source=this,i.operator=r,i},n.prototype.subscribe=function(r,i,s){var a=this.operator,u=co(r,i,s);if(a?u.add(a.call(u,this.source)):u.add(this.source||$s.useDeprecatedSynchronousErrorHandling&&!u.syncErrorThrowable?this._subscribe(u):this._trySubscribe(u)),$s.useDeprecatedSynchronousErrorHandling&&u.syncErrorThrowable&&(u.syncErrorThrowable=!1,u.syncErrorThrown))throw u.syncErrorValue;return u},n.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(i){$s.useDeprecatedSynchronousErrorHandling&&(r.syncErrorThrown=!0,r.syncErrorValue=i),Ao(r)?r.error(i):console.warn(i)}},n.prototype.forEach=function(r,i){var s=this;return i=bf(i),new i(function(a,u){var h;h=s.subscribe(function(p){try{r(p)}catch(g){u(g),h&&h.unsubscribe()}},u,a)})},n.prototype._subscribe=function(r){var i=this.source;return i&&i.subscribe(r)},n.prototype[tu]=function(){return this},n.prototype.pipe=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return r.length===0?this:Tu(r)(this)},n.prototype.toPromise=function(r){var i=this;return r=bf(r),new r(function(s,a){var u;i.subscribe(function(h){return u=h},function(h){return a(h)},function(){return s(u)})})},n.create=function(r){return new n(r)},n}();function bf(n){if(n||(n=$s.Promise||Promise),!n)throw new Error("no Promise impl found");return n}var gh=function(){function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n}(),Mu=gh,Ws=function(n){xs(r,n);function r(i,s){var a=n.call(this)||this;return a.subject=i,a.subscriber=s,a.closed=!1,a}return r.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var i=this.subject,s=i.observers;if(this.subject=null,!(!s||s.length===0||i.isStopped||i.closed)){var a=s.indexOf(this.subscriber);a!==-1&&s.splice(a,1)}}},r}(sc),gp=function(n){xs(r,n);function r(i){var s=n.call(this,i)||this;return s.destination=i,s}return r}(ws),S=function(n){xs(r,n);function r(){var i=n.call(this)||this;return i.observers=[],i.closed=!1,i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return r.prototype[Tc]=function(){return new gp(this)},r.prototype.lift=function(i){var s=new R(this,this);return s.operator=i,s},r.prototype.next=function(i){if(this.closed)throw new Mu;if(!this.isStopped)for(var s=this.observers,a=s.length,u=s.slice(),h=0;h<a;h++)u[h].next(i)},r.prototype.error=function(i){if(this.closed)throw new Mu;this.hasError=!0,this.thrownError=i,this.isStopped=!0;for(var s=this.observers,a=s.length,u=s.slice(),h=0;h<a;h++)u[h].error(i);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new Mu;this.isStopped=!0;for(var i=this.observers,s=i.length,a=i.slice(),u=0;u<s;u++)a[u].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(i){if(this.closed)throw new Mu;return n.prototype._trySubscribe.call(this,i)},r.prototype._subscribe=function(i){if(this.closed)throw new Mu;return this.hasError?(i.error(this.thrownError),sc.EMPTY):this.isStopped?(i.complete(),sc.EMPTY):(this.observers.push(i),new Ws(this,i))},r.prototype.asObservable=function(){var i=new Vl;return i.source=this,i},r.create=function(i,s){return new R(i,s)},r}(Vl),R=function(n){xs(r,n);function r(i,s){var a=n.call(this)||this;return a.destination=i,a.source=s,a}return r.prototype.next=function(i){var s=this.destination;s&&s.next&&s.next(i)},r.prototype.error=function(i){var s=this.destination;s&&s.error&&this.destination.error(i)},r.prototype.complete=function(){var i=this.destination;i&&i.complete&&this.destination.complete()},r.prototype._subscribe=function(i){var s=this.source;return s?this.source.subscribe(i):sc.EMPTY},r}(S),U=function(n){xs(r,n);function r(i){var s=n.call(this)||this;return s._value=i,s}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(i){var s=n.prototype._subscribe.call(this,i);return s&&!s.closed&&i.next(this._value),s},r.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Mu;return this._value},r.prototype.next=function(i){n.prototype.next.call(this,this._value=i)},r}(S);function W(n,r){return function(i){return i.lift(new ae(n,r))}}var ae=function(){function n(r,i){this.compare=r,this.keySelector=i}return n.prototype.call=function(r,i){return i.subscribe(new de(r,this.compare,this.keySelector))},n}(),de=function(n){xs(r,n);function r(i,s,a){var u=n.call(this,i)||this;return u.keySelector=a,u.hasKey=!1,typeof s=="function"&&(u.compare=s),u}return r.prototype.compare=function(i,s){return i===s},r.prototype._next=function(i){var s;try{var a=this.keySelector;s=a?a(i):i}catch(p){return this.destination.error(p)}var u=!1;if(this.hasKey)try{var h=this.compare;u=h(this.key,s)}catch(p){return this.destination.error(p)}else this.hasKey=!0;u||(this.key=s,this.destination.next(i))},r}(ws);function xe(n,r){return function(s){return s.lift(new tt(n,r))}}var tt=function(){function n(r,i){this.predicate=r,this.thisArg=i}return n.prototype.call=function(r,i){return i.subscribe(new qe(r,this.predicate,this.thisArg))},n}(),qe=function(n){xs(r,n);function r(i,s,a){var u=n.call(this,i)||this;return u.predicate=s,u.thisArg=a,u.count=0,u}return r.prototype._next=function(i){var s;try{s=this.predicate.call(this.thisArg,i,this.count++)}catch(a){this.destination.error(a);return}s&&this.destination.next(i)},r}(ws),Et=function(n){return function(r){for(var i=0,s=n.length;i<s&&!r.closed;i++)r.next(n[i]);r.complete()}},Gt=function(n){return function(r){return n.then(function(i){r.closed||(r.next(i),r.complete())},function(i){return r.error(i)}).then(null,Ac),r}};function Sn(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Rt=Sn(),an=null,Ar=function(n){return function(r){var i=n[Rt]();do{var s=void 0;try{s=i.next()}catch(a){return r.error(a),r}if(s.done){r.complete();break}if(r.next(s.value),r.closed)break}while(!0);return typeof i.return=="function"&&r.add(function(){i.return&&i.return()}),r}},Zr=function(n){return function(r){var i=n[tu]();if(typeof i.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return i.subscribe(r)}},Er=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function us(n){return!!n&&typeof n.subscribe!="function"&&typeof n.then=="function"}var bi=function(n){if(n&&typeof n[tu]=="function")return Zr(n);if(Er(n))return Et(n);if(us(n))return Gt(n);if(n&&typeof n[Rt]=="function")return Ar(n);var r=Ul(n)?"an invalid object":"'"+n+"'",i="You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(i)},ds=function(n){xs(r,n);function r(i){var s=n.call(this)||this;return s.parent=i,s}return r.prototype._next=function(i){this.parent.notifyNext(i)},r.prototype._error=function(i){this.parent.notifyError(i),this.unsubscribe()},r.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},r}(ws),$r=function(n){xs(r,n);function r(i,s,a){var u=n.call(this)||this;return u.parent=i,u.outerValue=s,u.outerIndex=a,u}return r.prototype._next=function(i){this.parent.notifyNext(this.outerValue,i,this.outerIndex,this)},r.prototype._error=function(i){this.parent.notifyError(i),this.unsubscribe()},r.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},r}(ws),ci=function(n){xs(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.notifyNext=function(i){this.destination.next(i)},r.prototype.notifyError=function(i){this.destination.error(i)},r.prototype.notifyComplete=function(){this.destination.complete()},r}(ws),sa=function(n){xs(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r.prototype.notifyNext=function(i,s,a,u){this.destination.next(s)},r.prototype.notifyError=function(i){this.destination.error(i)},r.prototype.notifyComplete=function(i){this.destination.complete()},r}(ws);function Ei(n,r){if(!r.closed){if(n instanceof Vl)return n.subscribe(r);var i;try{i=bi(n)(r)}catch(s){r.error(s)}return i}}var bo={leading:!0,trailing:!1};function nu(n,r){return r===void 0&&(r=bo),function(i){return i.lift(new Uo(n,!!r.leading,!!r.trailing))}}var Uo=null,Xs=function(n){xs(r,n);function r(i,s,a,u){var h=n.call(this,i)||this;return h.destination=i,h.durationSelector=s,h._leading=a,h._trailing=u,h._hasValue=!1,h}return r.prototype._next=function(i){this._hasValue=!0,this._sendValue=i,this._throttled||(this._leading?this.send():this.throttle(i))},r.prototype.send=function(){var i=this,s=i._hasValue,a=i._sendValue;s&&(this.destination.next(a),this.throttle(a)),this._hasValue=!1,this._sendValue=void 0},r.prototype.throttle=function(i){var s=this.tryDurationSelector(i);s&&this.add(this._throttled=Ei(s,new ds(this)))},r.prototype.tryDurationSelector=function(i){try{return this.durationSelector(i)}catch(s){return this.destination.error(s),null}},r.prototype.throttlingDone=function(){var i=this,s=i._throttled,a=i._trailing;s&&s.unsubscribe(),this._throttled=void 0,a&&this.send()},r.prototype.notifyNext=function(){this.throttlingDone()},r.prototype.notifyComplete=function(){this.throttlingDone()},r}(ci);function ba(n,r,i){return r===void 0&&(r=Tg),i===void 0&&(i=bo),function(s){return s.lift(new dl(n,r,i.leading,i.trailing))}}var dl=function(){function n(r,i,s,a){this.duration=r,this.scheduler=i,this.leading=s,this.trailing=a}return n.prototype.call=function(r,i){return i.subscribe(new Os(r,this.duration,this.scheduler,this.leading,this.trailing))},n}(),Os=function(n){xs(r,n);function r(i,s,a,u,h){var p=n.call(this,i)||this;return p.duration=s,p.scheduler=a,p.leading=u,p.trailing=h,p._hasTrailingValue=!1,p._trailingValue=null,p}return r.prototype._next=function(i){this.throttled?this.trailing&&(this._trailingValue=i,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(jl,this.duration,{subscriber:this})),this.leading?this.destination.next(i):this.trailing&&(this._trailingValue=i,this._hasTrailingValue=!0))},r.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},r.prototype.clearThrottle=function(){var i=this.throttled;i&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),i.unsubscribe(),this.remove(i),this.throttled=null)},r}(ws);function jl(n){var r=n.subscriber;r.clearThrottle()}function Wi(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(!1)var a,u;throw Error("[Immer] minified error nr: "+n+(i.length?" "+i.map(function(h){return"'"+h+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ps(n){return!!n&&!!n[ze]}function Zs(n){var r;return!!n&&(function(i){if(!i||typeof i!="object")return!1;var s=Object.getPrototypeOf(i);if(s===null)return!0;var a=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===ot}(n)||Array.isArray(n)||!!n[Oe]||!!(!((r=n.constructor)===null||r===void 0)&&r[Oe])||aa(n)||ac(n))}function ru(n){return Ps(n)||Wi(23,n),n[ze].t}function Za(n,r,i){i===void 0&&(i=!1),Pi(n)===0?(i?Object.keys:cn)(n).forEach(function(s){i&&typeof s=="symbol"||r(s,n[s],n)}):n.forEach(function(s,a){return r(a,s,n)})}function Pi(n){var r=n[ze];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:aa(n)?2:ac(n)?3:0}function Ys(n,r){return Pi(n)===2?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function hl(n,r){return Pi(n)===2?n.get(r):n[r]}function Gs(n,r,i){var s=Pi(n);s===2?n.set(r,i):s===3?n.add(i):n[r]=i}function fl(n,r){return n===r?n!==0||1/n==1/r:n!=n&&r!=r}function aa(n){return Nu&&n instanceof Map}function ac(n){return xf&&n instanceof Set}function Vo(n){return n.o||n.t}function Cd(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=Tn(n);delete r[ze];for(var i=cn(r),s=0;s<i.length;s++){var a=i[s],u=r[a];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[a]={configurable:!0,writable:!0,enumerable:u.enumerable,value:n[a]})}return Object.create(Object.getPrototypeOf(n),r)}function Ou(n,r){return r===void 0&&(r=!1),iu(n)||Ps(n)||!Zs(n)||(Pi(n)>1&&(n.set=n.add=n.clear=n.delete=vp),Object.freeze(n),r&&Za(n,function(i,s){return Ou(s,!0)},!0)),n}function vp(){Wi(2)}function iu(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function Al(n){var r=Kn[n];return r||Wi(18,n),r}function pl(n,r){Kn[n]||(Kn[n]=r)}function Pu(){return ko}function Pc(n,r){r&&(Al("Patches"),n.u=[],n.s=[],n.v=r)}function ou(n){su(n),n.p.forEach(Ia),n.p=null}function su(n){n===ko&&(ko=n.l)}function ts(n){return ko={p:[],l:ko,h:n,m:!0,_:0}}function Ia(n){var r=n[ze];r.i===0||r.i===1?r.j():r.g=!0}function Du(n,r){r._=r.p.length;var i=r.p[0],s=n!==void 0&&n!==i;return r.h.O||Al("ES5").S(r,n,s),s?(i[ze].P&&(ou(r),Wi(4)),Zs(n)&&(n=lc(r,n),r.l||cc(r,n)),r.u&&Al("Patches").M(i[ze].t,n,r.u,r.s)):n=lc(r,i,[]),ou(r),r.u&&r.v(r.u,r.s),n!==Iu?n:void 0}function lc(n,r,i){if(iu(r))return r;var s=r[ze];if(!s)return Za(r,function(p,g){return vh(n,s,r,p,g,i)},!0),r;if(s.A!==n)return r;if(!s.P)return cc(n,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var a=s.i===4||s.i===5?s.o=Cd(s.k):s.o,u=a,h=!1;s.i===3&&(u=new Set(a),a.clear(),h=!0),Za(u,function(p,g){return vh(n,s,a,p,g,i,h)}),cc(n,a,!1),i&&n.u&&Al("Patches").N(s,i,n.u,n.s)}return s.o}function vh(n,r,i,s,a,u,h){if(Ps(a)){var p=lc(n,a,u&&r&&r.i!==3&&!Ys(r.R,s)?u.concat(s):void 0);if(Gs(i,s,p),!Ps(p))return;n.m=!1}else h&&i.add(a);if(Zs(a)&&!iu(a)){if(!n.h.D&&n._<1)return;lc(n,a),r&&r.A.l||cc(n,a)}}function cc(n,r,i){i===void 0&&(i=!1),!n.l&&n.h.D&&n.m&&Ou(r,i)}function ui(n,r){var i=n[ze];return(i?Vo(i):n)[r]}function Dc(n,r){if(r in n)for(var i=Object.getPrototypeOf(n);i;){var s=Object.getOwnPropertyDescriptor(i,r);if(s)return s;i=Object.getPrototypeOf(i)}}function wo(n){n.P||(n.P=!0,n.l&&wo(n.l))}function Ra(n){n.o||(n.o=Cd(n.t))}function Nc(n,r,i){var s=aa(r)?Al("MapSet").F(r,i):ac(r)?Al("MapSet").T(r,i):n.O?function(a,u){var h=Array.isArray(a),p={i:h?1:0,A:u?u.A:Pu(),P:!1,I:!1,R:{},l:u,t:a,k:null,o:null,j:null,C:!1},g=p,y=tr;h&&(g=[p],y=Rr);var b=Proxy.revocable(g,y),E=b.revoke,T=b.proxy;return p.k=T,p.j=E,T}(r,i):Al("ES5").J(r,i);return(i?i.A:Pu()).p.push(s),s}function mh(n){return Ps(n)||Wi(22,n),function r(i){if(!Zs(i))return i;var s,a=i[ze],u=Pi(i);if(a){if(!a.P&&(a.i<4||!Al("ES5").K(a)))return a.t;a.I=!0,s=mp(i,u),a.I=!1}else s=mp(i,u);return Za(s,function(h,p){a&&hl(a.t,h)===p||Gs(s,h,r(p))}),u===3?new Set(s):s}(n)}function mp(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return Cd(n)}function xa(){function n(h,p){var g=u[h];return g?g.enumerable=p:u[h]=g={configurable:!0,enumerable:p,get:function(){var y=this[ze];return tr.get(y,h)},set:function(y){var b=this[ze];tr.set(b,h,y)}},g}function r(h){for(var p=h.length-1;p>=0;p--){var g=h[p][ze];if(!g.P)switch(g.i){case 5:s(g)&&wo(g);break;case 4:i(g)&&wo(g)}}}function i(h){for(var p=h.t,g=h.k,y=cn(g),b=y.length-1;b>=0;b--){var E=y[b];if(E!==ze){var T=p[E];if(T===void 0&&!Ys(p,E))return!0;var O=g[E],I=O&&O[ze];if(I?I.t!==T:!fl(O,T))return!0}}var k=!!p[ze];return y.length!==cn(p).length+(k?0:1)}function s(h){var p=h.k;if(p.length!==h.t.length)return!0;var g=Object.getOwnPropertyDescriptor(p,p.length-1);if(g&&!g.get)return!0;for(var y=0;y<p.length;y++)if(!p.hasOwnProperty(y))return!0;return!1}function a(h){h.g&&Wi(3,JSON.stringify(Vo(h)))}var u={};pl("ES5",{J:function(h,p){var g=Array.isArray(h),y=function(E,T){if(E){for(var O=Array(T.length),I=0;I<T.length;I++)Object.defineProperty(O,""+I,n(I,!0));return O}var k=Tn(T);delete k[ze];for(var B=cn(k),$=0;$<B.length;$++){var X=B[$];k[X]=n(X,E||!!k[X].enumerable)}return Object.create(Object.getPrototypeOf(T),k)}(g,h),b={i:g?5:4,A:p?p.A:Pu(),P:!1,I:!1,R:{},l:p,t:h,k:y,o:null,g:!1,C:!1};return Object.defineProperty(y,ze,{value:b,writable:!0}),y},S:function(h,p,g){g?Ps(p)&&p[ze].A===h&&r(h.p):(h.u&&function y(b){if(b&&typeof b=="object"){var E=b[ze];if(E){var T=E.t,O=E.k,I=E.R,k=E.i;if(k===4)Za(O,function(ye){ye!==ze&&(T[ye]!==void 0||Ys(T,ye)?I[ye]||y(O[ye]):(I[ye]=!0,wo(E)))}),Za(T,function(ye){O[ye]!==void 0||Ys(O,ye)||(I[ye]=!1,wo(E))});else if(k===5){if(s(E)&&(wo(E),I.length=!0),O.length<T.length)for(var B=O.length;B<T.length;B++)I[B]=!1;else for(var $=T.length;$<O.length;$++)I[$]=!0;for(var X=Math.min(O.length,T.length),re=0;re<X;re++)O.hasOwnProperty(re)||(I[re]=!0),I[re]===void 0&&y(O[re])}}}}(h.p[0]),r(h.p))},K:function(h){return h.i===4?i(h):s(h)}})}function bt(){function n(s){if(!Zs(s))return s;if(Array.isArray(s))return s.map(n);if(aa(s))return new Map(Array.from(s.entries()).map(function(h){return[h[0],n(h[1])]}));if(ac(s))return new Set(Array.from(s).map(n));var a=Object.create(Object.getPrototypeOf(s));for(var u in s)a[u]=n(s[u]);return Ys(s,Oe)&&(a[Oe]=s[Oe]),a}function r(s){return Ps(s)?n(s):s}var i="add";pl("Patches",{$:function(s,a){return a.forEach(function(u){for(var h=u.path,p=u.op,g=s,y=0;y<h.length-1;y++){var b=Pi(g),E=h[y];typeof E!="string"&&typeof E!="number"&&(E=""+E),b!==0&&b!==1||E!=="__proto__"&&E!=="constructor"||Wi(24),typeof g=="function"&&E==="prototype"&&Wi(24),typeof(g=hl(g,E))!="object"&&Wi(15,h.join("/"))}var T=Pi(g),O=n(u.value),I=h[h.length-1];switch(p){case"replace":switch(T){case 2:return g.set(I,O);case 3:Wi(16);default:return g[I]=O}case i:switch(T){case 1:return I==="-"?g.push(O):g.splice(I,0,O);case 2:return g.set(I,O);case 3:return g.add(O);default:return g[I]=O}case"remove":switch(T){case 1:return g.splice(I,1);case 2:return g.delete(I);case 3:return g.delete(u.value);default:return delete g[I]}default:Wi(17,p)}}),s},N:function(s,a,u,h){switch(s.i){case 0:case 4:case 2:return function(p,g,y,b){var E=p.t,T=p.o;Za(p.R,function(O,I){var k=hl(E,O),B=hl(T,O),$=I?Ys(E,O)?"replace":i:"remove";if(k!==B||$!=="replace"){var X=g.concat(O);y.push($==="remove"?{op:$,path:X}:{op:$,path:X,value:B}),b.push($===i?{op:"remove",path:X}:$==="remove"?{op:i,path:X,value:r(k)}:{op:"replace",path:X,value:r(k)})}})}(s,a,u,h);case 5:case 1:return function(p,g,y,b){var E=p.t,T=p.R,O=p.o;if(O.length<E.length){var I=[O,E];E=I[0],O=I[1];var k=[b,y];y=k[0],b=k[1]}for(var B=0;B<E.length;B++)if(T[B]&&O[B]!==E[B]){var $=g.concat([B]);y.push({op:"replace",path:$,value:r(O[B])}),b.push({op:"replace",path:$,value:r(E[B])})}for(var X=E.length;X<O.length;X++){var re=g.concat([X]);y.push({op:i,path:re,value:r(O[X])})}E.length<O.length&&b.push({op:"replace",path:g.concat(["length"]),value:E.length})}(s,a,u,h);case 3:return function(p,g,y,b){var E=p.t,T=p.o,O=0;E.forEach(function(I){if(!T.has(I)){var k=g.concat([O]);y.push({op:"remove",path:k,value:I}),b.unshift({op:i,path:k,value:I})}O++}),O=0,T.forEach(function(I){if(!E.has(I)){var k=g.concat([O]);y.push({op:i,path:k,value:I}),b.unshift({op:"remove",path:k,value:I})}O++})}(s,a,u,h)}},M:function(s,a,u,h){u.push({op:"replace",path:[],value:a===Iu?void 0:a}),h.push({op:"replace",path:[],value:s})}})}function tn(){function n(p,g){function y(){this.constructor=p}a(p,g),p.prototype=(y.prototype=g.prototype,new y)}function r(p){p.o||(p.R=new Map,p.o=new Map(p.t))}function i(p){p.o||(p.o=new Set,p.t.forEach(function(g){if(Zs(g)){var y=Nc(p.A.h,g,p);p.p.set(g,y),p.o.add(y)}else p.o.add(g)}))}function s(p){p.g&&Wi(3,JSON.stringify(Vo(p)))}var a=function(p,g){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var E in b)b.hasOwnProperty(E)&&(y[E]=b[E])})(p,g)},u=function(){function p(y,b){return this[ze]={i:2,l:b,A:b?b.A:Pu(),P:!1,I:!1,o:void 0,R:void 0,t:y,k:this,C:!1,g:!1},this}n(p,Map);var g=p.prototype;return Object.defineProperty(g,"size",{get:function(){return Vo(this[ze]).size}}),g.has=function(y){return Vo(this[ze]).has(y)},g.set=function(y,b){var E=this[ze];return s(E),Vo(E).has(y)&&Vo(E).get(y)===b||(r(E),wo(E),E.R.set(y,!0),E.o.set(y,b),E.R.set(y,!0)),this},g.delete=function(y){if(!this.has(y))return!1;var b=this[ze];return s(b),r(b),wo(b),b.t.has(y)?b.R.set(y,!1):b.R.delete(y),b.o.delete(y),!0},g.clear=function(){var y=this[ze];s(y),Vo(y).size&&(r(y),wo(y),y.R=new Map,Za(y.t,function(b){y.R.set(b,!1)}),y.o.clear())},g.forEach=function(y,b){var E=this;Vo(this[ze]).forEach(function(T,O){y.call(b,E.get(O),O,E)})},g.get=function(y){var b=this[ze];s(b);var E=Vo(b).get(y);if(b.I||!Zs(E)||E!==b.t.get(y))return E;var T=Nc(b.A.h,E,b);return r(b),b.o.set(y,T),T},g.keys=function(){return Vo(this[ze]).keys()},g.values=function(){var y,b=this,E=this.keys();return(y={})[ht]=function(){return b.values()},y.next=function(){var T=E.next();return T.done?T:{done:!1,value:b.get(T.value)}},y},g.entries=function(){var y,b=this,E=this.keys();return(y={})[ht]=function(){return b.entries()},y.next=function(){var T=E.next();if(T.done)return T;var O=b.get(T.value);return{done:!1,value:[T.value,O]}},y},g[ht]=function(){return this.entries()},p}(),h=function(){function p(y,b){return this[ze]={i:3,l:b,A:b?b.A:Pu(),P:!1,I:!1,o:void 0,t:y,k:this,p:new Map,g:!1,C:!1},this}n(p,Set);var g=p.prototype;return Object.defineProperty(g,"size",{get:function(){return Vo(this[ze]).size}}),g.has=function(y){var b=this[ze];return s(b),b.o?!!b.o.has(y)||!(!b.p.has(y)||!b.o.has(b.p.get(y))):b.t.has(y)},g.add=function(y){var b=this[ze];return s(b),this.has(y)||(i(b),wo(b),b.o.add(y)),this},g.delete=function(y){if(!this.has(y))return!1;var b=this[ze];return s(b),i(b),wo(b),b.o.delete(y)||!!b.p.has(y)&&b.o.delete(b.p.get(y))},g.clear=function(){var y=this[ze];s(y),Vo(y).size&&(i(y),wo(y),y.o.clear())},g.values=function(){var y=this[ze];return s(y),i(y),y.o.values()},g.entries=function(){var y=this[ze];return s(y),i(y),y.o.entries()},g.keys=function(){return this.values()},g[ht]=function(){return this.values()},g.forEach=function(y,b){for(var E=this.values(),T=E.next();!T.done;)y.call(b,T.value,T.value,this),T=E.next()},p}();pl("MapSet",{F:function(p,g){return new u(p,g)},T:function(p,g){return new h(p,g)}})}function Ht(){xa(),tn(),bt()}function pr(n){return n}function Jr(n){return n}var Fi,ko,uo=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",Nu=typeof Map!="undefined",xf=typeof Set!="undefined",Ca=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Iu=uo?Symbol.for("immer-nothing"):((Fi={})["immer-nothing"]=!0,Fi),Oe=uo?Symbol.for("immer-draftable"):"__$immer_draftable",ze=uo?Symbol.for("immer-state"):"__$immer_state",ht=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator",rn={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(n){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+n},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(n){return"Cannot apply patch, path doesn't resolve: "+n},16:'Sets cannot have "replace" patches.',17:function(n){return"Unsupported patch operation: "+n},18:function(n){return"The plugin for '"+n+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+n+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(n){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+n+"'"},22:function(n){return"'current' expects a draft, got: "+n},23:function(n){return"'original' expects a draft, got: "+n},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},ot=""+Object.prototype.constructor,cn=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,Tn=Object.getOwnPropertyDescriptors||function(n){var r={};return cn(n).forEach(function(i){r[i]=Object.getOwnPropertyDescriptor(n,i)}),r},Kn={},tr={get:function(n,r){if(r===ze)return n;var i=Vo(n);if(!Ys(i,r))return function(a,u,h){var p,g=Dc(u,h);return g?"value"in g?g.value:(p=g.get)===null||p===void 0?void 0:p.call(a.k):void 0}(n,i,r);var s=i[r];return n.I||!Zs(s)?s:s===ui(n.t,r)?(Ra(n),n.o[r]=Nc(n.A.h,s,n)):s},has:function(n,r){return r in Vo(n)},ownKeys:function(n){return Reflect.ownKeys(Vo(n))},set:function(n,r,i){var s=Dc(Vo(n),r);if(s!=null&&s.set)return s.set.call(n.k,i),!0;if(!n.P){var a=ui(Vo(n),r),u=a==null?void 0:a[ze];if(u&&u.t===i)return n.o[r]=i,n.R[r]=!1,!0;if(fl(i,a)&&(i!==void 0||Ys(n.t,r)))return!0;Ra(n),wo(n)}return n.o[r]===i&&(i!==void 0||r in n.o)||Number.isNaN(i)&&Number.isNaN(n.o[r])||(n.o[r]=i,n.R[r]=!0),!0},deleteProperty:function(n,r){return ui(n.t,r)!==void 0||r in n.t?(n.R[r]=!1,Ra(n),wo(n)):delete n.R[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var i=Vo(n),s=Reflect.getOwnPropertyDescriptor(i,r);return s&&{writable:!0,configurable:n.i!==1||r!=="length",enumerable:s.enumerable,value:i[r]}},defineProperty:function(){Wi(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){Wi(12)}},Rr={};Za(tr,function(n,r){Rr[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}}),Rr.deleteProperty=function(n,r){return Rr.set.call(this,n,r,void 0)},Rr.set=function(n,r,i){return tr.set.call(this,n[0],r,i,n[0])};var zr=function(){function n(i){var s=this;this.O=Ca,this.D=!0,this.produce=function(a,u,h){if(typeof a=="function"&&typeof u!="function"){var p=u;u=a;var g=s;return function(k){var B=this;k===void 0&&(k=p);for(var $=arguments.length,X=Array($>1?$-1:0),re=1;re<$;re++)X[re-1]=arguments[re];return g.produce(k,function(ye){var me;return(me=u).call.apply(me,[B,ye].concat(X))})}}var y;if(typeof u!="function"&&Wi(6),h!==void 0&&typeof h!="function"&&Wi(7),Zs(a)){var b=ts(s),E=Nc(s,a,void 0),T=!0;try{y=u(E),T=!1}finally{T?ou(b):su(b)}return typeof Promise!="undefined"&&y instanceof Promise?y.then(function(k){return Pc(b,h),Du(k,b)},function(k){throw ou(b),k}):(Pc(b,h),Du(y,b))}if(!a||typeof a!="object"){if((y=u(a))===void 0&&(y=a),y===Iu&&(y=void 0),s.D&&Ou(y,!0),h){var O=[],I=[];Al("Patches").M(a,y,O,I),h(O,I)}return y}Wi(21,a)},this.produceWithPatches=function(a,u){if(typeof a=="function")return function(y){for(var b=arguments.length,E=Array(b>1?b-1:0),T=1;T<b;T++)E[T-1]=arguments[T];return s.produceWithPatches(y,function(O){return a.apply(void 0,[O].concat(E))})};var h,p,g=s.produce(a,u,function(y,b){h=y,p=b});return typeof Promise!="undefined"&&g instanceof Promise?g.then(function(y){return[y,h,p]}):[g,h,p]},typeof(i==null?void 0:i.useProxies)=="boolean"&&this.setUseProxies(i.useProxies),typeof(i==null?void 0:i.autoFreeze)=="boolean"&&this.setAutoFreeze(i.autoFreeze)}var r=n.prototype;return r.createDraft=function(i){Zs(i)||Wi(8),Ps(i)&&(i=mh(i));var s=ts(this),a=Nc(this,i,void 0);return a[ze].C=!0,su(s),a},r.finishDraft=function(i,s){var a=i&&i[ze],u=a.A;return Pc(u,s),Du(void 0,u)},r.setAutoFreeze=function(i){this.D=i},r.setUseProxies=function(i){i&&!Ca&&Wi(20),this.O=i},r.applyPatches=function(i,s){var a;for(a=s.length-1;a>=0;a--){var u=s[a];if(u.path.length===0&&u.op==="replace"){i=u.value;break}}a>-1&&(s=s.slice(a+1));var h=Al("Patches").$;return Ps(i)?h(i,s):this.produce(i,function(p){return h(p,s)})},n}(),lr=new zr,qr=lr.produce,Xi=lr.produceWithPatches.bind(lr),ur=lr.setAutoFreeze.bind(lr),ns=lr.setUseProxies.bind(lr),Ks=lr.applyPatches.bind(lr),Es=lr.createDraft.bind(lr),ho=lr.finishDraft.bind(lr),Ru=null;tn(),ur(!1);var rs;(function(n){n.EMPTY_VALUE=Symbol("EMPTY_MODEL_VALUE");function r(s){return s!==n.EMPTY_VALUE}n.isValidValue=r;function i(s){return s.pipe(W(),xe(a=>r(a)),ba(17,pp,{leading:!1,trailing:!0}))}n.defaultPipeFunction=i})(rs||(rs={}));class Lo{constructor(r=rs.EMPTY_VALUE,i=30){this.toDispose=new Kt,this.watch=(s,a=rs.defaultPipeFunction)=>{this.subject$.observers.length+1>this.maxSubscription&&console.warn(`${this.subject$} reach maxSubscription limitation, please check`);const h=(a?a(this.subject$):this.subject$).subscribe(s);return Pt.create(()=>{h.unsubscribe()})},this.getValue=()=>this.subject$.getValue(),this.setValue=s=>{if(this.subject$){if(typeof s=="function"){const a=this.subject$.getValue(),u=qr(a,h=>{s(h)});rs.isValidValue(u)&&this.setValue(u);return}this.subject$.next(s)}},this.hasValidValue=()=>{const s=this.getValue();return rs.isValidValue(s)},this.getValidValue=()=>(0,F.mG)(this,void 0,void 0,function*(){const s=new or;if(this.hasValidValue())return this.getValue();const a=this.watch(u=>{rs.isValidValue(u)&&(s.resolve(u),a.dispose())});return s.promise}),this.dispose=()=>{this.toDispose.dispose()},this.subject$=new U(r||rs.EMPTY_VALUE),this.maxSubscription=i,this.toDispose.push(Pt.create(()=>{this.subject$.complete(),this.subject$.unsubscribe(),this.subject$=null}))}}const uc=pe.defineToken("IFrontendApplicationContribution"),wd=Symbol("IGraphCommandService"),xi=pe.defineToken("ICommandHandler"),Si=Symbol("ICommandContextProvider"),yh=Symbol("IGraphCommandFactory"),ku=pe.defineToken("IGraphCommandContribution");var bh;(function(n){function r(a){return!!a&&a===Object(a)&&"id"in a}n.is=r;function i(a,u){if(a.label&&u.label){const h=(a.category?`${a.category}: ${a.label}`:a.label).toLowerCase(),p=(u.category?`${u.category}: ${u.label}`:u.label).toLowerCase();return h.localeCompare(p)}else return 0}n.compareCommands=i;function s(a,u){return a.id===u.id&&a.label===u.label&&a.iconName===u.iconName&&a.category===u.category}n.equals=s})(bh||(bh={}));let Mg=class{constructor(r){this.contributionProvider=r,this.redoStack=[],this.undoStack=[],this.commands=new Map,this.factories=new Map,this.disposables=new Map,this.cmdChangeEvent=new Lo(null),this.Globals=new Lo(new Map),this.setGlobal=(i,s)=>{this.Globals.setValue(a=>{a.set(i,s)})},this.getGlobal=i=>this.Globals.getValue().get(i),this.undoCommand=()=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.undoStack.pop();if(!i){console.error("empty undo stack");return}yield i.undo(),this.redoStack.push(i),this.cmdChangeEvent.setValue(null)}),this.redoCommand=()=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.redoStack.pop();if(!i){console.error("empty undo stack");return}yield i.redo(),this.undoStack.push(i),this.cmdChangeEvent.setValue(null)}),this.registerDisposableCommand=i=>{const s=new Kt;return i({registerCommand:(u,h)=>{const p=this.registerCommand(u,h);return s.push(p),p}}),s}}get watchChange(){return this.cmdChangeEvent.watch}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerGraphCommands(this)}executeCommandPipeline(r){return(0,F.mG)(this,void 0,void 0,function*(){let i=null;for(const s of r){const a=i==null?void 0:i.contextProvider(),{args:u,hooks:h}=yield s==null?void 0:s.getCommandOption(a);i=yield this.executeCommand(s==null?void 0:s.commandId,u,h)}return this.cmdChangeEvent.setValue(null),i})}executeCommand(r,i,s=[]){return(0,F.mG)(this,void 0,void 0,function*(){const a=this.getFactory(r);if(a){const u=yield a.createCommand(r,i,s);return yield u.execute(),u.isUndoable()&&this.undoStack.push(u),this.cmdChangeEvent.setValue(null),u}throw Object.assign(new Error(`The command '${r}' cannot be executed. There are no active handlers available for the command.`),{code:"NO_ACTIVE_HANDLER"})})}executeUndoCommand(r,i,s=[]){return(0,F.mG)(this,void 0,void 0,function*(){const a=this.getFactory(r);if(a){const u=yield a.createCommand(r,i,s);return yield u.execute(),u}throw Object.assign(new Error(`The command '${r}' cannot be executed. There are no active handlers available for the command.`),{code:"NO_ACTIVE_HANDLER"})})}createCommand(r,i,s=[]){return(0,F.mG)(this,void 0,void 0,function*(){const a=this.getFactory(r);if(a)return yield a.createCommand(r,i,s);throw Object.assign(new Error(`The command '${r}' cannot be executed. There are no active handlers available for the command.`),{code:"NO_ACTIVE_HANDLER"})})}get isUndoable(){return this.undoStack.length>0}get isRedoable(){return this.redoStack.length>0}hasCommand(r){return this.commands.has(r)}getCommand(r){return this.commands.get(r)}registerCommand(r,i){if(this.factories.has(r.id))return console.warn(`A command ${r.id} is already registered.`),Pt.NULL;const s=new Kt(this.doRegisterCommand(r),this.registerFactory(r.id,i),Pt.create(()=>this.disposables.delete(r.id)));return this.disposables.set(r.id,s),s}doRegisterCommand(r){return this.commands.set(r.id,r),Pt.create(()=>this.disposables.delete(r.id))}unregisterCommand(r){const i=bh.is(r)?r.id:r,s=this.disposables.get(i);s&&s.dispose()}hasFactory(r){return!!this.factories.get(r)}getFactory(r){return this.factories.get(r)}registerFactory(r,i,s=!1){return this.hasFactory(r)&&s===!1&&console.error("cannot register command:",r),this.factories.set(r,i),Pt.create(()=>{this.factories.delete(r)})}getAllFactories(){return Array.from(this.factories.entries())}};Mg=(0,F.gn)([kt({contrib:[uc,wd]}),(0,F.fM)(0,ti(ku)),(0,F.w6)("design:paramtypes",[Object])],Mg);const Cf=Gr(n=>{Oi.register(n,ku),n(Mg)}),Ed=pe.defineToken("IModelService"),gl=pe.defineToken("IModelContribution"),hs=Symbol("IModelOptionProvider");var Ds;(function(n){n.ASYNC_SRRIES="ASYNC_SRRIES",n.ASYNC_PARALLEL="ASYNC_PARALLEL"})(Ds||(Ds={}));var z0=M(94633),Og=M.n(z0),Ic;(function(n){let r;(function(a){a.INVALID_HOOK_BEFORE="INVALID_HOOK_BEFORE",a.INVALID_HOOK_AFTER="INVALID_HOOK_AFTER",a.INVALID_HOOK_ARGS_LENGTH="INVALID_HOOK_ARGS_LENGTH"})(r=n.ErrorEnum||(n.ErrorEnum={}));class i extends Error{constructor(u,h,...p){Array.isArray(h)&&(h=h.filter(function(g){return!!g}).join(" ")),super(`${u}: ${h}`),Error.captureStackTrace&&Error.captureStackTrace(this,i),this.code=u,this.contexts={},p.forEach(g=>{typeof g=="object"&&Object.entries(g).forEach(y=>{const[b,E]=y;b!=="key"&&E&&(this.contexts[b]=JSON.parse(JSON.stringify(E)))})})}toString(){return`${this.code}: ${this.message}`}}n.HookError=i;const s=(a,u,...h)=>new i(a,u,...h);n.HookBeforeError=()=>s(r.INVALID_HOOK_BEFORE,["hook require a before dependency but not exist in hookmap"]),n.HookAfterError=()=>s(r.INVALID_HOOK_AFTER,["hook require a after dependency but not exist in hookmap"]),n.InvalidHookArguments=a=>s(r.INVALID_HOOK_ARGS_LENGTH,["hook handlers must have 0 to 2 arguments",`but got ${a.handler.length}`])})(Ic||(Ic={}));var wf;(function(n){n.normalize=(r=[],i)=>{const s=Array.isArray(r)?r:[r],a=[];return i.forEach(u=>{a.push(u)}),[...a,...s].filter(u=>u&&!!u.handler)},n.sort=(r=[],i)=>{const s=[];return r.forEach(u=>{if(u.before){if(!i.has(u.before))throw Ic.HookBeforeError();const h=[u,i.get(u.before)];s.push(h)}if(u.after){if(!i.has(u.after))throw Ic.HookBeforeError();const h=[i.get(u.after),u];s.push(h)}}),Og().array(r,s)}})(wf||(wf={}));class yp{constructor(){this.isResolved=!1,this.isRejected=!1,this.promise=new Promise((r,i)=>{this.resolve=s=>{this.isResolved=!0,r(s)},this.reject=s=>{this.isRejected=!0,i(s)}})}}class ka{constructor(r){this.scheduleType=Ds.ASYNC_SRRIES,this.hasHook=i=>this.hookMap.has(i),this.getHooks=(i=[],s=!0)=>{const a=wf.normalize(i,this.hookMap);return s?wf.sort(a,this.hookMap):a},this.registerHook=i=>(this.hookMap.has(i.name)&&console.error(`${i.name} is duplicated in hookmap`),this.hookMap.set(i.name,i),{dispose:()=>{this.hookMap.delete(i.name)}}),this.call=(i,s=u=>(0,F.mG)(this,void 0,void 0,function*(){return u}),a=[])=>(0,F.mG)(this,void 0,void 0,function*(){const u=this.getHooks(a,!0),h=this.schedulers[this.scheduleType];return h(i,s,u)}),this.schedulers={[Ds.ASYNC_SRRIES]:(i,s,a=[])=>(0,F.mG)(this,void 0,void 0,function*(){let u=s;for(const h of a){if([0,1].includes(h.handler.length)){yield h.handler.call(this,i);continue}if([2].includes(h.handler.length)&&u!==null){const g=yield h.handler.call(this,i,u);if(g===null){u=null;break}else if(typeof g=="function"){u=g;continue}}throw Ic.InvalidHookArguments(h)}if(u)return yield u.call(this,i)}),[Ds.ASYNC_PARALLEL]:(i,s,a=[])=>(0,F.mG)(this,void 0,void 0,function*(){const u=a.map(p=>{if([0,1].includes(p.handler.length))return p.handler.call(this,i);if([2].includes(p.handler.length))return p.handler.call(this,i,s);throw Ic.InvalidHookArguments(p)}),h=new yp;if(Promise.all(u).then(p=>h.resolve(p)),s)return yield s.call(this,h)})},this.hookMap=new Map,r&&r.type&&(this.scheduleType=r.type)}}const Sd=pe.defineToken("IHookService"),la=pe.defineToken("IHookContribution"),Ya=()=>({graphOptions:new ka,reactNodeRender:new ka,reactEdgeLabelRender:new ka,afterGraphInit:new ka,beforeGraphDestroy:new ka,x6Events:new ka}),_d=()=>({dispose:()=>{}});var Ad;(function(n){n.CONFIG_TYPE="XFlowHook"})(Ad||(Ad={}));class ca{constructor(){this.CONFIG_TYPE=Ad.CONFIG_TYPE,this.time=Date.now(),this.setRegisterHook=r=>{this.hookRegisterFunc=r},this.setRegisterHookhub=r=>{this.hookhubRegisterFn=r},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return{CONFIG_TYPE:this.CONFIG_TYPE,hookRegisterFn:this.hookRegisterFunc||_d,hookhubRegisterFn:this.hookhubRegisterFn||_d}}),this.dispose=()=>{}}}let xh=class{constructor(){this.toDispose=new Kt,this.hookProvider=()=>this.hooks,this.registerHook=r=>r(this.hooks),this.registerHookHub=(r,i)=>(this.hooks[r]=i,{dispose:()=>{delete this.hooks[r]}}),this.onStart=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerHookHub(this);for(const i of r)i.registerHook(this.hooks)}),this.hooks=Ya()}onStop(){this.toDispose.dispose()}};(0,F.gn)([ti(la),(0,F.w6)("design:type",Object)],xh.prototype,"contributionProvider",void 0),xh=(0,F.gn)([kt({contrib:[uc,Sd]}),(0,F.w6)("design:paramtypes",[])],xh);var au;(function(n){n.pluginId="GraphEventPlugin"})(au||(au={}));let Td=class{constructor(){this.toDispose=new Kt,this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const{hookRegisterFn:i}=yield this.hookConfig.getConfig(),s=i(r);return Pt.create(()=>{s.dispose()})}),this.registerHookHub=r=>(0,F.mG)(this,void 0,void 0,function*(){const{hookhubRegisterFn:i}=yield this.hookConfig.getConfig(),s=i(r);return Pt.create(()=>{s.dispose()})})}};(0,F.gn)([Zt(ca),(0,F.w6)("design:type",ca)],Td.prototype,"hookConfig",void 0),Td=(0,F.gn)([kt({contrib:la})],Td);const Dg={dispose:()=>null};function bp(n,r){let i;return()=>{clearTimeout(i),i=window.setTimeout(n,r)}}function Ch(n){let r;return()=>{r||(r=requestAnimationFrame(()=>{r=null,n()}))}}const Ng=n=>{const r=document.createElement("style");return r.setAttribute("type","text/css"),document.head.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),r};function Ae(n){return typeof n=="function"&&!!n.prototype.isReactComponent}function Md(n){return typeof n=="function"&&String(n).includes("return React.createElement")}function Od(n){return Ae(n)||Md(n)}var wa;(function(n){n.pluginId="base-graph-events"})(wa||(wa={}));let Li=class{constructor(){this.toDispose=new Kt,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return Pt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new Kt,s=[r.x6Events.registerHook({name:wa.pluginId,handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{events:u}=yield this.graphOptions.getOptions();u.forEach(h=>{a.push(h)})})}),r.afterGraphInit.registerHook({name:wa.pluginId,handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:u,modelService:h,graph:p}=a,g=yield r.x6Events.call([],y=>(0,F.mG)(this,void 0,void 0,function*(){return y.map(b=>{const E=T=>{b.callback(T,u,h,p)};return p.on(b.eventName,E),{dispose:()=>{p.off(b.eventName,E)}}})}));i.pushAll(g)})}),r.afterGraphInit.registerHook({name:"add auto resize event",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:u,options:h,graph:p}=a,g=Ch(()=>{u.executeCommand(pi.GRAPH_RESIZE.id,{})});window.addEventListener("resize",g);const{rootContainer:y}=h,b=new ResizeObserver(()=>p.resize(y.clientWidth));y&&b.observe(y),i.push(Pt.create(()=>{window.removeEventListener("resize",g)}))})}),r.beforeGraphDestroy.registerHook({name:wa.pluginId,handler:()=>(0,F.mG)(this,void 0,void 0,function*(){i.dispose()})})];return i.pushAll(s),i})}};(0,F.gn)([Zt(_u),(0,F.w6)("design:type",Object)],Li.prototype,"graphOptions",void 0),Li=(0,F.gn)([kt({contrib:la})],Li);const hm=n=>Gr(r=>{Oi.register(r,la),r(Td),r(Li),r(xh),r(ca,{useValue:n})});var Tl=M(96486);class U0{constructor(){this.extensions=[],this.containerClassNames=new Set,this.addCoreModule=r=>(this.extensions.unshift(r),Pt.create(()=>{this.removeExtension(r)})),this.addExtension=r=>(this.extensions.push(r),Pt.create(()=>{this.removeExtension(r)})),this.getExtension=r=>(0,Tl.find)(this.extensions,i=>(0,Tl.get)(i,"config.CONFIG_TYPE")===r),this.removeExtension=r=>{const i=this.extensions.indexOf(r);i>-1&&this.extensions.splice(i,1)},this.getInstanceId=()=>this.instanceId,this.addContainerClassNames=r=>this.containerClassNames.add(r),this.getContainerClassNames=()=>Array.from(this.containerClassNames),this.getAllExtensions=()=>this.extensions,this.getAllExtensionConfigs=()=>this.extensions.map(r=>r.config),this.instanceId=$a()}has(r){return this.extensions.some(i=>i.config.CONFIG_TYPE===r)}}const Lu=()=>H.useMemo(()=>new U0,[]),V0=H.createContext({}),Ml=()=>H.useContext(V0),Ig=n=>{const r=Ml(),i=H.useMemo(()=>n.config?n.config:new ca,[]);return H.useEffect(()=>{const s=r.addCoreModule({config:i,createModule:hm});return()=>{s.dispose(),i.dispose()}},[r,i]),null},xp=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new ca;return n(a,i),a},[i])},Rg=H.createContext({cell:null,x6Graph:null,commands:null,modelService:null}),lu=()=>React.useContext(Rg);function j0(n,r,i){return function(s){const a=this,u=s==null?void 0:s.getData(),h=s==null?void 0:s.getSize(),p=s==null?void 0:s.getPosition(),g=()=>H.createElement(Rg.Provider,{value:{cell:s,x6Graph:a,commands:r,modelService:i}},H.createElement(n,{cell:s,data:u,size:h,position:p}));return H.createElement(g,null)}}function fm(n,r,i){return function(s){const a=this,u=s==null?void 0:s.getData(),h=()=>H.createElement(Rg.Provider,{value:{cell:s,x6Graph:a,commands:r,modelService:i}},H.createElement(n,{data:u,cell:s}));return H.createElement(h,null)}}const tb=()=>{const[n,r]=React.useState(!1),{x6Graph:i,cell:s}=lu();return React.useEffect(()=>{const a=({added:u,removed:h})=>{if(u.filter(y=>y.isNode()).some(y=>{y.id,s.id})){s.setData(Object.assign(Object.assign({},s.getData()),{isNodeSelected:!0})),r(!0);return}if(h.filter(y=>y.isNode()).some(y=>{y.id,s.id})){s.setData(Object.assign(Object.assign({},s.getData()),{isNodeSelected:!1})),r(!1);return}};return i.on("selection:changed",a),()=>{i.off("selection:changed",a)}},[i]),[n]},Gu=Symbol("IGraphProvider"),H0=Symbol("ICommandServiceProvider"),Rc=Symbol("IModelServiceProvider");let Fu=class{constructor(){this.toDispose=new Kt,this.graphMap=new Map,this.getGraph=r=>(0,F.mG)(this,void 0,void 0,function*(){let i=this.graphMap.get(r);if(!i){i=new or,this.graphMap.set(r,i);const s=yield this.optionProvider.getOptions(),a=this.hookService.hookProvider(),u=yield a.graphOptions.call(s.x6Options),{graphContainer:h,edgeRender:p,nodeRender:g,edgeTypeParser:y}=s,b=yield a.reactEdgeLabelRender.call(p);yield a.reactNodeRender.call(g);const{clientHeight:E,clientWidth:T}=h,O=yield this.commandServiceProvider.getCommandService(),I=yield this.modelServiceProvider.getModelService(),k=new wr.kJ(Object.assign(Object.assign({container:h,width:T,height:E},u),{onEdgeLabelRendered:B=>{const{edge:$,container:X}=B;this.renderEdgeReactLabel({edge:$,container:X,edgeRenderMap:b,edgeTypeParser:y,modelService:I,commandService:O})}}));yield a.afterGraphInit.call({graph:k,commandService:O,modelService:I,options:s}),i.resolve(k),k.on("node:moved",({node:B})=>{const $=B.getData(),X=B.position();B.setData(Object.assign(Object.assign({},$),{x:X==null?void 0:X.x,y:X==null?void 0:X.y}))}),k.on("node:resized",({node:B})=>{const $=B.getData(),X=B.size();B.setData(Object.assign(Object.assign({},$),{width:X==null?void 0:X.width,height:X==null?void 0:X.height}))}),this.toDispose.push(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){yield a.beforeGraphDestroy.call({graph:k,commandService:O,modelService:I,options:s}),this.graphMap.delete(r),k.dispose()})))}return i.promise}),this.renderEdgeReactLabel=r=>(0,F.mG)(this,void 0,void 0,function*(){const{container:i,edgeTypeParser:s,edge:a,edgeRenderMap:u,commandService:h,modelService:p}=r,g=s(a==null?void 0:a.data)||zo,y=u.get(g);if(y&&a&&a!=null&&a.data&&y){const b=this.edgeAppendForeignObject(a,i),E=fm(y,h,p)(a);Pa.render(E,b)}})}edgeAppendForeignObject(r,i){const s=wr.is.createSvgElement("foreignObject"),a=wr.is.createElementNS("body",wr.is.ns.xhtml),u=wr.is.createElementNS("div",wr.is.ns.xhtml),h=r==null?void 0:r.data,p=(h==null?void 0:h.edgeContentWidth)||100,g=(h==null?void 0:h.edgeContentHeight)||30;return s.setAttribute("width",`${p}`),s.setAttribute("height",`${g}`),s.setAttribute("x",`${-1*p/2}`),s.setAttribute("y",`${-1*g/2}`),a.setAttribute("xhtmls",wr.is.ns.xhtml),a.style.width="100%",a.style.height="100%",a.style.padding="0",a.style.margin="0",a.style.background="unset",a.style.overflow="visible",a.className="xflow-edge-label-body",u.style.width="100%",u.style.height="100%",a.appendChild(u),s.appendChild(a),i.appendChild(s),u}dispose(){this.toDispose.dispose()}};(0,F.gn)([Zt(_u),(0,F.w6)("design:type",Object)],Fu.prototype,"optionProvider",void 0),(0,F.gn)([Zt(Sd),(0,F.w6)("design:type",Object)],Fu.prototype,"hookService",void 0),(0,F.gn)([Zt(H0),(0,F.w6)("design:type",Object)],Fu.prototype,"commandServiceProvider",void 0),(0,F.gn)([Zt(Rc),(0,F.w6)("design:type",Object)],Fu.prototype,"modelServiceProvider",void 0),Fu=(0,F.gn)([kt()],Fu);const pm=n=>{n(Fu),n(Gu,{lifecycle:pe.Lifecycle.singleton,useDynamic:r=>({getGraphInstance:()=>(0,F.mG)(void 0,void 0,void 0,function*(){const i=r.container.get(Fu),s=r.container.get(_u),a=yield s==null?void 0:s.getOptions();return yield i==null?void 0:i.getGraph(a.graphId)}),getGraphOptions:()=>(0,F.mG)(void 0,void 0,void 0,function*(){const i=r.container.get(_u);return i==null?void 0:i.getOptions()})})}),n(H0,{lifecycle:pe.Lifecycle.singleton,useDynamic:r=>({getCommandService:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.container.get(wd)})})}),n(Rc,{lifecycle:pe.Lifecycle.singleton,useDynamic:r=>({getModelService:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.container.get(Ed)})})})};var kg;(function(n){n.CONFIG_TYPE="MODEL_SERVICE_CONFIG"})(kg||(kg={}));const Bu=()=>Pt.create(()=>{});class $0{constructor(){this.CONFIG_TYPE=kg.CONFIG_TYPE,this.registerModelFn=Bu,this.isMounted=new or,this.registerModel=r=>{this.registerModelFn=r},this.setMountState=()=>{this.isMounted.resolve(!0)},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return yield this.isMounted.promise,{CONFIG_TYPE:this.CONFIG_TYPE,modelRegisterFunc:this.registerModelFn||Bu}}),this.dispose=()=>{this.registerModelFn=Bu,this.isMounted=new or}}}let Hl=class{constructor(){this.toDispose=new Kt,this.deferredModelMap=new Map,this.registerModel=r=>{const{id:i,getInitialValue:s,modelFactory:a}=r,u=new Kt,h=this.ensureModel(i);if(h.isResolved){console.error(r,"model has been registerd");return}const p=s?s():rs.EMPTY_VALUE,g=a?a():new Lo(p);return rs.isValidValue(p)&&h.resolve(g),r.watchChange&&r.watchChange(g,this).then(y=>{h.isResolved||h.resolve(g),this.toDispose.pushAll([y,u]),u.push(y)}),u},this.findDeferredModel=r=>this.deferredModelMap.get(r),this.awaitModel=r=>this.ensureModel(r).promise,this.registerRuntimeModel=()=>(0,F.mG)(this,void 0,void 0,function*(){const{modelRegisterFunc:r}=yield this.modelOptionProvider.getOption(),i=yield this.graphProvider.getGraphInstance();r&&r(this,i)}),this.ensureModel=r=>{const i=this.deferredModelMap.get(r);if(i)return i;const s=new or;return this.deferredModelMap.set(r,s),this.toDispose.push(Pt.create(()=>this.deferredModelMap.delete(r))),s}}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerModel(this);this.registerRuntimeModel()}onStop(){this.toDispose.dispose()}};(0,F.gn)([ti(gl),(0,F.w6)("design:type",Object)],Hl.prototype,"contributionProvider",void 0),(0,F.gn)([Zt(hs),(0,F.w6)("design:type",Object)],Hl.prototype,"modelOptionProvider",void 0),(0,F.gn)([Zt(Gu),(0,F.w6)("design:type",Object)],Hl.prototype,"graphProvider",void 0),Hl=(0,F.gn)([kt({contrib:[uc,Ed]})],Hl);const W0=n=>r=>{const i=r.findDeferredModel(n);return!!(i&&i.promise)},jo=n=>r=>(0,F.mG)(void 0,void 0,void 0,function*(){return yield r.awaitModel(n)}),to=n=>r=>(0,F.mG)(void 0,void 0,void 0,function*(){return(yield r.awaitModel(n)).getValidValue()});var wh;(function(n){n.id="GRAPH_ENABLE_MULTI_SELECT",n.getModel=jo(n.id),n.useValue=to(n.id)})(wh||(wh={}));var Pd;(function(n){n.id="GRAPH_FULLSCREEN",n.getModel=jo(n.id),n.useValue=to(n.id)})(Pd||(Pd={}));var Cp;(function(n){n.id="IS_NODE_SELECTED",n.getModel=jo(n.id),n.useValue=to(n.id)})(Cp||(Cp={}));var wp;(function(n){n.id="IS_GROUP_SELECTED",n.getModel=jo(n.id),n.useValue=to(n.id)})(wp||(wp={}));var Ep;(function(n){n.id="IS_NORMAL_NODES_SELECTED",n.getModel=jo(n.id),n.useValue=to(n.id)})(Ep||(Ep={}));var fo;(function(n){n.id="LAST_SELECTED_CELL",n.getModel=jo(n.id),n.useValue=to(n.id)})(fo||(fo={}));var Ol;(function(n){n.id="SELECTED_CELLS",n.getModel=jo(n.id),n.useValue=to(n.id)})(Ol||(Ol={}));var Ef;(function(n){n.id="LAST_SELECTED_NODE",n.getModel=jo(n.id),n.useValue=to(n.id)})(Ef||(Ef={}));var kc;(function(n){n.id="SELECTED_NODES",n.getModel=jo(n.id),n.useValue=to(n.id)})(kc||(kc={}));var Lc;(function(n){n.id="SELECTED_EDGES",n.getModel=jo(n.id),n.useValue=to(n.id)})(Lc||(Lc={}));var vl;(function(n){n.id="SELECTED_GROUPS",n.getModel=jo(n.id),n.useValue=to(n.id)})(vl||(vl={}));var Ka;(function(n){n.id="CONTEXTMENU_NODE",n.getModel=jo(n.id),n.useValue=to(n.id)})(Ka||(Ka={}));var Lg;(function(n){n.id="CONTEXTMENU_EDGE",n.getModel=jo(n.id),n.useValue=to(n.id)})(Lg||(Lg={}));var Pl;(function(n){n.id="CONTEXTMENU_TARGET",n.getModel=jo(n.id),n.useValue=to(n.id)})(Pl||(Pl={}));var zu;(function(n){n.id="GRAPH_META",n.getModel=jo(n.id),n.useValue=to(n.id)})(zu||(zu={}));var Ho;(function(n){n.id="GRAPH_SCALE",n.getModel=jo(n.id),n.useValue=to(n.id)})(Ho||(Ho={}));var cu;(function(n){n.id="COMMAND_REDOABLE",n.getModel=jo(n.id),n.useValue=to(n.id)})(cu||(cu={}));var $l;(function(n){n.id="COMMAND_UNDOABLE",n.getModel=jo(n.id),n.useValue=to(n.id)})($l||($l={}));var Fs;(function(n){n.id="COMMAND_GLOBALS",n.getModel=jo(n.id),n.useValue=to(n.id)})(Fs||(Fs={}));var Eh;(function(n){n.id="HISTORY_UNDOABLE",n.getModel=jo(n.id),n.useValue=to(n.id)})(Eh||(Eh={}));var Dd;(function(n){n.id="HISTORY_REDOABLE",n.getModel=jo(n.id),n.useValue=to(n.id)})(Dd||(Dd={}));let Uu=class{registerModel(r){r.registerModel({id:cu.id,getInitialValue:()=>this.commands.isRedoable,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){return this.commands.watchChange(()=>{i.setValue(this.commands.isRedoable)})})}),r.registerModel({id:$l.id,getInitialValue:()=>this.commands.isUndoable,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){return this.commands.watchChange(()=>{i.setValue(this.commands.isUndoable)})})}),r.registerModel({id:Fs.id,modelFactory:()=>this.commands.Globals})}};(0,F.gn)([Zt(wd),(0,F.w6)("design:type",Object)],Uu.prototype,"commands",void 0),Uu=(0,F.gn)([kt({contrib:gl})],Uu);const uu=(n,r,i)=>(n.on(r,i),Pt.create(()=>{n.off(r,i)}));let Wl=class{constructor(){this.getGraphInstance=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=yield this.graphProvider.getGraphInstance(),i=yield this.graphProvider.getGraphOptions();return{graph:r,config:i}})}registerModel(r){r.registerModel({id:zu.id,getInitialValue:()=>({flowId:"-1"}),watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){return Pt.create(()=>{i.setValue({flowId:"-1"})})})}),r.registerModel({id:wh.id,getInitialValue:()=>({isEnable:!1}),watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){return Pt.create(()=>{i.setValue({isEnable:!1})})})}),r.registerModel({id:Pd.id,getInitialValue:()=>!1,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){const a=()=>(0,F.mG)(this,void 0,void 0,function*(){const u=!!document.fullscreenElement;(yield Pd.getModel(s)).setValue(u)});return document.addEventListener("fullscreenchange",a,!1),Pt.create(()=>{document.removeEventListener("fullscreenchange",a),i.setValue(!1)})})}),r.registerModel({id:Ol.id,getInitialValue:()=>[],watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s}=yield this.getGraphInstance(),a=u=>{const{selected:h}=u;i.setValue(h)};return s.on("selection:changed",a),Pt.create(()=>s.off("selection:changed",a))})}),r.registerModel({id:fo.id,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Ol.getModel(s)).watch((u=[])=>{i.setValue([...u].pop()||null)})})}),r.registerModel({id:kc.id,getInitialValue:()=>[],watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Ol.getModel(s)).watch((u=[])=>{const h=u.filter(p=>p.isNode());i.setValue(h)})})}),r.registerModel({id:Ef.id,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield kc.getModel(s)).watch(h=>{i.setValue([...h].pop()||null)})})}),r.registerModel({id:Cp.id,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield kc.getModel(s)).watch(h=>{i.setValue(h.length>0)})})}),r.registerModel({id:wp.id,getInitialValue:()=>!1,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Ol.getModel(s)).watch(h=>{const p=h.every(g=>g&&g.getProp("isGroup")===!0);i.setValue(p)})})}),r.registerModel({id:vl.id,getInitialValue:()=>[],watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield kc.getModel(s)).watch(h=>{const p=h.filter(g=>g&&g.getProp("isGroup")===!0);i.setValue(p)})})}),r.registerModel({id:Ep.id,getInitialValue:()=>!1,watchChange:(i,s)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Ol.getModel(s)).watch(h=>{const p=h.every(y=>{const b=!(y&&y.getProp("isGroup")),E=!(y&&y.getProp("group"));return b&&E}),g=h.length>0&&p;i.setValue(g)})})}),r.registerModel({id:Ho.id,getInitialValue:()=>({zoomFactor:-1}),watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s}=yield this.getGraphInstance(),a=u=>{const h=s.zoom();i.setValue(Object.assign(Object.assign({},u),{zoomFactor:h}))};return s.on("scale",a),Pt.create(()=>s.off("scale",a))})}),r.registerModel({id:Pl.id,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s,config:a}=yield this.getGraphInstance(),u=p=>g=>{const{x:y,y:b}=g,E=s.localToClient({x:y,y:b}),T=a.rootContainer.getBoundingClientRect(),O={x:E.x-((T==null?void 0:T.x)||0),y:E.y-((T==null?void 0:T.y)||0)};i.setValue({type:p,anchor:O,data:g,cell:g.cell})},h=new Kt;return h.pushAll([uu(s,"node:contextmenu",u("node")),uu(s,"edge:contextmenu",u("edge")),uu(s,"blank:contextmenu",u("blank"))]),h})}),r.registerModel({id:Dd.id,getInitialValue:()=>!1,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s}=yield this.getGraphInstance(),a=()=>{const u=s.history.canRedo();i.setValue(u)};return s.history&&s.history.on("change",a),Pt.create(()=>s.history.off("change",a))})}),r.registerModel({id:Eh.id,getInitialValue:()=>!1,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s}=yield this.getGraphInstance(),a=()=>{const u=s.history.canUndo();i.setValue(u)};return s.history&&s.history.on("change",a),Pt.create(()=>s.history.off("change",a))})})}};(0,F.gn)([Zt(Gu),(0,F.w6)("design:type",Object)],Wl.prototype,"graphProvider",void 0),Wl=(0,F.gn)([kt({contrib:gl})],Wl);const Gg=Gr(n=>{Oi.register(n,gl),n(Hl),n(Wl),n(Uu)}),Sf=(n,r)=>{n({token:hs,useDynamic:()=>({getOption:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.getConfig()})}),lifecycle:pe.Lifecycle.singleton})},_f=n=>Gr(r=>{Sf(r,n)}),Af=n=>{const{config:r}=n,i=Ml(),s=H.useMemo(()=>r||new $0,[]);return H.useEffect(()=>{const a=i.addCoreModule({config:s,createModule:_f});return s.setMountState(),()=>{a.dispose(),s.dispose()}},[]),null};Af.defaultProps={XFlowModuleType:"ModelServiceConfig"};const Sp=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new $0;return n(a,i),a},[i])},ua=n=>{const r=n.getChildren(),i=n.getSize(),s=n.getData()||{},a=n.getPosition(),u=n.getParentId(),{isCollapsed:h}=s,p=s.groupCollapsedSize||(h?i:null);return Object.assign(Object.assign({},s),{id:n.id,width:i.width,height:i.height,x:a.x,y:a.y,group:u,groupChildren:r?r.map(g=>g.id):null,groupCollapsedSize:p})},_p=n=>{const r=n.getData()||{};return Object.assign(Object.assign({},r),{id:n.id,source:n.getSourceCellId(),target:n.getTargetCellId(),sourcePortId:n.getSourcePortId(),targetPortId:n.getTargetPortId(),sourcePort:n.getSourcePortId(),targetPort:n.getTargetPortId()})},Ap=n=>{const r=[],i=[],s=a=>{a.isNode()&&r.push(ua(a)),a.isEdge()&&i.push(_p(a))};return n.map(a=>s(a)),{nodes:r,edges:i}},dc=100;let Dl=class{constructor(){this.getGraphInstance=()=>this.graphProvider.getGraphInstance(),this.getGraphConfig=()=>this.graphProvider.getGraphOptions(),this.getGraphData=()=>(0,F.mG)(this,void 0,void 0,function*(){const i=(yield this.graphProvider.getGraphInstance()).getCells();return Ap(i)}),this.getAllNodes=()=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.graphProvider.getGraphInstance()).getNodes()}),this.getNodeById=r=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.graphProvider.getGraphInstance()).getCellById(r)}),this.getAllEdges=()=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.graphProvider.getGraphInstance()).getEdges()}),this.getEdgeById=r=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.graphProvider.getGraphInstance()).getCellById(r)}),this.updateNodeAttrs=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){r instanceof wr.NB?r.setAttrs(i):(yield this.getNodeById(r)).setAttrs(i)}),this.updateEdgeAttrs=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){r instanceof wr.kS?r.setAttrs(i):(yield this.getEdgeById(r)).setAttrs(i)}),this.translateGraph=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){const s=yield this.graphProvider.getGraphInstance(),a=s.translate();s.translate(a.tx+r,a.ty+i)})}start(){return(0,F.mG)(this,void 0,void 0,function*(){yield this.startContributions(),this.registerEventListeners()})}executeCommand(r,i,s=[]){return this.commandService.executeCommand(r,i,s)}executeCommandPipeline(r){return this.commandService.executeCommandPipeline(r)}registerEventListeners(){window.addEventListener("unload",()=>{this.stopContributions()})}startContributions(){return(0,F.mG)(this,void 0,void 0,function*(){console.log(this.contributions.getContributions());for(const r of this.contributions.getContributions())if(r.onStart)try{yield this.measure(`${r.constructor.name}.onStart`,()=>r.onStart(this))}catch(i){console.error("Could not start contribution",i)}})}stopContributions(){console.info(">>> Stopping frontend contributions...");for(const r of this.contributions.getContributions())if(r.onStop)try{r.onStop(this)}catch(i){console.error("Could not stop contribution",i)}console.info("<<< All frontend contributions have been stopped.")}measure(r,i){return(0,F.mG)(this,void 0,void 0,function*(){const s=`${r}-start`,a=`${r}-end`;performance.mark(s);const u=yield i();performance.mark(a),performance.measure(r,s,a);for(const h of performance.getEntriesByName(r)){const p=`Frontend ${h.name}`;h.duration>dc?console.warn(`${p} is slow, took: ${h.duration.toFixed(1)} ms`):console.debug(`${p} took: ${h.duration.toFixed(1)} ms`)}return performance.clearMeasures(r),u})}};(0,F.gn)([ti(uc),(0,F.w6)("design:type",Object)],Dl.prototype,"contributions",void 0),(0,F.gn)([Zt(Gu),(0,F.w6)("design:type",Object)],Dl.prototype,"graphProvider",void 0),(0,F.gn)([Zt(wd),(0,F.w6)("design:type",Object)],Dl.prototype,"commandService",void 0),(0,F.gn)([Zt(Ed),(0,F.w6)("design:type",Object)],Dl.prototype,"modelService",void 0),Dl=(0,F.gn)([kt()],Dl);const Tf=Gr(n=>{Oi.register(n,uc),n(Dl)}),Nl=n=>{const r=n.getAllExtensions(),i=new Le,s=r.map(u=>{const{createModule:h,config:p}=u;return h(p)});return i.load(Tf),i.load(Cf),i.load(Gg),s.forEach(u=>{i.load(u)}),i.get(Dl)};class Fg{constructor(){this.xflowPrefixCls=XFLOW_PREFIX_CLS,this.getXflowPrefixCls=r=>`${this.xflowPrefixCls}-${r}`,this.setXflowPrefixCls=r=>this.xflowPrefixCls=r}}const qs=H.createContext({configProvider:null}),Tp=()=>H.useContext(qs),Sh=n=>{const r=Tp();return H.useMemo(()=>r.configProvider?r.configProvider.getXflowPrefixCls(n):`${Xr}-${n}`,[n])};function Mf(n){const{createModule:r,children:i}=n,s=Ml(),a=H.useMemo(()=>n.config||{CONFIG_TYPE:"",getConfig:()=>(0,F.mG)(this,void 0,void 0,function*(){return{}})},[]);return H.useEffect(()=>{const u=s.addExtension({config:a,createModule:r});return()=>{u.dispose()}},[]),Array.isArray(i)||H.isValidElement(i)?H.createElement(H.Fragment,null," ",i," "):null}const Gc=(n={})=>(0,H.useMemo)(()=>{const r=Object.entries(n),i=r.length>0?{position:"absolute"}:{};return r.forEach(([s,a=0])=>{i[s]=`${a}px`}),i},[n]),Of=n=>Gr(r=>{pm(r),ch(r,n)}),Pf=wr.Bz.create({type:"react componnet"});wr.kJ.registerReactComponent=Pf.register,wr.kJ.unregisterReactComponent=Pf.unregister,wr.kJ.Hook.prototype.getReactComponent=function(n){const r=this.options.getReactComponent;if(typeof r=="function"){const s=wr.Iw.call(r,this.graph,n);if(s!=null)return s}let i=n.getComponent();if(typeof i=="string"){const s=Pf.get(i);if(s==null)return Pf.onNotFound(i);i=s}return i};class Xl extends wr.NB{get component(){return this.getComponent()}set component(r){this.setComponent(r)}getComponent(){return this.store.get("component")}setComponent(r,i={}){return r==null?this.removeComponent(i):this.store.set("component",r,i),this}removeComponent(r={}){return this.store.remove("component",r),this}}(function(n){function r(i,s,a="rect"){const u=[],h=s?wr.Lu.getForeignObjectMarkup():{tagName:"g",selector:"content"};return i?u.push(h):u.push({tagName:a,selector:"body"},h,{tagName:"text",selector:"label"}),u}n.config({view:"react-shape-view",markup:r(!1,!0),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"},label:{fontSize:14,fill:"#333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"}},propHooks(i){if(i.markup==null){const s=i.primer,a=i.useForeignObject!==!1;if(s&&s!=="rect"){i.markup=r(!1,a,s);let u={};s==="circle"?u={refCx:"50%",refCy:"50%",refR:"50%"}:s==="ellipse"&&(u={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}),i.attrs=wr.QK.merge({},{body:Object.assign({refWidth:null,refHeight:null},u)},i.attrs||{})}else i.simple&&(i.markup=r(!0,a),i.attrs=wr.QK.merge({},{body:null,label:null},i.attrs||{}))}return i}}),wr.NB.registry.register("react-shape",n,!0)})(Xl||(Xl={}));var du;(function(n){let r=!1,i;const s=(g,y)=>{const b=y.payload;switch(y.type){case"add":{const E=g.findIndex(T=>T.id===b.id);return E>=0?(g[E]=b,[...g]):[...g,b]}case"remove":{const E=g.findIndex(T=>T.id===b.id);if(E>=0){const T=[...g];return T.splice(E,1),T}break}default:break}return g};function a(g,y){r&&i({type:"add",payload:{id:g,portal:y}})}n.connect=a;function u(g){r&&i({type:"remove",payload:{id:g}})}n.disconnect=u;function h(){return r}n.isActive=h;function p(){return()=>{r=!0;const[g,y]=(0,H.useReducer)(s,[]);return i=y,H.createElement(H.Fragment,{children:g.map(b=>b.portal)})}}n.getProvider=p})(du||(du={}));class hu extends H.PureComponent{constructor(r){super(r),this.scheduledAnimationFrame=!1,this.throttleUpdateFunc=()=>{this.scheduledAnimationFrame||(this.scheduledAnimationFrame=!0,window.requestAnimationFrame(()=>{this.setState(i=>(this.scheduledAnimationFrame=!1,{tick:i.tick+1}))}))},this.onChange=i=>{if(hu.throttleChangeTypes.includes(i.key)){this.throttleUpdateFunc();return}this.setState({tick:this.state.tick+1})},this.state={tick:0}}componentDidMount(){this.props.node.on("change:*",this.onChange)}componentWillUnmount(){this.props.node.off("change:*",this.onChange)}clone(r){const{node:i}=this.props;return typeof r.type=="string"?H.cloneElement(r):H.cloneElement(r,{node:i})}render(){const{graph:r,node:i,component:s}=this.props;if(H.isValidElement(s))return this.clone(s);if(typeof s=="function"){const a=wr.Iw.call(s,r,i);if(H.isValidElement(a))return this.clone(a)}return s}}hu.throttleChangeTypes=["position","size"];class Vu extends wr.DK{init(){super.init(),this.cell.on("removed",()=>{du.disconnect(this.cell.id)})}getComponentContainer(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent}confirmUpdate(r){const i=super.confirmUpdate(r);return this.handleAction(i,Vu.action,()=>{wr.b2?wr.b2.scheduleTask(()=>{this.renderReactComponent()}):this.renderReactComponent()})}renderReactComponent(){this.unmountReactComponent();const r=this.getComponentContainer(),i=this.cell,s=this.graph;if(r){const a=this.graph.hook.getReactComponent(i),u=H.createElement(hu,{graph:s,node:i,component:a});du.isActive()?du.connect(this.cell.id,Pa.createPortal(u,r)):Pa.render(u,r)}}unmountReactComponent(){const r=this.getComponentContainer();return r&&Pa.unmountComponentAtNode(r),r}unmount(){return du.disconnect(this.cell.id),this.unmountReactComponent(),super.unmount(),this}}(function(n){n.action="react",n.config({bootstrap:[n.action],actions:{component:n.action}}),wr.DK.registry.register("react-shape-view",n,!0)})(Vu||(Vu={}));var ju=function(n,r,i,s){var a=arguments.length,u=a<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,i):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,r,i,s);else for(var p=n.length-1;p>=0;p--)(h=n[p])&&(u=(a<3?h(u):a>3?h(r,i,u):h(r,i))||u);return a>3&&u&&Object.defineProperty(r,i,u),u};const Nd="react";function fu(n){const r={current:()=>{}},i=y=>{r.current(y)};let s,a;function u(y,b){s({id:y,portal:b})}function h(y){a(y)}const p=()=>{const[y,b]=(0,H.useState)([]),[E,T]=(0,H.useState)(),O=(0,H.useRef)([]),I=(0,H.useRef)([]);r.current=T,s=(0,H.useCallback)(re=>{const{id:ye}=re;if(O.current.includes(ye)){const me=I.current,We=me.findIndex(at=>at.id===ye);We>-1?me[We]=re:me.push(re),I.current=me}else b(me=>{const We=[...me],at=We.findIndex(ft=>ft.id===ye);return at>-1?We[at]=re:We.push(re),We})},[]),a=(0,H.useCallback)(re=>{O.current.includes(re)&&(O.current=O.current.filter(ye=>ye!==re)),I.current.map(ye=>ye.id).includes(re)&&(I.current=I.current.filter(ye=>ye.id!==re)),b(ye=>ye.filter(me=>me.id!==re))},[]);const $=(0,H.useCallback)(re=>{const{name:ye,data:me}=re,{cells:We=[]}=me||{};if(ye==="add"){const at=We.filter(ft=>ft.isNode()).map(ft=>ft.id);O.current=Array.from(new Set([...O.current,...at]))}},[]),X=(0,H.useCallback)(({name:re})=>{if(re==="add"){const ye=I.current;if(ye.length){const me=ye.map(We=>We.id);O.current=O.current.filter(We=>!me.includes(We)),I.current=[],b(We=>{const at=[...We];return ye.forEach(ft=>{const Qt=at.findIndex(_t=>_t.id===ft.id);Qt>-1?at[Qt]=ft:at.push(ft)}),at})}}},[]);return(0,H.useLayoutEffect)(()=>(E&&(E.on("batch:start",$),E.on("batch:stop",X)),()=>{E&&(E.off("batch:start",$),E.off("batch:stop",X),b([]),O.current=[],I.current=[])}),[E,$,X]),H.createElement(H.Fragment,null,...y.map(re=>re.portal))};class g extends wr.DK{init(){super.init(),this.cell.on("removed",()=>{h(this.cell.id)})}getComponentContainer(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent}confirmUpdate(b){const E=super.confirmUpdate(b);return this.handleAction(E,Nd,()=>this.renderReactComponent())}renderReactComponent(){this.unmountReactComponent();const b=this.getComponentContainer(),E=this.cell,T=this.graph;if(b){const O=this.graph.hook.getReactComponent(E),I=H.createElement(hu,{graph:T,node:E,component:O});u(this.cell.id,Pa.createPortal(I,b))}}unmountReactComponent(){const b=this.getComponentContainer();return b&&Pa.unmountComponentAtNode(b),b}onMouseDown(b,E,T){const O=b.target;if(O.tagName.toLowerCase()==="input"){const k=O.getAttribute("type");if(k==null||["text","password","number","email","search","tel","url"].includes(k))return}super.onMouseDown(b,E,T)}dispose(){h(this.cell.id),this.unmountReactComponent()}}return ju([wr.DK.dispose()],g.prototype,"dispose",null),g.config({bootstrap:[Nd],actions:{component:Nd}}),wr.DK.registry.register(n,g,!0),{Portal:p,setGraph:i}}function Hu(n){const r=(0,H.useRef)(!1),[i]=(0,H.useState)(()=>r.current?{}:(r.current=!0,fu(n)));return[i.Portal,i.setGraph]}const Zl=n=>{const r=es(),i=H.useRef(null),s=H.useRef(null),a=Ml(),u=H.useMemo(()=>{const E=n.config?n.config:new Su;return E.setX6Config(),E},[]),[h,p]=Hu(u.graphId);H.useEffect(()=>{r&&r.getGraphInstance().then(E=>{p(E)})},[r,p]),H.useEffect(()=>{u.setRootContainer(i.current),u.setGraphContainer(s.current),u.xflowInstanceId=a.getInstanceId(),a.addCoreModule({config:u,createModule:Of});const E=()=>(0,F.mG)(void 0,void 0,void 0,function*(){u.dispose()});return()=>{E()}},[]);const g=Gc(n.position),y=Sh("canvas-root"),b=Sh("x6-canvas");return H.createElement(H.Fragment,null,H.createElement("div",{ref:i,className:y,style:g,id:u.graphId,tabIndex:0},H.createElement("div",{ref:s,className:b}),n.children),H.createElement(h,null))};Zl.defaultProps={isXFlowCanvas:!0};let ml=class{constructor(){this.toDispose=new Kt,this.runtimeHooks=[],this.getX6Graph=()=>(0,F.mG)(this,void 0,void 0,function*(){if(this.graph)return this.graph;const r=yield this.graphProvider.getGraphInstance();return this.graph=r,r}),this.getGraphConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.graphProvider.getGraphOptions()}),this.getGraphMeta=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.getModelService();return this.graphMeta||(yield zu.useValue(r))}),this.setArgs=(r,i=[])=>(this.args=r,this.runtimeHooks=i,{args:r,hooks:i}),this.getArgs=()=>({args:Object.assign(Object.assign({},this.args),{modelService:this.getModelService(),commandService:this.getCommands(),getGraphMeta:this.getGraphMeta,getX6Graph:this.getX6Graph,getGraphConfig:this.getGraphConfig}),hooks:this.runtimeHooks}),this.setResult=r=>(this.result=r,this.result),this.getResult=()=>this.result,this.getHooks=()=>this.hookService.hookProvider(),this.getCommands=()=>this.commandService,this.getModelService=()=>this.modelService,this.addUndo=r=>{if(!Array.isArray(r))return this.addUndo([r]);this.toDispose.pushAll(r)},this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){yield this.toDispose.dispose()}),this.isUndoable=()=>!this.toDispose.disposed,this.getDisposables=()=>this.toDispose,this.setGlobal=(r,i)=>{this.commandService.setGlobal(r,i)},this.getGlobal=r=>this.commandService.getGlobal(r)}init(){this.getGraphMeta().then(r=>{this.graphMeta=r})}};(0,F.gn)([Zt(Gu),(0,F.w6)("design:type",Object)],ml.prototype,"graphProvider",void 0),(0,F.gn)([Zt(Sd),(0,F.w6)("design:type",Object)],ml.prototype,"hookService",void 0),(0,F.gn)([Zt(wd),(0,F.w6)("design:type",Object)],ml.prototype,"commandService",void 0),(0,F.gn)([Zt(Ed),(0,F.w6)("design:type",Object)],ml.prototype,"modelService",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],ml.prototype,"init",null),ml=(0,F.gn)([vt()],ml);const _h="CommandConfig",Id=()=>[];class Il{constructor(){this.setCommandContributions=r=>{this.getContributions=r},this.getCommandContributions=()=>this.getContributions(),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){return this.registerHookFn?this.registerHookFn(r):Dg}),this.registerHookHub=r=>(0,F.mG)(this,void 0,void 0,function*(){return this.registerHookHubFn?this.registerHookHubFn(r):Dg}),this.CONFIG_TYPE=_h,this.setRegisterHookFn=r=>{this.registerHookFn=r},this.setRegisterHookHubFn=r=>{this.registerHookHubFn=r},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return{registerHookFn:this.registerHookFn,getContributions:this.getContributions,CONFIG_TYPE:this.CONFIG_TYPE}}),this.getContributions=Id}}const $u=()=>new Il,Mp=(n,r)=>{n({token:Il,contrib:[la],lifecycle:pe.Lifecycle.singleton,useDynamic:()=>r})};var pu;(function(n){n.command=Ji.ADD_NODE,n.hookKey="addNode"})(pu||(pu={}));let qa=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().addNode.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{createNodeService:p,cellFactory:g,commandService:y,options:b}=h,E=yield r.getX6Graph();let T=h.nodeConfig;if(p){const B=yield p(h);if(typeof B=="boolean")return{err:"createNodeService rejected"};T=B}const O=yield this.processNodeConfig(T);let I;const k=Object.assign(Object.assign({},b),{isCommand:!0});if(g){const B=yield g(O,this);I=E.addNode(B,k)}else I=E.addNode(O,k);return r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){const B=Object.assign({id:I.id},I.getData());y.executeCommand(Ji.DEL_NODE.id,{nodeConfig:B})}))),{nodeConfig:O,nodeCell:I}}),s);return r.setResult(u),this}),this.processNodeConfig=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.contextProvider();if(r.data=Object.assign({},r),r.shape)return r;if(!r.view){const s=yield i.getGraphConfig();r.view=s.graphId}if(!r.component){const s=yield this.getNodeReactComponent(r),a=i.getCommands(),u=i.getModelService();r.shape="react-shape",r.component=j0(s,a,u)}return r}),this.getNodeReactComponent=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.contextProvider(),s=i.getHooks(),a=yield i.getGraphConfig(),u=yield s.reactNodeRender.call(a.nodeRender),h=a.nodeTypeParser(r)||yi,p=u.get(h);return p||console.error("react node component is missing:",a.nodeRender,h,p),p}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],qa.prototype,"contextProvider",void 0),qa=(0,F.gn)([vt({token:{token:xi,named:pu.command.id}})],qa);var Yl;(function(n){n.command=Ji.DEL_NODE,n.hookKey="delNode",n.createHook=()=>new ka})(Yl||(Yl={}));let Rd=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().delNode.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:p,deleteNodeService:g,options:y}=h,b=yield r.getX6Graph();if(g&&!(yield g(h)))return{err:" service rejected"};const E=(h.x6Node||h.nodeConfig).id,T=b.getCellById(E);if(T&&T.isNode()){const O=[...b.getIncomingEdges(T)||[],...b.getOutgoingEdges(T)||[]];yield Promise.all(O.map(k=>p.executeCommand(yo.DEL_EDGE.id,{x6Edge:k})));const I=T.getData();return T.remove(Object.assign(Object.assign({},y),{isCommand:!0})),r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){yield p.executeCommand(Ji.ADD_NODE.id,{nodeConfig:I})}))),{err:null,nodeConfig:I}}return{err:"node is not exist"}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()&&this.contextProvider().undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Rd.prototype,"contextProvider",void 0),Rd=(0,F.gn)([vt({token:{token:xi,named:Yl.command.id}})],Rd);var Rl;(function(n){n.command=Ji.SELECT_NODE,n.hookKey="selectNode"})(Rl||(Rl={}));let hc=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().selectNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),p=h.getSelectedCells().map(E=>E.id),{nodeIds:g,resetSelection:y,commandService:b}=u;return y?h.resetSelection(g):h.select(g),this.ctx.addUndo({dispose:()=>{b.executeUndoCommand(Ji.SELECT_NODE.id,{nodeIds:p,resetSelection:!0})}}),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],hc.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],hc.prototype,"init",null),hc=(0,F.gn)([vt({token:{token:xi,named:Rl.command.id}})],hc);var Wu;(function(n){n.command=Ji.MOVE_NODE,n.hookKey="moveNode",n.createHook=()=>new ka})(Wu||(Wu={}));let Df=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().moveNode.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{nodePositionService:p}=h;if(p&&!(yield p(h)))return{err:"service rejected"};const{dx:g=0,dy:y=0,x:b,y:E,duration:T=150}=h.position,I=(yield r.getX6Graph()).getCellById(h.id);if(I){let k=b,B=E;const{x:$,y:X}=I.position();let re=()=>{I.position($,X,{silent:!1})};return g||y?(k=g+$,B=y+X,I.translate(g,y,{transition:{duration:T}}),re=()=>I.translate(-g,-y,{transition:{duration:T}})):I.position(k,B,{silent:!1}),r.addUndo(Pt.create(()=>{re()})),{err:null,nextX:k,nextY:B}}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Df.prototype,"contextProvider",void 0),Df=(0,F.gn)([vt({token:{token:xi,named:Wu.command.id}})],Df);var Bg=M(51584),Ah=M.n(Bg),Xu;(function(n){n.command=Ji.UPDATE_NODE,n.hookKey="updateNode",n.XFlowNodeSetOptions={overwrite:!0},n.NODE_WIDTH=200,n.NODE_HEIGHT=40})(Xu||(Xu={}));let Zu=class{constructor(){this.setNodeConfig=(r,i,s)=>{r.setData(i,s),r.setPosition((i==null?void 0:i.x)||0,(i==null?void 0:i.y)||0),r.setSize((i==null?void 0:i.width)||Xu.NODE_WIDTH,(i==null?void 0:i.height)||Xu.NODE_HEIGHT),r.angle((i==null?void 0:i.angle)||0,{absolute:!0}),Ah()(i==null?void 0:i.visible)&&r.setVisible(i==null?void 0:i.visible),!(r instanceof Xl)&&r.getAttrByPath("text/text")&&r.setAttrByPath("text/text",i.label),i.attrs&&r.setAttrs(i.attrs),Array.isArray(i.ports)&&r.setPropByPath("ports/items",i.ports,Object.assign({rewrite:!0},s))},this.getNodeConfig=r=>{const i=r.getData(),s=r.getPosition(),a=r.getSize();return Object.assign(Object.assign(Object.assign({},i),s),a)},this.getNodeCell=(r,i)=>{const{nodeConfig:s,setNodeConfig:a}=i;let u="";if(a&&a.node&&typeof a.node=="string"?u=a.node:s&&s.id&&typeof s.id=="string"&&(u=s.id),u)return r==null?void 0:r.getCellById(u);if(a&&a.node instanceof wr.NB)return a.node},this.getNextNodeConfig=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){if(r&&r.setNodeConfig&&r.setNodeConfig.callback){const s=this.getNodeConfig(i);return r.setNodeConfig.callback(s)}return r.nodeConfig}),this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().updateNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{options:h=Xu.XFlowNodeSetOptions}=u,p=yield this.ctx.getX6Graph(),g=this.getNodeCell(p,u),y=yield this.getNextNodeConfig(u,g);return this.setNodeConfig(g,y,h),{nodeConfig:y,nodeCell:g}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Zu.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Zu.prototype,"init",null),Zu=(0,F.gn)([vt({token:{token:xi,named:Xu.command.id}})],Zu);var Kl;(function(n){n.command=Ji.CENTER_NODE,n.hookKey="centerNode"})(Kl||(Kl={}));let kd=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().centerNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{nodeConfig:p}=u,g=h==null?void 0:h.getCellById(p==null?void 0:p.id);return h==null||h.centerCell(g),{x6Node:g}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],kd.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],kd.prototype,"init",null),kd=(0,F.gn)([vt({token:{token:xi,named:Kl.command.id}})],kd);var Op;(function(n){n.command=Ji.FRONT_NODE,n.hookKey="frontNode"})(Op||(Op={}));let Ld=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().frontNode.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield this.ctx.getX6Graph(),{nodeId:g}=h,y=p==null?void 0:p.getCellById(g);return y?(y.toFront(),r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){h.commandService.executeCommand(Ji.BACK_NODE.id,{nodeId:g})})))):console.error(g,"this nodeId is not exist"),{}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Ld.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Ld.prototype,"init",null),Ld=(0,F.gn)([vt({token:{token:xi,named:Op.command.id}})],Ld);var _i;(function(n){n.command=Ji.BACK_NODE,n.hookKey="backNode"})(_i||(_i={}));let Nf=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().backNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{nodeId:p}=u,g=h==null?void 0:h.getCellById(p);return g?(g.toBack(),this.ctx.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){u.commandService.executeCommand(Ji.FRONT_NODE.id,{nodeId:p})})))):console.error(p,"this nodeId is not exist"),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Nf.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Nf.prototype,"init",null),Nf=(0,F.gn)([vt({token:{token:xi,named:_i.command.id}})],Nf);var If;(function(n){n.command=Ji.HIGHLIGHT_NODE,n.hookKey="highlightNode"})(If||(If={}));let gu=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().highlightNode.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{nodeId:p,stroke:g,strokeWidth:y}=u,b=h==null?void 0:h.getCellById(p);if(b){if(b==null||b.setAttrs({body:{stroke:g||"#7c68fc",strokeWidth:y||2}}),u!=null&&u.isHighlightRelatedLines){const{edgeStroke:E,edgeStrokeWidth:T}=u;(h==null?void 0:h.getEdges()).forEach(I=>{const k=I==null?void 0:I.getData();u==null||u.commandService.executeCommand(yo.HIGHLIGHT_EDGE.id,{edgeId:k==null?void 0:k.id,strokeColor:E,strokeWidth:T})})}}else return console.error(p,"this nodeId is not exist"),{err:"this nodeId is not exist"};return{err:null}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],gu.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],gu.prototype,"init",null),gu=(0,F.gn)([vt({token:{token:xi,named:If.command.id}})],gu);var Rf;(function(n){n.command=Ji.UPDATE_NODE_PORT,n.hookKey="updateNodePort"})(Rf||(Rf={}));let Pp=class{constructor(){this.getCell=(r,i)=>typeof i=="string"?r.getCellById(i):i,this.getNodeConfig=r=>{const i=r.getData(),s=r.getPosition(),a=r.getSize();return Object.assign(Object.assign(Object.assign({},i),s),a)},this.updatePortsOfNodeConfig=(r,i,s)=>{const a=this.getNodeConfig(r);this.isNodeAnchors(a.ports)&&(a.ports=[...i]),this.isPortMetaData(a.ports)&&(a.ports.items=[...i]),r.setData(a,s)},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),a=r.getHooks(),u=yield r.getX6Graph(),h=yield a.updateNodePort.call(i,p=>(0,F.mG)(this,void 0,void 0,function*(){const{node:g,updatePorts:y,options:b,commandService:E}=p,T=this.getCell(u,g);if(!T||T.isEdge())return console.error("node_is _not_exsit",g),{err:"node_is _not_exsit"};const O=T.getPorts(),I=yield y([...O],T,u);return I===!1?{err:"service rejected"}:(T.setPropByPath("ports/items",I,Object.assign({rewrite:!0},b)),this.updatePortsOfNodeConfig(T,I,b),r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){E.executeCommand(Ji.UPDATE_NODE_PORT.id,{node:g,updatePorts:()=>(0,F.mG)(this,void 0,void 0,function*(){return O})})}))),{ports:I})}),s);return r.setResult(h),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isNodeAnchors(r){return Array.isArray(r)}isPortMetaData(r){return r.items&&Array.isArray(r.items)}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Pp.prototype,"contextProvider",void 0),Pp=(0,F.gn)([vt({token:{token:xi,named:Rf.command.id}})],Pp);const X0=n=>{n(qa),n(Rd),n(hc),n(Df),n(Zu),n(kd),n(Ld),n(Nf),n(gu),n(Pp)},ql=[pu,Yl,Rl,Wu,Xu,Kl,Op,_i,If,Rf];var Dp;(function(n){n.command=pi.LOAD_META,n.hookKey="graphMeta"})(Dp||(Dp={}));let Yu=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().graphMeta.call(r,p=>(0,F.mG)(this,void 0,void 0,function*(){const{graphMetaService:g}=p,y=g?yield g(p):Object.assign({},p==null?void 0:p.meta);return Object.assign({flowId:y==null?void 0:y.flowId},y)}),i),u=this.ctx.getModelService();return(yield zu.getModel(u)).setValue(a),this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Yu.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Yu.prototype,"init",null),Yu=(0,F.gn)([vt({token:{token:xi,named:Dp.command.id}})],Yu);var Th;(function(n){n.command=pi.SAVE_GRAPH_DATA,n.hookKey="saveGraphData"})(Th||(Th={}));let Ku=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.ctx,i=r.getArgs();return yield r.getHooks().saveGraphData.call(i.args,a=>(0,F.mG)(this,void 0,void 0,function*(){const{saveGraphDataService:u,includeAttrs:h}=a,p=yield r.getX6Graph(),g=p.getNodes(),y=p.getEdges(),b=g.map(I=>{const k=I.getData(),B=I.position(),$=I.size(),X=Object.assign(Object.assign(Object.assign({id:I.id},k),B),$);return h&&(X.attrs=I.getAttrs()),X}),E=y.map(I=>{const k=I.getData(),B=Object.assign({id:I.id},k);return h&&(B.attrs=I.getAttrs()),B}),T={nodes:b,edges:E},O=yield this.ctx.getGraphMeta();if(u){const I=yield u(O,T);I&&this.ctx.setResult(I)}return{}}),i.hooks),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Ku.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Ku.prototype,"init",null),Ku=(0,F.gn)([vt({token:{token:xi,named:Th.command.id}})],Ku);var Fc;(function(n){n.command=pi.LOAD_DATA,n.hookKey="loadData",n.createHook=()=>new ka})(Fc||(Fc={}));let Bs=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().loadData.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{loadDataService:h}=u,p=yield this.ctx.getGraphMeta();return{graphData:yield h(p)}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Bs.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Bs.prototype,"init",null),Bs=(0,F.gn)([vt({token:{token:xi,named:Fc.command.id}})],Bs);const Ea=n=>typeof n=="string",kf=n=>{const r=Object.create(null);return i=>r[i]||(r[i]=n(i))},Lf=/-(\w)/g,Mh=kf(n=>n.replace(Lf,(r,i)=>i?i.toUpperCase():"")),Ns=Array.isArray,Jn=n=>typeof n=="number",qu=n=>Number.isNaN(Number(n)),Gf=n=>{const r=parseFloat(n);return qu(r)?n:r},yl=n=>n!==null&&typeof n=="object",La=n=>{if(n===null)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array){const r=[];return n.forEach(i=>{r.push(i)}),r.map(i=>La(i))}if(typeof n=="object"&&n!=={}){const r=Object.assign({},n);return Object.keys(r).forEach(i=>{r[i]=La(r[i])}),r}return n},Ci=(n,r)=>{const i=n[r];return yl(i)?i.cell:i},Ga=(n,r,i)=>{const s=[];for(let a=0;a<n;a++)s[a]=0;return i&&i.forEach(a=>{const u=Ci(a,"source"),h=Ci(a,"target");u&&(s[r[u]]+=1),h&&(s[r[h]]+=1)}),s},Ju=n=>{const r=[],i=n.length;for(let s=0;s<i;s+=1){r[s]=[];for(let a=0;a<i;a+=1)s===a?r[s][a]=0:n[s][a]===0||!n[s][a]?r[s][a]=1/0:r[s][a]=n[s][a]}for(let s=0;s<i;s+=1)for(let a=0;a<i;a+=1)for(let u=0;u<i;u+=1)r[a][u]>r[a][s]+r[s][u]&&(r[a][u]=r[a][s]+r[s][u]);return r},Qu=(n,r)=>{const{nodes:i,edges:s}=n,a=[],u={};if(!i)throw new Error("invalid nodes data!");return i&&i.forEach((h,p)=>{u[h.id]=p;const g=[];a.push(g)}),s&&s.forEach(h=>{const p=Ci(h,"source"),g=Ci(h,"target"),y=u[p],b=u[g];a[y][b]=1,r||(a[b][y]=1)}),a},Ff=(n,r)=>{const i=[];return n.forEach(s=>{const a=[];s.forEach(u=>{a.push(u*r)}),i.push(a)}),i},Jl=(n,r)=>{if(n&&n.children){for(let i=n.children.length-1;i>=0;i--)if(!Jl(n.children[i],r))return}return!!r(n)},Bc=(n,r)=>{typeof r=="function"&&Jl(n,r)},To=n=>typeof n=="function",fc=new Map,Np=(n,r)=>{if(fc.get(n)&&console.warn(`The layout with the name ${n} exists already, it will be overridden`),isObject(r)){class i extends Base{constructor(a){super();const u=this,h={},p=u.getDefaultCfg();Object.assign(h,p,r,a),Object.keys(h).forEach(g=>{const y=h[g];u[g]=y})}}fc.set(n,i)}else fc.set(n,r);return fc.get(n)},nb=n=>{fc.has(n)&&fc.delete(n)},gm=n=>fc.has(n)?fc.get(n):null;class Go{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(r){return this.init(r),this.execute(!0)}init(r){this.nodes=r.nodes||[],this.edges=r.edges||[],this.combos=r.combos||[]}execute(r){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(r){r&&Object.assign(this,r)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}class Ja extends Go{constructor(r){super(),this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodeSize=30,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const r=this,i=r.nodes,s=r.edges,a=i.length,u=r.begin;if(a===0)return r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s};if(a===1)return i[0].x=u[0],i[0].y=u[1],r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s};const h=[];i.forEach(b=>{h.push(b)});const p={};if(h.forEach((b,E)=>{p[b.id]=E}),(r.sortBy==="degree"||!Ea(r.sortBy)||h[0][r.sortBy]===void 0)&&(r.sortBy="degree",qu(i[0].degree))){const b=Ga(h.length,p,s);h.forEach((E,T)=>{E.degree=b[T]})}h.sort((b,E)=>E[r.sortBy]-b[r.sortBy]),!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight);const g=r.rows,y=r.cols!=null?r.cols:r.columns;if(r.cells=a,g!=null&&y!=null?(r.rows=g,r.cols=y):g!=null&&y==null?(r.rows=g,r.cols=Math.ceil(r.cells/r.rows)):g==null&&y!=null?(r.cols=y,r.rows=Math.ceil(r.cells/r.cols)):(r.splits=Math.sqrt(r.cells*r.height/r.width),r.rows=Math.round(r.splits),r.cols=Math.round(r.width/r.height*r.splits)),r.cols*r.rows>r.cells){const b=r.small(),E=r.large();(b-1)*E>=r.cells?r.small(b-1):(E-1)*b>=r.cells&&r.large(E-1)}else for(;r.cols*r.rows<r.cells;){const b=r.small(),E=r.large();(E+1)*b>=r.cells?r.large(E+1):r.small(b+1)}r.cellWidth=r.width/r.cols,r.cellHeight=r.height/r.rows,r.condense&&(r.cellWidth=0,r.cellHeight=0),r.preventOverlap&&h.forEach(b=>{(!b.x||!b.y)&&(b.x=0,b.y=0);let E,T;Ns(b.size)?(E=b.size[0],T=b.size[1]):Jn(b.size)?(E=b.size,T=b.size):yl(b.size)&&(E=b.size.width,T=b.size.height),(E===void 0||T===void 0)&&(Ns(r.nodeSize)?(E=r.nodeSize[0],T=r.nodeSize[1]):Jn(r.nodeSize)?(E=r.nodeSize,T=r.nodeSize):(E=30,T=30));const O=r.preventOverlapPadding,I=E+O,k=T+O;r.cellWidth=Math.max(r.cellWidth,I),r.cellHeight=Math.max(r.cellHeight,k)}),r.cellUsed={},r.row=0,r.col=0,r.id2manPos={};for(let b=0;b<h.length;b++){const E=h[b];let T;if(r.position&&(T=r.position(E)),T&&(T.row!==void 0||T.col!==void 0)){const O={row:T.row,col:T.col};if(O.col===void 0)for(O.col=0;r.used(O.row,O.col);)O.col++;else if(O.row===void 0)for(O.row=0;r.used(O.row,O.col);)O.row++;r.id2manPos[E.id]=O,r.use(O.row,O.col)}r.getPos(E)}return r.onLayoutEnd&&r.onLayoutEnd(),{edges:s,nodes:h}}small(r){const i=this;let s;const a=i.rows||5,u=i.cols||5;return r==null?s=Math.min(a,u):Math.min(a,u)===i.rows?i.rows=r:i.cols=r,s}large(r){const i=this;let s;const a=i.rows||5,u=i.cols||5;return r==null?s=Math.max(a,u):Math.max(a,u)===i.rows?i.rows=r:i.cols=r,s}used(r,i){return this.cellUsed[`c-${r}-${i}`]||!1}use(r,i){const s=this;s.cellUsed[`c-${r}-${i}`]=!0}moveToNextCell(){const r=this,i=r.cols||5;r.col++,r.col>=i&&(r.col=0,r.row++)}getPos(r){const i=this,s=i.begin,a=i.cellWidth,u=i.cellHeight;let h,p;const g=i.id2manPos[r.id];if(g)h=g.col*a+a/2+s[0],p=g.row*u+u/2+s[1];else{for(;i.used(i.row,i.col);)i.moveToNextCell();h=i.col*a+a/2+s[0],p=i.row*u+u/2+s[1],i.use(i.row,i.col),i.moveToNextCell()}r.x=h,r.y=p}getType(){return"grid"}}const Fa=(n,r)=>{let i;return n?Jn(n)?i=s=>n:i=n:i=s=>r||1,i};class Z0 extends Go{constructor(r){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0}}execute(){var r,i;const s=this,a=s.nodes;if(s.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(s.timeInterval),!a||a.length===0){(r=s.onLayoutEnd)===null||r===void 0||r.call(s);return}!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);const u=s.center;if(a.length===1){a[0].x=u[0],a[0].y=u[1],(i=s.onLayoutEnd)===null||i===void 0||i.call(s);return}const h={},p={};a.forEach((E,T)=>{Jn(E.x)||(E.x=Math.random()*s.width),Jn(E.y)||(E.y=Math.random()*s.height),h[E.id]=E,p[E.id]=T}),s.nodeMap=h,s.nodeIdxMap=p,s.linkDistance=Fa(s.linkDistance,1),s.nodeStrength=Fa(s.nodeStrength,1),s.edgeStrength=Fa(s.edgeStrength,1);const g=s.nodeSize;let y;if(s.preventOverlap){const E=s.nodeSpacing;let T;Jn(E)?T=()=>E:To(E)?T=E:T=()=>0,g?Ns(g)?y=O=>(g[0]>g[1]?g[0]:g[1])+T(O):y=O=>g+T(O):y=O=>O.size?Ns(O.size)?(O.size[0]>O.size[1]?O.size[0]:O.size[1])+T(O):yl(O.size)?(O.size.width>O.size.height?O.size.width:O.size.height)+T(O):O.size+T(O):10+T(O)}s.nodeSize=y;const b=s.edges;s.degrees=Ga(a.length,s.nodeIdxMap,b),s.getMass||(s.getMass=E=>s.degrees[s.nodeIdxMap[E.id]]||1),s.run()}run(){var r;const i=this,{maxIteration:s,nodes:a,workerEnabled:u,minMovement:h}=i;if(a)if(u){for(let p=0;p<s;p++){const g=i.runOneStep(p);if(i.reachMoveThreshold(a,g,h))break}(r=i.onLayoutEnd)===null||r===void 0||r.call(i)}else{if(typeof window=="undefined")return;let p=0;this.timeInterval=window.setInterval(()=>{var g,y;if(!a)return;const b=i.runOneStep(p)||[];i.reachMoveThreshold(a,b,h)&&((g=i.onLayoutEnd)===null||g===void 0||g.call(i),window.clearInterval(i.timeInterval)),p++,p>=s&&((y=i.onLayoutEnd)===null||y===void 0||y.call(i),window.clearInterval(i.timeInterval))},0)}}reachMoveThreshold(r,i,s){let a=0;return r.forEach((u,h)=>{const p=u.x-i[h].x,g=u.y-i[h].y;a+=Math.sqrt(p*p+g*g)}),a/=r.length,a<s}runOneStep(r){var i;const s=this,{nodes:a,edges:u}=s,h=[],p=[];if(!a)return;a.forEach((b,E)=>{h[2*E]=0,h[2*E+1]=0,p[2*E]=0,p[2*E+1]=0}),s.calRepulsive(h,a),u&&s.calAttractive(h,u),s.calGravity(h,a);const g=Math.max(.02,s.interval-r*.002);s.updateVelocity(h,p,g,a);const y=[];return a.forEach(b=>{y.push({x:b.x,y:b.y})}),s.updatePosition(p,g,a),(i=s.tick)===null||i===void 0||i.call(s),y}calRepulsive(r,i){const s=this,a=s.getMass,u=s.nodeStrength,h=s.factor,p=s.coulombDisScale,g=s.preventOverlap,y=s.nodeSize;i.forEach((b,E)=>{const T=a?a(b):1;i.forEach((O,I)=>{if(E>=I)return;const k=b.x-O.x,B=b.y-O.y,$=Math.sqrt(k*k+B*B)+.01,X=($+.1)*p,re=k/$,ye=B/$,me=(u(b)+u(O))/2*h/(X*X),We=a?a(O):1;if(r[2*E]+=re*me,r[2*E+1]+=ye*me,r[2*I]-=re*me,r[2*I+1]-=ye*me,g&&$<(y(b)+y(O))/2){const at=(u(b)+u(O))/2/($*$);r[2*E]+=re*at/T,r[2*E+1]+=ye*at/T,r[2*I]-=re*at/We,r[2*I+1]-=ye*at/We}})})}calAttractive(r,i){const s=this,a=s.nodeMap,u=s.nodeIdxMap,h=s.linkDistance,p=s.edgeStrength,g=s.getMass;i.forEach((y,b)=>{const E=Ci(y,"source"),T=Ci(y,"target"),O=a[E],I=a[T],k=I.x-O.x,B=I.y-O.y,$=Math.sqrt(k*k+B*B)+.01,X=k/$,re=B/$,We=((h(y)||1)-$)*p(y),at=u[E],ft=u[T],Qt=g?g(O):1,_t=g?g(I):1;r[2*at]-=X*We/Qt,r[2*at+1]-=re*We/Qt,r[2*ft]+=X*We/_t,r[2*ft+1]+=re*We/_t})}calGravity(r,i){const s=this,a=s.center,u=s.gravity,h=s.degrees,p=i.length;for(let g=0;g<p;g++){const y=i[g];let b=y.x-a[0],E=y.y-a[1],T=u;if(s.getCenter){const O=s.getCenter(y,h[g]);O&&Jn(O[0])&&Jn(O[1])&&Jn(O[2])&&(b=y.x-O[0],E=y.y-O[1],T=O[2])}T&&(r[2*g]-=T*b,r[2*g+1]-=T*E)}}updateVelocity(r,i,s,a){const u=this,h=s*u.damping;a.forEach((p,g)=>{let y=r[2*g]*h||.01,b=r[2*g+1]*h||.01;const E=Math.sqrt(y*y+b*b);if(E>u.maxSpeed){const T=u.maxSpeed/E;y=T*y,b=T*b}i[2*g]=y,i[2*g+1]=b})}updatePosition(r,i,s){s.forEach((a,u)=>{if(Jn(a.fx)&&Jn(a.fy)){a.x=a.fx,a.y=a.fy;return}const h=r[2*u]*i,p=r[2*u+1]*i;a.x+=h,a.y+=p})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0}getType(){return"gForce"}}function vm(n){const r=+this._x.call(null,n),i=+this._y.call(null,n);return Oh(this.cover(r,i),r,i,n)}function Oh(n,r,i,s){if(isNaN(r)||isNaN(i))return n;var a,u=n._root,h={data:s},p=n._x0,g=n._y0,y=n._x1,b=n._y1,E,T,O,I,k,B,$,X;if(!u)return n._root=h,n;for(;u.length;)if((k=r>=(E=(p+y)/2))?p=E:y=E,(B=i>=(T=(g+b)/2))?g=T:b=T,a=u,!(u=u[$=B<<1|k]))return a[$]=h,n;if(O=+n._x.call(null,u.data),I=+n._y.call(null,u.data),r===O&&i===I)return h.next=u,a?a[$]=h:n._root=h,n;do a=a?a[$]=new Array(4):n._root=new Array(4),(k=r>=(E=(p+y)/2))?p=E:y=E,(B=i>=(T=(g+b)/2))?g=T:b=T;while(($=B<<1|k)===(X=(I>=T)<<1|O>=E));return a[X]=u,a[$]=h,n}function Ph(n){var r,i,s=n.length,a,u,h=new Array(s),p=new Array(s),g=1/0,y=1/0,b=-1/0,E=-1/0;for(i=0;i<s;++i)isNaN(a=+this._x.call(null,r=n[i]))||isNaN(u=+this._y.call(null,r))||(h[i]=a,p[i]=u,a<g&&(g=a),a>b&&(b=a),u<y&&(y=u),u>E&&(E=u));if(g>b||y>E)return this;for(this.cover(g,y).cover(b,E),i=0;i<s;++i)Oh(this,h[i],p[i],n[i]);return this}function pc(n,r){if(isNaN(n=+n)||isNaN(r=+r))return this;var i=this._x0,s=this._y0,a=this._x1,u=this._y1;if(isNaN(i))a=(i=Math.floor(n))+1,u=(s=Math.floor(r))+1;else{for(var h=a-i||1,p=this._root,g,y;i>n||n>=a||s>r||r>=u;)switch(y=(r<s)<<1|n<i,g=new Array(4),g[y]=p,p=g,h*=2,y){case 0:a=i+h,u=s+h;break;case 1:i=a-h,u=s+h;break;case 2:a=i+h,s=u-h;break;case 3:i=a-h,s=u-h;break}this._root&&this._root.length&&(this._root=p)}return this._x0=i,this._y0=s,this._x1=a,this._y1=u,this}function Ip(){var n=[];return this.visit(function(r){if(!r.length)do n.push(r.data);while(r=r.next)}),n}function Dh(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function is(n,r,i,s,a){this.node=n,this.x0=r,this.y0=i,this.x1=s,this.y1=a}function Gd(n,r,i){var s,a=this._x0,u=this._y0,h,p,g,y,b=this._x1,E=this._y1,T=[],O=this._root,I,k;for(O&&T.push(new is(O,a,u,b,E)),i==null?i=1/0:(a=n-i,u=r-i,b=n+i,E=r+i,i*=i);I=T.pop();)if(!(!(O=I.node)||(h=I.x0)>b||(p=I.y0)>E||(g=I.x1)<a||(y=I.y1)<u))if(O.length){var B=(h+g)/2,$=(p+y)/2;T.push(new is(O[3],B,$,g,y),new is(O[2],h,$,B,y),new is(O[1],B,p,g,$),new is(O[0],h,p,B,$)),(k=(r>=$)<<1|n>=B)&&(I=T[T.length-1],T[T.length-1]=T[T.length-1-k],T[T.length-1-k]=I)}else{var X=n-+this._x.call(null,O.data),re=r-+this._y.call(null,O.data),ye=X*X+re*re;if(ye<i){var me=Math.sqrt(i=ye);a=n-me,u=r-me,b=n+me,E=r+me,s=O.data}}return s}function Fd(n){if(isNaN(b=+this._x.call(null,n))||isNaN(E=+this._y.call(null,n)))return this;var r,i=this._root,s,a,u,h=this._x0,p=this._y0,g=this._x1,y=this._y1,b,E,T,O,I,k,B,$;if(!i)return this;if(i.length)for(;;){if((I=b>=(T=(h+g)/2))?h=T:g=T,(k=E>=(O=(p+y)/2))?p=O:y=O,r=i,!(i=i[B=k<<1|I]))return this;if(!i.length)break;(r[B+1&3]||r[B+2&3]||r[B+3&3])&&(s=r,$=B)}for(;i.data!==n;)if(a=i,!(i=i.next))return this;return(u=i.next)&&delete i.next,a?(u?a.next=u:delete a.next,this):r?(u?r[B]=u:delete r[B],(i=r[0]||r[1]||r[2]||r[3])&&i===(r[3]||r[2]||r[1]||r[0])&&!i.length&&(s?s[$]=i:this._root=i),this):(this._root=u,this)}function Rp(n){for(var r=0,i=n.length;r<i;++r)this.remove(n[r]);return this}function zg(){return this._root}function Ba(){var n=0;return this.visit(function(r){if(!r.length)do++n;while(r=r.next)}),n}function Ql(n){var r=[],i,s=this._root,a,u,h,p,g;for(s&&r.push(new is(s,this._x0,this._y0,this._x1,this._y1));i=r.pop();)if(!n(s=i.node,u=i.x0,h=i.y0,p=i.x1,g=i.y1)&&s.length){var y=(u+p)/2,b=(h+g)/2;(a=s[3])&&r.push(new is(a,y,b,p,g)),(a=s[2])&&r.push(new is(a,u,b,y,g)),(a=s[1])&&r.push(new is(a,y,h,p,b)),(a=s[0])&&r.push(new is(a,u,h,y,b))}return this}function fs(n){var r=[],i=[],s;for(this._root&&r.push(new is(this._root,this._x0,this._y0,this._x1,this._y1));s=r.pop();){var a=s.node;if(a.length){var u,h=s.x0,p=s.y0,g=s.x1,y=s.y1,b=(h+g)/2,E=(p+y)/2;(u=a[0])&&r.push(new is(u,h,p,b,E)),(u=a[1])&&r.push(new is(u,b,p,g,E)),(u=a[2])&&r.push(new is(u,h,E,b,y)),(u=a[3])&&r.push(new is(u,b,E,g,y))}i.push(s)}for(;s=i.pop();)n(s.node,s.x0,s.y0,s.x1,s.y1);return this}function Sa(n){return n[0]}function kp(n){return arguments.length?(this._x=n,this):this._x}function Lp(n){return n[1]}function mm(n){return arguments.length?(this._y=n,this):this._y}function Nh(n,r,i){var s=new Ih(r==null?Sa:r,i==null?Lp:i,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function Ih(n,r,i,s,a,u){this._x=n,this._y=r,this._x0=i,this._y0=s,this._x1=a,this._y1=u,this._root=void 0}function Gp(n){for(var r={data:n.data},i=r;n=n.next;)i=i.next={data:n.data};return r}var _a=Nh.prototype=Ih.prototype;_a.copy=function(){var n=new Ih(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,i,s;if(!r)return n;if(!r.length)return n._root=Gp(r),n;for(i=[{source:r,target:n._root=new Array(4)}];r=i.pop();)for(var a=0;a<4;++a)(s=r.source[a])&&(s.length?i.push({source:s,target:r.target[a]=new Array(4)}):r.target[a]=Gp(s));return n},_a.add=vm,_a.addAll=Ph,_a.cover=pc,_a.data=Ip,_a.extent=Dh,_a.find=Gd,_a.remove=Fd,_a.removeAll=Rp,_a.root=zg,_a.size=Ba,_a.visit=Ql,_a.visitAfter=fs,_a.x=kp,_a.y=mm;function Qa(n){return function(){return n}}function vu(n){return(n()-.5)*1e-6}var gc={value:function(){}};function Ug(){for(var n=0,r=arguments.length,i={},s;n<r;++n){if(!(s=arguments[n]+"")||s in i||/[\s.]/.test(s))throw new Error("illegal type: "+s);i[s]=[]}return new Rh(i)}function Rh(n){this._=n}function Y0(n,r){return n.trim().split(/^|\s+/).map(function(i){var s="",a=i.indexOf(".");if(a>=0&&(s=i.slice(a+1),i=i.slice(0,a)),i&&!r.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:s}})}Rh.prototype=Ug.prototype={constructor:Rh,on:function(r,i){var s=this._,a=Y0(r+"",s),u,h=-1,p=a.length;if(arguments.length<2){for(;++h<p;)if((u=(r=a[h]).type)&&(u=Vg(s[u],r.name)))return u;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++h<p;)if(u=(r=a[h]).type)s[u]=K0(s[u],r.name,i);else if(i==null)for(u in s)s[u]=K0(s[u],r.name,null);return this},copy:function(){var r={},i=this._;for(var s in i)r[s]=i[s].slice();return new Rh(r)},call:function(r,i){if((u=arguments.length-2)>0)for(var s=new Array(u),a=0,u,h;a<u;++a)s[a]=arguments[a+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(h=this._[r],a=0,u=h.length;a<u;++a)h[a].value.apply(i,s)},apply:function(r,i,s){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var a=this._[r],u=0,h=a.length;u<h;++u)a[u].value.apply(i,s)}};function Vg(n,r){for(var i=0,s=n.length,a;i<s;++i)if((a=n[i]).name===r)return a.value}function K0(n,r,i){for(var s=0,a=n.length;s<a;++s)if(n[s].name===r){n[s]=gc,n=n.slice(0,s).concat(n.slice(s+1));break}return i!=null&&n.push({name:r,value:i}),n}var q0=Ug,el=0,Bd=0,K=0,Me=1e3,He,Tt,yt=0,St=0,Lt=0,on=typeof performance=="object"&&performance.now?performance:Date,gn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function pn(){return St||(gn(vn),St=on.now()+Lt)}function vn(){St=0}function un(){this._call=this._time=this._next=null}un.prototype=Bn.prototype={constructor:un,restart:function(n,r,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?pn():+i)+(r==null?0:+r),!this._next&&Tt!==this&&(Tt?Tt._next=this:He=this,Tt=this),this._call=n,this._time=i,yn()},stop:function(){this._call&&(this._call=null,this._time=1/0,yn())}};function Bn(n,r,i){var s=new un;return s.restart(n,r,i),s}function fn(){pn(),++el;for(var n=He,r;n;)(r=St-n._time)>=0&&n._call.call(null,r),n=n._next;--el}function Mn(){St=(yt=on.now())+Lt,el=Bd=0;try{fn()}finally{el=0,Ft(),St=0}}function mt(){var n=on.now(),r=n-yt;r>Me&&(Lt-=r,yt=n)}function Ft(){for(var n,r=He,i,s=1/0;r;)r._call?(s>r._time&&(s=r._time),n=r,r=r._next):(i=r._next,r._next=null,r=n?n._next=i:He=i);Tt=n,yn(s)}function yn(n){if(!el){Bd&&(Bd=clearTimeout(Bd));var r=n-St;r>24?(n<1/0&&(Bd=setTimeout(Mn,n-on.now()-Lt)),K&&(K=clearInterval(K))):(K||(yt=on.now(),K=setInterval(mt,Me)),el=1,gn(Mn))}}var Xn=1664525,sn=1013904223,$n=4294967296;function qt(){var n=1;return function(){return(n=(Xn*n+sn)%$n)/$n}}function Pn(n){return n.x}function ln(n){return n.y}var Dn=10,yr=Math.PI*(3-Math.sqrt(5));function Fr(n){var r,i=1,s=.001,a=1-Math.pow(s,1/300),u=0,h=.6,p=new Map,g=Bn(E),y=q0("tick","end"),b=qt();n==null&&(n=[]);function E(){T(),y.call("tick",r),i<s&&(g.stop(),y.call("end",r))}function T(k){var B,$=n.length,X;k===void 0&&(k=1);for(var re=0;re<k;++re)for(i+=(u-i)*a,p.forEach(function(ye){ye(i)}),B=0;B<$;++B)X=n[B],X.fx==null?X.x+=X.vx*=h:(X.x=X.fx,X.vx=0),X.fy==null?X.y+=X.vy*=h:(X.y=X.fy,X.vy=0);return r}function O(){for(var k=0,B=n.length,$;k<B;++k){if($=n[k],$.index=k,$.fx!=null&&($.x=$.fx),$.fy!=null&&($.y=$.fy),isNaN($.x)||isNaN($.y)){var X=Dn*Math.sqrt(.5+k),re=k*yr;$.x=X*Math.cos(re),$.y=X*Math.sin(re)}(isNaN($.vx)||isNaN($.vy))&&($.vx=$.vy=0)}}function I(k){return k.initialize&&k.initialize(n,b),k}return O(),r={tick:T,restart:function(){return g.restart(E),r},stop:function(){return g.stop(),r},nodes:function(B){return arguments.length?(n=B,O(),p.forEach(I),r):n},alpha:function(B){return arguments.length?(i=+B,r):i},alphaMin:function(B){return arguments.length?(s=+B,r):s},alphaDecay:function(B){return arguments.length?(a=+B,r):+a},alphaTarget:function(B){return arguments.length?(u=+B,r):u},velocityDecay:function(B){return arguments.length?(h=1-B,r):1-h},randomSource:function(B){return arguments.length?(b=B,p.forEach(I),r):b},force:function(B,$){return arguments.length>1?($==null?p.delete(B):p.set(B,I($)),r):p.get(B)},find:function(B,$,X){var re=0,ye=n.length,me,We,at,ft,Qt;for(X==null?X=1/0:X*=X,re=0;re<ye;++re)ft=n[re],me=B-ft.x,We=$-ft.y,at=me*me+We*We,at<X&&(Qt=ft,X=at);return Qt},on:function(B,$){return arguments.length>1?(y.on(B,$),r):y.on(B)}}}function Nn(){var n,r,i,s,a=Qa(-30),u,h=1,p=1/0,g=.81;function y(O){var I,k=n.length,B=Nh(n,Pn,ln).visitAfter(E);for(s=O,I=0;I<k;++I)r=n[I],B.visit(T)}function b(){if(n){var O,I=n.length,k;for(u=new Array(I),O=0;O<I;++O)k=n[O],u[k.index]=+a(k,O,n)}}function E(O){var I=0,k,B,$=0,X,re,ye;if(O.length){for(X=re=ye=0;ye<4;++ye)(k=O[ye])&&(B=Math.abs(k.value))&&(I+=k.value,$+=B,X+=B*k.x,re+=B*k.y);O.x=X/$,O.y=re/$}else{k=O,k.x=k.data.x,k.y=k.data.y;do I+=u[k.data.index];while(k=k.next)}O.value=I}function T(O,I,k,B){if(!O.value)return!0;var $=O.x-r.x,X=O.y-r.y,re=B-I,ye=$*$+X*X;if(re*re/g<ye)return ye<p&&($===0&&($=vu(i),ye+=$*$),X===0&&(X=vu(i),ye+=X*X),ye<h&&(ye=Math.sqrt(h*ye)),r.vx+=$*O.value*s/ye,r.vy+=X*O.value*s/ye),!0;if(O.length||ye>=p)return;(O.data!==r||O.next)&&($===0&&($=vu(i),ye+=$*$),X===0&&(X=vu(i),ye+=X*X),ye<h&&(ye=Math.sqrt(h*ye)));do O.data!==r&&(re=u[O.data.index]*s/ye,r.vx+=$*re,r.vy+=X*re);while(O=O.next)}return y.initialize=function(O,I){n=O,i=I,b()},y.strength=function(O){return arguments.length?(a=typeof O=="function"?O:Qa(+O),b(),y):a},y.distanceMin=function(O){return arguments.length?(h=O*O,y):Math.sqrt(h)},y.distanceMax=function(O){return arguments.length?(p=O*O,y):Math.sqrt(p)},y.theta=function(O){return arguments.length?(g=O*O,y):Math.sqrt(g)},y}function Cn(n,r){var i,s=1;n==null&&(n=0),r==null&&(r=0);function a(){var u,h=i.length,p,g=0,y=0;for(u=0;u<h;++u)p=i[u],g+=p.x,y+=p.y;for(g=(g/h-n)*s,y=(y/h-r)*s,u=0;u<h;++u)p=i[u],p.x-=g,p.y-=y}return a.initialize=function(u){i=u},a.x=function(u){return arguments.length?(n=+u,a):n},a.y=function(u){return arguments.length?(r=+u,a):r},a.strength=function(u){return arguments.length?(s=+u,a):s},a}function nn(n){return n.index}function Pr(n,r){var i=n.get(r);if(!i)throw new Error("node not found: "+r);return i}function Yr(n){var r=nn,i=E,s,a=Qa(30),u,h,p,g,y,b=1;n==null&&(n=[]);function E(B){return 1/Math.min(p[B.source.index],p[B.target.index])}function T(B){for(var $=0,X=n.length;$<b;++$)for(var re=0,ye,me,We,at,ft,Qt,_t;re<X;++re)ye=n[re],me=ye.source,We=ye.target,at=We.x+We.vx-me.x-me.vx||vu(y),ft=We.y+We.vy-me.y-me.vy||vu(y),Qt=Math.sqrt(at*at+ft*ft),Qt=(Qt-u[re])/Qt*B*s[re],at*=Qt,ft*=Qt,We.vx-=at*(_t=g[re]),We.vy-=ft*_t,me.vx+=at*(_t=1-_t),me.vy+=ft*_t}function O(){if(h){var B,$=h.length,X=n.length,re=new Map(h.map(function(me,We){return[r(me,We,h),me]})),ye;for(B=0,p=new Array($);B<X;++B)ye=n[B],ye.index=B,Na()(ye.source)!=="object"&&(ye.source=Pr(re,ye.source)),Na()(ye.target)!=="object"&&(ye.target=Pr(re,ye.target)),p[ye.source.index]=(p[ye.source.index]||0)+1,p[ye.target.index]=(p[ye.target.index]||0)+1;for(B=0,g=new Array(X);B<X;++B)ye=n[B],g[B]=p[ye.source.index]/(p[ye.source.index]+p[ye.target.index]);s=new Array(X),I(),u=new Array(X),k()}}function I(){if(h)for(var B=0,$=n.length;B<$;++B)s[B]=+i(n[B],B,n)}function k(){if(h)for(var B=0,$=n.length;B<$;++B)u[B]=+a(n[B],B,n)}return T.initialize=function(B,$){h=B,y=$,O()},T.links=function(B){return arguments.length?(n=B,O(),T):n},T.id=function(B){return arguments.length?(r=B,T):r},T.iterations=function(B){return arguments.length?(b=+B,T):b},T.strength=function(B){return arguments.length?(i=typeof B=="function"?B:Qa(+B),I(),T):i},T.distance=function(B){return arguments.length?(a=typeof B=="function"?B:Qa(+B),k(),T):a},T}function nr(n){return n.x+n.vx}function mi(n){return n.y+n.vy}function Ur(n){var r,i,s,a=1,u=1;typeof n!="function"&&(n=Qa(n==null?1:+n));function h(){for(var y,b=r.length,E,T,O,I,k,B,$=0;$<u;++$)for(E=Nh(r,nr,mi).visitAfter(p),y=0;y<b;++y)T=r[y],k=i[T.index],B=k*k,O=T.x+T.vx,I=T.y+T.vy,E.visit(X);function X(re,ye,me,We,at){var ft=re.data,Qt=re.r,_t=k+Qt;if(ft){if(ft.index>T.index){var en=O-ft.x-ft.vx,ct=I-ft.y-ft.vy,Hn=en*en+ct*ct;Hn<_t*_t&&(en===0&&(en=vu(s),Hn+=en*en),ct===0&&(ct=vu(s),Hn+=ct*ct),Hn=(_t-(Hn=Math.sqrt(Hn)))/Hn*a,T.vx+=(en*=Hn)*(_t=(Qt*=Qt)/(B+Qt)),T.vy+=(ct*=Hn)*_t,ft.vx-=en*(_t=1-_t),ft.vy-=ct*_t)}return}return ye>O+_t||We<O-_t||me>I+_t||at<I-_t}}function p(y){if(y.data)return y.r=i[y.data.index];for(var b=y.r=0;b<4;++b)y[b]&&y[b].r>y.r&&(y.r=y[b].r)}function g(){if(r){var y,b=r.length,E;for(i=new Array(b),y=0;y<b;++y)E=r[y],i[E.index]=+n(E,y,r)}}return h.initialize=function(y,b){r=y,s=b,g()},h.iterations=function(y){return arguments.length?(u=+y,h):u},h.strength=function(y){return arguments.length?(a=+y,h):a},h.radius=function(y){return arguments.length?(n=typeof y=="function"?y:Qa(+y),g(),h):n},h}function oi(n){var r=Qa(.1),i,s,a;typeof n!="function"&&(n=Qa(n==null?0:+n));function u(p){for(var g=0,y=i.length,b;g<y;++g)b=i[g],b.vx+=(a[g]-b.x)*s[g]*p}function h(){if(i){var p,g=i.length;for(s=new Array(g),a=new Array(g),p=0;p<g;++p)s[p]=isNaN(a[p]=+n(i[p],p,i))?0:+r(i[p],p,i)}}return u.initialize=function(p){i=p,h()},u.strength=function(p){return arguments.length?(r=typeof p=="function"?p:Qa(+p),h(),u):r},u.x=function(p){return arguments.length?(n=typeof p=="function"?p:Qa(+p),h(),u):n},u}function Ii(n){var r=Qa(.1),i,s,a;typeof n!="function"&&(n=Qa(n==null?0:+n));function u(p){for(var g=0,y=i.length,b;g<y;++g)b=i[g],b.vy+=(a[g]-b.y)*s[g]*p}function h(){if(i){var p,g=i.length;for(s=new Array(g),a=new Array(g),p=0;p<g;++p)s[p]=isNaN(a[p]=+n(i[p],p,i))?0:+r(i[p],p,i)}}return u.initialize=function(p){i=p,h()},u.strength=function(p){return arguments.length?(r=typeof p=="function"?p:Qa(+p),h(),u):r},u.y=function(p){return arguments.length?(n=typeof p=="function"?p:Qa(+p),h(),u):n},u}function os(){function n(Vn){return()=>Vn}let r=Vn=>Vn.cluster,i=n(1),s=n(-1),a=n(100),u=n(.1),h=[0,0],p=[],g={},y=[],b=100,E=100,T={none:{x:0,y:0}},O=[],I,k="force",B=!0,$=.1;function X(Vn){if(!B)return X;I.tick(),ft();for(let Or=0,Hi=p.length,eo,xo=Vn*$;Or<Hi;++Or)eo=p[Or],eo.vx+=(T[r(eo)].x-eo.x)*xo,eo.vy+=(T[r(eo)].y-eo.y)*xo}function re(){p&&ye()}function ye(){if(!p||!p.length)return;if(r(p[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const Vn=me();I=Fr(Vn.nodes).force("x",oi(b).strength(.1)).force("y",Ii(E).strength(.1)).force("collide",Ur(Or=>Or.r).iterations(4)).force("charge",Nn().strength(s)).force("links",Yr(Vn.nodes.length?Vn.links:[]).distance(a).strength(u)),O=I.nodes(),ft()}function me(){const Vn=[],Or=[],Hi={};let eo=[],xo={},li=[];return xo=We(p),li=at(y),eo=Object.keys(xo),eo.forEach((ia,zl)=>{const Yo=xo[ia];Vn.push({id:ia,size:Yo.count,r:Math.sqrt(Yo.sumforceNodeSize/Math.PI)}),Hi[ia]=zl}),li.forEach(ia=>{const zl=Ci(ia,"source"),Yo=Ci(ia,"target"),rf=Hi[zl],of=Hi[Yo];rf!==void 0&&of!==void 0&&Or.push({source:rf,target:of,count:ia.count})}),{nodes:Vn,links:Or}}function We(Vn){const Or={};return Vn.forEach(Hi=>{const eo=r(Hi);Or[eo]||(Or[eo]={count:0,sumforceNodeSize:0})}),Vn.forEach(Hi=>{const eo=r(Hi),xo=i(Hi),li=Or[eo];li.count=li.count+1,li.sumforceNodeSize=li.sumforceNodeSize+Math.PI*(xo*xo)*1.3,Or[eo]=li}),Or}function at(Vn){const Or={},Hi=[];return Vn.forEach(xo=>{const li=Qt(xo);let ia=0;Or[li]!==void 0&&(ia=Or[li]),ia+=1,Or[li]=ia}),Object.entries(Or).forEach(([xo,li])=>{const ia=xo.split("~")[0],zl=xo.split("~")[1];ia!==void 0&&zl!==void 0&&Hi.push({source:ia,target:zl,count:li})}),Hi}function ft(){return T={none:{x:0,y:0}},O.forEach(Vn=>{T[Vn.id]={x:Vn.x-h[0],y:Vn.y-h[1]}}),T}function Qt(Vn){const Or=Ci(Vn,"source"),Hi=Ci(Vn,"target"),eo=r(g[Or]),xo=r(g[Hi]);return eo<=xo?`${eo}~${xo}`:`${xo}~${eo}`}function _t(Vn){g={},Vn.forEach(Or=>{g[Or.id]=Or})}function en(Vn){return arguments.length?(k=Vn,re(),X):k}function ct(Vn){return arguments.length?typeof Vn=="string"?(r=Or=>Or[Vn],X):(r=Vn,X):r}function Hn(Vn){return arguments.length?(B=Vn,X):B}function Gn(Vn){return arguments.length?($=Vn,X):$}function rr(Vn){return arguments.length?(b=Vn,X):b}function Vi(Vn){return arguments.length?(E=Vn,X):E}function ji(Vn){return arguments.length?(_t(Vn||[]),p=Vn||[],X):p}function ai(Vn){return arguments.length?(y=Vn||[],re(),X):y}function Zo(Vn){return arguments.length?(typeof Vn=="function"?i=Vn:i=n(+Vn),re(),X):i}function na(Vn){return arguments.length?(typeof Vn=="function"?s=Vn:s=n(+Vn),re(),X):s}function Mi(Vn){return arguments.length?(typeof Vn=="function"?a=Vn:a=n(+Vn),re(),X):a}function ra(Vn){return arguments.length?(typeof Vn=="function"?u=Vn:u=n(+Vn),re(),X):u}function Ha(Vn){return arguments.length?(h=Vn,X):h}return X.initialize=Vn=>{p=Vn,re()},X.template=en,X.groupBy=ct,X.enableGrouping=Hn,X.strength=Gn,X.centerX=rr,X.centerY=Vi,X.nodes=ji,X.links=ai,X.forceNodeSize=Zo,X.nodeSize=X.forceNodeSize,X.forceCharge=na,X.forceLinkDistance=Mi,X.forceLinkStrength=ra,X.offset=Ha,X.getFocis=ft,X}const ps={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};class di extends Go{constructor(r){super(),this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,r&&this.updateCfg(r)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(r){const i=this;i.nodes=r.nodes||[];const s=r.edges||[];i.edges=s.map(a=>{const u={},h=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(a).forEach(p=>{h.indexOf(p)>-1||(u[p]=a[p])}),u}),i.ticking=!1}execute(r){const i=this,s=i.nodes,a=i.edges;if(i.ticking)return;let u=i.forceSimulation;const h=i.alphaMin,p=i.alphaDecay,g=i.alpha;if(u){if(r){if(i.clustering&&i.clusterForce&&(i.clusterForce.nodes(s),i.clusterForce.links(a)),u.nodes(s),a&&i.edgeForce)i.edgeForce.links(a);else if(a&&!i.edgeForce){const y=Yr().id(b=>b.id).links(a);i.edgeStrength&&y.strength(i.edgeStrength),i.linkDistance&&y.distance(i.linkDistance),i.edgeForce=y,u.force("link",y)}}i.preventOverlap&&i.overlapProcess(u),u.alpha(g).restart(),this.ticking=!0}else try{const y=Nn();if(i.nodeStrength&&y.strength(i.nodeStrength),u=Fr().nodes(s),i.clustering){const b=os();b.centerX(i.center[0]).centerY(i.center[1]).template("force").strength(i.clusterFociStrength),a&&b.links(a),s&&b.nodes(s),b.forceLinkDistance(i.clusterEdgeDistance).forceLinkStrength(i.clusterEdgeStrength).forceCharge(i.clusterNodeStrength).forceNodeSize(i.clusterNodeSize),i.clusterForce=b,u.force("group",b)}if(u.force("center",Cn(i.center[0],i.center[1])).force("charge",y).alpha(g).alphaDecay(p).alphaMin(h),i.preventOverlap&&i.overlapProcess(u),a){const b=Yr().id(E=>E.id).links(a);i.edgeStrength&&b.strength(i.edgeStrength),i.linkDistance&&b.distance(i.linkDistance),i.edgeForce=b,u.force("link",b)}if(i.workerEnabled&&!Eo()&&(i.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!i.workerEnabled)u.on("tick",()=>{i.tick()}).on("end",()=>{i.ticking=!1,i.onLayoutEnd&&i.onLayoutEnd()}),i.ticking=!0;else{u.stop();const b=gs(u);for(let E=1;E<=b;E++)u.tick(),postMessage({nodes:s,currentTick:E,totalTicks:b,type:ps.TICK},void 0);i.ticking=!1}i.forceSimulation=u,i.ticking=!0}catch(y){i.ticking=!1,console.warn(y)}}overlapProcess(r){const i=this,s=i.nodeSize,a=i.nodeSpacing;let u,h;const p=i.collideStrength;if(Jn(a)?h=()=>a:To(a)?h=a:h=()=>0,!s)u=g=>g.size?Ns(g.size)?(g.size[0]>g.size[1]?g.size[0]:g.size[1])/2+h(g):yl(g.size)?(g.size.width>g.size.height?g.size.width:g.size.height)/2+h(g):g.size/2+h(g):10+h(g);else if(To(s))u=g=>s(g)+h(g);else if(Ns(s)){const y=(s[0]>s[1]?s[0]:s[1])/2;u=b=>y+h(b)}else if(Jn(s)){const g=s/2;u=y=>g+h(y)}else u=()=>10;r.force("collisionForce",Ur(u).strength(p))}updateCfg(r){const i=this;i.ticking&&(i.forceSimulation.stop(),i.ticking=!1),i.forceSimulation=null,Object.assign(i,r)}destroy(){const r=this;r.ticking&&(r.forceSimulation.stop(),r.ticking=!1),r.nodes=null,r.edges=null,r.destroyed=!0}}function gs(n){const r=n.alphaMin(),i=n.alphaTarget(),s=n.alpha(),a=Math.log((r-i)/(s-i))/Math.log(1-n.alphaDecay());return Math.ceil(a)}function Eo(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function Mo(n,r,i,s){n.forEach((a,u)=>{n[u].children=[],n[u].parent=[]}),s?r.forEach(a=>{const u=Ci(a,"source"),h=Ci(a,"target");let p=0;u&&(p=i[u]);let g=0;h&&(g=i[h]);const y=n[p].children,b=n[g].parent;y.push(n[g].id),b.push(n[p].id)}):r.forEach(a=>{const u=Ci(a,"source"),h=Ci(a,"target");let p=0;u&&(p=i[u]);let g=0;h&&(g=i[h]);const y=n[p].children,b=n[g].children;y.push(n[g].id),b.push(n[p].id)})}function ss(n,r,i){const s=i.length;for(let a=0;a<s;a++){const u=Ci(i[a],"source"),h=Ci(i[a],"target");if(n.id===u&&r.id===h||r.id===u&&n.id===h)return!0}return!1}function Ss(n,r){const i=n.degree,s=r.degree;return i<s?-1:i>s?1:0}class Oo extends Go{constructor(r){super(),this.radius=null,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(r)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){const r=this,i=r.nodes,s=r.edges,a=i.length;if(a===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const u=r.center;if(a===1){i[0].x=u[0],i[0].y=u[1],r.onLayoutEnd&&r.onLayoutEnd();return}let h=r.radius,p=r.startRadius,g=r.endRadius;const y=r.divisions,b=r.startAngle,E=r.endAngle,T=(E-b)/a,O={};i.forEach((me,We)=>{O[me.id]=We}),r.nodeMap=O;const I=Ga(i.length,O,s);r.degrees=I,!h&&!p&&!g?h=r.height>r.width?r.width/2:r.height/2:!p&&g?p=g:p&&!g&&(g=p);const k=r.angleRatio,B=T*k,$=r.ordering;let X=[];$==="topology"?X=r.topologyOrdering():$==="topology-directed"?X=r.topologyOrdering(!0):$==="degree"?X=r.degreeOrdering():X=i;const re=r.clockwise,ye=Math.ceil(a/y);for(let me=0;me<a;++me){let We=h;!We&&p!==null&&g!==null&&(We=p+me*(g-p)/(a-1)),We||(We=10+me*100/(a-1));let at=b+me%ye*B+2*Math.PI/y*Math.floor(me/ye);re||(at=E-me%ye*B-2*Math.PI/y*Math.floor(me/ye)),X[me].x=u[0]+Math.cos(at)*We,X[me].y=u[1]+Math.sin(at)*We,X[me].weight=I[me]}return r.onLayoutEnd&&r.onLayoutEnd(),{nodes:X,edges:this.edges}}topologyOrdering(r=!1){const i=this,s=i.degrees,a=i.edges,u=i.nodes,h=La(u),p=i.nodeMap,g=[h[0]],y=[u[0]],b=[],E=u.length;b[0]=!0,Mo(h,a,p,r);let T=0;return h.forEach((O,I)=>{if(I!==0)if((I===E-1||s[I]!==s[I+1]||ss(g[T],O,a))&&!b[I])g.push(O),y.push(u[p[O.id]]),b[I]=!0,T++;else{const k=g[T].children;let B=!1;for(let X=0;X<k.length;X++){const re=p[k[X]];if(s[re]===s[I]&&!b[re]){g.push(h[re]),y.push(u[p[h[re].id]]),b[re]=!0,B=!0;break}}let $=0;for(;!B&&(b[$]||(g.push(h[$]),y.push(u[p[h[$].id]]),b[$]=!0,B=!0),$++,$!==E););}}),y}degreeOrdering(){const r=this,i=r.nodes,s=[],a=r.degrees;return i.forEach((u,h)=>{u.degree=a[h],s.push(u)}),s.sort(Ss),s}getType(){return"circular"}}var $o=M(85788),vs=M.n($o);let Kr=vs();!Kr&&typeof window!="undefined"&&(Kr=window.graphlib),Array.prototype.flat||(Array.prototype.flat=function(n){let r=n||1;if(!isFinite(r))return;const i=this.length;let s=[];if(this.length===0)return this;for(;r--;){const a=[];let u=!1;if(s.length===0){u=!0;for(let h=0;h<i;h++)this[h]instanceof Array?s.push(...this[h]):s.push(this[h])}else{for(let h=0;h<s.length;h++)s[h]instanceof Array?(u=!0,a.push(...s[h])):a.push(s[h]);s=a}if(!u&&r===1/0)break}return s});var Wo=Kr;const zi=n=>{n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev},Sr=(n,r)=>{if(n!=="_next"&&n!=="_prev")return r};class wi{constructor(){const r={};r._next=r._prev=r,this.isentinel=r}dequeue(){const r=this.isentinel,i=r._prev;if(i!==r)return zi(i),i}enqueue(){const r=this.isentinel,i=r._prev;if(i!==r)return zi(i),i}toString(){const r=[],i=this.isentinel;let s=i._prev;for(;s!==i;)r.push(JSON.stringify(s,Sr)),s=s._prev;return`[${r.join(", ")}]`}}var Ri=wi;const ms=Wo.Graph,zc=()=>1,zd=(n,r)=>{var i;if(n.nodeCount()<=1)return[];const s=Mt(n,r||zc);return(i=Ue(s.graph,s.buckets,s.zeroIdx).map(u=>n.outEdges(u.v,u.w)))===null||i===void 0?void 0:i.flat()},Ue=(n,r,i)=>{let s=[];const a=r[r.length-1],u=r[0];let h;for(;n.nodeCount();){for(;h=u.dequeue();)Dt(n,r,i,h);for(;h=a.dequeue();)Dt(n,r,i,h);if(n.nodeCount()){for(let p=r.length-2;p>0;--p)if(h=r[p].dequeue(),h){s=s.concat(Dt(n,r,i,h,!0));break}}}return s},Dt=(n,r,i,s,a)=>{var u,h;const p=a?[]:void 0;return(u=n.inEdges(s.v))===null||u===void 0||u.forEach(g=>{const y=n.edge(g),b=n.node(g.v);a&&p.push({v:g.v,w:g.w}),b.out===void 0&&(b.out=0),b.out-=y,qn(r,i,b)}),(h=n.outEdges(s.v))===null||h===void 0||h.forEach(g=>{const y=n.edge(g),b=g.w,E=n.node(b);E.in===void 0&&(E.in=0),E.in-=y,qn(r,i,E)}),n.removeNode(s.v),p},Mt=(n,r)=>{const i=new ms;let s=0,a=0;n.nodes().forEach(g=>{i.setNode(g,{v:g,in:0,out:0})}),n.edges().forEach(g=>{const y=i.edge(g.v,g.w)||0,b=r==null?void 0:r(g),E=y+b;i.setEdge(g.v,g.w,E),a=Math.max(a,i.node(g.v).out+=b),s=Math.max(s,i.node(g.w).in+=b)});const u=[],h=a+s+3;for(let g=0;g<h;g++)u.push(new Ri);const p=s+1;return i.nodes().forEach(g=>{qn(u,p,i.node(g))}),{buckets:u,zeroIdx:p,graph:i}},qn=(n,r,i)=>{i.out?i.in?n[i.out-i.in+r].enqueue(i):n[n.length-1].enqueue(i):n[0].enqueue(i)};var gi=zd;const Fe=n=>{const r=s=>a=>s.edge(a).weight,i=n.graph().acyclicer==="greedy"?gi(n,r(n)):Ce(n);i==null||i.forEach(s=>{const a=n.edge(s);n.removeEdge(s),a.forwardName=s.name,a.reversed=!0,n.setEdge(s.w,s.v,a,`rev-${Math.random()}`)})},Ce=n=>{const r=[],i={},s={},a=u=>{var h;s.hasOwnProperty(u)||(s[u]=!0,i[u]=!0,(h=n.outEdges(u))===null||h===void 0||h.forEach(p=>{i.hasOwnProperty(p.w)?r.push(p):a(p.w)}),delete i[u])};return n.nodes().forEach(a),r};var pt={run:Fe,undo:n=>{n.edges().forEach(r=>{const i=n.edge(r);if(i.reversed){n.removeEdge(r);const s=i.forwardName;delete i.reversed,delete i.forwardName,n.setEdge(r.w,r.v,i,s)}})}};const gt=Wo.Graph,et=(n,r,i,s)=>{let a;do a=`${s}${Math.random()}`;while(n.hasNode(a));return i.dummy=r,n.setNode(a,i),a},Ze=n=>{const r=new gt().setGraph(n.graph());return n.nodes().forEach(i=>{r.setNode(i,n.node(i))}),n.edges().forEach(i=>{const s=r.edge(i.v,i.w)||{weight:0,minlen:1},a=n.edge(i);r.setEdge(i.v,i.w,{weight:s.weight+a.weight,minlen:Math.max(s.minlen,a.minlen)})}),r},lt=n=>{const r=new gt({multigraph:n.isMultigraph()}).setGraph(n.graph());return n.nodes().forEach(i=>{var s;!((s=n.children(i))===null||s===void 0)&&s.length||r.setNode(i,n.node(i))}),n.edges().forEach(i=>r.setEdge(i,n.edge(i))),r},Ge=(n,r)=>{const i={};return n==null||n.forEach((s,a)=>{i[s]=r[a]}),i},Ye=n=>{const r=n.nodes().map(i=>{var s;const a={};return(s=n.outEdges(i))===null||s===void 0||s.forEach(u=>{a[u.w]=(a[u.w]||0)+n.edge(u).weight}),a});return Ge(n.nodes(),r)},Ie=n=>{const r=n.nodes().map(i=>{var s;const a={};return(s=n.inEdges(i))===null||s===void 0||s.forEach(u=>{a[u.v]=(a[u.v]||0)+n.edge(u).weight}),a});return Ge(n.nodes(),r)},st=(n,r)=>{const i=n.x,s=n.y,a=r.x-i,u=r.y-s;let h=n.width/2,p=n.height/2;if(!a&&!u)return{x:0,y:0};let g,y;return Math.abs(u)*h>Math.abs(a)*p?(u<0&&(p=-p),g=p*a/u,y=p):(a<0&&(h=-h),g=h,y=h*u/a),{x:i+g,y:s+y}},Ct=n=>{const r=[],i=[],s=bn(n)+1;for(let a=0;a<s;a++)r.push([]),i.push([]);return n.nodes().forEach(a=>{const h=n.node(a).rank;h!==void 0&&r[h]&&i[h].push(a)}),i==null||i.forEach((a,u)=>{a==null||a.sort((h,p)=>{var g,y;return((g=n.node(h))===null||g===void 0?void 0:g.order)-((y=n.node(p))===null||y===void 0?void 0:y.order)}),a.forEach(h=>{r[u].push(h)})}),r},$t=n=>{const r=n.nodes().filter(s=>n.node(s).rank!==void 0).map(s=>n.node(s).rank),i=Math.min(...r);n.nodes().forEach(s=>{const a=n.node(s);a.hasOwnProperty("rank")&&(a.rank||(a.rank=0),a.rank-=i)})},Xt=n=>{const r=n.nodes().filter(h=>n.node(h).rank!==void 0).map(h=>n.node(h).rank),i=Math.min(...r),s=[];n.nodes().forEach(h=>{var p;const g=(((p=n.node(h))===null||p===void 0?void 0:p.rank)||0)-i;s[g]||(s[g]=[]),s[g].push(h)});let a=0;const u=n.graph().nodeRankFactor||0;for(let h=0;h<s.length;h++){const p=s[h];p===void 0&&h%u!==0?--a:a&&(p==null||p.forEach(g=>{n.node(g).rank||(n.node(g).rank=0),n.node(g).rank+=a}))}},zt=(n,r,i,s)=>{const a={width:0,height:0};return Jn(i)&&Jn(s)&&(a.rank=i,a.order=s),et(n,"border",a,r)},bn=n=>{const r=n.nodes().map(i=>{const s=n.node(i).rank;return s!==void 0?s:-1/0});return Math.max(...r)},cr=(n,r)=>{const i={lhs:[],rhs:[]};return n==null||n.forEach(s=>{r(s)?i.lhs.push(s):i.rhs.push(s)}),i},Qr=(n,r)=>{const i=Date.now();try{return r()}finally{console.log(`${n} time: ${Date.now()-i}ms`)}},er=(n,r)=>r(),xr=(n,r)=>{let i=1/0,s;return n==null||n.forEach(a=>{const u=r(a);i>u&&(i=u,s=a)}),s};var sr={addDummyNode:et,simplify:Ze,asNonCompoundGraph:lt,successorWeights:Ye,predecessorWeights:Ie,intersectRect:st,buildLayerMatrix:Ct,normalizeRanks:$t,removeEmptyRanks:Xt,addBorderNode:zt,maxRank:bn,partition:cr,time:Qr,notime:er,zipObject:Ge,minBy:xr};const Bi=n=>{n.graph().dummyChains=[],n.edges().forEach(r=>Ko(n,r))},Ko=(n,r)=>{var i,s;let a=r.v,u=n.node(a).rank;const h=r.w,p=n.node(h).rank,g=r.name,y=n.edge(r),b=y.labelRank;if(p===u+1)return;n.removeEdge(r);let E,T,O;for(O=0,++u;u<p;++O,++u)y.points=[],T={edgeLabel:y,width:0,height:0,edgeObj:r,rank:u},E=sr.addDummyNode(n,"edge",T,"_d"),u===b&&(T.width=y.width,T.height=y.height,T.dummy="edge-label",T.labelpos=y.labelpos),n.setEdge(a,E,{weight:y.weight},g),O===0&&(n.graph().dummyChains||(n.graph().dummyChains=[]),(s=(i=n.graph())===null||i===void 0?void 0:i.dummyChains)===null||s===void 0||s.push(E)),a=E;n.setEdge(a,h,{weight:y.weight},g)};var Fp={run:Bi,undo:n=>{var r;(r=n.graph().dummyChains)===null||r===void 0||r.forEach(i=>{var s;let a=n.node(i);const u=a.edgeLabel;let h;a.edgeObj&&n.setEdge(a.edgeObj,u);let p=i;for(;a.dummy;)h=(s=n.successors(p))===null||s===void 0?void 0:s[0],n.removeNode(p),u.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(u.x=a.x,u.y=a.y,u.width=a.width,u.height=a.height),p=h,a=n.node(p)})}};const bl=n=>{var r;const i={},s=a=>{var u;const h=n.node(a);if(i.hasOwnProperty(a))return h.rank;i[a]=!0;const p=(u=n.outEdges(a))===null||u===void 0?void 0:u.map(y=>s(y.w)-n.edge(y).minlen||1/0);let g=Math.min(...p);return(g===Number.POSITIVE_INFINITY||g===void 0||g===null)&&(g=0),h.rank=g,g};(r=n.sources())===null||r===void 0||r.forEach(a=>s(a))},jg=n=>{var r;const i={};let s=0;const a=h=>{var p;const g=n.node(h);if(i.hasOwnProperty(h))return g.rank;i[h]=!0;const y=(p=n.outEdges(h))===null||p===void 0?void 0:p.map(E=>a(E.w)-n.edge(E).minlen||1/0);let b=Math.min(...y);return(b===Number.POSITIVE_INFINITY||b===void 0||b===null)&&(b=0),g.rank=b,s=Math.min(g.rank,s),g.rank};(r=n.sources())===null||r===void 0||r.forEach(h=>a(h)),s+=1;const u=(h,p)=>{var g;const y=n.node(h),b=isNaN(y.layer)?p:y.layer;(y.rank===void 0||y.rank<b)&&(y.rank=b),(g=n.outEdges(h))===null||g===void 0||g.map(E=>{u(E.w,b+n.edge(E).minlen)})};n.nodes().forEach(h=>{const p=n.node(h);isNaN(p.layer)?p.rank-=s:u(h,p.layer)})},Is=(n,r)=>n.node(r.w).rank-n.node(r.v).rank-n.edge(r).minlen;var ym={longestPath:bl,longestPathWithLayer:jg,slack:Is};const bm=Wo.Graph,rb=n=>{const r=new bm({directed:!1}),i=n.nodes()[0],s=n.nodeCount();r.setNode(i,{});let a,u;for(;E1(r,n)<s;)a=sb(r,n),u=r.hasNode(a.v)?Is(n,a):-Is(n,a),ab(r,n,u);return r},E1=(n,r)=>{const i=s=>{r.nodeEdges(s).forEach(a=>{const u=a.v,h=s===u?a.w:u;!n.hasNode(h)&&!Is(r,a)&&(n.setNode(h,{}),n.setEdge(s,h,{}),i(h))})};return n.nodes().forEach(i),n.nodeCount()},ib=n=>{const r=new bm({directed:!1}),i=n.nodes()[0],s=n.nodeCount();r.setNode(i,{});let a,u;for(;ob(r,n)<s;)a=sb(r,n),u=r.hasNode(a.v)?Is(n,a):-Is(n,a),ab(r,n,u);return r},ob=(n,r)=>{const i=s=>{var a;(a=r.nodeEdges(s))===null||a===void 0||a.forEach(u=>{const h=u.v,p=s===h?u.w:h;!n.hasNode(p)&&(r.node(p).layer!==void 0||!Is(r,u))&&(n.setNode(p,{}),n.setEdge(s,p,{}),i(p))})};return n.nodes().forEach(i),n.nodeCount()},sb=(n,r)=>xr(r.edges(),i=>n.hasNode(i.v)!==n.hasNode(i.w)?Is(r,i):1/0),ab=(n,r,i)=>{n.nodes().forEach(s=>{r.node(s).rank||(r.node(s).rank=0),r.node(s).rank+=i})};var kw={feasibleTree:rb,feasibleTreeWithLayer:ib};const ec=Wo.alg,{preorder:S1,postorder:xm}=ec,Ud=n=>{n=Ze(n),bl(n);const r=rb(n);Cm(r),ed(r,n);let i,s;for(;i=wm(r);)s=J0(r,n,i),ub(r,n,i,s)},ed=(n,r)=>{let i=xm(n,n.nodes());i=i==null?void 0:i.slice(0,(i==null?void 0:i.length)-1),i==null||i.forEach(s=>{_1(n,r,s)})},_1=(n,r,i)=>{const a=n.node(i).parent;n.edge(i,a).cutvalue=lb(n,r,i)},lb=(n,r,i)=>{var s;const u=n.node(i).parent;let h=!0,p=r.edge(i,u),g=0;return p||(h=!1,p=r.edge(u,i)),g=p.weight,(s=r.nodeEdges(i))===null||s===void 0||s.forEach(y=>{const b=y.v===i,E=b?y.w:y.v;if(E!==u){const T=b===h,O=r.edge(y).weight;if(g+=T?O:-O,db(n,i,E)){const I=n.edge(i,E).cutvalue;g+=T?-I:I}}}),g},Cm=(n,r)=>{r!==void 0&&(r=n.nodes()[0]),cb(n,{},1,r)},cb=(n,r,i,s,a)=>{var u;const h=i;let p=i;const g=n.node(s);return r[s]=!0,(u=n.neighbors(s))===null||u===void 0||u.forEach(y=>{r.hasOwnProperty(y)||(p=cb(n,r,p,y,s))}),g.low=h,g.lim=p++,a?g.parent=a:delete g.parent,p},wm=n=>n.edges().find(r=>n.edge(r).cutvalue<0),J0=(n,r,i)=>{let s=i.v,a=i.w;r.hasEdge(s,a)||(s=i.w,a=i.v);const u=n.node(s),h=n.node(a);let p=u,g=!1;u.lim>h.lim&&(p=h,g=!0);const y=r.edges().filter(b=>g===Fo(n,n.node(b.v),p)&&g!==Fo(n,n.node(b.w),p));return xr(y,b=>Is(r,b))},ub=(n,r,i,s)=>{const a=i.v,u=i.w;n.removeEdge(a,u),n.setEdge(s.v,s.w,{}),Cm(n),ed(n,r),Q0(n,r)},Q0=(n,r)=>{const i=n.nodes().find(a=>!r.node(a).parent);let s=S1(n,i);s=s==null?void 0:s.slice(1),s==null||s.forEach(a=>{const u=n.node(a).parent;let h=r.edge(a,u),p=!1;h||(h=r.edge(u,a),p=!0),r.node(a).rank=r.node(u).rank+(p?h.minlen:-h.minlen)})},db=(n,r,i)=>n.hasEdge(r,i),Fo=(n,r,i)=>i.low<=r.lim&&r.lim<=i.lim;Ud.initLowLimValues=Cm,Ud.initCutValues=ed,Ud.calcCutValue=lb,Ud.leaveEdge=wm,Ud.enterEdge=J0,Ud.exchangeEdges=ub;var ev=Ud;const A1=n=>{switch(n.graph().ranker){case"network-simplex":M1(n);break;case"tight-tree":Uc(n);break;case"longest-path":T1(n);break;default:Uc(n)}},T1=bl,Uc=n=>{jg(n),ib(n)},M1=n=>{ev(n)};var O1=A1;const P1=n=>{var r;const i=N1(n);(r=n.graph().dummyChains)===null||r===void 0||r.forEach(s=>{var a,u;let h=n.node(s);const p=h.edgeObj;if(!p)return;const g=D1(n,i,p.v,p.w),y=g.path,b=g.lca;let E=0,T=y[E],O=!0;for(;s!==p.w;){if(h=n.node(s),O){for(;(T=y[E])!==b&&n.node(T).maxRank<h.rank;)E++;T===b&&(O=!1)}if(!O){for(;E<y.length-1&&((a=n.node(T=y[E+1]))===null||a===void 0?void 0:a.minRank)<=h.rank;)E++;T=y[E]}n.setParent(s,T),s=(u=n.successors(s))===null||u===void 0?void 0:u[0]}})},D1=(n,r,i,s)=>{const a=[],u=[],h=Math.min(r[i].low,r[s].low),p=Math.max(r[i].lim,r[s].lim);let g,y;g=i;do g=n.parent(g),a.push(g);while(g&&(r[g].low>h||p>r[g].lim));for(y=g,g=s;(g=n.parent(g))!==y;)u.push(g);return{lca:y,path:a.concat(u.reverse())}},N1=n=>{var r;const i={};let s=0;const a=u=>{var h;const p=s;(h=n.children(u))===null||h===void 0||h.forEach(a),i[u]={low:p,lim:s++}};return(r=n.children())===null||r===void 0||r.forEach(a),i};var Em=P1;const I1=n=>{var r;const i=sr.addDummyNode(n,"root",{},"_root"),s=R1(n),a=Math.max(...Object.values(s))-1,u=2*a+1;n.graph().nestingRoot=i,n.edges().forEach(p=>{n.edge(p).minlen*=u});const h=k1(n)+1;(r=n.children())===null||r===void 0||r.forEach(p=>{hb(n,i,u,h,a,s,p)}),n.graph().nodeRankFactor=u},hb=(n,r,i,s,a,u,h)=>{const p=n.children(h);if(!(p!=null&&p.length)){h!==r&&n.setEdge(r,h,{weight:0,minlen:i});return}const g=sr.addBorderNode(n,"_bt"),y=sr.addBorderNode(n,"_bb"),b=n.node(h);n.setParent(g,h),b.borderTop=g,n.setParent(y,h),b.borderBottom=y,p==null||p.forEach(E=>{hb(n,r,i,s,a,u,E);const T=n.node(E),O=T.borderTop?T.borderTop:E,I=T.borderBottom?T.borderBottom:E,k=T.borderTop?s:2*s,B=O!==I?1:a-u[h]+1;n.setEdge(g,O,{minlen:B,weight:k,nestingEdge:!0}),n.setEdge(I,y,{minlen:B,weight:k,nestingEdge:!0})}),n.parent(h)||n.setEdge(r,g,{weight:0,minlen:a+u[h]})},R1=n=>{var r;const i={},s=(a,u)=>{const h=n.children(a);h==null||h.forEach(p=>s(p,u+1)),i[a]=u};return(r=n.children())===null||r===void 0||r.forEach(a=>s(a,1)),i},k1=n=>{let r=0;return n.edges().forEach(i=>{r+=n.edge(i).weight}),r};var fb={run:I1,cleanup:n=>{const r=n.graph();r.nestingRoot&&n.removeNode(r.nestingRoot),delete r.nestingRoot,n.edges().forEach(i=>{n.edge(i).nestingEdge&&n.removeEdge(i)})}};const L1=n=>{var r;const i=s=>{const a=n.children(s),u=n.node(s);if(a!=null&&a.length&&a.forEach(h=>i(h)),u.hasOwnProperty("minRank")){u.borderLeft=[],u.borderRight=[];for(let h=u.minRank,p=u.maxRank+1;h<p;++h)Sm(n,"borderLeft","_bl",s,u,h),Sm(n,"borderRight","_br",s,u,h)}};(r=n.children())===null||r===void 0||r.forEach(s=>i(s))},Sm=(n,r,i,s,a,u)=>{const h={rank:u,width:0,height:0,borderType:r},p=a[r][u-1],g=sr.addDummyNode(n,"border",h,i);a[r][u]=g,n.setParent(g,s),p&&n.setEdge(p,g,{weight:1})};var pb=L1;const G1=n=>{var r;const i=(r=n.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(i==="lr"||i==="rl")&&vb(n)},gb=n=>{var r;const i=(r=n.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(i==="bt"||i==="rl")&&tv(n),(i==="lr"||i==="rl")&&(F1(n),vb(n))},vb=n=>{n.nodes().forEach(r=>{mb(n.node(r))}),n.edges().forEach(r=>{mb(n.edge(r))})},mb=n=>{const r=n.width;n.width=n.height,n.height=r},tv=n=>{n.nodes().forEach(r=>{_m(n.node(r))}),n.edges().forEach(r=>{var i;const s=n.edge(r);(i=s.points)===null||i===void 0||i.forEach(a=>_m(a)),s.hasOwnProperty("y")&&_m(s)})},_m=n=>{n.y=-n.y},F1=n=>{n.nodes().forEach(r=>{Am(n.node(r))}),n.edges().forEach(r=>{var i;const s=n.edge(r);(i=s.points)===null||i===void 0||i.forEach(a=>Am(a)),s.hasOwnProperty("x")&&Am(s)})},Am=n=>{const r=n.x;n.x=n.y,n.y=r};var yb={adjust:G1,undo:gb},bb=n=>{const r={},i=n.nodes().filter(b=>{var E;return!(!((E=n.children(b))===null||E===void 0)&&E.length)}),s=i.map(b=>n.node(b).rank),a=Math.max(...s),u=[];for(let b=0;b<a+1;b++)u.push([]);const h=b=>{var E;if(r.hasOwnProperty(b))return;r[b]=!0;const T=n.node(b);isNaN(T.rank)||u[T.rank].push(b),(E=n.successors(b))===null||E===void 0||E.forEach(O=>h(O))},p=i.sort((b,E)=>n.node(b).rank-n.node(E).rank),y=p.filter(b=>n.node(b).fixorder!==void 0).sort((b,E)=>n.node(b).fixorder-n.node(E).fixorder);return y==null||y.forEach(b=>{isNaN(n.node(b).rank)||u[n.node(b).rank].push(b),r[b]=!0}),p==null||p.forEach(h),u};const B1=(n,r,i)=>{const s=Ge(i,i.map((b,E)=>E)),u=r.map(b=>{var E;const T=(E=n.outEdges(b))===null||E===void 0?void 0:E.map(O=>({pos:s[O.w]||0,weight:n.edge(O).weight}));return T==null?void 0:T.sort((O,I)=>O.pos-I.pos)}).flat().filter(b=>b!==void 0);let h=1;for(;h<i.length;)h<<=1;const p=2*h-1;h-=1;const g=Array(p).fill(0,0,p);let y=0;return u==null||u.forEach(b=>{let E=b.pos+h;g[E]+=b.weight;let T=0;for(;E>0;)E%2&&(T+=g[E+1]),E=E-1>>1,g[E]+=b.weight;y+=b.weight*T}),y};var xb=(n,r)=>{let i=0;for(let s=1;s<(r==null?void 0:r.length);++s)i+=B1(n,r[s-1],r[s]);return i};const z1=Wo.Graph,Cb=(n,r,i)=>{const s=Hg(n),a=new z1({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(u=>n.node(u));return n.nodes().forEach(u=>{const h=n.node(u),p=n.parent(u);(h.rank===r||h.minRank<=r&&r<=h.maxRank)&&(a.setNode(u),a.setParent(u,p||s),n[i](u).forEach(g=>{const y=g.v===u?g.w:g.v,b=a.edge(y,u),E=b!==void 0?b.weight:0;a.setEdge(y,u,{weight:n.edge(g).weight+E})}),h.hasOwnProperty("minRank")&&a.setNode(u,{borderLeft:h.borderLeft[r],borderRight:h.borderRight[r]}))}),a},Hg=n=>{let r;for(;n.hasNode(r=`_root${Math.random()}`););return r};var U1=Cb,wb=(n,r,i)=>{const s={};let a;i==null||i.forEach(u=>{let h=n.parent(u),p,g;for(;h;){if(p=n.parent(h),p?(g=s[p],s[p]=h):(g=a,a=h),g&&g!==h){r.setEdge(g,h);return}h=p}})},Sb=(n,r)=>r.map(i=>{const s=n.inEdges(i);if(!(s!=null&&s.length))return{v:i};{const a={sum:0,weight:0};return s==null||s.forEach(u=>{const h=n.edge(u),p=n.node(u.v);a.sum+=h.weight*p.order,a.weight+=h.weight}),{v:i,barycenter:a.sum/a.weight,weight:a.weight}}});const _b=(n,r)=>{var i,s,a;const u={};n==null||n.forEach((p,g)=>{const y=u[p.v]={i:g,indegree:0,in:[],out:[],vs:[p.v]};p.barycenter!==void 0&&(y.barycenter=p.barycenter,y.weight=p.weight)}),(i=r.edges())===null||i===void 0||i.forEach(p=>{const g=u[p.v],y=u[p.w];g!==void 0&&y!==void 0&&(y.indegree++,g.out.push(u[p.w]))});const h=(a=(s=Object.values(u)).filter)===null||a===void 0?void 0:a.call(s,p=>!p.indegree);return Ab(h)},Ab=n=>{var r,i;const s=[],a=g=>y=>{y.merged||(y.barycenter===void 0||g.barycenter===void 0||y.barycenter>=g.barycenter)&&Tb(g,y)},u=g=>y=>{y.in.push(g),--y.indegree===0&&n.push(y)};for(;n!=null&&n.length;){const g=n.pop();s.push(g),(r=g.in.reverse())===null||r===void 0||r.forEach(y=>a(g)(y)),(i=g.out)===null||i===void 0||i.forEach(y=>u(g)(y))}const h=s.filter(g=>!g.merged),p=["vs","i","barycenter","weight"];return h.map(g=>{const y={};return p==null||p.forEach(b=>{g[b]!==void 0&&(y[b]=g[b])}),y})},Tb=(n,r)=>{var i;let s=0,a=0;n.weight&&(s+=n.barycenter*n.weight,a+=n.weight),r.weight&&(s+=r.barycenter*r.weight,a+=r.weight),n.vs=(i=r.vs)===null||i===void 0?void 0:i.concat(n.vs),n.barycenter=s/a,n.weight=a,n.i=Math.min(r.i,n.i),r.merged=!0};var j1=_b;const H1=(n,r,i)=>{const s=sr.partition(n,E=>E.hasOwnProperty("fixorder")&&!isNaN(E.fixorder)||E.hasOwnProperty("barycenter")),a=s.lhs,u=s.rhs.sort((E,T)=>-E.i- -T.i),h=[];let p=0,g=0,y=0;a==null||a.sort(nv(!!r,!!i)),y=Mb(h,u,y),a==null||a.forEach(E=>{var T;y+=(T=E.vs)===null||T===void 0?void 0:T.length,h.push(E.vs),p+=E.barycenter*E.weight,g+=E.weight,y=Mb(h,u,y)});const b={vs:h.flat()};return g&&(b.barycenter=p/g,b.weight=g),b},Mb=(n,r,i)=>{let s=i,a;for(;r.length&&(a=r[r.length-1]).i<=s;)r.pop(),n==null||n.push(a.vs),s++;return s},nv=(n,r)=>(i,s)=>{if(i.fixorder!==void 0&&s.fixorder!==void 0)return i.fixorder-s.fixorder;if(i.barycenter<s.barycenter)return-1;if(i.barycenter>s.barycenter)return 1;if(r&&i.order!==void 0&&s.order!==void 0){if(i.order<s.order)return-1;if(i.order>s.order)return 1}return n?s.i-i.i:i.i-s.i};var rv=H1;const Ob=(n,r,i,s,a)=>{var u,h,p,g;let y=n.children(r);const b=n.node(r),E=b?b.borderLeft:void 0,T=b?b.borderRight:void 0,O={};E&&(y=y==null?void 0:y.filter($=>$!==E&&$!==T));const I=Sb(n,y||[]);I==null||I.forEach($=>{var X;if(!((X=n.children($.v))===null||X===void 0)&&X.length){const re=Ob(n,$.v,i,s);O[$.v]=re,re.hasOwnProperty("barycenter")&&Tm($,re)}});const k=j1(I,i);$1(k,O),(u=k.filter($=>{var X;return!!$.vs||((X=$.vs)===null||X===void 0?void 0:X.length)>0}))===null||u===void 0||u.forEach($=>{const X=n.node($.vs[0]);$.fixorder=X.fixorder,$.order=X.order});const B=rv(k,s,a);if(E&&(B.vs=[E,B.vs,T].flat(),!((h=n.predecessors(E))===null||h===void 0)&&h.length)){const $=n.node(((p=n.predecessors(E))===null||p===void 0?void 0:p[0])||{}),X=n.node(((g=n.predecessors(T))===null||g===void 0?void 0:g[0])||{});B.hasOwnProperty("barycenter")||(B.barycenter=0,B.weight=0),B.barycenter=(B.barycenter*B.weight+$.order+X.order)/(B.weight+2),B.weight+=2}return B},$1=(n,r)=>{n==null||n.forEach(i=>{var s;const a=(s=i.vs)===null||s===void 0?void 0:s.map(u=>r[u]?r[u].vs:u);i.vs=a.flat()})},Tm=(n,r)=>{n.barycenter!==void 0?(n.barycenter=(n.barycenter*n.weight+r.barycenter*r.weight)/(n.weight+r.weight),n.weight+=r.weight):(n.barycenter=r.barycenter,n.weight=r.weight)};var Pb=Ob;const W1=Wo.Graph,X1=n=>{const r=sr.maxRank(n),i=[],s=[];for(let y=1;y<r+1;y++)i.push(y);for(let y=r-1;y>-1;y--)s.push(y);const a=Db(n,i,"inEdges"),u=Db(n,s,"outEdges");let h=bb(n);Mm(n,h);let p=Number.POSITIVE_INFINITY,g;for(let y=0,b=0;b<4;++y,++b){Nb(y%2?a:u,y%4>=2),h=sr.buildLayerMatrix(n);const E=xb(n,h);E<p&&(b=0,g=La(h),p=E)}h=bb(n),Mm(n,h);for(let y=0,b=0;b<4;++y,++b){Nb(y%2?a:u,y%4>=2,!0),h=sr.buildLayerMatrix(n);const E=xb(n,h);E<p&&(b=0,g=La(h),p=E)}Mm(n,g)},Db=(n,r,i)=>r.map(s=>U1(n,s,i)),Nb=(n,r,i)=>{const s=new W1;n==null||n.forEach(a=>{var u;const h=a.graph().root,p=Pb(a,h,s,r,i);for(let g=0;g<((u=p.vs)===null||u===void 0?void 0:u.length);g++)a.node(p.vs[g]).order=g;wb(a,s,p.vs)})},Mm=(n,r)=>{r==null||r.forEach(i=>{i==null||i.forEach((s,a)=>{n.node(s).order=a})})};var Z1=X1;const Y1=Wo.Graph,Om=(n,r)=>{const i={},s=(a,u)=>{let h=0,p=0;const g=a.length,y=u==null?void 0:u[(u==null?void 0:u.length)-1];return u==null||u.forEach((b,E)=>{var T;const O=Ib(n,b),I=O?n.node(O).order:g;(O||b===y)&&((T=u.slice(p,E+1))===null||T===void 0||T.forEach(k=>{var B;(B=n.predecessors(k))===null||B===void 0||B.forEach($=>{const X=n.node($),re=X.order;(re<h||I<re)&&!(X.dummy&&n.node(k).dummy)&&Dm(i,$,k)})}),p=E+1,h=I)}),u};return r!=null&&r.length&&r.reduce(s),i},Pm=(n,r)=>{const i={},s=(u,h,p,g,y)=>{let b;const E=[];for(let T=h;T<p;T++)E.push(T);E.forEach(T=>{var O;b=u[T],n.node(b).dummy&&((O=n.predecessors(b))===null||O===void 0||O.forEach(I=>{const k=n.node(I);k.dummy&&(k.order<g||k.order>y)&&Dm(i,I,b)}))})},a=(u,h)=>{let p=-1,g,y=0;return h==null||h.forEach((b,E)=>{if(n.node(b).dummy==="border"){const T=n.predecessors(b)||[];T.length&&(g=n.node(T[0]).order,s(h,y,E,p,g),y=E,p=g)}s(h,y,h.length,g,u.length)}),h};return r!=null&&r.length&&r.reduce(a),i},Ib=(n,r)=>{var i;if(n.node(r).dummy)return(i=n.predecessors(r))===null||i===void 0?void 0:i.find(s=>n.node(s).dummy)},Dm=(n,r,i)=>{let s=r,a=i;if(s>a){const h=s;s=a,a=h}let u=n[s];u||(n[s]=u={}),u[a]=!0},Rb=(n,r,i)=>{let s=r,a=i;if(s>a){const u=r;s=a,a=u}return n[s]&&n[s].hasOwnProperty(a)},vc=(n,r,i,s)=>{const a={},u={},h={};return r==null||r.forEach(p=>{p==null||p.forEach((g,y)=>{a[g]=g,u[g]=g,h[g]=y})}),r==null||r.forEach(p=>{let g=-1;p==null||p.forEach(y=>{let b=s(y);if(b.length){b=b.sort((T,O)=>h[T]-h[O]);const E=(b.length-1)/2;for(let T=Math.floor(E),O=Math.ceil(E);T<=O;++T){const I=b[T];u[y]===y&&g<h[I]&&!Rb(i,y,I)&&(u[I]=y,u[y]=a[y]=a[I],g=h[I])}}})}),{root:a,align:u}},Nm=(n,r,i,s,a)=>{var u;const h={},p=K1(n,r,i,a),g=a?"borderLeft":"borderRight",y=(T,O)=>{let I=p.nodes(),k=I.pop();const B={};for(;k;)B[k]?T(k):(B[k]=!0,I.push(k),I=I.concat(O(k))),k=I.pop()},b=T=>{h[T]=(p.inEdges(T)||[]).reduce((O,I)=>Math.max(O,(h[I.v]||0)+p.edge(I)),0)},E=T=>{const O=(p.outEdges(T)||[]).reduce((k,B)=>Math.min(k,(h[B.w]||0)-p.edge(B)),Number.POSITIVE_INFINITY),I=n.node(T);O!==Number.POSITIVE_INFINITY&&I.borderType!==g&&(h[T]=Math.max(h[T],O))};return y(b,p.predecessors.bind(p)),y(E,p.successors.bind(p)),(u=Object.values(s))===null||u===void 0||u.forEach(T=>{h[T]=h[i[T]]}),h},K1=(n,r,i,s)=>{const a=new Y1,u=n.graph(),h=Js(u.nodesep,u.edgesep,s);return r==null||r.forEach(p=>{let g;p==null||p.forEach(y=>{const b=i[y];if(a.setNode(b),g){const E=i[g],T=a.edge(E,b);a.setEdge(E,b,Math.max(h(n,y,g),T||0))}g=y})}),a},td=(n,r)=>sr.minBy(Object.values(r),i=>{var s;let a=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;return(s=Object.keys(i))===null||s===void 0||s.forEach(h=>{const p=i[h],g=q1(n,h)/2;a=Math.max(p+g,a),u=Math.min(p-g,u)}),a-u});function Ai(n,r){const i=Object.values(r),s=Math.min(...i),a=Math.max(...i);["u","d"].forEach(u=>{["l","r"].forEach(h=>{const p=u+h,g=n[p];let y;if(g===r)return;const b=Object.values(g);y=h==="l"?s-Math.min(...b):a-Math.max(...b),y&&(n[p]={},Object.keys(g).forEach(E=>{n[p][E]=g[E]+y}))})})}const Im=(n,r)=>{const i={};return Object.keys(n.ul).forEach(s=>{if(r)i[s]=n[r.toLowerCase()][s];else{const u=Object.values(n).map(h=>h[s]).sort((h,p)=>h-p);i[s]=(u[1]+u[2])/2}}),i},tc=n=>{const r=sr.buildLayerMatrix(n),i=Object.assign(Om(n,r),Pm(n,r)),s={};let a;["u","d"].forEach(h=>{a=h==="u"?r:Object.values(r).reverse(),["l","r"].forEach(p=>{p==="r"&&(a=a.map(E=>Object.values(E).reverse()));const g=(h==="u"?n.predecessors:n.successors).bind(n),y=vc(n,a,i,g);let b=Nm(n,a,y.root,y.align,p==="r");p==="r"&&(b=Object.values(b).map(E=>-E)),s[h+p]=b})});const u=td(n,s);return Ai(s,u),Im(s,n.graph().align)},Js=(n,r,i)=>(s,a,u)=>{const h=s.node(a),p=s.node(u);let g=0,y;if(g+=h.width/2,h.hasOwnProperty("labelpos"))switch((h.labelpos||"").toLowerCase()){case"l":y=-h.width/2;break;case"r":y=h.width/2;break}if(y&&(g+=i?y:-y),y=0,g+=(h.dummy?r:n)/2,g+=(p.dummy?r:n)/2,g+=p.width/2,p.hasOwnProperty("labelpos"))switch((p.labelpos||"").toLowerCase()){case"l":y=p.width/2;break;case"r":y=-p.width/2;break}return y&&(g+=i?y:-y),y=0,g},q1=(n,r)=>{var i;return((i=n.node(r))===null||i===void 0?void 0:i.width)||0};var kh={positionX:tc,findType1Conflicts:Om,findType2Conflicts:Pm,addConflict:Dm,hasConflict:Rb,verticalAlignment:vc,horizontalCompaction:Nm,alignCoordinates:Ai,findSmallestWidthAlignment:td,balance:Im};const J1=n=>{const r=sr.buildLayerMatrix(n),i=n.graph().ranksep;let s=0;r==null||r.forEach(a=>{const u=a.map(p=>n.node(p).height),h=Math.max(...u);a==null||a.forEach(p=>{n.node(p).y=s+h/2}),s+=h+i})},Q1=n=>{const r=sr.buildLayerMatrix(n),i=Object.assign(Om(n,r),Pm(n,r)),s={};let a;["u","d"].forEach(h=>{a=h==="u"?r:Object.values(r).reverse(),["l","r"].forEach(p=>{p==="r"&&(a=a.map(E=>Object.values(E).reverse()));const g=(h==="u"?n.predecessors:n.successors).bind(n),y=vc(n,a,i,g),b=Nm(n,a,y.root,y.align,p==="r");p==="r"&&Object.keys(b).forEach(E=>b[E]=-b[E]),s[h+p]=b})});const u=td(n,s);return u&&Ai(s,u),Im(s,n.graph().align)};var ex=n=>{var r;n=sr.asNonCompoundGraph(n),J1(n);const i=Q1(n);(r=Object.keys(i))===null||r===void 0||r.forEach(s=>{n.node(s).x=i[s]})},Rm=(n,r)=>{const s=n.nodes().filter(h=>{var p;return!(!((p=n.children(h))===null||p===void 0)&&p.length)}).map(h=>n.node(h).rank),a=Math.max(...s),u=[];for(let h=0;h<a+1;h++)u.push([]);r==null||r.forEach(h=>{const p=n.node(h);!p||p.dummy||isNaN(p.rank)||(p.fixorder=u[p.rank].length,u[p.rank].push(h))})};const nx=Wo.Graph,Vd=(n,r)=>{const i=r&&r.debugTiming?sr.time:sr.notime;i("layout",()=>{r&&!r.keepNodeOrder&&r.prevGraph&&i("  inheritOrder",()=>{iv(n,r.prevGraph)});const s=i("  buildLayoutGraph",()=>Gb(n));r&&r.edgeLabelSpace===!1||i("  makeSpaceForEdgeLabels",()=>{$g(s)});try{i("  runLayout",()=>{km(s,i,r)})}catch(a){if(a.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,a);return}throw a}i("  updateInputGraph",()=>{Rs(n,s)})})},km=(n,r,i)=>{r("    removeSelfEdges",()=>{lx(n)}),r("    acyclic",()=>{pt.run(n)}),r("    nestingGraph.run",()=>{fb.run(n)}),r("    rank",()=>{O1(sr.asNonCompoundGraph(n))}),r("    injectEdgeLabelProxies",()=>{Fm(n)}),r("    removeEmptyRanks",()=>{Xt(n)}),r("    nestingGraph.cleanup",()=>{fb.cleanup(n)}),r("    normalizeRanks",()=>{$t(n)}),r("    assignRankMinMax",()=>{sx(n)}),r("    removeEdgeLabelProxies",()=>{Fb(n)}),r("    normalize.run",()=>{Fp.run(n)}),r("    parentDummyChains",()=>{Em(n)}),r("    addBorderSegments",()=>{pb(n)}),i&&i.keepNodeOrder&&r("    initDataOrder",()=>{Rm(n,i.nodeOrder)}),r("    order",()=>{Z1(n)}),r("    insertSelfEdges",()=>{Bp(n)}),r("    adjustCoordinateSystem",()=>{yb.adjust(n)}),r("    position",()=>{ex(n)}),r("    positionSelfEdges",()=>{cx(n)}),r("    removeBorderNodes",()=>{ax(n)}),r("    normalize.undo",()=>{Fp.undo(n)}),r("    fixupEdgeLabelCoords",()=>{jd(n)}),r("    undoCoordinateSystem",()=>{yb.undo(n)}),r("    translateGraph",()=>{ov(n)}),r("    assignNodeIntersects",()=>{Zi(n)}),r("    reversePoints",()=>{Bb(n)}),r("    acyclic.undo",()=>{pt.undo(n)})},iv=(n,r)=>{const i=r._nodes||{};n.nodes().forEach(s=>{const a=n.node(s);i[s]!==void 0?(a.fixorder=i[s]._order,delete i[s]._order):delete a.fixorder})},Rs=(n,r)=>{n.nodes().forEach(i=>{var s;const a=n.node(i),u=r.node(i);a&&(a.x=u.x,a.y=u.y,a._order=u.order,a._rank=u.rank,!((s=r.children(i))===null||s===void 0)&&s.length&&(a.width=u.width,a.height=u.height))}),n.edges().forEach(i=>{const s=n.edge(i),a=r.edge(i);s.points=a.points,a.hasOwnProperty("x")&&(s.x=a.x,s.y=a.y)}),n.graph().width=r.graph().width,n.graph().height=r.graph().height},zs=["nodesep","edgesep","ranksep","marginx","marginy"],kb={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Lm=["acyclicer","ranker","rankdir","align"],rx=["width","height","layer","fixorder"],Lb={width:0,height:0},ix=["minlen","weight","width","height","labeloffset"],ox={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Gm=["labelpos"],Gb=n=>{const r=new nx({multigraph:!0,compound:!0}),i=mu(n.graph()),s={};return Lm==null||Lm.forEach(a=>{i[a]!==void 0&&(s[a]=i[a])}),r.setGraph(Object.assign({},kb,sv(i,zs),s)),n.nodes().forEach(a=>{const u=mu(n.node(a)),h=sv(u,rx);Object.keys(Lb).forEach(p=>{h[p]===void 0&&(h[p]=Lb[p])}),r.setNode(a,h),r.setParent(a,n.parent(a))}),n.edges().forEach(a=>{const u=mu(n.edge(a)),h={};Gm==null||Gm.forEach(p=>{u[p]!==void 0&&(h[p]=u[p])}),r.setEdge(a,Object.assign({},ox,sv(u,ix),h))}),r},$g=n=>{const r=n.graph();r.ranksep||(r.ranksep=0),r.ranksep/=2,n.nodes().forEach(i=>{const s=n.node(i);isNaN(s.layer)||(s.layer?s.layer*=2:s.layer=0)}),n.edges().forEach(i=>{var s;const a=n.edge(i);a.minlen*=2,((s=a.labelpos)===null||s===void 0?void 0:s.toLowerCase())!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?a.width+=a.labeloffset:a.height+=a.labeloffset)})},Fm=n=>{n.edges().forEach(r=>{const i=n.edge(r);if(i.width&&i.height){const s=n.node(r.v),a=n.node(r.w),u={e:r,rank:(a.rank-s.rank)/2+s.rank};sr.addDummyNode(n,"edge-proxy",u,"_ep")}})},sx=n=>{let r=0;n.nodes().forEach(i=>{const s=n.node(i);s.borderTop&&(s.minRank=n.node(s.borderTop).rank,s.maxRank=n.node(s.borderBottom).rank,r=Math.max(r,s.maxRank||-1/0))}),n.graph().maxRank=r},Fb=n=>{n.nodes().forEach(r=>{const i=n.node(r);i.dummy==="edge-proxy"&&(n.edge(i.e).labelRank=i.rank,n.removeNode(r))})},ov=n=>{let r=Number.POSITIVE_INFINITY,i=0,s=Number.POSITIVE_INFINITY,a=0;const u=n.graph(),h=u.marginx||0,p=u.marginy||0,g=y=>{if(!y)return;const b=y.x,E=y.y,T=y.width,O=y.height;!isNaN(b)&&!isNaN(T)&&(r=Math.min(r,b-T/2),i=Math.max(i,b+T/2)),!isNaN(E)&&!isNaN(O)&&(s=Math.min(s,E-O/2),a=Math.max(a,E+O/2))};n.nodes().forEach(y=>{g(n.node(y))}),n.edges().forEach(y=>{const b=n.edge(y);b.hasOwnProperty("x")&&g(b)}),r-=h,s-=p,n.nodes().forEach(y=>{const b=n.node(y);b.x-=r,b.y-=s}),n.edges().forEach(y=>{var b;const E=n.edge(y);(b=E.points)===null||b===void 0||b.forEach(T=>{T.x-=r,T.y-=s}),E.hasOwnProperty("x")&&(E.x-=r),E.hasOwnProperty("y")&&(E.y-=s)}),u.width=i-r+h,u.height=a-s+p},Zi=n=>{n.edges().forEach(r=>{const i=n.edge(r),s=n.node(r.v),a=n.node(r.w);let u,h;i.points?(u=i.points[0],h=i.points[i.points.length-1]):(i.points=[],u=a,h=s),i.points.unshift(sr.intersectRect(s,u)),i.points.push(sr.intersectRect(a,h))})},jd=n=>{n.edges().forEach(r=>{const i=n.edge(r);if(i.hasOwnProperty("x"))switch((i.labelpos==="l"||i.labelpos==="r")&&(i.width-=i.labeloffset),i.labelpos){case"l":i.x-=i.width/2+i.labeloffset;break;case"r":i.x+=i.width/2+i.labeloffset;break}})},Bb=n=>{n.edges().forEach(r=>{const i=n.edge(r);i.reversed&&i.points.reverse()})},ax=n=>{n.nodes().forEach(r=>{var i,s,a;if(!((i=n.children(r))===null||i===void 0)&&i.length){const u=n.node(r),h=n.node(u.borderTop),p=n.node(u.borderBottom),g=n.node(u.borderLeft[((s=u.borderLeft)===null||s===void 0?void 0:s.length)-1]),y=n.node(u.borderRight[((a=u.borderRight)===null||a===void 0?void 0:a.length)-1]);u.width=Math.abs((y==null?void 0:y.x)-(g==null?void 0:g.x))||10,u.height=Math.abs((p==null?void 0:p.y)-(h==null?void 0:h.y))||10,u.x=((g==null?void 0:g.x)||0)+u.width/2,u.y=((h==null?void 0:h.y)||0)+u.height/2}}),n.nodes().forEach(r=>{n.node(r).dummy==="border"&&n.removeNode(r)})},lx=n=>{n.edges().forEach(r=>{if(r.v===r.w){const i=n.node(r.v);i.selfEdges||(i.selfEdges=[]),i.selfEdges.push({e:r,label:n.edge(r)}),n.removeEdge(r)}})},Bp=n=>{const r=sr.buildLayerMatrix(n);r==null||r.forEach(i=>{let s=0;i==null||i.forEach((a,u)=>{var h;const p=n.node(a);p.order=u+s,(h=p.selfEdges)===null||h===void 0||h.forEach(g=>{sr.addDummyNode(n,"selfedge",{width:g.label.width,height:g.label.height,rank:p.rank,order:u+ ++s,e:g.e,label:g.label},"_se")}),delete p.selfEdges})})},cx=n=>{n.nodes().forEach(r=>{const i=n.node(r);if(i.dummy==="selfedge"){const s=n.node(i.e.v),a=s.x+s.width/2,u=s.y,h=i.x-a,p=s.height/2;n.setEdge(i.e,i.label),n.removeNode(r),i.label.points=[{x:a+2*h/3,y:u-p},{x:a+5*h/6,y:u-p},{y:u,x:a+h},{x:a+5*h/6,y:u+p},{x:a+2*h/3,y:u+p}],i.label.x=i.x,i.label.y=i.y}})},sv=(n,r)=>{const i={};return r==null||r.forEach(s=>{n[s]!==void 0&&(i[s]=+n[s])}),i},mu=n=>{const r={};return Object.keys(n).forEach(i=>{const s=n[i];r[i.toLowerCase()]=s}),r};var Tr=Vd,Wg={graphlib:Wo,layout:Tr,util:{time:Qr,notime:er}};class mc extends Go{constructor(r){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=i=>{const s=this,{nodes:a}=s,u=a.find(h=>h.id===i);return u?u.layout!==!1:!0},this.updateCfg(r)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}execute(){const r=this,{nodes:i,nodeSize:s,rankdir:a,combos:u,begin:h}=r;if(!i)return;const p=r.edges||[],g=new Wg.graphlib.Graph({multigraph:!0,compound:!0});let y;s?Ns(s)?y=()=>s:y=()=>[s,s]:y=k=>k.size?Ns(k.size)?k.size:yl(k.size)?[k.size.width||40,k.size.height||40]:[k.size,k.size]:[40,40];let b=Xg(r.nodesepFunc,r.nodesep,50),E=Xg(r.ranksepFunc,r.ranksep,50);(a==="LR"||a==="RL")&&(b=Xg(r.ranksepFunc,r.ranksep,50),E=Xg(r.nodesepFunc,r.nodesep,50)),g.setDefaultEdgeLabel(()=>({})),g.setGraph(r);const T={};i.filter(k=>k.layout!==!1).forEach(k=>{const B=y(k),$=E(k),X=b(k),re=B[0]+2*X,ye=B[1]+2*$,me=k.layer;Jn(me)?g.setNode(k.id,{width:re,height:ye,layer:me}):g.setNode(k.id,{width:re,height:ye}),this.sortByCombo&&k.comboId&&(T[k.comboId]||(T[k.comboId]=!0,g.setNode(k.comboId,{})),g.setParent(k.id,k.comboId))}),this.sortByCombo&&u&&u.forEach(k=>{k.parentId&&(T[k.parentId]||(T[k.parentId]=!0,g.setNode(k.parentId,{})),g.setParent(k.id,k.parentId))}),p.forEach(k=>{const B=Ci(k,"source"),$=Ci(k,"target");this.layoutNode(B)&&this.layoutNode($)&&g.setEdge(B,$,{weight:k.weight||1})});let O;r.preset&&(O=new Wg.graphlib.Graph({multigraph:!0,compound:!0}),r.preset.nodes.forEach(k=>{O==null||O.setNode(k.id,k)})),Wg.layout(g,{prevGraph:O,edgeLabelSpace:r.edgeLabelSpace,keepNodeOrder:Boolean(!!r.nodeOrder),nodeOrder:r.nodeOrder});const I=[0,0];if(h){let k=1/0,B=1/0;g.nodes().forEach($=>{const X=g.node($);k>X.x&&(k=X.x),B>X.y&&(B=X.y)}),g.edges().forEach($=>{g.edge($).points.forEach(re=>{k>re.x&&(k=re.x),B>re.y&&(B=re.y)})}),I[0]=h[0]-k,I[1]=h[1]-B}return g.nodes().forEach(k=>{const B=g.node(k),$=i.findIndex(X=>X.id===k);i[$]&&(i[$].x=B.x+I[0],i[$].y=B.y+I[1],i[$]._order=B._order)}),g.edges().forEach(k=>{const B=g.edge(k),$=p.findIndex(X=>{const re=Ci(X,"source"),ye=Ci(X,"target");return re===k.v&&ye===k.w});r.edgeLabelSpace&&r.controlPoints&&p[$].type!=="loop"&&(p[$].controlPoints=B.points.slice(1,B.points.length-1),p[$].controlPoints.forEach(X=>{X.x+=I[0],X.y+=I[1]}))}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:p}}getType(){return"dagre"}}function Xg(n,r,i){let s;return n?s=n:Jn(r)?s=()=>r:s=()=>i,s}var zb=M(44649),So=M.n(zb),ux=M(71980),Bm=M.n(ux),av=M(15617),Ub=M.n(av),zm=M(2837),zp=M.n(zm),dx=M(38265),Zg=M.n(dx);const hx=Object.prototype.toString;function yc(n){const r=hx.call(n);return r.endsWith("Array]")&&!r.includes("Big")}function lv(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!yc(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var i=r.fromIndex,s=i===void 0?0:i,a=r.toIndex,u=a===void 0?n.length:a;if(s<0||s>=n.length||!Number.isInteger(s))throw new Error("fromIndex must be a positive integer smaller than length");if(u<=s||u>n.length||!Number.isInteger(u))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var h=n[s],p=s+1;p<u;p++)n[p]>h&&(h=n[p]);return h}function Vb(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!yc(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var i=r.fromIndex,s=i===void 0?0:i,a=r.toIndex,u=a===void 0?n.length:a;if(s<0||s>=n.length||!Number.isInteger(s))throw new Error("fromIndex must be a positive integer smaller than length");if(u<=s||u>n.length||!Number.isInteger(u))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var h=n[s],p=s+1;p<u;p++)n[p]<h&&(h=n[p]);return h}function jb(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(yc(n)){if(n.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var i;if(r.output!==void 0){if(!yc(r.output))throw new TypeError("output option must be an array if specified");i=r.output}else i=new Array(n.length);var s=Vb(n),a=lv(n);if(s===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var u=r.min,h=u===void 0?r.autoMinMax?s:0:u,p=r.max,g=p===void 0?r.autoMinMax?a:1:p;if(h>=g)throw new RangeError("min option must be smaller than max option");for(var y=(g-h)/(a-s),b=0;b<n.length;b++)i[b]=(n[b]-s)*y+h;return i}var cv=" ".repeat(2),Hb=" ".repeat(4);function Um(){return Bf(this)}function Bf(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.maxRows,s=i===void 0?15:i,a=r.maxColumns,u=a===void 0?10:a,h=r.maxNumSize,p=h===void 0?8:h,g=r.padMinus,y=g===void 0?"auto":g;return"".concat(n.constructor.name,` {
`).concat(cv,`[
`).concat(Hb).concat(zf(n,s,u,p,y),`
`).concat(cv,`]
`).concat(cv,"rows: ").concat(n.rows,`
`).concat(cv,"columns: ").concat(n.columns,`
}`)}function zf(n,r,i,s,a){var u=n.rows,h=n.columns,p=Math.min(u,r),g=Math.min(h,i),y=[];if(a==="auto"){a=!1;e:for(var b=0;b<p;b++)for(var E=0;E<g;E++)if(n.get(b,E)<0){a=!0;break e}}for(var T=0;T<p;T++){for(var O=[],I=0;I<g;I++)O.push(Yg(n.get(T,I),s,a));y.push("".concat(O.join(" ")))}return g!==h&&(y[y.length-1]+=" ... ".concat(h-i," more columns")),p!==u&&y.push("... ".concat(u-r," more rows")),y.join(`
`.concat(Hb))}function Yg(n,r,i){return(n>=0&&i?" ".concat(Vm(n,r-1)):Vm(n,r)).padEnd(r)}function Vm(n,r){var i=n.toString();if(i.length<=r)return i;var s=n.toFixed(r);if(s.length>r&&(s=n.toFixed(Math.max(0,r-(s.length-r)))),s.length<=r&&!s.startsWith("0.000")&&!s.startsWith("-0.000"))return s;var a=n.toExponential(r);return a.length>r&&(a=n.toExponential(Math.max(0,r-(a.length-r)))),a.slice(0)}function fx(n,r){n.prototype.add=function(s){return typeof s=="number"?this.addS(s):this.addM(s)},n.prototype.addS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)+s);return this},n.prototype.addM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)+s.get(a,u));return this},n.add=function(s,a){var u=new r(s);return u.add(a)},n.prototype.sub=function(s){return typeof s=="number"?this.subS(s):this.subM(s)},n.prototype.subS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)-s);return this},n.prototype.subM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)-s.get(a,u));return this},n.sub=function(s,a){var u=new r(s);return u.sub(a)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(s){return typeof s=="number"?this.mulS(s):this.mulM(s)},n.prototype.mulS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)*s);return this},n.prototype.mulM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)*s.get(a,u));return this},n.mul=function(s,a){var u=new r(s);return u.mul(a)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(s){return typeof s=="number"?this.divS(s):this.divM(s)},n.prototype.divS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)/s);return this},n.prototype.divM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)/s.get(a,u));return this},n.div=function(s,a){var u=new r(s);return u.div(a)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(s){return typeof s=="number"?this.modS(s):this.modM(s)},n.prototype.modS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)%s);return this},n.prototype.modM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)%s.get(a,u));return this},n.mod=function(s,a){var u=new r(s);return u.mod(a)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(s){return typeof s=="number"?this.andS(s):this.andM(s)},n.prototype.andS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)&s);return this},n.prototype.andM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)&s.get(a,u));return this},n.and=function(s,a){var u=new r(s);return u.and(a)},n.prototype.or=function(s){return typeof s=="number"?this.orS(s):this.orM(s)},n.prototype.orS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)|s);return this},n.prototype.orM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)|s.get(a,u));return this},n.or=function(s,a){var u=new r(s);return u.or(a)},n.prototype.xor=function(s){return typeof s=="number"?this.xorS(s):this.xorM(s)},n.prototype.xorS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)^s);return this},n.prototype.xorM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)^s.get(a,u));return this},n.xor=function(s,a){var u=new r(s);return u.xor(a)},n.prototype.leftShift=function(s){return typeof s=="number"?this.leftShiftS(s):this.leftShiftM(s)},n.prototype.leftShiftS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)<<s);return this},n.prototype.leftShiftM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)<<s.get(a,u));return this},n.leftShift=function(s,a){var u=new r(s);return u.leftShift(a)},n.prototype.signPropagatingRightShift=function(s){return typeof s=="number"?this.signPropagatingRightShiftS(s):this.signPropagatingRightShiftM(s)},n.prototype.signPropagatingRightShiftS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>s);return this},n.prototype.signPropagatingRightShiftM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>s.get(a,u));return this},n.signPropagatingRightShift=function(s,a){var u=new r(s);return u.signPropagatingRightShift(a)},n.prototype.rightShift=function(s){return typeof s=="number"?this.rightShiftS(s):this.rightShiftM(s)},n.prototype.rightShiftS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>>s);return this},n.prototype.rightShiftM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>>s.get(a,u));return this},n.rightShift=function(s,a){var u=new r(s);return u.rightShift(a)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,~this.get(s,a));return this},n.not=function(s){var a=new r(s);return a.not()},n.prototype.abs=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.abs(this.get(s,a)));return this},n.abs=function(s){var a=new r(s);return a.abs()},n.prototype.acos=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.acos(this.get(s,a)));return this},n.acos=function(s){var a=new r(s);return a.acos()},n.prototype.acosh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.acosh(this.get(s,a)));return this},n.acosh=function(s){var a=new r(s);return a.acosh()},n.prototype.asin=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.asin(this.get(s,a)));return this},n.asin=function(s){var a=new r(s);return a.asin()},n.prototype.asinh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.asinh(this.get(s,a)));return this},n.asinh=function(s){var a=new r(s);return a.asinh()},n.prototype.atan=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.atan(this.get(s,a)));return this},n.atan=function(s){var a=new r(s);return a.atan()},n.prototype.atanh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.atanh(this.get(s,a)));return this},n.atanh=function(s){var a=new r(s);return a.atanh()},n.prototype.cbrt=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.cbrt(this.get(s,a)));return this},n.cbrt=function(s){var a=new r(s);return a.cbrt()},n.prototype.ceil=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.ceil(this.get(s,a)));return this},n.ceil=function(s){var a=new r(s);return a.ceil()},n.prototype.clz32=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.clz32(this.get(s,a)));return this},n.clz32=function(s){var a=new r(s);return a.clz32()},n.prototype.cos=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.cos(this.get(s,a)));return this},n.cos=function(s){var a=new r(s);return a.cos()},n.prototype.cosh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.cosh(this.get(s,a)));return this},n.cosh=function(s){var a=new r(s);return a.cosh()},n.prototype.exp=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.exp(this.get(s,a)));return this},n.exp=function(s){var a=new r(s);return a.exp()},n.prototype.expm1=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.expm1(this.get(s,a)));return this},n.expm1=function(s){var a=new r(s);return a.expm1()},n.prototype.floor=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.floor(this.get(s,a)));return this},n.floor=function(s){var a=new r(s);return a.floor()},n.prototype.fround=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.fround(this.get(s,a)));return this},n.fround=function(s){var a=new r(s);return a.fround()},n.prototype.log=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log(this.get(s,a)));return this},n.log=function(s){var a=new r(s);return a.log()},n.prototype.log1p=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log1p(this.get(s,a)));return this},n.log1p=function(s){var a=new r(s);return a.log1p()},n.prototype.log10=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log10(this.get(s,a)));return this},n.log10=function(s){var a=new r(s);return a.log10()},n.prototype.log2=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log2(this.get(s,a)));return this},n.log2=function(s){var a=new r(s);return a.log2()},n.prototype.round=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.round(this.get(s,a)));return this},n.round=function(s){var a=new r(s);return a.round()},n.prototype.sign=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sign(this.get(s,a)));return this},n.sign=function(s){var a=new r(s);return a.sign()},n.prototype.sin=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sin(this.get(s,a)));return this},n.sin=function(s){var a=new r(s);return a.sin()},n.prototype.sinh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sinh(this.get(s,a)));return this},n.sinh=function(s){var a=new r(s);return a.sinh()},n.prototype.sqrt=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sqrt(this.get(s,a)));return this},n.sqrt=function(s){var a=new r(s);return a.sqrt()},n.prototype.tan=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.tan(this.get(s,a)));return this},n.tan=function(s){var a=new r(s);return a.tan()},n.prototype.tanh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.tanh(this.get(s,a)));return this},n.tanh=function(s){var a=new r(s);return a.tanh()},n.prototype.trunc=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.trunc(this.get(s,a)));return this},n.trunc=function(s){var a=new r(s);return a.trunc()},n.pow=function(s,a){var u=new r(s);return u.pow(a)},n.prototype.pow=function(s){return typeof s=="number"?this.powS(s):this.powM(s)},n.prototype.powS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,Math.pow(this.get(a,u),s));return this},n.prototype.powM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,Math.pow(this.get(a,u),s.get(a,u)));return this}}function yu(n,r,i){var s=i?n.rows:n.rows-1;if(r<0||r>s)throw new RangeError("Row index out of range")}function Xo(n,r,i){var s=i?n.columns:n.columns-1;if(r<0||r>s)throw new RangeError("Column index out of range")}function Aa(n,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function Lh(n,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function px(n,r){if(!yc(r))throw new TypeError("row indices must be an array");for(var i=0;i<r.length;i++)if(r[i]<0||r[i]>=n.rows)throw new RangeError("row indices are out of range")}function gx(n,r){if(!yc(r))throw new TypeError("column indices must be an array");for(var i=0;i<r.length;i++)if(r[i]<0||r[i]>=n.columns)throw new RangeError("column indices are out of range")}function jm(n,r,i,s,a){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(uv("startRow",r),uv("endRow",i),uv("startColumn",s),uv("endColumn",a),r>i||s>a||r<0||r>=n.rows||i<0||i>=n.rows||s<0||s>=n.columns||a<0||a>=n.columns)throw new RangeError("Submatrix indices are out of range")}function Kg(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=[],s=0;s<n;s++)i.push(r);return i}function uv(n,r){if(typeof r!="number")throw new TypeError("".concat(n," must be a number"))}function Up(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function Hm(n){for(var r=Kg(n.rows),i=0;i<n.rows;++i)for(var s=0;s<n.columns;++s)r[i]+=n.get(i,s);return r}function vx(n){for(var r=Kg(n.columns),i=0;i<n.rows;++i)for(var s=0;s<n.columns;++s)r[s]+=n.get(i,s);return r}function mx(n){for(var r=0,i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)r+=n.get(i,s);return r}function yx(n){for(var r=Kg(n.rows,1),i=0;i<n.rows;++i)for(var s=0;s<n.columns;++s)r[i]*=n.get(i,s);return r}function $m(n){for(var r=Kg(n.columns,1),i=0;i<n.rows;++i)for(var s=0;s<n.columns;++s)r[s]*=n.get(i,s);return r}function $b(n){for(var r=1,i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)r*=n.get(i,s);return r}function bx(n,r,i){for(var s=n.rows,a=n.columns,u=[],h=0;h<s;h++){for(var p=0,g=0,y=0,b=0;b<a;b++)y=n.get(h,b)-i[h],p+=y,g+=y*y;r?u.push((g-p*p/a)/(a-1)):u.push((g-p*p/a)/a)}return u}function xx(n,r,i){for(var s=n.rows,a=n.columns,u=[],h=0;h<a;h++){for(var p=0,g=0,y=0,b=0;b<s;b++)y=n.get(b,h)-i[h],p+=y,g+=y*y;r?u.push((g-p*p/s)/(s-1)):u.push((g-p*p/s)/s)}return u}function Cx(n,r,i){for(var s=n.rows,a=n.columns,u=s*a,h=0,p=0,g=0,y=0;y<s;y++)for(var b=0;b<a;b++)g=n.get(y,b)-i,h+=g,p+=g*g;return r?(p-h*h/u)/(u-1):(p-h*h/u)/u}function dv(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)-r[i])}function Vp(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)-r[s])}function wx(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)-r)}function Ex(n){for(var r=[],i=0;i<n.rows;i++){for(var s=0,a=0;a<n.columns;a++)s+=Math.pow(n.get(i,a),2)/(n.columns-1);r.push(Math.sqrt(s))}return r}function Sx(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)/r[i])}function _x(n){for(var r=[],i=0;i<n.columns;i++){for(var s=0,a=0;a<n.rows;a++)s+=Math.pow(n.get(a,i),2)/(n.rows-1);r.push(Math.sqrt(s))}return r}function Ax(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)/r[s])}function Wm(n){for(var r=n.size-1,i=0,s=0;s<n.columns;s++)for(var a=0;a<n.rows;a++)i+=Math.pow(n.get(a,s),2)/r;return Math.sqrt(i)}function Wb(n,r){for(var i=0;i<n.rows;i++)for(var s=0;s<n.columns;s++)n.set(i,s,n.get(i,s)/r)}var Ta=function(){function n(){zp()(this,n)}return Zg()(n,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(i){if(typeof i!="function")throw new TypeError("callback must be a function");for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i.call(this,s,a);return this}},{key:"to1DArray",value:function(){for(var i=[],s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i.push(this.get(s,a));return i}},{key:"to2DArray",value:function(){for(var i=[],s=0;s<this.rows;s++){i.push([]);for(var a=0;a<this.columns;a++)i[s].push(this.get(s,a))}return i}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var i=0;i<this.rows;i++)for(var s=0;s<=i;s++)if(this.get(i,s)!==this.get(s,i))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var i=0,s=0,a=-1,u=!0,h=!1;i<this.rows&&u;){for(s=0,h=!1;s<this.columns&&h===!1;)this.get(i,s)===0?s++:this.get(i,s)===1&&s>a?(h=!0,a=s):(u=!1,h=!0);i++}return u}},{key:"isReducedEchelonForm",value:function(){for(var i=0,s=0,a=-1,u=!0,h=!1;i<this.rows&&u;){for(s=0,h=!1;s<this.columns&&h===!1;)this.get(i,s)===0?s++:this.get(i,s)===1&&s>a?(h=!0,a=s):(u=!1,h=!0);for(var p=s+1;p<this.rows;p++)this.get(i,p)!==0&&(u=!1);i++}return u}},{key:"echelonForm",value:function(){for(var i=this.clone(),s=0,a=0;s<i.rows&&a<i.columns;){for(var u=s,h=s;h<i.rows;h++)i.get(h,a)>i.get(u,a)&&(u=h);if(i.get(u,a)===0)a++;else{i.swapRows(s,u);for(var p=i.get(s,a),g=a;g<i.columns;g++)i.set(s,g,i.get(s,g)/p);for(var y=s+1;y<i.rows;y++){var b=i.get(y,a)/i.get(s,a);i.set(y,a,0);for(var E=a+1;E<i.columns;E++)i.set(y,E,i.get(y,E)-i.get(s,E)*b)}s++,a++}}return i}},{key:"reducedEchelonForm",value:function(){for(var i=this.echelonForm(),s=i.columns,a=i.rows,u=a-1;u>=0;)if(i.maxRow(u)===0)u--;else{for(var h=0,p=!1;h<a&&p===!1;)i.get(u,h)===1?p=!0:h++;for(var g=0;g<u;g++)for(var y=i.get(g,h),b=h;b<s;b++){var E=i.get(g,b)-y*i.get(u,b);i.set(g,b,E)}u--}return i}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Na()(i)!=="object")throw new TypeError("options must be an object");var s=i.rows,a=s===void 0?1:s,u=i.columns,h=u===void 0?1:u;if(!Number.isInteger(a)||a<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(h)||h<=0)throw new TypeError("columns must be a positive integer");for(var p=new hi(this.rows*a,this.columns*h),g=0;g<a;g++)for(var y=0;y<h;y++)p.setSubMatrix(this,this.rows*g,this.columns*y);return p}},{key:"fill",value:function(i){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,i);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(i){yu(this,i);for(var s=[],a=0;a<this.columns;a++)s.push(this.get(i,a));return s}},{key:"getRowVector",value:function(i){return hi.rowVector(this.getRow(i))}},{key:"setRow",value:function(i,s){yu(this,i),s=Aa(this,s);for(var a=0;a<this.columns;a++)this.set(i,a,s[a]);return this}},{key:"swapRows",value:function(i,s){yu(this,i),yu(this,s);for(var a=0;a<this.columns;a++){var u=this.get(i,a);this.set(i,a,this.get(s,a)),this.set(s,a,u)}return this}},{key:"getColumn",value:function(i){Xo(this,i);for(var s=[],a=0;a<this.rows;a++)s.push(this.get(a,i));return s}},{key:"getColumnVector",value:function(i){return hi.columnVector(this.getColumn(i))}},{key:"setColumn",value:function(i,s){Xo(this,i),s=Lh(this,s);for(var a=0;a<this.rows;a++)this.set(a,i,s[a]);return this}},{key:"swapColumns",value:function(i,s){Xo(this,i),Xo(this,s);for(var a=0;a<this.rows;a++){var u=this.get(a,i);this.set(a,i,this.get(a,s)),this.set(a,s,u)}return this}},{key:"addRowVector",value:function(i){i=Aa(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)+i[a]);return this}},{key:"subRowVector",value:function(i){i=Aa(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)-i[a]);return this}},{key:"mulRowVector",value:function(i){i=Aa(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)*i[a]);return this}},{key:"divRowVector",value:function(i){i=Aa(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)/i[a]);return this}},{key:"addColumnVector",value:function(i){i=Lh(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)+i[s]);return this}},{key:"subColumnVector",value:function(i){i=Lh(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)-i[s]);return this}},{key:"mulColumnVector",value:function(i){i=Lh(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)*i[s]);return this}},{key:"divColumnVector",value:function(i){i=Lh(this,i);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)/i[s]);return this}},{key:"mulRow",value:function(i,s){yu(this,i);for(var a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*s);return this}},{key:"mulColumn",value:function(i,s){Xo(this,i);for(var a=0;a<this.rows;a++)this.set(a,i,this.get(a,i)*s);return this}},{key:"max",value:function(i){if(this.isEmpty())return NaN;switch(i){case"row":{for(var s=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)>s[a]&&(s[a]=this.get(a,u));return s}case"column":{for(var h=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),p=0;p<this.rows;p++)for(var g=0;g<this.columns;g++)this.get(p,g)>h[g]&&(h[g]=this.get(p,g));return h}case void 0:{for(var y=this.get(0,0),b=0;b<this.rows;b++)for(var E=0;E<this.columns;E++)this.get(b,E)>y&&(y=this.get(b,E));return y}default:throw new Error("invalid option: ".concat(i))}}},{key:"maxIndex",value:function(){Up(this);for(var i=this.get(0,0),s=[0,0],a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)>i&&(i=this.get(a,u),s[0]=a,s[1]=u);return s}},{key:"min",value:function(i){if(this.isEmpty())return NaN;switch(i){case"row":{for(var s=new Array(this.rows).fill(Number.POSITIVE_INFINITY),a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)<s[a]&&(s[a]=this.get(a,u));return s}case"column":{for(var h=new Array(this.columns).fill(Number.POSITIVE_INFINITY),p=0;p<this.rows;p++)for(var g=0;g<this.columns;g++)this.get(p,g)<h[g]&&(h[g]=this.get(p,g));return h}case void 0:{for(var y=this.get(0,0),b=0;b<this.rows;b++)for(var E=0;E<this.columns;E++)this.get(b,E)<y&&(y=this.get(b,E));return y}default:throw new Error("invalid option: ".concat(i))}}},{key:"minIndex",value:function(){Up(this);for(var i=this.get(0,0),s=[0,0],a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)<i&&(i=this.get(a,u),s[0]=a,s[1]=u);return s}},{key:"maxRow",value:function(i){if(yu(this,i),this.isEmpty())return NaN;for(var s=this.get(i,0),a=1;a<this.columns;a++)this.get(i,a)>s&&(s=this.get(i,a));return s}},{key:"maxRowIndex",value:function(i){yu(this,i),Up(this);for(var s=this.get(i,0),a=[i,0],u=1;u<this.columns;u++)this.get(i,u)>s&&(s=this.get(i,u),a[1]=u);return a}},{key:"minRow",value:function(i){if(yu(this,i),this.isEmpty())return NaN;for(var s=this.get(i,0),a=1;a<this.columns;a++)this.get(i,a)<s&&(s=this.get(i,a));return s}},{key:"minRowIndex",value:function(i){yu(this,i),Up(this);for(var s=this.get(i,0),a=[i,0],u=1;u<this.columns;u++)this.get(i,u)<s&&(s=this.get(i,u),a[1]=u);return a}},{key:"maxColumn",value:function(i){if(Xo(this,i),this.isEmpty())return NaN;for(var s=this.get(0,i),a=1;a<this.rows;a++)this.get(a,i)>s&&(s=this.get(a,i));return s}},{key:"maxColumnIndex",value:function(i){Xo(this,i),Up(this);for(var s=this.get(0,i),a=[0,i],u=1;u<this.rows;u++)this.get(u,i)>s&&(s=this.get(u,i),a[0]=u);return a}},{key:"minColumn",value:function(i){if(Xo(this,i),this.isEmpty())return NaN;for(var s=this.get(0,i),a=1;a<this.rows;a++)this.get(a,i)<s&&(s=this.get(a,i));return s}},{key:"minColumnIndex",value:function(i){Xo(this,i),Up(this);for(var s=this.get(0,i),a=[0,i],u=1;u<this.rows;u++)this.get(u,i)<s&&(s=this.get(u,i),a[0]=u);return a}},{key:"diag",value:function(){for(var i=Math.min(this.rows,this.columns),s=[],a=0;a<i;a++)s.push(this.get(a,a));return s}},{key:"norm",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",s=0;if(i==="max")return this.max();if(i==="frobenius"){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)s=s+this.get(a,u)*this.get(a,u);return Math.sqrt(s)}else throw new RangeError("unknown norm type: ".concat(i))}},{key:"cumulativeSum",value:function(){for(var i=0,s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i+=this.get(s,a),this.set(s,a,i);return this}},{key:"dot",value:function(i){n.isMatrix(i)&&(i=i.to1DArray());var s=this.to1DArray();if(s.length!==i.length)throw new RangeError("vectors do not have the same size");for(var a=0,u=0;u<s.length;u++)a+=s[u]*i[u];return a}},{key:"mmul",value:function(i){i=hi.checkMatrix(i);for(var s=this.rows,a=this.columns,u=i.columns,h=new hi(s,u),p=new Float64Array(a),g=0;g<u;g++){for(var y=0;y<a;y++)p[y]=i.get(y,g);for(var b=0;b<s;b++){for(var E=0,T=0;T<a;T++)E+=this.get(b,T)*p[T];h.set(b,g,E)}}return h}},{key:"strassen2x2",value:function(i){i=hi.checkMatrix(i);var s=new hi(2,2),a=this.get(0,0),u=i.get(0,0),h=this.get(0,1),p=i.get(0,1),g=this.get(1,0),y=i.get(1,0),b=this.get(1,1),E=i.get(1,1),T=(a+b)*(u+E),O=(g+b)*u,I=a*(p-E),k=b*(y-u),B=(a+h)*E,$=(g-a)*(u+p),X=(h-b)*(y+E),re=T+k-B+X,ye=I+B,me=O+k,We=T-O+I+$;return s.set(0,0,re),s.set(0,1,ye),s.set(1,0,me),s.set(1,1,We),s}},{key:"strassen3x3",value:function(i){i=hi.checkMatrix(i);var s=new hi(3,3),a=this.get(0,0),u=this.get(0,1),h=this.get(0,2),p=this.get(1,0),g=this.get(1,1),y=this.get(1,2),b=this.get(2,0),E=this.get(2,1),T=this.get(2,2),O=i.get(0,0),I=i.get(0,1),k=i.get(0,2),B=i.get(1,0),$=i.get(1,1),X=i.get(1,2),re=i.get(2,0),ye=i.get(2,1),me=i.get(2,2),We=(a+u+h-p-g-E-T)*$,at=(a-p)*(-I+$),ft=g*(-O+I+B-$-X-re+me),Qt=(-a+p+g)*(O-I+$),_t=(p+g)*(-O+I),en=a*O,ct=(-a+b+E)*(O-k+X),Hn=(-a+b)*(k-X),Gn=(b+E)*(-O+k),rr=(a+u+h-g-y-b-E)*X,Vi=E*(-O+k+B-$-X-re+ye),ji=(-h+E+T)*($+re-ye),ai=(h-T)*($-ye),Zo=h*re,na=(E+T)*(-re+ye),Mi=(-h+g+y)*(X+re-me),ra=(h-y)*(X-me),Ha=(g+y)*(-re+me),Vn=u*B,Or=y*ye,Hi=p*k,eo=b*I,xo=T*me,li=en+Zo+Vn,ia=We+Qt+_t+en+ji+Zo+na,zl=en+ct+Gn+rr+Zo+Mi+Ha,Yo=at+ft+Qt+en+Zo+Mi+ra,rf=at+Qt+_t+en+Or,of=Zo+Mi+ra+Ha+Hi,im=en+ct+Hn+Vi+ji+ai+Zo,F0=ji+ai+Zo+na+eo,om=en+ct+Hn+Gn+xo;return s.set(0,0,li),s.set(0,1,ia),s.set(0,2,zl),s.set(1,0,Yo),s.set(1,1,rf),s.set(1,2,of),s.set(2,0,im),s.set(2,1,F0),s.set(2,2,om),s}},{key:"mmulStrassen",value:function(i){i=hi.checkMatrix(i);var s=this.clone(),a=s.rows,u=s.columns,h=i.rows,p=i.columns;u!==h&&console.warn("Multiplying ".concat(a," x ").concat(u," and ").concat(h," x ").concat(p," matrix: dimensions do not match."));function g(T,O,I){var k=T.rows,B=T.columns;if(k===O&&B===I)return T;var $=n.zeros(O,I);return $=$.setSubMatrix(T,0,0),$}var y=Math.max(a,h),b=Math.max(u,p);s=g(s,y,b),i=g(i,y,b);function E(T,O,I,k){if(I<=512||k<=512)return T.mmul(O);I%2===1&&k%2===1?(T=g(T,I+1,k+1),O=g(O,I+1,k+1)):I%2===1?(T=g(T,I+1,k),O=g(O,I+1,k)):k%2===1&&(T=g(T,I,k+1),O=g(O,I,k+1));var B=parseInt(T.rows/2,10),$=parseInt(T.columns/2,10),X=T.subMatrix(0,B-1,0,$-1),re=O.subMatrix(0,B-1,0,$-1),ye=T.subMatrix(0,B-1,$,T.columns-1),me=O.subMatrix(0,B-1,$,O.columns-1),We=T.subMatrix(B,T.rows-1,0,$-1),at=O.subMatrix(B,O.rows-1,0,$-1),ft=T.subMatrix(B,T.rows-1,$,T.columns-1),Qt=O.subMatrix(B,O.rows-1,$,O.columns-1),_t=E(n.add(X,ft),n.add(re,Qt),B,$),en=E(n.add(We,ft),re,B,$),ct=E(X,n.sub(me,Qt),B,$),Hn=E(ft,n.sub(at,re),B,$),Gn=E(n.add(X,ye),Qt,B,$),rr=E(n.sub(We,X),n.add(re,me),B,$),Vi=E(n.sub(ye,ft),n.add(at,Qt),B,$),ji=n.add(_t,Hn);ji.sub(Gn),ji.add(Vi);var ai=n.add(ct,Gn),Zo=n.add(en,Hn),na=n.sub(_t,en);na.add(ct),na.add(rr);var Mi=n.zeros(2*ji.rows,2*ji.columns);return Mi=Mi.setSubMatrix(ji,0,0),Mi=Mi.setSubMatrix(ai,ji.rows,0),Mi=Mi.setSubMatrix(Zo,0,ji.columns),Mi=Mi.setSubMatrix(na,ji.rows,ji.columns),Mi.subMatrix(0,I-1,0,k-1)}return E(s,i,y,b)}},{key:"scaleRows",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Na()(i)!=="object")throw new TypeError("options must be an object");var s=i.min,a=s===void 0?0:s,u=i.max,h=u===void 0?1:u;if(!Number.isFinite(a))throw new TypeError("min must be a number");if(!Number.isFinite(h))throw new TypeError("max must be a number");if(a>=h)throw new RangeError("min must be smaller than max");for(var p=new hi(this.rows,this.columns),g=0;g<this.rows;g++){var y=this.getRow(g);y.length>0&&jb(y,{min:a,max:h,output:y}),p.setRow(g,y)}return p}},{key:"scaleColumns",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Na()(i)!=="object")throw new TypeError("options must be an object");var s=i.min,a=s===void 0?0:s,u=i.max,h=u===void 0?1:u;if(!Number.isFinite(a))throw new TypeError("min must be a number");if(!Number.isFinite(h))throw new TypeError("max must be a number");if(a>=h)throw new RangeError("min must be smaller than max");for(var p=new hi(this.rows,this.columns),g=0;g<this.columns;g++){var y=this.getColumn(g);y.length&&jb(y,{min:a,max:h,output:y}),p.setColumn(g,y)}return p}},{key:"flipRows",value:function(){for(var i=Math.ceil(this.columns/2),s=0;s<this.rows;s++)for(var a=0;a<i;a++){var u=this.get(s,a),h=this.get(s,this.columns-1-a);this.set(s,a,h),this.set(s,this.columns-1-a,u)}return this}},{key:"flipColumns",value:function(){for(var i=Math.ceil(this.rows/2),s=0;s<this.columns;s++)for(var a=0;a<i;a++){var u=this.get(a,s),h=this.get(this.rows-1-a,s);this.set(a,s,h),this.set(this.rows-1-a,s,u)}return this}},{key:"kroneckerProduct",value:function(i){i=hi.checkMatrix(i);for(var s=this.rows,a=this.columns,u=i.rows,h=i.columns,p=new hi(s*u,a*h),g=0;g<s;g++)for(var y=0;y<a;y++)for(var b=0;b<u;b++)for(var E=0;E<h;E++)p.set(u*g+b,h*y+E,this.get(g,y)*i.get(b,E));return p}},{key:"kroneckerSum",value:function(i){if(i=hi.checkMatrix(i),!this.isSquare()||!i.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var s=this.rows,a=i.rows,u=this.kroneckerProduct(hi.eye(a,a)),h=hi.eye(s,s).kroneckerProduct(i);return u.add(h)}},{key:"transpose",value:function(){for(var i=new hi(this.columns,this.rows),s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i.set(a,s,this.get(s,a));return i}},{key:"sortRows",value:function(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xb,s=0;s<this.rows;s++)this.setRow(s,this.getRow(s).sort(i));return this}},{key:"sortColumns",value:function(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xb,s=0;s<this.columns;s++)this.setColumn(s,this.getColumn(s).sort(i));return this}},{key:"subMatrix",value:function(i,s,a,u){jm(this,i,s,a,u);for(var h=new hi(s-i+1,u-a+1),p=i;p<=s;p++)for(var g=a;g<=u;g++)h.set(p-i,g-a,this.get(p,g));return h}},{key:"subMatrixRow",value:function(i,s,a){if(s===void 0&&(s=0),a===void 0&&(a=this.columns-1),s>a||s<0||s>=this.columns||a<0||a>=this.columns)throw new RangeError("Argument out of range");for(var u=new hi(i.length,a-s+1),h=0;h<i.length;h++)for(var p=s;p<=a;p++){if(i[h]<0||i[h]>=this.rows)throw new RangeError("Row index out of range: ".concat(i[h]));u.set(h,p-s,this.get(i[h],p))}return u}},{key:"subMatrixColumn",value:function(i,s,a){if(s===void 0&&(s=0),a===void 0&&(a=this.rows-1),s>a||s<0||s>=this.rows||a<0||a>=this.rows)throw new RangeError("Argument out of range");for(var u=new hi(a-s+1,i.length),h=0;h<i.length;h++)for(var p=s;p<=a;p++){if(i[h]<0||i[h]>=this.columns)throw new RangeError("Column index out of range: ".concat(i[h]));u.set(p-s,h,this.get(p,i[h]))}return u}},{key:"setSubMatrix",value:function(i,s,a){if(i=hi.checkMatrix(i),i.isEmpty())return this;var u=s+i.rows-1,h=a+i.columns-1;jm(this,s,u,a,h);for(var p=0;p<i.rows;p++)for(var g=0;g<i.columns;g++)this.set(s+p,a+g,i.get(p,g));return this}},{key:"selection",value:function(i,s){px(this,i),gx(this,s);for(var a=new hi(i.length,s.length),u=0;u<i.length;u++)for(var h=i[u],p=0;p<s.length;p++){var g=s[p];a.set(u,p,this.get(h,g))}return a}},{key:"trace",value:function(){for(var i=Math.min(this.rows,this.columns),s=0,a=0;a<i;a++)s+=this.get(a,a);return s}},{key:"clone",value:function(){for(var i=new hi(this.rows,this.columns),s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)i.set(s,a,this.get(s,a));return i}},{key:"sum",value:function(i){switch(i){case"row":return Hm(this);case"column":return vx(this);case void 0:return mx(this);default:throw new Error("invalid option: ".concat(i))}}},{key:"product",value:function(i){switch(i){case"row":return yx(this);case"column":return $m(this);case void 0:return $b(this);default:throw new Error("invalid option: ".concat(i))}}},{key:"mean",value:function(i){var s=this.sum(i);switch(i){case"row":{for(var a=0;a<this.rows;a++)s[a]/=this.columns;return s}case"column":{for(var u=0;u<this.columns;u++)s[u]/=this.rows;return s}case void 0:return s/this.size;default:throw new Error("invalid option: ".concat(i))}}},{key:"variance",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Na()(i)==="object"&&(s=i,i=void 0),Na()(s)!=="object")throw new TypeError("options must be an object");var a=s,u=a.unbiased,h=u===void 0?!0:u,p=a.mean,g=p===void 0?this.mean(i):p;if(typeof h!="boolean")throw new TypeError("unbiased must be a boolean");switch(i){case"row":{if(!yc(g))throw new TypeError("mean must be an array");return bx(this,h,g)}case"column":{if(!yc(g))throw new TypeError("mean must be an array");return xx(this,h,g)}case void 0:{if(typeof g!="number")throw new TypeError("mean must be a number");return Cx(this,h,g)}default:throw new Error("invalid option: ".concat(i))}}},{key:"standardDeviation",value:function(i,s){Na()(i)==="object"&&(s=i,i=void 0);var a=this.variance(i,s);if(i===void 0)return Math.sqrt(a);for(var u=0;u<a.length;u++)a[u]=Math.sqrt(a[u]);return a}},{key:"center",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Na()(i)==="object"&&(s=i,i=void 0),Na()(s)!=="object")throw new TypeError("options must be an object");var a=s,u=a.center,h=u===void 0?this.mean(i):u;switch(i){case"row":{if(!yc(h))throw new TypeError("center must be an array");return dv(this,h),this}case"column":{if(!yc(h))throw new TypeError("center must be an array");return Vp(this,h),this}case void 0:{if(typeof h!="number")throw new TypeError("center must be a number");return wx(this,h),this}default:throw new Error("invalid option: ".concat(i))}}},{key:"scale",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Na()(i)==="object"&&(s=i,i=void 0),Na()(s)!=="object")throw new TypeError("options must be an object");var a=s.scale;switch(i){case"row":{if(a===void 0)a=Ex(this);else if(!yc(a))throw new TypeError("scale must be an array");return Sx(this,a),this}case"column":{if(a===void 0)a=_x(this);else if(!yc(a))throw new TypeError("scale must be an array");return Ax(this,a),this}case void 0:{if(a===void 0)a=Wm(this);else if(typeof a!="number")throw new TypeError("scale must be a number");return Wb(this,a),this}default:throw new Error("invalid option: ".concat(i))}}},{key:"toString",value:function(i){return Bf(this,i)}}],[{key:"from1DArray",value:function(i,s,a){var u=i*s;if(u!==a.length)throw new RangeError("data length does not match given dimensions");for(var h=new hi(i,s),p=0;p<i;p++)for(var g=0;g<s;g++)h.set(p,g,a[p*s+g]);return h}},{key:"rowVector",value:function(i){for(var s=new hi(1,i.length),a=0;a<i.length;a++)s.set(0,a,i[a]);return s}},{key:"columnVector",value:function(i){for(var s=new hi(i.length,1),a=0;a<i.length;a++)s.set(a,0,i[a]);return s}},{key:"zeros",value:function(i,s){return new hi(i,s)}},{key:"ones",value:function(i,s){return new hi(i,s).fill(1)}},{key:"rand",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Na()(a)!=="object")throw new TypeError("options must be an object");for(var u=a.random,h=u===void 0?Math.random:u,p=new hi(i,s),g=0;g<i;g++)for(var y=0;y<s;y++)p.set(g,y,h());return p}},{key:"randInt",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Na()(a)!=="object")throw new TypeError("options must be an object");var u=a.min,h=u===void 0?0:u,p=a.max,g=p===void 0?1e3:p,y=a.random,b=y===void 0?Math.random:y;if(!Number.isInteger(h))throw new TypeError("min must be an integer");if(!Number.isInteger(g))throw new TypeError("max must be an integer");if(h>=g)throw new RangeError("min must be smaller than max");for(var E=g-h,T=new hi(i,s),O=0;O<i;O++)for(var I=0;I<s;I++){var k=h+Math.round(b()*E);T.set(O,I,k)}return T}},{key:"eye",value:function(i,s,a){s===void 0&&(s=i),a===void 0&&(a=1);for(var u=Math.min(i,s),h=this.zeros(i,s),p=0;p<u;p++)h.set(p,p,a);return h}},{key:"diag",value:function(i,s,a){var u=i.length;s===void 0&&(s=u),a===void 0&&(a=s);for(var h=Math.min(u,s,a),p=this.zeros(s,a),g=0;g<h;g++)p.set(g,g,i[g]);return p}},{key:"min",value:function(i,s){i=this.checkMatrix(i),s=this.checkMatrix(s);for(var a=i.rows,u=i.columns,h=new hi(a,u),p=0;p<a;p++)for(var g=0;g<u;g++)h.set(p,g,Math.min(i.get(p,g),s.get(p,g)));return h}},{key:"max",value:function(i,s){i=this.checkMatrix(i),s=this.checkMatrix(s);for(var a=i.rows,u=i.columns,h=new this(a,u),p=0;p<a;p++)for(var g=0;g<u;g++)h.set(p,g,Math.max(i.get(p,g),s.get(p,g)));return h}},{key:"checkMatrix",value:function(i){return n.isMatrix(i)?i:new hi(i)}},{key:"isMatrix",value:function(i){return i!=null&&i.klass==="Matrix"}}]),n}();Ta.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Ta.prototype[Symbol.for("nodejs.util.inspect.custom")]=Um);function Xb(n,r){return n-r}function Tx(n){return n.every(function(r){return typeof r=="number"})}Ta.random=Ta.rand,Ta.randomInt=Ta.randInt,Ta.diagonal=Ta.diag,Ta.prototype.diagonal=Ta.prototype.diag,Ta.identity=Ta.eye,Ta.prototype.negate=Ta.prototype.neg,Ta.prototype.tensorProduct=Ta.prototype.kroneckerProduct;var hi=function(n){Bm()(i,n);var r=Ub()(i);function i(s,a){var u;if(zp()(this,i),u=r.call(this),i.isMatrix(s))return So()(u,s.clone());if(Number.isInteger(s)&&s>=0)if(u.data=[],Number.isInteger(a)&&a>=0)for(var h=0;h<s;h++)u.data.push(new Float64Array(a));else throw new TypeError("nColumns must be a positive integer");else if(yc(s)){var p=s;if(s=p.length,a=s?p[0].length:0,typeof a!="number")throw new TypeError("Data must be a 2D array with at least one element");u.data=[];for(var g=0;g<s;g++){if(p[g].length!==a)throw new RangeError("Inconsistent array dimensions");if(!Tx(p[g]))throw new TypeError("Input data contains non-numeric values");u.data.push(Float64Array.from(p[g]))}}else throw new TypeError("First argument must be a positive number or an array");return u.rows=s,u.columns=a,u}return Zg()(i,[{key:"set",value:function(a,u,h){return this.data[a][u]=h,this}},{key:"get",value:function(a,u){return this.data[a][u]}},{key:"removeRow",value:function(a){return yu(this,a),this.data.splice(a,1),this.rows-=1,this}},{key:"addRow",value:function(a,u){return u===void 0&&(u=a,a=this.rows),yu(this,a,!0),u=Float64Array.from(Aa(this,u)),this.data.splice(a,0,u),this.rows+=1,this}},{key:"removeColumn",value:function(a){Xo(this,a);for(var u=0;u<this.rows;u++){for(var h=new Float64Array(this.columns-1),p=0;p<a;p++)h[p]=this.data[u][p];for(var g=a+1;g<this.columns;g++)h[g-1]=this.data[u][g];this.data[u]=h}return this.columns-=1,this}},{key:"addColumn",value:function(a,u){typeof u=="undefined"&&(u=a,a=this.columns),Xo(this,a,!0),u=Lh(this,u);for(var h=0;h<this.rows;h++){for(var p=new Float64Array(this.columns+1),g=0;g<a;g++)p[g]=this.data[h][g];for(p[g++]=u[h];g<this.columns+1;g++)p[g]=this.data[h][g-1];this.data[h]=p}return this.columns+=1,this}}]),i}(Ta);fx(Ta,hi);var Uf=function(n){Bm()(i,n);var r=Ub()(i);function i(s){var a;return zp()(this,i),a=r.call(this),a.data=s,a.rows=s.length,a.columns=s[0].length,a}return Zg()(i,[{key:"set",value:function(a,u,h){return this.data[a][u]=h,this}},{key:"get",value:function(a,u){return this.data[a][u]}}]),i}(Ta);function Vf(n,r){var i=0;return Math.abs(n)>Math.abs(r)?(i=r/n,Math.abs(n)*Math.sqrt(1+i*i)):r!==0?(i=n/r,Math.abs(r)*Math.sqrt(1+i*i)):0}var Zb=function(){function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(zp()(this,n),r=Uf.checkMatrix(r),r.isEmpty())throw new Error("Matrix must be non-empty");var s=r.rows,a=r.columns,u=i.computeLeftSingularVectors,h=u===void 0?!0:u,p=i.computeRightSingularVectors,g=p===void 0?!0:p,y=i.autoTranspose,b=y===void 0?!1:y,E=Boolean(h),T=Boolean(g),O=!1,I;if(s<a)if(!b)I=r.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{I=r.transpose(),s=I.rows,a=I.columns,O=!0;var k=E;E=T,T=k}else I=r.clone();for(var B=Math.min(s,a),$=Math.min(s+1,a),X=new Float64Array($),re=new hi(s,B),ye=new hi(a,a),me=new Float64Array(a),We=new Float64Array(s),at=new Float64Array($),ft=0;ft<$;ft++)at[ft]=ft;for(var Qt=Math.min(s-1,a),_t=Math.max(0,Math.min(a-2,s)),en=Math.max(Qt,_t),ct=0;ct<en;ct++){if(ct<Qt){X[ct]=0;for(var Hn=ct;Hn<s;Hn++)X[ct]=Vf(X[ct],I.get(Hn,ct));if(X[ct]!==0){I.get(ct,ct)<0&&(X[ct]=-X[ct]);for(var Gn=ct;Gn<s;Gn++)I.set(Gn,ct,I.get(Gn,ct)/X[ct]);I.set(ct,ct,I.get(ct,ct)+1)}X[ct]=-X[ct]}for(var rr=ct+1;rr<a;rr++){if(ct<Qt&&X[ct]!==0){for(var Vi=0,ji=ct;ji<s;ji++)Vi+=I.get(ji,ct)*I.get(ji,rr);Vi=-Vi/I.get(ct,ct);for(var ai=ct;ai<s;ai++)I.set(ai,rr,I.get(ai,rr)+Vi*I.get(ai,ct))}me[rr]=I.get(ct,rr)}if(E&&ct<Qt)for(var Zo=ct;Zo<s;Zo++)re.set(Zo,ct,I.get(Zo,ct));if(ct<_t){me[ct]=0;for(var na=ct+1;na<a;na++)me[ct]=Vf(me[ct],me[na]);if(me[ct]!==0){me[ct+1]<0&&(me[ct]=0-me[ct]);for(var Mi=ct+1;Mi<a;Mi++)me[Mi]/=me[ct];me[ct+1]+=1}if(me[ct]=-me[ct],ct+1<s&&me[ct]!==0){for(var ra=ct+1;ra<s;ra++)We[ra]=0;for(var Ha=ct+1;Ha<s;Ha++)for(var Vn=ct+1;Vn<a;Vn++)We[Ha]+=me[Vn]*I.get(Ha,Vn);for(var Or=ct+1;Or<a;Or++)for(var Hi=-me[Or]/me[ct+1],eo=ct+1;eo<s;eo++)I.set(eo,Or,I.get(eo,Or)+Hi*We[eo])}if(T)for(var xo=ct+1;xo<a;xo++)ye.set(xo,ct,me[xo])}}var li=Math.min(a,s+1);if(Qt<a&&(X[Qt]=I.get(Qt,Qt)),s<li&&(X[li-1]=0),_t+1<li&&(me[_t]=I.get(_t,li-1)),me[li-1]=0,E){for(var ia=Qt;ia<B;ia++){for(var zl=0;zl<s;zl++)re.set(zl,ia,0);re.set(ia,ia,1)}for(var Yo=Qt-1;Yo>=0;Yo--)if(X[Yo]!==0){for(var rf=Yo+1;rf<B;rf++){for(var of=0,im=Yo;im<s;im++)of+=re.get(im,Yo)*re.get(im,rf);of=-of/re.get(Yo,Yo);for(var F0=Yo;F0<s;F0++)re.set(F0,rf,re.get(F0,rf)+of*re.get(F0,Yo))}for(var om=Yo;om<s;om++)re.set(om,Yo,-re.get(om,Yo));re.set(Yo,Yo,1+re.get(Yo,Yo));for(var Pw=0;Pw<Yo-1;Pw++)re.set(Pw,Yo,0)}else{for(var qy=0;qy<s;qy++)re.set(qy,Yo,0);re.set(Yo,Yo,1)}}if(T)for(var Kc=a-1;Kc>=0;Kc--){if(Kc<_t&&me[Kc]!==0)for(var Jy=Kc+1;Jy<a;Jy++){for(var y1=0,sm=Kc+1;sm<a;sm++)y1+=ye.get(sm,Kc)*ye.get(sm,Jy);y1=-y1/ye.get(Kc+1,Kc);for(var Ut=Kc+1;Ut<a;Ut++)ye.set(Ut,Jy,ye.get(Ut,Jy)+y1*ye.get(Ut,Kc))}for(var En=0;En<a;En++)ye.set(En,Kc,0);ye.set(Kc,Kc,1)}for(var Yn=li-1,hr=0,ei=Number.EPSILON;li>0;){var Cr=void 0,ki=void 0;for(Cr=li-2;Cr>=-1&&Cr!==-1;Cr--){var oo=Number.MIN_VALUE+ei*Math.abs(X[Cr]+Math.abs(X[Cr+1]));if(Math.abs(me[Cr])<=oo||Number.isNaN(me[Cr])){me[Cr]=0;break}}if(Cr===li-2)ki=4;else{var Lr=void 0;for(Lr=li-1;Lr>=Cr&&Lr!==Cr;Lr--){var No=(Lr!==li?Math.abs(me[Lr]):0)+(Lr!==Cr+1?Math.abs(me[Lr-1]):0);if(Math.abs(X[Lr])<=ei*No){X[Lr]=0;break}}Lr===Cr?ki=3:Lr===li-1?ki=1:(ki=2,Cr=Lr)}switch(Cr++,ki){case 1:{var Co=me[li-2];me[li-2]=0;for(var ll=li-2;ll>=Cr;ll--){var am=Vf(X[ll],Co),eP=X[ll]/am,tP=Co/am;if(X[ll]=am,ll!==Cr&&(Co=-tP*me[ll-1],me[ll-1]=eP*me[ll-1]),T)for(var lm=0;lm<a;lm++)am=eP*ye.get(lm,ll)+tP*ye.get(lm,li-1),ye.set(lm,li-1,-tP*ye.get(lm,ll)+eP*ye.get(lm,li-1)),ye.set(lm,ll,am)}break}case 2:{var nP=me[Cr-1];me[Cr-1]=0;for(var op=Cr;op<li;op++){var Dw=Vf(X[op],nP),rP=X[op]/Dw,iP=nP/Dw;if(X[op]=Dw,nP=-iP*me[op],me[op]=rP*me[op],E)for(var cm=0;cm<s;cm++)Dw=rP*re.get(cm,op)+iP*re.get(cm,Cr-1),re.set(cm,Cr-1,-iP*re.get(cm,op)+rP*re.get(cm,Cr-1)),re.set(cm,op,Dw)}break}case 3:{var Nw=Math.max(Math.abs(X[li-1]),Math.abs(X[li-2]),Math.abs(me[li-2]),Math.abs(X[Cr]),Math.abs(me[Cr])),b1=X[li-1]/Nw,rN=X[li-2]/Nw,iT=me[li-2]/Nw,oP=X[Cr]/Nw,Fk=me[Cr]/Nw,Qy=((rN+b1)*(rN-b1)+iT*iT)/2,oT=b1*iT*(b1*iT),Iw=0;(Qy!==0||oT!==0)&&(Qy<0?Iw=0-Math.sqrt(Qy*Qy+oT):Iw=Math.sqrt(Qy*Qy+oT),Iw=oT/(Qy+Iw));for(var eb=(oP+b1)*(oP-b1)+Iw,x1=oP*Fk,Io=Cr;Io<li-1;Io++){var Eu=Vf(eb,x1);Eu===0&&(Eu=Number.MIN_VALUE);var sp=eb/Eu,ap=x1/Eu;if(Io!==Cr&&(me[Io-1]=Eu),eb=sp*X[Io]+ap*me[Io],me[Io]=sp*me[Io]-ap*X[Io],x1=ap*X[Io+1],X[Io+1]=sp*X[Io+1],T)for(var um=0;um<a;um++)Eu=sp*ye.get(um,Io)+ap*ye.get(um,Io+1),ye.set(um,Io+1,-ap*ye.get(um,Io)+sp*ye.get(um,Io+1)),ye.set(um,Io,Eu);if(Eu=Vf(eb,x1),Eu===0&&(Eu=Number.MIN_VALUE),sp=eb/Eu,ap=x1/Eu,X[Io]=Eu,eb=sp*me[Io]+ap*X[Io+1],X[Io+1]=-ap*me[Io]+sp*X[Io+1],x1=ap*me[Io+1],me[Io+1]=sp*me[Io+1],E&&Io<s-1)for(var dm=0;dm<s;dm++)Eu=sp*re.get(dm,Io)+ap*re.get(dm,Io+1),re.set(dm,Io+1,-ap*re.get(dm,Io)+sp*re.get(dm,Io+1)),re.set(dm,Io,Eu)}me[li-2]=eb,hr=hr+1;break}case 4:{if(X[Cr]<=0&&(X[Cr]=X[Cr]<0?-X[Cr]:0,T))for(var sT=0;sT<=Yn;sT++)ye.set(sT,Cr,-ye.get(sT,Cr));for(;Cr<Yn&&!(X[Cr]>=X[Cr+1]);){var Rw=X[Cr];if(X[Cr]=X[Cr+1],X[Cr+1]=Rw,T&&Cr<a-1)for(var C1=0;C1<a;C1++)Rw=ye.get(C1,Cr+1),ye.set(C1,Cr+1,ye.get(C1,Cr)),ye.set(C1,Cr,Rw);if(E&&Cr<s-1)for(var w1=0;w1<s;w1++)Rw=re.get(w1,Cr+1),re.set(w1,Cr+1,re.get(w1,Cr)),re.set(w1,Cr,Rw);Cr++}hr=0,li--;break}}}if(O){var Bk=ye;ye=re,re=Bk}this.m=s,this.n=a,this.s=X,this.U=re,this.V=ye}return Zg()(n,[{key:"solve",value:function(i){for(var s=i,a=this.threshold,u=this.s.length,h=hi.zeros(u,u),p=0;p<u;p++)Math.abs(this.s[p])<=a?h.set(p,p,0):h.set(p,p,1/this.s[p]);for(var g=this.U,y=this.rightSingularVectors,b=y.mmul(h),E=y.rows,T=g.rows,O=hi.zeros(E,T),I=0;I<E;I++)for(var k=0;k<T;k++){for(var B=0,$=0;$<u;$++)B+=b.get(I,$)*g.get(k,$);O.set(I,k,B)}return O.mmul(s)}},{key:"solveForDiagonal",value:function(i){return this.solve(hi.diag(i))}},{key:"inverse",value:function(){for(var i=this.V,s=this.threshold,a=i.rows,u=i.columns,h=new hi(a,this.s.length),p=0;p<a;p++)for(var g=0;g<u;g++)Math.abs(this.s[g])>s&&h.set(p,g,i.get(p,g)/this.s[g]);for(var y=this.U,b=y.rows,E=y.columns,T=new hi(a,b),O=0;O<a;O++)for(var I=0;I<b;I++){for(var k=0,B=0;B<E;B++)k+=h.get(O,B)*y.get(I,B);T.set(O,I,k)}return T}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var i=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,s=0,a=this.s,u=0,h=a.length;u<h;u++)a[u]>i&&s++;return s}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return hi.diag(this.s)}}]),n}();class Mx{constructor(r){this.distances=r.distances,this.dimension=r.dimension||2,this.linkDistance=r.linkDistance}layout(){const r=this,{dimension:i,distances:s,linkDistance:a}=r;try{const u=hi.mul(hi.pow(s,2),-.5),h=u.mean("row"),p=u.mean("column"),g=u.mean();u.add(g).subRowVector(h).subColumnVector(p);const y=new Zb(u),b=hi.sqrt(y.diagonalMatrix).diagonal();return y.leftSingularVectors.toJSON().map(E=>hi.mul([E],[b]).toJSON()[0].splice(0,i))}catch(u){const h=[];for(let p=0;p<s.length;p++){const g=Math.random()*a,y=Math.random()*a;h.push([g,y])}return h}}}const Xm=800;class Ox{constructor(r){this.disp=[],this.positions=r.positions,this.adjMatrix=r.adjMatrix,this.focusID=r.focusID,this.radii=r.radii,this.iterations=r.iterations||10,this.height=r.height||10,this.width=r.width||10,this.speed=r.speed||100,this.gravity=r.gravity||10,this.nodeSizeFunc=r.nodeSizeFunc,this.k=r.k||5,this.strictRadial=r.strictRadial,this.nodes=r.nodes}layout(){const r=this,i=r.positions,s=[],a=r.iterations,u=r.width/10;r.maxDisplace=u,r.disp=s;for(let h=0;h<a;h++)i.forEach((p,g)=>{s[g]={x:0,y:0}}),r.getRepulsion(),r.updatePositions();return i}getRepulsion(){const r=this,i=r.positions,s=r.nodes,a=r.disp,u=r.k,h=r.radii||[];i.forEach((p,g)=>{a[g]={x:0,y:0},i.forEach((y,b)=>{if(g===b||h[g]!==h[b])return;let E=p[0]-y[0],T=p[1]-y[1],O=Math.sqrt(E*E+T*T);if(O===0){O=1;const I=g>b?1:-1;E=.01*I,T=.01*I}if(O<r.nodeSizeFunc(s[g])/2+r.nodeSizeFunc(s[b])/2){const I=u*u/O;a[g].x+=E/O*I,a[g].y+=T/O*I}})})}updatePositions(){const r=this,i=r.positions,s=r.disp,a=r.speed,u=r.strictRadial,h=r.focusID,p=r.maxDisplace||r.width/10;u&&s.forEach((y,b)=>{const E=i[b][0]-i[h][0],T=i[b][1]-i[h][1],O=Math.sqrt(E*E+T*T);let I=T/O,k=-E/O;const B=Math.sqrt(y.x*y.x+y.y*y.y);let $=Math.acos((I*y.x+k*y.y)/B);$>Math.PI/2&&($-=Math.PI/2,I*=-1,k*=-1);const X=Math.cos($)*B;y.x=I*X,y.y=k*X});const g=r.radii;i.forEach((y,b)=>{if(b===h)return;const E=Math.sqrt(s[b].x*s[b].x+s[b].y*s[b].y);if(E>0&&b!==h){const T=Math.min(p*(a/Xm),E);if(y[0]+=s[b].x/E*T,y[1]+=s[b].y/E*T,u){let O=y[0]-i[h][0],I=y[1]-i[h][1];const k=Math.sqrt(O*O+I*I);O=O/k*g[b],I=I/k*g[b],y[0]=i[h][0]+O,y[1]=i[h][1]+I}}})}}function nd(n){const r=n.length,i=n[0].length,s=[];for(let a=0;a<r;a++){const u=[];for(let h=0;h<i;h++)n[a][h]!==0?u.push(1/(n[a][h]*n[a][h])):u.push(0);s.push(u)}return s}function Px(n,r){let i=-1;return n.forEach((s,a)=>{s.id===r&&(i=a)}),i}function Yb(n,r){return Math.sqrt((n[0]-r[0])*(n[0]-r[0])+(n[1]-r[1])*(n[1]-r[1]))}class Dx extends Go{constructor(r){super(),this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(r)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const r=this,i=r.nodes,s=r.edges||[];if(!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const a=r.center;if(i.length===1){i[0].x=a[0],i[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd();return}const u=r.linkDistance;let h=null;if(Ea(r.focusNode)){let en=!1;for(let ct=0;ct<i.length;ct++)i[ct].id===r.focusNode&&(h=i[ct],r.focusNode=h,en=!0,ct=i.length);en||(h=null)}else h=r.focusNode;h||(h=i[0],r.focusNode=h);const p=Px(i,h.id);r.focusIndex=p;const g=Qu({nodes:i,edges:s},!1),y=Ju(g),b=r.maxToFocus(y,p);r.handleInfinity(y,p,b+1),r.distances=y;const E=y[p],T=r.width||500,O=r.height||500;let I=T-a[0]>a[0]?a[0]:T-a[0],k=O-a[1]>a[1]?a[1]:O-a[1];I===0&&(I=T/2),k===0&&(k=O/2);const B=k>I?I:k,$=Math.max(...E),X=[];E.forEach((en,ct)=>{r.unitRadius||(r.unitRadius=B/$),X[ct]=en*r.unitRadius}),r.radii=X;const re=r.eIdealDisMatrix();r.eIdealDistances=re;const ye=nd(re);r.weights=ye;let We=new Mx({linkDistance:u,distances:re}).layout();We.forEach(en=>{qu(en[0])&&(en[0]=Math.random()*u),qu(en[1])&&(en[1]=Math.random()*u)}),r.positions=We,We.forEach((en,ct)=>{i[ct].x=en[0]+a[0],i[ct].y=en[1]+a[1]}),We.forEach(en=>{en[0]-=We[p][0],en[1]-=We[p][1]}),r.run();const at=r.preventOverlap,ft=r.nodeSize;let Qt;const _t=r.strictRadial;if(at){const en=r.nodeSpacing;let ct;Jn(en)?ct=()=>en:To(en)?ct=en:ct=()=>0,ft?Ns(ft)?Qt=rr=>(ft[0]>ft[1]?ft[0]:ft[1])+ct(rr):Qt=rr=>ft+ct(rr):Qt=rr=>rr.size?Ns(rr.size)?(rr.size[0]>rr.size[1]?rr.size[0]:rr.size[1])+ct(rr):yl(rr.size)?(rr.size.width>rr.size.height?rr.size.width:rr.size.height)+ct(rr):rr.size+ct(rr):10+ct(rr);const Hn={nodes:i,nodeSizeFunc:Qt,adjMatrix:g,positions:We,radii:X,height:O,width:T,strictRadial:_t,focusID:p,iterations:r.maxPreventOverlapIteration||200,k:We.length/4.5};We=new Ox(Hn).layout()}return We.forEach((en,ct)=>{i[ct].x=en[0]+a[0],i[ct].y=en[1]+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s}}run(){const r=this,i=r.maxIteration,s=r.positions||[],a=r.weights||[],u=r.eIdealDistances||[],h=r.radii||[];for(let p=0;p<=i;p++){const g=p/i;r.oneIteration(g,s,h,u,a)}}oneIteration(r,i,s,a,u){const h=this,p=1-r,g=h.focusIndex;i.forEach((y,b)=>{const E=Yb(y,[0,0]),T=E===0?0:1/E;if(b===g)return;let O=0,I=0,k=0;i.forEach(($,X)=>{if(b===X)return;const re=Yb(y,$),ye=re===0?0:1/re,me=a[X][b];k+=u[b][X],O+=u[b][X]*($[0]+me*(y[0]-$[0])*ye),I+=u[b][X]*($[1]+me*(y[1]-$[1])*ye)});const B=s[b]===0?0:1/s[b];k*=p,k+=r*B*B,O*=p,O+=r*B*y[0]*T,y[0]=O/k,I*=p,I+=r*B*y[1]*T,y[1]=I/k})}eIdealDisMatrix(){const r=this,i=r.nodes;if(!i)return[];const s=r.distances,a=r.linkDistance,u=r.radii||[],h=r.unitRadius||50,p=[];return s&&s.forEach((g,y)=>{const b=[];g.forEach((E,T)=>{if(y===T)b.push(0);else if(u[y]===u[T])if(r.sortBy==="data")b.push(E*(Math.abs(y-T)*r.sortStrength)/(u[y]/h));else if(r.sortBy){let O=i[y][r.sortBy]||0,I=i[T][r.sortBy]||0;Ea(O)&&(O=O.charCodeAt(0)),Ea(I)&&(I=I.charCodeAt(0)),b.push(E*(Math.abs(O-I)*r.sortStrength)/(u[y]/h))}else b.push(E*a/(u[y]/h));else{const O=(a+h)/2;b.push(E*O)}}),p.push(b)}),p}handleInfinity(r,i,s){const a=r.length;for(let u=0;u<a;u++)if(r[i][u]===1/0){r[i][u]=s,r[u][i]=s;for(let h=0;h<a;h++)r[u][h]!==1/0&&r[i][h]===1/0&&(r[i][h]=s+r[u][h],r[h][i]=s+r[u][h])}for(let u=0;u<a;u++)if(u!==i){for(let h=0;h<a;h++)if(r[u][h]===1/0){let p=Math.abs(r[i][u]-r[i][h]);p=p===0?1:p,r[u][h]=p}}}maxToFocus(r,i){let s=0;for(let a=0;a<r[i].length;a++)r[i][a]!==1/0&&(s=r[i][a]>s?r[i][a]:s);return s}getType(){return"radial"}}class Nx extends Go{constructor(r){super(),this.nodeSize=30,this.minNodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){const r=this,i=r.nodes,s=r.edges,a=i.length;if(a===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const u=r.center;if(a===1){i[0].x=u[0],i[0].y=u[1],r.onLayoutEnd&&r.onLayoutEnd();return}const h=[];let p;Ns(r.nodeSize)?p=Math.max(r.nodeSize[0],r.nodeSize[1]):p=r.nodeSize,i.forEach(I=>{h.push(I);let k=p;Ns(I.size)?k=Math.max(I.size[0],I.size[1]):Jn(I.size)?k=I.size:yl(I.size)&&(k=Math.max(I.size.width,I.size.height)),p=Math.max(p,k)}),r.clockwise=r.counterclockwise!==void 0?!r.counterclockwise:r.clockwise;const g={},y={};if(h.forEach((I,k)=>{g[I.id]=I,y[I.id]=k}),(r.sortBy==="degree"||!Ea(r.sortBy)||h[0][r.sortBy]===void 0)&&(r.sortBy="degree",!Jn(i[0].degree))){const I=Ga(i.length,y,s);h.forEach((k,B)=>{k.degree=I[B]})}h.sort((I,k)=>k[r.sortBy]-I[r.sortBy]),r.maxValueNode=h[0],r.maxLevelDiff=r.maxLevelDiff||r.maxValueNode[r.sortBy]/4;const b=[[]];let E=b[0];h.forEach(I=>{if(E.length>0){const k=Math.abs(E[0][r.sortBy]-I[r.sortBy]);r.maxLevelDiff&&k>=r.maxLevelDiff&&(E=[],b.push(E))}E.push(I)});let T=p+r.minNodeSpacing;if(!r.preventOverlap){const I=b.length>0&&b[0].length>1,B=(Math.min(r.width,r.height)/2-T)/(b.length+(I?1:0));T=Math.min(T,B)}let O=0;if(b.forEach(I=>{let k=r.sweep;k===void 0&&(k=2*Math.PI-2*Math.PI/I.length);const B=I.dTheta=k/Math.max(1,I.length-1);if(I.length>1&&r.preventOverlap){const $=Math.cos(B)-Math.cos(0),X=Math.sin(B)-Math.sin(0),re=Math.sqrt(T*T/($*$+X*X));O=Math.max(re,O)}I.r=O,O+=T}),r.equidistant){let I=0,k=0;for(let B=0;B<b.length;B++){const X=b[B].r-k;I=Math.max(I,X)}k=0,b.forEach((B,$)=>{$===0&&(k=B.r),B.r=k,k+=I})}return b.forEach(I=>{const k=I.dTheta,B=I.r;I.forEach(($,X)=>{const re=r.startAngle+(r.clockwise?1:-1)*k*X;$.x=u[0]+B*Math.cos(re),$.y=u[1]+B*Math.sin(re)})}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s}}getType(){return"concentric"}}class Ix extends Go{constructor(r){super(),this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const r=this,{nodes:i,edges:s=[]}=r,a=r.center;if(!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(i.length===1){i[0].x=a[0],i[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd();return}const u=r.linkDistance,h=Qu({nodes:i,edges:s},!1),p=Ju(h);r.handleInfinity(p);const g=Ff(p,u);r.scaledDistances=g;const y=r.runMDS();return r.positions=y,y.forEach((b,E)=>{i[E].x=b[0]+a[0],i[E].y=b[1]+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:s}}runMDS(){const r=this,i=2,s=r.scaledDistances,a=hi.mul(hi.pow(s,2),-.5),u=a.mean("row"),h=a.mean("column"),p=a.mean();a.add(p).subRowVector(u).subColumnVector(h);const g=new Zb(a),y=hi.sqrt(g.diagonalMatrix).diagonal();return g.leftSingularVectors.toJSON().map(b=>hi.mul([b],[y]).toJSON()[0].splice(0,i))}handleInfinity(r){let i=-999999;r.forEach(s=>{s.forEach(a=>{a!==1/0&&i<a&&(i=a)})}),r.forEach((s,a)=>{s.forEach((u,h)=>{u===1/0&&(r[a][h]=i)})})}getType(){return"mds"}}const Rx=800;class kx extends Go{constructor(r){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){var r,i;const s=this,a=s.nodes;if(s.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(s.timeInterval),!a||a.length===0){(r=s.onLayoutEnd)===null||r===void 0||r.call(s);return}!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);const u=s.center;if(a.length===1){a[0].x=u[0],a[0].y=u[1],(i=s.onLayoutEnd)===null||i===void 0||i.call(s);return}const h={},p={};return a.forEach((g,y)=>{Jn(g.x)||(g.x=Math.random()*this.width),Jn(g.y)||(g.y=Math.random()*this.height),h[g.id]=g,p[g.id]=y}),s.nodeMap=h,s.nodeIdxMap=p,s.run()}run(){var r;const i=this,s=i.nodes;if(!s)return;const{edges:a,maxIteration:u,workerEnabled:h,clustering:p}=i,g={};if(p&&s.forEach(y=>{g[y.cluster]===void 0&&(g[y.cluster]={name:y.cluster,cx:0,cy:0,count:0})}),h){for(let y=0;y<u;y++)i.runOneStep(g);(r=i.onLayoutEnd)===null||r===void 0||r.call(i)}else{if(typeof window=="undefined")return;let y=0;this.timeInterval=window.setInterval(()=>{var b;i.runOneStep(g),y++,y>=u&&((b=i.onLayoutEnd)===null||b===void 0||b.call(i),window.clearInterval(i.timeInterval))},0)}return{nodes:s,edges:a}}runOneStep(r){var i;const s=this,a=s.nodes;if(!a)return;const{edges:u,center:h,gravity:p,speed:g,clustering:y}=s,b=s.height*s.width,E=Math.sqrt(b)/10,T=b/(a.length+1),O=Math.sqrt(T),I=[];if(a.forEach((k,B)=>{I[B]={x:0,y:0}}),s.applyCalculate(a,u,I,O,T),y){for(const B in r)r[B].cx=0,r[B].cy=0,r[B].count=0;a.forEach(B=>{const $=r[B.cluster];Jn(B.x)&&($.cx+=B.x),Jn(B.y)&&($.cy+=B.y),$.count++});for(const B in r)r[B].cx/=r[B].count,r[B].cy/=r[B].count;const k=s.clusterGravity||p;a.forEach((B,$)=>{if(!Jn(B.x)||!Jn(B.y))return;const X=r[B.cluster],re=Math.sqrt((B.x-X.cx)*(B.x-X.cx)+(B.y-X.cy)*(B.y-X.cy)),ye=O*k;I[$].x-=ye*(B.x-X.cx)/re,I[$].y-=ye*(B.y-X.cy)/re})}a.forEach((k,B)=>{if(!Jn(k.x)||!Jn(k.y))return;const $=.01*O*p;I[B].x-=$*(k.x-h[0]),I[B].y-=$*(k.y-h[1])}),a.forEach((k,B)=>{if(Jn(k.fx)&&Jn(k.fy)){k.x=k.fx,k.y=k.fy;return}if(!Jn(k.x)||!Jn(k.y))return;const $=Math.sqrt(I[B].x*I[B].x+I[B].y*I[B].y);if($>0){const X=Math.min(E*(g/Rx),$);k.x+=I[B].x/$*X,k.y+=I[B].y/$*X}}),(i=s.tick)===null||i===void 0||i.call(s)}applyCalculate(r,i,s,a,u){const h=this;h.calRepulsive(r,s,u),i&&h.calAttractive(i,s,a)}calRepulsive(r,i,s){r.forEach((a,u)=>{i[u]={x:0,y:0},r.forEach((h,p)=>{if(u===p||!Jn(a.x)||!Jn(h.x)||!Jn(a.y)||!Jn(h.y))return;let g=a.x-h.x,y=a.y-h.y,b=g*g+y*y;if(b===0){b=1;const T=u>p?1:-1;g=.01*T,y=.01*T}const E=s/b;i[u].x+=g*E,i[u].y+=y*E})})}calAttractive(r,i,s){r.forEach(a=>{const u=Ci(a,"source"),h=Ci(a,"target");if(!u||!h)return;const p=this.nodeIdxMap[u],g=this.nodeIdxMap[h];if(p===g)return;const y=this.nodeMap[u],b=this.nodeMap[h];if(!Jn(b.x)||!Jn(y.x)||!Jn(b.y)||!Jn(y.y))return;const E=b.x-y.x,T=b.y-y.y,O=Math.sqrt(E*E+T*T),I=O*O/s;i[g].x-=E/O*I,i[g].y-=T/O*I,i[p].x+=E/O*I,i[p].y+=T/O*I})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0}getType(){return"fruchterman"}}function Mr(n,r,i,s){i&&Object.defineProperty(n,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}var br=M(15671),Br=M(43144);function Dr(n,r,i,s,a){var u={};return Object.keys(s).forEach(function(h){u[h]=s[h]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=i.slice().reverse().reduce(function(h,p){return p(n,r,h)||h},u),a&&u.initializer!==void 0&&(u.value=u.initializer?u.initializer.call(a):void 0,u.initializer=void 0),u.initializer===void 0&&(Object.defineProperty(n,r,u),u=null),u}var Lx=M(64687),fr=M.n(Lx),no=M(15861),Zm=-1,Kb=1;function bu(){return Kb++}var Vc=function n(r){(0,br.Z)(this,n)},jf=function(){function n(r){(0,br.Z)(this,n),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=r}return(0,Br.Z)(n,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(i){return this.lookup[i]>-1}},{key:"create",value:function(i,s){this.lookup[i]=this.components.length;var a=new this.clazz(s||{});return this.components.push(a),this.entities.push(i),a}},{key:"remove",value:function(i){var s=this.lookup[i];s>-1&&s<this.components.length-1&&(this.components[s]=this.components[this.components.length-1],this.entities[s]=this.entities[this.entities.length-1],this.lookup[this.entities[s]]=s),this.components.pop(),this.entities.pop(),delete this.lookup[i]}},{key:"removeKeepSorted",value:function(i){var s=this.lookup[i];if(s>-1){var a=this.entities[s];if(s<this.components.length-1){for(var u=s+1;u<this.components.length;++u)this.components[u-1]=this.components[u];for(var h=s+1;h<this.entities.length;++h)this.entities[h-1]=this.entities[h],this.lookup[this.entities[h-1]]=h-1}this.components.pop(),this.entities.pop(),delete this.lookup[a]}}},{key:"moveItem",value:function(i,s){if(i!==s){for(var a=this.components[i],u=this.entities[i],h=i<s?1:-1,p=i;p!==s;p+=h){var g=p+h;this.components[p]=this.components[g],this.entities[p]=this.entities[g],this.lookup[this.entities[p]]=p}this.components[s]=a,this.entities[s]=u,this.lookup[u]=s}}},{key:"getEntity",value:function(i){return this.entities[i]}},{key:"getComponent",value:function(i){return this.components[i]}},{key:"getComponentByEntity",value:function(i){var s=this.lookup[i];return s>-1?this.components[s]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(i){for(var s=0,a=Object.keys(this.lookup);s<a.length;s++){var u=a[s],h=Number(u);if(this.lookup[h]===i)return h}return Zm}},{key:"find",value:function(i){for(var s=0;s<this.getCount();s++){var a=this.getComponent(s);if(i(a,s))return a}return null}},{key:"findIndex",value:function(i){for(var s=0;s<this.getCount();s++){var a=this.getComponent(s);if(i(a,s))return s}return-1}},{key:"forEach",value:function(i){for(var s=0,a=Object.keys(this.lookup);s<a.length;s++){var u=a[s],h=Number(u),p=this.lookup[h];i(h,this.getComponent(p))}}},{key:"forEachAsync",value:function(){var r=(0,no.Z)(fr().mark(function s(a){var u,h,p,g,y;return fr().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:u=0,h=Object.keys(this.lookup);case 1:if(!(u<h.length)){E.next=10;break}return p=h[u],g=Number(p),y=this.lookup[g],E.next=7,a(g,this.getComponent(y));case 7:u++,E.next=1;break;case 10:case"end":return E.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"map",value:function(i){for(var s=[],a=0,u=Object.keys(this.lookup);a<u.length;a++){var h=u[a],p=Number(h),g=this.lookup[p];s.push(i(p,this.getComponent(g)))}return s}}]),n}(),jp=M(97685),dn={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},qb=function n(){(0,br.Z)(this,n),this.index=void 0},Gx=function n(){(0,br.Z)(this,n),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},Jb=function(){function n(){(0,br.Z)(this,n),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return(0,Br.Z)(n,[{key:"read",value:function(i){return this.reads.find(function(s){return s.index===i.index})||this.reads.push(i),i}},{key:"sample",value:function(i){return this.read(i),i}},{key:"write",value:function(i,s){var a=this.writes.find(function(g){return g.index===s.index});if(a)return s;var u=i.getResourceNode(s);u.resource.version++,u.resource.imported&&(this.hasSideEffect=!0);var h=i.createResourceNode(u.resource),p=i.getResourceNode(h);return p.writer=this,this.writes.push(h),h}}]),n}(),_o=M(32531),za=M(82963),po=M(61120),Fx=function n(){(0,br.Z)(this,n),this.first=void 0,this.last=void 0};function Bx(n){var r=zx();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function zx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var hv=function(n){(0,_o.Z)(i,n);var r=Bx(i);function i(){var s;(0,br.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),s.version=0,s.refs=0,s.name=void 0,s.imported=void 0,s.priority=void 0,s.discardStart=!0,s.discardEnd=!1,s.descriptor=void 0,s.resource=void 0,s}return(0,Br.Z)(i,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),i}(Fx),Ux=function n(){(0,br.Z)(this,n),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},fv,pv,gv,Ym,Km,vv;function bc(n,r){var i;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=Vx(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function Vx(n,r){if(n){if(typeof n=="string")return qm(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return qm(n,r)}}function qm(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var mv=(fv=(0,z.b2)(),pv=(0,z.f3)(dn.RenderEngine),fv(gv=(Ym=(vv=function(){function n(){(0,br.Z)(this,n),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],Mr(this,"engine",Km,this)}return(0,Br.Z)(n,[{key:"execute",value:function(){var r=(0,no.Z)(fr().mark(function s(a){return fr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return this.compile(),h.next=3,this.executePassNodes(a);case 3:case"end":return h.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(i){i.tearDown&&i.tearDown()}),this.reset()}},{key:"addPass",value:function(i,s,a,u){var h=new Gx;h.execute=a,u&&(h.tearDown=u),h.name=i;var p=new Jb;return p.name=i,this.passNodes.push(p),this.frameGraphPasses.push(h),s(this,p,h),h}},{key:"getPass",value:function(i){return this.frameGraphPasses.find(function(s){return s.name===i})}},{key:"compile",value:function(){var i=this,s=bc(this.passNodes),a;try{for(s.s();!(a=s.n()).done;){var u=a.value;u.refCount=u.writes.length+(u.hasSideEffect?1:0),u.reads.forEach(function(ai){i.resourceNodes[ai.index].readerCount++})}}catch(ai){s.e(ai)}finally{s.f()}var h=[],p=bc(this.resourceNodes),g;try{for(p.s();!(g=p.n()).done;){var y=g.value;y.readerCount===0&&h.push(y)}}catch(ai){p.e(ai)}finally{p.f()}for(;h.length;){var b=h.pop(),E=b&&b.writer;if(E&&--E.refCount===0){var T=bc(E.reads),O;try{for(T.s();!(O=T.n()).done;){var I=O.value,k=this.resourceNodes[I.index];--k.readerCount===0&&h.push(k)}}catch(ai){T.e(ai)}finally{T.f()}}}this.resourceNodes.forEach(function(ai){ai.resource.refs+=ai.readerCount});var B=bc(this.passNodes),$;try{for(B.s();!($=B.n()).done;){var X=$.value;if(X.refCount){var re=bc(X.reads),ye;try{for(re.s();!(ye=re.n()).done;){var me=ye.value,We=this.resourceNodes[me.index].resource;We.first=We.first?We.first:X,We.last=X}}catch(ai){re.e(ai)}finally{re.f()}var at=bc(X.writes),ft;try{for(at.s();!(ft=at.n()).done;){var Qt=ft.value,_t=this.resourceNodes[Qt.index].resource;_t.first=_t.first?_t.first:X,_t.last=X}}catch(ai){at.e(ai)}finally{at.f()}}}}catch(ai){B.e(ai)}finally{B.f()}for(var en=0;en<2;en++){var ct=bc(this.resourceNodes),Hn;try{for(ct.s();!(Hn=ct.n()).done;){var Gn=Hn.value,rr=Gn.resource;if(rr.priority===en&&rr.refs){var Vi=rr.first,ji=rr.last;Vi&&ji&&(Vi.devirtualize.push(rr),ji.destroy.push(rr))}}}catch(ai){ct.e(ai)}finally{ct.f()}}}},{key:"executePassNodes",value:function(){var r=(0,no.Z)(fr().mark(function s(a){var u,h,p,g,y,b,E,T,O,I,k,B,$,X,re,ye,me;return fr().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:u=bc(this.passNodes.entries()),at.prev=1,u.s();case 3:if((h=u.n()).done){at.next=18;break}if(p=(0,jp.Z)(h.value,2),g=p[0],y=p[1],!y.refCount){at.next=16;break}b=bc(y.devirtualize);try{for(b.s();!(E=b.n()).done;)T=E.value,T.preExecuteDevirtualize(this.engine)}catch(ft){b.e(ft)}finally{b.f()}O=bc(y.destroy);try{for(O.s();!(I=O.n()).done;)k=I.value,k.preExecuteDestroy(this.engine)}catch(ft){O.e(ft)}finally{O.f()}return at.next=12,this.frameGraphPasses[g].execute(this,this.frameGraphPasses[g],a);case 12:B=bc(y.devirtualize);try{for(B.s();!($=B.n()).done;)X=$.value,X.postExecuteDevirtualize(this.engine)}catch(ft){B.e(ft)}finally{B.f()}re=bc(y.destroy);try{for(re.s();!(ye=re.n()).done;)me=ye.value,me.postExecuteDestroy(this.engine)}catch(ft){re.e(ft)}finally{re.f()}case 16:at.next=3;break;case 18:at.next=23;break;case 20:at.prev=20,at.t0=at.catch(1),u.e(at.t0);case 23:return at.prev=23,u.f(),at.finish(23);case 26:this.reset();case 27:case"end":return at.stop()}},s,this,[[1,20,23,26]])}));function i(s){return r.apply(this,arguments)}return i}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(i){return this.resourceNodes[i.index]}},{key:"createResourceNode",value:function(i){var s=new Ux;s.resource=i,s.version=i.version,this.resourceNodes.push(s);var a=new qb;return a.index=this.resourceNodes.length-1,a}},{key:"createTexture",value:function(i,s,a){var u=new hv;return u.name=s,u.descriptor=a,this.createResourceNode(u)}},{key:"createRenderTarget",value:function(i,s,a){var u=new hv;return u.name=s,u.descriptor=a,this.createResourceNode(u)}},{key:"present",value:function(i){this.addPass("Present",function(s,a){a.read(i),a.hasSideEffect=!0},(0,no.Z)(fr().mark(function s(){return fr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},s)})))}}]),n}(),vv),Km=Dr(Ym.prototype,"engine",[pv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ym))||gv),Bt=M(4942),Us=M(97326),Ua=M(49685);function qg(){var n=new Ua.WT(4);return Ua.WT!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function jx(n){var r=new Ua.WT(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}function Qb(n,r,i,s){var a=new Ua.WT(4);return a[0]=n,a[1]=r,a[2]=i,a[3]=s,a}function Hx(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n}function yv(n,r,i,s,a){return n[0]=r,n[1]=i,n[2]=s,n[3]=a,n}function $x(n,r,i){return n[0]=r[0]+i[0],n[1]=r[1]+i[1],n[2]=r[2]+i[2],n[3]=r[3]+i[3],n}function zw(n,r,i){return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n[2]=r[2]-i[2],n[3]=r[3]-i[3],n}function Uw(n,r,i){return n[0]=r[0]*i[0],n[1]=r[1]*i[1],n[2]=r[2]*i[2],n[3]=r[3]*i[3],n}function Vw(n,r,i){return n[0]=r[0]/i[0],n[1]=r[1]/i[1],n[2]=r[2]/i[2],n[3]=r[3]/i[3],n}function jw(n,r){return n[0]=Math.ceil(r[0]),n[1]=Math.ceil(r[1]),n[2]=Math.ceil(r[2]),n[3]=Math.ceil(r[3]),n}function Hw(n,r){return n[0]=Math.floor(r[0]),n[1]=Math.floor(r[1]),n[2]=Math.floor(r[2]),n[3]=Math.floor(r[3]),n}function e2(n,r,i){return n[0]=Math.min(r[0],i[0]),n[1]=Math.min(r[1],i[1]),n[2]=Math.min(r[2],i[2]),n[3]=Math.min(r[3],i[3]),n}function $w(n,r,i){return n[0]=Math.max(r[0],i[0]),n[1]=Math.max(r[1],i[1]),n[2]=Math.max(r[2],i[2]),n[3]=Math.max(r[3],i[3]),n}function Ww(n,r){return n[0]=Math.round(r[0]),n[1]=Math.round(r[1]),n[2]=Math.round(r[2]),n[3]=Math.round(r[3]),n}function Wx(n,r,i){return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n}function Xw(n,r,i,s){return n[0]=r[0]+i[0]*s,n[1]=r[1]+i[1]*s,n[2]=r[2]+i[2]*s,n[3]=r[3]+i[3]*s,n}function Xx(n,r){var i=r[0]-n[0],s=r[1]-n[1],a=r[2]-n[2],u=r[3]-n[3];return Math.hypot(i,s,a,u)}function Zw(n,r){var i=r[0]-n[0],s=r[1]-n[1],a=r[2]-n[2],u=r[3]-n[3];return i*i+s*s+a*a+u*u}function Zx(n){var r=n[0],i=n[1],s=n[2],a=n[3];return Math.hypot(r,i,s,a)}function m(n){var r=n[0],i=n[1],s=n[2],a=n[3];return r*r+i*i+s*s+a*a}function C(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=-r[3],n}function N(n,r){return n[0]=1/r[0],n[1]=1/r[1],n[2]=1/r[2],n[3]=1/r[3],n}function Y(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=i*i+s*s+a*a+u*u;return h>0&&(h=1/Math.sqrt(h)),n[0]=i*h,n[1]=s*h,n[2]=a*h,n[3]=u*h,n}function ve(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]+n[3]*r[3]}function Re(n,r,i,s){var a=i[0]*s[1]-i[1]*s[0],u=i[0]*s[2]-i[2]*s[0],h=i[0]*s[3]-i[3]*s[0],p=i[1]*s[2]-i[2]*s[1],g=i[1]*s[3]-i[3]*s[1],y=i[2]*s[3]-i[3]*s[2],b=r[0],E=r[1],T=r[2],O=r[3];return n[0]=E*y-T*g+O*p,n[1]=-(b*y)+T*h-O*u,n[2]=b*g-E*h+O*a,n[3]=-(b*p)+E*u-T*a,n}function Qe(n,r,i,s){var a=r[0],u=r[1],h=r[2],p=r[3];return n[0]=a+s*(i[0]-a),n[1]=u+s*(i[1]-u),n[2]=h+s*(i[2]-h),n[3]=p+s*(i[3]-p),n}function ut(n,r){r=r||1;var i,s,a,u,h,p;do i=glMatrix.RANDOM()*2-1,s=glMatrix.RANDOM()*2-1,h=i*i+s*s;while(h>=1);do a=glMatrix.RANDOM()*2-1,u=glMatrix.RANDOM()*2-1,p=a*a+u*u;while(p>=1);var g=Math.sqrt((1-h)/p);return n[0]=r*i,n[1]=r*s,n[2]=r*a*g,n[3]=r*u*g,n}function At(n,r,i){var s=r[0],a=r[1],u=r[2],h=r[3];return n[0]=i[0]*s+i[4]*a+i[8]*u+i[12]*h,n[1]=i[1]*s+i[5]*a+i[9]*u+i[13]*h,n[2]=i[2]*s+i[6]*a+i[10]*u+i[14]*h,n[3]=i[3]*s+i[7]*a+i[11]*u+i[15]*h,n}function wn(n,r,i){var s=r[0],a=r[1],u=r[2],h=i[0],p=i[1],g=i[2],y=i[3],b=y*s+p*u-g*a,E=y*a+g*s-h*u,T=y*u+h*a-p*s,O=-h*s-p*a-g*u;return n[0]=b*y+O*-h+E*-g-T*-p,n[1]=E*y+O*-p+T*-h-b*-g,n[2]=T*y+O*-g+b*-p-E*-h,n[3]=r[3],n}function _n(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}function kn(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}function ar(n,r){return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]}function kr(n,r){var i=n[0],s=n[1],a=n[2],u=n[3],h=r[0],p=r[1],g=r[2],y=r[3];return Math.abs(i-h)<=Ua.Ib*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-p)<=Ua.Ib*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(a-g)<=Ua.Ib*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-y)<=Ua.Ib*Math.max(1,Math.abs(u),Math.abs(y))}var vi=null,Ui=null,fi=null,ro=null,so=null,jc=null,Va=null,Hc=function(){var n=qg();return function(r,i,s,a,u,h){var p,g;for(i||(i=4),s||(s=0),a?g=Math.min(a*i+s,r.length):g=r.length,p=s;p<g;p+=i)n[0]=r[p],n[1]=r[p+1],n[2]=r[p+2],n[3]=r[p+3],u(n,n,h),r[p]=n[0],r[p+1]=n[1],r[p+2]=n[2],r[p+3]=n[3];return r}}(),qo=M(35600),Ot=M(77160),xl=M(71002),t2=9007199254740991,aT="[object Arguments]",lT="[object Array]",cT="[object Boolean]",uT="[object Date]",dT="[object Error]",hT="[object Function]",fT="[object Map]",pT="[object Number]",gT="[object Object]",vT="[object RegExp]",mT="[object Set]",yT="[object String]",Yw="[object WeakMap]",bT="[object ArrayBuffer]",xT="[object DataView]",CT="[object Float32Array]",Kw="[object Float64Array]",wT="[object Int8Array]",ET="[object Int16Array]",ST="[object Int32Array]",_T="[object Uint8Array]",qw="[object Uint8ClampedArray]",AT="[object Uint16Array]",TT="[object Uint32Array]",_s={};_s[CT]=_s[Kw]=_s[wT]=_s[ET]=_s[ST]=_s[_T]=_s[qw]=_s[AT]=_s[TT]=!0,_s[aT]=_s[lT]=_s[bT]=_s[cT]=_s[xT]=_s[uT]=_s[dT]=_s[hT]=_s[fT]=_s[pT]=_s[gT]=_s[vT]=_s[mT]=_s[yT]=_s[Yw]=!1;function sP(n){return function(r){return n(r)}}var MT=Object.prototype,OT=MT.toString;function PT(n){return DT(n)&&Jw(n.length)&&!!_s[OT.call(n)]}function Jw(n){return typeof n=="number"&&n>-1&&n%1===0&&n<=t2}function DT(n){return!!n&&(0,xl.Z)(n)==="object"}var Qw=PT;function eE(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function tE(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?eE(Object(i),!0).forEach(function(s){(0,Bt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):eE(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function NT(n){var r=nE();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function nE(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var IT=function(n){(0,_o.Z)(i,n);var r=NT(i);function i(s){var a;return(0,br.Z)(this,i),a=r.call(this,s),a.dirty=!0,a.attributes=[],a.indices=void 0,a.indicesBuffer=void 0,a.vertexCount=0,a.maxInstancedCount=void 0,a.aabb=void 0,a.entity=void 0,Object.assign((0,Us.Z)(a),s),a}return(0,Br.Z)(i,[{key:"setAttribute",value:function(a,u,h,p){var g=this.attributes.find(function(y){return y.name===a});return g?(g.data=u,g.dirty=!0):this.attributes.push(tE(tE({dirty:!0,name:a,data:u},h),{},{bufferGetter:p})),this.dirty=!0,this}},{key:"setIndex",value:function(a){return this.indices=new Uint32Array(a.buffer?a.buffer:a),this.dirty=!0,this}},{key:"applyMatrix",value:function(a){var u=this.attributes.find(function(T){var O=T.name;return O==="position"}),h=this.attributes.find(function(T){var O=T.name;return O==="normal"});if(u&&(u.dirty=!0,u.data&&u.data.length))for(var p=0;p<u.data.length;p+=3){var g=Qb(u.data[p],u.data[p+1],u.data[p+2],1);At(g,g,a),Qw(u.data)?u.data.set([g[0],g[1],g[2]],p):(u.data[p]=g[0],u.data[p+1]=g[1],u.data[p+2]=g[2])}if(h){var y=qo.XL(qo.Ue(),a);if(h.data&&h.data.length)for(var b=0;b<h.data.length;b+=3){var E=Ot.al(h.data[b],h.data[b+1],h.data[b+2]);Ot.kK(E,E,y),Ot.Fv(E,E),Qw(h.data)?h.data.set([E[0],E[1],E[2]],b):(h.data[b]=E[0],h.data[b+1]=E[1],h.data[b+2]=E[2])}}}}]),i}(Vc),xt;(function(n){n[n.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",n[n.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",n[n.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n[n.ZERO=0]="ZERO",n[n.ONE=1]="ONE",n[n.SRC_COLOR=768]="SRC_COLOR",n[n.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",n[n.SRC_ALPHA=770]="SRC_ALPHA",n[n.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",n[n.DST_ALPHA=772]="DST_ALPHA",n[n.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",n[n.DST_COLOR=774]="DST_COLOR",n[n.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",n[n.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",n[n.FUNC_ADD=32774]="FUNC_ADD",n[n.BLEND_EQUATION=32777]="BLEND_EQUATION",n[n.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",n[n.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",n[n.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",n[n.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",n[n.MAX_EXT=32776]="MAX_EXT",n[n.MIN_EXT=32775]="MIN_EXT",n[n.BLEND_DST_RGB=32968]="BLEND_DST_RGB",n[n.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",n[n.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",n[n.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",n[n.CONSTANT_COLOR=32769]="CONSTANT_COLOR",n[n.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",n[n.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",n[n.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",n[n.BLEND_COLOR=32773]="BLEND_COLOR",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",n[n.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",n[n.STREAM_DRAW=35040]="STREAM_DRAW",n[n.STATIC_DRAW=35044]="STATIC_DRAW",n[n.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",n[n.BUFFER_SIZE=34660]="BUFFER_SIZE",n[n.BUFFER_USAGE=34661]="BUFFER_USAGE",n[n.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",n[n.FRONT=1028]="FRONT",n[n.BACK=1029]="BACK",n[n.FRONT_AND_BACK=1032]="FRONT_AND_BACK",n[n.CULL_FACE=2884]="CULL_FACE",n[n.BLEND=3042]="BLEND",n[n.DITHER=3024]="DITHER",n[n.STENCIL_TEST=2960]="STENCIL_TEST",n[n.DEPTH_TEST=2929]="DEPTH_TEST",n[n.SCISSOR_TEST=3089]="SCISSOR_TEST",n[n.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",n[n.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",n[n.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",n[n.NO_ERROR=0]="NO_ERROR",n[n.INVALID_ENUM=1280]="INVALID_ENUM",n[n.INVALID_VALUE=1281]="INVALID_VALUE",n[n.INVALID_OPERATION=1282]="INVALID_OPERATION",n[n.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",n[n.CW=2304]="CW",n[n.CCW=2305]="CCW",n[n.LINE_WIDTH=2849]="LINE_WIDTH",n[n.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",n[n.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",n[n.CULL_FACE_MODE=2885]="CULL_FACE_MODE",n[n.FRONT_FACE=2886]="FRONT_FACE",n[n.DEPTH_RANGE=2928]="DEPTH_RANGE",n[n.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",n[n.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",n[n.DEPTH_FUNC=2932]="DEPTH_FUNC",n[n.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",n[n.STENCIL_FUNC=2962]="STENCIL_FUNC",n[n.STENCIL_FAIL=2964]="STENCIL_FAIL",n[n.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",n[n.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",n[n.STENCIL_REF=2967]="STENCIL_REF",n[n.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",n[n.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",n[n.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",n[n.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",n[n.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",n[n.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",n[n.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",n[n.VIEWPORT=2978]="VIEWPORT",n[n.SCISSOR_BOX=3088]="SCISSOR_BOX",n[n.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",n[n.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",n[n.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",n[n.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",n[n.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",n[n.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",n[n.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",n[n.RED_BITS=3410]="RED_BITS",n[n.GREEN_BITS=3411]="GREEN_BITS",n[n.BLUE_BITS=3412]="BLUE_BITS",n[n.ALPHA_BITS=3413]="ALPHA_BITS",n[n.DEPTH_BITS=3414]="DEPTH_BITS",n[n.STENCIL_BITS=3415]="STENCIL_BITS",n[n.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",n[n.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",n[n.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",n[n.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",n[n.SAMPLES=32937]="SAMPLES",n[n.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",n[n.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",n[n.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",n[n.DONT_CARE=4352]="DONT_CARE",n[n.FASTEST=4353]="FASTEST",n[n.NICEST=4354]="NICEST",n[n.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.INT=5124]="INT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.ALPHA=6406]="ALPHA",n[n.RGB=6407]="RGB",n[n.RGBA=6408]="RGBA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",n[n.VERTEX_SHADER=35633]="VERTEX_SHADER",n[n.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",n[n.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",n[n.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",n[n.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",n[n.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",n[n.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",n[n.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",n[n.SHADER_TYPE=35663]="SHADER_TYPE",n[n.DELETE_STATUS=35712]="DELETE_STATUS",n[n.LINK_STATUS=35714]="LINK_STATUS",n[n.VALIDATE_STATUS=35715]="VALIDATE_STATUS",n[n.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",n[n.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",n[n.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",n[n.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",n[n.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",n[n.NEVER=512]="NEVER",n[n.LESS=513]="LESS",n[n.EQUAL=514]="EQUAL",n[n.LEQUAL=515]="LEQUAL",n[n.GREATER=516]="GREATER",n[n.NOTEQUAL=517]="NOTEQUAL",n[n.GEQUAL=518]="GEQUAL",n[n.ALWAYS=519]="ALWAYS",n[n.KEEP=7680]="KEEP",n[n.REPLACE=7681]="REPLACE",n[n.INCR=7682]="INCR",n[n.DECR=7683]="DECR",n[n.INVERT=5386]="INVERT",n[n.INCR_WRAP=34055]="INCR_WRAP",n[n.DECR_WRAP=34056]="DECR_WRAP",n[n.VENDOR=7936]="VENDOR",n[n.RENDERER=7937]="RENDERER",n[n.VERSION=7938]="VERSION",n[n.NEAREST=9728]="NEAREST",n[n.LINEAR=9729]="LINEAR",n[n.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",n[n.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",n[n.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",n[n.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",n[n.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",n[n.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",n[n.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",n[n.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE=5890]="TEXTURE",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n[n.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",n[n.TEXTURE0=33984]="TEXTURE0",n[n.TEXTURE1=33985]="TEXTURE1",n[n.TEXTURE2=33986]="TEXTURE2",n[n.TEXTURE3=33987]="TEXTURE3",n[n.TEXTURE4=33988]="TEXTURE4",n[n.TEXTURE5=33989]="TEXTURE5",n[n.TEXTURE6=33990]="TEXTURE6",n[n.TEXTURE7=33991]="TEXTURE7",n[n.TEXTURE8=33992]="TEXTURE8",n[n.TEXTURE9=33993]="TEXTURE9",n[n.TEXTURE10=33994]="TEXTURE10",n[n.TEXTURE11=33995]="TEXTURE11",n[n.TEXTURE12=33996]="TEXTURE12",n[n.TEXTURE13=33997]="TEXTURE13",n[n.TEXTURE14=33998]="TEXTURE14",n[n.TEXTURE15=33999]="TEXTURE15",n[n.TEXTURE16=34e3]="TEXTURE16",n[n.TEXTURE17=34001]="TEXTURE17",n[n.TEXTURE18=34002]="TEXTURE18",n[n.TEXTURE19=34003]="TEXTURE19",n[n.TEXTURE20=34004]="TEXTURE20",n[n.TEXTURE21=34005]="TEXTURE21",n[n.TEXTURE22=34006]="TEXTURE22",n[n.TEXTURE23=34007]="TEXTURE23",n[n.TEXTURE24=34008]="TEXTURE24",n[n.TEXTURE25=34009]="TEXTURE25",n[n.TEXTURE26=34010]="TEXTURE26",n[n.TEXTURE27=34011]="TEXTURE27",n[n.TEXTURE28=34012]="TEXTURE28",n[n.TEXTURE29=34013]="TEXTURE29",n[n.TEXTURE30=34014]="TEXTURE30",n[n.TEXTURE31=34015]="TEXTURE31",n[n.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",n[n.REPEAT=10497]="REPEAT",n[n.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n[n.FLOAT_VEC2=35664]="FLOAT_VEC2",n[n.FLOAT_VEC3=35665]="FLOAT_VEC3",n[n.FLOAT_VEC4=35666]="FLOAT_VEC4",n[n.INT_VEC2=35667]="INT_VEC2",n[n.INT_VEC3=35668]="INT_VEC3",n[n.INT_VEC4=35669]="INT_VEC4",n[n.BOOL=35670]="BOOL",n[n.BOOL_VEC2=35671]="BOOL_VEC2",n[n.BOOL_VEC3=35672]="BOOL_VEC3",n[n.BOOL_VEC4=35673]="BOOL_VEC4",n[n.FLOAT_MAT2=35674]="FLOAT_MAT2",n[n.FLOAT_MAT3=35675]="FLOAT_MAT3",n[n.FLOAT_MAT4=35676]="FLOAT_MAT4",n[n.SAMPLER_2D=35678]="SAMPLER_2D",n[n.SAMPLER_CUBE=35680]="SAMPLER_CUBE",n[n.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",n[n.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",n[n.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",n[n.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",n[n.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",n[n.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",n[n.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",n[n.COMPILE_STATUS=35713]="COMPILE_STATUS",n[n.LOW_FLOAT=36336]="LOW_FLOAT",n[n.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",n[n.HIGH_FLOAT=36338]="HIGH_FLOAT",n[n.LOW_INT=36339]="LOW_INT",n[n.MEDIUM_INT=36340]="MEDIUM_INT",n[n.HIGH_INT=36341]="HIGH_INT",n[n.FRAMEBUFFER=36160]="FRAMEBUFFER",n[n.RENDERBUFFER=36161]="RENDERBUFFER",n[n.RGBA4=32854]="RGBA4",n[n.RGB5_A1=32855]="RGB5_A1",n[n.RGB565=36194]="RGB565",n[n.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",n[n.STENCIL_INDEX=6401]="STENCIL_INDEX",n[n.STENCIL_INDEX8=36168]="STENCIL_INDEX8",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n[n.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",n[n.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",n[n.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",n[n.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",n[n.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",n[n.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",n[n.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",n[n.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",n[n.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",n[n.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",n[n.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",n[n.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",n[n.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",n[n.NONE=0]="NONE",n[n.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",n[n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",n[n.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",n[n.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",n[n.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",n[n.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",n[n.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",n[n.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",n[n.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",n[n.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",n[n.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",n[n.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",n[n.COPY_SRC=1]="COPY_SRC",n[n.COPY_DST=2]="COPY_DST",n[n.SAMPLED=4]="SAMPLED",n[n.STORAGE=8]="STORAGE",n[n.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(xt||(xt={}));var rE,iE,oE,sE,Jg,aE,lE,Yx,RT=(rE=(0,z.b2)(),iE=(0,z.f3)(dn.GeometryComponentManager),oE=(0,z.f3)(dn.RenderEngine),rE(sE=(Jg=(Yx=function(){function n(){(0,br.Z)(this,n),Mr(this,"geometry",aE,this),Mr(this,"engine",lE,this)}return(0,Br.Z)(n,[{key:"execute",value:function(){var r=(0,no.Z)(fr().mark(function s(){var a=this;return fr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:this.geometry.forEach(function(p,g){g.dirty&&(g.attributes.forEach(function(y){if(y.dirty&&y.data){if(!y.buffer)y.buffer=a.engine.createBuffer({data:y.data,type:xt.FLOAT});else{var b;(b=y.buffer)===null||b===void 0||b.subData({data:y.data,offset:0})}y.dirty=!1}}),g.indices&&(g.indicesBuffer?g.indicesBuffer.subData({data:g.indices,offset:0}):g.indicesBuffer=a.engine.createElements({data:g.indices,count:g.indices.length,type:xt.UNSIGNED_INT,usage:xt.STATIC_DRAW})),g.dirty=!1)});case 1:case"end":return h.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.geometry.forEach(function(i,s){s.indicesBuffer&&s.indicesBuffer.destroy(),s.attributes.forEach(function(a){a.buffer&&a.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},s=i.vertexCount,a=bu();return this.geometry.create(a,{vertexCount:s})}},{key:"createInstancedBufferGeometry",value:function(i){var s=i.maxInstancedCount,a=i.vertexCount,u=bu();return this.geometry.create(u,{maxInstancedCount:s,vertexCount:a})}}]),n}(),Yx),aE=Dr(Jg.prototype,"geometry",[iE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lE=Dr(Jg.prototype,"engine",[oE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jg))||sE);function Hp(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function cE(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Hp(Object(i),!0).forEach(function(s){(0,Bt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Hp(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function kT(n){var r=uE();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function uE(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var LT=function(n){(0,_o.Z)(i,n);var r=kT(i);function i(s){var a;return(0,br.Z)(this,i),a=r.call(this,s),a.vertexShaderGLSL=void 0,a.fragmentShaderGLSL=void 0,a.defines={},a.dirty=!0,a.uniforms=[],a.cull={enable:!0,face:xt.BACK},a.depth={enable:!0},a.blend=void 0,a.entity=void 0,a.type=void 0,Object.assign((0,Us.Z)(a),s),a}return(0,Br.Z)(i,[{key:"setDefines",value:function(a){return this.defines=cE(cE({},this.defines),a),this}},{key:"setCull",value:function(a){return this.cull=a,this}},{key:"setDepth",value:function(a){return this.depth=a,this}},{key:"setBlend",value:function(a){return this.blend=a,this}},{key:"setUniform",value:function(a,u){var h=this;if(typeof a!="string")return Object.keys(a).forEach(function(g){return h.setUniform(g,a[g])}),this;var p=this.uniforms.find(function(g){return g.name===a});return p?(p.dirty=!0,p.data=u):this.uniforms.push({name:a,dirty:!0,data:u}),this.dirty=!0,this}}]),i}(Vc),dE,hE,fE,pE,gE,Jm,vE,mE,yE,bE;function xE(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function CE(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?xE(Object(i),!0).forEach(function(s){(0,Bt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):xE(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var GT=(dE=(0,z.b2)(),hE=(0,z.f3)(dn.MaterialComponentManager),fE=(0,z.f3)(dn.RenderEngine),pE=(0,z.f3)(dn.ShaderModuleService),dE(gE=(Jm=(bE=function(){function n(){(0,br.Z)(this,n),Mr(this,"material",vE,this),Mr(this,"engine",mE,this),Mr(this,"shaderModule",yE,this)}return(0,Br.Z)(n,[{key:"execute",value:function(){var r=(0,no.Z)(fr().mark(function s(){return fr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},s)}));function i(){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(i){var s=bu(),a=i.vertexShader,u=i.fragmentShader,h=[];if(!this.engine.supportWebGPU){var p="material-".concat(s);this.shaderModule.registerModule(p,{vs:i.vertexShader,fs:i.fragmentShader});var g=this.shaderModule.getModule(p);a=g.vs,u=g.fs,g.uniforms&&(h=Object.keys(g.uniforms).map(function(y){return{dirty:!0,name:y,data:g.uniforms[y]}}))}return this.material.create(s,CE(CE({vertexShaderGLSL:a,fragmentShaderGLSL:u},i),{},{uniforms:h}))}}]),n}(),bE),vE=Dr(Jm.prototype,"material",[hE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mE=Dr(Jm.prototype,"engine",[fE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yE=Dr(Jm.prototype,"shaderModule",[pE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jm))||gE);function FT(n){var r=BT();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function BT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var Kx;(function(n){n[n.Standard=0]="Standard"})(Kx||(Kx={}));var zT=function(n){(0,_o.Z)(i,n);var r=FT(i);function i(s){var a;return(0,br.Z)(this,i),a=r.call(this,s),a.strategy=Kx.Standard,a.visibilityPlaneMask=0,a.visible=!1,Object.assign((0,Us.Z)(a),s),a}return i}(Vc),qx=function(){function n(r,i){(0,br.Z)(this,n),this.center=void 0,this.halfExtents=void 0,this.min=Ot.Ue(),this.max=Ot.Ue(),this.update(r,i)}return(0,Br.Z)(n,[{key:"update",value:function(i,s){this.center=i||Ot.Ue(),this.halfExtents=s||Ot.al(.5,.5,.5),this.min=Ot.lu(this.min,this.center,this.halfExtents),this.max=Ot.IH(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(i,s){Ot.IH(this.center,s,i),Ot.bA(this.center,this.center,.5),Ot.lu(this.halfExtents,s,i),Ot.bA(this.halfExtents,this.halfExtents,.5),Ot.JG(this.min,i),Ot.JG(this.max,s)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(i){var s=this.center,a=s[0],u=s[1],h=s[2],p=this.halfExtents,g=p[0],y=p[1],b=p[2],E=a-g,T=a+g,O=u-y,I=u+y,k=h-b,B=h+b,$=i.center,X=$[0],re=$[1],ye=$[2],me=i.halfExtents,We=me[0],at=me[1],ft=me[2],Qt=X-We,_t=X+We,en=re-at,ct=re+at,Hn=ye-ft,Gn=ye+ft;Qt<E&&(E=Qt),_t>T&&(T=_t),en<O&&(O=en),ct>I&&(I=ct),Hn<k&&(k=Hn),Gn>B&&(B=Gn),s[0]=(E+T)*.5,s[1]=(O+I)*.5,s[2]=(k+B)*.5,p[0]=(T-E)*.5,p[1]=(I-O)*.5,p[2]=(B-k)*.5,this.min[0]=E,this.min[1]=O,this.min[2]=k,this.max[0]=T,this.max[1]=I,this.max[2]=B}},{key:"intersects",value:function(i){var s=this.getMax(),a=this.getMin(),u=i.getMax(),h=i.getMin();return a[0]<=u[0]&&s[0]>=h[0]&&a[1]<=u[1]&&s[1]>=h[1]&&a[2]<=u[2]&&s[2]>=h[2]}},{key:"containsPoint",value:function(i){var s=this.getMin(),a=this.getMax();return!(i[0]<s[0]||i[0]>a[0]||i[1]<s[1]||i[1]>a[1]||i[2]<s[2]||i[2]>a[2])}},{key:"getNegativeFarPoint",value:function(i){return i.pnVertexFlag===273?Ot.JG(Ot.Ue(),this.min):i.pnVertexFlag===272?Ot.al(this.min[0],this.min[1],this.max[2]):i.pnVertexFlag===257?Ot.al(this.min[0],this.max[1],this.min[2]):i.pnVertexFlag===256?Ot.al(this.min[0],this.max[1],this.max[2]):i.pnVertexFlag===17?Ot.al(this.max[0],this.min[1],this.min[2]):i.pnVertexFlag===16?Ot.al(this.max[0],this.min[1],this.max[2]):i.pnVertexFlag===1?Ot.al(this.max[0],this.max[1],this.min[2]):Ot.al(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(i){return i.pnVertexFlag===273?Ot.JG(Ot.Ue(),this.max):i.pnVertexFlag===272?Ot.al(this.max[0],this.max[1],this.min[2]):i.pnVertexFlag===257?Ot.al(this.max[0],this.min[1],this.max[2]):i.pnVertexFlag===256?Ot.al(this.max[0],this.min[1],this.min[2]):i.pnVertexFlag===17?Ot.al(this.min[0],this.max[1],this.max[2]):i.pnVertexFlag===16?Ot.al(this.min[0],this.max[1],this.min[2]):i.pnVertexFlag===1?Ot.al(this.min[0],this.min[1],this.max[2]):Ot.al(this.min[0],this.min[1],this.min[2])}}]),n}();function UT(n){var r=VT();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function VT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var wE=function(n){(0,_o.Z)(i,n);var r=UT(i);function i(s){var a;return(0,br.Z)(this,i),a=r.call(this,s),a.material=void 0,a.geometry=void 0,a.aabb=new qx,a.aabbDirty=!0,a.model=void 0,a.visible=!0,a.children=[],Object.assign((0,Us.Z)(a),s),a}return i}(Vc),jT=function(){function n(r,i){(0,br.Z)(this,n),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=r||0,this.normal=i||Ot.al(0,1,0),this.updatePNVertexFlag()}return(0,Br.Z)(n,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(i){return Ot.AK(i,this.normal)-this.distance}},{key:"normalize",value:function(){var i=1/Ot.Zh(this.normal);Ot.bA(this.normal,this.normal,i),this.distance*=i}},{key:"intersectsLine",value:function(i,s,a){var u=this.distanceToPoint(i),h=this.distanceToPoint(s),p=u/(u-h),g=p>=0&&p<=1;return g&&a&&Ot.t7(a,i,s,p),g}}]),n}(),$p;(function(n){n[n.OUTSIDE=4294967295]="OUTSIDE",n[n.INSIDE=0]="INSIDE",n[n.INDETERMINATE=2147483647]="INDETERMINATE"})($p||($p={}));var HT=function(){function n(r){if((0,br.Z)(this,n),this.planes=[],r)this.planes=r;else for(var i=0;i<6;i++)this.planes.push(new jT)}return(0,Br.Z)(n,[{key:"extractFromVPMatrix",value:function(i){var s=(0,jp.Z)(i,16),a=s[0],u=s[1],h=s[2],p=s[3],g=s[4],y=s[5],b=s[6],E=s[7],T=s[8],O=s[9],I=s[10],k=s[11],B=s[12],$=s[13],X=s[14],re=s[15];Ot.t8(this.planes[0].normal,p-a,E-g,k-T),this.planes[0].distance=-(re-B),Ot.t8(this.planes[1].normal,p+a,E+g,k+T),this.planes[1].distance=-(re+B),Ot.t8(this.planes[2].normal,p+u,E+y,k+O),this.planes[2].distance=-(re+$),Ot.t8(this.planes[3].normal,p-u,E-y,k-O),this.planes[3].distance=-(re-$),Ot.t8(this.planes[4].normal,p-h,E-b,k-I),this.planes[4].distance=-(re-X),Ot.t8(this.planes[5].normal,p+h,E+b,k+I),this.planes[5].distance=-(re+X),this.planes.forEach(function(ye){ye.normalize(),ye.updatePNVertexFlag()})}}]),n}();function aP(n){return typeof n=="number"}function $T(n){return n===void 0?0:n>360||n<-360?n%360:n}function WT(n,r,i){return isNumber(n)?vec3.fromValues(n,r,i):n.length===3?vec3.clone(n):vec3.fromValues(n[0],n[1],n[2])}function XT(n,r){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[4],r[4]=n[5],r[5]=n[6],r[6]=n[8],r[7]=n[9],r[8]=n[10],r}function ZT(n){var r=(0,jp.Z)(n,3),i=r[0],s=r[1],a=r[2],u=i+s*256+a*65536-1;return u}function lP(n){return[n+1&255,n+1>>8&255,n+1>>8>>8&255]}var EE,Jx,SE,Qx,eC,tC,_E,Wp,AE,nC,rC,TE,ME,OE;function iC(n,r){var i;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=PE(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function PE(n,r){if(n){if(typeof n=="string")return Qg(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qg(n,r)}}function Qg(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var YT=(EE=(0,z.b2)(),Jx=(0,z.f3)(dn.MeshComponentManager),SE=(0,z.f3)(dn.CullableComponentManager),Qx=(0,z.f3)(dn.GeometryComponentManager),eC=(0,z.f3)(dn.HierarchyComponentManager),tC=(0,z.f3)(dn.TransformComponentManager),EE(_E=(Wp=(OE=function(){function n(){(0,br.Z)(this,n),Mr(this,"mesh",AE,this),Mr(this,"cullable",nC,this),Mr(this,"geometry",rC,this),Mr(this,"hierarchy",TE,this),Mr(this,"transform",ME,this),this.planes=void 0}return(0,Br.Z)(n,[{key:"setFrustumPlanes",value:function(i){this.planes=i}},{key:"execute",value:function(){var r=(0,no.Z)(fr().mark(function s(a){var u,h,p,g,y,b,E,T,O,I,k,B,$,X,re,ye,me,We,at,ft,Qt;return fr().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:u=iC(a);try{for(u.s();!(h=u.n()).done;){p=h.value,g=p.getScene(),y=p.getCamera(),b=iC(g.getEntities());try{for(b.s();!(E=b.n()).done;)T=E.value,O=this.mesh.getComponentByEntity(T),O&&(I=this.hierarchy.getComponentByEntity(T),k=this.cullable.getComponentByEntity(T),B=O.geometry,$=this.transform.getComponentByEntity(T),B&&B.aabb&&$&&O.aabbDirty&&(X=$.worldTransform,re=B.aabb,ye=re.center,me=re.halfExtents,We=Ot.fF(Ot.Ue(),ye,X),at=XT(X,qo.Ue()),ft=Ot.kK(Ot.Ue(),me,at),O.aabb.update(We,ft),O.aabbDirty=!1),k&&B&&(Qt=this.cullable.getComponentByEntity((I==null?void 0:I.parentID)||-1),k.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(O.aabb,(Qt==null?void 0:Qt.visibilityPlaneMask)||$p.INDETERMINATE,this.planes||y.getFrustum().planes),k.visible=k.visibilityPlaneMask!==$p.OUTSIDE))}catch(ct){b.e(ct)}finally{b.f()}}}catch(ct){u.e(ct)}finally{u.f()}case 2:case"end":return en.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(i,s,a){if(s===$p.OUTSIDE||s===$p.INSIDE)return s;for(var u=$p.INSIDE,h=0,p=a.length;h<p;++h){var g=h<31?1<<h:0;if(!(h<31&&!(s&g))){var y=a[h],b=y.normal,E=y.distance;if(Ot.AK(b,i.getNegativeFarPoint(a[h]))+E>0)return $p.OUTSIDE;Ot.AK(b,i.getPositiveFarPoint(a[h]))+E>0&&(u|=g)}}return u}}]),n}(),OE),AE=Dr(Wp.prototype,"mesh",[Jx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nC=Dr(Wp.prototype,"cullable",[SE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rC=Dr(Wp.prototype,"geometry",[Qx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TE=Dr(Wp.prototype,"hierarchy",[eC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ME=Dr(Wp.prototype,"transform",[tC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wp))||_E);function xc(){var n=new Ua.WT(16);return Ua.WT!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function KT(n){var r=new Ua.WT(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}function n2(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n}function qT(n,r,i,s,a,u,h,p,g,y,b,E,T,O,I,k){var B=new glMatrix.ARRAY_TYPE(16);return B[0]=n,B[1]=r,B[2]=i,B[3]=s,B[4]=a,B[5]=u,B[6]=h,B[7]=p,B[8]=g,B[9]=y,B[10]=b,B[11]=E,B[12]=T,B[13]=O,B[14]=I,B[15]=k,B}function JT(n,r,i,s,a,u,h,p,g,y,b,E,T,O,I,k,B){return n[0]=r,n[1]=i,n[2]=s,n[3]=a,n[4]=u,n[5]=h,n[6]=p,n[7]=g,n[8]=y,n[9]=b,n[10]=E,n[11]=T,n[12]=O,n[13]=I,n[14]=k,n[15]=B,n}function oC(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function cP(n,r){if(n===r){var i=r[1],s=r[2],a=r[3],u=r[6],h=r[7],p=r[11];n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=i,n[6]=r[9],n[7]=r[13],n[8]=s,n[9]=u,n[11]=r[14],n[12]=a,n[13]=h,n[14]=p}else n[0]=r[0],n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=r[1],n[5]=r[5],n[6]=r[9],n[7]=r[13],n[8]=r[2],n[9]=r[6],n[10]=r[10],n[11]=r[14],n[12]=r[3],n[13]=r[7],n[14]=r[11],n[15]=r[15];return n}function r2(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=r[4],p=r[5],g=r[6],y=r[7],b=r[8],E=r[9],T=r[10],O=r[11],I=r[12],k=r[13],B=r[14],$=r[15],X=i*p-s*h,re=i*g-a*h,ye=i*y-u*h,me=s*g-a*p,We=s*y-u*p,at=a*y-u*g,ft=b*k-E*I,Qt=b*B-T*I,_t=b*$-O*I,en=E*B-T*k,ct=E*$-O*k,Hn=T*$-O*B,Gn=X*Hn-re*ct+ye*en+me*_t-We*Qt+at*ft;return Gn?(Gn=1/Gn,n[0]=(p*Hn-g*ct+y*en)*Gn,n[1]=(a*ct-s*Hn-u*en)*Gn,n[2]=(k*at-B*We+$*me)*Gn,n[3]=(T*We-E*at-O*me)*Gn,n[4]=(g*_t-h*Hn-y*Qt)*Gn,n[5]=(i*Hn-a*_t+u*Qt)*Gn,n[6]=(B*ye-I*at-$*re)*Gn,n[7]=(b*at-T*ye+O*re)*Gn,n[8]=(h*ct-p*_t+y*ft)*Gn,n[9]=(s*_t-i*ct-u*ft)*Gn,n[10]=(I*We-k*ye+$*X)*Gn,n[11]=(E*ye-b*We-O*X)*Gn,n[12]=(p*Qt-h*en-g*ft)*Gn,n[13]=(i*en-s*Qt+a*ft)*Gn,n[14]=(k*re-I*me-B*X)*Gn,n[15]=(b*me-E*re+T*X)*Gn,n):null}function uP(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=r[4],p=r[5],g=r[6],y=r[7],b=r[8],E=r[9],T=r[10],O=r[11],I=r[12],k=r[13],B=r[14],$=r[15];return n[0]=p*(T*$-O*B)-E*(g*$-y*B)+k*(g*O-y*T),n[1]=-(s*(T*$-O*B)-E*(a*$-u*B)+k*(a*O-u*T)),n[2]=s*(g*$-y*B)-p*(a*$-u*B)+k*(a*y-u*g),n[3]=-(s*(g*O-y*T)-p*(a*O-u*T)+E*(a*y-u*g)),n[4]=-(h*(T*$-O*B)-b*(g*$-y*B)+I*(g*O-y*T)),n[5]=i*(T*$-O*B)-b*(a*$-u*B)+I*(a*O-u*T),n[6]=-(i*(g*$-y*B)-h*(a*$-u*B)+I*(a*y-u*g)),n[7]=i*(g*O-y*T)-h*(a*O-u*T)+b*(a*y-u*g),n[8]=h*(E*$-O*k)-b*(p*$-y*k)+I*(p*O-y*E),n[9]=-(i*(E*$-O*k)-b*(s*$-u*k)+I*(s*O-u*E)),n[10]=i*(p*$-y*k)-h*(s*$-u*k)+I*(s*y-u*p),n[11]=-(i*(p*O-y*E)-h*(s*O-u*E)+b*(s*y-u*p)),n[12]=-(h*(E*B-T*k)-b*(p*B-g*k)+I*(p*T-g*E)),n[13]=i*(E*B-T*k)-b*(s*B-a*k)+I*(s*T-a*E),n[14]=-(i*(p*B-g*k)-h*(s*B-a*k)+I*(s*g-a*p)),n[15]=i*(p*T-g*E)-h*(s*T-a*E)+b*(s*g-a*p),n}function dP(n){var r=n[0],i=n[1],s=n[2],a=n[3],u=n[4],h=n[5],p=n[6],g=n[7],y=n[8],b=n[9],E=n[10],T=n[11],O=n[12],I=n[13],k=n[14],B=n[15],$=r*h-i*u,X=r*p-s*u,re=r*g-a*u,ye=i*p-s*h,me=i*g-a*h,We=s*g-a*p,at=y*I-b*O,ft=y*k-E*O,Qt=y*B-T*O,_t=b*k-E*I,en=b*B-T*I,ct=E*B-T*k;return $*ct-X*en+re*_t+ye*Qt-me*ft+We*at}function e0(n,r,i){var s=r[0],a=r[1],u=r[2],h=r[3],p=r[4],g=r[5],y=r[6],b=r[7],E=r[8],T=r[9],O=r[10],I=r[11],k=r[12],B=r[13],$=r[14],X=r[15],re=i[0],ye=i[1],me=i[2],We=i[3];return n[0]=re*s+ye*p+me*E+We*k,n[1]=re*a+ye*g+me*T+We*B,n[2]=re*u+ye*y+me*O+We*$,n[3]=re*h+ye*b+me*I+We*X,re=i[4],ye=i[5],me=i[6],We=i[7],n[4]=re*s+ye*p+me*E+We*k,n[5]=re*a+ye*g+me*T+We*B,n[6]=re*u+ye*y+me*O+We*$,n[7]=re*h+ye*b+me*I+We*X,re=i[8],ye=i[9],me=i[10],We=i[11],n[8]=re*s+ye*p+me*E+We*k,n[9]=re*a+ye*g+me*T+We*B,n[10]=re*u+ye*y+me*O+We*$,n[11]=re*h+ye*b+me*I+We*X,re=i[12],ye=i[13],me=i[14],We=i[15],n[12]=re*s+ye*p+me*E+We*k,n[13]=re*a+ye*g+me*T+We*B,n[14]=re*u+ye*y+me*O+We*$,n[15]=re*h+ye*b+me*I+We*X,n}function Qm(n,r,i){var s=i[0],a=i[1],u=i[2],h,p,g,y,b,E,T,O,I,k,B,$;return r===n?(n[12]=r[0]*s+r[4]*a+r[8]*u+r[12],n[13]=r[1]*s+r[5]*a+r[9]*u+r[13],n[14]=r[2]*s+r[6]*a+r[10]*u+r[14],n[15]=r[3]*s+r[7]*a+r[11]*u+r[15]):(h=r[0],p=r[1],g=r[2],y=r[3],b=r[4],E=r[5],T=r[6],O=r[7],I=r[8],k=r[9],B=r[10],$=r[11],n[0]=h,n[1]=p,n[2]=g,n[3]=y,n[4]=b,n[5]=E,n[6]=T,n[7]=O,n[8]=I,n[9]=k,n[10]=B,n[11]=$,n[12]=h*s+b*a+I*u+r[12],n[13]=p*s+E*a+k*u+r[13],n[14]=g*s+T*a+B*u+r[14],n[15]=y*s+O*a+$*u+r[15]),n}function hP(n,r,i){var s=i[0],a=i[1],u=i[2];return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=r[3]*s,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=r[7]*a,n[8]=r[8]*u,n[9]=r[9]*u,n[10]=r[10]*u,n[11]=r[11]*u,n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n}function fP(n,r,i,s){var a=s[0],u=s[1],h=s[2],p=Math.hypot(a,u,h),g,y,b,E,T,O,I,k,B,$,X,re,ye,me,We,at,ft,Qt,_t,en,ct,Hn,Gn,rr;return p<glMatrix.EPSILON?null:(p=1/p,a*=p,u*=p,h*=p,g=Math.sin(i),y=Math.cos(i),b=1-y,E=r[0],T=r[1],O=r[2],I=r[3],k=r[4],B=r[5],$=r[6],X=r[7],re=r[8],ye=r[9],me=r[10],We=r[11],at=a*a*b+y,ft=u*a*b+h*g,Qt=h*a*b-u*g,_t=a*u*b-h*g,en=u*u*b+y,ct=h*u*b+a*g,Hn=a*h*b+u*g,Gn=u*h*b-a*g,rr=h*h*b+y,n[0]=E*at+k*ft+re*Qt,n[1]=T*at+B*ft+ye*Qt,n[2]=O*at+$*ft+me*Qt,n[3]=I*at+X*ft+We*Qt,n[4]=E*_t+k*en+re*ct,n[5]=T*_t+B*en+ye*ct,n[6]=O*_t+$*en+me*ct,n[7]=I*_t+X*en+We*ct,n[8]=E*Hn+k*Gn+re*rr,n[9]=T*Hn+B*Gn+ye*rr,n[10]=O*Hn+$*Gn+me*rr,n[11]=I*Hn+X*Gn+We*rr,r!==n&&(n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n)}function QT(n,r,i){var s=Math.sin(i),a=Math.cos(i),u=r[4],h=r[5],p=r[6],g=r[7],y=r[8],b=r[9],E=r[10],T=r[11];return r!==n&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[4]=u*a+y*s,n[5]=h*a+b*s,n[6]=p*a+E*s,n[7]=g*a+T*s,n[8]=y*a-u*s,n[9]=b*a-h*s,n[10]=E*a-p*s,n[11]=T*a-g*s,n}function eM(n,r,i){var s=Math.sin(i),a=Math.cos(i),u=r[0],h=r[1],p=r[2],g=r[3],y=r[8],b=r[9],E=r[10],T=r[11];return r!==n&&(n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=u*a-y*s,n[1]=h*a-b*s,n[2]=p*a-E*s,n[3]=g*a-T*s,n[8]=u*s+y*a,n[9]=h*s+b*a,n[10]=p*s+E*a,n[11]=g*s+T*a,n}function pP(n,r,i){var s=Math.sin(i),a=Math.cos(i),u=r[0],h=r[1],p=r[2],g=r[3],y=r[4],b=r[5],E=r[6],T=r[7];return r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=u*a+y*s,n[1]=h*a+b*s,n[2]=p*a+E*s,n[3]=g*a+T*s,n[4]=y*a-u*s,n[5]=b*a-h*s,n[6]=E*a-p*s,n[7]=T*a-g*s,n}function gP(n,r){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function vP(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=r[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function sC(n,r,i){var s=i[0],a=i[1],u=i[2],h=Math.hypot(s,a,u),p,g,y;return h<glMatrix.EPSILON?null:(h=1/h,s*=h,a*=h,u*=h,p=Math.sin(r),g=Math.cos(r),y=1-g,n[0]=s*s*y+g,n[1]=a*s*y+u*p,n[2]=u*s*y-a*p,n[3]=0,n[4]=s*a*y-u*p,n[5]=a*a*y+g,n[6]=u*a*y+s*p,n[7]=0,n[8]=s*u*y+a*p,n[9]=a*u*y-s*p,n[10]=u*u*y+g,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}function mP(n,r){var i=Math.sin(r),s=Math.cos(r);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=i,n[7]=0,n[8]=0,n[9]=-i,n[10]=s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function tM(n,r){var i=Math.sin(r),s=Math.cos(r);return n[0]=s,n[1]=0,n[2]=-i,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=i,n[9]=0,n[10]=s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function yP(n,r){var i=Math.sin(r),s=Math.cos(r);return n[0]=s,n[1]=i,n[2]=0,n[3]=0,n[4]=-i,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function bv(n,r,i){var s=r[0],a=r[1],u=r[2],h=r[3],p=s+s,g=a+a,y=u+u,b=s*p,E=s*g,T=s*y,O=a*g,I=a*y,k=u*y,B=h*p,$=h*g,X=h*y;return n[0]=1-(O+k),n[1]=E+X,n[2]=T-$,n[3]=0,n[4]=E-X,n[5]=1-(b+k),n[6]=I+B,n[7]=0,n[8]=T+$,n[9]=I-B,n[10]=1-(b+O),n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n}function bP(n,r){var i=new glMatrix.ARRAY_TYPE(3),s=-r[0],a=-r[1],u=-r[2],h=r[3],p=r[4],g=r[5],y=r[6],b=r[7],E=s*s+a*a+u*u+h*h;return E>0?(i[0]=(p*h+b*s+g*u-y*a)*2/E,i[1]=(g*h+b*a+y*s-p*u)*2/E,i[2]=(y*h+b*u+p*a-g*s)*2/E):(i[0]=(p*h+b*s+g*u-y*a)*2,i[1]=(g*h+b*a+y*s-p*u)*2,i[2]=(y*h+b*u+p*a-g*s)*2),bv(n,r,i),n}function xv(n,r){return n[0]=r[12],n[1]=r[13],n[2]=r[14],n}function Cv(n,r){var i=r[0],s=r[1],a=r[2],u=r[4],h=r[5],p=r[6],g=r[8],y=r[9],b=r[10];return n[0]=Math.hypot(i,s,a),n[1]=Math.hypot(u,h,p),n[2]=Math.hypot(g,y,b),n}function ey(n,r){var i=new Ua.WT(3);Cv(i,r);var s=1/i[0],a=1/i[1],u=1/i[2],h=r[0]*s,p=r[1]*a,g=r[2]*u,y=r[4]*s,b=r[5]*a,E=r[6]*u,T=r[8]*s,O=r[9]*a,I=r[10]*u,k=h+b+I,B=0;return k>0?(B=Math.sqrt(k+1)*2,n[3]=.25*B,n[0]=(E-O)/B,n[1]=(T-g)/B,n[2]=(p-y)/B):h>b&&h>I?(B=Math.sqrt(1+h-b-I)*2,n[3]=(E-O)/B,n[0]=.25*B,n[1]=(p+y)/B,n[2]=(T+g)/B):b>I?(B=Math.sqrt(1+b-h-I)*2,n[3]=(T-g)/B,n[0]=(p+y)/B,n[1]=.25*B,n[2]=(E+O)/B):(B=Math.sqrt(1+I-h-b)*2,n[3]=(p-y)/B,n[0]=(T+g)/B,n[1]=(E+O)/B,n[2]=.25*B),n}function nM(n,r,i,s){var a=r[0],u=r[1],h=r[2],p=r[3],g=a+a,y=u+u,b=h+h,E=a*g,T=a*y,O=a*b,I=u*y,k=u*b,B=h*b,$=p*g,X=p*y,re=p*b,ye=s[0],me=s[1],We=s[2];return n[0]=(1-(I+B))*ye,n[1]=(T+re)*ye,n[2]=(O-X)*ye,n[3]=0,n[4]=(T-re)*me,n[5]=(1-(E+B))*me,n[6]=(k+$)*me,n[7]=0,n[8]=(O+X)*We,n[9]=(k-$)*We,n[10]=(1-(E+I))*We,n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n}function i2(n,r,i,s,a){var u=r[0],h=r[1],p=r[2],g=r[3],y=u+u,b=h+h,E=p+p,T=u*y,O=u*b,I=u*E,k=h*b,B=h*E,$=p*E,X=g*y,re=g*b,ye=g*E,me=s[0],We=s[1],at=s[2],ft=a[0],Qt=a[1],_t=a[2],en=(1-(k+$))*me,ct=(O+ye)*me,Hn=(I-re)*me,Gn=(O-ye)*We,rr=(1-(T+$))*We,Vi=(B+X)*We,ji=(I+re)*at,ai=(B-X)*at,Zo=(1-(T+k))*at;return n[0]=en,n[1]=ct,n[2]=Hn,n[3]=0,n[4]=Gn,n[5]=rr,n[6]=Vi,n[7]=0,n[8]=ji,n[9]=ai,n[10]=Zo,n[11]=0,n[12]=i[0]+ft-(en*ft+Gn*Qt+ji*_t),n[13]=i[1]+Qt-(ct*ft+rr*Qt+ai*_t),n[14]=i[2]+_t-(Hn*ft+Vi*Qt+Zo*_t),n[15]=1,n}function DE(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=i+i,p=s+s,g=a+a,y=i*h,b=s*h,E=s*p,T=a*h,O=a*p,I=a*g,k=u*h,B=u*p,$=u*g;return n[0]=1-E-I,n[1]=b+$,n[2]=T-B,n[3]=0,n[4]=b-$,n[5]=1-y-I,n[6]=O+k,n[7]=0,n[8]=T+B,n[9]=O-k,n[10]=1-y-E,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function xP(n,r,i,s,a,u,h){var p=1/(i-r),g=1/(a-s),y=1/(u-h);return n[0]=u*2*p,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u*2*g,n[6]=0,n[7]=0,n[8]=(i+r)*p,n[9]=(a+s)*g,n[10]=(h+u)*y,n[11]=-1,n[12]=0,n[13]=0,n[14]=h*u*2*y,n[15]=0,n}function rM(n,r,i,s,a){var u=1/Math.tan(r/2),h;return n[0]=u/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,a!=null&&a!==1/0?(h=1/(s-a),n[10]=(a+s)*h,n[14]=2*a*s*h):(n[10]=-1,n[14]=-2*s),n}var aC=rM;function CP(n,r,i,s,a){var u=1/Math.tan(r/2),h;return n[0]=u/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,a!=null&&a!==1/0?(h=1/(s-a),n[10]=a*h,n[14]=a*s*h):(n[10]=-1,n[14]=-s),n}function iM(n,r,i,s){var a=Math.tan(r.upDegrees*Math.PI/180),u=Math.tan(r.downDegrees*Math.PI/180),h=Math.tan(r.leftDegrees*Math.PI/180),p=Math.tan(r.rightDegrees*Math.PI/180),g=2/(h+p),y=2/(a+u);return n[0]=g,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=y,n[6]=0,n[7]=0,n[8]=-((h-p)*g*.5),n[9]=(a-u)*y*.5,n[10]=s/(i-s),n[11]=-1,n[12]=0,n[13]=0,n[14]=s*i/(i-s),n[15]=0,n}function t0(n,r,i,s,a,u,h){var p=1/(r-i),g=1/(s-a),y=1/(u-h);return n[0]=-2*p,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*g,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*y,n[11]=0,n[12]=(r+i)*p,n[13]=(a+s)*g,n[14]=(h+u)*y,n[15]=1,n}var lC=t0;function cC(n,r,i,s,a,u,h){var p=1/(r-i),g=1/(s-a),y=1/(u-h);return n[0]=-2*p,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*g,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=y,n[11]=0,n[12]=(r+i)*p,n[13]=(a+s)*g,n[14]=u*y,n[15]=1,n}function oM(n,r,i,s){var a,u,h,p,g,y,b,E,T,O,I=r[0],k=r[1],B=r[2],$=s[0],X=s[1],re=s[2],ye=i[0],me=i[1],We=i[2];return Math.abs(I-ye)<Ua.Ib&&Math.abs(k-me)<Ua.Ib&&Math.abs(B-We)<Ua.Ib?oC(n):(b=I-ye,E=k-me,T=B-We,O=1/Math.hypot(b,E,T),b*=O,E*=O,T*=O,a=X*T-re*E,u=re*b-$*T,h=$*E-X*b,O=Math.hypot(a,u,h),O?(O=1/O,a*=O,u*=O,h*=O):(a=0,u=0,h=0),p=E*h-T*u,g=T*a-b*h,y=b*u-E*a,O=Math.hypot(p,g,y),O?(O=1/O,p*=O,g*=O,y*=O):(p=0,g=0,y=0),n[0]=a,n[1]=p,n[2]=b,n[3]=0,n[4]=u,n[5]=g,n[6]=E,n[7]=0,n[8]=h,n[9]=y,n[10]=T,n[11]=0,n[12]=-(a*I+u*k+h*B),n[13]=-(p*I+g*k+y*B),n[14]=-(b*I+E*k+T*B),n[15]=1,n)}function wP(n,r,i,s){var a=r[0],u=r[1],h=r[2],p=s[0],g=s[1],y=s[2],b=a-i[0],E=u-i[1],T=h-i[2],O=b*b+E*E+T*T;O>0&&(O=1/Math.sqrt(O),b*=O,E*=O,T*=O);var I=g*T-y*E,k=y*b-p*T,B=p*E-g*b;return O=I*I+k*k+B*B,O>0&&(O=1/Math.sqrt(O),I*=O,k*=O,B*=O),n[0]=I,n[1]=k,n[2]=B,n[3]=0,n[4]=E*B-T*k,n[5]=T*I-b*B,n[6]=b*k-E*I,n[7]=0,n[8]=b,n[9]=E,n[10]=T,n[11]=0,n[12]=a,n[13]=u,n[14]=h,n[15]=1,n}function EP(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}function SP(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}function _P(n,r,i){return n[0]=r[0]+i[0],n[1]=r[1]+i[1],n[2]=r[2]+i[2],n[3]=r[3]+i[3],n[4]=r[4]+i[4],n[5]=r[5]+i[5],n[6]=r[6]+i[6],n[7]=r[7]+i[7],n[8]=r[8]+i[8],n[9]=r[9]+i[9],n[10]=r[10]+i[10],n[11]=r[11]+i[11],n[12]=r[12]+i[12],n[13]=r[13]+i[13],n[14]=r[14]+i[14],n[15]=r[15]+i[15],n}function uC(n,r,i){return n[0]=r[0]-i[0],n[1]=r[1]-i[1],n[2]=r[2]-i[2],n[3]=r[3]-i[3],n[4]=r[4]-i[4],n[5]=r[5]-i[5],n[6]=r[6]-i[6],n[7]=r[7]-i[7],n[8]=r[8]-i[8],n[9]=r[9]-i[9],n[10]=r[10]-i[10],n[11]=r[11]-i[11],n[12]=r[12]-i[12],n[13]=r[13]-i[13],n[14]=r[14]-i[14],n[15]=r[15]-i[15],n}function dC(n,r,i){return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n[4]=r[4]*i,n[5]=r[5]*i,n[6]=r[6]*i,n[7]=r[7]*i,n[8]=r[8]*i,n[9]=r[9]*i,n[10]=r[10]*i,n[11]=r[11]*i,n[12]=r[12]*i,n[13]=r[13]*i,n[14]=r[14]*i,n[15]=r[15]*i,n}function NE(n,r,i,s){return n[0]=r[0]+i[0]*s,n[1]=r[1]+i[1]*s,n[2]=r[2]+i[2]*s,n[3]=r[3]+i[3]*s,n[4]=r[4]+i[4]*s,n[5]=r[5]+i[5]*s,n[6]=r[6]+i[6]*s,n[7]=r[7]+i[7]*s,n[8]=r[8]+i[8]*s,n[9]=r[9]+i[9]*s,n[10]=r[10]+i[10]*s,n[11]=r[11]+i[11]*s,n[12]=r[12]+i[12]*s,n[13]=r[13]+i[13]*s,n[14]=r[14]+i[14]*s,n[15]=r[15]+i[15]*s,n}function sM(n,r){return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]&&n[4]===r[4]&&n[5]===r[5]&&n[6]===r[6]&&n[7]===r[7]&&n[8]===r[8]&&n[9]===r[9]&&n[10]===r[10]&&n[11]===r[11]&&n[12]===r[12]&&n[13]===r[13]&&n[14]===r[14]&&n[15]===r[15]}function AP(n,r){var i=n[0],s=n[1],a=n[2],u=n[3],h=n[4],p=n[5],g=n[6],y=n[7],b=n[8],E=n[9],T=n[10],O=n[11],I=n[12],k=n[13],B=n[14],$=n[15],X=r[0],re=r[1],ye=r[2],me=r[3],We=r[4],at=r[5],ft=r[6],Qt=r[7],_t=r[8],en=r[9],ct=r[10],Hn=r[11],Gn=r[12],rr=r[13],Vi=r[14],ji=r[15];return Math.abs(i-X)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(X))&&Math.abs(s-re)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(re))&&Math.abs(a-ye)<=glMatrix.EPSILON*Math.max(1,Math.abs(a),Math.abs(ye))&&Math.abs(u-me)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(me))&&Math.abs(h-We)<=glMatrix.EPSILON*Math.max(1,Math.abs(h),Math.abs(We))&&Math.abs(p-at)<=glMatrix.EPSILON*Math.max(1,Math.abs(p),Math.abs(at))&&Math.abs(g-ft)<=glMatrix.EPSILON*Math.max(1,Math.abs(g),Math.abs(ft))&&Math.abs(y-Qt)<=glMatrix.EPSILON*Math.max(1,Math.abs(y),Math.abs(Qt))&&Math.abs(b-_t)<=glMatrix.EPSILON*Math.max(1,Math.abs(b),Math.abs(_t))&&Math.abs(E-en)<=glMatrix.EPSILON*Math.max(1,Math.abs(E),Math.abs(en))&&Math.abs(T-ct)<=glMatrix.EPSILON*Math.max(1,Math.abs(T),Math.abs(ct))&&Math.abs(O-Hn)<=glMatrix.EPSILON*Math.max(1,Math.abs(O),Math.abs(Hn))&&Math.abs(I-Gn)<=glMatrix.EPSILON*Math.max(1,Math.abs(I),Math.abs(Gn))&&Math.abs(k-rr)<=glMatrix.EPSILON*Math.max(1,Math.abs(k),Math.abs(rr))&&Math.abs(B-Vi)<=glMatrix.EPSILON*Math.max(1,Math.abs(B),Math.abs(Vi))&&Math.abs($-ji)<=glMatrix.EPSILON*Math.max(1,Math.abs($),Math.abs(ji))}var TP=null,MP=null,o2,IE,aM,RE,kE,lM,LE,GE,hC,FE,cM,BE,ks,zE,UE,VE,jE,HE,uM,fC,$E,dM,WE,XE;function s2(n,r){var i;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=OP(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function OP(n,r){if(n){if(typeof n=="string")return hM(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return hM(n,r)}}function hM(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var wv=(o2=(0,z.b2)(),IE=(0,z.f3)(dn.MeshComponentManager),aM=(0,z.f3)(dn.GeometryComponentManager),RE=(0,z.f3)(dn.MaterialComponentManager),kE=(0,z.f3)(dn.CullableComponentManager),lM=(0,z.f3)(dn.TransformComponentManager),LE=(0,z.f3)(dn.HierarchyComponentManager),GE=(0,z.f3)(dn.Systems),hC=(0,z.t6)(dn.FrameGraphSystem),FE=(0,z.f3)(dn.RenderEngine),cM=(0,z.f3)(dn.ResourcePool),o2(BE=(ks=(XE=WE=function(){function n(){var r=this;(0,br.Z)(this,n),Mr(this,"mesh",zE,this),Mr(this,"geometry",UE,this),Mr(this,"material",VE,this),Mr(this,"cullable",jE,this),Mr(this,"transform",HE,this),Mr(this,"hierarchy",uM,this),Mr(this,"frameGraphSystem",fC,this),Mr(this,"engine",$E,this),Mr(this,"resourcePool",dM,this),this.modelCache={},this.setup=function(i,s,a){var u=i.createRenderTarget(s,"color buffer",{width:1,height:1,usage:xt.RENDER_ATTACHMENT|xt.SAMPLED|xt.COPY_SRC});a.data={output:s.write(i,u)}},this.execute=function(){var i=(0,no.Z)(fr().mark(function s(a,u,h){var p,g,y,b,E,T;return fr().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:p=a.getResourceNode(u.data.output),g=r.resourcePool.getOrCreateResource(p.resource),y=s2(h),I.prev=3,y.s();case 5:if((b=y.n()).done){I.next=11;break}return E=b.value,I.next=9,r.initView(E);case 9:I.next=5;break;case 11:I.next=16;break;case 13:I.prev=13,I.t0=I.catch(3),y.e(I.t0);case 16:return I.prev=16,y.f(),I.finish(16);case 19:T=r.engine.getCanvas(),g.resize({width:T.width,height:T.height}),r.engine.setScissor({enable:!1}),r.engine.clear({framebuffer:g,color:h[0].getClearColor(),depth:1}),r.engine.useFramebuffer(g,function(){var k=s2(h),B;try{for(k.s();!(B=k.n()).done;){var $=B.value;r.renderView($)}}catch(X){k.e(X)}finally{k.f()}});case 24:case"end":return I.stop()}},s,null,[[3,13,16,19]])}));return function(s,a,u){return i.apply(this,arguments)}}()}return(0,Br.Z)(n,[{key:"renderView",value:function(i){var s=i.getScene(),a=i.getCamera(),u=a.getViewTransform(),h=e0(xc(),a.getPerspective(),u);a.getFrustum().extractFromVPMatrix(h);var p=i.getViewport(),g=p.x,y=p.y,b=p.width,E=p.height;this.engine.viewport({x:g,y,width:b,height:E});var T=s2(s.getEntities()),O;try{for(T.s();!(O=T.n()).done;){var I=O.value;this.renderMesh(I,{camera:a,view:i,viewMatrix:u})}}catch(k){T.e(k)}finally{T.f()}}},{key:"renderMesh",value:function(i,s){var a=s.camera,u=s.view,h=s.viewMatrix,p=this.mesh.getComponentByEntity(i);if(!(!p||!p.visible)){var g=p.material,y=p.geometry;if(!(!y||y.dirty||!g)){var b=this.transform.getComponentByEntity(i),E=e0(xc(),h,b.worldTransform),T=u.getViewport(),O=T.width,I=T.height;g.setUniform({projectionMatrix:a.getPerspective(),modelViewMatrix:E,modelMatrix:b.worldTransform,viewMatrix:h,cameraPosition:a.getPosition(),u_viewport:[O,I]}),p.model&&(p.model.draw({uniforms:g.uniforms.reduce(function(k,B){return k[B.name]=B.data,k},{})}),g.uniforms.forEach(function(k){k.dirty=!1}),g.dirty=!1)}}}},{key:"initMesh",value:function(){var r=(0,no.Z)(fr().mark(function s(a,u){var h,p,g,y,b,E,T,O;return fr().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(h=this.mesh.getComponentByEntity(a),h){k.next=3;break}return k.abrupt("return");case 3:if(p=h.material,g=h.geometry,!(!g||g.dirty||!p)){k.next=7;break}return k.abrupt("return");case 7:if(h.model){k.next=24;break}if(y="m-".concat(p.entity,"-g-").concat(g.entity),!this.modelCache[y]){k.next=12;break}return h.model=this.modelCache[y],k.abrupt("return");case 12:return p.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),b=this.engine,E=b.createModel,T=b.createAttribute,O={vs:p.vertexShaderGLSL,fs:p.fragmentShaderGLSL,defines:p.defines,attributes:g.attributes.reduce(function(B,$){return $.data&&$.buffer&&(B[$.name]=T({buffer:$.buffer,attributes:$.attributes,arrayStride:$.arrayStride,stepMode:$.stepMode,divisor:$.stepMode==="vertex"?0:1})),B},{}),uniforms:p.uniforms.reduce(function(B,$){return B[$.name]=$.data,B},{}),scissor:{enable:!0,box:function(){return u.getViewport()}}},p.cull&&(O.cull=p.cull),p.depth&&(O.depth=p.depth),p.blend&&(O.blend=p.blend),g.indicesBuffer&&(O.elements=g.indicesBuffer),g.maxInstancedCount&&(O.instances=g.maxInstancedCount,O.count=g.vertexCount||3),k.next=22,E(O);case 22:h.model=k.sent,this.modelCache[y]=h.model;case 24:case"end":return k.stop()}},s,this)}));function i(s,a){return r.apply(this,arguments)}return i}()},{key:"initView",value:function(){var r=(0,no.Z)(fr().mark(function s(a){var u,h,p,g;return fr().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:u=a.getScene(),h=s2(u.getEntities()),b.prev=2,h.s();case 4:if((p=h.n()).done){b.next=10;break}return g=p.value,b.next=8,this.initMesh(g,a);case 8:b.next=4;break;case 10:b.next=15;break;case 12:b.prev=12,b.t0=b.catch(2),h.e(b.t0);case 15:return b.prev=15,h.f(),b.finish(15);case 18:case"end":return b.stop()}},s,this,[[2,12,15,18]])}));function i(s){return r.apply(this,arguments)}return i}()}]),n}(),WE.IDENTIFIER="Render Pass",XE),zE=Dr(ks.prototype,"mesh",[IE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UE=Dr(ks.prototype,"geometry",[aM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),VE=Dr(ks.prototype,"material",[RE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jE=Dr(ks.prototype,"cullable",[kE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),HE=Dr(ks.prototype,"transform",[lM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uM=Dr(ks.prototype,"hierarchy",[LE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fC=Dr(ks.prototype,"frameGraphSystem",[GE,hC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$E=Dr(ks.prototype,"engine",[FE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dM=Dr(ks.prototype,"resourcePool",[cM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ks))||BE),fM,pM,Hd,rd,ZE,Cc,Ev,YE,KE,qE,JE,QE,a2;function pC(n,r){var i;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=gM(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function gM(n,r){if(n){if(typeof n=="string")return eS(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return eS(n,r)}}function eS(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var gC={NONE:0,ENCODE:1,HIGHLIGHT:2},ty=(fM=(0,z.b2)(),pM=(0,z.f3)(dn.RenderEngine),Hd=(0,z.f3)(dn.ResourcePool),rd=(0,z.f3)(dn.RenderPassFactory),ZE=(0,z.f3)(dn.MeshComponentManager),fM(Cc=(Ev=(a2=QE=function(){function n(){var r=this;(0,br.Z)(this,n),Mr(this,"engine",YE,this),Mr(this,"resourcePool",KE,this),Mr(this,"renderPassFactory",qE,this),Mr(this,"mesh",JE,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(i,s,a){var u=i.createRenderTarget(s,"picking fbo",{width:1,height:1});a.data={output:s.write(i,u)},s.hasSideEffect=!0},this.execute=function(){var i=(0,no.Z)(fr().mark(function s(a,u,h){var p,g,y;return fr().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(r.views=h,!r.alreadyInRendering){E.next=3;break}return E.abrupt("return");case 3:p=pC(h);try{for(y=function(){var O=g.value,I=O.getViewport(),k=I.width,B=I.height;r.alreadyInRendering=!0;var $=a.getResourceNode(u.data.output);r.pickingFBO=r.resourcePool.getOrCreateResource($.resource),r.pickingFBO.resize({width:k,height:B}),r.engine.useFramebuffer(r.pickingFBO,function(){r.engine.clear({framebuffer:r.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var X=r.renderPassFactory(wv.IDENTIFIER),re=[],ye=O.getScene(),me=pC(ye.getEntities()),We;try{for(me.s();!(We=me.n()).done;){var at=We.value,ft=r.mesh.getComponentByEntity(at),Qt=ft.material;Qt.setUniform("u_PickingStage",gC.ENCODE),re.push(ft)}}catch(_t){me.e(_t)}finally{me.f()}X.renderView(O),re.forEach(function(_t){var en=_t.material;en.setUniform("u_PickingStage",gC.HIGHLIGHT)}),r.alreadyInRendering=!1})},p.s();!(g=p.n()).done;)y()}catch(T){p.e(T)}finally{p.f()}case 5:case"end":return E.stop()}},s)}));return function(s,a,u){return i.apply(this,arguments)}}(),this.pick=function(i,s){var a=i.x,u=i.y,h=r.engine,p=h.readPixels,g=h.useFramebuffer,y=s.getViewport(),b=y.width,E=y.height,T=a*window.devicePixelRatio,O=u*window.devicePixelRatio;if(!(T>b||T<0||O>E||O<0)){var I,k;return g(r.pickingFBO,function(){I=p({x:Math.round(T),y:Math.round(E-(u+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:r.pickingFBO}),(I[0]!==0||I[1]!==0||I[2]!==0)&&(k=ZT(I),r.highlightEnabled&&r.highlightPickedFeature(I,s))}),k}}}return(0,Br.Z)(n,[{key:"enableHighlight",value:function(i){this.highlightEnabled=i}},{key:"setHighlightColor",value:function(i){this.highlightColor=i}},{key:"highlightPickedFeature",value:function(i,s){if(i){var a=pC(s.getScene().getEntities()),u;try{for(a.s();!(u=a.n()).done;){var h=u.value,p=this.mesh.getComponentByEntity(h),g=p.material;g.setUniform("u_PickingStage",gC.HIGHLIGHT),g.setUniform("u_PickingColor",[i[0],i[1],i[2]]),g.setUniform("u_HighlightColor",this.highlightColor)}}catch(y){a.e(y)}finally{a.f()}}}}]),n}(),QE.IDENTIFIER="PixelPicking Pass",a2),YE=Dr(Ev.prototype,"engine",[pM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KE=Dr(Ev.prototype,"resourcePool",[Hd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qE=Dr(Ev.prototype,"renderPassFactory",[rd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),JE=Dr(Ev.prototype,"mesh",[ZE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ev))||Cc),tS,nS,rS,iS,ny,ry,ir,oS,sS,aS=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,l2=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,c2=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,lS=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Sv=(tS=(0,z.b2)(),nS=(0,z.f3)(dn.RenderEngine),rS=(0,z.f3)(dn.ResourcePool),tS(iS=(ny=(sS=oS=function n(){var r=this;(0,br.Z)(this,n),Mr(this,"engine",ry,this),Mr(this,"resourcePool",ir,this),this.model=void 0,this.setup=function(i,s,a){var u=i.getPass(wv.IDENTIFIER);if(u){var h=i.createRenderTarget(s,"render to screen",{width:1,height:1});a.data={input:s.read(u.data.output),output:s.write(i,h)}}},this.execute=function(){var i=(0,no.Z)(fr().mark(function s(a,u){var h,p,g,y,b,E,T;return fr().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(h=r.engine,p=h.createModel,g=h.createAttribute,y=h.createBuffer,r.model){I.next=6;break}return I.next=4,p({vs:r.engine.supportWebGPU?lS:l2,fs:r.engine.supportWebGPU?c2:aS,attributes:{a_Position:g({buffer:y({data:[-4,-4,4,-4,0,4],type:xt.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:b=I.sent,r.model=b;case 6:E=a.getResourceNode(u.data.input),T=r.resourcePool.getOrCreateResource(E.resource),r.engine.useFramebuffer(null,function(){r.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),r.model.draw({uniforms:{u_Texture:T}})});case 9:case"end":return I.stop()}},s)}));return function(s,a){return i.apply(this,arguments)}}(),this.tearDown=function(){r.model=void 0}},oS.IDENTIFIER="Copy Pass",sS),ry=Dr(ny.prototype,"engine",[nS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ir=Dr(ny.prototype,"resourcePool",[rS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny))||iS),u2,n0,Xp,r0,ao,$c,d2,i0,vC,_v,Hf,da,h2,mC=(u2=(0,z.b2)(),n0=(0,z.f3)(dn.Systems),Xp=(0,z.t6)(dn.FrameGraphSystem),r0=(0,z.f3)(dn.RenderPassFactory),ao=(0,z.f3)(dn.ConfigService),$c=(0,z.f3)(dn.ResourcePool),u2(d2=(i0=(h2=function(){function n(){(0,br.Z)(this,n),Mr(this,"frameGraphSystem",vC,this),Mr(this,"renderPassFactory",_v,this),Mr(this,"configService",Hf,this),Mr(this,"resourcePool",da,this)}return(0,Br.Z)(n,[{key:"execute",value:function(){var r=(0,no.Z)(fr().mark(function s(a){var u,h,p,g,y,b,E,T,O;return fr().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:u=this.renderPassFactory(wv.IDENTIFIER),h=u.setup,p=u.execute,g=this.frameGraphSystem.addPass(wv.IDENTIFIER,h,p),y=this.renderPassFactory(Sv.IDENTIFIER),b=y.setup,E=y.execute,T=y.tearDown,O=this.frameGraphSystem.addPass(Sv.IDENTIFIER,b,E,T),this.frameGraphSystem.present(O.data.output);case 5:case"end":return k.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(i,s){var a=this.renderPassFactory(ty.IDENTIFIER);return a.pick(i,s)}}]),n}(),h2),vC=Dr(i0.prototype,"frameGraphSystem",[n0,Xp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_v=Dr(i0.prototype,"renderPassFactory",[r0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hf=Dr(i0.prototype,"configService",[ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),da=Dr(i0.prototype,"resourcePool",[$c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i0))||d2);function f2(n){var r=wc();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function wc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var iy=function(n){(0,_o.Z)(i,n);var r=f2(i);function i(s){var a;return(0,br.Z)(this,i),a=r.call(this,s),a.parentID=void 0,Object.assign((0,Us.Z)(a),s),a}return i}(Vc),p2,oy,sy,yC,ay,o0,ly,id,cy,s0,cS=(p2=(0,z.b2)(),oy=(0,z.f3)(dn.HierarchyComponentManager),sy=(0,z.f3)(dn.TransformComponentManager),yC=(0,z.f3)(dn.MeshComponentManager),p2(ay=(o0=(s0=function(){function n(){(0,br.Z)(this,n),Mr(this,"hierarchy",ly,this),Mr(this,"transform",id,this),Mr(this,"mesh",cy,this)}return(0,Br.Z)(n,[{key:"execute",value:function(){var r=(0,no.Z)(fr().mark(function s(){return fr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return u.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var i=this;this.transform.forEach(function(s,a){(a.isDirty()||a.isLocalDirty())&&(i.setMeshAABBDirty(i.mesh.getComponentByEntity(s)),a.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var i=this;this.hierarchy.forEach(function(s,a){var u=i.transform.getComponentByEntity(s),h=i.transform.getComponentByEntity(a.parentID);u!==null&&h!==null&&u.updateTransformWithParent(h)})}},{key:"attach",value:function(i,s,a){this.hierarchy.contains(i)&&this.detach(i),this.hierarchy.create(i,{parentID:s});var u=this.mesh.getComponentByEntity(s);if(this.setMeshAABBDirty(u),u&&u.children.indexOf(i)===-1&&u.children.push(i),this.hierarchy.getCount()>1)for(var h=this.hierarchy.getCount()-1;h>0;--h)for(var p=this.hierarchy.getEntity(h),g=0;g<h;++g){var y=this.hierarchy.getComponent(g);if(y.parentID===p){this.hierarchy.moveItem(h,g),++h;break}}var b=this.hierarchy.getComponentByEntity(i),E=this.transform.getComponentByEntity(s);E===null&&(E=this.transform.create(s));var T=this.transform.getComponentByEntity(i);T===null&&(T=this.transform.create(i),E=this.transform.getComponentByEntity(s)),T.parent=E,!a&&E&&(T.matrixTransform(r2(xc(),E.worldTransform)),T.updateTransform()),E&&T.updateTransformWithParent(E)}},{key:"detach",value:function(i){var s=this.hierarchy.getComponentByEntity(i);if(s!==null){var a=this.transform.getComponentByEntity(i);a!==null&&(a.parent=null,a.applyTransform()),this.hierarchy.removeKeepSorted(i);var u=this.mesh.getComponentByEntity(s.parentID);if(u){var h=u.children.indexOf(i);u.children.splice(h,1)}this.setMeshAABBDirty(u)}}},{key:"detachChildren",value:function(i){var s=this.mesh.getComponentByEntity(i);s&&(s.children=[]);for(var a=0;a<this.hierarchy.getCount();){var u;if(((u=this.hierarchy.getComponent(a))===null||u===void 0?void 0:u.parentID)===i){var h=this.hierarchy.getEntity(a);this.detach(h)}else++a}}},{key:"setMeshAABBDirty",value:function(i){i&&(i.aabbDirty=!0)}}]),n}(),s0),ly=Dr(o0.prototype,"hierarchy",[oy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),id=Dr(o0.prototype,"transform",[sy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cy=Dr(o0.prototype,"mesh",[yC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o0))||ay);function ha(){var n=new Ua.WT(4);return Ua.WT!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function vM(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function $d(n,r,i){i=i*.5;var s=Math.sin(i);return n[0]=s*r[0],n[1]=s*r[1],n[2]=s*r[2],n[3]=Math.cos(i),n}function bC(n,r){var i=Math.acos(r[3])*2,s=Math.sin(i/2);return s>glMatrix.EPSILON?(n[0]=r[0]/s,n[1]=r[1]/s,n[2]=r[2]/s):(n[0]=1,n[1]=0,n[2]=0),i}function uS(n,r){var i=bM(n,r);return Math.acos(2*i*i-1)}function Wc(n,r,i){var s=r[0],a=r[1],u=r[2],h=r[3],p=i[0],g=i[1],y=i[2],b=i[3];return n[0]=s*b+h*p+a*y-u*g,n[1]=a*b+h*g+u*p-s*y,n[2]=u*b+h*y+s*g-a*p,n[3]=h*b-s*p-a*g-u*y,n}function mM(n,r,i){i*=.5;var s=r[0],a=r[1],u=r[2],h=r[3],p=Math.sin(i),g=Math.cos(i);return n[0]=s*g+h*p,n[1]=a*g+u*p,n[2]=u*g-a*p,n[3]=h*g-s*p,n}function dS(n,r,i){i*=.5;var s=r[0],a=r[1],u=r[2],h=r[3],p=Math.sin(i),g=Math.cos(i);return n[0]=s*g-u*p,n[1]=a*g+h*p,n[2]=u*g+s*p,n[3]=h*g-a*p,n}function xC(n,r,i){i*=.5;var s=r[0],a=r[1],u=r[2],h=r[3],p=Math.sin(i),g=Math.cos(i);return n[0]=s*g+a*p,n[1]=a*g-s*p,n[2]=u*g+h*p,n[3]=h*g-u*p,n}function hS(n,r){var i=r[0],s=r[1],a=r[2];return n[0]=i,n[1]=s,n[2]=a,n[3]=Math.sqrt(Math.abs(1-i*i-s*s-a*a)),n}function go(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=Math.sqrt(i*i+s*s+a*a),p=Math.exp(u),g=h>0?p*Math.sin(h)/h:0;return n[0]=i*g,n[1]=s*g,n[2]=a*g,n[3]=p*Math.cos(h),n}function CC(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=Math.sqrt(i*i+s*s+a*a),p=h>0?Math.atan2(h,u)/h:0;return n[0]=i*p,n[1]=s*p,n[2]=a*p,n[3]=.5*Math.log(i*i+s*s+a*a+u*u),n}function uy(n,r,i){return CC(n,r),v2(n,n,i),go(n,n),n}function Zp(n,r,i,s){var a=r[0],u=r[1],h=r[2],p=r[3],g=i[0],y=i[1],b=i[2],E=i[3],T,O,I,k,B;return O=a*g+u*y+h*b+p*E,O<0&&(O=-O,g=-g,y=-y,b=-b,E=-E),1-O>Ua.Ib?(T=Math.acos(O),I=Math.sin(T),k=Math.sin((1-s)*T)/I,B=Math.sin(s*T)/I):(k=1-s,B=s),n[0]=k*a+B*g,n[1]=k*u+B*y,n[2]=k*h+B*b,n[3]=k*p+B*E,n}function wC(n){var r=glMatrix.RANDOM(),i=glMatrix.RANDOM(),s=glMatrix.RANDOM(),a=Math.sqrt(1-r),u=Math.sqrt(r);return n[0]=a*Math.sin(2*Math.PI*i),n[1]=a*Math.cos(2*Math.PI*i),n[2]=u*Math.sin(2*Math.PI*s),n[3]=u*Math.cos(2*Math.PI*s),n}function fS(n,r){var i=r[0],s=r[1],a=r[2],u=r[3],h=i*i+s*s+a*a+u*u,p=h?1/h:0;return n[0]=-i*p,n[1]=-s*p,n[2]=-a*p,n[3]=u*p,n}function oN(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=r[3],n}function PP(n,r){var i=r[0]+r[4]+r[8],s;if(i>0)s=Math.sqrt(i+1),n[3]=.5*s,s=.5/s,n[0]=(r[5]-r[7])*s,n[1]=(r[6]-r[2])*s,n[2]=(r[1]-r[3])*s;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[a*3+a]&&(a=2);var u=(a+1)%3,h=(a+2)%3;s=Math.sqrt(r[a*3+a]-r[u*3+u]-r[h*3+h]+1),n[a]=.5*s,s=.5/s,n[3]=(r[u*3+h]-r[h*3+u])*s,n[u]=(r[u*3+a]+r[a*3+u])*s,n[h]=(r[h*3+a]+r[a*3+h])*s}return n}function pS(n,r,i,s){var a=.5*Math.PI/180;r*=a,i*=a,s*=a;var u=Math.sin(r),h=Math.cos(r),p=Math.sin(i),g=Math.cos(i),y=Math.sin(s),b=Math.cos(s);return n[0]=u*g*b-h*p*y,n[1]=h*p*b+u*g*y,n[2]=h*g*y-u*p*b,n[3]=h*g*b+u*p*y,n}function DP(n){return"quat("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}var yM=jx,dy=Qb,Wd=Hx,NP=yv,gS=$x,g2=Wc,v2=Wx,bM=ve,IP=Qe,vS=Zx,xM=null,CM=m,RP=null,a0=Y,kP=ar,EC=kr,LP=function(){var n=Ot.Ue(),r=Ot.al(1,0,0),i=Ot.al(0,1,0);return function(s,a,u){var h=Ot.AK(a,u);return h<-.999999?(Ot.kC(n,r,a),Ot.Zh(n)<1e-6&&Ot.kC(n,i,a),Ot.Fv(n,n),$d(s,n,Math.PI),s):h>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(Ot.kC(n,a,u),s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=1+h,a0(s,s))}}(),GP=function(){var n=ha(),r=ha();return function(i,s,a,u,h,p){return Zp(n,s,h,p),Zp(r,a,u,p),Zp(i,n,r,2*p*(1-p)),i}}(),Yi=function(){var n=qo.Ue();return function(r,i,s,a){return n[0]=s[0],n[3]=s[1],n[6]=s[2],n[1]=a[0],n[4]=a[1],n[7]=a[2],n[2]=-i[0],n[5]=-i[1],n[8]=-i[2],a0(r,PP(r,n))}}();function l0(n){var r=mS();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function mS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var c0=function(n){(0,_o.Z)(i,n);var r=l0(i);function i(s){var a;return(0,br.Z)(this,i),a=r.call(this,s),a.dirtyFlag=void 0,a.localDirtyFlag=void 0,a.parent=null,a.localPosition=Ot.al(0,0,0),a.localRotation=dy(0,0,0,1),a.localScale=Ot.al(1,1,1),a.localTransform=xc(),a.position=Ot.al(0,0,0),a.rotation=dy(0,0,0,1),a.scaling=Ot.al(1,1,1),a.worldTransform=xc(),a.matrixTransform=function(){var u=xc();return function(h){e0(u,a.getLocalTransform(),h),Cv(a.localScale,u),xv(a.localPosition,u),ey(a.localRotation,u)}}(),a.rotateRollPitchYaw=function(){var u=ha(),h=ha(),p=ha();return function(g,y,b){a.setDirty(),pS(u,g,0,0),pS(h,0,y,0),pS(p,0,0,b),Wc(a.localRotation,u,a.localRotation),Wc(a.localRotation,a.localRotation,h),Wc(a.localRotation,p,a.localRotation),a0(a.localRotation,a.localRotation)}}(),a.lerp=function(){var u=Ot.Ue(),h=ha(),p=Ot.Ue(),g=Ot.Ue(),y=ha(),b=Ot.Ue();return function(E,T,O){a.setDirty(),Cv(u,E.worldTransform),xv(p,E.worldTransform),ey(h,E.worldTransform),Cv(g,T.worldTransform),xv(b,T.worldTransform),ey(y,T.worldTransform),Ot.t7(a.localScale,u,g,O),Zp(a.localRotation,h,y,O),Ot.t7(a.localPosition,p,b,O)}}(),a.translate=function(){var u=Ot.Ue();return function(h){return Ot.IH(u,a.getPosition(),h),a.setPosition(u),a.setDirty(!0),(0,Us.Z)(a)}}(),a.translateLocal=function(){return function(u){return Ot.VC(u,u,a.localRotation),Ot.IH(a.localPosition,a.localPosition,u),a.setLocalDirty(!0),(0,Us.Z)(a)}}(),a.setPosition=function(){var u=xc();return function(h){return a.position=h,a.setLocalDirty(!0),a.parent===null?Ot.JG(a.localPosition,h):(n2(u,a.parent.worldTransform),r2(u,u),Ot.fF(a.localPosition,h,u)),(0,Us.Z)(a)}}(),a.rotate=function(){var u=ha();return function(h){if(a.parent===null)Wc(a.localRotation,a.localRotation,h),a0(a.localRotation,a.localRotation);else{var p=a.getRotation(),g=a.parent.getRotation();Wd(u,g),fS(u,u),Wc(u,u,h),Wc(a.localRotation,h,p),a0(a.localRotation,a.localRotation)}return a.setLocalDirty(),(0,Us.Z)(a)}}(),a.rotateLocal=function(){return function(u){return Wc(a.localRotation,a.localRotation,u),a0(a.localRotation,a.localRotation),a.setLocalDirty(!0),(0,Us.Z)(a)}}(),a.setRotation=function(){var u=ha();return function(h){return a.parent===null?Wd(a.localRotation,h):(Wd(u,a.parent.getRotation()),fS(u,u),Wd(a.localRotation,u),g2(a.localRotation,a.localRotation,h)),a.setLocalDirty(!0),(0,Us.Z)(a)}}(),a}return(0,Br.Z)(i,[{key:"setLocalPosition",value:function(a){Ot.JG(this.localPosition,a),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(a){Ot.JG(this.localScale,a),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(a){return Wd(this.localRotation,a),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;a?this.dirtyFlag|=i.DIRTY:this.dirtyFlag&=~i.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;a?(this.localDirtyFlag|=i.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~i.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(n2(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(a){e0(this.worldTransform,a.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),Cv(this.localScale,this.worldTransform),xv(this.localPosition,this.worldTransform),ey(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=Ot.al(0,0,0),this.localRotation=dy(0,0,0,1),this.localScale=Ot.al(1,1,1)}},{key:"scaleLocal",value:function(a){return this.setLocalDirty(),Ot.Jp(this.localScale,this.localScale,a),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(nM(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return xv(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return ey(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return Cv(this.scaling,this.worldTransform),this.scaling}}]),i}(Vc);c0.DIRTY=1<<0;var SC=M(84879),_C,AC,$f,$e,zn,mr,od=(_C=(0,z.b2)(),AC=(0,z.f3)(dn.RenderEngine),_C($f=($e=(mr=function(){function n(){(0,br.Z)(this,n),Mr(this,"engine",zn,this),this.resourcePool={}}return(0,Br.Z)(n,[{key:"getOrCreateResource",value:function(i){if(!this.resourcePool[i.name]){var s=i.descriptor,a=s.width,u=s.height,h=s.usage;this.resourcePool[i.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:a,height:u,wrapS:xt.CLAMP_TO_EDGE,wrapT:xt.CLAMP_TO_EDGE,usage:h})})}return this.resourcePool[i.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),n}(),mr),zn=Dr($e.prototype,"engine",[AC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e))||$f);function fa(n){var r=Qs();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function Qs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var m2=function(n){(0,_o.Z)(i,n);var r=fa(i);function i(s){var a;return(0,br.Z)(this,i),a=r.call(this,s),a.name=void 0,a.name=s.name||"",a}return i}(Vc),kl,u0,d0,sd=(kl=(0,z.b2)(),kl(u0=(d0=function(){function n(){(0,br.Z)(this,n),this.config=void 0}return(0,Br.Z)(n,[{key:"get",value:function(){return this.config}},{key:"set",value:function(i){this.config=i}}]),n}(),d0))||u0),hy,TC,MC;(function(n){n.PANSTART="PANSTART",n.PANEND="PANEND",n.PANMOVE="PANMOVE",n.PINCH="PINCH",n.KEYDOWN="KEYDOWN",n.KEYUP="KEYUP",n.HOVER="HOVER"})(MC||(MC={}));var wM=(hy=(0,z.b2)(),hy(TC=function(){function n(){(0,br.Z)(this,n)}return(0,Br.Z)(n,[{key:"listen",value:function(i){}},{key:"on",value:function(i,s){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),n}())||TC);function EM(n){var r=0;switch(n){case"vec2":case"ivec2":r=2;break;case"vec3":case"ivec3":r=3;break;case"vec4":case"ivec4":case"mat2":r=4;break;case"mat3":r=9;break;case"mat4":r=16;break;default:}return r}var SM=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function yS(n){var r={};return n=n.replace(SM,function(i,s,a){var u=a.split(":"),h=u[0].trim(),p="";switch(u.length>1&&(p=u[1].trim()),s){case"bool":p=p==="true";break;case"float":case"int":p=Number(p);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":p?p=p.replace("[","").replace("]","").split(",").reduce(function(g,y){return g.push(Number(y.trim())),g},[]):p=new Array(EM(s)).fill(0);break;default:}return r[h]=p,"uniform ".concat(s," ").concat(h,`;
`)}),{content:n,uniforms:r}}function _M(n){return n.filter(function(r,i,s){return s.indexOf(r)===i})}var bS,y2,xS;function OC(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function Yp(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?OC(Object(i),!0).forEach(function(s){(0,Bt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):OC(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var AM=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,Vr=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,dr=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,TM=/precision\s+(high|low|medium)p\s+float/,MM=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,CS=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,b2=(bS=(0,z.b2)(),bS(y2=(xS=function(){function n(){(0,br.Z)(this,n),this.moduleCache={},this.rawContentCache={}}return(0,Br.Z)(n,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:Vr,fs:AM}),this.registerModule("sdf2d",{vs:"",fs:dr})}},{key:"registerModule",value:function(i,s){if(!this.rawContentCache[i]){var a=s.vs,u=a===void 0?"":a,h=s.fs,p=h===void 0?"":h,g=s.uniforms,y=yS(u),b=y.content,E=y.uniforms,T=yS(p),O=T.content,I=T.uniforms;this.rawContentCache[i]={fs:O,uniforms:Yp(Yp(Yp({},E),I),g),vs:b}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(i){var s=this;if(this.moduleCache[i])return this.moduleCache[i];var a=this.rawContentCache[i].vs||"",u=this.rawContentCache[i].fs||"",h=this.processModule(a,[],"vs"),p=h.content,g=h.includeList,y=this.processModule(u,[],"fs"),b=y.content,E=y.includeList,T=b,O=_M(g.concat(E).concat(i)).reduce(function(I,k){return Yp(Yp({},I),s.rawContentCache[k].uniforms)},{});return TM.test(b)||(T=MM+b),this.moduleCache[i]={fs:T.trim(),uniforms:O,vs:p.trim()},this.moduleCache[i]}},{key:"processModule",value:function(i,s,a){var u=this,h=i.replace(CS,function(p,g){var y=g.split(" "),b=y[0].replace(/"/g,"");if(s.indexOf(b)>-1)return"";var E=u.rawContentCache[b][a];s.push(b);var T=u.processModule(E||"",s,a),O=T.content;return O});return{content:h,includeList:s}}}]),n}(),xS))||y2),Gh=new z.W2,x2=(0,SC.Z)(Gh,!1),FP=function(r){var i=x2.lazyInject(r);return function(s,a,u){i.call(this,s,a),u&&(u.initializer=function(){return s[a]})}},wS=function(r){var i=x2.lazyMultiInject(r);return function(s,a,u){i.call(this,s,a),u&&(u.initializer=function(){return s[a]})}};Gh.bind(dn.ShaderModuleService).to(b2).inSingletonScope(),Gh.bind(dn.NameComponentManager).toConstantValue(new jf(m2)),Gh.bind(dn.HierarchyComponentManager).toConstantValue(new jf(iy)),Gh.bind(dn.TransformComponentManager).toConstantValue(new jf(c0)),Gh.bind(dn.MeshComponentManager).toConstantValue(new jf(wE)),Gh.bind(dn.CullableComponentManager).toConstantValue(new jf(zT)),Gh.bind(dn.GeometryComponentManager).toConstantValue(new jf(IT)),Gh.bind(dn.MaterialComponentManager).toConstantValue(new jf(LT));function C2(){var n=new z.W2;return n.parent=Gh,n.bind(dn.Systems).to(cS).inSingletonScope().whenTargetNamed(dn.SceneGraphSystem),n.bind(dn.Systems).to(mv).inSingletonScope().whenTargetNamed(dn.FrameGraphSystem),n.bind(dn.Systems).to(YT).inSingletonScope().whenTargetNamed(dn.MeshSystem),n.bind(dn.Systems).to(RT).inSingletonScope().whenTargetNamed(dn.GeometrySystem),n.bind(dn.Systems).to(GT).inSingletonScope().whenTargetNamed(dn.MaterialSystem),n.bind(dn.Systems).to(mC).inSingletonScope().whenTargetNamed(dn.RendererSystem),n.bind(dn.ResourcePool).to(od).inSingletonScope(),n.bind(dn.ConfigService).to(sd).inSingletonScope(),n.bind(dn.InteractorService).to(wM).inSingletonScope(),n.bind(dn.RenderPass).to(wv).inSingletonScope().whenTargetNamed(wv.IDENTIFIER),n.bind(dn.RenderPass).to(Sv).inSingletonScope().whenTargetNamed(Sv.IDENTIFIER),n.bind(dn.RenderPass).to(ty).inSingletonScope().whenTargetNamed(ty.IDENTIFIER),n.bind(dn.RenderPassFactory).toFactory(function(r){return function(i){return r.container.getNamed(dn.RenderPass,i)}}),n}function nl(n){for(var r=new qx,i=Ot.al(n[0],n[1],n[2]),s=Ot.al(n[0],n[1],n[2]),a=3;a<n.length;){var u=n[a++],h=n[a++],p=n[a++];u<i[0]&&(i[0]=u),h<i[1]&&(i[1]=h),p<i[2]&&(i[2]=p),u>s[0]&&(s[0]=u),h>s[1]&&(s[1]=h),p>s[2]&&(s[2]=p)}return r.setMinMax(i,s),r}var nc=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),OM=Ot.Ue(),PM=null,DM=Ot.Ue(),NM=Ot.Ue(),w2=Ot.Ue(),IM=Ot.Ue(),RM=Ot.Ue(),kM=null,ES=M(59518),SS=M(26199),_S=M(14156),LM=M(71468),E2=M(48871),BP=M(9871),PC;(function(n){n.Normal="normal",n.PostProcessing="post-processing"})(PC||(PC={}));var zP=M(25612),AS=M(92777),rl=M(20159),fy=M(61622),py=M(20499),h0=M(64851),Xd;(function(n){n.Void="Void",n.Boolean="Boolean",n.Float="Float",n.Uint32="Uint32",n.Int32="Int32",n.Vector="Vector",n.Vector2Float="vec2<f32>",n.Vector3Float="vec3<f32>",n.Vector4Float="vec4<f32>",n.Vector2Boolean="vec2<bool>",n.Vector3Boolean="vec3<bool>",n.Vector4Boolean="vec4<bool>",n.Vector2Uint="vec2<u32>",n.Vector3Uint="vec3<u32>",n.Vector4Uint="vec4<u32>",n.Vector2Int="vec2<i32>",n.Vector3Int="vec3<i32>",n.Vector4Int="vec4<i32>",n.Matrix="Matrix",n.Matrix3x3Float="mat3x3<f32>",n.Matrix4x4Float="mat4x4<i32>",n.Struct="Struct",n.FloatArray="Float[]",n.Vector4FloatArray="vec4<f32>[]"})(Xd||(Xd={}));var S2;(function(n){n.Program="Program",n.Identifier="Identifier",n.VariableDeclaration="VariableDeclaration",n.BlockStatement="BlockStatement",n.ReturnStatement="ReturnStatement",n.FunctionDeclaration="FunctionDeclaration",n.VariableDeclarator="VariableDeclarator",n.AssignmentExpression="AssignmentExpression",n.LogicalExpression="LogicalExpression",n.BinaryExpression="BinaryExpression",n.ArrayExpression="ArrayExpression",n.UnaryExpression="UnaryExpression",n.UpdateExpression="UpdateExpression",n.FunctionExpression="FunctionExpression",n.MemberExpression="MemberExpression",n.ConditionalExpression="ConditionalExpression",n.ExpressionStatement="ExpressionStatement",n.CallExpression="CallExpression",n.NumThreadStatement="NumThreadStatement",n.StorageStatement="StorageStatement",n.DoWhileStatement="DoWhileStatement",n.WhileStatement="WhileStatement",n.ForStatement="ForStatement",n.BreakStatement="BreakStatement",n.ContinueStatement="ContinueStatement",n.IfStatement="IfStatement",n.ImportedFunctionStatement="ImportedFunctionStatement"})(S2||(S2={}));var Fh;(function(n){n.Input="Input",n.Output="Output",n.Uniform="Uniform",n.Workgroup="Workgroup",n.UniformConstant="UniformConstant",n.Image="Image",n.StorageBuffer="StorageBuffer",n.Private="Private",n.Function="Function"})(Fh||(Fh={}));var Av;(function(n){n.GLSL100="GLSL100",n.GLSL450="GLSL450",n.WGSL="WGSL"})(Av||(Av={}));var TS="__DefineValuePlaceholder__";function _2(n){return typeof n=="number"}function il(n){return n===void 0?0:n>360||n<-360?n%360:n}function Kp(n,r,i){return _2(n)?Ot.al(n,r,i):n.length===3?Ot.d9(n):Ot.al(n[0],n[1],n[2])}var MS=function(){function n(r,i){(0,br.Z)(this,n),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=r,this.matrix=KT(i.matrix),this.right=Ot.d9(i.right),this.up=Ot.d9(i.up),this.forward=Ot.d9(i.forward),this.position=Ot.d9(i.position),this.focalPoint=Ot.d9(i.focalPoint),this.distanceVector=Ot.d9(i.distanceVector),this.azimuth=i.azimuth,this.elevation=i.elevation,this.roll=i.roll,this.relAzimuth=i.relAzimuth,this.relElevation=i.relElevation,this.relRoll=i.relRoll,this.dollyingStep=i.dollyingStep,this.distance=i.distance}return(0,Br.Z)(n,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(i){i.matrix=n2(i.matrix,this.matrix),i.right=Ot.JG(i.right,this.right),i.up=Ot.JG(i.up,this.up),i.forward=Ot.JG(i.forward,this.forward),i.position=Ot.JG(i.position,this.position),i.focalPoint=Ot.JG(i.focalPoint,this.focalPoint),i.distanceVector=Ot.JG(i.distanceVector,this.distanceVector),i.azimuth=this.azimuth,i.elevation=this.elevation,i.roll=this.roll,i.relAzimuth=this.relAzimuth,i.relElevation=this.relElevation,i.relRoll=this.relRoll,i.dollyingStep=this.dollyingStep,i.distance=this.distance}}]),n}(),rc,OS,DC,pa,PS,DS,Bh,Bo;(function(n){n.ORBITING="ORBITING",n.EXPLORING="EXPLORING",n.TRACKING="TRACKING"})(Bo||(Bo={}));var Tv;(function(n){n.DEFAULT="DEFAULT",n.ROTATIONAL="ROTATIONAL",n.TRANSLATIONAL="TRANSLATIONAL",n.CINEMATIC="CINEMATIC"})(Tv||(Tv={}));var f0;(function(n){n.ORTHOGRAPHIC="ORTHOGRAPHIC",n.PERSPECTIVE="PERSPECTIVE"})(f0||(f0={}));var zh=Math.PI/180,Wf=180/Math.PI,NC=(rc=(0,z.b2)(),OS=(0,z.f3)(dn.InteractorService),rc(DC=(pa=(Bh=DS=function(){function n(){(0,br.Z)(this,n),this.matrix=xc(),this.right=Ot.al(1,0,0),this.up=Ot.al(0,1,0),this.forward=Ot.al(0,0,1),this.position=Ot.al(0,0,1),this.focalPoint=Ot.al(0,0,0),this.distanceVector=Ot.al(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,Mr(this,"interactor",PS,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=xc(),this.view=void 0,this.following=void 0,this.type=Bo.EXPLORING,this.trackingMode=Tv.DEFAULT,this.projectionMode=f0.PERSPECTIVE,this.frustum=new HT,this.landmarks=[],this.landmarkAnimationID=void 0}return(0,Br.Z)(n,[{key:"clone",value:function(){var i=new n;return i.setType(this.type,void 0),i.interactor=this.interactor,i}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(i,s){return this.type=i,this.type===Bo.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Bo.TRACKING&&s!==void 0&&this.setTrackingMode(s),this}},{key:"setProjectionMode",value:function(i){return this.projectionMode=i,this}},{key:"setTrackingMode",value:function(i){if(this.type!==Bo.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=i,this}},{key:"setWorldRotation",value:function(i){this.rotateWorld=i,this._getAngles()}},{key:"getViewTransform",value:function(){return r2(xc(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(i){return this.matrix=i,this._update(),this}},{key:"setAspect",value:function(i){return this.setPerspective(this.near,this.far,this.fov,i),this}},{key:"setViewOffset",value:function(i,s,a,u,h,p){return this.aspect=i/s,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=i,this.view.fullHeight=s,this.view.offsetX=a,this.view.offsetY=u,this.view.width=h,this.view.height=p,this.projectionMode===f0.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===f0.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(i,s,a,u){return this.projectionMode=f0.PERSPECTIVE,this.fov=a,this.near=i,this.far=s,this.aspect=u,aC(this.perspective,this.fov*zh,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(i,s,a,u,h,p){this.projectionMode=f0.ORTHOGRAPHIC,this.rright=s,this.left=i,this.top=a,this.bottom=u,this.near=h,this.far=p;var g=(this.rright-this.left)/(2*this.zoom),y=(this.top-this.bottom)/(2*this.zoom),b=(this.rright+this.left)/2,E=(this.top+this.bottom)/2,T=b-g,O=b+g,I=E+y,k=E-y;if(this.view!==void 0&&this.view.enabled){var B=(this.rright-this.left)/this.view.fullWidth/this.zoom,$=(this.top-this.bottom)/this.view.fullHeight/this.zoom;T+=B*this.view.offsetX,O=T+B*this.view.width,I-=$*this.view.offsetY,k=I-$*this.view.height}return lC(this.perspective,T,O,I,k,h,p),this}},{key:"setPosition",value:function(i,s,a){return this._setPosition(i,s,a),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(i,s,a){var u=Ot.al(0,1,0);if(this.focalPoint=Kp(i,s,a),this.trackingMode===Tv.CINEMATIC){var h=Ot.$X(Ot.Ue(),this.focalPoint,this.position);i=h[0],s=h[1],a=h[2];var p=Ot.kE(h),g=Math.asin(s/p)*Wf,y=90+Math.atan2(a,i)*Wf,b=xc();eM(b,b,y*zh),QT(b,b,g*zh),u=Ot.fF(Ot.Ue(),[0,1,0],b)}return r2(this.matrix,oM(xc(),this.position,this.focalPoint,u)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(i){if(!(this.distance===i||i<0)){this.distance=i,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var s=Ot.Ue();i=this.distance;var a=this.forward,u=this.focalPoint;return s[0]=i*a[0]+u[0],s[1]=i*a[1]+u[1],s[2]=i*a[2]+u[2],this._setPosition(s),this}}},{key:"setMaxDistance",value:function(i){return this.maxDistance=i,this}},{key:"setMinDistance",value:function(i){return this.minDistance=i,this}},{key:"changeAzimuth",value:function(i){return this.setAzimuth(this.azimuth+i),this}},{key:"changeElevation",value:function(i){return this.setElevation(this.elevation+i),this}},{key:"changeRoll",value:function(i){return this.setRoll(this.roll+i),this}},{key:"setAzimuth",value:function(i){return this.azimuth=il(i),this.computeMatrix(),this._getAxes(),this.type===Bo.ORBITING||this.type===Bo.EXPLORING?this._getPosition():this.type===Bo.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(i){return this.elevation=il(i),this.computeMatrix(),this._getAxes(),this.type===Bo.ORBITING||this.type===Bo.EXPLORING?this._getPosition():this.type===Bo.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(i){return this.roll=il(i),this.computeMatrix(),this._getAxes(),this.type===Bo.ORBITING||this.type===Bo.EXPLORING?this._getPosition():this.type===Bo.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(i,s,a){if(this.type===Bo.EXPLORING){i=il(i),s=il(s),a=il(a);var u=$d(ha(),[1,0,0],(this.rotateWorld?1:-1)*s*zh),h=$d(ha(),[0,1,0],(this.rotateWorld?1:-1)*i*zh),p=$d(ha(),[0,0,1],a*zh),g=Wc(ha(),h,u);g=Wc(ha(),g,p);var y=DE(xc(),g);Qm(this.matrix,this.matrix,[0,0,-this.distance]),e0(this.matrix,this.matrix,y),Qm(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+s)>90)return;this.relElevation=il(s),this.relAzimuth=il(i),this.relRoll=il(a),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Bo.ORBITING||this.type===Bo.EXPLORING?this._getPosition():this.type===Bo.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(i,s){var a=Kp(i,s,0),u=Ot.d9(this.position);return Ot.IH(u,u,Ot.bA(Ot.Ue(),this.right,a[0])),Ot.IH(u,u,Ot.bA(Ot.Ue(),this.up,a[1])),this._setPosition(u),this}},{key:"dolly",value:function(i){var s=this.forward,a=Ot.d9(this.position),u=i*this.dollyingStep,h=this.distance+i*this.dollyingStep;return u=Math.max(Math.min(h,this.maxDistance),this.minDistance)-this.distance,a[0]+=u*s[0],a[1]+=u*s[1],a[2]+=u*s[2],this._setPosition(a),this.type===Bo.ORBITING||this.type===Bo.EXPLORING?this._getDistance():this.type===Bo.TRACKING&&Ot.IH(this.focalPoint,a,this.distanceVector),this}},{key:"createLandmark",value:function(i,s){var a=this.clone();a.setPosition(s.position),a.setFocalPoint(s.focalPoint),s.roll!==void 0&&a.setRoll(s.roll);var u=new MS(i,a);return this.landmarks.push(u),u}},{key:"setLandmark",value:function(i){var s=new MS(i,this);return this.landmarks.push(s),this}},{key:"gotoLandmark",value:function(i){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,u=this.landmarks.find(function(E){return E.name===i});if(u){if(a===0){u.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var h=u.getPosition(),p=u.getFocalPoint(),g=u.getRoll(),y,b=function E(T){y===void 0&&(y=T);var O=T-y,I=(1-Math.cos(O/a*Math.PI))/2,k=Ot.Ue(),B=Ot.Ue(),$=0;Ot.t7(k,s.focalPoint,p,I),Ot.t7(B,s.position,h,I),$=s.roll*(1-I)+g*I,s.setFocalPoint(k),s.setPosition(B),s.setRoll($),s.computeMatrix();var X=Ot.TK(k,p)+Ot.TK(B,h);if(!(X>.01)){s.setFocalPoint(k),s.setPosition(B),s.setRoll($),s.computeMatrix(),s.interactor.connect();return}O<a&&(s.landmarkAnimationID=window.requestAnimationFrame(E))};window.requestAnimationFrame(b)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var i,s,a=$d(ha(),[0,0,1],this.roll*zh);oC(this.matrix),i=$d(ha(),[1,0,0],(this.rotateWorld&&this.type!==Bo.TRACKING||this.type===Bo.TRACKING?1:-1)*this.elevation*zh),s=$d(ha(),[0,1,0],(this.rotateWorld&&this.type!==Bo.TRACKING||this.type===Bo.TRACKING?1:-1)*this.azimuth*zh);var u=Wc(ha(),s,i);u=Wc(ha(),u,a);var h=DE(xc(),u);this.type===Bo.ORBITING||this.type===Bo.EXPLORING?(Qm(this.matrix,this.matrix,this.focalPoint),e0(this.matrix,this.matrix,h),Qm(this.matrix,this.matrix,[0,0,this.distance])):this.type===Bo.TRACKING&&(Qm(this.matrix,this.matrix,this.position),e0(this.matrix,this.matrix,h))}},{key:"_setPosition",value:function(i,s,a){this.position=Kp(i,s,a);var u=this.matrix;u[12]=this.position[0],u[13]=this.position[1],u[14]=this.position[2],u[15]=1}},{key:"_getAxes",value:function(){Ot.JG(this.right,Kp(At(qg(),[1,0,0,0],this.matrix))),Ot.JG(this.up,Kp(At(qg(),[0,1,0,0],this.matrix))),Ot.JG(this.forward,Kp(At(qg(),[0,0,1,0],this.matrix))),Ot.Fv(this.right,this.right),Ot.Fv(this.up,this.up),Ot.Fv(this.forward,this.forward)}},{key:"_getAngles",value:function(){var i=this.distanceVector[0],s=this.distanceVector[1],a=this.distanceVector[2],u=Ot.kE(this.distanceVector);if(u===0){this.elevation=0,this.azimuth=0;return}this.type===Bo.TRACKING?(this.elevation=Math.asin(s/u)*Wf,this.azimuth=Math.atan2(-i,-a)*Wf):this.rotateWorld?(this.elevation=Math.asin(s/u)*Wf,this.azimuth=Math.atan2(-i,-a)*Wf):(this.elevation=-Math.asin(s/u)*Wf,this.azimuth=-Math.atan2(-i,-a)*Wf)}},{key:"_getPosition",value:function(){Ot.JG(this.position,Kp(At(qg(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Ot.kK(this.distanceVector,[0,0,-this.distance],qo.xO(qo.Ue(),this.matrix)),Ot.IH(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Ot.$X(Ot.Ue(),this.focalPoint,this.position),this.distance=Ot.kE(this.distanceVector),this.dollyingStep=this.distance/100}}]),n}(),DS.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},Bh),PS=Dr(pa.prototype,"interactor",[OS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pa))||DC),IC,RC,kC,Xf,A2,qp,Uh,Zd=(IC=(0,z.b2)(),RC=(0,z.f3)(dn.GeometryComponentManager),IC(kC=(Xf=(Uh=qp=function(){function n(){(0,br.Z)(this,n),this.config=void 0,Mr(this,"geometry",A2,this),this.entity=void 0,this.component=void 0}return(0,Br.Z)(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(i){this.config=i}},{key:"setEntity",value:function(i){this.entity=i,this.component=this.geometry.create(i),this.component.entity=i,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),n}(),qp.BOX="box",qp.SPHERE="sphere",qp.PLANE="plane",qp.MERGED="merged",Uh),A2=Dr(Xf.prototype,"geometry",[RC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xf))||kC),Wn=M(49469);function NS(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var GM={}.toString,FM=function(r,i){return GM.call(r)==="[object "+i+"]"},IS=FM,BM=function(n){return Array.isArray?Array.isArray(n):IS(n,"Array")},zM=9007199254740991,UM="[object Arguments]",T2="[object Array]",M2="[object Boolean]",Vs="[object Date]",VM="[object Error]",jM="[object Function]",RS="[object Map]",kS="[object Number]",HM="[object Object]",$M="[object RegExp]",LS="[object Set]",GS="[object String]",WM="[object WeakMap]",XM="[object ArrayBuffer]",FS="[object DataView]",ZM="[object Float32Array]",YM="[object Float64Array]",KM="[object Int8Array]",BS="[object Int16Array]",qM="[object Int32Array]",zS="[object Uint8Array]",JM="[object Uint8ClampedArray]",QM="[object Uint16Array]",eO="[object Uint32Array]",Ls={};Ls[ZM]=Ls[YM]=Ls[KM]=Ls[BS]=Ls[qM]=Ls[zS]=Ls[JM]=Ls[QM]=Ls[eO]=!0,Ls[UM]=Ls[T2]=Ls[XM]=Ls[M2]=Ls[FS]=Ls[Vs]=Ls[VM]=Ls[jM]=Ls[RS]=Ls[kS]=Ls[HM]=Ls[$M]=Ls[LS]=Ls[GS]=Ls[WM]=!1;function UP(n){return function(r){return n(r)}}var tO=Object.prototype,nO=tO.toString;function rO(n){return Jp(n)&&O2(n.length)&&!!Ls[nO.call(n)]}function O2(n){return typeof n=="number"&&n>-1&&n%1===0&&n<=zM}function Jp(n){return!!n&&(0,xl.Z)(n)==="object"}var LC=rO,GC,FC,US,VS,gy,jS,p0,HS;function $S(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function WS(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?$S(Object(i),!0).forEach(function(s){(0,Bt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):$S(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var XS=(GC=(0,z.b2)(),FC=(0,z.f3)(dn.RenderEngine),US=(0,z.f3)(dn.ConfigService),GC(VS=(gy=(HS=function(){function n(){(0,br.Z)(this,n),Mr(this,"engine",jS,this),Mr(this,"configService",p0,this),this.entity=bu(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,Br.Z)(n,[{key:"init",value:function(){var i=this.configService.get(),s=i.canvas,a=i.engineOptions;this.initPromise=this.engine.init(WS({canvas:s||NS(),swapChainFormat:Wn.EV.BGRA8Unorm,antialiasing:!1},a))}},{key:"setBundle",value:function(i){this.compiledBundle=JSON.parse(JSON.stringify(i))}},{key:"setDispatch",value:function(i){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=i),this}},{key:"setMaxIteration",value:function(i){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=i),this}},{key:"setBinding",value:function(i,s){var a=this;if(typeof i=="string"){var u=_2(s)||LC(s)||BM(s);if(this.compiledBundle&&this.compiledBundle.context){var h=this.compiledBundle.context.defines.find(function(g){return g.name===i});if(h)return h.value=s,this;var p=this.compiledBundle.context.uniforms.find(function(g){return g.name===i});p&&(u?(p.data=s,p.isReferer=!1,p.storageClass===Fh.Uniform?this.model&&this.model.updateUniform(i,s):this.model&&this.model.updateBuffer(i,s)):(p.isReferer=!0,p.data=s))}}else Object.keys(i).forEach(function(g){a.setBinding(g,i[g])});return this}},{key:"execute",value:function(){var r=(0,no.Z)(fr().mark(function s(){var a=this,u,h,p=arguments;return fr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(u=p.length>0&&p[0]!==void 0?p[0]:1,!this.dirty){y.next=6;break}return this.compiledBundle.context&&(u>1?this.compiledBundle.context.maxIteration=u:this.compiledBundle.context.maxIteration++),y.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(b){var E=b.isReferer;return E}).forEach(function(b){var E=b.data,T=b.name;a.model.confirmInput(E.model,T)}),h=0;h<u;h++)this.model.run();return this.engine.endFrame(),y.abrupt("return",this);case 12:case"end":return y.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"getOutput",value:function(){var r=(0,no.Z)(fr().mark(function s(){return fr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.model.readData());case 1:case"end":return u.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"compile",value:function(){var r=(0,no.Z)(fr().mark(function s(){var a,u,h;return fr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.initPromise;case 2:return a=WS({},this.compiledBundle.context),u=this.engine.supportWebGPU?this.engine.useWGSL?Av.WGSL:Av.GLSL450:Av.GLSL100,h=this.compiledBundle.shaders[u],a.defines.filter(function(y){return y.runtime}).forEach(function(y){var b="".concat(TS).concat(y.name);h=h.replace(b,"".concat(y.value))}),a.shader=h,a.uniforms.forEach(function(y){if(!y.data&&y.storageClass===Fh.StorageBuffer){var b=1;y.type===Xd.FloatArray?b=1:y.type===Xd.Vector4FloatArray&&(b=4),y.data=new Float32Array(a.output.length*b).fill(0)}}),this.compiledBundle.context=a,g.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=g.sent;case 12:case"end":return g.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()}]),n}(),HS),jS=Dr(gy.prototype,"engine",[FC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p0=Dr(gy.prototype,"configService",[US],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gy))||VS),ZS,YS,KS,BC,qS,JS,zC,QS=(ZS=(0,z.b2)(),YS=(0,z.f3)(dn.MaterialComponentManager),ZS(KS=(BC=(zC=JS=function(){function n(){(0,br.Z)(this,n),this.config=void 0,Mr(this,"material",qS,this),this.entity=void 0,this.component=void 0}return(0,Br.Z)(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(i){this.config=i}},{key:"setEntity",value:function(i,s){this.entity=i,this.component=this.material.create(i),this.component.entity=i,this.component.type=s,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),n}(),JS.BASIC="basic",zC),qS=Dr(BC.prototype,"material",[YS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BC))||KS),e_,t_,n_,Zf,UC,r_,i_,g0,o_,s_,a_,l_,P2,c_,Qp=(e_=(0,z.b2)(),t_=(0,z.f3)(dn.MeshComponentManager),n_=(0,z.f3)(dn.CullableComponentManager),Zf=(0,z.f3)(dn.TransformComponentManager),UC=(0,z.f3)(dn.Systems),r_=(0,z.t6)(dn.SceneGraphSystem),e_(i_=(g0=(c_=P2=function(){function n(){(0,br.Z)(this,n),this.attributes={},this.config=void 0,Mr(this,"mesh",o_,this),Mr(this,"cullable",s_,this),Mr(this,"transform",a_,this),Mr(this,"sceneGraphSystem",l_,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return(0,Br.Z)(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(i){this.config=i}},{key:"setEntity",value:function(i){this.entity=i,this.cullable.create(i),this.meshComponent=this.mesh.create(i),this.transformComponent=this.transform.create(i),this.onEntityCreated()}},{key:"setMaterial",value:function(i){return this.meshComponent.material=i,this}},{key:"setGeometry",value:function(i){return this.meshComponent.geometry=i,this}},{key:"setAttributes",value:function(i){var s=this;Object.keys(i).forEach(function(a){i[a]!==void 0&&i[a]!==s.attributes[a]&&(s.onAttributeChanged({name:a,data:i[a]}),s.attributes[a]=i[a])})}},{key:"setVisible",value:function(i){var s=this;return this.meshComponent.visible=i,this.meshComponent.children.forEach(function(a){var u=s.mesh.getComponentByEntity(a);u&&(u.visible=i)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(i){return this.sceneGraphSystem.attach(this.entity,i.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(i){var s=i.name,a=i.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(s),a)}},{key:"convertAttributeName2UniformName",value:function(i){return i}}]),n}(),P2.POINT="point",P2.LINE="line",P2.GRID="grid",c_),o_=Dr(g0.prototype,"mesh",[t_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s_=Dr(g0.prototype,"cullable",[n_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a_=Dr(g0.prototype,"transform",[Zf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l_=Dr(g0.prototype,"sceneGraphSystem",[UC,r_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g0))||i_),iO=M(81550),u_=M.n(iO),d_=function(){function n(r,i){(0,br.Z)(this,n),this.attribute=void 0,this.buffer=void 0;var s=i.buffer,a=i.offset,u=i.stride,h=i.normalized,p=i.size,g=i.divisor;this.buffer=s,this.attribute={buffer:s.get(),offset:a||0,stride:u||0,normalized:h||!1,divisor:g||0},p&&(this.attribute.size=p)}return(0,Br.Z)(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(i){this.buffer.subData(i)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),Yf,vy,Kf,ja,my,Vh,yy,D2,jh,qf,Ll,Xc,Hh,by,oO=(Yf={},(0,Bt.Z)(Yf,xt.POINTS,"points"),(0,Bt.Z)(Yf,xt.LINES,"lines"),(0,Bt.Z)(Yf,xt.LINE_LOOP,"line loop"),(0,Bt.Z)(Yf,xt.LINE_STRIP,"line strip"),(0,Bt.Z)(Yf,xt.TRIANGLES,"triangles"),(0,Bt.Z)(Yf,xt.TRIANGLE_FAN,"triangle fan"),(0,Bt.Z)(Yf,xt.TRIANGLE_STRIP,"triangle strip"),Yf),VC=(vy={},(0,Bt.Z)(vy,xt.STATIC_DRAW,"static"),(0,Bt.Z)(vy,xt.DYNAMIC_DRAW,"dynamic"),(0,Bt.Z)(vy,xt.STREAM_DRAW,"stream"),vy),jC=(Kf={},(0,Bt.Z)(Kf,xt.BYTE,"int8"),(0,Bt.Z)(Kf,xt.UNSIGNED_INT,"int16"),(0,Bt.Z)(Kf,xt.INT,"int32"),(0,Bt.Z)(Kf,xt.UNSIGNED_BYTE,"uint8"),(0,Bt.Z)(Kf,xt.UNSIGNED_SHORT,"uint16"),(0,Bt.Z)(Kf,xt.UNSIGNED_INT,"uint32"),(0,Bt.Z)(Kf,xt.FLOAT,"float"),Kf),sO=(ja={},(0,Bt.Z)(ja,xt.ALPHA,"alpha"),(0,Bt.Z)(ja,xt.LUMINANCE,"luminance"),(0,Bt.Z)(ja,xt.LUMINANCE_ALPHA,"luminance alpha"),(0,Bt.Z)(ja,xt.RGB,"rgb"),(0,Bt.Z)(ja,xt.RGBA,"rgba"),(0,Bt.Z)(ja,xt.RGBA4,"rgba4"),(0,Bt.Z)(ja,xt.RGB5_A1,"rgb5 a1"),(0,Bt.Z)(ja,xt.RGB565,"rgb565"),(0,Bt.Z)(ja,xt.DEPTH_COMPONENT,"depth"),(0,Bt.Z)(ja,xt.DEPTH_STENCIL,"depth stencil"),ja),aO=(my={},(0,Bt.Z)(my,xt.DONT_CARE,"dont care"),(0,Bt.Z)(my,xt.NICEST,"nice"),(0,Bt.Z)(my,xt.FASTEST,"fast"),my),xy=(Vh={},(0,Bt.Z)(Vh,xt.NEAREST,"nearest"),(0,Bt.Z)(Vh,xt.LINEAR,"linear"),(0,Bt.Z)(Vh,xt.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,Bt.Z)(Vh,xt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,Bt.Z)(Vh,xt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,Bt.Z)(Vh,xt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Vh),ad=(yy={},(0,Bt.Z)(yy,xt.REPEAT,"repeat"),(0,Bt.Z)(yy,xt.CLAMP_TO_EDGE,"clamp"),(0,Bt.Z)(yy,xt.MIRRORED_REPEAT,"mirror"),yy),lO=(D2={},(0,Bt.Z)(D2,xt.NONE,"none"),(0,Bt.Z)(D2,xt.BROWSER_DEFAULT_WEBGL,"browser"),D2),cO=(jh={},(0,Bt.Z)(jh,xt.NEVER,"never"),(0,Bt.Z)(jh,xt.ALWAYS,"always"),(0,Bt.Z)(jh,xt.LESS,"less"),(0,Bt.Z)(jh,xt.LEQUAL,"lequal"),(0,Bt.Z)(jh,xt.GREATER,"greater"),(0,Bt.Z)(jh,xt.GEQUAL,"gequal"),(0,Bt.Z)(jh,xt.EQUAL,"equal"),(0,Bt.Z)(jh,xt.NOTEQUAL,"notequal"),jh),h_=(qf={},(0,Bt.Z)(qf,xt.FUNC_ADD,"add"),(0,Bt.Z)(qf,xt.MIN_EXT,"min"),(0,Bt.Z)(qf,xt.MAX_EXT,"max"),(0,Bt.Z)(qf,xt.FUNC_SUBTRACT,"subtract"),(0,Bt.Z)(qf,xt.FUNC_REVERSE_SUBTRACT,"reverse subtract"),qf),N2=(Ll={},(0,Bt.Z)(Ll,xt.ZERO,"zero"),(0,Bt.Z)(Ll,xt.ONE,"one"),(0,Bt.Z)(Ll,xt.SRC_COLOR,"src color"),(0,Bt.Z)(Ll,xt.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,Bt.Z)(Ll,xt.SRC_ALPHA,"src alpha"),(0,Bt.Z)(Ll,xt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,Bt.Z)(Ll,xt.DST_COLOR,"dst color"),(0,Bt.Z)(Ll,xt.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,Bt.Z)(Ll,xt.DST_ALPHA,"dst alpha"),(0,Bt.Z)(Ll,xt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,Bt.Z)(Ll,xt.CONSTANT_COLOR,"constant color"),(0,Bt.Z)(Ll,xt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,Bt.Z)(Ll,xt.CONSTANT_ALPHA,"constant alpha"),(0,Bt.Z)(Ll,xt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,Bt.Z)(Ll,xt.SRC_ALPHA_SATURATE,"src alpha saturate"),Ll),Jf=(Xc={},(0,Bt.Z)(Xc,xt.NEVER,"never"),(0,Bt.Z)(Xc,xt.ALWAYS,"always"),(0,Bt.Z)(Xc,xt.LESS,"less"),(0,Bt.Z)(Xc,xt.LEQUAL,"lequal"),(0,Bt.Z)(Xc,xt.GREATER,"greater"),(0,Bt.Z)(Xc,xt.GEQUAL,"gequal"),(0,Bt.Z)(Xc,xt.EQUAL,"equal"),(0,Bt.Z)(Xc,xt.NOTEQUAL,"notequal"),Xc),eg=(Hh={},(0,Bt.Z)(Hh,xt.ZERO,"zero"),(0,Bt.Z)(Hh,xt.KEEP,"keep"),(0,Bt.Z)(Hh,xt.REPLACE,"replace"),(0,Bt.Z)(Hh,xt.INVERT,"invert"),(0,Bt.Z)(Hh,xt.INCR,"increment"),(0,Bt.Z)(Hh,xt.DECR,"decrement"),(0,Bt.Z)(Hh,xt.INCR_WRAP,"increment wrap"),(0,Bt.Z)(Hh,xt.DECR_WRAP,"decrement wrap"),Hh),Cl=(by={},(0,Bt.Z)(by,xt.FRONT,"front"),(0,Bt.Z)(by,xt.BACK,"back"),by),uO=function(){function n(r,i){(0,br.Z)(this,n),this.buffer=void 0;var s=i.data,a=i.usage,u=i.type;this.buffer=r.buffer({data:s,usage:VC[a||xt.STATIC_DRAW],type:jC[u||xt.UNSIGNED_BYTE]})}return(0,Br.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(i){var s=i.data,a=i.offset;this.buffer.subdata(s,a)}}]),n}(),ga=M(74902),dO=9007199254740991,hO="[object Arguments]",fO="[object Array]",pO="[object Boolean]",gO="[object Date]",vO="[object Error]",mO="[object Function]",yO="[object Map]",bO="[object Number]",v0="[object Object]",f_="[object RegExp]",p_="[object Set]",g_="[object String]",xO="[object WeakMap]",Mv="[object ArrayBuffer]",xu="[object DataView]",va="[object Float32Array]",v_="[object Float64Array]",CO="[object Int8Array]",m_="[object Int16Array]",wO="[object Int32Array]",EO="[object Uint8Array]",SO="[object Uint8ClampedArray]",tg="[object Uint16Array]",$h="[object Uint32Array]",ys={};ys[va]=ys[v_]=ys[CO]=ys[m_]=ys[wO]=ys[EO]=ys[SO]=ys[tg]=ys[$h]=!0,ys[hO]=ys[fO]=ys[Mv]=ys[pO]=ys[xu]=ys[gO]=ys[vO]=ys[mO]=ys[yO]=ys[bO]=ys[v0]=ys[f_]=ys[p_]=ys[g_]=ys[xO]=!1;function y_(n){return function(r){return n(r)}}var _O=Object.prototype,AO=_O.toString;function TO(n){return MO(n)&&b_(n.length)&&!!ys[AO.call(n)]}function b_(n){return typeof n=="number"&&n>-1&&n%1===0&&n<=dO}function MO(n){return!!n&&(0,xl.Z)(n)==="object"}var HC=TO;function x_(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function C_(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?x_(Object(i),!0).forEach(function(s){(0,Bt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):x_(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var OO=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,w_=0,ng=!1,rg=function(){function n(r,i){var s=this;(0,br.Z)(this,n),this.reGl=r,this.context=i,this.entity=bu(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var a={};this.context.uniforms.forEach(function(y){var b=y.name,E=y.type,T=y.data,O=y.isReferer,I=y.storageClass;if(I===Fh.StorageBuffer){if(O)s.textureCache[b]={data:void 0},a["".concat(b,"Size")]=function(){return T.compiledBundle.context.output.textureSize};else{s.textureCache[b]=s.calcDataTexture(b,E,T);var k=s.textureCache[b],B=k.textureWidth,$=k.isOutput;a["".concat(b,"Size")]=[B,B],$&&(s.outputTextureName=b,s.context.needPingpong&&(s.outputTextureName="".concat(b,"Output"),s.textureCache[s.outputTextureName]=s.calcDataTexture(b,E,T)))}a[b]=function(){return ng&&console.log("[".concat(s.entity,"]: ").concat(b," ").concat(s.textureCache[b].id)),s.textureCache[b].texture}}else if(I===Fh.Uniform){if(T&&(Array.isArray(T)||HC(T))&&T.length>16)throw new Error("invalid data type ".concat(E));a[b]=function(){return y.data}}});var u=this.getOuputDataTexture(),h=u.textureWidth,p=u.texelCount;a.u_OutputTextureSize=[h,h],a.u_OutputTexelCount=p,this.context.output.textureSize=[h,h];var g={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:a,vert:OO,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(g)}return(0,Br.Z)(n,[{key:"run",value:function(){var i=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){i.computeCommand()}),ng&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var r=(0,no.Z)(fr().mark(function s(){var a=this,u,h,p,g,y,b,E,T;return fr().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){u=a.reGl.read()}),!u){I.next=6;break}if(h=this.getOuputDataTexture(),p=h.originalDataLength,g=h.elementsPerTexel,y=h.typedArrayConstructor,b=y===void 0?Float32Array:y,E=[],g!==4)for(T=0;T<u.length;T+=4)g===1?E.push(u[T]):g===2?E.push(u[T],u[T+1]):E.push(u[T],u[T+1],u[T+2]);else E=u;return I.abrupt("return",new b(E.slice(0,p)));case 6:return I.abrupt("return",new Float32Array);case 7:case"end":return I.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"confirmInput",value:function(i,s){var a;this.entity===i.entity?(this.dynamicPingpong=!0,a=this):a=i,this.textureCache[s].id=a.getOuputDataTexture().id,this.textureCache[s].texture=a.getOuputDataTexture().texture,ng&&console.log("[".concat(this.entity,"]: confirm input ").concat(s," from model ").concat(a.entity,", ").concat(a.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=this.context.uniforms.find(function(y){var b=y.name;return b===i});if(u){var h=this.calcDataTexture(i,u.type,s),p=h.texture,g=h.data;this.textureCache[i].data=g,this.textureCache[i].texture=p}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var i=this.context.output.name;this.textureCache[i].id=this.getOuputDataTexture().id,this.textureCache[i].texture=this.getOuputDataTexture().texture}var s=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=s,ng&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var i=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=i}},{key:"cloneDataTexture",value:function(i){var s=i.data,a=i.textureWidth;return C_(C_({},i),{},{id:w_++,texture:this.reGl.texture({width:a,height:a,data:s,type:"float"})})}},{key:"calcDataTexture",value:function(i,s,a){var u=1;s===Xd.Vector4FloatArray&&(u=4);for(var h=[],p=0;p<a.length;p+=u)u===1?h.push(a[p],0,0,0):u===2?h.push(a[p],a[p+1],0,0):u===3?h.push(a[p],a[p+1],a[p+2],0):u===4&&h.push(a[p],a[p+1],a[p+2],a[p+3]);var g=a.length,y=Math.ceil(g/u),b=Math.ceil(Math.sqrt(y)),E=b*b;y<E&&h.push.apply(h,(0,ga.Z)(new Array((E-y)*4).fill(0)));var T=this.reGl.texture({width:b,height:b,data:h,type:"float"});return{id:w_++,data:h,originalDataLength:g,typedArrayConstructor:HC(a)?a.constructor:void 0,textureWidth:b,texture:T,texelCount:y,elementsPerTexel:u,isOutput:i===this.context.output.name}}}]),n}(),PO=function(){function n(r,i){(0,br.Z)(this,n),this.elements=void 0;var s=i.data,a=i.usage,u=i.type,h=i.count;this.elements=r.elements({data:s,usage:VC[a||xt.STATIC_DRAW],type:jC[u||xt.UNSIGNED_BYTE],count:h})}return(0,Br.Z)(n,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(i){var s=i.data;this.elements.subdata(s)}},{key:"destroy",value:function(){this.elements.destroy()}}]),n}(),ig=function(){function n(r,i){(0,br.Z)(this,n),this.framebuffer=void 0;var s=i.width,a=i.height,u=i.color,h=i.colors,p=i.depth,g=i.stencil,y={width:s,height:a};Array.isArray(h)&&(y.colors=h.map(function(b){return b.get()})),u&&typeof u!="boolean"&&(y.color=u.get()),this.framebuffer=r.framebuffer(y)}return(0,Br.Z)(n,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(i){var s=i.width,a=i.height;this.framebuffer.resize(s,a)}}]),n}();function DO(n){var r=(0,xl.Z)(n);return n!=null&&(r==="object"||r==="function")}function Cy(n){var r={};return Object.keys(n).forEach(function(i){$C(i,n[i],r,"")}),r}function $C(n,r,i,s){if(r===null||typeof r=="number"||typeof r=="boolean"||Array.isArray(r)&&typeof r[0]=="number"||HC(r)||r===""||r.resize!==void 0){i["".concat(s&&s+".").concat(n)]=r;return}DO(r)&&Object.keys(r).forEach(function(a){$C(a,r[a],i,"".concat(s&&s+".").concat(n))}),Array.isArray(r)&&r.forEach(function(a,u){Object.keys(a).forEach(function(h){$C(h,a[h],i,"".concat(s&&s+".").concat(n,"[").concat(u,"]"))})})}function E_(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function Ov(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?E_(Object(i),!0).forEach(function(s){(0,Bt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):E_(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var NO=function(){function n(r,i){(0,br.Z)(this,n),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=r;var s=i.vs,a=i.fs,u=i.defines,h=i.attributes,p=i.uniforms,g=i.primitive,y=i.count,b=i.elements,E=i.depth,T=i.blend,O=i.stencil,I=i.cull,k=i.instances,B=i.scissor,$=i.viewport,X={};p&&(this.uniforms=Cy(p),Object.keys(p).forEach(function(We){X[We]=r.prop(We)}));var re={};Object.keys(h).forEach(function(We){re[We]=h[We].get()});var ye=u&&this.generateDefines(u)||"",me={attributes:re,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(ye,`
`).concat(a),uniforms:X,vert:`
`.concat(ye,`
`).concat(s),primitive:oO[g===void 0?xt.TRIANGLES:g]};k&&(me.instances=k),y&&(me.count=y),b&&(me.elements=b.get()),B&&(me.scissor=B),$&&(me.viewport=$),this.initDepthDrawParams({depth:E},me),this.initBlendDrawParams({blend:T},me),this.initStencilDrawParams({stencil:O},me),this.initCullDrawParams({cull:I},me),this.drawCommand=r(me)}return(0,Br.Z)(n,[{key:"addUniforms",value:function(i){this.uniforms=Ov(Ov({},this.uniforms),Cy(i))}},{key:"draw",value:function(i){var s=Ov(Ov({},this.uniforms),Cy(i.uniforms||{})),a={};Object.keys(s).forEach(function(u){var h=(0,xl.Z)(s[u]);h==="boolean"||h==="number"||Array.isArray(s[u])||s[u].BYTES_PER_ELEMENT?a[u]=s[u]:h==="string"||(a[u]=s[u].get())}),this.drawCommand(a)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(i,s){var a=i.depth;a&&(s.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:cO[a.func||xt.LESS],range:a.range||[0,1]})}},{key:"initBlendDrawParams",value:function(i,s){var a=i.blend;if(a){var u=a.enable,h=a.func,p=a.equation,g=a.color,y=g===void 0?[0,0,0,0]:g;s.blend={enable:!!u,func:{srcRGB:N2[h&&h.srcRGB||xt.SRC_ALPHA],srcAlpha:N2[h&&h.srcAlpha||xt.SRC_ALPHA],dstRGB:N2[h&&h.dstRGB||xt.ONE_MINUS_SRC_ALPHA],dstAlpha:N2[h&&h.dstAlpha||xt.ONE_MINUS_SRC_ALPHA]},equation:{rgb:h_[p&&p.rgb||xt.FUNC_ADD],alpha:h_[p&&p.alpha||xt.FUNC_ADD]},color:y}}}},{key:"initStencilDrawParams",value:function(i,s){var a=i.stencil;if(a){var u=a.enable,h=a.mask,p=h===void 0?-1:h,g=a.func,y=g===void 0?{cmp:xt.ALWAYS,ref:0,mask:-1}:g,b=a.opFront,E=b===void 0?{fail:xt.KEEP,zfail:xt.KEEP,zpass:xt.KEEP}:b,T=a.opBack,O=T===void 0?{fail:xt.KEEP,zfail:xt.KEEP,zpass:xt.KEEP}:T;s.stencil={enable:!!u,mask:p,func:Ov(Ov({},y),{},{cmp:Jf[y.cmp]}),opFront:{fail:eg[E.fail],zfail:eg[E.zfail],zpass:eg[E.zpass]},opBack:{fail:eg[O.fail],zfail:eg[O.zfail],zpass:eg[O.zpass]}}}}},{key:"initCullDrawParams",value:function(i,s){var a=i.cull;if(a){var u=a.enable,h=a.face,p=h===void 0?xt.BACK:h;s.cull={enable:!!u,face:Cl[p]}}}},{key:"generateDefines",value:function(i){return Object.keys(i).map(function(s){return"#define ".concat(s," ").concat(Number(i[s]))}).join(`
`)}}]),n}(),IO=function(){function n(r,i){(0,br.Z)(this,n),this.texture=void 0,this.width=void 0,this.height=void 0;var s=i.data,a=i.type,u=a===void 0?xt.UNSIGNED_BYTE:a,h=i.width,p=i.height,g=i.flipY,y=g===void 0?!1:g,b=i.format,E=b===void 0?xt.RGBA:b,T=i.mipmap,O=T===void 0?!1:T,I=i.wrapS,k=I===void 0?xt.CLAMP_TO_EDGE:I,B=i.wrapT,$=B===void 0?xt.CLAMP_TO_EDGE:B,X=i.aniso,re=X===void 0?0:X,ye=i.alignment,me=ye===void 0?1:ye,We=i.premultiplyAlpha,at=We===void 0?!1:We,ft=i.mag,Qt=ft===void 0?xt.NEAREST:ft,_t=i.min,en=_t===void 0?xt.NEAREST:_t,ct=i.colorSpace,Hn=ct===void 0?xt.BROWSER_DEFAULT_WEBGL:ct;this.width=h,this.height=p;var Gn={width:h,height:p,type:jC[u],format:sO[E],wrapS:ad[k],wrapT:ad[$],mag:xy[Qt],min:xy[en],alignment:me,flipY:y,colorSpace:lO[Hn],premultiplyAlpha:at,aniso:re};s&&(Gn.data=s),typeof O=="number"?Gn.mipmap=aO[O]:typeof O=="boolean"&&(Gn.mipmap=O),this.texture=r.texture(Gn)}return(0,Br.Z)(n,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(i){var s=i.width,a=i.height;this.texture.resize(s,a),this.width=s,this.height=a}},{key:"destroy",value:function(){this.texture.destroy()}}]),n}(),S_,__,WC,A_=(S_=(0,z.b2)(),S_(__=(WC=function(){function n(){var r=this;(0,br.Z)(this,n),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var i=(0,no.Z)(fr().mark(function s(a){return fr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!a.uniforms){h.next=3;break}return h.next=3,Promise.all(Object.keys(a.uniforms).map(function(){var p=(0,no.Z)(fr().mark(function g(y){var b;return fr().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!(a.uniforms[y]&&a.uniforms[y].load!==void 0)){T.next=5;break}return T.next=3,a.uniforms[y].load();case 3:b=T.sent,a.uniforms[y]=b;case 5:case"end":return T.stop()}},g)}));return function(g){return p.apply(this,arguments)}}()));case 3:return h.abrupt("return",new NO(r.gl,a));case 4:case"end":return h.stop()}},s)}));return function(s){return i.apply(this,arguments)}}(),this.createAttribute=function(i){return new d_(r.gl,i)},this.createBuffer=function(i){return new uO(r.gl,i)},this.createElements=function(i){return new PO(r.gl,i)},this.createTexture2D=function(i){return new IO(r.gl,i)},this.createFramebuffer=function(i){return new ig(r.gl,i)},this.useFramebuffer=function(i,s){r.gl({framebuffer:i?i.get():null})(s)},this.createComputeModel=function(){var i=(0,no.Z)(fr().mark(function s(a){return fr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",new rg(r.gl,a));case 1:case"end":return h.stop()}},s)}));return function(s){return i.apply(this,arguments)}}(),this.clear=function(i){var s=i.color,a=i.depth,u=i.stencil,h=i.framebuffer,p=h===void 0?null:h,g={color:s,depth:a,stencil:u};g.framebuffer=p===null?p:p.get(),r.gl.clear(g)},this.setScissor=function(i){r.gl&&r.gl._gl&&(i.enable&&i.box?(r.gl._gl.enable(xt.SCISSOR_TEST),r.gl._gl.scissor(i.box.x,i.box.y,i.box.width,i.box.height)):r.gl._gl.disable(xt.SCISSOR_TEST),r.gl._refresh())},this.viewport=function(i){var s=i.x,a=i.y,u=i.width,h=i.height;r.gl&&r.gl._gl&&(r.gl._gl.viewport(s,a,u,h),r.gl._refresh())},this.readPixels=function(i){var s=i.framebuffer,a=i.x,u=i.y,h=i.width,p=i.height,g={x:a,y:u,width:h,height:p};return s&&(g.framebuffer=s.get()),r.gl.read(g)},this.getCanvas=function(){return r.$canvas},this.getGLContext=function(){return r.gl._gl},this.destroy=function(){r.gl&&(r.gl.destroy(),r.inited=!1)}}return(0,Br.Z)(n,[{key:"init",value:function(){var r=(0,no.Z)(fr().mark(function s(a){return fr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.inited){h.next=2;break}return h.abrupt("return");case 2:return this.$canvas=a.canvas,h.next=5,new Promise(function(p,g){u_()({canvas:a.canvas,attributes:{alpha:!0,antialias:a.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(b,E){(b||!E)&&g(b),p(E)}})});case 5:this.gl=h.sent,this.inited=!0;case 7:case"end":return h.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),n}(),WC))||__);function T_(){return typeof window!="undefined"}function RO(n,r,i,s){if(T_()){var a=document.getElementsByTagName("head")[0],u=document.createElement("script");u.setAttribute("type","text/javascript"),u.setAttribute("src",n),s&&(u.id=s),u.onload=function(){r&&r()},u.onerror=function(h){i&&i("Unable to load script '".concat(n,"'"),h)},a.appendChild(u)}}function kO(n,r){return new Promise(function(i,s){RO(n,function(){i()},function(a,u){s(u)})})}var wy;function m0(){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,no.Z)(fr().mark(function n(){return fr().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!wy){i.next=2;break}return i.abrupt("return",wy);case 2:return i.next=4,kO("https://preview.babylonjs.com/glslang/glslang.js");case 4:return wy=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),i.abrupt("return",wy);case 6:case"end":return i.stop()}},n)})),Yd.apply(this,arguments)}var LO=function(){function n(r,i){(0,br.Z)(this,n),this.engine=r,this.options=i,this.attribute=void 0,this.buffer=void 0;var s=i,a=s.buffer,u=s.offset,h=s.stride,p=s.normalized,g=s.size,y=s.divisor,b=s.arrayStride,E=s.attributes,T=s.stepMode;this.buffer=a,this.attribute={buffer:a.get(),offset:u||0,stride:h||0,normalized:p||!1,divisor:y||0,arrayStride:b||0,attributes:E,stepMode:T||"vertex"},g&&(this.attribute.size=g)}return(0,Br.Z)(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(i){this.buffer.subData(i)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),Wh=function(){function n(r,i){(0,br.Z)(this,n),this.engine=r,this.options=i,this.buffer=void 0;var s=i,a=s.data,u=s.usage,h=s.type;this.buffer=this.createBuffer(a instanceof Array?new Float32Array(a):a,u||Wn.FB.Vertex|Wn.FB.CopyDst)}return(0,Br.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(i){var s=i.data,a=i.offset;this.setSubData(this.buffer,a,s instanceof Array?new Float32Array(s):s)}},{key:"createBuffer",value:function(i,s){var a=i.byteLength%4,u={size:i.byteLength+a,usage:s},h=this.engine.device.createBuffer(u);return this.setSubData(h,0,i),h}},{key:"setSubData",value:function(i,s,a){var u=nc?this.engine.device.getQueue():this.engine.device.defaultQueue;u.writeBuffer(i,s,a)}}]),n}();function Kd(n){return typeof n=="number"}var VP=function(){function n(r,i){(0,br.Z)(this,n),this.engine=r,this.context=i,this.entity=bu(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return(0,Br.Z)(n,[{key:"init",value:function(){var r=(0,no.Z)(fr().mark(function s(){var a=this,u,h,p,g,y,b,E;return fr().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:u=O.sent,h=u.computeStage,p=this.context.uniforms.filter(function(I){return I.storageClass===Fh.StorageBuffer}),g=this.context.uniforms.filter(function(I){return I.storageClass===Fh.Uniform}),y=g.length?1:0,this.bindGroupEntries=[],y&&(b=0,E=[],g.forEach(function(I){if(Kd(I.data))a.uniformGPUBufferLayout.push({name:I.name,offset:b}),b+=4,E.push(I.data);else{var k,B=((k=I.data)===null||k===void 0?void 0:k.length)||1;B===3&&(B=4,I.data.push(0));var $=b/4%4;if($>0){var X=4-$;if(B>1&&B<=X)B===2&&(X===3&&(b+=4,E.push(0)),E.push.apply(E,(0,ga.Z)(I.data)),a.uniformGPUBufferLayout.push({name:I.name,offset:b}));else{for(var re=0;re<X;re++)b+=4,E.push(0);E.push.apply(E,(0,ga.Z)(I.data)),a.uniformGPUBufferLayout.push({name:I.name,offset:b})}}b+=4*B}}),this.uniformBuffer=new Wh(this.engine,{data:E instanceof Array?new Float32Array(E):E,usage:Wn.FB.Uniform|Wn.FB.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),p.forEach(function(I){if(I.data!==null&&(I.type===Xd.Vector4FloatArray||I.type===Xd.FloatArray)){var k;I.name===a.context.output.name?(k=new Wh(a.engine,{data:isFinite(Number(I.data))?[I.data]:I.data,usage:Wn.FB.Storage|Wn.FB.CopyDst|Wn.FB.CopySrc}),a.outputBuffer=k,a.context.output={name:I.name,length:isFinite(Number(I.data))?1:I.data.length,typedArrayConstructor:Float32Array,gpuBuffer:k.get()}):I.isReferer?I.data.model&&I.data.model.outputBuffer&&(k=I.data.model.outputBuffer):k=new Wh(a.engine,{data:isFinite(Number(I.data))?[I.data]:I.data,usage:Wn.FB.Storage|Wn.FB.CopyDst|Wn.FB.CopySrc}),a.vertexBuffers[I.name]=k,a.bindGroupEntries.push({binding:y,resource:{name:I.name,refer:k?void 0:I.data,buffer:k?k.get():void 0}}),y++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:h}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return O.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"destroy",value:function(){var i=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(s){return i.vertexBuffers[s].destroy()})}},{key:"readData",value:function(){var r=(0,no.Z)(fr().mark(function s(){var a,u,h,p,g,y,b,E,T,O;return fr().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(a=this.context.output,!a){k.next=16;break}if(u=a.length,h=a.typedArrayConstructor,p=a.gpuBuffer,!p){k.next=16;break}return g=u*h.BYTES_PER_ELEMENT,y=this.engine.device.createBuffer({size:g,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),b=this.engine.device.createCommandEncoder(),b.copyBufferToBuffer(p,0,y,0,g),E=nc?this.engine.device.getQueue():this.engine.device.defaultQueue,E.submit([b.finish()]),k.next=12,y.mapAsync(Wn.gc.Read);case 12:return T=y.getMappedRange(),O=new h(T.slice(0)),y.unmap(),k.abrupt("return",O);case 16:return k.abrupt("return",new Float32Array);case 17:case"end":return k.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"run",value:function(){if(this.engine.currentComputePass){var i;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(i=this.engine.currentComputePass).dispatch.apply(i,(0,ga.Z)(this.context.dispatch))}}},{key:"updateBuffer",value:function(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=this.vertexBuffers[i];u&&u.subData({data:s,offset:a})}},{key:"updateUniform",value:function(i,s){var a=this.uniformGPUBufferLayout.find(function(u){return u.name===i});a&&this.uniformBuffer.subData({data:Number.isFinite(s)?new Float32Array([s]):new Float32Array(s),offset:a.offset})}},{key:"confirmInput",value:function(i,s){var a=this.vertexBuffers[s],u=i.outputBuffer;if(a&&u&&a!==u){var h=this.engine.device.createCommandEncoder(),p=i.context.output,g=p.length,y=p.typedArrayConstructor,b=g*y.BYTES_PER_ELEMENT;h.copyBufferToBuffer(u.get(),0,a.get(),0,b);var E=nc?this.engine.device.getQueue():this.engine.device.defaultQueue;E.submit([h.finish()])}}},{key:"compileShaderToSpirV",value:function(i,s,a){return this.compileRawShaderToSpirV(a+i,s)}},{key:"compileRawShaderToSpirV",value:function(i,s){return this.engine.glslang.compileGLSL(i,s)}},{key:"compileComputePipelineStageDescriptor",value:function(){var r=(0,no.Z)(fr().mark(function s(a){var u,h;return fr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(u=a,h=`#version 450
`,this.engine.options.useWGSL){g.next=6;break}return g.next=5,this.compileShaderToSpirV(a,"compute",h);case 5:u=g.sent;case 6:return g.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:u,isWHLSL:nc}),entryPoint:"main"}});case 7:case"end":return g.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()}]),n}(),M_=function(){function n(r,i){(0,br.Z)(this,n),this.engine=r,this.options=i,this.indexCount=void 0,this.buffer=void 0;var s=i,a=s.data,u=s.usage,h=s.type,p=s.count;this.indexCount=p||0,this.buffer=new Wh(r,{data:a instanceof Array?new Uint16Array(a):a,usage:Wn.FB.Index|Wn.FB.CopyDst})}return(0,Br.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(i){this.buffer.subData(i)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),Gl=function(){function n(r,i){(0,br.Z)(this,n),this.engine=r,this.options=i,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var s=i,a=s.width,u=s.height,h=s.color,p=s.colors,g=s.depth,y=s.stencil;h&&(this.colorTexture=h),g&&(this.depthTexture=g)}return(0,Br.Z)(n,[{key:"get",value:function(){var i,s;return{color:(i=this.colorTexture)===null||i===void 0?void 0:i.get(),depth:(s=this.depthTexture)===null||s===void 0?void 0:s.get()}}},{key:"destroy",value:function(){var i,s;(i=this.colorTexture)===null||i===void 0||i.destroy(),(s=this.depthTexture)===null||s===void 0||s.destroy()}},{key:"resize",value:function(i){var s=i.width,a=i.height;if(s!==this.width||a!==this.height){var u,h;(u=this.colorTexture)===null||u===void 0||u.resize({width:s,height:a}),(h=this.depthTexture)===null||h===void 0||h.resize({width:s,height:a})}this.width=s,this.height=a}}]),n}(),Xh,Zh,Yh,ol,og,Kh,qd,O_=(Xh={},(0,Bt.Z)(Xh,xt.POINTS,Wn.YV.PointList),(0,Bt.Z)(Xh,xt.LINES,Wn.YV.LineList),(0,Bt.Z)(Xh,xt.LINE_LOOP,Wn.YV.LineList),(0,Bt.Z)(Xh,xt.LINE_STRIP,Wn.YV.LineStrip),(0,Bt.Z)(Xh,xt.TRIANGLES,Wn.YV.TriangleList),(0,Bt.Z)(Xh,xt.TRIANGLE_FAN,Wn.YV.TriangleList),(0,Bt.Z)(Xh,xt.TRIANGLE_STRIP,Wn.YV.TriangleStrip),Xh),Ki=(Zh={},(0,Bt.Z)(Zh,xt.NEVER,Wn.wb.Never),(0,Bt.Z)(Zh,xt.ALWAYS,Wn.wb.Always),(0,Bt.Z)(Zh,xt.LESS,Wn.wb.Less),(0,Bt.Z)(Zh,xt.LEQUAL,Wn.wb.LessEqual),(0,Bt.Z)(Zh,xt.GREATER,Wn.wb.Greater),(0,Bt.Z)(Zh,xt.GEQUAL,Wn.wb.GreaterEqual),(0,Bt.Z)(Zh,xt.EQUAL,Wn.wb.Equal),(0,Bt.Z)(Zh,xt.NOTEQUAL,Wn.wb.NotEqual),Zh),I2=(Yh={},(0,Bt.Z)(Yh,xt.FUNC_ADD,Wn.db.Add),(0,Bt.Z)(Yh,xt.MIN_EXT,Wn.db.Min),(0,Bt.Z)(Yh,xt.MAX_EXT,Wn.db.Max),(0,Bt.Z)(Yh,xt.FUNC_SUBTRACT,Wn.db.Subtract),(0,Bt.Z)(Yh,xt.FUNC_REVERSE_SUBTRACT,Wn.db.ReverseSubtract),Yh),R2=(ol={},(0,Bt.Z)(ol,xt.ZERO,Wn.zi.Zero),(0,Bt.Z)(ol,xt.ONE,Wn.zi.One),(0,Bt.Z)(ol,xt.SRC_COLOR,Wn.zi.SrcColor),(0,Bt.Z)(ol,xt.ONE_MINUS_SRC_COLOR,Wn.zi.OneMinusSrcColor),(0,Bt.Z)(ol,xt.SRC_ALPHA,Wn.zi.SrcAlpha),(0,Bt.Z)(ol,xt.ONE_MINUS_SRC_ALPHA,Wn.zi.OneMinusSrcAlpha),(0,Bt.Z)(ol,xt.DST_COLOR,Wn.zi.DstColor),(0,Bt.Z)(ol,xt.ONE_MINUS_DST_COLOR,Wn.zi.OneMinusDstColor),(0,Bt.Z)(ol,xt.DST_ALPHA,Wn.zi.DstAlpha),(0,Bt.Z)(ol,xt.ONE_MINUS_DST_ALPHA,Wn.zi.OneMinusDstAlpha),(0,Bt.Z)(ol,xt.CONSTANT_COLOR,Wn.zi.BlendColor),(0,Bt.Z)(ol,xt.ONE_MINUS_CONSTANT_COLOR,Wn.zi.OneMinusBlendColor),(0,Bt.Z)(ol,xt.SRC_ALPHA_SATURATE,Wn.zi.SrcAlphaSaturated),ol),P_=(og={},(0,Bt.Z)(og,xt.ALPHA,"r8unorm"),(0,Bt.Z)(og,xt.RGBA,"rgba8unorm"),(0,Bt.Z)(og,xt.DEPTH_COMPONENT,"depth32float"),(0,Bt.Z)(og,xt.DEPTH_STENCIL,"depth24plus-stencil8"),og),XC=(Kh={},(0,Bt.Z)(Kh,xt.NEAREST,"nearest"),(0,Bt.Z)(Kh,xt.LINEAR,"linear"),Kh),ZC=(qd={},(0,Bt.Z)(qd,xt.REPEAT,"repeat"),(0,Bt.Z)(qd,xt.CLAMP_TO_EDGE,"clamp-to-edge"),(0,Bt.Z)(qd,xt.MIRRORED_REPEAT,"mirror-repeat"),qd);function GO(n){var r=n.cull;if(!r||!r.enable)return Wn.Wf.None;if(r.face)return r.face===xt.FRONT?Wn.Wf.Front:Wn.Wf.Back}function FO(n){var r=n.depth,i=n.stencil,s={compare:Wn.wb.Always,depthFailOp:Wn.xS.Keep,failOp:Wn.xS.Keep,passOp:Wn.xS.Keep};return{depthWriteEnabled:r&&r.enable,depthCompare:Ki[(r==null?void 0:r.func)||xt.ALWAYS],format:Wn.EV.Depth24PlusStencil8,stencilFront:s,stencilBack:s,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function BO(n,r){var i=n.blend;return[{format:r,alphaBlend:{srcFactor:R2[i&&i.func&&i.func.srcAlpha||xt.ONE],dstFactor:R2[i&&i.func&&i.func.dstAlpha||xt.ZERO],operation:I2[i&&i.equation&&i.equation.alpha||xt.FUNC_ADD]},colorBlend:{srcFactor:R2[i&&i.func&&i.func.srcRGB||xt.ONE],dstFactor:R2[i&&i.func&&i.func.dstRGB||xt.ZERO],operation:I2[i&&i.equation&&i.equation.rgb||xt.FUNC_ADD]},writeMask:Wn.Yw.All}]}function sg(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function Pv(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?sg(Object(i),!0).forEach(function(s){(0,Bt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):sg(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function Qi(n){for(var r=0,i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];for(var u=0,h=s;u<h.length;u++){var p=h[u];r+=p.length}for(var g=new n(r),y=0,b=0,E=s;b<E.length;b++){var T=E[b];g.set(T,y),y+=T.length}return g}var Dv=function(){function n(r,i){(0,br.Z)(this,n),this.engine=r,this.options=i,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return(0,Br.Z)(n,[{key:"init",value:function(){var r=(0,no.Z)(fr().mark(function s(){var a=this,u,h,p,g,y,b,E,T,O,I,k,B,$,X,re,ye,me,We;return fr().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return u=this.options,h=u.vs,p=u.fs,g=u.attributes,y=u.uniforms,b=u.primitive,E=u.count,T=u.elements,O=u.depth,I=u.blend,k=u.stencil,B=u.cull,$=u.instances,ft.next=3,this.compilePipelineStageDescriptor(h,p,null);case 3:X=ft.sent,re=X.vertexStage,ye=X.fragmentStage,y&&this.buildUniformBindGroup(y),T&&(this.indexBuffer=T.get(),this.indexCount=T.indexCount),me={vertexBuffers:Object.keys(g).map(function(Qt,_t){var en=g[Qt],ct=en.get(),Hn=ct.arrayStride,Gn=ct.stepMode,rr=ct.attributes;return a.attributeCache[Qt]=en,{arrayStride:Hn,stepMode:Gn,attributes:rr}})},We={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:O_[b||xt.TRIANGLES],rasterizationState:Pv(Pv({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:GO({cull:B})}),depthStencilState:FO({depth:O,stencil:k}),colorStates:BO({blend:I},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:re,fragmentStage:ye,vertexState:me},this.renderPipeline=this.engine.device.createRenderPipeline(We);case 11:case"end":return ft.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"addUniforms",value:function(i){this.uniforms=Pv(Pv({},this.uniforms),Cy(i))}},{key:"draw",value:function(i){var s=this,a=this.engine.getCurrentRenderPass(),u=Pv(Pv({},this.uniforms),Cy(i.uniforms||{})),h=[];Object.keys(u).forEach(function(p){var g=(0,xl.Z)(u[p]);if(g==="boolean"||g==="number"||Array.isArray(u[p])||u[p].BYTES_PER_ELEMENT){var y,b=(y=s.uniformGPUBufferLayout.find(function($){var X=$.name;return X===p}))===null||y===void 0?void 0:y.offset;b!==null&&s.uniformBuffer.subData({data:u[p],offset:b})}else{var E,T=(E=s.uniformGPUBufferLayout.find(function($){var X=$.name;return X===p}))===null||E===void 0?void 0:E.offset;if(T!==null){var O=u[p].get(),I=O.color||O,k=I.texture,B=I.sampler;B&&(h.push({binding:T,resource:B}),T++),h.push({binding:T,resource:k.createView()})}}}),this.uniformBuffer&&(h[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:h}),this.renderPipeline&&a.setPipeline(this.renderPipeline),a.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&a.setIndexBuffer(this.indexBuffer.get(),Wn.iD.Uint32,0),Object.keys(this.attributeCache).forEach(function(p,g){a.setVertexBuffer(0+g,s.attributeCache[p].get().buffer,0)}),this.indexBuffer?a.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):a.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var r=(0,no.Z)(fr().mark(function s(a,u,h){var p,g,y;return fr().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(p=`#version 450
`,g=a,y=u,this.engine.options.useWGSL){E.next=10;break}return E.next=6,this.compileShaderToSpirV(a,"vertex",p);case 6:return g=E.sent,E.next=9,this.compileShaderToSpirV(u,"fragment",p);case 9:y=E.sent;case 10:return E.abrupt("return",this.createPipelineStageDescriptor(g,y));case 11:case"end":return E.stop()}},s,this)}));function i(s,a,u){return r.apply(this,arguments)}return i}()},{key:"compileShaderToSpirV",value:function(i,s,a){return this.compileRawShaderToSpirV(a+i,s)}},{key:"compileRawShaderToSpirV",value:function(i,s){return this.engine.glslang.compileGLSL(i,s)}},{key:"createPipelineStageDescriptor",value:function(i,s){return{vertexStage:{module:this.engine.device.createShaderModule({code:i,isWHLSL:nc}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:s,isWHLSL:nc}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:Wn.zX.CCW,cullMode:Wn.Wf.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(i){var s=this,a=0,u=Qi.apply(void 0,[Float32Array].concat((0,ga.Z)(Object.keys(i).map(function(g){return i[g]?(s.uniformGPUBufferLayout.push({name:g,offset:a}),a+=(i[g].length||1)*4,i[g]):[]})))),h=[],p=!1;u.length&&(p=!0,h.push({binding:0,visibility:Wn.$X.Fragment|Wn.$X.Vertex,type:Wn.$l.UniformBuffer})),Object.keys(i).filter(function(g){return i[g]===null}).forEach(function(g,y){s.uniformGPUBufferLayout.push({name:g,offset:y*2+(p?1:0)}),h.push({binding:y*2+(p?1:0),visibility:Wn.$X.Fragment,type:Wn.$l.Sampler},{binding:y*2+(p?1:0)+1,visibility:Wn.$X.Fragment,type:Wn.$l.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:h}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),p&&(this.uniformBuffer=new Wh(this.engine,{data:u instanceof Array?new Float32Array(u):u,usage:Wn.FB.Uniform|Wn.FB.CopyDst}))}}]),n}(),D_=function(){function n(r,i){(0,br.Z)(this,n),this.engine=r,this.options=i,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return(0,Br.Z)(n,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(i){var s=i.width,a=i.height;(s!==this.width||a!==this.height)&&(this.destroy(),this.createTexture()),this.width=s,this.height=a}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var i=this.options,s=i.data,a=i.type,u=a===void 0?xt.UNSIGNED_BYTE:a,h=i.width,p=i.height,g=i.flipY,y=g===void 0?!1:g,b=i.format,E=b===void 0?xt.RGBA:b,T=i.mipmap,O=T===void 0?!1:T,I=i.wrapS,k=I===void 0?xt.CLAMP_TO_EDGE:I,B=i.wrapT,$=B===void 0?xt.CLAMP_TO_EDGE:B,X=i.aniso,re=X===void 0?0:X,ye=i.alignment,me=ye===void 0?1:ye,We=i.premultiplyAlpha,at=We===void 0?!1:We,ft=i.mag,Qt=ft===void 0?xt.NEAREST:ft,_t=i.min,en=_t===void 0?xt.NEAREST:_t,ct=i.colorSpace,Hn=ct===void 0?xt.BROWSER_DEFAULT_WEBGL:ct,Gn=i.usage;this.width=h,this.height=p,this.texture=this.engine.device.createTexture({size:[h,p,1],mipLevelCount:1,sampleCount:1,dimension:Wn.kd.E2d,format:P_[E],usage:Gn||Wn.v2.Sampled|Wn.v2.CopyDst}),(!Gn||Gn&Wn.v2.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:ZC[k],addressModeV:ZC[$],addressModeW:ZC[k],magFilter:XC[Qt],minFilter:XC[en],maxAnisotropy:re}))}}]),n}(),N_,As,Ma,I_=(N_=(0,z.b2)(),N_(As=(Ma=function(){function n(){var r=this;(0,br.Z)(this,n),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(i){var s=i.framebuffer,a=i.color,u=i.depth,h=i.stencil;r.options.supportCompute&&r.startComputePass(),r.currentRenderTarget?(r.currentRenderPass&&r.endRenderTargetRenderPass(),r.startRenderTargetRenderPass(r.currentRenderTarget,a||null,!!u,!!h)):(r.mainColorAttachments[0].loadValue=a||Wn.Ws.Load,r.mainDepthAttachment.depthLoadValue=u||Wn.Ws.Load,r.mainDepthAttachment.stencilLoadValue=h?r.clearStencilValue:Wn.Ws.Load,r.mainRenderPass&&r.endMainRenderPass(),r.startMainRenderPass())},this.createModel=function(){var i=(0,no.Z)(fr().mark(function s(a){var u;return fr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u=new Dv(r,a),p.next=3,u.init();case 3:return p.abrupt("return",u);case 4:case"end":return p.stop()}},s)}));return function(s){return i.apply(this,arguments)}}(),this.createAttribute=function(i){return new LO(r,i)},this.createBuffer=function(i){return new Wh(r,i)},this.createElements=function(i){return new M_(r,i)},this.createTexture2D=function(i){return new D_(r,i)},this.createFramebuffer=function(i){return new Gl(r,i)},this.useFramebuffer=function(i,s){r.currentRenderTarget&&r.unbindFramebuffer(r.currentRenderTarget),r.currentRenderTarget=i,r.currentRenderTargetViewDescriptor={dimension:Wn.p_.E2d,arrayLayerCount:1,aspect:Wn.H7.All},r.currentRenderPass=null,s()},this.createComputeModel=function(){var i=(0,no.Z)(fr().mark(function s(a){var u;return fr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u=new VP(r,a),p.next=3,u.init();case 3:return p.abrupt("return",u);case 4:case"end":return p.stop()}},s)}));return function(s){return i.apply(this,arguments)}}(),this.getCanvas=function(){return r.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(i){var s=i.x,a=i.y,u=i.width,h=i.height;if(!r.currentRenderPass)r.transientViewport={x:s,y:a,width:u,height:h};else if(r.transientViewport.x!==1/0){var p=r.getCurrentRenderPass();p.setViewport(r.transientViewport.x,r.transientViewport.y,r.transientViewport.width,r.transientViewport.height,0,1)}else if(s!==r.cachedViewport.x||a!==r.cachedViewport.y||u!==r.cachedViewport.width||h!==r.cachedViewport.height){r.cachedViewport={x:s,y:a,width:u,height:h};var g=r.getCurrentRenderPass();g.setViewport(s,a,u,h,0,1)}},this.readPixels=function(i){throw new Error("Method not implemented.")}}return(0,Br.Z)(n,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var r=(0,no.Z)(fr().mark(function s(a){return fr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return this.canvas=a.canvas,this.options=a,this.useWGSL=!!a.useWGSL,this.mainPassSampleCount=a.antialiasing?this.defaultSampleCount:1,h.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return h.stop()}},s,this)}));function i(s){return r.apply(this,arguments)}return i}()},{key:"setScissor",value:function(i){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(i){return i.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),nc?this.device.getQueue().submit(this.commandBuffers.filter(function(i){return i})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(i){return i}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var r=(0,no.Z)(fr().mark(function s(){var a,u;return fr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,m0();case 2:return this.glslang=p.sent,p.next=5,(a=navigator)===null||a===void 0||(u=a.gpu)===null||u===void 0?void 0:u.requestAdapter();case 5:return this.adapter=p.sent,p.next=8,this.adapter.requestDevice();case 8:this.device=p.sent;case 9:case"end":return p.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(nc?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Wn.v2.OutputAttachment|Wn.v2.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var i={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Wn.kd.E2d,format:Wn.EV.BGRA8Unorm,usage:Wn.v2.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(i),this.mainColorAttachments=[{attachment:nc?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Wn.EG.Store}]}else this.mainColorAttachments=[{attachment:nc?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Wn.EG.Store}];var s={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Wn.kd.E2d,format:nc?"depth32float-stencil8":Wn.EV.Depth24PlusStencil8,usage:Wn.v2.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(s),this.mainDepthAttachment={attachment:nc?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Wn.EG.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Wn.EG.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=nc?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=nc?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(i,s,a){var u,h,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,g=(u=i.get().color)===null||u===void 0?void 0:u.texture,y;g&&(y=g.createView(this.currentRenderTargetViewDescriptor));var b=(h=i.get().depth)===null||h===void 0?void 0:h.texture,E;b&&(E=b.createView());var T=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:y,loadValue:s!==null?s:Wn.Ws.Load,storeOp:Wn.EG.Store}],depthStencilAttachment:b&&E?{attachment:E,depthLoadValue:a?this.clearDepthValue:Wn.Ws.Load,depthStoreOp:Wn.EG.Store,stencilLoadValue:p?this.clearStencilValue:Wn.Ws.Load,stencilStoreOp:Wn.EG.Store}:void 0});this.currentRenderPass=T,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(i){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),n}(),Ma))||As),YC,Qf;function zO(n){var r=k2();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function k2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var y0=4/64,Nv=1-y0*2,L2=(YC=(0,z.b2)(),YC(Qf=function(n){(0,_o.Z)(i,n);var r=zO(i);function i(){return(0,br.Z)(this,i),r.apply(this,arguments)}return(0,Br.Z)(i,[{key:"onEntityCreated",value:function(){var a=this.config,u=a.widthSegments,h=u===void 0?1:u,p=a.heightSegments,g=p===void 0?1:p,y=a.depthSegments,b=y===void 0?1:y,E=a.halfExtents,T=E===void 0?Ot.al(.5,.5,.5):E,O=h,I=g,k=b,B=(0,jp.Z)(T,3),$=B[0],X=B[1],re=B[2],ye=[Ot.al(-$,-X,re),Ot.al($,-X,re),Ot.al($,X,re),Ot.al(-$,X,re),Ot.al($,-X,-re),Ot.al(-$,-X,-re),Ot.al(-$,X,-re),Ot.al($,X,-re)],me=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],We=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],at={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},ft=[],Qt=[],_t=[],en=[],ct=[],Hn=0,Gn=function(ai,Zo,na){var Mi,ra,Ha,Vn;for(Ha=0;Ha<=Zo;Ha++)for(Vn=0;Vn<=na;Vn++){var Or=Ot.Ue(),Hi=Ot.Ue(),eo=Ot.Ue(),xo=Ot.Ue();Ot.t7(Or,ye[me[ai][0]],ye[me[ai][1]],Ha/Zo),Ot.t7(Hi,ye[me[ai][0]],ye[me[ai][2]],Vn/na),Ot.lu(eo,Hi,ye[me[ai][0]]),Ot.IH(xo,Or,eo),Mi=Ha/Zo,ra=Vn/na,ft.push(xo[0],xo[1],xo[2]),Qt.push(We[ai][0],We[ai][1],We[ai][2]),_t.push(Mi,ra),Mi/=3,ra/=3,Mi=Mi*Nv+y0,ra=ra*Nv+y0,Mi+=ai%3/3,ra+=Math.floor(ai/3)/3,en.push(Mi,ra),Ha<Zo&&Vn<na&&(ct.push(Hn+na+1,Hn+1,Hn),ct.push(Hn+na+1,Hn+na+2,Hn+1)),Hn++}};Gn(at.FRONT,O,I),Gn(at.BACK,O,I),Gn(at.TOP,O,k),Gn(at.BOTTOM,O,k),Gn(at.RIGHT,k,I),Gn(at.LEFT,k,I);var rr=nl(ft),Vi=this.getComponent();Vi.indices=Uint32Array.from(ct),Vi.aabb=rr,Vi.vertexCount=Hn,Vi.attributes=[{dirty:!0,name:"position",data:Float32Array.from(ft),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(Qt),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(_t),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),i}(Zd))||Qf);function UO(n,r){if(!n&&!r)throw new Error("Please specify valid arguments for parameters a and b.");if(!r||r.length===0)return n;if(!n||n.length===0)return r;if(Object.prototype.toString.call(n)!==Object.prototype.toString.call(r))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var i=new n.constructor(n.length+r.length);return i.set(n),i.set(r,n.length),i}var R_,k_;function G2(n){var r=VO();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function VO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var jO=(R_=(0,z.b2)(),R_(k_=function(n){(0,_o.Z)(i,n);var r=G2(i);function i(){return(0,br.Z)(this,i),r.apply(this,arguments)}return(0,Br.Z)(i,[{key:"onEntityCreated",value:function(){var a=this.config.geometries,u=a===void 0?[]:a,h=this.getComponent();h.aabb=new qx;var p=[],g=[],y=0;u.forEach(function(b){var E=b.aabb,T=b.indices,O=b.vertexCount,I=b.attributes;h.aabb.add(E),h.vertexCount+=O,T&&g.push.apply(g,(0,ga.Z)(T.map(function(k){return k+y}))),y+=O,I.forEach(function(k,B){p[B]?k.data&&(_2(k.data)?p[B].push(k.data):LC(k.data)?p[B].data=UO(p[B].data,k.data):p[B].data=p[B].data.concat(k.data)):(p[B]=k,p[B].dirty=!0)})}),h.attributes=p,h.indices=Uint32Array.from(g),h.dirty=!0}}]),i}(Zd))||k_),b0,KC;function x0(n){var r=C0();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function C0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var HO=(b0=(0,z.b2)(),b0(KC=function(n){(0,_o.Z)(i,n);var r=x0(i);function i(){return(0,br.Z)(this,i),r.apply(this,arguments)}return(0,Br.Z)(i,[{key:"onEntityCreated",value:function(){for(var a=this.config,u=a.halfExtents,h=u===void 0?[.5,.5]:u,p=a.widthSegments,g=p===void 0?5:p,y=a.lengthSegments,b=y===void 0?5:y,E=[],T=[],O=[],I=[],k=0,B=0;B<=g;B++)for(var $=0;$<=b;$++){var X=-h[0]+2*h[0]*B/g,re=0,ye=-(-h[1]+2*h[1]*$/b),me=B/g,We=$/b;E.push(X,re,ye),T.push(0,1,0),O.push(me,We),B<g&&$<b&&(I.push(k+b+1,k+1,k),I.push(k+b+1,k+b+2,k+1)),k++}var at=nl(E),ft=this.getComponent();ft.indices=Uint32Array.from(I),ft.aabb=at,ft.vertexCount=k,ft.attributes=[{dirty:!0,name:"position",data:Float32Array.from(E),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(T),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(O),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),i}(Zd))||KC),L_,G_;function $O(n){var r=WO();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function WO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var XO=(L_=(0,z.b2)(),L_(G_=function(n){(0,_o.Z)(i,n);var r=$O(i);function i(){return(0,br.Z)(this,i),r.apply(this,arguments)}return(0,Br.Z)(i,[{key:"onEntityCreated",value:function(){for(var a=this.config,u=a.radius,h=u===void 0?.5:u,p=a.latitudeBands,g=p===void 0?16:p,y=a.longitudeBands,b=y===void 0?16:y,E=[],T=[],O=[],I=[],k=0;k<=g;k++)for(var B=k*Math.PI/g,$=Math.sin(B),X=Math.cos(B),re=0;re<=b;re++){var ye=re*2*Math.PI/b-Math.PI/2,me=Math.sin(ye),We=Math.cos(ye),at=We*$,ft=X,Qt=me*$,_t=1-re/b,en=1-k/g;E.push(at*h,ft*h,Qt*h),T.push(at,ft,Qt),O.push(_t,en)}for(var ct=0;ct<g;++ct)for(var Hn=0;Hn<b;++Hn){var Gn=ct*(b+1)+Hn,rr=Gn+b+1;I.push(Gn+1,rr,Gn),I.push(Gn+1,rr+1,rr)}var Vi=nl(E),ji=this.getComponent();ji.indices=Uint32Array.from(I),ji.aabb=Vi,ji.vertexCount=E.length/3,ji.attributes=[{dirty:!0,name:"position",data:Float32Array.from(E),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(T),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(O),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),i}(Zd))||G_),F_,B_,z_,qh,w0,qC,ZO,U_;function YO(n){var r=jP();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function jP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var KO=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,E0=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,qO=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,JO=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,V_=(F_=(0,z.b2)(),B_=(0,z.f3)(dn.RenderEngine),z_=(0,z.f3)(dn.ShaderModuleService),F_(qh=(w0=(U_=function(n){(0,_o.Z)(i,n);var r=YO(i);function i(){var s;(0,br.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),Mr(s,"engine",qC,(0,Us.Z)(s)),Mr(s,"shaderModuleService",ZO,(0,Us.Z)(s)),s}return(0,Br.Z)(i,[{key:"onEntityCreated",value:function(){var a=this.getComponent(),u=this.engine.supportWebGPU?JO:E0,h=this.engine.supportWebGPU?qO:KO;this.shaderModuleService.registerModule("material-basic",{vs:u,fs:h});var p=this.shaderModuleService.getModule("material-basic"),g=p.vs,y=p.fs,b=p.uniforms;a.vertexShaderGLSL=g,a.fragmentShaderGLSL=y,a.setUniform(b),this.config.map&&(a.setDefines({USE_UV:1,USE_MAP:1}),a.setUniform({map:this.config.map,uvTransform:qo.Ue()}))}}]),i}(QS),U_),qC=Dr(w0.prototype,"engine",[B_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZO=Dr(w0.prototype,"shaderModuleService",[z_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w0))||qh),j_,QO,H_,ag,Ey,Sy,$_,Iv,W_,X_,Z_,Y_;function S0(n){var r=e3();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function e3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var t3=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,F2=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,B2=(j_=(0,z.b2)(),QO=(0,z.f3)(dn.Systems),H_=(0,z.t6)(dn.MaterialSystem),ag=(0,z.f3)(dn.Systems),Ey=(0,z.t6)(dn.GeometrySystem),Sy=(0,z.f3)(dn.ShaderModuleService),j_($_=(Iv=(Y_=function(n){(0,_o.Z)(i,n);var r=S0(i);function i(){var s;(0,br.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),Mr(s,"materialSystem",W_,(0,Us.Z)(s)),Mr(s,"geometrySystem",X_,(0,Us.Z)(s)),Mr(s,"shaderModuleService",Z_,(0,Us.Z)(s)),s}return(0,Br.Z)(i,[{key:"onAttributeChanged",value:function(a){var u=a.name,h=a.data,p=this.getMeshComponent();p&&p.material&&(u==="gridColor"?(p.material.setUniform("u_GridColor",h),p.material.setUniform("u_GridColor2",h)):u==="gridSize"&&(p.material.setUniform("u_GridSize",h),p.material.setUniform("u_GridSize2",h)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:F2,fs:t3});var a=this.shaderModuleService.getModule("grid"),u=a.vs,h=a.fs,p=a.uniforms,g=this.materialSystem.createShaderMaterial({vertexShader:u,fragmentShader:h});this.setMaterial(g);var y=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(y),g.setCull({enable:!1,face:xt.BACK}).setDepth({enable:!0,func:xt.LESS}),g.setUniform(p),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),y.setIndex([0,3,2,2,1,0]),y.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),i}(Qp),Y_),W_=Dr(Iv.prototype,"materialSystem",[QO,H_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X_=Dr(Iv.prototype,"geometrySystem",[ag,Ey],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z_=Dr(Iv.prototype,"shaderModuleService",[Sy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Iv))||$_),_y=M(32644),lg=M(40582);function z2(n,r,i,s,a){Ay(r,s,-a),Ay(r,s,a),n.push(i),n.push(i)}function Ay(n,r,i){n.push([[r[0],r[1]],i])}function K_(n,r,i){var s=[0,0],a=[0,0],u=[0,0],h=[0,0],p=-1,g=!1,y=null,b=(0,_y.create)(),E=i||0,T=3,O=[],I=[],k=[],B=[0,0];r&&(n=n.slice(),n.push(n[0]));for(var $=n.length,X=1;X<$;X++){var re=E,ye=n[X-1],me=n[X],We=X<n.length-1?n[X+1]:null;if(B.push(X/$,X/$),(0,lg.o7)(s,me,ye),y||(y=[0,0],(0,lg.mJ)(y,s)),g||(g=!0,z2(I,O,ye,y,1)),k.push([re+0,re+1,re+2]),!We)(0,lg.mJ)(y,s),z2(I,O,me,y,1),k.push(p===1?[re,re+2,re+3]:[re+2,re+1,re+3]),E+=2;else{(0,lg.o7)(a,We,me);var at=(0,lg.x7)(u,h,s,a,1),ft=(0,_y.dot)(u,y)<0?-1:1,Qt=at>T;if(!isFinite(at)){(0,lg.mJ)(y,s),z2(I,O,me,y,1),k.push(p===1?[re,re+2,re+3]:[re+2,re+1,re+3]),E+=2,p=ft;continue}Qt?(at=T,B.push(X/$),Ay(O,y,-ft),I.push(me),Ay(O,h,at*ft),I.push(me),k.push(p!==-ft?[re,re+2,re+3]:[re+2,re+1,re+3]),k.push([re+2,re+3,re+4]),(0,lg.mJ)(b,a),(0,_y.copy)(y,b),Ay(O,y,-ft),I.push(me),E+=3):(z2(I,O,me,h,at),k.push(p===1?[re,re+2,re+3]:[re+2,re+1,re+3]),ft=-1,(0,_y.copy)(y,h),E+=2),p=ft}}return{normals:O,attrIndex:k,attrPos:I,attrCounters:B}}var Cu,q_,ep,J_,JC,QC,Q_,Ty,ew,tw,nw,eA;function rw(n){var r=n3();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function n3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var tA=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,r3=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,i3=(Cu=(0,z.b2)(),q_=(0,z.f3)(dn.Systems),ep=(0,z.t6)(dn.MaterialSystem),J_=(0,z.f3)(dn.Systems),JC=(0,z.t6)(dn.GeometrySystem),QC=(0,z.f3)(dn.ShaderModuleService),Cu(Q_=(Ty=(eA=function(n){(0,_o.Z)(i,n);var r=rw(i);function i(){var s;(0,br.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),Mr(s,"materialSystem",ew,(0,Us.Z)(s)),Mr(s,"geometrySystem",tw,(0,Us.Z)(s)),Mr(s,"shaderModuleService",nw,(0,Us.Z)(s)),s.vertexCount=void 0,s}return(0,Br.Z)(i,[{key:"onAttributeChanged",value:function(a){var u=a.name,h=a.data,p=this.getMeshComponent();if(p&&p.material)switch(u){case"dashArray":p.material.setUniform("u_dash_array",h);break;case"dashOffset":p.material.setUniform("u_dash_offset",h);break;case"dashRatio":p.material.setUniform("u_dash_ratio",h);break;case"thickness":p.material.setUniform("u_thickness",h);break;case"color":var g=new Array(this.vertexCount).fill(void 0).map(function(){return h}).reduce(function(y,b){return[].concat((0,ga.Z)(y),(0,ga.Z)(b))},[]);p.geometry.setAttribute("a_color",Float32Array.from(g),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var a=this;this.shaderModuleService.registerModule("line",{vs:r3,fs:tA});var u=this.shaderModuleService.getModule("line"),h=u.vs,p=u.fs,g=u.uniforms,y=this.materialSystem.createShaderMaterial({vertexShader:h,fragmentShader:p}),b=K_(this.config.points,!1),E=b.normals,T=b.attrIndex,O=b.attrPos,I=b.attrCounters,k=O.length;this.vertexCount=k;var B=this.geometrySystem.createBufferGeometry({vertexCount:k});this.setMaterial(y),this.setGeometry(B),y.setCull({enable:!1,face:xt.BACK}).setUniform(g),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var $=[],X=[];E.forEach(function(ye){var me=ye[0],We=ye[1];$.push([me[0],me[1]]),X.push(We)}),B.setIndex(T.reduce(function(ye,me){return[].concat((0,ga.Z)(ye),(0,ga.Z)(me))},[])),B.setAttribute("a_pos",Float32Array.from(O.reduce(function(ye,me){return[].concat((0,ga.Z)(ye),(0,ga.Z)(me))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var re=new Array(k).fill(void 0).map(function(){return(0,ga.Z)(a.config.color)}).reduce(function(ye,me){return[].concat((0,ga.Z)(ye),(0,ga.Z)(me))},[]);B.setAttribute("a_color",Float32Array.from(re),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),B.setAttribute("a_line_miter",Float32Array.from(X),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),B.setAttribute("a_line_normal",Float32Array.from($.reduce(function(ye,me){return[].concat((0,ga.Z)(ye),(0,ga.Z)(me))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),B.setAttribute("a_counters",Float32Array.from(I),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),i}(Qp),eA),ew=Dr(Ty.prototype,"materialSystem",[q_,ep],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tw=Dr(Ty.prototype,"geometrySystem",[J_,JC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nw=Dr(Ty.prototype,"shaderModuleService",[QC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ty))||Q_);function nA(n){return[n+1&255,n+1>>8&255,n+1>>8>>8&255]}var rA,Rv,My,kv,U2,iw,ow,Oy,iA,oA,sw,sA;function aA(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function o3(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?aA(Object(i),!0).forEach(function(s){(0,Bt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):aA(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function Lv(n){var r=s3();return function(){var s=(0,po.Z)(n),a;if(r){var u=(0,po.Z)(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return(0,za.Z)(this,a)}}function s3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}var tp=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,a3=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,l3=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],c3=(rA=(0,z.b2)(),Rv=(0,z.f3)(dn.Systems),My=(0,z.t6)(dn.MaterialSystem),kv=(0,z.f3)(dn.Systems),U2=(0,z.t6)(dn.GeometrySystem),iw=(0,z.f3)(dn.ShaderModuleService),rA(ow=(Oy=(sA=function(n){(0,_o.Z)(i,n);var r=Lv(i);function i(){var s;(0,br.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),Mr(s,"materialSystem",iA,(0,Us.Z)(s)),Mr(s,"geometrySystem",oA,(0,Us.Z)(s)),Mr(s,"shaderModuleService",sw,(0,Us.Z)(s)),s}return(0,Br.Z)(i,[{key:"onAttributeChanged",value:function(a){var u=a.name,h=a.data,p=this.getMeshComponent();p&&p.material&&(u==="strokeWidth"?p.material.setUniform("u_stroke_width",h):u==="strokeColor"?p.material.setUniform("u_stroke_color",h):u==="strokeOpacity"?p.material.setUniform("u_stroke_opacity",h):u==="opacity"?p.material.setUniform("u_opacity",h):u==="blur"&&p.material.setUniform("u_blur",h))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:a3,fs:tp});var a=this.shaderModuleService.getModule("grid"),u=a.vs,h=a.fs,p=a.uniforms,g=this.materialSystem.createShaderMaterial({vertexShader:u,fragmentShader:h,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:xt.SRC_ALPHA,dstRGB:xt.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});g.setUniform(o3({u_device_pixel_ratio:window.devicePixelRatio},p));var y=this.buildAttributes(),b=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:y.instancedOffsets.length/2,vertexCount:6});b.setIndex([0,2,1,0,3,2]),b.setAttribute("position",Float32Array.from(y.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),b.setAttribute("offset",Float32Array.from(y.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),b.setAttribute("color",Float32Array.from(y.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),b.setAttribute("size",Float32Array.from(y.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),b.setAttribute("shape",Float32Array.from(y.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),b.setAttribute("a_PickingColor",Float32Array.from(y.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(g),this.setGeometry(b)}},{key:"buildAttribute",value:function(a,u,h){var p,g,y,b;(p=u.instancedPickingColors).push.apply(p,(0,ga.Z)(nA(a.id||h))),u.instancedShapes.push(l3.indexOf(a.shape||"circle")),(g=u.instancedColors).push.apply(g,(0,ga.Z)(a.color||[1,0,0,1])),(y=u.instancedOffsets).push.apply(y,(0,ga.Z)(a.position||[0,0])),(b=u.instancedSizes).push.apply(b,(0,ga.Z)(a.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var a=this,u={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(h,p){a.buildAttribute(h,u,p)}):this.buildAttribute(this.config,u,0),u}}]),i}(Qp),sA),iA=Dr(Oy.prototype,"materialSystem",[Rv,My],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oA=Dr(Oy.prototype,"geometrySystem",[kv,U2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sw=Dr(Oy.prototype,"shaderModuleService",[iw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oy))||ow),lA,aw,Py,Dy,cA,_0,uA,lw,dA,cw;function hA(n,r){var i;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(i=Ny(n))||r&&n&&typeof n.length=="number"){i&&(n=i);var s=0,a=function(){};return{s:a,n:function(){return s>=n.length?{done:!0}:{done:!1,value:n[s++]}},e:function(y){throw y},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,p;return{s:function(){i=n[Symbol.iterator]()},n:function(){var y=i.next();return u=y.done,y},e:function(y){h=!0,p=y},f:function(){try{!u&&i.return!=null&&i.return()}finally{if(h)throw p}}}}function Ny(n,r){if(n){if(typeof n=="string")return Iy(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Iy(n,r)}}function Iy(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,s=new Array(r);i<r;i++)s[i]=n[i];return s}var u3=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,cg=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,d3=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,Ry=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,h3=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,uw=(lA=(0,z.b2)(),aw=(0,z.f3)(dn.RenderEngine),Py=(0,z.f3)(dn.ShaderModuleService),Dy=(0,z.f3)(dn.ConfigService),lA(cA=(_0=(cw=function(){function n(){(0,br.Z)(this,n),this.container=void 0,Mr(this,"engine",uA,this),Mr(this,"shaderModule",lw,this),Mr(this,"configService",dA,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return(0,Br.Z)(n,[{key:"init",value:function(){var r=(0,no.Z)(fr().mark(function s(){var a,u,h,p,g;return fr().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:Ry}),this.shaderModule.registerModule("uv.vert.main",{vs:h3}),this.shaderModule.registerModule("uv.frag.declaration",{fs:d3}),this.shaderModule.registerModule("map.frag.declaration",{fs:u3}),this.shaderModule.registerModule("map.frag.main",{fs:cg}),a=this.container.getAll(dn.Systems),u=this.configService.get(),!u.canvas){b.next=30;break}return b.next=11,this.engine.init({canvas:u.canvas,swapChainFormat:Wn.EV.BGRA8Unorm,antialiasing:!1});case 11:h=hA(a),b.prev=12,h.s();case 14:if((p=h.n()).done){b.next=21;break}if(g=p.value,!g.initialize){b.next=19;break}return b.next=19,g.initialize();case 19:b.next=14;break;case 21:b.next=26;break;case 23:b.prev=23,b.t0=b.catch(12),h.e(b.t0);case 26:return b.prev=26,h.f(),b.finish(26);case 29:this.inited=!0;case 30:case"end":return b.stop()}},s,this,[[12,23,26,29]])}));function i(){return r.apply(this,arguments)}return i}()},{key:"render",value:function(){var r=(0,no.Z)(fr().mark(function s(){var a,u,h,p,g,y,b,E=arguments;return fr().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(!this.inited||this.rendering)){O.next=2;break}return O.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(I){I()}),this.rendering=!0,this.engine.beginFrame(),a=this.container.getAll(dn.Systems),u=E.length,h=new Array(u),p=0;p<u;p++)h[p]=E[p];g=hA(a),O.prev=8,g.s();case 10:if((y=g.n()).done){O.next=17;break}if(b=y.value,!b.execute){O.next=15;break}return O.next=15,b.execute(h);case 15:O.next=10;break;case 17:O.next=22;break;case 19:O.prev=19,O.t0=O.catch(8),g.e(O.t0);case 22:return O.prev=22,g.f(),O.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return O.stop()}},s,this,[[8,19,22,25]])}));function i(){return r.apply(this,arguments)}return i}()},{key:"clear",value:function(i){var s=this;return this.inited?this.engine.clear(i):this.pendings.unshift(function(){s.engine.clear(i),s.pendings.shift()}),this}},{key:"setSize",value:function(i){var s=i.width,a=i.height,u=this.engine.getCanvas();return this.size={width:s,height:a},u.width=s,u.height=a,this}},{key:"getSize",value:function(){return this.size}}]),n}(),cw),uA=Dr(_0.prototype,"engine",[aw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lw=Dr(_0.prototype,"shaderModule",[Py],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dA=Dr(_0.prototype,"configService",[Dy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_0))||cA),fA,dw,Gi,A0=(fA=(0,z.b2)(),fA(dw=(Gi=function(){function n(){(0,br.Z)(this,n),this.entities=[]}return(0,Br.Z)(n,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(i){return this.addEntity(i.getEntity()),this}},{key:"removeRenderable",value:function(i){return this.removeEntity(i.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(i){return this.entities.indexOf(i)===-1&&this.entities.push(i),this}},{key:"removeEntity",value:function(i){var s=this.entities.indexOf(i);return this.entities.splice(s,1),this}}]),n}(),Gi))||dw),pA,ky,bs,gA=(pA=(0,z.b2)(),pA(ky=(bs=function(){function n(){(0,br.Z)(this,n),this.cache={}}return(0,Br.Z)(n,[{key:"get",value:function(i){return this.cache[i]}},{key:"set",value:function(i,s){this.cache[i]=s}}]),n}(),bs))||ky),sl,vA,mA,V2,ug,Jd,f3,p3;function g3(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function v3(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?g3(Object(i),!0).forEach(function(s){(0,Bt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):g3(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var m3=(sl=(0,z.b2)(),vA=(0,z.f3)(gA),mA=(0,z.f3)(dn.RenderEngine),sl(V2=(ug=(p3=function(){function n(){(0,br.Z)(this,n),Mr(this,"textureCache",Jd,this),Mr(this,"engine",f3,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return(0,Br.Z)(n,[{key:"setConfig",value:function(i){this.config=i}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var r=(0,no.Z)(fr().mark(function s(){var a=this;return fr().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.config.url){h.next=4;break}return h.abrupt("return",new Promise(function(p,g){var y=a.textureCache.get(a.config.url);if(y)p(y);else{var b=new Image;b.crossOrigin="Anonymous",b.src=a.config.url,b.onload=function(){var E=a.engine.createTexture2D(v3(v3({},a.config),{},{data:b,width:b.width,height:b.height,flipY:!0}));a.textureCache.set(a.config.url,E),a.texture=E,a.loaded=!0,p(E)},b.onerror=function(){g()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),h.abrupt("return",this.texture);case 7:case"end":return h.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()}]),n}(),p3),Jd=Dr(ug.prototype,"textureCache",[vA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f3=Dr(ug.prototype,"engine",[mA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ug))||V2),y3,yA,hw,b3,bA,Ly,as,xA=(y3=(0,z.b2)(),yA=(0,z.f3)(dn.Systems),hw=(0,z.t6)(dn.RendererSystem),y3(b3=(bA=(as=function(){function n(){(0,br.Z)(this,n),Mr(this,"rendererSystem",Ly,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return(0,Br.Z)(n,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(i){return this.camera=i,this}},{key:"setScene",value:function(i){return this.scene=i,this}},{key:"setViewport",value:function(i){return this.viewport=i,this}},{key:"setClearColor",value:function(i){return this.clearColor=i,this}},{key:"pick",value:function(i){return this.rendererSystem.pick(i,this)}}]),n}(),as),Ly=Dr(bA.prototype,"rendererSystem",[yA,hw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bA))||b3),Jh,Fl,fw,j2,pw,wl;function Qd(n,r){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,s)}return i}function H2(n){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Qd(Object(i),!0).forEach(function(s){(0,Bt.Z)(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Qd(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}var T0=(Jh=(0,z.b2)(),Fl=(0,z.f3)(dn.ConfigService),Jh(fw=(j2=(wl=function(){function n(){(0,br.Z)(this,n),Mr(this,"configService",pw,this),this.container=void 0}return(0,Br.Z)(n,[{key:"getEngine",value:function(){var r=(0,no.Z)(fr().mark(function s(){var a,u,h,p;return fr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return a=this.container.get(dn.RenderEngine),u=this.configService.get(),h=u.canvas,p=u.engineOptions,y.next=4,a.init(H2({canvas:h||NS(),swapChainFormat:Wn.EV.BGRA8Unorm,antialiasing:!1},p));case 4:return y.abrupt("return",a);case 5:case"end":return y.stop()}},s,this)}));function i(){return r.apply(this,arguments)}return i}()},{key:"getTransformComponent",value:function(i){var s=this.container.get(dn.TransformComponentManager);return s.getComponentByEntity(i)}},{key:"getMeshComponent",value:function(i){var s=this.container.get(dn.MeshComponentManager);return s.getComponentByEntity(i)}},{key:"setConfig",value:function(i){this.configService.set(i)}},{key:"setContainer",value:function(i){this.container=i}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return bu()}},{key:"createScene",value:function(){return this.container.get(A0)}},{key:"createCamera",value:function(){return this.container.get(NC)}},{key:"createView",value:function(){return this.container.get(xA)}},{key:"createRenderable",value:function(i,s){var a=i?this.container.getNamed(dn.Renderable,i):this.container.get(Qp),u=bu();return a.setConfig(s||{}),a.setEntity(u),a}},{key:"createGeometry",value:function(i,s){var a=this.container.getNamed(dn.Geometry,i),u=bu();return a.setConfig(s||{}),a.setEntity(u),a.getComponent()}},{key:"createMaterial",value:function(i,s){var a=this.container.getNamed(dn.Material,i),u=bu();return a.setConfig(s||{}),a.setEntity(u,i),a.getComponent()}},{key:"createTexture2D",value:function(i){var s=this.container.get(m3);return s.setConfig(i),s}},{key:"createBufferGeometry",value:function(i){var s=this.container.getNamed(dn.Systems,dn.GeometrySystem);return s.createBufferGeometry(i)}},{key:"createInstancedBufferGeometry",value:function(i){var s=this.container.getNamed(dn.Systems,dn.GeometrySystem);return s.createInstancedBufferGeometry(i)}},{key:"createShaderMaterial",value:function(i){var s=this.container.getNamed(dn.Systems,dn.MaterialSystem);return s.createShaderMaterial(i)}},{key:"createKernel",value:function(i){var s=this.container.get(XS);return typeof i=="string"?s.setBundle(JSON.parse(i)):s.setBundle(i),s.init(),s}},{key:"createRenderer",value:function(){var i=this.container.get(uw);return i.container=this.container,i.init(),i}},{key:"destroy",value:function(){var i=this.container.getAll(dn.Systems);i.forEach(function(u){u.tearDown&&u.tearDown()});var s=this.container.get(dn.RenderEngine);s.destroy();var a=this.container.get(dn.InteractorService);a.destroy()}}],[{key:"create",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=C2(),a=navigator.gpu?I_:A_;s.isBound(dn.RenderEngine)||s.bind(dn.RenderEngine).to(a).inSingletonScope(),s.bind(uw).toSelf(),s.bind(XS).toSelf(),s.bind(Qp).toSelf(),s.bind(xA).toSelf(),s.bind(NC).toSelf(),s.bind(A0).toSelf(),s.bind(n).toSelf(),s.bind(gA).toSelf(),s.bind(m3).toSelf(),s.bind(dn.Geometry).to(L2).whenTargetNamed(Zd.BOX),s.bind(dn.Geometry).to(XO).whenTargetNamed(Zd.SPHERE),s.bind(dn.Geometry).to(HO).whenTargetNamed(Zd.PLANE),s.bind(dn.Geometry).to(jO).whenTargetNamed(Zd.MERGED),s.bind(dn.Material).to(V_).whenTargetNamed(QS.BASIC),s.bind(dn.Renderable).to(c3).whenTargetNamed(Qp.POINT),s.bind(dn.Renderable).to(i3).whenTargetNamed(Qp.LINE),s.bind(dn.Renderable).to(B2).whenTargetNamed(Qp.GRID);var u=s.get(n);return u.setContainer(s),u.setConfig(i),u}}]),n}(),wl),pw=Dr(j2.prototype,"configService",[Fl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j2))||fw);const Gy=(n,r)=>{let i;return n?Jn(n)?i=()=>n:i=n:i=()=>r||1,i},x3=(n,r)=>{const i=[],s=[],a={};let u=0;for(u=0;u<n.length;u++){const p=n[u];a[p.id]=u,i.push(p.x),i.push(p.y),i.push(0),i.push(0),s.push([])}for(u=0;u<r.length;u++){const p=r[u],g=Ci(p,"source"),y=Ci(p,"target");s[a[g]].push(a[y]),s[a[y]].push(a[g])}let h=0;for(u=0;u<n.length;u++){const p=i.length,g=s[u],y=g.length;i[u*4+2]=p,i[u*4+3]=g.length,h=Math.max(h,g.length);for(let b=0;b<y;++b){const E=g[b];i.push(+E)}}for(;i.length%4!==0;)i.push(0);return{maxEdgePerVetex:h,array:new Float32Array(i)}},np=(n,r,i,s)=>{const a=[],u=[],h={};let p=0;for(p=0;p<n.length;p++){const y=n[p];h[y.id]=p,a.push(y.x),a.push(y.y),a.push(0),a.push(0),u.push([])}for(p=0;p<r.length;p++){const y=r[p],b=Ci(y,"source"),E=Ci(y,"target");u[h[b]].push(h[E]),u[h[b]].push(i(y)),u[h[b]].push(s(y)),u[h[b]].push(0),u[h[E]].push(h[b]),u[h[E]].push(i(y)),u[h[E]].push(s(y)),u[h[E]].push(0)}let g=0;for(p=0;p<n.length;p++){const y=a.length,b=u[p],E=b.length;a[p*4+2]=y+1048576*E/4,a[p*4+3]=0,g=Math.max(g,E/4);for(let T=0;T<E;++T){const O=b[T];a.push(+O)}}for(;a.length%4!==0;)a.push(0);return{maxEdgePerVetex:g,array:new Float32Array(a)}},HP=(n,r)=>{const i=[],s=n.length,a={};return r.forEach(u=>{n.forEach((h,p)=>{if(a[u[h]]===void 0&&(a[u[h]]=Object.keys(a).length),i.push(a[u[h]]),p===s-1)for(;i.length%4!==0;)i.push(0)})}),{array:new Float32Array(i),count:Object.keys(a).length}},C3=n=>{const r=[],i=n.length,s=n[0].length;for(let a=0;a<s;a++)n.forEach((u,h)=>{if(r.push(u[a]),h===i-1)for(;r.length%4!==0;)r.push(0)});return new Float32Array(r)},sN=null,gw='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',aN=null,$P='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var $2=function(n,r,i,s){function a(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(b){try{y(s.next(b))}catch(E){h(E)}}function g(b){try{y(s.throw(b))}catch(E){h(E)}}function y(b){b.done?u(b.value):a(b.value).then(p,g)}y((s=s.apply(n,r||[])).next())})};class Gv extends Go{constructor(r){super(),this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return $2(this,void 0,void 0,function*(){const r=this,i=r.nodes;if(!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const s=r.center;if(i.length===1){i[0].x=s[0],i[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}const a={},u={};i.forEach((h,p)=>{Jn(h.x)||(h.x=Math.random()*this.width),Jn(h.y)||(h.y=Math.random()*this.height),a[h.id]=h,u[h.id]=p}),r.nodeMap=a,r.nodeIdxMap=u,yield r.run()})}executeWithWorker(r,i){return $2(this,void 0,void 0,function*(){const s=this,a=s.nodes,u=s.center;if(!a||a.length===0)return;if(a.length===1){a[0].x=u[0],a[0].y=u[1];return}const h={},p={};a.forEach((g,y)=>{Jn(g.x)||(g.x=Math.random()*this.width),Jn(g.y)||(g.y=Math.random()*this.height),h[g.id]=g,p[g.id]=y}),s.nodeMap=h,s.nodeIdxMap=p,yield s.run(r,i)})}run(r,i){return $2(this,void 0,void 0,function*(){const s=this,a=s.nodes,u=s.edges,h=s.maxIteration,p=s.center,g=s.height*s.width;let y=Math.sqrt(g)/10;const b=g/(a.length+1),E=Math.sqrt(b),T=s.speed,O=s.clustering,{array:I,count:k}=HP([s.clusterField],a);a.forEach((_t,en)=>{let ct=0,Hn=0;Jn(_t.fx)&&Jn(_t.fy)&&(ct=_t.fx||.001,Hn=_t.fy||.001),I[4*en+1]=ct,I[4*en+2]=Hn});const B=a.length,{maxEdgePerVetex:$,array:X}=x3(a,u),re=s.workerEnabled;let ye;re?ye=T0.create({canvas:r,engineOptions:{supportCompute:!0}}):ye=T0.create({engineOptions:{supportCompute:!0}});const me=s.onLayoutEnd,We=[];for(let _t=0;_t<k;_t++)We.push(0,0,0,0);const at=ye.createKernel(gw).setDispatch([B,1,1]).setBinding({u_Data:X,u_K:E,u_K2:b,u_Gravity:s.gravity,u_ClusterGravity:s.clusterGravity||s.gravity||1,u_Speed:T,u_MaxDisplace:y,u_Clustering:O?1:0,u_Center:p,u_AttributeArray:I,u_ClusterCenters:We,MAX_EDGE_PER_VERTEX:$,VERTEX_COUNT:B});let ft;O&&(ft=ye.createKernel($P).setDispatch([k,1,1]).setBinding({u_Data:X,u_NodeAttributes:I,u_ClusterCenters:We,VERTEX_COUNT:B,CLUSTER_COUNT:k})),yield(()=>$2(this,void 0,void 0,function*(){for(let en=0;en<h;en++)yield at.execute(),O&&(ft.setBinding({u_Data:at}),yield ft.execute(),at.setBinding({u_ClusterCenters:ft})),at.setBinding({u_MaxDisplace:y*=.99});const _t=yield at.getOutput();r?i.postMessage({type:ps.GPUEND,vertexEdgeData:_t}):a.forEach((en,ct)=>{const Hn=_t[4*ct],Gn=_t[4*ct+1];en.x=Hn,en.y=Gn}),me&&me()}))()})}getType(){return"fruchterman-gpu"}}const lN=null,WP='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',XP=null,ZP='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var vw=function(n,r,i,s){function a(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function p(b){try{y(s.next(b))}catch(E){h(E)}}function g(b){try{y(s.throw(b))}catch(E){h(E)}}function y(b){b.done?u(b.value):a(b.value).then(p,g)}y((s=s.apply(n,r||[])).next())})};class YP extends Go{constructor(r){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return vw(this,void 0,void 0,function*(){const r=this,i=r.nodes;if(!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const s=r.center;if(i.length===1){i[0].x=s[0],i[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}const a={},u={};i.forEach((h,p)=>{Jn(h.x)||(h.x=Math.random()*r.width),Jn(h.y)||(h.y=Math.random()*r.height),a[h.id]=h,u[h.id]=p}),r.nodeMap=a,r.nodeIdxMap=u,r.nodeStrength=Gy(r.nodeStrength,1),r.edgeStrength=Gy(r.edgeStrength,1),yield r.run()})}executeWithWorker(r,i){const s=this,a=s.nodes,u=s.center;if(!a||a.length===0)return;if(a.length===1){a[0].x=u[0],a[0].y=u[1];return}const h={},p={};a.forEach((g,y)=>{Jn(g.x)||(g.x=Math.random()*s.width),Jn(g.y)||(g.y=Math.random()*s.height),h[g.id]=g,p[g.id]=y}),s.nodeMap=h,s.nodeIdxMap=p,s.nodeStrength=Gy(s.nodeStrength,1),s.edgeStrength=Gy(s.edgeStrength,1),s.run(r,i)}run(r,i){return vw(this,void 0,void 0,function*(){const s=this,a=s.nodes,u=s.edges,h=s.maxIteration;!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight);const p=a.length;s.linkDistance=Gy(s.linkDistance),s.edgeStrength=Gy(s.edgeStrength);const{maxEdgePerVetex:g,array:y}=np(a,u,s.linkDistance,s.edgeStrength);s.degrees=Ga(a.length,s.nodeIdxMap,u);const b=[],E=[],T=[],O=[],I=[],k=[],B=[];s.getMass||(s.getMass=ct=>s.degrees[s.nodeIdxMap[ct.id]]||1);const $=s.gravity,X=s.center;a.forEach((ct,Hn)=>{b.push(s.getMass(ct)),E.push(s.nodeStrength(ct)),s.degrees[Hn]||(s.degrees[Hn]=0);let Gn=[X[0],X[1],$];if(s.getCenter){const rr=s.getCenter(ct,s.degrees[Hn]);rr&&Jn(rr[0])&&Jn(rr[1])&&Jn(rr[2])&&(Gn=rr)}T.push(Gn[0]),O.push(Gn[1]),I.push(Gn[2]),Jn(ct.fx)&&Jn(ct.fy)?(k.push(ct.fx||.001),B.push(ct.fy||.001)):(k.push(0),B.push(0))});const re=C3([b,s.degrees,E,k]),ye=C3([T,O,I,B]),me=s.workerEnabled;let We;me?We=T0.create({canvas:r,engineOptions:{supportCompute:!0}}):We=T0.create({engineOptions:{supportCompute:!0}});const at=s.onLayoutEnd,ft=[];y.forEach(ct=>{ft.push(ct)});for(let ct=0;ct<4;ct++)ft.push(0);const Qt=We.createKernel(WP).setDispatch([p,1,1]).setBinding({u_Data:y,u_damping:s.damping,u_maxSpeed:s.maxSpeed,u_minMovement:s.minMovement,u_coulombDisScale:s.coulombDisScale,u_factor:s.factor,u_NodeAttributeArray1:re,u_NodeAttributeArray2:ye,MAX_EDGE_PER_VERTEX:g,VERTEX_COUNT:p,u_AveMovement:ft,u_interval:s.interval}),_t=We.createKernel(ZP).setDispatch([1,1,1]).setBinding({u_Data:y,VERTEX_COUNT:p,u_AveMovement:[0,0,0,0]});yield(()=>vw(this,void 0,void 0,function*(){for(let Hn=0;Hn<h;Hn++){yield Qt.execute(),_t.setBinding({u_Data:Qt}),yield _t.execute();const Gn=Math.max(.02,s.interval-Hn*.002);Qt.setBinding({u_interval:Gn,u_AveMovement:_t})}const ct=yield Qt.getOutput();r?i.postMessage({type:ps.GPUEND,vertexEdgeData:ct}):a.forEach((Hn,Gn)=>{const rr=ct[4*Gn],Vi=ct[4*Gn+1];Hn.x=rr,Hn.y=Vi}),at&&at()}))()})}getType(){return"gForce-gpu"}}class KP extends Go{constructor(r){super(),this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(r)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const r=this,i=r.nodes,s=r.center;if(r.comboTree={id:"comboTreeRoot",depth:-1,children:r.comboTrees},!i||i.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(i.length===1){i[0].x=s[0],i[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}r.initVals(),r.run(),r.onLayoutEnd&&r.onLayoutEnd()}run(){const r=this,i=r.nodes,s=r.previousLayouted?r.maxIteration/5:r.maxIteration;!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight);const a=r.center,u=r.velocityDecay,h=r.comboMap;r.previousLayouted||r.initPos(h);for(let y=0;y<s;y++){const b=[];i.forEach((E,T)=>{b[T]={x:0,y:0}}),r.applyCalculate(b),r.applyComboCenterForce(b),i.forEach((E,T)=>{!Jn(E.x)||!Jn(E.y)||(E.x+=b[T].x*u,E.y+=b[T].y*u)}),r.alpha+=(r.alphaTarget-r.alpha)*r.alphaDecay,r.onTick()}const p=[0,0];i.forEach(y=>{!Jn(y.x)||!Jn(y.y)||(p[0]+=y.x,p[1]+=y.y)}),p[0]/=i.length,p[1]/=i.length;const g=[a[0]-p[0],a[1]-p[1]];i.forEach((y,b)=>{!Jn(y.x)||!Jn(y.y)||(y.x+=g[0],y.y+=g[1])}),r.combos.forEach(y=>{const b=h[y.id];b&&b.empty&&(y.x=b.cx||y.x,y.y=b.cy||y.y)}),r.previousLayouted=!0}initVals(){const r=this,i=r.edges,s=r.nodes,a=r.combos,u={},h={},p={};s.forEach((_t,en)=>{h[_t.id]=_t,p[_t.id]=en}),r.nodeMap=h,r.indexMap=p;const g={};a.forEach(_t=>{g[_t.id]=_t}),r.oriComboMap=g,r.comboMap=r.getComboMap();const y=r.preventOverlap;r.preventComboOverlap=r.preventComboOverlap||y,r.preventNodeOverlap=r.preventNodeOverlap||y;const b=r.collideStrength;b&&(r.comboCollideStrength=b,r.nodeCollideStrength=b),r.comboCollideStrength=r.comboCollideStrength?r.comboCollideStrength:0,r.nodeCollideStrength=r.nodeCollideStrength?r.nodeCollideStrength:0;for(let _t=0;_t<i.length;++_t){const en=Ci(i[_t],"source"),ct=Ci(i[_t],"target");u[en]?u[en]++:u[en]=1,u[ct]?u[ct]++:u[ct]=1}const E=[];for(let _t=0;_t<i.length;++_t){const en=Ci(i[_t],"source"),ct=Ci(i[_t],"target");E[_t]=u[en]/(u[en]+u[ct])}this.bias=E;const T=r.nodeSize,O=r.nodeSpacing;let I,k;if(Jn(O)?k=()=>O:To(O)?k=O:k=()=>0,this.nodeSpacing=k,!T)I=_t=>_t.size?Ns(_t.size)?(_t.size[0]>_t.size[1]?_t.size[0]:_t.size[1])/2:yl(_t.size)?(_t.size.width>_t.size.height?_t.size.width:_t.size.height)/2:_t.size/2:10;else if(To(T))I=_t=>T(_t);else if(Ns(T)){const en=(T[0]>T[1]?T[0]:T[1])/2;I=ct=>en}else{const _t=T/2;I=en=>_t}this.nodeSize=I;const B=r.comboSpacing;let $;Jn(B)?$=()=>B:To(B)?$=B:$=()=>0,this.comboSpacing=$;const X=r.comboPadding;let re;Jn(X)?re=()=>X:Ns(X)?re=()=>Math.max.apply(null,X):To(X)?re=X:re=()=>0,this.comboPadding=re;let ye=this.linkDistance,me;ye||(ye=10),Jn(ye)?me=_t=>ye:me=ye,this.linkDistance=me;let We=this.edgeStrength,at;We||(We=1),Jn(We)?at=_t=>We:at=We,this.edgeStrength=at;let ft=this.nodeStrength,Qt;ft||(ft=30),Jn(ft)?Qt=_t=>ft:Qt=ft,this.nodeStrength=Qt}initPos(r){this.nodes.forEach((a,u)=>{const h=a.comboId,p=r[h];h&&p?(a.x=p.cx+100/(u+1),a.y=p.cy+100/(u+1)):(a.x=100/(u+1),a.y=100/(u+1))})}getComboMap(){const r=this,i=r.nodeMap,s=r.comboTrees,a=r.oriComboMap,u={};return(s||[]).forEach(h=>{const p=[];Bc(h,g=>{if(g.itemType==="node"||!a[g.id])return!0;if(u[g.id]===void 0){const E={id:g.id,name:g.id,cx:0,cy:0,count:0,depth:r.oriComboMap[g.id].depth||0,children:[]};u[g.id]=E}const y=g.children;y&&y.forEach(E=>{if(!u[E.id]&&!i[E.id])return!0;p.push(E)});const b=u[g.id];if(b.cx=0,b.cy=0,p.length===0){b.empty=!0;const E=a[g.id];b.cx=E.x,b.cy=E.y}return p.forEach(E=>{if(b.count++,E.itemType!=="node"){const O=u[E.id];Jn(O.cx)&&(b.cx+=O.cx),Jn(O.cy)&&(b.cy+=O.cy);return}const T=i[E.id];T&&(Jn(T.x)&&(b.cx+=T.x),Jn(T.y)&&(b.cy+=T.y))}),b.cx/=b.count||1,b.cy/=b.count||1,b.children=p,!0})}),u}applyComboCenterForce(r){const i=this,s=i.gravity,a=i.comboGravity||s,u=this.alpha,h=i.comboTrees,p=i.indexMap,g=i.nodeMap,y=i.comboMap;(h||[]).forEach(b=>{Bc(b,E=>{if(E.itemType==="node"||!y[E.id])return!0;const O=y[E.id],I=(O.depth+1)/10*.5,k=O.cx,B=O.cy;return O.cx=0,O.cy=0,O.children.forEach($=>{if($.itemType!=="node"){const ft=y[$.id];ft&&Jn(ft.cx)&&(O.cx+=ft.cx),ft&&Jn(ft.cy)&&(O.cy+=ft.cy);return}const X=g[$.id],re=X.x-k||.005,ye=X.y-B||.005,me=Math.sqrt(re*re+ye*ye),We=p[X.id],at=a*u/me*I;r[We].x-=re*at,r[We].y-=ye*at,Jn(X.x)&&(O.cx+=X.x),Jn(X.y)&&(O.cy+=X.y)}),O.cx/=O.count||1,O.cy/=O.count||1,!0})})}applyCalculate(r){const i=this,s=i.comboMap,a=i.nodes,u={};a.forEach((p,g)=>{a.forEach((y,b)=>{if(g<b)return;const E=p.x-y.x||.005,T=p.y-y.y||.005;let O=E*E+T*T;const I=Math.sqrt(O);O<1&&(O=I),u[`${p.id}-${y.id}`]={vx:E,vy:T,vl2:O,vl:I},u[`${y.id}-${p.id}`]={vl2:O,vl:I,vx:-E,vy:-T}})}),i.updateComboSizes(s),i.calRepulsive(r,u),i.calAttractive(r,u),i.preventComboOverlap&&i.comboNonOverlapping(r,s)}updateComboSizes(r){const i=this,s=i.comboTrees,a=i.nodeMap,u=i.nodeSize,h=i.comboSpacing,p=i.comboPadding;(s||[]).forEach(g=>{const y=[];Bc(g,b=>{if(b.itemType==="node")return!0;const E=r[b.id];if(!E)return!1;const T=b.children;T&&T.forEach(k=>{!r[k.id]&&!a[k.id]||y.push(k)}),E.minX=1/0,E.minY=1/0,E.maxX=-1/0,E.maxY=-1/0,y.forEach(k=>{if(k.itemType!=="node")return!0;const B=a[k.id];if(!B)return!0;const $=u(B),X=B.x-$,re=B.y-$,ye=B.x+$,me=B.y+$;E.minX>X&&(E.minX=X),E.minY>re&&(E.minY=re),E.maxX<ye&&(E.maxX=ye),E.maxY<me&&(E.maxY=me)});let O=i.oriComboMap[b.id].size||10;Ns(O)&&(O=O[0]);const I=Math.max(E.maxX-E.minX,E.maxY-E.minY,O);return E.r=I/2+h(E)/2+p(E),!0})})}comboNonOverlapping(r,i){const s=this,a=s.comboTree,u=s.comboCollideStrength,h=s.indexMap,p=s.nodeMap;Bc(a,g=>{if(!i[g.id]&&!p[g.id]&&g.id!=="comboTreeRoot")return!1;const y=g.children;return y&&y.length>1&&y.forEach((b,E)=>{if(b.itemType==="node")return!1;const T=i[b.id];T&&y.forEach((O,I)=>{if(E<=I||O.itemType==="node")return!1;const k=i[O.id];if(!k)return!1;const B=T.cx-k.cx||.005,$=T.cy-k.cy||.005,X=B*B+$*$,re=T.r||1,ye=k.r||1,me=re+ye,We=ye*ye,at=re*re;if(X<me*me){const ft=b.children;if(!ft||ft.length===0)return!1;const Qt=O.children;if(!Qt||Qt.length===0)return!1;const _t=Math.sqrt(X),en=(me-_t)/_t*u,ct=B*en,Hn=$*en,Gn=We/(at+We),rr=1-Gn;ft.forEach(Vi=>{if(Vi.itemType!=="node")return!1;if(!p[Vi.id])return;const ji=h[Vi.id];Qt.forEach(ai=>{if(ai.itemType!=="node"||!p[ai.id])return!1;const Zo=h[ai.id];r[ji].x+=ct*Gn,r[ji].y+=Hn*Gn,r[Zo].x-=ct*rr,r[Zo].y-=Hn*rr})})}})}),!0})}calRepulsive(r,i){const s=this,a=s.nodes,u=s.width*s.optimizeRangeFactor,h=s.nodeStrength,p=s.alpha,g=s.nodeCollideStrength,y=s.preventNodeOverlap,b=s.nodeSize,E=s.nodeSpacing,T=s.depthRepulsiveForceScale,O=s.center;a.forEach((I,k)=>{if(!(!I.x||!I.y)){if(O){const B=s.gravity,$=I.x-O[0]||.005,X=I.y-O[1]||.005,re=Math.sqrt($*$+X*X);r[k].x-=$*B*p/re,r[k].y-=X*B*p/re}a.forEach((B,$)=>{if(k===$||!B.x||!B.y)return;const{vl2:X,vl:re}=i[`${I.id}-${B.id}`];if(re>u)return;const{vx:ye,vy:me}=i[`${I.id}-${B.id}`];let We=Math.log(Math.abs(B.depth-I.depth)/10)+1||1;We=We<1?1:We,B.comboId!==I.comboId&&(We+=1);const at=We?Math.pow(T,We):1,ft=h(B)*p/X*at;if(r[k].x+=ye*ft,r[k].y+=me*ft,k<$&&y){const Qt=b(I)+E(I)||1,_t=b(B)+E(B)||1,en=Qt+_t;if(X<en*en){const ct=(en-re)/re*g,Hn=_t*_t;let Gn=Hn/(Qt*Qt+Hn);const rr=ye*ct,Vi=me*ct;r[k].x+=rr*Gn,r[k].y+=Vi*Gn,Gn=1-Gn,r[$].x-=rr*Gn,r[$].y-=Vi*Gn}}})}})}calAttractive(r,i){const s=this,a=s.edges,u=s.linkDistance,h=s.alpha,p=s.edgeStrength,g=s.bias,y=s.depthAttractiveForceScale;a.forEach((b,E)=>{const T=Ci(b,"source"),O=Ci(b,"target");if(!T||!O||T===O)return;const I=s.indexMap[T],k=s.indexMap[O],B=s.nodeMap[T],$=s.nodeMap[O];if(!B||!$)return;let X=B.depth===$.depth?0:Math.log(Math.abs(B.depth-$.depth)/10);B.comboId===$.comboId&&(X=X/2);let re=X?Math.pow(y,X):1;if(B.comboId!==$.comboId&&re===1?re=y/2:B.comboId===$.comboId&&(re=2),!Jn($.x)||!Jn(B.x)||!Jn($.y)||!Jn(B.y))return;const{vl:ye,vx:me,vy:We}=i[`${O}-${T}`],at=(ye-u(b))/ye*h*p(b)*re,ft=me*at,Qt=We*at,_t=g[E];r[k].x-=ft*_t,r[k].y-=Qt*_t,r[I].x+=ft*(1-_t),r[I].y+=Qt*(1-_t)})}getType(){return"comboForce"}}class CA{constructor(r){this.id=r.id||0,this.rx=r.rx,this.ry=r.ry,this.fx=0,this.fy=0,this.mass=r.mass,this.degree=r.degree,this.g=r.g||0}distanceTo(r){const i=this.rx-r.rx,s=this.ry-r.ry;return Math.hypot(i,s)}setPos(r,i){this.rx=r,this.ry=i}resetForce(){this.fx=0,this.fy=0}addForce(r){const i=r.rx-this.rx,s=r.ry-this.ry;let a=Math.hypot(i,s);a=a<1e-4?1e-4:a;const u=this.g*(this.degree+1)*(r.degree+1)/a;this.fx+=u*i/a,this.fy+=u*s/a}in(r){return r.contains(this.rx,this.ry)}add(r){const i=this.mass+r.mass,s=(this.rx*this.mass+r.rx*r.mass)/i,a=(this.ry*this.mass+r.ry*r.mass)/i,u=this.degree+r.degree,h={rx:s,ry:a,mass:i,degree:u};return new CA(h)}}class Fy{constructor(r){this.xmid=r.xmid,this.ymid=r.ymid,this.length=r.length,this.massCenter=r.massCenter||[0,0],this.mass=r.mass||1}getLength(){return this.length}contains(r,i){const s=this.length/2;return r<=this.xmid+s&&r>=this.xmid-s&&i<=this.ymid+s&&i>=this.ymid-s}NW(){const r=this.xmid-this.length/4,i=this.ymid+this.length/4,s=this.length/2,a={xmid:r,ymid:i,length:s};return new Fy(a)}NE(){const r=this.xmid+this.length/4,i=this.ymid+this.length/4,s=this.length/2,a={xmid:r,ymid:i,length:s};return new Fy(a)}SW(){const r=this.xmid-this.length/4,i=this.ymid-this.length/4,s=this.length/2,a={xmid:r,ymid:i,length:s};return new Fy(a)}SE(){const r=this.xmid+this.length/4,i=this.ymid-this.length/4,s=this.length/2,a={xmid:r,ymid:i,length:s};return new Fy(a)}}class By{constructor(r){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,r!=null&&(this.quad=r)}insert(r){if(this.body==null){this.body=r;return}this._isExternal()?(this.quad&&(this.NW=new By(this.quad.NW()),this.NE=new By(this.quad.NE()),this.SW=new By(this.quad.SW()),this.SE=new By(this.quad.SE())),this._putBody(this.body),this._putBody(r),this.body=this.body.add(r)):(this.body=this.body.add(r),this._putBody(r))}_putBody(r){this.quad&&(r.in(this.quad.NW())&&this.NW?this.NW.insert(r):r.in(this.quad.NE())&&this.NE?this.NE.insert(r):r.in(this.quad.SW())&&this.SW?this.SW.insert(r):r.in(this.quad.SE())&&this.SE&&this.SE.insert(r))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(r){if(!(this.body==null||r===this.body))if(this._isExternal())r.addForce(this.body);else{const i=this.quad?this.quad.getLength():0,s=this.body.distanceTo(r);i/s<this.theta?r.addForce(this.body):(this.NW&&this.NW.updateForce(r),this.NE&&this.NE.updateForce(r),this.SW&&this.SW.updateForce(r),this.SE&&this.SE.updateForce(r))}}}class mw extends Go{constructor(r){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(r)}getDefaultCfg(){return{}}execute(){const r=this,{nodes:i,onLayoutEnd:s,prune:a}=r;let u=r.maxIteration;!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight);const h=[],p=i.length;for(let g=0;g<p;g+=1){const y=i[g];let b=10,E=10;Jn(y.size)&&(b=y.size,E=y.size),Ns(y.size)?(isNaN(y.size[0])||(b=y.size[0]),isNaN(y.size[1])||(E=y.size[1])):yl(y.size)&&(b=y.size.width,E=y.size.height),r.getWidth&&!isNaN(r.getWidth(y))&&(E=r.getWidth(y)),r.getHeight&&!isNaN(r.getHeight(y))&&(b=r.getHeight(y));const T=Math.max(b,E);h.push(T)}r.barnesHut===void 0&&p>250&&(r.barnesHut=!0),r.prune===void 0&&p>100&&(r.prune=!0),this.maxIteration===0&&!r.prune?(u=250,p<=200&&p>100?u=1e3:p>200&&(u=1200),this.maxIteration=u):this.maxIteration===0&&a&&(u=100,p<=200&&p>100?u=500:p>200&&(u=950),this.maxIteration=u),r.kr||(r.kr=50,p>100&&p<=500?r.kr=20:p>500&&(r.kr=1)),r.kg||(r.kg=20,p>100&&p<=500?r.kg=10:p>500&&(r.kg=1)),this.nodes=r.updateNodesByForces(h),s()}updateNodesByForces(r){const i=this,{edges:s,maxIteration:a}=i;let u=i.nodes;const h=s.filter(I=>{const k=Ci(I,"source"),B=Ci(I,"target");return k!==B}),p=u.length,g=h.length,y=[],b={},E={},T=[];for(let I=0;I<p;I+=1)b[u[I].id]=I,y[I]=0,(u[I].x===void 0||isNaN(u[I].x))&&(u[I].x=Math.random()*1e3),(u[I].y===void 0||isNaN(u[I].y))&&(u[I].y=Math.random()*1e3),T.push({x:u[I].x,y:u[I].y});for(let I=0;I<g;I+=1){let k,B,$=0,X=0;for(let re=0;re<p;re+=1){const ye=Ci(h[I],"source"),me=Ci(h[I],"target");u[re].id===ye?(k=u[re],$=re):u[re].id===me&&(B=u[re],X=re),E[I]={sourceIdx:$,targetIdx:X}}k&&(y[b[k.id]]+=1),B&&(y[b[B.id]]+=1)}let O=a;if(u=this.iterate(O,b,E,g,y,r),i.prune){for(let I=0;I<g;I+=1)y[E[I].sourceIdx]<=1?(u[E[I].sourceIdx].x=u[E[I].targetIdx].x,u[E[I].sourceIdx].y=u[E[I].targetIdx].y):y[E[I].targetIdx]<=1&&(u[E[I].targetIdx].x=u[E[I].sourceIdx].x,u[E[I].targetIdx].y=u[E[I].sourceIdx].y);i.prune=!1,i.barnesHut=!1,O=100,u=this.iterate(O,b,E,g,y,r)}return u}iterate(r,i,s,a,u,h){const p=this;let{nodes:g}=p;const{kr:y,preventOverlap:b}=p,{barnesHut:E}=p,T=g.length;let O=0;const I=100;let k=r;const B=50;let $=[];const X=[],re=[];for(let ye=0;ye<T;ye+=1)if($[2*ye]=0,$[2*ye+1]=0,E){const me={id:ye,rx:g[ye].x,ry:g[ye].y,mass:1,g:y,degree:u[ye]};re[ye]=new CA(me)}for(;k>0;){for(let me=0;me<T;me+=1)X[2*me]=$[2*me],X[2*me+1]=$[2*me+1],$[2*me]=0,$[2*me+1]=0;$=this.getAttrForces(k,B,a,i,s,u,h,$),E&&(b&&k>B||!b)?$=this.getOptRepGraForces($,re,u):$=this.getRepGraForces(k,B,$,I,h,u);const ye=this.updatePos($,X,O,u);g=ye.nodes,O=ye.sg,k--,p.tick&&p.tick()}return g}getAttrForces(r,i,s,a,u,h,p,g){const y=this,{nodes:b,preventOverlap:E,dissuadeHubs:T,mode:O,prune:I}=y;for(let k=0;k<s;k+=1){const B=b[u[k].sourceIdx],$=u[k].sourceIdx,X=b[u[k].targetIdx],re=u[k].targetIdx;if(I&&(h[$]<=1||h[re]<=1))continue;const ye=[X.x-B.x,X.y-B.y];let me=Math.hypot(ye[0],ye[1]);me=me<1e-4?1e-4:me,ye[0]=ye[0]/me,ye[1]=ye[1]/me,E&&r<i&&(me=me-p[$]-p[re]);let We=me,at=We;O==="linlog"&&(We=Math.log(1+me),at=We),T&&(We=me/h[$],at=me/h[re]),E&&r<i&&me<=0?(We=0,at=0):E&&r<i&&me>0&&(We=me,at=me),g[2*a[B.id]]+=We*ye[0],g[2*a[X.id]]-=at*ye[0],g[2*a[B.id]+1]+=We*ye[1],g[2*a[X.id]+1]-=at*ye[1]}return g}getRepGraForces(r,i,s,a,u,h){const p=this,{nodes:g,preventOverlap:y,kr:b,kg:E,center:T,prune:O}=p,I=g.length;for(let k=0;k<I;k+=1){for(let re=k+1;re<I;re+=1){if(O&&(h[k]<=1||h[re]<=1))continue;const ye=[g[re].x-g[k].x,g[re].y-g[k].y];let me=Math.hypot(ye[0],ye[1]);me=me<1e-4?1e-4:me,ye[0]=ye[0]/me,ye[1]=ye[1]/me,y&&r<i&&(me=me-u[k]-u[re]);let We=b*(h[k]+1)*(h[re]+1)/me;y&&r<i&&me<0?We=a*(h[k]+1)*(h[re]+1):y&&r<i&&me===0?We=0:y&&r<i&&me>0&&(We=b*(h[k]+1)*(h[re]+1)/me),s[2*k]-=We*ye[0],s[2*re]+=We*ye[0],s[2*k+1]-=We*ye[1],s[2*re+1]+=We*ye[1]}const B=[g[k].x-T[0],g[k].y-T[1]],$=Math.hypot(B[0],B[1]);B[0]=B[0]/$,B[1]=B[1]/$;const X=E*(h[k]+1);s[2*k]-=X*B[0],s[2*k+1]-=X*B[1]}return s}getOptRepGraForces(r,i,s){const a=this,{nodes:u,kg:h,center:p,prune:g}=a,y=u.length;let b=9e10,E=-9e10,T=9e10,O=-9e10;for(let X=0;X<y;X+=1)g&&s[X]<=1||(i[X].setPos(u[X].x,u[X].y),u[X].x>=E&&(E=u[X].x),u[X].x<=b&&(b=u[X].x),u[X].y>=O&&(O=u[X].y),u[X].y<=T&&(T=u[X].y));const I=Math.max(E-b,O-T),k={xmid:(E+b)/2,ymid:(O+T)/2,length:I,massCenter:p,mass:y},B=new Fy(k),$=new By(B);for(let X=0;X<y;X+=1)g&&s[X]<=1||i[X].in(B)&&$.insert(i[X]);for(let X=0;X<y;X+=1){if(g&&s[X]<=1)continue;i[X].resetForce(),$.updateForce(i[X]),r[2*X]-=i[X].fx,r[2*X+1]-=i[X].fy;const re=[u[X].x-p[0],u[X].y-p[1]];let ye=Math.hypot(re[0],re[1]);ye=ye<1e-4?1e-4:ye,re[0]=re[0]/ye,re[1]=re[1]/ye;const me=h*(s[X]+1);r[2*X]-=me*re[0],r[2*X+1]-=me*re[1]}return r}updatePos(r,i,s,a){const u=this,{nodes:h,ks:p,tao:g,prune:y,ksmax:b}=u,E=h.length,T=[],O=[];let I=0,k=0;for(let $=0;$<E;$+=1){if(y&&a[$]<=1)continue;const X=[r[2*$]-i[2*$],r[2*$+1]-i[2*$+1]],re=Math.hypot(X[0],X[1]),ye=[r[2*$]+i[2*$],r[2*$+1]+i[2*$+1]],me=Math.hypot(ye[0],ye[1]);T[$]=re,O[$]=me/2,I+=(a[$]+1)*T[$],k+=(a[$]+1)*O[$]}const B=s;s=g*k/I,B!==0&&(s=s>1.5*B?1.5*B:s);for(let $=0;$<E;$+=1){if(y&&a[$]<=1)continue;let X=p*s/(1+s*Math.sqrt(T[$])),re=Math.hypot(r[2*$],r[2*$+1]);re=re<1e-4?1e-4:re;const ye=b/re;X=X>ye?ye:X;const me=X*r[2*$],We=X*r[2*$+1];h[$].x+=me,h[$].y+=We}return{nodes:h,sg:s}}}class dg{constructor(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}init(r,i,s){this.cells=[],this.CELL_W=s.CELL_W||dg.DEFAULT_CELL_W,this.CELL_H=s.CELL_H||dg.DEFAULT_CELL_H,this.columnNum=Math.ceil(r/this.CELL_W),this.rowNum=Math.ceil(i/this.CELL_H),dg.MIN_DIST=Math.pow(r,2)+Math.pow(i,2);for(let a=0;a<this.columnNum;a++){const u=[];for(let h=0;h<this.rowNum;h++){const p={dx:a,dy:h,x:a*this.CELL_W,y:h*this.CELL_H,occupied:!1};u.push(p)}this.cells.push(u)}}findGridByNodeId(r){var i,s;for(let a=0;a<this.columnNum;a++)for(let u=0;u<this.rowNum;u++)if(this.cells[a][u].node&&((s=(i=this.cells[a][u])===null||i===void 0?void 0:i.node)===null||s===void 0?void 0:s.id)===r)return{column:a,row:u};return null}sqdist(r,i){return Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)}occupyNearest(r){let i=dg.MIN_DIST,s,a=null;for(let u=0;u<this.columnNum;u++)for(let h=0;h<this.rowNum;h++)!this.cells[u][h].occupied&&(s=this.sqdist(r,this.cells[u][h]))<i&&(i=s,a=this.cells[u][h]);return a&&(a.occupied=!0),a}insertColumn(r,i){if(!(i<=0)){for(let s=0;s<i;s++){this.cells[s+this.columnNum]=[];for(let a=0;a<this.rowNum;a++)this.cells[s+this.columnNum][a]={dx:s,dy:a,x:s*this.CELL_W,y:a*this.CELL_H,occupied:!1,node:null}}for(let s=this.columnNum-1;s>r;s--)for(let a=0;a<this.rowNum;a++)this.cells[s+i][a]=Object.assign(Object.assign({},this.cells[s][a]),{x:(s+i)*this.CELL_W,y:a*this.CELL_H}),this.cells[s][a]={x:s*this.CELL_W,y:a*this.CELL_H,occupied:!0,node:null};for(let s=0;s<this.additionColumn.length;s++)this.additionColumn[s]>=r&&(this.additionColumn[s]+=i);for(let s=0;s<i;s++)this.additionColumn.push(r+s+1);this.columnNum+=i}}insertRow(r,i){if(!(i<=0)){for(let s=0;s<i;s++)for(let a=0;a<this.columnNum;a++)this.cells[a][s+this.rowNum]={dx:a,dy:s,x:a*this.CELL_W,y:s*this.CELL_H,occupied:!1,node:null};for(let s=0;s<this.columnNum;s++)for(let a=this.rowNum-1;a>r;a--)this.cells[s][a+i]=Object.assign(Object.assign({},this.cells[s][a]),{dx:s,dy:a+i,x:s*this.CELL_W,y:(a+i)*this.CELL_H}),this.cells[s][a]={dx:s,dy:a,x:s*this.CELL_W,y:a*this.CELL_H,occupied:!1,node:null};for(let s=0;s<this.additionRow.length;s++)this.additionRow[s]>=r&&(this.additionRow[s]+=i);for(let s=0;s<i;s++)this.additionRow.push(r+s+1);this.rowNum+=i}}getNodes(){const r=[];for(let i=0;i<this.columnNum;i++)for(let s=0;s<this.rowNum;s++)this.cells[i][s].node&&r.push(this.cells[i][s]);return r}}dg.MIN_DIST=50,dg.DEFAULT_CELL_W=80,dg.DEFAULT_CELL_H=80;function qP(n,r){if(!n.nodes||n.nodes.length===0)return n;const i=r.width,s=r.height,a=r.nodeMinGap;let u=1e4,h=1e4;n.nodes.forEach(g=>{const y=g.size[0]||50,b=g.size[1]||50;u=Math.min(y,u),h=Math.min(b,h)});const p=new dg;p.init(i,s,{CELL_H:h,CELL_W:u}),n.nodes.forEach(g=>{const y=p.occupyNearest(g);y&&(y.node={id:g.id,size:g.size},g.x=y.x,g.y=y.y,g.dx=y.dx,g.dy=y.dy)});for(let g=0;g<n.nodes.length;g++){const y=n.nodes[g],b=p.findGridByNodeId(y.id);if(!b)throw new Error("can not find node cell");const{column:E,row:T}=b;if(y.size[0]+a>u){const O=Math.ceil((y.size[0]+a)/u)-1;let I=O;for(let k=0;k<O&&(p.additionColumn.indexOf(E+k+1)>-1&&!p.cells[E+k+1][T].node);k++)I--;p.insertColumn(E,I)}if(y.size[1]+a>h){const O=Math.ceil((y.size[1]+a)/h)-1;let I=O;for(let k=0;k<O&&(p.additionRow.indexOf(T+k+1)>-1&&!p.cells[E][T+k+1].node);k++)I--;p.insertRow(T,I)}}for(let g=0;g<p.columnNum;g++)for(let y=0;y<p.rowNum;y++){const b=p.cells[g][y];if(b.node){const E=n.nodes.find(T=>{var O;return T.id===((O=b==null?void 0:b.node)===null||O===void 0?void 0:O.id)});E&&(E.x=b.x+E.size[0]/2,E.y=b.y+E.size[1]/2)}}}const eh=1200,wA=800,hg=1e7,vo=10,EA=3.141592653589793,wu=1.5707963267948966,ld=EA*.375,w3=EA*.625,W2=new Map,fg=10,E3=10;let rp=.8;const Po=.1,S3=.5;function _3(n,r,i){const s=n.x-n.size[0]/2,a=n.y-n.size[1]/2,u=n.x+n.size[0]/2,h=n.y+n.size[1]/2,p=r.x-r.size[0]/2,g=r.y-r.size[1]/2,y=r.x+r.size[0]/2,b=r.y+r.size[1]/2,E=n.x,T=n.y,O=r.x,I=r.y,k=O-E,B=Math.atan2(k,I-T);let $=0,X=0,re=0,ye=0;B>wu?(X=a-b,$=p-u,re=parseFloat(X?(X/Math.cos(B)).toFixed(2):$.toFixed(2)),ye=parseFloat($?($/Math.sin(B)).toFixed(2):X.toFixed(2))):0<B&&B<=wu?(X=g-h,$=p-u,X>$?re=ye=parseFloat(X?(X/Math.cos(B)).toFixed(2):$.toFixed(2)):re=ye=parseFloat($?($/Math.sin(B)).toFixed(2):X.toFixed(2))):B<-wu?(X=a-b,$=-(y-s),X>$?re=ye=parseFloat(X?(X/Math.cos(B)).toFixed(2):$.toFixed(2)):re=ye=parseFloat($?($/Math.sin(B)).toFixed(2):X.toFixed(2))):(X=g-h,Math.abs(k)>(u-s)/2?$=s-y:$=k,X>$?re=ye=parseFloat(X?(X/Math.cos(B)).toFixed(2):$.toFixed(2)):re=ye=parseFloat($&&B!==0?($/Math.sin(B)).toFixed(2):X.toFixed(2)));const me=parseFloat(B.toFixed(2));let We=i;return i&&(We=ld<me&&me<w3),{distance:Math.abs(re<ye?re:ye),isHoriz:We}}function Fv(n,r){const s=(W2.get(n.id)||[]).find(at=>at.source===r.id||at.target===r.id),a=n.size[0]*n.size[1],u=r.size[0]*r.size[1],h=a>u?r:n,p=a>u?n:r,g=h.x-h.size[0]/2,y=h.y-h.size[1]/2,b=h.x+h.size[0]/2,E=h.y+h.size[1]/2,T=p.x-p.size[0]/2,O=p.y-p.size[1]/2,I=p.x+p.size[0]/2,k=p.y+p.size[1]/2,B=h.x,$=h.y,X=p.x,re=p.y,ye=b>=T&&I>=g&&E>=O&&k>=y;let me=0,We=0;if(ye){We=Math.sqrt(Math.pow(X-B,2)+Math.pow(re-$,2));const at=g>T?g:T,ft=y>O?y:O,Qt=b<I?b:I,_t=E<k?E:k,en=Qt-at,ct=_t-ft,Hn=en*ct;We===0&&(We=1e-7),me=vo*1/We*100+Hn,me*=hg}else{let at=!1;const ft=_3(h,p,at);We=ft.distance,at=ft.isHoriz,We<=vo?We!==0?s?me+=vo+hg*1/We:me+=vo+hg*vo/We:me+=hg:(me+=We,s&&(me+=We*We))}return me}function yw(n){let r=0;for(let i=0;i<n.length;i++){const s=n[i];(s.x<0||s.y<0||s.x>eh||s.y>wA)&&(r+=1e12);for(let a=i+1;a<n.length;a++)r+=Fv(s,n[a])}return r}function M0(n,r,i,s){const a=new Map;i.forEach((g,y)=>{a.set(g.id,g)});const u=s.filter(g=>g.source===n.id||g.target===n.id)||[],h=[];u.forEach(g=>{const y=g.source===n.id?g.target:g.source,b=a.get(y);b&&h.push(b)});let p=!0;for(let g=0;g<h.length;g++){const y=h[g],b=Math.atan((n.y-y.y)/(y.x-n.y))*180,E=Math.atan((r.y-y.y)/(y.x-r.y))*180,T=b<30||b>150,O=E<30||E>150,I=b>70&&b<110,k=E>70&&E<110;if(T&&!O||b*E<0){p=!1;break}else if(I&&!k||b*E<0){p=!1;break}else if((y.x-n.x)*(y.x-r.x)<0){p=!1;break}else if((y.y-n.y)*(y.y-r.y)<0){p=!1;break}}return p}function A3(n,r){let i=!1;const s=1,a=fg*s,u=E3*s,h=[a,-a,0,0],p=[0,0,u,-u];for(let g=0;g<n.length;++g){const y=n[g];let b=Bv(y,n);for(let E=0;E<h.length;E++)if(M0(y,{x:y.x+h[E],y:y.y+p[E]},n,r)){y.x+=h[E],y.y+=p[E];const O=Bv(y,n),I=Math.random();O<b||I<rp&&I>Po?(b=O,i=!0):(y.x-=h[E],y.y-=p[E])}}return rp>Po&&(rp*=S3),i?yw(n):0}function Bv(n,r){let i=0;(n.x<0||n.y<0||n.x+n.size[0]+20>eh||n.y+n.size[1]+20>wA)&&(i+=1e12);for(let s=0;s<r.length;++s)n.id!==r[s].id&&(i+=Fv(n,r[s]));return i}function SA(n,r){if(n.length===0)return{nodes:n,edges:r};n.forEach(g=>{const y=r.filter(b=>b.source===g.id||b.target===g.id);W2.set(g,y)}),n.sort((g,y)=>{var b,E;return((b=W2.get(g.id))===null||b===void 0?void 0:b.length)-((E=W2.get(y.id))===null||E===void 0?void 0:E.length)});let i=yw(n),s=20,a=1,u=0;const h=50;let p=0;for(;s>0&&(p++,!(p>=h));){const g=A3(n,r);g!==0&&(u=g),a=u-i,i=u,a===0?--s:s=20}return n.forEach(g=>{g.x=g.x-g.size[0]/2,g.y=g.y-g.size[1]/2}),{nodes:n,edges:r}}var X2=SA;function T3(n,r){const{nodes:i,edges:s}=n,a=r.width,u=r.height;if(!(i!=null&&i.length))return Promise.resolve();const h=[];i.forEach(I=>{if(s.filter(B=>B.source===I.id||B.target===I.id).length>1){const B=Object.assign({},I);delete B.size,h.push(B)}});const p=[];s.forEach(I=>{const k=h.find($=>$.id===I.source),B=h.find($=>$.id===I.target);k&&B&&p.push(I)});const g=new mc({type:"dagre",ranksep:r.nodeMinGap,nodesep:r.nodeMinGap}),{nodes:y}=g.layout({nodes:h,edges:p});i.forEach(I=>{const k=(y||[]).find(B=>B.id===I.id);I.x=(k==null?void 0:k.x)||a/2,I.y=(k==null?void 0:k.y)||u/2});const b=JSON.parse(JSON.stringify(i)),E=JSON.parse(JSON.stringify(s)),T=Fr().nodes(b).force("link",Yr(E).id(I=>I.id).distance(I=>p.find(B=>B.source===I.source&&B.target===I.target)?30:20)).force("charge",Nn()).force("center",Cn(a/2,u/2)).force("x",oi(a/2)).force("y",Ii(u/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(I=>{T.on("end",()=>{i.forEach(me=>{const We=b.find(at=>at.id===me.id);We&&(me.x=We.x,me.y=We.y)});const k=Math.min(...i.map(me=>me.x)),B=Math.max(...i.map(me=>me.x)),$=Math.min(...i.map(me=>me.y)),X=Math.max(...i.map(me=>me.y)),re=a/(B-k),ye=u/(X-$);i.forEach(me=>{me.x!==void 0&&re<1&&(me.x=(me.x-k)*re),me.y!==void 0&&ye<1&&(me.y=(me.y-$)*ye)}),i.forEach(me=>{me.sizeTemp=me.size,me.size=[10,10]}),X2(i,s),i.forEach(me=>{me.size=me.sizeTemp||[],delete me.sizeTemp}),qP({nodes:i,edges:s},r),I()})})}class M3 extends Go{constructor(r){super(),this.width=300,this.height=300,this.nodeMinGap=50,this.onLayoutEnd=()=>{},r&&this.updateCfg(r)}getDefaultCfg(){return{width:300,height:300,nodeMinGap:50}}execute(){const r=this,i=r.nodes,s=r.edges;return i==null||i.forEach(a=>{a.size||(a.size=[50,50])}),T3({nodes:i,edges:s},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(()=>{r.onLayoutEnd&&r.onLayoutEnd()})}getType(){return"er"}}class _A extends Go{constructor(r){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const r=this,i=r.nodes,s=.9,a=r.center;return!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),i&&i.forEach(u=>{u.x=(Math.random()-.5)*s*r.width+a[0],u.y=(Math.random()-.5)*s*r.height+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:i,edges:this.edges}}getType(){return"random"}}class JP{constructor(r){const i=getLayoutByName(r.type);this.layoutInstance=new i(r)}layout(r){return this.layoutInstance.layout(r)}updateCfg(r){this.layoutInstance.updateCfg(r)}init(r){this.layoutInstance.init(r)}execute(){this.layoutInstance.execute()}getDefaultCfg(){return this.layoutInstance.getDefaultCfg()}destroy(){return this.layoutInstance.destroy()}}const mo={force:di,fruchterman:kx,forceAtlas2:mw,gForce:Z0,dagre:mc,circular:Oo,radial:Dx,concentric:Nx,grid:Ja,mds:Ix,comboForce:KP,random:_A,"gForce-gpu":YP,"fruchterman-gpu":Gv,er:M3};var Z2;(function(n){n.command=pi.GRAPH_LAYOUT,n.hookKey="graphLayout"})(Z2||(Z2={}));let pg=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().graphLayout.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{layoutType:h,layoutOptions:p,customLayout:g}=u;return yield(g||(E=>{const T=mo[h];return new T(Object.assign({},p)).layout(E)}))(u.graphData),{graphData:u.graphData}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],pg.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],pg.prototype,"init",null),pg=(0,F.gn)([vt({token:{token:xi,named:Z2.command.id}})],pg);var Y2;(function(n){function r(s,a){return(0,Tl.isEqual)(s,a)}n.isNodeEqual=r;function i(s,a){return(0,Tl.isEqual)(s,a)}n.isEdgeEqual=i})(Y2||(Y2={}));var K2;(function(n){n.command=pi.GRAPH_RENDER,n.hookKey="graphRender"})(K2||(K2={}));let Qh=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().graphRender.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),p=yield this.ctx.getGraphMeta(),{beforeRender:g,graphData:y,isNodeEqual:b,isEdgeEqual:E,afterRender:T}=u;return g&&g(p),yield this.doLoadGraph(h,y,b,E),T&&T(y,p),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this}),this.doLoadGraph=(r,i,s,a)=>(0,F.mG)(this,void 0,void 0,function*(){r!=null&&r.isFrozen()||r==null||r.freeze();const u=this.ctx.getCommands(),{addNodeConfigs:h,addEdgeConfigs:p,removeNodes:g,removeEdges:y,updateNodes:b,updateEdges:E}=this.graphDataDiff(r,i,s,a);for(const T of b){const O=T==null?void 0:T.getData();yield u.executeCommand(Ji.UPDATE_NODE.id,{nodeConfig:O})}for(const T of E){const O=T==null?void 0:T.getData();yield u.executeCommand(yo.UPDATE_EDGE.id,{edgeConfig:O})}for(const T of h)yield u.executeCommand(Ji.ADD_NODE.id,{nodeConfig:T,options:{isRenderGraph:!0}},{name:"remove servcie",handler:O=>(0,F.mG)(this,void 0,void 0,function*(){delete O.createNodeService})});yield u.executeCommand(Ms.INIT_GROUP.id,{graphData:{nodes:h,edges:[]}});for(const T of p)yield u.executeCommand(yo.ADD_EDGE.id,{edgeConfig:T,options:{isRenderGraph:!0}},{name:"remove servcie",handler:O=>(0,F.mG)(this,void 0,void 0,function*(){delete O.createEdgeService})});for(const T of g){const O=T==null?void 0:T.getData();O.isGroup?yield u.executeCommand(Ms.DEL_GROUP.id,{nodeConfig:O}):yield u.executeCommand(Ji.DEL_NODE.id,{nodeConfig:O})}for(const T of y){const O=T==null?void 0:T.getData();yield u.executeCommand(yo.DEL_EDGE.id,{edgeConfig:O})}r!=null&&r.isFrozen()&&(r==null||r.unfreeze())})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}graphDataDiff(r,i,s,a){const{nodes:u,edges:h}=i,p=[];u.forEach($=>{r.getCellById($==null?void 0:$.id)||p.push($)});const g=[],y=[],b=[];r.getNodes().forEach($=>{const X=u.find(re=>(re==null?void 0:re.id)===($==null?void 0:$.id));if(!X)b.push($);else{let re=!0;s?re=s($==null?void 0:$.data,X):$!=null&&$.data&&X&&(re=Y2.isNodeEqual($==null?void 0:$.data,X)),re||$.setData(X,{deep:!1}),re===!0?g.push($):y.push($)}});const T=[];h.forEach($=>{r.getCellById($==null?void 0:$.id)||T.push($)});const O=[],I=[],k=[];return r.getEdges().forEach($=>{const X=h.find(re=>(re==null?void 0:re.id)===($==null?void 0:$.id));if(!X)k.push($);else{let re=!0;a?re=a($==null?void 0:$.data,X):$!=null&&$.data&&X&&(re=Y2.isEdgeEqual($==null?void 0:$.data,X)),re||$.setData(X,{deep:!1}),re===!0?O.push($):I.push($)}}),{addNodeConfigs:p,addEdgeConfigs:T,retainNodes:g,retainEdges:O,removeNodes:b,removeEdges:k,updateNodes:y,updateEdges:I}}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Qh.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Qh.prototype,"init",null),Qh=(0,F.gn)([vt({token:{token:xi,named:K2.command.id}})],Qh);var Ec;(function(n){n.command=pi.GRAPH_RESIZE,n.hookKey="graphResize"})(Ec||(Ec={}));let js=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),s=this.ctx.getHooks(),a=yield this.ctx.getGraphConfig(),u=a.rootContainer.clientHeight,h=a.rootContainer.clientWidth,p=yield s.graphResize.call(r,g=>(0,F.mG)(this,void 0,void 0,function*(){const y=yield this.ctx.getX6Graph(),{width:b=h,height:E=u}=g;return y==null||y.resize(b,E),{}}),i);return this.ctx.setResult(p),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],js.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],js.prototype,"init",null),js=(0,F.gn)([vt({token:{token:xi,named:Ec.command.id}})],js);var q2;(function(n){n.command=pi.GRAPH_FULLSCREEN,n.hookKey="graphFullscreen"})(q2||(q2={}));let O0=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),s=this.ctx.getHooks(),a=yield this.ctx.getGraphConfig(),{appContainer:u}=a;if(!u)return;const h=yield s.graphFullscreen.call(r,()=>(0,F.mG)(this,void 0,void 0,function*(){var p,g;let y=!1;return document.fullscreenElement?(g=document.exitFullscreen)===null||g===void 0||g.call(document):((p=u.requestFullscreen)===null||p===void 0||p.call(u),y=!0),{fulllscreen:y}}),i);return this.ctx.setResult(h),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],O0.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],O0.prototype,"init",null),O0=(0,F.gn)([vt({token:{token:xi,named:q2.command.id}})],O0);var al;(function(n){n.command=pi.GRAPH_ZOOM,n.MAX_SCALE=1.5,n.MIN_SCALE=.05,n.defaultZoomOptions={maxScale:n.MAX_SCALE,minScale:n.MIN_SCALE},n.hookKey="graphZoom"})(al||(al={}));let zv=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().graphZoom.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{factor:p,zoomFitPadding:g=12,zoomOptions:y=al.defaultZoomOptions}=u;return typeof p=="number"?h==null||h.zoom(p,y||{}):p==="fit"?h==null||h.zoomToFit(Object.assign(Object.assign({},y),{padding:g})):p==="real"&&(h==null||h.scale(1),h==null||h.centerContent()),{factor:p,zoomFitPadding:g,zoomOptions:y}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],zv.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],zv.prototype,"init",null),zv=(0,F.gn)([vt({token:{token:xi,named:al.command.id}})],zv);var ma;(function(n){n.command=pi.GRAPH_COPY,n.hookKey="graphCopySelection"})(ma||(ma={}));let J2=class{constructor(){this.parseCells=r=>{r.forEach(u=>{const h=u.getData();u.isNode()&&h.isGroup&&u.getChildren().forEach(g=>{r.push(g)})});const i=r.filter(u=>u.isNode()).map(u=>u.id),s=r.reduce((u,h)=>{if(h.isEdge()){const p=h.getSourceCellId(),g=h.getTargetCellId();p&&g&&i.includes(p)&&i.includes(g)&&u.set(h.id,h)}else u.set(h.id,h);return u},new Map),a=Array.from(s.values());return Ap(a)},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().graphCopySelection.call(i,()=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield r.getX6Graph(),p=h.getSelectedCells(),g=h.getEdges(),y=this.parseCells([...p,...g]),b=window.localStorage.getItem(ul);return window.localStorage.setItem(ul,JSON.stringify(y)),r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){window.localStorage.setItem(ul,b)}))),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],J2.prototype,"contextProvider",void 0),J2=(0,F.gn)([vt({token:{token:xi,named:ma.command.id}})],J2);function th(n,r=null){try{return JSON.parse(n)||r}catch(i){return console.error(i),r}}let Uv=class{constructor(){this.groupNodeMap=new Map,this.nodeMap=new Map,this.nodeMappingRecord=new Map,this.portMap=new Map,this.portMappingRecord=new Map,this.edgeMap=new Map,this.edgeMappingRecord=new Map,this.getNodesByType=r=>r.reduce((i,s)=>(s.isGroup?i.groupNodes.push(s):i.normalNodes.push(s),i),{normalNodes:[],groupNodes:[]}),this.getNodePorts=r=>Array.isArray(r.ports)?r.ports:r.ports&&Array.isArray(r.ports.items)?r.ports.items:[],this.addNodes=r=>{r.forEach(i=>{if(i.isGroup)this.groupNodeMap.set(i.id,i);else{const s=this.getNodePorts(i);this.nodeMap.set(i.id,i),s.forEach(a=>{this.portMap.set(a.id,a)})}})},this.addEdge=r=>{r.forEach(i=>{this.edgeMap.set(i.id,i)})},this.buildNodeMapping=(r,i)=>{const s=r.id||r.originalId,a=i.id;this.nodeMappingRecord.set(s,a),this.getNodePorts(r).forEach((h,p)=>{const g=i.ports[p];g&&(this.portMap.set(g.id,g),this.portMappingRecord.set(h.id,g.id))})},this.createEdgeBetweenNodes=r=>{const{id:i,source:s,sourcePortId:a,target:u,targetPortId:h}=r,p=(0,F._T)(r,["id","source","sourcePortId","target","targetPortId"]);return Object.assign(Object.assign({},p),{id:void 0,originalId:i,source:this.nodeMappingRecord.get(s),target:this.nodeMappingRecord.get(u),sourcePortId:this.portMappingRecord.get(a),targetPortId:this.portMappingRecord.get(h),sourcePort:this.portMappingRecord.get(a),targetPort:this.portMappingRecord.get(h)})},this.buildGroupRelations=r=>{const{groupChildren:i}=r,s=i.map(a=>this.nodeMappingRecord.get(a));return Object.assign(Object.assign({},r),{groupChildren:s})}}};Uv=(0,F.gn)([vt()],Uv);var Vv,Q2;(function(n){n.command=pi.GRAPH_PASTE,n.hookKey="graphPasteSelection"})(Q2||(Q2={}));function e1(n,r=0){return Math.floor(Math.random()*(n-r)+r)}let gg=Vv=class{constructor(){this.updateNodeCopiedProps=(r,i)=>{let s=e1(100),a=e1(100);return r&&(s=i.x-r.x+e1(30),a=i.y-r.y+e1(30)),i.x+=s,i.y+=a,i.originalId=i.id,delete i.id,i.label=i.label?`${i.label}_copied`:"",i.isCollapsed=!1,i},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),a=r.getHooks();if(Vv.doing)return this;Vv.doing=!0;const u=yield a.graphPasteSelection.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:p,position:g}=h,y=window.localStorage.getItem(ul),b=th(y,{nodes:[],edges:[]}),{nodes:E=[],edges:T=[]}=b,{normalNodes:O,groupNodes:I}=this.mappingHelper.getNodesByType(E);return this.mappingHelper.addNodes(E),yield Promise.all(O.map(k=>(0,F.mG)(this,void 0,void 0,function*(){const X=(yield p.executeCommand(Ji.ADD_NODE.id,{nodeConfig:this.updateNodeCopiedProps(g,k)})).contextProvider().getResult();this.mappingHelper.buildNodeMapping(k,X.nodeConfig)}))),yield Promise.all(I.map(k=>(0,F.mG)(this,void 0,void 0,function*(){const B=this.mappingHelper.buildGroupRelations(k);yield p.executeCommand(Ms.ADD_GROUP.id,{nodeConfig:this.updateNodeCopiedProps(g,B)})}))),yield Promise.all(T.map(k=>{const B=this.mappingHelper.createEdgeBetweenNodes(k);return p.executeCommand(yo.ADD_EDGE.id,{edgeConfig:B})})),r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){window.localStorage.setItem(ul,null)}))),{err:null}}),s);return r.setResult(u),Vv.doing=!1,this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};gg.doing=!1,(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],gg.prototype,"contextProvider",void 0),(0,F.gn)([Zt(Uv),(0,F.w6)("design:type",Uv)],gg.prototype,"mappingHelper",void 0),gg=Vv=(0,F.gn)([vt({token:{token:xi,named:Q2.command.id}})],gg);var zy;(function(n){n.command=pi.GRAPH_TOGGLE_MULTI_SELECT,n.hookKey="toggleMultiSelect"})(zy||(zy={}));let Uy=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().toggleMultiSelect.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),p=yield this.ctx.getGraphConfig(),{isEnable:g,modelService:y}=u,b=yield wh.getModel(y),E=typeof g=="boolean"?g:!h.isRubberbandEnabled();return E?(h.enableRubberband(),h.scroller&&h.scroller.widget?h.scroller.disablePanning():h.disablePanning(),p.graphContainer.style.cursor="crosshair"):(h.disableRubberband(),h.scroller&&h.scroller.widget?h.scroller.enablePanning():h.enablePanning(),p.graphContainer.style.cursor="grab"),b.setValue({isEnable:E}),{isEnable:E}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Uy.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Uy.prototype,"init",null),Uy=(0,F.gn)([vt({token:{token:xi,named:zy.command.id}})],Uy);var jv;(function(n){n.command=pi.GRAPH_HISTORY_UNDO,n.hookKey="historyUndo"})(jv||(jv={}));let nh=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().historyUndo.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield r.getX6Graph();return p.isHistoryEnabled()===!1?{err:"history is disabled"}:(p.undo(),r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:g}=h;g.executeCommand(pi.GRAPH_HISTORY_REDO.id,{})}))),{err:null})}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],nh.prototype,"contextProvider",void 0),nh=(0,F.gn)([vt({token:{token:xi,named:jv.command.id}})],nh);var t1;(function(n){n.command=pi.GRAPH_HISTORY_REDO,n.hookKey="historyRedo"})(t1||(t1={}));let Hv=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().historyRedo.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield r.getX6Graph();return p.isHistoryEnabled()===!1?{err:"history is disabled"}:(p.redo(),r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:g}=h;g.executeCommand(pi.GRAPH_HISTORY_UNDO.id,{})}))),{err:null})}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Hv.prototype,"contextProvider",void 0),Hv=(0,F.gn)([vt({token:{token:xi,named:t1.command.id}})],Hv);var n1;(function(n){n.command=pi.GRAPH_HISTORY_TOGGLE,n.hookKey="historyToggle"})(n1||(n1={}));let r1=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().historyToggle.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield r.getX6Graph();if(p.isHistoryEnabled()===!1)return{err:"history is disabled"};const g=p.isHistoryEnabled(),{enabled:y}=h;return p.toggleHistory(y),r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:b}=h;b.executeCommand(pi.GRAPH_HISTORY_TOGGLE.id,{enabled:g})}))),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],r1.prototype,"contextProvider",void 0),r1=(0,F.gn)([vt({token:{token:xi,named:n1.command.id}})],r1);var $v;(function(n){n.command=pi.GRAPH_HISTORY_RESET,n.hookKey="historyReset"})($v||($v={}));let i1=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().historyReset.call(i,()=>(0,F.mG)(this,void 0,void 0,function*(){return(yield r.getX6Graph()).cleanHistory(),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],i1.prototype,"contextProvider",void 0),i1=(0,F.gn)([vt({token:{token:xi,named:$v.command.id}})],i1);var P0;(function(n){n.command=pi.GRAPH_ADD_TOOL,n.hookKey="addTool"})(P0||(P0={}));let o1=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().addTool.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{cellId:p,toolConfig:g,commandService:y}=h,E=(yield r.getX6Graph()).getCellById(p);return E&&(E.addTools(g.items,g.options),r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){Array.isArray(g.items)&&g.items.forEach(T=>{y.executeCommand(pi.GRAPH_DEL_TOOL.id,{cellId:p,toolname:T})})})))),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],o1.prototype,"contextProvider",void 0),o1=(0,F.gn)([vt({token:{token:xi,named:P0.command.id}})],o1);var D0;(function(n){n.command=pi.GRAPH_DEL_TOOL,n.hookKey="delTool"})(D0||(D0={}));let s1=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().delTool.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{cellId:p,toolName:g,toolConfig:y}=h,E=(yield r.getX6Graph()).getCellById(p);return E&&(g==="*"?E.removeTools(y):E.removeTool(g,y)),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],s1.prototype,"contextProvider",void 0),s1=(0,F.gn)([vt({token:{token:xi,named:D0.command.id}})],s1);var Wv;(function(n){n.command=pi.REDO_CMD,n.hookKey="redoCommand"})(Wv||(Wv={}));let Xv=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.ctx,{args:i,hooks:s}=r.getArgs();return yield r.getHooks().redoCommand.call(i,()=>(0,F.mG)(this,void 0,void 0,function*(){const u=r.getCommands();return u.isRedoable&&u.redoCommand(),this.ctx.addUndo(Pt.create(()=>{u.redoCommand()})),{}}),s),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Xv.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Xv.prototype,"init",null),Xv=(0,F.gn)([vt({token:{token:xi,named:Wv.command.id}})],Xv);var a1;(function(n){n.command=pi.UNDO_CMD,n.hookKey="undoCommand"})(a1||(a1={}));let rh=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.ctx,{args:i,hooks:s}=r.getArgs();return yield r.getHooks().undoCommand.call(i,()=>(0,F.mG)(this,void 0,void 0,function*(){const u=r.getCommands();return u.isUndoable&&u.undoCommand(),this.ctx.addUndo(Pt.create(()=>{u.redoCommand()})),{}}),s),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],rh.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],rh.prototype,"init",null),rh=(0,F.gn)([vt({token:{token:xi,named:a1.command.id}})],rh);const ea=n=>{n(Yu),n(Bs),n(Ku),n(pg),n(Qh),n(js),n(nh),n(Hv),n(r1),n(i1),n(Xv),n(rh),n(zv),n(Uy),n(J2),n(gg),n(O0),n(o1),n(s1)},O3=[Dp,Th,Fc,jv,t1,$v,n1,Z2,K2,Ec,q2,Wv,a1,al,zy,ma,Q2,P0,D0];var N0;(function(n){n.command=yo.ADD_EDGE,n.hookKey="addEdge",n.createEdgeId=s=>{if(wr.kf.isString(s.source))return`${s.source}:${s.sourcePortId}-${s.target}:${s.targetPortId}`;if(r(s)){const a=s;return`${a.source.cell}:${a.source.port}-${a.target.cell}:${a.target.port}`}if(i(s)){const a=s;return`${a.sourceCell}:${a.sourcePort}-${a.targetCell}:${a.targetPort}`}};function r(s){return s.source&&s.source.cell&&wr.kf.isString(s.source.cell)}n.isX6EdgeConfig=r;function i(s){return s.sourceCell&&wr.kf.isString(s.sourceCell)}n.isX6EdgePlainConfig=i})(N0||(N0={}));let Vy=class{constructor(){this.processEdgeConfig=(r,i)=>(0,F.mG)(this,void 0,void 0,function*(){if(!i.id){const{createIdService:s=N0.createEdgeId}=r;i.id=yield s(i)}return i.sourcePortId&&!i.sourcePort&&(i.sourcePort=i.sourcePortId,i.targetPort=i.targetPortId),i}),this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().addEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{cellFactory:h,createEdgeService:p,commandService:g,options:y}=u,b=yield this.ctx.getX6Graph();let E=u.edgeConfig;if(p){const B=yield p(u);if(typeof B=="boolean")return{err:"createEdgeService rejected"};E=B}const T=yield this.processEdgeConfig(u,E);let O;const I=Object.assign(Object.assign({},y),{isCommand:!0});if(h){const B=yield h(T,this);O=b.addEdge(B,I)}else O=b.addEdge(Object.assign(Object.assign({},T),{label:(T==null?void 0:T.label)||T,data:Object.assign({},T)}),I);const k=Pt.create(()=>{g.executeCommand(yo.DEL_EDGE.id,{x6Edge:O})});return this.ctx.addUndo(k),{edgeConfig:T,edgeCell:O}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Vy.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Vy.prototype,"init",null),Vy=(0,F.gn)([vt({token:{token:xi,named:N0.command.id}})],Vy);var ih;(function(n){n.command=yo.DEL_EDGE,n.hookKey="delEdge";let r;(function(i){i.EDGE_NOT_EXIST="edge is not exist",i.EDGE_INVALID_CELL="this is not a valid cell",i.X6_DELETE_FAILED="x6 throw err when call delete edge",i.SERVICE_REJECT="service reject to delete"})(r=n.ErrEnum||(n.ErrEnum={}))})(ih||(ih={}));let jy=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().delEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const{edgeConfig:h,x6Edge:p,deleteEdgeService:g,commandService:y,options:b}=u;let E=p;if(!E&&(E=yield this.findEdgeById(h),!E))return console.error(ih.ErrEnum.EDGE_NOT_EXIST,h),{err:ih.ErrEnum.EDGE_NOT_EXIST};if(!(E&&E.isEdge()))return console.error(ih.ErrEnum.EDGE_NOT_EXIST,E),{err:ih.ErrEnum.EDGE_NOT_EXIST};if(g&&!(yield g(u)))return{err:ih.ErrEnum.SERVICE_REJECT};try{const O=E.getTargetCell(),I=E.getSourceCell(),k=E.getSourcePortId(),B=E.getTargetPortId(),$=I?I.id:I.source,X=O?O.id:O.target;E.remove(Object.assign(Object.assign({},b),{isCommand:!0}));const re=Pt.create(()=>{y.executeCommand(yo.ADD_EDGE.id,{edgeConfig:{source:$,target:X,sourcePortId:k,targetPortId:B}})});return this.ctx.addUndo(re),{err:null,edgeConfig:{source:$,target:X,sourcePortId:k,targetPortId:B},targetCell:O,sourceCell:I,sourcePortId:k,targetPortId:B}}catch(O){return console.error(ih.ErrEnum.X6_DELETE_FAILED,O),{err:ih.ErrEnum.X6_DELETE_FAILED}}}),i);return this.ctx.setResult(a),this}),this.findEdgeById=r=>(0,F.mG)(this,void 0,void 0,function*(){return(yield this.ctx.getX6Graph()).getCellById(r.id)}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],jy.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],jy.prototype,"init",null),jy=(0,F.gn)([vt({token:{token:xi,named:ih.command.id}})],jy);var I0=M(13218),AA=M.n(I0),vg;(function(n){n.command=yo.UPDATE_EDGE,n.hookKey="updateEdge",n.XFlowEdgeSetOptions={overwrite:!0},n.XFlowUpdateLabelService=(r,i,s=n.XFlowEdgeSetOptions)=>(0,F.mG)(this,void 0,void 0,function*(){r==null||r.setLabelAt(0,(i==null?void 0:i.label)||i,s)})})(vg||(vg={}));let Hy=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().updateEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{updateEdgeService:p,updateEdgeLabelService:g=vg.XFlowUpdateLabelService,options:y=vg.XFlowEdgeSetOptions}=u,b=p?yield p(u):u==null?void 0:u.edgeConfig,E=h==null?void 0:h.getCellById(b==null?void 0:b.id);return E==null||E.setData(b,y),b!=null&&b.hasOwnProperty("label")&&(yield g(E,b,y)),Ah()(b==null?void 0:b.visible)&&E.setVisible(b==null?void 0:b.visible),b.attrs&&E.setAttrs(b.attrs),b.vertices&&E.setVertices(b.vertices),b.router&&E.setRouter(b.router),b.connector&&E.setConnector(b.connector),AA()(b.source)&&E.setSource(b.source),AA()(b.target)&&E.setTarget(b.target),{edgeConfig:b,edgeCell:E}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Hy.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Hy.prototype,"init",null),Hy=(0,F.gn)([vt({token:{token:xi,named:vg.command.id}})],Hy);var ef;(function(n){n.command=yo.HIGHLIGHT_EDGE,n.hookKey="highlightEdge"})(ef||(ef={}));let Zv=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().highlightEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){var h,p;const g=yield this.ctx.getX6Graph(),{edgeId:y,strokeColor:b,strokeWidth:E}=u,T=g.getEdges(),O=T.find(k=>k.id===y),I=T.filter(k=>k.id!==y);if(!O)console.error(y,"this edgeId is not exist");else{const k=O.getAttrs();((h=k==null?void 0:k.line)===null||h===void 0?void 0:h.stroke)===b&&((p=k==null?void 0:k.line)===null||p===void 0?void 0:p.strokeWidth)===E||(O==null||O.setAttrs({line:{stroke:b,strokeWidth:E||2}}),I.forEach(B=>{B.setAttrs({line:k==null?void 0:k.line})}),u.commandService.executeCommand(yo.FRONT_EDGE.id,{edgeId:y}))}return{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Zv.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Zv.prototype,"init",null),Zv=(0,F.gn)([vt({token:{token:xi,named:ef.command.id}})],Zv);var l1;(function(n){n.command=yo.FRONT_EDGE,n.hookKey="frontEdge"})(l1||(l1={}));let $y=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().frontEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{edgeId:p}=u,g=h==null?void 0:h.getCellById(p);return g?(g.toFront(),this.ctx.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){u.commandService.executeCommand(yo.BACK_EDGE.id,{edgeId:p})})))):console.error(p,"this edgeId is not exist"),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],$y.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],$y.prototype,"init",null),$y=(0,F.gn)([vt({token:{token:xi,named:l1.command.id}})],$y);var Wy;(function(n){n.command=yo.BACK_EDGE,n.hookKey="frontEdge"})(Wy||(Wy={}));let Xy=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().frontEdge.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),{edgeId:p}=u,g=h==null?void 0:h.getCellById(p);return g?(g.toBack(),this.ctx.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){u.commandService.executeCommand(yo.FRONT_EDGE.id,{edgeId:p})})))):console.error(p,"this edgeId is not exist"),{}}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Xy.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Xy.prototype,"init",null),Xy=(0,F.gn)([vt({token:{token:xi,named:Wy.command.id}})],Xy);const TA=n=>{n(Vy),n(jy),n(Hy),n(Zv),n($y),n(Xy)},qi=[N0,ih,vg,ef,l1,Wy];var Yv;(function(n){n.command=Ms.ADD_GROUP,n.hookKey="addGroup",n.GROUP_PADDING=12,n.GROUP_HEADER_HEIGHT=40})(Yv||(Yv={}));let Di=class{constructor(){this.getBBox=(r,i,s)=>{const{groupHeaderHeight:a=Yv.GROUP_HEADER_HEIGHT,groupPadding:u=Yv.GROUP_PADDING}=i,h=s.getCellsBBox(r.children);return h.moveAndExpand({x:-u,y:-(u+a),width:u*2,height:u*2+a}),h},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().addGroup.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{nodeConfig:p,createService:g,cellFactory:y,commandService:b}=h,E=yield r.getX6Graph(),T=yield b.executeCommand(Ji.ADD_NODE.id,{cellFactory:y,createNodeService:g,nodeConfig:p}),{nodeCell:O}=T.contextProvider().getResult(),{id:I}=O,{groupChildren:k}=p;if(k.length){k.forEach($=>{const X=E.getCellById($);X&&(X.setData(Object.assign(Object.assign({},X.getData()),{group:I,isCollapsed:!1})),X.prop("group",I),O.addChild(X),E.unselect(X))});const B=this.getBBox(O,p,E);O.position(B.x,B.y),O.size(B.width,B.height),O.setZIndex(0),O.prop("isGroup",!0),O.setData(Object.assign(Object.assign({},O.getData()),{width:B.width,height:B.height,groupChildrenSize:{width:B.width,height:B.height},x:B.x,y:B.y,isGroup:!0})),E.select(O)}return p.isCollapsed&&(yield b.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:p.id,isCollapsed:p.isCollapsed})),r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){b.executeCommand(Ms.DEL_GROUP.id,{nodeConfig:p})}))),{nodeConfig:p,nodeCell:O}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Di.prototype,"contextProvider",void 0),Di=(0,F.gn)([vt({token:{token:xi,named:Yv.command.id}})],Di);var Ni;(function(n){n.command=Ms.DEL_GROUP,n.hookKey="delGroup"})(Ni||(Ni={}));let Zc=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().delGroup.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield r.getX6Graph(),{nodeConfig:g,commandService:y,deleteService:b}=h,{id:E}=g,T=p.getCellById(E);if(b&&!(yield b(h)))return{err:"service rejected"};if(!T)return{err:"target node is not exist"};if(T.getProp("isGroup")!==!0)return{err:"target node is not group"};const{isCollapsed:O}=T.getData();O&&(yield y.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:T.id,isCollapsed:!1,collapsedSize:{width:0,height:0}}));const I=T.getChildren();return I&&I.forEach(k=>{T.unembed(k),k.prop("group",""),k.setData(Object.assign(Object.assign({},k.getData()),{group:""}))}),yield y.executeCommand(Ji.DEL_NODE.id,{nodeConfig:g}),r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){y.executeCommand(Ms.ADD_GROUP.id,{nodeConfig:g})}))),{err:null}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Zc.prototype,"contextProvider",void 0),Zc=(0,F.gn)([vt({token:{token:xi,named:Ni.command.id}})],Zc);var io;(function(n){n.command=Ms.INIT_GROUP,n.hookKey="initGroup"})(io||(io={}));let c1=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().initGroup.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{graphData:p,commandService:g}=h,y=yield r.getX6Graph(),{nodes:b}=p,E={};return b.forEach(T=>{const{id:O,group:I}=T;I&&(E[I]?E[I].push(O):E[I]=[O])}),Object.keys(E).forEach(T=>(0,F.mG)(this,void 0,void 0,function*(){const O=y.getCellById(T),I=O.getData(),k=E[T]||[];O.prop("isGroup",!0),O.setData(Object.assign(Object.assign({},I),{isGroup:!0,groupChildren:k})),k.forEach(X=>{const re=y.getCellById(X);O.embed(re)}),O.toBack();const{isCollapsed:B,groupCollapsedSize:$}=I;if(B){const X=h.collapsedSize||$||sh;yield g.executeCommand(Ms.COLLAPSE_GROUP.id,{collapsedSize:X,isCollapsed:!0,nodeId:O.id})}})),{}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],c1.prototype,"contextProvider",void 0),c1=(0,F.gn)([vt({token:{token:xi,named:io.command.id}})],c1);var mg;(function(n){n.command=Ms.COLLAPSE_GROUP,n.hookKey="collapseGroup"})(mg||(mg={}));let Zy=class{constructor(){this.toggleVisible=(r,i,s)=>{r.forEach(a=>{const u=s.findViewByCell(a).container;u.style.visibility=i?"visible":"hidden"})},this.toggleCollapse=(r,i,s)=>{const a=r.getChildren().filter(g=>g.isNode()),u=r.getData(),{isCollapsed:h,gap:p=0}=s;if(h){const g=s.collapsedSize||u.groupCollapsedSize||sh;r.prop("previousSize",r.size()),r.size(g)}else r.size(r.prop("previousSize"));a&&a.forEach(g=>{const y=r.position(),b=i.getConnectedEdges(g).filter(E=>{const T=E.getSourceNode(),O=E.getTargetNode();return a.includes(T)&&a.includes(O)});if(h){this.toggleVisible([g,...b],!1,i),g.prop("previousSize",g.size()),g.prop("previousRelativePosition",g.position({relative:!0})),g.position(y.x+p,y.y+p);const E=r.size();g.size({width:E.width-p*2,height:E.height-p*2})}else{this.toggleVisible([g,...b],!0,i);const E=g.prop("previousRelativePosition"),T=g.prop("previousSize");g.position(E.x,E.y,{relative:!0}),g.size(T)}}),r.prop("isCollapsed",h),r.setData(Object.assign(Object.assign({},r.getData()),{isCollapsed:h}))},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const{args:r,hooks:i}=this.ctx.getArgs(),a=yield this.ctx.getHooks().collapseGroup.call(r,u=>(0,F.mG)(this,void 0,void 0,function*(){const h=yield this.ctx.getX6Graph(),p=h.getCellById(r.nodeId),{toggleService:g}=u;return g&&!(yield g(u))?{err:"service rejected"}:(p&&(this.toggleCollapse(p,h,r),this.ctx.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){p&&this.toggleCollapse(p,h,Object.assign(r,{isCollapsed:!r.isCollapsed}))})))),{err:null})}),i);return this.ctx.setResult(a),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.ctx.isUndoable||(yield this.execute()),this})}init(){this.ctx=this.contextProvider()}isUndoable(){return this.ctx.isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],Zy.prototype,"contextProvider",void 0),(0,F.gn)([(0,z.zY)(),(0,F.w6)("design:type",Function),(0,F.w6)("design:paramtypes",[]),(0,F.w6)("design:returntype",void 0)],Zy.prototype,"init",null),Zy=(0,F.gn)([vt({token:{token:xi,named:mg.command.id}})],Zy);const P3=n=>{n(Di),n(Zc),n(c1),n(Zy)},Yy=[Yv,Ni,io,mg];var R0;(function(n){n.command=Ro.UPDATE_MODEL,n.hookKey="updateModel"})(R0||(R0={}));let u1=class{constructor(){this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),u=yield r.getHooks().updateModel.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{updateModel:p,getModel:g,modelService:y}=h,b=yield g(y),E=b.getValue(),T=Es(E);yield p(T);const O=ho(T);return b.setValue(O),r.addUndo(Pt.create(()=>(0,F.mG)(this,void 0,void 0,function*(){b.setValue(O)}))),{model:b,value:O}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],u1.prototype,"contextProvider",void 0),u1=(0,F.gn)([vt({token:{token:xi,named:R0.command.id}})],u1);const yg=()=>{},D3=n=>{n(u1)},tf=[R0],Ky=[...ql,...qi,...Yy,...O3,...tf],Sc=()=>new ka;let ip=class{constructor(){this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=r.x6Events.registerHook({name:"bind group node move event",handler:s=>(0,F.mG)(this,void 0,void 0,function*(){const a={eventName:"node:moving",callback:({node:u})=>(0,F.mG)(this,void 0,void 0,function*(){if(u.prop("isGroup")){u.prop("originPosition",u.getPosition());return}const p=u.model.graph,{group:g}=u.getData(),y=p.getNodes().find(re=>re.id===g);if(!y)return;const b=y.getProp("isCollapsed");let E=y.getProp("originSize"),T=!1;E==null&&(E=y.size(),y.prop("originSize",E));let O=y.prop("originPosition");O==null&&(O=y.getPosition(),y.prop("originPosition",O));let I=O.x,k=O.y,B=O.x+E.width,$=O.y+E.height;const X=y.getChildren();if(X&&X.forEach(re=>{const ye=re.getBBox().inflate(12),me=ye.getCorner();ye.x<I&&(I=ye.x,T=!0),ye.y<k&&(k=ye.y,T=!0),me.x>B&&(B=me.x,T=!0),me.y>$&&($=me.y,T=!0)}),T){y.prop({position:{x:I,y:k},size:{width:B-I,height:$-k}});const re=Object.assign(Object.assign({},y.getData()),{x:I,y:k,width:B-I,height:$-k});b!==!0&&(re.groupChildrenSize={width:B-I,height:$-k}),y.setData(re)}})};s.push(a)})});return Pt.create(()=>{i.dispose()})}),this.registerHookHub=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new Kt;return Ky.forEach(({hookKey:s,createHook:a=Sc})=>{const u=r.registerHookHub(s,a());i.push(u)}),this.commandConfig.getConfig().then(({getContributions:s})=>{s().forEach(({hookKey:u,createHook:h=Sc})=>{const p=r.registerHookHub(u,h());i.push(p)})}),i})}registerGraphCommands(r){Ky.forEach(({command:i})=>{r.registerCommand(i,{createCommand:this.commandFactory})}),this.commandConfig.getConfig().then(({getContributions:i})=>{i().forEach(a=>{r.registerCommand(a.command,{createCommand:this.commandFactory})})})}};(0,F.gn)([Zt(yh),(0,F.w6)("design:type",Function)],ip.prototype,"commandFactory",void 0),(0,F.gn)([Zt(Il),(0,F.w6)("design:type",Il)],ip.prototype,"commandConfig",void 0),ip=(0,F.gn)([kt({contrib:[ku,la]})],ip);const c=(n,r)=>{r.getCommandContributions().forEach(s=>{const{CommandHandler:a,command:u}=s;n({token:{token:xi,named:u.id},useClass:a})}),ea(n),X0(n),TA(n),P3(n),D3(n),n(ip)},e=n=>Gr(r=>{r(Uv),Mp(r,n),c(r,n),r(ml),r(yh,{useFactory:i=>(s,a,u)=>{const h=i.container.createChild(),p=h.get(ml);h.register(Si,{useDynamic:()=>()=>p});const g=h.getNamed(xi,s);return p.setArgs(a,u),p.handlerInstance=g,g}})}),t=n=>{const r=Ml(),i=H.useMemo(()=>n.config?n.config:new Il,[]);return H.useEffect(()=>{r.addCoreModule({config:i,createModule:e})},[]),null},o=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new Il;return n(a,i),a},[i])},l=Symbol("IToolbarService"),d=pe.defineToken("IToolbarContribution");var f=M(23279),v=M.n(f),x=M(50361),w=M.n(x);let _=class{constructor(){this.toDispose=new Kt,this.toolbarItems=new Map,this.onDidChangeEvent=new Lo(null),this.onDidChange=this.onDidChangeEvent.watch,this.fireOnDidChange=v()(()=>this.onDidChangeEvent.setValue(void 0),16),this.registerDisposableToolbar=r=>{const i=new Kt;return r({registerToolbarItem:a=>{const u=this.registerItem(a);return i.push(u),u}}),this.toDispose.push(i),i},this.getToolbarModel=r=>{const{layout:i,mainGroups:s=[],extraGroups:a=[]}=r;return new Lo({layout:i,mainGroups:this.createToolbarGroupModel(s),extraGroups:this.createToolbarGroupModel(a)})},this.createToolbarGroupModel=r=>r.map(s=>{const{items:a=[]}=s;return Object.assign(Object.assign({},s),{items:a.map(u=>this.createToolbarModel({id:u.id})).filter(u=>!!u)})})}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerToolbarItems(this)}onStop(){this.toDispose.dispose()}registerItem(r){return this.toolbarItems.has(r.id)&&console.warn(`ToolbarRegistry ${r.id} is duplicated, in`,r),this.toolbarItems.set(r.id,r),this.fireOnDidChange(),new Kt(Pt.create(()=>this.fireOnDidChange()),Pt.create(()=>this.toolbarItems.delete(r.id)))}createToolbarModel(r){const i=w()(this.toolbarItems.get(r.id)),s=Ah()(i.isEnabled)?i.isEnabled:!0,a=Ah()(i.isVisible)?i.isVisible:!0;return Object.assign(Object.assign({},i),{isEnabled:s,isVisible:a,iconName:i.iconName,text:i.text})}};(0,F.gn)([Zt(wd),(0,F.w6)("design:type",Object)],_.prototype,"commandService",void 0),(0,F.gn)([Zt(Ed),(0,F.w6)("design:type",Object)],_.prototype,"modelService",void 0),(0,F.gn)([ti(d),(0,F.w6)("design:type",Object)],_.prototype,"contributionProvider",void 0),_=(0,F.gn)([kt({contrib:[uc,l]})],_);const A=()=>Gr(n=>{Oi.register(n,d),n(_)}),P=n=>{const{}=n,r=Ml();return H.useEffect(()=>{const i=r.addCoreModule({config:{CONFIG_TYPE:"ToolbarRegistry",getConfig:()=>(0,F.mG)(void 0,void 0,void 0,function*(){})},createModule:A});return()=>{i.dispose()}},[r]),null};P.defaultProps={XFlowModuleType:"ToolbarRegistry"};const V=Symbol("xflow-menu-root"),q=Symbol("IMenuService"),te=pe.defineToken("IMenuContribution");var ge;(function(n){n.Separator="separator",n.Submenu="submenu",n.Root="root",n.Leaf="leaf"})(ge||(ge={}));let _e=class{constructor(){this.toDispose=new Kt,this.menuMap=new Map,this.getMenu=r=>this.menuMap.get(r),this.registerDisposableMenu=r=>{const i=new Kt;return r({registerMenu:a=>{const u=this.registerMenu(a);return i.push(u),u}}),this.toDispose.push(i),i}}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerMenu(this)}onStop(){this.toDispose.dispose()}registerMenu(r){return this.menuMap.set(r.id,r),Pt.create(()=>this.menuMap.delete(r.id))}};(0,F.gn)([ti(te),(0,F.w6)("design:type",Object)],_e.prototype,"contributionProvider",void 0),_e=(0,F.gn)([kt({contrib:[uc,q]})],_e);const ke=()=>Gr(n=>{Oi.register(n,te),n(_e)}),Se=n=>{const{}=n,r=Ml();return H.useEffect(()=>{const i=r.addCoreModule({config:{CONFIG_TYPE:"MenuRegistry",getConfig:()=>(0,F.mG)(void 0,void 0,void 0,function*(){})},createModule:ke});return()=>{i.dispose()}},[]),null};Se.defaultProps={XFlowModuleType:"MenuRegistry"};const je=n=>{const{meta:r,graphConfig:i,graphData:s,graphLayout:a,onLoad:u,isAutoCenter:h,hookConfig:p,modelServiceConfig:g,commandConfig:y,onAppConfigReady:b,onAppDestroy:E,children:T=[],className:O,style:I}=n,[k,B]=H.useState(),$=H.useRef(null),X=Lu();H.useEffect(()=>{b&&b(X);const me=Nl(X);me.start().then(()=>(0,F.mG)(void 0,void 0,void 0,function*(){var at;B(me),(at=X.getExtension("GraphConfig"))===null||at===void 0||at.config.setAppContainer($.current),r&&(yield me.commandService.executeCommand(pi.LOAD_META.id,{meta:r})),u&&u(me,X),s&&(a&&(yield me.commandService.executeCommand(pi.GRAPH_LAYOUT.id,Object.assign({graphData:s},a))),yield me.commandService.executeCommand(pi.GRAPH_RENDER.id,{graphData:s}))}));const We=()=>(0,F.mG)(void 0,void 0,void 0,function*(){E&&E(me)});return()=>{We()}},[]),H.useEffect(()=>{k&&k.commandService.executeCommand(pi.LOAD_META.id,{meta:r})},[r]),H.useEffect(()=>{(()=>(0,F.mG)(void 0,void 0,void 0,function*(){k&&(s&&a&&(yield k.commandService.executeCommand(pi.GRAPH_LAYOUT.id,Object.assign({graphData:s},a))),yield k.commandService.executeCommand(pi.GRAPH_RENDER.id,{graphData:s}),h&&(yield k.getGraphInstance()).centerContent())}))()},[s]);const re=Te()("xflow-app-workspace",O,...X.getContainerClassNames()),ye=(Array.isArray(T)?T:[T]).some(me=>me&&me.props.isXFlowCanvas);return H.createElement(_c,{app:k},H.createElement(V0.Provider,{value:X},H.createElement("div",{className:re,id:X.getInstanceId(),ref:$,style:I},!ye&&H.createElement(Zl,{config:i,position:{top:0,bottom:0,left:0,right:0}}),T,H.createElement(Af,{config:g}),H.createElement(t,{config:y}),H.createElement(Ig,{config:p}),H.createElement(P,null),H.createElement(Se,null))))};je.defaultProps={};var nt=null;const wt=n=>n&&n.current,It=()=>{const n=H.useRef(!0);return H.useEffect(()=>()=>{n.current=!1},[]),n},Jt=n=>{const r=It(),[i,s]=H.useState(n.getValue());H.useEffect(()=>{const p=n.watch(g=>{wt(r)&&s(g)});return()=>{p.dispose()}},[s]);const a=i,u=rs.isValidValue(a),h=H.useCallback(p=>n.setValue(p),[n]);return[a,h,u]},Un=n=>{const r=H.useMemo(()=>new Lo(n),[]),[i,s,a]=Jt(r);return H.useEffect(()=>()=>{r.dispose()},[r]),[i,s,r,a]},An=n=>{const{getModel:r,initialState:i}=n,s=It(),a=H.useRef(),[u,h]=H.useState(i);return H.useEffect(()=>{let p;return r().then(g=>(0,F.mG)(void 0,void 0,void 0,function*(){a.current=g;const y=yield g.getValidValue();s.current&&(h(y),p=g.watch(b=>{s.current&&h(b)}))})),()=>{p&&p.dispose&&p.dispose()}},[]),[u,h,a.current]},On=Symbol("IKeyBindingService"),Zn=pe.defineToken("IKeyBindingContribution"),si=Symbol("IKeyBindingOptionProvider");let Wr=class{constructor(){this.toDispose=new Kt,this.keyBindingMap=new Map,this.enabledKeyBindingMap=new Map,this.registerExternalKeybindings=()=>(0,F.mG)(this,void 0,void 0,function*(){const{registerKeybindingFunc:r}=yield this.optionProvider.getOption();return r(this)}),this.registerKeybinding=(r=[])=>{const i=new Kt;return r.forEach(s=>{this.keyBindingMap.set(s.id,s),this.enableKeyBindings(s.id).then(a=>{i.push(Pt.create(()=>{a.dispose(),this.keyBindingMap.delete(s.id)}))})}),this.toDispose.push(i),i},this.enableKeyBindings=r=>(0,F.mG)(this,void 0,void 0,function*(){this.disableKeyBindings([r]);const i=this.keyBindingMap.get(r),s=yield this.getX6Graph(),a=this.runCommand(i);s.bindKey(i.keybinding,a);const u=Pt.create(()=>{s.unbindKey(i.keybinding),this.enabledKeyBindingMap.delete(i.id)});return this.enabledKeyBindingMap.set(i.id,u),u}),this.disableKeyBindings=r=>{r.forEach(i=>{const s=this.enabledKeyBindingMap.get(i);s&&s.dispose()})},this.runCommand=r=>i=>(0,F.mG)(this,void 0,void 0,function*(){yield r.callback(r,this.modelService,this.commandService,i)}),this.getX6Graph=()=>(0,F.mG)(this,void 0,void 0,function*(){return yield this.graphProvider.getGraphInstance()})}onStart(){const r=this.contributionProvider.getContributions();for(const i of r)i.registerKeybinding(this);this.registerExternalKeybindings()}onStop(){this.toDispose.dispose()}};(0,F.gn)([Zt(si),(0,F.w6)("design:type",Object)],Wr.prototype,"optionProvider",void 0),(0,F.gn)([Zt(wd),(0,F.w6)("design:type",Object)],Wr.prototype,"commandService",void 0),(0,F.gn)([Zt(Ed),(0,F.w6)("design:type",Object)],Wr.prototype,"modelService",void 0),(0,F.gn)([ti(Zn),(0,F.w6)("design:type",Object)],Wr.prototype,"contributionProvider",void 0),(0,F.gn)([Zt(Gu),(0,F.w6)("design:type",Object)],Wr.prototype,"graphProvider",void 0),Wr=(0,F.gn)([kt({contrib:[uc,On]})],Wr);const Wt=(n,r)=>{n(si,{useDynamic:()=>({getOption:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return r.getConfig()})}),lifecycle:pe.Lifecycle.singleton})},Ln=n=>Gr(r=>{Wt(r,n),Oi.register(r,Zn),r(Wr)});var jr;(function(n){n.CONFIG_TYPE="CONTEXT_CONFIG"})(jr||(jr={}));const Do=()=>Pt.create(()=>{});class Jo{constructor(){this.CONFIG_TYPE=jr.CONFIG_TYPE,this.keybindingFunc=Do,this.isMounted=new or,this.setKeybindingFunc=r=>{this.keybindingFunc=r},this.setMountState=()=>{this.isMounted.resolve(!0)},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return yield this.isMounted.promise,{CONFIG_TYPE:this.CONFIG_TYPE,registerKeybindingFunc:this.keybindingFunc}}),this.dispose=()=>{this.keybindingFunc=Do,this.isMounted=new or}}}const Oa=n=>{const{config:r}=n,i=Ml(),s=H.useMemo(()=>r||new Jo,[r]);return H.useEffect(()=>{const a=i.addCoreModule({config:s,createModule:Ln});return s.setMountState(),()=>{a.dispose(),s.dispose()}},[i,s]),null},ta=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new Jo;return n(a,i),a},[i])};function d1(n){return new Promise(r=>setTimeout(()=>r(!0),n))}var k0=M(25035);class bg{constructor(){this.map=new Map([["default",k0.Z],["QuestionCircleOutlined",k0.Z]]),this.map.set("default",k0.Z),this.map.set("QuestionCircleOutlined",k0.Z)}get(r){return this.map.get(r)}set(r,i){this.map.set(r,i)}has(r){return this.map.has(r)}}const Yc=new bg;var xg=null;let oh=class{constructor(){this.toDispose=new Kt,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return Pt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new Kt,s=[r.graphOptions.registerHook({name:"add snapline options",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){a.snapline={enabled:!0,className:"xflow-snapline",clean:5e3}})})];return i.pushAll(s),Pt.create(()=>{})})}};oh=(0,F.gn)([kt({contrib:la})],oh);const MA=()=>Gr(n=>{n(oh)}),OA="CanvasSnapline",Kv="#faad14",cN=n=>{const{color:r=Kv}=n,i=Ml(),s=H.useMemo(()=>({CONFIG_TYPE:OA,getConfig:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return{}})}),[]);return H.useEffect(()=>{const a=`xflow-snapline-${Date.now()}`;i.addContainerClassNames(a);const u=`
    .${a} .xflow-snapline .x6-widget-snapline-horizontal,
    .${a} .xflow-snapline .x6-widget-snapline-vertical {
      border-color: ${r};
    }`,h=Ng(u);return()=>{document.head.removeChild(h)}},[r,i]),H.createElement(Mf,{config:s,createModule:MA})};var PA=M(84908),qv;(function(n){n.MOUSE_ENTER="node-port:mouseenter",n.MOUSE_LEAVE="node-port:mouseleave"})(qv||(qv={}));var DA;(function(n){n.id="ACTIVE_NODE_PORT",n.useModel=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=yield r.awaitModel(n.id);return{data:yield i.getValidValue(),model:i}})})(DA||(DA={}));let NA=class{constructor(){this.toDispose=new Kt,this.getGraphInstance=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=yield this.graphProvider.getGraphInstance(),i=yield this.graphProvider.getGraphOptions();return{graph:r,config:i}}),this.getPortRenderConfig=()=>({onPortRendered(i){const s=this,{port:a,node:u}=i,{contentSelectors:h}=i,p=h&&h["xflow-port-group"];p instanceof Element&&(p.setAttribute("class",Te()("xflow-port-group",{connected:a.connected&&a.group!=="out",groupPort:(u==null?void 0:u.isGroup)&&(u==null?void 0:u.isGroup())})),p.addEventListener("mouseenter",g=>{const y={e:g,portId:a.id,nodeId:u.id,portData:a,nodeData:u.getData(),tooltip:a.tooltip,placement:a.group};s.trigger(qv.MOUSE_ENTER,y)}),p.addEventListener("mouseleave",g=>{const y={e:g,portId:a.id,nodeId:u.id,portData:a,nodeData:u.getData(),tooltip:a.tooltip,placement:a.group};s.trigger(qv.MOUSE_LEAVE,y)}))}}),this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return Pt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new Kt,s=[r.graphOptions.registerHook({name:"add onPortRendered options ",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){Object.assign(a,this.getPortRenderConfig())})})];return i.pushAll(s),Pt.create(()=>{})})}registerModel(r){r.registerModel({id:DA.id,watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{graph:s,config:a}=yield this.getGraphInstance(),u=g=>{const{x:y,y:b,width:E,height:T}=g.target.getBoundingClientRect(),O=a.rootContainer.getBoundingClientRect();return{x:y-((O==null?void 0:O.x)||0)+E/2,y:b-((O==null?void 0:O.y)||0)+T/2}},h=g=>{i.setValue(Object.assign(Object.assign({},g),{position:u(g.e)}))},p=()=>{i.setValue(null)};return s.on(qv.MOUSE_ENTER,h),s.on(qv.MOUSE_LEAVE,p),s.on("cell:mouseleave",p),Pt.create(()=>{s.off(qv.MOUSE_ENTER,h),s.off(qv.MOUSE_LEAVE,p)})})})}};(0,F.gn)([Zt(Gu),(0,F.w6)("design:type",Object)],NA.prototype,"graphProvider",void 0),NA=(0,F.gn)([kt({contrib:[la,gl]})],NA);const uN=()=>Gr(n=>{n(NA)}),dN="CanvasNodePortTooltip",hN=n=>{const r=es(),[i,,s]=Un(null);H.useEffect(()=>{if(!r)return;const p=(()=>(0,F.mG)(void 0,void 0,void 0,function*(){const{model:g}=yield DA.useModel(r.modelService);return g.watch(y=>{s.setValue(y)})}))();return()=>{p.then(g=>{g.dispose()})}},[s,r]);const a=!!(i&&i.position&&i.position.x);if(!a)return null;const u=n.getTooltip?n.getTooltip(i):i.tooltip;return H.createElement(PA.Z,{visible:a,title:u,placement:i.placement||"top"},H.createElement("span",{className:"canvas-node-port-tooltip",style:{position:"absolute",left:i.position.x,top:i.position.y}}))},fN=n=>{const r=H.useCallback(()=>(0,F.mG)(void 0,void 0,void 0,function*(){return null}),[]);return H.createElement(Mf,{createModule:uN,config:{CONFIG_TYPE:dN,getConfig:r}},H.createElement(hN,Object.assign({},n)))};var N3;(function(n){n.CONFIG_TYPE="ContextMenuConfig"})(N3||(N3={}));class bw{constructor(r){this.CONFIG_TYPE=N3.CONFIG_TYPE,this.setMenuModelService=i=>{this.menuModelService=i},this.setCustomMenuRender=i=>{this.menuCustomRender=i},this.getConfig=()=>(0,F.mG)(this,void 0,void 0,function*(){return{CONFIG_TYPE:this.CONFIG_TYPE,menuCustomRender:this.menuCustomRender,menuModelService:this.menuModelService}}),this.moduleId=r||$a()}dispose(){}}var IA;(function(n){n.id="CONTEXT_MENU_MODEL",n.useValue=to(n.id),n.getModel=jo(n.id)})(IA||(IA={}));const{inject:QP,singleton:pN}=j;let xw=class{constructor(){this.toDispose=new Kt,this.getMenuModelValue=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=yield this.menuConfig.getConfig(),{anchor:s,type:a,cell:u}=r,h=new Kt;this.toDispose.push(h);const p=u?u.getData():null,g=new Lo({id:"menuroot",type:ge.Root,submenu:[]});h.push(Pt.create(()=>{g.dispose()}));const y={toDispose:h,anchor:s,target:{data:p,type:a},customRender:null,menuModel:g};return i.menuCustomRender&&(y.customRender=yield i.menuCustomRender(r,this.modelService)),i.menuModelService&&(yield i.menuModelService(r,y.menuModel,this.modelService,h)),y})}registerModel(r){const i=[r.registerModel({id:IA.id,getInitialValue:()=>null,watchChange:(s,a)=>(0,F.mG)(this,void 0,void 0,function*(){return(yield Pl.getModel(a)).watch(h=>(0,F.mG)(this,void 0,void 0,function*(){const p=yield this.getMenuModelValue(h);s.setValue(p)}))})})];this.toDispose.pushAll(i)}};(0,F.gn)([QP(bw),(0,F.w6)("design:type",bw)],xw.prototype,"menuConfig",void 0),(0,F.gn)([QP(Ed),(0,F.w6)("design:type",Object)],xw.prototype,"modelService",void 0),xw=(0,F.gn)([pN({contrib:[gl]})],xw);const gN=n=>Gr(r=>{r(xw),r(bw,{useValue:n})});var Cg=M(1413),eD=M(45987),vN=M(81263),h1={adjustX:1,adjustY:1},f1=[0,0],mN={topLeft:{points:["bl","tl"],overflow:h1,offset:[0,-4],targetOffset:f1},topCenter:{points:["bc","tc"],overflow:h1,offset:[0,-4],targetOffset:f1},topRight:{points:["br","tr"],overflow:h1,offset:[0,-4],targetOffset:f1},bottomLeft:{points:["tl","bl"],overflow:h1,offset:[0,4],targetOffset:f1},bottomCenter:{points:["tc","bc"],overflow:h1,offset:[0,4],targetOffset:f1},bottomRight:{points:["tr","br"],overflow:h1,offset:[0,4],targetOffset:f1}},yN=mN,Ti={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(r){var i=r.keyCode;if(r.altKey&&!r.ctrlKey||r.metaKey||i>=Ti.F1&&i<=Ti.F12)return!1;switch(i){case Ti.ALT:case Ti.CAPS_LOCK:case Ti.CONTEXT_MENU:case Ti.CTRL:case Ti.DOWN:case Ti.END:case Ti.ESC:case Ti.HOME:case Ti.INSERT:case Ti.LEFT:case Ti.MAC_FF_META:case Ti.META:case Ti.NUMLOCK:case Ti.NUM_CENTER:case Ti.PAGE_DOWN:case Ti.PAGE_UP:case Ti.PAUSE:case Ti.PRINT_SCREEN:case Ti.RIGHT:case Ti.SHIFT:case Ti.UP:case Ti.WIN_KEY:case Ti.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(r){if(r>=Ti.ZERO&&r<=Ti.NINE||r>=Ti.NUM_ZERO&&r<=Ti.NUM_MULTIPLY||r>=Ti.A&&r<=Ti.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&r===0)return!0;switch(r){case Ti.SPACE:case Ti.QUESTION_MARK:case Ti.NUM_PLUS:case Ti.NUM_MINUS:case Ti.NUM_PERIOD:case Ti.NUM_DIVISION:case Ti.SEMICOLON:case Ti.DASH:case Ti.EQUALS:case Ti.COMMA:case Ti.PERIOD:case Ti.SLASH:case Ti.APOSTROPHE:case Ti.SINGLE_QUOTE:case Ti.OPEN_SQUARE_BRACKET:case Ti.BACKSLASH:case Ti.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},tD=Ti,nD=function(r){return+setTimeout(r,16)},rD=function(r){return clearTimeout(r)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(nD=function(r){return window.requestAnimationFrame(r)},rD=function(r){return window.cancelAnimationFrame(r)});var iD=0,I3=new Map;function oD(n){I3.delete(n)}var sD=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;iD+=1;var s=iD;function a(u){if(u===0)oD(s),r();else{var h=nD(function(){a(u-1)});I3.set(s,h)}}return a(i),s};sD.cancel=function(n){var r=I3.get(n);return oD(r),rD(r)};var bN=sD,xN=tD.ESC,CN=tD.TAB;function wN(n){var r=n.visible,i=n.setTriggerVisible,s=n.triggerRef,a=n.menuRef,u=n.onVisibleChange,h=n.autoFocus,p=H.useRef(!1),g=function(){if(r&&s.current){var T,O,I,k;(T=s.current)===null||T===void 0||(O=T.triggerRef)===null||O===void 0||(I=O.current)===null||I===void 0||(k=I.focus)===null||k===void 0||k.call(I),i(!1),typeof u=="function"&&u(!1)}},y=function(){var T,O;(T=a.current)===null||T===void 0||(O=T.focus)===null||O===void 0||O.call(T),p.current=!0},b=function(T){var O;switch(T.keyCode){case xN:g();break;case CN:!p.current&&(!((O=a.current)===null||O===void 0)&&O.focus)?(T.preventDefault(),y()):g();break}};H.useEffect(function(){return r?(window.addEventListener("keydown",b),h&&bN(y,3),function(){window.removeEventListener("keydown",b),p.current=!1}):function(){p.current=!1}},[r])}var EN=M(59864);function zk(n,r,i){var s=React.useRef({});return(!("value"in s.current)||i(s.current.condition,r))&&(s.current.value=n(),s.current.condition=r),s.current.value}function SN(n,r){typeof n=="function"?n(r):(0,xl.Z)(n)==="object"&&n&&"current"in n&&(n.current=r)}function aD(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(function(a){return a});return s.length<=1?s[0]:function(a){r.forEach(function(u){SN(u,a)})}}function Uk(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return useMemo(function(){return aD.apply(void 0,r)},r,function(s,a){return s.length===a.length&&s.every(function(u,h){return u===a[h]})})}function _N(n){var r,i,s=(0,EN.isMemo)(n)?n.type.type:n.type;return!(typeof s=="function"&&!((r=s.prototype)!==null&&r!==void 0&&r.render)||typeof n=="function"&&!((i=n.prototype)!==null&&i!==void 0&&i.render))}var AN=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function TN(n,r){var i=n.arrow,s=i===void 0?!1:i,a=n.prefixCls,u=a===void 0?"rc-dropdown":a,h=n.transitionName,p=n.animation,g=n.align,y=n.placement,b=y===void 0?"bottomLeft":y,E=n.placements,T=E===void 0?yN:E,O=n.getPopupContainer,I=n.showAction,k=n.hideAction,B=n.overlayClassName,$=n.overlayStyle,X=n.visible,re=n.trigger,ye=re===void 0?["hover"]:re,me=n.autoFocus,We=(0,eD.Z)(n,AN),at=H.useState(),ft=(0,jp.Z)(at,2),Qt=ft[0],_t=ft[1],en="visible"in n?X:Qt,ct=H.useRef(null);H.useImperativeHandle(r,function(){return ct.current});var Hn=H.useRef(null),Gn="".concat(u,"-menu");wN({visible:en,setTriggerVisible:_t,triggerRef:ct,menuRef:Hn,onVisibleChange:n.onVisibleChange,autoFocus:me});var rr=function(){var Or=n.overlay,Hi;return typeof Or=="function"?Hi=Or():Hi=Or,Hi},Vi=function(Or){var Hi=n.onOverlayClick,eo=rr().props;_t(!1),Hi&&Hi(Or),eo.onClick&&eo.onClick(Or)},ji=function(Or){var Hi=n.onVisibleChange;_t(Or),typeof Hi=="function"&&Hi(Or)},ai=function(){var Or,Hi=rr(),eo=aD(Hn,Hi.ref),xo=(Or={prefixCls:Gn},(0,Bt.Z)(Or,"data-dropdown-inject",!0),(0,Bt.Z)(Or,"onClick",Vi),(0,Bt.Z)(Or,"ref",_N(Hi)?eo:void 0),Or);return typeof Hi.type=="string"&&(delete xo.prefixCls,delete xo["data-dropdown-inject"]),H.createElement(H.Fragment,null,s&&H.createElement("div",{className:"".concat(u,"-arrow")}),H.cloneElement(Hi,xo))},Zo=function(){var Or=n.overlay;return typeof Or=="function"?ai:ai()},na=function(){var Or=n.minOverlayWidthMatchTrigger,Hi=n.alignPoint;return"minOverlayWidthMatchTrigger"in n?Or:!Hi},Mi=function(){var Or=n.openClassName;return Or!==void 0?Or:"".concat(u,"-open")},ra=function(){var Or=n.children,Hi=Or.props?Or.props:{},eo=Te()(Hi.className,Mi());return en&&Or?H.cloneElement(Or,{className:eo}):Or},Ha=k;return!Ha&&ye.indexOf("contextMenu")!==-1&&(Ha=["click"]),H.createElement(vN.Z,(0,Cg.Z)((0,Cg.Z)({builtinPlacements:T},We),{},{prefixCls:u,ref:ct,popupClassName:Te()(B,(0,Bt.Z)({},"".concat(u,"-show-arrow"),s)),popupStyle:$,action:ye,showAction:I,hideAction:Ha||[],popupPlacement:b,popupAlign:g,popupTransitionName:h,popupAnimation:p,popupVisible:en,stretch:na()?"minWidth":"",popup:Zo(),onPopupVisibleChange:ji,getPopupContainer:O}),ra())}var MN=H.forwardRef(TN),ON=MN;class RA extends H.Component{render(){const{children:r,trigger:i,disabled:s}=this.props,a=`${this.props.prefixCls}-dropdown`,u=H.Children.only(r),h=H.cloneElement(u,{className:Te()(r.props.className,`${a}-trigger`),disabled:s}),p=s?[]:Array.isArray(i)?i:[i];let g=!1;p&&p.indexOf("contextMenu")!==-1&&(g=!0);const y=H.Children.only(this.props.overlay),b=H.createElement("div",{className:`${a}-overlay`},y);return H.createElement(ON,Object.assign({},this.props,{prefixCls:a,overlay:b,alignPoint:g,trigger:p}),h)}}(function(n){n.defaultProps={trigger:"hover",prefixCls:"x6",mouseEnterDelay:.15,mouseLeaveDelay:.1,placement:"bottomLeft"}})(RA||(RA={}));const kA=H.createContext({});class Jv extends H.PureComponent{constructor(){super(...arguments),this.onHotkey=()=>{this.triggerHandler()},this.onClick=r=>{this.triggerHandler(r)}}componentDidMount(){const{hotkey:r}=this.props;r&&this.props.context.registerHotkey(r,this.onHotkey)}componentWillUnmount(){const{hotkey:r}=this.props;r&&this.props.context.unregisterHotkey(r,this.onHotkey)}triggerHandler(r){!this.props.disabled&&!this.props.hidden&&(this.props.name&&this.props.context.onClick(this.props.name,r),this.props.onClick&&this.props.onClick())}render(){return H.createElement("div",Object.assign({},Jv.getProps(this.props)),Jv.getContent(this.props,this.onClick))}}(function(n){function r(s,a){const{className:u,disabled:h,active:p,hidden:g}=s,{prefixCls:y}=s.context,b=`${y}-item`;return{className:Te()(b,a,{[`${b}-active`]:p,[`${b}-hidden`]:g,[`${b}-disabled`]:h},u)}}n.getProps=r;function i(s,a,u,h){const{icon:p,text:g,hotkey:y,children:b}=s,{prefixCls:E}=s.context,T=`${E}-item`;return H.createElement(H.Fragment,null,H.createElement("button",{type:"button",className:`${T}-button`,onClick:a},p&&H.isValidElement(p)&&H.createElement("span",{className:`${T}-icon`},p),H.createElement("span",{className:`${T}-text`},g||b),y&&H.createElement("span",{className:`${T}-hotkey`},y),u),h)}n.getContent=i})(Jv||(Jv={}));const PN=n=>H.createElement(kA.Consumer,null,r=>H.createElement(Jv,Object.assign({context:r},n))),DN=()=>H.createElement(kA.Consumer,null,({prefixCls:n})=>H.createElement("div",{className:`${n}-item ${n}-item-divider`}));var NN=function(n,r){var i={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&r.indexOf(s)<0&&(i[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)r.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(i[s[a]]=n[s[a]]);return i};const IN=n=>{const{hotkey:r,children:i}=n,s=NN(n,["hotkey","children"]);return H.createElement(kA.Consumer,null,a=>{const{prefixCls:u}=a,h=Jv.getProps(Object.assign({context:a},n),`${u}-submenu`);return H.createElement("div",Object.assign({},h),Jv.getContent(Object.assign({context:a},s),null,H.createElement("span",{className:`${u}-submenu-arrow`}),H.createElement("div",{className:`${u}-submenu-menu`},i)))})};class Qv extends H.PureComponent{constructor(){super(...arguments),this.onClick=(r,i)=>{this.props.stopPropagation&&i!=null&&i.stopPropagation(),this.props.onClick&&this.props.onClick(r)},this.registerHotkey=(r,i)=>{this.props.registerHotkey&&this.props.registerHotkey(r,i)},this.unregisterHotkey=(r,i)=>{this.props.unregisterHotkey&&this.props.unregisterHotkey(r,i)}}render(){const{prefixCls:r,className:i,children:s,hasIcon:a}=this.props,u=`${r}-menu`,h=kA.Provider,p={prefixCls:u,onClick:this.onClick,registerHotkey:this.registerHotkey,unregisterHotkey:this.unregisterHotkey};return H.createElement("div",{className:Te()(u,{[`${u}-has-icon`]:a},i)},H.createElement(h,{value:p},s))}}(function(n){n.Item=PN,n.Divider=DN,n.SubMenu=IN,n.defaultProps={prefixCls:"x6",stopPropagation:!1}})(Qv||(Qv={}));const R3=n=>{const{idx:r,menuOptions:i,target:s,modelService:a,commandService:u,onHide:h}=n,{id:p,label:g,isEnabled:y=!0,isVisible:b=!0,iconName:E,submenu:T=[],active:O,hotkey:I,render:k,onClick:B}=i;if(!b)return null;if(i.type==="separator")return H.createElement(Qv.Divider,{key:String(i.id)+r});if(i.type==="root")return H.createElement(Qv,{hasIcon:!0},T.map((X,re)=>R3({idx:re,target:s,commandService:u,modelService:a,menuOptions:X,onHide:h})));if(i.submenu&&Array.isArray(i.submenu)){const X=Yc.get(E),re=!y;return H.createElement(Qv.SubMenu,{key:String(p),text:g,disabled:re||T.length===0,icon:X?H.createElement(X,null):null,active:O,hotkey:I},T.map((ye,me)=>R3({idx:me,target:s,commandService:u,modelService:a,menuOptions:ye,onHide:h})))}const $=Yc.get(E);return k?H.createElement(k,{menuItem:i,target:s,commandService:u,modelService:a,onHide:h},[H.createElement(Qv.Item,{key:String(p),text:g,disabled:!y,icon:$?H.createElement($,null):null,active:O,hotkey:I})]):H.createElement(Qv.Item,{key:String(p),text:g,disabled:!y,icon:$?H.createElement($,null):null,active:O,hotkey:I,onClick:()=>(0,F.mG)(void 0,void 0,void 0,function*(){yield B({menuItem:i,target:s,commandService:u,modelService:a}),h&&h()})})},RN=n=>{const{menuModel:r,target:i,onHide:s}=n,{modelService:a,commandService:u}=es(),[h]=Jt(r);return R3({idx:-1,target:i,commandService:u,modelService:a,menuOptions:h,onHide:s})},kN=({toDispose:n})=>(H.useEffect(()=>()=>{n.dispose()},[n]),null),LN=()=>{const n=H.useRef(),r=es(),[i,,s]=An({getModel:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return yield IA.getModel(r.modelService)}),initialState:{anchor:null,menuModel:null,target:null,customRender:null,toDispose:null}}),{target:a,anchor:u,menuModel:h,customRender:p,toDispose:g}=i;if(!a||!u||!h)return null;const y=()=>{s.setValue({anchor:null,menuModel:null,target:null,customRender:null,toDispose:null})},b=p?H.createElement(p,{target:a,modelService:r.modelService,onHide:y}):H.createElement(RN,{target:a,menuModel:h,onHide:y});return H.createElement("div",{className:"xflow-menu-mask",ref:n,onClick:y,onContextMenu:E=>{E.preventDefault(),E.stopPropagation()}},H.createElement(kN,{toDispose:g}),H.createElement(RA,{visible:!0,getPopupContainer:()=>n.current,overlay:b},H.createElement("div",{className:"xflow-context-menu-anchor",style:{top:u.y,left:u.x}})))},Vk="CanvasContextMenu",GN=n=>{const i=!!es(),s=H.useMemo(()=>n.config?n.config:new bw,[n.config]);return H.createElement(Mf,{createModule:gN,config:s},i&&H.createElement(LN,{config:s}))},FN=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new bw;return n(a,i),a},[i])},k3="CanvasToolbar";class lD{constructor(){this.CONFIG_TYPE=k3,this.setToolbarName=r=>{this.moduleId=k3+"__"+r},this.setToolbarModelService=r=>{this.toolbarModelService=r},this.setCustomToolbarRender=r=>{this.customRenderService=r},this.getConfig=()=>({CONFIG_TYPE:this.CONFIG_TYPE,toolbarCustomRender:this.customRenderService,toolbarModelService:this.toolbarModelService}),this.moduleId=k3+"__"+$a()}dispose(){}}var cD=M(11382);const L3=H.createContext({});class BN extends H.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{this.processClick()},this.handleDropdownItemClick=r=>{this.processClick(r,!1)}}processClick(r=this.props.name,i=this.props.dropdown){!this.props.disabled&&!i&&(r&&this.props.context.onClick(r),this.props.onClick&&this.props.onClick(r))}renderButton(){const{className:r,hidden:i,disabled:s,active:a,icon:u,text:h,dropdown:p,dropdownArrow:g,tooltip:y,tooltipProps:b,tooltipAsTitle:E,children:T}=this.props,{prefixCls:O}=this.props.context,I=`${O}-item`,k={onClick:this.handleClick,className:Te()(I,{[`${I}-hidden`]:i,[`${I}-active`]:a,[`${I}-disabled`]:s,[`${I}-dropdown`]:p},r)};y&&E&&(k.title=y);const B=H.createElement("button",Object.assign({type:"button"},k),u&&H.isValidElement(u)&&H.createElement("span",{className:`${I}-icon`},u),(h||T)&&H.createElement("span",{className:`${I}-text`},h||T),p&&g&&H.createElement("span",{className:`${I}-dropdown-arrow`}));return y&&!E&&!s?H.createElement(PA.Z,Object.assign({title:y,placement:"bottom",mouseEnterDelay:0,mouseLeaveDelay:0},b),B):B}render(){const{dropdown:r,dropdownProps:i,disabled:s}=this.props,a=this.renderButton();if(r!=null&&!s){const u=H.createElement("div",null,r.type===Qv?H.cloneElement(r,{onClick:this.handleDropdownItemClick}):r),h=Object.assign(Object.assign({trigger:["click"]},i),{disabled:s,overlay:u});return H.createElement(RA,Object.assign({},h),a)}return a}}const uD=n=>H.createElement(L3.Consumer,null,r=>H.createElement(BN,Object.assign({context:r},n)));uD.defaultProps={dropdownArrow:!0};const zN=({children:n,className:r})=>H.createElement(L3.Consumer,null,({prefixCls:i})=>H.createElement("div",{className:Te()(`${i}-group`,r)},n));class p1 extends H.PureComponent{constructor(){super(...arguments),this.onClick=(r,i)=>{this.props.onClick&&this.props.onClick(r,i)}}render(){const{prefixCls:r,className:i,children:s,extra:a,size:u,align:h,hoverEffect:p}=this.props,g=`${r}-toolbar`;return H.createElement("div",{className:Te()(g,i,{[`${g}-${u}`]:u,[`${g}-align-right`]:h==="right",[`${g}-hover-effect`]:p})},H.createElement("div",{className:`${g}-content`},H.createElement("div",{className:`${g}-content-inner`},H.createElement(L3.Provider,{value:{prefixCls:g,onClick:this.onClick}},s)),a&&H.createElement("div",{className:`${g}-content-extras`},a)))}}(function(n){n.Item=uD,n.Group=zN,n.defaultProps={prefixCls:"x6",hoverEffect:!1}})(p1||(p1={}));const UN=n=>{const r=es(),{item:i,layout:s}=n,a=Te()({["xflow-toolbar-item"]:!0}),u=s==="vertical"?"":i.text;let h;if(i.icon)h=i.icon;else if(i.iconName){const T=Yc.get(i.iconName);h=H.createElement(T,null)}const p=i.render,{isEnabled:g=!0}=i,{commandService:y,modelService:b}=r,E=()=>{i.onClick&&i.onClick({toolbarItem:i,commandService:y,modelService:b})};return p?H.createElement(p,Object.assign({},i,{onClick:E}),H.createElement(p1.Item,Object.assign({},i,{icon:h,text:u,className:a,disabled:!g,tooltip:i.tooltip||i.text,tooltipProps:Object.assign({placement:s==="vertical"?"left":"bottom"},i.tooltipProps),onClick:()=>{}}))):H.createElement(p1.Item,Object.assign({},i,{icon:h,text:u,className:a,hidden:!i,disabled:!g,tooltip:i.tooltip||i.text,onClick:E,tooltipProps:Object.assign(Object.assign({},i.tooltipProps),{placement:s==="vertical"?"left":"bottom"})}))},VN=n=>{const{group:r,layout:i}=n,s=H.useMemo(()=>r.name||$a(),[r.name]),{items:a=[]}=r;if(a.length===0)return null;const u=Te()({["xflow-toolbar-group"]:!0});return H.createElement(p1.Group,{className:u,key:s},a.map(h=>H.createElement(UN,{item:h,layout:i,key:h.id})))},jN=n=>{const{config:r}=n,i=r.moduleId,s=es(),[a,u,h,p]=Un({name:i,layout:n.layout,mainGroups:[],extraGroups:[],customRender:null});return H.useEffect(()=>{const g=new Kt;if(!s.modelService.findDeferredModel(i)){const{toolbarCustomRender:b,toolbarModelService:E}=r.getConfig(),T=s.modelService.registerModel({id:i,modelFactory:()=>h,watchChange:O=>(0,F.mG)(void 0,void 0,void 0,function*(){if(E&&(yield E(O,s.modelService,g)),b){const I=k=>{O.setValue(B=>B.customRender=k)};yield b(s.modelService,I)}return g})});g.push(T)}return()=>{g.dispose()}},[]),{isModelReady:p,state:a,setState:u,toolbarModel:h}},dD=n=>{const{idx:r,groups:i,layout:s,toolbarOptions:a}=n,{hoverEffect:u=!0}=a;return H.createElement(p1,{hoverEffect:u},i.map((h,p)=>{const g=r+p;return H.createElement(VN,{key:g,group:h,layout:s})}))},HN=n=>{const{isModelReady:r,state:i}=jN(n),s=Gc(n.position),{mainGroups:a=[],extraGroups:u=[],layout:h,customRender:p}=i,g=Te()(n.className,h,"xflow-toolbar"),y=Te()({[h]:!0,["xflow-toolbar-root"]:!0});return r?p?H.createElement("div",{className:g,style:Object.assign(Object.assign({},s),n.style)},H.createElement(p,{config:i})):H.createElement("div",{className:g,style:Object.assign(Object.assign({},s),n.style)},H.createElement("div",{className:y},a.length>0&&H.createElement(dD,{idx:"mainGroups",groups:a,layout:h,toolbarOptions:i}),u.length>0&&H.createElement(dD,{idx:"extraGroups",groups:u,layout:h,toolbarOptions:i}))):H.createElement("div",{className:g,style:Object.assign(Object.assign({},s),n.style)},H.createElement(cD.Z,{spinning:!0,size:"small"}))},$N=H.memo(HN),hD=n=>{const i=!!es(),s=H.useMemo(()=>n.config?n.config:new lD,[n.config]);return i?H.createElement($N,Object.assign({},n,{config:s})):null},fD=n=>r=>{const i=H.useMemo(()=>({getValue:()=>({})}),[]);return i.getValue=()=>r,H.useMemo(()=>{const a=new lD;return n(a,i),a},[i])};var WN=M(35598),XN=M(15668),ZN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zm196-50c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zm0-140c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}},{tag:"path",attrs:{d:"M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"}}]},name:"one-to-one",theme:"outlined"},YN=ZN,LA=M(84089),pD=function(r,i){return H.createElement(LA.Z,(0,Cg.Z)((0,Cg.Z)({},r),{},{ref:i,icon:YN}))};pD.displayName="OneToOneOutlined";var KN=H.forwardRef(pD),qN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},JN=qN,gD=function(r,i){return H.createElement(LA.Z,(0,Cg.Z)((0,Cg.Z)({},r),{},{ref:i,icon:JN}))};gD.displayName="CompressOutlined";var QN=H.forwardRef(gD),eI=M(27732),tI=M(11713),Cw;(function(n){Yc.set("ZoomInOutlined",WN.Z),Yc.set("ZoomOutOutlined",XN.Z),Yc.set("OneToOneOutlined",KN),Yc.set("CompressOutlined",QN),Yc.set("FullscreenOutlined",eI.Z),Yc.set("FullscreenExitOutlined",tI.Z),n.ZOOM_IN=pi.GRAPH_ZOOM.id+"-zoom-in",n.ZOOM_OUT=pi.GRAPH_ZOOM.id+"-zoom-out",n.SCALE_TO_ONE=pi.GRAPH_ZOOM.id+"-scale-to-one",n.SCALE_TO_FIT=pi.GRAPH_ZOOM.id+"-scale-to-fit",n.FULLSCREEN=pi.GRAPH_ZOOM.id+"-fullscreen",n.MAX_SCALE=1.5,n.MIN_SCALE=.05,n.zoomOptions={maxScale:n.MAX_SCALE,minScale:n.MIN_SCALE},n.getToolbarConfig=({zoomFactor:r,fullscreen:i})=>[{name:"main",items:[{id:n.ZOOM_IN,tooltip:"\u653E\u5927",iconName:"ZoomInOutlined",onClick:({commandService:s})=>{s.executeCommand(pi.GRAPH_ZOOM.id,{factor:.1,zoomOptions:n.zoomOptions})}},{id:n.ZOOM_OUT,tooltip:"\u7F29\u5C0F",iconName:"ZoomOutOutlined",onClick:({commandService:s})=>{s.executeCommand(pi.GRAPH_ZOOM.id,{factor:-.1,zoomOptions:n.zoomOptions})}},{id:n.SCALE_TO_ONE,iconName:"OneToOneOutlined",tooltip:"\u7F29\u653E\u52301:1",isEnabled:r!==1,onClick:({commandService:s})=>{s.executeCommand(pi.GRAPH_ZOOM.id,{factor:"real",zoomOptions:n.zoomOptions})}},{id:n.SCALE_TO_FIT,tooltip:"\u7F29\u653E\u5230\u9002\u5E94\u5C4F\u5E55",iconName:"CompressOutlined",onClick:({commandService:s})=>{s.executeCommand(pi.GRAPH_ZOOM.id,{factor:"fit",zoomOptions:n.zoomOptions})}},{id:n.FULLSCREEN,tooltip:i?"\u9000\u51FA\u5168\u5C4F":"\u5168\u5C4F",iconName:i?"FullscreenExitOutlined":"FullscreenOutlined",onClick:({commandService:s})=>{s.executeCommand(pi.GRAPH_FULLSCREEN.id,{})}}]}]})(Cw||(Cw={}));const jk="CANVAS_SCALE_TOOLBAR",nI=fD(n=>{n.setToolbarModelService((r,i)=>(0,F.mG)(void 0,void 0,void 0,function*(){const s=yield Ho.useValue(i);r.setValue(h=>{h.mainGroups=Cw.getToolbarConfig({zoomFactor:s.zoomFactor,fullscreen:!1})});const a=yield Pd.getModel(i);a.setValue(!1),a.watch(h=>{r.setValue(p=>{p.mainGroups=Cw.getToolbarConfig({zoomFactor:s.zoomFactor,fullscreen:h})})}),(yield Ho.getModel(i)).watch(({zoomFactor:h})=>(0,F.mG)(void 0,void 0,void 0,function*(){const p=yield Pd.useValue(i);r.setValue(g=>{g.mainGroups=Cw.getToolbarConfig({zoomFactor:h,fullscreen:p})})}))}))}),rI=n=>{const r=nI(n);return H.createElement(hD,Object.assign({layout:"vertical"},n,{config:r,position:n.position||{top:12,right:12}}))};function Hk(n){const{className:r,layout:i,initialValues:s,form:a,formItems:u=[],onFinish:h,submitButton:p,buttonProps:g}=n;if(!a)return null;const y=i==="vertical"?{padding:"0px 12px"}:{padding:"8px 12px"};return React.createElement(Form,{size:"small",form:a,style:y,layout:i,onFinish:h,className:r,initialValues:s,labelCol:i==="vertical"?{span:24}:{span:8},wrapperCol:i==="vertical"?{span:24}:{span:16}},u.map(b=>React.createElement(Form.Item,Object.assign({label:b.label,name:b.name,rules:b.rules},b.itemProps),React.createElement(b.render,b.renderProps))),React.createElement(Form.Item,{wrapperCol:{offset:0,span:24}},p||React.createElement(Button,Object.assign({type:"primary",htmlType:"submit",style:{width:"100%"}},g),"\u6267\u884C\u547D\u4EE4")))}const iI=Symbol("IMinimapConfigProvider");let G3=class{constructor(){this.toDispose=new Kt,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return Pt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new Kt,s=[r.graphOptions.registerHook({name:"add minimap options",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=yield this.minimapConfig.getConfig();a.minimap=Object.assign({},u)})})];return i.pushAll(s),Pt.create(()=>{})})}};(0,F.gn)([Zt(iI),(0,F.w6)("design:type",Object)],G3.prototype,"minimapConfig",void 0),G3=(0,F.gn)([kt({contrib:la})],G3);const $k=n=>ManaSyringe.Module(r=>{r(IMinimapConfigProvider,{useDynamic:()=>n}),r(HookContribution)});class ww extends wr.DK{renderMarkup(){return this.renderJSONMarkup({tagName:"rect",selector:"body"})}update(){super.update({body:{refWidth:"100%",refHeight:"100%",fill:ww.nodeFillColor}})}}ww.nodeFillColor="#31d0c6",ww.setNodeFillColor=n=>{ww.nodeFillColor=n};const oI="CanvasMiniMap",sI=()=>({grid:!1,enabled:!0,width:200,height:120,padding:8,graphOptions:{async:!0,getCellView(n){if(n.isNode())return SimpleNodeView},createCellView(n){if(n.isEdge())return null}}}),Wk=n=>{const{nodeFillColor:r,borderColor:i="#ced4de",handlerColor:s="rgba(0,0,0,.3)",miniMapClz:a="",position:u={bottom:12,right:12},minimapOptions:h={}}=n,p=React.useRef(null),g=React.useRef(n.minimapOptions),y=React.useMemo(()=>new Set([a,"xflow-minimap","minimap-instacne-"+Date.now().toString()]),[a]),b=React.useMemo(()=>()=>__awaiter(void 0,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},sI()),g.current),{container:p.current})}),[p]),E=usePositionStyle(u);React.useEffect(()=>{g.current=h},[g,h]),React.useEffect(()=>{r&&SimpleNodeView.setNodeFillColor(r)},[r]),React.useEffect(()=>{const O=Array.from(y).reduce((B,$)=>$?`${B}.${$}`:B,""),I=`
      ${O} .x6-widget-minimap-viewport {
        border: 1px solid ${i};
        margin: 0;
      }
      ${O} .x6-widget-minimap-viewport-zoom {
        border: 1px solid ${s};
      }
    `,k=insertCss(I);return()=>{document.head.removeChild(k)}},[i,y,s]);const T=Array.from(y).join(" ");return React.createElement(XFlowAppExtensionModule,{config:{getConfig:b,CONFIG_TYPE:oI},createModule},React.createElement("div",{ref:p,className:T,style:E}))};class aI{constructor(){this.getValue=()=>({})}dispose(){this.getValue=()=>null}}class Xk{constructor(r){this.moduleId=r}dispose(){}}const vD=H.createContext({propsProxy:null,commandService:null,modelService:null}),Ew=()=>H.useContext(vD),mD=n=>{const{className:r,position:i,style:s,children:a}=n,u=es(),h=Gc(i),p=H.useMemo(()=>new aI,[]);if(H.useEffect(()=>()=>{p.dispose()},[p]),!u||!u.modelService)return null;p.getValue=()=>n;const g=Te()({[r]:!!r,"xflow-workspace-panel":!0}),{commandService:y,modelService:b}=u;return H.createElement(vD.Provider,{value:{propsProxy:p,commandService:y,modelService:b}},H.createElement("div",{className:g,style:Object.assign(Object.assign({},h),s)},a))};var lI=M(31673);const g1={HORIRONTAL_NODE:"xflow-node-horizontal-edge",VERTICAL_NODE:"xflow-node-vertical-edge",VERTICAL_GROUP:"xflow-group-vertical-edge"},GA={EDGE:"xflow-edge"},F3="XFLOW_NODE_SHAPE",yD="processing",cI=160,uI=32;var v1;(function(n){n.id="GRAPH_STATUS_INFO";let r;(function(i){i.SUCCESS="success",i.PROCESSING="processing",i.ERROR="error",i.DEFAULT="default",i.WARNING="warning"})(r=n.StatusEnum||(n.StatusEnum={})),n.getModel=jo(n.id),n.useValue=to(n.id)})(v1||(v1={}));var FA;(function(n){n.QUERY_GRAPH_STATUS={id:"xflow:query-graph-status",label:"\u67E5\u8BE2\u753B\u5E03\u8282\u70B9\u72B6\u6001"}})(FA||(FA={}));let BA;const{AnchorGroup:zA}=lo;wr.NB.registry.exist(F3)?BA=wr.NB.registry.get(F3):BA=Xl.define({width:cI,height:uI,shape:F3,view:$i,ports:{groups:{top:{zIndex:2,position:{name:zA.TOP}},bottom:{zIndex:2,position:{name:zA.BOTTOM}},right:{zIndex:2,position:{name:zA.RIGHT}},left:{zIndex:2,position:{name:zA.LEFT}}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%",zIndex:1}},portMarkup:[{tagName:"g",selector:"xflow-port-group",className:"xflow-port-group",attrs:{width:8,height:8,x:-4,y:-4,zIndex:10,magnet:"true"},children:[{tagName:"circle",selector:"xflow-port",className:"xflow-port",attrs:{r:4,fill:"#fff",stroke:"#d9d9d9",zIndex:12}},{tagName:"polygon",selector:"xflow-port-arrow",className:"xflow-port-arrow",attrs:{points:"0,0 8,0 4,4 ",fill:"#d9d9d9",stroke:"#d9d9d9",zIndex:13,transform:"translate(-4,0)"}}]}]});const{DirectoryTree:dI,TreeNode:bD}=lI.Z,hI=({expanded:n})=>n?React.createElement(FolderOpenFilled,null):React.createElement(FolderFilled,null),fI=n=>new XFlowNode(n),xD=n=>{const{nodeConfig:r,onMouseDown:i,graphConfig:s,modelService:a,commandService:u}=n;if(!s)return React.createElement("div",null);if(r.renderComponent)return React.createElement("div",{onMouseDown:i},React.createElement(r.renderComponent,{data:r,isNodeTreePanel:!0}));const h=s.nodeTypeParser(r)||XFlowConstants.XFLOW_DEFAULT_NODE,p=s.nodeRender.get(h);return React.createElement("div",{onMouseDown:i},React.createElement(p,{commandService:u,modelService:a,data:r,isNodeTreePanel:!0}))},CD=n=>{const[r,i]=useState(!1),[s,a]=useState(),{getGraphConfig:u}=useXFlowApp();React.useEffect(()=>{u().then(O=>{a(O.appContainer)})});const{prefixClz:h,graphConfig:p,commandService:g,modelService:y,popoverContent:b,onMouseDown:E,item:T}=n;return React.createElement(React.Fragment,null,b&&React.createElement(Popover,{placement:"right",destroyTooltipOnHide:!0,content:b,visible:r,onVisibleChange:O=>{i(O)},getPopupContainer:()=>s||document.body},React.createElement("div",{className:`${h}-node-wrapper`,onMouseEnter:()=>{i(!0)}},xD({graphConfig:p,commandService:g,onMouseDown:E,modelService:y,nodeConfig:T}))),!b&&React.createElement("div",{className:`${h}-node-wrapper`,onMouseEnter:()=>{i(!0)}},xD({graphConfig:p,commandService:g,onMouseDown:E,modelService:y,nodeConfig:T})))},Zk=n=>{const{x6NodeFactory:r,dndOptions:i,onNodeDrop:s,state:a,onFolderExpand:u,prefixClz:h}=n,{graphProvider:p,modelService:g,commandService:y}=useXFlowApp(),[b,E]=React.useState(),[T,O]=React.useState(),[I,k]=React.useState();React.useEffect(()=>{p.getGraphInstance().then(X=>{k(X)})}),React.useEffect(()=>{if(p.getGraphOptions().then(re=>{E(re)}),!I)return;const X=new Addon.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},i),{target:I,validateNode:re=>__awaiter(void 0,void 0,void 0,function*(){const ye=Object.assign(Object.assign({},re.getData()),re.getPosition());return s?yield s(ye,y,g):console.error("onNodeDrop method is required in NodeTree Panel"),!1})}));O(X)},[y,i,I,p,g,s]);const B=React.useCallback(X=>re=>{if(!I||!T||!b)return;const ye=b.nodeTypeParser(X),me=X.renderComponent?X.renderComponent:b.nodeRender.get(ye),We=getNodeReactComponent(me,y,g),at={data:X,width:X.width||180,height:X.height||40,view:b.graphId,component:We},ft=r?r(at):fI(at);T.start(ft,re.nativeEvent)},[y,T,I,b,g,r]),$=React.useCallback((X=[])=>X.map(re=>{const{isDirectory:ye,children:me,popoverContent:We}=re;return ye?React.createElement(bD,{icon:hI,key:re.id,title:re.label,className:`${h}-tree-folder`},$(me)):React.createElement(bD,{isLeaf:!0,key:re.id,className:`${h}-tree-leaf`,icon:React.createElement("span",null),title:React.createElement(CD,{item:re,onMouseDown:B(re),popoverContent:We,prefixClz:h,modelService:g,commandService:y,graphConfig:b})})}),[y,b,g,B,h]);return React.createElement(React.Fragment,null,React.createElement("div",{className:`${h}-body`,style:n.style},!a.keyword&&React.createElement(dI,{showIcon:!0,selectable:!1,autoExpandParent:!1,onExpand:u,expandedKeys:a.expandedKeys,className:`${h}-tree`},$(a.treeData)),a.searchList.length>0&&React.createElement("ul",{className:`${h}-body-list`},a.searchList.map(X=>React.createElement("li",{key:X.id,className:`${h}-body-list-item`},React.createElement(CD,{item:X,onMouseDown:B(X),popoverContent:X.popoverContent,prefixClz:h,modelService:g,commandService:y,graphConfig:b})))),a.keyword&&a.searchList.length===0&&React.createElement(Empty,{style:{marginTop:"48px"}})))},Yk=n=>{const{prefixClz:r,onKeywordChange:i}=n,{propsProxy:s}=usePanelContext(),a=s.getValue();return React.createElement(React.Fragment,null,React.createElement("div",{className:`${r}-header`,style:n.style},a.header&&React.isValidElement(a.header)&&a.header,a.searchService&&React.createElement("div",{className:`${r}-header-search`},React.createElement(Input,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:u=>i(u.target.value),style:{width:"100%",border:0}}))))},Kk=n=>{const{prefixClz:r}=n,{propsProxy:i}=usePanelContext(),s=i.getValue();return React.createElement(React.Fragment,null,React.createElement("div",{className:`${r}-footer`,style:n.style},s.footer&&React.isValidElement(s.footer)&&s.footer))},qk=n=>{const r=n&&n.headerPosition&&n.headerPosition.height||PANEL_HEADER_HEIGHT,i=n.footerPosition&&n.footerPosition.height||PANEL_FOOTER_HEIGHT;return{headerStyle:usePositionStyle(Object.assign({height:r,lineHeight:r,top:0,left:0,right:0},n.headerPosition)),bodyStyle:usePositionStyle(Object.assign({left:0,right:0,top:r,bottom:i},n.bodyPosition)),footerStyle:usePositionStyle(Object.assign({left:0,right:0,lineHeight:i,height:i,bottom:0},n.footerPosition))}};var Jk=M(45578),Sw;(function(n){n.id="TREE_PANEL_MODEL",n.useModel=r=>(0,F.mG)(this,void 0,void 0,function*(){return r.awaitModel(n.id)})})(Sw||(Sw={}));const Qk=(n,r)=>{n.executeCommand(XFlowModelCommands.UPDATE_MODEL.id,{getModel:i=>__awaiter(void 0,void 0,void 0,function*(){return Sw.useModel(i)}),updateModel:r})},e4=n=>{const{treeDataService:r,searchService:i}=n,{modelService:s}=useXFlowApp(),[a,u,h]=createComponentModel({treeData:[],searchList:[],treeNodeList:[],expandedKeys:[],defaultExpandAll:!1,keyword:""});React.useEffect(()=>{s.findDeferredModel(Sw.id)||s.registerModel({id:Sw.id,modelFactory:()=>h,watchChange:y=>__awaiter(void 0,void 0,void 0,function*(){const b=yield MODELS.GRAPH_META.getModel(s),E=O=>__awaiter(void 0,void 0,void 0,function*(){const I=yield r(O,s),{treeData:k,rootNodes:B}=pI(I),$=yield y.getValidValue(),X=$.expandedKeys.length>0?$.expandedKeys:B.map(re=>re.id);return{listData:I,treeData:k,expandedKeys:X}}),T=b.watch(O=>__awaiter(void 0,void 0,void 0,function*(){const I=yield E(O);y.setValue({treeNodeList:I.listData,treeData:I.treeData,expandedKeys:I.expandedKeys,defaultExpandAll:!1,keyword:"",searchList:[]})}));return Disposable.create(()=>{T.dispose()})})})},[]);const p=React.useCallback(y=>{u(b=>{b.expandedKeys=y})},[u]),g=React.useCallback(y=>__awaiter(void 0,void 0,void 0,function*(){if(!i)return console.warn("searchService is not defined");if(y){const b=yield i(a.treeNodeList,y);u(E=>{E.keyword=y,E.searchList=b})}else u(b=>{b.keyword="",b.searchList=[]})}),[i,a.treeNodeList]);return{state:a,setState:u,onKeywordChange:g,onFolderExpand:p}};function pI(n=[]){const i=(h=>uniqBy(h,"id").reduce((y,b)=>{const E=b.parentId||TREE_ROOT_ID;return y.has(E)||y.set(E,[]),y.get(E).push(b),y},new Map))(cloneDeep(n));function s(h,p){return h.map(g=>{if(p.has(g.id)){const y=p.get(g.id);g.key=g.id,g.isDirectory=!0,g.children=s(y,p)||[]}else g.isLeaf=!0;return g})}const a=i.get(TREE_ROOT_ID)||[];return{treeData:s(a,i),rootNodes:a}}var wD;(function(n){n.id="TREE_PANEL_DATA"})(wD||(wD={}));const gI=n=>{const{headerStyle:r,bodyStyle:i,footerStyle:s}=usePanelLyaoutStyle(n),{state:a,onFolderExpand:u,onKeywordChange:h}=useTreePanelData(n);return React.createElement(React.Fragment,null,React.createElement(NodePanelHeader,Object.assign({},n,{state:a,style:r,onKeywordChange:h})),React.createElement(NodePanelBody,Object.assign({},n,{state:a,style:i,onFolderExpand:u})),React.createElement(NodePanelFooter,Object.assign({},n,{state:a,style:s})))},t4=n=>{const r=useXflowPrefixCls("node-dnd-panel");return React.createElement(WorkspacePanel,Object.assign({},n,{className:r}),React.createElement(gI,Object.assign({},n,{prefixClz:r})))},vI=n=>new BA(n),mI=n=>{const{x6NodeFactory:r,dndOptions:i,onNodeDrop:s}=n,{graphProvider:a,modelService:u,commandService:h}=es(),[p,g]=H.useState(),[y,b]=H.useState(),[E,T]=H.useState();H.useEffect(()=>{a.getGraphInstance().then(I=>{T(I)}),a.getGraphOptions().then(I=>{g(I)})},[a,T,g]),H.useEffect(()=>{if(!E)return;const I=new wr.e9.q6(Object.assign(Object.assign({scaled:!1,animation:!1},i),{target:E,validateNode:k=>(0,F.mG)(void 0,void 0,void 0,function*(){const B=Object.assign(Object.assign({},k.getData()),k.getPosition());return s?yield s(B,h,u):console.error("onNodeDrop method is required in NodeTree Panel"),!1})}));return b(I),()=>{I.dispose()}},[h,u,i,E,s]);const O=H.useCallback(I=>k=>{if(!E||!y||!p||I.isDisabled)return;const B=p.nodeTypeParser(I),$=I.renderComponent?I.renderComponent:p.nodeRender.get(B),X=j0($,h,u),re={data:I,width:I.width||180,height:I.height||40,view:p.graphId,component:X},ye=r?r(re):vI(re);y.start(ye,k.nativeEvent)},[h,y,E,p,u,r]);return{graphConfig:p,onMouseDown:O,modelService:u,commandService:h}};var _w=M(62986),yI=M(55241);const ED=n=>{const{nodeConfig:r,onMouseDown:i,graphConfig:s,modelService:a,commandService:u}=n;if(!s)return H.createElement("div",null);if(r.renderComponent)return H.createElement("div",{onMouseDown:i},H.createElement(r.renderComponent,{data:r,isNodePanel:!0}));const h=s.nodeTypeParser(r)||yi,p=s.nodeRender.get(h);return H.createElement("div",{onMouseDown:i},H.createElement(p,{commandService:u,modelService:a,data:r,isNodeTreePanel:!0}))},SD=n=>{const[r,i]=H.useState(!1),{prefixClz:s,graphConfig:a,commandService:u,modelService:h,popoverContent:p,onMouseDown:g,item:y}=n;return H.createElement(H.Fragment,null,p?H.createElement(yI.Z,{placement:"right",destroyTooltipOnHide:!0,content:p,visible:r,onVisibleChange:b=>{i(b)}},H.createElement("div",{className:`${s}-node-wrapper`,onMouseEnter:()=>{i(!0)}},ED({graphConfig:a,commandService:u,onMouseDown:g,modelService:h,nodeConfig:y}))):H.createElement("div",{className:`${s}-node-wrapper`},ED({graphConfig:a,commandService:u,onMouseDown:g,modelService:h,nodeConfig:y})))},bI=n=>{const{searchResult:r,prefixClz:i,onMouseDown:s,modelService:a,commandService:u,graphConfig:h}=n;return r.length===0?H.createElement(_w.Z,{style:{marginTop:"24px"}}):H.createElement("ul",{className:"xflow-collapse-search-list"},r.map(p=>H.createElement("li",{className:`xflow-collapse-search-list-item ${p.isDisabled?"disabled":""}`,key:p.id},H.createElement(SD,{item:p,onMouseDown:s(p),popoverContent:p.popoverContent,prefixClz:i,modelService:a,commandService:u,graphConfig:h}))))};var xI={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},CI=xI,_D=function(r,i){return H.createElement(LA.Z,(0,Cg.Z)((0,Cg.Z)({},r),{},{ref:i,icon:CI}))};_D.displayName="CaretRightOutlined";var wI=H.forwardRef(_D);const EI=n=>{const{onActiveKeyChange:r,collapseData:i,prefixClz:s,onMouseDown:a,modelService:u,commandService:h,graphConfig:p}=n,g=b=>{const{header:E,extra:T,icon:O,isCollapsed:I}=b,k=B=>{B.preventDefault(),r(b.id)};return H.createElement("div",{className:"xflow-collapse-header",onClick:k},H.createElement("div",{className:"xflow-collapse-header-icon"},Od(O)?H.createElement(O,{isCollapsed:I}):H.createElement(wI,{rotate:I?0:90,style:{fontSize:"12px"}})),H.createElement("div",{className:"xflow-collapse-header-label"},Od(E)?H.createElement(E,b):E),H.createElement("div",{className:"xflow-collapse-header-extra"},Od(T)?H.createElement(T,b):T))},y=b=>H.createElement("div",{className:"xflow-collapse-content"},b.map(E=>H.createElement("div",{className:`xflow-collapse-content-item ${E.isDisabled?"disabled":""}`,key:E.id},H.createElement(SD,{item:E,onMouseDown:a(E),popoverContent:E.popoverContent,prefixClz:s,modelService:u,commandService:h,graphConfig:p}))));return H.createElement("ul",{className:"xflow-collapse-list"},i.length===0&&H.createElement(_w.Z,{style:{marginTop:"24px"}}),i.map(b=>{const{children:E=[],isCollapsed:T,render:O}=b,I=T?"close":"open";return H.createElement("li",{className:`xflow-collapse-list-item ${I}`,key:b.id},g(b),Od(O)?H.createElement(O,b):y(E))}))},SI=n=>{const{state:r,prefixClz:i,onActiveKeyChange:s}=n,{graphConfig:a,onMouseDown:u,modelService:h,commandService:p}=mI(n),{searchResult:g,collapseData:y,keyword:b}=r;return H.createElement("div",{className:`${i}-body`,style:n.style},b.length===0&&H.createElement(EI,{onActiveKeyChange:s,collapseData:y,onMouseDown:u,modelService:h,commandService:p,graphConfig:a,prefixClz:i}),b.length>0&&H.createElement(bI,{searchResult:g,onMouseDown:u,modelService:h,commandService:p,graphConfig:a,prefixClz:i}))};var UA=M(69677);const _I=n=>{const{prefixClz:r,onKeywordChange:i,state:s}=n,{propsProxy:a}=Ew(),u=a.getValue(),h=p=>{const g=s.collapseData.reduce((y,b)=>(b.children&&y.push(...b.children),y),[]);i(p.target.value,g)};return H.createElement(H.Fragment,null,H.createElement("div",{className:`${r}-header`,style:n.style},u.header&&H.isValidElement(u.header)&&u.header,u.searchService&&H.createElement("div",{className:`${r}-header-search`},H.createElement(UA.Z,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:p=>h(p),style:{width:"100%",border:0}}))))},AI=n=>{const{prefixClz:r}=n,{propsProxy:i}=Ew(),s=i.getValue();return H.createElement(H.Fragment,null,H.createElement("div",{className:`${r}-footer`,style:n.style},s.footer&&H.isValidElement(s.footer)&&s.footer))};var TI={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M689 165.1L308.2 493.5c-10.9 9.4-10.9 27.5 0 37L689 858.9c14.2 12.2 35 1.2 35-18.5V183.6c0-19.7-20.8-30.7-35-18.5z"}}]},name:"caret-left",theme:"outlined"},MI=TI,AD=function(r,i){return H.createElement(LA.Z,(0,Cg.Z)((0,Cg.Z)({},r),{},{ref:i,icon:MI}))};AD.displayName="CaretLeftOutlined";var OI=H.forwardRef(AD);const PI=n=>{const{prefixClz:r,onCollapseBtnClick:i,isCollapsed:s,collapseButtonStyle:a,style:u}=n;return H.createElement(H.Fragment,null,H.createElement("div",{className:`${r}-header`,style:Object.assign(Object.assign({},u),a),onClick:i},H.createElement(OI,{rotate:s?180:0})))},DI=40,NI=40,II=n=>{const r=n&&n.headerPosition&&n.headerPosition.height||DI,i=n.footerPosition&&n.footerPosition.height||NI;return{headerStyle:Gc(Object.assign({height:r,lineHeight:r,top:0,left:0,right:0},n.headerPosition)),bodyStyle:Gc(Object.assign({left:0,right:0,top:r,bottom:i},n.bodyPosition)),footerStyle:Gc(Object.assign({left:0,right:0,lineHeight:i,height:i,bottom:0},n.footerPosition))}};var VA;(function(n){n.id="COLLAPSE_PANEL_DATA",n.useModel=r=>(0,F.mG)(this,void 0,void 0,function*(){return r.awaitModel(n.id)})})(VA||(VA={}));const n4=(n,r)=>{n.executeCommand(XFlowModelCommands.UPDATE_MODEL.id,{getModel:i=>__awaiter(void 0,void 0,void 0,function*(){return NsCollapsePanelModel.useModel(i)}),updateModel:r})},RI=n=>{const{collapsible:r,nodeDataService:i,searchService:s,onCollapseChange:a}=n,{modelService:u}=es(),[h,p,g]=Un({keyword:"",collapseData:[],searchResult:[]});H.useEffect(()=>{u.findDeferredModel(VA.id)||u.registerModel({id:VA.id,modelFactory:()=>g,watchChange:E=>(0,F.mG)(void 0,void 0,void 0,function*(){const T=yield zu.getModel(u),O=k=>(0,F.mG)(void 0,void 0,void 0,function*(){return{collapseData:yield i(k,u)}}),I=T.watch(k=>(0,F.mG)(void 0,void 0,void 0,function*(){const{collapseData:B}=yield O(k);E.setValue($=>{$.keyword="",$.collapseData=B,$.searchResult=[]})}));return Pt.create(()=>{I.dispose()})})})},[]);const y=H.useCallback(E=>{p(T=>{T.collapseData.forEach(O=>{O.id===E&&O.collapsible!==!1&&(O.isCollapsed=!O.isCollapsed)})})},[p]),b=H.useCallback((E,T)=>(0,F.mG)(void 0,void 0,void 0,function*(){if(!s)return console.warn("searchService is not defined");if(E){const O=yield s(T,E);p(I=>{I.keyword=E,I.searchResult=O})}else p(O=>{O.keyword="",O.searchResult=[]})}),[s]);return{state:h,collapsible:r,setState:p,onKeywordChange:b,onActiveKeyChange:y,onCollapseChange:a}},kI=n=>{const{headerStyle:r,bodyStyle:i,footerStyle:s}=II(n),{state:a,onActiveKeyChange:u,onKeywordChange:h}=RI(n);return H.createElement(H.Fragment,null,H.createElement(_I,Object.assign({},n,{state:a,style:r,onKeywordChange:h})),H.createElement(SI,Object.assign({},n,{state:a,style:i,onActiveKeyChange:u})),H.createElement(AI,Object.assign({},n,{state:a,style:s})))},LI=n=>{const{position:r,collapsible:i,onCollapseChange:s}=n,{width:a=200,left:u}=r,h=Sh("collapse-panel"),[p,g]=(0,H.useState)(!1),y=(0,H.useCallback)(()=>{g(!p),s(!p)},[p,s]);return H.createElement(mD,Object.assign({},n,{className:h,position:Object.assign(Object.assign({},r),{left:p?-a:u}),style:{transition:"left 0.5s"}}),H.createElement(kI,Object.assign({},n,{prefixClz:h})),i&&H.createElement(PI,Object.assign({},n,{prefixClz:h,isCollapsed:p,onCollapseBtnClick:y,style:{position:"absolute",zIndex:1,width:13,right:-13,bottom:20,padding:"12px 0px",textAlign:"center",borderWidth:"1px 1px 1px 0",borderStyle:"solid solid solid",borderColor:"rgb(232, 232, 232) rgb(232, 232, 232) rgb(232, 232, 232)",cursor:"pointer"}})))},GI=n=>{const{state:r}=n,{propsProxy:i}=Ew(),s=i.getValue(),a=es(),u=s.footer&&typeof s.footer=="function";return H.createElement(H.Fragment,null,H.createElement("div",{className:`${n.prefixClz}-footer`,style:n.style},u&&H.createElement(s.footer,Object.assign(Object.assign({},n),{headerStyle:{},bodyStyle:{},footerStyle:n.style,targetData:r.targetData,targetType:r.targetType,modelService:a.modelService,commandService:a.commandService})),!s.footer&&H.createElement("div",{className:`${n.prefixClz}-footer-title`},s.footerText)))},FI=n=>{const{prefixClz:r,hasSchema:i,state:s}=n,{propsProxy:a}=Ew(),u=a.getValue(),h=es();if(i)return null;const p=u.header&&typeof u.header=="function";return H.createElement(H.Fragment,null,H.createElement("div",{className:`${r}-header`,style:n.style},p&&H.createElement(u.header,Object.assign(Object.assign({},n),{headerStyle:n.style,bodyStyle:{},footerStyle:{},targetData:s.targetData,targetType:s.targetType,modelService:h.modelService,commandService:h.commandService})),!u.header&&H.createElement("div",{className:`${r}-header-title`},u.headerText||"Panel")))};var TD=M(96619),L0=M(80737);const BI=n=>{const{text:r}=n,i=(0,F._T)(n,["text"]);return r?H.createElement(PA.Z,Object.assign({placement:"left",title:r},i),H.createElement("div",{className:"text-truncate"},r)):null};function m1(n){if(n)return H.createElement(BI,{text:n})}var zI=M(27361),MD=M.n(zI);function UI(n,r){return(i,s)=>n.some(u=>typeof(u==null?void 0:u.condition)=="function")?(typeof r=="function"&&r(void 0),!0):n.some(u=>{const{name:h}=u;return h?MD()(i,h)!==MD()(s,h)?(typeof r=="function"&&r(h),!0):!1:(console.error("[Schema form]: A dependent name must be provided in the updater when the dependency condition is not a function."),!1)})}function VI(n){return n===""||n===void 0}function jI(n,r,i){const{getFieldValue:s,getFieldsValue:a}=n,{dependencies:u,hidden:h,disabled:p}=r;let g=h,y=p;return u==null||u.forEach(b=>{const{name:E,condition:T,hidden:O,disabled:I}=b;if(typeof T!="function"&&i&&E!==i)return;let k=!1;if(typeof T=="function"){const B=a();k=!!T(B)}else{if(!E){console.error("[Schema form]: A dependent name must be provided in the props genarator when the dependency condition is not a function.");return}k=s(E)===T}k&&(O!==void 0&&(g=O),I!==void 0&&(y=I))}),{hidden:g,disabled:y}}const em=n=>{const{schema:r,children:i}=n,[s,a]=(0,H.useState)(),{dependencies:u,value:h,defaultValue:p,hidden:g,disabled:y}=r,b=(0,H.useMemo)(()=>u!=null&&u.length?UI(u,a):void 0,[u]);if(typeof i!="function")throw new Error("[Schema Form]: chilren of FormItemWrapper should be a render prop.");const E=VI(h)?p:h;return b?H.createElement(L0.Z.Item,{noStyle:!0,shouldUpdate:b},T=>{const{hidden:O,disabled:I}=jI(T,r,s);return i({hidden:O,disabled:I,initialValue:E})}):i({hidden:g,disabled:y,initialValue:E})},OD=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,placeholder:p,rules:g}=r;return H.createElement(em,{schema:r},({disabled:y,hidden:b,initialValue:E})=>H.createElement(L0.Z.Item,{name:u,label:h,initialValue:E,tooltip:s,extra:m1(a),required:i,hidden:b,rules:g},H.createElement(UA.Z,{className:"xflow-form-input",allowClear:!0,placeholder:p,disabled:y})))};var HI=M(32808);const $I=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,rules:p}=r;return H.createElement(em,{schema:r},({hidden:g,disabled:y,initialValue:b})=>H.createElement(L0.Z.Item,{className:"xflow-form-checkbox",name:u,rules:p,initialValue:b,tooltip:s,extra:m1(a),required:i,hidden:g,valuePropName:"checked",getValueProps:E=>({checked:!!{true:!0,false:!1}[E]})},H.createElement(HI.Z,{disabled:y},h)))},WI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,placeholder:p,rules:g}=r;return H.createElement(em,{schema:r},({hidden:y,disabled:b,initialValue:E})=>H.createElement(L0.Z.Item,{name:u,label:h,initialValue:E,tooltip:s,extra:m1(a),required:i,hidden:y,rules:g},H.createElement(UA.Z.TextArea,{allowClear:!0,placeholder:p,rows:3,disabled:b})))};var B3=M(34041);const XI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,placeholder:p,options:g=[],rules:y}=r;return H.createElement(em,{schema:r},({hidden:b,disabled:E,initialValue:T})=>H.createElement(L0.Z.Item,{name:u,label:h,initialValue:T,tooltip:s,extra:m1(a),required:i,hidden:b,rules:y},H.createElement(B3.Z,{disabled:E,placeholder:p},g.map(O=>{const{title:I,value:k}=O;return H.createElement(B3.Z.Option,{key:k.toString(),value:k},I)}))))};var ZI=M(39369),YI=M(30381),z3=M.n(YI);const KI=n=>{const{className:r,style:i,disabled:s,value:a,onChange:u}=n,[h,p]=(0,H.useState)(a?z3()(a):void 0),g=(0,H.useRef)(!1);(0,H.useEffect)(()=>{if(!g.current){g.current=!0;return}const b=z3()(a);b.isValid()&&p(b)},[a]);const y=(0,H.useCallback)((b,E)=>{const T=z3()(E);p(T.isValid()?T:void 0),typeof u=="function"&&u(T.isValid()?T.format("YYYY-MM-DD HH:mm:ss"):"")},[u]);return H.createElement(ZI.Z,{showTime:!0,allowClear:!0,className:r,style:i,disabled:s,value:h,onChange:y})},qI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,rules:p}=r;return H.createElement(em,{schema:r},({disabled:g,hidden:y,initialValue:b})=>H.createElement(L0.Z.Item,{name:u,label:h,initialValue:b,tooltip:s,extra:m1(a),required:i,hidden:y,rules:p},H.createElement(KI,{style:{width:"100%"},disabled:g})))};var U3=M(79915);function jA(n){const r=Number(n);return Number.isNaN(r)?void 0:r}const JI=n=>{const{disabled:r,placeholder:i,value:s,onChange:a}=n,[u,h]=(0,H.useState)(jA(s)),p=(0,H.useRef)(!1);(0,H.useEffect)(()=>{p.current||(p.current=!0),h(jA(s))},[s]);const g=(0,H.useCallback)(y=>{h(y),typeof a=="function"&&(y===void 0?a(""):typeof jA(y)=="number"&&a(jA(y)))},[a]);return H.createElement(U3.Z,{style:{width:"100%"},size:"small",placeholder:i,value:u,onChange:g,disabled:r})},QI=n=>{const{controlSchema:r}=n,{required:i,tooltip:s,extra:a,name:u,label:h,placeholder:p,rules:g}=r;return H.createElement(em,{schema:r},({disabled:y,hidden:b,initialValue:E})=>H.createElement(L0.Z.Item,{name:u,label:h,initialValue:E,tooltip:s,extra:m1(a),required:i,hidden:b,rules:g},H.createElement(JI,{placeholder:p,disabled:y})))};var tm;(function(n){n.INPUT="input",n.CHECKBOX="checkbox",n.TEXTAREA="textArea",n.SELECT="select",n.DATETIME="datetime",n.FLOAT="float"})(tm||(tm={}));const PD=[[tm.INPUT,OD],[tm.CHECKBOX,$I],[tm.TEXTAREA,WI],[tm.DATETIME,qI],[tm.SELECT,XI],[tm.FLOAT,QI]],DD=n=>{const r=new Map;return n.forEach(i=>{const[s,a]=i,u=s.toLowerCase();r.has(u)&&console.error(`${s} is duplicated in controlMap:`,r),r.set(u,a)}),r},eR=(n,r,i=OD)=>{if(r.has(n))return r.get(n);const s=n.toLowerCase();return r.has(s)?r.get(s):(console.warn(`${n} is not exist in controlmap, fallback to defaultControl`),i)},{TabPane:tR}=TD.Z,nR=n=>{var r;const{schema:i,form:s,className:a,triggerUpdate:u,defaultControlRender:h,afterUpdatingCb:p,controlMap:g}=n,y=(0,F._T)(n,["schema","form","className","triggerUpdate","defaultControlRender","afterUpdatingCb","controlMap"]),{tabs:b}=i,[E]=L0.Z.useForm(s),T=H.useMemo(()=>n.controlMap?n.controlMap:DD(PD),[n.controlMap]),O=(0,H.useCallback)(k=>{typeof u=="function"&&u(E,k)},[E,u]);(0,H.useEffect)(()=>{E.setFieldsValue({})},[E]);const I=(0,H.useCallback)(()=>{requestAnimationFrame(()=>{E.setFieldsValue({})})},[E]);return H.createElement(L0.Z,Object.assign({size:"small",form:E,layout:"vertical",className:Te()("xflow-json-form",a)},y),H.createElement(TD.Z,{type:"card",defaultActiveKey:(r=b[0])===null||r===void 0?void 0:r.name,className:Te()({tabs:!0,xTab:!0,singleTab:(b==null?void 0:b.length)===1,coupleTab:(b==null?void 0:b.length)===2,ternateTab:(b==null?void 0:b.length)===3}),onTabClick:I},b.map(k=>{const{name:B,groups:$}=k;return H.createElement(tR,{key:B,tab:B},$.length===0&&H.createElement(_w.Z,{style:{padding:"24px 0"}}),$.length>0&&$.map(X=>{const{controls:re=[]}=X;return re.length===0?H.createElement(_w.Z,{style:{padding:"24px 0"}}):re.map(ye=>{const{shape:me,name:We}=ye,at=eR(me,T,h);return at?H.createElement(at,{key:We,form:E,controlSchema:ye,triggerUpdate:O,afterUpdatingCb:p}):(console.error("\u672A\u627E\u5230\u5BF9\u5E94\u7684\u63A7\u4EF6:",me),null)})}))})))},rR=n=>{const{schema:r={tabs:[]},triggerUpdate:i,onFieldsChange:s,afterUpdatingCb:a,defaultControlRender:u,loading:h,controlMapService:p,defaultControls:g=[]}=n,y=H.useMemo(()=>{const b=DD([...PD,...g]);return p&&p(b),b},[p,g]);return h?H.createElement("div",{className:`${n.prefixClz}-body`,style:Object.assign(Object.assign({},n.style),{display:"flex",justifyContent:"center",alignItems:"center"})},H.createElement(cD.Z,{spinning:!0})):H.createElement("div",{className:`${n.prefixClz}-body`,style:n.style},r.tabs.length>0&&H.createElement(nR,{schema:r,onFieldsChange:s,controlMap:y,defaultControlRender:u,afterUpdatingCb:a,triggerUpdate:i}),r.tabs.length===0&&H.createElement(_w.Z,{style:{paddingTop:"64px"}}))},iR=40,oR=40,sR=(n,r)=>{const i=n&&n.headerPosition&&n.headerPosition.height||iR,s=n.footerPosition&&n.footerPosition.height||oR;return{headerStyle:Gc(Object.assign(Object.assign({height:0,top:0,left:0,right:0},r?{height:i,lineHeight:i}:{}),n.headerPosition)),bodyStyle:Gc(Object.assign(Object.assign({left:0,right:0,top:0},r?{top:i,bottom:s}:{bottom:s}),n.bodyPosition)),footerStyle:Gc(Object.assign(Object.assign({left:0,right:0,lineHeight:s,height:s,bottom:0},r?{lineHeight:s,height:s}:{bottom:0}),n.footerPosition))}};var Aw;(function(n){n.id="XFLOW_JSON_SCHEMA_FORM",n.useModel=r=>(0,F.mG)(this,void 0,void 0,function*(){return r.awaitModel(n.id)})})(Aw||(Aw={}));const r4=(n,r)=>{n.executeCommand(XFlowModelCommands.UPDATE_MODEL.id,{getModel:i=>__awaiter(void 0,void 0,void 0,function*(){return Aw.useModel(i)}),updateModel:r})},aR=n=>{const r=es(),{commandService:i,modelService:s,getGraphInstance:a}=r,{formSchemaService:u}=n,[h,p,g,y]=Un({schema:{tabs:[]},targetType:null,targetData:null,targetCell:null,loading:!1});return H.useEffect(()=>{if(!r||!r.modelService)return;const b=new Kt;if(!r.modelService.findDeferredModel(Aw.id)){const T=r.modelService.registerModel({id:Aw.id,modelFactory:()=>g,watchChange:(O,I)=>(0,F.mG)(void 0,void 0,void 0,function*(){const B=(yield fo.getModel(I)).watch($=>(0,F.mG)(void 0,void 0,void 0,function*(){const X=(me,We)=>(0,F.mG)(void 0,void 0,void 0,function*(){O.setValue(_t=>{_t.loading=!0,_t.schema={tabs:[]},_t.targetType=null,_t.targetData=null,_t.targetCell=null});const at=me?me.getData():null;if(!u)return;const ft=yield a(),Qt=yield u({commandService:i,modelService:s,targetData:at,cell:me,targetType:We,graph:ft});O.setValue({loading:!1,schema:Qt,targetType:We,targetCell:me,targetData:at})}),ye=(me=>me?me.isNode&&me.isNode()&&me.getProp("isGroup")?"group":me.isNode&&me.isNode()?"node":me.isEdge&&me.isEdge()?"edge":"canvas":"canvas")($);(n.targetType||["node","canvas"]).includes(ye)&&(yield X($,ye))}));return Pt.create(()=>{B.dispose(),b.push(B)})})});b.push(T)}return()=>{b.dispose()}},[]),{commandService:i,modelService:s,state:h,setState:p,model:g,isModelReady:y}},lR=n=>{const{prefixClz:r}=n,{getCustomRenderComponent:i,afterUpdatingCb:s,formValueUpdateService:a=()=>{}}=n,{state:u,commandService:h,modelService:p}=aR(n),g=H.useCallback((I,k={})=>(0,F.mG)(void 0,void 0,void 0,function*(){I.setFieldsValue(k);const B=Object.entries(k).map(([re,ye])=>({name:re,value:ye})),$=Object.entries(u.targetData).map(([re,ye])=>({name:re,value:ye})),X=yield a({allFields:$,values:B,modelService:p,commandService:h,targetData:u.targetData,targetType:u.targetType});s&&s(X)}),[s,h,a,p,u.targetData,u.targetType]),y=H.useCallback((I,k)=>(0,F.mG)(void 0,void 0,void 0,function*(){const B=yield a({values:I,allFields:k,modelService:p,commandService:h,targetData:u.targetData,targetType:u.targetType});s&&s(B)}),[s,h,a,p,u.targetData,u.targetType]),b=H.useMemo(()=>{try{return u.schema.tabs.length===0||!u.schema}catch(I){return!0}},[u.schema]),{headerStyle:E,bodyStyle:T,footerStyle:O}=sR(n,b);if(i){const I=i(u.targetType,u.targetData,p,h);if(I)return H.createElement(I,Object.assign(Object.assign({},n),{headerStyle:E,bodyStyle:T,footerStyle:O,targetData:u.targetData,targetType:u.targetType,modelService:p,commandService:h}))}return H.createElement("div",{className:r},H.createElement(FI,Object.assign({hasSchema:!b},n,{state:u,style:E,prefixClz:n.prefixClz})),H.createElement(rR,Object.assign({},n,{key:u.targetData&&u.targetData.id,style:T,prefixClz:n.prefixClz,loading:u.loading,schema:u.schema,triggerUpdate:g,onFieldsChange:y})),H.createElement(GI,Object.assign({},n,{state:u,style:O})))},cR=n=>{const r=Sh("json-schema-form");return H.createElement(mD,Object.assign({},n,{className:r}),H.createElement(lR,Object.assign({},n,{prefixClz:r})))};wr.Bz.Connector.registry.exist(g1.VERTICAL_NODE)||wr.kJ.registerConnector(g1.VERTICAL_NODE,(n,r)=>{const s=Math.abs(r.y-n.y),a=Math.floor(s/3*2),u={x:n.x,y:n.y+16+a},h={x:r.x,y:r.y-16-a};return wr.y$.normalize(`M ${n.x} ${n.y}
         L ${n.x} ${n.y+16}
         C ${u.x} ${u.y} ${h.x} ${h.y} ${r.x} ${r.y-16}
         L ${r.x} ${r.y}
        `)},!0),wr.Bz.Connector.registry.exist(g1.VERTICAL_GROUP)||wr.kJ.registerConnector(g1.VERTICAL_GROUP,(n,r)=>{const s=Math.abs(r.y-n.y),a={x:n.x,y:n.y+4+s},u={x:r.x,y:r.y-4-s};return wr.y$.normalize(`M ${n.x} ${n.y}
       L ${n.x} ${n.y+4}
       C ${a.x} ${a.y} ${u.x} ${u.y} ${r.x} ${r.y-4}
       L ${r.x} ${r.y}
      `)},!0),wr.Bz.Connector.registry.exist(g1.HORIRONTAL_NODE)||wr.kJ.registerConnector(g1.HORIRONTAL_NODE,(n,r)=>{const s=Math.abs(r.y-n.y),a=Math.floor(s/3*2),u={x:n.x,y:n.y+4+a},h={x:r.x,y:r.y-4-a};return wr.y$.normalize(`M ${n.x} ${n.y}
         L ${n.x} ${n.y+4}
         C ${u.x} ${u.y} ${h.x} ${h.y} ${r.x} ${r.y-4}
         L ${r.x} ${r.y}
        `)},!0);let V3=wr.bn.kS.registry.get(GA.EDGE);wr.bn.kS.registry.exist(GA.EDGE)||(V3=wr.bn.kS.registry.register(GA.EDGE,wr.bn.kS.define({zIndex:1,highlight:!1,shape:GA.EDGE}),!0));var nf;(function(n){n.MODEL=v1,n.command=FA.QUERY_GRAPH_STATUS,n.hookKey="queryGraphStatus";let r;(function(i){i.SUCCESS="success",i.PROCESSING="processing",i.ERROR="error",i.DEFAULT="default",i.WARNING="warning"})(r=n.StatusEnum||(n.StatusEnum={})),n.initStatusMap=()=>({[n.StatusEnum.DEFAULT]:[],[n.StatusEnum.PROCESSING]:[],[n.StatusEnum.ERROR]:[],[n.StatusEnum.WARNING]:[],[n.StatusEnum.SUCCESS]:[]}),n.groupByStatus=i=>{const s=n.initStatusMap();return Object.entries(i).reduce((a,[u,h])=>(a[h.status].push(u),a),s)},n.statusDiff=(i,s)=>{const a=new Set([...i,...s]),u={current:[],add:[],remove:[]};return a.forEach(h=>{s.includes(h)&&!i.includes(h)&&u.add.push(h),!s.includes(h)&&i.includes(h)&&u.remove.push(h)}),u},n.shouldStop=i=>(0,F.mG)(this,void 0,void 0,function*(){return[r.ERROR,r.SUCCESS].includes(i.graphStatus)})})(nf||(nf={}));let HA=class{constructor(){this.statusInfo=nf.initStatusMap(),this.getStatusModel=()=>(0,F.mG)(this,void 0,void 0,function*(){const i=this.contextProvider().getModelService();return yield v1.getModel(i)}),this.updateModelValue=r=>(0,F.mG)(this,void 0,void 0,function*(){(yield this.getStatusModel()).setValue(r)}),this.stopCurrentStatusLooping=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=yield this.getStatusModel(),{subscription:i}=yield r.getValidValue();i.dispose()}),this.addStopDispose=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=yield this.getStatusModel(),{subscription:i}=yield r.getValidValue();i.push({dispose:()=>{this.updateEdges(this.statusInfo,nf.initStatusMap()),this.isLooping=!1}})}),this.updateGraph=(r,i,s)=>{this.updateNodes(r,i,s),this.updateEdges(r,i)},this.updateNodeData=(r,i)=>{const s=this.x6Graph.getCellById(r);s&&s.setData(Object.assign(Object.assign(Object.assign(Object.assign({},s.getData()),s.getSize()),s.getPosition()),i))},this.updateNodes=(r,i,s)=>{Object.keys(r).forEach(a=>{const u=nf.statusDiff(r[a],i[a]);u.add.forEach(h=>{this.updateNodeData(h,s[h])}),u.remove.forEach(h=>{this.updateNodeData(h,s[h])})})},this.updateEdges=(r,i)=>{const s=nf.statusDiff(r.processing,i.processing);this.x6Graph.getEdges().forEach(u=>{var h;const p=(h=this.x6Graph)===null||h===void 0?void 0:h.findViewByCell(u.id),g=u.getTargetCellId();if(!g)return;const y=g.toString();if(p){if(s.add.includes(y))return p.addClass(yD);if(s.remove.includes(y))return p.removeClass(yD)}})},this.execute=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider(),{args:i,hooks:s}=r.getArgs(),a=r.getHooks();this.x6Graph=yield r.getX6Graph();const u=yield a.queryGraphStatus.call(i,h=>(0,F.mG)(this,void 0,void 0,function*(){const{graphStatusService:p,shouldStop:g=nf.shouldStop,doOnce:y}=h;yield this.stopCurrentStatusLooping();const b=(E,T=1e4)=>(0,F.mG)(this,void 0,void 0,function*(){const O=yield E(h);this.updateModelValue(k=>{Object.entries(O.statusMap).forEach(([B,$])=>{k.statusMap.set(B,$)}),k.graphStatus=O.graphStatus});const I=nf.groupByStatus(O.statusMap);this.updateGraph(this.statusInfo,I,O.statusMap),this.statusInfo=I,yield d1(T),this.isLooping&&(g&&(yield g(O,h))||(yield b(E,T)))});return this.isLooping=h.loop===void 0?!0:h.loop,yield this.addStopDispose(),y&&(yield y(h)),b(p,h.loopInterval),{}}),s);return r.setResult(u),this}),this.undo=()=>(0,F.mG)(this,void 0,void 0,function*(){const r=this.contextProvider();return this.isUndoable()&&r.undo(),this}),this.redo=()=>(0,F.mG)(this,void 0,void 0,function*(){return this.isUndoable()||(yield this.execute()),this})}isUndoable(){return this.contextProvider().isUndoable()}};(0,F.gn)([Zt(Si),(0,F.w6)("design:type",Object)],HA.prototype,"contextProvider",void 0),HA=(0,F.gn)([vt({token:{token:xi,named:nf.command.id}})],HA);const i4=()=>{};var nm;(function(n){n.TOP_BOTTOM="TB",n.LEFT_RIGHT="LR"})(nm||(nm={}));const ND=pe.defineToken("DAG_EXTENSION_CONFIG");var $A;(function(n){n.EVENT_NAME="ADD_EDGE_CMD_EVENT"})($A||($A={}));var WA;(function(n){n.router={name:"manhattan"},n.connector={name:"rounded",args:{radius:15}}})(WA||(WA={}));const o4="ant",uR=n=>{const{layout:r,router:i=WA.router,connector:s=WA.connector}=n;return{grid:!1,keyboard:{enabled:!0},selecting:{enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},connecting:{sourceAnchor:r?r===nm.TOP_BOTTOM?"bottom":"right":"center",targetAnchor:r?r===nm.TOP_BOTTOM?"center":"left":"center",connectionPoint:"anchor",snap:{radius:20},router:i,connector:s,highlight:!0,dangling:!1,createEdge(){const u=this,h=new V3({attrs:{line:{strokeDasharray:"5 5",stroke:"#888",strokeWidth:1,targetMarker:{name:"block",args:{size:"6"}}}}}),p=g=>{const{isNew:y}=g,b=g.edge;if(y&&b.isEdge()&&b===h){const E=b.getTargetPortId(),T=b.getTargetCell();if(T&&T.isNode()){T.setPortProp(E,"connected",!1),b.attr({line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5"}});const O=b.getTargetPortId(),I=b.getSourcePortId(),k=b.getSourceCellId(),B=b.getTargetCellId();u.trigger($A.EVENT_NAME,{targetPortId:O,sourcePortId:I,source:k,target:B,edge:h})}}};return u.once("edge:connected",p),h},validateEdge:u=>{var h;const{edge:p}=u;return!!(!((h=p==null?void 0:p.target)===null||h===void 0)&&h.port)},validateMagnet({magnet:u,cell:h}){const p=h.getData().ports.filter(g=>g.type===lo.AnchorType.INPUT);return p.length>0?u.getAttribute("port-group")!==p[0].group:!1},validateConnection({sourceView:u,targetView:h,sourceMagnet:p,targetMagnet:g}){if(u===h||!p||!g)return!1;if(r){const k=r===nm.TOP_BOTTOM?lo.AnchorGroup.TOP:lo.AnchorGroup.LEFT;if(p.getAttribute("port-group")===k||g.getAttribute("port-group")!==k)return!1}const y=u.cell,b=p.getAttribute("port");if(!b||y.getPort(b).type!==lo.AnchorType.OUTPUT)return!1;const T=h.cell,O=g.getAttribute("port");if(!O)return!1;const I=T.getPort(O);return I.type!==lo.AnchorType.INPUT?!1:!(I&&I.connected)}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},scaling:{max:1.05,min:.01}}};let Tw=class{constructor(){this.registerGraphCommands=r=>{r.registerCommand(nf.command,{createCommand:this.commandFactory})},this.toDispose=new Kt,this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new Kt,s=[r.addNode.registerHook({name:"dag-add-node",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=h=>(0,F.mG)(this,void 0,void 0,function*(){return new BA(Object.assign({},h))});a.cellFactory=u})}),r.addEdge.registerHook({name:"dag-add-edge",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{layout:u=nm.TOP_BOTTOM}=yield this.propConfig.getConfig(),h=p=>(0,F.mG)(this,void 0,void 0,function*(){return new V3(Object.assign(Object.assign({},p),{id:p.id,source:{cell:p.source,port:p.sourcePortId,anchor:{name:u===nm.TOP_BOTTOM?"bottom":"right"}},target:{cell:p.target,port:p.targetPortId,anchor:{name:u===nm.TOP_BOTTOM?"center":"right"}},attrs:{line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5",strokeWidth:1}},data:Object.assign({},p)}))});a.cellFactory=h})}),r.addEdge.registerHook({name:"after add edge, set target port props",handler:(a,u)=>(0,F.mG)(this,void 0,void 0,function*(){return p=>(0,F.mG)(this,void 0,void 0,function*(){const g=yield u(p);if(g&&g.edgeCell){const y=g.edgeCell.getTargetCell(),b=g.edgeCell.getTargetPortId();y.setPortProp(b,"connected",!0)}return g})})}),r.delEdge.registerHook({name:"afetr del edge, reset target node port props",handler:(a,u)=>(0,F.mG)(this,void 0,void 0,function*(){return p=>(0,F.mG)(this,void 0,void 0,function*(){const g=yield u(p),{targetCell:y,targetPortId:b}=g;return y&&y.isNode()&&b&&y.setPortProp(b,"connected",!1),g})})}),r.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:u,graph:h}=a;h.on($A.EVENT_NAME,p=>{u.executeCommand(yo.ADD_EDGE.id,{edgeConfig:p}),p.edge.remove()})})}),r.graphOptions.registerHook({name:"dag-extension-x6-options",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=yield this.propConfig.getConfig(),h=uR(u);Object.assign(a,h)})})];return i.pushAll(s),Pt.create(()=>{})}),this.registerHookHub=r=>(0,F.mG)(this,void 0,void 0,function*(){return r.registerHookHub(nf.hookKey,new ka)})}registerModel(r){r.registerModel({id:v1.id,getInitialValue:()=>({statusMap:new Map,subscription:new Kt,graphStatus:v1.StatusEnum.DEFAULT}),watchChange:i=>(0,F.mG)(this,void 0,void 0,function*(){const{subscription:s}=yield i.getValidValue();return s})})}};(0,F.gn)([Zt(yh),(0,F.w6)("design:type",Function)],Tw.prototype,"commandFactory",void 0),(0,F.gn)([Zt(ND),(0,F.w6)("design:type",Object)],Tw.prototype,"propConfig",void 0),Tw=(0,F.gn)([kt({contrib:[la,gl,ku]})],Tw);const dR=n=>Gr(r=>{r(Tw),r(HA),r(ND,{useValue:n})}),hR=n=>{const r=Ml();H.useEffect(()=>{r.addContainerClassNames("dag-extension-container");const s=n.layout||"TB";r.addContainerClassNames(s==="TB"?"layout-top-bottom":"layout-left-right")},[r,n.layout]);const i=H.useMemo(()=>({CONFIG_TYPE:"DAG_EXTENSION",getConfig:()=>(0,F.mG)(void 0,void 0,void 0,function*(){return n})}),[n]);return H.createElement(Mf,{config:i,createModule:dR})},j3="XFLOW_FLOW_NODE_SHAPE",fR=150,pR=60;let H3;const{AnchorGroup:XA}=lo,ZA={circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}};wr.NB.registry.exist(j3)?H3=wr.NB.registry.get(j3):H3=Xl.define({width:fR,height:pR,shape:j3,view:$i,ports:{groups:{top:{position:XA.TOP,attrs:ZA},bottom:{position:XA.BOTTOM,attrs:ZA},right:{position:XA.RIGHT,attrs:ZA},left:{position:XA.LEFT,attrs:ZA}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"}}});const gR={grid:!0,mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge(){return new wr.bn.kS({attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:0})},validateConnection({targetMagnet:n}){return!!n}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}},resizing:!0,rotating:!0,selecting:{enabled:!0,rubberband:!0,showNodeSelectionBox:!0,modifiers:"shift"},snapline:!0,keyboard:!0,clipboard:!0};let ID=class{constructor(){this.toDispose=new Kt,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return Pt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new Kt,s=[r.addNode.registerHook({name:"flow-add-node",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=h=>(0,F.mG)(this,void 0,void 0,function*(){return new H3(Object.assign({},h))});a.cellFactory=u})}),r.addEdge.registerHook({name:"flow-add-edge",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const u=h=>(0,F.mG)(this,void 0,void 0,function*(){return delete h.id,new wr.bn.kS({source:{cell:h.source,port:h.sourcePortId},target:{cell:h.target,port:h.targetPortId},attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:-1,data:Object.assign({},h)})});a.cellFactory=u})}),r.graphOptions.registerHook({name:"assign options ",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){Object.assign(a,gR)})})];return i.pushAll(s),Pt.create(()=>{})})}};ID=(0,F.gn)([kt({contrib:la})],ID);const s4=()=>ManaSyringe.Module(n=>{n(FlowHooksContribution)}),a4=()=>{const n=useExtensionRegistry(),r=React.useMemo(()=>({CONFIG_TYPE:"DAG_EXTENSION",getConfig:()=>__awaiter(void 0,void 0,void 0,function*(){})}),[]);return React.useEffect(()=>{const i=n.addExtension({config:r,createModule:createFlowExtensionModule});return n.addContainerClassNames("flow-extension-container"),()=>{i.dispose()}},[r,n]),null};var vR=M(37569),mR=M(82492),RD=M.n(mR);const $3={config:{}},kD=n=>{$3.config=Object.assign({},$3.config,n)},YA=n=>{var r;return(r=$3.config)===null||r===void 0?void 0:r[n]},LD=new Map,GD=new Map,yR=n=>(0,F.mG)(void 0,void 0,void 0,function*(){const r=yield n.getGraphInstance();LD.set("x6graph",r),GD.set("app",n)}),FD=()=>LD.get("x6graph"),bR=()=>GD.get("app"),xR=()=>(0,F.mG)(void 0,void 0,void 0,function*(){return bR().getGraphData()}),Mw=(0,Tl.debounce)(n=>{const r=YA("onConfigChange");if(!(!r||typeof r!="function"))return r(Object.assign({data:xR()},n))},300,{trailing:!0}),CR=(n,r)=>(0,F.mG)(void 0,void 0,void 0,function*(){const{node:i}=n;if(!i)return;const{data:s}=i;if(s!=null&&s.groupChildren){const u=FD();s==null||s.groupChildren.forEach(h=>(0,F.mG)(void 0,void 0,void 0,function*(){var p,g;const y=u.getCellById(h);y&&y.isNode()&&(yield r.executeCommand(Ji.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign(Object.assign({},y.data),(p=y.getSize)===null||p===void 0?void 0:p.call(y)),(g=y.getPosition)===null||g===void 0?void 0:g.call(y))}))}))}const a=Object.assign(Object.assign(Object.assign({},i.data),i.getPosition()),i.getSize());yield r.executeCommand(Ji.UPDATE_NODE.id,{nodeConfig:a}),Mw({type:"move:node",config:a})}),wR=(n,r)=>(0,F.mG)(void 0,void 0,void 0,function*(){const{node:i}=n;if(!i)return;const s=Object.assign(Object.assign(Object.assign({},i.data),i.getPosition()),i.size());yield r.executeCommand(Ji.UPDATE_NODE.id,{nodeConfig:s}),Mw({type:"resize:node",config:s})}),ER=n=>{var r;let i=(r=n==null?void 0:n.e)===null||r===void 0?void 0:r.currentTarget;if(!i)return document.getElementsByClassName("xflow-canvas-root");let s=null;for(;!s;){const a=i.getElementsByClassName("xflow-canvas-root");(a==null?void 0:a.length)>0&&(s=a),i=i.parentNode}return s},SR=n=>{const r=document.getElementsByClassName("x6-node-selected");if(!r)return;let i=r[0];return Array.from(r).forEach(s=>{s.getAttribute("data-cell-id")===n&&(i=s)}),i.getElementsByClassName("x6-port")},BD=(n,r)=>{const s=n.getAttribute("transform").split(",");s[0]=`matrix(${Number(s[0].split("(")[1])*r}`,s[3]=Number(s[3])*r,n.setAttribute("transform",s.join(","))},_R=n=>{if(!(n!=null&&n.length))return;const r=2;n.forEach(i=>{i.getAttribute("data-scale")||(BD(i,r),i.setAttribute("data-scale",`${r}`))})},AR=()=>{const n=document.getElementsByClassName("x6-port");n&&Array.from(n).forEach(r=>{const i=r.getAttribute("data-scale");i&&(BD(r,1/Number(i)),r.removeAttribute("data-scale"))})},W3=(n,r,i)=>{var s;n||AR();const a=ER(r),h=(s=FD().getSelectedCells())===null||s===void 0?void 0:s[0];h!=null&&h.isNode()&&i&&_R(SR(h.id)),Array.from(a).forEach(p=>{const g=p.querySelectorAll(".x6-port-body"),y=h==null?void 0:h.isNode();for(let b=0,E=g.length;b<E;b=b+1)g[b].style.visibility=(!y||i)&&n?"visible":"hidden"})},TR=n=>(0,F.mG)(void 0,void 0,void 0,function*(){const{edge:r}=n;r&&r.addTools("vertices","ondbclick")}),MR=(n,r)=>(0,F.mG)(void 0,void 0,void 0,function*(){const{edge:i}=n;i&&i.hasTools("ondbclick")&&(r.executeCommand(yo.UPDATE_EDGE.id,{edgeConfig:Object.assign(Object.assign({},(0,Tl.get)(i,"data")),{vertices:i.getVertices()})}),i.removeTools())}),l4=40,c4="xflow-node-panel-collpase",OR="GROUP_NODE_RENDER_ID",ya=60,ls=40,rt=1,xn={stroke:"#A2B1C3",fill:"#FFFFFF",fontFill:"#000",fontSize:12,label:""},PR=[{name:"Terminal"},{name:"Process"},{name:"Decision"},{name:"Multi Document"},{name:"Connector",width:ls,height:ls},{name:"DataIO",ports:["top","bottom"]},{name:"Database"},{name:"Hard Disk"},{name:"Stroed Data"},{name:"Document"},{name:"Predefined Process"},{name:"Extract"},{name:"Merge"},{name:"Or",width:ls,height:ls},{name:"Manual Input"},{name:"Preparation"},{name:"Delay"},{name:"Manual Operation"},{name:"Display"},{name:"Off Page Link"},{name:"Note Left",label:"\u2263"},{name:"Note Right",label:"\u2263"},{name:"Internal Storage"},{name:"Text",label:"text"}],DR=["Connector","Or"],NR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=[["M",rt,rt],["L",g-2*rt,rt],["L",g-2*rt,y-2*rt],["L",rt,y-2*rt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(b),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},IR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=[["M",g/2,rt],["L",g-2*rt,y/2],["L",g/2,y-2*rt],["L",rt,y/2],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(b),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},RR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=y-2*rt;return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:`M ${rt},${y/2} a ${b/2} ${b/2} 0 1 1 0 1 z`,fill:u,stroke:s}),H.createElement("text",{x:y/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},kR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=y/2,E=[["M",b-rt,rt],["L",g-2*rt,rt],["L",g-b,y-2*rt],["L",rt,y-2*rt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},LR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=Math.min(y,g)/2,E=[["M",b,rt],["L",g-b,rt],["C",g-2*rt,rt,g-2*rt,y/2],["",g-2*rt,y/2],["C",g-2*rt,y/2,g-2*rt,y-2*rt],["",g-b,y-2*rt],["L",b,y-2*rt],["C",rt,y-2*rt,rt,y/2],["",rt,y/2],["C",rt,y/2,rt,rt],["",b,rt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},GR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=g/4,E=Math.min(y/10,12),T=[["M",rt,rt+E],["C",rt+b,rt,rt+g-b,rt],["",g-2*rt,rt+E],["L",g-2*rt,y-2*rt-E],["C",g-2*rt-b,y-2*rt,rt+b,y-2*rt],["",rt,y-2*rt-E],["Z"]],O=[["M",rt,rt+E],["C",rt+b,rt+2*E,rt+g-b,rt+2*E],["",g-2*rt,rt+E]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(T),fill:u,stroke:s}),H.createElement("path",{d:Ts(O),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},FR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=Math.min(g/10,y/4),E=Math.min(y/4,g/4),T=[["M",rt+b,rt],["L",g-2*rt-b,rt],["C",g-2*rt,rt+E,g-2*rt,y-2*rt-E],["",g-2*rt-b,y-2*rt],["L",rt+b,y-2*rt],["C",rt,y-2*rt-E,rt,rt+E],["",rt+b,rt]],O=[["M",g-2*rt-b,rt],["C",g-2*rt-2*b,rt+E,g-2*rt-2*b,y-2*rt-E],["",g-2*rt-b,y-2*rt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(T),fill:u,stroke:s}),H.createElement("path",{d:Ts(O),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},BR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=Math.min(g/10,y/4),E=Math.min(y/4,g/4),T=[["M",rt+b,rt],["L",g-2*rt-b,rt],["C",g-2*rt-2*b,rt+E,g-2*rt-2*b,y-2*rt-E],["",g-2*rt-b,y-2*rt],["L",rt+b,y-2*rt],["C",rt,y-2*rt-E,rt,rt+E],["",rt+b,rt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(T),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},zR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=g/8,E=y/8,T=[["M",rt,rt],["L",g-2*rt,rt],["L",g-2*rt,y-2*rt-E],["C",g-2*rt-b,y-2*rt-2*E,g/2+b,y-2*rt-2*E],["",g/2,y-2*rt-E],["S",g/4,y-2*rt,rt,y-2*rt-2*E],["L",rt,rt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(T),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},UR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,g=6,y=rt,b=g/2;let{width:E,height:T}=r;E+=g,T+=g;const O=E/8,I=T/8,k=[["M",y+b,y],["L",E-2*y,y],["L",E-2*y,T-2*y-I],["C",E-2*y-O,T-2*y-2*I,E/2+O,T-2*y-2*I],["",E/2,T-2*y-I],["S",E/4,T-2*y,y+b,T-2*y-2*I],["L",y+b,y]];return H.createElement("svg",{viewBox:`0 0 ${E} ${T}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(k),fill:u,stroke:s}),H.createElement("path",{d:Ts(k,-g/2,g/2),fill:u,stroke:s}),H.createElement("text",{x:E/2,y:T/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},VR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=g/8,E=[["M",rt,rt],["L",g-2*rt,rt],["L",g-2*rt,y-2*rt],["L",rt,y-2*rt],["Z"]],T=[["M",b,rt],["L",b,y-2*rt]],O=[["M",g-b,rt],["L",g-b,y-2*rt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(E),fill:u,stroke:s}),H.createElement("path",{d:Ts(T),stroke:s}),H.createElement("path",{d:Ts(O),stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},jR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=[["M",g/2,rt],["L",g-2*rt,y-2*rt],["L",rt,y-2*rt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(b),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},HR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=[["M",rt,rt],["L",g-2*rt,rt],["L",g/2,y-2*rt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(b),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},$R=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=[["M",y/2,rt],["L",y/2,y-2*rt]],E=[["M",rt,y/2],["L",y-2*rt,y/2]],T=y-2*rt;return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:`M ${rt},${y/2} a ${T/2} ${T/2} 0 1 1 0 1 z`,fill:u,stroke:s}),H.createElement("path",{d:Ts(b),stroke:s}),H.createElement("path",{d:Ts(E),stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},WR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=[["M",rt,y/5],["L",g-2*rt,rt],["L",g-2*rt,y-2*rt],["L",rt,y-2*rt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(b),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},XR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=Math.tan(Math.PI/6)*(y/2),E=[["M",b,rt],["L",g-b,rt],["L",g-2*rt,y/2],["L",g-b,y-2*rt],["L",b,y-2*rt],["L",rt,y/2],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},ZR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=Math.min(y,g)/2,E=[["M",rt,rt],["L",g-b,rt],["C",g-2*rt,rt,g-2*rt,y/2],["",g-2*rt,y/2],["C",g-2*rt,y/2,g-2*rt,y-2*rt],["",g-b,y-2*rt],["L",rt,y-2*rt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},YR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=Math.min(Math.tan(Math.PI/6)*y,g/2),E=[["M",rt,rt],["L",g-2*rt,rt],["L",g-b,y-2*rt],["L",b,y-2*rt],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},KR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=Math.min(y,g)/3,E=Math.min(Math.tan(Math.PI/6)*(y/2),g/3),T=[["M",E,rt],["L",g-b,rt],["C",g-2*rt,rt,g-2*rt,y/2],["",g-2*rt,y/2],["C",g-2*rt,y/2,g-2*rt,y-2*rt],["",g-b,y-2*rt],["L",E,y-2*rt],["L",rt,y/2],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(T),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},qR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=Math.min(Math.tan(Math.PI/6)*(g/2),y/4),E=[["M",rt,rt],["L",g-2*rt,rt],["L",g-2*rt,y-b],["L",g/2,y-2*rt],["L",rt,y-b],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},JR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u="transparent",fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=6,E=g-2*rt,T=[["M",E,rt],["C",E-b,rt,E-b,b],["",E-b,(y-b)/2],["L",E-2*b,y/2],["L",E-b,(y+b)/2],["L",E-b,y-2*rt-b],["C",E-b,y-2*rt,E,y-2*rt],["",E,y-2*rt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(T),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},QR=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u="transparent",fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=6,E=[["M",rt,rt],["C",b,rt,b,b],["",b,(y-b)/2],["L",2*b,y/2],["L",b,(y+b)/2],["L",b,y-2*rt-b],["C",b,y-2*rt,rt,y-2*rt],["",rt,y-2*rt]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(E),fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},ek=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{stroke:s=xn.stroke,label:a=xn.label,fill:u=xn.fill,fontFill:h=xn.fontFill,fontSize:p=xn.fontSize}=i,{width:g,height:y}=r,b=g-2*rt,E=y-2*rt,T=6,O=[["M",rt,rt],["L",b-T,rt],["C",b,rt,b,T],["",b,y/2],["L",b,E-T],["C",b,E,b-T,E],["",b-T,E],["L",T,E],["C",rt,E,rt,E-T],["",rt,E-T],["Z"]];return H.createElement("svg",{viewBox:`0 0 ${g} ${y}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("path",{d:Ts(O),fill:u,stroke:s}),H.createElement("path",{d:`M ${rt},${T} L ${b-1} ${T} `,fill:u,stroke:s}),H.createElement("path",{d:`M ${T},${rt} L ${T} ${E} `,fill:u,stroke:s}),H.createElement("text",{x:g/2,y:y/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:p},a),"Sorry, your browser does not support inline SVG.")},tk=n=>{const{size:r={width:ya,height:ls},data:i={}}=n,{label:s=xn.label,fontFill:a=xn.fontFill,fontSize:u=xn.fontSize}=i,{width:h,height:p}=r,g=2;return H.createElement("svg",{viewBox:`0 0 ${h/g} ${p/g}`,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},H.createElement("text",{x:h/(2*g),y:p/(2*g),fill:a,textAnchor:"middle",alignmentBaseline:"middle",fontSize:u},s),"Sorry, your browser does not support inline SVG.")},KA=n=>({position:{name:n},attrs:{circle:{r:4,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff",style:{visibility:"hidden"}}},zIndex:10}),zD=(n=["top","right","bottom","left"])=>({items:n.map(r=>({group:r,id:uuidv4()})),groups:{top:KA("top"),right:KA("right"),bottom:KA("bottom"),left:KA("left")}}),nk=n=>(n||[]).map(r=>{const{name:i,popover:s,label:a="",width:u=NODE_HEIGHT,height:h=NODE_HEIGHT,ports:p,parentKey:g}=r;return{id:uuidv4(),renderKey:i,name:i,label:a,popoverContent:s,width:u,height:h,ports:p||zD(),originData:Object.assign({},r),isCustom:!0,parentKey:g}}),u4=n=>__awaiter(void 0,void 0,void 0,function*(){return[...nk(n),...NODEPOOL.map(({name:i,ports:s,width:a=NODE_WIDTH,height:u=NODE_HEIGHT,label:h=""})=>({id:uuidv4(),renderKey:i,name:i,label:h,popoverContent:()=>i,width:a,height:u,ports:zD(s)}))]}),rk=n=>{const r=n?(0,Tl.isArray)(n)?n:[n]:[];let i=[];r.forEach(u=>{i=i.concat(u.nodes.map(h=>Object.assign(Object.assign({},h),{parentKey:u.key})))}),i.length&&kD({registerNode:i});const s=YA("graphConfig"),a=YA("registerNode");!s||!(a!=null&&a.length)||a.forEach(u=>{const{name:h,component:p}=u;s.setNodeRender(h,p)})},ik=n=>{rk(),n.nodeRender.get("Terminal")||PR.forEach(r=>{n.setNodeRender(r.name,J[`${r.name.replace(/\s+/g,"")}Node`])})},Ts=(n,r=0,i=0)=>{if(!n.length)return null;let s="";return n.forEach(a=>{const[u,h,p,g,y]=a;s+=(0,Tl.isNumber)(p)?` ${u} ${h+r} ${p+i}`:` ${u}`,y&&(s+=` ${g+r} ${y+i}`)}),s};var rm=M(87462),ok=M(18073),UD=M(51630),VD=M(50344),sk=M(96774),X3=M.n(sk),ak=M(82225),jD=H.forwardRef(function(n,r){var i,s=n.prefixCls,a=n.forceRender,u=n.className,h=n.style,p=n.children,g=n.isActive,y=n.role,b=H.useState(g||a),E=(0,jp.Z)(b,2),T=E[0],O=E[1];return H.useEffect(function(){(a||g)&&O(!0)},[a,g]),T?H.createElement("div",{ref:r,className:Te()("".concat(s,"-content"),(i={},(0,Bt.Z)(i,"".concat(s,"-content-active"),g),(0,Bt.Z)(i,"".concat(s,"-content-inactive"),!g),i),u),style:h,role:y},H.createElement("div",{className:"".concat(s,"-content-box")},p)):null});jD.displayName="PanelContent";var lk=jD,ck=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],HD=function(n){(0,_o.Z)(i,n);var r=(0,UD.Z)(i);function i(){var s;(0,br.Z)(this,i);for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u)),s.onItemClick=function(){var p=s.props,g=p.onItemClick,y=p.panelKey;typeof g=="function"&&g(y)},s.handleKeyPress=function(p){(p.key==="Enter"||p.keyCode===13||p.which===13)&&s.onItemClick()},s.renderIcon=function(){var p=s.props,g=p.showArrow,y=p.expandIcon,b=p.prefixCls,E=p.collapsible;if(!g)return null;var T=typeof y=="function"?y(s.props):H.createElement("i",{className:"arrow"});return T&&H.createElement("div",{className:"".concat(b,"-expand-icon"),onClick:E==="header"||E==="icon"?s.onItemClick:null},T)},s.renderTitle=function(){var p=s.props,g=p.header,y=p.prefixCls,b=p.collapsible;return H.createElement("span",{className:"".concat(y,"-header-text"),onClick:b==="header"?s.onItemClick:null},g)},s}return(0,Br.Z)(i,[{key:"shouldComponentUpdate",value:function(a){return!X3()(this.props,a)}},{key:"render",value:function(){var a,u,h=this.props,p=h.className,g=h.id,y=h.style,b=h.prefixCls,E=h.headerClass,T=h.children,O=h.isActive,I=h.destroyInactivePanel,k=h.accordion,B=h.forceRender,$=h.openMotion,X=h.extra,re=h.collapsible,ye=(0,eD.Z)(h,ck),me=re==="disabled",We=re==="header",at=re==="icon",ft=Te()((a={},(0,Bt.Z)(a,"".concat(b,"-item"),!0),(0,Bt.Z)(a,"".concat(b,"-item-active"),O),(0,Bt.Z)(a,"".concat(b,"-item-disabled"),me),a),p),Qt=Te()("".concat(b,"-header"),(u={},(0,Bt.Z)(u,E,E),(0,Bt.Z)(u,"".concat(b,"-header-collapsible-only"),We),(0,Bt.Z)(u,"".concat(b,"-icon-collapsible-only"),at),u)),_t={className:Qt,"aria-expanded":O,"aria-disabled":me,onKeyPress:this.handleKeyPress};!We&&!at&&(_t.onClick=this.onItemClick,_t.role=k?"tab":"button",_t.tabIndex=me?-1:0);var en=X!=null&&typeof X!="boolean";return delete ye.header,delete ye.panelKey,delete ye.onItemClick,delete ye.showArrow,delete ye.expandIcon,H.createElement("div",(0,rm.Z)({},ye,{className:ft,style:y,id:g}),H.createElement("div",_t,this.renderIcon(),this.renderTitle(),en&&H.createElement("div",{className:"".concat(b,"-extra")},X)),H.createElement(ak.ZP,(0,rm.Z)({visible:O,leavedClassName:"".concat(b,"-content-hidden")},$,{forceRender:B,removeOnLeave:I}),function(ct,Hn){var Gn=ct.className,rr=ct.style;return H.createElement(lk,{ref:Hn,prefixCls:b,className:Gn,style:rr,isActive:O,forceRender:B,role:k?"tabpanel":null},T)}))}}]),i}(H.Component);HD.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var uk=HD;function $D(n){var r=n;if(!Array.isArray(r)){var i=(0,xl.Z)(r);r=i==="number"||i==="string"?[r]:[]}return r.map(function(s){return String(s)})}var Z3=function(n){(0,_o.Z)(i,n);var r=(0,UD.Z)(i);function i(s){var a;(0,br.Z)(this,i),a=r.call(this,s),a.onClickItem=function(g){var y=a.state.activeKey;if(a.props.accordion)y=y[0]===g?[]:[g];else{y=(0,ga.Z)(y);var b=y.indexOf(g),E=b>-1;E?y.splice(b,1):y.push(g)}a.setActiveKey(y)},a.getNewChild=function(g,y){if(!g)return null;var b=a.state.activeKey,E=a.props,T=E.prefixCls,O=E.openMotion,I=E.accordion,k=E.destroyInactivePanel,B=E.expandIcon,$=E.collapsible,X=g.key||String(y),re=g.props,ye=re.header,me=re.headerClass,We=re.destroyInactivePanel,at=re.collapsible,ft=!1;I?ft=b[0]===X:ft=b.indexOf(X)>-1;var Qt=at!=null?at:$,_t={key:X,panelKey:X,header:ye,headerClass:me,isActive:ft,prefixCls:T,destroyInactivePanel:We!=null?We:k,openMotion:O,accordion:I,children:g.props.children,onItemClick:Qt==="disabled"?null:a.onClickItem,expandIcon:B,collapsible:Qt};return typeof g.type=="string"?g:(Object.keys(_t).forEach(function(en){typeof _t[en]=="undefined"&&delete _t[en]}),H.cloneElement(g,_t))},a.getItems=function(){var g=a.props.children;return(0,VD.Z)(g).map(a.getNewChild)},a.setActiveKey=function(g){"activeKey"in a.props||a.setState({activeKey:g}),a.props.onChange(a.props.accordion?g[0]:g)};var u=s.activeKey,h=s.defaultActiveKey,p=h;return"activeKey"in s&&(p=u),a.state={activeKey:$D(p)},a}return(0,Br.Z)(i,[{key:"shouldComponentUpdate",value:function(a,u){return!X3()(this.props,a)||!X3()(this.state,u)}},{key:"render",value:function(){var a,u=this.props,h=u.prefixCls,p=u.className,g=u.style,y=u.accordion,b=Te()((a={},(0,Bt.Z)(a,h,!0),(0,Bt.Z)(a,p,!!p),a));return H.createElement("div",{className:b,style:g,role:y?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(a){var u={};return"activeKey"in a&&(u.activeKey=$D(a.activeKey)),u}}]),i}(H.Component);Z3.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},Z3.Panel=uk;var WD=Z3,XD=WD,d4=WD.Panel,dk=M(98423),ZD=M(53124),hk=M(33603),YD=M(96159),fk=function(r){var i=H.useContext(ZD.E_),s=i.getPrefixCls,a=r.prefixCls,u=r.className,h=u===void 0?"":u,p=r.showArrow,g=p===void 0?!0:p,y=s("collapse",a),b=Te()((0,Bt.Z)({},"".concat(y,"-no-arrow"),!g),h);return H.createElement(XD.Panel,(0,rm.Z)({},r,{prefixCls:y,className:b}))},pk=fk,KD=function(r){var i,s=H.useContext(ZD.E_),a=s.getPrefixCls,u=s.direction,h=r.prefixCls,p=r.className,g=p===void 0?"":p,y=r.bordered,b=y===void 0?!0:y,E=r.ghost,T=r.expandIconPosition,O=T===void 0?"start":T,I=a("collapse",h),k=H.useMemo(function(){return O==="left"?"start":O==="right"?"end":O},[O]),B=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},We=r.expandIcon,at=We?We(me):H.createElement(ok.Z,{rotate:me.isActive?90:void 0});return(0,YD.Tm)(at,function(){return{className:Te()(at.props.className,"".concat(I,"-arrow"))}})},$=Te()("".concat(I,"-icon-position-").concat(k),(i={},(0,Bt.Z)(i,"".concat(I,"-borderless"),!b),(0,Bt.Z)(i,"".concat(I,"-rtl"),u==="rtl"),(0,Bt.Z)(i,"".concat(I,"-ghost"),!!E),i),g),X=(0,rm.Z)((0,rm.Z)({},hk.ZP),{motionAppear:!1,leavedClassName:"".concat(I,"-content-hidden")}),re=function(){var me=r.children;return(0,VD.Z)(me).map(function(We,at){var ft;if(!((ft=We.props)===null||ft===void 0)&&ft.disabled){var Qt=We.key||String(at),_t=We.props,en=_t.disabled,ct=_t.collapsible,Hn=(0,rm.Z)((0,rm.Z)({},(0,dk.Z)(We.props,["disabled"])),{key:Qt,collapsible:ct!=null?ct:en?"disabled":void 0});return(0,YD.Tm)(We,Hn)}return We})};return H.createElement(XD,(0,rm.Z)({openMotion:X},r,{expandIcon:B,prefixCls:I,className:$}),re())};KD.Panel=pk;var gk=KD,vk=gk;const{Panel:qD}=vk,h4=n=>{const{x6NodeFactory:r,dndOptions:i,state:s,prefixClz:a,defaultActiveKey:u=["official"],showOfficial:h=!0}=n,p=n.registerNode?isArray(n.registerNode)?n.registerNode:[n.registerNode]:[],{graphProvider:g,modelService:y,commandService:b}=useXFlowApp(),[E,T]=React.useState(),[O,I]=React.useState();React.useEffect(()=>{g.getGraphInstance().then(at=>{I(at)})});let k;g.getGraphOptions().then(at=>{k=at});const B=useCallback(at=>__awaiter(void 0,void 0,void 0,function*(){var ft;const{ports:Qt}=at,_t=Object.assign(Object.assign({},at),{id:`node-${uuidv4()}`,zIndex:10,ports:Object.assign(Object.assign({},Qt),{items:(ft=Qt.items)===null||ft===void 0?void 0:ft.map(Hn=>Object.assign(Object.assign({},Hn),{id:uuidv4()}))})}),en={nodeConfig:_t};yield b.executeCommand(XFlowNodeCommands.ADD_NODE.id,en);const ct=getProps("onAddNode");typeof ct=="function"&&ct(_t)}),[b]);React.useEffect(()=>{if(!O)return;const at=new Addon.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},i),{target:O,validateNode:ft=>__awaiter(void 0,void 0,void 0,function*(){const Qt=Object.assign(Object.assign({},ft.getData()),ft.getPosition());return yield B(Qt),!1})}));T(at)},[b,i,O,y,B]);const $=React.useCallback(at=>ft=>{if(!O||!E||!k)return;const Qt=k.nodeTypeParser(at),{width:_t=180,height:en=40}=at,ct=k.nodeRender.get(Qt),Hn=getNodeReactComponent(ct,b,y),Gn={data:at,width:_t,height:en,view:k.graphId,component:Hn},rr=r?r(Gn):defaultNodeFactory(Gn);E.start(rr,ft.nativeEvent)},[b,E,O,k,y,r]),X=React.useCallback((at=[])=>at.map(ft=>{const{popoverContent:Qt}=ft;return React.createElement(NodeTitle,{item:ft,key:ft.id,onMouseDown:$(ft),popoverContent:Qt,prefixClz:a,modelService:y,commandService:b,graphConfig:k})}),[b,k,y,$,a]),re=s.nodeList.filter(at=>!at.isCustom),ye=s.searchList.filter(at=>!at.isCustom),me=at=>s.nodeList.filter(ft=>ft.isCustom&&ft.parentKey===at),We=at=>s.searchList.filter(ft=>ft.isCustom&&ft.parentKey===at);return React.createElement(React.Fragment,null,React.createElement("div",{className:`${a}-body`},React.createElement(Collapse,{defaultActiveKey:u,style:{border:"none"}},h&&React.createElement(qD,{header:"\u901A\u7528\u8282\u70B9",key:"official",style:{border:"none"}},!s.keyword&&React.createElement("div",{className:`${a}-official`},X(re)),s.searchList.length>0&&React.createElement("div",{className:`${a}-official`},X(ye))),(p==null?void 0:p.length)>0&&p.map(at=>!at.hidden&&at.nodes.length>0&&React.createElement(qD,{header:at.title,key:at.key,style:{border:"none"}},!s.keyword&&React.createElement("div",{className:`${a}-custom`},X(me(at.key))),s.searchList.length>0&&React.createElement("div",{className:`${a}-custom`},X(We(at.key)))))),s.keyword&&s.searchList.length===0&&React.createElement(Empty,{style:{marginTop:"48px"}})))},f4=n=>{const{prefixClz:r,onKeywordChange:i}=n,{propsProxy:s}=usePanelContext(),a=s.getValue();return React.createElement(React.Fragment,null,React.createElement("div",{className:`${r}-header`,style:Object.assign({zIndex:1},n.style)},a.header&&React.isValidElement(a.header)&&a.header,React.createElement("div",{className:`${r}-header-search`},React.createElement(Input,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:u=>i(u.target.value),style:{width:"100%",border:0}}))))};var qA;(function(n){n.id="NODE_PANEL_DATA"})(qA||(qA={}));const mk=(n=[],r)=>__awaiter(void 0,void 0,void 0,function*(){return n.filter(s=>{var a,u;return s.isDirectory||((a=s.label)===null||a===void 0?void 0:a.includes(r))||((u=s.name)===null||u===void 0?void 0:u.includes(r))})}),p4=n=>{const{searchService:r=mk}=n,i=n.registerNode?isArray(n.registerNode)?n.registerNode:[n.registerNode]:[];let s=[];i.forEach(y=>{s=s.concat(y.nodes.map(b=>Object.assign(Object.assign({},b),{parentKey:y.key})))});const{modelService:a}=useXFlowApp(),[u,h,p]=createComponentModel({searchList:[],nodeList:[],defaultExpandAll:!1,keyword:""});React.useEffect(()=>{a.findDeferredModel(qA.id)||a.registerModel({id:qA.id,modelFactory:()=>p,watchChange:y=>__awaiter(void 0,void 0,void 0,function*(){const b=yield MODELS.GRAPH_META.getModel(a),E=()=>__awaiter(void 0,void 0,void 0,function*(){return{listData:yield nodeService(s)}}),T=b.watch(()=>__awaiter(void 0,void 0,void 0,function*(){const O=yield E();y.setValue({nodeList:O.listData,defaultExpandAll:!1,keyword:"",searchList:[]})}));return Disposable.create(()=>{T.dispose()})})})},[]);const g=React.useCallback(y=>__awaiter(void 0,void 0,void 0,function*(){if(r)if(y){const b=yield r(u.nodeList,y);h(E=>{E.keyword=y,E.searchList=b})}else h(b=>{b.keyword="",b.searchList=[]})}),[r,u.nodeList,h]);return{state:u,setState:h,onKeywordChange:g}},yk=n=>{const{cell:r,data:{label:i,stroke:s,fill:a,fontSize:u,fontFill:h,width:p=200,isCollapsed:g=!1}}=n,y=es(),b=()=>{y.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!1,collapsedSize:{width:p,height:40}})},E=()=>{y.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!0,collapsedSize:{width:p,height:40},gap:3})};return H.createElement("div",{className:"xflow-group-node",style:{borderColor:s,backgroundColor:a,fontSize:u,color:h}},H.createElement("div",{className:"xflow-group-header"},H.createElement("div",{className:"header-left"},i),H.createElement("div",{className:"header-right"},g&&H.createElement(cs.Z,{onClick:b}),!g&&H.createElement(lp.Z,{onClick:E}))))},bk=n=>{n.setNodeRender(OR,yk)};var JD;(function(n){n.id="FLOWCHART_PANEL_DATA"})(JD||(JD={}));const xk=n=>{const{prefixClz:r,position:i={width:240,top:0,bottom:0,left:0},showHeader:s=!0}=n,a=__rest(n,["prefixClz","position","showHeader"]),{width:u=200}=i,{headerStyle:h,bodyStyle:p}=usePanelLyaoutStyle(n),{state:g,onKeywordChange:y}=usePanelData(n);return React.createElement(React.Fragment,null,s&&React.createElement(WorkspacePanel,Object.assign({},a,{position:{top:0,left:0,height:PANEL_HEADER_HEIGHT,width:u}}),React.createElement(NodePanelHeader,Object.assign({},n,{state:g,style:h,onKeywordChange:y}))),React.createElement(WorkspacePanel,Object.assign({className:`${CONTAINER_CLASS}-nodes`},a,{position:Object.assign(Object.assign({},i),{top:s?PANEL_HEADER_HEIGHT:0})}),React.createElement(NodePanelBody,Object.assign({},n,{state:g,style:p}))))},g4=n=>{registerCustomNode(get(n,"registerNode"));const r=useXflowPrefixCls("node-panel"),[i,s]=useState(!1),{show:a=!0,position:u={width:240,top:40,bottom:0,left:0}}=n,h=__rest(n,["show","position"]);if(!a)return null;const{width:p=200,left:g}=u;return React.createElement(WorkspacePanel,{className:CONTAINER_CLASS,position:Object.assign(Object.assign({},u),{left:i?-p:g})},React.createElement("div",{className:`${CONTAINER_CLASS}-wrapper`},React.createElement(WorkspacePanel,Object.assign({className:r},h,{position:{top:0,bottom:0,left:0,right:0}}),React.createElement(xk,Object.assign({},n,{prefixClz:r,position:u}))),React.createElement("div",{className:`${CONTAINER_CLASS}-icon`,style:{top:21,right:i?-20:-10,borderRadius:i?"0 50% 50% 0":"50%",borderLeft:i?"none":""},onClick:()=>{s(!i)}},i?React.createElement(DoubleRightOutlined,null):React.createElement(DoubleLeftOutlined,null))))},Ck="flowchart-connecting-edge",wk="ant";var JA;(function(n){n.EVENT_NAME="ADD_FLOWCHART_EDGE_CMD_EVENT"})(JA||(JA={}));const QD={attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8},strokeDasharray:"5 5",strokeWidth:1}}},Ek=wr.bn.kS.registry.register("xflow",wr.bn.kS.define({zIndex:1,highlight:!0,name:Ck,label:"",anchor:{name:"midSide",args:{dx:10}},attrs:QD.attrs,data:{label:""}}),!0),Sk=hf((n,r)=>{const{config:i={},useConfig:s,mode:a="edit",showPortsOnNodeSelected:u=!1,edgeConfig:h={}}=r.getValue();n.setEdgeTypeParser(p=>p==null?void 0:p.renderKey),kD(Object.assign(Object.assign({},r.getValue()),{graphConfig:n})),ik(n),bk(n),n.setX6Config(RD()({grid:!0,history:!0,resizing:{enabled:!0,minWidth:ls,minHeight:ls,preserveAspectRatio:p=>{const{data:g}=p;return DR.includes(g.name)}},snapline:{enabled:!0},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge(){const p=new Ek({});return this.once("edge:connected",g=>{const{edge:y,isNew:b}=g;if(b&&y&&y.isEdge()&&p===y){const E=y.getTargetCell();if(E&&E.isNode()){const T=y.getTargetPortId(),O=y.getSourcePortId(),I=y.getSourceCellId(),k=y.getTargetCellId(),B=typeof h=="function"?h(y):h;this.trigger(JA.EVENT_NAME,Object.assign({targetPortId:T,sourcePortId:O,source:I,target:k,edge:y,tempEdgeId:p.id},RD()(QD,B)))}}}),p},validateEdge:p=>{var g;const{edge:y}=p;return!!(!((g=y==null?void 0:y.target)===null||g===void 0)&&g.port)},validateMagnet(){return!0},validateConnection({sourceView:p,targetView:g,targetMagnet:y}){if(p===g)return!1;const b=g.cell;if(y){const E=y.getAttribute("port"),T=b.getPort(E);return!(T&&T.connected)}}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},onPortRendered(p){const{port:g}=p,{contentSelectors:y}=p,b=y&&y.content,E=g.group,T=Te()("xflow-port",{connected:g.connected});b&&Pa.render(H.createElement(vR.ZP,{prefixCls:wk},H.createElement(PA.Z,{title:g.tooltip,placement:E},H.createElement("span",{className:T}))),b)}},i)),n.setEvents([{eventName:"node:selected",callback:()=>{a==="edit"&&W3(!1)}},{eventName:"edge:dblclick",callback:p=>{TR(p)}},{eventName:"edge:mouseleave",callback:(p,g)=>{MR(p,g)}},{eventName:"node:mouseenter",callback:p=>{a==="edit"&&W3(!0,p,u)}},{eventName:"node:mouseleave",callback:p=>{W3(!1,p)}},{eventName:"node:moved",callback:(p,g)=>{CR(p,g)}},{eventName:"node:resized",callback:(p,g)=>{wR(p,g)}}]),typeof s=="function"&&s(n)});let eN=class{constructor(){this.toDispose=new Kt,this.registerHookHub=()=>(0,F.mG)(this,void 0,void 0,function*(){return Pt.create(()=>{})}),this.registerHook=r=>(0,F.mG)(this,void 0,void 0,function*(){const i=new Kt,s=[r.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:a=>(0,F.mG)(this,void 0,void 0,function*(){const{commandService:u,graph:h}=a;h.on(JA.EVENT_NAME,p=>(0,F.mG)(this,void 0,void 0,function*(){const{edge:g}=p,y=(0,F._T)(p,["edge"]),{tempEdgeId:b}=y,E=(0,F._T)(y,["tempEdgeId"]),T={edgeConfig:Object.assign(Object.assign({},E),{source:{cell:y.source,port:y.sourcePortId},target:{cell:y.target,port:y.targetPortId},zIndex:1,data:Object.assign({},E)})};yield u.executeCommand(yo.ADD_EDGE.id,T),yield u.executeCommand(yo.DEL_EDGE.id,{edgeConfig:{id:b}});const O=h.getCellById(y.source),I=h.getCellById(y.target);yield u.executeCommand(Ji.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign({},O.data),{incomingEdges:h.getIncomingEdges(O),outgoingEdges:h.getOutgoingEdges(O)})}),yield u.executeCommand(Ji.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign({},I.data),{incomingEdges:h.getIncomingEdges(I),outgoingEdges:h.getOutgoingEdges(I)})});const k=YA("onAddEdge");typeof k=="function"&&k(T.edgeConfig),p.edge.remove()}))})})];return i.pushAll(s),Pt.create(()=>{})})}};eN=(0,F.gn)([kt({contrib:la})],eN);const v4=()=>{const n=useExtensionRegistry(),r=React.useMemo(()=>({CONFIG_TYPE:"FLOWCHART_EXTENSION",getConfig:()=>__awaiter(void 0,void 0,void 0,function*(){})}),[]);return React.useEffect(()=>{const i=n.addExtension({config:r,createModule:createFlowchartExtensionModule});return n.addContainerClassNames("flowchart-extension-container"),()=>{i.dispose()}},[r,n]),null},m4=()=>Module(n=>{n(FlowHooksContribution)}),_k=n=>{const{position:r={top:40,left:240,right:240,bottom:0}}=n,i=Sk(n),s=es();return(0,H.useEffect)(()=>{s&&yR(s)},[s]),H.createElement(Zl,Object.assign({},n,{config:i,position:r}),n.children)};_k.defaultProps={isXFlowCanvas:!0};function Ak(n){const[r,i]=(0,H.useState)({loading:!0}),s=(0,H.useCallback)(()=>{n().then(a=>{i({loading:!1,data:a})},a=>{i({loading:!1}),console.error(a)})},[n]);return(0,H.useEffect)(()=>{s()},[s]),r}const Y3=n=>{const{controlSchema:r,children:i,type:s="node"}=n,{commandService:a,modelService:u}=Ew(),h=(0,H.useCallback)(()=>(0,F.mG)(void 0,void 0,void 0,function*(){const{data:O}=yield Ef.useValue(u);return O}),[u]),p=(0,H.useCallback)(()=>(0,F.mG)(void 0,void 0,void 0,function*(){const O=yield fo.useValue(u),I=O.getData();return Object.assign({id:O.id},I)}),[u]),{data:g,loading:y}=Ak(s==="edge"?p:h);H.useEffect(()=>{a.executeCommand(pi.SAVE_GRAPH_DATA.id,{saveGraphDataService:(O,I)=>(0,F.mG)(void 0,void 0,void 0,function*(){return{err:null,data:I,meta:O}})})},[a]);const b=O=>(0,F.mG)(void 0,void 0,void 0,function*(){const I=yield h(),k=Object.assign(Object.assign({},I),O);yield a.executeCommand(Ji.UPDATE_NODE.id,{nodeConfig:k}),Mw({type:"update:node",config:k})}),E=(O,I="line",k)=>(0,F.mG)(void 0,void 0,void 0,function*(){var B;const $=yield p(),X=Object.assign(Object.assign(Object.assign({},$),k?O[k]:O),{attrs:Object.assign(Object.assign({},$.attrs),{[I]:Object.assign(Object.assign({},(B=$.attrs)===null||B===void 0?void 0:B[I]),k?O[k]:O)})});yield a.executeCommand(yo.UPDATE_EDGE.id,{edgeConfig:X}),Mw({type:"update:edge",config:X})}),T=O=>(0,F.mG)(void 0,void 0,void 0,function*(){const I=yield h(),k=Object.assign(Object.assign({},I),O);yield a.executeCommand(Ji.UPDATE_NODE.id,{nodeConfig:k}),Mw({type:"update:group",config:k})});return y?null:H.createElement(em,{schema:r},()=>i(Object.assign({},g),{updateNode:b,updateEdge:E,updateGroup:T}))},Bl="flowchart-editor",QA=24,tN={attrs:{line:{stroke:"#A2B1C3",strokeWidth:1},text:{fill:"#000",fontSize:12,textAnchor:"middle",textVerticalAnchor:"middle"}}},eT={width:12,height:8,name:"block"},tT={width:0,height:0,name:""},Tk={target:{sourceMarker:tT,targetMarker:eT},source:{sourceMarker:eT,targetMarker:tT},all:{sourceMarker:eT,targetMarker:eT},none:{sourceMarker:tT,targetMarker:tT}},Mk={solid:[0,0],dash:[5,5]};var nT=n=>{const{label:r="\u6807\u7B7E",value:i,onChange:s}=n;return H.createElement("div",{className:"group"},H.createElement("label",null,r),H.createElement(UA.Z,{value:i,style:{height:QA},onChange:a=>{s==null||s(a.target.value)}}))},nN=M(71577),Ok=M(24198);const Pk=n=>{const{label:r,value:i="",onChange:s,getContainer:a}=n,[u,h]=(0,H.useState)(!1),p=(0,H.useRef)(i),g=(0,H.useRef)(),{graphProvider:y}=es(),b=(0,H.useRef)();y.getGraphOptions().then(I=>{b.current=I});const E=()=>H.createElement("div",{className:`${Bl}-pick-color-container`},H.createElement("div",{className:`${Bl}-popover`},H.createElement(Ok.xS,{onChange:I=>{p.current=I.hex}}),H.createElement("div",{className:"foolter"},H.createElement(nN.Z,{onClick:()=>{h(!1)}},"\u53D6\u6D88"),H.createElement(nN.Z,{type:"primary",onClick:()=>{s==null||s(p.current),h(!1)}},"\u786E\u8BA4")))),T=(I,k)=>{const B=document.getElementsByClassName(k);if(B.length===1)return B[0];let $=null,X=I.parentElement;for(;!$;){const re=X.getElementsByClassName(k);(re==null?void 0:re.length)>0&&($=re[0]),X=X.parentElement}return $},O=()=>{var I;const k=(I=a==null?void 0:a())!==null&&I!==void 0?I:T(g.current,"flowchart-editor-panel-body");return(0,Pa.createPortal)(H.createElement(E,null),k)};return H.createElement("div",{className:"group",ref:g},r&&H.createElement("label",null,r),H.createElement("div",{className:`${Bl}-color-container`,onClick:()=>{h(!0)}},H.createElement("div",{className:`${Bl}-color`,style:{backgroundColor:i,height:"100%"}})),u&&O())};var G0=(0,H.memo)(Pk,(n,r)=>n.label===r.label&&n.value===r.value),Ow=n=>{const{label:r,value:i,onChange:s,min:a,width:u}=n;return H.createElement("div",{className:"group"},r&&H.createElement("label",null,r),H.createElement(U3.Z,{value:i,min:a,style:{width:u,height:QA},onChange:h=>{s==null||s(h)}}))};const rT=({value:n,onChangeItem:r,addonBefore:i})=>H.createElement("div",{className:"addon-before-group"},H.createElement(U3.Z,{value:n,style:{height:QA,border:"none"},onChange:s=>{r(s)}}),H.createElement("span",null,i));var K3=n=>{const{label:r="\u4F4D\u7F6E",x:i,y:s,onChange:a}=n;return H.createElement("div",{className:"group"},H.createElement("label",null,r),H.createElement("div",{className:"split"},H.createElement(rT,{addonBefore:"X",value:i,onChangeItem:u=>{a==null||a("x",u)}}),H.createElement(rT,{addonBefore:"Y",value:s,onChangeItem:u=>{a==null||a("y",u)}})))},q3=n=>{const{width:r,height:i,label:s="\u5C3A\u5BF8",onChange:a}=n;return H.createElement("div",{className:"group"},H.createElement("label",null,s),H.createElement("div",{className:"split"},H.createElement(rT,{addonBefore:"W",value:r,onChangeItem:u=>{a==null||a("width",u)}}),H.createElement(rT,{addonBefore:"H",value:i,onChangeItem:u=>{a==null||a("height",u)}})))},J3=n=>{const{label:r="\u7BAD\u5934",value:i,onChange:s,options:a=[],width:u}=n;return H.createElement("div",{className:"group"},H.createElement("label",null,r),H.createElement(B3.Z,{size:"small",value:i,style:{width:u,height:QA},getPopupContainer:h=>h.parentNode,optionFilterProp:"children",onChange:h=>{s==null||s(h)},filterOption:(h,p)=>{const{label:g=""}=p;return typeof g=="string"?g.toLowerCase().indexOf(h.toLowerCase())>=0:g.toString().indexOf(h.toLowerCase())>=0},options:a}))};const E4={InputFiled:nT,ColorPicker:G0,InputNumberFiled:Ow,Size:q3,Position:K3,SelectField:J3},Dk=n=>{const{config:r,plugin:i={}}=n,{updateNode:s}=i,[a,u]=(0,H.useState)(Object.assign(Object.assign({},xn),r)),h=(p,g)=>{u(Object.assign(Object.assign({},a),{[p]:g})),s({[p]:g})};return(0,H.useEffect)(()=>{u(Object.assign(Object.assign({},xn),r))},[r]),H.createElement("div",{className:`${Bl}-panel-body`},H.createElement("div",{className:`${Bl}-panel-group`},H.createElement("h5",null,"\u5185\u5BB9"),H.createElement(nT,{label:"\u6807\u9898",value:a.label,onChange:p=>{h("label",p)}})),H.createElement("div",{className:`${Bl}-panel-group`},H.createElement("h5",null,"\u6837\u5F0F"),H.createElement(K3,{x:a.x,y:a.y,onChange:(p,g)=>{h(p,g)}}),H.createElement(q3,{width:a.width,height:a.height,onChange:(p,g)=>{h(p,g)}}),H.createElement(G0,{label:"\u586B\u5145",value:a.fill,onChange:p=>{h("fill",p)}}),H.createElement(G0,{label:"\u8FB9\u6846",value:a.stroke,onChange:p=>{h("stroke",p)}}),H.createElement("div",{className:`${Bl}-node-text-style`},H.createElement(Ow,{label:"\u5B57\u53F7",value:a.fontSize,width:68,onChange:p=>{h("fontSize",p)}}),H.createElement(G0,{value:a.fontFill,onChange:p=>{h("fontFill",p)}}))))},Nk=n=>H.createElement(Y3,Object.assign({},n),(r,i)=>H.createElement(Dk,Object.assign({},n,{plugin:i,config:r}))),Ik=n=>{const{config:r,plugin:i={}}=n,{updateEdge:s}=i,[a,u]=(0,H.useState)(Object.assign(Object.assign({},tN),r));(0,H.useEffect)(()=>{u(Object.assign(Object.assign({},tN),r))},[r]);const h=(b,E="line")=>{var T;const{attrs:O={}}=a;return(T=O[E])===null||T===void 0?void 0:T[b]},p=()=>{var b,E,T,O,I;const{attrs:k={}}=a,{line:B={}}=k;return!((b=B.sourceMarker)===null||b===void 0)&&b.name&&(!((E=B.targetMarker)===null||E===void 0)&&E.name)?"all":!(!((T=B.sourceMarker)===null||T===void 0)&&T.name)&&!(!((O=B.targetMarker)===null||O===void 0)&&O.name)?"none":!((I=B.sourceMarker)===null||I===void 0)&&I.name?"source":"target"},g=()=>{const{attrs:b={}}=a,{line:E={}}=b;return E.strokeDasharray?"dash":"solid"},y=(b,E,T="line")=>{var O,I;u(b==="arrow"?Object.assign(Object.assign({},a),{attrs:Object.assign(Object.assign({},a.attrs),{[T]:Object.assign(Object.assign({},(O=a.attrs)===null||O===void 0?void 0:O[T]),E)})}):Object.assign(Object.assign({},a),{[b]:E,attrs:Object.assign(Object.assign({},a.attrs),{[T]:Object.assign(Object.assign({},(I=a.attrs)===null||I===void 0?void 0:I[T]),{[b]:E})})})),s({[b]:E},T,b==="arrow"?"arrow":"")};return H.createElement("div",{className:`${Bl}-panel-body`},H.createElement("div",{className:`${Bl}-panel-group`},H.createElement("h5",null,"\u5185\u5BB9"),H.createElement(nT,{label:"\u6807\u7B7E",value:a.label,onChange:b=>{y("label",b)}})),H.createElement("h5",{style:{marginBottom:12}},"\u6837\u5F0F"),H.createElement("div",{className:`${Bl}-panel-group`,style:{marginBottom:0}},H.createElement("h5",null,"\u7EBF"),H.createElement(J3,{label:"\u7BAD\u5934",value:p(),width:"100%",options:[{label:"\u6B63\u5411",value:"target"},{label:"\u9006\u5411",value:"source"},{label:"\u53CC\u5411",value:"all"},{label:"\u65E0",value:"none"}],onChange:b=>{y("arrow",Tk[b],"line")}}),H.createElement("div",{className:`${Bl}-edge-stroke-style`},H.createElement(J3,{label:"\u7EBF\u5F62",width:68,value:g(),options:[{label:"\u5B9E\u7EBF",value:"solid"},{label:"\u865A\u7EBF",value:"dash"}],onChange:b=>{y("strokeDasharray",Mk[b],"line")}}),H.createElement(Ow,{value:h("strokeWidth"),min:1,onChange:b=>{y("strokeWidth",b,"line")}})),H.createElement(G0,{label:"\u8FB9\u6846",value:h("stroke"),onChange:b=>{y("stroke",b,"line")}})),H.createElement("div",{className:`${Bl}-panel-group`},H.createElement("h5",null,"\u6807\u7B7E"),H.createElement("div",{className:`${Bl}-edge-text-style`},H.createElement(Ow,{label:"\u5B57\u53F7",min:10,width:68,value:h("fontSize","text")||12,onChange:b=>{y("fontSize",b,"text")}}),H.createElement(G0,{value:h("fill","text")||"#000",onChange:b=>{y("fill",b,"text")}}))))},Rk=n=>H.createElement(Y3,Object.assign({},n,{type:"edge"}),(r,i)=>H.createElement(Ik,Object.assign({},n,{plugin:i,config:r}))),kk=n=>{const{config:r,plugin:i={}}=n,{updateGroup:s}=i,[a,u]=(0,H.useState)(Object.assign(Object.assign({},xn),r)),h=(p,g)=>{u(Object.assign(Object.assign({},a),{[p]:g})),s({[p]:g})};return(0,H.useEffect)(()=>{u(Object.assign(Object.assign({},xn),r))},[r]),H.createElement("div",{className:`${Bl}-panel-body`},H.createElement("div",{className:`${Bl}-panel-group`},H.createElement("h5",null,"\u5185\u5BB9"),H.createElement(nT,{label:"\u6807\u9898",value:a.label,onChange:p=>{h("label",p)}})),H.createElement("div",{className:`${Bl}-panel-group`},H.createElement("h5",null,"\u6837\u5F0F"),H.createElement(K3,{x:a.x,y:a.y,onChange:(p,g)=>{h(p,g)}}),H.createElement(q3,{width:a.width,height:a.height,onChange:(p,g)=>{h(p,g)}}),H.createElement(G0,{label:"\u586B\u5145",value:a.fill,onChange:p=>{h("fill",p)}}),H.createElement(G0,{label:"\u8FB9\u6846",value:a.stroke,onChange:p=>{h("stroke",p)}}),H.createElement("div",{className:`${Bl}-node-text-style`},H.createElement(Ow,{label:"\u5B57\u53F7",value:a.fontSize,width:68,onChange:p=>{h("fontSize",p)}}),H.createElement(G0,{value:a.fontFill,onChange:p=>{h("fontFill",p)}}))))},Lk=n=>H.createElement(Y3,Object.assign({},n),(r,i)=>H.createElement(kk,Object.assign({},n,{plugin:i,config:r}))),Gk=()=>H.createElement("div",{className:`${Bl}-canvas-panel`},H.createElement("span",null,"\u672A\u9009\u4E2D")),S4=n=>(n.set("node-service",NodeService),n.set("edge-service",EdgeService),n.set("group-service",GroupService),n.set("canvas-service",CanvasService),n),_4={NodeService:Nk,EdgeService:Rk,GroupService:Lk,CanvasService:Gk},Q3="xflow-editor-panel-collpase",A4=n=>{const[r,i]=useState(!1),{controlMapService:s=defaultControlMapService,formSchemaService:a=defaultFormSchemaService,position:u={width:240,top:0,bottom:0,right:0},show:h=!0}=n,p=__rest(n,["controlMapService","formSchemaService","position","show"]);if(!h)return null;const{width:g=200,right:y}=u;return React.createElement(WorkspacePanel,{className:Q3,position:Object.assign(Object.assign({},u),{right:r?-g:y})},React.createElement("div",{className:`${Q3}-wrapper`},React.createElement(JsonSchemaForm,Object.assign({targetType:["node","edge","canvas","group"],controlMapService:s,formSchemaService:a,position:Object.assign(Object.assign({},u),{top:0}),prefixClz:"xflow-form-editor"},p)),React.createElement("div",{className:`${Q3}-icon`,style:{top:21,left:r?-20:-10,borderRadius:r?"50% 0 0  50%":"50%",borderRight:r?"none":""},onClick:()=>{i(!r)}},r?React.createElement(DoubleLeftOutlined,null):React.createElement(DoubleRightOutlined,null))))}},85788:function(De,L,M){var j=M(58579);De.exports={Graph:j.Graph,json:M(62485),alg:M(39100),version:j.version}},74774:function(De,L,M){var j=M(77163);De.exports=D;function D(J){var z={},Z=[],ee;function Q(ue){j.has(z,ue)||(z[ue]=!0,ee.push(ue),j.each(J.successors(ue),Q),j.each(J.predecessors(ue),Q))}return j.each(J.nodes(),function(ue){ee=[],Q(ue),ee.length&&Z.push(ee)}),Z}},65179:function(De,L,M){var j=M(77163);De.exports=D;function D(z,Z,ee){j.isArray(Z)||(Z=[Z]);var Q=(z.isDirected()?z.successors:z.neighbors).bind(z),ue=[],oe={};return j.each(Z,function(ie){if(!z.hasNode(ie))throw new Error("Graph does not have node: "+ie);J(z,ie,ee==="post",oe,Q,ue)}),ue}function J(z,Z,ee,Q,ue,oe){j.has(Q,Z)||(Q[Z]=!0,ee||oe.push(Z),j.each(ue(Z),function(ie){J(z,ie,ee,Q,ue,oe)}),ee&&oe.push(Z))}},73897:function(De,L,M){var j=M(69205),D=M(77163);De.exports=J;function J(z,Z,ee){return D.transform(z.nodes(),function(Q,ue){Q[ue]=j(z,ue,Z,ee)},{})}},69205:function(De,L,M){var j=M(77163),D=M(96129);De.exports=z;var J=j.constant(1);function z(ee,Q,ue,oe){return Z(ee,String(Q),ue||J,oe||function(ie){return ee.outEdges(ie)})}function Z(ee,Q,ue,oe){var ie={},ne=new D,he,Ne,le=function(be){var se=be.v!==he?be.v:be.w,ce=ie[se],fe=ue(be),we=Ne.distance+fe;if(fe<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+be+" Weight: "+fe);we<ce.distance&&(ce.distance=we,ce.predecessor=he,ne.decrease(se,we))};for(ee.nodes().forEach(function(be){var se=be===Q?0:Number.POSITIVE_INFINITY;ie[be]={distance:se},ne.add(be,se)});ne.size()>0&&(he=ne.removeMin(),Ne=ie[he],Ne.distance!==Number.POSITIVE_INFINITY);)oe(he).forEach(le);return ie}},32630:function(De,L,M){var j=M(77163),D=M(93070);De.exports=J;function J(z){return j.filter(D(z),function(Z){return Z.length>1||Z.length===1&&z.hasEdge(Z[0],Z[0])})}},3171:function(De,L,M){var j=M(77163);De.exports=J;var D=j.constant(1);function J(Z,ee,Q){return z(Z,ee||D,Q||function(ue){return Z.outEdges(ue)})}function z(Z,ee,Q){var ue={},oe=Z.nodes();return oe.forEach(function(ie){ue[ie]={},ue[ie][ie]={distance:0},oe.forEach(function(ne){ie!==ne&&(ue[ie][ne]={distance:Number.POSITIVE_INFINITY})}),Q(ie).forEach(function(ne){var he=ne.v===ie?ne.w:ne.v,Ne=ee(ne);ue[ie][he]={distance:Ne,predecessor:ie}})}),oe.forEach(function(ie){var ne=ue[ie];oe.forEach(function(he){var Ne=ue[he];oe.forEach(function(le){var be=Ne[ie],se=ne[le],ce=Ne[le],fe=be.distance+se.distance;fe<ce.distance&&(ce.distance=fe,ce.predecessor=se.predecessor)})})}),ue}},39100:function(De,L,M){De.exports={components:M(74774),dijkstra:M(69205),dijkstraAll:M(73897),findCycles:M(32630),floydWarshall:M(3171),isAcyclic:M(78149),postorder:M(85979),preorder:M(5340),prim:M(74975),tarjan:M(93070),topsort:M(37034)}},78149:function(De,L,M){var j=M(37034);De.exports=D;function D(J){try{j(J)}catch(z){if(z instanceof j.CycleException)return!1;throw z}return!0}},85979:function(De,L,M){var j=M(65179);De.exports=D;function D(J,z){return j(J,z,"post")}},5340:function(De,L,M){var j=M(65179);De.exports=D;function D(J,z){return j(J,z,"pre")}},74975:function(De,L,M){var j=M(77163),D=M(1053),J=M(96129);De.exports=z;function z(Z,ee){var Q=new D,ue={},oe=new J,ie;function ne(Ne){var le=Ne.v===ie?Ne.w:Ne.v,be=oe.priority(le);if(be!==void 0){var se=ee(Ne);se<be&&(ue[le]=ie,oe.decrease(le,se))}}if(Z.nodeCount()===0)return Q;j.each(Z.nodes(),function(Ne){oe.add(Ne,Number.POSITIVE_INFINITY),Q.setNode(Ne)}),oe.decrease(Z.nodes()[0],0);for(var he=!1;oe.size()>0;){if(ie=oe.removeMin(),j.has(ue,ie))Q.setEdge(ie,ue[ie]);else{if(he)throw new Error("Input graph is not connected: "+Z);he=!0}Z.nodeEdges(ie).forEach(ne)}return Q}},93070:function(De,L,M){var j=M(77163);De.exports=D;function D(J){var z=0,Z=[],ee={},Q=[];function ue(oe){var ie=ee[oe]={onStack:!0,lowlink:z,index:z++};if(Z.push(oe),J.successors(oe).forEach(function(Ne){j.has(ee,Ne)?ee[Ne].onStack&&(ie.lowlink=Math.min(ie.lowlink,ee[Ne].index)):(ue(Ne),ie.lowlink=Math.min(ie.lowlink,ee[Ne].lowlink))}),ie.lowlink===ie.index){var ne=[],he;do he=Z.pop(),ee[he].onStack=!1,ne.push(he);while(oe!==he);Q.push(ne)}}return J.nodes().forEach(function(oe){j.has(ee,oe)||ue(oe)}),Q}},37034:function(De,L,M){var j=M(77163);De.exports=D,D.CycleException=J;function D(z){var Z={},ee={},Q=[];function ue(oe){if(j.has(ee,oe))throw new J;j.has(Z,oe)||(ee[oe]=!0,Z[oe]=!0,j.each(z.predecessors(oe),ue),delete ee[oe],Q.push(oe))}if(j.each(z.sinks(),ue),j.size(Z)!==z.nodeCount())throw new J;return Q}function J(){}},96129:function(De,L,M){var j=M(77163);De.exports=D;function D(){this._arr=[],this._keyIndices={}}D.prototype.size=function(){return this._arr.length},D.prototype.keys=function(){return this._arr.map(function(J){return J.key})},D.prototype.has=function(J){return j.has(this._keyIndices,J)},D.prototype.priority=function(J){var z=this._keyIndices[J];if(z!==void 0)return this._arr[z].priority},D.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},D.prototype.add=function(J,z){var Z=this._keyIndices;if(J=String(J),!j.has(Z,J)){var ee=this._arr,Q=ee.length;return Z[J]=Q,ee.push({key:J,priority:z}),this._decrease(Q),!0}return!1},D.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var J=this._arr.pop();return delete this._keyIndices[J.key],this._heapify(0),J.key},D.prototype.decrease=function(J,z){var Z=this._keyIndices[J];if(z>this._arr[Z].priority)throw new Error("New priority is greater than current priority. Key: "+J+" Old: "+this._arr[Z].priority+" New: "+z);this._arr[Z].priority=z,this._decrease(Z)},D.prototype._heapify=function(J){var z=this._arr,Z=2*J,ee=Z+1,Q=J;Z<z.length&&(Q=z[Z].priority<z[Q].priority?Z:Q,ee<z.length&&(Q=z[ee].priority<z[Q].priority?ee:Q),Q!==J&&(this._swap(J,Q),this._heapify(Q)))},D.prototype._decrease=function(J){for(var z=this._arr,Z=z[J].priority,ee;J!==0&&(ee=J>>1,!(z[ee].priority<Z));)this._swap(J,ee),J=ee},D.prototype._swap=function(J,z){var Z=this._arr,ee=this._keyIndices,Q=Z[J],ue=Z[z];Z[J]=ue,Z[z]=Q,ee[ue.key]=J,ee[Q.key]=z}},1053:function(De,L,M){"use strict";var j=M(77163);De.exports=Z;var D="\0",J="\0",z="";function Z(ne){this._isDirected=j.has(ne,"directed")?ne.directed:!0,this._isMultigraph=j.has(ne,"multigraph")?ne.multigraph:!1,this._isCompound=j.has(ne,"compound")?ne.compound:!1,this._label=void 0,this._defaultNodeLabelFn=j.constant(void 0),this._defaultEdgeLabelFn=j.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[J]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}Z.prototype._nodeCount=0,Z.prototype._edgeCount=0,Z.prototype.isDirected=function(){return this._isDirected},Z.prototype.isMultigraph=function(){return this._isMultigraph},Z.prototype.isCompound=function(){return this._isCompound},Z.prototype.setGraph=function(ne){return this._label=ne,this},Z.prototype.graph=function(){return this._label},Z.prototype.setDefaultNodeLabel=function(ne){return j.isFunction(ne)||(ne=j.constant(ne)),this._defaultNodeLabelFn=ne,this},Z.prototype.nodeCount=function(){return this._nodeCount},Z.prototype.nodes=function(){return j.keys(this._nodes)},Z.prototype.sources=function(){return j.filter(this.nodes(),j.bind(function(ne){return j.isEmpty(this._in[ne])},this))},Z.prototype.sinks=function(){return j.filter(this.nodes(),j.bind(function(ne){return j.isEmpty(this._out[ne])},this))},Z.prototype.setNodes=function(ne,he){var Ne=arguments;return j.each(ne,j.bind(function(le){Ne.length>1?this.setNode(le,he):this.setNode(le)},this)),this},Z.prototype.setNode=function(ne,he){return j.has(this._nodes,ne)?(arguments.length>1&&(this._nodes[ne]=he),this):(this._nodes[ne]=arguments.length>1?he:this._defaultNodeLabelFn(ne),this._isCompound&&(this._parent[ne]=J,this._children[ne]={},this._children[J][ne]=!0),this._in[ne]={},this._preds[ne]={},this._out[ne]={},this._sucs[ne]={},++this._nodeCount,this)},Z.prototype.node=function(ne){return this._nodes[ne]},Z.prototype.hasNode=function(ne){return j.has(this._nodes,ne)},Z.prototype.removeNode=function(ne){var he=this;if(j.has(this._nodes,ne)){var Ne=function(le){he.removeEdge(he._edgeObjs[le])};delete this._nodes[ne],this._isCompound&&(this._removeFromParentsChildList(ne),delete this._parent[ne],j.each(this.children(ne),j.bind(function(le){this.setParent(le)},this)),delete this._children[ne]),j.each(j.keys(this._in[ne]),Ne),delete this._in[ne],delete this._preds[ne],j.each(j.keys(this._out[ne]),Ne),delete this._out[ne],delete this._sucs[ne],--this._nodeCount}return this},Z.prototype.setParent=function(ne,he){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(j.isUndefined(he))he=J;else{he+="";for(var Ne=he;!j.isUndefined(Ne);Ne=this.parent(Ne))if(Ne===ne)throw new Error("Setting "+he+" as parent of "+ne+" would create create a cycle");this.setNode(he)}return this.setNode(ne),this._removeFromParentsChildList(ne),this._parent[ne]=he,this._children[he][ne]=!0,this},Z.prototype._removeFromParentsChildList=function(ne){delete this._children[this._parent[ne]][ne]},Z.prototype.parent=function(ne){if(this._isCompound){var he=this._parent[ne];if(he!==J)return he}},Z.prototype.children=function(ne){if(j.isUndefined(ne)&&(ne=J),this._isCompound){var he=this._children[ne];if(he)return j.keys(he)}else{if(ne===J)return this.nodes();if(this.hasNode(ne))return[]}},Z.prototype.predecessors=function(ne){var he=this._preds[ne];if(he)return j.keys(he)},Z.prototype.successors=function(ne){var he=this._sucs[ne];if(he)return j.keys(he)},Z.prototype.neighbors=function(ne){var he=this.predecessors(ne);if(he)return j.union(he,this.successors(ne))},Z.prototype.isLeaf=function(ne){var he;return this.isDirected()?he=this.successors(ne):he=this.neighbors(ne),he.length===0},Z.prototype.filterNodes=function(ne){var he=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});he.setGraph(this.graph()),j.each(this._nodes,j.bind(function(se,ce){ne(ce)&&he.setNode(ce,se)},this)),j.each(this._edgeObjs,j.bind(function(se){he.hasNode(se.v)&&he.hasNode(se.w)&&he.setEdge(se,this.edge(se))},this));var Ne=this,le={};function be(se){var ce=Ne.parent(se);return ce===void 0||he.hasNode(ce)?(le[se]=ce,ce):ce in le?le[ce]:be(ce)}return this._isCompound&&j.each(he.nodes(),function(se){he.setParent(se,be(se))}),he},Z.prototype.setDefaultEdgeLabel=function(ne){return j.isFunction(ne)||(ne=j.constant(ne)),this._defaultEdgeLabelFn=ne,this},Z.prototype.edgeCount=function(){return this._edgeCount},Z.prototype.edges=function(){return j.values(this._edgeObjs)},Z.prototype.setPath=function(ne,he){var Ne=this,le=arguments;return j.reduce(ne,function(be,se){return le.length>1?Ne.setEdge(be,se,he):Ne.setEdge(be,se),se}),this},Z.prototype.setEdge=function(){var ne,he,Ne,le,be=!1,se=arguments[0];typeof se=="object"&&se!==null&&"v"in se?(ne=se.v,he=se.w,Ne=se.name,arguments.length===2&&(le=arguments[1],be=!0)):(ne=se,he=arguments[1],Ne=arguments[3],arguments.length>2&&(le=arguments[2],be=!0)),ne=""+ne,he=""+he,j.isUndefined(Ne)||(Ne=""+Ne);var ce=ue(this._isDirected,ne,he,Ne);if(j.has(this._edgeLabels,ce))return be&&(this._edgeLabels[ce]=le),this;if(!j.isUndefined(Ne)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(ne),this.setNode(he),this._edgeLabels[ce]=be?le:this._defaultEdgeLabelFn(ne,he,Ne);var fe=oe(this._isDirected,ne,he,Ne);return ne=fe.v,he=fe.w,Object.freeze(fe),this._edgeObjs[ce]=fe,ee(this._preds[he],ne),ee(this._sucs[ne],he),this._in[he][ce]=fe,this._out[ne][ce]=fe,this._edgeCount++,this},Z.prototype.edge=function(ne,he,Ne){var le=arguments.length===1?ie(this._isDirected,arguments[0]):ue(this._isDirected,ne,he,Ne);return this._edgeLabels[le]},Z.prototype.hasEdge=function(ne,he,Ne){var le=arguments.length===1?ie(this._isDirected,arguments[0]):ue(this._isDirected,ne,he,Ne);return j.has(this._edgeLabels,le)},Z.prototype.removeEdge=function(ne,he,Ne){var le=arguments.length===1?ie(this._isDirected,arguments[0]):ue(this._isDirected,ne,he,Ne),be=this._edgeObjs[le];return be&&(ne=be.v,he=be.w,delete this._edgeLabels[le],delete this._edgeObjs[le],Q(this._preds[he],ne),Q(this._sucs[ne],he),delete this._in[he][le],delete this._out[ne][le],this._edgeCount--),this},Z.prototype.inEdges=function(ne,he){var Ne=this._in[ne];if(Ne){var le=j.values(Ne);return he?j.filter(le,function(be){return be.v===he}):le}},Z.prototype.outEdges=function(ne,he){var Ne=this._out[ne];if(Ne){var le=j.values(Ne);return he?j.filter(le,function(be){return be.w===he}):le}},Z.prototype.nodeEdges=function(ne,he){var Ne=this.inEdges(ne,he);if(Ne)return Ne.concat(this.outEdges(ne,he))};function ee(ne,he){ne[he]?ne[he]++:ne[he]=1}function Q(ne,he){--ne[he]||delete ne[he]}function ue(ne,he,Ne,le){var be=""+he,se=""+Ne;if(!ne&&be>se){var ce=be;be=se,se=ce}return be+z+se+z+(j.isUndefined(le)?D:le)}function oe(ne,he,Ne,le){var be=""+he,se=""+Ne;if(!ne&&be>se){var ce=be;be=se,se=ce}var fe={v:be,w:se};return le&&(fe.name=le),fe}function ie(ne,he){return ue(ne,he.v,he.w,he.name)}},58579:function(De,L,M){De.exports={Graph:M(1053),version:M(82321)}},62485:function(De,L,M){var j=M(77163),D=M(1053);De.exports={write:J,read:ee};function J(Q){var ue={options:{directed:Q.isDirected(),multigraph:Q.isMultigraph(),compound:Q.isCompound()},nodes:z(Q),edges:Z(Q)};return j.isUndefined(Q.graph())||(ue.value=j.clone(Q.graph())),ue}function z(Q){return j.map(Q.nodes(),function(ue){var oe=Q.node(ue),ie=Q.parent(ue),ne={v:ue};return j.isUndefined(oe)||(ne.value=oe),j.isUndefined(ie)||(ne.parent=ie),ne})}function Z(Q){return j.map(Q.edges(),function(ue){var oe=Q.edge(ue),ie={v:ue.v,w:ue.w};return j.isUndefined(ue.name)||(ie.name=ue.name),j.isUndefined(oe)||(ie.value=oe),ie})}function ee(Q){var ue=new D(Q.options).setGraph(Q.value);return j.each(Q.nodes,function(oe){ue.setNode(oe.v,oe.value),oe.parent&&ue.setParent(oe.v,oe.parent)}),j.each(Q.edges,function(oe){ue.setEdge({v:oe.v,w:oe.w,name:oe.name},oe.value)}),ue}},77163:function(De,L,M){var j;try{j=M(96486)}catch(D){}j||(j=window._),De.exports=j},82321:function(De){De.exports="2.1.4"},70597:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var j=Object.assign||function(Q){for(var ue=1;ue<arguments.length;ue++){var oe=arguments[ue];for(var ie in oe)Object.prototype.hasOwnProperty.call(oe,ie)&&(Q[ie]=oe[ie])}return Q},D=M(67294),J=z(D);function z(Q){return Q&&Q.__esModule?Q:{default:Q}}function Z(Q,ue){var oe={};for(var ie in Q)ue.indexOf(ie)>=0||Object.prototype.hasOwnProperty.call(Q,ie)&&(oe[ie]=Q[ie]);return oe}var ee=24;L.default=function(Q){var ue=Q.fill,oe=ue===void 0?"currentColor":ue,ie=Q.width,ne=ie===void 0?ee:ie,he=Q.height,Ne=he===void 0?ee:he,le=Q.style,be=le===void 0?{}:le,se=Z(Q,["fill","width","height","style"]);return J.default.createElement("svg",j({viewBox:"0 0 "+ee+" "+ee,style:j({fill:oe,width:ne,height:Ne},be)},se),J.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},43891:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var j=Object.assign||function(Q){for(var ue=1;ue<arguments.length;ue++){var oe=arguments[ue];for(var ie in oe)Object.prototype.hasOwnProperty.call(oe,ie)&&(Q[ie]=oe[ie])}return Q},D=M(67294),J=z(D);function z(Q){return Q&&Q.__esModule?Q:{default:Q}}function Z(Q,ue){var oe={};for(var ie in Q)ue.indexOf(ie)>=0||Object.prototype.hasOwnProperty.call(Q,ie)&&(oe[ie]=Q[ie]);return oe}var ee=24;L.default=function(Q){var ue=Q.fill,oe=ue===void 0?"currentColor":ue,ie=Q.width,ne=ie===void 0?ee:ie,he=Q.height,Ne=he===void 0?ee:he,le=Q.style,be=le===void 0?{}:le,se=Z(Q,["fill","width","height","style"]);return J.default.createElement("svg",j({viewBox:"0 0 "+ee+" "+ee,style:j({fill:oe,width:ne,height:Ne},be)},se),J.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},70781:function(){"use strict"},63808:function(){"use strict"},49469:function(De,L){"use strict";var M;M={value:!0};var j;(function(Pe){Pe.TextureCompressionBC="texture-compression-bc"})(j=L.UX||(L.UX={}));var D;(function(Pe){Pe.ClampToEdge="clamp-to-edge",Pe.Repeat="repeat",Pe.MirrorRepeat="mirror-repeat"})(D=L.OB||(L.OB={}));var J;(function(Pe){Pe.UniformBuffer="uniform-buffer",Pe.StorageBuffer="storage-buffer",Pe.ReadonlyStorageBuffer="readonly-storage-buffer",Pe.Sampler="sampler",Pe.ComparisonSampler="comparison-sampler",Pe.SampledTexture="sampled-texture",Pe.ReadonlyStorageTexture="readonly-storage-texture",Pe.WriteonlyStorageTexture="writeonly-storage-texture"})(J=L.$l||(L.$l={}));var z;(function(Pe){Pe.Zero="zero",Pe.One="one",Pe.SrcColor="src-color",Pe.OneMinusSrcColor="one-minus-src-color",Pe.SrcAlpha="src-alpha",Pe.OneMinusSrcAlpha="one-minus-src-alpha",Pe.DstColor="dst-color",Pe.OneMinusDstColor="one-minus-dst-color",Pe.DstAlpha="dst-alpha",Pe.OneMinusDstAlpha="one-minus-dst-alpha",Pe.SrcAlphaSaturated="src-alpha-saturated",Pe.BlendColor="blend-color",Pe.OneMinusBlendColor="one-minus-blend-color"})(z=L.zi||(L.zi={}));var Z;(function(Pe){Pe.Add="add",Pe.Subtract="subtract",Pe.ReverseSubtract="reverse-subtract",Pe.Min="min",Pe.Max="max"})(Z=L.db||(L.db={}));var ee;(function(Pe){Pe.Never="never",Pe.Less="less",Pe.Equal="equal",Pe.LessEqual="less-equal",Pe.Greater="greater",Pe.NotEqual="not-equal",Pe.GreaterEqual="greater-equal",Pe.Always="always"})(ee=L.wb||(L.wb={}));var Q;(function(Pe){Pe.None="none",Pe.Front="front",Pe.Back="back"})(Q=L.Wf||(L.Wf={}));var ue;(function(Pe){Pe.Nearest="nearest",Pe.Linear="linear"})(ue=L.X9||(L.X9={}));var oe;(function(Pe){Pe.CCW="ccw",Pe.CW="cw"})(oe=L.zX||(L.zX={}));var ie;(function(Pe){Pe.Uint16="uint16",Pe.Uint32="uint32"})(ie=L.iD||(L.iD={}));var ne;(function(Pe){Pe.Vertex="vertex",Pe.Instance="instance"})(ne=L.V||(L.V={}));var he;(function(Pe){Pe.Load="load"})(he=L.Ws||(L.Ws={}));var Ne;(function(Pe){Pe.PointList="point-list",Pe.LineList="line-list",Pe.LineStrip="line-strip",Pe.TriangleList="triangle-list",Pe.TriangleStrip="triangle-strip"})(Ne=L.YV||(L.YV={}));var le;(function(Pe){Pe.Keep="keep",Pe.Zero="zero",Pe.Replace="replace",Pe.Invert="invert",Pe.IncrementClamp="increment-clamp",Pe.DecrementClamp="decrement-clamp",Pe.IncrementWrap="increment-wrap",Pe.DecrementWrap="decrement-wrap"})(le=L.xS||(L.xS={}));var be;(function(Pe){Pe.Store="store",Pe.Clear="clear"})(be=L.EG||(L.EG={}));var se;(function(Pe){Pe.E1d="1d",Pe.E2d="2d",Pe.E3d="3d"})(se=L.kd||(L.kd={}));var ce;(function(Pe){Pe.R8Unorm="r8unorm",Pe.R8Snorm="r8snorm",Pe.R8Uint="r8uint",Pe.R8Sint="r8sint",Pe.R16Uint="r16uint",Pe.R16Sint="r16sint",Pe.R16Float="r16float",Pe.RG8Unorm="rg8unorm",Pe.RG8Snorm="rg8snorm",Pe.RG8Uint="rg8uint",Pe.RG8Sint="rg8sint",Pe.R32Uint="r32uint",Pe.R32Sint="r32sint",Pe.R32Float="r32float",Pe.RG16Uint="rg16uint",Pe.RG16Sint="rg16sint",Pe.RG16Float="rg16float",Pe.RGBA8Unorm="rgba8unorm",Pe.RGBA8UnormSRGB="rgba8unorm-srgb",Pe.RGBA8Snorm="rgba8snorm",Pe.RGBA8Uint="rgba8uint",Pe.RGBA8Sint="rgba8sint",Pe.BGRA8Unorm="bgra8unorm",Pe.BGRA8UnormSRGB="bgra8unorm-srgb",Pe.RGB10A2Unorm="rgb10a2unorm",Pe.RG11B10Float="rg11b10float",Pe.RG32Uint="rg32uint",Pe.RG32Sint="rg32sint",Pe.RG32Float="rg32float",Pe.RGBA16Uint="rgba16uint",Pe.RGBA16Sint="rgba16sint",Pe.RGBA16Float="rgba16float",Pe.RGBA32Uint="rgba32uint",Pe.RGBA32Sint="rgba32sint",Pe.RGBA32Float="rgba32float",Pe.Depth32Float="depth32float",Pe.Depth24Plus="depth24plus",Pe.Depth24PlusStencil8="depth24plus-stencil8"})(ce=L.EV||(L.EV={}));var fe;(function(Pe){Pe.Float="float",Pe.Sint="sint",Pe.Uint="uint"})(fe=L.Ek||(L.Ek={}));var we;(function(Pe){Pe.E1d="1d",Pe.E2d="2d",Pe.E2dArray="2d-array",Pe.Cube="cube",Pe.CubeArray="cube-array",Pe.E3d="3d"})(we=L.p_||(L.p_={}));var pe;(function(Pe){Pe.Uchar2="uchar2",Pe.Uchar4="uchar4",Pe.Char2="char2",Pe.Char4="char4",Pe.Uchar2Norm="uchar2norm",Pe.Uchar4Norm="uchar4norm",Pe.Char2Norm="char2norm",Pe.Char4Norm="char4norm",Pe.Ushort2="ushort2",Pe.Ushort4="ushort4",Pe.Short2="short2",Pe.Short4="short4",Pe.Ushort2Norm="ushort2norm",Pe.Ushort4Norm="ushort4norm",Pe.Short2Norm="short2norm",Pe.Short4Norm="short4norm",Pe.Half2="half2",Pe.Half4="half4",Pe.Float="float",Pe.Float2="float2",Pe.Float3="float3",Pe.Float4="float4",Pe.Uint="uint",Pe.Uint2="uint2",Pe.Uint3="uint3",Pe.Uint4="uint4",Pe.Int="int",Pe.Int2="int2",Pe.Int3="int3",Pe.Int4="int4"})(pe=L.gB||(L.gB={}));var Ee;(function(Pe){Pe.All="all",Pe.StencilOnly="stencil-only",Pe.DepthOnly="depth-only"})(Ee=L.H7||(L.H7={}));var it;(function(Pe){Pe.Error="error",Pe.Warning="warning",Pe.Info="info"})(it=L.mj||(L.mj={}));var G;(function(Pe){Pe.Occlusion="occlusion"})(G=L.xL||(L.xL={}));var Be;(function(Pe){Pe[Pe.MapRead=1]="MapRead",Pe[Pe.MapWrite=2]="MapWrite",Pe[Pe.CopySrc=4]="CopySrc",Pe[Pe.CopyDst=8]="CopyDst",Pe[Pe.Index=16]="Index",Pe[Pe.Vertex=32]="Vertex",Pe[Pe.Uniform=64]="Uniform",Pe[Pe.Storage=128]="Storage",Pe[Pe.Indirect=256]="Indirect",Pe[Pe.QueryResolve=512]="QueryResolve"})(Be=L.FB||(L.FB={}));var Ke;(function(Pe){Pe[Pe.Red=1]="Red",Pe[Pe.Green=2]="Green",Pe[Pe.Blue=4]="Blue",Pe[Pe.Alpha=8]="Alpha",Pe[Pe.All=15]="All"})(Ke=L.Yw||(L.Yw={}));var dt;(function(Pe){Pe[Pe.Vertex=1]="Vertex",Pe[Pe.Fragment=2]="Fragment",Pe[Pe.Compute=4]="Compute"})(dt=L.$X||(L.$X={}));var jt;(function(Pe){Pe[Pe.CopySrc=1]="CopySrc",Pe[Pe.CopyDst=2]="CopyDst",Pe[Pe.Sampled=4]="Sampled",Pe[Pe.Storage=8]="Storage",Pe[Pe.OutputAttachment=16]="OutputAttachment"})(jt=L.v2||(L.v2={}));var mn;(function(Pe){Pe[Pe.Read=1]="Read",Pe[Pe.Write=2]="Write"})(mn=L.gc||(L.gc={}))},89550:function(De){De.exports=L;function L(M,j,D){return M[0]=j[0]+D[0],M[1]=j[1]+D[1],M}},62189:function(De){De.exports=L;function L(M,j){return M[0]=Math.ceil(j[0]),M[1]=Math.ceil(j[1]),M}},76057:function(De){De.exports=L;function L(M){var j=new Float32Array(2);return j[0]=M[0],j[1]=M[1],j}},3492:function(De){De.exports=L;function L(M,j){return M[0]=j[0],M[1]=j[1],M}},61589:function(De){De.exports=L;function L(){var M=new Float32Array(2);return M[0]=0,M[1]=0,M}},77741:function(De){De.exports=L;function L(M,j,D){var J=j[0]*D[1]-j[1]*D[0];return M[0]=M[1]=0,M[2]=J,M}},80278:function(De,L,M){De.exports=M(27953)},27953:function(De){De.exports=L;function L(M,j){var D=j[0]-M[0],J=j[1]-M[1];return Math.sqrt(D*D+J*J)}},49973:function(De,L,M){De.exports=M(6773)},6773:function(De){De.exports=L;function L(M,j,D){return M[0]=j[0]/D[0],M[1]=j[1]/D[1],M}},56601:function(De){De.exports=L;function L(M,j){return M[0]*j[0]+M[1]*j[1]}},89936:function(De){De.exports=1e-6},51232:function(De,L,M){De.exports=D;var j=M(89936);function D(J,z){var Z=J[0],ee=J[1],Q=z[0],ue=z[1];return Math.abs(Z-Q)<=j*Math.max(1,Math.abs(Z),Math.abs(Q))&&Math.abs(ee-ue)<=j*Math.max(1,Math.abs(ee),Math.abs(ue))}},39546:function(De){De.exports=L;function L(M,j){return M[0]===j[0]&&M[1]===j[1]}},67744:function(De){De.exports=L;function L(M,j){return M[0]=Math.floor(j[0]),M[1]=Math.floor(j[1]),M}},49002:function(De,L,M){De.exports=D;var j=M(61589)();function D(J,z,Z,ee,Q,ue){var oe,ie;for(z||(z=2),Z||(Z=0),ee?ie=Math.min(ee*z+Z,J.length):ie=J.length,oe=Z;oe<ie;oe+=z)j[0]=J[oe],j[1]=J[oe+1],Q(j,j,ue),J[oe]=j[0],J[oe+1]=j[1];return J}},69878:function(De){De.exports=L;function L(M,j){var D=new Float32Array(2);return D[0]=M,D[1]=j,D}},32644:function(De,L,M){De.exports={EPSILON:M(89936),create:M(61589),clone:M(76057),fromValues:M(69878),copy:M(3492),set:M(68854),equals:M(51232),exactEquals:M(39546),add:M(89550),subtract:M(43650),sub:M(45222),multiply:M(79920),mul:M(23113),divide:M(6773),div:M(49973),inverse:M(83793),min:M(20676),max:M(97899),rotate:M(48677),floor:M(67744),ceil:M(62189),round:M(57074),scale:M(47838),scaleAndAdd:M(21066),distance:M(27953),dist:M(80278),squaredDistance:M(14290),sqrDist:M(79569),length:M(37781),len:M(8123),squaredLength:M(26791),sqrLen:M(1791),negate:M(90549),normalize:M(36820),dot:M(56601),cross:M(77741),lerp:M(20577),random:M(85773),transformMat2:M(904),transformMat2d:M(60736),transformMat3:M(60221),transformMat4:M(37674),forEach:M(49002),limit:M(82418)}},83793:function(De){De.exports=L;function L(M,j){return M[0]=1/j[0],M[1]=1/j[1],M}},8123:function(De,L,M){De.exports=M(37781)},37781:function(De){De.exports=L;function L(M){var j=M[0],D=M[1];return Math.sqrt(j*j+D*D)}},20577:function(De){De.exports=L;function L(M,j,D,J){var z=j[0],Z=j[1];return M[0]=z+J*(D[0]-z),M[1]=Z+J*(D[1]-Z),M}},82418:function(De){De.exports=L;function L(M,j,D){var J=j[0]*j[0]+j[1]*j[1];if(J>D*D){var z=Math.sqrt(J);M[0]=j[0]/z*D,M[1]=j[1]/z*D}else M[0]=j[0],M[1]=j[1];return M}},97899:function(De){De.exports=L;function L(M,j,D){return M[0]=Math.max(j[0],D[0]),M[1]=Math.max(j[1],D[1]),M}},20676:function(De){De.exports=L;function L(M,j,D){return M[0]=Math.min(j[0],D[0]),M[1]=Math.min(j[1],D[1]),M}},23113:function(De,L,M){De.exports=M(79920)},79920:function(De){De.exports=L;function L(M,j,D){return M[0]=j[0]*D[0],M[1]=j[1]*D[1],M}},90549:function(De){De.exports=L;function L(M,j){return M[0]=-j[0],M[1]=-j[1],M}},36820:function(De){De.exports=L;function L(M,j){var D=j[0],J=j[1],z=D*D+J*J;return z>0&&(z=1/Math.sqrt(z),M[0]=j[0]*z,M[1]=j[1]*z),M}},85773:function(De){De.exports=L;function L(M,j){j=j||1;var D=Math.random()*2*Math.PI;return M[0]=Math.cos(D)*j,M[1]=Math.sin(D)*j,M}},48677:function(De){De.exports=L;function L(M,j,D){var J=Math.cos(D),z=Math.sin(D),Z=j[0],ee=j[1];return M[0]=Z*J-ee*z,M[1]=Z*z+ee*J,M}},57074:function(De){De.exports=L;function L(M,j){return M[0]=Math.round(j[0]),M[1]=Math.round(j[1]),M}},47838:function(De){De.exports=L;function L(M,j,D){return M[0]=j[0]*D,M[1]=j[1]*D,M}},21066:function(De){De.exports=L;function L(M,j,D,J){return M[0]=j[0]+D[0]*J,M[1]=j[1]+D[1]*J,M}},68854:function(De){De.exports=L;function L(M,j,D){return M[0]=j,M[1]=D,M}},79569:function(De,L,M){De.exports=M(14290)},1791:function(De,L,M){De.exports=M(26791)},14290:function(De){De.exports=L;function L(M,j){var D=j[0]-M[0],J=j[1]-M[1];return D*D+J*J}},26791:function(De){De.exports=L;function L(M){var j=M[0],D=M[1];return j*j+D*D}},45222:function(De,L,M){De.exports=M(43650)},43650:function(De){De.exports=L;function L(M,j,D){return M[0]=j[0]-D[0],M[1]=j[1]-D[1],M}},904:function(De){De.exports=L;function L(M,j,D){var J=j[0],z=j[1];return M[0]=D[0]*J+D[2]*z,M[1]=D[1]*J+D[3]*z,M}},60736:function(De){De.exports=L;function L(M,j,D){var J=j[0],z=j[1];return M[0]=D[0]*J+D[2]*z+D[4],M[1]=D[1]*J+D[3]*z+D[5],M}},60221:function(De){De.exports=L;function L(M,j,D){var J=j[0],z=j[1];return M[0]=D[0]*J+D[3]*z+D[6],M[1]=D[1]*J+D[4]*z+D[7],M}},37674:function(De){De.exports=L;function L(M,j,D){var J=j[0],z=j[1];return M[0]=D[0]*J+D[4]*z+D[12],M[1]=D[1]*J+D[5]*z+D[13],M}},7375:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M=Symbol.for("INJECTION");function j(ee,Q,ue,oe){function ie(){return oe&&!Reflect.hasMetadata(M,this,Q)&&Reflect.defineMetadata(M,ue(),this,Q),Reflect.hasMetadata(M,this,Q)?Reflect.getMetadata(M,this,Q):ue()}function ne(he){Reflect.defineMetadata(M,he,this,Q)}Object.defineProperty(ee,Q,{configurable:!0,enumerable:!0,get:ie,set:ne})}function D(ee,Q){return function(ue){return function(oe,ie){var ne=function(){return ee.get(ue)};j(oe,ie,ne,Q)}}}L.makePropertyInjectDecorator=D;function J(ee,Q){return function(ue,oe){return function(ie,ne){var he=function(){return ee.getNamed(ue,oe)};j(ie,ne,he,Q)}}}L.makePropertyInjectNamedDecorator=J;function z(ee,Q){return function(ue,oe,ie){return function(ne,he){var Ne=function(){return ee.getTagged(ue,oe,ie)};j(ne,he,Ne,Q)}}}L.makePropertyInjectTaggedDecorator=z;function Z(ee,Q){return function(ue){return function(oe,ie){var ne=function(){return ee.getAll(ue)};j(oe,ie,ne,Q)}}}L.makePropertyMultiInjectDecorator=Z},84879:function(De,L,M){"use strict";var j;j={value:!0};var D=M(7375);function J(z,Z){Z===void 0&&(Z=!0);var ee=D.makePropertyInjectDecorator(z,Z),Q=D.makePropertyInjectNamedDecorator(z,Z),ue=D.makePropertyInjectTaggedDecorator(z,Z),oe=D.makePropertyMultiInjectDecorator(z,Z);return{lazyInject:ee,lazyInjectNamed:Q,lazyInjectTagged:ue,lazyMultiInject:oe}}L.Z=J},99934:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.tagProperty=L.tagParameter=L.decorate=void 0;var j=M(16674),D=M(6867);function J(oe,ie,ne,he){var Ne=D.TAGGED;Z(Ne,oe,ie,he,ne)}L.tagParameter=J;function z(oe,ie,ne){var he=D.TAGGED_PROP;Z(he,oe.constructor,ie,ne)}L.tagProperty=z;function Z(oe,ie,ne,he,Ne){var le={},be=typeof Ne=="number",se=Ne!==void 0&&be?Ne.toString():ne;if(be&&ne!==void 0)throw new Error(j.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(oe,ie)&&(le=Reflect.getMetadata(oe,ie));var ce=le[se];if(!Array.isArray(ce))ce=[];else for(var fe=0,we=ce;fe<we.length;fe++){var pe=we[fe];if(pe.key===he.key)throw new Error(j.DUPLICATED_METADATA+" "+pe.key.toString())}ce.push(he),le[se]=ce,Reflect.defineMetadata(oe,le,ie)}function ee(oe,ie){Reflect.decorate(oe,ie)}function Q(oe,ie){return function(ne,he){ie(ne,he,oe)}}function ue(oe,ie,ne){typeof ne=="number"?ee([Q(ne,oe)],ie):typeof ne=="string"?Reflect.decorate([oe],ie,ne):ee([oe],ie)}L.decorate=ue},5744:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.inject=L.LazyServiceIdentifer=void 0;var j=M(16674),D=M(6867),J=M(47738),z=M(99934),Z=function(){function Q(ue){this._cb=ue}return Q.prototype.unwrap=function(){return this._cb()},Q}();L.LazyServiceIdentifer=Z;function ee(Q){return function(ue,oe,ie){if(Q===void 0)throw new Error(j.UNDEFINED_INJECT_ANNOTATION(ue.name));var ne=new J.Metadata(D.INJECT_TAG,Q);typeof ie=="number"?z.tagParameter(ue,oe,ie,ne):z.tagProperty(ue,oe,ne)}}L.inject=ee},64315:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.injectable=void 0;var j=M(16674),D=M(6867);function J(){return function(z){if(Reflect.hasOwnMetadata(D.PARAM_TYPES,z))throw new Error(j.DUPLICATED_INJECTABLE_DECORATOR);var Z=Reflect.getMetadata(D.DESIGN_PARAM_TYPES,z)||[];return Reflect.defineMetadata(D.PARAM_TYPES,Z,z),z}}L.injectable=J},71693:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.multiInject=void 0;var j=M(6867),D=M(47738),J=M(99934);function z(Z){return function(ee,Q,ue){var oe=new D.Metadata(j.MULTI_INJECT_TAG,Z);typeof ue=="number"?J.tagParameter(ee,Q,ue,oe):J.tagProperty(ee,Q,oe)}}L.multiInject=z},38085:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.named=void 0;var j=M(6867),D=M(47738),J=M(99934);function z(Z){return function(ee,Q,ue){var oe=new D.Metadata(j.NAMED_TAG,Z);typeof ue=="number"?J.tagParameter(ee,Q,ue,oe):J.tagProperty(ee,Q,oe)}}L.named=z},6515:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.optional=void 0;var j=M(6867),D=M(47738),J=M(99934);function z(){return function(Z,ee,Q){var ue=new D.Metadata(j.OPTIONAL_TAG,!0);typeof Q=="number"?J.tagParameter(Z,ee,Q,ue):J.tagProperty(Z,ee,ue)}}L.optional=z},7014:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.postConstruct=void 0;var j=M(16674),D=M(6867),J=M(47738);function z(){return function(Z,ee,Q){var ue=new J.Metadata(D.POST_CONSTRUCT,ee);if(Reflect.hasOwnMetadata(D.POST_CONSTRUCT,Z.constructor))throw new Error(j.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(D.POST_CONSTRUCT,ue,Z.constructor)}}L.postConstruct=z},32052:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.tagged=void 0;var j=M(47738),D=M(99934);function J(z,Z){return function(ee,Q,ue){var oe=new j.Metadata(z,Z);typeof ue=="number"?D.tagParameter(ee,Q,ue,oe):D.tagProperty(ee,Q,oe)}}L.tagged=J},55638:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.targetName=void 0;var j=M(6867),D=M(47738),J=M(99934);function z(Z){return function(ee,Q,ue){var oe=new D.Metadata(j.NAME_TAG,Z);J.tagParameter(ee,Q,ue,oe)}}L.targetName=z},86757:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.unmanaged=void 0;var j=M(6867),D=M(47738),J=M(99934);function z(){return function(Z,ee,Q){var ue=new D.Metadata(j.UNMANAGED_TAG,!0);J.tagParameter(Z,ee,Q,ue)}}L.unmanaged=z},44290:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Binding=void 0;var j=M(28421),D=M(37791),J=function(){function z(Z,ee){this.id=D.id(),this.activated=!1,this.serviceIdentifier=Z,this.scope=ee,this.type=j.BindingTypeEnum.Invalid,this.constraint=function(Q){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return z.prototype.clone=function(){var Z=new z(this.serviceIdentifier,this.scope);return Z.activated=Z.scope===j.BindingScopeEnum.Singleton?this.activated:!1,Z.implementationType=this.implementationType,Z.dynamicValue=this.dynamicValue,Z.scope=this.scope,Z.type=this.type,Z.factory=this.factory,Z.provider=this.provider,Z.constraint=this.constraint,Z.onActivation=this.onActivation,Z.cache=this.cache,Z},z}();L.Binding=J},23184:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingCount=void 0;var M={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};L.BindingCount=M},16674:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.STACK_OVERFLOW=L.CIRCULAR_DEPENDENCY_IN_FACTORY=L.POST_CONSTRUCT_ERROR=L.MULTIPLE_POST_CONSTRUCT_METHODS=L.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=L.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=L.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=L.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=L.ARGUMENTS_LENGTH_MISMATCH=L.INVALID_DECORATOR_OPERATION=L.INVALID_TO_SELF_VALUE=L.INVALID_FUNCTION_BINDING=L.INVALID_MIDDLEWARE_RETURN=L.NO_MORE_SNAPSHOTS_AVAILABLE=L.INVALID_BINDING_TYPE=L.NOT_IMPLEMENTED=L.CIRCULAR_DEPENDENCY=L.UNDEFINED_INJECT_ANNOTATION=L.MISSING_INJECT_ANNOTATION=L.MISSING_INJECTABLE_ANNOTATION=L.NOT_REGISTERED=L.CANNOT_UNBIND=L.AMBIGUOUS_MATCH=L.KEY_NOT_FOUND=L.NULL_ARGUMENT=L.DUPLICATED_METADATA=L.DUPLICATED_INJECTABLE_DECORATOR=void 0,L.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",L.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",L.NULL_ARGUMENT="NULL argument",L.KEY_NOT_FOUND="Key Not Found",L.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",L.CANNOT_UNBIND="Could not unbind serviceIdentifier:",L.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",L.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",L.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var M=function(z){return"@inject called with undefined this could mean that the class "+z+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};L.UNDEFINED_INJECT_ANNOTATION=M,L.CIRCULAR_DEPENDENCY="Circular dependency found:",L.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",L.INVALID_BINDING_TYPE="Invalid binding type:",L.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",L.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",L.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",L.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",L.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var j=function(){for(var z=[],Z=0;Z<arguments.length;Z++)z[Z]=arguments[Z];return"The number of constructor arguments in the derived class "+(z[0]+" must be >= than the number of constructor arguments of its base class.")};L.ARGUMENTS_LENGTH_MISMATCH=j,L.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",L.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",L.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",L.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",L.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var D=function(){for(var z=[],Z=0;Z<arguments.length;Z++)z[Z]=arguments[Z];return"@postConstruct error in class "+z[0]+": "+z[1]};L.POST_CONSTRUCT_ERROR=D;var J=function(){for(var z=[],Z=0;Z<arguments.length;Z++)z[Z]=arguments[Z];return"It looks like there is a circular dependency "+("in one of the '"+z[0]+"' bindings. Please investigate bindings with")+("service identifier '"+z[1]+"'.")};L.CIRCULAR_DEPENDENCY_IN_FACTORY=J,L.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.TargetTypeEnum=L.BindingTypeEnum=L.BindingScopeEnum=void 0;var M={Request:"Request",Singleton:"Singleton",Transient:"Transient"};L.BindingScopeEnum=M;var j={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};L.BindingTypeEnum=j;var D={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};L.TargetTypeEnum=D},6867:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.NON_CUSTOM_TAG_KEYS=L.POST_CONSTRUCT=L.DESIGN_PARAM_TYPES=L.PARAM_TYPES=L.TAGGED_PROP=L.TAGGED=L.MULTI_INJECT_TAG=L.INJECT_TAG=L.OPTIONAL_TAG=L.UNMANAGED_TAG=L.NAME_TAG=L.NAMED_TAG=void 0,L.NAMED_TAG="named",L.NAME_TAG="name",L.UNMANAGED_TAG="unmanaged",L.OPTIONAL_TAG="optional",L.INJECT_TAG="inject",L.MULTI_INJECT_TAG="multi_inject",L.TAGGED="inversify:tagged",L.TAGGED_PROP="inversify:tagged_props",L.PARAM_TYPES="inversify:paramtypes",L.DESIGN_PARAM_TYPES="design:paramtypes",L.POST_CONSTRUCT="post_construct";function M(){return[L.INJECT_TAG,L.MULTI_INJECT_TAG,L.NAME_TAG,L.UNMANAGED_TAG,L.NAMED_TAG,L.OPTIONAL_TAG]}L.NON_CUSTOM_TAG_KEYS=M()},51389:function(De,L,M){"use strict";var j=this&&this.__awaiter||function(ce,fe,we,pe){function Ee(it){return it instanceof we?it:new we(function(G){G(it)})}return new(we||(we=Promise))(function(it,G){function Be(jt){try{dt(pe.next(jt))}catch(mn){G(mn)}}function Ke(jt){try{dt(pe.throw(jt))}catch(mn){G(mn)}}function dt(jt){jt.done?it(jt.value):Ee(jt.value).then(Be,Ke)}dt((pe=pe.apply(ce,fe||[])).next())})},D=this&&this.__generator||function(ce,fe){var we={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},pe,Ee,it,G;return G={next:Be(0),throw:Be(1),return:Be(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function Be(dt){return function(jt){return Ke([dt,jt])}}function Ke(dt){if(pe)throw new TypeError("Generator is already executing.");for(;we;)try{if(pe=1,Ee&&(it=dt[0]&2?Ee.return:dt[0]?Ee.throw||((it=Ee.return)&&it.call(Ee),0):Ee.next)&&!(it=it.call(Ee,dt[1])).done)return it;switch(Ee=0,it&&(dt=[dt[0]&2,it.value]),dt[0]){case 0:case 1:it=dt;break;case 4:return we.label++,{value:dt[1],done:!1};case 5:we.label++,Ee=dt[1],dt=[0];continue;case 7:dt=we.ops.pop(),we.trys.pop();continue;default:if(it=we.trys,!(it=it.length>0&&it[it.length-1])&&(dt[0]===6||dt[0]===2)){we=0;continue}if(dt[0]===3&&(!it||dt[1]>it[0]&&dt[1]<it[3])){we.label=dt[1];break}if(dt[0]===6&&we.label<it[1]){we.label=it[1],it=dt;break}if(it&&we.label<it[2]){we.label=it[2],we.ops.push(dt);break}it[2]&&we.ops.pop(),we.trys.pop();continue}dt=fe.call(ce,we)}catch(jt){dt=[6,jt],Ee=0}finally{pe=it=0}if(dt[0]&5)throw dt[1];return{value:dt[0]?dt[1]:void 0,done:!0}}},J=this&&this.__spreadArray||function(ce,fe){for(var we=0,pe=fe.length,Ee=ce.length;we<pe;we++,Ee++)ce[Ee]=fe[we];return ce};Object.defineProperty(L,"__esModule",{value:!0}),L.Container=void 0;var z=M(44290),Z=M(16674),ee=M(28421),Q=M(6867),ue=M(51377),oe=M(86311),ie=M(31927),ne=M(51860),he=M(37791),Ne=M(55800),le=M(85700),be=M(80175),se=function(){function ce(fe){this._appliedMiddleware=[];var we=fe||{};if(typeof we!="object")throw new Error(""+Z.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(we.defaultScope===void 0)we.defaultScope=ee.BindingScopeEnum.Transient;else if(we.defaultScope!==ee.BindingScopeEnum.Singleton&&we.defaultScope!==ee.BindingScopeEnum.Transient&&we.defaultScope!==ee.BindingScopeEnum.Request)throw new Error(""+Z.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(we.autoBindInjectable===void 0)we.autoBindInjectable=!1;else if(typeof we.autoBindInjectable!="boolean")throw new Error(""+Z.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(we.skipBaseClassChecks===void 0)we.skipBaseClassChecks=!1;else if(typeof we.skipBaseClassChecks!="boolean")throw new Error(""+Z.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:we.autoBindInjectable,defaultScope:we.defaultScope,skipBaseClassChecks:we.skipBaseClassChecks},this.id=he.id(),this._bindingDictionary=new be.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new ue.MetadataReader}return ce.merge=function(fe,we){for(var pe=[],Ee=2;Ee<arguments.length;Ee++)pe[Ee-2]=arguments[Ee];var it=new ce,G=J([fe,we],pe).map(function(dt){return oe.getBindingDictionary(dt)}),Be=oe.getBindingDictionary(it);function Ke(dt,jt){dt.traverse(function(mn,Pe){Pe.forEach(function(In){jt.add(In.serviceIdentifier,In.clone())})})}return G.forEach(function(dt){Ke(dt,Be)}),it},ce.prototype.load=function(){for(var fe=[],we=0;we<arguments.length;we++)fe[we]=arguments[we];for(var pe=this._getContainerModuleHelpersFactory(),Ee=0,it=fe;Ee<it.length;Ee++){var G=it[Ee],Be=pe(G.id);G.registry(Be.bindFunction,Be.unbindFunction,Be.isboundFunction,Be.rebindFunction)}},ce.prototype.loadAsync=function(){for(var fe=[],we=0;we<arguments.length;we++)fe[we]=arguments[we];return j(this,void 0,void 0,function(){var pe,Ee,it,G,Be;return D(this,function(Ke){switch(Ke.label){case 0:pe=this._getContainerModuleHelpersFactory(),Ee=0,it=fe,Ke.label=1;case 1:return Ee<it.length?(G=it[Ee],Be=pe(G.id),[4,G.registry(Be.bindFunction,Be.unbindFunction,Be.isboundFunction,Be.rebindFunction)]):[3,4];case 2:Ke.sent(),Ke.label=3;case 3:return Ee++,[3,1];case 4:return[2]}})})},ce.prototype.unload=function(){for(var fe=this,we=[],pe=0;pe<arguments.length;pe++)we[pe]=arguments[pe];var Ee=function(it){return function(G){return G.moduleId===it}};we.forEach(function(it){var G=Ee(it.id);fe._bindingDictionary.removeByCondition(G)})},ce.prototype.bind=function(fe){var we=this.options.defaultScope||ee.BindingScopeEnum.Transient,pe=new z.Binding(fe,we);return this._bindingDictionary.add(fe,pe),new ne.BindingToSyntax(pe)},ce.prototype.rebind=function(fe){return this.unbind(fe),this.bind(fe)},ce.prototype.unbind=function(fe){try{this._bindingDictionary.remove(fe)}catch(we){throw new Error(Z.CANNOT_UNBIND+" "+Ne.getServiceIdentifierAsString(fe))}},ce.prototype.unbindAll=function(){this._bindingDictionary=new be.Lookup},ce.prototype.isBound=function(fe){var we=this._bindingDictionary.hasKey(fe);return!we&&this.parent&&(we=this.parent.isBound(fe)),we},ce.prototype.isBoundNamed=function(fe,we){return this.isBoundTagged(fe,Q.NAMED_TAG,we)},ce.prototype.isBoundTagged=function(fe,we,pe){var Ee=!1;if(this._bindingDictionary.hasKey(fe)){var it=this._bindingDictionary.get(fe),G=oe.createMockRequest(this,fe,we,pe);Ee=it.some(function(Be){return Be.constraint(G)})}return!Ee&&this.parent&&(Ee=this.parent.isBoundTagged(fe,we,pe)),Ee},ce.prototype.snapshot=function(){this._snapshots.push(le.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},ce.prototype.restore=function(){var fe=this._snapshots.pop();if(fe===void 0)throw new Error(Z.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=fe.bindings,this._middleware=fe.middleware},ce.prototype.createChild=function(fe){var we=new ce(fe||this.options);return we.parent=this,we},ce.prototype.applyMiddleware=function(){for(var fe=[],we=0;we<arguments.length;we++)fe[we]=arguments[we];this._appliedMiddleware=this._appliedMiddleware.concat(fe);var pe=this._middleware?this._middleware:this._planAndResolve();this._middleware=fe.reduce(function(Ee,it){return it(Ee)},pe)},ce.prototype.applyCustomMetadataReader=function(fe){this._metadataReader=fe},ce.prototype.get=function(fe){return this._get(!1,!1,ee.TargetTypeEnum.Variable,fe)},ce.prototype.getTagged=function(fe,we,pe){return this._get(!1,!1,ee.TargetTypeEnum.Variable,fe,we,pe)},ce.prototype.getNamed=function(fe,we){return this.getTagged(fe,Q.NAMED_TAG,we)},ce.prototype.getAll=function(fe){return this._get(!0,!0,ee.TargetTypeEnum.Variable,fe)},ce.prototype.getAllTagged=function(fe,we,pe){return this._get(!1,!0,ee.TargetTypeEnum.Variable,fe,we,pe)},ce.prototype.getAllNamed=function(fe,we){return this.getAllTagged(fe,Q.NAMED_TAG,we)},ce.prototype.resolve=function(fe){var we=this.createChild();return we.bind(fe).toSelf(),this._appliedMiddleware.forEach(function(pe){we.applyMiddleware(pe)}),we.get(fe)},ce.prototype._getContainerModuleHelpersFactory=function(){var fe=this,we=function(Be,Ke){Be._binding.moduleId=Ke},pe=function(Be){return function(Ke){var dt=fe.bind.bind(fe),jt=dt(Ke);return we(jt,Be),jt}},Ee=function(Be){return function(Ke){var dt=fe.unbind.bind(fe);dt(Ke)}},it=function(Be){return function(Ke){var dt=fe.isBound.bind(fe);return dt(Ke)}},G=function(Be){return function(Ke){var dt=fe.rebind.bind(fe),jt=dt(Ke);return we(jt,Be),jt}};return function(Be){return{bindFunction:pe(Be),isboundFunction:it(Be),rebindFunction:G(Be),unbindFunction:Ee(Be)}}},ce.prototype._get=function(fe,we,pe,Ee,it,G){var Be=null,Ke={avoidConstraints:fe,contextInterceptor:function(dt){return dt},isMultiInject:we,key:it,serviceIdentifier:Ee,targetType:pe,value:G};if(this._middleware){if(Be=this._middleware(Ke),Be==null)throw new Error(Z.INVALID_MIDDLEWARE_RETURN)}else Be=this._planAndResolve()(Ke);return Be},ce.prototype._planAndResolve=function(){var fe=this;return function(we){var pe=oe.plan(fe._metadataReader,fe,we.isMultiInject,we.targetType,we.serviceIdentifier,we.key,we.value,we.avoidConstraints);pe=we.contextInterceptor(pe);var Ee=ie.resolve(pe);return Ee}},ce}();L.Container=se},33244:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AsyncContainerModule=L.ContainerModule=void 0;var j=M(37791),D=function(){function z(Z){this.id=j.id(),this.registry=Z}return z}();L.ContainerModule=D;var J=function(){function z(Z){this.id=j.id(),this.registry=Z}return z}();L.AsyncContainerModule=J},85700:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ContainerSnapshot=void 0;var M=function(){function j(){}return j.of=function(D,J){var z=new j;return z.bindings=D,z.middleware=J,z},j}();L.ContainerSnapshot=M},80175:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Lookup=void 0;var j=M(16674),D=function(){function J(){this._map=new Map}return J.prototype.getMap=function(){return this._map},J.prototype.add=function(z,Z){if(z==null)throw new Error(j.NULL_ARGUMENT);if(Z==null)throw new Error(j.NULL_ARGUMENT);var ee=this._map.get(z);ee!==void 0?(ee.push(Z),this._map.set(z,ee)):this._map.set(z,[Z])},J.prototype.get=function(z){if(z==null)throw new Error(j.NULL_ARGUMENT);var Z=this._map.get(z);if(Z!==void 0)return Z;throw new Error(j.KEY_NOT_FOUND)},J.prototype.remove=function(z){if(z==null)throw new Error(j.NULL_ARGUMENT);if(!this._map.delete(z))throw new Error(j.KEY_NOT_FOUND)},J.prototype.removeByCondition=function(z){var Z=this;this._map.forEach(function(ee,Q){var ue=ee.filter(function(oe){return!z(oe)});ue.length>0?Z._map.set(Q,ue):Z._map.delete(Q)})},J.prototype.hasKey=function(z){if(z==null)throw new Error(j.NULL_ARGUMENT);return this._map.has(z)},J.prototype.clone=function(){var z=new J;return this._map.forEach(function(Z,ee){Z.forEach(function(Q){return z.add(ee,Q.clone())})}),z},J.prototype.traverse=function(z){this._map.forEach(function(Z,ee){z(ee,Z)})},J}();L.Lookup=D},86700:function(De,L,M){"use strict";var j;j={value:!0},j=j=j=j=j=j=L.GW=j=j=L.zY=j=j=L.NT=L.jt=j=L.f3=L.t6=j=L.b2=j=j=j=j=j=L.W2=j=void 0;var D=M(6867);j=D;var J=M(51389);Object.defineProperty(L,"W2",{enumerable:!0,get:function(){return J.Container}});var z=M(28421);j={enumerable:!0,get:function(){return z.BindingScopeEnum}},j={enumerable:!0,get:function(){return z.BindingTypeEnum}},j={enumerable:!0,get:function(){return z.TargetTypeEnum}};var Z=M(33244);j={enumerable:!0,get:function(){return Z.AsyncContainerModule}},j={enumerable:!0,get:function(){return Z.ContainerModule}};var ee=M(64315);Object.defineProperty(L,"b2",{enumerable:!0,get:function(){return ee.injectable}});var Q=M(32052);j={enumerable:!0,get:function(){return Q.tagged}};var ue=M(38085);Object.defineProperty(L,"t6",{enumerable:!0,get:function(){return ue.named}});var oe=M(5744);Object.defineProperty(L,"f3",{enumerable:!0,get:function(){return oe.inject}}),j={enumerable:!0,get:function(){return oe.LazyServiceIdentifer}};var ie=M(6515);Object.defineProperty(L,"jt",{enumerable:!0,get:function(){return ie.optional}});var ne=M(86757);Object.defineProperty(L,"NT",{enumerable:!0,get:function(){return ne.unmanaged}});var he=M(71693);j={enumerable:!0,get:function(){return he.multiInject}};var Ne=M(55638);j={enumerable:!0,get:function(){return Ne.targetName}};var le=M(7014);Object.defineProperty(L,"zY",{enumerable:!0,get:function(){return le.postConstruct}});var be=M(51377);j={enumerable:!0,get:function(){return be.MetadataReader}};var se=M(37791);j={enumerable:!0,get:function(){return se.id}};var ce=M(99934);Object.defineProperty(L,"GW",{enumerable:!0,get:function(){return ce.decorate}});var fe=M(80758);j={enumerable:!0,get:function(){return fe.traverseAncerstors}},j={enumerable:!0,get:function(){return fe.taggedConstraint}},j={enumerable:!0,get:function(){return fe.namedConstraint}},j={enumerable:!0,get:function(){return fe.typeConstraint}};var we=M(55800);j={enumerable:!0,get:function(){return we.getServiceIdentifierAsString}};var pe=M(70600);j={enumerable:!0,get:function(){return pe.multiBindToService}}},95228:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Context=void 0;var j=M(37791),D=function(){function J(z){this.id=j.id(),this.container=z}return J.prototype.addPlan=function(z){this.plan=z},J.prototype.setCurrentRequest=function(z){this.currentRequest=z},J}();L.Context=D},47738:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Metadata=void 0;var j=M(6867),D=function(){function J(z,Z){this.key=z,this.value=Z}return J.prototype.toString=function(){return this.key===j.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},J}();L.Metadata=D},51377:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.MetadataReader=void 0;var j=M(6867),D=function(){function J(){}return J.prototype.getConstructorMetadata=function(z){var Z=Reflect.getMetadata(j.PARAM_TYPES,z),ee=Reflect.getMetadata(j.TAGGED,z);return{compilerGeneratedMetadata:Z,userGeneratedMetadata:ee||{}}},J.prototype.getPropertiesMetadata=function(z){var Z=Reflect.getMetadata(j.TAGGED_PROP,z)||[];return Z},J}();L.MetadataReader=D},55314:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Plan=void 0;var M=function(){function j(D,J){this.parentContext=D,this.rootRequest=J}return j}();L.Plan=M},86311:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.getBindingDictionary=L.createMockRequest=L.plan=void 0;var j=M(23184),D=M(16674),J=M(28421),z=M(6867),Z=M(85265),ee=M(55800),Q=M(95228),ue=M(47738),oe=M(55314),ie=M(6e3),ne=M(6748),he=M(18924);function Ne(Ee){return Ee._bindingDictionary}L.getBindingDictionary=Ne;function le(Ee,it,G,Be,Ke,dt){var jt=Ee?z.MULTI_INJECT_TAG:z.INJECT_TAG,mn=new ue.Metadata(jt,G),Pe=new he.Target(it,Be,G,mn);if(Ke!==void 0){var In=new ue.Metadata(Ke,dt);Pe.metadata.push(In)}return Pe}function be(Ee,it,G,Be,Ke){var dt=fe(G.container,Ke.serviceIdentifier),jt=[];return dt.length===j.BindingCount.NoBindingsAvailable&&G.container.options.autoBindInjectable&&typeof Ke.serviceIdentifier=="function"&&Ee.getConstructorMetadata(Ke.serviceIdentifier).compilerGeneratedMetadata&&(G.container.bind(Ke.serviceIdentifier).toSelf(),dt=fe(G.container,Ke.serviceIdentifier)),it?jt=dt:jt=dt.filter(function(mn){var Pe=new ne.Request(mn.serviceIdentifier,G,Be,mn,Ke);return mn.constraint(Pe)}),se(Ke.serviceIdentifier,jt,Ke,G.container),jt}function se(Ee,it,G,Be){switch(it.length){case j.BindingCount.NoBindingsAvailable:if(G.isOptional())return it;var Ke=ee.getServiceIdentifierAsString(Ee),dt=D.NOT_REGISTERED;throw dt+=ee.listMetadataForTarget(Ke,G),dt+=ee.listRegisteredBindingsForServiceIdentifier(Be,Ke,fe),new Error(dt);case j.BindingCount.OnlyOneBindingAvailable:if(!G.isArray())return it;case j.BindingCount.MultipleBindingsAvailable:default:if(G.isArray())return it;var Ke=ee.getServiceIdentifierAsString(Ee),dt=D.AMBIGUOUS_MATCH+" "+Ke;throw dt+=ee.listRegisteredBindingsForServiceIdentifier(Be,Ke,fe),new Error(dt)}}function ce(Ee,it,G,Be,Ke,dt){var jt,mn;if(Ke===null){jt=be(Ee,it,Be,null,dt),mn=new ne.Request(G,Be,null,jt,dt);var Pe=new oe.Plan(Be,mn);Be.addPlan(Pe)}else jt=be(Ee,it,Be,Ke,dt),mn=Ke.addChildRequest(dt.serviceIdentifier,jt,dt);jt.forEach(function(In){var hn=null;if(dt.isArray())hn=mn.addChildRequest(In.serviceIdentifier,In,dt);else{if(In.cache)return;hn=mn}if(In.type===J.BindingTypeEnum.Instance&&In.implementationType!==null){var vt=ie.getDependencies(Ee,In.implementationType);if(!Be.container.options.skipBaseClassChecks){var kt=ie.getBaseClassDependencyCount(Ee,In.implementationType);if(vt.length<kt){var jn=D.ARGUMENTS_LENGTH_MISMATCH(ie.getFunctionName(In.implementationType));throw new Error(jn)}}vt.forEach(function(Zt){ce(Ee,!1,Zt.serviceIdentifier,Be,hn,Zt)})}})}function fe(Ee,it){var G=[],Be=Ne(Ee);return Be.hasKey(it)?G=Be.get(it):Ee.parent!==null&&(G=fe(Ee.parent,it)),G}function we(Ee,it,G,Be,Ke,dt,jt,mn){mn===void 0&&(mn=!1);var Pe=new Q.Context(it),In=le(G,Be,Ke,"",dt,jt);try{return ce(Ee,mn,Ke,Pe,null,In),Pe}catch(hn){throw Z.isStackOverflowExeption(hn)&&Pe.plan&&ee.circularDependencyToException(Pe.plan.rootRequest),hn}}L.plan=we;function pe(Ee,it,G,Be){var Ke=new he.Target(J.TargetTypeEnum.Variable,"",it,new ue.Metadata(G,Be)),dt=new Q.Context(Ee),jt=new ne.Request(it,dt,null,[],Ke);return jt}L.createMockRequest=pe},88460:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.QueryableString=void 0;var M=function(){function j(D){this.str=D}return j.prototype.startsWith=function(D){return this.str.indexOf(D)===0},j.prototype.endsWith=function(D){var J="",z=D.split("").reverse().join("");return J=this.str.split("").reverse().join(""),this.startsWith.call({str:J},z)},j.prototype.contains=function(D){return this.str.indexOf(D)!==-1},j.prototype.equals=function(D){return this.str===D},j.prototype.value=function(){return this.str},j}();L.QueryableString=M},6e3:function(De,L,M){"use strict";var j=this&&this.__spreadArray||function(be,se){for(var ce=0,fe=se.length,we=be.length;ce<fe;ce++,we++)be[we]=se[ce];return be};Object.defineProperty(L,"__esModule",{value:!0}),L.getFunctionName=L.getBaseClassDependencyCount=L.getDependencies=void 0;var D=M(5744),J=M(16674),z=M(28421),Z=M(6867),ee=M(55800);Object.defineProperty(L,"getFunctionName",{enumerable:!0,get:function(){return ee.getFunctionName}});var Q=M(18924);function ue(be,se){var ce=ee.getFunctionName(se),fe=oe(be,ce,se,!1);return fe}L.getDependencies=ue;function oe(be,se,ce,fe){var we=be.getConstructorMetadata(ce),pe=we.compilerGeneratedMetadata;if(pe===void 0){var Ee=J.MISSING_INJECTABLE_ANNOTATION+" "+se+".";throw new Error(Ee)}var it=we.userGeneratedMetadata,G=Object.keys(it),Be=ce.length===0&&G.length>0,Ke=G.length>ce.length,dt=Be||Ke?G.length:ce.length,jt=ne(fe,se,pe,it,dt),mn=he(be,ce),Pe=j(j([],jt),mn);return Pe}function ie(be,se,ce,fe,we){var pe=we[be.toString()]||[],Ee=le(pe),it=Ee.unmanaged!==!0,G=fe[be],Be=Ee.inject||Ee.multiInject;if(G=Be||G,G instanceof D.LazyServiceIdentifer&&(G=G.unwrap()),it){var Ke=G===Object,dt=G===Function,jt=G===void 0,mn=Ke||dt||jt;if(!se&&mn){var Pe=J.MISSING_INJECT_ANNOTATION+" argument "+be+" in class "+ce+".";throw new Error(Pe)}var In=new Q.Target(z.TargetTypeEnum.ConstructorArgument,Ee.targetName,G);return In.metadata=pe,In}return null}function ne(be,se,ce,fe,we){for(var pe=[],Ee=0;Ee<we;Ee++){var it=Ee,G=ie(it,be,se,ce,fe);G!==null&&pe.push(G)}return pe}function he(be,se){for(var ce=be.getPropertiesMetadata(se),fe=[],we=Object.keys(ce),pe=0,Ee=we;pe<Ee.length;pe++){var it=Ee[pe],G=ce[it],Be=le(ce[it]),Ke=Be.targetName||it,dt=Be.inject||Be.multiInject,jt=new Q.Target(z.TargetTypeEnum.ClassProperty,Ke,dt);jt.metadata=G,fe.push(jt)}var mn=Object.getPrototypeOf(se.prototype).constructor;if(mn!==Object){var Pe=he(be,mn);fe=j(j([],fe),Pe)}return fe}function Ne(be,se){var ce=Object.getPrototypeOf(se.prototype).constructor;if(ce!==Object){var fe=ee.getFunctionName(ce),we=oe(be,fe,ce,!0),pe=we.map(function(G){return G.metadata.filter(function(Be){return Be.key===Z.UNMANAGED_TAG})}),Ee=[].concat.apply([],pe).length,it=we.length-Ee;return it>0?it:Ne(be,ce)}else return 0}L.getBaseClassDependencyCount=Ne;function le(be){var se={};return be.forEach(function(ce){se[ce.key.toString()]=ce.value}),{inject:se[Z.INJECT_TAG],multiInject:se[Z.MULTI_INJECT_TAG],targetName:se[Z.NAME_TAG],unmanaged:se[Z.UNMANAGED_TAG]}}},6748:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Request=void 0;var j=M(37791),D=function(){function J(z,Z,ee,Q,ue){this.id=j.id(),this.serviceIdentifier=z,this.parentContext=Z,this.parentRequest=ee,this.target=ue,this.childRequests=[],this.bindings=Array.isArray(Q)?Q:[Q],this.requestScope=ee===null?new Map:null}return J.prototype.addChildRequest=function(z,Z,ee){var Q=new J(z,this.parentContext,this,Z,ee);return this.childRequests.push(Q),Q},J}();L.Request=D},18924:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Target=void 0;var j=M(6867),D=M(37791),J=M(47738),z=M(88460),Z=function(){function ee(Q,ue,oe,ie){this.id=D.id(),this.type=Q,this.serviceIdentifier=oe,this.name=new z.QueryableString(ue||""),this.metadata=new Array;var ne=null;typeof ie=="string"?ne=new J.Metadata(j.NAMED_TAG,ie):ie instanceof J.Metadata&&(ne=ie),ne!==null&&this.metadata.push(ne)}return ee.prototype.hasTag=function(Q){for(var ue=0,oe=this.metadata;ue<oe.length;ue++){var ie=oe[ue];if(ie.key===Q)return!0}return!1},ee.prototype.isArray=function(){return this.hasTag(j.MULTI_INJECT_TAG)},ee.prototype.matchesArray=function(Q){return this.matchesTag(j.MULTI_INJECT_TAG)(Q)},ee.prototype.isNamed=function(){return this.hasTag(j.NAMED_TAG)},ee.prototype.isTagged=function(){return this.metadata.some(function(Q){return j.NON_CUSTOM_TAG_KEYS.every(function(ue){return Q.key!==ue})})},ee.prototype.isOptional=function(){return this.matchesTag(j.OPTIONAL_TAG)(!0)},ee.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(Q){return Q.key===j.NAMED_TAG})[0]:null},ee.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(Q){return j.NON_CUSTOM_TAG_KEYS.every(function(ue){return Q.key!==ue})}):null},ee.prototype.matchesNamedTag=function(Q){return this.matchesTag(j.NAMED_TAG)(Q)},ee.prototype.matchesTag=function(Q){var ue=this;return function(oe){for(var ie=0,ne=ue.metadata;ie<ne.length;ie++){var he=ne[ie];if(he.key===Q&&he.value===oe)return!0}return!1}},ee}();L.Target=Z},52279:function(De,L,M){"use strict";var j=this&&this.__spreadArray||function(oe,ie){for(var ne=0,he=ie.length,Ne=oe.length;ne<he;ne++,Ne++)oe[Ne]=ie[ne];return oe};Object.defineProperty(L,"__esModule",{value:!0}),L.resolveInstance=void 0;var D=M(16674),J=M(28421),z=M(6867);function Z(oe,ie,ne){var he=ie.filter(function(le){return le.target!==null&&le.target.type===J.TargetTypeEnum.ClassProperty}),Ne=he.map(ne);return he.forEach(function(le,be){var se="";se=le.target.name.value();var ce=Ne[be];oe[se]=ce}),oe}function ee(oe,ie){return new(oe.bind.apply(oe,j([void 0],ie)))}function Q(oe,ie){if(Reflect.hasMetadata(z.POST_CONSTRUCT,oe)){var ne=Reflect.getMetadata(z.POST_CONSTRUCT,oe);try{ie[ne.value]()}catch(he){throw new Error(D.POST_CONSTRUCT_ERROR(oe.name,he.message))}}}function ue(oe,ie,ne){var he=null;if(ie.length>0){var Ne=ie.filter(function(be){return be.target!==null&&be.target.type===J.TargetTypeEnum.ConstructorArgument}),le=Ne.map(ne);he=ee(oe,le),he=Z(he,ie,ne)}else he=new oe;return Q(oe,he),he}L.resolveInstance=ue},31927:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.resolve=void 0;var j=M(16674),D=M(28421),J=M(85265),z=M(55800),Z=M(52279),ee=function(oe,ie,ne){try{return ne()}catch(he){throw J.isStackOverflowExeption(he)?new Error(j.CIRCULAR_DEPENDENCY_IN_FACTORY(oe,ie.toString())):he}},Q=function(oe){return function(ie){ie.parentContext.setCurrentRequest(ie);var ne=ie.bindings,he=ie.childRequests,Ne=ie.target&&ie.target.isArray(),le=!ie.parentRequest||!ie.parentRequest.target||!ie.target||!ie.parentRequest.target.matchesArray(ie.target.serviceIdentifier);if(Ne&&le)return he.map(function(pe){var Ee=Q(oe);return Ee(pe)});var be=null;if(ie.target.isOptional()&&ne.length===0)return;var se=ne[0],ce=se.scope===D.BindingScopeEnum.Singleton,fe=se.scope===D.BindingScopeEnum.Request;if(ce&&se.activated)return se.cache;if(fe&&oe!==null&&oe.has(se.id))return oe.get(se.id);if(se.type===D.BindingTypeEnum.ConstantValue)be=se.cache,se.activated=!0;else if(se.type===D.BindingTypeEnum.Function)be=se.cache,se.activated=!0;else if(se.type===D.BindingTypeEnum.Constructor)be=se.implementationType;else if(se.type===D.BindingTypeEnum.DynamicValue&&se.dynamicValue!==null)be=ee("toDynamicValue",se.serviceIdentifier,function(){return se.dynamicValue(ie.parentContext)});else if(se.type===D.BindingTypeEnum.Factory&&se.factory!==null)be=ee("toFactory",se.serviceIdentifier,function(){return se.factory(ie.parentContext)});else if(se.type===D.BindingTypeEnum.Provider&&se.provider!==null)be=ee("toProvider",se.serviceIdentifier,function(){return se.provider(ie.parentContext)});else if(se.type===D.BindingTypeEnum.Instance&&se.implementationType!==null)be=Z.resolveInstance(se.implementationType,he,Q(oe));else{var we=z.getServiceIdentifierAsString(ie.serviceIdentifier);throw new Error(j.INVALID_BINDING_TYPE+" "+we)}return typeof se.onActivation=="function"&&(be=se.onActivation(ie.parentContext,be)),ce&&(se.cache=be,se.activated=!0),fe&&oe!==null&&!oe.has(se.id)&&oe.set(se.id,be),be}};function ue(oe){var ie=Q(oe.plan.rootRequest.requestScope);return ie(oe.plan.rootRequest)}L.resolve=ue},83366:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingInSyntax=void 0;var j=M(28421),D=M(71325),J=function(){function z(Z){this._binding=Z}return z.prototype.inRequestScope=function(){return this._binding.scope=j.BindingScopeEnum.Request,new D.BindingWhenOnSyntax(this._binding)},z.prototype.inSingletonScope=function(){return this._binding.scope=j.BindingScopeEnum.Singleton,new D.BindingWhenOnSyntax(this._binding)},z.prototype.inTransientScope=function(){return this._binding.scope=j.BindingScopeEnum.Transient,new D.BindingWhenOnSyntax(this._binding)},z}();L.BindingInSyntax=J},99812:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingInWhenOnSyntax=void 0;var j=M(83366),D=M(51811),J=M(98370),z=function(){function Z(ee){this._binding=ee,this._bindingWhenSyntax=new J.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new D.BindingOnSyntax(this._binding),this._bindingInSyntax=new j.BindingInSyntax(ee)}return Z.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},Z.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},Z.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},Z.prototype.when=function(ee){return this._bindingWhenSyntax.when(ee)},Z.prototype.whenTargetNamed=function(ee){return this._bindingWhenSyntax.whenTargetNamed(ee)},Z.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},Z.prototype.whenTargetTagged=function(ee,Q){return this._bindingWhenSyntax.whenTargetTagged(ee,Q)},Z.prototype.whenInjectedInto=function(ee){return this._bindingWhenSyntax.whenInjectedInto(ee)},Z.prototype.whenParentNamed=function(ee){return this._bindingWhenSyntax.whenParentNamed(ee)},Z.prototype.whenParentTagged=function(ee,Q){return this._bindingWhenSyntax.whenParentTagged(ee,Q)},Z.prototype.whenAnyAncestorIs=function(ee){return this._bindingWhenSyntax.whenAnyAncestorIs(ee)},Z.prototype.whenNoAncestorIs=function(ee){return this._bindingWhenSyntax.whenNoAncestorIs(ee)},Z.prototype.whenAnyAncestorNamed=function(ee){return this._bindingWhenSyntax.whenAnyAncestorNamed(ee)},Z.prototype.whenAnyAncestorTagged=function(ee,Q){return this._bindingWhenSyntax.whenAnyAncestorTagged(ee,Q)},Z.prototype.whenNoAncestorNamed=function(ee){return this._bindingWhenSyntax.whenNoAncestorNamed(ee)},Z.prototype.whenNoAncestorTagged=function(ee,Q){return this._bindingWhenSyntax.whenNoAncestorTagged(ee,Q)},Z.prototype.whenAnyAncestorMatches=function(ee){return this._bindingWhenSyntax.whenAnyAncestorMatches(ee)},Z.prototype.whenNoAncestorMatches=function(ee){return this._bindingWhenSyntax.whenNoAncestorMatches(ee)},Z.prototype.onActivation=function(ee){return this._bindingOnSyntax.onActivation(ee)},Z}();L.BindingInWhenOnSyntax=z},51811:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingOnSyntax=void 0;var j=M(98370),D=function(){function J(z){this._binding=z}return J.prototype.onActivation=function(z){return this._binding.onActivation=z,new j.BindingWhenSyntax(this._binding)},J}();L.BindingOnSyntax=D},51860:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingToSyntax=void 0;var j=M(16674),D=M(28421),J=M(99812),z=M(71325),Z=function(){function ee(Q){this._binding=Q}return ee.prototype.to=function(Q){return this._binding.type=D.BindingTypeEnum.Instance,this._binding.implementationType=Q,new J.BindingInWhenOnSyntax(this._binding)},ee.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+j.INVALID_TO_SELF_VALUE);var Q=this._binding.serviceIdentifier;return this.to(Q)},ee.prototype.toConstantValue=function(Q){return this._binding.type=D.BindingTypeEnum.ConstantValue,this._binding.cache=Q,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=D.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},ee.prototype.toDynamicValue=function(Q){return this._binding.type=D.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=Q,this._binding.implementationType=null,new J.BindingInWhenOnSyntax(this._binding)},ee.prototype.toConstructor=function(Q){return this._binding.type=D.BindingTypeEnum.Constructor,this._binding.implementationType=Q,this._binding.scope=D.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},ee.prototype.toFactory=function(Q){return this._binding.type=D.BindingTypeEnum.Factory,this._binding.factory=Q,this._binding.scope=D.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},ee.prototype.toFunction=function(Q){if(typeof Q!="function")throw new Error(j.INVALID_FUNCTION_BINDING);var ue=this.toConstantValue(Q);return this._binding.type=D.BindingTypeEnum.Function,this._binding.scope=D.BindingScopeEnum.Singleton,ue},ee.prototype.toAutoFactory=function(Q){return this._binding.type=D.BindingTypeEnum.Factory,this._binding.factory=function(ue){var oe=function(){return ue.container.get(Q)};return oe},this._binding.scope=D.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},ee.prototype.toProvider=function(Q){return this._binding.type=D.BindingTypeEnum.Provider,this._binding.provider=Q,this._binding.scope=D.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},ee.prototype.toService=function(Q){this.toDynamicValue(function(ue){return ue.container.get(Q)})},ee}();L.BindingToSyntax=Z},71325:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingWhenOnSyntax=void 0;var j=M(51811),D=M(98370),J=function(){function z(Z){this._binding=Z,this._bindingWhenSyntax=new D.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new j.BindingOnSyntax(this._binding)}return z.prototype.when=function(Z){return this._bindingWhenSyntax.when(Z)},z.prototype.whenTargetNamed=function(Z){return this._bindingWhenSyntax.whenTargetNamed(Z)},z.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},z.prototype.whenTargetTagged=function(Z,ee){return this._bindingWhenSyntax.whenTargetTagged(Z,ee)},z.prototype.whenInjectedInto=function(Z){return this._bindingWhenSyntax.whenInjectedInto(Z)},z.prototype.whenParentNamed=function(Z){return this._bindingWhenSyntax.whenParentNamed(Z)},z.prototype.whenParentTagged=function(Z,ee){return this._bindingWhenSyntax.whenParentTagged(Z,ee)},z.prototype.whenAnyAncestorIs=function(Z){return this._bindingWhenSyntax.whenAnyAncestorIs(Z)},z.prototype.whenNoAncestorIs=function(Z){return this._bindingWhenSyntax.whenNoAncestorIs(Z)},z.prototype.whenAnyAncestorNamed=function(Z){return this._bindingWhenSyntax.whenAnyAncestorNamed(Z)},z.prototype.whenAnyAncestorTagged=function(Z,ee){return this._bindingWhenSyntax.whenAnyAncestorTagged(Z,ee)},z.prototype.whenNoAncestorNamed=function(Z){return this._bindingWhenSyntax.whenNoAncestorNamed(Z)},z.prototype.whenNoAncestorTagged=function(Z,ee){return this._bindingWhenSyntax.whenNoAncestorTagged(Z,ee)},z.prototype.whenAnyAncestorMatches=function(Z){return this._bindingWhenSyntax.whenAnyAncestorMatches(Z)},z.prototype.whenNoAncestorMatches=function(Z){return this._bindingWhenSyntax.whenNoAncestorMatches(Z)},z.prototype.onActivation=function(Z){return this._bindingOnSyntax.onActivation(Z)},z}();L.BindingWhenOnSyntax=J},98370:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BindingWhenSyntax=void 0;var j=M(51811),D=M(80758),J=function(){function z(Z){this._binding=Z}return z.prototype.when=function(Z){return this._binding.constraint=Z,new j.BindingOnSyntax(this._binding)},z.prototype.whenTargetNamed=function(Z){return this._binding.constraint=D.namedConstraint(Z),new j.BindingOnSyntax(this._binding)},z.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(Z){var ee=Z.target!==null&&!Z.target.isNamed()&&!Z.target.isTagged();return ee},new j.BindingOnSyntax(this._binding)},z.prototype.whenTargetTagged=function(Z,ee){return this._binding.constraint=D.taggedConstraint(Z)(ee),new j.BindingOnSyntax(this._binding)},z.prototype.whenInjectedInto=function(Z){return this._binding.constraint=function(ee){return D.typeConstraint(Z)(ee.parentRequest)},new j.BindingOnSyntax(this._binding)},z.prototype.whenParentNamed=function(Z){return this._binding.constraint=function(ee){return D.namedConstraint(Z)(ee.parentRequest)},new j.BindingOnSyntax(this._binding)},z.prototype.whenParentTagged=function(Z,ee){return this._binding.constraint=function(Q){return D.taggedConstraint(Z)(ee)(Q.parentRequest)},new j.BindingOnSyntax(this._binding)},z.prototype.whenAnyAncestorIs=function(Z){return this._binding.constraint=function(ee){return D.traverseAncerstors(ee,D.typeConstraint(Z))},new j.BindingOnSyntax(this._binding)},z.prototype.whenNoAncestorIs=function(Z){return this._binding.constraint=function(ee){return!D.traverseAncerstors(ee,D.typeConstraint(Z))},new j.BindingOnSyntax(this._binding)},z.prototype.whenAnyAncestorNamed=function(Z){return this._binding.constraint=function(ee){return D.traverseAncerstors(ee,D.namedConstraint(Z))},new j.BindingOnSyntax(this._binding)},z.prototype.whenNoAncestorNamed=function(Z){return this._binding.constraint=function(ee){return!D.traverseAncerstors(ee,D.namedConstraint(Z))},new j.BindingOnSyntax(this._binding)},z.prototype.whenAnyAncestorTagged=function(Z,ee){return this._binding.constraint=function(Q){return D.traverseAncerstors(Q,D.taggedConstraint(Z)(ee))},new j.BindingOnSyntax(this._binding)},z.prototype.whenNoAncestorTagged=function(Z,ee){return this._binding.constraint=function(Q){return!D.traverseAncerstors(Q,D.taggedConstraint(Z)(ee))},new j.BindingOnSyntax(this._binding)},z.prototype.whenAnyAncestorMatches=function(Z){return this._binding.constraint=function(ee){return D.traverseAncerstors(ee,Z)},new j.BindingOnSyntax(this._binding)},z.prototype.whenNoAncestorMatches=function(Z){return this._binding.constraint=function(ee){return!D.traverseAncerstors(ee,Z)},new j.BindingOnSyntax(this._binding)},z}();L.BindingWhenSyntax=J},80758:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.typeConstraint=L.namedConstraint=L.taggedConstraint=L.traverseAncerstors=void 0;var j=M(6867),D=M(47738),J=function(Q,ue){var oe=Q.parentRequest;return oe!==null?ue(oe)?!0:J(oe,ue):!1};L.traverseAncerstors=J;var z=function(Q){return function(ue){var oe=function(ie){return ie!==null&&ie.target!==null&&ie.target.matchesTag(Q)(ue)};return oe.metaData=new D.Metadata(Q,ue),oe}};L.taggedConstraint=z;var Z=z(j.NAMED_TAG);L.namedConstraint=Z;var ee=function(Q){return function(ue){var oe=null;if(ue!==null)if(oe=ue.bindings[0],typeof Q=="string"){var ie=oe.serviceIdentifier;return ie===Q}else{var ne=ue.bindings[0].implementationType;return Q===ne}return!1}};L.typeConstraint=ee},70600:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.multiBindToService=void 0;var M=function(j){return function(D){return function(){for(var J=[],z=0;z<arguments.length;z++)J[z]=arguments[z];return J.forEach(function(Z){return j.bind(Z).toService(D)})}}};L.multiBindToService=M},85265:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isStackOverflowExeption=void 0;var j=M(16674);function D(J){return J instanceof RangeError||J.message===j.STACK_OVERFLOW}L.isStackOverflowExeption=D},37791:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.id=void 0;var M=0;function j(){return M++}L.id=j},55800:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.circularDependencyToException=L.listMetadataForTarget=L.listRegisteredBindingsForServiceIdentifier=L.getServiceIdentifierAsString=L.getFunctionName=void 0;var j=M(16674);function D(oe){if(typeof oe=="function"){var ie=oe;return ie.name}else{if(typeof oe=="symbol")return oe.toString();var ie=oe;return ie}}L.getServiceIdentifierAsString=D;function J(oe,ie,ne){var he="",Ne=ne(oe,ie);return Ne.length!==0&&(he=`
Registered bindings:`,Ne.forEach(function(le){var be="Object";le.implementationType!==null&&(be=ue(le.implementationType)),he=he+`
 `+be,le.constraint.metaData&&(he=he+" - "+le.constraint.metaData)})),he}L.listRegisteredBindingsForServiceIdentifier=J;function z(oe,ie){return oe.parentRequest===null?!1:oe.parentRequest.serviceIdentifier===ie?!0:z(oe.parentRequest,ie)}function Z(oe){function ie(he,Ne){Ne===void 0&&(Ne=[]);var le=D(he.serviceIdentifier);return Ne.push(le),he.parentRequest!==null?ie(he.parentRequest,Ne):Ne}var ne=ie(oe);return ne.reverse().join(" --> ")}function ee(oe){oe.childRequests.forEach(function(ie){if(z(ie,ie.serviceIdentifier)){var ne=Z(ie);throw new Error(j.CIRCULAR_DEPENDENCY+" "+ne)}else ee(ie)})}L.circularDependencyToException=ee;function Q(oe,ie){if(ie.isTagged()||ie.isNamed()){var ne="",he=ie.getNamedTag(),Ne=ie.getCustomTags();return he!==null&&(ne+=he.toString()+`
`),Ne!==null&&Ne.forEach(function(le){ne+=le.toString()+`
`})," "+oe+`
 `+oe+" - "+ne}else return" "+oe}L.listMetadataForTarget=Q;function ue(oe){if(oe.name)return oe.name;var ie=oe.toString(),ne=ie.match(/^function\s*([^\s(]+)/);return ne?ne[1]:"Anonymous function: "+ie}L.getFunctionName=ue},50450:function(De,L,M){var j,D,J;(function(z){D=[M(19755)],j=z,J=typeof j=="function"?j.apply(L,D):j,J!==void 0&&(De.exports=J)})(function(z){var Z=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],ee="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],Q=Array.prototype.slice,ue,oe;if(z.event.fixHooks)for(var ie=Z.length;ie;)z.event.fixHooks[Z[--ie]]=z.event.mouseHooks;var ne=z.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var be=ee.length;be;)this.addEventListener(ee[--be],he,!1);else this.onmousewheel=he;z.data(this,"mousewheel-line-height",ne.getLineHeight(this)),z.data(this,"mousewheel-page-height",ne.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var be=ee.length;be;)this.removeEventListener(ee[--be],he,!1);else this.onmousewheel=null;z.removeData(this,"mousewheel-line-height"),z.removeData(this,"mousewheel-page-height")},getLineHeight:function(be){var se=z(be),ce=se["offsetParent"in z.fn?"offsetParent":"parent"]();return ce.length||(ce=z("body")),parseInt(ce.css("fontSize"),10)||parseInt(se.css("fontSize"),10)||16},getPageHeight:function(be){return z(be).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};z.fn.extend({mousewheel:function(be){return be?this.bind("mousewheel",be):this.trigger("mousewheel")},unmousewheel:function(be){return this.unbind("mousewheel",be)}});function he(be){var se=be||window.event,ce=Q.call(arguments,1),fe=0,we=0,pe=0,Ee=0,it=0,G=0;if(be=z.event.fix(se),be.type="mousewheel","detail"in se&&(pe=se.detail*-1),"wheelDelta"in se&&(pe=se.wheelDelta),"wheelDeltaY"in se&&(pe=se.wheelDeltaY),"wheelDeltaX"in se&&(we=se.wheelDeltaX*-1),"axis"in se&&se.axis===se.HORIZONTAL_AXIS&&(we=pe*-1,pe=0),fe=pe===0?we:pe,"deltaY"in se&&(pe=se.deltaY*-1,fe=pe),"deltaX"in se&&(we=se.deltaX,pe===0&&(fe=we*-1)),!(pe===0&&we===0)){if(se.deltaMode===1){var Be=z.data(this,"mousewheel-line-height");fe*=Be,pe*=Be,we*=Be}else if(se.deltaMode===2){var Ke=z.data(this,"mousewheel-page-height");fe*=Ke,pe*=Ke,we*=Ke}if(Ee=Math.max(Math.abs(pe),Math.abs(we)),(!oe||Ee<oe)&&(oe=Ee,le(se,Ee)&&(oe/=40)),le(se,Ee)&&(fe/=40,we/=40,pe/=40),fe=Math[fe>=1?"floor":"ceil"](fe/oe),we=Math[we>=1?"floor":"ceil"](we/oe),pe=Math[pe>=1?"floor":"ceil"](pe/oe),ne.settings.normalizeOffset&&this.getBoundingClientRect){var dt=this.getBoundingClientRect();it=be.clientX-dt.left,G=be.clientY-dt.top}return be.deltaX=we,be.deltaY=pe,be.deltaFactor=oe,be.offsetX=it,be.offsetY=G,be.deltaMode=0,ce.unshift(be,fe,we,pe),ue&&clearTimeout(ue),ue=setTimeout(Ne,200),(z.event.dispatch||z.event.handle).apply(this,ce)}}function Ne(){oe=null}function le(be,se){return ne.settings.adjustOldDeltas&&be.type==="mousewheel"&&se%120===0}})},19755:function(De,L){var M,j;(function(D,J){"use strict";typeof De.exports=="object"?De.exports=D.document?J(D,!0):function(z){if(!z.document)throw new Error("jQuery requires a window with a document");return J(z)}:J(D)})(typeof window!="undefined"?window:this,function(D,J){"use strict";var z=[],Z=Object.getPrototypeOf,ee=z.slice,Q=z.flat?function(S){return z.flat.call(S)}:function(S){return z.concat.apply([],S)},ue=z.push,oe=z.indexOf,ie={},ne=ie.toString,he=ie.hasOwnProperty,Ne=he.toString,le=Ne.call(Object),be={},se=function(R){return typeof R=="function"&&typeof R.nodeType!="number"&&typeof R.item!="function"},ce=function(R){return R!=null&&R===R.window},fe=D.document,we={type:!0,src:!0,nonce:!0,noModule:!0};function pe(S,R,U){U=U||fe;var W,ae,de=U.createElement("script");if(de.text=S,R)for(W in we)ae=R[W]||R.getAttribute&&R.getAttribute(W),ae&&de.setAttribute(W,ae);U.head.appendChild(de).parentNode.removeChild(de)}function Ee(S){return S==null?S+"":typeof S=="object"||typeof S=="function"?ie[ne.call(S)]||"object":typeof S}var it="3.6.4",G=function(S,R){return new G.fn.init(S,R)};G.fn=G.prototype={jquery:it,constructor:G,length:0,toArray:function(){return ee.call(this)},get:function(S){return S==null?ee.call(this):S<0?this[S+this.length]:this[S]},pushStack:function(S){var R=G.merge(this.constructor(),S);return R.prevObject=this,R},each:function(S){return G.each(this,S)},map:function(S){return this.pushStack(G.map(this,function(R,U){return S.call(R,U,R)}))},slice:function(){return this.pushStack(ee.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(G.grep(this,function(S,R){return(R+1)%2}))},odd:function(){return this.pushStack(G.grep(this,function(S,R){return R%2}))},eq:function(S){var R=this.length,U=+S+(S<0?R:0);return this.pushStack(U>=0&&U<R?[this[U]]:[])},end:function(){return this.prevObject||this.constructor()},push:ue,sort:z.sort,splice:z.splice},G.extend=G.fn.extend=function(){var S,R,U,W,ae,de,xe=arguments[0]||{},tt=1,qe=arguments.length,Et=!1;for(typeof xe=="boolean"&&(Et=xe,xe=arguments[tt]||{},tt++),typeof xe!="object"&&!se(xe)&&(xe={}),tt===qe&&(xe=this,tt--);tt<qe;tt++)if((S=arguments[tt])!=null)for(R in S)W=S[R],!(R==="__proto__"||xe===W)&&(Et&&W&&(G.isPlainObject(W)||(ae=Array.isArray(W)))?(U=xe[R],ae&&!Array.isArray(U)?de=[]:!ae&&!G.isPlainObject(U)?de={}:de=U,ae=!1,xe[R]=G.extend(Et,de,W)):W!==void 0&&(xe[R]=W));return xe},G.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(S){throw new Error(S)},noop:function(){},isPlainObject:function(S){var R,U;return!S||ne.call(S)!=="[object Object]"?!1:(R=Z(S),R?(U=he.call(R,"constructor")&&R.constructor,typeof U=="function"&&Ne.call(U)===le):!0)},isEmptyObject:function(S){var R;for(R in S)return!1;return!0},globalEval:function(S,R,U){pe(S,{nonce:R&&R.nonce},U)},each:function(S,R){var U,W=0;if(Be(S))for(U=S.length;W<U&&R.call(S[W],W,S[W])!==!1;W++);else for(W in S)if(R.call(S[W],W,S[W])===!1)break;return S},makeArray:function(S,R){var U=R||[];return S!=null&&(Be(Object(S))?G.merge(U,typeof S=="string"?[S]:S):ue.call(U,S)),U},inArray:function(S,R,U){return R==null?-1:oe.call(R,S,U)},merge:function(S,R){for(var U=+R.length,W=0,ae=S.length;W<U;W++)S[ae++]=R[W];return S.length=ae,S},grep:function(S,R,U){for(var W,ae=[],de=0,xe=S.length,tt=!U;de<xe;de++)W=!R(S[de],de),W!==tt&&ae.push(S[de]);return ae},map:function(S,R,U){var W,ae,de=0,xe=[];if(Be(S))for(W=S.length;de<W;de++)ae=R(S[de],de,U),ae!=null&&xe.push(ae);else for(de in S)ae=R(S[de],de,U),ae!=null&&xe.push(ae);return Q(xe)},guid:1,support:be}),typeof Symbol=="function"&&(G.fn[Symbol.iterator]=z[Symbol.iterator]),G.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(S,R){ie["[object "+R+"]"]=R.toLowerCase()});function Be(S){var R=!!S&&"length"in S&&S.length,U=Ee(S);return se(S)||ce(S)?!1:U==="array"||R===0||typeof R=="number"&&R>0&&R-1 in S}var Ke=function(S){var R,U,W,ae,de,xe,tt,qe,Et,Gt,Sn,Rt,an,Ar,Zr,Er,us,bi,ds,$r="sizzle"+1*new Date,ci=S.document,sa=0,Ei=0,bo=Dc(),nu=Dc(),Uo=Dc(),Xs=Dc(),ba=function(Oe,ze){return Oe===ze&&(Sn=!0),0},dl={}.hasOwnProperty,Os=[],jl=Os.pop,Wi=Os.push,Ps=Os.push,Zs=Os.slice,ru=function(Oe,ze){for(var ht=0,rn=Oe.length;ht<rn;ht++)if(Oe[ht]===ze)return ht;return-1},Za="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Pi="[\\x20\\t\\r\\n\\f]",Ys="(?:\\\\[\\da-fA-F]{1,6}"+Pi+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",hl="\\["+Pi+"*("+Ys+")(?:"+Pi+"*([*^$|!~]?=)"+Pi+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Ys+"))|)"+Pi+"*\\]",Gs=":("+Ys+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+hl+")*)|.*)\\)|)",fl=new RegExp(Pi+"+","g"),aa=new RegExp("^"+Pi+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Pi+"+$","g"),ac=new RegExp("^"+Pi+"*,"+Pi+"*"),Vo=new RegExp("^"+Pi+"*([>+~]|"+Pi+")"+Pi+"*"),Cd=new RegExp(Pi+"|>"),Ou=new RegExp(Gs),vp=new RegExp("^"+Ys+"$"),iu={ID:new RegExp("^#("+Ys+")"),CLASS:new RegExp("^\\.("+Ys+")"),TAG:new RegExp("^("+Ys+"|[*])"),ATTR:new RegExp("^"+hl),PSEUDO:new RegExp("^"+Gs),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Pi+"*(even|odd|(([+-]|)(\\d*)n|)"+Pi+"*(?:([+-]|)"+Pi+"*(\\d+)|))"+Pi+"*\\)|)","i"),bool:new RegExp("^(?:"+Za+")$","i"),needsContext:new RegExp("^"+Pi+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Pi+"*((?:-\\d)?\\d*)"+Pi+"*\\)|)(?=[^-]|$)","i")},Al=/HTML$/i,pl=/^(?:input|select|textarea|button)$/i,Pu=/^h\d$/i,Pc=/^[^{]+\{\s*\[native \w/,ou=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,su=/[+~]/,ts=new RegExp("\\\\[\\da-fA-F]{1,6}"+Pi+"?|\\\\([^\\r\\n\\f])","g"),Ia=function(Oe,ze){var ht="0x"+Oe.slice(1)-65536;return ze||(ht<0?String.fromCharCode(ht+65536):String.fromCharCode(ht>>10|55296,ht&1023|56320))},Du=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,lc=function(Oe,ze){return ze?Oe==="\0"?"\uFFFD":Oe.slice(0,-1)+"\\"+Oe.charCodeAt(Oe.length-1).toString(16)+" ":"\\"+Oe},vh=function(){Rt()},cc=Fi(function(Oe){return Oe.disabled===!0&&Oe.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Ps.apply(Os=Zs.call(ci.childNodes),ci.childNodes),Os[ci.childNodes.length].nodeType}catch(Oe){Ps={apply:Os.length?function(ze,ht){Wi.apply(ze,Zs.call(ht))}:function(ze,ht){for(var rn=ze.length,ot=0;ze[rn++]=ht[ot++];);ze.length=rn-1}}}function ui(Oe,ze,ht,rn){var ot,cn,Tn,Kn,tr,Rr,zr,lr=ze&&ze.ownerDocument,qr=ze?ze.nodeType:9;if(ht=ht||[],typeof Oe!="string"||!Oe||qr!==1&&qr!==9&&qr!==11)return ht;if(!rn&&(Rt(ze),ze=ze||an,Zr)){if(qr!==11&&(tr=ou.exec(Oe)))if(ot=tr[1]){if(qr===9)if(Tn=ze.getElementById(ot)){if(Tn.id===ot)return ht.push(Tn),ht}else return ht;else if(lr&&(Tn=lr.getElementById(ot))&&ds(ze,Tn)&&Tn.id===ot)return ht.push(Tn),ht}else{if(tr[2])return Ps.apply(ht,ze.getElementsByTagName(Oe)),ht;if((ot=tr[3])&&U.getElementsByClassName&&ze.getElementsByClassName)return Ps.apply(ht,ze.getElementsByClassName(ot)),ht}if(U.qsa&&!Xs[Oe+" "]&&(!Er||!Er.test(Oe))&&(qr!==1||ze.nodeName.toLowerCase()!=="object")){if(zr=Oe,lr=ze,qr===1&&(Cd.test(Oe)||Vo.test(Oe))){for(lr=su.test(Oe)&&Ht(ze.parentNode)||ze,(lr!==ze||!U.scope)&&((Kn=ze.getAttribute("id"))?Kn=Kn.replace(Du,lc):ze.setAttribute("id",Kn=$r)),Rr=xe(Oe),cn=Rr.length;cn--;)Rr[cn]=(Kn?"#"+Kn:":scope")+" "+Jr(Rr[cn]);zr=Rr.join(",")}try{return Ps.apply(ht,lr.querySelectorAll(zr)),ht}catch(Xi){Xs(Oe,!0)}finally{Kn===$r&&ze.removeAttribute("id")}}}return qe(Oe.replace(aa,"$1"),ze,ht,rn)}function Dc(){var Oe=[];function ze(ht,rn){return Oe.push(ht+" ")>W.cacheLength&&delete ze[Oe.shift()],ze[ht+" "]=rn}return ze}function wo(Oe){return Oe[$r]=!0,Oe}function Ra(Oe){var ze=an.createElement("fieldset");try{return!!Oe(ze)}catch(ht){return!1}finally{ze.parentNode&&ze.parentNode.removeChild(ze),ze=null}}function Nc(Oe,ze){for(var ht=Oe.split("|"),rn=ht.length;rn--;)W.attrHandle[ht[rn]]=ze}function mh(Oe,ze){var ht=ze&&Oe,rn=ht&&Oe.nodeType===1&&ze.nodeType===1&&Oe.sourceIndex-ze.sourceIndex;if(rn)return rn;if(ht){for(;ht=ht.nextSibling;)if(ht===ze)return-1}return Oe?1:-1}function mp(Oe){return function(ze){var ht=ze.nodeName.toLowerCase();return ht==="input"&&ze.type===Oe}}function xa(Oe){return function(ze){var ht=ze.nodeName.toLowerCase();return(ht==="input"||ht==="button")&&ze.type===Oe}}function bt(Oe){return function(ze){return"form"in ze?ze.parentNode&&ze.disabled===!1?"label"in ze?"label"in ze.parentNode?ze.parentNode.disabled===Oe:ze.disabled===Oe:ze.isDisabled===Oe||ze.isDisabled!==!Oe&&cc(ze)===Oe:ze.disabled===Oe:"label"in ze?ze.disabled===Oe:!1}}function tn(Oe){return wo(function(ze){return ze=+ze,wo(function(ht,rn){for(var ot,cn=Oe([],ht.length,ze),Tn=cn.length;Tn--;)ht[ot=cn[Tn]]&&(ht[ot]=!(rn[ot]=ht[ot]))})})}function Ht(Oe){return Oe&&typeof Oe.getElementsByTagName!="undefined"&&Oe}U=ui.support={},de=ui.isXML=function(Oe){var ze=Oe&&Oe.namespaceURI,ht=Oe&&(Oe.ownerDocument||Oe).documentElement;return!Al.test(ze||ht&&ht.nodeName||"HTML")},Rt=ui.setDocument=function(Oe){var ze,ht,rn=Oe?Oe.ownerDocument||Oe:ci;return rn==an||rn.nodeType!==9||!rn.documentElement||(an=rn,Ar=an.documentElement,Zr=!de(an),ci!=an&&(ht=an.defaultView)&&ht.top!==ht&&(ht.addEventListener?ht.addEventListener("unload",vh,!1):ht.attachEvent&&ht.attachEvent("onunload",vh)),U.scope=Ra(function(ot){return Ar.appendChild(ot).appendChild(an.createElement("div")),typeof ot.querySelectorAll!="undefined"&&!ot.querySelectorAll(":scope fieldset div").length}),U.cssHas=Ra(function(){try{return an.querySelector(":has(*,:jqfake)"),!1}catch(ot){return!0}}),U.attributes=Ra(function(ot){return ot.className="i",!ot.getAttribute("className")}),U.getElementsByTagName=Ra(function(ot){return ot.appendChild(an.createComment("")),!ot.getElementsByTagName("*").length}),U.getElementsByClassName=Pc.test(an.getElementsByClassName),U.getById=Ra(function(ot){return Ar.appendChild(ot).id=$r,!an.getElementsByName||!an.getElementsByName($r).length}),U.getById?(W.filter.ID=function(ot){var cn=ot.replace(ts,Ia);return function(Tn){return Tn.getAttribute("id")===cn}},W.find.ID=function(ot,cn){if(typeof cn.getElementById!="undefined"&&Zr){var Tn=cn.getElementById(ot);return Tn?[Tn]:[]}}):(W.filter.ID=function(ot){var cn=ot.replace(ts,Ia);return function(Tn){var Kn=typeof Tn.getAttributeNode!="undefined"&&Tn.getAttributeNode("id");return Kn&&Kn.value===cn}},W.find.ID=function(ot,cn){if(typeof cn.getElementById!="undefined"&&Zr){var Tn,Kn,tr,Rr=cn.getElementById(ot);if(Rr){if(Tn=Rr.getAttributeNode("id"),Tn&&Tn.value===ot)return[Rr];for(tr=cn.getElementsByName(ot),Kn=0;Rr=tr[Kn++];)if(Tn=Rr.getAttributeNode("id"),Tn&&Tn.value===ot)return[Rr]}return[]}}),W.find.TAG=U.getElementsByTagName?function(ot,cn){if(typeof cn.getElementsByTagName!="undefined")return cn.getElementsByTagName(ot);if(U.qsa)return cn.querySelectorAll(ot)}:function(ot,cn){var Tn,Kn=[],tr=0,Rr=cn.getElementsByTagName(ot);if(ot==="*"){for(;Tn=Rr[tr++];)Tn.nodeType===1&&Kn.push(Tn);return Kn}return Rr},W.find.CLASS=U.getElementsByClassName&&function(ot,cn){if(typeof cn.getElementsByClassName!="undefined"&&Zr)return cn.getElementsByClassName(ot)},us=[],Er=[],(U.qsa=Pc.test(an.querySelectorAll))&&(Ra(function(ot){var cn;Ar.appendChild(ot).innerHTML="<a id='"+$r+"'></a><select id='"+$r+"-\r\\' msallowcapture=''><option selected=''></option></select>",ot.querySelectorAll("[msallowcapture^='']").length&&Er.push("[*^$]="+Pi+`*(?:''|"")`),ot.querySelectorAll("[selected]").length||Er.push("\\["+Pi+"*(?:value|"+Za+")"),ot.querySelectorAll("[id~="+$r+"-]").length||Er.push("~="),cn=an.createElement("input"),cn.setAttribute("name",""),ot.appendChild(cn),ot.querySelectorAll("[name='']").length||Er.push("\\["+Pi+"*name"+Pi+"*="+Pi+`*(?:''|"")`),ot.querySelectorAll(":checked").length||Er.push(":checked"),ot.querySelectorAll("a#"+$r+"+*").length||Er.push(".#.+[+~]"),ot.querySelectorAll("\\\f"),Er.push("[\\r\\n\\f]")}),Ra(function(ot){ot.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var cn=an.createElement("input");cn.setAttribute("type","hidden"),ot.appendChild(cn).setAttribute("name","D"),ot.querySelectorAll("[name=d]").length&&Er.push("name"+Pi+"*[*^$|!~]?="),ot.querySelectorAll(":enabled").length!==2&&Er.push(":enabled",":disabled"),Ar.appendChild(ot).disabled=!0,ot.querySelectorAll(":disabled").length!==2&&Er.push(":enabled",":disabled"),ot.querySelectorAll("*,:x"),Er.push(",.*:")})),(U.matchesSelector=Pc.test(bi=Ar.matches||Ar.webkitMatchesSelector||Ar.mozMatchesSelector||Ar.oMatchesSelector||Ar.msMatchesSelector))&&Ra(function(ot){U.disconnectedMatch=bi.call(ot,"*"),bi.call(ot,"[s!='']:x"),us.push("!=",Gs)}),U.cssHas||Er.push(":has"),Er=Er.length&&new RegExp(Er.join("|")),us=us.length&&new RegExp(us.join("|")),ze=Pc.test(Ar.compareDocumentPosition),ds=ze||Pc.test(Ar.contains)?function(ot,cn){var Tn=ot.nodeType===9&&ot.documentElement||ot,Kn=cn&&cn.parentNode;return ot===Kn||!!(Kn&&Kn.nodeType===1&&(Tn.contains?Tn.contains(Kn):ot.compareDocumentPosition&&ot.compareDocumentPosition(Kn)&16))}:function(ot,cn){if(cn){for(;cn=cn.parentNode;)if(cn===ot)return!0}return!1},ba=ze?function(ot,cn){if(ot===cn)return Sn=!0,0;var Tn=!ot.compareDocumentPosition-!cn.compareDocumentPosition;return Tn||(Tn=(ot.ownerDocument||ot)==(cn.ownerDocument||cn)?ot.compareDocumentPosition(cn):1,Tn&1||!U.sortDetached&&cn.compareDocumentPosition(ot)===Tn?ot==an||ot.ownerDocument==ci&&ds(ci,ot)?-1:cn==an||cn.ownerDocument==ci&&ds(ci,cn)?1:Gt?ru(Gt,ot)-ru(Gt,cn):0:Tn&4?-1:1)}:function(ot,cn){if(ot===cn)return Sn=!0,0;var Tn,Kn=0,tr=ot.parentNode,Rr=cn.parentNode,zr=[ot],lr=[cn];if(!tr||!Rr)return ot==an?-1:cn==an?1:tr?-1:Rr?1:Gt?ru(Gt,ot)-ru(Gt,cn):0;if(tr===Rr)return mh(ot,cn);for(Tn=ot;Tn=Tn.parentNode;)zr.unshift(Tn);for(Tn=cn;Tn=Tn.parentNode;)lr.unshift(Tn);for(;zr[Kn]===lr[Kn];)Kn++;return Kn?mh(zr[Kn],lr[Kn]):zr[Kn]==ci?-1:lr[Kn]==ci?1:0}),an},ui.matches=function(Oe,ze){return ui(Oe,null,null,ze)},ui.matchesSelector=function(Oe,ze){if(Rt(Oe),U.matchesSelector&&Zr&&!Xs[ze+" "]&&(!us||!us.test(ze))&&(!Er||!Er.test(ze)))try{var ht=bi.call(Oe,ze);if(ht||U.disconnectedMatch||Oe.document&&Oe.document.nodeType!==11)return ht}catch(rn){Xs(ze,!0)}return ui(ze,an,null,[Oe]).length>0},ui.contains=function(Oe,ze){return(Oe.ownerDocument||Oe)!=an&&Rt(Oe),ds(Oe,ze)},ui.attr=function(Oe,ze){(Oe.ownerDocument||Oe)!=an&&Rt(Oe);var ht=W.attrHandle[ze.toLowerCase()],rn=ht&&dl.call(W.attrHandle,ze.toLowerCase())?ht(Oe,ze,!Zr):void 0;return rn!==void 0?rn:U.attributes||!Zr?Oe.getAttribute(ze):(rn=Oe.getAttributeNode(ze))&&rn.specified?rn.value:null},ui.escape=function(Oe){return(Oe+"").replace(Du,lc)},ui.error=function(Oe){throw new Error("Syntax error, unrecognized expression: "+Oe)},ui.uniqueSort=function(Oe){var ze,ht=[],rn=0,ot=0;if(Sn=!U.detectDuplicates,Gt=!U.sortStable&&Oe.slice(0),Oe.sort(ba),Sn){for(;ze=Oe[ot++];)ze===Oe[ot]&&(rn=ht.push(ot));for(;rn--;)Oe.splice(ht[rn],1)}return Gt=null,Oe},ae=ui.getText=function(Oe){var ze,ht="",rn=0,ot=Oe.nodeType;if(ot){if(ot===1||ot===9||ot===11){if(typeof Oe.textContent=="string")return Oe.textContent;for(Oe=Oe.firstChild;Oe;Oe=Oe.nextSibling)ht+=ae(Oe)}else if(ot===3||ot===4)return Oe.nodeValue}else for(;ze=Oe[rn++];)ht+=ae(ze);return ht},W=ui.selectors={cacheLength:50,createPseudo:wo,match:iu,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Oe){return Oe[1]=Oe[1].replace(ts,Ia),Oe[3]=(Oe[3]||Oe[4]||Oe[5]||"").replace(ts,Ia),Oe[2]==="~="&&(Oe[3]=" "+Oe[3]+" "),Oe.slice(0,4)},CHILD:function(Oe){return Oe[1]=Oe[1].toLowerCase(),Oe[1].slice(0,3)==="nth"?(Oe[3]||ui.error(Oe[0]),Oe[4]=+(Oe[4]?Oe[5]+(Oe[6]||1):2*(Oe[3]==="even"||Oe[3]==="odd")),Oe[5]=+(Oe[7]+Oe[8]||Oe[3]==="odd")):Oe[3]&&ui.error(Oe[0]),Oe},PSEUDO:function(Oe){var ze,ht=!Oe[6]&&Oe[2];return iu.CHILD.test(Oe[0])?null:(Oe[3]?Oe[2]=Oe[4]||Oe[5]||"":ht&&Ou.test(ht)&&(ze=xe(ht,!0))&&(ze=ht.indexOf(")",ht.length-ze)-ht.length)&&(Oe[0]=Oe[0].slice(0,ze),Oe[2]=ht.slice(0,ze)),Oe.slice(0,3))}},filter:{TAG:function(Oe){var ze=Oe.replace(ts,Ia).toLowerCase();return Oe==="*"?function(){return!0}:function(ht){return ht.nodeName&&ht.nodeName.toLowerCase()===ze}},CLASS:function(Oe){var ze=bo[Oe+" "];return ze||(ze=new RegExp("(^|"+Pi+")"+Oe+"("+Pi+"|$)"))&&bo(Oe,function(ht){return ze.test(typeof ht.className=="string"&&ht.className||typeof ht.getAttribute!="undefined"&&ht.getAttribute("class")||"")})},ATTR:function(Oe,ze,ht){return function(rn){var ot=ui.attr(rn,Oe);return ot==null?ze==="!=":ze?(ot+="",ze==="="?ot===ht:ze==="!="?ot!==ht:ze==="^="?ht&&ot.indexOf(ht)===0:ze==="*="?ht&&ot.indexOf(ht)>-1:ze==="$="?ht&&ot.slice(-ht.length)===ht:ze==="~="?(" "+ot.replace(fl," ")+" ").indexOf(ht)>-1:ze==="|="?ot===ht||ot.slice(0,ht.length+1)===ht+"-":!1):!0}},CHILD:function(Oe,ze,ht,rn,ot){var cn=Oe.slice(0,3)!=="nth",Tn=Oe.slice(-4)!=="last",Kn=ze==="of-type";return rn===1&&ot===0?function(tr){return!!tr.parentNode}:function(tr,Rr,zr){var lr,qr,Xi,ur,ns,Ks,Es=cn!==Tn?"nextSibling":"previousSibling",ho=tr.parentNode,Ru=Kn&&tr.nodeName.toLowerCase(),rs=!zr&&!Kn,Lo=!1;if(ho){if(cn){for(;Es;){for(ur=tr;ur=ur[Es];)if(Kn?ur.nodeName.toLowerCase()===Ru:ur.nodeType===1)return!1;Ks=Es=Oe==="only"&&!Ks&&"nextSibling"}return!0}if(Ks=[Tn?ho.firstChild:ho.lastChild],Tn&&rs){for(ur=ho,Xi=ur[$r]||(ur[$r]={}),qr=Xi[ur.uniqueID]||(Xi[ur.uniqueID]={}),lr=qr[Oe]||[],ns=lr[0]===sa&&lr[1],Lo=ns&&lr[2],ur=ns&&ho.childNodes[ns];ur=++ns&&ur&&ur[Es]||(Lo=ns=0)||Ks.pop();)if(ur.nodeType===1&&++Lo&&ur===tr){qr[Oe]=[sa,ns,Lo];break}}else if(rs&&(ur=tr,Xi=ur[$r]||(ur[$r]={}),qr=Xi[ur.uniqueID]||(Xi[ur.uniqueID]={}),lr=qr[Oe]||[],ns=lr[0]===sa&&lr[1],Lo=ns),Lo===!1)for(;(ur=++ns&&ur&&ur[Es]||(Lo=ns=0)||Ks.pop())&&!((Kn?ur.nodeName.toLowerCase()===Ru:ur.nodeType===1)&&++Lo&&(rs&&(Xi=ur[$r]||(ur[$r]={}),qr=Xi[ur.uniqueID]||(Xi[ur.uniqueID]={}),qr[Oe]=[sa,Lo]),ur===tr)););return Lo-=ot,Lo===rn||Lo%rn===0&&Lo/rn>=0}}},PSEUDO:function(Oe,ze){var ht,rn=W.pseudos[Oe]||W.setFilters[Oe.toLowerCase()]||ui.error("unsupported pseudo: "+Oe);return rn[$r]?rn(ze):rn.length>1?(ht=[Oe,Oe,"",ze],W.setFilters.hasOwnProperty(Oe.toLowerCase())?wo(function(ot,cn){for(var Tn,Kn=rn(ot,ze),tr=Kn.length;tr--;)Tn=ru(ot,Kn[tr]),ot[Tn]=!(cn[Tn]=Kn[tr])}):function(ot){return rn(ot,0,ht)}):rn}},pseudos:{not:wo(function(Oe){var ze=[],ht=[],rn=tt(Oe.replace(aa,"$1"));return rn[$r]?wo(function(ot,cn,Tn,Kn){for(var tr,Rr=rn(ot,null,Kn,[]),zr=ot.length;zr--;)(tr=Rr[zr])&&(ot[zr]=!(cn[zr]=tr))}):function(ot,cn,Tn){return ze[0]=ot,rn(ze,null,Tn,ht),ze[0]=null,!ht.pop()}}),has:wo(function(Oe){return function(ze){return ui(Oe,ze).length>0}}),contains:wo(function(Oe){return Oe=Oe.replace(ts,Ia),function(ze){return(ze.textContent||ae(ze)).indexOf(Oe)>-1}}),lang:wo(function(Oe){return vp.test(Oe||"")||ui.error("unsupported lang: "+Oe),Oe=Oe.replace(ts,Ia).toLowerCase(),function(ze){var ht;do if(ht=Zr?ze.lang:ze.getAttribute("xml:lang")||ze.getAttribute("lang"))return ht=ht.toLowerCase(),ht===Oe||ht.indexOf(Oe+"-")===0;while((ze=ze.parentNode)&&ze.nodeType===1);return!1}}),target:function(Oe){var ze=S.location&&S.location.hash;return ze&&ze.slice(1)===Oe.id},root:function(Oe){return Oe===Ar},focus:function(Oe){return Oe===an.activeElement&&(!an.hasFocus||an.hasFocus())&&!!(Oe.type||Oe.href||~Oe.tabIndex)},enabled:bt(!1),disabled:bt(!0),checked:function(Oe){var ze=Oe.nodeName.toLowerCase();return ze==="input"&&!!Oe.checked||ze==="option"&&!!Oe.selected},selected:function(Oe){return Oe.parentNode&&Oe.parentNode.selectedIndex,Oe.selected===!0},empty:function(Oe){for(Oe=Oe.firstChild;Oe;Oe=Oe.nextSibling)if(Oe.nodeType<6)return!1;return!0},parent:function(Oe){return!W.pseudos.empty(Oe)},header:function(Oe){return Pu.test(Oe.nodeName)},input:function(Oe){return pl.test(Oe.nodeName)},button:function(Oe){var ze=Oe.nodeName.toLowerCase();return ze==="input"&&Oe.type==="button"||ze==="button"},text:function(Oe){var ze;return Oe.nodeName.toLowerCase()==="input"&&Oe.type==="text"&&((ze=Oe.getAttribute("type"))==null||ze.toLowerCase()==="text")},first:tn(function(){return[0]}),last:tn(function(Oe,ze){return[ze-1]}),eq:tn(function(Oe,ze,ht){return[ht<0?ht+ze:ht]}),even:tn(function(Oe,ze){for(var ht=0;ht<ze;ht+=2)Oe.push(ht);return Oe}),odd:tn(function(Oe,ze){for(var ht=1;ht<ze;ht+=2)Oe.push(ht);return Oe}),lt:tn(function(Oe,ze,ht){for(var rn=ht<0?ht+ze:ht>ze?ze:ht;--rn>=0;)Oe.push(rn);return Oe}),gt:tn(function(Oe,ze,ht){for(var rn=ht<0?ht+ze:ht;++rn<ze;)Oe.push(rn);return Oe})}},W.pseudos.nth=W.pseudos.eq;for(R in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})W.pseudos[R]=mp(R);for(R in{submit:!0,reset:!0})W.pseudos[R]=xa(R);function pr(){}pr.prototype=W.filters=W.pseudos,W.setFilters=new pr,xe=ui.tokenize=function(Oe,ze){var ht,rn,ot,cn,Tn,Kn,tr,Rr=nu[Oe+" "];if(Rr)return ze?0:Rr.slice(0);for(Tn=Oe,Kn=[],tr=W.preFilter;Tn;){(!ht||(rn=ac.exec(Tn)))&&(rn&&(Tn=Tn.slice(rn[0].length)||Tn),Kn.push(ot=[])),ht=!1,(rn=Vo.exec(Tn))&&(ht=rn.shift(),ot.push({value:ht,type:rn[0].replace(aa," ")}),Tn=Tn.slice(ht.length));for(cn in W.filter)(rn=iu[cn].exec(Tn))&&(!tr[cn]||(rn=tr[cn](rn)))&&(ht=rn.shift(),ot.push({value:ht,type:cn,matches:rn}),Tn=Tn.slice(ht.length));if(!ht)break}return ze?Tn.length:Tn?ui.error(Oe):nu(Oe,Kn).slice(0)};function Jr(Oe){for(var ze=0,ht=Oe.length,rn="";ze<ht;ze++)rn+=Oe[ze].value;return rn}function Fi(Oe,ze,ht){var rn=ze.dir,ot=ze.next,cn=ot||rn,Tn=ht&&cn==="parentNode",Kn=Ei++;return ze.first?function(tr,Rr,zr){for(;tr=tr[rn];)if(tr.nodeType===1||Tn)return Oe(tr,Rr,zr);return!1}:function(tr,Rr,zr){var lr,qr,Xi,ur=[sa,Kn];if(zr){for(;tr=tr[rn];)if((tr.nodeType===1||Tn)&&Oe(tr,Rr,zr))return!0}else for(;tr=tr[rn];)if(tr.nodeType===1||Tn)if(Xi=tr[$r]||(tr[$r]={}),qr=Xi[tr.uniqueID]||(Xi[tr.uniqueID]={}),ot&&ot===tr.nodeName.toLowerCase())tr=tr[rn]||tr;else{if((lr=qr[cn])&&lr[0]===sa&&lr[1]===Kn)return ur[2]=lr[2];if(qr[cn]=ur,ur[2]=Oe(tr,Rr,zr))return!0}return!1}}function ko(Oe){return Oe.length>1?function(ze,ht,rn){for(var ot=Oe.length;ot--;)if(!Oe[ot](ze,ht,rn))return!1;return!0}:Oe[0]}function uo(Oe,ze,ht){for(var rn=0,ot=ze.length;rn<ot;rn++)ui(Oe,ze[rn],ht);return ht}function Nu(Oe,ze,ht,rn,ot){for(var cn,Tn=[],Kn=0,tr=Oe.length,Rr=ze!=null;Kn<tr;Kn++)(cn=Oe[Kn])&&(!ht||ht(cn,rn,ot))&&(Tn.push(cn),Rr&&ze.push(Kn));return Tn}function xf(Oe,ze,ht,rn,ot,cn){return rn&&!rn[$r]&&(rn=xf(rn)),ot&&!ot[$r]&&(ot=xf(ot,cn)),wo(function(Tn,Kn,tr,Rr){var zr,lr,qr,Xi=[],ur=[],ns=Kn.length,Ks=Tn||uo(ze||"*",tr.nodeType?[tr]:tr,[]),Es=Oe&&(Tn||!ze)?Nu(Ks,Xi,Oe,tr,Rr):Ks,ho=ht?ot||(Tn?Oe:ns||rn)?[]:Kn:Es;if(ht&&ht(Es,ho,tr,Rr),rn)for(zr=Nu(ho,ur),rn(zr,[],tr,Rr),lr=zr.length;lr--;)(qr=zr[lr])&&(ho[ur[lr]]=!(Es[ur[lr]]=qr));if(Tn){if(ot||Oe){if(ot){for(zr=[],lr=ho.length;lr--;)(qr=ho[lr])&&zr.push(Es[lr]=qr);ot(null,ho=[],zr,Rr)}for(lr=ho.length;lr--;)(qr=ho[lr])&&(zr=ot?ru(Tn,qr):Xi[lr])>-1&&(Tn[zr]=!(Kn[zr]=qr))}}else ho=Nu(ho===Kn?ho.splice(ns,ho.length):ho),ot?ot(null,Kn,ho,Rr):Ps.apply(Kn,ho)})}function Ca(Oe){for(var ze,ht,rn,ot=Oe.length,cn=W.relative[Oe[0].type],Tn=cn||W.relative[" "],Kn=cn?1:0,tr=Fi(function(lr){return lr===ze},Tn,!0),Rr=Fi(function(lr){return ru(ze,lr)>-1},Tn,!0),zr=[function(lr,qr,Xi){var ur=!cn&&(Xi||qr!==Et)||((ze=qr).nodeType?tr(lr,qr,Xi):Rr(lr,qr,Xi));return ze=null,ur}];Kn<ot;Kn++)if(ht=W.relative[Oe[Kn].type])zr=[Fi(ko(zr),ht)];else{if(ht=W.filter[Oe[Kn].type].apply(null,Oe[Kn].matches),ht[$r]){for(rn=++Kn;rn<ot&&!W.relative[Oe[rn].type];rn++);return xf(Kn>1&&ko(zr),Kn>1&&Jr(Oe.slice(0,Kn-1).concat({value:Oe[Kn-2].type===" "?"*":""})).replace(aa,"$1"),ht,Kn<rn&&Ca(Oe.slice(Kn,rn)),rn<ot&&Ca(Oe=Oe.slice(rn)),rn<ot&&Jr(Oe))}zr.push(ht)}return ko(zr)}function Iu(Oe,ze){var ht=ze.length>0,rn=Oe.length>0,ot=function(cn,Tn,Kn,tr,Rr){var zr,lr,qr,Xi=0,ur="0",ns=cn&&[],Ks=[],Es=Et,ho=cn||rn&&W.find.TAG("*",Rr),Ru=sa+=Es==null?1:Math.random()||.1,rs=ho.length;for(Rr&&(Et=Tn==an||Tn||Rr);ur!==rs&&(zr=ho[ur])!=null;ur++){if(rn&&zr){for(lr=0,!Tn&&zr.ownerDocument!=an&&(Rt(zr),Kn=!Zr);qr=Oe[lr++];)if(qr(zr,Tn||an,Kn)){tr.push(zr);break}Rr&&(sa=Ru)}ht&&((zr=!qr&&zr)&&Xi--,cn&&ns.push(zr))}if(Xi+=ur,ht&&ur!==Xi){for(lr=0;qr=ze[lr++];)qr(ns,Ks,Tn,Kn);if(cn){if(Xi>0)for(;ur--;)ns[ur]||Ks[ur]||(Ks[ur]=jl.call(tr));Ks=Nu(Ks)}Ps.apply(tr,Ks),Rr&&!cn&&Ks.length>0&&Xi+ze.length>1&&ui.uniqueSort(tr)}return Rr&&(sa=Ru,Et=Es),ns};return ht?wo(ot):ot}return tt=ui.compile=function(Oe,ze){var ht,rn=[],ot=[],cn=Uo[Oe+" "];if(!cn){for(ze||(ze=xe(Oe)),ht=ze.length;ht--;)cn=Ca(ze[ht]),cn[$r]?rn.push(cn):ot.push(cn);cn=Uo(Oe,Iu(ot,rn)),cn.selector=Oe}return cn},qe=ui.select=function(Oe,ze,ht,rn){var ot,cn,Tn,Kn,tr,Rr=typeof Oe=="function"&&Oe,zr=!rn&&xe(Oe=Rr.selector||Oe);if(ht=ht||[],zr.length===1){if(cn=zr[0]=zr[0].slice(0),cn.length>2&&(Tn=cn[0]).type==="ID"&&ze.nodeType===9&&Zr&&W.relative[cn[1].type]){if(ze=(W.find.ID(Tn.matches[0].replace(ts,Ia),ze)||[])[0],ze)Rr&&(ze=ze.parentNode);else return ht;Oe=Oe.slice(cn.shift().value.length)}for(ot=iu.needsContext.test(Oe)?0:cn.length;ot--&&(Tn=cn[ot],!W.relative[Kn=Tn.type]);)if((tr=W.find[Kn])&&(rn=tr(Tn.matches[0].replace(ts,Ia),su.test(cn[0].type)&&Ht(ze.parentNode)||ze))){if(cn.splice(ot,1),Oe=rn.length&&Jr(cn),!Oe)return Ps.apply(ht,rn),ht;break}}return(Rr||tt(Oe,zr))(rn,ze,!Zr,ht,!ze||su.test(Oe)&&Ht(ze.parentNode)||ze),ht},U.sortStable=$r.split("").sort(ba).join("")===$r,U.detectDuplicates=!!Sn,Rt(),U.sortDetached=Ra(function(Oe){return Oe.compareDocumentPosition(an.createElement("fieldset"))&1}),Ra(function(Oe){return Oe.innerHTML="<a href='#'></a>",Oe.firstChild.getAttribute("href")==="#"})||Nc("type|href|height|width",function(Oe,ze,ht){if(!ht)return Oe.getAttribute(ze,ze.toLowerCase()==="type"?1:2)}),(!U.attributes||!Ra(function(Oe){return Oe.innerHTML="<input/>",Oe.firstChild.setAttribute("value",""),Oe.firstChild.getAttribute("value")===""}))&&Nc("value",function(Oe,ze,ht){if(!ht&&Oe.nodeName.toLowerCase()==="input")return Oe.defaultValue}),Ra(function(Oe){return Oe.getAttribute("disabled")==null})||Nc(Za,function(Oe,ze,ht){var rn;if(!ht)return Oe[ze]===!0?ze.toLowerCase():(rn=Oe.getAttributeNode(ze))&&rn.specified?rn.value:null}),ui}(D);G.find=Ke,G.expr=Ke.selectors,G.expr[":"]=G.expr.pseudos,G.uniqueSort=G.unique=Ke.uniqueSort,G.text=Ke.getText,G.isXMLDoc=Ke.isXML,G.contains=Ke.contains,G.escapeSelector=Ke.escape;var dt=function(S,R,U){for(var W=[],ae=U!==void 0;(S=S[R])&&S.nodeType!==9;)if(S.nodeType===1){if(ae&&G(S).is(U))break;W.push(S)}return W},jt=function(S,R){for(var U=[];S;S=S.nextSibling)S.nodeType===1&&S!==R&&U.push(S);return U},mn=G.expr.match.needsContext;function Pe(S,R){return S.nodeName&&S.nodeName.toLowerCase()===R.toLowerCase()}var In=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function hn(S,R,U){return se(R)?G.grep(S,function(W,ae){return!!R.call(W,ae,W)!==U}):R.nodeType?G.grep(S,function(W){return W===R!==U}):typeof R!="string"?G.grep(S,function(W){return oe.call(R,W)>-1!==U}):G.filter(R,S,U)}G.filter=function(S,R,U){var W=R[0];return U&&(S=":not("+S+")"),R.length===1&&W.nodeType===1?G.find.matchesSelector(W,S)?[W]:[]:G.find.matches(S,G.grep(R,function(ae){return ae.nodeType===1}))},G.fn.extend({find:function(S){var R,U,W=this.length,ae=this;if(typeof S!="string")return this.pushStack(G(S).filter(function(){for(R=0;R<W;R++)if(G.contains(ae[R],this))return!0}));for(U=this.pushStack([]),R=0;R<W;R++)G.find(S,ae[R],U);return W>1?G.uniqueSort(U):U},filter:function(S){return this.pushStack(hn(this,S||[],!1))},not:function(S){return this.pushStack(hn(this,S||[],!0))},is:function(S){return!!hn(this,typeof S=="string"&&mn.test(S)?G(S):S||[],!1).length}});var vt,kt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,jn=G.fn.init=function(S,R,U){var W,ae;if(!S)return this;if(U=U||vt,typeof S=="string")if(S[0]==="<"&&S[S.length-1]===">"&&S.length>=3?W=[null,S,null]:W=kt.exec(S),W&&(W[1]||!R))if(W[1]){if(R=R instanceof G?R[0]:R,G.merge(this,G.parseHTML(W[1],R&&R.nodeType?R.ownerDocument||R:fe,!0)),In.test(W[1])&&G.isPlainObject(R))for(W in R)se(this[W])?this[W](R[W]):this.attr(W,R[W]);return this}else return ae=fe.getElementById(W[2]),ae&&(this[0]=ae,this.length=1),this;else return!R||R.jquery?(R||U).find(S):this.constructor(R).find(S);else{if(S.nodeType)return this[0]=S,this.length=1,this;if(se(S))return U.ready!==void 0?U.ready(S):S(G)}return G.makeArray(S,this)};jn.prototype=G.fn,vt=G(fe);var Zt=/^(?:parents|prev(?:Until|All))/,gr={children:!0,contents:!0,next:!0,prev:!0};G.fn.extend({has:function(S){var R=G(S,this),U=R.length;return this.filter(function(){for(var W=0;W<U;W++)if(G.contains(this,R[W]))return!0})},closest:function(S,R){var U,W=0,ae=this.length,de=[],xe=typeof S!="string"&&G(S);if(!mn.test(S)){for(;W<ae;W++)for(U=this[W];U&&U!==R;U=U.parentNode)if(U.nodeType<11&&(xe?xe.index(U)>-1:U.nodeType===1&&G.find.matchesSelector(U,S))){de.push(U);break}}return this.pushStack(de.length>1?G.uniqueSort(de):de)},index:function(S){return S?typeof S=="string"?oe.call(G(S),this[0]):oe.call(this,S.jquery?S[0]:S):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(S,R){return this.pushStack(G.uniqueSort(G.merge(this.get(),G(S,R))))},addBack:function(S){return this.add(S==null?this.prevObject:this.prevObject.filter(S))}});function Nr(S,R){for(;(S=S[R])&&S.nodeType!==1;);return S}G.each({parent:function(S){var R=S.parentNode;return R&&R.nodeType!==11?R:null},parents:function(S){return dt(S,"parentNode")},parentsUntil:function(S,R,U){return dt(S,"parentNode",U)},next:function(S){return Nr(S,"nextSibling")},prev:function(S){return Nr(S,"previousSibling")},nextAll:function(S){return dt(S,"nextSibling")},prevAll:function(S){return dt(S,"previousSibling")},nextUntil:function(S,R,U){return dt(S,"nextSibling",U)},prevUntil:function(S,R,U){return dt(S,"previousSibling",U)},siblings:function(S){return jt((S.parentNode||{}).firstChild,S)},children:function(S){return jt(S.firstChild)},contents:function(S){return S.contentDocument!=null&&Z(S.contentDocument)?S.contentDocument:(Pe(S,"template")&&(S=S.content||S),G.merge([],S.childNodes))}},function(S,R){G.fn[S]=function(U,W){var ae=G.map(this,R,U);return S.slice(-5)!=="Until"&&(W=U),W&&typeof W=="string"&&(ae=G.filter(W,ae)),this.length>1&&(gr[S]||G.uniqueSort(ae),Zt.test(S)&&ae.reverse()),this.pushStack(ae)}});var Qn=/[^\x20\t\r\n\f]+/g;function Hr(S){var R={};return G.each(S.match(Qn)||[],function(U,W){R[W]=!0}),R}G.Callbacks=function(S){S=typeof S=="string"?Hr(S):G.extend({},S);var R,U,W,ae,de=[],xe=[],tt=-1,qe=function(){for(ae=ae||S.once,W=R=!0;xe.length;tt=-1)for(U=xe.shift();++tt<de.length;)de[tt].apply(U[0],U[1])===!1&&S.stopOnFalse&&(tt=de.length,U=!1);S.memory||(U=!1),R=!1,ae&&(U?de=[]:de="")},Et={add:function(){return de&&(U&&!R&&(tt=de.length-1,xe.push(U)),function Gt(Sn){G.each(Sn,function(Rt,an){se(an)?(!S.unique||!Et.has(an))&&de.push(an):an&&an.length&&Ee(an)!=="string"&&Gt(an)})}(arguments),U&&!R&&qe()),this},remove:function(){return G.each(arguments,function(Gt,Sn){for(var Rt;(Rt=G.inArray(Sn,de,Rt))>-1;)de.splice(Rt,1),Rt<=tt&&tt--}),this},has:function(Gt){return Gt?G.inArray(Gt,de)>-1:de.length>0},empty:function(){return de&&(de=[]),this},disable:function(){return ae=xe=[],de=U="",this},disabled:function(){return!de},lock:function(){return ae=xe=[],!U&&!R&&(de=U=""),this},locked:function(){return!!ae},fireWith:function(Gt,Sn){return ae||(Sn=Sn||[],Sn=[Gt,Sn.slice?Sn.slice():Sn],xe.push(Sn),R||qe()),this},fire:function(){return Et.fireWith(this,arguments),this},fired:function(){return!!W}};return Et};function vr(S){return S}function Le(S){throw S}function Ve(S,R,U,W){var ae;try{S&&se(ae=S.promise)?ae.call(S).done(R).fail(U):S&&se(ae=S.then)?ae.call(S,R,U):R.apply(void 0,[S].slice(W))}catch(de){U.apply(void 0,[de])}}G.extend({Deferred:function(S){var R=[["notify","progress",G.Callbacks("memory"),G.Callbacks("memory"),2],["resolve","done",G.Callbacks("once memory"),G.Callbacks("once memory"),0,"resolved"],["reject","fail",G.Callbacks("once memory"),G.Callbacks("once memory"),1,"rejected"]],U="pending",W={state:function(){return U},always:function(){return ae.done(arguments).fail(arguments),this},catch:function(de){return W.then(null,de)},pipe:function(){var de=arguments;return G.Deferred(function(xe){G.each(R,function(tt,qe){var Et=se(de[qe[4]])&&de[qe[4]];ae[qe[1]](function(){var Gt=Et&&Et.apply(this,arguments);Gt&&se(Gt.promise)?Gt.promise().progress(xe.notify).done(xe.resolve).fail(xe.reject):xe[qe[0]+"With"](this,Et?[Gt]:arguments)})}),de=null}).promise()},then:function(de,xe,tt){var qe=0;function Et(Gt,Sn,Rt,an){return function(){var Ar=this,Zr=arguments,Er=function(){var bi,ds;if(!(Gt<qe)){if(bi=Rt.apply(Ar,Zr),bi===Sn.promise())throw new TypeError("Thenable self-resolution");ds=bi&&(typeof bi=="object"||typeof bi=="function")&&bi.then,se(ds)?an?ds.call(bi,Et(qe,Sn,vr,an),Et(qe,Sn,Le,an)):(qe++,ds.call(bi,Et(qe,Sn,vr,an),Et(qe,Sn,Le,an),Et(qe,Sn,vr,Sn.notifyWith))):(Rt!==vr&&(Ar=void 0,Zr=[bi]),(an||Sn.resolveWith)(Ar,Zr))}},us=an?Er:function(){try{Er()}catch(bi){G.Deferred.exceptionHook&&G.Deferred.exceptionHook(bi,us.stackTrace),Gt+1>=qe&&(Rt!==Le&&(Ar=void 0,Zr=[bi]),Sn.rejectWith(Ar,Zr))}};Gt?us():(G.Deferred.getStackHook&&(us.stackTrace=G.Deferred.getStackHook()),D.setTimeout(us))}}return G.Deferred(function(Gt){R[0][3].add(Et(0,Gt,se(tt)?tt:vr,Gt.notifyWith)),R[1][3].add(Et(0,Gt,se(de)?de:vr)),R[2][3].add(Et(0,Gt,se(xe)?xe:Le))}).promise()},promise:function(de){return de!=null?G.extend(de,W):W}},ae={};return G.each(R,function(de,xe){var tt=xe[2],qe=xe[5];W[xe[1]]=tt.add,qe&&tt.add(function(){U=qe},R[3-de][2].disable,R[3-de][3].disable,R[0][2].lock,R[0][3].lock),tt.add(xe[3].fire),ae[xe[0]]=function(){return ae[xe[0]+"With"](this===ae?void 0:this,arguments),this},ae[xe[0]+"With"]=tt.fireWith}),W.promise(ae),S&&S.call(ae,ae),ae},when:function(S){var R=arguments.length,U=R,W=Array(U),ae=ee.call(arguments),de=G.Deferred(),xe=function(tt){return function(qe){W[tt]=this,ae[tt]=arguments.length>1?ee.call(arguments):qe,--R||de.resolveWith(W,ae)}};if(R<=1&&(Ve(S,de.done(xe(U)).resolve,de.reject,!R),de.state()==="pending"||se(ae[U]&&ae[U].then)))return de.then();for(;U--;)Ve(ae[U],xe(U),de.reject);return de.promise()}});var Xe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;G.Deferred.exceptionHook=function(S,R){D.console&&D.console.warn&&S&&Xe.test(S.name)&&D.console.warn("jQuery.Deferred exception: "+S.message,S.stack,R)},G.readyException=function(S){D.setTimeout(function(){throw S})};var Vt=G.Deferred();G.fn.ready=function(S){return Vt.then(S).catch(function(R){G.readyException(R)}),this},G.extend({isReady:!1,readyWait:1,ready:function(S){(S===!0?--G.readyWait:G.isReady)||(G.isReady=!0,!(S!==!0&&--G.readyWait>0)&&Vt.resolveWith(fe,[G]))}}),G.ready.then=Vt.then;function Rn(){fe.removeEventListener("DOMContentLoaded",Rn),D.removeEventListener("load",Rn),G.ready()}fe.readyState==="complete"||fe.readyState!=="loading"&&!fe.documentElement.doScroll?D.setTimeout(G.ready):(fe.addEventListener("DOMContentLoaded",Rn),D.addEventListener("load",Rn));var Fn=function(S,R,U,W,ae,de,xe){var tt=0,qe=S.length,Et=U==null;if(Ee(U)==="object"){ae=!0;for(tt in U)Fn(S,R,tt,U[tt],!0,de,xe)}else if(W!==void 0&&(ae=!0,se(W)||(xe=!0),Et&&(xe?(R.call(S,W),R=null):(Et=R,R=function(Gt,Sn,Rt){return Et.call(G(Gt),Rt)})),R))for(;tt<qe;tt++)R(S[tt],U,xe?W:W.call(S[tt],tt,R(S[tt],U)));return ae?S:Et?R.call(S):qe?R(S[0],U):de},_r=/^-ms-/,ri=/-([a-z])/g;function Gr(S,R){return R.toUpperCase()}function ti(S){return S.replace(_r,"ms-").replace(ri,Gr)}var Oi=function(S){return S.nodeType===1||S.nodeType===9||!+S.nodeType};function lo(){this.expando=G.expando+lo.uid++}lo.uid=1,lo.prototype={cache:function(S){var R=S[this.expando];return R||(R={},Oi(S)&&(S.nodeType?S[this.expando]=R:Object.defineProperty(S,this.expando,{value:R,configurable:!0}))),R},set:function(S,R,U){var W,ae=this.cache(S);if(typeof R=="string")ae[ti(R)]=U;else for(W in R)ae[ti(W)]=R[W];return ae},get:function(S,R){return R===void 0?this.cache(S):S[this.expando]&&S[this.expando][ti(R)]},access:function(S,R,U){return R===void 0||R&&typeof R=="string"&&U===void 0?this.get(S,R):(this.set(S,R,U),U!==void 0?U:R)},remove:function(S,R){var U,W=S[this.expando];if(W!==void 0){if(R!==void 0)for(Array.isArray(R)?R=R.map(ti):(R=ti(R),R=R in W?[R]:R.match(Qn)||[]),U=R.length;U--;)delete W[R[U]];(R===void 0||G.isEmptyObject(W))&&(S.nodeType?S[this.expando]=void 0:delete S[this.expando])}},hasData:function(S){var R=S[this.expando];return R!==void 0&&!G.isEmptyObject(R)}};var F=new lo,H=new lo,sf=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Te=/[A-Z]/g;function cl(S){return S==="true"?!0:S==="false"?!1:S==="null"?null:S===+S+""?+S:sf.test(S)?JSON.parse(S):S}function wr(S,R,U){var W;if(U===void 0&&S.nodeType===1)if(W="data-"+R.replace(Te,"-$&").toLowerCase(),U=S.getAttribute(W),typeof U=="string"){try{U=cl(U)}catch(ae){}H.set(S,R,U)}else U=void 0;return U}G.extend({hasData:function(S){return H.hasData(S)||F.hasData(S)},data:function(S,R,U){return H.access(S,R,U)},removeData:function(S,R){H.remove(S,R)},_data:function(S,R,U){return F.access(S,R,U)},_removeData:function(S,R){F.remove(S,R)}}),G.fn.extend({data:function(S,R){var U,W,ae,de=this[0],xe=de&&de.attributes;if(S===void 0){if(this.length&&(ae=H.get(de),de.nodeType===1&&!F.get(de,"hasDataAttrs"))){for(U=xe.length;U--;)xe[U]&&(W=xe[U].name,W.indexOf("data-")===0&&(W=ti(W.slice(5)),wr(de,W,ae[W])));F.set(de,"hasDataAttrs",!0)}return ae}return typeof S=="object"?this.each(function(){H.set(this,S)}):Fn(this,function(tt){var qe;if(de&&tt===void 0)return qe=H.get(de,S),qe!==void 0||(qe=wr(de,S),qe!==void 0)?qe:void 0;this.each(function(){H.set(this,S,tt)})},null,R,arguments.length>1,null,!0)},removeData:function(S){return this.each(function(){H.remove(this,S)})}}),G.extend({queue:function(S,R,U){var W;if(S)return R=(R||"fx")+"queue",W=F.get(S,R),U&&(!W||Array.isArray(U)?W=F.access(S,R,G.makeArray(U)):W.push(U)),W||[]},dequeue:function(S,R){R=R||"fx";var U=G.queue(S,R),W=U.length,ae=U.shift(),de=G._queueHooks(S,R),xe=function(){G.dequeue(S,R)};ae==="inprogress"&&(ae=U.shift(),W--),ae&&(R==="fx"&&U.unshift("inprogress"),delete de.stop,ae.call(S,xe,de)),!W&&de&&de.empty.fire()},_queueHooks:function(S,R){var U=R+"queueHooks";return F.get(S,U)||F.access(S,U,{empty:G.Callbacks("once memory").add(function(){F.remove(S,[R+"queue",U])})})}}),G.fn.extend({queue:function(S,R){var U=2;return typeof S!="string"&&(R=S,S="fx",U--),arguments.length<U?G.queue(this[0],S):R===void 0?this:this.each(function(){var W=G.queue(this,S,R);G._queueHooks(this,S),S==="fx"&&W[0]!=="inprogress"&&G.dequeue(this,S)})},dequeue:function(S){return this.each(function(){G.dequeue(this,S)})},clearQueue:function(S){return this.queue(S||"fx",[])},promise:function(S,R){var U,W=1,ae=G.Deferred(),de=this,xe=this.length,tt=function(){--W||ae.resolveWith(de,[de])};for(typeof S!="string"&&(R=S,S=void 0),S=S||"fx";xe--;)U=F.get(de[xe],S+"queueHooks"),U&&U.empty&&(W++,U.empty.add(tt));return tt(),ae.promise(R)}});var Pa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ic=new RegExp("^(?:([+-])=|)("+Pa+")([a-z%]*)$","i"),Qo=["Top","Right","Bottom","Left"],Da=fe.documentElement,Nt=function(S){return G.contains(S.ownerDocument,S)},Yt={composed:!0};Da.getRootNode&&(Nt=function(S){return G.contains(S.ownerDocument,S)||S.getRootNode(Yt)===S.ownerDocument});var Pt=function(S,R){return S=R||S,S.style.display==="none"||S.style.display===""&&Nt(S)&&G.css(S,"display")==="none"};function Kt(S,R,U,W){var ae,de,xe=20,tt=W?function(){return W.cur()}:function(){return G.css(S,R,"")},qe=tt(),Et=U&&U[3]||(G.cssNumber[R]?"":"px"),Gt=S.nodeType&&(G.cssNumber[R]||Et!=="px"&&+qe)&&ic.exec(G.css(S,R));if(Gt&&Gt[3]!==Et){for(qe=qe/2,Et=Et||Gt[3],Gt=+qe||1;xe--;)G.style(S,R,Gt+Et),(1-de)*(1-(de=tt()/qe||.5))<=0&&(xe=0),Gt=Gt/de;Gt=Gt*2,G.style(S,R,Gt+Et),U=U||[]}return U&&(Gt=+Gt||+qe||0,ae=U[1]?Gt+(U[1]+1)*U[2]:+U[2],W&&(W.unit=Et,W.start=Gt,W.end=ae)),ae}var or={};function $i(S){var R,U=S.ownerDocument,W=S.nodeName,ae=or[W];return ae||(R=U.body.appendChild(U.createElement(W)),ae=G.css(R,"display"),R.parentNode.removeChild(R),ae==="none"&&(ae="block"),or[W]=ae,ae)}function Xr(S,R){for(var U,W,ae=[],de=0,xe=S.length;de<xe;de++)W=S[de],W.style&&(U=W.style.display,R?(U==="none"&&(ae[de]=F.get(W,"display")||null,ae[de]||(W.style.display="")),W.style.display===""&&Pt(W)&&(ae[de]=$i(W))):U!=="none"&&(ae[de]="none",F.set(W,"display",U)));for(de=0;de<xe;de++)ae[de]!=null&&(S[de].style.display=ae[de]);return S}G.fn.extend({show:function(){return Xr(this,!0)},hide:function(){return Xr(this)},toggle:function(S){return typeof S=="boolean"?S?this.show():this.hide():this.each(function(){Pt(this)?G(this).show():G(this).hide()})}});var ni=/^(?:checkbox|radio)$/i,Ir=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yi=/^$|^module$|\/(?:java|ecma)script/i;(function(){var S=fe.createDocumentFragment(),R=S.appendChild(fe.createElement("div")),U=fe.createElement("input");U.setAttribute("type","radio"),U.setAttribute("checked","checked"),U.setAttribute("name","t"),R.appendChild(U),be.checkClone=R.cloneNode(!0).cloneNode(!0).lastChild.checked,R.innerHTML="<textarea>x</textarea>",be.noCloneChecked=!!R.cloneNode(!0).lastChild.defaultValue,R.innerHTML="<option></option>",be.option=!!R.lastChild})();var ii={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ii.tbody=ii.tfoot=ii.colgroup=ii.caption=ii.thead,ii.th=ii.td,be.option||(ii.optgroup=ii.option=[1,"<select multiple='multiple'>","</select>"]);function zo(S,R){var U;return typeof S.getElementsByTagName!="undefined"?U=S.getElementsByTagName(R||"*"):typeof S.querySelectorAll!="undefined"?U=S.querySelectorAll(R||"*"):U=[],R===void 0||R&&Pe(S,R)?G.merge([S],U):U}function ul(S,R){for(var U=0,W=S.length;U<W;U++)F.set(S[U],"globalEval",!R||F.get(R[U],"globalEval"))}var wg=/<|&#?\w+;/;function oc(S,R,U,W,ae){for(var de,xe,tt,qe,Et,Gt,Sn=R.createDocumentFragment(),Rt=[],an=0,Ar=S.length;an<Ar;an++)if(de=S[an],de||de===0)if(Ee(de)==="object")G.merge(Rt,de.nodeType?[de]:de);else if(!wg.test(de))Rt.push(R.createTextNode(de));else{for(xe=xe||Sn.appendChild(R.createElement("div")),tt=(Ir.exec(de)||["",""])[1].toLowerCase(),qe=ii[tt]||ii._default,xe.innerHTML=qe[1]+G.htmlPrefilter(de)+qe[2],Gt=qe[0];Gt--;)xe=xe.lastChild;G.merge(Rt,xe.childNodes),xe=Sn.firstChild,xe.textContent=""}for(Sn.textContent="",an=0;de=Rt[an++];){if(W&&G.inArray(de,W)>-1){ae&&ae.push(de);continue}if(Et=Nt(de),xe=zo(Sn.appendChild(de),"script"),Et&&ul(xe),U)for(Gt=0;de=xe[Gt++];)yi.test(de.type||"")&&U.push(de)}return Sn}var sh=/^([^.]*)(?:\.(.+)|)/;function $a(){return!0}function cs(){return!1}function lp(S,R){return S===cd()==(R==="focus")}function cd(){try{return fe.activeElement}catch(S){}}function es(S,R,U,W,ae,de){var xe,tt;if(typeof R=="object"){typeof U!="string"&&(W=W||U,U=void 0);for(tt in R)es(S,tt,U,W,R[tt],de);return S}if(W==null&&ae==null?(ae=U,W=U=void 0):ae==null&&(typeof U=="string"?(ae=W,W=void 0):(ae=W,W=U,U=void 0)),ae===!1)ae=cs;else if(!ae)return S;return de===1&&(xe=ae,ae=function(qe){return G().off(qe),xe.apply(this,arguments)},ae.guid=xe.guid||(xe.guid=G.guid++)),S.each(function(){G.event.add(this,R,ae,W,U)})}G.event={global:{},add:function(S,R,U,W,ae){var de,xe,tt,qe,Et,Gt,Sn,Rt,an,Ar,Zr,Er=F.get(S);if(Oi(S))for(U.handler&&(de=U,U=de.handler,ae=de.selector),ae&&G.find.matchesSelector(Da,ae),U.guid||(U.guid=G.guid++),(qe=Er.events)||(qe=Er.events=Object.create(null)),(xe=Er.handle)||(xe=Er.handle=function(us){return typeof G!="undefined"&&G.event.triggered!==us.type?G.event.dispatch.apply(S,arguments):void 0}),R=(R||"").match(Qn)||[""],Et=R.length;Et--;)tt=sh.exec(R[Et])||[],an=Zr=tt[1],Ar=(tt[2]||"").split(".").sort(),an&&(Sn=G.event.special[an]||{},an=(ae?Sn.delegateType:Sn.bindType)||an,Sn=G.event.special[an]||{},Gt=G.extend({type:an,origType:Zr,data:W,handler:U,guid:U.guid,selector:ae,needsContext:ae&&G.expr.match.needsContext.test(ae),namespace:Ar.join(".")},de),(Rt=qe[an])||(Rt=qe[an]=[],Rt.delegateCount=0,(!Sn.setup||Sn.setup.call(S,W,Ar,xe)===!1)&&S.addEventListener&&S.addEventListener(an,xe)),Sn.add&&(Sn.add.call(S,Gt),Gt.handler.guid||(Gt.handler.guid=U.guid)),ae?Rt.splice(Rt.delegateCount++,0,Gt):Rt.push(Gt),G.event.global[an]=!0)},remove:function(S,R,U,W,ae){var de,xe,tt,qe,Et,Gt,Sn,Rt,an,Ar,Zr,Er=F.hasData(S)&&F.get(S);if(!(!Er||!(qe=Er.events))){for(R=(R||"").match(Qn)||[""],Et=R.length;Et--;){if(tt=sh.exec(R[Et])||[],an=Zr=tt[1],Ar=(tt[2]||"").split(".").sort(),!an){for(an in qe)G.event.remove(S,an+R[Et],U,W,!0);continue}for(Sn=G.event.special[an]||{},an=(W?Sn.delegateType:Sn.bindType)||an,Rt=qe[an]||[],tt=tt[2]&&new RegExp("(^|\\.)"+Ar.join("\\.(?:.*\\.|)")+"(\\.|$)"),xe=de=Rt.length;de--;)Gt=Rt[de],(ae||Zr===Gt.origType)&&(!U||U.guid===Gt.guid)&&(!tt||tt.test(Gt.namespace))&&(!W||W===Gt.selector||W==="**"&&Gt.selector)&&(Rt.splice(de,1),Gt.selector&&Rt.delegateCount--,Sn.remove&&Sn.remove.call(S,Gt));xe&&!Rt.length&&((!Sn.teardown||Sn.teardown.call(S,Ar,Er.handle)===!1)&&G.removeEvent(S,an,Er.handle),delete qe[an])}G.isEmptyObject(qe)&&F.remove(S,"handle events")}},dispatch:function(S){var R,U,W,ae,de,xe,tt=new Array(arguments.length),qe=G.event.fix(S),Et=(F.get(this,"events")||Object.create(null))[qe.type]||[],Gt=G.event.special[qe.type]||{};for(tt[0]=qe,R=1;R<arguments.length;R++)tt[R]=arguments[R];if(qe.delegateTarget=this,!(Gt.preDispatch&&Gt.preDispatch.call(this,qe)===!1)){for(xe=G.event.handlers.call(this,qe,Et),R=0;(ae=xe[R++])&&!qe.isPropagationStopped();)for(qe.currentTarget=ae.elem,U=0;(de=ae.handlers[U++])&&!qe.isImmediatePropagationStopped();)(!qe.rnamespace||de.namespace===!1||qe.rnamespace.test(de.namespace))&&(qe.handleObj=de,qe.data=de.data,W=((G.event.special[de.origType]||{}).handle||de.handler).apply(ae.elem,tt),W!==void 0&&(qe.result=W)===!1&&(qe.preventDefault(),qe.stopPropagation()));return Gt.postDispatch&&Gt.postDispatch.call(this,qe),qe.result}},handlers:function(S,R){var U,W,ae,de,xe,tt=[],qe=R.delegateCount,Et=S.target;if(qe&&Et.nodeType&&!(S.type==="click"&&S.button>=1)){for(;Et!==this;Et=Et.parentNode||this)if(Et.nodeType===1&&!(S.type==="click"&&Et.disabled===!0)){for(de=[],xe={},U=0;U<qe;U++)W=R[U],ae=W.selector+" ",xe[ae]===void 0&&(xe[ae]=W.needsContext?G(ae,this).index(Et)>-1:G.find(ae,this,null,[Et]).length),xe[ae]&&de.push(W);de.length&&tt.push({elem:Et,handlers:de})}}return Et=this,qe<R.length&&tt.push({elem:Et,handlers:R.slice(qe)}),tt},addProp:function(S,R){Object.defineProperty(G.Event.prototype,S,{enumerable:!0,configurable:!0,get:se(R)?function(){if(this.originalEvent)return R(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[S]},set:function(U){Object.defineProperty(this,S,{enumerable:!0,configurable:!0,writable:!0,value:U})}})},fix:function(S){return S[G.expando]?S:new G.Event(S)},special:{load:{noBubble:!0},click:{setup:function(S){var R=this||S;return ni.test(R.type)&&R.click&&Pe(R,"input")&&ah(R,"click",$a),!1},trigger:function(S){var R=this||S;return ni.test(R.type)&&R.click&&Pe(R,"input")&&ah(R,"click"),!0},_default:function(S){var R=S.target;return ni.test(R.type)&&R.click&&Pe(R,"input")&&F.get(R,"click")||Pe(R,"a")}},beforeunload:{postDispatch:function(S){S.result!==void 0&&S.originalEvent&&(S.originalEvent.returnValue=S.result)}}}};function ah(S,R,U){if(!U){F.get(S,R)===void 0&&G.event.add(S,R,$a);return}F.set(S,R,!1),G.event.add(S,R,{namespace:!1,handler:function(W){var ae,de,xe=F.get(this,R);if(W.isTrigger&1&&this[R]){if(xe.length)(G.event.special[R]||{}).delegateType&&W.stopPropagation();else if(xe=ee.call(arguments),F.set(this,R,xe),ae=U(this,R),this[R](),de=F.get(this,R),xe!==de||ae?F.set(this,R,!1):de={},xe!==de)return W.stopImmediatePropagation(),W.preventDefault(),de&&de.value}else xe.length&&(F.set(this,R,{value:G.event.trigger(G.extend(xe[0],G.Event.prototype),xe.slice(1),this)}),W.stopImmediatePropagation())}})}G.removeEvent=function(S,R,U){S.removeEventListener&&S.removeEventListener(R,U)},G.Event=function(S,R){if(!(this instanceof G.Event))return new G.Event(S,R);S&&S.type?(this.originalEvent=S,this.type=S.type,this.isDefaultPrevented=S.defaultPrevented||S.defaultPrevented===void 0&&S.returnValue===!1?$a:cs,this.target=S.target&&S.target.nodeType===3?S.target.parentNode:S.target,this.currentTarget=S.currentTarget,this.relatedTarget=S.relatedTarget):this.type=S,R&&G.extend(this,R),this.timeStamp=S&&S.timeStamp||Date.now(),this[G.expando]=!0},G.Event.prototype={constructor:G.Event,isDefaultPrevented:cs,isPropagationStopped:cs,isImmediatePropagationStopped:cs,isSimulated:!1,preventDefault:function(){var S=this.originalEvent;this.isDefaultPrevented=$a,S&&!this.isSimulated&&S.preventDefault()},stopPropagation:function(){var S=this.originalEvent;this.isPropagationStopped=$a,S&&!this.isSimulated&&S.stopPropagation()},stopImmediatePropagation:function(){var S=this.originalEvent;this.isImmediatePropagationStopped=$a,S&&!this.isSimulated&&S.stopImmediatePropagation(),this.stopPropagation()}},G.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},G.event.addProp),G.each({focus:"focusin",blur:"focusout"},function(S,R){G.event.special[S]={setup:function(){return ah(this,S,lp),!1},trigger:function(){return ah(this,S),!0},_default:function(U){return F.get(U.target,S)},delegateType:R}}),G.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(S,R){G.event.special[S]={delegateType:R,bindType:R,handle:function(U){var W,ae=this,de=U.relatedTarget,xe=U.handleObj;return(!de||de!==ae&&!G.contains(ae,de))&&(U.type=xe.origType,W=xe.handler.apply(this,arguments),U.type=R),W}}}),G.fn.extend({on:function(S,R,U,W){return es(this,S,R,U,W)},one:function(S,R,U,W){return es(this,S,R,U,W,1)},off:function(S,R,U){var W,ae;if(S&&S.preventDefault&&S.handleObj)return W=S.handleObj,G(S.delegateTarget).off(W.namespace?W.origType+"."+W.namespace:W.origType,W.selector,W.handler),this;if(typeof S=="object"){for(ae in S)this.off(ae,R,S[ae]);return this}return(R===!1||typeof R=="function")&&(U=R,R=void 0),U===!1&&(U=cs),this.each(function(){G.event.remove(this,S,U,R)})}});var cp=/<script|<style|<link/i,_c=/checked\s*(?:[^=]|=\s*.checked.)/i,af=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ji(S,R){return Pe(S,"table")&&Pe(R.nodeType!==11?R:R.firstChild,"tr")&&G(S).children("tbody")[0]||S}function yo(S){return S.type=(S.getAttribute("type")!==null)+"/"+S.type,S}function pi(S){return(S.type||"").slice(0,5)==="true/"?S.type=S.type.slice(5):S.removeAttribute("type"),S}function Ro(S,R){var U,W,ae,de,xe,tt,qe;if(R.nodeType===1){if(F.hasData(S)&&(de=F.get(S),qe=de.events,qe)){F.remove(R,"handle events");for(ae in qe)for(U=0,W=qe[ae].length;U<W;U++)G.event.add(R,ae,qe[ae][U])}H.hasData(S)&&(xe=H.access(S),tt=G.extend({},xe),H.set(R,tt))}}function Ms(S,R){var U=R.nodeName.toLowerCase();U==="input"&&ni.test(S.type)?R.checked=S.checked:(U==="input"||U==="textarea")&&(R.defaultValue=S.defaultValue)}function qc(S,R,U,W){R=Q(R);var ae,de,xe,tt,qe,Et,Gt=0,Sn=S.length,Rt=Sn-1,an=R[0],Ar=se(an);if(Ar||Sn>1&&typeof an=="string"&&!be.checkClone&&_c.test(an))return S.each(function(Zr){var Er=S.eq(Zr);Ar&&(R[0]=an.call(this,Zr,Er.html())),qc(Er,R,U,W)});if(Sn&&(ae=oc(R,S[0].ownerDocument,!1,S,W),de=ae.firstChild,ae.childNodes.length===1&&(ae=de),de||W)){for(xe=G.map(zo(ae,"script"),yo),tt=xe.length;Gt<Sn;Gt++)qe=ae,Gt!==Rt&&(qe=G.clone(qe,!0,!0),tt&&G.merge(xe,zo(qe,"script"))),U.call(S[Gt],qe,Gt);if(tt)for(Et=xe[xe.length-1].ownerDocument,G.map(xe,pi),Gt=0;Gt<tt;Gt++)qe=xe[Gt],yi.test(qe.type||"")&&!F.access(qe,"globalEval")&&G.contains(Et,qe)&&(qe.src&&(qe.type||"").toLowerCase()!=="module"?G._evalUrl&&!qe.noModule&&G._evalUrl(qe.src,{nonce:qe.nonce||qe.getAttribute("nonce")},Et):pe(qe.textContent.replace(af,""),qe,Et))}return S}function up(S,R,U){for(var W,ae=R?G.filter(R,S):S,de=0;(W=ae[de])!=null;de++)!U&&W.nodeType===1&&G.cleanData(zo(W)),W.parentNode&&(U&&Nt(W)&&ul(zo(W,"script")),W.parentNode.removeChild(W));return S}G.extend({htmlPrefilter:function(S){return S},clone:function(S,R,U){var W,ae,de,xe,tt=S.cloneNode(!0),qe=Nt(S);if(!be.noCloneChecked&&(S.nodeType===1||S.nodeType===11)&&!G.isXMLDoc(S))for(xe=zo(tt),de=zo(S),W=0,ae=de.length;W<ae;W++)Ms(de[W],xe[W]);if(R)if(U)for(de=de||zo(S),xe=xe||zo(tt),W=0,ae=de.length;W<ae;W++)Ro(de[W],xe[W]);else Ro(S,tt);return xe=zo(tt,"script"),xe.length>0&&ul(xe,!qe&&zo(S,"script")),tt},cleanData:function(S){for(var R,U,W,ae=G.event.special,de=0;(U=S[de])!==void 0;de++)if(Oi(U)){if(R=U[F.expando]){if(R.events)for(W in R.events)ae[W]?G.event.remove(U,W):G.removeEvent(U,W,R.handle);U[F.expando]=void 0}U[H.expando]&&(U[H.expando]=void 0)}}}),G.fn.extend({detach:function(S){return up(this,S,!0)},remove:function(S){return up(this,S)},text:function(S){return Fn(this,function(R){return R===void 0?G.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=R)})},null,S,arguments.length)},append:function(){return qc(this,arguments,function(S){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var R=Ji(this,S);R.appendChild(S)}})},prepend:function(){return qc(this,arguments,function(S){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var R=Ji(this,S);R.insertBefore(S,R.firstChild)}})},before:function(){return qc(this,arguments,function(S){this.parentNode&&this.parentNode.insertBefore(S,this)})},after:function(){return qc(this,arguments,function(S){this.parentNode&&this.parentNode.insertBefore(S,this.nextSibling)})},empty:function(){for(var S,R=0;(S=this[R])!=null;R++)S.nodeType===1&&(G.cleanData(zo(S,!1)),S.textContent="");return this},clone:function(S,R){return S=S==null?!1:S,R=R==null?S:R,this.map(function(){return G.clone(this,S,R)})},html:function(S){return Fn(this,function(R){var U=this[0]||{},W=0,ae=this.length;if(R===void 0&&U.nodeType===1)return U.innerHTML;if(typeof R=="string"&&!cp.test(R)&&!ii[(Ir.exec(R)||["",""])[1].toLowerCase()]){R=G.htmlPrefilter(R);try{for(;W<ae;W++)U=this[W]||{},U.nodeType===1&&(G.cleanData(zo(U,!1)),U.innerHTML=R);U=0}catch(de){}}U&&this.empty().append(R)},null,S,arguments.length)},replaceWith:function(){var S=[];return qc(this,arguments,function(R){var U=this.parentNode;G.inArray(this,S)<0&&(G.cleanData(zo(this)),U&&U.replaceChild(R,this))},S)}}),G.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(S,R){G.fn[S]=function(U){for(var W,ae=[],de=G(U),xe=de.length-1,tt=0;tt<=xe;tt++)W=tt===xe?this:this.clone(!0),G(de[tt])[R](W),ue.apply(ae,W.get());return this.pushStack(ae)}});var lf=new RegExp("^("+Pa+")(?!px)[a-z%]+$","i"),cf=/^--/,lh=function(S){var R=S.ownerDocument.defaultView;return(!R||!R.opener)&&(R=D),R.getComputedStyle(S)},uf=function(S,R,U){var W,ae,de={};for(ae in R)de[ae]=S.style[ae],S.style[ae]=R[ae];W=U.call(S);for(ae in R)S.style[ae]=de[ae];return W},Jc=new RegExp(Qo.join("|"),"i"),dp="[\\x20\\t\\r\\n\\f]",El=new RegExp("^"+dp+"+|((?:^|[^\\\\])(?:\\\\.)*)"+dp+"+$","g");(function(){function S(){if(Et){qe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Et.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Da.appendChild(qe).appendChild(Et);var Gt=D.getComputedStyle(Et);U=Gt.top!=="1%",tt=R(Gt.marginLeft)===12,Et.style.right="60%",de=R(Gt.right)===36,W=R(Gt.width)===36,Et.style.position="absolute",ae=R(Et.offsetWidth/3)===12,Da.removeChild(qe),Et=null}}function R(Gt){return Math.round(parseFloat(Gt))}var U,W,ae,de,xe,tt,qe=fe.createElement("div"),Et=fe.createElement("div");Et.style&&(Et.style.backgroundClip="content-box",Et.cloneNode(!0).style.backgroundClip="",be.clearCloneStyle=Et.style.backgroundClip==="content-box",G.extend(be,{boxSizingReliable:function(){return S(),W},pixelBoxStyles:function(){return S(),de},pixelPosition:function(){return S(),U},reliableMarginLeft:function(){return S(),tt},scrollboxSize:function(){return S(),ae},reliableTrDimensions:function(){var Gt,Sn,Rt,an;return xe==null&&(Gt=fe.createElement("table"),Sn=fe.createElement("tr"),Rt=fe.createElement("div"),Gt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Sn.style.cssText="border:1px solid",Sn.style.height="1px",Rt.style.height="9px",Rt.style.display="block",Da.appendChild(Gt).appendChild(Sn).appendChild(Rt),an=D.getComputedStyle(Sn),xe=parseInt(an.height,10)+parseInt(an.borderTopWidth,10)+parseInt(an.borderBottomWidth,10)===Sn.offsetHeight,Da.removeChild(Gt)),xe}}))})();function ud(S,R,U){var W,ae,de,xe,tt=cf.test(R),qe=S.style;return U=U||lh(S),U&&(xe=U.getPropertyValue(R)||U[R],tt&&xe&&(xe=xe.replace(El,"$1")||void 0),xe===""&&!Nt(S)&&(xe=G.style(S,R)),!be.pixelBoxStyles()&&lf.test(xe)&&Jc.test(R)&&(W=qe.width,ae=qe.minWidth,de=qe.maxWidth,qe.minWidth=qe.maxWidth=qe.width=xe,xe=U.width,qe.width=W,qe.minWidth=ae,qe.maxWidth=de)),xe!==void 0?xe+"":xe}function df(S,R){return{get:function(){if(S()){delete this.get;return}return(this.get=R).apply(this,arguments)}}}var Qc=["Webkit","Moz","ms"],Su=fe.createElement("div").style,_u={};function ch(S){for(var R=S[0].toUpperCase()+S.slice(1),U=Qc.length;U--;)if(S=Qc[U]+R,S in Su)return S}function hf(S){var R=G.cssProps[S]||_u[S];return R||(S in Su?S:_u[S]=ch(S)||S)}var Eg=/^(none|table(?!-c[ea]).+)/,Na={position:"absolute",visibility:"hidden",display:"block"},dd={letterSpacing:"0",fontWeight:"400"};function xs(S,R,U){var W=ic.exec(R);return W?Math.max(0,W[2]-(U||0))+(W[3]||"px"):R}function hd(S,R,U,W,ae,de){var xe=R==="width"?1:0,tt=0,qe=0;if(U===(W?"border":"content"))return 0;for(;xe<4;xe+=2)U==="margin"&&(qe+=G.css(S,U+Qo[xe],!0,ae)),W?(U==="content"&&(qe-=G.css(S,"padding"+Qo[xe],!0,ae)),U!=="margin"&&(qe-=G.css(S,"border"+Qo[xe]+"Width",!0,ae))):(qe+=G.css(S,"padding"+Qo[xe],!0,ae),U!=="padding"?qe+=G.css(S,"border"+Qo[xe]+"Width",!0,ae):tt+=G.css(S,"border"+Qo[xe]+"Width",!0,ae));return!W&&de>=0&&(qe+=Math.max(0,Math.ceil(S["offset"+R[0].toUpperCase()+R.slice(1)]-de-qe-tt-.5))||0),qe}function Sg(S,R,U){var W=lh(S),ae=!be.boxSizingReliable()||U,de=ae&&G.css(S,"boxSizing",!1,W)==="border-box",xe=de,tt=ud(S,R,W),qe="offset"+R[0].toUpperCase()+R.slice(1);if(lf.test(tt)){if(!U)return tt;tt="auto"}return(!be.boxSizingReliable()&&de||!be.reliableTrDimensions()&&Pe(S,"tr")||tt==="auto"||!parseFloat(tt)&&G.css(S,"display",!1,W)==="inline")&&S.getClientRects().length&&(de=G.css(S,"boxSizing",!1,W)==="border-box",xe=qe in S,xe&&(tt=S[qe])),tt=parseFloat(tt)||0,tt+hd(S,R,U||(de?"border":"content"),xe,W,tt)+"px"}G.extend({cssHooks:{opacity:{get:function(S,R){if(R){var U=ud(S,"opacity");return U===""?"1":U}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(S,R,U,W){if(!(!S||S.nodeType===3||S.nodeType===8||!S.style)){var ae,de,xe,tt=ti(R),qe=cf.test(R),Et=S.style;if(qe||(R=hf(tt)),xe=G.cssHooks[R]||G.cssHooks[tt],U!==void 0){if(de=typeof U,de==="string"&&(ae=ic.exec(U))&&ae[1]&&(U=Kt(S,R,ae),de="number"),U==null||U!==U)return;de==="number"&&!qe&&(U+=ae&&ae[3]||(G.cssNumber[tt]?"":"px")),!be.clearCloneStyle&&U===""&&R.indexOf("background")===0&&(Et[R]="inherit"),(!xe||!("set"in xe)||(U=xe.set(S,U,W))!==void 0)&&(qe?Et.setProperty(R,U):Et[R]=U)}else return xe&&"get"in xe&&(ae=xe.get(S,!1,W))!==void 0?ae:Et[R]}},css:function(S,R,U,W){var ae,de,xe,tt=ti(R),qe=cf.test(R);return qe||(R=hf(tt)),xe=G.cssHooks[R]||G.cssHooks[tt],xe&&"get"in xe&&(ae=xe.get(S,!0,U)),ae===void 0&&(ae=ud(S,R,W)),ae==="normal"&&R in dd&&(ae=dd[R]),U===""||U?(de=parseFloat(ae),U===!0||isFinite(de)?de||0:ae):ae}}),G.each(["height","width"],function(S,R){G.cssHooks[R]={get:function(U,W,ae){if(W)return Eg.test(G.css(U,"display"))&&(!U.getClientRects().length||!U.getBoundingClientRect().width)?uf(U,Na,function(){return Sg(U,R,ae)}):Sg(U,R,ae)},set:function(U,W,ae){var de,xe=lh(U),tt=!be.scrollboxSize()&&xe.position==="absolute",qe=tt||ae,Et=qe&&G.css(U,"boxSizing",!1,xe)==="border-box",Gt=ae?hd(U,R,ae,Et,xe):0;return Et&&tt&&(Gt-=Math.ceil(U["offset"+R[0].toUpperCase()+R.slice(1)]-parseFloat(xe[R])-hd(U,R,"border",!1,xe)-.5)),Gt&&(de=ic.exec(W))&&(de[3]||"px")!=="px"&&(U.style[R]=W,W=G.css(U,R)),xs(U,W,Gt)}}}),G.cssHooks.marginLeft=df(be.reliableMarginLeft,function(S,R){if(R)return(parseFloat(ud(S,"marginLeft"))||S.getBoundingClientRect().left-uf(S,{marginLeft:0},function(){return S.getBoundingClientRect().left}))+"px"}),G.each({margin:"",padding:"",border:"Width"},function(S,R){G.cssHooks[S+R]={expand:function(U){for(var W=0,ae={},de=typeof U=="string"?U.split(" "):[U];W<4;W++)ae[S+Qo[W]+R]=de[W]||de[W-2]||de[0];return ae}},S!=="margin"&&(G.cssHooks[S+R].set=xs)}),G.fn.extend({css:function(S,R){return Fn(this,function(U,W,ae){var de,xe,tt={},qe=0;if(Array.isArray(W)){for(de=lh(U),xe=W.length;qe<xe;qe++)tt[W[qe]]=G.css(U,W[qe],!1,de);return tt}return ae!==void 0?G.style(U,W,ae):G.css(U,W)},S,R,arguments.length>1)}});function Wa(S,R,U,W,ae){return new Wa.prototype.init(S,R,U,W,ae)}G.Tween=Wa,Wa.prototype={constructor:Wa,init:function(S,R,U,W,ae,de){this.elem=S,this.prop=U,this.easing=ae||G.easing._default,this.options=R,this.start=this.now=this.cur(),this.end=W,this.unit=de||(G.cssNumber[U]?"":"px")},cur:function(){var S=Wa.propHooks[this.prop];return S&&S.get?S.get(this):Wa.propHooks._default.get(this)},run:function(S){var R,U=Wa.propHooks[this.prop];return this.options.duration?this.pos=R=G.easing[this.easing](S,this.options.duration*S,0,1,this.options.duration):this.pos=R=S,this.now=(this.end-this.start)*R+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),U&&U.set?U.set(this):Wa.propHooks._default.set(this),this}},Wa.prototype.init.prototype=Wa.prototype,Wa.propHooks={_default:{get:function(S){var R;return S.elem.nodeType!==1||S.elem[S.prop]!=null&&S.elem.style[S.prop]==null?S.elem[S.prop]:(R=G.css(S.elem,S.prop,""),!R||R==="auto"?0:R)},set:function(S){G.fx.step[S.prop]?G.fx.step[S.prop](S):S.elem.nodeType===1&&(G.cssHooks[S.prop]||S.elem.style[hf(S.prop)]!=null)?G.style(S.elem,S.prop,S.now+S.unit):S.elem[S.prop]=S.now}}},Wa.propHooks.scrollTop=Wa.propHooks.scrollLeft={set:function(S){S.elem.nodeType&&S.elem.parentNode&&(S.elem[S.prop]=S.now)}},G.easing={linear:function(S){return S},swing:function(S){return .5-Math.cos(S*Math.PI)/2},_default:"swing"},G.fx=Wa.prototype.init,G.fx.step={};var fd,ff,Au=/^(?:toggle|show|hide)$/,pd=/queueHooks$/;function uh(){ff&&(fe.hidden===!1&&D.requestAnimationFrame?D.requestAnimationFrame(uh):D.setTimeout(uh,G.fx.interval),G.fx.tick())}function pf(){return D.setTimeout(function(){fd=void 0}),fd=Date.now()}function gd(S,R){var U,W=0,ae={height:S};for(R=R?1:0;W<4;W+=2-R)U=Qo[W],ae["margin"+U]=ae["padding"+U]=S;return R&&(ae.opacity=ae.width=S),ae}function Xa(S,R,U){for(var W,ae=(oa.tweeners[R]||[]).concat(oa.tweeners["*"]),de=0,xe=ae.length;de<xe;de++)if(W=ae[de].call(U,R,S))return W}function vd(S,R,U){var W,ae,de,xe,tt,qe,Et,Gt,Sn="width"in R||"height"in R,Rt=this,an={},Ar=S.style,Zr=S.nodeType&&Pt(S),Er=F.get(S,"fxshow");U.queue||(xe=G._queueHooks(S,"fx"),xe.unqueued==null&&(xe.unqueued=0,tt=xe.empty.fire,xe.empty.fire=function(){xe.unqueued||tt()}),xe.unqueued++,Rt.always(function(){Rt.always(function(){xe.unqueued--,G.queue(S,"fx").length||xe.empty.fire()})}));for(W in R)if(ae=R[W],Au.test(ae)){if(delete R[W],de=de||ae==="toggle",ae===(Zr?"hide":"show"))if(ae==="show"&&Er&&Er[W]!==void 0)Zr=!0;else continue;an[W]=Er&&Er[W]||G.style(S,W)}if(qe=!G.isEmptyObject(R),!(!qe&&G.isEmptyObject(an))){Sn&&S.nodeType===1&&(U.overflow=[Ar.overflow,Ar.overflowX,Ar.overflowY],Et=Er&&Er.display,Et==null&&(Et=F.get(S,"display")),Gt=G.css(S,"display"),Gt==="none"&&(Et?Gt=Et:(Xr([S],!0),Et=S.style.display||Et,Gt=G.css(S,"display"),Xr([S]))),(Gt==="inline"||Gt==="inline-block"&&Et!=null)&&G.css(S,"float")==="none"&&(qe||(Rt.done(function(){Ar.display=Et}),Et==null&&(Gt=Ar.display,Et=Gt==="none"?"":Gt)),Ar.display="inline-block")),U.overflow&&(Ar.overflow="hidden",Rt.always(function(){Ar.overflow=U.overflow[0],Ar.overflowX=U.overflow[1],Ar.overflowY=U.overflow[2]})),qe=!1;for(W in an)qe||(Er?"hidden"in Er&&(Zr=Er.hidden):Er=F.access(S,"fxshow",{display:Et}),de&&(Er.hidden=!Zr),Zr&&Xr([S],!0),Rt.done(function(){Zr||Xr([S]),F.remove(S,"fxshow");for(W in an)G.style(S,W,an[W])})),qe=Xa(Zr?Er[W]:0,W,Rt),W in Er||(Er[W]=qe.start,Zr&&(qe.end=qe.start,qe.start=0))}}function md(S,R){var U,W,ae,de,xe;for(U in S)if(W=ti(U),ae=R[W],de=S[U],Array.isArray(de)&&(ae=de[1],de=S[U]=de[0]),U!==W&&(S[W]=de,delete S[U]),xe=G.cssHooks[W],xe&&"expand"in xe){de=xe.expand(de),delete S[W];for(U in de)U in S||(S[U]=de[U],R[U]=ae)}else R[W]=ae}function oa(S,R,U){var W,ae,de=0,xe=oa.prefilters.length,tt=G.Deferred().always(function(){delete qe.elem}),qe=function(){if(ae)return!1;for(var Sn=fd||pf(),Rt=Math.max(0,Et.startTime+Et.duration-Sn),an=Rt/Et.duration||0,Ar=1-an,Zr=0,Er=Et.tweens.length;Zr<Er;Zr++)Et.tweens[Zr].run(Ar);return tt.notifyWith(S,[Et,Ar,Rt]),Ar<1&&Er?Rt:(Er||tt.notifyWith(S,[Et,1,0]),tt.resolveWith(S,[Et]),!1)},Et=tt.promise({elem:S,props:G.extend({},R),opts:G.extend(!0,{specialEasing:{},easing:G.easing._default},U),originalProperties:R,originalOptions:U,startTime:fd||pf(),duration:U.duration,tweens:[],createTween:function(Sn,Rt){var an=G.Tween(S,Et.opts,Sn,Rt,Et.opts.specialEasing[Sn]||Et.opts.easing);return Et.tweens.push(an),an},stop:function(Sn){var Rt=0,an=Sn?Et.tweens.length:0;if(ae)return this;for(ae=!0;Rt<an;Rt++)Et.tweens[Rt].run(1);return Sn?(tt.notifyWith(S,[Et,1,0]),tt.resolveWith(S,[Et,Sn])):tt.rejectWith(S,[Et,Sn]),this}}),Gt=Et.props;for(md(Gt,Et.opts.specialEasing);de<xe;de++)if(W=oa.prefilters[de].call(Et,S,Gt,Et.opts),W)return se(W.stop)&&(G._queueHooks(Et.elem,Et.opts.queue).stop=W.stop.bind(W)),W;return G.map(Gt,Xa,Et),se(Et.opts.start)&&Et.opts.start.call(S,Et),Et.progress(Et.opts.progress).done(Et.opts.done,Et.opts.complete).fail(Et.opts.fail).always(Et.opts.always),G.fx.timer(G.extend(qe,{elem:S,anim:Et,queue:Et.opts.queue})),Et}G.Animation=G.extend(oa,{tweeners:{"*":[function(S,R){var U=this.createTween(S,R);return Kt(U.elem,S,ic.exec(R),U),U}]},tweener:function(S,R){se(S)?(R=S,S=["*"]):S=S.match(Qn);for(var U,W=0,ae=S.length;W<ae;W++)U=S[W],oa.tweeners[U]=oa.tweeners[U]||[],oa.tweeners[U].unshift(R)},prefilters:[vd],prefilter:function(S,R){R?oa.prefilters.unshift(S):oa.prefilters.push(S)}}),G.speed=function(S,R,U){var W=S&&typeof S=="object"?G.extend({},S):{complete:U||!U&&R||se(S)&&S,duration:S,easing:U&&R||R&&!se(R)&&R};return G.fx.off?W.duration=0:typeof W.duration!="number"&&(W.duration in G.fx.speeds?W.duration=G.fx.speeds[W.duration]:W.duration=G.fx.speeds._default),(W.queue==null||W.queue===!0)&&(W.queue="fx"),W.old=W.complete,W.complete=function(){se(W.old)&&W.old.call(this),W.queue&&G.dequeue(this,W.queue)},W},G.fn.extend({fadeTo:function(S,R,U,W){return this.filter(Pt).css("opacity",0).show().end().animate({opacity:R},S,U,W)},animate:function(S,R,U,W){var ae=G.isEmptyObject(S),de=G.speed(R,U,W),xe=function(){var tt=oa(this,G.extend({},S),de);(ae||F.get(this,"finish"))&&tt.stop(!0)};return xe.finish=xe,ae||de.queue===!1?this.each(xe):this.queue(de.queue,xe)},stop:function(S,R,U){var W=function(ae){var de=ae.stop;delete ae.stop,de(U)};return typeof S!="string"&&(U=R,R=S,S=void 0),R&&this.queue(S||"fx",[]),this.each(function(){var ae=!0,de=S!=null&&S+"queueHooks",xe=G.timers,tt=F.get(this);if(de)tt[de]&&tt[de].stop&&W(tt[de]);else for(de in tt)tt[de]&&tt[de].stop&&pd.test(de)&&W(tt[de]);for(de=xe.length;de--;)xe[de].elem===this&&(S==null||xe[de].queue===S)&&(xe[de].anim.stop(U),ae=!1,xe.splice(de,1));(ae||!U)&&G.dequeue(this,S)})},finish:function(S){return S!==!1&&(S=S||"fx"),this.each(function(){var R,U=F.get(this),W=U[S+"queue"],ae=U[S+"queueHooks"],de=G.timers,xe=W?W.length:0;for(U.finish=!0,G.queue(this,S,[]),ae&&ae.stop&&ae.stop.call(this,!0),R=de.length;R--;)de[R].elem===this&&de[R].queue===S&&(de[R].anim.stop(!0),de.splice(R,1));for(R=0;R<xe;R++)W[R]&&W[R].finish&&W[R].finish.call(this);delete U.finish})}}),G.each(["toggle","show","hide"],function(S,R){var U=G.fn[R];G.fn[R]=function(W,ae,de){return W==null||typeof W=="boolean"?U.apply(this,arguments):this.animate(gd(R,!0),W,ae,de)}}),G.each({slideDown:gd("show"),slideUp:gd("hide"),slideToggle:gd("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(S,R){G.fn[S]=function(U,W,ae){return this.animate(R,U,W,ae)}}),G.timers=[],G.fx.tick=function(){var S,R=0,U=G.timers;for(fd=Date.now();R<U.length;R++)S=U[R],!S()&&U[R]===S&&U.splice(R--,1);U.length||G.fx.stop(),fd=void 0},G.fx.timer=function(S){G.timers.push(S),G.fx.start()},G.fx.interval=13,G.fx.start=function(){ff||(ff=!0,uh())},G.fx.stop=function(){ff=null},G.fx.speeds={slow:600,fast:200,_default:400},G.fn.delay=function(S,R){return S=G.fx&&G.fx.speeds[S]||S,R=R||"fx",this.queue(R,function(U,W){var ae=D.setTimeout(U,S);W.stop=function(){D.clearTimeout(ae)}})},function(){var S=fe.createElement("input"),R=fe.createElement("select"),U=R.appendChild(fe.createElement("option"));S.type="checkbox",be.checkOn=S.value!=="",be.optSelected=U.selected,S=fe.createElement("input"),S.value="t",S.type="radio",be.radioValue=S.value==="t"}();var hp,yd=G.expr.attrHandle;G.fn.extend({attr:function(S,R){return Fn(this,G.attr,S,R,arguments.length>1)},removeAttr:function(S){return this.each(function(){G.removeAttr(this,S)})}}),G.extend({attr:function(S,R,U){var W,ae,de=S.nodeType;if(!(de===3||de===8||de===2)){if(typeof S.getAttribute=="undefined")return G.prop(S,R,U);if((de!==1||!G.isXMLDoc(S))&&(ae=G.attrHooks[R.toLowerCase()]||(G.expr.match.bool.test(R)?hp:void 0)),U!==void 0){if(U===null){G.removeAttr(S,R);return}return ae&&"set"in ae&&(W=ae.set(S,U,R))!==void 0?W:(S.setAttribute(R,U+""),U)}return ae&&"get"in ae&&(W=ae.get(S,R))!==null?W:(W=G.find.attr(S,R),W==null?void 0:W)}},attrHooks:{type:{set:function(S,R){if(!be.radioValue&&R==="radio"&&Pe(S,"input")){var U=S.value;return S.setAttribute("type",R),U&&(S.value=U),R}}}},removeAttr:function(S,R){var U,W=0,ae=R&&R.match(Qn);if(ae&&S.nodeType===1)for(;U=ae[W++];)S.removeAttribute(U)}}),hp={set:function(S,R,U){return R===!1?G.removeAttr(S,U):S.setAttribute(U,U),U}},G.each(G.expr.match.bool.source.match(/\w+/g),function(S,R){var U=yd[R]||G.find.attr;yd[R]=function(W,ae,de){var xe,tt,qe=ae.toLowerCase();return de||(tt=yd[qe],yd[qe]=xe,xe=U(W,ae,de)!=null?qe:null,yd[qe]=tt),xe}});var fp=/^(?:input|select|textarea|button)$/i,B0=/^(?:a|area)$/i;G.fn.extend({prop:function(S,R){return Fn(this,G.prop,S,R,arguments.length>1)},removeProp:function(S){return this.each(function(){delete this[G.propFix[S]||S]})}}),G.extend({prop:function(S,R,U){var W,ae,de=S.nodeType;if(!(de===3||de===8||de===2))return(de!==1||!G.isXMLDoc(S))&&(R=G.propFix[R]||R,ae=G.propHooks[R]),U!==void 0?ae&&"set"in ae&&(W=ae.set(S,U,R))!==void 0?W:S[R]=U:ae&&"get"in ae&&(W=ae.get(S,R))!==null?W:S[R]},propHooks:{tabIndex:{get:function(S){var R=G.find.attr(S,"tabindex");return R?parseInt(R,10):fp.test(S.nodeName)||B0.test(S.nodeName)&&S.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),be.optSelected||(G.propHooks.selected={get:function(S){var R=S.parentNode;return R&&R.parentNode&&R.parentNode.selectedIndex,null},set:function(S){var R=S.parentNode;R&&(R.selectedIndex,R.parentNode&&R.parentNode.selectedIndex)}}),G.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){G.propFix[this.toLowerCase()]=this});function Hs(S){var R=S.match(Qn)||[];return R.join(" ")}function Cs(S){return S.getAttribute&&S.getAttribute("class")||""}function eu(S){return Array.isArray(S)?S:typeof S=="string"?S.match(Qn)||[]:[]}G.fn.extend({addClass:function(S){var R,U,W,ae,de,xe;return se(S)?this.each(function(tt){G(this).addClass(S.call(this,tt,Cs(this)))}):(R=eu(S),R.length?this.each(function(){if(W=Cs(this),U=this.nodeType===1&&" "+Hs(W)+" ",U){for(de=0;de<R.length;de++)ae=R[de],U.indexOf(" "+ae+" ")<0&&(U+=ae+" ");xe=Hs(U),W!==xe&&this.setAttribute("class",xe)}}):this)},removeClass:function(S){var R,U,W,ae,de,xe;return se(S)?this.each(function(tt){G(this).removeClass(S.call(this,tt,Cs(this)))}):arguments.length?(R=eu(S),R.length?this.each(function(){if(W=Cs(this),U=this.nodeType===1&&" "+Hs(W)+" ",U){for(de=0;de<R.length;de++)for(ae=R[de];U.indexOf(" "+ae+" ")>-1;)U=U.replace(" "+ae+" "," ");xe=Hs(U),W!==xe&&this.setAttribute("class",xe)}}):this):this.attr("class","")},toggleClass:function(S,R){var U,W,ae,de,xe=typeof S,tt=xe==="string"||Array.isArray(S);return se(S)?this.each(function(qe){G(this).toggleClass(S.call(this,qe,Cs(this),R),R)}):typeof R=="boolean"&&tt?R?this.addClass(S):this.removeClass(S):(U=eu(S),this.each(function(){if(tt)for(de=G(this),ae=0;ae<U.length;ae++)W=U[ae],de.hasClass(W)?de.removeClass(W):de.addClass(W);else(S===void 0||xe==="boolean")&&(W=Cs(this),W&&F.set(this,"__className__",W),this.setAttribute&&this.setAttribute("class",W||S===!1?"":F.get(this,"__className__")||""))}))},hasClass:function(S){var R,U,W=0;for(R=" "+S+" ";U=this[W++];)if(U.nodeType===1&&(" "+Hs(Cs(U))+" ").indexOf(R)>-1)return!0;return!1}});var bd=/\r/g;G.fn.extend({val:function(S){var R,U,W,ae=this[0];return arguments.length?(W=se(S),this.each(function(de){var xe;this.nodeType===1&&(W?xe=S.call(this,de,G(this).val()):xe=S,xe==null?xe="":typeof xe=="number"?xe+="":Array.isArray(xe)&&(xe=G.map(xe,function(tt){return tt==null?"":tt+""})),R=G.valHooks[this.type]||G.valHooks[this.nodeName.toLowerCase()],(!R||!("set"in R)||R.set(this,xe,"value")===void 0)&&(this.value=xe))})):ae?(R=G.valHooks[ae.type]||G.valHooks[ae.nodeName.toLowerCase()],R&&"get"in R&&(U=R.get(ae,"value"))!==void 0?U:(U=ae.value,typeof U=="string"?U.replace(bd,""):U==null?"":U)):void 0}}),G.extend({valHooks:{option:{get:function(S){var R=G.find.attr(S,"value");return R!=null?R:Hs(G.text(S))}},select:{get:function(S){var R,U,W,ae=S.options,de=S.selectedIndex,xe=S.type==="select-one",tt=xe?null:[],qe=xe?de+1:ae.length;for(de<0?W=qe:W=xe?de:0;W<qe;W++)if(U=ae[W],(U.selected||W===de)&&!U.disabled&&(!U.parentNode.disabled||!Pe(U.parentNode,"optgroup"))){if(R=G(U).val(),xe)return R;tt.push(R)}return tt},set:function(S,R){for(var U,W,ae=S.options,de=G.makeArray(R),xe=ae.length;xe--;)W=ae[xe],(W.selected=G.inArray(G.valHooks.option.get(W),de)>-1)&&(U=!0);return U||(S.selectedIndex=-1),de}}}}),G.each(["radio","checkbox"],function(){G.valHooks[this]={set:function(S,R){if(Array.isArray(R))return S.checked=G.inArray(G(S).val(),R)>-1}},be.checkOn||(G.valHooks[this].get=function(S){return S.getAttribute("value")===null?"on":S.value})}),be.focusin="onfocusin"in D;var gf=/^(?:focusinfocus|focusoutblur)$/,Ul=function(S){S.stopPropagation()};G.extend(G.event,{trigger:function(S,R,U,W){var ae,de,xe,tt,qe,Et,Gt,Sn,Rt=[U||fe],an=he.call(S,"type")?S.type:S,Ar=he.call(S,"namespace")?S.namespace.split("."):[];if(de=Sn=xe=U=U||fe,!(U.nodeType===3||U.nodeType===8)&&!gf.test(an+G.event.triggered)&&(an.indexOf(".")>-1&&(Ar=an.split("."),an=Ar.shift(),Ar.sort()),qe=an.indexOf(":")<0&&"on"+an,S=S[G.expando]?S:new G.Event(an,typeof S=="object"&&S),S.isTrigger=W?2:3,S.namespace=Ar.join("."),S.rnamespace=S.namespace?new RegExp("(^|\\.)"+Ar.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,S.result=void 0,S.target||(S.target=U),R=R==null?[S]:G.makeArray(R,[S]),Gt=G.event.special[an]||{},!(!W&&Gt.trigger&&Gt.trigger.apply(U,R)===!1))){if(!W&&!Gt.noBubble&&!ce(U)){for(tt=Gt.delegateType||an,gf.test(tt+an)||(de=de.parentNode);de;de=de.parentNode)Rt.push(de),xe=de;xe===(U.ownerDocument||fe)&&Rt.push(xe.defaultView||xe.parentWindow||D)}for(ae=0;(de=Rt[ae++])&&!S.isPropagationStopped();)Sn=de,S.type=ae>1?tt:Gt.bindType||an,Et=(F.get(de,"events")||Object.create(null))[S.type]&&F.get(de,"handle"),Et&&Et.apply(de,R),Et=qe&&de[qe],Et&&Et.apply&&Oi(de)&&(S.result=Et.apply(de,R),S.result===!1&&S.preventDefault());return S.type=an,!W&&!S.isDefaultPrevented()&&(!Gt._default||Gt._default.apply(Rt.pop(),R)===!1)&&Oi(U)&&qe&&se(U[an])&&!ce(U)&&(xe=U[qe],xe&&(U[qe]=null),G.event.triggered=an,S.isPropagationStopped()&&Sn.addEventListener(an,Ul),U[an](),S.isPropagationStopped()&&Sn.removeEventListener(an,Ul),G.event.triggered=void 0,xe&&(U[qe]=xe)),S.result}},simulate:function(S,R,U){var W=G.extend(new G.Event,U,{type:S,isSimulated:!0});G.event.trigger(W,null,R)}}),G.fn.extend({trigger:function(S,R){return this.each(function(){G.event.trigger(S,R,this)})},triggerHandler:function(S,R){var U=this[0];if(U)return G.event.trigger(S,R,U,!0)}}),be.focusin||G.each({focus:"focusin",blur:"focusout"},function(S,R){var U=function(W){G.event.simulate(R,W.target,G.event.fix(W))};G.event.special[R]={setup:function(){var W=this.ownerDocument||this.document||this,ae=F.access(W,R);ae||W.addEventListener(S,U,!0),F.access(W,R,(ae||0)+1)},teardown:function(){var W=this.ownerDocument||this.document||this,ae=F.access(W,R)-1;ae?F.access(W,R,ae):(W.removeEventListener(S,U,!0),F.remove(W,R))}}});var Sl=D.location,vf={guid:Date.now()},_l=/\?/;G.parseXML=function(S){var R,U;if(!S||typeof S!="string")return null;try{R=new D.DOMParser().parseFromString(S,"text/xml")}catch(W){}return U=R&&R.getElementsByTagName("parsererror")[0],(!R||U)&&G.error("Invalid XML: "+(U?G.map(U.childNodes,function(W){return W.textContent}).join(`
`):S)),R};var sc=/\[\]$/,dh=/\r?\n/g,_g=/^(?:submit|button|image|reset|file)$/i,Ag=/^(?:input|select|textarea|keygen)/i;function hh(S,R,U,W){var ae;if(Array.isArray(R))G.each(R,function(de,xe){U||sc.test(S)?W(S,xe):hh(S+"["+(typeof xe=="object"&&xe!=null?de:"")+"]",xe,U,W)});else if(!U&&Ee(R)==="object")for(ae in R)hh(S+"["+ae+"]",R[ae],U,W);else W(S,R)}G.param=function(S,R){var U,W=[],ae=function(de,xe){var tt=se(xe)?xe():xe;W[W.length]=encodeURIComponent(de)+"="+encodeURIComponent(tt==null?"":tt)};if(S==null)return"";if(Array.isArray(S)||S.jquery&&!G.isPlainObject(S))G.each(S,function(){ae(this.name,this.value)});else for(U in S)hh(U,S[U],R,ae);return W.join("&")},G.fn.extend({serialize:function(){return G.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var S=G.prop(this,"elements");return S?G.makeArray(S):this}).filter(function(){var S=this.type;return this.name&&!G(this).is(":disabled")&&Ag.test(this.nodeName)&&!_g.test(S)&&(this.checked||!ni.test(S))}).map(function(S,R){var U=G(this).val();return U==null?null:Array.isArray(U)?G.map(U,function(W){return{name:R.name,value:W.replace(dh,`\r
`)}}):{name:R.name,value:U.replace(dh,`\r
`)}}).get()}});var xd=/%20/g,pp=/#.*$/,Tg=/([?&])_=[^&]*/,mf=/^(.*?):[ \t]*([^\r\n]*)$/mg,$s=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ac=/^(?:GET|HEAD)$/,fh=/^\/\//,Tc={},ph={},ws="*/".concat("*"),Mc=fe.createElement("a");Mc.href=Sl.href;function Ao(S){return function(R,U){typeof R!="string"&&(U=R,R="*");var W,ae=0,de=R.toLowerCase().match(Qn)||[];if(se(U))for(;W=de[ae++];)W[0]==="+"?(W=W.slice(1)||"*",(S[W]=S[W]||[]).unshift(U)):(S[W]=S[W]||[]).push(U)}}function co(S,R,U,W){var ae={},de=S===ph;function xe(tt){var qe;return ae[tt]=!0,G.each(S[tt]||[],function(Et,Gt){var Sn=Gt(R,U,W);if(typeof Sn=="string"&&!de&&!ae[Sn])return R.dataTypes.unshift(Sn),xe(Sn),!1;if(de)return!(qe=Sn)}),qe}return xe(R.dataTypes[0])||!ae["*"]&&xe("*")}function tu(S,R){var U,W,ae=G.ajaxSettings.flatOptions||{};for(U in R)R[U]!==void 0&&((ae[U]?S:W||(W={}))[U]=R[U]);return W&&G.extend(!0,S,W),S}function Oc(S,R,U){for(var W,ae,de,xe,tt=S.contents,qe=S.dataTypes;qe[0]==="*";)qe.shift(),W===void 0&&(W=S.mimeType||R.getResponseHeader("Content-Type"));if(W){for(ae in tt)if(tt[ae]&&tt[ae].test(W)){qe.unshift(ae);break}}if(qe[0]in U)de=qe[0];else{for(ae in U){if(!qe[0]||S.converters[ae+" "+qe[0]]){de=ae;break}xe||(xe=ae)}de=de||xe}if(de)return de!==qe[0]&&qe.unshift(de),U[de]}function yf(S,R,U,W){var ae,de,xe,tt,qe,Et={},Gt=S.dataTypes.slice();if(Gt[1])for(xe in S.converters)Et[xe.toLowerCase()]=S.converters[xe];for(de=Gt.shift();de;)if(S.responseFields[de]&&(U[S.responseFields[de]]=R),!qe&&W&&S.dataFilter&&(R=S.dataFilter(R,S.dataType)),qe=de,de=Gt.shift(),de){if(de==="*")de=qe;else if(qe!=="*"&&qe!==de){if(xe=Et[qe+" "+de]||Et["* "+de],!xe){for(ae in Et)if(tt=ae.split(" "),tt[1]===de&&(xe=Et[qe+" "+tt[0]]||Et["* "+tt[0]],xe)){xe===!0?xe=Et[ae]:Et[ae]!==!0&&(de=tt[0],Gt.unshift(tt[1]));break}}if(xe!==!0)if(xe&&S.throws)R=xe(R);else try{R=xe(R)}catch(Sn){return{state:"parsererror",error:xe?Sn:"No conversion from "+qe+" to "+de}}}}return{state:"success",data:R}}G.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Sl.href,type:"GET",isLocal:$s.test(Sl.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ws,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":G.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(S,R){return R?tu(tu(S,G.ajaxSettings),R):tu(G.ajaxSettings,S)},ajaxPrefilter:Ao(Tc),ajaxTransport:Ao(ph),ajax:function(S,R){typeof S=="object"&&(R=S,S=void 0),R=R||{};var U,W,ae,de,xe,tt,qe,Et,Gt,Sn,Rt=G.ajaxSetup({},R),an=Rt.context||Rt,Ar=Rt.context&&(an.nodeType||an.jquery)?G(an):G.event,Zr=G.Deferred(),Er=G.Callbacks("once memory"),us=Rt.statusCode||{},bi={},ds={},$r="canceled",ci={readyState:0,getResponseHeader:function(Ei){var bo;if(qe){if(!de)for(de={};bo=mf.exec(ae);)de[bo[1].toLowerCase()+" "]=(de[bo[1].toLowerCase()+" "]||[]).concat(bo[2]);bo=de[Ei.toLowerCase()+" "]}return bo==null?null:bo.join(", ")},getAllResponseHeaders:function(){return qe?ae:null},setRequestHeader:function(Ei,bo){return qe==null&&(Ei=ds[Ei.toLowerCase()]=ds[Ei.toLowerCase()]||Ei,bi[Ei]=bo),this},overrideMimeType:function(Ei){return qe==null&&(Rt.mimeType=Ei),this},statusCode:function(Ei){var bo;if(Ei)if(qe)ci.always(Ei[ci.status]);else for(bo in Ei)us[bo]=[us[bo],Ei[bo]];return this},abort:function(Ei){var bo=Ei||$r;return U&&U.abort(bo),sa(0,bo),this}};if(Zr.promise(ci),Rt.url=((S||Rt.url||Sl.href)+"").replace(fh,Sl.protocol+"//"),Rt.type=R.method||R.type||Rt.method||Rt.type,Rt.dataTypes=(Rt.dataType||"*").toLowerCase().match(Qn)||[""],Rt.crossDomain==null){tt=fe.createElement("a");try{tt.href=Rt.url,tt.href=tt.href,Rt.crossDomain=Mc.protocol+"//"+Mc.host!=tt.protocol+"//"+tt.host}catch(Ei){Rt.crossDomain=!0}}if(Rt.data&&Rt.processData&&typeof Rt.data!="string"&&(Rt.data=G.param(Rt.data,Rt.traditional)),co(Tc,Rt,R,ci),qe)return ci;Et=G.event&&Rt.global,Et&&G.active++===0&&G.event.trigger("ajaxStart"),Rt.type=Rt.type.toUpperCase(),Rt.hasContent=!Ac.test(Rt.type),W=Rt.url.replace(pp,""),Rt.hasContent?Rt.data&&Rt.processData&&(Rt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Rt.data=Rt.data.replace(xd,"+")):(Sn=Rt.url.slice(W.length),Rt.data&&(Rt.processData||typeof Rt.data=="string")&&(W+=(_l.test(W)?"&":"?")+Rt.data,delete Rt.data),Rt.cache===!1&&(W=W.replace(Tg,"$1"),Sn=(_l.test(W)?"&":"?")+"_="+vf.guid+++Sn),Rt.url=W+Sn),Rt.ifModified&&(G.lastModified[W]&&ci.setRequestHeader("If-Modified-Since",G.lastModified[W]),G.etag[W]&&ci.setRequestHeader("If-None-Match",G.etag[W])),(Rt.data&&Rt.hasContent&&Rt.contentType!==!1||R.contentType)&&ci.setRequestHeader("Content-Type",Rt.contentType),ci.setRequestHeader("Accept",Rt.dataTypes[0]&&Rt.accepts[Rt.dataTypes[0]]?Rt.accepts[Rt.dataTypes[0]]+(Rt.dataTypes[0]!=="*"?", "+ws+"; q=0.01":""):Rt.accepts["*"]);for(Gt in Rt.headers)ci.setRequestHeader(Gt,Rt.headers[Gt]);if(Rt.beforeSend&&(Rt.beforeSend.call(an,ci,Rt)===!1||qe))return ci.abort();if($r="abort",Er.add(Rt.complete),ci.done(Rt.success),ci.fail(Rt.error),U=co(ph,Rt,R,ci),!U)sa(-1,"No Transport");else{if(ci.readyState=1,Et&&Ar.trigger("ajaxSend",[ci,Rt]),qe)return ci;Rt.async&&Rt.timeout>0&&(xe=D.setTimeout(function(){ci.abort("timeout")},Rt.timeout));try{qe=!1,U.send(bi,sa)}catch(Ei){if(qe)throw Ei;sa(-1,Ei)}}function sa(Ei,bo,nu,Uo){var Xs,ba,dl,Os,jl,Wi=bo;qe||(qe=!0,xe&&D.clearTimeout(xe),U=void 0,ae=Uo||"",ci.readyState=Ei>0?4:0,Xs=Ei>=200&&Ei<300||Ei===304,nu&&(Os=Oc(Rt,ci,nu)),!Xs&&G.inArray("script",Rt.dataTypes)>-1&&G.inArray("json",Rt.dataTypes)<0&&(Rt.converters["text script"]=function(){}),Os=yf(Rt,Os,ci,Xs),Xs?(Rt.ifModified&&(jl=ci.getResponseHeader("Last-Modified"),jl&&(G.lastModified[W]=jl),jl=ci.getResponseHeader("etag"),jl&&(G.etag[W]=jl)),Ei===204||Rt.type==="HEAD"?Wi="nocontent":Ei===304?Wi="notmodified":(Wi=Os.state,ba=Os.data,dl=Os.error,Xs=!dl)):(dl=Wi,(Ei||!Wi)&&(Wi="error",Ei<0&&(Ei=0))),ci.status=Ei,ci.statusText=(bo||Wi)+"",Xs?Zr.resolveWith(an,[ba,Wi,ci]):Zr.rejectWith(an,[ci,Wi,dl]),ci.statusCode(us),us=void 0,Et&&Ar.trigger(Xs?"ajaxSuccess":"ajaxError",[ci,Rt,Xs?ba:dl]),Er.fireWith(an,[ci,Wi]),Et&&(Ar.trigger("ajaxComplete",[ci,Rt]),--G.active||G.event.trigger("ajaxStop")))}return ci},getJSON:function(S,R,U){return G.get(S,R,U,"json")},getScript:function(S,R){return G.get(S,void 0,R,"script")}}),G.each(["get","post"],function(S,R){G[R]=function(U,W,ae,de){return se(W)&&(de=de||ae,ae=W,W=void 0),G.ajax(G.extend({url:U,type:R,dataType:de,data:W,success:ae},G.isPlainObject(U)&&U))}}),G.ajaxPrefilter(function(S){var R;for(R in S.headers)R.toLowerCase()==="content-type"&&(S.contentType=S.headers[R]||"")}),G._evalUrl=function(S,R,U){return G.ajax({url:S,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(W){G.globalEval(W,R,U)}})},G.fn.extend({wrapAll:function(S){var R;return this[0]&&(se(S)&&(S=S.call(this[0])),R=G(S,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&R.insertBefore(this[0]),R.map(function(){for(var U=this;U.firstElementChild;)U=U.firstElementChild;return U}).append(this)),this},wrapInner:function(S){return se(S)?this.each(function(R){G(this).wrapInner(S.call(this,R))}):this.each(function(){var R=G(this),U=R.contents();U.length?U.wrapAll(S):R.append(S)})},wrap:function(S){var R=se(S);return this.each(function(U){G(this).wrapAll(R?S.call(this,U):S)})},unwrap:function(S){return this.parent(S).not("body").each(function(){G(this).replaceWith(this.childNodes)}),this}}),G.expr.pseudos.hidden=function(S){return!G.expr.pseudos.visible(S)},G.expr.pseudos.visible=function(S){return!!(S.offsetWidth||S.offsetHeight||S.getClientRects().length)},G.ajaxSettings.xhr=function(){try{return new D.XMLHttpRequest}catch(S){}};var Tu={0:200,1223:204},Vl=G.ajaxSettings.xhr();be.cors=!!Vl&&"withCredentials"in Vl,be.ajax=Vl=!!Vl,G.ajaxTransport(function(S){var R,U;if(be.cors||Vl&&!S.crossDomain)return{send:function(W,ae){var de,xe=S.xhr();if(xe.open(S.type,S.url,S.async,S.username,S.password),S.xhrFields)for(de in S.xhrFields)xe[de]=S.xhrFields[de];S.mimeType&&xe.overrideMimeType&&xe.overrideMimeType(S.mimeType),!S.crossDomain&&!W["X-Requested-With"]&&(W["X-Requested-With"]="XMLHttpRequest");for(de in W)xe.setRequestHeader(de,W[de]);R=function(tt){return function(){R&&(R=U=xe.onload=xe.onerror=xe.onabort=xe.ontimeout=xe.onreadystatechange=null,tt==="abort"?xe.abort():tt==="error"?typeof xe.status!="number"?ae(0,"error"):ae(xe.status,xe.statusText):ae(Tu[xe.status]||xe.status,xe.statusText,(xe.responseType||"text")!=="text"||typeof xe.responseText!="string"?{binary:xe.response}:{text:xe.responseText},xe.getAllResponseHeaders()))}},xe.onload=R(),U=xe.onerror=xe.ontimeout=R("error"),xe.onabort!==void 0?xe.onabort=U:xe.onreadystatechange=function(){xe.readyState===4&&D.setTimeout(function(){R&&U()})},R=R("abort");try{xe.send(S.hasContent&&S.data||null)}catch(tt){if(R)throw tt}},abort:function(){R&&R()}}}),G.ajaxPrefilter(function(S){S.crossDomain&&(S.contents.script=!1)}),G.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(S){return G.globalEval(S),S}}}),G.ajaxPrefilter("script",function(S){S.cache===void 0&&(S.cache=!1),S.crossDomain&&(S.type="GET")}),G.ajaxTransport("script",function(S){if(S.crossDomain||S.scriptAttrs){var R,U;return{send:function(W,ae){R=G("<script>").attr(S.scriptAttrs||{}).prop({charset:S.scriptCharset,src:S.url}).on("load error",U=function(de){R.remove(),U=null,de&&ae(de.type==="error"?404:200,de.type)}),fe.head.appendChild(R[0])},abort:function(){U&&U()}}}});var bf=[],gh=/(=)\?(?=&|$)|\?\?/;G.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var S=bf.pop()||G.expando+"_"+vf.guid++;return this[S]=!0,S}}),G.ajaxPrefilter("json jsonp",function(S,R,U){var W,ae,de,xe=S.jsonp!==!1&&(gh.test(S.url)?"url":typeof S.data=="string"&&(S.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&gh.test(S.data)&&"data");if(xe||S.dataTypes[0]==="jsonp")return W=S.jsonpCallback=se(S.jsonpCallback)?S.jsonpCallback():S.jsonpCallback,xe?S[xe]=S[xe].replace(gh,"$1"+W):S.jsonp!==!1&&(S.url+=(_l.test(S.url)?"&":"?")+S.jsonp+"="+W),S.converters["script json"]=function(){return de||G.error(W+" was not called"),de[0]},S.dataTypes[0]="json",ae=D[W],D[W]=function(){de=arguments},U.always(function(){ae===void 0?G(D).removeProp(W):D[W]=ae,S[W]&&(S.jsonpCallback=R.jsonpCallback,bf.push(W)),de&&se(ae)&&ae(de[0]),de=ae=void 0}),"script"}),be.createHTMLDocument=function(){var S=fe.implementation.createHTMLDocument("").body;return S.innerHTML="<form></form><form></form>",S.childNodes.length===2}(),G.parseHTML=function(S,R,U){if(typeof S!="string")return[];typeof R=="boolean"&&(U=R,R=!1);var W,ae,de;return R||(be.createHTMLDocument?(R=fe.implementation.createHTMLDocument(""),W=R.createElement("base"),W.href=fe.location.href,R.head.appendChild(W)):R=fe),ae=In.exec(S),de=!U&&[],ae?[R.createElement(ae[1])]:(ae=oc([S],R,de),de&&de.length&&G(de).remove(),G.merge([],ae.childNodes))},G.fn.load=function(S,R,U){var W,ae,de,xe=this,tt=S.indexOf(" ");return tt>-1&&(W=Hs(S.slice(tt)),S=S.slice(0,tt)),se(R)?(U=R,R=void 0):R&&typeof R=="object"&&(ae="POST"),xe.length>0&&G.ajax({url:S,type:ae||"GET",dataType:"html",data:R}).done(function(qe){de=arguments,xe.html(W?G("<div>").append(G.parseHTML(qe)).find(W):qe)}).always(U&&function(qe,Et){xe.each(function(){U.apply(this,de||[qe.responseText,Et,qe])})}),this},G.expr.pseudos.animated=function(S){return G.grep(G.timers,function(R){return S===R.elem}).length},G.offset={setOffset:function(S,R,U){var W,ae,de,xe,tt,qe,Et,Gt=G.css(S,"position"),Sn=G(S),Rt={};Gt==="static"&&(S.style.position="relative"),tt=Sn.offset(),de=G.css(S,"top"),qe=G.css(S,"left"),Et=(Gt==="absolute"||Gt==="fixed")&&(de+qe).indexOf("auto")>-1,Et?(W=Sn.position(),xe=W.top,ae=W.left):(xe=parseFloat(de)||0,ae=parseFloat(qe)||0),se(R)&&(R=R.call(S,U,G.extend({},tt))),R.top!=null&&(Rt.top=R.top-tt.top+xe),R.left!=null&&(Rt.left=R.left-tt.left+ae),"using"in R?R.using.call(S,Rt):Sn.css(Rt)}},G.fn.extend({offset:function(S){if(arguments.length)return S===void 0?this:this.each(function(ae){G.offset.setOffset(this,S,ae)});var R,U,W=this[0];if(W)return W.getClientRects().length?(R=W.getBoundingClientRect(),U=W.ownerDocument.defaultView,{top:R.top+U.pageYOffset,left:R.left+U.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var S,R,U,W=this[0],ae={top:0,left:0};if(G.css(W,"position")==="fixed")R=W.getBoundingClientRect();else{for(R=this.offset(),U=W.ownerDocument,S=W.offsetParent||U.documentElement;S&&(S===U.body||S===U.documentElement)&&G.css(S,"position")==="static";)S=S.parentNode;S&&S!==W&&S.nodeType===1&&(ae=G(S).offset(),ae.top+=G.css(S,"borderTopWidth",!0),ae.left+=G.css(S,"borderLeftWidth",!0))}return{top:R.top-ae.top-G.css(W,"marginTop",!0),left:R.left-ae.left-G.css(W,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var S=this.offsetParent;S&&G.css(S,"position")==="static";)S=S.offsetParent;return S||Da})}}),G.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(S,R){var U=R==="pageYOffset";G.fn[S]=function(W){return Fn(this,function(ae,de,xe){var tt;if(ce(ae)?tt=ae:ae.nodeType===9&&(tt=ae.defaultView),xe===void 0)return tt?tt[R]:ae[de];tt?tt.scrollTo(U?tt.pageXOffset:xe,U?xe:tt.pageYOffset):ae[de]=xe},S,W,arguments.length)}}),G.each(["top","left"],function(S,R){G.cssHooks[R]=df(be.pixelPosition,function(U,W){if(W)return W=ud(U,R),lf.test(W)?G(U).position()[R]+"px":W})}),G.each({Height:"height",Width:"width"},function(S,R){G.each({padding:"inner"+S,content:R,"":"outer"+S},function(U,W){G.fn[W]=function(ae,de){var xe=arguments.length&&(U||typeof ae!="boolean"),tt=U||(ae===!0||de===!0?"margin":"border");return Fn(this,function(qe,Et,Gt){var Sn;return ce(qe)?W.indexOf("outer")===0?qe["inner"+S]:qe.document.documentElement["client"+S]:qe.nodeType===9?(Sn=qe.documentElement,Math.max(qe.body["scroll"+S],Sn["scroll"+S],qe.body["offset"+S],Sn["offset"+S],Sn["client"+S])):Gt===void 0?G.css(qe,Et,tt):G.style(qe,Et,Gt,tt)},R,xe?ae:void 0,xe)}})}),G.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(S,R){G.fn[R]=function(U){return this.on(R,U)}}),G.fn.extend({bind:function(S,R,U){return this.on(S,null,R,U)},unbind:function(S,R){return this.off(S,null,R)},delegate:function(S,R,U,W){return this.on(R,S,U,W)},undelegate:function(S,R,U){return arguments.length===1?this.off(S,"**"):this.off(R,S||"**",U)},hover:function(S,R){return this.mouseenter(S).mouseleave(R||S)}}),G.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(S,R){G.fn[R]=function(U,W){return arguments.length>0?this.on(R,null,U,W):this.trigger(R)}});var Mu=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;G.proxy=function(S,R){var U,W,ae;if(typeof R=="string"&&(U=S[R],R=S,S=U),!!se(S))return W=ee.call(arguments,2),ae=function(){return S.apply(R||this,W.concat(ee.call(arguments)))},ae.guid=S.guid=S.guid||G.guid++,ae},G.holdReady=function(S){S?G.readyWait++:G.ready(!0)},G.isArray=Array.isArray,G.parseJSON=JSON.parse,G.nodeName=Pe,G.isFunction=se,G.isWindow=ce,G.camelCase=ti,G.type=Ee,G.now=Date.now,G.isNumeric=function(S){var R=G.type(S);return(R==="number"||R==="string")&&!isNaN(S-parseFloat(S))},G.trim=function(S){return S==null?"":(S+"").replace(Mu,"$1")},M=[],j=function(){return G}.apply(L,M),j!==void 0&&(De.exports=j);var Ws=D.jQuery,gp=D.$;return G.noConflict=function(S){return D.$===G&&(D.$=gp),S&&D.jQuery===G&&(D.jQuery=Ws),G},typeof J=="undefined"&&(D.jQuery=D.$=G),G})},47443:function(De,L,M){var j=M(42118);function D(J,z){var Z=J==null?0:J.length;return!!Z&&j(J,z,0)>-1}De.exports=D},1196:function(De){function L(M,j,D){for(var J=-1,z=M==null?0:M.length;++J<z;)if(D(j,M[J]))return!0;return!1}De.exports=L},41848:function(De){function L(M,j,D,J){for(var z=M.length,Z=D+(J?1:-1);J?Z--:++Z<z;)if(j(M[Z],Z,M))return Z;return-1}De.exports=L},42118:function(De,L,M){var j=M(41848),D=M(62722),J=M(42351);function z(Z,ee,Q){return ee===ee?J(Z,ee,Q):j(Z,D,Q)}De.exports=z},62722:function(De){function L(M){return M!==M}De.exports=L},45652:function(De,L,M){var j=M(88668),D=M(47443),J=M(1196),z=M(74757),Z=M(23593),ee=M(21814),Q=200;function ue(oe,ie,ne){var he=-1,Ne=D,le=oe.length,be=!0,se=[],ce=se;if(ne)be=!1,Ne=J;else if(le>=Q){var fe=ie?null:Z(oe);if(fe)return ee(fe);be=!1,Ne=z,ce=new j}else ce=ie?[]:se;e:for(;++he<le;){var we=oe[he],pe=ie?ie(we):we;if(we=ne||we!==0?we:0,be&&pe===pe){for(var Ee=ce.length;Ee--;)if(ce[Ee]===pe)continue e;ie&&ce.push(pe),se.push(we)}else Ne(ce,pe,ne)||(ce!==se&&ce.push(pe),se.push(we))}return se}De.exports=ue},23593:function(De,L,M){var j=M(58525),D=M(50308),J=M(21814),z=1/0,Z=j&&1/J(new j([,-0]))[1]==z?function(ee){return new j(ee)}:D;De.exports=Z},42351:function(De){function L(M,j,D){for(var J=D-1,z=M.length;++J<z;)if(M[J]===j)return J;return-1}De.exports=L},51584:function(De,L,M){var j=M(44239),D=M(37005),J="[object Boolean]";function z(Z){return Z===!0||Z===!1||D(Z)&&j(Z)==J}De.exports=z},96486:function(De,L,M){De=M.nmd(De);var j;(function(){var D,J="4.17.21",z=200,Z="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ee="Expected a function",Q="Invalid `variable` option passed into `_.template`",ue="__lodash_hash_undefined__",oe=500,ie="__lodash_placeholder__",ne=1,he=2,Ne=4,le=1,be=2,se=1,ce=2,fe=4,we=8,pe=16,Ee=32,it=64,G=128,Be=256,Ke=512,dt=30,jt="...",mn=800,Pe=16,In=1,hn=2,vt=3,kt=1/0,jn=9007199254740991,Zt=17976931348623157e292,gr=0/0,Nr=4294967295,Qn=Nr-1,Hr=Nr>>>1,vr=[["ary",G],["bind",se],["bindKey",ce],["curry",we],["curryRight",pe],["flip",Ke],["partial",Ee],["partialRight",it],["rearg",Be]],Le="[object Arguments]",Ve="[object Array]",Xe="[object AsyncFunction]",Vt="[object Boolean]",Rn="[object Date]",Fn="[object DOMException]",_r="[object Error]",ri="[object Function]",Gr="[object GeneratorFunction]",ti="[object Map]",Oi="[object Number]",lo="[object Null]",F="[object Object]",H="[object Promise]",sf="[object Proxy]",Te="[object RegExp]",cl="[object Set]",wr="[object String]",Pa="[object Symbol]",ic="[object Undefined]",Qo="[object WeakMap]",Da="[object WeakSet]",Nt="[object ArrayBuffer]",Yt="[object DataView]",Pt="[object Float32Array]",Kt="[object Float64Array]",or="[object Int8Array]",$i="[object Int16Array]",Xr="[object Int32Array]",ni="[object Uint8Array]",Ir="[object Uint8ClampedArray]",yi="[object Uint16Array]",ii="[object Uint32Array]",zo=/\b__p \+= '';/g,ul=/\b(__p \+=) '' \+/g,wg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oc=/&(?:amp|lt|gt|quot|#39);/g,sh=/[&<>"']/g,$a=RegExp(oc.source),cs=RegExp(sh.source),lp=/<%-([\s\S]+?)%>/g,cd=/<%([\s\S]+?)%>/g,es=/<%=([\s\S]+?)%>/g,ah=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cp=/^\w*$/,_c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,af=/[\\^$.*+?()[\]{}|]/g,Ji=RegExp(af.source),yo=/^\s+/,pi=/\s/,Ro=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ms=/\{\n\/\* \[wrapped with (.+)\] \*/,qc=/,? & /,up=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lf=/[()=,{}\[\]\/\s]/,cf=/\\(\\)?/g,lh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,uf=/\w*$/,Jc=/^[-+]0x[0-9a-f]+$/i,dp=/^0b[01]+$/i,El=/^\[object .+?Constructor\]$/,ud=/^0o[0-7]+$/i,df=/^(?:0|[1-9]\d*)$/,Qc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Su=/($^)/,_u=/['\n\r\u2028\u2029\\]/g,ch="\\ud800-\\udfff",hf="\\u0300-\\u036f",Eg="\\ufe20-\\ufe2f",Na="\\u20d0-\\u20ff",dd=hf+Eg+Na,xs="\\u2700-\\u27bf",hd="a-z\\xdf-\\xf6\\xf8-\\xff",Sg="\\xac\\xb1\\xd7\\xf7",Wa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fd="\\u2000-\\u206f",ff=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Au="A-Z\\xc0-\\xd6\\xd8-\\xde",pd="\\ufe0e\\ufe0f",uh=Sg+Wa+fd+ff,pf="['\u2019]",gd="["+ch+"]",Xa="["+uh+"]",vd="["+dd+"]",md="\\d+",oa="["+xs+"]",hp="["+hd+"]",yd="[^"+ch+uh+md+xs+hd+Au+"]",fp="\\ud83c[\\udffb-\\udfff]",B0="(?:"+vd+"|"+fp+")",Hs="[^"+ch+"]",Cs="(?:\\ud83c[\\udde6-\\uddff]){2}",eu="[\\ud800-\\udbff][\\udc00-\\udfff]",bd="["+Au+"]",gf="\\u200d",Ul="(?:"+hp+"|"+yd+")",Sl="(?:"+bd+"|"+yd+")",vf="(?:"+pf+"(?:d|ll|m|re|s|t|ve))?",_l="(?:"+pf+"(?:D|LL|M|RE|S|T|VE))?",sc=B0+"?",dh="["+pd+"]?",_g="(?:"+gf+"(?:"+[Hs,Cs,eu].join("|")+")"+dh+sc+")*",Ag="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xd=dh+sc+_g,pp="(?:"+[oa,Cs,eu].join("|")+")"+xd,Tg="(?:"+[Hs+vd+"?",vd,Cs,eu,gd].join("|")+")",mf=RegExp(pf,"g"),$s=RegExp(vd,"g"),Ac=RegExp(fp+"(?="+fp+")|"+Tg+xd,"g"),fh=RegExp([bd+"?"+hp+"+"+vf+"(?="+[Xa,bd,"$"].join("|")+")",Sl+"+"+_l+"(?="+[Xa,bd+Ul,"$"].join("|")+")",bd+"?"+Ul+"+"+vf,bd+"+"+_l,hh,Ag,md,pp].join("|"),"g"),Tc=RegExp("["+gf+ch+dd+pd+"]"),ph=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ws=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Mc=-1,Ao={};Ao[Pt]=Ao[Kt]=Ao[or]=Ao[$i]=Ao[Xr]=Ao[ni]=Ao[Ir]=Ao[yi]=Ao[ii]=!0,Ao[Le]=Ao[Ve]=Ao[Nt]=Ao[Vt]=Ao[Yt]=Ao[Rn]=Ao[_r]=Ao[ri]=Ao[ti]=Ao[Oi]=Ao[F]=Ao[Te]=Ao[cl]=Ao[wr]=Ao[Qo]=!1;var co={};co[Le]=co[Ve]=co[Nt]=co[Yt]=co[Vt]=co[Rn]=co[Pt]=co[Kt]=co[or]=co[$i]=co[Xr]=co[ti]=co[Oi]=co[F]=co[Te]=co[cl]=co[wr]=co[Pa]=co[ni]=co[Ir]=co[yi]=co[ii]=!0,co[_r]=co[ri]=co[Qo]=!1;var tu={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Oc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Tu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vl=parseFloat,bf=parseInt,gh=typeof M.g=="object"&&M.g&&M.g.Object===Object&&M.g,Mu=typeof self=="object"&&self&&self.Object===Object&&self,Ws=gh||Mu||Function("return this")(),gp=L&&!L.nodeType&&L,S=gp&&!0&&De&&!De.nodeType&&De,R=S&&S.exports===gp,U=R&&gh.process,W=function(){try{var bt=S&&S.require&&S.require("util").types;return bt||U&&U.binding&&U.binding("util")}catch(tn){}}(),ae=W&&W.isArrayBuffer,de=W&&W.isDate,xe=W&&W.isMap,tt=W&&W.isRegExp,qe=W&&W.isSet,Et=W&&W.isTypedArray;function Gt(bt,tn,Ht){switch(Ht.length){case 0:return bt.call(tn);case 1:return bt.call(tn,Ht[0]);case 2:return bt.call(tn,Ht[0],Ht[1]);case 3:return bt.call(tn,Ht[0],Ht[1],Ht[2])}return bt.apply(tn,Ht)}function Sn(bt,tn,Ht,pr){for(var Jr=-1,Fi=bt==null?0:bt.length;++Jr<Fi;){var ko=bt[Jr];tn(pr,ko,Ht(ko),bt)}return pr}function Rt(bt,tn){for(var Ht=-1,pr=bt==null?0:bt.length;++Ht<pr&&tn(bt[Ht],Ht,bt)!==!1;);return bt}function an(bt,tn){for(var Ht=bt==null?0:bt.length;Ht--&&tn(bt[Ht],Ht,bt)!==!1;);return bt}function Ar(bt,tn){for(var Ht=-1,pr=bt==null?0:bt.length;++Ht<pr;)if(!tn(bt[Ht],Ht,bt))return!1;return!0}function Zr(bt,tn){for(var Ht=-1,pr=bt==null?0:bt.length,Jr=0,Fi=[];++Ht<pr;){var ko=bt[Ht];tn(ko,Ht,bt)&&(Fi[Jr++]=ko)}return Fi}function Er(bt,tn){var Ht=bt==null?0:bt.length;return!!Ht&&ba(bt,tn,0)>-1}function us(bt,tn,Ht){for(var pr=-1,Jr=bt==null?0:bt.length;++pr<Jr;)if(Ht(tn,bt[pr]))return!0;return!1}function bi(bt,tn){for(var Ht=-1,pr=bt==null?0:bt.length,Jr=Array(pr);++Ht<pr;)Jr[Ht]=tn(bt[Ht],Ht,bt);return Jr}function ds(bt,tn){for(var Ht=-1,pr=tn.length,Jr=bt.length;++Ht<pr;)bt[Jr+Ht]=tn[Ht];return bt}function $r(bt,tn,Ht,pr){var Jr=-1,Fi=bt==null?0:bt.length;for(pr&&Fi&&(Ht=bt[++Jr]);++Jr<Fi;)Ht=tn(Ht,bt[Jr],Jr,bt);return Ht}function ci(bt,tn,Ht,pr){var Jr=bt==null?0:bt.length;for(pr&&Jr&&(Ht=bt[--Jr]);Jr--;)Ht=tn(Ht,bt[Jr],Jr,bt);return Ht}function sa(bt,tn){for(var Ht=-1,pr=bt==null?0:bt.length;++Ht<pr;)if(tn(bt[Ht],Ht,bt))return!0;return!1}var Ei=Wi("length");function bo(bt){return bt.split("")}function nu(bt){return bt.match(up)||[]}function Uo(bt,tn,Ht){var pr;return Ht(bt,function(Jr,Fi,ko){if(tn(Jr,Fi,ko))return pr=Fi,!1}),pr}function Xs(bt,tn,Ht,pr){for(var Jr=bt.length,Fi=Ht+(pr?1:-1);pr?Fi--:++Fi<Jr;)if(tn(bt[Fi],Fi,bt))return Fi;return-1}function ba(bt,tn,Ht){return tn===tn?lc(bt,tn,Ht):Xs(bt,Os,Ht)}function dl(bt,tn,Ht,pr){for(var Jr=Ht-1,Fi=bt.length;++Jr<Fi;)if(pr(bt[Jr],tn))return Jr;return-1}function Os(bt){return bt!==bt}function jl(bt,tn){var Ht=bt==null?0:bt.length;return Ht?Za(bt,tn)/Ht:gr}function Wi(bt){return function(tn){return tn==null?D:tn[bt]}}function Ps(bt){return function(tn){return bt==null?D:bt[tn]}}function Zs(bt,tn,Ht,pr,Jr){return Jr(bt,function(Fi,ko,uo){Ht=pr?(pr=!1,Fi):tn(Ht,Fi,ko,uo)}),Ht}function ru(bt,tn){var Ht=bt.length;for(bt.sort(tn);Ht--;)bt[Ht]=bt[Ht].value;return bt}function Za(bt,tn){for(var Ht,pr=-1,Jr=bt.length;++pr<Jr;){var Fi=tn(bt[pr]);Fi!==D&&(Ht=Ht===D?Fi:Ht+Fi)}return Ht}function Pi(bt,tn){for(var Ht=-1,pr=Array(bt);++Ht<bt;)pr[Ht]=tn(Ht);return pr}function Ys(bt,tn){return bi(tn,function(Ht){return[Ht,bt[Ht]]})}function hl(bt){return bt&&bt.slice(0,Dc(bt)+1).replace(yo,"")}function Gs(bt){return function(tn){return bt(tn)}}function fl(bt,tn){return bi(tn,function(Ht){return bt[Ht]})}function aa(bt,tn){return bt.has(tn)}function ac(bt,tn){for(var Ht=-1,pr=bt.length;++Ht<pr&&ba(tn,bt[Ht],0)>-1;);return Ht}function Vo(bt,tn){for(var Ht=bt.length;Ht--&&ba(tn,bt[Ht],0)>-1;);return Ht}function Cd(bt,tn){for(var Ht=bt.length,pr=0;Ht--;)bt[Ht]===tn&&++pr;return pr}var Ou=Ps(tu),vp=Ps(Oc);function iu(bt){return"\\"+Tu[bt]}function Al(bt,tn){return bt==null?D:bt[tn]}function pl(bt){return Tc.test(bt)}function Pu(bt){return ph.test(bt)}function Pc(bt){for(var tn,Ht=[];!(tn=bt.next()).done;)Ht.push(tn.value);return Ht}function ou(bt){var tn=-1,Ht=Array(bt.size);return bt.forEach(function(pr,Jr){Ht[++tn]=[Jr,pr]}),Ht}function su(bt,tn){return function(Ht){return bt(tn(Ht))}}function ts(bt,tn){for(var Ht=-1,pr=bt.length,Jr=0,Fi=[];++Ht<pr;){var ko=bt[Ht];(ko===tn||ko===ie)&&(bt[Ht]=ie,Fi[Jr++]=Ht)}return Fi}function Ia(bt){var tn=-1,Ht=Array(bt.size);return bt.forEach(function(pr){Ht[++tn]=pr}),Ht}function Du(bt){var tn=-1,Ht=Array(bt.size);return bt.forEach(function(pr){Ht[++tn]=[pr,pr]}),Ht}function lc(bt,tn,Ht){for(var pr=Ht-1,Jr=bt.length;++pr<Jr;)if(bt[pr]===tn)return pr;return-1}function vh(bt,tn,Ht){for(var pr=Ht+1;pr--;)if(bt[pr]===tn)return pr;return pr}function cc(bt){return pl(bt)?Ra(bt):Ei(bt)}function ui(bt){return pl(bt)?Nc(bt):bo(bt)}function Dc(bt){for(var tn=bt.length;tn--&&pi.test(bt.charAt(tn)););return tn}var wo=Ps(yf);function Ra(bt){for(var tn=Ac.lastIndex=0;Ac.test(bt);)++tn;return tn}function Nc(bt){return bt.match(Ac)||[]}function mh(bt){return bt.match(fh)||[]}var mp=function bt(tn){tn=tn==null?Ws:xa.defaults(Ws.Object(),tn,xa.pick(Ws,ws));var Ht=tn.Array,pr=tn.Date,Jr=tn.Error,Fi=tn.Function,ko=tn.Math,uo=tn.Object,Nu=tn.RegExp,xf=tn.String,Ca=tn.TypeError,Iu=Ht.prototype,Oe=Fi.prototype,ze=uo.prototype,ht=tn["__core-js_shared__"],rn=Oe.toString,ot=ze.hasOwnProperty,cn=0,Tn=function(){var m=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),Kn=ze.toString,tr=rn.call(uo),Rr=Ws._,zr=Nu("^"+rn.call(ot).replace(af,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lr=R?tn.Buffer:D,qr=tn.Symbol,Xi=tn.Uint8Array,ur=lr?lr.allocUnsafe:D,ns=su(uo.getPrototypeOf,uo),Ks=uo.create,Es=ze.propertyIsEnumerable,ho=Iu.splice,Ru=qr?qr.isConcatSpreadable:D,rs=qr?qr.iterator:D,Lo=qr?qr.toStringTag:D,uc=function(){try{var m=on(uo,"defineProperty");return m({},"",{}),m}catch(C){}}(),wd=tn.clearTimeout!==Ws.clearTimeout&&tn.clearTimeout,xi=pr&&pr.now!==Ws.Date.now&&pr.now,Si=tn.setTimeout!==Ws.setTimeout&&tn.setTimeout,yh=ko.ceil,ku=ko.floor,bh=uo.getOwnPropertySymbols,Mg=lr?lr.isBuffer:D,Cf=tn.isFinite,Ed=Iu.join,gl=su(uo.keys,uo),hs=ko.max,Ds=ko.min,z0=pr.now,Og=tn.parseInt,Ic=ko.random,wf=Iu.reverse,yp=on(tn,"DataView"),ka=on(tn,"Map"),Sd=on(tn,"Promise"),la=on(tn,"Set"),Ya=on(tn,"WeakMap"),_d=on(uo,"create"),Ad=Ya&&new Ya,ca={},xh=$o(yp),au=$o(ka),Td=$o(Sd),Pg=$o(la),Dg=$o(Ya),bp=qr?qr.prototype:D,Ch=bp?bp.valueOf:D,Ng=bp?bp.toString:D;function Ae(m){if(zs(m)&&!Ai(m)&&!(m instanceof Li)){if(m instanceof wa)return m;if(ot.call(m,"__wrapped__"))return Kr(m)}return new wa(m)}var Md=function(){function m(){}return function(C){if(!Rs(C))return{};if(Ks)return Ks(C);m.prototype=C;var N=new m;return m.prototype=D,N}}();function Od(){}function wa(m,C){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=D}Ae.templateSettings={escape:lp,evaluate:cd,interpolate:es,variable:"",imports:{_:Ae}},Ae.prototype=Od.prototype,Ae.prototype.constructor=Ae,wa.prototype=Md(Od.prototype),wa.prototype.constructor=wa;function Li(m){this.__wrapped__=m,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nr,this.__views__=[]}function hm(){var m=new Li(this.__wrapped__);return m.__actions__=Ja(this.__actions__),m.__dir__=this.__dir__,m.__filtered__=this.__filtered__,m.__iteratees__=Ja(this.__iteratees__),m.__takeCount__=this.__takeCount__,m.__views__=Ja(this.__views__),m}function Tl(){if(this.__filtered__){var m=new Li(this);m.__dir__=-1,m.__filtered__=!0}else m=this.clone(),m.__dir__*=-1;return m}function U0(){var m=this.__wrapped__.value(),C=this.__dir__,N=Ai(m),Y=C<0,ve=N?m.length:0,Re=Bn(0,ve,this.__views__),Qe=Re.start,ut=Re.end,At=ut-Qe,wn=Y?ut:Qe-1,_n=this.__iteratees__,kn=_n.length,ar=0,kr=Ds(At,this.__takeCount__);if(!N||!Y&&ve==At&&kr==At)return Ns(m,this.__actions__);var vi=[];e:for(;At--&&ar<kr;){wn+=C;for(var Ui=-1,fi=m[wn];++Ui<kn;){var ro=_n[Ui],so=ro.iteratee,jc=ro.type,Va=so(fi);if(jc==hn)fi=Va;else if(!Va){if(jc==In)continue e;break e}}vi[ar++]=fi}return vi}Li.prototype=Md(Od.prototype),Li.prototype.constructor=Li;function Lu(m){var C=-1,N=m==null?0:m.length;for(this.clear();++C<N;){var Y=m[C];this.set(Y[0],Y[1])}}function V0(){this.__data__=_d?_d(null):{},this.size=0}function Ml(m){var C=this.has(m)&&delete this.__data__[m];return this.size-=C?1:0,C}function Ig(m){var C=this.__data__;if(_d){var N=C[m];return N===ue?D:N}return ot.call(C,m)?C[m]:D}function xp(m){var C=this.__data__;return _d?C[m]!==D:ot.call(C,m)}function Rg(m,C){var N=this.__data__;return this.size+=this.has(m)?0:1,N[m]=_d&&C===D?ue:C,this}Lu.prototype.clear=V0,Lu.prototype.delete=Ml,Lu.prototype.get=Ig,Lu.prototype.has=xp,Lu.prototype.set=Rg;function lu(m){var C=-1,N=m==null?0:m.length;for(this.clear();++C<N;){var Y=m[C];this.set(Y[0],Y[1])}}function j0(){this.__data__=[],this.size=0}function fm(m){var C=this.__data__,N=Ka(C,m);if(N<0)return!1;var Y=C.length-1;return N==Y?C.pop():ho.call(C,N,1),--this.size,!0}function tb(m){var C=this.__data__,N=Ka(C,m);return N<0?D:C[N][1]}function Gu(m){return Ka(this.__data__,m)>-1}function H0(m,C){var N=this.__data__,Y=Ka(N,m);return Y<0?(++this.size,N.push([m,C])):N[Y][1]=C,this}lu.prototype.clear=j0,lu.prototype.delete=fm,lu.prototype.get=tb,lu.prototype.has=Gu,lu.prototype.set=H0;function Rc(m){var C=-1,N=m==null?0:m.length;for(this.clear();++C<N;){var Y=m[C];this.set(Y[0],Y[1])}}function Fu(){this.size=0,this.__data__={hash:new Lu,map:new(ka||lu),string:new Lu}}function pm(m){var C=St(this,m).delete(m);return this.size-=C?1:0,C}function kg(m){return St(this,m).get(m)}function Bu(m){return St(this,m).has(m)}function $0(m,C){var N=St(this,m),Y=N.size;return N.set(m,C),this.size+=N.size==Y?0:1,this}Rc.prototype.clear=Fu,Rc.prototype.delete=pm,Rc.prototype.get=kg,Rc.prototype.has=Bu,Rc.prototype.set=$0;function Hl(m){var C=-1,N=m==null?0:m.length;for(this.__data__=new Rc;++C<N;)this.add(m[C])}function W0(m){return this.__data__.set(m,ue),this}function jo(m){return this.__data__.has(m)}Hl.prototype.add=Hl.prototype.push=W0,Hl.prototype.has=jo;function to(m){var C=this.__data__=new lu(m);this.size=C.size}function wh(){this.__data__=new lu,this.size=0}function Pd(m){var C=this.__data__,N=C.delete(m);return this.size=C.size,N}function Cp(m){return this.__data__.get(m)}function wp(m){return this.__data__.has(m)}function Ep(m,C){var N=this.__data__;if(N instanceof lu){var Y=N.__data__;if(!ka||Y.length<z-1)return Y.push([m,C]),this.size=++N.size,this;N=this.__data__=new Rc(Y)}return N.set(m,C),this.size=N.size,this}to.prototype.clear=wh,to.prototype.delete=Pd,to.prototype.get=Cp,to.prototype.has=wp,to.prototype.set=Ep;function fo(m,C){var N=Ai(m),Y=!N&&td(m),ve=!N&&!Y&&kh(m),Re=!N&&!Y&&!ve&&jd(m),Qe=N||Y||ve||Re,ut=Qe?Pi(m.length,xf):[],At=ut.length;for(var wn in m)(C||ot.call(m,wn))&&!(Qe&&(wn=="length"||ve&&(wn=="offset"||wn=="parent")||Re&&(wn=="buffer"||wn=="byteLength"||wn=="byteOffset")||$n(wn,At)))&&ut.push(wn);return ut}function Ol(m){var C=m.length;return C?m[kd(0,C-1)]:D}function Ef(m,C){return ss(Ja(m),$l(C,0,m.length))}function kc(m){return ss(Ja(m))}function Lc(m,C,N){(N!==D&&!vc(m[C],N)||N===D&&!(C in m))&&Ho(m,C,N)}function vl(m,C,N){var Y=m[C];(!(ot.call(m,C)&&vc(Y,N))||N===D&&!(C in m))&&Ho(m,C,N)}function Ka(m,C){for(var N=m.length;N--;)if(vc(m[N][0],C))return N;return-1}function Lg(m,C,N,Y){return Wl(m,function(ve,Re,Qe){C(Y,ve,N(ve),Qe)}),Y}function Pl(m,C){return m&&Fa(C,Xo(C),m)}function zu(m,C){return m&&Fa(C,Aa(C),m)}function Ho(m,C,N){C=="__proto__"&&uc?uc(m,C,{configurable:!0,enumerable:!0,value:N,writable:!0}):m[C]=N}function cu(m,C){for(var N=-1,Y=C.length,ve=Ht(Y),Re=m==null;++N<Y;)ve[N]=Re?D:Bf(m,C[N]);return ve}function $l(m,C,N){return m===m&&(N!==D&&(m=m<=N?m:N),C!==D&&(m=m>=C?m:C)),m}function Fs(m,C,N,Y,ve,Re){var Qe,ut=C&ne,At=C&he,wn=C&Ne;if(N&&(Qe=ve?N(m,Y,ve,Re):N(m)),Qe!==D)return Qe;if(!Rs(m))return m;var _n=Ai(m);if(_n){if(Qe=mt(m),!ut)return Ja(m,Qe)}else{var kn=un(m),ar=kn==ri||kn==Gr;if(kh(m))return Qu(m,ut);if(kn==F||kn==Le||ar&&!ve){if(Qe=At||ar?{}:Ft(m),!ut)return At?vm(m,zu(Qe,m)):Z0(m,Pl(Qe,m))}else{if(!co[kn])return ve?m:{};Qe=yn(m,kn,ut)}}Re||(Re=new to);var kr=Re.get(m);if(kr)return kr;Re.set(m,Qe),Fb(m)?m.forEach(function(fi){Qe.add(Fs(fi,C,N,fi,m,Re))}):kb(m)&&m.forEach(function(fi,ro){Qe.set(ro,Fs(fi,C,N,ro,m,Re))});var vi=wn?At?K:Bd:At?Aa:Xo,Ui=_n?D:vi(m);return Rt(Ui||m,function(fi,ro){Ui&&(ro=fi,fi=m[ro]),vl(Qe,ro,Fs(fi,C,N,ro,m,Re))}),Qe}function Eh(m){var C=Xo(m);return function(N){return Dd(N,m,C)}}function Dd(m,C,N){var Y=N.length;if(m==null)return!Y;for(m=uo(m);Y--;){var ve=N[Y],Re=C[ve],Qe=m[ve];if(Qe===D&&!(ve in m)||!Re(Qe))return!1}return!0}function Uu(m,C,N){if(typeof m!="function")throw new Ca(ee);return di(function(){m.apply(D,N)},C)}function uu(m,C,N,Y){var ve=-1,Re=Er,Qe=!0,ut=m.length,At=[],wn=C.length;if(!ut)return At;N&&(C=bi(C,Gs(N))),Y?(Re=us,Qe=!1):C.length>=z&&(Re=aa,Qe=!1,C=new Hl(C));e:for(;++ve<ut;){var _n=m[ve],kn=N==null?_n:N(_n);if(_n=Y||_n!==0?_n:0,Qe&&kn===kn){for(var ar=wn;ar--;)if(C[ar]===kn)continue e;At.push(_n)}else Re(C,kn,Y)||At.push(_n)}return At}var Wl=pc(dc),Gg=pc(Dl,!0);function Sf(m,C){var N=!0;return Wl(m,function(Y,ve,Re){return N=!!C(Y,ve,Re),N}),N}function _f(m,C,N){for(var Y=-1,ve=m.length;++Y<ve;){var Re=m[Y],Qe=C(Re);if(Qe!=null&&(ut===D?Qe===Qe&&!Zi(Qe):N(Qe,ut)))var ut=Qe,At=Re}return At}function Af(m,C,N,Y){var ve=m.length;for(N=Tr(N),N<0&&(N=-N>ve?0:ve+N),Y=Y===D||Y>ve?ve:Tr(Y),Y<0&&(Y+=ve),Y=N>Y?0:Wg(Y);N<Y;)m[N++]=C;return m}function Sp(m,C){var N=[];return Wl(m,function(Y,ve,Re){C(Y,ve,Re)&&N.push(Y)}),N}function ua(m,C,N,Y,ve){var Re=-1,Qe=m.length;for(N||(N=sn),ve||(ve=[]);++Re<Qe;){var ut=m[Re];C>0&&N(ut)?C>1?ua(ut,C-1,N,Y,ve):ds(ve,ut):Y||(ve[ve.length]=ut)}return ve}var _p=Ip(),Ap=Ip(!0);function dc(m,C){return m&&_p(m,C,Xo)}function Dl(m,C){return m&&Ap(m,C,Xo)}function Tf(m,C){return Zr(C,function(N){return Vd(m[N])})}function Nl(m,C){C=La(C,m);for(var N=0,Y=C.length;m!=null&&N<Y;)m=m[Oo(C[N++])];return N&&N==Y?m:D}function Fg(m,C,N){var Y=C(m);return Ai(m)?Y:ds(Y,N(m))}function qs(m){return m==null?m===D?ic:lo:Lo&&Lo in uo(m)?gn(m):mi(m)}function Tp(m,C){return m>C}function Sh(m,C){return m!=null&&ot.call(m,C)}function Mf(m,C){return m!=null&&C in uo(m)}function Gc(m,C,N){return m>=Ds(C,N)&&m<hs(C,N)}function Of(m,C,N){for(var Y=N?us:Er,ve=m[0].length,Re=m.length,Qe=Re,ut=Ht(Re),At=1/0,wn=[];Qe--;){var _n=m[Qe];Qe&&C&&(_n=bi(_n,Gs(C))),At=Ds(_n.length,At),ut[Qe]=!N&&(C||ve>=120&&_n.length>=120)?new Hl(Qe&&_n):D}_n=m[0];var kn=-1,ar=ut[0];e:for(;++kn<ve&&wn.length<At;){var kr=_n[kn],vi=C?C(kr):kr;if(kr=N||kr!==0?kr:0,!(ar?aa(ar,vi):Y(wn,vi,N))){for(Qe=Re;--Qe;){var Ui=ut[Qe];if(!(Ui?aa(Ui,vi):Y(m[Qe],vi,N)))continue e}ar&&ar.push(vi),wn.push(kr)}}return wn}function Pf(m,C,N,Y){return dc(m,function(ve,Re,Qe){C(Y,N(ve),Re,Qe)}),Y}function Xl(m,C,N){C=La(C,m),m=oi(m,C);var Y=m==null?m:m[Oo(st(C))];return Y==null?D:Gt(Y,m,N)}function du(m){return zs(m)&&qs(m)==Le}function hu(m){return zs(m)&&qs(m)==Nt}function Vu(m){return zs(m)&&qs(m)==Rn}function ju(m,C,N,Y,ve){return m===C?!0:m==null||C==null||!zs(m)&&!zs(C)?m!==m&&C!==C:Nd(m,C,N,Y,ju,ve)}function Nd(m,C,N,Y,ve,Re){var Qe=Ai(m),ut=Ai(C),At=Qe?Ve:un(m),wn=ut?Ve:un(C);At=At==Le?F:At,wn=wn==Le?F:wn;var _n=At==F,kn=wn==F,ar=At==wn;if(ar&&kh(m)){if(!kh(C))return!1;Qe=!0,_n=!1}if(ar&&!_n)return Re||(Re=new to),Qe||jd(m)?Vg(m,C,N,Y,ve,Re):K0(m,C,At,N,Y,ve,Re);if(!(N&le)){var kr=_n&&ot.call(m,"__wrapped__"),vi=kn&&ot.call(C,"__wrapped__");if(kr||vi){var Ui=kr?m.value():m,fi=vi?C.value():C;return Re||(Re=new to),ve(Ui,fi,N,Y,Re)}}return ar?(Re||(Re=new to),q0(m,C,N,Y,ve,Re)):!1}function fu(m){return zs(m)&&un(m)==ti}function Hu(m,C,N,Y){var ve=N.length,Re=ve,Qe=!Y;if(m==null)return!Re;for(m=uo(m);ve--;){var ut=N[ve];if(Qe&&ut[2]?ut[1]!==m[ut[0]]:!(ut[0]in m))return!1}for(;++ve<Re;){ut=N[ve];var At=ut[0],wn=m[At],_n=ut[1];if(Qe&&ut[2]){if(wn===D&&!(At in m))return!1}else{var kn=new to;if(Y)var ar=Y(wn,_n,At,m,C,kn);if(!(ar===D?ju(_n,wn,le|be,Y,kn):ar))return!1}}return!0}function Zl(m){if(!Rs(m)||yr(m))return!1;var C=Vd(m)?zr:El;return C.test($o(m))}function ml(m){return zs(m)&&qs(m)==Te}function _h(m){return zs(m)&&un(m)==cl}function Id(m){return zs(m)&&iv(m.length)&&!!Ao[qs(m)]}function Il(m){return typeof m=="function"?m:m==null?_o:typeof m=="object"?Ai(m)?Rd(m[0],m[1]):Yl(m):vv(m)}function $u(m){if(!Nn(m))return gl(m);var C=[];for(var N in uo(m))ot.call(m,N)&&N!="constructor"&&C.push(N);return C}function Mp(m){if(!Rs(m))return nr(m);var C=Nn(m),N=[];for(var Y in m)Y=="constructor"&&(C||!ot.call(m,Y))||N.push(Y);return N}function pu(m,C){return m<C}function qa(m,C){var N=-1,Y=tc(m)?Ht(m.length):[];return Wl(m,function(ve,Re,Qe){Y[++N]=C(ve,Re,Qe)}),Y}function Yl(m){var C=Lt(m);return C.length==1&&C[0][2]?nn(C[0][0],C[0][1]):function(N){return N===m||Hu(N,m,C)}}function Rd(m,C){return Pn(m)&&Cn(C)?nn(Oo(m),C):function(N){var Y=Bf(N,m);return Y===D&&Y===C?Yg(N,m):ju(C,Y,le|be)}}function Rl(m,C,N,Y,ve){m!==C&&_p(C,function(Re,Qe){if(ve||(ve=new to),Rs(Re))hc(m,C,Qe,N,Rl,Y,ve);else{var ut=Y?Y(os(m,Qe),Re,Qe+"",m,C,ve):D;ut===D&&(ut=Re),Lc(m,Qe,ut)}},Aa)}function hc(m,C,N,Y,ve,Re,Qe){var ut=os(m,N),At=os(C,N),wn=Qe.get(At);if(wn){Lc(m,N,wn);return}var _n=Re?Re(ut,At,N+"",m,C,Qe):D,kn=_n===D;if(kn){var ar=Ai(At),kr=!ar&&kh(At),vi=!ar&&!kr&&jd(At);_n=At,ar||kr||vi?Ai(ut)?_n=ut:Js(ut)?_n=Ja(ut):kr?(kn=!1,_n=Qu(At,!0)):vi?(kn=!1,_n=fc(At,!0)):_n=[]:$g(At)||td(At)?(_n=ut,td(ut)?_n=Xg(ut):(!Rs(ut)||Vd(ut))&&(_n=Ft(At))):kn=!1}kn&&(Qe.set(At,_n),ve(_n,At,Y,Re,Qe),Qe.delete(At)),Lc(m,N,_n)}function Wu(m,C){var N=m.length;if(N)return C+=C<0?N:0,$n(C,N)?m[C]:D}function Df(m,C,N){C.length?C=bi(C,function(Re){return Ai(Re)?function(Qe){return Nl(Qe,Re.length===1?Re[0]:Re)}:Re}):C=[_o];var Y=-1;C=bi(C,Gs(yt()));var ve=qa(m,function(Re,Qe,ut){var At=bi(C,function(wn){return wn(Re)});return{criteria:At,index:++Y,value:Re}});return ru(ve,function(Re,Qe){return nb(Re,Qe,N)})}function Bg(m,C){return Ah(m,C,function(N,Y){return Yg(m,Y)})}function Ah(m,C,N){for(var Y=-1,ve=C.length,Re={};++Y<ve;){var Qe=C[Y],ut=Nl(m,Qe);N(ut,Qe)&&gu(Re,La(Qe,m),ut)}return Re}function Xu(m){return function(C){return Nl(C,m)}}function Zu(m,C,N,Y){var ve=Y?dl:ba,Re=-1,Qe=C.length,ut=m;for(m===C&&(C=Ja(C)),N&&(ut=bi(m,Gs(N)));++Re<Qe;)for(var At=0,wn=C[Re],_n=N?N(wn):wn;(At=ve(ut,_n,At,Y))>-1;)ut!==m&&ho.call(ut,At,1),ho.call(m,At,1);return m}function Kl(m,C){for(var N=m?C.length:0,Y=N-1;N--;){var ve=C[N];if(N==Y||ve!==Re){var Re=ve;$n(ve)?ho.call(m,ve,1):kf(m,ve)}}return m}function kd(m,C){return m+ku(Ic()*(C-m+1))}function Op(m,C,N,Y){for(var ve=-1,Re=hs(yh((C-m)/(N||1)),0),Qe=Ht(Re);Re--;)Qe[Y?Re:++ve]=m,m+=N;return Qe}function Ld(m,C){var N="";if(!m||C<1||C>jn)return N;do C%2&&(N+=m),C=ku(C/2),C&&(m+=m);while(C);return N}function _i(m,C){return gs(Ur(m,C,_o),m+"")}function Nf(m){return Ol(Vp(m))}function If(m,C){var N=Vp(m);return ss(N,$l(C,0,N.length))}function gu(m,C,N,Y){if(!Rs(m))return m;C=La(C,m);for(var ve=-1,Re=C.length,Qe=Re-1,ut=m;ut!=null&&++ve<Re;){var At=Oo(C[ve]),wn=N;if(At==="__proto__"||At==="constructor"||At==="prototype")return m;if(ve!=Qe){var _n=ut[At];wn=Y?Y(_n,At,ut):D,wn===D&&(wn=Rs(_n)?_n:$n(C[ve+1])?[]:{})}vl(ut,At,wn),ut=ut[At]}return m}var Rf=Ad?function(m,C){return Ad.set(m,C),m}:_o,Pp=uc?function(m,C){return uc(m,"toString",{configurable:!0,enumerable:!1,value:dn(C),writable:!0})}:_o;function X0(m){return ss(Vp(m))}function ql(m,C,N){var Y=-1,ve=m.length;C<0&&(C=-C>ve?0:ve+C),N=N>ve?ve:N,N<0&&(N+=ve),ve=C>N?0:N-C>>>0,C>>>=0;for(var Re=Ht(ve);++Y<ve;)Re[Y]=m[Y+C];return Re}function Dp(m,C){var N;return Wl(m,function(Y,ve,Re){return N=C(Y,ve,Re),!N}),!!N}function Yu(m,C,N){var Y=0,ve=m==null?Y:m.length;if(typeof C=="number"&&C===C&&ve<=Hr){for(;Y<ve;){var Re=Y+ve>>>1,Qe=m[Re];Qe!==null&&!Zi(Qe)&&(N?Qe<=C:Qe<C)?Y=Re+1:ve=Re}return ve}return Th(m,C,_o,N)}function Th(m,C,N,Y){var ve=0,Re=m==null?0:m.length;if(Re===0)return 0;C=N(C);for(var Qe=C!==C,ut=C===null,At=Zi(C),wn=C===D;ve<Re;){var _n=ku((ve+Re)/2),kn=N(m[_n]),ar=kn!==D,kr=kn===null,vi=kn===kn,Ui=Zi(kn);if(Qe)var fi=Y||vi;else wn?fi=vi&&(Y||ar):ut?fi=vi&&ar&&(Y||!kr):At?fi=vi&&ar&&!kr&&(Y||!Ui):kr||Ui?fi=!1:fi=Y?kn<=C:kn<C;fi?ve=_n+1:Re=_n}return Ds(Re,Qn)}function Ku(m,C){for(var N=-1,Y=m.length,ve=0,Re=[];++N<Y;){var Qe=m[N],ut=C?C(Qe):Qe;if(!N||!vc(ut,At)){var At=ut;Re[ve++]=Qe===0?0:Qe}}return Re}function Fc(m){return typeof m=="number"?m:Zi(m)?gr:+m}function Bs(m){if(typeof m=="string")return m;if(Ai(m))return bi(m,Bs)+"";if(Zi(m))return Ng?Ng.call(m):"";var C=m+"";return C=="0"&&1/m==-kt?"-0":C}function Ea(m,C,N){var Y=-1,ve=Er,Re=m.length,Qe=!0,ut=[],At=ut;if(N)Qe=!1,ve=us;else if(Re>=z){var wn=C?null:Qa(m);if(wn)return Ia(wn);Qe=!1,ve=aa,At=new Hl}else At=C?[]:ut;e:for(;++Y<Re;){var _n=m[Y],kn=C?C(_n):_n;if(_n=N||_n!==0?_n:0,Qe&&kn===kn){for(var ar=At.length;ar--;)if(At[ar]===kn)continue e;C&&At.push(kn),ut.push(_n)}else ve(At,kn,N)||(At!==ut&&At.push(kn),ut.push(_n))}return ut}function kf(m,C){return C=La(C,m),m=oi(m,C),m==null||delete m[Oo(st(C))]}function Lf(m,C,N,Y){return gu(m,C,N(Nl(m,C)),Y)}function Mh(m,C,N,Y){for(var ve=m.length,Re=Y?ve:-1;(Y?Re--:++Re<ve)&&C(m[Re],Re,m););return N?ql(m,Y?0:Re,Y?Re+1:ve):ql(m,Y?Re+1:0,Y?ve:Re)}function Ns(m,C){var N=m;return N instanceof Li&&(N=N.value()),$r(C,function(Y,ve){return ve.func.apply(ve.thisArg,ds([Y],ve.args))},N)}function Jn(m,C,N){var Y=m.length;if(Y<2)return Y?Ea(m[0]):[];for(var ve=-1,Re=Ht(Y);++ve<Y;)for(var Qe=m[ve],ut=-1;++ut<Y;)ut!=ve&&(Re[ve]=uu(Re[ve]||Qe,m[ut],C,N));return Ea(ua(Re,1),C,N)}function qu(m,C,N){for(var Y=-1,ve=m.length,Re=C.length,Qe={};++Y<ve;){var ut=Y<Re?C[Y]:D;N(Qe,m[Y],ut)}return Qe}function Gf(m){return Js(m)?m:[]}function yl(m){return typeof m=="function"?m:_o}function La(m,C){return Ai(m)?m:Pn(m,C)?[m]:Ss(So(m))}var Ci=_i;function Ga(m,C,N){var Y=m.length;return N=N===D?Y:N,!C&&N>=Y?m:ql(m,C,N)}var Ju=wd||function(m){return Ws.clearTimeout(m)};function Qu(m,C){if(C)return m.slice();var N=m.length,Y=ur?ur(N):new m.constructor(N);return m.copy(Y),Y}function Ff(m){var C=new m.constructor(m.byteLength);return new Xi(C).set(new Xi(m)),C}function Jl(m,C){var N=C?Ff(m.buffer):m.buffer;return new m.constructor(N,m.byteOffset,m.byteLength)}function Bc(m){var C=new m.constructor(m.source,uf.exec(m));return C.lastIndex=m.lastIndex,C}function To(m){return Ch?uo(Ch.call(m)):{}}function fc(m,C){var N=C?Ff(m.buffer):m.buffer;return new m.constructor(N,m.byteOffset,m.length)}function Np(m,C){if(m!==C){var N=m!==D,Y=m===null,ve=m===m,Re=Zi(m),Qe=C!==D,ut=C===null,At=C===C,wn=Zi(C);if(!ut&&!wn&&!Re&&m>C||Re&&Qe&&At&&!ut&&!wn||Y&&Qe&&At||!N&&At||!ve)return 1;if(!Y&&!Re&&!wn&&m<C||wn&&N&&ve&&!Y&&!Re||ut&&N&&ve||!Qe&&ve||!At)return-1}return 0}function nb(m,C,N){for(var Y=-1,ve=m.criteria,Re=C.criteria,Qe=ve.length,ut=N.length;++Y<Qe;){var At=Np(ve[Y],Re[Y]);if(At){if(Y>=ut)return At;var wn=N[Y];return At*(wn=="desc"?-1:1)}}return m.index-C.index}function gm(m,C,N,Y){for(var ve=-1,Re=m.length,Qe=N.length,ut=-1,At=C.length,wn=hs(Re-Qe,0),_n=Ht(At+wn),kn=!Y;++ut<At;)_n[ut]=C[ut];for(;++ve<Qe;)(kn||ve<Re)&&(_n[N[ve]]=m[ve]);for(;wn--;)_n[ut++]=m[ve++];return _n}function Go(m,C,N,Y){for(var ve=-1,Re=m.length,Qe=-1,ut=N.length,At=-1,wn=C.length,_n=hs(Re-ut,0),kn=Ht(_n+wn),ar=!Y;++ve<_n;)kn[ve]=m[ve];for(var kr=ve;++At<wn;)kn[kr+At]=C[At];for(;++Qe<ut;)(ar||ve<Re)&&(kn[kr+N[Qe]]=m[ve++]);return kn}function Ja(m,C){var N=-1,Y=m.length;for(C||(C=Ht(Y));++N<Y;)C[N]=m[N];return C}function Fa(m,C,N,Y){var ve=!N;N||(N={});for(var Re=-1,Qe=C.length;++Re<Qe;){var ut=C[Re],At=Y?Y(N[ut],m[ut],ut,N,m):D;At===D&&(At=m[ut]),ve?Ho(N,ut,At):vl(N,ut,At)}return N}function Z0(m,C){return Fa(m,pn(m),C)}function vm(m,C){return Fa(m,vn(m),C)}function Oh(m,C){return function(N,Y){var ve=Ai(N)?Sn:Lg,Re=C?C():{};return ve(N,m,yt(Y,2),Re)}}function Ph(m){return _i(function(C,N){var Y=-1,ve=N.length,Re=ve>1?N[ve-1]:D,Qe=ve>2?N[2]:D;for(Re=m.length>3&&typeof Re=="function"?(ve--,Re):D,Qe&&qt(N[0],N[1],Qe)&&(Re=ve<3?D:Re,ve=1),C=uo(C);++Y<ve;){var ut=N[Y];ut&&m(C,ut,Y,Re)}return C})}function pc(m,C){return function(N,Y){if(N==null)return N;if(!tc(N))return m(N,Y);for(var ve=N.length,Re=C?ve:-1,Qe=uo(N);(C?Re--:++Re<ve)&&Y(Qe[Re],Re,Qe)!==!1;);return N}}function Ip(m){return function(C,N,Y){for(var ve=-1,Re=uo(C),Qe=Y(C),ut=Qe.length;ut--;){var At=Qe[m?ut:++ve];if(N(Re[At],At,Re)===!1)break}return C}}function Dh(m,C,N){var Y=C&se,ve=Fd(m);function Re(){var Qe=this&&this!==Ws&&this instanceof Re?ve:m;return Qe.apply(Y?N:this,arguments)}return Re}function is(m){return function(C){C=So(C);var N=pl(C)?ui(C):D,Y=N?N[0]:C.charAt(0),ve=N?Ga(N,1).join(""):C.slice(1);return Y[m]()+ve}}function Gd(m){return function(C){return $r(Kb(Wb(C).replace(mf,"")),m,"")}}function Fd(m){return function(){var C=arguments;switch(C.length){case 0:return new m;case 1:return new m(C[0]);case 2:return new m(C[0],C[1]);case 3:return new m(C[0],C[1],C[2]);case 4:return new m(C[0],C[1],C[2],C[3]);case 5:return new m(C[0],C[1],C[2],C[3],C[4]);case 6:return new m(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new m(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var N=Md(m.prototype),Y=m.apply(N,C);return Rs(Y)?Y:N}}function Rp(m,C,N){var Y=Fd(m);function ve(){for(var Re=arguments.length,Qe=Ht(Re),ut=Re,At=Tt(ve);ut--;)Qe[ut]=arguments[ut];var wn=Re<3&&Qe[0]!==At&&Qe[Re-1]!==At?[]:ts(Qe,At);if(Re-=wn.length,Re<N)return Gp(m,C,Ql,ve.placeholder,D,Qe,wn,D,D,N-Re);var _n=this&&this!==Ws&&this instanceof ve?Y:m;return Gt(_n,this,Qe)}return ve}function zg(m){return function(C,N,Y){var ve=uo(C);if(!tc(C)){var Re=yt(N,3);C=Xo(C),N=function(ut){return Re(ve[ut],ut,ve)}}var Qe=m(C,N,Y);return Qe>-1?ve[Re?C[Qe]:Qe]:D}}function Ba(m){return el(function(C){var N=C.length,Y=N,ve=wa.prototype.thru;for(m&&C.reverse();Y--;){var Re=C[Y];if(typeof Re!="function")throw new Ca(ee);if(ve&&!Qe&&He(Re)=="wrapper")var Qe=new wa([],!0)}for(Y=Qe?Y:N;++Y<N;){Re=C[Y];var ut=He(Re),At=ut=="wrapper"?Me(Re):D;At&&Dn(At[0])&&At[1]==(G|we|Ee|Be)&&!At[4].length&&At[9]==1?Qe=Qe[He(At[0])].apply(Qe,At[3]):Qe=Re.length==1&&Dn(Re)?Qe[ut]():Qe.thru(Re)}return function(){var wn=arguments,_n=wn[0];if(Qe&&wn.length==1&&Ai(_n))return Qe.plant(_n).value();for(var kn=0,ar=N?C[kn].apply(this,wn):_n;++kn<N;)ar=C[kn].call(this,ar);return ar}})}function Ql(m,C,N,Y,ve,Re,Qe,ut,At,wn){var _n=C&G,kn=C&se,ar=C&ce,kr=C&(we|pe),vi=C&Ke,Ui=ar?D:Fd(m);function fi(){for(var ro=arguments.length,so=Ht(ro),jc=ro;jc--;)so[jc]=arguments[jc];if(kr)var Va=Tt(fi),Hc=Cd(so,Va);if(Y&&(so=gm(so,Y,ve,kr)),Re&&(so=Go(so,Re,Qe,kr)),ro-=Hc,kr&&ro<wn){var qo=ts(so,Va);return Gp(m,C,Ql,fi.placeholder,N,so,qo,ut,At,wn-ro)}var Ot=kn?N:this,xl=ar?Ot[m]:m;return ro=so.length,ut?so=Ii(so,ut):vi&&ro>1&&so.reverse(),_n&&At<ro&&(so.length=At),this&&this!==Ws&&this instanceof fi&&(xl=Ui||Fd(xl)),xl.apply(Ot,so)}return fi}function fs(m,C){return function(N,Y){return Pf(N,m,C(Y),{})}}function Sa(m,C){return function(N,Y){var ve;if(N===D&&Y===D)return C;if(N!==D&&(ve=N),Y!==D){if(ve===D)return Y;typeof N=="string"||typeof Y=="string"?(N=Bs(N),Y=Bs(Y)):(N=Fc(N),Y=Fc(Y)),ve=m(N,Y)}return ve}}function kp(m){return el(function(C){return C=bi(C,Gs(yt())),_i(function(N){var Y=this;return m(C,function(ve){return Gt(ve,Y,N)})})})}function Lp(m,C){C=C===D?" ":Bs(C);var N=C.length;if(N<2)return N?Ld(C,m):C;var Y=Ld(C,yh(m/cc(C)));return pl(C)?Ga(ui(Y),0,m).join(""):Y.slice(0,m)}function mm(m,C,N,Y){var ve=C&se,Re=Fd(m);function Qe(){for(var ut=-1,At=arguments.length,wn=-1,_n=Y.length,kn=Ht(_n+At),ar=this&&this!==Ws&&this instanceof Qe?Re:m;++wn<_n;)kn[wn]=Y[wn];for(;At--;)kn[wn++]=arguments[++ut];return Gt(ar,ve?N:this,kn)}return Qe}function Nh(m){return function(C,N,Y){return Y&&typeof Y!="number"&&qt(C,N,Y)&&(N=Y=D),C=mu(C),N===D?(N=C,C=0):N=mu(N),Y=Y===D?C<N?1:-1:mu(Y),Op(C,N,Y,m)}}function Ih(m){return function(C,N){return typeof C=="string"&&typeof N=="string"||(C=mc(C),N=mc(N)),m(C,N)}}function Gp(m,C,N,Y,ve,Re,Qe,ut,At,wn){var _n=C&we,kn=_n?Qe:D,ar=_n?D:Qe,kr=_n?Re:D,vi=_n?D:Re;C|=_n?Ee:it,C&=~(_n?it:Ee),C&fe||(C&=~(se|ce));var Ui=[m,C,ve,kr,kn,vi,ar,ut,At,wn],fi=N.apply(D,Ui);return Dn(m)&&ps(fi,Ui),fi.placeholder=Y,Eo(fi,m,C)}function _a(m){var C=ko[m];return function(N,Y){if(N=mc(N),Y=Y==null?0:Ds(Tr(Y),292),Y&&Cf(N)){var ve=(So(N)+"e").split("e"),Re=C(ve[0]+"e"+(+ve[1]+Y));return ve=(So(Re)+"e").split("e"),+(ve[0]+"e"+(+ve[1]-Y))}return C(N)}}var Qa=la&&1/Ia(new la([,-0]))[1]==kt?function(m){return new la(m)}:fv;function vu(m){return function(C){var N=un(C);return N==ti?ou(C):N==cl?Du(C):Ys(C,m(C))}}function gc(m,C,N,Y,ve,Re,Qe,ut){var At=C&ce;if(!At&&typeof m!="function")throw new Ca(ee);var wn=Y?Y.length:0;if(wn||(C&=~(Ee|it),Y=ve=D),Qe=Qe===D?Qe:hs(Tr(Qe),0),ut=ut===D?ut:Tr(ut),wn-=ve?ve.length:0,C&it){var _n=Y,kn=ve;Y=ve=D}var ar=At?D:Me(m),kr=[m,C,N,Y,ve,_n,kn,Re,Qe,ut];if(ar&&Yr(kr,ar),m=kr[0],C=kr[1],N=kr[2],Y=kr[3],ve=kr[4],ut=kr[9]=kr[9]===D?At?0:m.length:hs(kr[9]-wn,0),!ut&&C&(we|pe)&&(C&=~(we|pe)),!C||C==se)var vi=Dh(m,C,N);else C==we||C==pe?vi=Rp(m,C,ut):(C==Ee||C==(se|Ee))&&!ve.length?vi=mm(m,C,N,Y):vi=Ql.apply(D,kr);var Ui=ar?Rf:ps;return Eo(Ui(vi,kr),m,C)}function Ug(m,C,N,Y){return m===D||vc(m,ze[N])&&!ot.call(Y,N)?C:m}function Rh(m,C,N,Y,ve,Re){return Rs(m)&&Rs(C)&&(Re.set(C,m),Rl(m,C,D,Rh,Re),Re.delete(C)),m}function Y0(m){return $g(m)?D:m}function Vg(m,C,N,Y,ve,Re){var Qe=N&le,ut=m.length,At=C.length;if(ut!=At&&!(Qe&&At>ut))return!1;var wn=Re.get(m),_n=Re.get(C);if(wn&&_n)return wn==C&&_n==m;var kn=-1,ar=!0,kr=N&be?new Hl:D;for(Re.set(m,C),Re.set(C,m);++kn<ut;){var vi=m[kn],Ui=C[kn];if(Y)var fi=Qe?Y(Ui,vi,kn,C,m,Re):Y(vi,Ui,kn,m,C,Re);if(fi!==D){if(fi)continue;ar=!1;break}if(kr){if(!sa(C,function(ro,so){if(!aa(kr,so)&&(vi===ro||ve(vi,ro,N,Y,Re)))return kr.push(so)})){ar=!1;break}}else if(!(vi===Ui||ve(vi,Ui,N,Y,Re))){ar=!1;break}}return Re.delete(m),Re.delete(C),ar}function K0(m,C,N,Y,ve,Re,Qe){switch(N){case Yt:if(m.byteLength!=C.byteLength||m.byteOffset!=C.byteOffset)return!1;m=m.buffer,C=C.buffer;case Nt:return!(m.byteLength!=C.byteLength||!Re(new Xi(m),new Xi(C)));case Vt:case Rn:case Oi:return vc(+m,+C);case _r:return m.name==C.name&&m.message==C.message;case Te:case wr:return m==C+"";case ti:var ut=ou;case cl:var At=Y&le;if(ut||(ut=Ia),m.size!=C.size&&!At)return!1;var wn=Qe.get(m);if(wn)return wn==C;Y|=be,Qe.set(m,C);var _n=Vg(ut(m),ut(C),Y,ve,Re,Qe);return Qe.delete(m),_n;case Pa:if(Ch)return Ch.call(m)==Ch.call(C)}return!1}function q0(m,C,N,Y,ve,Re){var Qe=N&le,ut=Bd(m),At=ut.length,wn=Bd(C),_n=wn.length;if(At!=_n&&!Qe)return!1;for(var kn=At;kn--;){var ar=ut[kn];if(!(Qe?ar in C:ot.call(C,ar)))return!1}var kr=Re.get(m),vi=Re.get(C);if(kr&&vi)return kr==C&&vi==m;var Ui=!0;Re.set(m,C),Re.set(C,m);for(var fi=Qe;++kn<At;){ar=ut[kn];var ro=m[ar],so=C[ar];if(Y)var jc=Qe?Y(so,ro,ar,C,m,Re):Y(ro,so,ar,m,C,Re);if(!(jc===D?ro===so||ve(ro,so,N,Y,Re):jc)){Ui=!1;break}fi||(fi=ar=="constructor")}if(Ui&&!fi){var Va=m.constructor,Hc=C.constructor;Va!=Hc&&"constructor"in m&&"constructor"in C&&!(typeof Va=="function"&&Va instanceof Va&&typeof Hc=="function"&&Hc instanceof Hc)&&(Ui=!1)}return Re.delete(m),Re.delete(C),Ui}function el(m){return gs(Ur(m,D,Fe),m+"")}function Bd(m){return Fg(m,Xo,pn)}function K(m){return Fg(m,Aa,vn)}var Me=Ad?function(m){return Ad.get(m)}:fv;function He(m){for(var C=m.name+"",N=ca[C],Y=ot.call(ca,C)?N.length:0;Y--;){var ve=N[Y],Re=ve.func;if(Re==null||Re==m)return ve.name}return C}function Tt(m){var C=ot.call(Ae,"placeholder")?Ae:m;return C.placeholder}function yt(){var m=Ae.iteratee||za;return m=m===za?Il:m,arguments.length?m(arguments[0],arguments[1]):m}function St(m,C){var N=m.__data__;return ln(C)?N[typeof C=="string"?"string":"hash"]:N.map}function Lt(m){for(var C=Xo(m),N=C.length;N--;){var Y=C[N],ve=m[Y];C[N]=[Y,ve,Cn(ve)]}return C}function on(m,C){var N=Al(m,C);return Zl(N)?N:D}function gn(m){var C=ot.call(m,Lo),N=m[Lo];try{m[Lo]=D;var Y=!0}catch(Re){}var ve=Kn.call(m);return Y&&(C?m[Lo]=N:delete m[Lo]),ve}var pn=bh?function(m){return m==null?[]:(m=uo(m),Zr(bh(m),function(C){return Es.call(m,C)}))}:mv,vn=bh?function(m){for(var C=[];m;)ds(C,pn(m)),m=ns(m);return C}:mv,un=qs;(yp&&un(new yp(new ArrayBuffer(1)))!=Yt||ka&&un(new ka)!=ti||Sd&&un(Sd.resolve())!=H||la&&un(new la)!=cl||Ya&&un(new Ya)!=Qo)&&(un=function(m){var C=qs(m),N=C==F?m.constructor:D,Y=N?$o(N):"";if(Y)switch(Y){case xh:return Yt;case au:return ti;case Td:return H;case Pg:return cl;case Dg:return Qo}return C});function Bn(m,C,N){for(var Y=-1,ve=N.length;++Y<ve;){var Re=N[Y],Qe=Re.size;switch(Re.type){case"drop":m+=Qe;break;case"dropRight":C-=Qe;break;case"take":C=Ds(C,m+Qe);break;case"takeRight":m=hs(m,C-Qe);break}}return{start:m,end:C}}function fn(m){var C=m.match(Ms);return C?C[1].split(qc):[]}function Mn(m,C,N){C=La(C,m);for(var Y=-1,ve=C.length,Re=!1;++Y<ve;){var Qe=Oo(C[Y]);if(!(Re=m!=null&&N(m,Qe)))break;m=m[Qe]}return Re||++Y!=ve?Re:(ve=m==null?0:m.length,!!ve&&iv(ve)&&$n(Qe,ve)&&(Ai(m)||td(m)))}function mt(m){var C=m.length,N=new m.constructor(C);return C&&typeof m[0]=="string"&&ot.call(m,"index")&&(N.index=m.index,N.input=m.input),N}function Ft(m){return typeof m.constructor=="function"&&!Nn(m)?Md(ns(m)):{}}function yn(m,C,N){var Y=m.constructor;switch(C){case Nt:return Ff(m);case Vt:case Rn:return new Y(+m);case Yt:return Jl(m,N);case Pt:case Kt:case or:case $i:case Xr:case ni:case Ir:case yi:case ii:return fc(m,N);case ti:return new Y;case Oi:case wr:return new Y(m);case Te:return Bc(m);case cl:return new Y;case Pa:return To(m)}}function Xn(m,C){var N=C.length;if(!N)return m;var Y=N-1;return C[Y]=(N>1?"& ":"")+C[Y],C=C.join(N>2?", ":" "),m.replace(Ro,`{
/* [wrapped with `+C+`] */
`)}function sn(m){return Ai(m)||td(m)||!!(Ru&&m&&m[Ru])}function $n(m,C){var N=typeof m;return C=C==null?jn:C,!!C&&(N=="number"||N!="symbol"&&df.test(m))&&m>-1&&m%1==0&&m<C}function qt(m,C,N){if(!Rs(N))return!1;var Y=typeof C;return(Y=="number"?tc(N)&&$n(C,N.length):Y=="string"&&C in N)?vc(N[C],m):!1}function Pn(m,C){if(Ai(m))return!1;var N=typeof m;return N=="number"||N=="symbol"||N=="boolean"||m==null||Zi(m)?!0:cp.test(m)||!ah.test(m)||C!=null&&m in uo(C)}function ln(m){var C=typeof m;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?m!=="__proto__":m===null}function Dn(m){var C=He(m),N=Ae[C];if(typeof N!="function"||!(C in Li.prototype))return!1;if(m===N)return!0;var Y=Me(N);return!!Y&&m===Y[0]}function yr(m){return!!Tn&&Tn in m}var Fr=ht?Vd:Bt;function Nn(m){var C=m&&m.constructor,N=typeof C=="function"&&C.prototype||ze;return m===N}function Cn(m){return m===m&&!Rs(m)}function nn(m,C){return function(N){return N==null?!1:N[m]===C&&(C!==D||m in uo(N))}}function Pr(m){var C=nv(m,function(Y){return N.size===oe&&N.clear(),Y}),N=C.cache;return C}function Yr(m,C){var N=m[1],Y=C[1],ve=N|Y,Re=ve<(se|ce|G),Qe=Y==G&&N==we||Y==G&&N==Be&&m[7].length<=C[8]||Y==(G|Be)&&C[7].length<=C[8]&&N==we;if(!(Re||Qe))return m;Y&se&&(m[2]=C[2],ve|=N&se?0:fe);var ut=C[3];if(ut){var At=m[3];m[3]=At?gm(At,ut,C[4]):ut,m[4]=At?ts(m[3],ie):C[4]}return ut=C[5],ut&&(At=m[5],m[5]=At?Go(At,ut,C[6]):ut,m[6]=At?ts(m[5],ie):C[6]),ut=C[7],ut&&(m[7]=ut),Y&G&&(m[8]=m[8]==null?C[8]:Ds(m[8],C[8])),m[9]==null&&(m[9]=C[9]),m[0]=C[0],m[1]=ve,m}function nr(m){var C=[];if(m!=null)for(var N in uo(m))C.push(N);return C}function mi(m){return Kn.call(m)}function Ur(m,C,N){return C=hs(C===D?m.length-1:C,0),function(){for(var Y=arguments,ve=-1,Re=hs(Y.length-C,0),Qe=Ht(Re);++ve<Re;)Qe[ve]=Y[C+ve];ve=-1;for(var ut=Ht(C+1);++ve<C;)ut[ve]=Y[ve];return ut[C]=N(Qe),Gt(m,this,ut)}}function oi(m,C){return C.length<2?m:Nl(m,ql(C,0,-1))}function Ii(m,C){for(var N=m.length,Y=Ds(C.length,N),ve=Ja(m);Y--;){var Re=C[Y];m[Y]=$n(Re,N)?ve[Re]:D}return m}function os(m,C){if(!(C==="constructor"&&typeof m[C]=="function")&&C!="__proto__")return m[C]}var ps=Mo(Rf),di=Si||function(m,C){return Ws.setTimeout(m,C)},gs=Mo(Pp);function Eo(m,C,N){var Y=C+"";return gs(m,Xn(Y,vs(fn(Y),N)))}function Mo(m){var C=0,N=0;return function(){var Y=z0(),ve=Pe-(Y-N);if(N=Y,ve>0){if(++C>=mn)return arguments[0]}else C=0;return m.apply(D,arguments)}}function ss(m,C){var N=-1,Y=m.length,ve=Y-1;for(C=C===D?Y:C;++N<C;){var Re=kd(N,ve),Qe=m[Re];m[Re]=m[N],m[N]=Qe}return m.length=C,m}var Ss=Pr(function(m){var C=[];return m.charCodeAt(0)===46&&C.push(""),m.replace(_c,function(N,Y,ve,Re){C.push(ve?Re.replace(cf,"$1"):Y||N)}),C});function Oo(m){if(typeof m=="string"||Zi(m))return m;var C=m+"";return C=="0"&&1/m==-kt?"-0":C}function $o(m){if(m!=null){try{return rn.call(m)}catch(C){}try{return m+""}catch(C){}}return""}function vs(m,C){return Rt(vr,function(N){var Y="_."+N[0];C&N[1]&&!Er(m,Y)&&m.push(Y)}),m.sort()}function Kr(m){if(m instanceof Li)return m.clone();var C=new wa(m.__wrapped__,m.__chain__);return C.__actions__=Ja(m.__actions__),C.__index__=m.__index__,C.__values__=m.__values__,C}function Wo(m,C,N){(N?qt(m,C,N):C===D)?C=1:C=hs(Tr(C),0);var Y=m==null?0:m.length;if(!Y||C<1)return[];for(var ve=0,Re=0,Qe=Ht(yh(Y/C));ve<Y;)Qe[Re++]=ql(m,ve,ve+=C);return Qe}function zi(m){for(var C=-1,N=m==null?0:m.length,Y=0,ve=[];++C<N;){var Re=m[C];Re&&(ve[Y++]=Re)}return ve}function Sr(){var m=arguments.length;if(!m)return[];for(var C=Ht(m-1),N=arguments[0],Y=m;Y--;)C[Y-1]=arguments[Y];return ds(Ai(N)?Ja(N):[N],ua(C,1))}var wi=_i(function(m,C){return Js(m)?uu(m,ua(C,1,Js,!0)):[]}),Ri=_i(function(m,C){var N=st(C);return Js(N)&&(N=D),Js(m)?uu(m,ua(C,1,Js,!0),yt(N,2)):[]}),ms=_i(function(m,C){var N=st(C);return Js(N)&&(N=D),Js(m)?uu(m,ua(C,1,Js,!0),D,N):[]});function zc(m,C,N){var Y=m==null?0:m.length;return Y?(C=N||C===D?1:Tr(C),ql(m,C<0?0:C,Y)):[]}function zd(m,C,N){var Y=m==null?0:m.length;return Y?(C=N||C===D?1:Tr(C),C=Y-C,ql(m,0,C<0?0:C)):[]}function Ue(m,C){return m&&m.length?Mh(m,yt(C,3),!0,!0):[]}function Dt(m,C){return m&&m.length?Mh(m,yt(C,3),!0):[]}function Mt(m,C,N,Y){var ve=m==null?0:m.length;return ve?(N&&typeof N!="number"&&qt(m,C,N)&&(N=0,Y=ve),Af(m,C,N,Y)):[]}function qn(m,C,N){var Y=m==null?0:m.length;if(!Y)return-1;var ve=N==null?0:Tr(N);return ve<0&&(ve=hs(Y+ve,0)),Xs(m,yt(C,3),ve)}function gi(m,C,N){var Y=m==null?0:m.length;if(!Y)return-1;var ve=Y-1;return N!==D&&(ve=Tr(N),ve=N<0?hs(Y+ve,0):Ds(ve,Y-1)),Xs(m,yt(C,3),ve,!0)}function Fe(m){var C=m==null?0:m.length;return C?ua(m,1):[]}function Ce(m){var C=m==null?0:m.length;return C?ua(m,kt):[]}function Je(m,C){var N=m==null?0:m.length;return N?(C=C===D?1:Tr(C),ua(m,C)):[]}function pt(m){for(var C=-1,N=m==null?0:m.length,Y={};++C<N;){var ve=m[C];Y[ve[0]]=ve[1]}return Y}function gt(m){return m&&m.length?m[0]:D}function et(m,C,N){var Y=m==null?0:m.length;if(!Y)return-1;var ve=N==null?0:Tr(N);return ve<0&&(ve=hs(Y+ve,0)),ba(m,C,ve)}function Ze(m){var C=m==null?0:m.length;return C?ql(m,0,-1):[]}var lt=_i(function(m){var C=bi(m,Gf);return C.length&&C[0]===m[0]?Of(C):[]}),Ge=_i(function(m){var C=st(m),N=bi(m,Gf);return C===st(N)?C=D:N.pop(),N.length&&N[0]===m[0]?Of(N,yt(C,2)):[]}),Ye=_i(function(m){var C=st(m),N=bi(m,Gf);return C=typeof C=="function"?C:D,C&&N.pop(),N.length&&N[0]===m[0]?Of(N,D,C):[]});function Ie(m,C){return m==null?"":Ed.call(m,C)}function st(m){var C=m==null?0:m.length;return C?m[C-1]:D}function Ct(m,C,N){var Y=m==null?0:m.length;if(!Y)return-1;var ve=Y;return N!==D&&(ve=Tr(N),ve=ve<0?hs(Y+ve,0):Ds(ve,Y-1)),C===C?vh(m,C,ve):Xs(m,Os,ve,!0)}function $t(m,C){return m&&m.length?Wu(m,Tr(C)):D}var Xt=_i(zt);function zt(m,C){return m&&m.length&&C&&C.length?Zu(m,C):m}function bn(m,C,N){return m&&m.length&&C&&C.length?Zu(m,C,yt(N,2)):m}function cr(m,C,N){return m&&m.length&&C&&C.length?Zu(m,C,D,N):m}var Qr=el(function(m,C){var N=m==null?0:m.length,Y=cu(m,C);return Kl(m,bi(C,function(ve){return $n(ve,N)?+ve:ve}).sort(Np)),Y});function er(m,C){var N=[];if(!(m&&m.length))return N;var Y=-1,ve=[],Re=m.length;for(C=yt(C,3);++Y<Re;){var Qe=m[Y];C(Qe,Y,m)&&(N.push(Qe),ve.push(Y))}return Kl(m,ve),N}function xr(m){return m==null?m:wf.call(m)}function sr(m,C,N){var Y=m==null?0:m.length;return Y?(N&&typeof N!="number"&&qt(m,C,N)?(C=0,N=Y):(C=C==null?0:Tr(C),N=N===D?Y:Tr(N)),ql(m,C,N)):[]}function Bi(m,C){return Yu(m,C)}function Ko(m,C,N){return Th(m,C,yt(N,2))}function tl(m,C){var N=m==null?0:m.length;if(N){var Y=Yu(m,C);if(Y<N&&vc(m[Y],C))return Y}return-1}function Fp(m,C){return Yu(m,C,!0)}function bl(m,C,N){return Th(m,C,yt(N,2),!0)}function jg(m,C){var N=m==null?0:m.length;if(N){var Y=Yu(m,C,!0)-1;if(vc(m[Y],C))return Y}return-1}function Is(m){return m&&m.length?Ku(m):[]}function ym(m,C){return m&&m.length?Ku(m,yt(C,2)):[]}function bm(m){var C=m==null?0:m.length;return C?ql(m,1,C):[]}function rb(m,C,N){return m&&m.length?(C=N||C===D?1:Tr(C),ql(m,0,C<0?0:C)):[]}function E1(m,C,N){var Y=m==null?0:m.length;return Y?(C=N||C===D?1:Tr(C),C=Y-C,ql(m,C<0?0:C,Y)):[]}function ib(m,C){return m&&m.length?Mh(m,yt(C,3),!1,!0):[]}function ob(m,C){return m&&m.length?Mh(m,yt(C,3)):[]}var sb=_i(function(m){return Ea(ua(m,1,Js,!0))}),ab=_i(function(m){var C=st(m);return Js(C)&&(C=D),Ea(ua(m,1,Js,!0),yt(C,2))}),kw=_i(function(m){var C=st(m);return C=typeof C=="function"?C:D,Ea(ua(m,1,Js,!0),D,C)});function ec(m){return m&&m.length?Ea(m):[]}function S1(m,C){return m&&m.length?Ea(m,yt(C,2)):[]}function xm(m,C){return C=typeof C=="function"?C:D,m&&m.length?Ea(m,D,C):[]}function Ud(m){if(!(m&&m.length))return[];var C=0;return m=Zr(m,function(N){if(Js(N))return C=hs(N.length,C),!0}),Pi(C,function(N){return bi(m,Wi(N))})}function ed(m,C){if(!(m&&m.length))return[];var N=Ud(m);return C==null?N:bi(N,function(Y){return Gt(C,D,Y)})}var _1=_i(function(m,C){return Js(m)?uu(m,C):[]}),lb=_i(function(m){return Jn(Zr(m,Js))}),Cm=_i(function(m){var C=st(m);return Js(C)&&(C=D),Jn(Zr(m,Js),yt(C,2))}),cb=_i(function(m){var C=st(m);return C=typeof C=="function"?C:D,Jn(Zr(m,Js),D,C)}),wm=_i(Ud);function J0(m,C){return qu(m||[],C||[],vl)}function ub(m,C){return qu(m||[],C||[],gu)}var Q0=_i(function(m){var C=m.length,N=C>1?m[C-1]:D;return N=typeof N=="function"?(m.pop(),N):D,ed(m,N)});function db(m){var C=Ae(m);return C.__chain__=!0,C}function Fo(m,C){return C(m),m}function ev(m,C){return C(m)}var A1=el(function(m){var C=m.length,N=C?m[0]:0,Y=this.__wrapped__,ve=function(Re){return cu(Re,m)};return C>1||this.__actions__.length||!(Y instanceof Li)||!$n(N)?this.thru(ve):(Y=Y.slice(N,+N+(C?1:0)),Y.__actions__.push({func:ev,args:[ve],thisArg:D}),new wa(Y,this.__chain__).thru(function(Re){return C&&!Re.length&&Re.push(D),Re}))});function T1(){return db(this)}function Uc(){return new wa(this.value(),this.__chain__)}function M1(){this.__values__===D&&(this.__values__=sv(this.value()));var m=this.__index__>=this.__values__.length,C=m?D:this.__values__[this.__index__++];return{done:m,value:C}}function O1(){return this}function P1(m){for(var C,N=this;N instanceof Od;){var Y=Kr(N);Y.__index__=0,Y.__values__=D,C?ve.__wrapped__=Y:C=Y;var ve=Y;N=N.__wrapped__}return ve.__wrapped__=m,C}function D1(){var m=this.__wrapped__;if(m instanceof Li){var C=m;return this.__actions__.length&&(C=new Li(this)),C=C.reverse(),C.__actions__.push({func:ev,args:[xr],thisArg:D}),new wa(C,this.__chain__)}return this.thru(xr)}function N1(){return Ns(this.__wrapped__,this.__actions__)}var Em=Oh(function(m,C,N){ot.call(m,N)?++m[N]:Ho(m,N,1)});function I1(m,C,N){var Y=Ai(m)?Ar:Sf;return N&&qt(m,C,N)&&(C=D),Y(m,yt(C,3))}function hb(m,C){var N=Ai(m)?Zr:Sp;return N(m,yt(C,3))}var R1=zg(qn),k1=zg(gi);function Lw(m,C){return ua(tv(m,C),1)}function fb(m,C){return ua(tv(m,C),kt)}function L1(m,C,N){return N=N===D?1:Tr(N),ua(tv(m,C),N)}function Sm(m,C){var N=Ai(m)?Rt:Wl;return N(m,yt(C,3))}function pb(m,C){var N=Ai(m)?an:Gg;return N(m,yt(C,3))}var G1=Oh(function(m,C,N){ot.call(m,N)?m[N].push(C):Ho(m,N,[C])});function gb(m,C,N,Y){m=tc(m)?m:Vp(m),N=N&&!Y?Tr(N):0;var ve=m.length;return N<0&&(N=hs(ve+N,0)),ov(m)?N<=ve&&m.indexOf(C,N)>-1:!!ve&&ba(m,C,N)>-1}var vb=_i(function(m,C,N){var Y=-1,ve=typeof C=="function",Re=tc(m)?Ht(m.length):[];return Wl(m,function(Qe){Re[++Y]=ve?Gt(C,Qe,N):Xl(Qe,C,N)}),Re}),mb=Oh(function(m,C,N){Ho(m,N,C)});function tv(m,C){var N=Ai(m)?bi:qa;return N(m,yt(C,3))}function _m(m,C,N,Y){return m==null?[]:(Ai(C)||(C=C==null?[]:[C]),N=Y?D:N,Ai(N)||(N=N==null?[]:[N]),Df(m,C,N))}var F1=Oh(function(m,C,N){m[N?0:1].push(C)},function(){return[[],[]]});function Am(m,C,N){var Y=Ai(m)?$r:Zs,ve=arguments.length<3;return Y(m,yt(C,4),N,ve,Wl)}function yb(m,C,N){var Y=Ai(m)?ci:Zs,ve=arguments.length<3;return Y(m,yt(C,4),N,ve,Gg)}function Gw(m,C){var N=Ai(m)?Zr:Sp;return N(m,rv(yt(C,3)))}function bb(m){var C=Ai(m)?Ol:Nf;return C(m)}function B1(m,C,N){(N?qt(m,C,N):C===D)?C=1:C=Tr(C);var Y=Ai(m)?Ef:If;return Y(m,C)}function Fw(m){var C=Ai(m)?kc:X0;return C(m)}function xb(m){if(m==null)return 0;if(tc(m))return ov(m)?cc(m):m.length;var C=un(m);return C==ti||C==cl?m.size:$u(m).length}function z1(m,C,N){var Y=Ai(m)?sa:Dp;return N&&qt(m,C,N)&&(C=D),Y(m,yt(C,3))}var Cb=_i(function(m,C){if(m==null)return[];var N=C.length;return N>1&&qt(m,C[0],C[1])?C=[]:N>2&&qt(C[0],C[1],C[2])&&(C=[C[0]]),Df(m,ua(C,1),[])}),Hg=xi||function(){return Ws.Date.now()};function U1(m,C){if(typeof C!="function")throw new Ca(ee);return m=Tr(m),function(){if(--m<1)return C.apply(this,arguments)}}function V1(m,C,N){return C=N?D:C,C=m&&C==null?m.length:C,gc(m,G,D,D,D,D,C)}function wb(m,C){var N;if(typeof C!="function")throw new Ca(ee);return m=Tr(m),function(){return--m>0&&(N=C.apply(this,arguments)),m<=1&&(C=D),N}}var Eb=_i(function(m,C,N){var Y=se;if(N.length){var ve=ts(N,Tt(Eb));Y|=Ee}return gc(m,Y,C,N,ve)}),Sb=_i(function(m,C,N){var Y=se|ce;if(N.length){var ve=ts(N,Tt(Sb));Y|=Ee}return gc(C,Y,m,N,ve)});function _b(m,C,N){C=N?D:C;var Y=gc(m,we,D,D,D,D,D,C);return Y.placeholder=_b.placeholder,Y}function Ab(m,C,N){C=N?D:C;var Y=gc(m,pe,D,D,D,D,D,C);return Y.placeholder=Ab.placeholder,Y}function Tb(m,C,N){var Y,ve,Re,Qe,ut,At,wn=0,_n=!1,kn=!1,ar=!0;if(typeof m!="function")throw new Ca(ee);C=mc(C)||0,Rs(N)&&(_n=!!N.leading,kn="maxWait"in N,Re=kn?hs(mc(N.maxWait)||0,C):Re,ar="trailing"in N?!!N.trailing:ar);function kr(qo){var Ot=Y,xl=ve;return Y=ve=D,wn=qo,Qe=m.apply(xl,Ot),Qe}function vi(qo){return wn=qo,ut=di(ro,C),_n?kr(qo):Qe}function Ui(qo){var Ot=qo-At,xl=qo-wn,t2=C-Ot;return kn?Ds(t2,Re-xl):t2}function fi(qo){var Ot=qo-At,xl=qo-wn;return At===D||Ot>=C||Ot<0||kn&&xl>=Re}function ro(){var qo=Hg();if(fi(qo))return so(qo);ut=di(ro,Ui(qo))}function so(qo){return ut=D,ar&&Y?kr(qo):(Y=ve=D,Qe)}function jc(){ut!==D&&Ju(ut),wn=0,Y=At=ve=ut=D}function Va(){return ut===D?Qe:so(Hg())}function Hc(){var qo=Hg(),Ot=fi(qo);if(Y=arguments,ve=this,At=qo,Ot){if(ut===D)return vi(At);if(kn)return Ju(ut),ut=di(ro,C),kr(At)}return ut===D&&(ut=di(ro,C)),Qe}return Hc.cancel=jc,Hc.flush=Va,Hc}var j1=_i(function(m,C){return Uu(m,1,C)}),H1=_i(function(m,C,N){return Uu(m,mc(C)||0,N)});function Mb(m){return gc(m,Ke)}function nv(m,C){if(typeof m!="function"||C!=null&&typeof C!="function")throw new Ca(ee);var N=function(){var Y=arguments,ve=C?C.apply(this,Y):Y[0],Re=N.cache;if(Re.has(ve))return Re.get(ve);var Qe=m.apply(this,Y);return N.cache=Re.set(ve,Qe)||Re,Qe};return N.cache=new(nv.Cache||Rc),N}nv.Cache=Rc;function rv(m){if(typeof m!="function")throw new Ca(ee);return function(){var C=arguments;switch(C.length){case 0:return!m.call(this);case 1:return!m.call(this,C[0]);case 2:return!m.call(this,C[0],C[1]);case 3:return!m.call(this,C[0],C[1],C[2])}return!m.apply(this,C)}}function Ob(m){return wb(2,m)}var $1=Ci(function(m,C){C=C.length==1&&Ai(C[0])?bi(C[0],Gs(yt())):bi(ua(C,1),Gs(yt()));var N=C.length;return _i(function(Y){for(var ve=-1,Re=Ds(Y.length,N);++ve<Re;)Y[ve]=C[ve].call(this,Y[ve]);return Gt(m,this,Y)})}),Tm=_i(function(m,C){var N=ts(C,Tt(Tm));return gc(m,Ee,D,C,N)}),Pb=_i(function(m,C){var N=ts(C,Tt(Pb));return gc(m,it,D,C,N)}),W1=el(function(m,C){return gc(m,Be,D,D,D,C)});function X1(m,C){if(typeof m!="function")throw new Ca(ee);return C=C===D?C:Tr(C),_i(m,C)}function Db(m,C){if(typeof m!="function")throw new Ca(ee);return C=C==null?0:hs(Tr(C),0),_i(function(N){var Y=N[C],ve=Ga(N,0,C);return Y&&ds(ve,Y),Gt(m,this,ve)})}function Nb(m,C,N){var Y=!0,ve=!0;if(typeof m!="function")throw new Ca(ee);return Rs(N)&&(Y="leading"in N?!!N.leading:Y,ve="trailing"in N?!!N.trailing:ve),Tb(m,C,{leading:Y,maxWait:C,trailing:ve})}function Mm(m){return V1(m,1)}function Z1(m,C){return Tm(yl(C),m)}function Y1(){if(!arguments.length)return[];var m=arguments[0];return Ai(m)?m:[m]}function Om(m){return Fs(m,Ne)}function Pm(m,C){return C=typeof C=="function"?C:D,Fs(m,Ne,C)}function Ib(m){return Fs(m,ne|Ne)}function Dm(m,C){return C=typeof C=="function"?C:D,Fs(m,ne|Ne,C)}function Rb(m,C){return C==null||Dd(m,C,Xo(C))}function vc(m,C){return m===C||m!==m&&C!==C}var Nm=Ih(Tp),K1=Ih(function(m,C){return m>=C}),td=du(function(){return arguments}())?du:function(m){return zs(m)&&ot.call(m,"callee")&&!Es.call(m,"callee")},Ai=Ht.isArray,Im=ae?Gs(ae):hu;function tc(m){return m!=null&&iv(m.length)&&!Vd(m)}function Js(m){return zs(m)&&tc(m)}function q1(m){return m===!0||m===!1||zs(m)&&qs(m)==Vt}var kh=Mg||Bt,J1=de?Gs(de):Vu;function Q1(m){return zs(m)&&m.nodeType===1&&!$g(m)}function Bw(m){if(m==null)return!0;if(tc(m)&&(Ai(m)||typeof m=="string"||typeof m.splice=="function"||kh(m)||jd(m)||td(m)))return!m.length;var C=un(m);if(C==ti||C==cl)return!m.size;if(Nn(m))return!$u(m).length;for(var N in m)if(ot.call(m,N))return!1;return!0}function ex(m,C){return ju(m,C)}function tx(m,C,N){N=typeof N=="function"?N:D;var Y=N?N(m,C):D;return Y===D?ju(m,C,D,N):!!Y}function Rm(m){if(!zs(m))return!1;var C=qs(m);return C==_r||C==Fn||typeof m.message=="string"&&typeof m.name=="string"&&!$g(m)}function nx(m){return typeof m=="number"&&Cf(m)}function Vd(m){if(!Rs(m))return!1;var C=qs(m);return C==ri||C==Gr||C==Xe||C==sf}function km(m){return typeof m=="number"&&m==Tr(m)}function iv(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=jn}function Rs(m){var C=typeof m;return m!=null&&(C=="object"||C=="function")}function zs(m){return m!=null&&typeof m=="object"}var kb=xe?Gs(xe):fu;function Lm(m,C){return m===C||Hu(m,C,Lt(C))}function rx(m,C,N){return N=typeof N=="function"?N:D,Hu(m,C,Lt(C),N)}function Lb(m){return Gb(m)&&m!=+m}function ix(m){if(Fr(m))throw new Jr(Z);return Zl(m)}function ox(m){return m===null}function Gm(m){return m==null}function Gb(m){return typeof m=="number"||zs(m)&&qs(m)==Oi}function $g(m){if(!zs(m)||qs(m)!=F)return!1;var C=ns(m);if(C===null)return!0;var N=ot.call(C,"constructor")&&C.constructor;return typeof N=="function"&&N instanceof N&&rn.call(N)==tr}var Fm=tt?Gs(tt):ml;function sx(m){return km(m)&&m>=-jn&&m<=jn}var Fb=qe?Gs(qe):_h;function ov(m){return typeof m=="string"||!Ai(m)&&zs(m)&&qs(m)==wr}function Zi(m){return typeof m=="symbol"||zs(m)&&qs(m)==Pa}var jd=Et?Gs(Et):Id;function Bb(m){return m===D}function ax(m){return zs(m)&&un(m)==Qo}function lx(m){return zs(m)&&qs(m)==Da}var Bp=Ih(pu),cx=Ih(function(m,C){return m<=C});function sv(m){if(!m)return[];if(tc(m))return ov(m)?ui(m):Ja(m);if(rs&&m[rs])return Pc(m[rs]());var C=un(m),N=C==ti?ou:C==cl?Ia:Vp;return N(m)}function mu(m){if(!m)return m===0?m:0;if(m=mc(m),m===kt||m===-kt){var C=m<0?-1:1;return C*Zt}return m===m?m:0}function Tr(m){var C=mu(m),N=C%1;return C===C?N?C-N:C:0}function Wg(m){return m?$l(Tr(m),0,Nr):0}function mc(m){if(typeof m=="number")return m;if(Zi(m))return gr;if(Rs(m)){var C=typeof m.valueOf=="function"?m.valueOf():m;m=Rs(C)?C+"":C}if(typeof m!="string")return m===0?m:+m;m=hl(m);var N=dp.test(m);return N||ud.test(m)?bf(m.slice(2),N?2:8):Jc.test(m)?gr:+m}function Xg(m){return Fa(m,Aa(m))}function zb(m){return m?$l(Tr(m),-jn,jn):m===0?m:0}function So(m){return m==null?"":Bs(m)}var ux=Ph(function(m,C){if(Nn(C)||tc(C)){Fa(C,Xo(C),m);return}for(var N in C)ot.call(C,N)&&vl(m,N,C[N])}),Bm=Ph(function(m,C){Fa(C,Aa(C),m)}),av=Ph(function(m,C,N,Y){Fa(C,Aa(C),m,Y)}),Ub=Ph(function(m,C,N,Y){Fa(C,Xo(C),m,Y)}),zm=el(cu);function zp(m,C){var N=Md(m);return C==null?N:Pl(N,C)}var dx=_i(function(m,C){m=uo(m);var N=-1,Y=C.length,ve=Y>2?C[2]:D;for(ve&&qt(C[0],C[1],ve)&&(Y=1);++N<Y;)for(var Re=C[N],Qe=Aa(Re),ut=-1,At=Qe.length;++ut<At;){var wn=Qe[ut],_n=m[wn];(_n===D||vc(_n,ze[wn])&&!ot.call(m,wn))&&(m[wn]=Re[wn])}return m}),Zg=_i(function(m){return m.push(D,Rh),Gt(jm,D,m)});function hx(m,C){return Uo(m,yt(C,3),dc)}function yc(m,C){return Uo(m,yt(C,3),Dl)}function lv(m,C){return m==null?m:_p(m,yt(C,3),Aa)}function Vb(m,C){return m==null?m:Ap(m,yt(C,3),Aa)}function jb(m,C){return m&&dc(m,yt(C,3))}function cv(m,C){return m&&Dl(m,yt(C,3))}function Hb(m){return m==null?[]:Tf(m,Xo(m))}function Um(m){return m==null?[]:Tf(m,Aa(m))}function Bf(m,C,N){var Y=m==null?D:Nl(m,C);return Y===D?N:Y}function zf(m,C){return m!=null&&Mn(m,C,Sh)}function Yg(m,C){return m!=null&&Mn(m,C,Mf)}var Vm=fs(function(m,C,N){C!=null&&typeof C.toString!="function"&&(C=Kn.call(C)),m[C]=N},dn(_o)),fx=fs(function(m,C,N){C!=null&&typeof C.toString!="function"&&(C=Kn.call(C)),ot.call(m,C)?m[C].push(N):m[C]=[N]},yt),yu=_i(Xl);function Xo(m){return tc(m)?fo(m):$u(m)}function Aa(m){return tc(m)?fo(m,!0):Mp(m)}function Lh(m,C){var N={};return C=yt(C,3),dc(m,function(Y,ve,Re){Ho(N,C(Y,ve,Re),Y)}),N}function px(m,C){var N={};return C=yt(C,3),dc(m,function(Y,ve,Re){Ho(N,ve,C(Y,ve,Re))}),N}var gx=Ph(function(m,C,N){Rl(m,C,N)}),jm=Ph(function(m,C,N,Y){Rl(m,C,N,Y)}),Kg=el(function(m,C){var N={};if(m==null)return N;var Y=!1;C=bi(C,function(Re){return Re=La(Re,m),Y||(Y=Re.length>1),Re}),Fa(m,K(m),N),Y&&(N=Fs(N,ne|he|Ne,Y0));for(var ve=C.length;ve--;)kf(N,C[ve]);return N});function uv(m,C){return Hm(m,rv(yt(C)))}var Up=el(function(m,C){return m==null?{}:Bg(m,C)});function Hm(m,C){if(m==null)return{};var N=bi(K(m),function(Y){return[Y]});return C=yt(C),Ah(m,N,function(Y,ve){return C(Y,ve[0])})}function vx(m,C,N){C=La(C,m);var Y=-1,ve=C.length;for(ve||(ve=1,m=D);++Y<ve;){var Re=m==null?D:m[Oo(C[Y])];Re===D&&(Y=ve,Re=N),m=Vd(Re)?Re.call(m):Re}return m}function mx(m,C,N){return m==null?m:gu(m,C,N)}function yx(m,C,N,Y){return Y=typeof Y=="function"?Y:D,m==null?m:gu(m,C,N,Y)}var $m=vu(Xo),$b=vu(Aa);function bx(m,C,N){var Y=Ai(m),ve=Y||kh(m)||jd(m);if(C=yt(C,4),N==null){var Re=m&&m.constructor;ve?N=Y?new Re:[]:Rs(m)?N=Vd(Re)?Md(ns(m)):{}:N={}}return(ve?Rt:dc)(m,function(Qe,ut,At){return C(N,Qe,ut,At)}),N}function xx(m,C){return m==null?!0:kf(m,C)}function Cx(m,C,N){return m==null?m:Lf(m,C,yl(N))}function dv(m,C,N,Y){return Y=typeof Y=="function"?Y:D,m==null?m:Lf(m,C,yl(N),Y)}function Vp(m){return m==null?[]:fl(m,Xo(m))}function wx(m){return m==null?[]:fl(m,Aa(m))}function Ex(m,C,N){return N===D&&(N=C,C=D),N!==D&&(N=mc(N),N=N===N?N:0),C!==D&&(C=mc(C),C=C===C?C:0),$l(mc(m),C,N)}function Sx(m,C,N){return C=mu(C),N===D?(N=C,C=0):N=mu(N),m=mc(m),Gc(m,C,N)}function _x(m,C,N){if(N&&typeof N!="boolean"&&qt(m,C,N)&&(C=N=D),N===D&&(typeof C=="boolean"?(N=C,C=D):typeof m=="boolean"&&(N=m,m=D)),m===D&&C===D?(m=0,C=1):(m=mu(m),C===D?(C=m,m=0):C=mu(C)),m>C){var Y=m;m=C,C=Y}if(N||m%1||C%1){var ve=Ic();return Ds(m+ve*(C-m+Vl("1e-"+((ve+"").length-1))),C)}return kd(m,C)}var Ax=Gd(function(m,C,N){return C=C.toLowerCase(),m+(N?Wm(C):C)});function Wm(m){return Zm(So(m).toLowerCase())}function Wb(m){return m=So(m),m&&m.replace(Qc,Ou).replace($s,"")}function Ta(m,C,N){m=So(m),C=Bs(C);var Y=m.length;N=N===D?Y:$l(Tr(N),0,Y);var ve=N;return N-=C.length,N>=0&&m.slice(N,ve)==C}function Xb(m){return m=So(m),m&&cs.test(m)?m.replace(sh,vp):m}function Tx(m){return m=So(m),m&&Ji.test(m)?m.replace(af,"\\$&"):m}var hi=Gd(function(m,C,N){return m+(N?"-":"")+C.toLowerCase()}),Uf=Gd(function(m,C,N){return m+(N?" ":"")+C.toLowerCase()}),Vf=is("toLowerCase");function Zb(m,C,N){m=So(m),C=Tr(C);var Y=C?cc(m):0;if(!C||Y>=C)return m;var ve=(C-Y)/2;return Lp(ku(ve),N)+m+Lp(yh(ve),N)}function Mx(m,C,N){m=So(m),C=Tr(C);var Y=C?cc(m):0;return C&&Y<C?m+Lp(C-Y,N):m}function Xm(m,C,N){m=So(m),C=Tr(C);var Y=C?cc(m):0;return C&&Y<C?Lp(C-Y,N)+m:m}function Ox(m,C,N){return N||C==null?C=0:C&&(C=+C),Og(So(m).replace(yo,""),C||0)}function nd(m,C,N){return(N?qt(m,C,N):C===D)?C=1:C=Tr(C),Ld(So(m),C)}function Px(){var m=arguments,C=So(m[0]);return m.length<3?C:C.replace(m[1],m[2])}var Yb=Gd(function(m,C,N){return m+(N?"_":"")+C.toLowerCase()});function Dx(m,C,N){return N&&typeof N!="number"&&qt(m,C,N)&&(C=N=D),N=N===D?Nr:N>>>0,N?(m=So(m),m&&(typeof C=="string"||C!=null&&!Fm(C))&&(C=Bs(C),!C&&pl(m))?Ga(ui(m),0,N):m.split(C,N)):[]}var Nx=Gd(function(m,C,N){return m+(N?" ":"")+Zm(C)});function Ix(m,C,N){return m=So(m),N=N==null?0:$l(Tr(N),0,m.length),C=Bs(C),m.slice(N,N+C.length)==C}function Rx(m,C,N){var Y=Ae.templateSettings;N&&qt(m,C,N)&&(C=D),m=So(m),C=av({},C,Y,Ug);var ve=av({},C.imports,Y.imports,Ug),Re=Xo(ve),Qe=fl(ve,Re),ut,At,wn=0,_n=C.interpolate||Su,kn="__p += '",ar=Nu((C.escape||Su).source+"|"+_n.source+"|"+(_n===es?lh:Su).source+"|"+(C.evaluate||Su).source+"|$","g"),kr="//# sourceURL="+(ot.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Mc+"]")+`
`;m.replace(ar,function(fi,ro,so,jc,Va,Hc){return so||(so=jc),kn+=m.slice(wn,Hc).replace(_u,iu),ro&&(ut=!0,kn+=`' +
__e(`+ro+`) +
'`),Va&&(At=!0,kn+=`';
`+Va+`;
__p += '`),so&&(kn+=`' +
((__t = (`+so+`)) == null ? '' : __t) +
'`),wn=Hc+fi.length,fi}),kn+=`';
`;var vi=ot.call(C,"variable")&&C.variable;if(!vi)kn=`with (obj) {
`+kn+`
}
`;else if(lf.test(vi))throw new Jr(Q);kn=(At?kn.replace(zo,""):kn).replace(ul,"$1").replace(wg,"$1;"),kn="function("+(vi||"obj")+`) {
`+(vi?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ut?", __e = _.escape":"")+(At?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+kn+`return __p
}`;var Ui=bu(function(){return Fi(Re,kr+"return "+kn).apply(D,Qe)});if(Ui.source=kn,Rm(Ui))throw Ui;return Ui}function kx(m){return So(m).toLowerCase()}function Mr(m){return So(m).toUpperCase()}function br(m,C,N){if(m=So(m),m&&(N||C===D))return hl(m);if(!m||!(C=Bs(C)))return m;var Y=ui(m),ve=ui(C),Re=ac(Y,ve),Qe=Vo(Y,ve)+1;return Ga(Y,Re,Qe).join("")}function Br(m,C,N){if(m=So(m),m&&(N||C===D))return m.slice(0,Dc(m)+1);if(!m||!(C=Bs(C)))return m;var Y=ui(m),ve=Vo(Y,ui(C))+1;return Ga(Y,0,ve).join("")}function Dr(m,C,N){if(m=So(m),m&&(N||C===D))return m.replace(yo,"");if(!m||!(C=Bs(C)))return m;var Y=ui(m),ve=ac(Y,ui(C));return Ga(Y,ve).join("")}function Lx(m,C){var N=dt,Y=jt;if(Rs(C)){var ve="separator"in C?C.separator:ve;N="length"in C?Tr(C.length):N,Y="omission"in C?Bs(C.omission):Y}m=So(m);var Re=m.length;if(pl(m)){var Qe=ui(m);Re=Qe.length}if(N>=Re)return m;var ut=N-cc(Y);if(ut<1)return Y;var At=Qe?Ga(Qe,0,ut).join(""):m.slice(0,ut);if(ve===D)return At+Y;if(Qe&&(ut+=At.length-ut),Fm(ve)){if(m.slice(ut).search(ve)){var wn,_n=At;for(ve.global||(ve=Nu(ve.source,So(uf.exec(ve))+"g")),ve.lastIndex=0;wn=ve.exec(_n);)var kn=wn.index;At=At.slice(0,kn===D?ut:kn)}}else if(m.indexOf(Bs(ve),ut)!=ut){var ar=At.lastIndexOf(ve);ar>-1&&(At=At.slice(0,ar))}return At+Y}function fr(m){return m=So(m),m&&$a.test(m)?m.replace(oc,wo):m}var no=Gd(function(m,C,N){return m+(N?" ":"")+C.toUpperCase()}),Zm=is("toUpperCase");function Kb(m,C,N){return m=So(m),C=N?D:C,C===D?Pu(m)?mh(m):nu(m):m.match(C)||[]}var bu=_i(function(m,C){try{return Gt(m,D,C)}catch(N){return Rm(N)?N:new Jr(N)}}),Vc=el(function(m,C){return Rt(C,function(N){N=Oo(N),Ho(m,N,Eb(m[N],m))}),m});function jf(m){var C=m==null?0:m.length,N=yt();return m=C?bi(m,function(Y){if(typeof Y[1]!="function")throw new Ca(ee);return[N(Y[0]),Y[1]]}):[],_i(function(Y){for(var ve=-1;++ve<C;){var Re=m[ve];if(Gt(Re[0],this,Y))return Gt(Re[1],this,Y)}})}function jp(m){return Eh(Fs(m,ne))}function dn(m){return function(){return m}}function qb(m,C){return m==null||m!==m?C:m}var Gx=Ba(),Jb=Ba(!0);function _o(m){return m}function za(m){return Il(typeof m=="function"?m:Fs(m,ne))}function po(m){return Yl(Fs(m,ne))}function Fx(m,C){return Rd(m,Fs(C,ne))}var Bx=_i(function(m,C){return function(N){return Xl(N,m,C)}}),zx=_i(function(m,C){return function(N){return Xl(m,N,C)}});function hv(m,C,N){var Y=Xo(C),ve=Tf(C,Y);N==null&&!(Rs(C)&&(ve.length||!Y.length))&&(N=C,C=m,m=this,ve=Tf(C,Xo(C)));var Re=!(Rs(N)&&"chain"in N)||!!N.chain,Qe=Vd(m);return Rt(ve,function(ut){var At=C[ut];m[ut]=At,Qe&&(m.prototype[ut]=function(){var wn=this.__chain__;if(Re||wn){var _n=m(this.__wrapped__),kn=_n.__actions__=Ja(this.__actions__);return kn.push({func:At,args:arguments,thisArg:m}),_n.__chain__=wn,_n}return At.apply(m,ds([this.value()],arguments))})}),m}function Ux(){return Ws._===this&&(Ws._=Rr),this}function fv(){}function pv(m){return m=Tr(m),_i(function(C){return Wu(C,m)})}var gv=kp(bi),Ym=kp(Ar),Km=kp(sa);function vv(m){return Pn(m)?Wi(Oo(m)):Xu(m)}function bc(m){return function(C){return m==null?D:Nl(m,C)}}var Vx=Nh(),qm=Nh(!0);function mv(){return[]}function Bt(){return!1}function Us(){return{}}function Ua(){return""}function qg(){return!0}function jx(m,C){if(m=Tr(m),m<1||m>jn)return[];var N=Nr,Y=Ds(m,Nr);C=yt(C),m-=Nr;for(var ve=Pi(Y,C);++N<m;)C(N);return ve}function Qb(m){return Ai(m)?bi(m,Oo):Zi(m)?[m]:Ja(Ss(So(m)))}function Hx(m){var C=++cn;return So(m)+C}var yv=Sa(function(m,C){return m+C},0),$x=_a("ceil"),zw=Sa(function(m,C){return m/C},1),Uw=_a("floor");function Vw(m){return m&&m.length?_f(m,_o,Tp):D}function jw(m,C){return m&&m.length?_f(m,yt(C,2),Tp):D}function Hw(m){return jl(m,_o)}function e2(m,C){return jl(m,yt(C,2))}function $w(m){return m&&m.length?_f(m,_o,pu):D}function Ww(m,C){return m&&m.length?_f(m,yt(C,2),pu):D}var Wx=Sa(function(m,C){return m*C},1),Xw=_a("round"),Xx=Sa(function(m,C){return m-C},0);function Zw(m){return m&&m.length?Za(m,_o):0}function Zx(m,C){return m&&m.length?Za(m,yt(C,2)):0}return Ae.after=U1,Ae.ary=V1,Ae.assign=ux,Ae.assignIn=Bm,Ae.assignInWith=av,Ae.assignWith=Ub,Ae.at=zm,Ae.before=wb,Ae.bind=Eb,Ae.bindAll=Vc,Ae.bindKey=Sb,Ae.castArray=Y1,Ae.chain=db,Ae.chunk=Wo,Ae.compact=zi,Ae.concat=Sr,Ae.cond=jf,Ae.conforms=jp,Ae.constant=dn,Ae.countBy=Em,Ae.create=zp,Ae.curry=_b,Ae.curryRight=Ab,Ae.debounce=Tb,Ae.defaults=dx,Ae.defaultsDeep=Zg,Ae.defer=j1,Ae.delay=H1,Ae.difference=wi,Ae.differenceBy=Ri,Ae.differenceWith=ms,Ae.drop=zc,Ae.dropRight=zd,Ae.dropRightWhile=Ue,Ae.dropWhile=Dt,Ae.fill=Mt,Ae.filter=hb,Ae.flatMap=Lw,Ae.flatMapDeep=fb,Ae.flatMapDepth=L1,Ae.flatten=Fe,Ae.flattenDeep=Ce,Ae.flattenDepth=Je,Ae.flip=Mb,Ae.flow=Gx,Ae.flowRight=Jb,Ae.fromPairs=pt,Ae.functions=Hb,Ae.functionsIn=Um,Ae.groupBy=G1,Ae.initial=Ze,Ae.intersection=lt,Ae.intersectionBy=Ge,Ae.intersectionWith=Ye,Ae.invert=Vm,Ae.invertBy=fx,Ae.invokeMap=vb,Ae.iteratee=za,Ae.keyBy=mb,Ae.keys=Xo,Ae.keysIn=Aa,Ae.map=tv,Ae.mapKeys=Lh,Ae.mapValues=px,Ae.matches=po,Ae.matchesProperty=Fx,Ae.memoize=nv,Ae.merge=gx,Ae.mergeWith=jm,Ae.method=Bx,Ae.methodOf=zx,Ae.mixin=hv,Ae.negate=rv,Ae.nthArg=pv,Ae.omit=Kg,Ae.omitBy=uv,Ae.once=Ob,Ae.orderBy=_m,Ae.over=gv,Ae.overArgs=$1,Ae.overEvery=Ym,Ae.overSome=Km,Ae.partial=Tm,Ae.partialRight=Pb,Ae.partition=F1,Ae.pick=Up,Ae.pickBy=Hm,Ae.property=vv,Ae.propertyOf=bc,Ae.pull=Xt,Ae.pullAll=zt,Ae.pullAllBy=bn,Ae.pullAllWith=cr,Ae.pullAt=Qr,Ae.range=Vx,Ae.rangeRight=qm,Ae.rearg=W1,Ae.reject=Gw,Ae.remove=er,Ae.rest=X1,Ae.reverse=xr,Ae.sampleSize=B1,Ae.set=mx,Ae.setWith=yx,Ae.shuffle=Fw,Ae.slice=sr,Ae.sortBy=Cb,Ae.sortedUniq=Is,Ae.sortedUniqBy=ym,Ae.split=Dx,Ae.spread=Db,Ae.tail=bm,Ae.take=rb,Ae.takeRight=E1,Ae.takeRightWhile=ib,Ae.takeWhile=ob,Ae.tap=Fo,Ae.throttle=Nb,Ae.thru=ev,Ae.toArray=sv,Ae.toPairs=$m,Ae.toPairsIn=$b,Ae.toPath=Qb,Ae.toPlainObject=Xg,Ae.transform=bx,Ae.unary=Mm,Ae.union=sb,Ae.unionBy=ab,Ae.unionWith=kw,Ae.uniq=ec,Ae.uniqBy=S1,Ae.uniqWith=xm,Ae.unset=xx,Ae.unzip=Ud,Ae.unzipWith=ed,Ae.update=Cx,Ae.updateWith=dv,Ae.values=Vp,Ae.valuesIn=wx,Ae.without=_1,Ae.words=Kb,Ae.wrap=Z1,Ae.xor=lb,Ae.xorBy=Cm,Ae.xorWith=cb,Ae.zip=wm,Ae.zipObject=J0,Ae.zipObjectDeep=ub,Ae.zipWith=Q0,Ae.entries=$m,Ae.entriesIn=$b,Ae.extend=Bm,Ae.extendWith=av,hv(Ae,Ae),Ae.add=yv,Ae.attempt=bu,Ae.camelCase=Ax,Ae.capitalize=Wm,Ae.ceil=$x,Ae.clamp=Ex,Ae.clone=Om,Ae.cloneDeep=Ib,Ae.cloneDeepWith=Dm,Ae.cloneWith=Pm,Ae.conformsTo=Rb,Ae.deburr=Wb,Ae.defaultTo=qb,Ae.divide=zw,Ae.endsWith=Ta,Ae.eq=vc,Ae.escape=Xb,Ae.escapeRegExp=Tx,Ae.every=I1,Ae.find=R1,Ae.findIndex=qn,Ae.findKey=hx,Ae.findLast=k1,Ae.findLastIndex=gi,Ae.findLastKey=yc,Ae.floor=Uw,Ae.forEach=Sm,Ae.forEachRight=pb,Ae.forIn=lv,Ae.forInRight=Vb,Ae.forOwn=jb,Ae.forOwnRight=cv,Ae.get=Bf,Ae.gt=Nm,Ae.gte=K1,Ae.has=zf,Ae.hasIn=Yg,Ae.head=gt,Ae.identity=_o,Ae.includes=gb,Ae.indexOf=et,Ae.inRange=Sx,Ae.invoke=yu,Ae.isArguments=td,Ae.isArray=Ai,Ae.isArrayBuffer=Im,Ae.isArrayLike=tc,Ae.isArrayLikeObject=Js,Ae.isBoolean=q1,Ae.isBuffer=kh,Ae.isDate=J1,Ae.isElement=Q1,Ae.isEmpty=Bw,Ae.isEqual=ex,Ae.isEqualWith=tx,Ae.isError=Rm,Ae.isFinite=nx,Ae.isFunction=Vd,Ae.isInteger=km,Ae.isLength=iv,Ae.isMap=kb,Ae.isMatch=Lm,Ae.isMatchWith=rx,Ae.isNaN=Lb,Ae.isNative=ix,Ae.isNil=Gm,Ae.isNull=ox,Ae.isNumber=Gb,Ae.isObject=Rs,Ae.isObjectLike=zs,Ae.isPlainObject=$g,Ae.isRegExp=Fm,Ae.isSafeInteger=sx,Ae.isSet=Fb,Ae.isString=ov,Ae.isSymbol=Zi,Ae.isTypedArray=jd,Ae.isUndefined=Bb,Ae.isWeakMap=ax,Ae.isWeakSet=lx,Ae.join=Ie,Ae.kebabCase=hi,Ae.last=st,Ae.lastIndexOf=Ct,Ae.lowerCase=Uf,Ae.lowerFirst=Vf,Ae.lt=Bp,Ae.lte=cx,Ae.max=Vw,Ae.maxBy=jw,Ae.mean=Hw,Ae.meanBy=e2,Ae.min=$w,Ae.minBy=Ww,Ae.stubArray=mv,Ae.stubFalse=Bt,Ae.stubObject=Us,Ae.stubString=Ua,Ae.stubTrue=qg,Ae.multiply=Wx,Ae.nth=$t,Ae.noConflict=Ux,Ae.noop=fv,Ae.now=Hg,Ae.pad=Zb,Ae.padEnd=Mx,Ae.padStart=Xm,Ae.parseInt=Ox,Ae.random=_x,Ae.reduce=Am,Ae.reduceRight=yb,Ae.repeat=nd,Ae.replace=Px,Ae.result=vx,Ae.round=Xw,Ae.runInContext=bt,Ae.sample=bb,Ae.size=xb,Ae.snakeCase=Yb,Ae.some=z1,Ae.sortedIndex=Bi,Ae.sortedIndexBy=Ko,Ae.sortedIndexOf=tl,Ae.sortedLastIndex=Fp,Ae.sortedLastIndexBy=bl,Ae.sortedLastIndexOf=jg,Ae.startCase=Nx,Ae.startsWith=Ix,Ae.subtract=Xx,Ae.sum=Zw,Ae.sumBy=Zx,Ae.template=Rx,Ae.times=jx,Ae.toFinite=mu,Ae.toInteger=Tr,Ae.toLength=Wg,Ae.toLower=kx,Ae.toNumber=mc,Ae.toSafeInteger=zb,Ae.toString=So,Ae.toUpper=Mr,Ae.trim=br,Ae.trimEnd=Br,Ae.trimStart=Dr,Ae.truncate=Lx,Ae.unescape=fr,Ae.uniqueId=Hx,Ae.upperCase=no,Ae.upperFirst=Zm,Ae.each=Sm,Ae.eachRight=pb,Ae.first=gt,hv(Ae,function(){var m={};return dc(Ae,function(C,N){ot.call(Ae.prototype,N)||(m[N]=C)}),m}(),{chain:!1}),Ae.VERSION=J,Rt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(m){Ae[m].placeholder=Ae}),Rt(["drop","take"],function(m,C){Li.prototype[m]=function(N){N=N===D?1:hs(Tr(N),0);var Y=this.__filtered__&&!C?new Li(this):this.clone();return Y.__filtered__?Y.__takeCount__=Ds(N,Y.__takeCount__):Y.__views__.push({size:Ds(N,Nr),type:m+(Y.__dir__<0?"Right":"")}),Y},Li.prototype[m+"Right"]=function(N){return this.reverse()[m](N).reverse()}}),Rt(["filter","map","takeWhile"],function(m,C){var N=C+1,Y=N==In||N==vt;Li.prototype[m]=function(ve){var Re=this.clone();return Re.__iteratees__.push({iteratee:yt(ve,3),type:N}),Re.__filtered__=Re.__filtered__||Y,Re}}),Rt(["head","last"],function(m,C){var N="take"+(C?"Right":"");Li.prototype[m]=function(){return this[N](1).value()[0]}}),Rt(["initial","tail"],function(m,C){var N="drop"+(C?"":"Right");Li.prototype[m]=function(){return this.__filtered__?new Li(this):this[N](1)}}),Li.prototype.compact=function(){return this.filter(_o)},Li.prototype.find=function(m){return this.filter(m).head()},Li.prototype.findLast=function(m){return this.reverse().find(m)},Li.prototype.invokeMap=_i(function(m,C){return typeof m=="function"?new Li(this):this.map(function(N){return Xl(N,m,C)})}),Li.prototype.reject=function(m){return this.filter(rv(yt(m)))},Li.prototype.slice=function(m,C){m=Tr(m);var N=this;return N.__filtered__&&(m>0||C<0)?new Li(N):(m<0?N=N.takeRight(-m):m&&(N=N.drop(m)),C!==D&&(C=Tr(C),N=C<0?N.dropRight(-C):N.take(C-m)),N)},Li.prototype.takeRightWhile=function(m){return this.reverse().takeWhile(m).reverse()},Li.prototype.toArray=function(){return this.take(Nr)},dc(Li.prototype,function(m,C){var N=/^(?:filter|find|map|reject)|While$/.test(C),Y=/^(?:head|last)$/.test(C),ve=Ae[Y?"take"+(C=="last"?"Right":""):C],Re=Y||/^find/.test(C);ve&&(Ae.prototype[C]=function(){var Qe=this.__wrapped__,ut=Y?[1]:arguments,At=Qe instanceof Li,wn=ut[0],_n=At||Ai(Qe),kn=function(ro){var so=ve.apply(Ae,ds([ro],ut));return Y&&ar?so[0]:so};_n&&N&&typeof wn=="function"&&wn.length!=1&&(At=_n=!1);var ar=this.__chain__,kr=!!this.__actions__.length,vi=Re&&!ar,Ui=At&&!kr;if(!Re&&_n){Qe=Ui?Qe:new Li(this);var fi=m.apply(Qe,ut);return fi.__actions__.push({func:ev,args:[kn],thisArg:D}),new wa(fi,ar)}return vi&&Ui?m.apply(this,ut):(fi=this.thru(kn),vi?Y?fi.value()[0]:fi.value():fi)})}),Rt(["pop","push","shift","sort","splice","unshift"],function(m){var C=Iu[m],N=/^(?:push|sort|unshift)$/.test(m)?"tap":"thru",Y=/^(?:pop|shift)$/.test(m);Ae.prototype[m]=function(){var ve=arguments;if(Y&&!this.__chain__){var Re=this.value();return C.apply(Ai(Re)?Re:[],ve)}return this[N](function(Qe){return C.apply(Ai(Qe)?Qe:[],ve)})}}),dc(Li.prototype,function(m,C){var N=Ae[C];if(N){var Y=N.name+"";ot.call(ca,Y)||(ca[Y]=[]),ca[Y].push({name:C,func:N})}}),ca[Ql(D,ce).name]=[{name:"wrapper",func:D}],Li.prototype.clone=hm,Li.prototype.reverse=Tl,Li.prototype.value=U0,Ae.prototype.at=A1,Ae.prototype.chain=T1,Ae.prototype.commit=Uc,Ae.prototype.next=M1,Ae.prototype.plant=P1,Ae.prototype.reverse=D1,Ae.prototype.toJSON=Ae.prototype.valueOf=Ae.prototype.value=N1,Ae.prototype.first=Ae.prototype.head,rs&&(Ae.prototype[rs]=O1),Ae},xa=mp();Ws._=xa,j=function(){return xa}.call(L,M,L,De),j!==D&&(De.exports=j)}).call(this)},50308:function(De){function L(){}De.exports=L},45578:function(De,L,M){var j=M(67206),D=M(45652);function J(z,Z){return z&&z.length?D(z,j(Z,2)):[]}De.exports=J},53893:function(De,L,M){"use strict";M.r(L),M.d(L,{amber:function(){return le},black:function(){return Ke},blue:function(){return ee},blueGrey:function(){return we},brown:function(){return ce},cyan:function(){return ue},darkIcons:function(){return it},darkText:function(){return pe},deepOrange:function(){return se},deepPurple:function(){return z},green:function(){return ie},grey:function(){return fe},indigo:function(){return Z},lightBlue:function(){return Q},lightGreen:function(){return ne},lightIcons:function(){return G},lightText:function(){return Ee},lime:function(){return he},orange:function(){return be},pink:function(){return D},purple:function(){return J},red:function(){return j},teal:function(){return oe},white:function(){return Be},yellow:function(){return Ne}});var j={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},D={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},J={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},z={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Z={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},ee={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},Q={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},ue={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},oe={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},ie={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},ne={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},he={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},Ne={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},le={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},be={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},se={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},ce={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},fe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},we={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},pe={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},Ee={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},it={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},G={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},Be="#ffffff",Ke="#000000";L.default={red:j,pink:D,purple:J,deepPurple:z,indigo:Z,blue:ee,lightBlue:Q,cyan:ue,teal:oe,green:ie,lightGreen:ne,lime:he,yellow:Ne,amber:le,orange:be,deepOrange:se,brown:ce,grey:fe,blueGrey:we,darkText:pe,lightText:Ee,darkIcons:it,lightIcons:G,white:Be,black:Ke}},42441:function(De,L,M){var j;(function(D,J,z){if(!D)return;for(var Z={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},ee={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Q={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},ue={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},oe,ie=1;ie<20;++ie)Z[111+ie]="f"+ie;for(ie=0;ie<=9;++ie)Z[ie+96]=ie.toString();function ne(Be,Ke,dt){if(Be.addEventListener){Be.addEventListener(Ke,dt,!1);return}Be.attachEvent("on"+Ke,dt)}function he(Be){if(Be.type=="keypress"){var Ke=String.fromCharCode(Be.which);return Be.shiftKey||(Ke=Ke.toLowerCase()),Ke}return Z[Be.which]?Z[Be.which]:ee[Be.which]?ee[Be.which]:String.fromCharCode(Be.which).toLowerCase()}function Ne(Be,Ke){return Be.sort().join(",")===Ke.sort().join(",")}function le(Be){var Ke=[];return Be.shiftKey&&Ke.push("shift"),Be.altKey&&Ke.push("alt"),Be.ctrlKey&&Ke.push("ctrl"),Be.metaKey&&Ke.push("meta"),Ke}function be(Be){if(Be.preventDefault){Be.preventDefault();return}Be.returnValue=!1}function se(Be){if(Be.stopPropagation){Be.stopPropagation();return}Be.cancelBubble=!0}function ce(Be){return Be=="shift"||Be=="ctrl"||Be=="alt"||Be=="meta"}function fe(){if(!oe){oe={};for(var Be in Z)Be>95&&Be<112||Z.hasOwnProperty(Be)&&(oe[Z[Be]]=Be)}return oe}function we(Be,Ke,dt){return dt||(dt=fe()[Be]?"keydown":"keypress"),dt=="keypress"&&Ke.length&&(dt="keydown"),dt}function pe(Be){return Be==="+"?["+"]:(Be=Be.replace(/\+{2}/g,"+plus"),Be.split("+"))}function Ee(Be,Ke){var dt,jt,mn,Pe=[];for(dt=pe(Be),mn=0;mn<dt.length;++mn)jt=dt[mn],ue[jt]&&(jt=ue[jt]),Ke&&Ke!="keypress"&&Q[jt]&&(jt=Q[jt],Pe.push("shift")),ce(jt)&&Pe.push(jt);return Ke=we(jt,Pe,Ke),{key:jt,modifiers:Pe,action:Ke}}function it(Be,Ke){return Be===null||Be===J?!1:Be===Ke?!0:it(Be.parentNode,Ke)}function G(Be){var Ke=this;if(Be=Be||J,!(Ke instanceof G))return new G(Be);Ke.target=Be,Ke._callbacks={},Ke._directMap={};var dt={},jt,mn=!1,Pe=!1,In=!1;function hn(Qn){Qn=Qn||{};var Hr=!1,vr;for(vr in dt){if(Qn[vr]){Hr=!0;continue}dt[vr]=0}Hr||(In=!1)}function vt(Qn,Hr,vr,Le,Ve,Xe){var Vt,Rn,Fn=[],_r=vr.type;if(!Ke._callbacks[Qn])return[];for(_r=="keyup"&&ce(Qn)&&(Hr=[Qn]),Vt=0;Vt<Ke._callbacks[Qn].length;++Vt)if(Rn=Ke._callbacks[Qn][Vt],!(!Le&&Rn.seq&&dt[Rn.seq]!=Rn.level)&&_r==Rn.action&&(_r=="keypress"&&!vr.metaKey&&!vr.ctrlKey||Ne(Hr,Rn.modifiers))){var ri=!Le&&Rn.combo==Ve,Gr=Le&&Rn.seq==Le&&Rn.level==Xe;(ri||Gr)&&Ke._callbacks[Qn].splice(Vt,1),Fn.push(Rn)}return Fn}function kt(Qn,Hr,vr,Le){Ke.stopCallback(Hr,Hr.target||Hr.srcElement,vr,Le)||Qn(Hr,vr)===!1&&(be(Hr),se(Hr))}Ke._handleKey=function(Qn,Hr,vr){var Le=vt(Qn,Hr,vr),Ve,Xe={},Vt=0,Rn=!1;for(Ve=0;Ve<Le.length;++Ve)Le[Ve].seq&&(Vt=Math.max(Vt,Le[Ve].level));for(Ve=0;Ve<Le.length;++Ve){if(Le[Ve].seq){if(Le[Ve].level!=Vt)continue;Rn=!0,Xe[Le[Ve].seq]=1,kt(Le[Ve].callback,vr,Le[Ve].combo,Le[Ve].seq);continue}Rn||kt(Le[Ve].callback,vr,Le[Ve].combo)}var Fn=vr.type=="keypress"&&Pe;vr.type==In&&!ce(Qn)&&!Fn&&hn(Xe),Pe=Rn&&vr.type=="keydown"};function jn(Qn){typeof Qn.which!="number"&&(Qn.which=Qn.keyCode);var Hr=he(Qn);if(Hr){if(Qn.type=="keyup"&&mn===Hr){mn=!1;return}Ke.handleKey(Hr,le(Qn),Qn)}}function Zt(){clearTimeout(jt),jt=setTimeout(hn,1e3)}function gr(Qn,Hr,vr,Le){dt[Qn]=0;function Ve(_r){return function(){In=_r,++dt[Qn],Zt()}}function Xe(_r){kt(vr,_r,Qn),Le!=="keyup"&&(mn=he(_r)),setTimeout(hn,10)}for(var Vt=0;Vt<Hr.length;++Vt){var Rn=Vt+1===Hr.length,Fn=Rn?Xe:Ve(Le||Ee(Hr[Vt+1]).action);Nr(Hr[Vt],Fn,Le,Qn,Vt)}}function Nr(Qn,Hr,vr,Le,Ve){Ke._directMap[Qn+":"+vr]=Hr,Qn=Qn.replace(/\s+/g," ");var Xe=Qn.split(" "),Vt;if(Xe.length>1){gr(Qn,Xe,Hr,vr);return}Vt=Ee(Qn,vr),Ke._callbacks[Vt.key]=Ke._callbacks[Vt.key]||[],vt(Vt.key,Vt.modifiers,{type:Vt.action},Le,Qn,Ve),Ke._callbacks[Vt.key][Le?"unshift":"push"]({callback:Hr,modifiers:Vt.modifiers,action:Vt.action,seq:Le,level:Ve,combo:Qn})}Ke._bindMultiple=function(Qn,Hr,vr){for(var Le=0;Le<Qn.length;++Le)Nr(Qn[Le],Hr,vr)},ne(Be,"keypress",jn),ne(Be,"keydown",jn),ne(Be,"keyup",jn)}G.prototype.bind=function(Be,Ke,dt){var jt=this;return Be=Be instanceof Array?Be:[Be],jt._bindMultiple.call(jt,Be,Ke,dt),jt},G.prototype.unbind=function(Be,Ke){var dt=this;return dt.bind.call(dt,Be,function(){},Ke)},G.prototype.trigger=function(Be,Ke){var dt=this;return dt._directMap[Be+":"+Ke]&&dt._directMap[Be+":"+Ke]({},Be),dt},G.prototype.reset=function(){var Be=this;return Be._callbacks={},Be._directMap={},Be},G.prototype.stopCallback=function(Be,Ke){var dt=this;if((" "+Ke.className+" ").indexOf(" mousetrap ")>-1||it(Ke,dt.target))return!1;if("composedPath"in Be&&typeof Be.composedPath=="function"){var jt=Be.composedPath()[0];jt!==Be.target&&(Ke=jt)}return Ke.tagName=="INPUT"||Ke.tagName=="SELECT"||Ke.tagName=="TEXTAREA"||Ke.isContentEditable},G.prototype.handleKey=function(){var Be=this;return Be._handleKey.apply(Be,arguments)},G.addKeycodes=function(Be){for(var Ke in Be)Be.hasOwnProperty(Ke)&&(Z[Ke]=Be[Ke]);oe=null},G.init=function(){var Be=G(J);for(var Ke in Be)Ke.charAt(0)!=="_"&&(G[Ke]=function(dt){return function(){return Be[dt].apply(Be,arguments)}}(Ke))},G.init(),D.Mousetrap=G,De.exports&&(De.exports=G),j=function(){return G}.call(L,M,L,De),j!==z&&(De.exports=j)})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)},40582:function(De,L,M){var j=M(89550),D=M(68854),J=M(36820),z=M(43650),Z=M(56601),ee=[0,0];De.exports.x7=function(ue,oe,ie,ne,he){return j(ue,ie,ne),J(ue,ue),D(oe,-ue[1],ue[0]),D(ee,-ie[1],ie[0]),he/Z(oe,ee)},De.exports.mJ=function(ue,oe){return D(ue,-oe[1],oe[0]),ue},De.exports.o7=function(ue,oe,ie){return z(ue,oe,ie),J(ue,ue),ue}},47743:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AlphaPicker=void 0;var j=Object.assign||function(ne){for(var he=1;he<arguments.length;he++){var Ne=arguments[he];for(var le in Ne)Object.prototype.hasOwnProperty.call(Ne,le)&&(ne[le]=Ne[le])}return ne},D=M(67294),J=oe(D),z=M(79941),Z=oe(z),ee=M(1150),Q=M(82519),ue=oe(Q);function oe(ne){return ne&&ne.__esModule?ne:{default:ne}}var ie=L.AlphaPicker=function(he){var Ne=he.rgb,le=he.hsl,be=he.width,se=he.height,ce=he.onChange,fe=he.direction,we=he.style,pe=he.renderers,Ee=he.pointer,it=he.className,G=it===void 0?"":it,Be=(0,Z.default)({default:{picker:{position:"relative",width:be,height:se},alpha:{radius:"2px",style:we}}});return J.default.createElement("div",{style:Be.picker,className:"alpha-picker "+G},J.default.createElement(ee.Alpha,j({},Be.alpha,{rgb:Ne,hsl:le,pointer:Ee,renderers:pe,onChange:ce,direction:fe})))};ie.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:ue.default},L.default=(0,ee.ColorWrap)(ie)},82519:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AlphaPointer=void 0;var j=M(67294),D=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var ee=L.AlphaPointer=function(ue){var oe=ue.direction,ie=(0,z.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:oe==="vertical"});return D.default.createElement("div",{style:ie.picker})};L.default=ee},88858:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Block=void 0;var j=M(67294),D=le(j),J=M(45697),z=le(J),Z=M(79941),ee=le(Z),Q=M(82492),ue=le(Q),oe=M(64809),ie=le(oe),ne=M(1150),he=M(53014),Ne=le(he);function le(se){return se&&se.__esModule?se:{default:se}}var be=L.Block=function(ce){var fe=ce.onChange,we=ce.onSwatchHover,pe=ce.hex,Ee=ce.colors,it=ce.width,G=ce.triangle,Be=ce.styles,Ke=Be===void 0?{}:Be,dt=ce.className,jt=dt===void 0?"":dt,mn=pe==="transparent",Pe=function(vt,kt){ie.default.isValidHex(vt)&&fe({hex:vt,source:"hex"},kt)},In=(0,ee.default)((0,ue.default)({default:{card:{width:it,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:pe,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:ie.default.getContrastingColor(pe),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+pe+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},Ke),{"hide-triangle":G==="hide"});return D.default.createElement("div",{style:In.card,className:"block-picker "+jt},D.default.createElement("div",{style:In.triangle}),D.default.createElement("div",{style:In.head},mn&&D.default.createElement(ne.Checkboard,{borderRadius:"6px 6px 0 0"}),D.default.createElement("div",{style:In.label},pe)),D.default.createElement("div",{style:In.body},D.default.createElement(Ne.default,{colors:Ee,onClick:Pe,onSwatchHover:we}),D.default.createElement(ne.EditableInput,{style:{input:In.input},value:pe,onChange:Pe})))};be.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),colors:z.default.arrayOf(z.default.string),triangle:z.default.oneOf(["top","hide"]),styles:z.default.object},be.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},L.default=(0,ne.ColorWrap)(be)},53014:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.BlockSwatches=void 0;var j=M(67294),D=ue(j),J=M(79941),z=ue(J),Z=M(35161),ee=ue(Z),Q=M(1150);function ue(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.BlockSwatches=function(ne){var he=ne.colors,Ne=ne.onClick,le=ne.onSwatchHover,be=(0,z.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return D.default.createElement("div",{style:be.swatches},(0,ee.default)(he,function(se){return D.default.createElement(Q.Swatch,{key:se,color:se,style:be.swatch,onClick:Ne,onHover:le,focusStyle:{boxShadow:"0 0 4px "+se}})}),D.default.createElement("div",{style:be.clear}))};L.default=oe},21847:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Chrome=void 0;var j=M(67294),D=se(j),J=M(45697),z=se(J),Z=M(79941),ee=se(Z),Q=M(82492),ue=se(Q),oe=M(1150),ie=M(32564),ne=se(ie),he=M(14066),Ne=se(he),le=M(20289),be=se(le);function se(fe){return fe&&fe.__esModule?fe:{default:fe}}var ce=L.Chrome=function(we){var pe=we.width,Ee=we.onChange,it=we.disableAlpha,G=we.rgb,Be=we.hsl,Ke=we.hsv,dt=we.hex,jt=we.renderers,mn=we.styles,Pe=mn===void 0?{}:mn,In=we.className,hn=In===void 0?"":In,vt=(0,ee.default)((0,ue.default)({default:{picker:{width:pe,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+G.r+", "+G.g+", "+G.b+", "+G.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},Pe),{disableAlpha:it});return D.default.createElement("div",{style:vt.picker,className:"chrome-picker "+hn},D.default.createElement("div",{style:vt.saturation},D.default.createElement(oe.Saturation,{style:vt.Saturation,hsl:Be,hsv:Ke,pointer:be.default,onChange:Ee})),D.default.createElement("div",{style:vt.body},D.default.createElement("div",{style:vt.controls,className:"flexbox-fix"},D.default.createElement("div",{style:vt.color},D.default.createElement("div",{style:vt.swatch},D.default.createElement("div",{style:vt.active}),D.default.createElement(oe.Checkboard,{renderers:jt}))),D.default.createElement("div",{style:vt.toggles},D.default.createElement("div",{style:vt.hue},D.default.createElement(oe.Hue,{style:vt.Hue,hsl:Be,pointer:Ne.default,onChange:Ee})),D.default.createElement("div",{style:vt.alpha},D.default.createElement(oe.Alpha,{style:vt.Alpha,rgb:G,hsl:Be,pointer:Ne.default,renderers:jt,onChange:Ee})))),D.default.createElement(ne.default,{rgb:G,hsl:Be,hex:dt,onChange:Ee,disableAlpha:it})))};ce.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),disableAlpha:z.default.bool,styles:z.default.object},ce.defaultProps={width:225,disableAlpha:!1,styles:{}},L.default=(0,oe.ColorWrap)(ce)},32564:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ChromeFields=void 0;var j=function(){function se(ce,fe){for(var we=0;we<fe.length;we++){var pe=fe[we];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ce,pe.key,pe)}}return function(ce,fe,we){return fe&&se(ce.prototype,fe),we&&se(ce,we),ce}}(),D=M(67294),J=ne(D),z=M(79941),Z=ne(z),ee=M(64809),Q=ne(ee),ue=M(1150),oe=M(43891),ie=ne(oe);function ne(se){return se&&se.__esModule?se:{default:se}}function he(se,ce){if(!(se instanceof ce))throw new TypeError("Cannot call a class as a function")}function Ne(se,ce){if(!se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce&&(typeof ce=="object"||typeof ce=="function")?ce:se}function le(se,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ce);se.prototype=Object.create(ce&&ce.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(se,ce):se.__proto__=ce)}var be=L.ChromeFields=function(se){le(ce,se);function ce(){var fe,we,pe,Ee;he(this,ce);for(var it=arguments.length,G=Array(it),Be=0;Be<it;Be++)G[Be]=arguments[Be];return Ee=(we=(pe=Ne(this,(fe=ce.__proto__||Object.getPrototypeOf(ce)).call.apply(fe,[this].concat(G))),pe),pe.state={view:""},pe.toggleViews=function(){pe.state.view==="hex"?pe.setState({view:"rgb"}):pe.state.view==="rgb"?pe.setState({view:"hsl"}):pe.state.view==="hsl"&&(pe.props.hsl.a===1?pe.setState({view:"hex"}):pe.setState({view:"rgb"}))},pe.handleChange=function(Ke,dt){Ke.hex?Q.default.isValidHex(Ke.hex)&&pe.props.onChange({hex:Ke.hex,source:"hex"},dt):Ke.r||Ke.g||Ke.b?pe.props.onChange({r:Ke.r||pe.props.rgb.r,g:Ke.g||pe.props.rgb.g,b:Ke.b||pe.props.rgb.b,source:"rgb"},dt):Ke.a?(Ke.a<0?Ke.a=0:Ke.a>1&&(Ke.a=1),pe.props.onChange({h:pe.props.hsl.h,s:pe.props.hsl.s,l:pe.props.hsl.l,a:Math.round(Ke.a*100)/100,source:"rgb"},dt)):(Ke.h||Ke.s||Ke.l)&&(typeof Ke.s=="string"&&Ke.s.includes("%")&&(Ke.s=Ke.s.replace("%","")),typeof Ke.l=="string"&&Ke.l.includes("%")&&(Ke.l=Ke.l.replace("%","")),pe.props.onChange({h:Ke.h||pe.props.hsl.h,s:Number(Ke.s&&Ke.s||pe.props.hsl.s),l:Number(Ke.l&&Ke.l||pe.props.hsl.l),source:"hsl"},dt))},pe.showHighlight=function(Ke){Ke.currentTarget.style.background="#eee"},pe.hideHighlight=function(Ke){Ke.currentTarget.style.background="transparent"},we),Ne(pe,Ee)}return j(ce,[{key:"componentDidMount",value:function(){this.props.hsl.a===1&&this.state.view!=="hex"?this.setState({view:"hex"}):this.state.view!=="rgb"&&this.state.view!=="hsl"&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(we){we.hsl.a!==1&&this.state.view==="hex"&&this.setState({view:"rgb"})}},{key:"render",value:function(){var we=this,pe=(0,Z.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),Ee=void 0;return this.state.view==="hex"?Ee=J.default.createElement("div",{style:pe.fields,className:"flexbox-fix"},J.default.createElement("div",{style:pe.field},J.default.createElement(ue.EditableInput,{style:{input:pe.input,label:pe.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?Ee=J.default.createElement("div",{style:pe.fields,className:"flexbox-fix"},J.default.createElement("div",{style:pe.field},J.default.createElement(ue.EditableInput,{style:{input:pe.input,label:pe.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),J.default.createElement("div",{style:pe.field},J.default.createElement(ue.EditableInput,{style:{input:pe.input,label:pe.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),J.default.createElement("div",{style:pe.field},J.default.createElement(ue.EditableInput,{style:{input:pe.input,label:pe.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),J.default.createElement("div",{style:pe.alpha},J.default.createElement(ue.EditableInput,{style:{input:pe.input,label:pe.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(Ee=J.default.createElement("div",{style:pe.fields,className:"flexbox-fix"},J.default.createElement("div",{style:pe.field},J.default.createElement(ue.EditableInput,{style:{input:pe.input,label:pe.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),J.default.createElement("div",{style:pe.field},J.default.createElement(ue.EditableInput,{style:{input:pe.input,label:pe.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),J.default.createElement("div",{style:pe.field},J.default.createElement(ue.EditableInput,{style:{input:pe.input,label:pe.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),J.default.createElement("div",{style:pe.alpha},J.default.createElement(ue.EditableInput,{style:{input:pe.input,label:pe.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),J.default.createElement("div",{style:pe.wrap,className:"flexbox-fix"},Ee,J.default.createElement("div",{style:pe.toggle},J.default.createElement("div",{style:pe.icon,onClick:this.toggleViews,ref:function(G){return we.icon=G}},J.default.createElement(ie.default,{style:pe.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}]),ce}(J.default.Component);L.default=be},14066:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ChromePointer=void 0;var j=M(67294),D=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var ee=L.ChromePointer=function(){var ue=(0,z.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return D.default.createElement("div",{style:ue.picker})};L.default=ee},20289:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ChromePointerCircle=void 0;var j=M(67294),D=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var ee=L.ChromePointerCircle=function(){var ue=(0,z.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return D.default.createElement("div",{style:ue.picker})};L.default=ee},9703:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Circle=void 0;var j=M(67294),D=ce(j),J=M(45697),z=ce(J),Z=M(79941),ee=ce(Z),Q=M(35161),ue=ce(Q),oe=M(82492),ie=ce(oe),ne=M(53893),he=se(ne),Ne=M(1150),le=M(26249),be=ce(le);function se(we){if(we&&we.__esModule)return we;var pe={};if(we!=null)for(var Ee in we)Object.prototype.hasOwnProperty.call(we,Ee)&&(pe[Ee]=we[Ee]);return pe.default=we,pe}function ce(we){return we&&we.__esModule?we:{default:we}}var fe=L.Circle=function(pe){var Ee=pe.width,it=pe.onChange,G=pe.onSwatchHover,Be=pe.colors,Ke=pe.hex,dt=pe.circleSize,jt=pe.styles,mn=jt===void 0?{}:jt,Pe=pe.circleSpacing,In=pe.className,hn=In===void 0?"":In,vt=(0,ee.default)((0,ie.default)({default:{card:{width:Ee,display:"flex",flexWrap:"wrap",marginRight:-Pe,marginBottom:-Pe}}},mn)),kt=function(Zt,gr){return it({hex:Zt,source:"hex"},gr)};return D.default.createElement("div",{style:vt.card,className:"circle-picker "+hn},(0,ue.default)(Be,function(jn){return D.default.createElement(be.default,{key:jn,color:jn,onClick:kt,onSwatchHover:G,active:Ke===jn.toLowerCase(),circleSize:dt,circleSpacing:Pe})}))};fe.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),circleSize:z.default.number,circleSpacing:z.default.number,styles:z.default.object},fe.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[he.red[500],he.pink[500],he.purple[500],he.deepPurple[500],he.indigo[500],he.blue[500],he.lightBlue[500],he.cyan[500],he.teal[500],he.green[500],he.lightGreen[500],he.lime[500],he.yellow[500],he.amber[500],he.orange[500],he.deepOrange[500],he.brown[500],he.blueGrey[500]],styles:{}},L.default=(0,Ne.ColorWrap)(fe)},26249:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.CircleSwatch=void 0;var j=M(67294),D=ee(j),J=M(79941),z=ee(J),Z=M(1150);function ee(ue){return ue&&ue.__esModule?ue:{default:ue}}var Q=L.CircleSwatch=function(oe){var ie=oe.color,ne=oe.onClick,he=oe.onSwatchHover,Ne=oe.hover,le=oe.active,be=oe.circleSize,se=oe.circleSpacing,ce=(0,z.default)({default:{swatch:{width:be,height:be,marginRight:se,marginBottom:se,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+be/2+"px "+ie,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+ie}}},{hover:Ne,active:le});return D.default.createElement("div",{style:ce.swatch},D.default.createElement(Z.Swatch,{style:ce.Swatch,color:ie,onClick:ne,onHover:he,focusStyle:{boxShadow:ce.Swatch.boxShadow+", 0 0 5px "+ie}}))};Q.defaultProps={circleSize:28,circleSpacing:14},L.default=(0,J.handleHover)(Q)},57319:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Alpha=void 0;var j=Object.assign||function(ce){for(var fe=1;fe<arguments.length;fe++){var we=arguments[fe];for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&(ce[pe]=we[pe])}return ce},D=function(){function ce(fe,we){for(var pe=0;pe<we.length;pe++){var Ee=we[pe];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(fe,Ee.key,Ee)}}return function(fe,we,pe){return we&&ce(fe.prototype,we),pe&&ce(fe,pe),fe}}(),J=M(67294),z=he(J),Z=M(79941),ee=he(Z),Q=M(66713),ue=ne(Q),oe=M(34349),ie=he(oe);function ne(ce){if(ce&&ce.__esModule)return ce;var fe={};if(ce!=null)for(var we in ce)Object.prototype.hasOwnProperty.call(ce,we)&&(fe[we]=ce[we]);return fe.default=ce,fe}function he(ce){return ce&&ce.__esModule?ce:{default:ce}}function Ne(ce,fe){if(!(ce instanceof fe))throw new TypeError("Cannot call a class as a function")}function le(ce,fe){if(!ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe&&(typeof fe=="object"||typeof fe=="function")?fe:ce}function be(ce,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof fe);ce.prototype=Object.create(fe&&fe.prototype,{constructor:{value:ce,enumerable:!1,writable:!0,configurable:!0}}),fe&&(Object.setPrototypeOf?Object.setPrototypeOf(ce,fe):ce.__proto__=fe)}var se=L.Alpha=function(ce){be(fe,ce);function fe(){var we,pe,Ee,it;Ne(this,fe);for(var G=arguments.length,Be=Array(G),Ke=0;Ke<G;Ke++)Be[Ke]=arguments[Ke];return it=(pe=(Ee=le(this,(we=fe.__proto__||Object.getPrototypeOf(fe)).call.apply(we,[this].concat(Be))),Ee),Ee.handleChange=function(dt){var jt=ue.calculateChange(dt,Ee.props.hsl,Ee.props.direction,Ee.props.a,Ee.container);jt&&typeof Ee.props.onChange=="function"&&Ee.props.onChange(jt,dt)},Ee.handleMouseDown=function(dt){Ee.handleChange(dt),window.addEventListener("mousemove",Ee.handleChange),window.addEventListener("mouseup",Ee.handleMouseUp)},Ee.handleMouseUp=function(){Ee.unbindEventListeners()},Ee.unbindEventListeners=function(){window.removeEventListener("mousemove",Ee.handleChange),window.removeEventListener("mouseup",Ee.handleMouseUp)},pe),le(Ee,it)}return D(fe,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var pe=this,Ee=this.props.rgb,it=(0,ee.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+Ee.r+","+Ee.g+","+Ee.b+`, 0) 0%,
           rgba(`+Ee.r+","+Ee.g+","+Ee.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:Ee.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+Ee.r+","+Ee.g+","+Ee.b+`, 0) 0%,
           rgba(`+Ee.r+","+Ee.g+","+Ee.b+", 1) 100%)"},pointer:{left:0,top:Ee.a*100+"%"}},overwrite:j({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return z.default.createElement("div",{style:it.alpha},z.default.createElement("div",{style:it.checkboard},z.default.createElement(ie.default,{renderers:this.props.renderers})),z.default.createElement("div",{style:it.gradient}),z.default.createElement("div",{style:it.container,ref:function(Be){return pe.container=Be},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},z.default.createElement("div",{style:it.pointer},this.props.pointer?z.default.createElement(this.props.pointer,this.props):z.default.createElement("div",{style:it.slider}))))}}]),fe}(J.PureComponent||J.Component);L.default=se},34349:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Checkboard=void 0;var j=M(67294),D=ue(j),J=M(79941),z=ue(J),Z=M(45704),ee=Q(Z);function Q(ie){if(ie&&ie.__esModule)return ie;var ne={};if(ie!=null)for(var he in ie)Object.prototype.hasOwnProperty.call(ie,he)&&(ne[he]=ie[he]);return ne.default=ie,ne}function ue(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.Checkboard=function(ne){var he=ne.white,Ne=ne.grey,le=ne.size,be=ne.renderers,se=ne.borderRadius,ce=ne.boxShadow,fe=(0,z.default)({default:{grid:{borderRadius:se,boxShadow:ce,absolute:"0px 0px 0px 0px",background:"url("+ee.get(he,Ne,le,be.canvas)+") center left"}}});return D.default.createElement("div",{style:fe.grid})};oe.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},L.default=oe},88288:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ColorWrap=void 0;var j=Object.assign||function(le){for(var be=1;be<arguments.length;be++){var se=arguments[be];for(var ce in se)Object.prototype.hasOwnProperty.call(se,ce)&&(le[ce]=se[ce])}return le},D=function(){function le(be,se){for(var ce=0;ce<se.length;ce++){var fe=se[ce];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(be,fe.key,fe)}}return function(be,se,ce){return se&&le(be.prototype,se),ce&&le(be,ce),be}}(),J=M(67294),z=oe(J),Z=M(23279),ee=oe(Z),Q=M(64809),ue=oe(Q);function oe(le){return le&&le.__esModule?le:{default:le}}function ie(le,be){if(!(le instanceof be))throw new TypeError("Cannot call a class as a function")}function ne(le,be){if(!le)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be&&(typeof be=="object"||typeof be=="function")?be:le}function he(le,be){if(typeof be!="function"&&be!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof be);le.prototype=Object.create(be&&be.prototype,{constructor:{value:le,enumerable:!1,writable:!0,configurable:!0}}),be&&(Object.setPrototypeOf?Object.setPrototypeOf(le,be):le.__proto__=be)}var Ne=L.ColorWrap=function(be){var se=function(ce){he(fe,ce);function fe(we){ie(this,fe);var pe=ne(this,(fe.__proto__||Object.getPrototypeOf(fe)).call(this));return pe.handleChange=function(Ee,it){var G=ue.default.simpleCheckForValidColor(Ee);if(G){var Be=ue.default.toState(Ee,Ee.h||pe.state.oldHue);pe.setState(Be),pe.props.onChangeComplete&&pe.debounce(pe.props.onChangeComplete,Be,it),pe.props.onChange&&pe.props.onChange(Be,it)}},pe.handleSwatchHover=function(Ee,it){var G=ue.default.simpleCheckForValidColor(Ee);if(G){var Be=ue.default.toState(Ee,Ee.h||pe.state.oldHue);pe.setState(Be),pe.props.onSwatchHover&&pe.props.onSwatchHover(Be,it)}},pe.state=j({},ue.default.toState(we.color,0)),pe.debounce=(0,ee.default)(function(Ee,it,G){Ee(it,G)},100),pe}return D(fe,[{key:"componentWillReceiveProps",value:function(pe){this.setState(j({},ue.default.toState(pe.color,this.state.oldHue)))}},{key:"render",value:function(){var pe={};return this.props.onSwatchHover&&(pe.onSwatchHover=this.handleSwatchHover),z.default.createElement(be,j({},this.props,this.state,{onChange:this.handleChange},pe))}}]),fe}(J.PureComponent||J.Component);return se.propTypes=j({},be.propTypes),se.defaultProps=j({},be.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),se};L.default=Ne},27747:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.EditableInput=void 0;var j=function(){function pe(Ee,it){for(var G=0;G<it.length;G++){var Be=it[G];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(Ee,Be.key,Be)}}return function(Ee,it,G){return it&&pe(Ee.prototype,it),G&&pe(Ee,G),Ee}}(),D=M(67294),J=ee(D),z=M(79941),Z=ee(z);function ee(pe){return pe&&pe.__esModule?pe:{default:pe}}function Q(pe,Ee,it){return Ee in pe?Object.defineProperty(pe,Ee,{value:it,enumerable:!0,configurable:!0,writable:!0}):pe[Ee]=it,pe}function ue(pe,Ee){if(!(pe instanceof Ee))throw new TypeError("Cannot call a class as a function")}function oe(pe,Ee){if(!pe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee&&(typeof Ee=="object"||typeof Ee=="function")?Ee:pe}function ie(pe,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ee);pe.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:pe,enumerable:!1,writable:!0,configurable:!0}}),Ee&&(Object.setPrototypeOf?Object.setPrototypeOf(pe,Ee):pe.__proto__=Ee)}var ne=1,he=38,Ne=40,le=[he,Ne],be=function(Ee){return le.indexOf(Ee)>-1},se=function(Ee){return Ee+"%"},ce=function(Ee){return Number(String(Ee).replace(/%/g,""))},fe=function(Ee){return String(Ee).indexOf("%")>-1},we=L.EditableInput=function(pe){ie(Ee,pe);function Ee(it){ue(this,Ee);var G=oe(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this));return G.handleBlur=function(){G.state.blurValue&&G.setState({value:G.state.blurValue,blurValue:null})},G.handleChange=function(Be){G.setUpdatedValue(Be.target.value,Be)},G.handleKeyDown=function(Be){var Ke=ce(Be.target.value);if(!isNaN(Ke)&&be(Be.keyCode)){var dt=G.getArrowOffset(),jt=Be.keyCode===he?Ke+dt:Ke-dt;G.setUpdatedValue(jt,Be)}},G.handleDrag=function(Be){if(G.props.dragLabel){var Ke=Math.round(G.props.value+Be.movementX);Ke>=0&&Ke<=G.props.dragMax&&G.props.onChange&&G.props.onChange(G.getValueObjectWithLabel(Ke),Be)}},G.handleMouseDown=function(Be){G.props.dragLabel&&(Be.preventDefault(),G.handleDrag(Be),window.addEventListener("mousemove",G.handleDrag),window.addEventListener("mouseup",G.handleMouseUp))},G.handleMouseUp=function(){G.unbindEventListeners()},G.unbindEventListeners=function(){window.removeEventListener("mousemove",G.handleDrag),window.removeEventListener("mouseup",G.handleMouseUp)},G.state={value:String(it.value).toUpperCase(),blurValue:String(it.value).toUpperCase()},G}return j(Ee,[{key:"componentWillReceiveProps",value:function(G){var Be=this.input;G.value!==this.state.value&&(Be===document.activeElement?this.setState({blurValue:String(G.value).toUpperCase()}):this.setState({value:String(G.value).toUpperCase(),blurValue:!this.state.blurValue&&String(G.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(G){return Q({},this.props.label,G)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||ne}},{key:"setUpdatedValue",value:function(G,Be){var Ke=this.props.label!==null?this.getValueObjectWithLabel(G):G;this.props.onChange&&this.props.onChange(Ke,Be);var dt=fe(Be.target.value);this.setState({value:dt?se(G):G})}},{key:"render",value:function(){var G=this,Be=(0,Z.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return J.default.createElement("div",{style:Be.wrap},J.default.createElement("input",{style:Be.input,ref:function(dt){return G.input=dt},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?J.default.createElement("span",{style:Be.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),Ee}(D.PureComponent||D.Component);L.default=we},26358:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Hue=void 0;var j=function(){function le(be,se){for(var ce=0;ce<se.length;ce++){var fe=se[ce];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(be,fe.key,fe)}}return function(be,se,ce){return se&&le(be.prototype,se),ce&&le(be,ce),be}}(),D=M(67294),J=oe(D),z=M(79941),Z=oe(z),ee=M(33716),Q=ue(ee);function ue(le){if(le&&le.__esModule)return le;var be={};if(le!=null)for(var se in le)Object.prototype.hasOwnProperty.call(le,se)&&(be[se]=le[se]);return be.default=le,be}function oe(le){return le&&le.__esModule?le:{default:le}}function ie(le,be){if(!(le instanceof be))throw new TypeError("Cannot call a class as a function")}function ne(le,be){if(!le)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be&&(typeof be=="object"||typeof be=="function")?be:le}function he(le,be){if(typeof be!="function"&&be!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof be);le.prototype=Object.create(be&&be.prototype,{constructor:{value:le,enumerable:!1,writable:!0,configurable:!0}}),be&&(Object.setPrototypeOf?Object.setPrototypeOf(le,be):le.__proto__=be)}var Ne=L.Hue=function(le){he(be,le);function be(){var se,ce,fe,we;ie(this,be);for(var pe=arguments.length,Ee=Array(pe),it=0;it<pe;it++)Ee[it]=arguments[it];return we=(ce=(fe=ne(this,(se=be.__proto__||Object.getPrototypeOf(be)).call.apply(se,[this].concat(Ee))),fe),fe.handleChange=function(G){var Be=Q.calculateChange(G,fe.props.direction,fe.props.hsl,fe.container);Be&&typeof fe.props.onChange=="function"&&fe.props.onChange(Be,G)},fe.handleMouseDown=function(G){fe.handleChange(G),window.addEventListener("mousemove",fe.handleChange),window.addEventListener("mouseup",fe.handleMouseUp)},fe.handleMouseUp=function(){fe.unbindEventListeners()},ce),ne(fe,we)}return j(be,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var ce=this,fe=this.props.direction,we=fe===void 0?"horizontal":fe,pe=(0,Z.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:we==="vertical"});return J.default.createElement("div",{style:pe.hue},J.default.createElement("div",{className:"hue-"+we,style:pe.container,ref:function(it){return ce.container=it},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},J.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),J.default.createElement("div",{style:pe.pointer},this.props.pointer?J.default.createElement(this.props.pointer,this.props):J.default.createElement("div",{style:pe.slider}))))}}]),be}(D.PureComponent||D.Component);L.default=Ne},96207:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Raised=void 0;var j=M(67294),D=oe(j),J=M(45697),z=oe(J),Z=M(79941),ee=oe(Z),Q=M(82492),ue=oe(Q);function oe(ne){return ne&&ne.__esModule?ne:{default:ne}}var ie=L.Raised=function(he){var Ne=he.zDepth,le=he.radius,be=he.background,se=he.children,ce=he.styles,fe=ce===void 0?{}:ce,we=(0,ee.default)((0,ue.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+Ne+"px "+Ne*4+"px rgba(0,0,0,.24)",borderRadius:le,background:be}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},fe),{"zDepth-1":Ne===1});return D.default.createElement("div",{style:we.wrap},D.default.createElement("div",{style:we.bg}),D.default.createElement("div",{style:we.content},se))};ie.propTypes={background:z.default.string,zDepth:z.default.oneOf([0,1,2,3,4,5]),radius:z.default.number,styles:z.default.object},ie.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},L.default=ie},76659:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Saturation=void 0;var j=function(){function se(ce,fe){for(var we=0;we<fe.length;we++){var pe=fe[we];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ce,pe.key,pe)}}return function(ce,fe,we){return fe&&se(ce.prototype,fe),we&&se(ce,we),ce}}(),D=M(67294),J=ne(D),z=M(79941),Z=ne(z),ee=M(23493),Q=ne(ee),ue=M(37599),oe=ie(ue);function ie(se){if(se&&se.__esModule)return se;var ce={};if(se!=null)for(var fe in se)Object.prototype.hasOwnProperty.call(se,fe)&&(ce[fe]=se[fe]);return ce.default=se,ce}function ne(se){return se&&se.__esModule?se:{default:se}}function he(se,ce){if(!(se instanceof ce))throw new TypeError("Cannot call a class as a function")}function Ne(se,ce){if(!se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce&&(typeof ce=="object"||typeof ce=="function")?ce:se}function le(se,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ce);se.prototype=Object.create(ce&&ce.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(se,ce):se.__proto__=ce)}var be=L.Saturation=function(se){le(ce,se);function ce(fe){he(this,ce);var we=Ne(this,(ce.__proto__||Object.getPrototypeOf(ce)).call(this,fe));return we.handleChange=function(pe){typeof we.props.onChange=="function"&&we.throttle(we.props.onChange,oe.calculateChange(pe,we.props.hsl,we.container),pe)},we.handleMouseDown=function(pe){we.handleChange(pe),window.addEventListener("mousemove",we.handleChange),window.addEventListener("mouseup",we.handleMouseUp)},we.handleMouseUp=function(){we.unbindEventListeners()},we.throttle=(0,Q.default)(function(pe,Ee,it){pe(Ee,it)},50),we}return j(ce,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var we=this,pe=this.props.style||{},Ee=pe.color,it=pe.white,G=pe.black,Be=pe.pointer,Ke=pe.circle,dt=(0,Z.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:Ee,white:it,black:G,pointer:Be,circle:Ke}},{custom:!!this.props.style});return J.default.createElement("div",{style:dt.color,ref:function(mn){return we.container=mn},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},J.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),J.default.createElement("div",{style:dt.white,className:"saturation-white"},J.default.createElement("div",{style:dt.black,className:"saturation-black"}),J.default.createElement("div",{style:dt.pointer},this.props.pointer?J.default.createElement(this.props.pointer,this.props):J.default.createElement("div",{style:dt.circle}))))}}]),ce}(D.PureComponent||D.Component);L.default=be},62489:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Swatch=void 0;var j=Object.assign||function(he){for(var Ne=1;Ne<arguments.length;Ne++){var le=arguments[Ne];for(var be in le)Object.prototype.hasOwnProperty.call(le,be)&&(he[be]=le[be])}return he},D=M(67294),J=oe(D),z=M(79941),Z=oe(z),ee=M(82538),Q=M(34349),ue=oe(Q);function oe(he){return he&&he.__esModule?he:{default:he}}var ie=13,ne=L.Swatch=function(Ne){var le=Ne.color,be=Ne.style,se=Ne.onClick,ce=se===void 0?function(){}:se,fe=Ne.onHover,we=Ne.title,pe=we===void 0?le:we,Ee=Ne.children,it=Ne.focus,G=Ne.focusStyle,Be=G===void 0?{}:G,Ke=le==="transparent",dt=(0,Z.default)({default:{swatch:j({background:le,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},be,it?Be:{})}}),jt=function(vt){return ce(le,vt)},mn=function(vt){return vt.keyCode===ie&&ce(le,vt)},Pe=function(vt){return fe(le,vt)},In={};return fe&&(In.onMouseOver=Pe),J.default.createElement("div",j({style:dt.swatch,onClick:jt,title:pe,tabIndex:0,onKeyDown:mn},In),Ee,Ke&&J.default.createElement(ue.default,{borderRadius:dt.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};L.default=(0,ee.handleFocus)(ne)},1150:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var j=M(57319);Object.defineProperty(L,"Alpha",{enumerable:!0,get:function(){return oe(j).default}});var D=M(34349);Object.defineProperty(L,"Checkboard",{enumerable:!0,get:function(){return oe(D).default}});var J=M(27747);Object.defineProperty(L,"EditableInput",{enumerable:!0,get:function(){return oe(J).default}});var z=M(26358);Object.defineProperty(L,"Hue",{enumerable:!0,get:function(){return oe(z).default}});var Z=M(96207);Object.defineProperty(L,"Raised",{enumerable:!0,get:function(){return oe(Z).default}});var ee=M(76659);Object.defineProperty(L,"Saturation",{enumerable:!0,get:function(){return oe(ee).default}});var Q=M(88288);Object.defineProperty(L,"ColorWrap",{enumerable:!0,get:function(){return oe(Q).default}});var ue=M(62489);Object.defineProperty(L,"Swatch",{enumerable:!0,get:function(){return oe(ue).default}});function oe(ie){return ie&&ie.__esModule?ie:{default:ie}}},99766:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Compact=void 0;var j=M(67294),D=fe(j),J=M(45697),z=fe(J),Z=M(79941),ee=fe(Z),Q=M(35161),ue=fe(Q),oe=M(82492),ie=fe(oe),ne=M(64809),he=fe(ne),Ne=M(1150),le=M(49613),be=fe(le),se=M(82018),ce=fe(se);function fe(pe){return pe&&pe.__esModule?pe:{default:pe}}var we=L.Compact=function(Ee){var it=Ee.onChange,G=Ee.onSwatchHover,Be=Ee.colors,Ke=Ee.hex,dt=Ee.rgb,jt=Ee.styles,mn=jt===void 0?{}:jt,Pe=Ee.className,In=Pe===void 0?"":Pe,hn=(0,ee.default)((0,ie.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},mn)),vt=function(jn,Zt){jn.hex?he.default.isValidHex(jn.hex)&&it({hex:jn.hex,source:"hex"},Zt):it(jn,Zt)};return D.default.createElement(Ne.Raised,{style:hn.Compact,styles:mn},D.default.createElement("div",{style:hn.compact,className:"compact-picker "+In},D.default.createElement("div",null,(0,ue.default)(Be,function(kt){return D.default.createElement(be.default,{key:kt,color:kt,active:kt.toLowerCase()===Ke,onClick:vt,onSwatchHover:G})}),D.default.createElement("div",{style:hn.clear})),D.default.createElement(ce.default,{hex:Ke,rgb:dt,onChange:vt})))};we.propTypes={colors:z.default.arrayOf(z.default.string),styles:z.default.object},we.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},L.default=(0,Ne.ColorWrap)(we)},49613:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.CompactColor=void 0;var j=M(67294),D=ue(j),J=M(79941),z=ue(J),Z=M(64809),ee=ue(Z),Q=M(1150);function ue(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.CompactColor=function(ne){var he=ne.color,Ne=ne.onClick,le=Ne===void 0?function(){}:Ne,be=ne.onSwatchHover,se=ne.active,ce=(0,z.default)({default:{color:{background:he,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:ee.default.getContrastingColor(he),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:se,"color-#FFFFFF":he==="#FFFFFF",transparent:he==="transparent"});return D.default.createElement(Q.Swatch,{style:ce.color,color:he,onClick:le,onHover:be,focusStyle:{boxShadow:"0 0 4px "+he}},D.default.createElement("div",{style:ce.dot}))};L.default=oe},82018:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.CompactFields=void 0;var j=M(67294),D=ee(j),J=M(79941),z=ee(J),Z=M(1150);function ee(ue){return ue&&ue.__esModule?ue:{default:ue}}var Q=L.CompactFields=function(oe){var ie=oe.hex,ne=oe.rgb,he=oe.onChange,Ne=(0,z.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:ie},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),le=function(se,ce){se.r||se.g||se.b?he({r:se.r||ne.r,g:se.g||ne.g,b:se.b||ne.b,source:"rgb"},ce):he({hex:se.hex,source:"hex"},ce)};return D.default.createElement("div",{style:Ne.fields,className:"flexbox-fix"},D.default.createElement("div",{style:Ne.active}),D.default.createElement(Z.EditableInput,{style:{wrap:Ne.HEXwrap,input:Ne.HEXinput,label:Ne.HEXlabel},label:"hex",value:ie,onChange:le}),D.default.createElement(Z.EditableInput,{style:{wrap:Ne.RGBwrap,input:Ne.RGBinput,label:Ne.RGBlabel},label:"r",value:ne.r,onChange:le}),D.default.createElement(Z.EditableInput,{style:{wrap:Ne.RGBwrap,input:Ne.RGBinput,label:Ne.RGBlabel},label:"g",value:ne.g,onChange:le}),D.default.createElement(Z.EditableInput,{style:{wrap:Ne.RGBwrap,input:Ne.RGBinput,label:Ne.RGBlabel},label:"b",value:ne.b,onChange:le}))};L.default=Q},19700:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Github=void 0;var j=M(67294),D=le(j),J=M(45697),z=le(J),Z=M(79941),ee=le(Z),Q=M(35161),ue=le(Q),oe=M(82492),ie=le(oe),ne=M(1150),he=M(13255),Ne=le(he);function le(se){return se&&se.__esModule?se:{default:se}}var be=L.Github=function(ce){var fe=ce.width,we=ce.colors,pe=ce.onChange,Ee=ce.onSwatchHover,it=ce.triangle,G=ce.styles,Be=G===void 0?{}:G,Ke=ce.className,dt=Ke===void 0?"":Ke,jt=(0,ee.default)((0,ie.default)({default:{card:{width:fe,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},Be),{"hide-triangle":it==="hide","top-left-triangle":it==="top-left","top-right-triangle":it==="top-right","bottom-left-triangle":it==="bottom-left","bottom-right-triangle":it==="bottom-right"}),mn=function(In,hn){return pe({hex:In,source:"hex"},hn)};return D.default.createElement("div",{style:jt.card,className:"github-picker "+dt},D.default.createElement("div",{style:jt.triangleShadow}),D.default.createElement("div",{style:jt.triangle}),(0,ue.default)(we,function(Pe){return D.default.createElement(Ne.default,{color:Pe,key:Pe,onClick:mn,onSwatchHover:Ee})}))};be.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),colors:z.default.arrayOf(z.default.string),triangle:z.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:z.default.object},be.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},L.default=(0,ne.ColorWrap)(be)},13255:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.GithubSwatch=void 0;var j=M(67294),D=ee(j),J=M(79941),z=ee(J),Z=M(1150);function ee(ue){return ue&&ue.__esModule?ue:{default:ue}}var Q=L.GithubSwatch=function(oe){var ie=oe.hover,ne=oe.color,he=oe.onClick,Ne=oe.onSwatchHover,le={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},be=(0,z.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:le}},{hover:ie});return D.default.createElement("div",{style:be.swatch},D.default.createElement(Z.Swatch,{color:ne,onClick:he,onHover:Ne,focusStyle:le}))};L.default=(0,J.handleHover)(Q)},10565:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.HuePicker=void 0;var j=Object.assign||function(be){for(var se=1;se<arguments.length;se++){var ce=arguments[se];for(var fe in ce)Object.prototype.hasOwnProperty.call(ce,fe)&&(be[fe]=ce[fe])}return be},D=M(67294),J=Ne(D),z=M(45697),Z=Ne(z),ee=M(79941),Q=Ne(ee),ue=M(82492),oe=Ne(ue),ie=M(1150),ne=M(88878),he=Ne(ne);function Ne(be){return be&&be.__esModule?be:{default:be}}var le=L.HuePicker=function(se){var ce=se.width,fe=se.height,we=se.onChange,pe=se.hsl,Ee=se.direction,it=se.pointer,G=se.styles,Be=G===void 0?{}:G,Ke=se.className,dt=Ke===void 0?"":Ke,jt=(0,Q.default)((0,oe.default)({default:{picker:{position:"relative",width:ce,height:fe},hue:{radius:"2px"}}},Be)),mn=function(In){return we({a:1,h:In.h,l:.5,s:1})};return J.default.createElement("div",{style:jt.picker,className:"hue-picker "+dt},J.default.createElement(ie.Hue,j({},jt.hue,{hsl:pe,pointer:it,onChange:mn,direction:Ee})))};le.propTypes={styles:Z.default.object},le.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:he.default,styles:{}},L.default=(0,ie.ColorWrap)(le)},88878:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SliderPointer=void 0;var j=M(67294),D=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var ee=L.SliderPointer=function(ue){var oe=ue.direction,ie=(0,z.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:oe==="vertical"});return D.default.createElement("div",{style:ie.picker})};L.default=ee},66142:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Material=void 0;var j=M(67294),D=ie(j),J=M(79941),z=ie(J),Z=M(82492),ee=ie(Z),Q=M(64809),ue=ie(Q),oe=M(1150);function ie(he){return he&&he.__esModule?he:{default:he}}var ne=L.Material=function(Ne){var le=Ne.onChange,be=Ne.hex,se=Ne.rgb,ce=Ne.styles,fe=ce===void 0?{}:ce,we=Ne.className,pe=we===void 0?"":we,Ee=(0,z.default)((0,ee.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+be,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},fe)),it=function(Be,Ke){Be.hex?ue.default.isValidHex(Be.hex)&&le({hex:Be.hex,source:"hex"},Ke):(Be.r||Be.g||Be.b)&&le({r:Be.r||se.r,g:Be.g||se.g,b:Be.b||se.b,source:"rgb"},Ke)};return D.default.createElement(oe.Raised,{styles:fe},D.default.createElement("div",{style:Ee.material,className:"material-picker "+pe},D.default.createElement(oe.EditableInput,{style:{wrap:Ee.HEXwrap,input:Ee.HEXinput,label:Ee.HEXlabel},label:"hex",value:be,onChange:it}),D.default.createElement("div",{style:Ee.split,className:"flexbox-fix"},D.default.createElement("div",{style:Ee.third},D.default.createElement(oe.EditableInput,{style:{wrap:Ee.RGBwrap,input:Ee.RGBinput,label:Ee.RGBlabel},label:"r",value:se.r,onChange:it})),D.default.createElement("div",{style:Ee.third},D.default.createElement(oe.EditableInput,{style:{wrap:Ee.RGBwrap,input:Ee.RGBinput,label:Ee.RGBlabel},label:"g",value:se.g,onChange:it})),D.default.createElement("div",{style:Ee.third},D.default.createElement(oe.EditableInput,{style:{wrap:Ee.RGBwrap,input:Ee.RGBinput,label:Ee.RGBlabel},label:"b",value:se.b,onChange:it})))))};L.default=(0,oe.ColorWrap)(ne)},33165:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Photoshop=void 0;var j=function(){function dt(jt,mn){for(var Pe=0;Pe<mn.length;Pe++){var In=mn[Pe];In.enumerable=In.enumerable||!1,In.configurable=!0,"value"in In&&(In.writable=!0),Object.defineProperty(jt,In.key,In)}}return function(jt,mn,Pe){return mn&&dt(jt.prototype,mn),Pe&&dt(jt,Pe),jt}}(),D=M(67294),J=Ee(D),z=M(45697),Z=Ee(z),ee=M(79941),Q=Ee(ee),ue=M(82492),oe=Ee(ue),ie=M(1150),ne=M(21962),he=Ee(ne),Ne=M(31804),le=Ee(Ne),be=M(40670),se=Ee(be),ce=M(10170),fe=Ee(ce),we=M(29628),pe=Ee(we);function Ee(dt){return dt&&dt.__esModule?dt:{default:dt}}function it(dt,jt){if(!(dt instanceof jt))throw new TypeError("Cannot call a class as a function")}function G(dt,jt){if(!dt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt&&(typeof jt=="object"||typeof jt=="function")?jt:dt}function Be(dt,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof jt);dt.prototype=Object.create(jt&&jt.prototype,{constructor:{value:dt,enumerable:!1,writable:!0,configurable:!0}}),jt&&(Object.setPrototypeOf?Object.setPrototypeOf(dt,jt):dt.__proto__=jt)}var Ke=L.Photoshop=function(dt){Be(jt,dt);function jt(mn){it(this,jt);var Pe=G(this,(jt.__proto__||Object.getPrototypeOf(jt)).call(this));return Pe.state={currentColor:mn.hex},Pe}return j(jt,[{key:"render",value:function(){var Pe=this.props,In=Pe.styles,hn=In===void 0?{}:In,vt=Pe.className,kt=vt===void 0?"":vt,jn=(0,Q.default)((0,oe.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},hn));return J.default.createElement("div",{style:jn.picker,className:"photoshop-picker "+kt},J.default.createElement("div",{style:jn.head},this.props.header),J.default.createElement("div",{style:jn.body,className:"flexbox-fix"},J.default.createElement("div",{style:jn.saturation},J.default.createElement(ie.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:le.default,onChange:this.props.onChange})),J.default.createElement("div",{style:jn.hue},J.default.createElement(ie.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:se.default,onChange:this.props.onChange})),J.default.createElement("div",{style:jn.controls},J.default.createElement("div",{style:jn.top,className:"flexbox-fix"},J.default.createElement("div",{style:jn.previews},J.default.createElement(pe.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),J.default.createElement("div",{style:jn.actions},J.default.createElement(fe.default,{label:"OK",onClick:this.props.onAccept,active:!0}),J.default.createElement(fe.default,{label:"Cancel",onClick:this.props.onCancel}),J.default.createElement(he.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),jt}(J.default.Component);Ke.propTypes={header:Z.default.string,styles:Z.default.object},Ke.defaultProps={header:"Color Picker",styles:{}},L.default=(0,ie.ColorWrap)(Ke)},10170:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopButton=void 0;var j=M(67294),D=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var ee=L.PhotoshopButton=function(ue){var oe=ue.onClick,ie=ue.label,ne=ue.children,he=ue.active,Ne=(0,z.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:he});return D.default.createElement("div",{style:Ne.button,onClick:oe},ie||ne)};L.default=ee},21962:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopPicker=void 0;var j=M(67294),D=ue(j),J=M(79941),z=ue(J),Z=M(64809),ee=ue(Z),Q=M(1150);function ue(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.PhotoshopPicker=function(ne){var he=ne.onChange,Ne=ne.rgb,le=ne.hsv,be=ne.hex,se=(0,z.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),ce=function(we,pe){we["#"]?ee.default.isValidHex(we["#"])&&he({hex:we["#"],source:"hex"},pe):we.r||we.g||we.b?he({r:we.r||Ne.r,g:we.g||Ne.g,b:we.b||Ne.b,source:"rgb"},pe):(we.h||we.s||we.v)&&he({h:we.h||le.h,s:we.s||le.s,v:we.v||le.v,source:"hsv"},pe)};return D.default.createElement("div",{style:se.fields},D.default.createElement(Q.EditableInput,{style:{wrap:se.RGBwrap,input:se.RGBinput,label:se.RGBlabel},label:"h",value:Math.round(le.h),onChange:ce}),D.default.createElement(Q.EditableInput,{style:{wrap:se.RGBwrap,input:se.RGBinput,label:se.RGBlabel},label:"s",value:Math.round(le.s*100),onChange:ce}),D.default.createElement(Q.EditableInput,{style:{wrap:se.RGBwrap,input:se.RGBinput,label:se.RGBlabel},label:"v",value:Math.round(le.v*100),onChange:ce}),D.default.createElement("div",{style:se.divider}),D.default.createElement(Q.EditableInput,{style:{wrap:se.RGBwrap,input:se.RGBinput,label:se.RGBlabel},label:"r",value:Ne.r,onChange:ce}),D.default.createElement(Q.EditableInput,{style:{wrap:se.RGBwrap,input:se.RGBinput,label:se.RGBlabel},label:"g",value:Ne.g,onChange:ce}),D.default.createElement(Q.EditableInput,{style:{wrap:se.RGBwrap,input:se.RGBinput,label:se.RGBlabel},label:"b",value:Ne.b,onChange:ce}),D.default.createElement("div",{style:se.divider}),D.default.createElement(Q.EditableInput,{style:{wrap:se.HEXwrap,input:se.HEXinput,label:se.HEXlabel},label:"#",value:be.replace("#",""),onChange:ce}),D.default.createElement("div",{style:se.fieldSymbols},D.default.createElement("div",{style:se.symbol},"\xB0"),D.default.createElement("div",{style:se.symbol},"%"),D.default.createElement("div",{style:se.symbol},"%")))};L.default=oe},40670:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopPointerCircle=void 0;var j=M(67294),D=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var ee=L.PhotoshopPointerCircle=function(){var ue=(0,z.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return D.default.createElement("div",{style:ue.pointer},D.default.createElement("div",{style:ue.left},D.default.createElement("div",{style:ue.leftInside})),D.default.createElement("div",{style:ue.right},D.default.createElement("div",{style:ue.rightInside})))};L.default=ee},31804:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopPointerCircle=void 0;var j=M(67294),D=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var ee=L.PhotoshopPointerCircle=function(ue){var oe=ue.hsl,ie=(0,z.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":oe.l>.5});return D.default.createElement("div",{style:ie.picker})};L.default=ee},29628:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.PhotoshopPreviews=void 0;var j=M(67294),D=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var ee=L.PhotoshopPreviews=function(ue){var oe=ue.rgb,ie=ue.currentColor,ne=(0,z.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+oe.r+","+oe.g+", "+oe.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:ie,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return D.default.createElement("div",null,D.default.createElement("div",{style:ne.label},"new"),D.default.createElement("div",{style:ne.swatches},D.default.createElement("div",{style:ne.new}),D.default.createElement("div",{style:ne.current})),D.default.createElement("div",{style:ne.label},"current"))};L.default=ee},89753:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Sketch=void 0;var j=Object.assign||function(ce){for(var fe=1;fe<arguments.length;fe++){var we=arguments[fe];for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&(ce[pe]=we[pe])}return ce},D=M(67294),J=be(D),z=M(45697),Z=be(z),ee=M(79941),Q=be(ee),ue=M(82492),oe=be(ue),ie=M(1150),ne=M(24530),he=be(ne),Ne=M(13067),le=be(Ne);function be(ce){return ce&&ce.__esModule?ce:{default:ce}}var se=L.Sketch=function(fe){var we=fe.width,pe=fe.rgb,Ee=fe.hex,it=fe.hsv,G=fe.hsl,Be=fe.onChange,Ke=fe.onSwatchHover,dt=fe.disableAlpha,jt=fe.presetColors,mn=fe.renderers,Pe=fe.styles,In=Pe===void 0?{}:Pe,hn=fe.className,vt=hn===void 0?"":hn,kt=(0,Q.default)((0,oe.default)({default:j({picker:{width:we,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+pe.r+","+pe.g+","+pe.b+","+pe.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},In),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},In),{disableAlpha:dt});return J.default.createElement("div",{style:kt.picker,className:"sketch-picker "+vt},J.default.createElement("div",{style:kt.saturation},J.default.createElement(ie.Saturation,{style:kt.Saturation,hsl:G,hsv:it,onChange:Be})),J.default.createElement("div",{style:kt.controls,className:"flexbox-fix"},J.default.createElement("div",{style:kt.sliders},J.default.createElement("div",{style:kt.hue},J.default.createElement(ie.Hue,{style:kt.Hue,hsl:G,onChange:Be})),J.default.createElement("div",{style:kt.alpha},J.default.createElement(ie.Alpha,{style:kt.Alpha,rgb:pe,hsl:G,renderers:mn,onChange:Be}))),J.default.createElement("div",{style:kt.color},J.default.createElement(ie.Checkboard,null),J.default.createElement("div",{style:kt.activeColor}))),J.default.createElement(he.default,{rgb:pe,hsl:G,hex:Ee,onChange:Be,disableAlpha:dt}),J.default.createElement(le.default,{colors:jt,onClick:Be,onSwatchHover:Ke}))};se.propTypes={disableAlpha:Z.default.bool,width:Z.default.oneOfType([Z.default.string,Z.default.number]),styles:Z.default.object},se.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},L.default=(0,ie.ColorWrap)(se)},24530:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SketchFields=void 0;var j=M(67294),D=ue(j),J=M(79941),z=ue(J),Z=M(64809),ee=ue(Z),Q=M(1150);function ue(ie){return ie&&ie.__esModule?ie:{default:ie}}var oe=L.SketchFields=function(ne){var he=ne.onChange,Ne=ne.rgb,le=ne.hsl,be=ne.hex,se=ne.disableAlpha,ce=(0,z.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:se}),fe=function(pe,Ee){pe.hex?ee.default.isValidHex(pe.hex)&&he({hex:pe.hex,source:"hex"},Ee):pe.r||pe.g||pe.b?he({r:pe.r||Ne.r,g:pe.g||Ne.g,b:pe.b||Ne.b,a:Ne.a,source:"rgb"},Ee):pe.a&&(pe.a<0?pe.a=0:pe.a>100&&(pe.a=100),pe.a/=100,he({h:le.h,s:le.s,l:le.l,a:pe.a,source:"rgb"},Ee))};return D.default.createElement("div",{style:ce.fields,className:"flexbox-fix"},D.default.createElement("div",{style:ce.double},D.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"hex",value:be.replace("#",""),onChange:fe})),D.default.createElement("div",{style:ce.single},D.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"r",value:Ne.r,onChange:fe,dragLabel:"true",dragMax:"255"})),D.default.createElement("div",{style:ce.single},D.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"g",value:Ne.g,onChange:fe,dragLabel:"true",dragMax:"255"})),D.default.createElement("div",{style:ce.single},D.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"b",value:Ne.b,onChange:fe,dragLabel:"true",dragMax:"255"})),D.default.createElement("div",{style:ce.alpha},D.default.createElement(Q.EditableInput,{style:{input:ce.input,label:ce.label},label:"a",value:Math.round(Ne.a*100),onChange:fe,dragLabel:"true",dragMax:"100"})))};L.default=oe},13067:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SketchPresetColors=void 0;var j=Object.assign||function(ne){for(var he=1;he<arguments.length;he++){var Ne=arguments[he];for(var le in Ne)Object.prototype.hasOwnProperty.call(Ne,le)&&(ne[le]=Ne[le])}return ne},D=M(67294),J=oe(D),z=M(45697),Z=oe(z),ee=M(79941),Q=oe(ee),ue=M(1150);function oe(ne){return ne&&ne.__esModule?ne:{default:ne}}var ie=L.SketchPresetColors=function(he){var Ne=he.colors,le=he.onClick,be=le===void 0?function(){}:le,se=he.onSwatchHover,ce=(0,Q.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!Ne||!Ne.length}),fe=function(pe,Ee){be({hex:pe,source:"hex"},Ee)};return J.default.createElement("div",{style:ce.colors,className:"flexbox-fix"},Ne.map(function(we){var pe=typeof we=="string"?{color:we}:we,Ee=""+pe.color+(pe.title||"");return J.default.createElement("div",{key:Ee,style:ce.swatchWrap},J.default.createElement(ue.Swatch,j({},pe,{style:ce.swatch,onClick:fe,onHover:se,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+pe.color}})))}))};ie.propTypes={colors:Z.default.arrayOf(Z.default.oneOfType([Z.default.string,Z.default.shape({color:Z.default.string,title:Z.default.string})])).isRequired},L.default=ie},49857:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Slider=void 0;var j=M(67294),D=le(j),J=M(45697),z=le(J),Z=M(79941),ee=le(Z),Q=M(82492),ue=le(Q),oe=M(1150),ie=M(6457),ne=le(ie),he=M(77792),Ne=le(he);function le(se){return se&&se.__esModule?se:{default:se}}var be=L.Slider=function(ce){var fe=ce.hsl,we=ce.onChange,pe=ce.pointer,Ee=ce.styles,it=Ee===void 0?{}:Ee,G=ce.className,Be=G===void 0?"":G,Ke=(0,ee.default)((0,ue.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},it));return D.default.createElement("div",{style:Ke.wrap||{},className:"slider-picker "+Be},D.default.createElement("div",{style:Ke.hue},D.default.createElement(oe.Hue,{style:Ke.Hue,hsl:fe,pointer:pe,onChange:we})),D.default.createElement("div",{style:Ke.swatches},D.default.createElement(ne.default,{hsl:fe,onClick:we})))};be.propTypes={styles:z.default.object},be.defaultProps={pointer:Ne.default,styles:{}},L.default=(0,oe.ColorWrap)(be)},77792:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SliderPointer=void 0;var j=M(67294),D=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var ee=L.SliderPointer=function(){var ue=(0,z.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return D.default.createElement("div",{style:ue.picker})};L.default=ee},64377:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SliderSwatch=void 0;var j=M(67294),D=Z(j),J=M(79941),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}var ee=L.SliderSwatch=function(ue){var oe=ue.hsl,ie=ue.offset,ne=ue.onClick,he=ne===void 0?function(){}:ne,Ne=ue.active,le=ue.first,be=ue.last,se=(0,z.default)({default:{swatch:{height:"12px",background:"hsl("+oe.h+", 50%, "+ie*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:Ne,first:le,last:be}),ce=function(we){return he({h:oe.h,s:.5,l:ie,source:"hsl"},we)};return D.default.createElement("div",{style:se.swatch,onClick:ce})};L.default=ee},6457:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SliderSwatches=void 0;var j=M(67294),D=Q(j),J=M(79941),z=Q(J),Z=M(64377),ee=Q(Z);function Q(oe){return oe&&oe.__esModule?oe:{default:oe}}var ue=L.SliderSwatches=function(ie){var ne=ie.onClick,he=ie.hsl,Ne=(0,z.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),le=.1;return D.default.createElement("div",{style:Ne.swatches},D.default.createElement("div",{style:Ne.swatch},D.default.createElement(ee.default,{hsl:he,offset:".80",active:Math.abs(he.l-.8)<le&&Math.abs(he.s-.5)<le,onClick:ne,first:!0})),D.default.createElement("div",{style:Ne.swatch},D.default.createElement(ee.default,{hsl:he,offset:".65",active:Math.abs(he.l-.65)<le&&Math.abs(he.s-.5)<le,onClick:ne})),D.default.createElement("div",{style:Ne.swatch},D.default.createElement(ee.default,{hsl:he,offset:".50",active:Math.abs(he.l-.5)<le&&Math.abs(he.s-.5)<le,onClick:ne})),D.default.createElement("div",{style:Ne.swatch},D.default.createElement(ee.default,{hsl:he,offset:".35",active:Math.abs(he.l-.35)<le&&Math.abs(he.s-.5)<le,onClick:ne})),D.default.createElement("div",{style:Ne.swatch},D.default.createElement(ee.default,{hsl:he,offset:".20",active:Math.abs(he.l-.2)<le&&Math.abs(he.s-.5)<le,onClick:ne,last:!0})),D.default.createElement("div",{style:Ne.clear}))};L.default=ue},93926:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Swatches=void 0;var j=M(67294),D=we(j),J=M(45697),z=we(J),Z=M(79941),ee=we(Z),Q=M(35161),ue=we(Q),oe=M(82492),ie=we(oe),ne=M(64809),he=we(ne),Ne=M(53893),le=fe(Ne),be=M(1150),se=M(23088),ce=we(se);function fe(Ee){if(Ee&&Ee.__esModule)return Ee;var it={};if(Ee!=null)for(var G in Ee)Object.prototype.hasOwnProperty.call(Ee,G)&&(it[G]=Ee[G]);return it.default=Ee,it}function we(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}var pe=L.Swatches=function(it){var G=it.width,Be=it.height,Ke=it.onChange,dt=it.onSwatchHover,jt=it.colors,mn=it.hex,Pe=it.styles,In=Pe===void 0?{}:Pe,hn=it.className,vt=hn===void 0?"":hn,kt=(0,ee.default)((0,ie.default)({default:{picker:{width:G,height:Be},overflow:{height:Be,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},In)),jn=function(gr,Nr){he.default.isValidHex(gr)&&Ke({hex:gr,source:"hex"},Nr)};return D.default.createElement("div",{style:kt.picker,className:"swatches-picker "+vt},D.default.createElement(be.Raised,null,D.default.createElement("div",{style:kt.overflow},D.default.createElement("div",{style:kt.body},(0,ue.default)(jt,function(Zt){return D.default.createElement(ce.default,{key:Zt.toString(),group:Zt,active:mn,onClick:jn,onSwatchHover:dt})}),D.default.createElement("div",{style:kt.clear})))))};pe.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),height:z.default.oneOfType([z.default.string,z.default.number]),colors:z.default.arrayOf(z.default.arrayOf(z.default.string)),styles:z.default.object},pe.defaultProps={width:320,height:240,colors:[[le.red[900],le.red[700],le.red[500],le.red[300],le.red[100]],[le.pink[900],le.pink[700],le.pink[500],le.pink[300],le.pink[100]],[le.purple[900],le.purple[700],le.purple[500],le.purple[300],le.purple[100]],[le.deepPurple[900],le.deepPurple[700],le.deepPurple[500],le.deepPurple[300],le.deepPurple[100]],[le.indigo[900],le.indigo[700],le.indigo[500],le.indigo[300],le.indigo[100]],[le.blue[900],le.blue[700],le.blue[500],le.blue[300],le.blue[100]],[le.lightBlue[900],le.lightBlue[700],le.lightBlue[500],le.lightBlue[300],le.lightBlue[100]],[le.cyan[900],le.cyan[700],le.cyan[500],le.cyan[300],le.cyan[100]],[le.teal[900],le.teal[700],le.teal[500],le.teal[300],le.teal[100]],["#194D33",le.green[700],le.green[500],le.green[300],le.green[100]],[le.lightGreen[900],le.lightGreen[700],le.lightGreen[500],le.lightGreen[300],le.lightGreen[100]],[le.lime[900],le.lime[700],le.lime[500],le.lime[300],le.lime[100]],[le.yellow[900],le.yellow[700],le.yellow[500],le.yellow[300],le.yellow[100]],[le.amber[900],le.amber[700],le.amber[500],le.amber[300],le.amber[100]],[le.orange[900],le.orange[700],le.orange[500],le.orange[300],le.orange[100]],[le.deepOrange[900],le.deepOrange[700],le.deepOrange[500],le.deepOrange[300],le.deepOrange[100]],[le.brown[900],le.brown[700],le.brown[500],le.brown[300],le.brown[100]],[le.blueGrey[900],le.blueGrey[700],le.blueGrey[500],le.blueGrey[300],le.blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},L.default=(0,be.ColorWrap)(pe)},85638:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SwatchesColor=void 0;var j=M(67294),D=ie(j),J=M(79941),z=ie(J),Z=M(64809),ee=ie(Z),Q=M(1150),ue=M(70597),oe=ie(ue);function ie(he){return he&&he.__esModule?he:{default:he}}var ne=L.SwatchesColor=function(Ne){var le=Ne.color,be=Ne.onClick,se=be===void 0?function(){}:be,ce=Ne.onSwatchHover,fe=Ne.first,we=Ne.last,pe=Ne.active,Ee=(0,z.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:le,marginBottom:"1px"},check:{color:ee.default.getContrastingColor(le),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:fe,last:we,active:pe,"color-#FFFFFF":le==="#FFFFFF",transparent:le==="transparent"});return D.default.createElement(Q.Swatch,{color:le,style:Ee.color,onClick:se,onHover:ce,focusStyle:{boxShadow:"0 0 4px "+le}},D.default.createElement("div",{style:Ee.check},D.default.createElement(oe.default,null)))};L.default=ne},23088:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SwatchesGroup=void 0;var j=M(67294),D=oe(j),J=M(79941),z=oe(J),Z=M(35161),ee=oe(Z),Q=M(85638),ue=oe(Q);function oe(ne){return ne&&ne.__esModule?ne:{default:ne}}var ie=L.SwatchesGroup=function(he){var Ne=he.onClick,le=he.onSwatchHover,be=he.group,se=he.active,ce=(0,z.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return D.default.createElement("div",{style:ce.group},(0,ee.default)(be,function(fe,we){return D.default.createElement(ue.default,{key:fe,color:fe,active:fe.toLowerCase()===se,first:we===0,last:we===be.length-1,onClick:Ne,onSwatchHover:le})}))};L.default=ie},64503:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Twitter=void 0;var j=M(67294),D=le(j),J=M(45697),z=le(J),Z=M(79941),ee=le(Z),Q=M(35161),ue=le(Q),oe=M(82492),ie=le(oe),ne=M(64809),he=le(ne),Ne=M(1150);function le(se){return se&&se.__esModule?se:{default:se}}var be=L.Twitter=function(ce){var fe=ce.onChange,we=ce.onSwatchHover,pe=ce.hex,Ee=ce.colors,it=ce.width,G=ce.triangle,Be=ce.styles,Ke=Be===void 0?{}:Be,dt=ce.className,jt=dt===void 0?"":dt,mn=(0,ee.default)((0,ie.default)({default:{card:{width:it,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},Ke),{"hide-triangle":G==="hide","top-left-triangle":G==="top-left","top-right-triangle":G==="top-right"}),Pe=function(hn,vt){he.default.isValidHex(hn)&&fe({hex:hn,source:"hex"},vt)};return D.default.createElement("div",{style:mn.card,className:"twitter-picker "+jt},D.default.createElement("div",{style:mn.triangleShadow}),D.default.createElement("div",{style:mn.triangle}),D.default.createElement("div",{style:mn.body},(0,ue.default)(Ee,function(In,hn){return D.default.createElement(Ne.Swatch,{key:hn,color:In,hex:In,style:mn.swatch,onClick:Pe,onHover:we,focusStyle:{boxShadow:"0 0 4px "+In}})}),D.default.createElement("div",{style:mn.hash},"#"),D.default.createElement(Ne.EditableInput,{style:{input:mn.input},value:pe.replace("#",""),onChange:Pe}),D.default.createElement("div",{style:mn.clear})))};be.propTypes={width:z.default.oneOfType([z.default.string,z.default.number]),triangle:z.default.oneOf(["hide","top-left","top-right"]),colors:z.default.arrayOf(z.default.string),styles:z.default.object},be.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},L.default=(0,Ne.ColorWrap)(be)},66713:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M=L.calculateChange=function(D,J,z,Z,ee){D.preventDefault();var Q=ee.clientWidth,ue=ee.clientHeight,oe=typeof D.pageX=="number"?D.pageX:D.touches[0].pageX,ie=typeof D.pageY=="number"?D.pageY:D.touches[0].pageY,ne=oe-(ee.getBoundingClientRect().left+window.pageXOffset),he=ie-(ee.getBoundingClientRect().top+window.pageYOffset);if(z==="vertical"){var Ne=void 0;if(he<0?Ne=0:he>ue?Ne=1:Ne=Math.round(he*100/ue)/100,J.a!==Ne)return{h:J.h,s:J.s,l:J.l,a:Ne,source:"rgb"}}else{var le=void 0;if(ne<0?le=0:ne>Q?le=1:le=Math.round(ne*100/Q)/100,Z!==le)return{h:J.h,s:J.s,l:J.l,a:le,source:"rgb"}}return null}},45704:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M={},j=L.render=function(z,Z,ee,Q){if(typeof document=="undefined"&&!Q)return null;var ue=Q?new Q:document.createElement("canvas");ue.width=ee*2,ue.height=ee*2;var oe=ue.getContext("2d");return oe?(oe.fillStyle=z,oe.fillRect(0,0,ue.width,ue.height),oe.fillStyle=Z,oe.fillRect(0,0,ee,ee),oe.translate(ee,ee),oe.fillRect(0,0,ee,ee),ue.toDataURL()):null},D=L.get=function(z,Z,ee,Q){var ue=z+"-"+Z+"-"+ee+(Q?"-server":"");if(M[ue])return M[ue];var oe=j(z,Z,ee,Q);return M[ue]=oe,oe}},64809:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.red=void 0;var j=M(66073),D=Z(j),J=M(68207),z=Z(J);function Z(Q){return Q&&Q.__esModule?Q:{default:Q}}L.default={simpleCheckForValidColor:function(ue){var oe=["r","g","b","a","h","s","l","v"],ie=0,ne=0;return(0,D.default)(oe,function(he){if(ue[he]&&(ie+=1,isNaN(ue[he])||(ne+=1),he==="s"||he==="l")){var Ne=/^\d+%$/;Ne.test(ue[he])&&(ne+=1)}}),ie===ne?ue:!1},toState:function(ue,oe){var ie=ue.hex?(0,z.default)(ue.hex):(0,z.default)(ue),ne=ie.toHsl(),he=ie.toHsv(),Ne=ie.toRgb(),le=ie.toHex();ne.s===0&&(ne.h=oe||0,he.h=oe||0);var be=le==="000000"&&Ne.a===0;return{hsl:ne,hex:be?"transparent":"#"+le,rgb:Ne,hsv:he,oldHue:ue.h||oe||ne.h,source:ue.source}},isValidHex:function(ue){var oe=String(ue).charAt(0)==="#"?1:0;return ue.length!==4+oe&&ue.length<7+oe&&(0,z.default)(ue).isValid()},getContrastingColor:function(ue){if(!ue)return"#fff";var oe=this.toState(ue);if(oe.hex==="transparent")return"rgba(0,0,0,0.4)";var ie=(oe.rgb.r*299+oe.rgb.g*587+oe.rgb.b*114)/1e3;return ie>=128?"#000":"#fff"}};var ee=L.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},33716:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M=L.calculateChange=function(D,J,z,Z){D.preventDefault();var ee=Z.clientWidth,Q=Z.clientHeight,ue=typeof D.pageX=="number"?D.pageX:D.touches[0].pageX,oe=typeof D.pageY=="number"?D.pageY:D.touches[0].pageY,ie=ue-(Z.getBoundingClientRect().left+window.pageXOffset),ne=oe-(Z.getBoundingClientRect().top+window.pageYOffset);if(J==="vertical"){var he=void 0;if(ne<0)he=359;else if(ne>Q)he=0;else{var Ne=-(ne*100/Q)+100;he=360*Ne/100}if(z.h!==he)return{h:he,s:z.s,l:z.l,a:z.a,source:"rgb"}}else{var le=void 0;if(ie<0)le=0;else if(ie>ee)le=359;else{var be=ie*100/ee;le=360*be/100}if(z.h!==le)return{h:le,s:z.s,l:z.l,a:z.a,source:"rgb"}}return null}},82538:function(De,L,M){"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.handleFocus=void 0;var j=Object.assign||function(ie){for(var ne=1;ne<arguments.length;ne++){var he=arguments[ne];for(var Ne in he)Object.prototype.hasOwnProperty.call(he,Ne)&&(ie[Ne]=he[Ne])}return ie},D=function(){function ie(ne,he){for(var Ne=0;Ne<he.length;Ne++){var le=he[Ne];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(ne,le.key,le)}}return function(ne,he,Ne){return he&&ie(ne.prototype,he),Ne&&ie(ne,Ne),ne}}(),J=M(67294),z=Z(J);function Z(ie){return ie&&ie.__esModule?ie:{default:ie}}function ee(ie,ne){if(!(ie instanceof ne))throw new TypeError("Cannot call a class as a function")}function Q(ie,ne){if(!ie)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne&&(typeof ne=="object"||typeof ne=="function")?ne:ie}function ue(ie,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ne);ie.prototype=Object.create(ne&&ne.prototype,{constructor:{value:ie,enumerable:!1,writable:!0,configurable:!0}}),ne&&(Object.setPrototypeOf?Object.setPrototypeOf(ie,ne):ie.__proto__=ne)}var oe=L.handleFocus=function(ne){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(Ne){ue(le,Ne);function le(){var be,se,ce,fe;ee(this,le);for(var we=arguments.length,pe=Array(we),Ee=0;Ee<we;Ee++)pe[Ee]=arguments[Ee];return fe=(se=(ce=Q(this,(be=le.__proto__||Object.getPrototypeOf(le)).call.apply(be,[this].concat(pe))),ce),ce.state={focus:!1},ce.handleFocus=function(){return ce.setState({focus:!0})},ce.handleBlur=function(){return ce.setState({focus:!1})},se),Q(ce,fe)}return D(le,[{key:"render",value:function(){return z.default.createElement(he,{onFocus:this.handleFocus,onBlur:this.handleBlur},z.default.createElement(ne,j({},this.props,this.state)))}}]),le}(z.default.Component)}},37599:function(De,L){"use strict";Object.defineProperty(L,"__esModule",{value:!0});var M=L.calculateChange=function(D,J,z){D.preventDefault();var Z=z.getBoundingClientRect(),ee=Z.width,Q=Z.height,ue=typeof D.pageX=="number"?D.pageX:D.touches[0].pageX,oe=typeof D.pageY=="number"?D.pageY:D.touches[0].pageY,ie=ue-(z.getBoundingClientRect().left+window.pageXOffset),ne=oe-(z.getBoundingClientRect().top+window.pageYOffset);ie<0?ie=0:ie>ee?ie=ee:ne<0?ne=0:ne>Q&&(ne=Q);var he=ie*100/ee,Ne=-(ne*100/Q)+100;return{h:J.h,s:he,v:Ne,a:J.a,source:"rgb"}}},24198:function(De,L,M){"use strict";var j;j={value:!0},j=j=j=j=L.xS=j=j=j=j=j=j=j=j=j=j=void 0;var D=M(47743);j={enumerable:!0,get:function(){return ce(D).default}};var J=M(88858);j={enumerable:!0,get:function(){return ce(J).default}};var z=M(9703);j={enumerable:!0,get:function(){return ce(z).default}};var Z=M(21847);j={enumerable:!0,get:function(){return ce(Z).default}};var ee=M(99766);j={enumerable:!0,get:function(){return ce(ee).default}};var Q=M(19700);j={enumerable:!0,get:function(){return ce(Q).default}};var ue=M(10565);j={enumerable:!0,get:function(){return ce(ue).default}};var oe=M(66142);j={enumerable:!0,get:function(){return ce(oe).default}};var ie=M(33165);j={enumerable:!0,get:function(){return ce(ie).default}};var ne=M(89753);Object.defineProperty(L,"xS",{enumerable:!0,get:function(){return ce(ne).default}});var he=M(49857);j={enumerable:!0,get:function(){return ce(he).default}};var Ne=M(93926);j={enumerable:!0,get:function(){return ce(Ne).default}};var le=M(64503);j={enumerable:!0,get:function(){return ce(le).default}};var be=M(88288);j={enumerable:!0,get:function(){return ce(be).default}};var se=ce(Z);function ce(fe){return fe&&fe.__esModule?fe:{default:fe}}j=se.default},28660:function(De,L,M){var j=M(34155);var D;(function(J){(function(z){var Z=typeof M.g=="object"?M.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),ee=Q(J);typeof Z.Reflect=="undefined"?Z.Reflect=J:ee=Q(Z.Reflect,ee),z(ee);function Q(ue,oe){return function(ie,ne){typeof ue[ie]!="function"&&Object.defineProperty(ue,ie,{configurable:!0,writable:!0,value:ne}),oe&&oe(ie,ne)}}})(function(z){var Z=Object.prototype.hasOwnProperty,ee=typeof Symbol=="function",Q=ee&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",ue=ee&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",oe=typeof Object.create=="function",ie={__proto__:[]}instanceof Array,ne=!oe&&!ie,he={create:oe?function(){return Da(Object.create(null))}:ie?function(){return Da({__proto__:null})}:function(){return Da({})},has:ne?function(Nt,Yt){return Z.call(Nt,Yt)}:function(Nt,Yt){return Yt in Nt},get:ne?function(Nt,Yt){return Z.call(Nt,Yt)?Nt[Yt]:void 0}:function(Nt,Yt){return Nt[Yt]}},Ne=Object.getPrototypeOf(Function),le=typeof j=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",be=!le&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Pa(),se=!le&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ic(),ce=!le&&typeof WeakMap=="function"?WeakMap:Qo(),fe=new ce;function we(Nt,Yt,Pt,Kt){if(vr(Pt)){if(!Gr(Nt))throw new TypeError;if(!Oi(Yt))throw new TypeError;return Pe(Nt,Yt)}else{if(!Gr(Nt))throw new TypeError;if(!Xe(Yt))throw new TypeError;if(!Xe(Kt)&&!vr(Kt)&&!Le(Kt))throw new TypeError;return Le(Kt)&&(Kt=void 0),Pt=ri(Pt),In(Nt,Yt,Pt,Kt)}}z("decorate",we);function pe(Nt,Yt){function Pt(Kt,or){if(!Xe(Kt))throw new TypeError;if(!vr(or)&&!lo(or))throw new TypeError;gr(Nt,Yt,Kt,or)}return Pt}z("metadata",pe);function Ee(Nt,Yt,Pt,Kt){if(!Xe(Pt))throw new TypeError;return vr(Kt)||(Kt=ri(Kt)),gr(Nt,Yt,Pt,Kt)}z("defineMetadata",Ee);function it(Nt,Yt,Pt){if(!Xe(Yt))throw new TypeError;return vr(Pt)||(Pt=ri(Pt)),vt(Nt,Yt,Pt)}z("hasMetadata",it);function G(Nt,Yt,Pt){if(!Xe(Yt))throw new TypeError;return vr(Pt)||(Pt=ri(Pt)),kt(Nt,Yt,Pt)}z("hasOwnMetadata",G);function Be(Nt,Yt,Pt){if(!Xe(Yt))throw new TypeError;return vr(Pt)||(Pt=ri(Pt)),jn(Nt,Yt,Pt)}z("getMetadata",Be);function Ke(Nt,Yt,Pt){if(!Xe(Yt))throw new TypeError;return vr(Pt)||(Pt=ri(Pt)),Zt(Nt,Yt,Pt)}z("getOwnMetadata",Ke);function dt(Nt,Yt){if(!Xe(Nt))throw new TypeError;return vr(Yt)||(Yt=ri(Yt)),Nr(Nt,Yt)}z("getMetadataKeys",dt);function jt(Nt,Yt){if(!Xe(Nt))throw new TypeError;return vr(Yt)||(Yt=ri(Yt)),Qn(Nt,Yt)}z("getOwnMetadataKeys",jt);function mn(Nt,Yt,Pt){if(!Xe(Yt))throw new TypeError;vr(Pt)||(Pt=ri(Pt));var Kt=hn(Yt,Pt,!1);if(vr(Kt)||!Kt.delete(Nt))return!1;if(Kt.size>0)return!0;var or=fe.get(Yt);return or.delete(Pt),or.size>0||fe.delete(Yt),!0}z("deleteMetadata",mn);function Pe(Nt,Yt){for(var Pt=Nt.length-1;Pt>=0;--Pt){var Kt=Nt[Pt],or=Kt(Yt);if(!vr(or)&&!Le(or)){if(!Oi(or))throw new TypeError;Yt=or}}return Yt}function In(Nt,Yt,Pt,Kt){for(var or=Nt.length-1;or>=0;--or){var $i=Nt[or],Xr=$i(Yt,Pt,Kt);if(!vr(Xr)&&!Le(Xr)){if(!Xe(Xr))throw new TypeError;Kt=Xr}}return Kt}function hn(Nt,Yt,Pt){var Kt=fe.get(Nt);if(vr(Kt)){if(!Pt)return;Kt=new be,fe.set(Nt,Kt)}var or=Kt.get(Yt);if(vr(or)){if(!Pt)return;or=new be,Kt.set(Yt,or)}return or}function vt(Nt,Yt,Pt){var Kt=kt(Nt,Yt,Pt);if(Kt)return!0;var or=wr(Yt);return Le(or)?!1:vt(Nt,or,Pt)}function kt(Nt,Yt,Pt){var Kt=hn(Yt,Pt,!1);return vr(Kt)?!1:Fn(Kt.has(Nt))}function jn(Nt,Yt,Pt){var Kt=kt(Nt,Yt,Pt);if(Kt)return Zt(Nt,Yt,Pt);var or=wr(Yt);if(!Le(or))return jn(Nt,or,Pt)}function Zt(Nt,Yt,Pt){var Kt=hn(Yt,Pt,!1);if(!vr(Kt))return Kt.get(Nt)}function gr(Nt,Yt,Pt,Kt){var or=hn(Pt,Kt,!0);or.set(Nt,Yt)}function Nr(Nt,Yt){var Pt=Qn(Nt,Yt),Kt=wr(Nt);if(Kt===null)return Pt;var or=Nr(Kt,Yt);if(or.length<=0)return Pt;if(Pt.length<=0)return or;for(var $i=new se,Xr=[],ni=0,Ir=Pt;ni<Ir.length;ni++){var yi=Ir[ni],ii=$i.has(yi);ii||($i.add(yi),Xr.push(yi))}for(var zo=0,ul=or;zo<ul.length;zo++){var yi=ul[zo],ii=$i.has(yi);ii||($i.add(yi),Xr.push(yi))}return Xr}function Qn(Nt,Yt){var Pt=[],Kt=hn(Nt,Yt,!1);if(vr(Kt))return Pt;for(var or=Kt.keys(),$i=H(or),Xr=0;;){var ni=Te($i);if(!ni)return Pt.length=Xr,Pt;var Ir=sf(ni);try{Pt[Xr]=Ir}catch(yi){try{cl($i)}finally{throw yi}}Xr++}}function Hr(Nt){if(Nt===null)return 1;switch(typeof Nt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Nt===null?1:6;default:return 6}}function vr(Nt){return Nt===void 0}function Le(Nt){return Nt===null}function Ve(Nt){return typeof Nt=="symbol"}function Xe(Nt){return typeof Nt=="object"?Nt!==null:typeof Nt=="function"}function Vt(Nt,Yt){switch(Hr(Nt)){case 0:return Nt;case 1:return Nt;case 2:return Nt;case 3:return Nt;case 4:return Nt;case 5:return Nt}var Pt=Yt===3?"string":Yt===5?"number":"default",Kt=F(Nt,Q);if(Kt!==void 0){var or=Kt.call(Nt,Pt);if(Xe(or))throw new TypeError;return or}return Rn(Nt,Pt==="default"?"number":Pt)}function Rn(Nt,Yt){if(Yt==="string"){var Pt=Nt.toString;if(ti(Pt)){var Kt=Pt.call(Nt);if(!Xe(Kt))return Kt}var or=Nt.valueOf;if(ti(or)){var Kt=or.call(Nt);if(!Xe(Kt))return Kt}}else{var or=Nt.valueOf;if(ti(or)){var Kt=or.call(Nt);if(!Xe(Kt))return Kt}var $i=Nt.toString;if(ti($i)){var Kt=$i.call(Nt);if(!Xe(Kt))return Kt}}throw new TypeError}function Fn(Nt){return!!Nt}function _r(Nt){return""+Nt}function ri(Nt){var Yt=Vt(Nt,3);return Ve(Yt)?Yt:_r(Yt)}function Gr(Nt){return Array.isArray?Array.isArray(Nt):Nt instanceof Object?Nt instanceof Array:Object.prototype.toString.call(Nt)==="[object Array]"}function ti(Nt){return typeof Nt=="function"}function Oi(Nt){return typeof Nt=="function"}function lo(Nt){switch(Hr(Nt)){case 3:return!0;case 4:return!0;default:return!1}}function F(Nt,Yt){var Pt=Nt[Yt];if(Pt!=null){if(!ti(Pt))throw new TypeError;return Pt}}function H(Nt){var Yt=F(Nt,ue);if(!ti(Yt))throw new TypeError;var Pt=Yt.call(Nt);if(!Xe(Pt))throw new TypeError;return Pt}function sf(Nt){return Nt.value}function Te(Nt){var Yt=Nt.next();return Yt.done?!1:Yt}function cl(Nt){var Yt=Nt.return;Yt&&Yt.call(Nt)}function wr(Nt){var Yt=Object.getPrototypeOf(Nt);if(typeof Nt!="function"||Nt===Ne||Yt!==Ne)return Yt;var Pt=Nt.prototype,Kt=Pt&&Object.getPrototypeOf(Pt);if(Kt==null||Kt===Object.prototype)return Yt;var or=Kt.constructor;return typeof or!="function"||or===Nt?Yt:or}function Pa(){var Nt={},Yt=[],Pt=function(){function Xr(ni,Ir,yi){this._index=0,this._keys=ni,this._values=Ir,this._selector=yi}return Xr.prototype["@@iterator"]=function(){return this},Xr.prototype[ue]=function(){return this},Xr.prototype.next=function(){var ni=this._index;if(ni>=0&&ni<this._keys.length){var Ir=this._selector(this._keys[ni],this._values[ni]);return ni+1>=this._keys.length?(this._index=-1,this._keys=Yt,this._values=Yt):this._index++,{value:Ir,done:!1}}return{value:void 0,done:!0}},Xr.prototype.throw=function(ni){throw this._index>=0&&(this._index=-1,this._keys=Yt,this._values=Yt),ni},Xr.prototype.return=function(ni){return this._index>=0&&(this._index=-1,this._keys=Yt,this._values=Yt),{value:ni,done:!0}},Xr}();return function(){function Xr(){this._keys=[],this._values=[],this._cacheKey=Nt,this._cacheIndex=-2}return Object.defineProperty(Xr.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Xr.prototype.has=function(ni){return this._find(ni,!1)>=0},Xr.prototype.get=function(ni){var Ir=this._find(ni,!1);return Ir>=0?this._values[Ir]:void 0},Xr.prototype.set=function(ni,Ir){var yi=this._find(ni,!0);return this._values[yi]=Ir,this},Xr.prototype.delete=function(ni){var Ir=this._find(ni,!1);if(Ir>=0){for(var yi=this._keys.length,ii=Ir+1;ii<yi;ii++)this._keys[ii-1]=this._keys[ii],this._values[ii-1]=this._values[ii];return this._keys.length--,this._values.length--,ni===this._cacheKey&&(this._cacheKey=Nt,this._cacheIndex=-2),!0}return!1},Xr.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Nt,this._cacheIndex=-2},Xr.prototype.keys=function(){return new Pt(this._keys,this._values,Kt)},Xr.prototype.values=function(){return new Pt(this._keys,this._values,or)},Xr.prototype.entries=function(){return new Pt(this._keys,this._values,$i)},Xr.prototype["@@iterator"]=function(){return this.entries()},Xr.prototype[ue]=function(){return this.entries()},Xr.prototype._find=function(ni,Ir){return this._cacheKey!==ni&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=ni)),this._cacheIndex<0&&Ir&&(this._cacheIndex=this._keys.length,this._keys.push(ni),this._values.push(void 0)),this._cacheIndex},Xr}();function Kt(Xr,ni){return Xr}function or(Xr,ni){return ni}function $i(Xr,ni){return[Xr,ni]}}function ic(){return function(){function Nt(){this._map=new be}return Object.defineProperty(Nt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Nt.prototype.has=function(Yt){return this._map.has(Yt)},Nt.prototype.add=function(Yt){return this._map.set(Yt,Yt),this},Nt.prototype.delete=function(Yt){return this._map.delete(Yt)},Nt.prototype.clear=function(){this._map.clear()},Nt.prototype.keys=function(){return this._map.keys()},Nt.prototype.values=function(){return this._map.values()},Nt.prototype.entries=function(){return this._map.entries()},Nt.prototype["@@iterator"]=function(){return this.keys()},Nt.prototype[ue]=function(){return this.keys()},Nt}()}function Qo(){var Nt=16,Yt=he.create(),Pt=Kt();return function(){function Ir(){this._key=Kt()}return Ir.prototype.has=function(yi){var ii=or(yi,!1);return ii!==void 0?he.has(ii,this._key):!1},Ir.prototype.get=function(yi){var ii=or(yi,!1);return ii!==void 0?he.get(ii,this._key):void 0},Ir.prototype.set=function(yi,ii){var zo=or(yi,!0);return zo[this._key]=ii,this},Ir.prototype.delete=function(yi){var ii=or(yi,!1);return ii!==void 0?delete ii[this._key]:!1},Ir.prototype.clear=function(){this._key=Kt()},Ir}();function Kt(){var Ir;do Ir="@@WeakMap@@"+ni();while(he.has(Yt,Ir));return Yt[Ir]=!0,Ir}function or(Ir,yi){if(!Z.call(Ir,Pt)){if(!yi)return;Object.defineProperty(Ir,Pt,{value:he.create()})}return Ir[Pt]}function $i(Ir,yi){for(var ii=0;ii<yi;++ii)Ir[ii]=Math.random()*255|0;return Ir}function Xr(Ir){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Ir)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Ir)):$i(new Uint8Array(Ir),Ir):$i(new Array(Ir),Ir)}function ni(){var Ir=Xr(Nt);Ir[6]=Ir[6]&79|64,Ir[8]=Ir[8]&191|128;for(var yi="",ii=0;ii<Nt;++ii){var zo=Ir[ii];(ii===4||ii===6||ii===8)&&(yi+="-"),zo<16&&(yi+="0"),yi+=zo.toString(16).toLowerCase()}return yi}}function Da(Nt){return Nt.__=void 0,delete Nt.__,Nt}})})(D||(D={}))},81550:function(De){(function(L,M){De.exports=M()})(this,function(){"use strict";var L=function(K){return K instanceof Uint8Array||K instanceof Uint16Array||K instanceof Uint32Array||K instanceof Int8Array||K instanceof Int16Array||K instanceof Int32Array||K instanceof Float32Array||K instanceof Float64Array||K instanceof Uint8ClampedArray},M=function(K,Me){for(var He=Object.keys(Me),Tt=0;Tt<He.length;++Tt)K[He[Tt]]=Me[He[Tt]];return K},j=`
`;function D(K){return typeof atob!="undefined"?atob(K):"base64:"+K}function J(K){var Me=new Error("(regl) "+K);throw console.error(Me),Me}function z(K,Me){K||J(Me)}function Z(K){return K?": "+K:""}function ee(K,Me,He){K in Me||J("unknown parameter ("+K+")"+Z(He)+". possible values: "+Object.keys(Me).join())}function Q(K,Me){L(K)||J("invalid parameter type"+Z(Me)+". must be a typed array")}function ue(K,Me){switch(Me){case"number":return typeof K=="number";case"object":return typeof K=="object";case"string":return typeof K=="string";case"boolean":return typeof K=="boolean";case"function":return typeof K=="function";case"undefined":return typeof K=="undefined";case"symbol":return typeof K=="symbol"}}function oe(K,Me,He){ue(K,Me)||J("invalid parameter type"+Z(He)+". expected "+Me+", got "+typeof K)}function ie(K,Me){K>=0&&(K|0)===K||J("invalid parameter type, ("+K+")"+Z(Me)+". must be a nonnegative integer")}function ne(K,Me,He){Me.indexOf(K)<0&&J("invalid value"+Z(He)+". must be one of: "+Me)}var he=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function Ne(K){Object.keys(K).forEach(function(Me){he.indexOf(Me)<0&&J('invalid regl constructor argument "'+Me+'". must be one of '+he)})}function le(K,Me){for(K=K+"";K.length<Me;)K=" "+K;return K}function be(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function se(K,Me){this.number=K,this.line=Me,this.errors=[]}function ce(K,Me,He){this.file=K,this.line=Me,this.message=He}function fe(){var K=new Error,Me=(K.stack||K).toString(),He=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Me);if(He)return He[1];var Tt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Me);return Tt?Tt[1]:"unknown"}function we(){var K=new Error,Me=(K.stack||K).toString(),He=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Me);if(He)return He[1];var Tt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Me);return Tt?Tt[1]:"unknown"}function pe(K,Me){var He=K.split(`
`),Tt=1,yt=0,St={unknown:new be,0:new be};St.unknown.name=St[0].name=Me||fe(),St.unknown.lines.push(new se(0,""));for(var Lt=0;Lt<He.length;++Lt){var on=He[Lt],gn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(on);if(gn)switch(gn[1]){case"line":var pn=/(\d+)(\s+\d+)?/.exec(gn[2]);pn&&(Tt=pn[1]|0,pn[2]&&(yt=pn[2]|0,yt in St||(St[yt]=new be)));break;case"define":var vn=/SHADER_NAME(_B64)?\s+(.*)$/.exec(gn[2]);vn&&(St[yt].name=vn[1]?D(vn[2]):vn[2]);break}St[yt].lines.push(new se(Tt++,on))}return Object.keys(St).forEach(function(un){var Bn=St[un];Bn.lines.forEach(function(fn){Bn.index[fn.number]=fn})}),St}function Ee(K){var Me=[];return K.split(`
`).forEach(function(He){if(!(He.length<5)){var Tt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(He);Tt?Me.push(new ce(Tt[1]|0,Tt[2]|0,Tt[3].trim())):He.length>0&&Me.push(new ce("unknown",0,He))}}),Me}function it(K,Me){Me.forEach(function(He){var Tt=K[He.file];if(Tt){var yt=Tt.index[He.line];if(yt){yt.errors.push(He),Tt.hasErrors=!0;return}}K.unknown.hasErrors=!0,K.unknown.lines[0].errors.push(He)})}function G(K,Me,He,Tt,yt){if(!K.getShaderParameter(Me,K.COMPILE_STATUS)){var St=K.getShaderInfoLog(Me),Lt=Tt===K.FRAGMENT_SHADER?"fragment":"vertex";In(He,"string",Lt+" shader source must be a string",yt);var on=pe(He,yt),gn=Ee(St);it(on,gn),Object.keys(on).forEach(function(pn){var vn=on[pn];if(!vn.hasErrors)return;var un=[""],Bn=[""];function fn(Mn,mt){un.push(Mn),Bn.push(mt||"")}fn("file number "+pn+": "+vn.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),vn.lines.forEach(function(Mn){if(Mn.errors.length>0){fn(le(Mn.number,4)+"|  ","background-color:yellow; font-weight:bold"),fn(Mn.line+j,"color:red; background-color:yellow; font-weight:bold");var mt=0;Mn.errors.forEach(function(Ft){var yn=Ft.message,Xn=/^\s*'(.*)'\s*:\s*(.*)$/.exec(yn);if(Xn){var sn=Xn[1];switch(yn=Xn[2],sn){case"assign":sn="=";break}mt=Math.max(Mn.line.indexOf(sn,mt),0)}else mt=0;fn(le("| ",6)),fn(le("^^^",mt+3)+j,"font-weight:bold"),fn(le("| ",6)),fn(yn+j,"font-weight:bold")}),fn(le("| ",6)+j)}else fn(le(Mn.number,4)+"|  "),fn(Mn.line+j,"color:red")}),typeof document!="undefined"&&!window.chrome?(Bn[0]=un.join("%c"),console.log.apply(console,Bn)):console.log(un.join(""))}),z.raise("Error compiling "+Lt+" shader, "+on[0].name)}}function Be(K,Me,He,Tt,yt){if(!K.getProgramParameter(Me,K.LINK_STATUS)){var St=K.getProgramInfoLog(Me),Lt=pe(He,yt),on=pe(Tt,yt),gn='Error linking program with vertex shader, "'+on[0].name+'", and fragment shader "'+Lt[0].name+'"';typeof document!="undefined"?console.log("%c"+gn+j+"%c"+St,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(gn+j+St),z.raise(gn)}}function Ke(K){K._commandRef=fe()}function dt(K,Me,He,Tt){Ke(K);function yt(gn){return gn?Tt.id(gn):0}K._fragId=yt(K.static.frag),K._vertId=yt(K.static.vert);function St(gn,pn){Object.keys(pn).forEach(function(vn){gn[Tt.id(vn)]=!0})}var Lt=K._uniformSet={};St(Lt,Me.static),St(Lt,Me.dynamic);var on=K._attributeSet={};St(on,He.static),St(on,He.dynamic),K._hasCount="count"in K.static||"count"in K.dynamic||"elements"in K.static||"elements"in K.dynamic}function jt(K,Me){var He=we();J(K+" in command "+(Me||fe())+(He==="unknown"?"":" called from "+He))}function mn(K,Me,He){K||jt(Me,He||fe())}function Pe(K,Me,He,Tt){K in Me||jt("unknown parameter ("+K+")"+Z(He)+". possible values: "+Object.keys(Me).join(),Tt||fe())}function In(K,Me,He,Tt){ue(K,Me)||jt("invalid parameter type"+Z(He)+". expected "+Me+", got "+typeof K,Tt||fe())}function hn(K){K()}function vt(K,Me,He){K.texture?ne(K.texture._texture.internalformat,Me,"unsupported texture format for attachment"):ne(K.renderbuffer._renderbuffer.format,He,"unsupported renderbuffer format for attachment")}var kt=33071,jn=9728,Zt=9984,gr=9985,Nr=9986,Qn=9987,Hr=5120,vr=5121,Le=5122,Ve=5123,Xe=5124,Vt=5125,Rn=5126,Fn=32819,_r=32820,ri=33635,Gr=34042,ti=36193,Oi={};Oi[Hr]=Oi[vr]=1,Oi[Le]=Oi[Ve]=Oi[ti]=Oi[ri]=Oi[Fn]=Oi[_r]=2,Oi[Xe]=Oi[Vt]=Oi[Rn]=Oi[Gr]=4;function lo(K,Me){return K===_r||K===Fn||K===ri?2:K===Gr?4:Oi[K]*Me}function F(K){return!(K&K-1)&&!!K}function H(K,Me,He){var Tt,yt=Me.width,St=Me.height,Lt=Me.channels;z(yt>0&&yt<=He.maxTextureSize&&St>0&&St<=He.maxTextureSize,"invalid texture shape"),(K.wrapS!==kt||K.wrapT!==kt)&&z(F(yt)&&F(St),"incompatible wrap mode for texture, both width and height must be power of 2"),Me.mipmask===1?yt!==1&&St!==1&&z(K.minFilter!==Zt&&K.minFilter!==Nr&&K.minFilter!==gr&&K.minFilter!==Qn,"min filter requires mipmap"):(z(F(yt)&&F(St),"texture must be a square power of 2 to support mipmapping"),z(Me.mipmask===(yt<<1)-1,"missing or incomplete mipmap data")),Me.type===Rn&&(He.extensions.indexOf("oes_texture_float_linear")<0&&z(K.minFilter===jn&&K.magFilter===jn,"filter not supported, must enable oes_texture_float_linear"),z(!K.genMipmaps,"mipmap generation not supported with float textures"));var on=Me.images;for(Tt=0;Tt<16;++Tt)if(on[Tt]){var gn=yt>>Tt,pn=St>>Tt;z(Me.mipmask&1<<Tt,"missing mipmap data");var vn=on[Tt];if(z(vn.width===gn&&vn.height===pn,"invalid shape for mip images"),z(vn.format===Me.format&&vn.internalformat===Me.internalformat&&vn.type===Me.type,"incompatible type for mip image"),!vn.compressed)if(vn.data){var un=Math.ceil(lo(vn.type,Lt)*gn/vn.unpackAlignment)*vn.unpackAlignment;z(vn.data.byteLength===un*pn,"invalid data for image, buffer size is inconsistent with image format")}else vn.element||vn.copy}else K.genMipmaps||z((Me.mipmask&1<<Tt)===0,"extra mipmap data");Me.compressed&&z(!K.genMipmaps,"mipmap generation for compressed images not supported")}function sf(K,Me,He,Tt){var yt=K.width,St=K.height,Lt=K.channels;z(yt>0&&yt<=Tt.maxTextureSize&&St>0&&St<=Tt.maxTextureSize,"invalid texture shape"),z(yt===St,"cube map must be square"),z(Me.wrapS===kt&&Me.wrapT===kt,"wrap mode not supported by cube map");for(var on=0;on<He.length;++on){var gn=He[on];z(gn.width===yt&&gn.height===St,"inconsistent cube map face shape"),Me.genMipmaps&&(z(!gn.compressed,"can not generate mipmap for compressed textures"),z(gn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var pn=gn.images,vn=0;vn<16;++vn){var un=pn[vn];if(un){var Bn=yt>>vn,fn=St>>vn;z(gn.mipmask&1<<vn,"missing mipmap data"),z(un.width===Bn&&un.height===fn,"invalid shape for mip images"),z(un.format===K.format&&un.internalformat===K.internalformat&&un.type===K.type,"incompatible type for mip image"),un.compressed||(un.data?z(un.data.byteLength===Bn*fn*Math.max(lo(un.type,Lt),un.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):un.element||un.copy)}}}}var Te=M(z,{optional:hn,raise:J,commandRaise:jt,command:mn,parameter:ee,commandParameter:Pe,constructor:Ne,type:oe,commandType:In,isTypedArray:Q,nni:ie,oneOf:ne,shaderError:G,linkError:Be,callSite:we,saveCommandRef:Ke,saveDrawInfo:dt,framebufferFormat:vt,guessCommand:fe,texture2D:H,textureCube:sf}),cl=0,wr=0,Pa=5,ic=6;function Qo(K,Me){this.id=cl++,this.type=K,this.data=Me}function Da(K){return K.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Nt(K){if(K.length===0)return[];var Me=K.charAt(0),He=K.charAt(K.length-1);if(K.length>1&&Me===He&&(Me==='"'||Me==="'"))return['"'+Da(K.substr(1,K.length-2))+'"'];var Tt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(K);if(Tt)return Nt(K.substr(0,Tt.index)).concat(Nt(Tt[1])).concat(Nt(K.substr(Tt.index+Tt[0].length)));var yt=K.split(".");if(yt.length===1)return['"'+Da(K)+'"'];for(var St=[],Lt=0;Lt<yt.length;++Lt)St=St.concat(Nt(yt[Lt]));return St}function Yt(K){return"["+Nt(K).join("][")+"]"}function Pt(K,Me){return new Qo(K,Yt(Me+""))}function Kt(K){return typeof K=="function"&&!K._reglType||K instanceof Qo}function or(K,Me){if(typeof K=="function")return new Qo(wr,K);if(typeof K=="number"||typeof K=="boolean")return new Qo(Pa,K);if(Array.isArray(K))return new Qo(ic,K.map((He,Tt)=>or(He,Me+"["+Tt+"]")));if(K instanceof Qo)return K;Te(!1,"invalid option type in uniform "+Me)}var $i={DynamicVariable:Qo,define:Pt,isDynamic:Kt,unbox:or,accessor:Yt},Xr={next:typeof requestAnimationFrame=="function"?function(K){return requestAnimationFrame(K)}:function(K){return setTimeout(K,16)},cancel:typeof cancelAnimationFrame=="function"?function(K){return cancelAnimationFrame(K)}:clearTimeout},ni=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Ir(){var K={"":0},Me=[""];return{id:function(He){var Tt=K[He];return Tt||(Tt=K[He]=Me.length,Me.push(He),Tt)},str:function(He){return Me[He]}}}function yi(K,Me,He){var Tt=document.createElement("canvas");M(Tt.style,{border:0,margin:0,padding:0,top:0,left:0}),K.appendChild(Tt),K===document.body&&(Tt.style.position="absolute",M(K.style,{margin:0,padding:0}));function yt(){var on=window.innerWidth,gn=window.innerHeight;if(K!==document.body){var pn=K.getBoundingClientRect();on=pn.right-pn.left,gn=pn.bottom-pn.top}Tt.width=He*on,Tt.height=He*gn,M(Tt.style,{width:on+"px",height:gn+"px"})}var St;K!==document.body&&typeof ResizeObserver=="function"?(St=new ResizeObserver(function(){setTimeout(yt)}),St.observe(K)):window.addEventListener("resize",yt,!1);function Lt(){St?St.disconnect():window.removeEventListener("resize",yt),K.removeChild(Tt)}return yt(),{canvas:Tt,onDestroy:Lt}}function ii(K,Me){function He(Tt){try{return K.getContext(Tt,Me)}catch(yt){return null}}return He("webgl")||He("experimental-webgl")||He("webgl-experimental")}function zo(K){return typeof K.nodeName=="string"&&typeof K.appendChild=="function"&&typeof K.getBoundingClientRect=="function"}function ul(K){return typeof K.drawArrays=="function"||typeof K.drawElements=="function"}function wg(K){return typeof K=="string"?K.split():(Te(Array.isArray(K),"invalid extension array"),K)}function oc(K){return typeof K=="string"?(Te(typeof document!="undefined","not supported outside of DOM"),document.querySelector(K)):K}function sh(K){var Me=K||{},He,Tt,yt,St,Lt={},on=[],gn=[],pn=typeof window=="undefined"?1:window.devicePixelRatio,vn=!1,un=function(Mn){Mn&&Te.raise(Mn)},Bn=function(){};if(typeof Me=="string"?(Te(typeof document!="undefined","selector queries only supported in DOM enviroments"),He=document.querySelector(Me),Te(He,"invalid query string for element")):typeof Me=="object"?zo(Me)?He=Me:ul(Me)?(St=Me,yt=St.canvas):(Te.constructor(Me),"gl"in Me?St=Me.gl:"canvas"in Me?yt=oc(Me.canvas):"container"in Me&&(Tt=oc(Me.container)),"attributes"in Me&&(Lt=Me.attributes,Te.type(Lt,"object","invalid context attributes")),"extensions"in Me&&(on=wg(Me.extensions)),"optionalExtensions"in Me&&(gn=wg(Me.optionalExtensions)),"onDone"in Me&&(Te.type(Me.onDone,"function","invalid or missing onDone callback"),un=Me.onDone),"profile"in Me&&(vn=!!Me.profile),"pixelRatio"in Me&&(pn=+Me.pixelRatio,Te(pn>0,"invalid pixel ratio"))):Te.raise("invalid arguments to regl"),He&&(He.nodeName.toLowerCase()==="canvas"?yt=He:Tt=He),!St){if(!yt){Te(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var fn=yi(Tt||document.body,un,pn);if(!fn)return null;yt=fn.canvas,Bn=fn.onDestroy}Lt.premultipliedAlpha===void 0&&(Lt.premultipliedAlpha=!0),St=ii(yt,Lt)}return St?{gl:St,canvas:yt,container:Tt,extensions:on,optionalExtensions:gn,pixelRatio:pn,profile:vn,onDone:un,onDestroy:Bn}:(Bn(),un("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function $a(K,Me){var He={};function Tt(Lt){Te.type(Lt,"string","extension name must be string");var on=Lt.toLowerCase(),gn;try{gn=He[on]=K.getExtension(on)}catch(pn){}return!!gn}for(var yt=0;yt<Me.extensions.length;++yt){var St=Me.extensions[yt];if(!Tt(St))return Me.onDestroy(),Me.onDone('"'+St+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Me.optionalExtensions.forEach(Tt),{extensions:He,restore:function(){Object.keys(He).forEach(function(Lt){if(He[Lt]&&!Tt(Lt))throw new Error("(regl): error restoring extension "+Lt)})}}}function cs(K,Me){for(var He=Array(K),Tt=0;Tt<K;++Tt)He[Tt]=Me(Tt);return He}var lp=5120,cd=5121,es=5122,ah=5123,cp=5124,_c=5125,af=5126;function Ji(K){for(var Me=16;Me<=1<<28;Me*=16)if(K<=Me)return Me;return 0}function yo(K){var Me,He;return Me=(K>65535)<<4,K>>>=Me,He=(K>255)<<3,K>>>=He,Me|=He,He=(K>15)<<2,K>>>=He,Me|=He,He=(K>3)<<1,K>>>=He,Me|=He,Me|K>>1}function pi(){var K=cs(8,function(){return[]});function Me(St){var Lt=Ji(St),on=K[yo(Lt)>>2];return on.length>0?on.pop():new ArrayBuffer(Lt)}function He(St){K[yo(St.byteLength)>>2].push(St)}function Tt(St,Lt){var on=null;switch(St){case lp:on=new Int8Array(Me(Lt),0,Lt);break;case cd:on=new Uint8Array(Me(Lt),0,Lt);break;case es:on=new Int16Array(Me(2*Lt),0,Lt);break;case ah:on=new Uint16Array(Me(2*Lt),0,Lt);break;case cp:on=new Int32Array(Me(4*Lt),0,Lt);break;case _c:on=new Uint32Array(Me(4*Lt),0,Lt);break;case af:on=new Float32Array(Me(4*Lt),0,Lt);break;default:return null}return on.length!==Lt?on.subarray(0,Lt):on}function yt(St){He(St.buffer)}return{alloc:Me,free:He,allocType:Tt,freeType:yt}}var Ro=pi();Ro.zero=pi();var Ms=3408,qc=3410,up=3411,lf=3412,cf=3413,lh=3414,uf=3415,Jc=33901,dp=33902,El=3379,ud=3386,df=34921,Qc=36347,Su=36348,_u=35661,ch=35660,hf=34930,Eg=36349,Na=34076,dd=34024,xs=7936,hd=7937,Sg=7938,Wa=35724,fd=34047,ff=36063,Au=34852,pd=3553,uh=34067,pf=34069,gd=33984,Xa=6408,vd=5126,md=5121,oa=36160,hp=36053,yd=36064,fp=16384,B0=function(K,Me){var He=1;Me.ext_texture_filter_anisotropic&&(He=K.getParameter(fd));var Tt=1,yt=1;Me.webgl_draw_buffers&&(Tt=K.getParameter(Au),yt=K.getParameter(ff));var St=!!Me.oes_texture_float;if(St){var Lt=K.createTexture();K.bindTexture(pd,Lt),K.texImage2D(pd,0,Xa,1,1,0,Xa,vd,null);var on=K.createFramebuffer();if(K.bindFramebuffer(oa,on),K.framebufferTexture2D(oa,yd,pd,Lt,0),K.bindTexture(pd,null),K.checkFramebufferStatus(oa)!==hp)St=!1;else{K.viewport(0,0,1,1),K.clearColor(1,0,0,1),K.clear(fp);var gn=Ro.allocType(vd,4);K.readPixels(0,0,1,1,Xa,vd,gn),K.getError()?St=!1:(K.deleteFramebuffer(on),K.deleteTexture(Lt),St=gn[0]===1),Ro.freeType(gn)}}var pn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),vn=!0;if(!pn){var un=K.createTexture(),Bn=Ro.allocType(md,36);K.activeTexture(gd),K.bindTexture(uh,un),K.texImage2D(pf,0,Xa,3,3,0,Xa,md,Bn),Ro.freeType(Bn),K.bindTexture(uh,null),K.deleteTexture(un),vn=!K.getError()}return{colorBits:[K.getParameter(qc),K.getParameter(up),K.getParameter(lf),K.getParameter(cf)],depthBits:K.getParameter(lh),stencilBits:K.getParameter(uf),subpixelBits:K.getParameter(Ms),extensions:Object.keys(Me).filter(function(fn){return!!Me[fn]}),maxAnisotropic:He,maxDrawbuffers:Tt,maxColorAttachments:yt,pointSizeDims:K.getParameter(Jc),lineWidthDims:K.getParameter(dp),maxViewportDims:K.getParameter(ud),maxCombinedTextureUnits:K.getParameter(_u),maxCubeMapSize:K.getParameter(Na),maxRenderbufferSize:K.getParameter(dd),maxTextureUnits:K.getParameter(hf),maxTextureSize:K.getParameter(El),maxAttributes:K.getParameter(df),maxVertexUniforms:K.getParameter(Qc),maxVertexTextureUnits:K.getParameter(ch),maxVaryingVectors:K.getParameter(Su),maxFragmentUniforms:K.getParameter(Eg),glsl:K.getParameter(Wa),renderer:K.getParameter(hd),vendor:K.getParameter(xs),version:K.getParameter(Sg),readFloat:St,npotTextureCube:vn}};function Hs(K){return!!K&&typeof K=="object"&&Array.isArray(K.shape)&&Array.isArray(K.stride)&&typeof K.offset=="number"&&K.shape.length===K.stride.length&&(Array.isArray(K.data)||L(K.data))}var Cs=function(K){return Object.keys(K).map(function(Me){return K[Me]})},eu={shape:_l,flatten:vf};function bd(K,Me,He){for(var Tt=0;Tt<Me;++Tt)He[Tt]=K[Tt]}function gf(K,Me,He,Tt){for(var yt=0,St=0;St<Me;++St)for(var Lt=K[St],on=0;on<He;++on)Tt[yt++]=Lt[on]}function Ul(K,Me,He,Tt,yt,St){for(var Lt=St,on=0;on<Me;++on)for(var gn=K[on],pn=0;pn<He;++pn)for(var vn=gn[pn],un=0;un<Tt;++un)yt[Lt++]=vn[un]}function Sl(K,Me,He,Tt,yt){for(var St=1,Lt=He+1;Lt<Me.length;++Lt)St*=Me[Lt];var on=Me[He];if(Me.length-He===4){var gn=Me[He+1],pn=Me[He+2],vn=Me[He+3];for(Lt=0;Lt<on;++Lt)Ul(K[Lt],gn,pn,vn,Tt,yt),yt+=St}else for(Lt=0;Lt<on;++Lt)Sl(K[Lt],Me,He+1,Tt,yt),yt+=St}function vf(K,Me,He,Tt){var yt=1;if(Me.length)for(var St=0;St<Me.length;++St)yt*=Me[St];else yt=0;var Lt=Tt||Ro.allocType(He,yt);switch(Me.length){case 0:break;case 1:bd(K,Me[0],Lt);break;case 2:gf(K,Me[0],Me[1],Lt);break;case 3:Ul(K,Me[0],Me[1],Me[2],Lt,0);break;default:Sl(K,Me,0,Lt,0)}return Lt}function _l(K){for(var Me=[],He=K;He.length;He=He[0])Me.push(He.length);return Me}var sc={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},dh=5120,_g=5122,Ag=5124,hh=5121,xd=5123,pp=5125,Tg=5126,mf=5126,$s={int8:dh,int16:_g,int32:Ag,uint8:hh,uint16:xd,uint32:pp,float:Tg,float32:mf},Ac=35048,fh=35040,Tc={dynamic:Ac,stream:fh,static:35044},ph=eu.flatten,ws=eu.shape,Mc=35044,Ao=35040,co=5121,tu=5126,Oc=[];Oc[5120]=1,Oc[5122]=2,Oc[5124]=4,Oc[5121]=1,Oc[5123]=2,Oc[5125]=4,Oc[5126]=4;function yf(K){return sc[Object.prototype.toString.call(K)]|0}function Tu(K,Me){for(var He=0;He<Me.length;++He)K[He]=Me[He]}function Vl(K,Me,He,Tt,yt,St,Lt){for(var on=0,gn=0;gn<He;++gn)for(var pn=0;pn<Tt;++pn)K[on++]=Me[yt*gn+St*pn+Lt]}function bf(K,Me,He,Tt){var yt=0,St={};function Lt(mt){this.id=yt++,this.buffer=K.createBuffer(),this.type=mt,this.usage=Mc,this.byteLength=0,this.dimension=1,this.dtype=co,this.persistentData=null,He.profile&&(this.stats={size:0})}Lt.prototype.bind=function(){K.bindBuffer(this.type,this.buffer)},Lt.prototype.destroy=function(){Bn(this)};var on=[];function gn(mt,Ft){var yn=on.pop();return yn||(yn=new Lt(mt)),yn.bind(),un(yn,Ft,Ao,0,1,!1),yn}function pn(mt){on.push(mt)}function vn(mt,Ft,yn){mt.byteLength=Ft.byteLength,K.bufferData(mt.type,Ft,yn)}function un(mt,Ft,yn,Xn,sn,$n){var qt;if(mt.usage=yn,Array.isArray(Ft)){if(mt.dtype=Xn||tu,Ft.length>0){var Pn;if(Array.isArray(Ft[0])){qt=ws(Ft);for(var ln=1,Dn=1;Dn<qt.length;++Dn)ln*=qt[Dn];mt.dimension=ln,Pn=ph(Ft,qt,mt.dtype),vn(mt,Pn,yn),$n?mt.persistentData=Pn:Ro.freeType(Pn)}else if(typeof Ft[0]=="number"){mt.dimension=sn;var yr=Ro.allocType(mt.dtype,Ft.length);Tu(yr,Ft),vn(mt,yr,yn),$n?mt.persistentData=yr:Ro.freeType(yr)}else L(Ft[0])?(mt.dimension=Ft[0].length,mt.dtype=Xn||yf(Ft[0])||tu,Pn=ph(Ft,[Ft.length,Ft[0].length],mt.dtype),vn(mt,Pn,yn),$n?mt.persistentData=Pn:Ro.freeType(Pn)):Te.raise("invalid buffer data")}}else if(L(Ft))mt.dtype=Xn||yf(Ft),mt.dimension=sn,vn(mt,Ft,yn),$n&&(mt.persistentData=new Uint8Array(new Uint8Array(Ft.buffer)));else if(Hs(Ft)){qt=Ft.shape;var Fr=Ft.stride,Nn=Ft.offset,Cn=0,nn=0,Pr=0,Yr=0;qt.length===1?(Cn=qt[0],nn=1,Pr=Fr[0],Yr=0):qt.length===2?(Cn=qt[0],nn=qt[1],Pr=Fr[0],Yr=Fr[1]):Te.raise("invalid shape"),mt.dtype=Xn||yf(Ft.data)||tu,mt.dimension=nn;var nr=Ro.allocType(mt.dtype,Cn*nn);Vl(nr,Ft.data,Cn,nn,Pr,Yr,Nn),vn(mt,nr,yn),$n?mt.persistentData=nr:Ro.freeType(nr)}else Ft instanceof ArrayBuffer?(mt.dtype=co,mt.dimension=sn,vn(mt,Ft,yn),$n&&(mt.persistentData=new Uint8Array(new Uint8Array(Ft)))):Te.raise("invalid buffer data")}function Bn(mt){Me.bufferCount--,Tt(mt);var Ft=mt.buffer;Te(Ft,"buffer must not be deleted already"),K.deleteBuffer(Ft),mt.buffer=null,delete St[mt.id]}function fn(mt,Ft,yn,Xn){Me.bufferCount++;var sn=new Lt(Ft);St[sn.id]=sn;function $n(ln){var Dn=Mc,yr=null,Fr=0,Nn=0,Cn=1;return Array.isArray(ln)||L(ln)||Hs(ln)||ln instanceof ArrayBuffer?yr=ln:typeof ln=="number"?Fr=ln|0:ln&&(Te.type(ln,"object","buffer arguments must be an object, a number or an array"),"data"in ln&&(Te(yr===null||Array.isArray(yr)||L(yr)||Hs(yr),"invalid data for buffer"),yr=ln.data),"usage"in ln&&(Te.parameter(ln.usage,Tc,"invalid buffer usage"),Dn=Tc[ln.usage]),"type"in ln&&(Te.parameter(ln.type,$s,"invalid buffer type"),Nn=$s[ln.type]),"dimension"in ln&&(Te.type(ln.dimension,"number","invalid dimension"),Cn=ln.dimension|0),"length"in ln&&(Te.nni(Fr,"buffer length must be a nonnegative integer"),Fr=ln.length|0)),sn.bind(),yr?un(sn,yr,Dn,Nn,Cn,Xn):(Fr&&K.bufferData(sn.type,Fr,Dn),sn.dtype=Nn||co,sn.usage=Dn,sn.dimension=Cn,sn.byteLength=Fr),He.profile&&(sn.stats.size=sn.byteLength*Oc[sn.dtype]),$n}function qt(ln,Dn){Te(Dn+ln.byteLength<=sn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+ln.byteLength+" starting from offset "+Dn+" to a buffer of size "+sn.byteLength),K.bufferSubData(sn.type,Dn,ln)}function Pn(ln,Dn){var yr=(Dn||0)|0,Fr;if(sn.bind(),L(ln)||ln instanceof ArrayBuffer)qt(ln,yr);else if(Array.isArray(ln)){if(ln.length>0)if(typeof ln[0]=="number"){var Nn=Ro.allocType(sn.dtype,ln.length);Tu(Nn,ln),qt(Nn,yr),Ro.freeType(Nn)}else if(Array.isArray(ln[0])||L(ln[0])){Fr=ws(ln);var Cn=ph(ln,Fr,sn.dtype);qt(Cn,yr),Ro.freeType(Cn)}else Te.raise("invalid buffer data")}else if(Hs(ln)){Fr=ln.shape;var nn=ln.stride,Pr=0,Yr=0,nr=0,mi=0;Fr.length===1?(Pr=Fr[0],Yr=1,nr=nn[0],mi=0):Fr.length===2?(Pr=Fr[0],Yr=Fr[1],nr=nn[0],mi=nn[1]):Te.raise("invalid shape");var Ur=Array.isArray(ln.data)?sn.dtype:yf(ln.data),oi=Ro.allocType(Ur,Pr*Yr);Vl(oi,ln.data,Pr,Yr,nr,mi,ln.offset),qt(oi,yr),Ro.freeType(oi)}else Te.raise("invalid data for buffer subdata");return $n}return yn||$n(mt),$n._reglType="buffer",$n._buffer=sn,$n.subdata=Pn,He.profile&&($n.stats=sn.stats),$n.destroy=function(){Bn(sn)},$n}function Mn(){Cs(St).forEach(function(mt){mt.buffer=K.createBuffer(),K.bindBuffer(mt.type,mt.buffer),K.bufferData(mt.type,mt.persistentData||mt.byteLength,mt.usage)})}return He.profile&&(Me.getTotalBufferSize=function(){var mt=0;return Object.keys(St).forEach(function(Ft){mt+=St[Ft].stats.size}),mt}),{create:fn,createStream:gn,destroyStream:pn,clear:function(){Cs(St).forEach(Bn),on.forEach(Bn)},getBuffer:function(mt){return mt&&mt._buffer instanceof Lt?mt._buffer:null},restore:Mn,_initBuffer:un}}var gh=0,Mu=0,Ws=1,gp=1,S=4,R=4,U={points:gh,point:Mu,lines:Ws,line:gp,triangles:S,triangle:R,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},W=0,ae=1,de=4,xe=5120,tt=5121,qe=5122,Et=5123,Gt=5124,Sn=5125,Rt=34963,an=35040,Ar=35044;function Zr(K,Me,He,Tt){var yt={},St=0,Lt={uint8:tt,uint16:Et};Me.oes_element_index_uint&&(Lt.uint32=Sn);function on(Mn){this.id=St++,yt[this.id]=this,this.buffer=Mn,this.primType=de,this.vertCount=0,this.type=0}on.prototype.bind=function(){this.buffer.bind()};var gn=[];function pn(Mn){var mt=gn.pop();return mt||(mt=new on(He.create(null,Rt,!0,!1)._buffer)),un(mt,Mn,an,-1,-1,0,0),mt}function vn(Mn){gn.push(Mn)}function un(Mn,mt,Ft,yn,Xn,sn,$n){Mn.buffer.bind();var qt;if(mt){var Pn=$n;!$n&&(!L(mt)||Hs(mt)&&!L(mt.data))&&(Pn=Me.oes_element_index_uint?Sn:Et),He._initBuffer(Mn.buffer,mt,Ft,Pn,3)}else K.bufferData(Rt,sn,Ft),Mn.buffer.dtype=qt||tt,Mn.buffer.usage=Ft,Mn.buffer.dimension=3,Mn.buffer.byteLength=sn;if(qt=$n,!$n){switch(Mn.buffer.dtype){case tt:case xe:qt=tt;break;case Et:case qe:qt=Et;break;case Sn:case Gt:qt=Sn;break;default:Te.raise("unsupported type for element array")}Mn.buffer.dtype=qt}Mn.type=qt,Te(qt!==Sn||!!Me.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var ln=Xn;ln<0&&(ln=Mn.buffer.byteLength,qt===Et?ln>>=1:qt===Sn&&(ln>>=2)),Mn.vertCount=ln;var Dn=yn;if(yn<0){Dn=de;var yr=Mn.buffer.dimension;yr===1&&(Dn=W),yr===2&&(Dn=ae),yr===3&&(Dn=de)}Mn.primType=Dn}function Bn(Mn){Tt.elementsCount--,Te(Mn.buffer!==null,"must not double destroy elements"),delete yt[Mn.id],Mn.buffer.destroy(),Mn.buffer=null}function fn(Mn,mt){var Ft=He.create(null,Rt,!0),yn=new on(Ft._buffer);Tt.elementsCount++;function Xn(sn){if(!sn)Ft(),yn.primType=de,yn.vertCount=0,yn.type=tt;else if(typeof sn=="number")Ft(sn),yn.primType=de,yn.vertCount=sn|0,yn.type=tt;else{var $n=null,qt=Ar,Pn=-1,ln=-1,Dn=0,yr=0;Array.isArray(sn)||L(sn)||Hs(sn)?$n=sn:(Te.type(sn,"object","invalid arguments for elements"),"data"in sn&&($n=sn.data,Te(Array.isArray($n)||L($n)||Hs($n),"invalid data for element buffer")),"usage"in sn&&(Te.parameter(sn.usage,Tc,"invalid element buffer usage"),qt=Tc[sn.usage]),"primitive"in sn&&(Te.parameter(sn.primitive,U,"invalid element buffer primitive"),Pn=U[sn.primitive]),"count"in sn&&(Te(typeof sn.count=="number"&&sn.count>=0,"invalid vertex count for elements"),ln=sn.count|0),"type"in sn&&(Te.parameter(sn.type,Lt,"invalid buffer type"),yr=Lt[sn.type]),"length"in sn?Dn=sn.length|0:(Dn=ln,yr===Et||yr===qe?Dn*=2:(yr===Sn||yr===Gt)&&(Dn*=4))),un(yn,$n,qt,Pn,ln,Dn,yr)}return Xn}return Xn(Mn),Xn._reglType="elements",Xn._elements=yn,Xn.subdata=function(sn,$n){return Ft.subdata(sn,$n),Xn},Xn.destroy=function(){Bn(yn)},Xn}return{create:fn,createStream:pn,destroyStream:vn,getElements:function(Mn){return typeof Mn=="function"&&Mn._elements instanceof on?Mn._elements:null},clear:function(){Cs(yt).forEach(Bn)}}}var Er=new Float32Array(1),us=new Uint32Array(Er.buffer),bi=5123;function ds(K){for(var Me=Ro.allocType(bi,K.length),He=0;He<K.length;++He)if(isNaN(K[He]))Me[He]=65535;else if(K[He]===1/0)Me[He]=31744;else if(K[He]===-1/0)Me[He]=64512;else{Er[0]=K[He];var Tt=us[0],yt=Tt>>>31<<15,St=(Tt<<1>>>24)-127,Lt=Tt>>13&(1<<10)-1;if(St<-24)Me[He]=yt;else if(St<-14){var on=-14-St;Me[He]=yt+(Lt+(1<<10)>>on)}else St>15?Me[He]=yt+31744:Me[He]=yt+(St+15<<10)+Lt}return Me}function $r(K){return Array.isArray(K)||L(K)}var ci=function(K){return!(K&K-1)&&!!K},sa=34467,Ei=3553,bo=34067,nu=34069,Uo=6408,Xs=6406,ba=6407,dl=6409,Os=6410,jl=32854,Wi=32855,Ps=36194,Zs=32819,ru=32820,Za=33635,Pi=34042,Ys=6402,hl=34041,Gs=35904,fl=35906,aa=36193,ac=33776,Vo=33777,Cd=33778,Ou=33779,vp=35986,iu=35987,Al=34798,pl=35840,Pu=35841,Pc=35842,ou=35843,su=36196,ts=5121,Ia=5123,Du=5125,lc=5126,vh=10242,cc=10243,ui=10497,Dc=33071,wo=33648,Ra=10240,Nc=10241,mh=9728,mp=9729,xa=9984,bt=9985,tn=9986,Ht=9987,pr=33170,Jr=4352,Fi=4353,ko=4354,uo=34046,Nu=3317,xf=37440,Ca=37441,Iu=37443,Oe=37444,ze=33984,ht=[xa,tn,bt,Ht],rn=[0,dl,Os,ba,Uo],ot={};ot[dl]=ot[Xs]=ot[Ys]=1,ot[hl]=ot[Os]=2,ot[ba]=ot[Gs]=3,ot[Uo]=ot[fl]=4;function cn(K){return"[object "+K+"]"}var Tn=cn("HTMLCanvasElement"),Kn=cn("OffscreenCanvas"),tr=cn("CanvasRenderingContext2D"),Rr=cn("ImageBitmap"),zr=cn("HTMLImageElement"),lr=cn("HTMLVideoElement"),qr=Object.keys(sc).concat([Tn,Kn,tr,Rr,zr,lr]),Xi=[];Xi[ts]=1,Xi[lc]=4,Xi[aa]=2,Xi[Ia]=2,Xi[Du]=4;var ur=[];ur[jl]=2,ur[Wi]=2,ur[Ps]=2,ur[hl]=4,ur[ac]=.5,ur[Vo]=.5,ur[Cd]=1,ur[Ou]=1,ur[vp]=.5,ur[iu]=1,ur[Al]=1,ur[pl]=.5,ur[Pu]=.25,ur[Pc]=.5,ur[ou]=.25,ur[su]=.5;function ns(K){return Array.isArray(K)&&(K.length===0||typeof K[0]=="number")}function Ks(K){if(!Array.isArray(K))return!1;var Me=K.length;return!(Me===0||!$r(K[0]))}function Es(K){return Object.prototype.toString.call(K)}function ho(K){return Es(K)===Tn}function Ru(K){return Es(K)===Kn}function rs(K){return Es(K)===tr}function Lo(K){return Es(K)===Rr}function uc(K){return Es(K)===zr}function wd(K){return Es(K)===lr}function xi(K){if(!K)return!1;var Me=Es(K);return qr.indexOf(Me)>=0?!0:ns(K)||Ks(K)||Hs(K)}function Si(K){return sc[Object.prototype.toString.call(K)]|0}function yh(K,Me){var He=Me.length;switch(K.type){case ts:case Ia:case Du:case lc:var Tt=Ro.allocType(K.type,He);Tt.set(Me),K.data=Tt;break;case aa:K.data=ds(Me);break;default:Te.raise("unsupported texture type, must specify a typed array")}}function ku(K,Me){return Ro.allocType(K.type===aa?lc:K.type,Me)}function bh(K,Me){K.type===aa?(K.data=ds(Me),Ro.freeType(Me)):K.data=Me}function Mg(K,Me,He,Tt,yt,St){for(var Lt=K.width,on=K.height,gn=K.channels,pn=Lt*on*gn,vn=ku(K,pn),un=0,Bn=0;Bn<on;++Bn)for(var fn=0;fn<Lt;++fn)for(var Mn=0;Mn<gn;++Mn)vn[un++]=Me[He*fn+Tt*Bn+yt*Mn+St];bh(K,vn)}function Cf(K,Me,He,Tt,yt,St){var Lt;if(typeof ur[K]!="undefined"?Lt=ur[K]:Lt=ot[K]*Xi[Me],St&&(Lt*=6),yt){for(var on=0,gn=He;gn>=1;)on+=Lt*gn*gn,gn/=2;return on}else return Lt*He*Tt}function Ed(K,Me,He,Tt,yt,St,Lt){var on={"don't care":Jr,"dont care":Jr,nice:ko,fast:Fi},gn={repeat:ui,clamp:Dc,mirror:wo},pn={nearest:mh,linear:mp},vn=M({mipmap:Ht,"nearest mipmap nearest":xa,"linear mipmap nearest":bt,"nearest mipmap linear":tn,"linear mipmap linear":Ht},pn),un={none:0,browser:Oe},Bn={uint8:ts,rgba4:Zs,rgb565:Za,"rgb5 a1":ru},fn={alpha:Xs,luminance:dl,"luminance alpha":Os,rgb:ba,rgba:Uo,rgba4:jl,"rgb5 a1":Wi,rgb565:Ps},Mn={};Me.ext_srgb&&(fn.srgb=Gs,fn.srgba=fl),Me.oes_texture_float&&(Bn.float32=Bn.float=lc),Me.oes_texture_half_float&&(Bn.float16=Bn["half float"]=aa),Me.webgl_depth_texture&&(M(fn,{depth:Ys,"depth stencil":hl}),M(Bn,{uint16:Ia,uint32:Du,"depth stencil":Pi})),Me.webgl_compressed_texture_s3tc&&M(Mn,{"rgb s3tc dxt1":ac,"rgba s3tc dxt1":Vo,"rgba s3tc dxt3":Cd,"rgba s3tc dxt5":Ou}),Me.webgl_compressed_texture_atc&&M(Mn,{"rgb atc":vp,"rgba atc explicit alpha":iu,"rgba atc interpolated alpha":Al}),Me.webgl_compressed_texture_pvrtc&&M(Mn,{"rgb pvrtc 4bppv1":pl,"rgb pvrtc 2bppv1":Pu,"rgba pvrtc 4bppv1":Pc,"rgba pvrtc 2bppv1":ou}),Me.webgl_compressed_texture_etc1&&(Mn["rgb etc1"]=su);var mt=Array.prototype.slice.call(K.getParameter(sa));Object.keys(Mn).forEach(function(Ue){var Dt=Mn[Ue];mt.indexOf(Dt)>=0&&(fn[Ue]=Dt)});var Ft=Object.keys(fn);He.textureFormats=Ft;var yn=[];Object.keys(fn).forEach(function(Ue){var Dt=fn[Ue];yn[Dt]=Ue});var Xn=[];Object.keys(Bn).forEach(function(Ue){var Dt=Bn[Ue];Xn[Dt]=Ue});var sn=[];Object.keys(pn).forEach(function(Ue){var Dt=pn[Ue];sn[Dt]=Ue});var $n=[];Object.keys(vn).forEach(function(Ue){var Dt=vn[Ue];$n[Dt]=Ue});var qt=[];Object.keys(gn).forEach(function(Ue){var Dt=gn[Ue];qt[Dt]=Ue});var Pn=Ft.reduce(function(Ue,Dt){var Mt=fn[Dt];return Mt===dl||Mt===Xs||Mt===dl||Mt===Os||Mt===Ys||Mt===hl||Me.ext_srgb&&(Mt===Gs||Mt===fl)?Ue[Mt]=Mt:Mt===Wi||Dt.indexOf("rgba")>=0?Ue[Mt]=Uo:Ue[Mt]=ba,Ue},{});function ln(){this.internalformat=Uo,this.format=Uo,this.type=ts,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Oe,this.width=0,this.height=0,this.channels=0}function Dn(Ue,Dt){Ue.internalformat=Dt.internalformat,Ue.format=Dt.format,Ue.type=Dt.type,Ue.compressed=Dt.compressed,Ue.premultiplyAlpha=Dt.premultiplyAlpha,Ue.flipY=Dt.flipY,Ue.unpackAlignment=Dt.unpackAlignment,Ue.colorSpace=Dt.colorSpace,Ue.width=Dt.width,Ue.height=Dt.height,Ue.channels=Dt.channels}function yr(Ue,Dt){if(!(typeof Dt!="object"||!Dt)){if("premultiplyAlpha"in Dt&&(Te.type(Dt.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Ue.premultiplyAlpha=Dt.premultiplyAlpha),"flipY"in Dt&&(Te.type(Dt.flipY,"boolean","invalid texture flip"),Ue.flipY=Dt.flipY),"alignment"in Dt&&(Te.oneOf(Dt.alignment,[1,2,4,8],"invalid texture unpack alignment"),Ue.unpackAlignment=Dt.alignment),"colorSpace"in Dt&&(Te.parameter(Dt.colorSpace,un,"invalid colorSpace"),Ue.colorSpace=un[Dt.colorSpace]),"type"in Dt){var Mt=Dt.type;Te(Me.oes_texture_float||!(Mt==="float"||Mt==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Te(Me.oes_texture_half_float||!(Mt==="half float"||Mt==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Te(Me.webgl_depth_texture||!(Mt==="uint16"||Mt==="uint32"||Mt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Te.parameter(Mt,Bn,"invalid texture type"),Ue.type=Bn[Mt]}var qn=Ue.width,gi=Ue.height,Fe=Ue.channels,Ce=!1;"shape"in Dt?(Te(Array.isArray(Dt.shape)&&Dt.shape.length>=2,"shape must be an array"),qn=Dt.shape[0],gi=Dt.shape[1],Dt.shape.length===3&&(Fe=Dt.shape[2],Te(Fe>0&&Fe<=4,"invalid number of channels"),Ce=!0),Te(qn>=0&&qn<=He.maxTextureSize,"invalid width"),Te(gi>=0&&gi<=He.maxTextureSize,"invalid height")):("radius"in Dt&&(qn=gi=Dt.radius,Te(qn>=0&&qn<=He.maxTextureSize,"invalid radius")),"width"in Dt&&(qn=Dt.width,Te(qn>=0&&qn<=He.maxTextureSize,"invalid width")),"height"in Dt&&(gi=Dt.height,Te(gi>=0&&gi<=He.maxTextureSize,"invalid height")),"channels"in Dt&&(Fe=Dt.channels,Te(Fe>0&&Fe<=4,"invalid number of channels"),Ce=!0)),Ue.width=qn|0,Ue.height=gi|0,Ue.channels=Fe|0;var Je=!1;if("format"in Dt){var pt=Dt.format;Te(Me.webgl_depth_texture||!(pt==="depth"||pt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Te.parameter(pt,fn,"invalid texture format");var gt=Ue.internalformat=fn[pt];Ue.format=Pn[gt],pt in Bn&&("type"in Dt||(Ue.type=Bn[pt])),pt in Mn&&(Ue.compressed=!0),Je=!0}!Ce&&Je?Ue.channels=ot[Ue.format]:Ce&&!Je?Ue.channels!==rn[Ue.format]&&(Ue.format=Ue.internalformat=rn[Ue.channels]):Je&&Ce&&Te(Ue.channels===ot[Ue.format],"number of channels inconsistent with specified format")}}function Fr(Ue){K.pixelStorei(xf,Ue.flipY),K.pixelStorei(Ca,Ue.premultiplyAlpha),K.pixelStorei(Iu,Ue.colorSpace),K.pixelStorei(Nu,Ue.unpackAlignment)}function Nn(){ln.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Cn(Ue,Dt){var Mt=null;if(xi(Dt)?Mt=Dt:Dt&&(Te.type(Dt,"object","invalid pixel data type"),yr(Ue,Dt),"x"in Dt&&(Ue.xOffset=Dt.x|0),"y"in Dt&&(Ue.yOffset=Dt.y|0),xi(Dt.data)&&(Mt=Dt.data)),Te(!Ue.compressed||Mt instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Dt.copy){Te(!Mt,"can not specify copy and data field for the same texture");var qn=yt.viewportWidth,gi=yt.viewportHeight;Ue.width=Ue.width||qn-Ue.xOffset,Ue.height=Ue.height||gi-Ue.yOffset,Ue.needsCopy=!0,Te(Ue.xOffset>=0&&Ue.xOffset<qn&&Ue.yOffset>=0&&Ue.yOffset<gi&&Ue.width>0&&Ue.width<=qn&&Ue.height>0&&Ue.height<=gi,"copy texture read out of bounds")}else if(!Mt)Ue.width=Ue.width||1,Ue.height=Ue.height||1,Ue.channels=Ue.channels||4;else if(L(Mt))Ue.channels=Ue.channels||4,Ue.data=Mt,!("type"in Dt)&&Ue.type===ts&&(Ue.type=Si(Mt));else if(ns(Mt))Ue.channels=Ue.channels||4,yh(Ue,Mt),Ue.alignment=1,Ue.needsFree=!0;else if(Hs(Mt)){var Fe=Mt.data;!Array.isArray(Fe)&&Ue.type===ts&&(Ue.type=Si(Fe));var Ce=Mt.shape,Je=Mt.stride,pt,gt,et,Ze,lt,Ge;Ce.length===3?(et=Ce[2],Ge=Je[2]):(Te(Ce.length===2,"invalid ndarray pixel data, must be 2 or 3D"),et=1,Ge=1),pt=Ce[0],gt=Ce[1],Ze=Je[0],lt=Je[1],Ue.alignment=1,Ue.width=pt,Ue.height=gt,Ue.channels=et,Ue.format=Ue.internalformat=rn[et],Ue.needsFree=!0,Mg(Ue,Fe,Ze,lt,Ge,Mt.offset)}else if(ho(Mt)||Ru(Mt)||rs(Mt))ho(Mt)||Ru(Mt)?Ue.element=Mt:Ue.element=Mt.canvas,Ue.width=Ue.element.width,Ue.height=Ue.element.height,Ue.channels=4;else if(Lo(Mt))Ue.element=Mt,Ue.width=Mt.width,Ue.height=Mt.height,Ue.channels=4;else if(uc(Mt))Ue.element=Mt,Ue.width=Mt.naturalWidth,Ue.height=Mt.naturalHeight,Ue.channels=4;else if(wd(Mt))Ue.element=Mt,Ue.width=Mt.videoWidth,Ue.height=Mt.videoHeight,Ue.channels=4;else if(Ks(Mt)){var Ye=Ue.width||Mt[0].length,Ie=Ue.height||Mt.length,st=Ue.channels;$r(Mt[0][0])?st=st||Mt[0][0].length:st=st||1;for(var Ct=eu.shape(Mt),$t=1,Xt=0;Xt<Ct.length;++Xt)$t*=Ct[Xt];var zt=ku(Ue,$t);eu.flatten(Mt,Ct,"",zt),bh(Ue,zt),Ue.alignment=1,Ue.width=Ye,Ue.height=Ie,Ue.channels=st,Ue.format=Ue.internalformat=rn[st],Ue.needsFree=!0}Ue.type===lc?Te(He.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Ue.type===aa&&Te(He.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function nn(Ue,Dt,Mt){var qn=Ue.element,gi=Ue.data,Fe=Ue.internalformat,Ce=Ue.format,Je=Ue.type,pt=Ue.width,gt=Ue.height;Fr(Ue),qn?K.texImage2D(Dt,Mt,Ce,Ce,Je,qn):Ue.compressed?K.compressedTexImage2D(Dt,Mt,Fe,pt,gt,0,gi):Ue.needsCopy?(Tt(),K.copyTexImage2D(Dt,Mt,Ce,Ue.xOffset,Ue.yOffset,pt,gt,0)):K.texImage2D(Dt,Mt,Ce,pt,gt,0,Ce,Je,gi||null)}function Pr(Ue,Dt,Mt,qn,gi){var Fe=Ue.element,Ce=Ue.data,Je=Ue.internalformat,pt=Ue.format,gt=Ue.type,et=Ue.width,Ze=Ue.height;Fr(Ue),Fe?K.texSubImage2D(Dt,gi,Mt,qn,pt,gt,Fe):Ue.compressed?K.compressedTexSubImage2D(Dt,gi,Mt,qn,Je,et,Ze,Ce):Ue.needsCopy?(Tt(),K.copyTexSubImage2D(Dt,gi,Mt,qn,Ue.xOffset,Ue.yOffset,et,Ze)):K.texSubImage2D(Dt,gi,Mt,qn,et,Ze,pt,gt,Ce)}var Yr=[];function nr(){return Yr.pop()||new Nn}function mi(Ue){Ue.needsFree&&Ro.freeType(Ue.data),Nn.call(Ue),Yr.push(Ue)}function Ur(){ln.call(this),this.genMipmaps=!1,this.mipmapHint=Jr,this.mipmask=0,this.images=Array(16)}function oi(Ue,Dt,Mt){var qn=Ue.images[0]=nr();Ue.mipmask=1,qn.width=Ue.width=Dt,qn.height=Ue.height=Mt,qn.channels=Ue.channels=4}function Ii(Ue,Dt){var Mt=null;if(xi(Dt))Mt=Ue.images[0]=nr(),Dn(Mt,Ue),Cn(Mt,Dt),Ue.mipmask=1;else if(yr(Ue,Dt),Array.isArray(Dt.mipmap))for(var qn=Dt.mipmap,gi=0;gi<qn.length;++gi)Mt=Ue.images[gi]=nr(),Dn(Mt,Ue),Mt.width>>=gi,Mt.height>>=gi,Cn(Mt,qn[gi]),Ue.mipmask|=1<<gi;else Mt=Ue.images[0]=nr(),Dn(Mt,Ue),Cn(Mt,Dt),Ue.mipmask=1;Dn(Ue,Ue.images[0]),Ue.compressed&&(Ue.internalformat===ac||Ue.internalformat===Vo||Ue.internalformat===Cd||Ue.internalformat===Ou)&&Te(Ue.width%4===0&&Ue.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function os(Ue,Dt){for(var Mt=Ue.images,qn=0;qn<Mt.length;++qn){if(!Mt[qn])return;nn(Mt[qn],Dt,qn)}}var ps=[];function di(){var Ue=ps.pop()||new Ur;ln.call(Ue),Ue.mipmask=0;for(var Dt=0;Dt<16;++Dt)Ue.images[Dt]=null;return Ue}function gs(Ue){for(var Dt=Ue.images,Mt=0;Mt<Dt.length;++Mt)Dt[Mt]&&mi(Dt[Mt]),Dt[Mt]=null;ps.push(Ue)}function Eo(){this.minFilter=mh,this.magFilter=mh,this.wrapS=Dc,this.wrapT=Dc,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Jr}function Mo(Ue,Dt){if("min"in Dt){var Mt=Dt.min;Te.parameter(Mt,vn),Ue.minFilter=vn[Mt],ht.indexOf(Ue.minFilter)>=0&&!("faces"in Dt)&&(Ue.genMipmaps=!0)}if("mag"in Dt){var qn=Dt.mag;Te.parameter(qn,pn),Ue.magFilter=pn[qn]}var gi=Ue.wrapS,Fe=Ue.wrapT;if("wrap"in Dt){var Ce=Dt.wrap;typeof Ce=="string"?(Te.parameter(Ce,gn),gi=Fe=gn[Ce]):Array.isArray(Ce)&&(Te.parameter(Ce[0],gn),Te.parameter(Ce[1],gn),gi=gn[Ce[0]],Fe=gn[Ce[1]])}else{if("wrapS"in Dt){var Je=Dt.wrapS;Te.parameter(Je,gn),gi=gn[Je]}if("wrapT"in Dt){var pt=Dt.wrapT;Te.parameter(pt,gn),Fe=gn[pt]}}if(Ue.wrapS=gi,Ue.wrapT=Fe,"anisotropic"in Dt){var gt=Dt.anisotropic;Te(typeof gt=="number"&&gt>=1&&gt<=He.maxAnisotropic,"aniso samples must be between 1 and "),Ue.anisotropic=Dt.anisotropic}if("mipmap"in Dt){var et=!1;switch(typeof Dt.mipmap){case"string":Te.parameter(Dt.mipmap,on,"invalid mipmap hint"),Ue.mipmapHint=on[Dt.mipmap],Ue.genMipmaps=!0,et=!0;break;case"boolean":et=Ue.genMipmaps=Dt.mipmap;break;case"object":Te(Array.isArray(Dt.mipmap),"invalid mipmap type"),Ue.genMipmaps=!1,et=!0;break;default:Te.raise("invalid mipmap type")}et&&!("min"in Dt)&&(Ue.minFilter=xa)}}function ss(Ue,Dt){K.texParameteri(Dt,Nc,Ue.minFilter),K.texParameteri(Dt,Ra,Ue.magFilter),K.texParameteri(Dt,vh,Ue.wrapS),K.texParameteri(Dt,cc,Ue.wrapT),Me.ext_texture_filter_anisotropic&&K.texParameteri(Dt,uo,Ue.anisotropic),Ue.genMipmaps&&(K.hint(pr,Ue.mipmapHint),K.generateMipmap(Dt))}var Ss=0,Oo={},$o=He.maxTextureUnits,vs=Array($o).map(function(){return null});function Kr(Ue){ln.call(this),this.mipmask=0,this.internalformat=Uo,this.id=Ss++,this.refCount=1,this.target=Ue,this.texture=K.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Eo,Lt.profile&&(this.stats={size:0})}function Wo(Ue){K.activeTexture(ze),K.bindTexture(Ue.target,Ue.texture)}function zi(){var Ue=vs[0];Ue?K.bindTexture(Ue.target,Ue.texture):K.bindTexture(Ei,null)}function Sr(Ue){var Dt=Ue.texture;Te(Dt,"must not double destroy texture");var Mt=Ue.unit,qn=Ue.target;Mt>=0&&(K.activeTexture(ze+Mt),K.bindTexture(qn,null),vs[Mt]=null),K.deleteTexture(Dt),Ue.texture=null,Ue.params=null,Ue.pixels=null,Ue.refCount=0,delete Oo[Ue.id],St.textureCount--}M(Kr.prototype,{bind:function(){var Ue=this;Ue.bindCount+=1;var Dt=Ue.unit;if(Dt<0){for(var Mt=0;Mt<$o;++Mt){var qn=vs[Mt];if(qn){if(qn.bindCount>0)continue;qn.unit=-1}vs[Mt]=Ue,Dt=Mt;break}Dt>=$o&&Te.raise("insufficient number of texture units"),Lt.profile&&St.maxTextureUnits<Dt+1&&(St.maxTextureUnits=Dt+1),Ue.unit=Dt,K.activeTexture(ze+Dt),K.bindTexture(Ue.target,Ue.texture)}return Dt},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Sr(this)}});function wi(Ue,Dt){var Mt=new Kr(Ei);Oo[Mt.id]=Mt,St.textureCount++;function qn(Ce,Je){var pt=Mt.texInfo;Eo.call(pt);var gt=di();return typeof Ce=="number"?typeof Je=="number"?oi(gt,Ce|0,Je|0):oi(gt,Ce|0,Ce|0):Ce?(Te.type(Ce,"object","invalid arguments to regl.texture"),Mo(pt,Ce),Ii(gt,Ce)):oi(gt,1,1),pt.genMipmaps&&(gt.mipmask=(gt.width<<1)-1),Mt.mipmask=gt.mipmask,Dn(Mt,gt),Te.texture2D(pt,gt,He),Mt.internalformat=gt.internalformat,qn.width=gt.width,qn.height=gt.height,Wo(Mt),os(gt,Ei),ss(pt,Ei),zi(),gs(gt),Lt.profile&&(Mt.stats.size=Cf(Mt.internalformat,Mt.type,gt.width,gt.height,pt.genMipmaps,!1)),qn.format=yn[Mt.internalformat],qn.type=Xn[Mt.type],qn.mag=sn[pt.magFilter],qn.min=$n[pt.minFilter],qn.wrapS=qt[pt.wrapS],qn.wrapT=qt[pt.wrapT],qn}function gi(Ce,Je,pt,gt){Te(!!Ce,"must specify image data");var et=Je|0,Ze=pt|0,lt=gt|0,Ge=nr();return Dn(Ge,Mt),Ge.width=0,Ge.height=0,Cn(Ge,Ce),Ge.width=Ge.width||(Mt.width>>lt)-et,Ge.height=Ge.height||(Mt.height>>lt)-Ze,Te(Mt.type===Ge.type&&Mt.format===Ge.format&&Mt.internalformat===Ge.internalformat,"incompatible format for texture.subimage"),Te(et>=0&&Ze>=0&&et+Ge.width<=Mt.width&&Ze+Ge.height<=Mt.height,"texture.subimage write out of bounds"),Te(Mt.mipmask&1<<lt,"missing mipmap data"),Te(Ge.data||Ge.element||Ge.needsCopy,"missing image data"),Wo(Mt),Pr(Ge,Ei,et,Ze,lt),zi(),mi(Ge),qn}function Fe(Ce,Je){var pt=Ce|0,gt=Je|0||pt;if(pt===Mt.width&&gt===Mt.height)return qn;qn.width=Mt.width=pt,qn.height=Mt.height=gt,Wo(Mt);for(var et=0;Mt.mipmask>>et;++et){var Ze=pt>>et,lt=gt>>et;if(!Ze||!lt)break;K.texImage2D(Ei,et,Mt.format,Ze,lt,0,Mt.format,Mt.type,null)}return zi(),Lt.profile&&(Mt.stats.size=Cf(Mt.internalformat,Mt.type,pt,gt,!1,!1)),qn}return qn(Ue,Dt),qn.subimage=gi,qn.resize=Fe,qn._reglType="texture2d",qn._texture=Mt,Lt.profile&&(qn.stats=Mt.stats),qn.destroy=function(){Mt.decRef()},qn}function Ri(Ue,Dt,Mt,qn,gi,Fe){var Ce=new Kr(bo);Oo[Ce.id]=Ce,St.cubeCount++;var Je=new Array(6);function pt(Ze,lt,Ge,Ye,Ie,st){var Ct,$t=Ce.texInfo;for(Eo.call($t),Ct=0;Ct<6;++Ct)Je[Ct]=di();if(typeof Ze=="number"||!Ze){var Xt=Ze|0||1;for(Ct=0;Ct<6;++Ct)oi(Je[Ct],Xt,Xt)}else if(typeof Ze=="object")if(lt)Ii(Je[0],Ze),Ii(Je[1],lt),Ii(Je[2],Ge),Ii(Je[3],Ye),Ii(Je[4],Ie),Ii(Je[5],st);else if(Mo($t,Ze),yr(Ce,Ze),"faces"in Ze){var zt=Ze.faces;for(Te(Array.isArray(zt)&&zt.length===6,"cube faces must be a length 6 array"),Ct=0;Ct<6;++Ct)Te(typeof zt[Ct]=="object"&&!!zt[Ct],"invalid input for cube map face"),Dn(Je[Ct],Ce),Ii(Je[Ct],zt[Ct])}else for(Ct=0;Ct<6;++Ct)Ii(Je[Ct],Ze);else Te.raise("invalid arguments to cube map");for(Dn(Ce,Je[0]),He.npotTextureCube||Te(ci(Ce.width)&&ci(Ce.height),"your browser does not support non power or two texture dimensions"),$t.genMipmaps?Ce.mipmask=(Je[0].width<<1)-1:Ce.mipmask=Je[0].mipmask,Te.textureCube(Ce,$t,Je,He),Ce.internalformat=Je[0].internalformat,pt.width=Je[0].width,pt.height=Je[0].height,Wo(Ce),Ct=0;Ct<6;++Ct)os(Je[Ct],nu+Ct);for(ss($t,bo),zi(),Lt.profile&&(Ce.stats.size=Cf(Ce.internalformat,Ce.type,pt.width,pt.height,$t.genMipmaps,!0)),pt.format=yn[Ce.internalformat],pt.type=Xn[Ce.type],pt.mag=sn[$t.magFilter],pt.min=$n[$t.minFilter],pt.wrapS=qt[$t.wrapS],pt.wrapT=qt[$t.wrapT],Ct=0;Ct<6;++Ct)gs(Je[Ct]);return pt}function gt(Ze,lt,Ge,Ye,Ie){Te(!!lt,"must specify image data"),Te(typeof Ze=="number"&&Ze===(Ze|0)&&Ze>=0&&Ze<6,"invalid face");var st=Ge|0,Ct=Ye|0,$t=Ie|0,Xt=nr();return Dn(Xt,Ce),Xt.width=0,Xt.height=0,Cn(Xt,lt),Xt.width=Xt.width||(Ce.width>>$t)-st,Xt.height=Xt.height||(Ce.height>>$t)-Ct,Te(Ce.type===Xt.type&&Ce.format===Xt.format&&Ce.internalformat===Xt.internalformat,"incompatible format for texture.subimage"),Te(st>=0&&Ct>=0&&st+Xt.width<=Ce.width&&Ct+Xt.height<=Ce.height,"texture.subimage write out of bounds"),Te(Ce.mipmask&1<<$t,"missing mipmap data"),Te(Xt.data||Xt.element||Xt.needsCopy,"missing image data"),Wo(Ce),Pr(Xt,nu+Ze,st,Ct,$t),zi(),mi(Xt),pt}function et(Ze){var lt=Ze|0;if(lt!==Ce.width){pt.width=Ce.width=lt,pt.height=Ce.height=lt,Wo(Ce);for(var Ge=0;Ge<6;++Ge)for(var Ye=0;Ce.mipmask>>Ye;++Ye)K.texImage2D(nu+Ge,Ye,Ce.format,lt>>Ye,lt>>Ye,0,Ce.format,Ce.type,null);return zi(),Lt.profile&&(Ce.stats.size=Cf(Ce.internalformat,Ce.type,pt.width,pt.height,!1,!0)),pt}}return pt(Ue,Dt,Mt,qn,gi,Fe),pt.subimage=gt,pt.resize=et,pt._reglType="textureCube",pt._texture=Ce,Lt.profile&&(pt.stats=Ce.stats),pt.destroy=function(){Ce.decRef()},pt}function ms(){for(var Ue=0;Ue<$o;++Ue)K.activeTexture(ze+Ue),K.bindTexture(Ei,null),vs[Ue]=null;Cs(Oo).forEach(Sr),St.cubeCount=0,St.textureCount=0}Lt.profile&&(St.getTotalTextureSize=function(){var Ue=0;return Object.keys(Oo).forEach(function(Dt){Ue+=Oo[Dt].stats.size}),Ue});function zc(){for(var Ue=0;Ue<$o;++Ue){var Dt=vs[Ue];Dt&&(Dt.bindCount=0,Dt.unit=-1,vs[Ue]=null)}Cs(Oo).forEach(function(Mt){Mt.texture=K.createTexture(),K.bindTexture(Mt.target,Mt.texture);for(var qn=0;qn<32;++qn)if(Mt.mipmask&1<<qn)if(Mt.target===Ei)K.texImage2D(Ei,qn,Mt.internalformat,Mt.width>>qn,Mt.height>>qn,0,Mt.internalformat,Mt.type,null);else for(var gi=0;gi<6;++gi)K.texImage2D(nu+gi,qn,Mt.internalformat,Mt.width>>qn,Mt.height>>qn,0,Mt.internalformat,Mt.type,null);ss(Mt.texInfo,Mt.target)})}function zd(){for(var Ue=0;Ue<$o;++Ue){var Dt=vs[Ue];Dt&&(Dt.bindCount=0,Dt.unit=-1,vs[Ue]=null),K.activeTexture(ze+Ue),K.bindTexture(Ei,null),K.bindTexture(bo,null)}}return{create2D:wi,createCube:Ri,clear:ms,getTexture:function(Ue){return null},restore:zc,refresh:zd}}var gl=36161,hs=32854,Ds=32855,z0=36194,Og=33189,Ic=36168,wf=34041,yp=35907,ka=34836,Sd=34842,la=34843,Ya=[];Ya[hs]=2,Ya[Ds]=2,Ya[z0]=2,Ya[Og]=2,Ya[Ic]=1,Ya[wf]=4,Ya[yp]=4,Ya[ka]=16,Ya[Sd]=8,Ya[la]=6;function _d(K,Me,He){return Ya[K]*Me*He}var Ad=function(K,Me,He,Tt,yt){var St={rgba4:hs,rgb565:z0,"rgb5 a1":Ds,depth:Og,stencil:Ic,"depth stencil":wf};Me.ext_srgb&&(St.srgba=yp),Me.ext_color_buffer_half_float&&(St.rgba16f=Sd,St.rgb16f=la),Me.webgl_color_buffer_float&&(St.rgba32f=ka);var Lt=[];Object.keys(St).forEach(function(fn){var Mn=St[fn];Lt[Mn]=fn});var on=0,gn={};function pn(fn){this.id=on++,this.refCount=1,this.renderbuffer=fn,this.format=hs,this.width=0,this.height=0,yt.profile&&(this.stats={size:0})}pn.prototype.decRef=function(){--this.refCount<=0&&vn(this)};function vn(fn){var Mn=fn.renderbuffer;Te(Mn,"must not double destroy renderbuffer"),K.bindRenderbuffer(gl,null),K.deleteRenderbuffer(Mn),fn.renderbuffer=null,fn.refCount=0,delete gn[fn.id],Tt.renderbufferCount--}function un(fn,Mn){var mt=new pn(K.createRenderbuffer());gn[mt.id]=mt,Tt.renderbufferCount++;function Ft(Xn,sn){var $n=0,qt=0,Pn=hs;if(typeof Xn=="object"&&Xn){var ln=Xn;if("shape"in ln){var Dn=ln.shape;Te(Array.isArray(Dn)&&Dn.length>=2,"invalid renderbuffer shape"),$n=Dn[0]|0,qt=Dn[1]|0}else"radius"in ln&&($n=qt=ln.radius|0),"width"in ln&&($n=ln.width|0),"height"in ln&&(qt=ln.height|0);"format"in ln&&(Te.parameter(ln.format,St,"invalid renderbuffer format"),Pn=St[ln.format])}else typeof Xn=="number"?($n=Xn|0,typeof sn=="number"?qt=sn|0:qt=$n):Xn?Te.raise("invalid arguments to renderbuffer constructor"):$n=qt=1;if(Te($n>0&&qt>0&&$n<=He.maxRenderbufferSize&&qt<=He.maxRenderbufferSize,"invalid renderbuffer size"),!($n===mt.width&&qt===mt.height&&Pn===mt.format))return Ft.width=mt.width=$n,Ft.height=mt.height=qt,mt.format=Pn,K.bindRenderbuffer(gl,mt.renderbuffer),K.renderbufferStorage(gl,Pn,$n,qt),Te(K.getError()===0,"invalid render buffer format"),yt.profile&&(mt.stats.size=_d(mt.format,mt.width,mt.height)),Ft.format=Lt[mt.format],Ft}function yn(Xn,sn){var $n=Xn|0,qt=sn|0||$n;return $n===mt.width&&qt===mt.height||(Te($n>0&&qt>0&&$n<=He.maxRenderbufferSize&&qt<=He.maxRenderbufferSize,"invalid renderbuffer size"),Ft.width=mt.width=$n,Ft.height=mt.height=qt,K.bindRenderbuffer(gl,mt.renderbuffer),K.renderbufferStorage(gl,mt.format,$n,qt),Te(K.getError()===0,"invalid render buffer format"),yt.profile&&(mt.stats.size=_d(mt.format,mt.width,mt.height))),Ft}return Ft(fn,Mn),Ft.resize=yn,Ft._reglType="renderbuffer",Ft._renderbuffer=mt,yt.profile&&(Ft.stats=mt.stats),Ft.destroy=function(){mt.decRef()},Ft}yt.profile&&(Tt.getTotalRenderbufferSize=function(){var fn=0;return Object.keys(gn).forEach(function(Mn){fn+=gn[Mn].stats.size}),fn});function Bn(){Cs(gn).forEach(function(fn){fn.renderbuffer=K.createRenderbuffer(),K.bindRenderbuffer(gl,fn.renderbuffer),K.renderbufferStorage(gl,fn.format,fn.width,fn.height)}),K.bindRenderbuffer(gl,null)}return{create:un,clear:function(){Cs(gn).forEach(vn)},restore:Bn}},ca=36160,xh=36161,au=3553,Td=34069,Pg=36064,Dg=36096,bp=36128,Ch=33306,Ng=36053,Ae=36054,Md=36055,Od=36057,wa=36061,Li=36193,hm=5121,Tl=5126,U0=6407,Lu=6408,V0=6402,Ml=[U0,Lu],Ig=[];Ig[Lu]=4,Ig[U0]=3;var xp=[];xp[hm]=1,xp[Tl]=4,xp[Li]=2;var Rg=32854,lu=32855,j0=36194,fm=33189,tb=36168,Gu=34041,H0=35907,Rc=34836,Fu=34842,pm=34843,kg=[Rg,lu,j0,H0,Fu,pm,Rc],Bu={};Bu[Ng]="complete",Bu[Ae]="incomplete attachment",Bu[Od]="incomplete dimensions",Bu[Md]="incomplete, missing attachment",Bu[wa]="unsupported";function $0(K,Me,He,Tt,yt,St){var Lt={cur:null,next:null,dirty:!1,setFBO:null},on=["rgba"],gn=["rgba4","rgb565","rgb5 a1"];Me.ext_srgb&&gn.push("srgba"),Me.ext_color_buffer_half_float&&gn.push("rgba16f","rgb16f"),Me.webgl_color_buffer_float&&gn.push("rgba32f");var pn=["uint8"];Me.oes_texture_half_float&&pn.push("half float","float16"),Me.oes_texture_float&&pn.push("float","float32");function vn(Nn,Cn,nn){this.target=Nn,this.texture=Cn,this.renderbuffer=nn;var Pr=0,Yr=0;Cn?(Pr=Cn.width,Yr=Cn.height):nn&&(Pr=nn.width,Yr=nn.height),this.width=Pr,this.height=Yr}function un(Nn){Nn&&(Nn.texture&&Nn.texture._texture.decRef(),Nn.renderbuffer&&Nn.renderbuffer._renderbuffer.decRef())}function Bn(Nn,Cn,nn){if(Nn)if(Nn.texture){var Pr=Nn.texture._texture,Yr=Math.max(1,Pr.width),nr=Math.max(1,Pr.height);Te(Yr===Cn&&nr===nn,"inconsistent width/height for supplied texture"),Pr.refCount+=1}else{var mi=Nn.renderbuffer._renderbuffer;Te(mi.width===Cn&&mi.height===nn,"inconsistent width/height for renderbuffer"),mi.refCount+=1}}function fn(Nn,Cn){Cn&&(Cn.texture?K.framebufferTexture2D(ca,Nn,Cn.target,Cn.texture._texture.texture,0):K.framebufferRenderbuffer(ca,Nn,xh,Cn.renderbuffer._renderbuffer.renderbuffer))}function Mn(Nn){var Cn=au,nn=null,Pr=null,Yr=Nn;typeof Nn=="object"&&(Yr=Nn.data,"target"in Nn&&(Cn=Nn.target|0)),Te.type(Yr,"function","invalid attachment data");var nr=Yr._reglType;return nr==="texture2d"?(nn=Yr,Te(Cn===au)):nr==="textureCube"?(nn=Yr,Te(Cn>=Td&&Cn<Td+6,"invalid cube map target")):nr==="renderbuffer"?(Pr=Yr,Cn=xh):Te.raise("invalid regl object for attachment"),new vn(Cn,nn,Pr)}function mt(Nn,Cn,nn,Pr,Yr){if(nn){var nr=Tt.create2D({width:Nn,height:Cn,format:Pr,type:Yr});return nr._texture.refCount=0,new vn(au,nr,null)}else{var mi=yt.create({width:Nn,height:Cn,format:Pr});return mi._renderbuffer.refCount=0,new vn(xh,null,mi)}}function Ft(Nn){return Nn&&(Nn.texture||Nn.renderbuffer)}function yn(Nn,Cn,nn){Nn&&(Nn.texture?Nn.texture.resize(Cn,nn):Nn.renderbuffer&&Nn.renderbuffer.resize(Cn,nn),Nn.width=Cn,Nn.height=nn)}var Xn=0,sn={};function $n(){this.id=Xn++,sn[this.id]=this,this.framebuffer=K.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function qt(Nn){Nn.colorAttachments.forEach(un),un(Nn.depthAttachment),un(Nn.stencilAttachment),un(Nn.depthStencilAttachment)}function Pn(Nn){var Cn=Nn.framebuffer;Te(Cn,"must not double destroy framebuffer"),K.deleteFramebuffer(Cn),Nn.framebuffer=null,St.framebufferCount--,delete sn[Nn.id]}function ln(Nn){var Cn;K.bindFramebuffer(ca,Nn.framebuffer);var nn=Nn.colorAttachments;for(Cn=0;Cn<nn.length;++Cn)fn(Pg+Cn,nn[Cn]);for(Cn=nn.length;Cn<He.maxColorAttachments;++Cn)K.framebufferTexture2D(ca,Pg+Cn,au,null,0);K.framebufferTexture2D(ca,Ch,au,null,0),K.framebufferTexture2D(ca,Dg,au,null,0),K.framebufferTexture2D(ca,bp,au,null,0),fn(Dg,Nn.depthAttachment),fn(bp,Nn.stencilAttachment),fn(Ch,Nn.depthStencilAttachment);var Pr=K.checkFramebufferStatus(ca);!K.isContextLost()&&Pr!==Ng&&Te.raise("framebuffer configuration not supported, status = "+Bu[Pr]),K.bindFramebuffer(ca,Lt.next?Lt.next.framebuffer:null),Lt.cur=Lt.next,K.getError()}function Dn(Nn,Cn){var nn=new $n;St.framebufferCount++;function Pr(nr,mi){var Ur;Te(Lt.next!==nn,"can not update framebuffer which is currently in use");var oi=0,Ii=0,os=!0,ps=!0,di=null,gs=!0,Eo="rgba",Mo="uint8",ss=1,Ss=null,Oo=null,$o=null,vs=!1;if(typeof nr=="number")oi=nr|0,Ii=mi|0||oi;else if(!nr)oi=Ii=1;else{Te.type(nr,"object","invalid arguments for framebuffer");var Kr=nr;if("shape"in Kr){var Wo=Kr.shape;Te(Array.isArray(Wo)&&Wo.length>=2,"invalid shape for framebuffer"),oi=Wo[0],Ii=Wo[1]}else"radius"in Kr&&(oi=Ii=Kr.radius),"width"in Kr&&(oi=Kr.width),"height"in Kr&&(Ii=Kr.height);("color"in Kr||"colors"in Kr)&&(di=Kr.color||Kr.colors,Array.isArray(di)&&Te(di.length===1||Me.webgl_draw_buffers,"multiple render targets not supported")),di||("colorCount"in Kr&&(ss=Kr.colorCount|0,Te(ss>0,"invalid color buffer count")),"colorTexture"in Kr&&(gs=!!Kr.colorTexture,Eo="rgba4"),"colorType"in Kr&&(Mo=Kr.colorType,gs?(Te(Me.oes_texture_float||!(Mo==="float"||Mo==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Te(Me.oes_texture_half_float||!(Mo==="half float"||Mo==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Mo==="half float"||Mo==="float16"?(Te(Me.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Eo="rgba16f"):(Mo==="float"||Mo==="float32")&&(Te(Me.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Eo="rgba32f"),Te.oneOf(Mo,pn,"invalid color type")),"colorFormat"in Kr&&(Eo=Kr.colorFormat,on.indexOf(Eo)>=0?gs=!0:gn.indexOf(Eo)>=0?gs=!1:gs?Te.oneOf(Kr.colorFormat,on,"invalid color format for texture"):Te.oneOf(Kr.colorFormat,gn,"invalid color format for renderbuffer"))),("depthTexture"in Kr||"depthStencilTexture"in Kr)&&(vs=!!(Kr.depthTexture||Kr.depthStencilTexture),Te(!vs||Me.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Kr&&(typeof Kr.depth=="boolean"?os=Kr.depth:(Ss=Kr.depth,ps=!1)),"stencil"in Kr&&(typeof Kr.stencil=="boolean"?ps=Kr.stencil:(Oo=Kr.stencil,os=!1)),"depthStencil"in Kr&&(typeof Kr.depthStencil=="boolean"?os=ps=Kr.depthStencil:($o=Kr.depthStencil,os=!1,ps=!1))}var zi=null,Sr=null,wi=null,Ri=null;if(Array.isArray(di))zi=di.map(Mn);else if(di)zi=[Mn(di)];else for(zi=new Array(ss),Ur=0;Ur<ss;++Ur)zi[Ur]=mt(oi,Ii,gs,Eo,Mo);Te(Me.webgl_draw_buffers||zi.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Te(zi.length<=He.maxColorAttachments,"too many color attachments, not supported"),oi=oi||zi[0].width,Ii=Ii||zi[0].height,Ss?Sr=Mn(Ss):os&&!ps&&(Sr=mt(oi,Ii,vs,"depth","uint32")),Oo?wi=Mn(Oo):ps&&!os&&(wi=mt(oi,Ii,!1,"stencil","uint8")),$o?Ri=Mn($o):!Ss&&!Oo&&ps&&os&&(Ri=mt(oi,Ii,vs,"depth stencil","depth stencil")),Te(!!Ss+!!Oo+!!$o<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var ms=null;for(Ur=0;Ur<zi.length;++Ur)if(Bn(zi[Ur],oi,Ii),Te(!zi[Ur]||zi[Ur].texture&&Ml.indexOf(zi[Ur].texture._texture.format)>=0||zi[Ur].renderbuffer&&kg.indexOf(zi[Ur].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Ur+" is invalid"),zi[Ur]&&zi[Ur].texture){var zc=Ig[zi[Ur].texture._texture.format]*xp[zi[Ur].texture._texture.type];ms===null?ms=zc:Te(ms===zc,"all color attachments much have the same number of bits per pixel.")}return Bn(Sr,oi,Ii),Te(!Sr||Sr.texture&&Sr.texture._texture.format===V0||Sr.renderbuffer&&Sr.renderbuffer._renderbuffer.format===fm,"invalid depth attachment for framebuffer object"),Bn(wi,oi,Ii),Te(!wi||wi.renderbuffer&&wi.renderbuffer._renderbuffer.format===tb,"invalid stencil attachment for framebuffer object"),Bn(Ri,oi,Ii),Te(!Ri||Ri.texture&&Ri.texture._texture.format===Gu||Ri.renderbuffer&&Ri.renderbuffer._renderbuffer.format===Gu,"invalid depth-stencil attachment for framebuffer object"),qt(nn),nn.width=oi,nn.height=Ii,nn.colorAttachments=zi,nn.depthAttachment=Sr,nn.stencilAttachment=wi,nn.depthStencilAttachment=Ri,Pr.color=zi.map(Ft),Pr.depth=Ft(Sr),Pr.stencil=Ft(wi),Pr.depthStencil=Ft(Ri),Pr.width=nn.width,Pr.height=nn.height,ln(nn),Pr}function Yr(nr,mi){Te(Lt.next!==nn,"can not resize a framebuffer which is currently in use");var Ur=Math.max(nr|0,1),oi=Math.max(mi|0||Ur,1);if(Ur===nn.width&&oi===nn.height)return Pr;for(var Ii=nn.colorAttachments,os=0;os<Ii.length;++os)yn(Ii[os],Ur,oi);return yn(nn.depthAttachment,Ur,oi),yn(nn.stencilAttachment,Ur,oi),yn(nn.depthStencilAttachment,Ur,oi),nn.width=Pr.width=Ur,nn.height=Pr.height=oi,ln(nn),Pr}return Pr(Nn,Cn),M(Pr,{resize:Yr,_reglType:"framebuffer",_framebuffer:nn,destroy:function(){Pn(nn),qt(nn)},use:function(nr){Lt.setFBO({framebuffer:Pr},nr)}})}function yr(Nn){var Cn=Array(6);function nn(Yr){var nr;Te(Cn.indexOf(Lt.next)<0,"can not update framebuffer which is currently in use");var mi={color:null},Ur=0,oi=null,Ii="rgba",os="uint8",ps=1;if(typeof Yr=="number")Ur=Yr|0;else if(!Yr)Ur=1;else{Te.type(Yr,"object","invalid arguments for framebuffer");var di=Yr;if("shape"in di){var gs=di.shape;Te(Array.isArray(gs)&&gs.length>=2,"invalid shape for framebuffer"),Te(gs[0]===gs[1],"cube framebuffer must be square"),Ur=gs[0]}else"radius"in di&&(Ur=di.radius|0),"width"in di?(Ur=di.width|0,"height"in di&&Te(di.height===Ur,"must be square")):"height"in di&&(Ur=di.height|0);("color"in di||"colors"in di)&&(oi=di.color||di.colors,Array.isArray(oi)&&Te(oi.length===1||Me.webgl_draw_buffers,"multiple render targets not supported")),oi||("colorCount"in di&&(ps=di.colorCount|0,Te(ps>0,"invalid color buffer count")),"colorType"in di&&(Te.oneOf(di.colorType,pn,"invalid color type"),os=di.colorType),"colorFormat"in di&&(Ii=di.colorFormat,Te.oneOf(di.colorFormat,on,"invalid color format for texture"))),"depth"in di&&(mi.depth=di.depth),"stencil"in di&&(mi.stencil=di.stencil),"depthStencil"in di&&(mi.depthStencil=di.depthStencil)}var Eo;if(oi)if(Array.isArray(oi))for(Eo=[],nr=0;nr<oi.length;++nr)Eo[nr]=oi[nr];else Eo=[oi];else{Eo=Array(ps);var Mo={radius:Ur,format:Ii,type:os};for(nr=0;nr<ps;++nr)Eo[nr]=Tt.createCube(Mo)}for(mi.color=Array(Eo.length),nr=0;nr<Eo.length;++nr){var ss=Eo[nr];Te(typeof ss=="function"&&ss._reglType==="textureCube","invalid cube map"),Ur=Ur||ss.width,Te(ss.width===Ur&&ss.height===Ur,"invalid cube map shape"),mi.color[nr]={target:Td,data:Eo[nr]}}for(nr=0;nr<6;++nr){for(var Ss=0;Ss<Eo.length;++Ss)mi.color[Ss].target=Td+nr;nr>0&&(mi.depth=Cn[0].depth,mi.stencil=Cn[0].stencil,mi.depthStencil=Cn[0].depthStencil),Cn[nr]?Cn[nr](mi):Cn[nr]=Dn(mi)}return M(nn,{width:Ur,height:Ur,color:Eo})}function Pr(Yr){var nr,mi=Yr|0;if(Te(mi>0&&mi<=He.maxCubeMapSize,"invalid radius for cube fbo"),mi===nn.width)return nn;var Ur=nn.color;for(nr=0;nr<Ur.length;++nr)Ur[nr].resize(mi);for(nr=0;nr<6;++nr)Cn[nr].resize(mi);return nn.width=nn.height=mi,nn}return nn(Nn),M(nn,{faces:Cn,resize:Pr,_reglType:"framebufferCube",destroy:function(){Cn.forEach(function(Yr){Yr.destroy()})}})}function Fr(){Lt.cur=null,Lt.next=null,Lt.dirty=!0,Cs(sn).forEach(function(Nn){Nn.framebuffer=K.createFramebuffer(),ln(Nn)})}return M(Lt,{getFramebuffer:function(Nn){if(typeof Nn=="function"&&Nn._reglType==="framebuffer"){var Cn=Nn._framebuffer;if(Cn instanceof $n)return Cn}return null},create:Dn,createCube:yr,clear:function(){Cs(sn).forEach(Pn)},restore:Fr})}var Hl=5126,W0=34962;function jo(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Hl,this.offset=0,this.stride=0,this.divisor=0}function to(K,Me,He,Tt,yt){for(var St=He.maxAttributes,Lt=new Array(St),on=0;on<St;++on)Lt[on]=new jo;var gn=0,pn={},vn={Record:jo,scope:{},state:Lt,currentVAO:null,targetVAO:null,restore:Bn()?sn:function(){},createVAO:$n,getVAO:Mn,destroyBuffer:un,setVAO:Bn()?mt:Ft,clear:Bn()?yn:function(){}};function un(qt){for(var Pn=0;Pn<Lt.length;++Pn){var ln=Lt[Pn];ln.buffer===qt&&(K.disableVertexAttribArray(Pn),ln.buffer=null)}}function Bn(){return Me.oes_vertex_array_object}function fn(){return Me.angle_instanced_arrays}function Mn(qt){return typeof qt=="function"&&qt._vao?qt._vao:null}function mt(qt){if(qt!==vn.currentVAO){var Pn=Bn();qt?Pn.bindVertexArrayOES(qt.vao):Pn.bindVertexArrayOES(null),vn.currentVAO=qt}}function Ft(qt){if(qt!==vn.currentVAO){if(qt)qt.bindAttrs();else for(var Pn=fn(),ln=0;ln<Lt.length;++ln){var Dn=Lt[ln];Dn.buffer?(K.enableVertexAttribArray(ln),K.vertexAttribPointer(ln,Dn.size,Dn.type,Dn.normalized,Dn.stride,Dn.offfset),Pn&&Dn.divisor&&Pn.vertexAttribDivisorANGLE(ln,Dn.divisor)):(K.disableVertexAttribArray(ln),K.vertexAttrib4f(ln,Dn.x,Dn.y,Dn.z,Dn.w))}vn.currentVAO=qt}}function yn(){Cs(pn).forEach(function(qt){qt.destroy()})}function Xn(){this.id=++gn,this.attributes=[];var qt=Bn();qt?this.vao=qt.createVertexArrayOES():this.vao=null,pn[this.id]=this,this.buffers=[]}Xn.prototype.bindAttrs=function(){for(var qt=fn(),Pn=this.attributes,ln=0;ln<Pn.length;++ln){var Dn=Pn[ln];Dn.buffer?(K.enableVertexAttribArray(ln),K.bindBuffer(W0,Dn.buffer.buffer),K.vertexAttribPointer(ln,Dn.size,Dn.type,Dn.normalized,Dn.stride,Dn.offset),qt&&Dn.divisor&&qt.vertexAttribDivisorANGLE(ln,Dn.divisor)):(K.disableVertexAttribArray(ln),K.vertexAttrib4f(ln,Dn.x,Dn.y,Dn.z,Dn.w))}for(var yr=Pn.length;yr<St;++yr)K.disableVertexAttribArray(yr)},Xn.prototype.refresh=function(){var qt=Bn();qt&&(qt.bindVertexArrayOES(this.vao),this.bindAttrs(),vn.currentVAO=this)},Xn.prototype.destroy=function(){if(this.vao){var qt=Bn();this===vn.currentVAO&&(vn.currentVAO=null,qt.bindVertexArrayOES(null)),qt.deleteVertexArrayOES(this.vao),this.vao=null}pn[this.id]&&(delete pn[this.id],Tt.vaoCount-=1)};function sn(){var qt=Bn();qt&&Cs(pn).forEach(function(Pn){Pn.refresh()})}function $n(qt){var Pn=new Xn;Tt.vaoCount+=1;function ln(Dn){Te(Array.isArray(Dn),"arguments to vertex array constructor must be an array"),Te(Dn.length<St,"too many attributes"),Te(Dn.length>0,"must specify at least one attribute");var yr={},Fr=Pn.attributes;Fr.length=Dn.length;for(var Nn=0;Nn<Dn.length;++Nn){var Cn=Dn[Nn],nn=Fr[Nn]=new jo,Pr=Cn.data||Cn;if(Array.isArray(Pr)||L(Pr)||Hs(Pr)){var Yr;Pn.buffers[Nn]&&(Yr=Pn.buffers[Nn],L(Pr)&&Yr._buffer.byteLength>=Pr.byteLength?Yr.subdata(Pr):(Yr.destroy(),Pn.buffers[Nn]=null)),Pn.buffers[Nn]||(Yr=Pn.buffers[Nn]=yt.create(Cn,W0,!1,!0)),nn.buffer=yt.getBuffer(Yr),nn.size=nn.buffer.dimension|0,nn.normalized=!1,nn.type=nn.buffer.dtype,nn.offset=0,nn.stride=0,nn.divisor=0,nn.state=1,yr[Nn]=1}else yt.getBuffer(Cn)?(nn.buffer=yt.getBuffer(Cn),nn.size=nn.buffer.dimension|0,nn.normalized=!1,nn.type=nn.buffer.dtype,nn.offset=0,nn.stride=0,nn.divisor=0,nn.state=1):yt.getBuffer(Cn.buffer)?(nn.buffer=yt.getBuffer(Cn.buffer),nn.size=(+Cn.size||nn.buffer.dimension)|0,nn.normalized=!!Cn.normalized||!1,"type"in Cn?(Te.parameter(Cn.type,$s,"invalid buffer type"),nn.type=$s[Cn.type]):nn.type=nn.buffer.dtype,nn.offset=(Cn.offset||0)|0,nn.stride=(Cn.stride||0)|0,nn.divisor=(Cn.divisor||0)|0,nn.state=1,Te(nn.size>=1&&nn.size<=4,"size must be between 1 and 4"),Te(nn.offset>=0,"invalid offset"),Te(nn.stride>=0&&nn.stride<=255,"stride must be between 0 and 255"),Te(nn.divisor>=0,"divisor must be positive"),Te(!nn.divisor||!!Me.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Cn?(Te(Nn>0,"first attribute must not be a constant"),nn.x=+Cn.x||0,nn.y=+Cn.y||0,nn.z=+Cn.z||0,nn.w=+Cn.w||0,nn.state=2):Te(!1,"invalid attribute spec for location "+Nn)}for(var nr=0;nr<Pn.buffers.length;++nr)!yr[nr]&&Pn.buffers[nr]&&(Pn.buffers[nr].destroy(),Pn.buffers[nr]=null);return Pn.refresh(),ln}return ln.destroy=function(){for(var Dn=0;Dn<Pn.buffers.length;++Dn)Pn.buffers[Dn]&&Pn.buffers[Dn].destroy();Pn.buffers.length=0,Pn.destroy()},ln._vao=Pn,ln._reglType="vao",ln(qt)}return vn}var wh=35632,Pd=35633,Cp=35718,wp=35721;function Ep(K,Me,He,Tt){var yt={},St={};function Lt(mt,Ft,yn,Xn){this.name=mt,this.id=Ft,this.location=yn,this.info=Xn}function on(mt,Ft){for(var yn=0;yn<mt.length;++yn)if(mt[yn].id===Ft.id){mt[yn].location=Ft.location;return}mt.push(Ft)}function gn(mt,Ft,yn){var Xn=mt===wh?yt:St,sn=Xn[Ft];if(!sn){var $n=Me.str(Ft);sn=K.createShader(mt),K.shaderSource(sn,$n),K.compileShader(sn),Te.shaderError(K,sn,$n,mt,yn),Xn[Ft]=sn}return sn}var pn={},vn=[],un=0;function Bn(mt,Ft){this.id=un++,this.fragId=mt,this.vertId=Ft,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Tt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function fn(mt,Ft,yn){var Xn,sn,$n=gn(wh,mt.fragId),qt=gn(Pd,mt.vertId),Pn=mt.program=K.createProgram();if(K.attachShader(Pn,$n),K.attachShader(Pn,qt),yn)for(Xn=0;Xn<yn.length;++Xn){var ln=yn[Xn];K.bindAttribLocation(Pn,ln[0],ln[1])}K.linkProgram(Pn),Te.linkError(K,Pn,Me.str(mt.fragId),Me.str(mt.vertId),Ft);var Dn=K.getProgramParameter(Pn,Cp);Tt.profile&&(mt.stats.uniformsCount=Dn);var yr=mt.uniforms;for(Xn=0;Xn<Dn;++Xn)if(sn=K.getActiveUniform(Pn,Xn),sn)if(sn.size>1)for(var Fr=0;Fr<sn.size;++Fr){var Nn=sn.name.replace("[0]","["+Fr+"]");on(yr,new Lt(Nn,Me.id(Nn),K.getUniformLocation(Pn,Nn),sn))}else on(yr,new Lt(sn.name,Me.id(sn.name),K.getUniformLocation(Pn,sn.name),sn));var Cn=K.getProgramParameter(Pn,wp);Tt.profile&&(mt.stats.attributesCount=Cn);var nn=mt.attributes;for(Xn=0;Xn<Cn;++Xn)sn=K.getActiveAttrib(Pn,Xn),sn&&on(nn,new Lt(sn.name,Me.id(sn.name),K.getAttribLocation(Pn,sn.name),sn))}Tt.profile&&(He.getMaxUniformsCount=function(){var mt=0;return vn.forEach(function(Ft){Ft.stats.uniformsCount>mt&&(mt=Ft.stats.uniformsCount)}),mt},He.getMaxAttributesCount=function(){var mt=0;return vn.forEach(function(Ft){Ft.stats.attributesCount>mt&&(mt=Ft.stats.attributesCount)}),mt});function Mn(){yt={},St={};for(var mt=0;mt<vn.length;++mt)fn(vn[mt],null,vn[mt].attributes.map(function(Ft){return[Ft.location,Ft.name]}))}return{clear:function(){var mt=K.deleteShader.bind(K);Cs(yt).forEach(mt),yt={},Cs(St).forEach(mt),St={},vn.forEach(function(Ft){K.deleteProgram(Ft.program)}),vn.length=0,pn={},He.shaderCount=0},program:function(mt,Ft,yn,Xn){Te.command(mt>=0,"missing vertex shader",yn),Te.command(Ft>=0,"missing fragment shader",yn);var sn=pn[Ft];sn||(sn=pn[Ft]={});var $n=sn[mt];if($n&&($n.refCount++,!Xn))return $n;var qt=new Bn(Ft,mt);return He.shaderCount++,fn(qt,yn,Xn),$n||(sn[mt]=qt),vn.push(qt),M(qt,{destroy:function(){if(qt.refCount--,qt.refCount<=0){K.deleteProgram(qt.program);var Pn=vn.indexOf(qt);vn.splice(Pn,1),He.shaderCount--}sn[qt.vertId].refCount<=0&&(K.deleteShader(St[qt.vertId]),delete St[qt.vertId],delete pn[qt.fragId][qt.vertId]),Object.keys(pn[qt.fragId]).length||(K.deleteShader(yt[qt.fragId]),delete yt[qt.fragId],delete pn[qt.fragId])}})},restore:Mn,shader:gn,frag:-1,vert:-1}}var fo=6408,Ol=5121,Ef=3333,kc=5126;function Lc(K,Me,He,Tt,yt,St,Lt){function on(vn){var un;Me.next===null?(Te(yt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),un=Ol):(Te(Me.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),un=Me.next.colorAttachments[0].texture._texture.type,St.oes_texture_float?(Te(un===Ol||un===kc,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),un===kc&&Te(Lt.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Te(un===Ol,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Bn=0,fn=0,Mn=Tt.framebufferWidth,mt=Tt.framebufferHeight,Ft=null;L(vn)?Ft=vn:vn&&(Te.type(vn,"object","invalid arguments to regl.read()"),Bn=vn.x|0,fn=vn.y|0,Te(Bn>=0&&Bn<Tt.framebufferWidth,"invalid x offset for regl.read"),Te(fn>=0&&fn<Tt.framebufferHeight,"invalid y offset for regl.read"),Mn=(vn.width||Tt.framebufferWidth-Bn)|0,mt=(vn.height||Tt.framebufferHeight-fn)|0,Ft=vn.data||null),Ft&&(un===Ol?Te(Ft instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):un===kc&&Te(Ft instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Te(Mn>0&&Mn+Bn<=Tt.framebufferWidth,"invalid width for read pixels"),Te(mt>0&&mt+fn<=Tt.framebufferHeight,"invalid height for read pixels"),He();var yn=Mn*mt*4;return Ft||(un===Ol?Ft=new Uint8Array(yn):un===kc&&(Ft=Ft||new Float32Array(yn))),Te.isTypedArray(Ft,"data buffer for regl.read() must be a typedarray"),Te(Ft.byteLength>=yn,"data buffer for regl.read() too small"),K.pixelStorei(Ef,4),K.readPixels(Bn,fn,Mn,mt,fo,un,Ft),Ft}function gn(vn){var un;return Me.setFBO({framebuffer:vn.framebuffer},function(){un=on(vn)}),un}function pn(vn){return!vn||!("framebuffer"in vn)?on(vn):gn(vn)}return pn}function vl(K){return Array.prototype.slice.call(K)}function Ka(K){return vl(K).join("")}function Lg(){var K=0,Me=[],He=[];function Tt(un){for(var Bn=0;Bn<He.length;++Bn)if(He[Bn]===un)return Me[Bn];var fn="g"+K++;return Me.push(fn),He.push(un),fn}function yt(){var un=[];function Bn(){un.push.apply(un,vl(arguments))}var fn=[];function Mn(){var mt="v"+K++;return fn.push(mt),arguments.length>0&&(un.push(mt,"="),un.push.apply(un,vl(arguments)),un.push(";")),mt}return M(Bn,{def:Mn,toString:function(){return Ka([fn.length>0?"var "+fn.join(",")+";":"",Ka(un)])}})}function St(){var un=yt(),Bn=yt(),fn=un.toString,Mn=Bn.toString;function mt(Ft,yn){Bn(Ft,yn,"=",un.def(Ft,yn),";")}return M(function(){un.apply(un,vl(arguments))},{def:un.def,entry:un,exit:Bn,save:mt,set:function(Ft,yn,Xn){mt(Ft,yn),un(Ft,yn,"=",Xn,";")},toString:function(){return fn()+Mn()}})}function Lt(){var un=Ka(arguments),Bn=St(),fn=St(),Mn=Bn.toString,mt=fn.toString;return M(Bn,{then:function(){return Bn.apply(Bn,vl(arguments)),this},else:function(){return fn.apply(fn,vl(arguments)),this},toString:function(){var Ft=mt();return Ft&&(Ft="else{"+Ft+"}"),Ka(["if(",un,"){",Mn(),"}",Ft])}})}var on=yt(),gn={};function pn(un,Bn){var fn=[];function Mn(){var sn="a"+fn.length;return fn.push(sn),sn}Bn=Bn||0;for(var mt=0;mt<Bn;++mt)Mn();var Ft=St(),yn=Ft.toString,Xn=gn[un]=M(Ft,{arg:Mn,toString:function(){return Ka(["function(",fn.join(),"){",yn(),"}"])}});return Xn}function vn(){var un=['"use strict";',on,"return {"];Object.keys(gn).forEach(function(Mn){un.push('"',Mn,'":',gn[Mn].toString(),",")}),un.push("}");var Bn=Ka(un).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),fn=Function.apply(null,Me.concat(Bn));return fn.apply(null,He)}return{global:on,link:Tt,block:yt,proc:pn,scope:St,cond:Lt,compile:vn}}var Pl="xyzw".split(""),zu=5121,Ho=1,cu=2,$l=0,Fs=1,Eh=2,Dd=3,Uu=4,uu=5,Wl=6,Gg="dither",Sf="blend.enable",_f="blend.color",Af="blend.equation",Sp="blend.func",ua="depth.enable",_p="depth.func",Ap="depth.range",dc="depth.mask",Dl="colorMask",Tf="cull.enable",Nl="cull.face",Fg="frontFace",qs="lineWidth",Tp="polygonOffset.enable",Sh="polygonOffset.offset",Mf="sample.alpha",Gc="sample.enable",Of="sample.coverage",Pf="stencil.enable",Xl="stencil.mask",du="stencil.func",hu="stencil.opFront",Vu="stencil.opBack",ju="scissor.enable",Nd="scissor.box",fu="viewport",Hu="profile",Zl="framebuffer",ml="vert",_h="frag",Id="elements",Il="primitive",$u="count",Mp="offset",pu="instances",qa="vao",Yl="Width",Rd="Height",Rl=Zl+Yl,hc=Zl+Rd,Wu=fu+Yl,Df=fu+Rd,Bg="drawingBuffer",Ah=Bg+Yl,Xu=Bg+Rd,Zu=[Sp,Af,du,hu,Vu,Of,fu,Nd,Sh],Kl=34962,kd=34963,Op=35632,Ld=35633,_i=3553,Nf=34067,If=2884,gu=3042,Rf=3024,Pp=2960,X0=2929,ql=3089,Dp=32823,Yu=32926,Th=32928,Ku=5126,Fc=35664,Bs=35665,Ea=35666,kf=5124,Lf=35667,Mh=35668,Ns=35669,Jn=35670,qu=35671,Gf=35672,yl=35673,La=35674,Ci=35675,Ga=35676,Ju=35678,Qu=35680,Ff=4,Jl=1028,Bc=1029,To=2304,fc=2305,Np=32775,nb=32776,gm=519,Go=7680,Ja=0,Fa=1,Z0=32774,vm=513,Oh=36160,Ph=36064,pc={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ip=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Dh={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},is={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Gd={frag:Op,vert:Ld},Fd={cw:To,ccw:fc};function Rp(K){return Array.isArray(K)||L(K)||Hs(K)}function zg(K){return K.sort(function(Me,He){return Me===fu?-1:He===fu?1:Me<He?-1:1})}function Ba(K,Me,He,Tt){this.thisDep=K,this.contextDep=Me,this.propDep=He,this.append=Tt}function Ql(K){return K&&!(K.thisDep||K.contextDep||K.propDep)}function fs(K){return new Ba(!1,!1,!1,K)}function Sa(K,Me){var He=K.type;if(He===$l){var Tt=K.data.length;return new Ba(!0,Tt>=1,Tt>=2,Me)}else if(He===Uu){var yt=K.data;return new Ba(yt.thisDep,yt.contextDep,yt.propDep,Me)}else{if(He===uu)return new Ba(!1,!1,!1,Me);if(He===Wl){for(var St=!1,Lt=!1,on=!1,gn=0;gn<K.data.length;++gn){var pn=K.data[gn];if(pn.type===Fs)on=!0;else if(pn.type===Eh)Lt=!0;else if(pn.type===Dd)St=!0;else if(pn.type===$l){St=!0;var vn=pn.data;vn>=1&&(Lt=!0),vn>=2&&(on=!0)}else pn.type===Uu&&(St=St||pn.data.thisDep,Lt=Lt||pn.data.contextDep,on=on||pn.data.propDep)}return new Ba(St,Lt,on,Me)}else return new Ba(He===Dd,He===Eh,He===Fs,Me)}}var kp=new Ba(!1,!1,!1,function(){});function Lp(K,Me,He,Tt,yt,St,Lt,on,gn,pn,vn,un,Bn,fn,Mn){var mt=pn.Record,Ft={add:32774,subtract:32778,"reverse subtract":32779};He.ext_blend_minmax&&(Ft.min=Np,Ft.max=nb);var yn=He.angle_instanced_arrays,Xn=He.webgl_draw_buffers,sn={dirty:!0,profile:Mn.profile},$n={},qt=[],Pn={},ln={};function Dn(Fe){return Fe.replace(".","_")}function yr(Fe,Ce,Je){var pt=Dn(Fe);qt.push(Fe),$n[pt]=sn[pt]=!!Je,Pn[pt]=Ce}function Fr(Fe,Ce,Je){var pt=Dn(Fe);qt.push(Fe),Array.isArray(Je)?(sn[pt]=Je.slice(),$n[pt]=Je.slice()):sn[pt]=$n[pt]=Je,ln[pt]=Ce}yr(Gg,Rf),yr(Sf,gu),Fr(_f,"blendColor",[0,0,0,0]),Fr(Af,"blendEquationSeparate",[Z0,Z0]),Fr(Sp,"blendFuncSeparate",[Fa,Ja,Fa,Ja]),yr(ua,X0,!0),Fr(_p,"depthFunc",vm),Fr(Ap,"depthRange",[0,1]),Fr(dc,"depthMask",!0),Fr(Dl,Dl,[!0,!0,!0,!0]),yr(Tf,If),Fr(Nl,"cullFace",Bc),Fr(Fg,Fg,fc),Fr(qs,qs,1),yr(Tp,Dp),Fr(Sh,"polygonOffset",[0,0]),yr(Mf,Yu),yr(Gc,Th),Fr(Of,"sampleCoverage",[1,!1]),yr(Pf,Pp),Fr(Xl,"stencilMask",-1),Fr(du,"stencilFunc",[gm,0,-1]),Fr(hu,"stencilOpSeparate",[Jl,Go,Go,Go]),Fr(Vu,"stencilOpSeparate",[Bc,Go,Go,Go]),yr(ju,ql),Fr(Nd,"scissor",[0,0,K.drawingBufferWidth,K.drawingBufferHeight]),Fr(fu,fu,[0,0,K.drawingBufferWidth,K.drawingBufferHeight]);var Nn={gl:K,context:Bn,strings:Me,next:$n,current:sn,draw:un,elements:St,buffer:yt,shader:vn,attributes:pn.state,vao:pn,uniforms:gn,framebuffer:on,extensions:He,timer:fn,isBufferArgs:Rp},Cn={primTypes:U,compareFuncs:Dh,blendFuncs:pc,blendEquations:Ft,stencilOps:is,glTypes:$s,orientationType:Fd};Te.optional(function(){Nn.isArrayLike=$r}),Xn&&(Cn.backBuffer=[Bc],Cn.drawBuffer=cs(Tt.maxDrawbuffers,function(Fe){return Fe===0?[0]:cs(Fe,function(Ce){return Ph+Ce})}));var nn=0;function Pr(){var Fe=Lg(),Ce=Fe.link,Je=Fe.global;Fe.id=nn++,Fe.batchId="0";var pt=Ce(Nn),gt=Fe.shared={props:"a0"};Object.keys(Nn).forEach(function(Ye){gt[Ye]=Je.def(pt,".",Ye)}),Te.optional(function(){Fe.CHECK=Ce(Te),Fe.commandStr=Te.guessCommand(),Fe.command=Ce(Fe.commandStr),Fe.assert=function(Ye,Ie,st){Ye("if(!(",Ie,"))",this.CHECK,".commandRaise(",Ce(st),",",this.command,");")},Cn.invalidBlendCombinations=Ip});var et=Fe.next={},Ze=Fe.current={};Object.keys(ln).forEach(function(Ye){Array.isArray(sn[Ye])&&(et[Ye]=Je.def(gt.next,".",Ye),Ze[Ye]=Je.def(gt.current,".",Ye))});var lt=Fe.constants={};Object.keys(Cn).forEach(function(Ye){lt[Ye]=Je.def(JSON.stringify(Cn[Ye]))}),Fe.invoke=function(Ye,Ie){switch(Ie.type){case $l:var st=["this",gt.context,gt.props,Fe.batchId];return Ye.def(Ce(Ie.data),".call(",st.slice(0,Math.max(Ie.data.length+1,4)),")");case Fs:return Ye.def(gt.props,Ie.data);case Eh:return Ye.def(gt.context,Ie.data);case Dd:return Ye.def("this",Ie.data);case Uu:return Ie.data.append(Fe,Ye),Ie.data.ref;case uu:return Ie.data.toString();case Wl:return Ie.data.map(function(Ct){return Fe.invoke(Ye,Ct)})}},Fe.attribCache={};var Ge={};return Fe.scopeAttrib=function(Ye){var Ie=Me.id(Ye);if(Ie in Ge)return Ge[Ie];var st=pn.scope[Ie];st||(st=pn.scope[Ie]=new mt);var Ct=Ge[Ie]=Ce(st);return Ct},Fe}function Yr(Fe){var Ce=Fe.static,Je=Fe.dynamic,pt;if(Hu in Ce){var gt=!!Ce[Hu];pt=fs(function(Ze,lt){return gt}),pt.enable=gt}else if(Hu in Je){var et=Je[Hu];pt=Sa(et,function(Ze,lt){return Ze.invoke(lt,et)})}return pt}function nr(Fe,Ce){var Je=Fe.static,pt=Fe.dynamic;if(Zl in Je){var gt=Je[Zl];return gt?(gt=on.getFramebuffer(gt),Te.command(gt,"invalid framebuffer object"),fs(function(Ze,lt){var Ge=Ze.link(gt),Ye=Ze.shared;lt.set(Ye.framebuffer,".next",Ge);var Ie=Ye.context;return lt.set(Ie,"."+Rl,Ge+".width"),lt.set(Ie,"."+hc,Ge+".height"),Ge})):fs(function(Ze,lt){var Ge=Ze.shared;lt.set(Ge.framebuffer,".next","null");var Ye=Ge.context;return lt.set(Ye,"."+Rl,Ye+"."+Ah),lt.set(Ye,"."+hc,Ye+"."+Xu),"null"})}else if(Zl in pt){var et=pt[Zl];return Sa(et,function(Ze,lt){var Ge=Ze.invoke(lt,et),Ye=Ze.shared,Ie=Ye.framebuffer,st=lt.def(Ie,".getFramebuffer(",Ge,")");Te.optional(function(){Ze.assert(lt,"!"+Ge+"||"+st,"invalid framebuffer object")}),lt.set(Ie,".next",st);var Ct=Ye.context;return lt.set(Ct,"."+Rl,st+"?"+st+".width:"+Ct+"."+Ah),lt.set(Ct,"."+hc,st+"?"+st+".height:"+Ct+"."+Xu),st})}else return null}function mi(Fe,Ce,Je){var pt=Fe.static,gt=Fe.dynamic;function et(Ge){if(Ge in pt){var Ye=pt[Ge];Te.commandType(Ye,"object","invalid "+Ge,Je.commandStr);var Ie=!0,st=Ye.x|0,Ct=Ye.y|0,$t,Xt;return"width"in Ye?($t=Ye.width|0,Te.command($t>=0,"invalid "+Ge,Je.commandStr)):Ie=!1,"height"in Ye?(Xt=Ye.height|0,Te.command(Xt>=0,"invalid "+Ge,Je.commandStr)):Ie=!1,new Ba(!Ie&&Ce&&Ce.thisDep,!Ie&&Ce&&Ce.contextDep,!Ie&&Ce&&Ce.propDep,function(cr,Qr){var er=cr.shared.context,xr=$t;"width"in Ye||(xr=Qr.def(er,".",Rl,"-",st));var sr=Xt;return"height"in Ye||(sr=Qr.def(er,".",hc,"-",Ct)),[st,Ct,xr,sr]})}else if(Ge in gt){var zt=gt[Ge],bn=Sa(zt,function(cr,Qr){var er=cr.invoke(Qr,zt);Te.optional(function(){cr.assert(Qr,er+"&&typeof "+er+'==="object"',"invalid "+Ge)});var xr=cr.shared.context,sr=Qr.def(er,".x|0"),Bi=Qr.def(er,".y|0"),Ko=Qr.def('"width" in ',er,"?",er,".width|0:","(",xr,".",Rl,"-",sr,")"),tl=Qr.def('"height" in ',er,"?",er,".height|0:","(",xr,".",hc,"-",Bi,")");return Te.optional(function(){cr.assert(Qr,Ko+">=0&&"+tl+">=0","invalid "+Ge)}),[sr,Bi,Ko,tl]});return Ce&&(bn.thisDep=bn.thisDep||Ce.thisDep,bn.contextDep=bn.contextDep||Ce.contextDep,bn.propDep=bn.propDep||Ce.propDep),bn}else return Ce?new Ba(Ce.thisDep,Ce.contextDep,Ce.propDep,function(cr,Qr){var er=cr.shared.context;return[0,0,Qr.def(er,".",Rl),Qr.def(er,".",hc)]}):null}var Ze=et(fu);if(Ze){var lt=Ze;Ze=new Ba(Ze.thisDep,Ze.contextDep,Ze.propDep,function(Ge,Ye){var Ie=lt.append(Ge,Ye),st=Ge.shared.context;return Ye.set(st,"."+Wu,Ie[2]),Ye.set(st,"."+Df,Ie[3]),Ie})}return{viewport:Ze,scissor_box:et(Nd)}}function Ur(Fe,Ce){var Je=Fe.static,pt=typeof Je[_h]=="string"&&typeof Je[ml]=="string";if(pt){if(Object.keys(Ce.dynamic).length>0)return null;var gt=Ce.static,et=Object.keys(gt);if(et.length>0&&typeof gt[et[0]]=="number"){for(var Ze=[],lt=0;lt<et.length;++lt)Te(typeof gt[et[lt]]=="number","must specify all vertex attribute locations when using vaos"),Ze.push([gt[et[lt]]|0,et[lt]]);return Ze}}return null}function oi(Fe,Ce,Je){var pt=Fe.static,gt=Fe.dynamic;function et(Ie){if(Ie in pt){var st=Me.id(pt[Ie]);Te.optional(function(){vn.shader(Gd[Ie],st,Te.guessCommand())});var Ct=fs(function(){return st});return Ct.id=st,Ct}else if(Ie in gt){var $t=gt[Ie];return Sa($t,function(Xt,zt){var bn=Xt.invoke(zt,$t),cr=zt.def(Xt.shared.strings,".id(",bn,")");return Te.optional(function(){zt(Xt.shared.shader,".shader(",Gd[Ie],",",cr,",",Xt.command,");")}),cr})}return null}var Ze=et(_h),lt=et(ml),Ge=null,Ye;return Ql(Ze)&&Ql(lt)?(Ge=vn.program(lt.id,Ze.id,null,Je),Ye=fs(function(Ie,st){return Ie.link(Ge)})):Ye=new Ba(Ze&&Ze.thisDep||lt&&lt.thisDep,Ze&&Ze.contextDep||lt&&lt.contextDep,Ze&&Ze.propDep||lt&&lt.propDep,function(Ie,st){var Ct=Ie.shared.shader,$t;Ze?$t=Ze.append(Ie,st):$t=st.def(Ct,".",_h);var Xt;lt?Xt=lt.append(Ie,st):Xt=st.def(Ct,".",ml);var zt=Ct+".program("+Xt+","+$t;return Te.optional(function(){zt+=","+Ie.command}),st.def(zt+")")}),{frag:Ze,vert:lt,progVar:Ye,program:Ge}}function Ii(Fe,Ce){var Je=Fe.static,pt=Fe.dynamic;function gt(){if(Id in Je){var Ie=Je[Id];Rp(Ie)?Ie=St.getElements(St.create(Ie,!0)):Ie&&(Ie=St.getElements(Ie),Te.command(Ie,"invalid elements",Ce.commandStr));var st=fs(function($t,Xt){if(Ie){var zt=$t.link(Ie);return $t.ELEMENTS=zt,zt}return $t.ELEMENTS=null,null});return st.value=Ie,st}else if(Id in pt){var Ct=pt[Id];return Sa(Ct,function($t,Xt){var zt=$t.shared,bn=zt.isBufferArgs,cr=zt.elements,Qr=$t.invoke(Xt,Ct),er=Xt.def("null"),xr=Xt.def(bn,"(",Qr,")"),sr=$t.cond(xr).then(er,"=",cr,".createStream(",Qr,");").else(er,"=",cr,".getElements(",Qr,");");return Te.optional(function(){$t.assert(sr.else,"!"+Qr+"||"+er,"invalid elements")}),Xt.entry(sr),Xt.exit($t.cond(xr).then(cr,".destroyStream(",er,");")),$t.ELEMENTS=er,er})}return null}var et=gt();function Ze(){if(Il in Je){var Ie=Je[Il];return Te.commandParameter(Ie,U,"invalid primitve",Ce.commandStr),fs(function(Ct,$t){return U[Ie]})}else if(Il in pt){var st=pt[Il];return Sa(st,function(Ct,$t){var Xt=Ct.constants.primTypes,zt=Ct.invoke($t,st);return Te.optional(function(){Ct.assert($t,zt+" in "+Xt,"invalid primitive, must be one of "+Object.keys(U))}),$t.def(Xt,"[",zt,"]")})}else if(et)return Ql(et)?et.value?fs(function(Ct,$t){return $t.def(Ct.ELEMENTS,".primType")}):fs(function(){return Ff}):new Ba(et.thisDep,et.contextDep,et.propDep,function(Ct,$t){var Xt=Ct.ELEMENTS;return $t.def(Xt,"?",Xt,".primType:",Ff)});return null}function lt(Ie,st){if(Ie in Je){var Ct=Je[Ie]|0;return Te.command(!st||Ct>=0,"invalid "+Ie,Ce.commandStr),fs(function(Xt,zt){return st&&(Xt.OFFSET=Ct),Ct})}else if(Ie in pt){var $t=pt[Ie];return Sa($t,function(Xt,zt){var bn=Xt.invoke(zt,$t);return st&&(Xt.OFFSET=bn,Te.optional(function(){Xt.assert(zt,bn+">=0","invalid "+Ie)})),bn})}else if(st&&et)return fs(function(Xt,zt){return Xt.OFFSET="0",0});return null}var Ge=lt(Mp,!0);function Ye(){if($u in Je){var Ie=Je[$u]|0;return Te.command(typeof Ie=="number"&&Ie>=0,"invalid vertex count",Ce.commandStr),fs(function(){return Ie})}else if($u in pt){var st=pt[$u];return Sa(st,function(Xt,zt){var bn=Xt.invoke(zt,st);return Te.optional(function(){Xt.assert(zt,"typeof "+bn+'==="number"&&'+bn+">=0&&"+bn+"===("+bn+"|0)","invalid vertex count")}),bn})}else if(et)if(Ql(et)){if(et)return Ge?new Ba(Ge.thisDep,Ge.contextDep,Ge.propDep,function(Xt,zt){var bn=zt.def(Xt.ELEMENTS,".vertCount-",Xt.OFFSET);return Te.optional(function(){Xt.assert(zt,bn+">=0","invalid vertex offset/element buffer too small")}),bn}):fs(function(Xt,zt){return zt.def(Xt.ELEMENTS,".vertCount")});var Ct=fs(function(){return-1});return Te.optional(function(){Ct.MISSING=!0}),Ct}else{var $t=new Ba(et.thisDep||Ge.thisDep,et.contextDep||Ge.contextDep,et.propDep||Ge.propDep,function(Xt,zt){var bn=Xt.ELEMENTS;return Xt.OFFSET?zt.def(bn,"?",bn,".vertCount-",Xt.OFFSET,":-1"):zt.def(bn,"?",bn,".vertCount:-1")});return Te.optional(function(){$t.DYNAMIC=!0}),$t}return null}return{elements:et,primitive:Ze(),count:Ye(),instances:lt(pu,!1),offset:Ge}}function os(Fe,Ce){var Je=Fe.static,pt=Fe.dynamic,gt={};return qt.forEach(function(et){var Ze=Dn(et);function lt(Ge,Ye){if(et in Je){var Ie=Ge(Je[et]);gt[Ze]=fs(function(){return Ie})}else if(et in pt){var st=pt[et];gt[Ze]=Sa(st,function(Ct,$t){return Ye(Ct,$t,Ct.invoke($t,st))})}}switch(et){case Tf:case Sf:case Gg:case Pf:case ua:case ju:case Tp:case Mf:case Gc:case dc:return lt(function(Ge){return Te.commandType(Ge,"boolean",et,Ce.commandStr),Ge},function(Ge,Ye,Ie){return Te.optional(function(){Ge.assert(Ye,"typeof "+Ie+'==="boolean"',"invalid flag "+et,Ge.commandStr)}),Ie});case _p:return lt(function(Ge){return Te.commandParameter(Ge,Dh,"invalid "+et,Ce.commandStr),Dh[Ge]},function(Ge,Ye,Ie){var st=Ge.constants.compareFuncs;return Te.optional(function(){Ge.assert(Ye,Ie+" in "+st,"invalid "+et+", must be one of "+Object.keys(Dh))}),Ye.def(st,"[",Ie,"]")});case Ap:return lt(function(Ge){return Te.command($r(Ge)&&Ge.length===2&&typeof Ge[0]=="number"&&typeof Ge[1]=="number"&&Ge[0]<=Ge[1],"depth range is 2d array",Ce.commandStr),Ge},function(Ge,Ye,Ie){Te.optional(function(){Ge.assert(Ye,Ge.shared.isArrayLike+"("+Ie+")&&"+Ie+".length===2&&typeof "+Ie+'[0]==="number"&&typeof '+Ie+'[1]==="number"&&'+Ie+"[0]<="+Ie+"[1]","depth range must be a 2d array")});var st=Ye.def("+",Ie,"[0]"),Ct=Ye.def("+",Ie,"[1]");return[st,Ct]});case Sp:return lt(function(Ge){Te.commandType(Ge,"object","blend.func",Ce.commandStr);var Ye="srcRGB"in Ge?Ge.srcRGB:Ge.src,Ie="srcAlpha"in Ge?Ge.srcAlpha:Ge.src,st="dstRGB"in Ge?Ge.dstRGB:Ge.dst,Ct="dstAlpha"in Ge?Ge.dstAlpha:Ge.dst;return Te.commandParameter(Ye,pc,Ze+".srcRGB",Ce.commandStr),Te.commandParameter(Ie,pc,Ze+".srcAlpha",Ce.commandStr),Te.commandParameter(st,pc,Ze+".dstRGB",Ce.commandStr),Te.commandParameter(Ct,pc,Ze+".dstAlpha",Ce.commandStr),Te.command(Ip.indexOf(Ye+", "+st)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Ye+", "+st+")",Ce.commandStr),[pc[Ye],pc[st],pc[Ie],pc[Ct]]},function(Ge,Ye,Ie){var st=Ge.constants.blendFuncs;Te.optional(function(){Ge.assert(Ye,Ie+"&&typeof "+Ie+'==="object"',"invalid blend func, must be an object")});function Ct(er,xr){var sr=Ye.def('"',er,xr,'" in ',Ie,"?",Ie,".",er,xr,":",Ie,".",er);return Te.optional(function(){Ge.assert(Ye,sr+" in "+st,"invalid "+et+"."+er+xr+", must be one of "+Object.keys(pc))}),sr}var $t=Ct("src","RGB"),Xt=Ct("dst","RGB");Te.optional(function(){var er=Ge.constants.invalidBlendCombinations;Ge.assert(Ye,er+".indexOf("+$t+'+", "+'+Xt+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var zt=Ye.def(st,"[",$t,"]"),bn=Ye.def(st,"[",Ct("src","Alpha"),"]"),cr=Ye.def(st,"[",Xt,"]"),Qr=Ye.def(st,"[",Ct("dst","Alpha"),"]");return[zt,cr,bn,Qr]});case Af:return lt(function(Ge){if(typeof Ge=="string")return Te.commandParameter(Ge,Ft,"invalid "+et,Ce.commandStr),[Ft[Ge],Ft[Ge]];if(typeof Ge=="object")return Te.commandParameter(Ge.rgb,Ft,et+".rgb",Ce.commandStr),Te.commandParameter(Ge.alpha,Ft,et+".alpha",Ce.commandStr),[Ft[Ge.rgb],Ft[Ge.alpha]];Te.commandRaise("invalid blend.equation",Ce.commandStr)},function(Ge,Ye,Ie){var st=Ge.constants.blendEquations,Ct=Ye.def(),$t=Ye.def(),Xt=Ge.cond("typeof ",Ie,'==="string"');return Te.optional(function(){function zt(bn,cr,Qr){Ge.assert(bn,Qr+" in "+st,"invalid "+cr+", must be one of "+Object.keys(Ft))}zt(Xt.then,et,Ie),Ge.assert(Xt.else,Ie+"&&typeof "+Ie+'==="object"',"invalid "+et),zt(Xt.else,et+".rgb",Ie+".rgb"),zt(Xt.else,et+".alpha",Ie+".alpha")}),Xt.then(Ct,"=",$t,"=",st,"[",Ie,"];"),Xt.else(Ct,"=",st,"[",Ie,".rgb];",$t,"=",st,"[",Ie,".alpha];"),Ye(Xt),[Ct,$t]});case _f:return lt(function(Ge){return Te.command($r(Ge)&&Ge.length===4,"blend.color must be a 4d array",Ce.commandStr),cs(4,function(Ye){return+Ge[Ye]})},function(Ge,Ye,Ie){return Te.optional(function(){Ge.assert(Ye,Ge.shared.isArrayLike+"("+Ie+")&&"+Ie+".length===4","blend.color must be a 4d array")}),cs(4,function(st){return Ye.def("+",Ie,"[",st,"]")})});case Xl:return lt(function(Ge){return Te.commandType(Ge,"number",Ze,Ce.commandStr),Ge|0},function(Ge,Ye,Ie){return Te.optional(function(){Ge.assert(Ye,"typeof "+Ie+'==="number"',"invalid stencil.mask")}),Ye.def(Ie,"|0")});case du:return lt(function(Ge){Te.commandType(Ge,"object",Ze,Ce.commandStr);var Ye=Ge.cmp||"keep",Ie=Ge.ref||0,st="mask"in Ge?Ge.mask:-1;return Te.commandParameter(Ye,Dh,et+".cmp",Ce.commandStr),Te.commandType(Ie,"number",et+".ref",Ce.commandStr),Te.commandType(st,"number",et+".mask",Ce.commandStr),[Dh[Ye],Ie,st]},function(Ge,Ye,Ie){var st=Ge.constants.compareFuncs;Te.optional(function(){function zt(){Ge.assert(Ye,Array.prototype.join.call(arguments,""),"invalid stencil.func")}zt(Ie+"&&typeof ",Ie,'==="object"'),zt('!("cmp" in ',Ie,")||(",Ie,".cmp in ",st,")")});var Ct=Ye.def('"cmp" in ',Ie,"?",st,"[",Ie,".cmp]",":",Go),$t=Ye.def(Ie,".ref|0"),Xt=Ye.def('"mask" in ',Ie,"?",Ie,".mask|0:-1");return[Ct,$t,Xt]});case hu:case Vu:return lt(function(Ge){Te.commandType(Ge,"object",Ze,Ce.commandStr);var Ye=Ge.fail||"keep",Ie=Ge.zfail||"keep",st=Ge.zpass||"keep";return Te.commandParameter(Ye,is,et+".fail",Ce.commandStr),Te.commandParameter(Ie,is,et+".zfail",Ce.commandStr),Te.commandParameter(st,is,et+".zpass",Ce.commandStr),[et===Vu?Bc:Jl,is[Ye],is[Ie],is[st]]},function(Ge,Ye,Ie){var st=Ge.constants.stencilOps;Te.optional(function(){Ge.assert(Ye,Ie+"&&typeof "+Ie+'==="object"',"invalid "+et)});function Ct($t){return Te.optional(function(){Ge.assert(Ye,'!("'+$t+'" in '+Ie+")||("+Ie+"."+$t+" in "+st+")","invalid "+et+"."+$t+", must be one of "+Object.keys(is))}),Ye.def('"',$t,'" in ',Ie,"?",st,"[",Ie,".",$t,"]:",Go)}return[et===Vu?Bc:Jl,Ct("fail"),Ct("zfail"),Ct("zpass")]});case Sh:return lt(function(Ge){Te.commandType(Ge,"object",Ze,Ce.commandStr);var Ye=Ge.factor|0,Ie=Ge.units|0;return Te.commandType(Ye,"number",Ze+".factor",Ce.commandStr),Te.commandType(Ie,"number",Ze+".units",Ce.commandStr),[Ye,Ie]},function(Ge,Ye,Ie){Te.optional(function(){Ge.assert(Ye,Ie+"&&typeof "+Ie+'==="object"',"invalid "+et)});var st=Ye.def(Ie,".factor|0"),Ct=Ye.def(Ie,".units|0");return[st,Ct]});case Nl:return lt(function(Ge){var Ye=0;return Ge==="front"?Ye=Jl:Ge==="back"&&(Ye=Bc),Te.command(!!Ye,Ze,Ce.commandStr),Ye},function(Ge,Ye,Ie){return Te.optional(function(){Ge.assert(Ye,Ie+'==="front"||'+Ie+'==="back"',"invalid cull.face")}),Ye.def(Ie,'==="front"?',Jl,":",Bc)});case qs:return lt(function(Ge){return Te.command(typeof Ge=="number"&&Ge>=Tt.lineWidthDims[0]&&Ge<=Tt.lineWidthDims[1],"invalid line width, must be a positive number between "+Tt.lineWidthDims[0]+" and "+Tt.lineWidthDims[1],Ce.commandStr),Ge},function(Ge,Ye,Ie){return Te.optional(function(){Ge.assert(Ye,"typeof "+Ie+'==="number"&&'+Ie+">="+Tt.lineWidthDims[0]+"&&"+Ie+"<="+Tt.lineWidthDims[1],"invalid line width")}),Ie});case Fg:return lt(function(Ge){return Te.commandParameter(Ge,Fd,Ze,Ce.commandStr),Fd[Ge]},function(Ge,Ye,Ie){return Te.optional(function(){Ge.assert(Ye,Ie+'==="cw"||'+Ie+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Ye.def(Ie+'==="cw"?'+To+":"+fc)});case Dl:return lt(function(Ge){return Te.command($r(Ge)&&Ge.length===4,"color.mask must be length 4 array",Ce.commandStr),Ge.map(function(Ye){return!!Ye})},function(Ge,Ye,Ie){return Te.optional(function(){Ge.assert(Ye,Ge.shared.isArrayLike+"("+Ie+")&&"+Ie+".length===4","invalid color.mask")}),cs(4,function(st){return"!!"+Ie+"["+st+"]"})});case Of:return lt(function(Ge){Te.command(typeof Ge=="object"&&Ge,Ze,Ce.commandStr);var Ye="value"in Ge?Ge.value:1,Ie=!!Ge.invert;return Te.command(typeof Ye=="number"&&Ye>=0&&Ye<=1,"sample.coverage.value must be a number between 0 and 1",Ce.commandStr),[Ye,Ie]},function(Ge,Ye,Ie){Te.optional(function(){Ge.assert(Ye,Ie+"&&typeof "+Ie+'==="object"',"invalid sample.coverage")});var st=Ye.def('"value" in ',Ie,"?+",Ie,".value:1"),Ct=Ye.def("!!",Ie,".invert");return[st,Ct]})}}),gt}function ps(Fe,Ce){var Je=Fe.static,pt=Fe.dynamic,gt={};return Object.keys(Je).forEach(function(et){var Ze=Je[et],lt;if(typeof Ze=="number"||typeof Ze=="boolean")lt=fs(function(){return Ze});else if(typeof Ze=="function"){var Ge=Ze._reglType;Ge==="texture2d"||Ge==="textureCube"?lt=fs(function(Ye){return Ye.link(Ze)}):Ge==="framebuffer"||Ge==="framebufferCube"?(Te.command(Ze.color.length>0,'missing color attachment for framebuffer sent to uniform "'+et+'"',Ce.commandStr),lt=fs(function(Ye){return Ye.link(Ze.color[0])})):Te.commandRaise('invalid data for uniform "'+et+'"',Ce.commandStr)}else $r(Ze)?lt=fs(function(Ye){var Ie=Ye.global.def("[",cs(Ze.length,function(st){return Te.command(typeof Ze[st]=="number"||typeof Ze[st]=="boolean","invalid uniform "+et,Ye.commandStr),Ze[st]}),"]");return Ie}):Te.commandRaise('invalid or missing data for uniform "'+et+'"',Ce.commandStr);lt.value=Ze,gt[et]=lt}),Object.keys(pt).forEach(function(et){var Ze=pt[et];gt[et]=Sa(Ze,function(lt,Ge){return lt.invoke(Ge,Ze)})}),gt}function di(Fe,Ce){var Je=Fe.static,pt=Fe.dynamic,gt={};return Object.keys(Je).forEach(function(et){var Ze=Je[et],lt=Me.id(et),Ge=new mt;if(Rp(Ze))Ge.state=Ho,Ge.buffer=yt.getBuffer(yt.create(Ze,Kl,!1,!0)),Ge.type=0;else{var Ye=yt.getBuffer(Ze);if(Ye)Ge.state=Ho,Ge.buffer=Ye,Ge.type=0;else if(Te.command(typeof Ze=="object"&&Ze,"invalid data for attribute "+et,Ce.commandStr),"constant"in Ze){var Ie=Ze.constant;Ge.buffer="null",Ge.state=cu,typeof Ie=="number"?Ge.x=Ie:(Te.command($r(Ie)&&Ie.length>0&&Ie.length<=4,"invalid constant for attribute "+et,Ce.commandStr),Pl.forEach(function(cr,Qr){Qr<Ie.length&&(Ge[cr]=Ie[Qr])}))}else{Rp(Ze.buffer)?Ye=yt.getBuffer(yt.create(Ze.buffer,Kl,!1,!0)):Ye=yt.getBuffer(Ze.buffer),Te.command(!!Ye,'missing buffer for attribute "'+et+'"',Ce.commandStr);var st=Ze.offset|0;Te.command(st>=0,'invalid offset for attribute "'+et+'"',Ce.commandStr);var Ct=Ze.stride|0;Te.command(Ct>=0&&Ct<256,'invalid stride for attribute "'+et+'", must be integer betweeen [0, 255]',Ce.commandStr);var $t=Ze.size|0;Te.command(!("size"in Ze)||$t>0&&$t<=4,'invalid size for attribute "'+et+'", must be 1,2,3,4',Ce.commandStr);var Xt=!!Ze.normalized,zt=0;"type"in Ze&&(Te.commandParameter(Ze.type,$s,"invalid type for attribute "+et,Ce.commandStr),zt=$s[Ze.type]);var bn=Ze.divisor|0;"divisor"in Ze&&(Te.command(bn===0||yn,'cannot specify divisor for attribute "'+et+'", instancing not supported',Ce.commandStr),Te.command(bn>=0,'invalid divisor for attribute "'+et+'"',Ce.commandStr)),Te.optional(function(){var cr=Ce.commandStr,Qr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Ze).forEach(function(er){Te.command(Qr.indexOf(er)>=0,'unknown parameter "'+er+'" for attribute pointer "'+et+'" (valid parameters are '+Qr+")",cr)})}),Ge.buffer=Ye,Ge.state=Ho,Ge.size=$t,Ge.normalized=Xt,Ge.type=zt||Ye.dtype,Ge.offset=st,Ge.stride=Ct,Ge.divisor=bn}}gt[et]=fs(function(cr,Qr){var er=cr.attribCache;if(lt in er)return er[lt];var xr={isStream:!1};return Object.keys(Ge).forEach(function(sr){xr[sr]=Ge[sr]}),Ge.buffer&&(xr.buffer=cr.link(Ge.buffer),xr.type=xr.type||xr.buffer+".dtype"),er[lt]=xr,xr})}),Object.keys(pt).forEach(function(et){var Ze=pt[et];function lt(Ge,Ye){var Ie=Ge.invoke(Ye,Ze),st=Ge.shared,Ct=Ge.constants,$t=st.isBufferArgs,Xt=st.buffer;Te.optional(function(){Ge.assert(Ye,Ie+"&&(typeof "+Ie+'==="object"||typeof '+Ie+'==="function")&&('+$t+"("+Ie+")||"+Xt+".getBuffer("+Ie+")||"+Xt+".getBuffer("+Ie+".buffer)||"+$t+"("+Ie+'.buffer)||("constant" in '+Ie+"&&(typeof "+Ie+'.constant==="number"||'+st.isArrayLike+"("+Ie+".constant))))",'invalid dynamic attribute "'+et+'"')});var zt={isStream:Ye.def(!1)},bn=new mt;bn.state=Ho,Object.keys(bn).forEach(function(xr){zt[xr]=Ye.def(""+bn[xr])});var cr=zt.buffer,Qr=zt.type;Ye("if(",$t,"(",Ie,")){",zt.isStream,"=true;",cr,"=",Xt,".createStream(",Kl,",",Ie,");",Qr,"=",cr,".dtype;","}else{",cr,"=",Xt,".getBuffer(",Ie,");","if(",cr,"){",Qr,"=",cr,".dtype;",'}else if("constant" in ',Ie,"){",zt.state,"=",cu,";","if(typeof "+Ie+'.constant === "number"){',zt[Pl[0]],"=",Ie,".constant;",Pl.slice(1).map(function(xr){return zt[xr]}).join("="),"=0;","}else{",Pl.map(function(xr,sr){return zt[xr]+"="+Ie+".constant.length>"+sr+"?"+Ie+".constant["+sr+"]:0;"}).join(""),"}}else{","if(",$t,"(",Ie,".buffer)){",cr,"=",Xt,".createStream(",Kl,",",Ie,".buffer);","}else{",cr,"=",Xt,".getBuffer(",Ie,".buffer);","}",Qr,'="type" in ',Ie,"?",Ct.glTypes,"[",Ie,".type]:",cr,".dtype;",zt.normalized,"=!!",Ie,".normalized;");function er(xr){Ye(zt[xr],"=",Ie,".",xr,"|0;")}return er("size"),er("offset"),er("stride"),er("divisor"),Ye("}}"),Ye.exit("if(",zt.isStream,"){",Xt,".destroyStream(",cr,");","}"),zt}gt[et]=Sa(Ze,lt)}),gt}function gs(Fe,Ce){var Je=Fe.static,pt=Fe.dynamic;if(qa in Je){var gt=Je[qa];return gt!==null&&pn.getVAO(gt)===null&&(gt=pn.createVAO(gt)),fs(function(Ze){return Ze.link(pn.getVAO(gt))})}else if(qa in pt){var et=pt[qa];return Sa(et,function(Ze,lt){var Ge=Ze.invoke(lt,et);return lt.def(Ze.shared.vao+".getVAO("+Ge+")")})}return null}function Eo(Fe){var Ce=Fe.static,Je=Fe.dynamic,pt={};return Object.keys(Ce).forEach(function(gt){var et=Ce[gt];pt[gt]=fs(function(Ze,lt){return typeof et=="number"||typeof et=="boolean"?""+et:Ze.link(et)})}),Object.keys(Je).forEach(function(gt){var et=Je[gt];pt[gt]=Sa(et,function(Ze,lt){return Ze.invoke(lt,et)})}),pt}function Mo(Fe,Ce,Je,pt,gt){var et=Fe.static,Ze=Fe.dynamic;Te.optional(function(){var er=[Zl,ml,_h,Id,Il,Mp,$u,pu,Hu,qa].concat(qt);function xr(sr){Object.keys(sr).forEach(function(Bi){Te.command(er.indexOf(Bi)>=0,'unknown parameter "'+Bi+'"',gt.commandStr)})}xr(et),xr(Ze)});var lt=Ur(Fe,Ce),Ge=nr(Fe,gt),Ye=mi(Fe,Ge,gt),Ie=Ii(Fe,gt),st=os(Fe,gt),Ct=oi(Fe,gt,lt);function $t(er){var xr=Ye[er];xr&&(st[er]=xr)}$t(fu),$t(Dn(Nd));var Xt=Object.keys(st).length>0,zt={framebuffer:Ge,draw:Ie,shader:Ct,state:st,dirty:Xt,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(zt.profile=Yr(Fe,gt),zt.uniforms=ps(Je,gt),zt.drawVAO=zt.scopeVAO=gs(Fe,gt),!zt.drawVAO&&Ct.program&&!lt&&He.angle_instanced_arrays){var bn=!0,cr=Ct.program.attributes.map(function(er){var xr=Ce.static[er];return bn=bn&&!!xr,xr});if(bn&&cr.length>0){var Qr=pn.getVAO(pn.createVAO(cr));zt.drawVAO=new Ba(null,null,null,function(er,xr){return er.link(Qr)}),zt.useVAO=!0}}return lt?zt.useVAO=!0:zt.attributes=di(Ce,gt),zt.context=Eo(pt,gt),zt}function ss(Fe,Ce,Je){var pt=Fe.shared,gt=pt.context,et=Fe.scope();Object.keys(Je).forEach(function(Ze){Ce.save(gt,"."+Ze);var lt=Je[Ze],Ge=lt.append(Fe,Ce);Array.isArray(Ge)?et(gt,".",Ze,"=[",Ge.join(),"];"):et(gt,".",Ze,"=",Ge,";")}),Ce(et)}function Ss(Fe,Ce,Je,pt){var gt=Fe.shared,et=gt.gl,Ze=gt.framebuffer,lt;Xn&&(lt=Ce.def(gt.extensions,".webgl_draw_buffers"));var Ge=Fe.constants,Ye=Ge.drawBuffer,Ie=Ge.backBuffer,st;Je?st=Je.append(Fe,Ce):st=Ce.def(Ze,".next"),pt||Ce("if(",st,"!==",Ze,".cur){"),Ce("if(",st,"){",et,".bindFramebuffer(",Oh,",",st,".framebuffer);"),Xn&&Ce(lt,".drawBuffersWEBGL(",Ye,"[",st,".colorAttachments.length]);"),Ce("}else{",et,".bindFramebuffer(",Oh,",null);"),Xn&&Ce(lt,".drawBuffersWEBGL(",Ie,");"),Ce("}",Ze,".cur=",st,";"),pt||Ce("}")}function Oo(Fe,Ce,Je){var pt=Fe.shared,gt=pt.gl,et=Fe.current,Ze=Fe.next,lt=pt.current,Ge=pt.next,Ye=Fe.cond(lt,".dirty");qt.forEach(function(Ie){var st=Dn(Ie);if(!(st in Je.state)){var Ct,$t;if(st in Ze){Ct=Ze[st],$t=et[st];var Xt=cs(sn[st].length,function(bn){return Ye.def(Ct,"[",bn,"]")});Ye(Fe.cond(Xt.map(function(bn,cr){return bn+"!=="+$t+"["+cr+"]"}).join("||")).then(gt,".",ln[st],"(",Xt,");",Xt.map(function(bn,cr){return $t+"["+cr+"]="+bn}).join(";"),";"))}else{Ct=Ye.def(Ge,".",st);var zt=Fe.cond(Ct,"!==",lt,".",st);Ye(zt),st in Pn?zt(Fe.cond(Ct).then(gt,".enable(",Pn[st],");").else(gt,".disable(",Pn[st],");"),lt,".",st,"=",Ct,";"):zt(gt,".",ln[st],"(",Ct,");",lt,".",st,"=",Ct,";")}}}),Object.keys(Je.state).length===0&&Ye(lt,".dirty=false;"),Ce(Ye)}function $o(Fe,Ce,Je,pt){var gt=Fe.shared,et=Fe.current,Ze=gt.current,lt=gt.gl;zg(Object.keys(Je)).forEach(function(Ge){var Ye=Je[Ge];if(!(pt&&!pt(Ye))){var Ie=Ye.append(Fe,Ce);if(Pn[Ge]){var st=Pn[Ge];Ql(Ye)?Ie?Ce(lt,".enable(",st,");"):Ce(lt,".disable(",st,");"):Ce(Fe.cond(Ie).then(lt,".enable(",st,");").else(lt,".disable(",st,");")),Ce(Ze,".",Ge,"=",Ie,";")}else if($r(Ie)){var Ct=et[Ge];Ce(lt,".",ln[Ge],"(",Ie,");",Ie.map(function($t,Xt){return Ct+"["+Xt+"]="+$t}).join(";"),";")}else Ce(lt,".",ln[Ge],"(",Ie,");",Ze,".",Ge,"=",Ie,";")}})}function vs(Fe,Ce){yn&&(Fe.instancing=Ce.def(Fe.shared.extensions,".angle_instanced_arrays"))}function Kr(Fe,Ce,Je,pt,gt){var et=Fe.shared,Ze=Fe.stats,lt=et.current,Ge=et.timer,Ye=Je.profile;function Ie(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var st,Ct;function $t(er){st=Ce.def(),er(st,"=",Ie(),";"),typeof gt=="string"?er(Ze,".count+=",gt,";"):er(Ze,".count++;"),fn&&(pt?(Ct=Ce.def(),er(Ct,"=",Ge,".getNumPendingQueries();")):er(Ge,".beginQuery(",Ze,");"))}function Xt(er){er(Ze,".cpuTime+=",Ie(),"-",st,";"),fn&&(pt?er(Ge,".pushScopeStats(",Ct,",",Ge,".getNumPendingQueries(),",Ze,");"):er(Ge,".endQuery();"))}function zt(er){var xr=Ce.def(lt,".profile");Ce(lt,".profile=",er,";"),Ce.exit(lt,".profile=",xr,";")}var bn;if(Ye){if(Ql(Ye)){Ye.enable?($t(Ce),Xt(Ce.exit),zt("true")):zt("false");return}bn=Ye.append(Fe,Ce),zt(bn)}else bn=Ce.def(lt,".profile");var cr=Fe.block();$t(cr),Ce("if(",bn,"){",cr,"}");var Qr=Fe.block();Xt(Qr),Ce.exit("if(",bn,"){",Qr,"}")}function Wo(Fe,Ce,Je,pt,gt){var et=Fe.shared;function Ze(Ge){switch(Ge){case Fc:case Lf:case qu:return 2;case Bs:case Mh:case Gf:return 3;case Ea:case Ns:case yl:return 4;default:return 1}}function lt(Ge,Ye,Ie){var st=et.gl,Ct=Ce.def(Ge,".location"),$t=Ce.def(et.attributes,"[",Ct,"]"),Xt=Ie.state,zt=Ie.buffer,bn=[Ie.x,Ie.y,Ie.z,Ie.w],cr=["buffer","normalized","offset","stride"];function Qr(){Ce("if(!",$t,".buffer){",st,".enableVertexAttribArray(",Ct,");}");var xr=Ie.type,sr;if(Ie.size?sr=Ce.def(Ie.size,"||",Ye):sr=Ye,Ce("if(",$t,".type!==",xr,"||",$t,".size!==",sr,"||",cr.map(function(Ko){return $t+"."+Ko+"!=="+Ie[Ko]}).join("||"),"){",st,".bindBuffer(",Kl,",",zt,".buffer);",st,".vertexAttribPointer(",[Ct,sr,xr,Ie.normalized,Ie.stride,Ie.offset],");",$t,".type=",xr,";",$t,".size=",sr,";",cr.map(function(Ko){return $t+"."+Ko+"="+Ie[Ko]+";"}).join(""),"}"),yn){var Bi=Ie.divisor;Ce("if(",$t,".divisor!==",Bi,"){",Fe.instancing,".vertexAttribDivisorANGLE(",[Ct,Bi],");",$t,".divisor=",Bi,";}")}}function er(){Ce("if(",$t,".buffer){",st,".disableVertexAttribArray(",Ct,");",$t,".buffer=null;","}if(",Pl.map(function(xr,sr){return $t+"."+xr+"!=="+bn[sr]}).join("||"),"){",st,".vertexAttrib4f(",Ct,",",bn,");",Pl.map(function(xr,sr){return $t+"."+xr+"="+bn[sr]+";"}).join(""),"}")}Xt===Ho?Qr():Xt===cu?er():(Ce("if(",Xt,"===",Ho,"){"),Qr(),Ce("}else{"),er(),Ce("}"))}pt.forEach(function(Ge){var Ye=Ge.name,Ie=Je.attributes[Ye],st;if(Ie){if(!gt(Ie))return;st=Ie.append(Fe,Ce)}else{if(!gt(kp))return;var Ct=Fe.scopeAttrib(Ye);Te.optional(function(){Fe.assert(Ce,Ct+".state","missing attribute "+Ye)}),st={},Object.keys(new mt).forEach(function($t){st[$t]=Ce.def(Ct,".",$t)})}lt(Fe.link(Ge),Ze(Ge.info.type),st)})}function zi(Fe,Ce,Je,pt,gt){for(var et=Fe.shared,Ze=et.gl,lt,Ge=0;Ge<pt.length;++Ge){var Ye=pt[Ge],Ie=Ye.name,st=Ye.info.type,Ct=Je.uniforms[Ie],$t=Fe.link(Ye),Xt=$t+".location",zt;if(Ct){if(!gt(Ct))continue;if(Ql(Ct)){var bn=Ct.value;if(Te.command(bn!==null&&typeof bn!="undefined",'missing uniform "'+Ie+'"',Fe.commandStr),st===Ju||st===Qu){Te.command(typeof bn=="function"&&(st===Ju&&(bn._reglType==="texture2d"||bn._reglType==="framebuffer")||st===Qu&&(bn._reglType==="textureCube"||bn._reglType==="framebufferCube")),"invalid texture for uniform "+Ie,Fe.commandStr);var cr=Fe.link(bn._texture||bn.color[0]._texture);Ce(Ze,".uniform1i(",Xt,",",cr+".bind());"),Ce.exit(cr,".unbind();")}else if(st===La||st===Ci||st===Ga){Te.optional(function(){Te.command($r(bn),"invalid matrix for uniform "+Ie,Fe.commandStr),Te.command(st===La&&bn.length===4||st===Ci&&bn.length===9||st===Ga&&bn.length===16,"invalid length for matrix uniform "+Ie,Fe.commandStr)});var Qr=Fe.global.def("new Float32Array(["+Array.prototype.slice.call(bn)+"])"),er=2;st===Ci?er=3:st===Ga&&(er=4),Ce(Ze,".uniformMatrix",er,"fv(",Xt,",false,",Qr,");")}else{switch(st){case Ku:Te.commandType(bn,"number","uniform "+Ie,Fe.commandStr),lt="1f";break;case Fc:Te.command($r(bn)&&bn.length===2,"uniform "+Ie,Fe.commandStr),lt="2f";break;case Bs:Te.command($r(bn)&&bn.length===3,"uniform "+Ie,Fe.commandStr),lt="3f";break;case Ea:Te.command($r(bn)&&bn.length===4,"uniform "+Ie,Fe.commandStr),lt="4f";break;case Jn:Te.commandType(bn,"boolean","uniform "+Ie,Fe.commandStr),lt="1i";break;case kf:Te.commandType(bn,"number","uniform "+Ie,Fe.commandStr),lt="1i";break;case qu:Te.command($r(bn)&&bn.length===2,"uniform "+Ie,Fe.commandStr),lt="2i";break;case Lf:Te.command($r(bn)&&bn.length===2,"uniform "+Ie,Fe.commandStr),lt="2i";break;case Gf:Te.command($r(bn)&&bn.length===3,"uniform "+Ie,Fe.commandStr),lt="3i";break;case Mh:Te.command($r(bn)&&bn.length===3,"uniform "+Ie,Fe.commandStr),lt="3i";break;case yl:Te.command($r(bn)&&bn.length===4,"uniform "+Ie,Fe.commandStr),lt="4i";break;case Ns:Te.command($r(bn)&&bn.length===4,"uniform "+Ie,Fe.commandStr),lt="4i";break}Ce(Ze,".uniform",lt,"(",Xt,",",$r(bn)?Array.prototype.slice.call(bn):bn,");")}continue}else zt=Ct.append(Fe,Ce)}else{if(!gt(kp))continue;zt=Ce.def(et.uniforms,"[",Me.id(Ie),"]")}st===Ju?(Te(!Array.isArray(zt),"must specify a scalar prop for textures"),Ce("if(",zt,"&&",zt,'._reglType==="framebuffer"){',zt,"=",zt,".color[0];","}")):st===Qu&&(Te(!Array.isArray(zt),"must specify a scalar prop for cube maps"),Ce("if(",zt,"&&",zt,'._reglType==="framebufferCube"){',zt,"=",zt,".color[0];","}")),Te.optional(function(){function tl(Is,ym){Fe.assert(Ce,Is,'bad data or missing for uniform "'+Ie+'".  '+ym)}function Fp(Is){Te(!Array.isArray(zt),"must not specify an array type for uniform"),tl("typeof "+zt+'==="'+Is+'"',"invalid type, expected "+Is)}function bl(Is,ym){Array.isArray(zt)?Te(zt.length===Is,"must have length "+Is):tl(et.isArrayLike+"("+zt+")&&"+zt+".length==="+Is,"invalid vector, should have length "+Is,Fe.commandStr)}function jg(Is){Te(!Array.isArray(zt),"must not specify a value type"),tl("typeof "+zt+'==="function"&&'+zt+'._reglType==="texture'+(Is===_i?"2d":"Cube")+'"',"invalid texture type",Fe.commandStr)}switch(st){case kf:Fp("number");break;case Lf:bl(2,"number");break;case Mh:bl(3,"number");break;case Ns:bl(4,"number");break;case Ku:Fp("number");break;case Fc:bl(2,"number");break;case Bs:bl(3,"number");break;case Ea:bl(4,"number");break;case Jn:Fp("boolean");break;case qu:bl(2,"boolean");break;case Gf:bl(3,"boolean");break;case yl:bl(4,"boolean");break;case La:bl(4,"number");break;case Ci:bl(9,"number");break;case Ga:bl(16,"number");break;case Ju:jg(_i);break;case Qu:jg(Nf);break}});var xr=1;switch(st){case Ju:case Qu:var sr=Ce.def(zt,"._texture");Ce(Ze,".uniform1i(",Xt,",",sr,".bind());"),Ce.exit(sr,".unbind();");continue;case kf:case Jn:lt="1i";break;case Lf:case qu:lt="2i",xr=2;break;case Mh:case Gf:lt="3i",xr=3;break;case Ns:case yl:lt="4i",xr=4;break;case Ku:lt="1f";break;case Fc:lt="2f",xr=2;break;case Bs:lt="3f",xr=3;break;case Ea:lt="4f",xr=4;break;case La:lt="Matrix2fv";break;case Ci:lt="Matrix3fv";break;case Ga:lt="Matrix4fv";break}if(Ce(Ze,".uniform",lt,"(",Xt,","),lt.charAt(0)==="M"){var Bi=Math.pow(st-La+2,2),Ko=Fe.global.def("new Float32Array(",Bi,")");Array.isArray(zt)?Ce("false,(",cs(Bi,function(tl){return Ko+"["+tl+"]="+zt[tl]}),",",Ko,")"):Ce("false,(Array.isArray(",zt,")||",zt," instanceof Float32Array)?",zt,":(",cs(Bi,function(tl){return Ko+"["+tl+"]="+zt+"["+tl+"]"}),",",Ko,")")}else xr>1?Ce(cs(xr,function(tl){return Array.isArray(zt)?zt[tl]:zt+"["+tl+"]"})):(Te(!Array.isArray(zt),"uniform value must not be an array"),Ce(zt));Ce(");")}}function Sr(Fe,Ce,Je,pt){var gt=Fe.shared,et=gt.gl,Ze=gt.draw,lt=pt.draw;function Ge(){var sr=lt.elements,Bi,Ko=Ce;return sr?((sr.contextDep&&pt.contextDynamic||sr.propDep)&&(Ko=Je),Bi=sr.append(Fe,Ko)):Bi=Ko.def(Ze,".",Id),Bi&&Ko("if("+Bi+")"+et+".bindBuffer("+kd+","+Bi+".buffer.buffer);"),Bi}function Ye(){var sr=lt.count,Bi,Ko=Ce;return sr?((sr.contextDep&&pt.contextDynamic||sr.propDep)&&(Ko=Je),Bi=sr.append(Fe,Ko),Te.optional(function(){sr.MISSING&&Fe.assert(Ce,"false","missing vertex count"),sr.DYNAMIC&&Fe.assert(Ko,Bi+">=0","missing vertex count")})):(Bi=Ko.def(Ze,".",$u),Te.optional(function(){Fe.assert(Ko,Bi+">=0","missing vertex count")})),Bi}var Ie=Ge();function st(sr){var Bi=lt[sr];return Bi?Bi.contextDep&&pt.contextDynamic||Bi.propDep?Bi.append(Fe,Je):Bi.append(Fe,Ce):Ce.def(Ze,".",sr)}var Ct=st(Il),$t=st(Mp),Xt=Ye();if(typeof Xt=="number"){if(Xt===0)return}else Je("if(",Xt,"){"),Je.exit("}");var zt,bn;yn&&(zt=st(pu),bn=Fe.instancing);var cr=Ie+".type",Qr=lt.elements&&Ql(lt.elements);function er(){function sr(){Je(bn,".drawElementsInstancedANGLE(",[Ct,Xt,cr,$t+"<<(("+cr+"-"+zu+")>>1)",zt],");")}function Bi(){Je(bn,".drawArraysInstancedANGLE(",[Ct,$t,Xt,zt],");")}Ie?Qr?sr():(Je("if(",Ie,"){"),sr(),Je("}else{"),Bi(),Je("}")):Bi()}function xr(){function sr(){Je(et+".drawElements("+[Ct,Xt,cr,$t+"<<(("+cr+"-"+zu+")>>1)"]+");")}function Bi(){Je(et+".drawArrays("+[Ct,$t,Xt]+");")}Ie?Qr?sr():(Je("if(",Ie,"){"),sr(),Je("}else{"),Bi(),Je("}")):Bi()}yn&&(typeof zt!="number"||zt>=0)?typeof zt=="string"?(Je("if(",zt,">0){"),er(),Je("}else if(",zt,"<0){"),xr(),Je("}")):er():xr()}function wi(Fe,Ce,Je,pt,gt){var et=Pr(),Ze=et.proc("body",gt);return Te.optional(function(){et.commandStr=Ce.commandStr,et.command=et.link(Ce.commandStr)}),yn&&(et.instancing=Ze.def(et.shared.extensions,".angle_instanced_arrays")),Fe(et,Ze,Je,pt),et.compile().body}function Ri(Fe,Ce,Je,pt){vs(Fe,Ce),Je.useVAO?Je.drawVAO?Ce(Fe.shared.vao,".setVAO(",Je.drawVAO.append(Fe,Ce),");"):Ce(Fe.shared.vao,".setVAO(",Fe.shared.vao,".targetVAO);"):(Ce(Fe.shared.vao,".setVAO(null);"),Wo(Fe,Ce,Je,pt.attributes,function(){return!0})),zi(Fe,Ce,Je,pt.uniforms,function(){return!0}),Sr(Fe,Ce,Ce,Je)}function ms(Fe,Ce){var Je=Fe.proc("draw",1);vs(Fe,Je),ss(Fe,Je,Ce.context),Ss(Fe,Je,Ce.framebuffer),Oo(Fe,Je,Ce),$o(Fe,Je,Ce.state),Kr(Fe,Je,Ce,!1,!0);var pt=Ce.shader.progVar.append(Fe,Je);if(Je(Fe.shared.gl,".useProgram(",pt,".program);"),Ce.shader.program)Ri(Fe,Je,Ce,Ce.shader.program);else{Je(Fe.shared.vao,".setVAO(null);");var gt=Fe.global.def("{}"),et=Je.def(pt,".id"),Ze=Je.def(gt,"[",et,"]");Je(Fe.cond(Ze).then(Ze,".call(this,a0);").else(Ze,"=",gt,"[",et,"]=",Fe.link(function(lt){return wi(Ri,Fe,Ce,lt,1)}),"(",pt,");",Ze,".call(this,a0);"))}Object.keys(Ce.state).length>0&&Je(Fe.shared.current,".dirty=true;")}function zc(Fe,Ce,Je,pt){Fe.batchId="a1",vs(Fe,Ce);function gt(){return!0}Wo(Fe,Ce,Je,pt.attributes,gt),zi(Fe,Ce,Je,pt.uniforms,gt),Sr(Fe,Ce,Ce,Je)}function zd(Fe,Ce,Je,pt){vs(Fe,Ce);var gt=Je.contextDep,et=Ce.def(),Ze="a0",lt="a1",Ge=Ce.def();Fe.shared.props=Ge,Fe.batchId=et;var Ye=Fe.scope(),Ie=Fe.scope();Ce(Ye.entry,"for(",et,"=0;",et,"<",lt,";++",et,"){",Ge,"=",Ze,"[",et,"];",Ie,"}",Ye.exit);function st(cr){return cr.contextDep&&gt||cr.propDep}function Ct(cr){return!st(cr)}if(Je.needsContext&&ss(Fe,Ie,Je.context),Je.needsFramebuffer&&Ss(Fe,Ie,Je.framebuffer),$o(Fe,Ie,Je.state,st),Je.profile&&st(Je.profile)&&Kr(Fe,Ie,Je,!1,!0),pt)Je.useVAO?Je.drawVAO?st(Je.drawVAO)?Ie(Fe.shared.vao,".setVAO(",Je.drawVAO.append(Fe,Ie),");"):Ye(Fe.shared.vao,".setVAO(",Je.drawVAO.append(Fe,Ye),");"):Ye(Fe.shared.vao,".setVAO(",Fe.shared.vao,".targetVAO);"):(Ye(Fe.shared.vao,".setVAO(null);"),Wo(Fe,Ye,Je,pt.attributes,Ct),Wo(Fe,Ie,Je,pt.attributes,st)),zi(Fe,Ye,Je,pt.uniforms,Ct),zi(Fe,Ie,Je,pt.uniforms,st),Sr(Fe,Ye,Ie,Je);else{var $t=Fe.global.def("{}"),Xt=Je.shader.progVar.append(Fe,Ie),zt=Ie.def(Xt,".id"),bn=Ie.def($t,"[",zt,"]");Ie(Fe.shared.gl,".useProgram(",Xt,".program);","if(!",bn,"){",bn,"=",$t,"[",zt,"]=",Fe.link(function(cr){return wi(zc,Fe,Je,cr,2)}),"(",Xt,");}",bn,".call(this,a0[",et,"],",et,");")}}function Ue(Fe,Ce){var Je=Fe.proc("batch",2);Fe.batchId="0",vs(Fe,Je);var pt=!1,gt=!0;Object.keys(Ce.context).forEach(function($t){pt=pt||Ce.context[$t].propDep}),pt||(ss(Fe,Je,Ce.context),gt=!1);var et=Ce.framebuffer,Ze=!1;et?(et.propDep?pt=Ze=!0:et.contextDep&&pt&&(Ze=!0),Ze||Ss(Fe,Je,et)):Ss(Fe,Je,null),Ce.state.viewport&&Ce.state.viewport.propDep&&(pt=!0);function lt($t){return $t.contextDep&&pt||$t.propDep}Oo(Fe,Je,Ce),$o(Fe,Je,Ce.state,function($t){return!lt($t)}),(!Ce.profile||!lt(Ce.profile))&&Kr(Fe,Je,Ce,!1,"a1"),Ce.contextDep=pt,Ce.needsContext=gt,Ce.needsFramebuffer=Ze;var Ge=Ce.shader.progVar;if(Ge.contextDep&&pt||Ge.propDep)zd(Fe,Je,Ce,null);else{var Ye=Ge.append(Fe,Je);if(Je(Fe.shared.gl,".useProgram(",Ye,".program);"),Ce.shader.program)zd(Fe,Je,Ce,Ce.shader.program);else{Je(Fe.shared.vao,".setVAO(null);");var Ie=Fe.global.def("{}"),st=Je.def(Ye,".id"),Ct=Je.def(Ie,"[",st,"]");Je(Fe.cond(Ct).then(Ct,".call(this,a0,a1);").else(Ct,"=",Ie,"[",st,"]=",Fe.link(function($t){return wi(zd,Fe,Ce,$t,2)}),"(",Ye,");",Ct,".call(this,a0,a1);"))}}Object.keys(Ce.state).length>0&&Je(Fe.shared.current,".dirty=true;")}function Dt(Fe,Ce){var Je=Fe.proc("scope",3);Fe.batchId="a2";var pt=Fe.shared,gt=pt.current;ss(Fe,Je,Ce.context),Ce.framebuffer&&Ce.framebuffer.append(Fe,Je),zg(Object.keys(Ce.state)).forEach(function(Ze){var lt=Ce.state[Ze],Ge=lt.append(Fe,Je);$r(Ge)?Ge.forEach(function(Ye,Ie){Je.set(Fe.next[Ze],"["+Ie+"]",Ye)}):Je.set(pt.next,"."+Ze,Ge)}),Kr(Fe,Je,Ce,!0,!0),[Id,Mp,$u,pu,Il].forEach(function(Ze){var lt=Ce.draw[Ze];lt&&Je.set(pt.draw,"."+Ze,""+lt.append(Fe,Je))}),Object.keys(Ce.uniforms).forEach(function(Ze){var lt=Ce.uniforms[Ze].append(Fe,Je);Array.isArray(lt)&&(lt="["+lt.join()+"]"),Je.set(pt.uniforms,"["+Me.id(Ze)+"]",lt)}),Object.keys(Ce.attributes).forEach(function(Ze){var lt=Ce.attributes[Ze].append(Fe,Je),Ge=Fe.scopeAttrib(Ze);Object.keys(new mt).forEach(function(Ye){Je.set(Ge,"."+Ye,lt[Ye])})}),Ce.scopeVAO&&Je.set(pt.vao,".targetVAO",Ce.scopeVAO.append(Fe,Je));function et(Ze){var lt=Ce.shader[Ze];lt&&Je.set(pt.shader,"."+Ze,lt.append(Fe,Je))}et(ml),et(_h),Object.keys(Ce.state).length>0&&(Je(gt,".dirty=true;"),Je.exit(gt,".dirty=true;")),Je("a1(",Fe.shared.context,",a0,",Fe.batchId,");")}function Mt(Fe){if(!(typeof Fe!="object"||$r(Fe))){for(var Ce=Object.keys(Fe),Je=0;Je<Ce.length;++Je)if($i.isDynamic(Fe[Ce[Je]]))return!0;return!1}}function qn(Fe,Ce,Je){var pt=Ce.static[Je];if(!pt||!Mt(pt))return;var gt=Fe.global,et=Object.keys(pt),Ze=!1,lt=!1,Ge=!1,Ye=Fe.global.def("{}");et.forEach(function(st){var Ct=pt[st];if($i.isDynamic(Ct)){typeof Ct=="function"&&(Ct=pt[st]=$i.unbox(Ct));var $t=Sa(Ct,null);Ze=Ze||$t.thisDep,Ge=Ge||$t.propDep,lt=lt||$t.contextDep}else{switch(gt(Ye,".",st,"="),typeof Ct){case"number":gt(Ct);break;case"string":gt('"',Ct,'"');break;case"object":Array.isArray(Ct)&&gt("[",Ct.join(),"]");break;default:gt(Fe.link(Ct));break}gt(";")}});function Ie(st,Ct){et.forEach(function($t){var Xt=pt[$t];if($i.isDynamic(Xt)){var zt=st.invoke(Ct,Xt);Ct(Ye,".",$t,"=",zt,";")}})}Ce.dynamic[Je]=new $i.DynamicVariable(Uu,{thisDep:Ze,contextDep:lt,propDep:Ge,ref:Ye,append:Ie}),delete Ce.static[Je]}function gi(Fe,Ce,Je,pt,gt){var et=Pr();et.stats=et.link(gt),Object.keys(Ce.static).forEach(function(lt){qn(et,Ce,lt)}),Zu.forEach(function(lt){qn(et,Fe,lt)});var Ze=Mo(Fe,Ce,Je,pt,et);return ms(et,Ze),Dt(et,Ze),Ue(et,Ze),M(et.compile(),{destroy:function(){Ze.shader.program.destroy()}})}return{next:$n,current:sn,procs:function(){var Fe=Pr(),Ce=Fe.proc("poll"),Je=Fe.proc("refresh"),pt=Fe.block();Ce(pt),Je(pt);var gt=Fe.shared,et=gt.gl,Ze=gt.next,lt=gt.current;pt(lt,".dirty=false;"),Ss(Fe,Ce),Ss(Fe,Je,null,!0);var Ge;yn&&(Ge=Fe.link(yn)),He.oes_vertex_array_object&&Je(Fe.link(He.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ye=0;Ye<Tt.maxAttributes;++Ye){var Ie=Je.def(gt.attributes,"[",Ye,"]"),st=Fe.cond(Ie,".buffer");st.then(et,".enableVertexAttribArray(",Ye,");",et,".bindBuffer(",Kl,",",Ie,".buffer.buffer);",et,".vertexAttribPointer(",Ye,",",Ie,".size,",Ie,".type,",Ie,".normalized,",Ie,".stride,",Ie,".offset);").else(et,".disableVertexAttribArray(",Ye,");",et,".vertexAttrib4f(",Ye,",",Ie,".x,",Ie,".y,",Ie,".z,",Ie,".w);",Ie,".buffer=null;"),Je(st),yn&&Je(Ge,".vertexAttribDivisorANGLE(",Ye,",",Ie,".divisor);")}return Je(Fe.shared.vao,".currentVAO=null;",Fe.shared.vao,".setVAO(",Fe.shared.vao,".targetVAO);"),Object.keys(Pn).forEach(function(Ct){var $t=Pn[Ct],Xt=pt.def(Ze,".",Ct),zt=Fe.block();zt("if(",Xt,"){",et,".enable(",$t,")}else{",et,".disable(",$t,")}",lt,".",Ct,"=",Xt,";"),Je(zt),Ce("if(",Xt,"!==",lt,".",Ct,"){",zt,"}")}),Object.keys(ln).forEach(function(Ct){var $t=ln[Ct],Xt=sn[Ct],zt,bn,cr=Fe.block();if(cr(et,".",$t,"("),$r(Xt)){var Qr=Xt.length;zt=Fe.global.def(Ze,".",Ct),bn=Fe.global.def(lt,".",Ct),cr(cs(Qr,function(er){return zt+"["+er+"]"}),");",cs(Qr,function(er){return bn+"["+er+"]="+zt+"["+er+"];"}).join("")),Ce("if(",cs(Qr,function(er){return zt+"["+er+"]!=="+bn+"["+er+"]"}).join("||"),"){",cr,"}")}else zt=pt.def(Ze,".",Ct),bn=pt.def(lt,".",Ct),cr(zt,");",lt,".",Ct,"=",zt,";"),Ce("if(",zt,"!==",bn,"){",cr,"}");Je(cr)}),Fe.compile()}(),compile:gi}}function mm(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Nh=34918,Ih=34919,Gp=35007,_a=function(K,Me){if(!Me.ext_disjoint_timer_query)return null;var He=[];function Tt(){return He.pop()||Me.ext_disjoint_timer_query.createQueryEXT()}function yt(yn){He.push(yn)}var St=[];function Lt(yn){var Xn=Tt();Me.ext_disjoint_timer_query.beginQueryEXT(Gp,Xn),St.push(Xn),fn(St.length-1,St.length,yn)}function on(){Me.ext_disjoint_timer_query.endQueryEXT(Gp)}function gn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var pn=[];function vn(){return pn.pop()||new gn}function un(yn){pn.push(yn)}var Bn=[];function fn(yn,Xn,sn){var $n=vn();$n.startQueryIndex=yn,$n.endQueryIndex=Xn,$n.sum=0,$n.stats=sn,Bn.push($n)}var Mn=[],mt=[];function Ft(){var yn,Xn,sn=St.length;if(sn!==0){mt.length=Math.max(mt.length,sn+1),Mn.length=Math.max(Mn.length,sn+1),Mn[0]=0,mt[0]=0;var $n=0;for(yn=0,Xn=0;Xn<St.length;++Xn){var qt=St[Xn];Me.ext_disjoint_timer_query.getQueryObjectEXT(qt,Ih)?($n+=Me.ext_disjoint_timer_query.getQueryObjectEXT(qt,Nh),yt(qt)):St[yn++]=qt,Mn[Xn+1]=$n,mt[Xn+1]=yn}for(St.length=yn,yn=0,Xn=0;Xn<Bn.length;++Xn){var Pn=Bn[Xn],ln=Pn.startQueryIndex,Dn=Pn.endQueryIndex;Pn.sum+=Mn[Dn]-Mn[ln];var yr=mt[ln],Fr=mt[Dn];Fr===yr?(Pn.stats.gpuTime+=Pn.sum/1e6,un(Pn)):(Pn.startQueryIndex=yr,Pn.endQueryIndex=Fr,Bn[yn++]=Pn)}Bn.length=yn}}return{beginQuery:Lt,endQuery:on,pushScopeStats:fn,update:Ft,getNumPendingQueries:function(){return St.length},clear:function(){He.push.apply(He,St);for(var yn=0;yn<He.length;yn++)Me.ext_disjoint_timer_query.deleteQueryEXT(He[yn]);St.length=0,He.length=0},restore:function(){St.length=0,He.length=0}}},Qa=16384,vu=256,gc=1024,Ug=34962,Rh="webglcontextlost",Y0="webglcontextrestored",Vg=1,K0=2,q0=3;function el(K,Me){for(var He=0;He<K.length;++He)if(K[He]===Me)return He;return-1}function Bd(K){var Me=sh(K);if(!Me)return null;var He=Me.gl,Tt=He.getContextAttributes(),yt=He.isContextLost(),St=$a(He,Me);if(!St)return null;var Lt=Ir(),on=mm(),gn=St.extensions,pn=_a(He,gn),vn=ni(),un=He.drawingBufferWidth,Bn=He.drawingBufferHeight,fn={tick:0,time:0,viewportWidth:un,viewportHeight:Bn,framebufferWidth:un,framebufferHeight:Bn,drawingBufferWidth:un,drawingBufferHeight:Bn,pixelRatio:Me.pixelRatio},Mn={},mt={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ft=B0(He,gn),yn=bf(He,on,Me,sn),Xn=to(He,gn,Ft,on,yn);function sn(Sr){return Xn.destroyBuffer(Sr)}var $n=Zr(He,gn,yn,on),qt=Ep(He,Lt,on,Me),Pn=Ed(He,gn,Ft,function(){yr.procs.poll()},fn,on,Me),ln=Ad(He,gn,Ft,on,Me),Dn=$0(He,gn,Ft,Pn,ln,on),yr=Lp(He,Lt,gn,Ft,yn,$n,Pn,Dn,Mn,Xn,qt,mt,fn,pn,Me),Fr=Lc(He,Dn,yr.procs.poll,fn,Tt,gn,Ft),Nn=yr.next,Cn=He.canvas,nn=[],Pr=[],Yr=[],nr=[Me.onDestroy],mi=null;function Ur(){if(nn.length===0){pn&&pn.update(),mi=null;return}mi=Xr.next(Ur),$o();for(var Sr=nn.length-1;Sr>=0;--Sr){var wi=nn[Sr];wi&&wi(fn,null,0)}He.flush(),pn&&pn.update()}function oi(){!mi&&nn.length>0&&(mi=Xr.next(Ur))}function Ii(){mi&&(Xr.cancel(Ur),mi=null)}function os(Sr){Sr.preventDefault(),yt=!0,Ii(),Pr.forEach(function(wi){wi()})}function ps(Sr){He.getError(),yt=!1,St.restore(),qt.restore(),yn.restore(),Pn.restore(),ln.restore(),Dn.restore(),Xn.restore(),pn&&pn.restore(),yr.procs.refresh(),oi(),Yr.forEach(function(wi){wi()})}Cn&&(Cn.addEventListener(Rh,os,!1),Cn.addEventListener(Y0,ps,!1));function di(){nn.length=0,Ii(),Cn&&(Cn.removeEventListener(Rh,os),Cn.removeEventListener(Y0,ps)),qt.clear(),Dn.clear(),ln.clear(),Pn.clear(),$n.clear(),yn.clear(),Xn.clear(),pn&&pn.clear(),nr.forEach(function(Sr){Sr()})}function gs(Sr){Te(!!Sr,"invalid args to regl({...})"),Te.type(Sr,"object","invalid args to regl({...})");function wi(gt){var et=M({},gt);delete et.uniforms,delete et.attributes,delete et.context,delete et.vao,"stencil"in et&&et.stencil.op&&(et.stencil.opBack=et.stencil.opFront=et.stencil.op,delete et.stencil.op);function Ze(lt){if(lt in et){var Ge=et[lt];delete et[lt],Object.keys(Ge).forEach(function(Ye){et[lt+"."+Ye]=Ge[Ye]})}}return Ze("blend"),Ze("depth"),Ze("cull"),Ze("stencil"),Ze("polygonOffset"),Ze("scissor"),Ze("sample"),"vao"in gt&&(et.vao=gt.vao),et}function Ri(gt,et){var Ze={},lt={};return Object.keys(gt).forEach(function(Ge){var Ye=gt[Ge];if($i.isDynamic(Ye)){lt[Ge]=$i.unbox(Ye,Ge);return}else if(et&&Array.isArray(Ye)){for(var Ie=0;Ie<Ye.length;++Ie)if($i.isDynamic(Ye[Ie])){lt[Ge]=$i.unbox(Ye,Ge);return}}Ze[Ge]=Ye}),{dynamic:lt,static:Ze}}var ms=Ri(Sr.context||{},!0),zc=Ri(Sr.uniforms||{},!0),zd=Ri(Sr.attributes||{},!1),Ue=Ri(wi(Sr),!1),Dt={gpuTime:0,cpuTime:0,count:0},Mt=yr.compile(Ue,zd,zc,ms,Dt),qn=Mt.draw,gi=Mt.batch,Fe=Mt.scope,Ce=[];function Je(gt){for(;Ce.length<gt;)Ce.push(null);return Ce}function pt(gt,et){var Ze;if(yt&&Te.raise("context lost"),typeof gt=="function")return Fe.call(this,null,gt,0);if(typeof et=="function")if(typeof gt=="number")for(Ze=0;Ze<gt;++Ze)Fe.call(this,null,et,Ze);else if(Array.isArray(gt))for(Ze=0;Ze<gt.length;++Ze)Fe.call(this,gt[Ze],et,Ze);else return Fe.call(this,gt,et,0);else if(typeof gt=="number"){if(gt>0)return gi.call(this,Je(gt|0),gt|0)}else if(Array.isArray(gt)){if(gt.length)return gi.call(this,gt,gt.length)}else return qn.call(this,gt)}return M(pt,{stats:Dt,destroy:function(){Mt.destroy()}})}var Eo=Dn.setFBO=gs({framebuffer:$i.define.call(null,Vg,"framebuffer")});function Mo(Sr,wi){var Ri=0;yr.procs.poll();var ms=wi.color;ms&&(He.clearColor(+ms[0]||0,+ms[1]||0,+ms[2]||0,+ms[3]||0),Ri|=Qa),"depth"in wi&&(He.clearDepth(+wi.depth),Ri|=vu),"stencil"in wi&&(He.clearStencil(wi.stencil|0),Ri|=gc),Te(!!Ri,"called regl.clear with no buffer specified"),He.clear(Ri)}function ss(Sr){if(Te(typeof Sr=="object"&&Sr,"regl.clear() takes an object as input"),"framebuffer"in Sr)if(Sr.framebuffer&&Sr.framebuffer_reglType==="framebufferCube")for(var wi=0;wi<6;++wi)Eo(M({framebuffer:Sr.framebuffer.faces[wi]},Sr),Mo);else Eo(Sr,Mo);else Mo(null,Sr)}function Ss(Sr){Te.type(Sr,"function","regl.frame() callback must be a function"),nn.push(Sr);function wi(){var Ri=el(nn,Sr);Te(Ri>=0,"cannot cancel a frame twice");function ms(){var zc=el(nn,ms);nn[zc]=nn[nn.length-1],nn.length-=1,nn.length<=0&&Ii()}nn[Ri]=ms}return oi(),{cancel:wi}}function Oo(){var Sr=Nn.viewport,wi=Nn.scissor_box;Sr[0]=Sr[1]=wi[0]=wi[1]=0,fn.viewportWidth=fn.framebufferWidth=fn.drawingBufferWidth=Sr[2]=wi[2]=He.drawingBufferWidth,fn.viewportHeight=fn.framebufferHeight=fn.drawingBufferHeight=Sr[3]=wi[3]=He.drawingBufferHeight}function $o(){fn.tick+=1,fn.time=Kr(),Oo(),yr.procs.poll()}function vs(){Pn.refresh(),Oo(),yr.procs.refresh(),pn&&pn.update()}function Kr(){return(ni()-vn)/1e3}vs();function Wo(Sr,wi){Te.type(wi,"function","listener callback must be a function");var Ri;switch(Sr){case"frame":return Ss(wi);case"lost":Ri=Pr;break;case"restore":Ri=Yr;break;case"destroy":Ri=nr;break;default:Te.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ri.push(wi),{cancel:function(){for(var ms=0;ms<Ri.length;++ms)if(Ri[ms]===wi){Ri[ms]=Ri[Ri.length-1],Ri.pop();return}}}}var zi=M(gs,{clear:ss,prop:$i.define.bind(null,Vg),context:$i.define.bind(null,K0),this:$i.define.bind(null,q0),draw:gs({}),buffer:function(Sr){return yn.create(Sr,Ug,!1,!1)},elements:function(Sr){return $n.create(Sr,!1)},texture:Pn.create2D,cube:Pn.createCube,renderbuffer:ln.create,framebuffer:Dn.create,framebufferCube:Dn.createCube,vao:Xn.createVAO,attributes:Tt,frame:Ss,on:Wo,limits:Ft,hasExtension:function(Sr){return Ft.extensions.indexOf(Sr.toLowerCase())>=0},read:Fr,destroy:di,_gl:He,_refresh:vs,poll:function(){$o(),pn&&pn.update()},now:Kr,stats:on});return Me.onDone(null,zi),zi}return Bd})},94633:function(De){De.exports=function(J){return L(M(J),J)},De.exports.array=L;function L(J,z){var Z=J.length,ee=new Array(Z),Q={},ue=Z,oe=j(z),ie=D(J);for(z.forEach(function(he){if(!ie.has(he[0])||!ie.has(he[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});ue--;)Q[ue]||ne(J[ue],ue,new Set);return ee;function ne(he,Ne,le){if(le.has(he)){var be;try{be=", node was:"+JSON.stringify(he)}catch(fe){be=""}throw new Error("Cyclic dependency"+be)}if(!ie.has(he))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(he));if(!Q[Ne]){Q[Ne]=!0;var se=oe.get(he)||new Set;if(se=Array.from(se),Ne=se.length){le.add(he);do{var ce=se[--Ne];ne(ce,ie.get(ce),le)}while(Ne);le.delete(he)}ee[--Z]=he}}}function M(J){for(var z=new Set,Z=0,ee=J.length;Z<ee;Z++){var Q=J[Z];z.add(Q[0]),z.add(Q[1])}return Array.from(z)}function j(J){for(var z=new Map,Z=0,ee=J.length;Z<ee;Z++){var Q=J[Z];z.has(Q[0])||z.set(Q[0],new Set),z.has(Q[1])||z.set(Q[1],new Set),z.get(Q[0]).add(Q[1])}return z}function D(J){for(var z=new Map,Z=0,ee=J.length;Z<ee;Z++)z.set(J[Z],Z);return z}},17061:function(De,L,M){var j=M(18698).default;function D(){"use strict";De.exports=D=function(){return J},De.exports.__esModule=!0,De.exports.default=De.exports;var J={},z=Object.prototype,Z=z.hasOwnProperty,ee=Object.defineProperty||function(hn,vt,kt){hn[vt]=kt.value},Q=typeof Symbol=="function"?Symbol:{},ue=Q.iterator||"@@iterator",oe=Q.asyncIterator||"@@asyncIterator",ie=Q.toStringTag||"@@toStringTag";function ne(hn,vt,kt){return Object.defineProperty(hn,vt,{value:kt,enumerable:!0,configurable:!0,writable:!0}),hn[vt]}try{ne({},"")}catch(hn){ne=function(kt,jn,Zt){return kt[jn]=Zt}}function he(hn,vt,kt,jn){var Zt=vt&&vt.prototype instanceof be?vt:be,gr=Object.create(Zt.prototype),Nr=new mn(jn||[]);return ee(gr,"_invoke",{value:Be(hn,kt,Nr)}),gr}function Ne(hn,vt,kt){try{return{type:"normal",arg:hn.call(vt,kt)}}catch(jn){return{type:"throw",arg:jn}}}J.wrap=he;var le={};function be(){}function se(){}function ce(){}var fe={};ne(fe,ue,function(){return this});var we=Object.getPrototypeOf,pe=we&&we(we(Pe([])));pe&&pe!==z&&Z.call(pe,ue)&&(fe=pe);var Ee=ce.prototype=be.prototype=Object.create(fe);function it(hn){["next","throw","return"].forEach(function(vt){ne(hn,vt,function(kt){return this._invoke(vt,kt)})})}function G(hn,vt){function kt(Zt,gr,Nr,Qn){var Hr=Ne(hn[Zt],hn,gr);if(Hr.type!=="throw"){var vr=Hr.arg,Le=vr.value;return Le&&j(Le)=="object"&&Z.call(Le,"__await")?vt.resolve(Le.__await).then(function(Ve){kt("next",Ve,Nr,Qn)},function(Ve){kt("throw",Ve,Nr,Qn)}):vt.resolve(Le).then(function(Ve){vr.value=Ve,Nr(vr)},function(Ve){return kt("throw",Ve,Nr,Qn)})}Qn(Hr.arg)}var jn;ee(this,"_invoke",{value:function(gr,Nr){function Qn(){return new vt(function(Hr,vr){kt(gr,Nr,Hr,vr)})}return jn=jn?jn.then(Qn,Qn):Qn()}})}function Be(hn,vt,kt){var jn="suspendedStart";return function(Zt,gr){if(jn==="executing")throw new Error("Generator is already running");if(jn==="completed"){if(Zt==="throw")throw gr;return In()}for(kt.method=Zt,kt.arg=gr;;){var Nr=kt.delegate;if(Nr){var Qn=Ke(Nr,kt);if(Qn){if(Qn===le)continue;return Qn}}if(kt.method==="next")kt.sent=kt._sent=kt.arg;else if(kt.method==="throw"){if(jn==="suspendedStart")throw jn="completed",kt.arg;kt.dispatchException(kt.arg)}else kt.method==="return"&&kt.abrupt("return",kt.arg);jn="executing";var Hr=Ne(hn,vt,kt);if(Hr.type==="normal"){if(jn=kt.done?"completed":"suspendedYield",Hr.arg===le)continue;return{value:Hr.arg,done:kt.done}}Hr.type==="throw"&&(jn="completed",kt.method="throw",kt.arg=Hr.arg)}}}function Ke(hn,vt){var kt=vt.method,jn=hn.iterator[kt];if(jn===void 0)return vt.delegate=null,kt==="throw"&&hn.iterator.return&&(vt.method="return",vt.arg=void 0,Ke(hn,vt),vt.method==="throw")||kt!=="return"&&(vt.method="throw",vt.arg=new TypeError("The iterator does not provide a '"+kt+"' method")),le;var Zt=Ne(jn,hn.iterator,vt.arg);if(Zt.type==="throw")return vt.method="throw",vt.arg=Zt.arg,vt.delegate=null,le;var gr=Zt.arg;return gr?gr.done?(vt[hn.resultName]=gr.value,vt.next=hn.nextLoc,vt.method!=="return"&&(vt.method="next",vt.arg=void 0),vt.delegate=null,le):gr:(vt.method="throw",vt.arg=new TypeError("iterator result is not an object"),vt.delegate=null,le)}function dt(hn){var vt={tryLoc:hn[0]};1 in hn&&(vt.catchLoc=hn[1]),2 in hn&&(vt.finallyLoc=hn[2],vt.afterLoc=hn[3]),this.tryEntries.push(vt)}function jt(hn){var vt=hn.completion||{};vt.type="normal",delete vt.arg,hn.completion=vt}function mn(hn){this.tryEntries=[{tryLoc:"root"}],hn.forEach(dt,this),this.reset(!0)}function Pe(hn){if(hn){var vt=hn[ue];if(vt)return vt.call(hn);if(typeof hn.next=="function")return hn;if(!isNaN(hn.length)){var kt=-1,jn=function Zt(){for(;++kt<hn.length;)if(Z.call(hn,kt))return Zt.value=hn[kt],Zt.done=!1,Zt;return Zt.value=void 0,Zt.done=!0,Zt};return jn.next=jn}}return{next:In}}function In(){return{value:void 0,done:!0}}return se.prototype=ce,ee(Ee,"constructor",{value:ce,configurable:!0}),ee(ce,"constructor",{value:se,configurable:!0}),se.displayName=ne(ce,ie,"GeneratorFunction"),J.isGeneratorFunction=function(hn){var vt=typeof hn=="function"&&hn.constructor;return!!vt&&(vt===se||(vt.displayName||vt.name)==="GeneratorFunction")},J.mark=function(hn){return Object.setPrototypeOf?Object.setPrototypeOf(hn,ce):(hn.__proto__=ce,ne(hn,ie,"GeneratorFunction")),hn.prototype=Object.create(Ee),hn},J.awrap=function(hn){return{__await:hn}},it(G.prototype),ne(G.prototype,oe,function(){return this}),J.AsyncIterator=G,J.async=function(hn,vt,kt,jn,Zt){Zt===void 0&&(Zt=Promise);var gr=new G(he(hn,vt,kt,jn),Zt);return J.isGeneratorFunction(vt)?gr:gr.next().then(function(Nr){return Nr.done?Nr.value:gr.next()})},it(Ee),ne(Ee,ie,"Generator"),ne(Ee,ue,function(){return this}),ne(Ee,"toString",function(){return"[object Generator]"}),J.keys=function(hn){var vt=Object(hn),kt=[];for(var jn in vt)kt.push(jn);return kt.reverse(),function Zt(){for(;kt.length;){var gr=kt.pop();if(gr in vt)return Zt.value=gr,Zt.done=!1,Zt}return Zt.done=!0,Zt}},J.values=Pe,mn.prototype={constructor:mn,reset:function(vt){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(jt),!vt)for(var kt in this)kt.charAt(0)==="t"&&Z.call(this,kt)&&!isNaN(+kt.slice(1))&&(this[kt]=void 0)},stop:function(){this.done=!0;var vt=this.tryEntries[0].completion;if(vt.type==="throw")throw vt.arg;return this.rval},dispatchException:function(vt){if(this.done)throw vt;var kt=this;function jn(vr,Le){return Nr.type="throw",Nr.arg=vt,kt.next=vr,Le&&(kt.method="next",kt.arg=void 0),!!Le}for(var Zt=this.tryEntries.length-1;Zt>=0;--Zt){var gr=this.tryEntries[Zt],Nr=gr.completion;if(gr.tryLoc==="root")return jn("end");if(gr.tryLoc<=this.prev){var Qn=Z.call(gr,"catchLoc"),Hr=Z.call(gr,"finallyLoc");if(Qn&&Hr){if(this.prev<gr.catchLoc)return jn(gr.catchLoc,!0);if(this.prev<gr.finallyLoc)return jn(gr.finallyLoc)}else if(Qn){if(this.prev<gr.catchLoc)return jn(gr.catchLoc,!0)}else{if(!Hr)throw new Error("try statement without catch or finally");if(this.prev<gr.finallyLoc)return jn(gr.finallyLoc)}}}},abrupt:function(vt,kt){for(var jn=this.tryEntries.length-1;jn>=0;--jn){var Zt=this.tryEntries[jn];if(Zt.tryLoc<=this.prev&&Z.call(Zt,"finallyLoc")&&this.prev<Zt.finallyLoc){var gr=Zt;break}}gr&&(vt==="break"||vt==="continue")&&gr.tryLoc<=kt&&kt<=gr.finallyLoc&&(gr=null);var Nr=gr?gr.completion:{};return Nr.type=vt,Nr.arg=kt,gr?(this.method="next",this.next=gr.finallyLoc,le):this.complete(Nr)},complete:function(vt,kt){if(vt.type==="throw")throw vt.arg;return vt.type==="break"||vt.type==="continue"?this.next=vt.arg:vt.type==="return"?(this.rval=this.arg=vt.arg,this.method="return",this.next="end"):vt.type==="normal"&&kt&&(this.next=kt),le},finish:function(vt){for(var kt=this.tryEntries.length-1;kt>=0;--kt){var jn=this.tryEntries[kt];if(jn.finallyLoc===vt)return this.complete(jn.completion,jn.afterLoc),jt(jn),le}},catch:function(vt){for(var kt=this.tryEntries.length-1;kt>=0;--kt){var jn=this.tryEntries[kt];if(jn.tryLoc===vt){var Zt=jn.completion;if(Zt.type==="throw"){var gr=Zt.arg;jt(jn)}return gr}}throw new Error("illegal catch attempt")},delegateYield:function(vt,kt,jn){return this.delegate={iterator:Pe(vt),resultName:kt,nextLoc:jn},this.method==="next"&&(this.arg=void 0),le}},J}De.exports=D,De.exports.__esModule=!0,De.exports.default=De.exports},18698:function(De){function L(M){return De.exports=L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},De.exports.__esModule=!0,De.exports.default=De.exports,L(M)}De.exports=L,De.exports.__esModule=!0,De.exports.default=De.exports},64687:function(De,L,M){var j=M(17061)();De.exports=j;try{regeneratorRuntime=j}catch(D){typeof globalThis=="object"?globalThis.regeneratorRuntime=j:Function("r","regeneratorRuntime = r")(j)}},11155:function(De){function L(M,j,D,J,z){var Z={};return Object.keys(J).forEach(function(ee){Z[ee]=J[ee]}),Z.enumerable=!!Z.enumerable,Z.configurable=!!Z.configurable,("value"in Z||Z.initializer)&&(Z.writable=!0),Z=D.slice().reverse().reduce(function(ee,Q){return Q(M,j,ee)||ee},Z),z&&Z.initializer!==void 0&&(Z.value=Z.initializer?Z.initializer.call(z):void 0,Z.initializer=void 0),Z.initializer===void 0&&(Object.defineProperty(M,j,Z),Z=null),Z}De.exports=L,De.exports.__esModule=!0,De.exports.default=De.exports},43809:function(De){function L(M,j,D,J){D&&Object.defineProperty(M,j,{enumerable:D.enumerable,configurable:D.configurable,writable:D.writable,value:D.initializer?D.initializer.call(J):void 0})}De.exports=L,De.exports.__esModule=!0,De.exports.default=De.exports},60334:function(De){function L(M,j){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}De.exports=L,De.exports.__esModule=!0,De.exports.default=De.exports},68207:function(De){(function(L,M){De.exports=M()})(this,function(){"use strict";function L(Le){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ve){return typeof Ve}:function(Ve){return Ve&&typeof Symbol=="function"&&Ve.constructor===Symbol&&Ve!==Symbol.prototype?"symbol":typeof Ve},L(Le)}var M=/^\s+/,j=/\s+$/;function D(Le,Ve){if(Le=Le||"",Ve=Ve||{},Le instanceof D)return Le;if(!(this instanceof D))return new D(Le,Ve);var Xe=J(Le);this._originalInput=Le,this._r=Xe.r,this._g=Xe.g,this._b=Xe.b,this._a=Xe.a,this._roundA=Math.round(100*this._a)/100,this._format=Ve.format||Xe.format,this._gradientType=Ve.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Xe.ok}D.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Ve=this.toRgb();return(Ve.r*299+Ve.g*587+Ve.b*114)/1e3},getLuminance:function(){var Ve=this.toRgb(),Xe,Vt,Rn,Fn,_r,ri;return Xe=Ve.r/255,Vt=Ve.g/255,Rn=Ve.b/255,Xe<=.03928?Fn=Xe/12.92:Fn=Math.pow((Xe+.055)/1.055,2.4),Vt<=.03928?_r=Vt/12.92:_r=Math.pow((Vt+.055)/1.055,2.4),Rn<=.03928?ri=Rn/12.92:ri=Math.pow((Rn+.055)/1.055,2.4),.2126*Fn+.7152*_r+.0722*ri},setAlpha:function(Ve){return this._a=jt(Ve),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Ve=Q(this._r,this._g,this._b);return{h:Ve.h*360,s:Ve.s,v:Ve.v,a:this._a}},toHsvString:function(){var Ve=Q(this._r,this._g,this._b),Xe=Math.round(Ve.h*360),Vt=Math.round(Ve.s*100),Rn=Math.round(Ve.v*100);return this._a==1?"hsv("+Xe+", "+Vt+"%, "+Rn+"%)":"hsva("+Xe+", "+Vt+"%, "+Rn+"%, "+this._roundA+")"},toHsl:function(){var Ve=Z(this._r,this._g,this._b);return{h:Ve.h*360,s:Ve.s,l:Ve.l,a:this._a}},toHslString:function(){var Ve=Z(this._r,this._g,this._b),Xe=Math.round(Ve.h*360),Vt=Math.round(Ve.s*100),Rn=Math.round(Ve.l*100);return this._a==1?"hsl("+Xe+", "+Vt+"%, "+Rn+"%)":"hsla("+Xe+", "+Vt+"%, "+Rn+"%, "+this._roundA+")"},toHex:function(Ve){return oe(this._r,this._g,this._b,Ve)},toHexString:function(Ve){return"#"+this.toHex(Ve)},toHex8:function(Ve){return ie(this._r,this._g,this._b,this._a,Ve)},toHex8String:function(Ve){return"#"+this.toHex8(Ve)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(mn(this._r,255)*100)+"%",g:Math.round(mn(this._g,255)*100)+"%",b:Math.round(mn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(mn(this._r,255)*100)+"%, "+Math.round(mn(this._g,255)*100)+"%, "+Math.round(mn(this._b,255)*100)+"%)":"rgba("+Math.round(mn(this._r,255)*100)+"%, "+Math.round(mn(this._g,255)*100)+"%, "+Math.round(mn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ke[oe(this._r,this._g,this._b,!0)]||!1},toFilter:function(Ve){var Xe="#"+ne(this._r,this._g,this._b,this._a),Vt=Xe,Rn=this._gradientType?"GradientType = 1, ":"";if(Ve){var Fn=D(Ve);Vt="#"+ne(Fn._r,Fn._g,Fn._b,Fn._a)}return"progid:DXImageTransform.Microsoft.gradient("+Rn+"startColorstr="+Xe+",endColorstr="+Vt+")"},toString:function(Ve){var Xe=!!Ve;Ve=Ve||this._format;var Vt=!1,Rn=this._a<1&&this._a>=0,Fn=!Xe&&Rn&&(Ve==="hex"||Ve==="hex6"||Ve==="hex3"||Ve==="hex4"||Ve==="hex8"||Ve==="name");return Fn?Ve==="name"&&this._a===0?this.toName():this.toRgbString():(Ve==="rgb"&&(Vt=this.toRgbString()),Ve==="prgb"&&(Vt=this.toPercentageRgbString()),(Ve==="hex"||Ve==="hex6")&&(Vt=this.toHexString()),Ve==="hex3"&&(Vt=this.toHexString(!0)),Ve==="hex4"&&(Vt=this.toHex8String(!0)),Ve==="hex8"&&(Vt=this.toHex8String()),Ve==="name"&&(Vt=this.toName()),Ve==="hsl"&&(Vt=this.toHslString()),Ve==="hsv"&&(Vt=this.toHsvString()),Vt||this.toHexString())},clone:function(){return D(this.toString())},_applyModification:function(Ve,Xe){var Vt=Ve.apply(null,[this].concat([].slice.call(Xe)));return this._r=Vt._r,this._g=Vt._g,this._b=Vt._b,this.setAlpha(Vt._a),this},lighten:function(){return this._applyModification(be,arguments)},brighten:function(){return this._applyModification(se,arguments)},darken:function(){return this._applyModification(ce,arguments)},desaturate:function(){return this._applyModification(he,arguments)},saturate:function(){return this._applyModification(Ne,arguments)},greyscale:function(){return this._applyModification(le,arguments)},spin:function(){return this._applyModification(fe,arguments)},_applyCombination:function(Ve,Xe){return Ve.apply(null,[this].concat([].slice.call(Xe)))},analogous:function(){return this._applyCombination(it,arguments)},complement:function(){return this._applyCombination(we,arguments)},monochromatic:function(){return this._applyCombination(G,arguments)},splitcomplement:function(){return this._applyCombination(Ee,arguments)},triad:function(){return this._applyCombination(pe,[3])},tetrad:function(){return this._applyCombination(pe,[4])}},D.fromRatio=function(Le,Ve){if(L(Le)=="object"){var Xe={};for(var Vt in Le)Le.hasOwnProperty(Vt)&&(Vt==="a"?Xe[Vt]=Le[Vt]:Xe[Vt]=jn(Le[Vt]));Le=Xe}return D(Le,Ve)};function J(Le){var Ve={r:0,g:0,b:0},Xe=1,Vt=null,Rn=null,Fn=null,_r=!1,ri=!1;return typeof Le=="string"&&(Le=Hr(Le)),L(Le)=="object"&&(Qn(Le.r)&&Qn(Le.g)&&Qn(Le.b)?(Ve=z(Le.r,Le.g,Le.b),_r=!0,ri=String(Le.r).substr(-1)==="%"?"prgb":"rgb"):Qn(Le.h)&&Qn(Le.s)&&Qn(Le.v)?(Vt=jn(Le.s),Rn=jn(Le.v),Ve=ue(Le.h,Vt,Rn),_r=!0,ri="hsv"):Qn(Le.h)&&Qn(Le.s)&&Qn(Le.l)&&(Vt=jn(Le.s),Fn=jn(Le.l),Ve=ee(Le.h,Vt,Fn),_r=!0,ri="hsl"),Le.hasOwnProperty("a")&&(Xe=Le.a)),Xe=jt(Xe),{ok:_r,format:Le.format||ri,r:Math.min(255,Math.max(Ve.r,0)),g:Math.min(255,Math.max(Ve.g,0)),b:Math.min(255,Math.max(Ve.b,0)),a:Xe}}function z(Le,Ve,Xe){return{r:mn(Le,255)*255,g:mn(Ve,255)*255,b:mn(Xe,255)*255}}function Z(Le,Ve,Xe){Le=mn(Le,255),Ve=mn(Ve,255),Xe=mn(Xe,255);var Vt=Math.max(Le,Ve,Xe),Rn=Math.min(Le,Ve,Xe),Fn,_r,ri=(Vt+Rn)/2;if(Vt==Rn)Fn=_r=0;else{var Gr=Vt-Rn;switch(_r=ri>.5?Gr/(2-Vt-Rn):Gr/(Vt+Rn),Vt){case Le:Fn=(Ve-Xe)/Gr+(Ve<Xe?6:0);break;case Ve:Fn=(Xe-Le)/Gr+2;break;case Xe:Fn=(Le-Ve)/Gr+4;break}Fn/=6}return{h:Fn,s:_r,l:ri}}function ee(Le,Ve,Xe){var Vt,Rn,Fn;Le=mn(Le,360),Ve=mn(Ve,100),Xe=mn(Xe,100);function _r(ti,Oi,lo){return lo<0&&(lo+=1),lo>1&&(lo-=1),lo<1/6?ti+(Oi-ti)*6*lo:lo<1/2?Oi:lo<2/3?ti+(Oi-ti)*(2/3-lo)*6:ti}if(Ve===0)Vt=Rn=Fn=Xe;else{var ri=Xe<.5?Xe*(1+Ve):Xe+Ve-Xe*Ve,Gr=2*Xe-ri;Vt=_r(Gr,ri,Le+1/3),Rn=_r(Gr,ri,Le),Fn=_r(Gr,ri,Le-1/3)}return{r:Vt*255,g:Rn*255,b:Fn*255}}function Q(Le,Ve,Xe){Le=mn(Le,255),Ve=mn(Ve,255),Xe=mn(Xe,255);var Vt=Math.max(Le,Ve,Xe),Rn=Math.min(Le,Ve,Xe),Fn,_r,ri=Vt,Gr=Vt-Rn;if(_r=Vt===0?0:Gr/Vt,Vt==Rn)Fn=0;else{switch(Vt){case Le:Fn=(Ve-Xe)/Gr+(Ve<Xe?6:0);break;case Ve:Fn=(Xe-Le)/Gr+2;break;case Xe:Fn=(Le-Ve)/Gr+4;break}Fn/=6}return{h:Fn,s:_r,v:ri}}function ue(Le,Ve,Xe){Le=mn(Le,360)*6,Ve=mn(Ve,100),Xe=mn(Xe,100);var Vt=Math.floor(Le),Rn=Le-Vt,Fn=Xe*(1-Ve),_r=Xe*(1-Rn*Ve),ri=Xe*(1-(1-Rn)*Ve),Gr=Vt%6,ti=[Xe,_r,Fn,Fn,ri,Xe][Gr],Oi=[ri,Xe,Xe,_r,Fn,Fn][Gr],lo=[Fn,Fn,ri,Xe,Xe,_r][Gr];return{r:ti*255,g:Oi*255,b:lo*255}}function oe(Le,Ve,Xe,Vt){var Rn=[kt(Math.round(Le).toString(16)),kt(Math.round(Ve).toString(16)),kt(Math.round(Xe).toString(16))];return Vt&&Rn[0].charAt(0)==Rn[0].charAt(1)&&Rn[1].charAt(0)==Rn[1].charAt(1)&&Rn[2].charAt(0)==Rn[2].charAt(1)?Rn[0].charAt(0)+Rn[1].charAt(0)+Rn[2].charAt(0):Rn.join("")}function ie(Le,Ve,Xe,Vt,Rn){var Fn=[kt(Math.round(Le).toString(16)),kt(Math.round(Ve).toString(16)),kt(Math.round(Xe).toString(16)),kt(Zt(Vt))];return Rn&&Fn[0].charAt(0)==Fn[0].charAt(1)&&Fn[1].charAt(0)==Fn[1].charAt(1)&&Fn[2].charAt(0)==Fn[2].charAt(1)&&Fn[3].charAt(0)==Fn[3].charAt(1)?Fn[0].charAt(0)+Fn[1].charAt(0)+Fn[2].charAt(0)+Fn[3].charAt(0):Fn.join("")}function ne(Le,Ve,Xe,Vt){var Rn=[kt(Zt(Vt)),kt(Math.round(Le).toString(16)),kt(Math.round(Ve).toString(16)),kt(Math.round(Xe).toString(16))];return Rn.join("")}D.equals=function(Le,Ve){return!Le||!Ve?!1:D(Le).toRgbString()==D(Ve).toRgbString()},D.random=function(){return D.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function he(Le,Ve){Ve=Ve===0?0:Ve||10;var Xe=D(Le).toHsl();return Xe.s-=Ve/100,Xe.s=Pe(Xe.s),D(Xe)}function Ne(Le,Ve){Ve=Ve===0?0:Ve||10;var Xe=D(Le).toHsl();return Xe.s+=Ve/100,Xe.s=Pe(Xe.s),D(Xe)}function le(Le){return D(Le).desaturate(100)}function be(Le,Ve){Ve=Ve===0?0:Ve||10;var Xe=D(Le).toHsl();return Xe.l+=Ve/100,Xe.l=Pe(Xe.l),D(Xe)}function se(Le,Ve){Ve=Ve===0?0:Ve||10;var Xe=D(Le).toRgb();return Xe.r=Math.max(0,Math.min(255,Xe.r-Math.round(255*-(Ve/100)))),Xe.g=Math.max(0,Math.min(255,Xe.g-Math.round(255*-(Ve/100)))),Xe.b=Math.max(0,Math.min(255,Xe.b-Math.round(255*-(Ve/100)))),D(Xe)}function ce(Le,Ve){Ve=Ve===0?0:Ve||10;var Xe=D(Le).toHsl();return Xe.l-=Ve/100,Xe.l=Pe(Xe.l),D(Xe)}function fe(Le,Ve){var Xe=D(Le).toHsl(),Vt=(Xe.h+Ve)%360;return Xe.h=Vt<0?360+Vt:Vt,D(Xe)}function we(Le){var Ve=D(Le).toHsl();return Ve.h=(Ve.h+180)%360,D(Ve)}function pe(Le,Ve){if(isNaN(Ve)||Ve<=0)throw new Error("Argument to polyad must be a positive number");for(var Xe=D(Le).toHsl(),Vt=[D(Le)],Rn=360/Ve,Fn=1;Fn<Ve;Fn++)Vt.push(D({h:(Xe.h+Fn*Rn)%360,s:Xe.s,l:Xe.l}));return Vt}function Ee(Le){var Ve=D(Le).toHsl(),Xe=Ve.h;return[D(Le),D({h:(Xe+72)%360,s:Ve.s,l:Ve.l}),D({h:(Xe+216)%360,s:Ve.s,l:Ve.l})]}function it(Le,Ve,Xe){Ve=Ve||6,Xe=Xe||30;var Vt=D(Le).toHsl(),Rn=360/Xe,Fn=[D(Le)];for(Vt.h=(Vt.h-(Rn*Ve>>1)+720)%360;--Ve;)Vt.h=(Vt.h+Rn)%360,Fn.push(D(Vt));return Fn}function G(Le,Ve){Ve=Ve||6;for(var Xe=D(Le).toHsv(),Vt=Xe.h,Rn=Xe.s,Fn=Xe.v,_r=[],ri=1/Ve;Ve--;)_r.push(D({h:Vt,s:Rn,v:Fn})),Fn=(Fn+ri)%1;return _r}D.mix=function(Le,Ve,Xe){Xe=Xe===0?0:Xe||50;var Vt=D(Le).toRgb(),Rn=D(Ve).toRgb(),Fn=Xe/100,_r={r:(Rn.r-Vt.r)*Fn+Vt.r,g:(Rn.g-Vt.g)*Fn+Vt.g,b:(Rn.b-Vt.b)*Fn+Vt.b,a:(Rn.a-Vt.a)*Fn+Vt.a};return D(_r)},D.readability=function(Le,Ve){var Xe=D(Le),Vt=D(Ve);return(Math.max(Xe.getLuminance(),Vt.getLuminance())+.05)/(Math.min(Xe.getLuminance(),Vt.getLuminance())+.05)},D.isReadable=function(Le,Ve,Xe){var Vt=D.readability(Le,Ve),Rn,Fn;switch(Fn=!1,Rn=vr(Xe),Rn.level+Rn.size){case"AAsmall":case"AAAlarge":Fn=Vt>=4.5;break;case"AAlarge":Fn=Vt>=3;break;case"AAAsmall":Fn=Vt>=7;break}return Fn},D.mostReadable=function(Le,Ve,Xe){var Vt=null,Rn=0,Fn,_r,ri,Gr;Xe=Xe||{},_r=Xe.includeFallbackColors,ri=Xe.level,Gr=Xe.size;for(var ti=0;ti<Ve.length;ti++)Fn=D.readability(Le,Ve[ti]),Fn>Rn&&(Rn=Fn,Vt=D(Ve[ti]));return D.isReadable(Le,Vt,{level:ri,size:Gr})||!_r?Vt:(Xe.includeFallbackColors=!1,D.mostReadable(Le,["#fff","#000"],Xe))};var Be=D.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ke=D.hexNames=dt(Be);function dt(Le){var Ve={};for(var Xe in Le)Le.hasOwnProperty(Xe)&&(Ve[Le[Xe]]=Xe);return Ve}function jt(Le){return Le=parseFloat(Le),(isNaN(Le)||Le<0||Le>1)&&(Le=1),Le}function mn(Le,Ve){hn(Le)&&(Le="100%");var Xe=vt(Le);return Le=Math.min(Ve,Math.max(0,parseFloat(Le))),Xe&&(Le=parseInt(Le*Ve,10)/100),Math.abs(Le-Ve)<1e-6?1:Le%Ve/parseFloat(Ve)}function Pe(Le){return Math.min(1,Math.max(0,Le))}function In(Le){return parseInt(Le,16)}function hn(Le){return typeof Le=="string"&&Le.indexOf(".")!=-1&&parseFloat(Le)===1}function vt(Le){return typeof Le=="string"&&Le.indexOf("%")!=-1}function kt(Le){return Le.length==1?"0"+Le:""+Le}function jn(Le){return Le<=1&&(Le=Le*100+"%"),Le}function Zt(Le){return Math.round(parseFloat(Le)*255).toString(16)}function gr(Le){return In(Le)/255}var Nr=function(){var Le="[-\\+]?\\d+%?",Ve="[-\\+]?\\d*\\.\\d+%?",Xe="(?:"+Ve+")|(?:"+Le+")",Vt="[\\s|\\(]+("+Xe+")[,|\\s]+("+Xe+")[,|\\s]+("+Xe+")\\s*\\)?",Rn="[\\s|\\(]+("+Xe+")[,|\\s]+("+Xe+")[,|\\s]+("+Xe+")[,|\\s]+("+Xe+")\\s*\\)?";return{CSS_UNIT:new RegExp(Xe),rgb:new RegExp("rgb"+Vt),rgba:new RegExp("rgba"+Rn),hsl:new RegExp("hsl"+Vt),hsla:new RegExp("hsla"+Rn),hsv:new RegExp("hsv"+Vt),hsva:new RegExp("hsva"+Rn),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Qn(Le){return!!Nr.CSS_UNIT.exec(Le)}function Hr(Le){Le=Le.replace(M,"").replace(j,"").toLowerCase();var Ve=!1;if(Be[Le])Le=Be[Le],Ve=!0;else if(Le=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Xe;return(Xe=Nr.rgb.exec(Le))?{r:Xe[1],g:Xe[2],b:Xe[3]}:(Xe=Nr.rgba.exec(Le))?{r:Xe[1],g:Xe[2],b:Xe[3],a:Xe[4]}:(Xe=Nr.hsl.exec(Le))?{h:Xe[1],s:Xe[2],l:Xe[3]}:(Xe=Nr.hsla.exec(Le))?{h:Xe[1],s:Xe[2],l:Xe[3],a:Xe[4]}:(Xe=Nr.hsv.exec(Le))?{h:Xe[1],s:Xe[2],v:Xe[3]}:(Xe=Nr.hsva.exec(Le))?{h:Xe[1],s:Xe[2],v:Xe[3],a:Xe[4]}:(Xe=Nr.hex8.exec(Le))?{r:In(Xe[1]),g:In(Xe[2]),b:In(Xe[3]),a:gr(Xe[4]),format:Ve?"name":"hex8"}:(Xe=Nr.hex6.exec(Le))?{r:In(Xe[1]),g:In(Xe[2]),b:In(Xe[3]),format:Ve?"name":"hex"}:(Xe=Nr.hex4.exec(Le))?{r:In(Xe[1]+""+Xe[1]),g:In(Xe[2]+""+Xe[2]),b:In(Xe[3]+""+Xe[3]),a:gr(Xe[4]+""+Xe[4]),format:Ve?"name":"hex8"}:(Xe=Nr.hex3.exec(Le))?{r:In(Xe[1]+""+Xe[1]),g:In(Xe[2]+""+Xe[2]),b:In(Xe[3]+""+Xe[3]),format:Ve?"name":"hex"}:!1}function vr(Le){var Ve,Xe;return Le=Le||{level:"AA",size:"small"},Ve=(Le.level||"AA").toUpperCase(),Xe=(Le.size||"small").toLowerCase(),Ve!=="AA"&&Ve!=="AAA"&&(Ve="AA"),Xe!=="small"&&Xe!=="large"&&(Xe="small"),{level:Ve,size:Xe}}return D})}}]);
